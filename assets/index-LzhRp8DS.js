(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const I of document.querySelectorAll('link[rel="modulepreload"]'))O(I);new MutationObserver(I=>{for(const B of I)if(B.type==="childList")for(const y of B.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&O(y)}).observe(document,{childList:!0,subtree:!0});function T(I){const B={};return I.integrity&&(B.integrity=I.integrity),I.referrerPolicy&&(B.referrerPolicy=I.referrerPolicy),I.crossOrigin==="use-credentials"?B.credentials="include":I.crossOrigin==="anonymous"?B.credentials="omit":B.credentials="same-origin",B}function O(I){if(I.ep)return;I.ep=!0;const B=T(I);fetch(I.href,B)}})();(function(){const W=document.createElement("link").relList;if(W&&W.supports&&W.supports("modulepreload"))return;for(const O of document.querySelectorAll('link[rel="modulepreload"]'))T(O);new MutationObserver(O=>{for(const I of O)if(I.type==="childList")for(const B of I.addedNodes)B.tagName==="LINK"&&B.rel==="modulepreload"&&T(B)}).observe(document,{childList:!0,subtree:!0});function m(O){const I={};return O.integrity&&(I.integrity=O.integrity),O.referrerPolicy&&(I.referrerPolicy=O.referrerPolicy),O.crossOrigin==="use-credentials"?I.credentials="include":O.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function T(O){if(O.ep)return;O.ep=!0;const I=m(O);fetch(O.href,I)}})();var OC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EC(W){return W&&W.__esModule&&Object.prototype.hasOwnProperty.call(W,"default")?W.default:W}var AC={exports:{}};(function(W,m){(function(T,O){W.exports=O()})(OC,()=>(()=>{var T={50792:y=>{var P=Object.prototype.hasOwnProperty,i="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(i=!1));function x(r,a,d){this.fn=r,this.context=a,this.once=d||!1}function c(r,a,d,n,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new x(d,n||r,p),v=i?i+a:a;return r._events[v]?r._events[v].fn?r._events[v]=[r._events[v],g]:r._events[v].push(g):(r._events[v]=g,r._eventsCount++),r}function h(r,a){--r._eventsCount===0?r._events=new u:delete r._events[a]}function o(){this._events=new u,this._eventsCount=0}o.prototype.eventNames=function(){var r=[],a,d;if(this._eventsCount===0)return r;for(d in a=this._events)P.call(a,d)&&r.push(i?d.slice(1):d);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(a)):r},o.prototype.listeners=function(r){var a=i?i+r:r,d=this._events[a];if(!d)return[];if(d.fn)return[d.fn];for(var n=0,p=d.length,g=new Array(p);n<p;n++)g[n]=d[n].fn;return g},o.prototype.listenerCount=function(r){var a=i?i+r:r,d=this._events[a];return d?d.fn?1:d.length:0},o.prototype.emit=function(r,a,d,n,p,g){var v=i?i+r:r;if(!this._events[v])return!1;var f=this._events[v],b=arguments.length,C,_;if(f.fn){switch(f.once&&this.removeListener(r,f.fn,void 0,!0),b){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,a),!0;case 3:return f.fn.call(f.context,a,d),!0;case 4:return f.fn.call(f.context,a,d,n),!0;case 5:return f.fn.call(f.context,a,d,n,p),!0;case 6:return f.fn.call(f.context,a,d,n,p,g),!0}for(_=1,C=new Array(b-1);_<b;_++)C[_-1]=arguments[_];f.fn.apply(f.context,C)}else{var M=f.length,E;for(_=0;_<M;_++)switch(f[_].once&&this.removeListener(r,f[_].fn,void 0,!0),b){case 1:f[_].fn.call(f[_].context);break;case 2:f[_].fn.call(f[_].context,a);break;case 3:f[_].fn.call(f[_].context,a,d);break;case 4:f[_].fn.call(f[_].context,a,d,n);break;default:if(!C)for(E=1,C=new Array(b-1);E<b;E++)C[E-1]=arguments[E];f[_].fn.apply(f[_].context,C)}}return!0},o.prototype.on=function(r,a,d){return c(this,r,a,d,!1)},o.prototype.once=function(r,a,d){return c(this,r,a,d,!0)},o.prototype.removeListener=function(r,a,d,n){var p=i?i+r:r;if(!this._events[p])return this;if(!a)return h(this,p),this;var g=this._events[p];if(g.fn)g.fn===a&&(!n||g.once)&&(!d||g.context===d)&&h(this,p);else{for(var v=0,f=[],b=g.length;v<b;v++)(g[v].fn!==a||n&&!g[v].once||d&&g[v].context!==d)&&f.push(g[v]);f.length?this._events[p]=f.length===1?f[0]:f:h(this,p)}return this},o.prototype.removeAllListeners=function(r){var a;return r?(a=i?i+r:r,this._events[a]&&h(this,a)):(this._events=new u,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,y.exports=o},11517:(y,P,i)=>{/**
* @author       samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(38829),x=function(c,h,o,r){for(var a=c[0],d=1;d<c.length;d++){var n=c[d];u(n,a,h,o,r),a=n}return c};y.exports=x},80318:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66979),x=function(c,h,o,r,a){return u(c,"angle",h,o,r,a)};y.exports=x},60757:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){for(var c=0;c<i.length;c++){var h=i[c];u.call(x,h)}return i};y.exports=P},69927:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){x===void 0&&(x=0);for(var c=x;c<i.length;c++){var h=i[c],o=!0;for(var r in u)h[r]!==u[r]&&(o=!1);if(o)return h}return null};y.exports=P},32265:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){x===void 0&&(x=0);for(var c=i.length-1;c>=x;c--){var h=i[c],o=!0;for(var r in u)h[r]!==u[r]&&(o=!1);if(o)return h}return null};y.exports=P},94420:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(11879),x=i(60461),c=i(95540),h=i(29747),o=i(41481),r=new o({sys:{queueDepthSort:h,events:{once:h}}},0,0,1,1).setOrigin(0,0),a=function(d,n){n===void 0&&(n={});var p=n.hasOwnProperty("width"),g=n.hasOwnProperty("height"),v=c(n,"width",-1),f=c(n,"height",-1),b=c(n,"cellWidth",1),C=c(n,"cellHeight",b),_=c(n,"position",x.TOP_LEFT),M=c(n,"x",0),E=c(n,"y",0),A=0,R=0,L=v*b,Y=f*C;r.setPosition(M,E),r.setSize(b,C);for(var F=0;F<d.length;F++)if(u(d[F],r,_),p&&v===-1)r.x+=b;else if(g&&f===-1)r.y+=C;else if(g&&!p){if(R+=C,r.y+=C,R===Y&&(R=0,A+=b,r.y=E,r.x+=b,A===L))break}else if(A+=b,r.x+=b,A===L&&(A=0,R+=C,r.x=M,r.y+=C,R===Y))break;return d};y.exports=a},41721:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66979),x=function(c,h,o,r,a){return u(c,"alpha",h,o,r,a)};y.exports=x},67285:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66979),x=function(c,h,o,r,a){return u(c,"x",h,o,r,a)};y.exports=x},9074:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66979),x=function(c,h,o,r,a,d,n){return o==null&&(o=h),u(c,"x",h,r,d,n),u(c,"y",o,a,d,n)};y.exports=x},75222:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66979),x=function(c,h,o,r,a){return u(c,"y",h,o,r,a)};y.exports=x},22983:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){x===void 0&&(x=0),c===void 0&&(c=6.28);for(var h=x,o=(c-x)/i.length,r=u.x,a=u.y,d=u.radius,n=0;n<i.length;n++)i[n].x=r+d*Math.cos(h),i[n].y=a+d*Math.sin(h),h+=o;return i};y.exports=P},95253:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){x===void 0&&(x=0),c===void 0&&(c=6.28);for(var h=x,o=(c-x)/i.length,r=u.width/2,a=u.height/2,d=0;d<i.length;d++)i[d].x=u.x+r*Math.cos(h),i[d].y=u.y+a*Math.sin(h),h+=o;return i};y.exports=P},88505:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(15258),x=i(26708),c=function(h,o,r){var a;r?a=x(o,r,h.length):a=u(o,h.length);for(var d=0;d<h.length;d++){var n=h[d],p=a[d];n.x=p.x,n.y=p.y}return h};y.exports=c},41346:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(14649),x=i(86003),c=i(49498),h=function(o,r,a){a===void 0&&(a=0);var d=u(r,!1,o.length);a>0?x(d,a):a<0&&c(d,Math.abs(a));for(var n=0;n<o.length;n++)o[n].x=d[n].x,o[n].y=d[n].y;return o};y.exports=h},11575:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(84993),x=function(c,h,o){var r=u({x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2},o),a=u({x1:h.x2,y1:h.y2,x2:h.x3,y2:h.y3},o),d=u({x1:h.x3,y1:h.y3,x2:h.x1,y2:h.y1},o);r.pop(),a.pop(),d.pop(),r=r.concat(a,d);for(var n=r.length/c.length,p=0,g=0;g<c.length;g++){var v=c[g],f=r[Math.floor(p)];v.x=f.x,v.y=f.y,p+=n}return c};y.exports=x},29953:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){for(var c=0;c<i.length;c++){var h=i[c];h.anims&&h.anims.play(u,x)}return i};y.exports=P},66979:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h,o){c===void 0&&(c=0),h===void 0&&(h=0),o===void 0&&(o=1);var r,a=0,d=i.length;if(o===1)for(r=h;r<d;r++)i[r][u]+=x+a*c,a++;else for(r=h;r>=0;r--)i[r][u]+=x+a*c,a++;return i};y.exports=P},43967:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h,o){c===void 0&&(c=0),h===void 0&&(h=0),o===void 0&&(o=1);var r,a=0,d=i.length;if(o===1)for(r=h;r<d;r++)i[r][u]=x+a*c,a++;else for(r=h;r>=0;r--)i[r][u]=x+a*c,a++;return i};y.exports=P},88926:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(28176),x=function(c,h){for(var o=0;o<c.length;o++)u(h,c[o]);return c};y.exports=x},33286:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(24820),x=function(c,h){for(var o=0;o<c.length;o++)u(h,c[o]);return c};y.exports=x},96e3:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(65822),x=function(c,h){for(var o=0;o<c.length;o++)u(h,c[o]);return c};y.exports=x},28789:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26597),x=function(c,h){for(var o=0;o<c.length;o++)u(h,c[o]);return c};y.exports=x},97154:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(90260),x=function(c,h){for(var o=0;o<c.length;o++)u(h,c[o]);return c};y.exports=x},20510:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66979),x=function(c,h,o,r,a){return u(c,"rotation",h,o,r,a)};y.exports=x},91051:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(1163),x=i(20339),c=function(h,o,r){for(var a=o.x,d=o.y,n=0;n<h.length;n++){var p=h[n];u(p,a,d,r,Math.max(1,x(p.x,p.y,a,d)))}return h};y.exports=c},76332:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(1163),x=function(c,h,o,r){var a=h.x,d=h.y;if(r===0)return c;for(var n=0;n<c.length;n++)u(c[n],a,d,o,r);return c};y.exports=x},61619:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66979),x=function(c,h,o,r,a){return u(c,"scaleX",h,o,r,a)};y.exports=x},94868:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66979),x=function(c,h,o,r,a,d,n){return o==null&&(o=h),u(c,"scaleX",h,r,d,n),u(c,"scaleY",o,a,d,n)};y.exports=x},95532:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66979),x=function(c,h,o,r,a){return u(c,"scaleY",h,o,r,a)};y.exports=x},8689:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r,a){return u(c,"alpha",h,o,r,a)};y.exports=x},2645:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r){return u(c,"blendMode",h,0,o,r)};y.exports=x},32372:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r,a){return u(c,"depth",h,o,r,a)};y.exports=x},85373:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){for(var c=0;c<i.length;c++)i[c].setInteractive(u,x);return i};y.exports=P},81583:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r,a,d,n){return o==null&&(o=h),u(c,"originX",h,r,d,n),u(c,"originY",o,a,d,n),c.forEach(function(p){p.updateDisplayOrigin()}),c};y.exports=x},79939:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r,a){return u(c,"rotation",h,o,r,a)};y.exports=x},2699:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r,a,d,n){return o==null&&(o=h),u(c,"scaleX",h,r,d,n),u(c,"scaleY",o,a,d,n)};y.exports=x},98739:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r,a){return u(c,"scaleX",h,o,r,a)};y.exports=x},98476:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r,a){return u(c,"scaleY",h,o,r,a)};y.exports=x},6207:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r,a,d,n){return o==null&&(o=h),u(c,"scrollFactorX",h,r,d,n),u(c,"scrollFactorY",o,a,d,n)};y.exports=x},6607:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r,a){return u(c,"scrollFactorX",h,o,r,a)};y.exports=x},72248:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r,a){return u(c,"scrollFactorY",h,o,r,a)};y.exports=x},14036:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h){for(var o=0;o<i.length;o++)i[o].setTint(u,x,c,h);return i};y.exports=P},50159:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r){return u(c,"visible",h,0,o,r)};y.exports=x},77597:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r,a){return u(c,"x",h,o,r,a)};y.exports=x},83194:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r,a,d,n){return o==null&&(o=h),u(c,"x",h,r,d,n),u(c,"y",o,a,d,n)};y.exports=x},67678:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43967),x=function(c,h,o,r,a){return u(c,"y",h,o,r,a)};y.exports=x},35850:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26099),x=function(c,h,o,r,a){r===void 0&&(r=0),a===void 0&&(a=new u);var d,n,p=c.length;if(p===1)d=c[0].x,n=c[0].y,c[0].x=h,c[0].y=o;else{var g=1,v=0;r===0&&(v=p-1,g=p-2),d=c[v].x,n=c[v].y,c[v].x=h,c[v].y=o;for(var f=0;f<p;f++)if(!(g>=p||g===-1)){var b=c[g],C=b.x,_=b.y;b.x=d,b.y=n,d=C,n=_,r===0?g--:g++}}return a.x=d,a.y=n,a};y.exports=x},8628:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(33680),x=function(c){return u(c)};y.exports=x},21837:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7602),x=function(c,h,o,r,a){a===void 0&&(a=!1);var d=Math.abs(r-o)/c.length,n;if(a)for(n=0;n<c.length;n++)c[n][h]+=u(n*d,o,r);else for(n=0;n<c.length;n++)c[n][h]=u(n*d,o,r);return c};y.exports=x},21910:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(54261),x=function(c,h,o,r,a){a===void 0&&(a=!1);var d=Math.abs(r-o)/c.length,n;if(a)for(n=0;n<c.length;n++)c[n][h]+=u(n*d,o,r);else for(n=0;n<c.length;n++)c[n][h]=u(n*d,o,r);return c};y.exports=x},62054:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h){if(h===void 0&&(h=!1),i.length===0)return i;if(i.length===1)return h?i[0][u]+=(c+x)/2:i[0][u]=(c+x)/2,i;var o=Math.abs(c-x)/(i.length-1),r;if(h)for(r=0;r<i.length;r++)i[r][u]+=r*o+x;else for(r=0;r<i.length;r++)i[r][u]=r*o+x;return i};y.exports=P},79815:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){for(var u=0;u<i.length;u++)i[u].visible=!i[u].visible;return i};y.exports=P},39665:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       samme <samme.npm@gmail.com>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(15994),x=function(c,h,o){o===void 0&&(o=0);for(var r=0;r<c.length;r++){var a=c[r];a.x=u(a.x,h.left-o,h.right+o),a.y=u(a.y,h.top-o,h.bottom+o)}return c};y.exports=x},61061:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={AlignTo:i(11517),Angle:i(80318),Call:i(60757),GetFirst:i(69927),GetLast:i(32265),GridAlign:i(94420),IncAlpha:i(41721),IncX:i(67285),IncXY:i(9074),IncY:i(75222),PlaceOnCircle:i(22983),PlaceOnEllipse:i(95253),PlaceOnLine:i(88505),PlaceOnRectangle:i(41346),PlaceOnTriangle:i(11575),PlayAnimation:i(29953),PropertyValueInc:i(66979),PropertyValueSet:i(43967),RandomCircle:i(88926),RandomEllipse:i(33286),RandomLine:i(96e3),RandomRectangle:i(28789),RandomTriangle:i(97154),Rotate:i(20510),RotateAround:i(91051),RotateAroundDistance:i(76332),ScaleX:i(61619),ScaleXY:i(94868),ScaleY:i(95532),SetAlpha:i(8689),SetBlendMode:i(2645),SetDepth:i(32372),SetHitArea:i(85373),SetOrigin:i(81583),SetRotation:i(79939),SetScale:i(2699),SetScaleX:i(98739),SetScaleY:i(98476),SetScrollFactor:i(6207),SetScrollFactorX:i(6607),SetScrollFactorY:i(72248),SetTint:i(14036),SetVisible:i(50159),SetX:i(77597),SetXY:i(83194),SetY:i(67678),ShiftPosition:i(35850),Shuffle:i(8628),SmootherStep:i(21910),SmoothStep:i(21837),Spread:i(62054),ToggleVisible:i(79815),WrapInRectangle:i(39665)}},42099:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45319),x=i(83419),c=i(74943),h=i(81957),o=i(41138),r=i(35154),a=i(90126),d=new x({initialize:function(n,p,g){this.manager=n,this.key=p,this.type="frame",this.frames=this.getFrames(n.textureManager,r(g,"frames",[]),r(g,"defaultTextureKey",null),r(g,"sortFrames",!0)),this.frameRate=r(g,"frameRate",null),this.duration=r(g,"duration",null),this.msPerFrame,this.skipMissedFrames=r(g,"skipMissedFrames",!0),this.delay=r(g,"delay",0),this.repeat=r(g,"repeat",0),this.repeatDelay=r(g,"repeatDelay",0),this.yoyo=r(g,"yoyo",!1),this.showBeforeDelay=r(g,"showBeforeDelay",!1),this.showOnStart=r(g,"showOnStart",!1),this.hideOnComplete=r(g,"hideOnComplete",!1),this.randomFrame=r(g,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(c.PAUSE_ALL,this.pause,this),this.manager.on(c.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(n,p,g,v){g===null&&v===null?(n.frameRate=24,n.duration=24/p*1e3):g&&v===null?(n.duration=g,n.frameRate=p/(g/1e3)):(n.frameRate=v,n.duration=p/v*1e3),n.msPerFrame=1e3/n.frameRate},addFrame:function(n){return this.addFrameAt(this.frames.length,n)},addFrameAt:function(n,p){var g=this.getFrames(this.manager.textureManager,p);if(g.length>0){if(n===0)this.frames=g.concat(this.frames);else if(n===this.frames.length)this.frames=this.frames.concat(g);else{var v=this.frames.slice(0,n),f=this.frames.slice(n);this.frames=v.concat(g,f)}this.updateFrameSequence()}return this},checkFrame:function(n){return n>=0&&n<this.frames.length},getFirstTick:function(n){n.accumulator=0,n.nextTick=n.frameRate===n.currentAnim.frameRate&&n.currentFrame.duration||n.msPerFrame},getFrameAt:function(n){return this.frames[n]},getFrames:function(n,p,g,v){v===void 0&&(v=!0);var f=[],b,C,_=1,M,E;if(typeof p=="string"){if(E=p,!n.exists(E))return console.warn('Texture "%s" not found',E),f;var A=n.get(E),R=A.getFrameNames();v&&a(R),p=[],R.forEach(function(U){p.push({key:E,frame:U})})}if(!Array.isArray(p)||p.length===0)return f;for(M=0;M<p.length;M++){var L=p[M],Y=r(L,"key",g);if(Y){var F=r(L,"frame",0),N=n.getFrame(Y,F);if(!N){console.warn('Texture "%s" not found',Y);continue}C=new o(Y,F,_,N),C.duration=r(L,"duration",0),C.isFirst=!b,b&&(b.nextFrame=C,C.prevFrame=b),f.push(C),b=C,_++}}if(f.length>0){C.isLast=!0,C.nextFrame=f[0],f[0].prevFrame=C;var z=1/(f.length-1);for(M=0;M<f.length;M++)f[M].progress=M*z}return f},getNextTick:function(n){n.accumulator-=n.nextTick,n.nextTick=n.frameRate===n.currentAnim.frameRate&&n.currentFrame.duration||n.msPerFrame},getFrameByProgress:function(n){return n=u(n,0,1),h(n,this.frames,"progress")},nextFrame:function(n){var p=n.currentFrame;p.isLast?n.yoyo?this.handleYoyoFrame(n,!1):n.repeatCounter>0?n.inReverse&&n.forward?n.forward=!1:this.repeatAnimation(n):n.complete():this.updateAndGetNextTick(n,p.nextFrame)},handleYoyoFrame:function(n,p){if(p||(p=!1),n.inReverse===!p&&n.repeatCounter>0){(n.repeatDelay===0||n.pendingRepeat)&&(n.forward=p),this.repeatAnimation(n);return}if(n.inReverse!==p&&n.repeatCounter===0){n.complete();return}n.forward=p;var g=p?n.currentFrame.nextFrame:n.currentFrame.prevFrame;this.updateAndGetNextTick(n,g)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(n){var p=n.currentFrame;p.isFirst?n.yoyo?this.handleYoyoFrame(n,!0):n.repeatCounter>0?n.inReverse&&!n.forward?this.repeatAnimation(n):(n.forward=!0,this.repeatAnimation(n)):n.complete():this.updateAndGetNextTick(n,p.prevFrame)},updateAndGetNextTick:function(n,p){n.setCurrentFrame(p),this.getNextTick(n)},removeFrame:function(n){var p=this.frames.indexOf(n);return p!==-1&&this.removeFrameAt(p),this},removeFrameAt:function(n){return this.frames.splice(n,1),this.updateFrameSequence(),this},repeatAnimation:function(n){if(n._pendingStop===2){if(n._pendingStopValue===0)return n.stop();n._pendingStopValue--}n.repeatDelay>0&&!n.pendingRepeat?(n.pendingRepeat=!0,n.accumulator-=n.nextTick,n.nextTick+=n.repeatDelay):(n.repeatCounter--,n.forward?n.setCurrentFrame(n.currentFrame.nextFrame):n.setCurrentFrame(n.currentFrame.prevFrame),n.isPlaying&&(this.getNextTick(n),n.handleRepeat()))},toJSON:function(){var n={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(p){n.frames.push(p.toJSON())}),n},updateFrameSequence:function(){for(var n=this.frames.length,p=1/(n-1),g,v=0;v<n;v++)g=this.frames[v],g.index=v+1,g.isFirst=!1,g.isLast=!1,g.progress=v*p,v===0?(g.isFirst=!0,n===1?(g.isLast=!0,g.nextFrame=g,g.prevFrame=g):(g.isLast=!1,g.prevFrame=this.frames[n-1],g.nextFrame=this.frames[v+1])):v===n-1&&n>1?(g.isLast=!0,g.prevFrame=this.frames[n-2],g.nextFrame=this.frames[0]):n>1&&(g.prevFrame=this.frames[v-1],g.nextFrame=this.frames[v+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(c.PAUSE_ALL,this.pause,this),this.manager.off(c.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var n=0;n<this.frames.length;n++)this.frames[n].destroy();this.frames=[],this.manager=null}});y.exports=d},41138:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h,o,r,a){a===void 0&&(a=!1),this.textureKey=c,this.textureFrame=h,this.index=o,this.frame=r,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=a},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});y.exports=x},60848:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(42099),x=i(83419),c=i(90330),h=i(50792),o=i(74943),r=i(8443),a=i(95540),d=i(35154),n=i(36383),p=i(20283),g=i(41836),v=new x({Extends:h,initialize:function(f){h.call(this),this.game=f,this.textureManager=null,this.globalTimeScale=1,this.anims=new c,this.mixes=new c,this.paused=!1,this.name="AnimationManager",f.events.once(r.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(r.DESTROY,this.destroy,this)},addMix:function(f,b,C){var _=this.anims,M=this.mixes,E=typeof f=="string"?f:f.key,A=typeof b=="string"?b:b.key;if(_.has(E)&&_.has(A)){var R=M.get(E);R||(R={}),R[A]=C,M.set(E,R)}return this},removeMix:function(f,b){var C=this.mixes,_=typeof f=="string"?f:f.key,M=C.get(_);if(M)if(b){var E=typeof b=="string"?b:b.key;M.hasOwnProperty(E)&&delete M[E]}else b||C.delete(_);return this},getMix:function(f,b){var C=this.mixes,_=typeof f=="string"?f:f.key,M=typeof b=="string"?b:b.key,E=C.get(_);return E&&E.hasOwnProperty(M)?E[M]:0},add:function(f,b){return this.anims.has(f)?(console.warn("Animation key exists: "+f),this):(b.key=f,this.anims.set(f,b),this.emit(o.ADD_ANIMATION,f,b),this)},exists:function(f){return this.anims.has(f)},createFromAseprite:function(f,b,C){var _=[],M=this.game.cache.json.get(f);if(!M)return console.warn("No Aseprite data found for: "+f),_;var E=this,A=d(M,"meta",null),R=d(M,"frames",null);if(A&&R){var L=d(A,"frameTags",[]);L.forEach(function(Y){var F=[],N=a(Y,"name",null),z=a(Y,"from",0),U=a(Y,"to",0),q=a(Y,"direction","forward");if(N&&(!b||b&&b.indexOf(N)>-1)){for(var Q=0,K=z;K<=U;K++){var et=K.toString(),H=R[et];if(H){var J=a(H,"duration",n.MAX_SAFE_INTEGER);F.push({key:f,frame:et,duration:J}),Q+=J}}q==="reverse"&&(F=F.reverse());var X={key:N,frames:F,duration:Q,yoyo:q==="pingpong"},Z;C?C.anims&&(Z=C.anims.create(X)):Z=E.create(X),Z&&_.push(Z)}})}return _},create:function(f){var b=f.key,C=!1;return b&&(C=this.get(b),C?console.warn("AnimationManager key already exists: "+b):(C=new u(this,b,f),this.anims.set(b,C),this.emit(o.ADD_ANIMATION,b,C))),C},fromJSON:function(f,b){b===void 0&&(b=!1),b&&this.anims.clear(),typeof f=="string"&&(f=JSON.parse(f));var C=[];if(f.hasOwnProperty("anims")&&Array.isArray(f.anims)){for(var _=0;_<f.anims.length;_++)C.push(this.create(f.anims[_]));f.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=f.globalTimeScale)}else f.hasOwnProperty("key")&&f.type==="frame"&&C.push(this.create(f));return C},generateFrameNames:function(f,b){var C=d(b,"prefix",""),_=d(b,"start",0),M=d(b,"end",0),E=d(b,"suffix",""),A=d(b,"zeroPad",0),R=d(b,"outputArray",[]),L=d(b,"frames",!1);if(!this.textureManager.exists(f))return console.warn('Texture "%s" not found',f),R;var Y=this.textureManager.get(f);if(!Y)return R;var F;if(b)for(L||(L=p(_,M)),F=0;F<L.length;F++){var N=C+g(L[F],A,"0",1)+E;Y.has(N)?R.push({key:f,frame:N}):console.warn('Frame "%s" not found in texture "%s"',N,f)}else for(L=Y.getFrameNames(),F=0;F<L.length;F++)R.push({key:f,frame:L[F]});return R},generateFrameNumbers:function(f,b){var C=d(b,"start",0),_=d(b,"end",-1),M=d(b,"first",!1),E=d(b,"outputArray",[]),A=d(b,"frames",!1);if(!this.textureManager.exists(f))return console.warn('Texture "%s" not found',f),E;var R=this.textureManager.get(f);if(!R)return E;M&&R.has(M)&&E.push({key:f,frame:M}),A||(_===-1&&(_=R.frameTotal-2),A=p(C,_));for(var L=0;L<A.length;L++){var Y=A[L];R.has(Y)?E.push({key:f,frame:Y}):console.warn('Frame "%s" not found in texture "%s"',Y,f)}return E},get:function(f){return this.anims.get(f)},getAnimsFromTexture:function(f){for(var b=this.textureManager.get(f),C=b.key,_=this.anims.getArray(),M=[],E=0;E<_.length;E++)for(var A=_[E],R=A.frames,L=0;L<R.length;L++)if(R[L].textureKey===C){M.push(A.key);break}return M},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(o.PAUSE_ALL)),this},play:function(f,b){Array.isArray(b)||(b=[b]);for(var C=0;C<b.length;C++)b[C].anims.play(f);return this},staggerPlay:function(f,b,C,_){C===void 0&&(C=0),_===void 0&&(_=!0),Array.isArray(b)||(b=[b]);var M=b.length;_||M--;for(var E=0;E<b.length;E++){var A=C<0?Math.abs(C)*(M-E):C*E;b[E].anims.playAfterDelay(f,A)}return this},remove:function(f){var b=this.get(f);return b&&(this.emit(o.REMOVE_ANIMATION,f,b),this.anims.delete(f),this.removeMix(f)),b},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(o.RESUME_ALL)),this},toJSON:function(f){var b={anims:[],globalTimeScale:this.globalTimeScale};return f!==void 0&&f!==""?b.anims.push(this.anims.get(f).toJSON()):this.anims.each(function(C,_){b.anims.push(_.toJSON())}),b},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});y.exports=v},9674:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(42099),x=i(30976),c=i(83419),h=i(90330),o=i(74943),r=i(95540),a=new c({initialize:function(d){this.parent=d,this.animationManager=d.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(d){var n=this.parent;if(d===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,n;Array.isArray(d)||(d=[d]);for(var p=0;p<d.length;p++){var g=d[p];this.nextAnim?this.nextAnimsQueue.push(g):this.nextAnim=g}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(d){this.isPlaying&&this.stop();var n=this.animationManager,p=typeof d=="string"?d:r(d,"key",null),g=this.exists(p)?this.get(p):n.get(p);if(!g)console.warn("Missing animation: "+p);else{this.currentAnim=g;var v=g.getTotalFrames(),f=r(d,"frameRate",g.frameRate),b=r(d,"duration",g.duration);g.calculateDuration(this,v,b,f),this.delay=r(d,"delay",g.delay),this.repeat=r(d,"repeat",g.repeat),this.repeatDelay=r(d,"repeatDelay",g.repeatDelay),this.yoyo=r(d,"yoyo",g.yoyo),this.showBeforeDelay=r(d,"showBeforeDelay",g.showBeforeDelay),this.showOnStart=r(d,"showOnStart",g.showOnStart),this.hideOnComplete=r(d,"hideOnComplete",g.hideOnComplete),this.skipMissedFrames=r(d,"skipMissedFrames",g.skipMissedFrames),this.randomFrame=r(d,"randomFrame",g.randomFrame),this.timeScale=r(d,"timeScale",this.timeScale);var C=r(d,"startFrame",0);C>v&&(C=0),this.randomFrame&&(C=x(0,v-1));var _=g.frames[C];C===0&&!this.forward&&(_=g.getLastFrame()),this.currentFrame=_}return this.parent},pause:function(d){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),d!==void 0&&this.setCurrentFrame(d),this.parent},resume:function(d){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),d!==void 0&&this.setCurrentFrame(d),this.parent},playAfterDelay:function(d,n){if(!this.isPlaying)this.delayCounter=n,this.play(d,!0);else{var p=this.nextAnim,g=this.nextAnimsQueue;p&&g.unshift(p),this.nextAnim=d,this._pendingStop=1,this._pendingStopValue=n}return this.parent},playAfterRepeat:function(d,n){if(n===void 0&&(n=1),!this.isPlaying)this.play(d);else{var p=this.nextAnim,g=this.nextAnimsQueue;p&&g.unshift(p),this.repeatCounter!==-1&&n>this.repeatCounter&&(n=this.repeatCounter),this.nextAnim=d,this._pendingStop=2,this._pendingStopValue=n}return this.parent},play:function(d,n){n===void 0&&(n=!1);var p=this.currentAnim,g=this.parent,v=typeof d=="string"?d:d.key;if(n&&this.isPlaying&&p.key===v)return g;if(p&&this.isPlaying){var f=this.animationManager.getMix(p.key,d);if(f>0)return this.playAfterDelay(d,f)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(d)},playReverse:function(d,n){n===void 0&&(n=!1);var p=typeof d=="string"?d:d.key;return n&&this.isPlaying&&this.currentAnim.key===p?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(d))},startAnimation:function(d){this.load(d);var n=this.currentAnim,p=this.parent;return n&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,n.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),p},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(d,n){var p=this.currentAnim;if(p){var g=this.currentFrame,v=this.parent,f=g.textureFrame;v.emit(d,p,g,v,f),n&&v.emit(n+p.key,p,g,v,f)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var d=this.currentFrame;if(!d)return 0;var n=d.progress;return this.inReverse&&(n*=-1),n},setProgress:function(d){return this.forward||(d=1-d),this.setCurrentFrame(this.currentAnim.getFrameByProgress(d)),this.parent},setRepeat:function(d){return this.repeatCounter=d===-1?Number.MAX_VALUE:d,this.parent},globalRemove:function(d,n){n===void 0&&(n=this.currentAnim),this.isPlaying&&n.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(d,n){d===void 0&&(d=!1),n===void 0&&(n=!1);var p=this.currentAnim,g=this.parent;return p?(n&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),p.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!d,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(p.frames[0]),this.parent):g},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var d=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(d)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var d=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(d)}return this.parent},stopAfterDelay:function(d){return this._pendingStop=1,this._pendingStopValue=d,this.parent},stopAfterRepeat:function(d){return d===void 0&&(d=1),this.repeatCounter!==-1&&d>this.repeatCounter&&(d=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=d,this.parent},stopOnFrame:function(d){return this._pendingStop=3,this._pendingStopValue=d,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(d,n){var p=this.currentAnim;if(!(!this.isPlaying||!p||p.paused)){if(this.accumulator+=n*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=n,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?p.nextFrame(this):p.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var g=0;do this.forward?p.nextFrame(this):p.previousFrame(this),g++;while(this.isPlaying&&this.accumulator>this.nextTick&&g<60)}}},setCurrentFrame:function(d){var n=this.parent;return this.currentFrame=d,n.texture=d.frame.texture,n.frame=d.frame,n.isCropped&&n.frame.updateCropUVs(n._crop,n.flipX,n.flipY),d.setAlpha&&(n.alpha=d.alpha),n.setSizeToFrame(),n._originComponent&&(d.frame.customPivot?n.setOrigin(d.frame.pivotX,d.frame.pivotY):n.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===d&&this.stop()),n},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(d){return this.anims?this.anims.get(d):null},exists:function(d){return this.anims?this.anims.has(d):!1},create:function(d){var n=d.key,p=!1;return n&&(p=this.get(n),p?console.warn("Animation key already exists: "+n):(p=new u(this,n,d),this.anims||(this.anims=new h),this.anims.set(n,p))),p},createFromAseprite:function(d,n){return this.animationManager.createFromAseprite(d,n,this.parent)},generateFrameNames:function(d,n){return this.animationManager.generateFrameNames(d,n)},generateFrameNumbers:function(d,n){return this.animationManager.generateFrameNumbers(d,n)},remove:function(d){var n=this.get(d);return n&&(this.currentAnim===n&&this.stop(),this.anims.delete(d)),n},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});y.exports=a},57090:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="add"},25312:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="animationcomplete"},89580:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="animationcomplete-"},52860:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="animationrepeat"},63850:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="animationrestart"},99085:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="animationstart"},28087:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="animationstop"},1794:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="animationupdate"},52562:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pauseall"},57953:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="remove"},68339:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="resumeall"},74943:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={ADD_ANIMATION:i(57090),ANIMATION_COMPLETE:i(25312),ANIMATION_COMPLETE_KEY:i(89580),ANIMATION_REPEAT:i(52860),ANIMATION_RESTART:i(63850),ANIMATION_START:i(99085),ANIMATION_STOP:i(28087),ANIMATION_UPDATE:i(1794),PAUSE_ALL:i(52562),REMOVE_ANIMATION:i(57953),RESUME_ALL:i(68339)}},60421:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Animation:i(42099),AnimationFrame:i(41138),AnimationManager:i(60848),AnimationState:i(9674),Events:i(74943)}},2161:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(90330),c=i(50792),h=i(24736),o=new u({initialize:function(){this.entries=new x,this.events=new c},add:function(r,a){return this.entries.set(r,a),this.events.emit(h.ADD,this,r,a),this},has:function(r){return this.entries.has(r)},exists:function(r){return this.entries.has(r)},get:function(r){return this.entries.get(r)},remove:function(r){var a=this.get(r);return a&&(this.entries.delete(r),this.events.emit(h.REMOVE,this,r,a.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});y.exports=o},24047:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2161),x=i(83419),c=i(8443),h=new x({initialize:function(o){this.game=o,this.binary=new u,this.bitmapFont=new u,this.json=new u,this.physics=new u,this.shader=new u,this.audio=new u,this.video=new u,this.text=new u,this.html=new u,this.obj=new u,this.tilemap=new u,this.xml=new u,this.custom={},this.game.events.once(c.DESTROY,this.destroy,this)},addCustom:function(o){return this.custom.hasOwnProperty(o)||(this.custom[o]=new u),this.custom[o]},destroy:function(){for(var o=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<o.length;r++)this[o[r]].destroy(),this[o[r]]=null;for(var a in this.custom)this.custom[a].destroy();this.custom=null,this.game=null}});y.exports=h},51464:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="add"},59261:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="remove"},24736:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={ADD:i(51464),REMOVE:i(59261)}},83388:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={BaseCache:i(2161),CacheManager:i(24047),Events:i(24736)}},71911:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(31401),c=i(39506),h=i(50792),o=i(19715),r=i(87841),a=i(61340),d=i(80333),n=i(26099),p=new u({Extends:h,Mixins:[x.AlphaSingle,x.Visible],initialize:function(g,v,f,b){g===void 0&&(g=0),v===void 0&&(v=0),f===void 0&&(f=0),b===void 0&&(b=0),h.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=g,this._y=v,this._width=f,this._height=b,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new a,this.transparent=!0,this.backgroundColor=d("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new n(f/2,b/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(g){this.renderList.push(g)},setOrigin:function(g,v){return g===void 0&&(g=.5),v===void 0&&(v=g),this.originX=g,this.originY=v,this},getScroll:function(g,v,f){f===void 0&&(f=new n);var b=this.width*.5,C=this.height*.5;return f.x=g-b,f.y=v-C,this.useBounds&&(f.x=this.clampX(f.x),f.y=this.clampY(f.y)),f},centerOnX:function(g){var v=this.width*.5;return this.midPoint.x=g,this.scrollX=g-v,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(g){var v=this.height*.5;return this.midPoint.y=g,this.scrollY=g-v,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(g,v){return this.centerOnX(g),this.centerOnY(v),this},centerToBounds:function(){if(this.useBounds){var g=this._bounds,v=this.width*.5,f=this.height*.5;this.midPoint.set(g.centerX,g.centerY),this.scrollX=g.centerX-v,this.scrollY=g.centerY-f}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(g){if(this.disableCull)return g;var v=this.matrix.matrix,f=v[0],b=v[1],C=v[2],_=v[3],M=f*_-b*C;if(!M)return g;var E=v[4],A=v[5],R=this.scrollX,L=this.scrollY,Y=this.width,F=this.height,N=this.y,z=N+F,U=this.x,q=U+Y,Q=this.culledObjects,K=g.length;M=1/M,Q.length=0;for(var et=0;et<K;++et){var H=g[et];if(!H.hasOwnProperty("width")||H.parentContainer){Q.push(H);continue}var J=H.width,X=H.height,Z=H.x-R*H.scrollFactorX-J*H.originX,$=H.y-L*H.scrollFactorY-X*H.originY,it=Z*f+$*C+E,nt=Z*b+$*_+A,at=(Z+J)*f+($+X)*C+E,ht=(Z+J)*b+($+X)*_+A;at>U&&it<q&&ht>N&&nt<z&&Q.push(H)}return Q},getWorldPoint:function(g,v,f){f===void 0&&(f=new n);var b=this.matrix.matrix,C=b[0],_=b[1],M=b[2],E=b[3],A=b[4],R=b[5],L=C*E-_*M;if(!L)return f.x=g,f.y=v,f;L=1/L;var Y=E*L,F=-_*L,N=-M*L,z=C*L,U=(M*R-E*A)*L,q=(_*A-C*R)*L,Q=Math.cos(this.rotation),K=Math.sin(this.rotation),et=this.zoomX,H=this.zoomY,J=this.scrollX,X=this.scrollY,Z=g+(J*Q-X*K)*et,$=v+(J*K+X*Q)*H;return f.x=Z*Y+$*N+U,f.y=Z*F+$*z+q,f},ignore:function(g){var v=this.id;Array.isArray(g)||(g=[g]);for(var f=0;f<g.length;f++){var b=g[f];Array.isArray(b)?this.ignore(b):b.isParent?this.ignore(b.getChildren()):b.cameraFilter|=v}return this},clampX:function(g){var v=this._bounds,f=this.displayWidth,b=v.x+(f-this.width)/2,C=Math.max(b,b+v.width-f);return g<b?g=b:g>C&&(g=C),g},clampY:function(g){var v=this._bounds,f=this.displayHeight,b=v.y+(f-this.height)/2,C=Math.max(b,b+v.height-f);return g<b?g=b:g>C&&(g=C),g},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(g){return g===void 0&&(g=0),this.rotation=c(g),this},setBackgroundColor:function(g){return g===void 0&&(g="rgba(0,0,0,0)"),this.backgroundColor=d(g),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(g,v,f,b,C){return C===void 0&&(C=!1),this._bounds.setTo(g,v,f,b),this.dirty=!0,this.useBounds=!0,C?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(g){g===void 0&&(g=new r);var v=this._bounds;return g.setTo(v.x,v.y,v.width,v.height),g},setName:function(g){return g===void 0&&(g=""),this.name=g,this},setPosition:function(g,v){return v===void 0&&(v=g),this.x=g,this.y=v,this},setRotation:function(g){return g===void 0&&(g=0),this.rotation=g,this},setRoundPixels:function(g){return this.roundPixels=g,this},setScene:function(g,v){v===void 0&&(v=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=g,this.isSceneCamera=v;var f=g.sys;return this.sceneManager=f.game.scene,this.scaleManager=f.scale,this.cameraManager=f.cameras,this.updateSystem(),this},setScroll:function(g,v){return v===void 0&&(v=g),this.scrollX=g,this.scrollY=v,this},setSize:function(g,v){return v===void 0&&(v=g),this.width=g,this.height=v,this},setViewport:function(g,v,f,b){return this.x=g,this.y=v,this.width=f,this.height=b,this},setZoom:function(g,v){return g===void 0&&(g=1),v===void 0&&(v=g),g===0&&(g=.001),v===0&&(v=.001),this.zoomX=g,this.zoomY=v,this},setMask:function(g,v){return v===void 0&&(v=!0),this.mask=g,this._maskCamera=v?this.cameraManager.default:this,this},clearMask:function(g){return g===void 0&&(g=!1),g&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var g={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(g.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),g},update:function(){},setIsSceneCamera:function(g){return this.isSceneCamera=g,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var g=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,v=this.sceneManager;g&&!this._customViewport?v.customViewports++:!g&&this._customViewport&&v.customViewports--,this.dirty=!0,this._customViewport=g}},destroy:function(){this.emit(o.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(g){this._x=g,this.updateSystem()}},y:{get:function(){return this._y},set:function(g){this._y=g,this.updateSystem()}},width:{get:function(){return this._width},set:function(g){this._width=g,this.updateSystem()}},height:{get:function(){return this._height},set:function(g){this._height=g,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(g){g!==this._scrollX&&(this._scrollX=g,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(g){g!==this._scrollY&&(this._scrollY=g,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(g){this._zoomX=g,this._zoomY=g,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(g){this._zoomX=g,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(g){this._zoomY=g,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(g){this._rotation=g,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});y.exports=p},38058:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(71911),x=i(67502),c=i(45319),h=i(83419),o=i(31401),r=i(20052),a=i(19715),d=i(28915),n=i(87841),p=i(26099),g=new h({Extends:u,Mixins:[o.PostPipeline],initialize:function(v,f,b,C){u.call(this,v,f,b,C),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new r.Fade(this),this.flashEffect=new r.Flash(this),this.shakeEffect=new r.Shake(this),this.panEffect=new r.Pan(this),this.rotateToEffect=new r.RotateTo(this),this.zoomEffect=new r.Zoom(this),this.lerp=new p(1,1),this.followOffset=new p,this.deadzone=null,this._follow=null},setDeadzone:function(v,f){if(v===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=v,this.deadzone.height=f):this.deadzone=new n(0,0,v,f),this._follow){var b=this.width/2,C=this.height/2,_=this._follow.x-this.followOffset.x,M=this._follow.y-this.followOffset.y;this.midPoint.set(_,M),this.scrollX=_-b,this.scrollY=M-C}x(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(v,f,b,C,_,M){return this.fadeEffect.start(!1,v,f,b,C,!0,_,M)},fadeOut:function(v,f,b,C,_,M){return this.fadeEffect.start(!0,v,f,b,C,!0,_,M)},fadeFrom:function(v,f,b,C,_,M,E){return this.fadeEffect.start(!1,v,f,b,C,_,M,E)},fade:function(v,f,b,C,_,M,E){return this.fadeEffect.start(!0,v,f,b,C,_,M,E)},flash:function(v,f,b,C,_,M,E){return this.flashEffect.start(v,f,b,C,_,M,E)},shake:function(v,f,b,C,_){return this.shakeEffect.start(v,f,b,C,_)},pan:function(v,f,b,C,_,M,E){return this.panEffect.start(v,f,b,C,_,M,E)},rotateTo:function(v,f,b,C,_,M,E){return this.rotateToEffect.start(v,f,b,C,_,M,E)},zoomTo:function(v,f,b,C,_,M){return this.zoomEffect.start(v,f,b,C,_,M)},preRender:function(){this.renderList.length=0;var v=this.width,f=this.height,b=v*.5,C=f*.5,_=this.zoomX,M=this.zoomY,E=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(_)&&Number.isInteger(M);var A=v*this.originX,R=f*this.originY,L=this._follow,Y=this.deadzone,F=this.scrollX,N=this.scrollY;Y&&x(Y,this.midPoint.x,this.midPoint.y);var z=!1;if(L&&!this.panEffect.isRunning){var U=this.lerp,q=L.x-this.followOffset.x,Q=L.y-this.followOffset.y;Y?(q<Y.x?F=d(F,F-(Y.x-q),U.x):q>Y.right&&(F=d(F,F+(q-Y.right),U.x)),Q<Y.y?N=d(N,N-(Y.y-Q),U.y):Q>Y.bottom&&(N=d(N,N+(Q-Y.bottom),U.y))):(F=d(F,q-A,U.x),N=d(N,Q-R,U.y)),z=!0}this.roundPixels&&(F=Math.floor(F),N=Math.floor(N)),this.useBounds&&(F=this.clampX(F),N=this.clampY(N)),this.scrollX=F,this.scrollY=N;var K=F+b,et=N+C;this.midPoint.set(K,et);var H=Math.floor(v/_+.5),J=Math.floor(f/M+.5),X=Math.floor(K-H/2+.5),Z=Math.floor(et-J/2+.5);this.worldView.setTo(X,Z,H,J),E.applyITRS(Math.floor(this.x+A+.5),Math.floor(this.y+R+.5),this.rotation,_,M),E.translate(-A,-R),this.shakeEffect.preRender(),z&&this.emit(a.FOLLOW_UPDATE,this,L)},setLerp:function(v,f){return v===void 0&&(v=1),f===void 0&&(f=v),this.lerp.set(v,f),this},setFollowOffset:function(v,f){return v===void 0&&(v=0),f===void 0&&(f=0),this.followOffset.set(v,f),this},startFollow:function(v,f,b,C,_,M){f===void 0&&(f=!1),b===void 0&&(b=1),C===void 0&&(C=b),_===void 0&&(_=0),M===void 0&&(M=_),this._follow=v,this.roundPixels=f,b=c(b,0,1),C=c(C,0,1),this.lerp.set(b,C),this.followOffset.set(_,M);var E=this.width/2,A=this.height/2,R=v.x-_,L=v.y-M;return this.midPoint.set(R,L),this.scrollX=R-E,this.scrollY=L-A,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(v,f){this.visible&&(this.rotateToEffect.update(v,f),this.panEffect.update(v,f),this.zoomEffect.update(v,f),this.shakeEffect.update(v,f),this.flashEffect.update(v,f),this.fadeEffect.update(v,f))},destroy:function(){this.resetFX(),u.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});y.exports=g},32743:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(38058),x=i(83419),c=i(95540),h=i(37277),o=i(37303),r=i(97480),a=i(44594),d=new x({initialize:function(n){this.scene=n,this.systems=n.sys,this.roundPixels=n.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,n.sys.events.once(a.BOOT,this.boot,this),n.sys.events.on(a.START,this.start,this)},boot:function(){var n=this.systems;n.settings.cameras?this.fromJSON(n.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new u(0,0,n.scale.width,n.scale.height).setScene(this.scene),n.game.scale.on(r.RESIZE,this.onResize,this),this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){if(!this.main){var n=this.systems;n.settings.cameras?this.fromJSON(n.settings.cameras):this.add(),this.main=this.cameras[0]}var p=this.systems.events;p.on(a.UPDATE,this.update,this),p.once(a.SHUTDOWN,this.shutdown,this)},add:function(n,p,g,v,f,b){n===void 0&&(n=0),p===void 0&&(p=0),g===void 0&&(g=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),f===void 0&&(f=!1),b===void 0&&(b="");var C=new u(n,p,g,v);return C.setName(b),C.setScene(this.scene),C.setRoundPixels(this.roundPixels),C.id=this.getNextID(),this.cameras.push(C),f&&(this.main=C),C},addExisting:function(n,p){p===void 0&&(p=!1);var g=this.cameras.indexOf(n);return g===-1?(n.id=this.getNextID(),n.setRoundPixels(this.roundPixels),this.cameras.push(n),p&&(this.main=n),n):null},getNextID:function(){for(var n=this.cameras,p=1,g=0;g<32;g++){for(var v=!1,f=0;f<n.length;f++){var b=n[f];if(b&&b.id===p){v=!0;continue}}if(v)p=p<<1;else return p}return 0},getTotal:function(n){n===void 0&&(n=!1);for(var p=0,g=this.cameras,v=0;v<g.length;v++){var f=g[v];(!n||n&&f.visible)&&p++}return p},fromJSON:function(n){Array.isArray(n)||(n=[n]);for(var p=this.scene.sys.scale.width,g=this.scene.sys.scale.height,v=0;v<n.length;v++){var f=n[v],b=c(f,"x",0),C=c(f,"y",0),_=c(f,"width",p),M=c(f,"height",g),E=this.add(b,C,_,M);E.name=c(f,"name",""),E.zoom=c(f,"zoom",1),E.rotation=c(f,"rotation",0),E.scrollX=c(f,"scrollX",0),E.scrollY=c(f,"scrollY",0),E.roundPixels=c(f,"roundPixels",!1),E.visible=c(f,"visible",!0);var A=c(f,"backgroundColor",!1);A&&E.setBackgroundColor(A);var R=c(f,"bounds",null);if(R){var L=c(R,"x",0),Y=c(R,"y",0),F=c(R,"width",p),N=c(R,"height",g);E.setBounds(L,Y,F,N)}}return this},getCamera:function(n){for(var p=this.cameras,g=0;g<p.length;g++)if(p[g].name===n)return p[g];return null},getCamerasBelowPointer:function(n){for(var p=this.cameras,g=n.x,v=n.y,f=[],b=0;b<p.length;b++){var C=p[b];C.visible&&C.inputEnabled&&o(C,g,v)&&f.unshift(C)}return f},remove:function(n,p){p===void 0&&(p=!0),Array.isArray(n)||(n=[n]);for(var g=0,v=this.cameras,f=0;f<n.length;f++){var b=v.indexOf(n[f]);b!==-1&&(p?v[b].destroy():v[b].renderList=[],v.splice(b,1),g++)}return!this.main&&v[0]&&(this.main=v[0]),g},render:function(n,p){for(var g=this.scene,v=this.cameras,f=0;f<v.length;f++){var b=v[f];if(b.visible&&b.alpha>0){b.preRender();var C=this.getVisibleChildren(p.getChildren(),b);n.render(g,C,b)}}},getVisibleChildren:function(n,p){return n.filter(function(g){return g.willRender(p)})},resetAll:function(){for(var n=0;n<this.cameras.length;n++)this.cameras[n].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(n,p){for(var g=0;g<this.cameras.length;g++)this.cameras[g].update(n,p)},onResize:function(n,p,g,v,f){for(var b=0;b<this.cameras.length;b++){var C=this.cameras[b];C._x===0&&C._y===0&&C._width===v&&C._height===f&&C.setSize(p.width,p.height)}},resize:function(n,p){for(var g=0;g<this.cameras.length;g++)this.cameras[g].setSize(n,p)},shutdown:function(){this.main=void 0;for(var n=0;n<this.cameras.length;n++)this.cameras[n].destroy();this.cameras=[];var p=this.systems.events;p.off(a.UPDATE,this.update,this),p.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(a.START,this.start,this),this.systems.events.off(a.DESTROY,this.destroy,this),this.systems.game.scale.off(r.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});h.register("CameraManager",d,"cameras"),y.exports=d},5020:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45319),x=i(83419),c=i(19715),h=new x({initialize:function(o){this.camera=o,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,r,a,d,n,p,g,v){if(o===void 0&&(o=!0),r===void 0&&(r=1e3),a===void 0&&(a=0),d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p=!1),g===void 0&&(g=null),v===void 0&&(v=this.camera.scene),!p&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=o,this.progress=0,this.red=a,this.green=d,this.blue=n,this.alpha=o?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=g,this._onUpdateScope=v;var f=o?c.FADE_OUT_START:c.FADE_IN_START;return this.camera.emit(f,this.camera,this,r,a,d,n),this.camera},update:function(o,r){this.isRunning&&(this._elapsed+=r,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(o){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return o.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",o.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(o,r){if(!this.isRunning&&!this.isComplete)return!1;var a=this.camera,d=this.red/255,n=this.green/255,p=this.blue/255;return o.drawFillRect(a.x,a.y,a.width,a.height,r(p,n,d,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var o=this.direction?c.FADE_OUT_COMPLETE:c.FADE_IN_COMPLETE;this.camera.emit(o,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});y.exports=h},10662:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45319),x=i(83419),c=i(19715),h=new x({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(o,r,a,d,n,p,g){return o===void 0&&(o=250),r===void 0&&(r=255),a===void 0&&(a=255),d===void 0&&(d=255),n===void 0&&(n=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),!n&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=o,this.progress=0,this.red=r,this.green=a,this.blue=d,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.camera.emit(c.FLASH_START,this.camera,this,o,r,a,d),this.camera)},update:function(o,r){this.isRunning&&(this._elapsed+=r,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(o){if(!this.isRunning)return!1;var r=this.camera;return o.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",o.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(o,r){if(!this.isRunning)return!1;var a=this.camera,d=this.red/255,n=this.green/255,p=this.blue/255;return o.drawFillRect(a.x,a.y,a.width,a.height,r(p,n,d,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});y.exports=h},20359:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45319),x=i(83419),c=i(62640),h=i(19715),o=i(26099),r=new x({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.source=new o,this.current=new o,this.destination=new o,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,d,n,p,g,v,f){n===void 0&&(n=1e3),p===void 0&&(p=c.Linear),g===void 0&&(g=!1),v===void 0&&(v=null),f===void 0&&(f=this.camera.scene);var b=this.camera;return!g&&this.isRunning||(this.isRunning=!0,this.duration=n,this.progress=0,this.source.set(b.scrollX,b.scrollY),this.destination.set(a,d),b.getScroll(a,d,this.current),typeof p=="string"&&c.hasOwnProperty(p)?this.ease=c[p]:typeof p=="function"&&(this.ease=p),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=f,this.camera.emit(h.PAN_START,this.camera,this,n,a,d)),b},update:function(a,d){if(this.isRunning){this._elapsed+=d;var n=u(this._elapsed/this.duration,0,1);this.progress=n;var p=this.camera;if(this._elapsed<this.duration){var g=this.ease(n);p.getScroll(this.destination.x,this.destination.y,this.current);var v=this.source.x+(this.current.x-this.source.x)*g,f=this.source.y+(this.current.y-this.source.y)*g;p.setScroll(v,f),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,n,v,f)}else p.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,n,p.scrollX,p.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});y.exports=r},34208:(y,P,i)=>{/**
* @author       Jason Nicholls <nicholls.jason@gmail.com>
* @copyright    2018 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
*/var u=i(45319),x=i(83419),c=i(19715),h=i(62640),o=new x({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(r,a,d,n,p,g,v){d===void 0&&(d=1e3),n===void 0&&(n=h.Linear),p===void 0&&(p=!1),g===void 0&&(g=null),v===void 0&&(v=this.camera.scene),a===void 0&&(a=!1),this.shortestPath=a;var f=r;r<0?(f=-1*r,this.clockwise=!1):this.clockwise=!0;var b=360*Math.PI/180;f=f-Math.floor(f/b)*b;var C=this.camera;if(!p&&this.isRunning)return C;if(this.isRunning=!0,this.duration=d,this.progress=0,this.source=C.rotation,this.destination=f,typeof n=="string"&&h.hasOwnProperty(n)?this.ease=h[n]:typeof n=="function"&&(this.ease=n),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=v,this.shortestPath){var _=0,M=0;this.destination>this.source?_=Math.abs(this.destination-this.source):_=Math.abs(this.destination+b)-this.source,this.source>this.destination?M=Math.abs(this.source-this.destination):M=Math.abs(this.source+b)-this.destination,_<M?this.clockwise=!0:_>M&&(this.clockwise=!1)}return this.camera.emit(c.ROTATE_START,this.camera,this,d,f),C},update:function(r,a){if(this.isRunning){this._elapsed+=a;var d=u(this._elapsed/this.duration,0,1);this.progress=d;var n=this.camera;if(this._elapsed<this.duration){var p=this.ease(d);this.current=n.rotation;var g=0,v=360*Math.PI/180,f=this.destination,b=this.current;this.clockwise===!1&&(f=this.current,b=this.destination),f>=b?g=Math.abs(f-b):g=Math.abs(f+v)-b;var C=0;this.clockwise?C=n.rotation+g*p:C=n.rotation-g*p,n.rotation=C,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,d,C)}else n.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,d,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});y.exports=o},30330:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45319),x=i(83419),c=i(19715),h=i(26099),o=new x({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.intensity=new h,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(r,a,d,n,p){return r===void 0&&(r=100),a===void 0&&(a=.05),d===void 0&&(d=!1),n===void 0&&(n=null),p===void 0&&(p=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,typeof a=="number"?this.intensity.set(a):this.intensity.set(a.x,a.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=n,this._onUpdateScope=p,this.camera.emit(c.SHAKE_START,this.camera,this,r,a),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(r,a){if(this.isRunning)if(this._elapsed+=a,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var d=this.intensity,n=this.camera.width,p=this.camera.height,g=this.camera.zoom;this._offsetX=(Math.random()*d.x*n*2-d.x*n)*g,this._offsetY=(Math.random()*d.y*p*2-d.y*p)*g,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});y.exports=o},45641:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45319),x=i(83419),c=i(62640),h=i(19715),o=new x({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,a,d,n,p,g){a===void 0&&(a=1e3),d===void 0&&(d=c.Linear),n===void 0&&(n=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene);var v=this.camera;return!n&&this.isRunning||(this.isRunning=!0,this.duration=a,this.progress=0,this.source=v.zoom,this.destination=r,typeof d=="string"&&c.hasOwnProperty(d)?this.ease=c[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.camera.emit(h.ZOOM_START,this.camera,this,a,r)),v},update:function(r,a){this.isRunning&&(this._elapsed+=a,this.progress=u(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});y.exports=o},20052:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Fade:i(5020),Flash:i(10662),Pan:i(20359),Shake:i(30330),RotateTo:i(34208),Zoom:i(45641)}},16438:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="cameradestroy"},32726:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="camerafadeincomplete"},87807:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="camerafadeinstart"},45917:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="camerafadeoutcomplete"},95666:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="camerafadeoutstart"},47056:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="cameraflashcomplete"},91261:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="cameraflashstart"},45047:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="followupdate"},81927:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="camerapancomplete"},74264:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="camerapanstart"},54419:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="postrender"},79330:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="prerender"},93183:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="camerarotatecomplete"},80112:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="camerarotatestart"},62252:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="camerashakecomplete"},86017:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="camerashakestart"},539:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="camerazoomcomplete"},51892:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="camerazoomstart"},19715:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={DESTROY:i(16438),FADE_IN_COMPLETE:i(32726),FADE_IN_START:i(87807),FADE_OUT_COMPLETE:i(45917),FADE_OUT_START:i(95666),FLASH_COMPLETE:i(47056),FLASH_START:i(91261),FOLLOW_UPDATE:i(45047),PAN_COMPLETE:i(81927),PAN_START:i(74264),POST_RENDER:i(54419),PRE_RENDER:i(79330),ROTATE_COMPLETE:i(93183),ROTATE_START:i(80112),SHAKE_COMPLETE:i(62252),SHAKE_START:i(86017),ZOOM_COMPLETE:i(539),ZOOM_START:i(51892)}},87969:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Camera:i(38058),BaseCamera:i(71911),CameraManager:i(32743),Effects:i(20052),Events:i(19715)}},63091:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(35154),c=new u({initialize:function(h){this.camera=x(h,"camera",null),this.left=x(h,"left",null),this.right=x(h,"right",null),this.up=x(h,"up",null),this.down=x(h,"down",null),this.zoomIn=x(h,"zoomIn",null),this.zoomOut=x(h,"zoomOut",null),this.zoomSpeed=x(h,"zoomSpeed",.01),this.minZoom=x(h,"minZoom",.001),this.maxZoom=x(h,"maxZoom",1e3),this.speedX=0,this.speedY=0;var o=x(h,"speed",null);typeof o=="number"?(this.speedX=o,this.speedY=o):(this.speedX=x(h,"speed.x",0),this.speedY=x(h,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(this.active){h===void 0&&(h=1);var o=this.camera;this.up&&this.up.isDown?o.scrollY-=this.speedY*h|0:this.down&&this.down.isDown&&(o.scrollY+=this.speedY*h|0),this.left&&this.left.isDown?o.scrollX-=this.speedX*h|0:this.right&&this.right.isDown&&(o.scrollX+=this.speedX*h|0),this.zoomIn&&this.zoomIn.isDown?(o.zoom-=this.zoomSpeed,o.zoom<this.minZoom&&(o.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(o.zoom+=this.zoomSpeed,o.zoom>this.maxZoom&&(o.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});y.exports=c},58818:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(35154),c=new u({initialize:function(h){this.camera=x(h,"camera",null),this.left=x(h,"left",null),this.right=x(h,"right",null),this.up=x(h,"up",null),this.down=x(h,"down",null),this.zoomIn=x(h,"zoomIn",null),this.zoomOut=x(h,"zoomOut",null),this.zoomSpeed=x(h,"zoomSpeed",.01),this.minZoom=x(h,"minZoom",.001),this.maxZoom=x(h,"maxZoom",1e3),this.accelX=0,this.accelY=0;var o=x(h,"acceleration",null);typeof o=="number"?(this.accelX=o,this.accelY=o):(this.accelX=x(h,"acceleration.x",0),this.accelY=x(h,"acceleration.y",0)),this.dragX=0,this.dragY=0;var r=x(h,"drag",null);typeof r=="number"?(this.dragX=r,this.dragY=r):(this.dragX=x(h,"drag.x",0),this.dragY=x(h,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var a=x(h,"maxSpeed",null);typeof a=="number"?(this.maxSpeedX=a,this.maxSpeedY=a):(this.maxSpeedX=x(h,"maxSpeed.x",0),this.maxSpeedY=x(h,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(this.active){h===void 0&&(h=1);var o=this.camera;this._speedX>0?(this._speedX-=this.dragX*h,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*h,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*h,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*h,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(o.scrollX-=this._speedX*h|0),this._speedY!==0&&(o.scrollY-=this._speedY*h|0),this._zoom!==0&&(o.zoom+=this._zoom,o.zoom<this.minZoom?o.zoom=this.minZoom:o.zoom>this.maxZoom&&(o.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});y.exports=c},38865:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={FixedKeyControl:i(63091),SmoothedKeyControl:i(58818)}},26638:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Controls:i(38865),Scene2D:i(87969)}},8054:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u={VERSION:"3.90.0",LOG_VERSION:"v390",BlendModes:i(10312),ScaleModes:i(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};y.exports=u},69547:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(8054),c=i(42363),h=i(82264),o=i(95540),r=i(35154),a=i(41212),d=i(29747),n=i(75508),p=i(36060),g=i(80333),v=new u({initialize:function(f){f===void 0&&(f={});var b=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],C="#ffffff",_=r(f,"scale",null);this.width=r(_,"width",1024,f),this.height=r(_,"height",768,f),this.zoom=r(_,"zoom",1,f),this.parent=r(_,"parent",void 0,f),this.scaleMode=r(_,_?"mode":"scaleMode",0,f),this.expandParent=r(_,"expandParent",!0,f),this.autoRound=r(_,"autoRound",!1,f),this.autoCenter=r(_,"autoCenter",0,f),this.resizeInterval=r(_,"resizeInterval",500,f),this.fullscreenTarget=r(_,"fullscreenTarget",null,f),this.minWidth=r(_,"min.width",0,f),this.maxWidth=r(_,"max.width",0,f),this.minHeight=r(_,"min.height",0,f),this.maxHeight=r(_,"max.height",0,f),this.snapWidth=r(_,"snap.width",0,f),this.snapHeight=r(_,"snap.height",0,f),this.renderType=r(f,"type",x.AUTO),this.canvas=r(f,"canvas",null),this.context=r(f,"context",null),this.canvasStyle=r(f,"canvasStyle",null),this.customEnvironment=r(f,"customEnvironment",!1),this.sceneConfig=r(f,"scene",null),this.seed=r(f,"seed",[(Date.now()*Math.random()).toString()]),n.RND=new n.RandomDataGenerator(this.seed),this.gameTitle=r(f,"title",""),this.gameURL=r(f,"url","https://phaser.io/"+x.LOG_VERSION),this.gameVersion=r(f,"version",""),this.autoFocus=r(f,"autoFocus",!0),this.stableSort=r(f,"stableSort",-1),this.stableSort===-1&&(this.stableSort=h.browser.es2019?1:0),h.features.stableSort=this.stableSort,this.domCreateContainer=r(f,"dom.createContainer",!1),this.domPointerEvents=r(f,"dom.pointerEvents","none"),this.inputKeyboard=r(f,"input.keyboard",!0),this.inputKeyboardEventTarget=r(f,"input.keyboard.target",window),this.inputKeyboardCapture=r(f,"input.keyboard.capture",[]),this.inputMouse=r(f,"input.mouse",!0),this.inputMouseEventTarget=r(f,"input.mouse.target",null),this.inputMousePreventDefaultDown=r(f,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=r(f,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=r(f,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=r(f,"input.mouse.preventDefaultWheel",!0),this.inputTouch=r(f,"input.touch",h.input.touch),this.inputTouchEventTarget=r(f,"input.touch.target",null),this.inputTouchCapture=r(f,"input.touch.capture",!0),this.inputActivePointers=r(f,"input.activePointers",1),this.inputSmoothFactor=r(f,"input.smoothFactor",0),this.inputWindowEvents=r(f,"input.windowEvents",!0),this.inputGamepad=r(f,"input.gamepad",!1),this.inputGamepadEventTarget=r(f,"input.gamepad.target",window),this.disableContextMenu=r(f,"disableContextMenu",!1),this.audio=r(f,"audio",{}),this.hideBanner=r(f,"banner",null)===!1,this.hidePhaser=r(f,"banner.hidePhaser",!1),this.bannerTextColor=r(f,"banner.text",C),this.bannerBackgroundColor=r(f,"banner.background",b),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=r(f,"fps",null),this.disablePreFX=r(f,"disablePreFX",!1),this.disablePostFX=r(f,"disablePostFX",!1);var M=r(f,"render",null);this.pipeline=r(M,"pipeline",null,f),this.autoMobilePipeline=r(M,"autoMobilePipeline",!0,f),this.defaultPipeline=r(M,"defaultPipeline",p.MULTI_PIPELINE,f),this.antialias=r(M,"antialias",!0,f),this.antialiasGL=r(M,"antialiasGL",!0,f),this.mipmapFilter=r(M,"mipmapFilter","",f),this.desynchronized=r(M,"desynchronized",!1,f),this.roundPixels=r(M,"roundPixels",!1,f),this.pixelArt=r(M,"pixelArt",this.zoom!==1,f),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=r(M,"transparent",!1,f),this.clearBeforeRender=r(M,"clearBeforeRender",!0,f),this.preserveDrawingBuffer=r(M,"preserveDrawingBuffer",!1,f),this.premultipliedAlpha=r(M,"premultipliedAlpha",!0,f),this.failIfMajorPerformanceCaveat=r(M,"failIfMajorPerformanceCaveat",!1,f),this.powerPreference=r(M,"powerPreference","default",f),this.batchSize=r(M,"batchSize",4096,f),this.maxTextures=r(M,"maxTextures",-1,f),this.maxLights=r(M,"maxLights",10,f);var E=r(f,"backgroundColor",0);this.backgroundColor=g(E),this.transparent&&(this.backgroundColor=g(0),this.backgroundColor.alpha=0),this.preBoot=r(f,"callbacks.preBoot",d),this.postBoot=r(f,"callbacks.postBoot",d),this.physics=r(f,"physics",{}),this.defaultPhysicsSystem=r(this.physics,"default",!1),this.loaderBaseURL=r(f,"loader.baseURL",""),this.loaderPath=r(f,"loader.path",""),this.loaderMaxParallelDownloads=r(f,"loader.maxParallelDownloads",h.os.android?6:32),this.loaderCrossOrigin=r(f,"loader.crossOrigin",void 0),this.loaderResponseType=r(f,"loader.responseType",""),this.loaderAsync=r(f,"loader.async",!0),this.loaderUser=r(f,"loader.user",""),this.loaderPassword=r(f,"loader.password",""),this.loaderTimeout=r(f,"loader.timeout",0),this.loaderMaxRetries=r(f,"loader.maxRetries",2),this.loaderWithCredentials=r(f,"loader.withCredentials",!1),this.loaderImageLoadType=r(f,"loader.imageLoadType","XHR"),this.loaderLocalScheme=r(f,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=r(f,"fx.glow.quality",.1),this.glowFXDistance=r(f,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var A=r(f,"plugins",null),R=c.DefaultScene;A&&(Array.isArray(A)?this.defaultPlugins=A:a(A)&&(this.installGlobalPlugins=o(A,"global",[]),this.installScenePlugins=o(A,"scene",[]),Array.isArray(A.default)?R=A.default:Array.isArray(A.defaultMerge)&&(R=R.concat(A.defaultMerge)))),this.defaultPlugins=R;var L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=r(f,"images.default",L+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=r(f,"images.missing",L+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=r(f,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=x.WEBGL:window.FORCE_CANVAS&&(this.renderType=x.CANVAS))}});y.exports=v},86054:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(20623),x=i(27919),c=i(8054),h=i(89357),o=function(r){var a=r.config;if((a.customEnvironment||a.canvas)&&a.renderType===c.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!a.customEnvironment&&!a.canvas&&a.renderType!==c.HEADLESS)if(a.renderType===c.AUTO&&(a.renderType=h.webGL?c.WEBGL:c.CANVAS),a.renderType===c.WEBGL){if(!h.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(a.renderType===c.CANVAS){if(!h.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+a.renderType);a.antialias||x.disableSmoothing();var d=r.scale.baseSize,n=d.width,p=d.height;if(a.canvas?(r.canvas=a.canvas,r.canvas.width=n,r.canvas.height=p):r.canvas=x.create(r,n,p,a.renderType),a.canvasStyle&&(r.canvas.style=a.canvasStyle),a.antialias||u.setCrisp(r.canvas),a.renderType!==c.HEADLESS){var g,v;g=i(68627),v=i(74797),a.renderType===c.WEBGL?r.renderer=new v(r):(r.renderer=new g(r),r.context=r.renderer.gameContext)}};y.exports=o},96391:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(8054),x=function(c){var h=c.config;if(!h.hideBanner){var o="WebGL";h.renderType===u.CANVAS?o="Canvas":h.renderType===u.HEADLESS&&(o="Headless");var r=h.audio,a=c.device.audio,d;if(a.webAudio&&!r.disableWebAudio?d="Web Audio":r.noAudio||!a.webAudio&&!a.audioData?d="No Audio":d="HTML5 Audio",c.device.browser.ie)window.console&&console.log("Phaser v"+u.VERSION+" / https://phaser.io");else{var n="",p=[n];if(Array.isArray(h.bannerBackgroundColor)){var g;h.bannerBackgroundColor.forEach(function(f){n=n.concat("%c "),p.push("background: "+f),g=f}),p[p.length-1]="color: "+h.bannerTextColor+"; background: "+g}else n=n.concat("%c "),p.push("color: "+h.bannerTextColor+"; background: "+h.bannerBackgroundColor);p.push("background: transparent"),h.gameTitle&&(n=n.concat(h.gameTitle),h.gameVersion&&(n=n.concat(" v"+h.gameVersion)),h.hidePhaser||(n=n.concat(" / ")));var v="";h.hidePhaser||(n=n.concat("Phaser v"+u.VERSION+v+" ("+o+" | "+d+")")),n=n.concat(" %c "+h.gameURL),p[0]=n,console.log.apply(console,p)}}};y.exports=x},50127:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(40366),x=i(60848),c=i(24047),h=i(27919),o=i(83419),r=i(69547),a=i(83719),d=i(86054),n=i(45893),p=i(96391),g=i(82264),v=i(57264),f=i(50792),b=i(8443),C=i(7003),_=i(37277),M=i(77332),E=i(76531),A=i(60903),R=i(69442),L=i(17130),Y=i(65898),F=i(51085),N=i(14747),z=new o({initialize:function(U){this.config=new r(U),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new f,this.anims=new x(this),this.textures=new L(this),this.cache=new c(this),this.registry=new n(this,new f),this.input=new C(this,this.config),this.scene=new A(this,this.config.sceneConfig),this.device=g,this.scale=new E(this,this.config),this.sound=null,this.sound=N.create(this),this.loop=new Y(this,this.config.fps),this.plugins=new M(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,v(this.boot.bind(this))},boot:function(){if(!_.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),d(this),a(this),p(this),u(this.canvas,this.config.parent),this.textures.once(R.READY,this.texturesReady,this),this.events.emit(b.BOOT)},texturesReady:function(){this.events.emit(b.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),F(this);var U=this.events;U.on(b.HIDDEN,this.onHidden,this),U.on(b.VISIBLE,this.onVisible,this),U.on(b.BLUR,this.onBlur,this),U.on(b.FOCUS,this.onFocus,this)},step:function(U,q){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Q=this.events;Q.emit(b.PRE_STEP,U,q),Q.emit(b.STEP,U,q),this.scene.update(U,q),Q.emit(b.POST_STEP,U,q);var K=this.renderer;K.preRender(),Q.emit(b.PRE_RENDER,K,U,q),this.scene.render(K),K.postRender(),Q.emit(b.POST_RENDER,K,U,q)}},headlessStep:function(U,q){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Q=this.events;Q.emit(b.PRE_STEP,U,q),Q.emit(b.STEP,U,q),this.scene.update(U,q),Q.emit(b.POST_STEP,U,q),this.scene.isProcessing=!1,Q.emit(b.PRE_RENDER,null,U,q),Q.emit(b.POST_RENDER,null,U,q)}},onHidden:function(){this.loop.pause(),this.events.emit(b.PAUSE)},pause:function(){var U=this.isPaused;this.isPaused=!0,U||this.events.emit(b.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(b.RESUME,this.loop.pauseDuration)},resume:function(){var U=this.isPaused;this.isPaused=!1,U&&this.events.emit(b.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(U,q){q===void 0&&(q=!1),this.pendingDestroy=!0,this.removeCanvas=U,this.noReturn=q},runDestroy:function(){this.scene.destroy(),this.events.emit(b.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(h.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});y.exports=z},65898:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(35154),c=i(29747),h=i(43092),o=new u({initialize:function(r,a){this.game=r,this.raf=new h,this.started=!1,this.running=!1,this.minFps=x(a,"min",5),this.targetFps=x(a,"target",60),this.fpsLimit=x(a,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=c,this.forceSetTimeOut=x(a,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=x(a,"deltaHistory",10),this.panicMax=x(a,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=x(a,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var r=window.performance.now();this.time=r,this.lastTime=r,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0;for(var a=0;a<this.deltaSmoothingMax;a++)this.deltaHistory[a]=Math.min(this._target,this.deltaHistory[a]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(r){if(this.started)return this;this.started=!0,this.running=!0;for(var a=0;a<this.deltaSmoothingMax;a++)this.deltaHistory[a]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=r;var d=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(d,this.forceSetTimeOut,this._target)},smoothDelta:function(r){var a=this.deltaIndex,d=this.deltaHistory,n=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,r=Math.min(r,this._target)),r>this._min&&(r=d[a],r=Math.min(r,this._min)),d[a]=r,this.deltaIndex++,this.deltaIndex>=n&&(this.deltaIndex=0);for(var p=0,g=0;g<n;g++)p+=d[g];return p/=n,p},updateFPS:function(r){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0},stepLimitFPS:function(r){this.now=r;var a=Math.max(0,r-this.lastTime);this.rawDelta=a,this.time+=this.rawDelta,this.smoothStep&&(a=this.smoothDelta(a)),this.delta+=a,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(r,this.delta),this.delta=0),this.lastTime=r,this.frame++},step:function(r){this.now=r;var a=Math.max(0,r-this.lastTime);this.rawDelta=a,this.time+=this.rawDelta,this.smoothStep&&(a=this.smoothDelta(a)),this.delta=a,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.callback(r,a),this.lastTime=r,this.frame++},tick:function(){var r=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(r):this.step(r)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(r){r===void 0&&(r=!1);var a=window.performance.now();if(!this.running){r&&(this.startTime+=-this.lastTime+(this.lastTime+a));var d=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(d,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=a+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});y.exports=o},51085:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(8443),x=function(c){var h,o=c.events;if(document.hidden!==void 0)h="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(d){document[d+"Hidden"]!==void 0&&(document.hidden=function(){return document[d+"Hidden"]},h=d+"visibilitychange")})}var a=function(d){document.hidden||d.type==="pause"?o.emit(u.HIDDEN):o.emit(u.VISIBLE)};h&&document.addEventListener(h,a,!1),window.onblur=function(){o.emit(u.BLUR)},window.onfocus=function(){o.emit(u.FOCUS)},window.focus&&c.config.autoFocus&&window.focus()};y.exports=x},97217:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="blur"},47548:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="boot"},19814:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="contextlost"},68446:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="destroy"},41700:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="focus"},25432:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="hidden"},65942:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pause"},59211:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="postrender"},47789:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="poststep"},39066:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="prerender"},460:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="prestep"},16175:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="ready"},42331:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="resume"},11966:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="step"},32969:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="systemready"},94830:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="visible"},8443:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={BLUR:i(97217),BOOT:i(47548),CONTEXT_LOST:i(19814),DESTROY:i(68446),FOCUS:i(41700),HIDDEN:i(25432),PAUSE:i(65942),POST_RENDER:i(59211),POST_STEP:i(47789),PRE_RENDER:i(39066),PRE_STEP:i(460),READY:i(16175),RESUME:i(42331),STEP:i(11966),SYSTEM_READY:i(32969),VISIBLE:i(94830)}},42857:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Config:i(69547),CreateRenderer:i(86054),DebugHeader:i(96391),Events:i(8443),TimeStep:i(65898),VisibilityHandler:i(51085)}},99584:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(5290),x=i(27919),c=i(35154),h=function(o){var r=c(o,"data",[]),a=c(o,"canvas",null),d=c(o,"palette",u),n=c(o,"pixelWidth",1),p=c(o,"pixelHeight",n),g=c(o,"resizeCanvas",!0),v=c(o,"clearCanvas",!0),f=c(o,"preRender",null),b=c(o,"postRender",null),C=Math.floor(Math.abs(r[0].length*n)),_=Math.floor(Math.abs(r.length*p));a||(a=x.create2D(this,C,_),g=!1,v=!1),g&&(a.width=C,a.height=_);var M=a.getContext("2d",{willReadFrequently:!0});v&&M.clearRect(0,0,C,_),f&&f(a,M);for(var E=0;E<r.length;E++)for(var A=r[E],R=0;R<A.length;R++){var L=A[R];L!=="."&&L!==" "&&(M.fillStyle=d[L],M.fillRect(R*n,E*p,n,p))}return b&&b(a,M),a};y.exports=h},15822:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={GenerateTexture:i(99584),Palettes:i(57763)}},5290:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},23816:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},9866:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},77552:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},92259:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},57763:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={ARNE16:i(5290),C64:i(23816),CGA:i(9866),JMP:i(77552),MSX:i(92259)}},46728:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(36316),c=i(80021),h=i(26099),o=new u({Extends:c,initialize:function(r,a,d,n){c.call(this,"CubicBezierCurve"),Array.isArray(r)&&(n=new h(r[6],r[7]),d=new h(r[4],r[5]),a=new h(r[2],r[3]),r=new h(r[0],r[1])),this.p0=r,this.p1=a,this.p2=d,this.p3=n},getStartPoint:function(r){return r===void 0&&(r=new h),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,a){a===void 0&&(a=new h);var d=this.p0,n=this.p1,p=this.p2,g=this.p3;return a.set(x(r,d.x,n.x,p.x,g.x),x(r,d.y,n.y,p.y,g.y))},draw:function(r,a){a===void 0&&(a=32);var d=this.getPoints(a);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var n=1;n<d.length;n++)r.lineTo(d[n].x,d[n].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});o.fromJSON=function(r){var a=r.points,d=new h(a[0],a[1]),n=new h(a[2],a[3]),p=new h(a[4],a[5]),g=new h(a[6],a[7]);return new o(d,n,p,g)},y.exports=o},80021:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(19217),c=i(87841),h=i(26099),o=new u({initialize:function(r){this.type=r,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new h,this._tmpVec2B=new h},draw:function(r,a){return a===void 0&&(a=32),r.strokePoints(this.getPoints(a))},getBounds:function(r,a){r||(r=new c),a===void 0&&(a=16);var d=this.getLength();a>d&&(a=d/2);var n=Math.max(1,Math.round(d/a));return x(this.getSpacedPoints(n),r)},getDistancePoints:function(r){var a=this.getLength(),d=Math.max(1,a/r);return this.getSpacedPoints(d)},getEndPoint:function(r){return r===void 0&&(r=new h),this.getPointAt(1,r)},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(r===void 0&&(r=this.arcLengthDivisions),this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var a=[],d,n=this.getPoint(0,this._tmpVec2A),p=0;a.push(0);for(var g=1;g<=r;g++)d=this.getPoint(g/r,this._tmpVec2B),p+=d.distance(n),a.push(p),n.copy(d);return this.cacheArcLengths=a,a},getPointAt:function(r,a){var d=this.getUtoTmapping(r);return this.getPoint(d,a)},getPoints:function(r,a,d){d===void 0&&(d=[]),r||(a?r=this.getLength()/a:r=this.defaultDivisions);for(var n=0;n<=r;n++)d.push(this.getPoint(n/r));return d},getRandomPoint:function(r){return r===void 0&&(r=new h),this.getPoint(Math.random(),r)},getSpacedPoints:function(r,a,d){d===void 0&&(d=[]),r||(a?r=this.getLength()/a:r=this.defaultDivisions);for(var n=0;n<=r;n++){var p=this.getUtoTmapping(n/r,null,r);d.push(this.getPoint(p))}return d},getStartPoint:function(r){return r===void 0&&(r=new h),this.getPointAt(0,r)},getTangent:function(r,a){a===void 0&&(a=new h);var d=1e-4,n=r-d,p=r+d;return n<0&&(n=0),p>1&&(p=1),this.getPoint(n,this._tmpVec2A),this.getPoint(p,a),a.subtract(this._tmpVec2A).normalize()},getTangentAt:function(r,a){var d=this.getUtoTmapping(r);return this.getTangent(d,a)},getTFromDistance:function(r,a){return r<=0?0:this.getUtoTmapping(0,r,a)},getUtoTmapping:function(r,a,d){var n=this.getLengths(d),p=0,g=n.length,v;a?v=Math.min(a,n[g-1]):v=r*n[g-1];for(var f=0,b=g-1,C;f<=b;)if(p=Math.floor(f+(b-f)/2),C=n[p]-v,C<0)f=p+1;else if(C>0)b=p-1;else{b=p;break}if(p=b,n[p]===v)return p/(g-1);var _=n[p],M=n[p+1],E=M-_,A=(v-_)/E;return(p+A)/(g-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});y.exports=o},73825:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(80021),c=i(39506),h=i(35154),o=i(43396),r=i(26099),a=new u({Extends:x,initialize:function(d,n,p,g,v,f,b,C){if(typeof d=="object"){var _=d;d=h(_,"x",0),n=h(_,"y",0),p=h(_,"xRadius",0),g=h(_,"yRadius",p),v=h(_,"startAngle",0),f=h(_,"endAngle",360),b=h(_,"clockwise",!1),C=h(_,"rotation",0)}else g===void 0&&(g=p),v===void 0&&(v=0),f===void 0&&(f=360),b===void 0&&(b=!1),C===void 0&&(C=0);x.call(this,"EllipseCurve"),this.p0=new r(d,n),this._xRadius=p,this._yRadius=g,this._startAngle=c(v),this._endAngle=c(f),this._clockwise=b,this._rotation=c(C)},getStartPoint:function(d){return d===void 0&&(d=new r),this.getPoint(0,d)},getResolution:function(d){return d*2},getPoint:function(d,n){n===void 0&&(n=new r);for(var p=Math.PI*2,g=this._endAngle-this._startAngle,v=Math.abs(g)<Number.EPSILON;g<0;)g+=p;for(;g>p;)g-=p;g<Number.EPSILON&&(v?g=0:g=p),this._clockwise&&!v&&(g===p?g=-p:g=g-p);var f=this._startAngle+d*g,b=this.p0.x+this._xRadius*Math.cos(f),C=this.p0.y+this._yRadius*Math.sin(f);if(this._rotation!==0){var _=Math.cos(this._rotation),M=Math.sin(this._rotation),E=b-this.p0.x,A=C-this.p0.y;b=E*_-A*M+this.p0.x,C=E*M+A*_+this.p0.y}return n.set(b,C)},setXRadius:function(d){return this.xRadius=d,this},setYRadius:function(d){return this.yRadius=d,this},setWidth:function(d){return this.xRadius=d/2,this},setHeight:function(d){return this.yRadius=d/2,this},setStartAngle:function(d){return this.startAngle=d,this},setEndAngle:function(d){return this.endAngle=d,this},setClockwise:function(d){return this.clockwise=d,this},setRotation:function(d){return this.rotation=d,this},x:{get:function(){return this.p0.x},set:function(d){this.p0.x=d}},y:{get:function(){return this.p0.y},set:function(d){this.p0.y=d}},xRadius:{get:function(){return this._xRadius},set:function(d){this._xRadius=d}},yRadius:{get:function(){return this._yRadius},set:function(d){this._yRadius=d}},startAngle:{get:function(){return o(this._startAngle)},set:function(d){this._startAngle=c(d)}},endAngle:{get:function(){return o(this._endAngle)},set:function(d){this._endAngle=c(d)}},clockwise:{get:function(){return this._clockwise},set:function(d){this._clockwise=d}},angle:{get:function(){return o(this._rotation)},set:function(d){this._rotation=c(d)}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=d}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:o(this._startAngle),endAngle:o(this._endAngle),clockwise:this._clockwise,rotation:o(this._rotation)}}});a.fromJSON=function(d){return new a(d)},y.exports=a},33951:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(80021),c=i(19217),h=i(87841),o=i(26099),r=new u({Extends:x,initialize:function(a,d){x.call(this,"LineCurve"),Array.isArray(a)&&(d=new o(a[2],a[3]),a=new o(a[0],a[1])),this.p0=a,this.p1=d,this.arcLengthDivisions=1},getBounds:function(a){return a===void 0&&(a=new h),c([this.p0,this.p1],a)},getStartPoint:function(a){return a===void 0&&(a=new o),a.copy(this.p0)},getResolution:function(a){return a===void 0&&(a=1),a},getPoint:function(a,d){return d===void 0&&(d=new o),a===1?d.copy(this.p1):(d.copy(this.p1).subtract(this.p0).scale(a).add(this.p0),d)},getPointAt:function(a,d){return this.getPoint(a,d)},getTangent:function(a,d){return d===void 0&&(d=new o),d.copy(this.p1).subtract(this.p0).normalize(),d},getUtoTmapping:function(a,d,n){var p;if(d){var g=this.getLengths(n),v=g[g.length-1],f=Math.min(d,v);p=f/v}else p=a;return p},draw:function(a){return a.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});r.fromJSON=function(a){var d=a.points,n=new o(d[0],d[1]),p=new o(d[2],d[3]);return new r(n,p)},y.exports=r},14744:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(80021),c=i(32112),h=i(26099),o=new u({Extends:x,initialize:function(r,a,d){x.call(this,"QuadraticBezierCurve"),Array.isArray(r)&&(d=new h(r[4],r[5]),a=new h(r[2],r[3]),r=new h(r[0],r[1])),this.p0=r,this.p1=a,this.p2=d},getStartPoint:function(r){return r===void 0&&(r=new h),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,a){a===void 0&&(a=new h);var d=this.p0,n=this.p1,p=this.p2;return a.set(c(r,d.x,n.x,p.x),c(r,d.y,n.y,p.y))},draw:function(r,a){a===void 0&&(a=32);var d=this.getPoints(a);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var n=1;n<d.length;n++)r.lineTo(d[n].x,d[n].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});o.fromJSON=function(r){var a=r.points,d=new h(a[0],a[1]),n=new h(a[2],a[3]),p=new h(a[4],a[5]);return new o(d,n,p)},y.exports=o},42534:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87842),x=i(83419),c=i(80021),h=i(26099),o=new x({Extends:c,initialize:function(r){r===void 0&&(r=[]),c.call(this,"SplineCurve"),this.points=[],this.addPoints(r)},addPoints:function(r){for(var a=0;a<r.length;a++){var d=new h;typeof r[a]=="number"?(d.x=r[a],d.y=r[a+1],a++):Array.isArray(r[a])?(d.x=r[a][0],d.y=r[a][1]):(d.x=r[a].x,d.y=r[a].y),this.points.push(d)}return this},addPoint:function(r,a){var d=new h(r,a);return this.points.push(d),d},getStartPoint:function(r){return r===void 0&&(r=new h),r.copy(this.points[0])},getResolution:function(r){return r*this.points.length},getPoint:function(r,a){a===void 0&&(a=new h);var d=this.points,n=(d.length-1)*r,p=Math.floor(n),g=n-p,v=d[p===0?p:p-1],f=d[p],b=d[p>d.length-2?d.length-1:p+1],C=d[p>d.length-3?d.length-1:p+2];return a.set(u(g,v.x,f.x,b.x,C.x),u(g,v.y,f.y,b.y,C.y))},toJSON:function(){for(var r=[],a=0;a<this.points.length;a++)r.push(this.points[a].x),r.push(this.points[a].y);return{type:this.type,points:r}}});o.fromJSON=function(r){return new o(r.points)},y.exports=o},25410:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Path:i(46669),MoveTo:i(68618),CubicBezier:i(46728),Curve:i(80021),Ellipse:i(73825),Line:i(33951),QuadraticBezier:i(14744),Spline:i(42534)}},68618:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(26099),c=new u({initialize:function(h,o){this.active=!1,this.p0=new x(h,o)},getPoint:function(h,o){return o===void 0&&(o=new x),o.copy(this.p0)},getPointAt:function(h,o){return this.getPoint(h,o)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});y.exports=c},46669:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(46728),c=i(73825),h=i(39429),o=i(33951),r=i(68618),a=i(14744),d=i(87841),n=i(42534),p=i(26099),g=i(36383),v=new u({initialize:function(f,b){f===void 0&&(f=0),b===void 0&&(b=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new p,this._tmpVec2A=new p,this._tmpVec2B=new p,typeof f=="object"?this.fromJSON(f):this.startPoint.set(f,b)},add:function(f){return this.curves.push(f),this},circleTo:function(f,b,C){return b===void 0&&(b=!1),this.ellipseTo(f,f,0,360,b,C)},closePath:function(){var f=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);return f.equals(b)||this.curves.push(new o(b,f)),this},cubicBezierTo:function(f,b,C,_,M,E){var A=this.getEndPoint(),R,L,Y;return f instanceof p?(R=f,L=b,Y=C):(R=new p(C,_),L=new p(M,E),Y=new p(f,b)),this.add(new x(A,R,L,Y))},quadraticBezierTo:function(f,b,C,_){var M=this.getEndPoint(),E,A;return f instanceof p?(E=f,A=b):(E=new p(C,_),A=new p(f,b)),this.add(new a(M,E,A))},draw:function(f,b){for(var C=0;C<this.curves.length;C++){var _=this.curves[C];_.active&&_.draw(f,b)}return f},ellipseTo:function(f,b,C,_,M,E){var A=new c(0,0,f,b,C,_,M,E),R=this.getEndPoint(this._tmpVec2A),L=A.getStartPoint(this._tmpVec2B);return R.subtract(L),A.x=R.x,A.y=R.y,this.add(A)},fromJSON:function(f){this.curves=[],this.cacheLengths=[],this.startPoint.set(f.x,f.y),this.autoClose=f.autoClose;for(var b=0;b<f.curves.length;b++){var C=f.curves[b];switch(C.type){case"LineCurve":this.add(o.fromJSON(C));break;case"EllipseCurve":this.add(c.fromJSON(C));break;case"SplineCurve":this.add(n.fromJSON(C));break;case"CubicBezierCurve":this.add(x.fromJSON(C));break;case"QuadraticBezierCurve":this.add(a.fromJSON(C));break}}return this},getBounds:function(f,b){f===void 0&&(f=new d),b===void 0&&(b=16),f.x=Number.MAX_VALUE,f.y=Number.MAX_VALUE;for(var C=new d,_=g.MIN_SAFE_INTEGER,M=g.MIN_SAFE_INTEGER,E=0;E<this.curves.length;E++){var A=this.curves[E];A.active&&(A.getBounds(C,b),f.x=Math.min(f.x,C.x),f.y=Math.min(f.y,C.y),_=Math.max(_,C.right),M=Math.max(M,C.bottom))}return f.right=_,f.bottom=M,f},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var f=[],b=0,C=0;C<this.curves.length;C++)b+=this.curves[C].getLength(),f.push(b);return this.cacheLengths=f,f},getCurveAt:function(f){for(var b=f*this.getLength(),C=this.getCurveLengths(),_=0;_<C.length;){if(C[_]>=b)return this.curves[_];_++}return null},getEndPoint:function(f){return f===void 0&&(f=new p),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,f):f.copy(this.startPoint),f},getLength:function(){var f=this.getCurveLengths();return f[f.length-1]},getPoint:function(f,b){b===void 0&&(b=new p);for(var C=f*this.getLength(),_=this.getCurveLengths(),M=0;M<_.length;){if(_[M]>=C){var E=_[M]-C,A=this.curves[M],R=A.getLength(),L=R===0?0:1-E/R;return A.getPointAt(L,b)}M++}return null},getPoints:function(f,b){!f&&!b&&(f=this.defaultDivisions);for(var C=[],_,M=0;M<this.curves.length;M++){var E=this.curves[M];if(E.active)for(var A=E.getResolution(f),R=E.getPoints(A,b),L=0;L<R.length;L++){var Y=R[L];_&&_.equals(Y)||(C.push(Y),_=Y)}}return this.autoClose&&C.length>1&&!C[C.length-1].equals(C[0])&&C.push(C[0]),C},getRandomPoint:function(f){return f===void 0&&(f=new p),this.getPoint(Math.random(),f)},getSpacedPoints:function(f){f===void 0&&(f=40);for(var b=[],C=0;C<=f;C++)b.push(this.getPoint(C/f));return this.autoClose&&b.push(b[0]),b},getStartPoint:function(f){return f===void 0&&(f=new p),f.copy(this.startPoint)},getTangent:function(f,b){b===void 0&&(b=new p);for(var C=f*this.getLength(),_=this.getCurveLengths(),M=0;M<_.length;){if(_[M]>=C){var E=_[M]-C,A=this.curves[M],R=A.getLength(),L=R===0?0:1-E/R;return A.getTangentAt(L,b)}M++}return null},lineTo:function(f,b){f instanceof p?this._tmpVec2B.copy(f):typeof f=="object"?this._tmpVec2B.setFromObject(f):this._tmpVec2B.set(f,b);var C=this.getEndPoint(this._tmpVec2A);return this.add(new o([C.x,C.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(f){return f.unshift(this.getEndPoint()),this.add(new n(f))},moveTo:function(f,b){return f instanceof p?this.add(new r(f.x,f.y)):this.add(new r(f,b))},toJSON:function(){for(var f=[],b=0;b<this.curves.length;b++)f.push(this.curves[b].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:f}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});h.register("path",function(f,b){return new v(f,b)}),y.exports=v},45893:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(24882),c=new u({initialize:function(h,o){this.parent=h,this.events=o,o||(this.events=h.events?h.events:h),this.list={},this.values={},this._frozen=!1,!h.hasOwnProperty("sys")&&this.events&&this.events.once(x.DESTROY,this.destroy,this)},get:function(h){var o=this.list;if(Array.isArray(h)){for(var r=[],a=0;a<h.length;a++)r.push(o[h[a]]);return r}else return o[h]},getAll:function(){var h={};for(var o in this.list)this.list.hasOwnProperty(o)&&(h[o]=this.list[o]);return h},query:function(h){var o={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(h)&&(o[r]=this.list[r]);return o},set:function(h,o){if(this._frozen)return this;if(typeof h=="string")return this.setValue(h,o);for(var r in h)this.setValue(r,h[r]);return this},inc:function(h,o){if(this._frozen)return this;o===void 0&&(o=1);var r=this.get(h);return r===void 0&&(r=0),this.set(h,r+o),this},toggle:function(h){return this._frozen?this:(this.set(h,!this.get(h)),this)},setValue:function(h,o){if(this._frozen)return this;if(this.has(h))this.values[h]=o;else{var r=this,a=this.list,d=this.events,n=this.parent;Object.defineProperty(this.values,h,{enumerable:!0,configurable:!0,get:function(){return a[h]},set:function(p){if(!r._frozen){var g=a[h];a[h]=p,d.emit(x.CHANGE_DATA,n,h,p,g),d.emit(x.CHANGE_DATA_KEY+h,n,p,g)}}}),a[h]=o,d.emit(x.SET_DATA,n,h,o)}return this},each:function(h,o){for(var r=[this.parent,null,void 0],a=1;a<arguments.length;a++)r.push(arguments[a]);for(var d in this.list)r[1]=d,r[2]=this.list[d],h.apply(o,r);return this},merge:function(h,o){o===void 0&&(o=!0);for(var r in h)h.hasOwnProperty(r)&&(o||!o&&!this.has(r))&&this.setValue(r,h[r]);return this},remove:function(h){if(this._frozen)return this;if(Array.isArray(h))for(var o=0;o<h.length;o++)this.removeValue(h[o]);else return this.removeValue(h);return this},removeValue:function(h){if(this.has(h)){var o=this.list[h];delete this.list[h],delete this.values[h],this.events.emit(x.REMOVE_DATA,this.parent,h,o)}return this},pop:function(h){var o=void 0;return!this._frozen&&this.has(h)&&(o=this.list[h],delete this.list[h],delete this.values[h],this.events.emit(x.REMOVE_DATA,this.parent,h,o)),o},has:function(h){return this.list.hasOwnProperty(h)},setFreeze:function(h){return this._frozen=h,this},reset:function(){for(var h in this.list)delete this.list[h],delete this.values[h];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(x.CHANGE_DATA),this.events.off(x.SET_DATA),this.events.off(x.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(h){this._frozen=!!h}},count:{get:function(){var h=0;for(var o in this.list)this.list[o]!==void 0&&h++;return h}}});y.exports=c},63646:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(45893),c=i(37277),h=i(44594),o=new u({Extends:x,initialize:function(r){x.call(this,r,r.sys.events),this.scene=r,this.systems=r.sys,r.sys.events.once(h.BOOT,this.boot,this),r.sys.events.on(h.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){x.prototype.destroy.call(this),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});c.register("DataManagerPlugin",o,"data"),y.exports=o},10700:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="changedata"},93608:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="changedata-"},60883:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="destroy"},69780:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="removedata"},22166:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="setdata"},24882:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={CHANGE_DATA:i(10700),CHANGE_DATA_KEY:i(93608),DESTROY:i(60883),REMOVE_DATA:i(69780),SET_DATA:i(22166)}},44965:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={DataManager:i(45893),DataManagerPlugin:i(63646),Events:i(24882)}},7098:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(84148),x={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function c(){if(typeof importScripts=="function")return x;x.audioData=!!window.Audio,x.webAudio=!!(window.AudioContext||window.webkitAudioContext);var h=document.createElement("audio"),o=!!h.canPlayType;try{if(o){var r=function(n,p){var g=h.canPlayType("audio/"+n).replace(/^no$/,"");return p?!!(g||h.canPlayType("audio/"+p).replace(/^no$/,"")):!!g};if(x.ogg=r('ogg; codecs="vorbis"'),x.opus=r('ogg; codecs="opus"',"opus"),x.mp3=r("mpeg"),x.wav=r("wav"),x.m4a=r("x-m4a"),x.aac=r("aac"),x.flac=r("flac","x-flac"),x.webm=r('webm; codecs="vorbis"'),h.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(u.edge)x.dolby=!0;else if(u.safari&&u.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var a=parseInt(RegExp.$1,10),d=parseInt(RegExp.$2,10);(a===10&&d>=11||a>10)&&(x.dolby=!0)}}}}catch{}return x}y.exports=c()},84148:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25892),x={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function c(){var h=navigator.userAgent;return/Edg\/\d+/.test(h)?(x.edge=!0,x.es2019=!0):/OPR/.test(h)?(x.opera=!0,x.es2019=!0):/Chrome\/(\d+)/.test(h)&&!u.windowsPhone?(x.chrome=!0,x.chromeVersion=parseInt(RegExp.$1,10),x.es2019=x.chromeVersion>69):/Firefox\D+(\d+)/.test(h)?(x.firefox=!0,x.firefoxVersion=parseInt(RegExp.$1,10),x.es2019=x.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(h)&&u.iOS?(x.mobileSafari=!0,x.es2019=!0):/MSIE (\d+\.\d+);/.test(h)?(x.ie=!0,x.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(h)&&!u.windowsPhone?(x.safari=!0,x.safariVersion=parseInt(RegExp.$1,10),x.es2019=x.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(h)&&(x.ie=!0,x.trident=!0,x.tridentVersion=parseInt(RegExp.$1,10),x.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(h)&&(x.silk=!0),x}y.exports=c()},89289:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(27919),x={supportInverseAlpha:!1,supportNewBlendModes:!1};function c(){var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",a="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",d=new Image;return d.onload=function(){var n=new Image;n.onload=function(){var p=u.create2D(n,6),g=p.getContext("2d",{willReadFrequently:!0});if(g.globalCompositeOperation="multiply",g.drawImage(d,0,0),g.drawImage(n,2,0),!g.getImageData(2,0,1,1))return!1;var v=g.getImageData(2,0,1,1).data;u.remove(n),x.supportNewBlendModes=v[0]===255&&v[1]===0&&v[2]===0},n.src=r+"/wCKxvRF"+a},d.src=r+"AP804Oa6"+a,!1}function h(){var r=u.create2D(this,2),a=r.getContext("2d",{willReadFrequently:!0});a.fillStyle="rgba(10, 20, 30, 0.5)",a.fillRect(0,0,1,1);var d=a.getImageData(0,0,1,1);if(d===null)return!1;a.putImageData(d,1,0);var n=a.getImageData(1,0,1,1),p=n.data[0]===d.data[0]&&n.data[1]===d.data[1]&&n.data[2]===d.data[2]&&n.data[3]===d.data[3];return u.remove(this),p}function o(){return typeof importScripts!="function"&&document!==void 0&&(x.supportNewBlendModes=c(),x.supportInverseAlpha=h()),x}y.exports=o()},89357:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25892),x=i(84148),c=i(27919),h={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function o(){var a=new ArrayBuffer(4),d=new Uint8Array(a),n=new Uint32Array(a);return d[0]=161,d[1]=178,d[2]=195,d[3]=212,n[0]===3569595041?!0:n[0]===2712847316?!1:null}function r(){if(typeof importScripts=="function")return h;h.canvas=!!window.CanvasRenderingContext2D;try{h.localStorage=!!localStorage.getItem}catch{h.localStorage=!1}h.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,h.fileSystem=!!window.requestFileSystem;var a=!1,d=function(){if(window.WebGLRenderingContext)try{var n=c.createWebGL(this),p=n.getContext("webgl")||n.getContext("experimental-webgl"),g=c.create2D(this),v=g.getContext("2d",{willReadFrequently:!0}),f=v.createImageData(1,1);return a=f.data instanceof Uint8ClampedArray,c.remove(n),c.remove(g),!!p}catch{return!1}return!1};return h.webGL=d(),h.worker=!!window.Worker,h.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,h.getUserMedia=h.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,x.firefox&&x.firefoxVersion<21&&(h.getUserMedia=!1),!u.iOS&&(x.ie||x.firefox||x.chrome)&&(h.canvasBitBltShift=!0),(x.safari||x.mobileSafari)&&(h.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(h.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(h.littleEndian=o()),h.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&h.littleEndian!==null&&a,h}y.exports=r()},91639:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={available:!1,cancel:"",keyboard:!1,request:""};function i(){if(typeof importScripts=="function")return P;var u,x="Fullscreen",c="FullScreen",h=["request"+x,"request"+c,"webkitRequest"+x,"webkitRequest"+c,"msRequest"+x,"msRequest"+c,"mozRequest"+c,"mozRequest"+x];for(u=0;u<h.length;u++)if(document.documentElement[h[u]]){P.available=!0,P.request=h[u];break}var o=["cancel"+c,"exit"+x,"webkitCancel"+c,"webkitExit"+x,"msCancel"+c,"msExit"+x,"mozCancel"+c,"mozExit"+x];if(P.available){for(u=0;u<o.length;u++)if(document[o[u]]){P.cancel=o[u];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(P.keyboard=!0),Object.defineProperty(P,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),P}y.exports=i()},31784:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(84148),x={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function c(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(x.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(x.mspointer=!0),navigator.getGamepads&&(x.gamepads=!0),"onwheel"in window||u.ie&&"WheelEvent"in window?x.wheelEvent="wheel":"onmousewheel"in window?x.wheelEvent="mousewheel":u.firefox&&"MouseScrollEvent"in window&&(x.wheelEvent="DOMMouseScroll")),x}y.exports=c()},25892:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function i(){if(typeof importScripts=="function")return P;var u=navigator.userAgent;/Windows/.test(u)?P.windows=!0:/Mac OS/.test(u)&&!/like Mac OS/.test(u)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(P.iOS=!0,P.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),P.iOSVersion=parseInt(RegExp.$1,10)):P.macOS=!0:/Android/.test(u)?P.android=!0:/Linux/.test(u)?P.linux=!0:/iP[ao]d|iPhone/i.test(u)?(P.iOS=!0,navigator.appVersion.match(/OS (\d+)/),P.iOSVersion=parseInt(RegExp.$1,10),P.iPhone=u.toLowerCase().indexOf("iphone")!==-1,P.iPad=u.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(u)||/\bKF[A-Z][A-Z]+/.test(u)||/Silk.*Mobile Safari/.test(u)?P.kindle=!0:/CrOS/.test(u)&&(P.chromeOS=!0),(/Windows Phone/i.test(u)||/IEMobile/i.test(u))&&(P.android=!1,P.iOS=!1,P.macOS=!1,P.windows=!0,P.windowsPhone=!0);var x=/Silk/.test(u);return(P.windows||P.macOS||P.linux&&!x||P.chromeOS)&&(P.desktop=!0),(P.windowsPhone||/Windows NT/i.test(u)&&/Touch/i.test(u))&&(P.desktop=!1),navigator.standalone&&(P.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(P.cordova=!0),window.ejecta!==void 0&&(P.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(P.node=!0),P.node&&typeof process.versions=="object"&&(P.nodeWebkit=!!process.versions["node-webkit"],P.electron=!!process.versions.electron),/Crosswalk/.test(u)&&(P.crosswalk=!0),P.pixelRatio=window.devicePixelRatio||1,P}y.exports=i()},43267:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(95540),x={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function c(){if(typeof importScripts=="function")return x;var h=document.createElement("video"),o=!!h.canPlayType,r=/^no$/;try{o&&(h.canPlayType('video/ogg; codecs="theora"').replace(r,"")&&(x.ogg=!0),h.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(r,"")&&(x.h264=!0,x.mp4=!0),h.canPlayType("video/x-m4v").replace(r,"")&&(x.m4v=!0),h.canPlayType('video/webm; codecs="vp8, vorbis"').replace(r,"")&&(x.webm=!0),h.canPlayType('video/webm; codecs="vp9"').replace(r,"")&&(x.vp9=!0),h.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(r,"")&&(x.hls=!0))}catch{}return h.parentNode&&h.parentNode.removeChild(h),x.getVideoURL=function(a){Array.isArray(a)||(a=[a]);for(var d=0;d<a.length;d++){var n=u(a[d],"url",a[d]);if(n.indexOf("blob:")===0)return{url:n,type:""};var p;if(n.indexOf("data:")===0?p=n.split(",")[0].match(/\/(.*?);/):p=n.match(/\.([a-zA-Z0-9]+)($|\?)/),p=u(a[d],"type",p?p[1]:"").toLowerCase(),x[p])return{url:n,type:p}}return null},x}y.exports=c()},82264:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={os:i(25892),browser:i(84148),features:i(89357),input:i(31784),audio:i(7098),video:i(43267),fullscreen:i(91639),canvasFeatures:i(89289)}},89422:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new Float32Array(20),c=new u({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(h){return this._matrix.set(h),this._dirty=!0,this},reset:function(){var h=this._matrix;return h.fill(0),h[0]=1,h[6]=1,h[12]=1,h[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var h=this._data;return this._dirty&&(h.set(this._matrix),h[4]/=255,h[9]/=255,h[14]/=255,h[19]/=255,this._dirty=!1),h},brightness:function(h,o){h===void 0&&(h=0),o===void 0&&(o=!1);var r=h;return this.multiply([r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],o)},saturate:function(h,o){h===void 0&&(h=0),o===void 0&&(o=!1);var r=h*2/3+1,a=(r-1)*-.5;return this.multiply([r,a,a,0,0,a,r,a,0,0,a,a,r,0,0,0,0,0,1,0],o)},desaturate:function(h){return h===void 0&&(h=!1),this.saturate(-1,h)},hue:function(h,o){h===void 0&&(h=0),o===void 0&&(o=!1),h=h/180*Math.PI;var r=Math.cos(h),a=Math.sin(h),d=.213,n=.715,p=.072;return this.multiply([d+r*(1-d)+a*-d,n+r*-n+a*-n,p+r*-p+a*(1-p),0,0,d+r*-d+a*.143,n+r*(1-n)+a*.14,p+r*-p+a*-.283,0,0,d+r*-d+a*-.787,n+r*-n+a*n,p+r*(1-p)+a*p,0,0,0,0,0,1,0],o)},grayscale:function(h,o){return h===void 0&&(h=1),o===void 0&&(o=!1),this.saturate(-h,o)},blackWhite:function(h){return h===void 0&&(h=!1),this.multiply(c.BLACK_WHITE,h)},contrast:function(h,o){h===void 0&&(h=0),o===void 0&&(o=!1);var r=h+1,a=-.5*(r-1);return this.multiply([r,0,0,0,a,0,r,0,0,a,0,0,r,0,a,0,0,0,1,0],o)},negative:function(h){return h===void 0&&(h=!1),this.multiply(c.NEGATIVE,h)},desaturateLuminance:function(h){return h===void 0&&(h=!1),this.multiply(c.DESATURATE_LUMINANCE,h)},sepia:function(h){return h===void 0&&(h=!1),this.multiply(c.SEPIA,h)},night:function(h,o){return h===void 0&&(h=.1),o===void 0&&(o=!1),this.multiply([h*-2,-h,0,0,0,-h,0,h,0,0,0,h,h*2,0,0,0,0,0,1,0],o)},lsd:function(h){return h===void 0&&(h=!1),this.multiply(c.LSD,h)},brown:function(h){return h===void 0&&(h=!1),this.multiply(c.BROWN,h)},vintagePinhole:function(h){return h===void 0&&(h=!1),this.multiply(c.VINTAGE,h)},kodachrome:function(h){return h===void 0&&(h=!1),this.multiply(c.KODACHROME,h)},technicolor:function(h){return h===void 0&&(h=!1),this.multiply(c.TECHNICOLOR,h)},polaroid:function(h){return h===void 0&&(h=!1),this.multiply(c.POLAROID,h)},shiftToBGR:function(h){return h===void 0&&(h=!1),this.multiply(c.SHIFT_BGR,h)},multiply:function(h,o){o===void 0&&(o=!1),o||this.reset();var r=this._matrix,a=x;return a.set(r),r.set([a[0]*h[0]+a[1]*h[5]+a[2]*h[10]+a[3]*h[15],a[0]*h[1]+a[1]*h[6]+a[2]*h[11]+a[3]*h[16],a[0]*h[2]+a[1]*h[7]+a[2]*h[12]+a[3]*h[17],a[0]*h[3]+a[1]*h[8]+a[2]*h[13]+a[3]*h[18],a[0]*h[4]+a[1]*h[9]+a[2]*h[14]+a[3]*h[19]+a[4],a[5]*h[0]+a[6]*h[5]+a[7]*h[10]+a[8]*h[15],a[5]*h[1]+a[6]*h[6]+a[7]*h[11]+a[8]*h[16],a[5]*h[2]+a[6]*h[7]+a[7]*h[12]+a[8]*h[17],a[5]*h[3]+a[6]*h[8]+a[7]*h[13]+a[8]*h[18],a[5]*h[4]+a[6]*h[9]+a[7]*h[14]+a[8]*h[19]+a[9],a[10]*h[0]+a[11]*h[5]+a[12]*h[10]+a[13]*h[15],a[10]*h[1]+a[11]*h[6]+a[12]*h[11]+a[13]*h[16],a[10]*h[2]+a[11]*h[7]+a[12]*h[12]+a[13]*h[17],a[10]*h[3]+a[11]*h[8]+a[12]*h[13]+a[13]*h[18],a[10]*h[4]+a[11]*h[9]+a[12]*h[14]+a[13]*h[19]+a[14],a[15]*h[0]+a[16]*h[5]+a[17]*h[10]+a[18]*h[15],a[15]*h[1]+a[16]*h[6]+a[17]*h[11]+a[18]*h[16],a[15]*h[2]+a[16]*h[7]+a[17]*h[12]+a[18]*h[17],a[15]*h[3]+a[16]*h[8]+a[17]*h[13]+a[18]*h[18],a[15]*h[4]+a[16]*h[9]+a[17]*h[14]+a[18]*h[19]+a[19]]),this._dirty=!0,this}});c.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],c.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],c.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],c.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],c.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],c.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],c.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],c.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],c.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],c.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],c.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],y.exports=c},51767:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(29747),c=new u({initialize:function(h,o,r){this._rgb=[0,0,0],this.onChangeCallback=x,this.dirty=!1,this.set(h,o,r)},set:function(h,o,r){return h===void 0&&(h=0),o===void 0&&(o=0),r===void 0&&(r=0),this._rgb=[h,o,r],this.onChange(),this},equals:function(h,o,r){var a=this._rgb;return a[0]===h&&a[1]===o&&a[2]===r},onChange:function(){this.dirty=!0;var h=this._rgb;this.onChangeCallback.call(this,h[0],h[1],h[2])},r:{get:function(){return this._rgb[0]},set:function(h){this._rgb[0]=h,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(h){this._rgb[1]=h,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(h){this._rgb[2]=h,this.onChange()}},destroy:function(){this.onChangeCallback=null}});y.exports=c},60461:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};y.exports=P},54312:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62235),x=i(35893),c=i(86327),h=i(88417),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),h(r,x(a)+d),c(r,u(a)+n),r};y.exports=o},46768:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62235),x=i(26541),c=i(86327),h=i(385),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),h(r,x(a)-d),c(r,u(a)+n),r};y.exports=o},35827:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62235),x=i(54380),c=i(86327),h=i(40136),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),h(r,x(a)+d),c(r,u(a)+n),r};y.exports=o},46871:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66786),x=i(35893),c=i(7702),h=function(o,r,a,d){return a===void 0&&(a=0),d===void 0&&(d=0),u(o,x(r)+a,c(r)+d),o};y.exports=h},5198:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7702),x=i(26541),c=i(20786),h=i(385),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),h(r,x(a)-d),c(r,u(a)+n),r};y.exports=o},11879:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(60461),x=[];x[u.BOTTOM_CENTER]=i(54312),x[u.BOTTOM_LEFT]=i(46768),x[u.BOTTOM_RIGHT]=i(35827),x[u.CENTER]=i(46871),x[u.LEFT_CENTER]=i(5198),x[u.RIGHT_CENTER]=i(80503),x[u.TOP_CENTER]=i(89698),x[u.TOP_LEFT]=i(922),x[u.TOP_RIGHT]=i(21373),x[u.LEFT_BOTTOM]=x[u.BOTTOM_LEFT],x[u.LEFT_TOP]=x[u.TOP_LEFT],x[u.RIGHT_BOTTOM]=x[u.BOTTOM_RIGHT],x[u.RIGHT_TOP]=x[u.TOP_RIGHT];var c=function(h,o,r,a,d){return x[r](h,o,a,d)};y.exports=c},80503:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7702),x=i(54380),c=i(20786),h=i(40136),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),h(r,x(a)+d),c(r,u(a)+n),r};y.exports=o},89698:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35893),x=i(17717),c=i(88417),h=i(66737),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),c(r,u(a)+d),h(r,x(a)-n),r};y.exports=o},922:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26541),x=i(17717),c=i(385),h=i(66737),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),c(r,u(a)-d),h(r,x(a)-n),r};y.exports=o},21373:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(54380),x=i(17717),c=i(40136),h=i(66737),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),c(r,u(a)+d),h(r,x(a)-n),r};y.exports=o},91660:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={BottomCenter:i(54312),BottomLeft:i(46768),BottomRight:i(35827),Center:i(46871),LeftCenter:i(5198),QuickSet:i(11879),RightCenter:i(80503),TopCenter:i(89698),TopLeft:i(922),TopRight:i(21373)}},71926:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(60461),x=i(79291),c={In:i(91660),To:i(16694)};c=x(!1,c,u),y.exports=c},21578:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62235),x=i(35893),c=i(88417),h=i(66737),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),c(r,x(a)+d),h(r,u(a)+n),r};y.exports=o},10210:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62235),x=i(26541),c=i(385),h=i(66737),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),c(r,x(a)-d),h(r,u(a)+n),r};y.exports=o},82341:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62235),x=i(54380),c=i(40136),h=i(66737),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),c(r,x(a)+d),h(r,u(a)+n),r};y.exports=o},87958:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62235),x=i(26541),c=i(86327),h=i(40136),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),h(r,x(a)-d),c(r,u(a)+n),r};y.exports=o},40080:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7702),x=i(26541),c=i(20786),h=i(40136),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),h(r,x(a)-d),c(r,u(a)+n),r};y.exports=o},88466:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26541),x=i(17717),c=i(40136),h=i(66737),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),c(r,u(a)-d),h(r,x(a)-n),r};y.exports=o},38829:(y,P,i)=>{/**
* @author       samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(60461),x=[];x[u.BOTTOM_CENTER]=i(21578),x[u.BOTTOM_LEFT]=i(10210),x[u.BOTTOM_RIGHT]=i(82341),x[u.LEFT_BOTTOM]=i(87958),x[u.LEFT_CENTER]=i(40080),x[u.LEFT_TOP]=i(88466),x[u.RIGHT_BOTTOM]=i(19211),x[u.RIGHT_CENTER]=i(34609),x[u.RIGHT_TOP]=i(48741),x[u.TOP_CENTER]=i(49440),x[u.TOP_LEFT]=i(81288),x[u.TOP_RIGHT]=i(61323);var c=function(h,o,r,a,d){return x[r](h,o,a,d)};y.exports=c},19211:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62235),x=i(54380),c=i(86327),h=i(385),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),h(r,x(a)+d),c(r,u(a)+n),r};y.exports=o},34609:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7702),x=i(54380),c=i(20786),h=i(385),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),h(r,x(a)+d),c(r,u(a)+n),r};y.exports=o},48741:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(54380),x=i(17717),c=i(385),h=i(66737),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),c(r,u(a)+d),h(r,x(a)-n),r};y.exports=o},49440:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35893),x=i(17717),c=i(86327),h=i(88417),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),h(r,u(a)+d),c(r,x(a)-n),r};y.exports=o},81288:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26541),x=i(17717),c=i(86327),h=i(385),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),h(r,u(a)-d),c(r,x(a)-n),r};y.exports=o},61323:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(54380),x=i(17717),c=i(86327),h=i(40136),o=function(r,a,d,n){return d===void 0&&(d=0),n===void 0&&(n=0),h(r,u(a)+d),c(r,x(a)-n),r};y.exports=o},16694:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={BottomCenter:i(21578),BottomLeft:i(10210),BottomRight:i(82341),LeftBottom:i(87958),LeftCenter:i(40080),LeftTop:i(88466),QuickSet:i(38829),RightBottom:i(19211),RightCenter:i(34609),RightTop:i(48741),TopCenter:i(49440),TopLeft:i(81288),TopRight:i(61323)}},66786:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(88417),x=i(20786),c=function(h,o,r){return u(h,o),x(h,r)};y.exports=c},62235:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.y+i.height-i.height*i.originY};y.exports=P},72873:(y,P,i)=>{/**
* @author       samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62235),x=i(26541),c=i(54380),h=i(17717),o=i(87841),r=function(a,d){d===void 0&&(d=new o);var n=x(a),p=h(a);return d.x=n,d.y=p,d.width=c(a)-n,d.height=u(a)-p,d};y.exports=r},35893:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.x-i.width*i.originX+i.width*.5};y.exports=P},7702:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.y-i.height*i.originY+i.height*.5};y.exports=P},26541:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.x-i.width*i.originX};y.exports=P},87431:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.width*i.originX};y.exports=P},46928:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.height*i.originY};y.exports=P},54380:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.x+i.width-i.width*i.originX};y.exports=P},17717:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.y-i.height*i.originY};y.exports=P},86327:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.y=u-i.height+i.height*i.originY,i};y.exports=P},88417:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=i.width*i.originX;return i.x=u+x-i.width*.5,i};y.exports=P},20786:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=i.height*i.originY;return i.y=u+x-i.height*.5,i};y.exports=P},385:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.x=u+i.width*i.originX,i};y.exports=P},40136:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.x=u-i.width+i.width*i.originX,i};y.exports=P},66737:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.y=u+i.height*i.originY,i};y.exports=P},58724:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={CenterOn:i(66786),GetBottom:i(62235),GetBounds:i(72873),GetCenterX:i(35893),GetCenterY:i(7702),GetLeft:i(26541),GetOffsetX:i(87431),GetOffsetY:i(46928),GetRight:i(54380),GetTop:i(17717),SetBottom:i(86327),SetCenterX:i(88417),SetCenterY:i(20786),SetLeft:i(385),SetRight:i(40136),SetTop:i(66737)}},20623:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setCrisp:function(i){var u=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return u.forEach(function(x){i.style["image-rendering"]=x}),i.style.msInterpolationMode="nearest-neighbor",i},setBicubic:function(i){return i.style["image-rendering"]="auto",i.style.msInterpolationMode="bicubic",i}};y.exports=P},27919:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(8054),x=i(68703),c=[],h=!1,o=function(){var r=function(C,_,M,E,A){_===void 0&&(_=1),M===void 0&&(M=1),E===void 0&&(E=u.CANVAS),A===void 0&&(A=!1);var R,L=n(E);return L===null?(L={parent:C,canvas:document.createElement("canvas"),type:E},E===u.CANVAS&&c.push(L),R=L.canvas):(L.parent=C,R=L.canvas),A&&(L.parent=R),R.width=_,R.height=M,h&&E===u.CANVAS&&x.disable(R.getContext("2d",{willReadFrequently:!1})),R},a=function(C,_,M){return r(C,_,M,u.CANVAS)},d=function(C,_,M){return r(C,_,M,u.WEBGL)},n=function(C){if(C===void 0&&(C=u.CANVAS),C===u.WEBGL)return null;for(var _=0;_<c.length;_++){var M=c[_];if(!M.parent&&M.type===C)return M}return null},p=function(C){var _=C instanceof HTMLCanvasElement;c.forEach(function(M){(_&&M.canvas===C||!_&&M.parent===C)&&(M.parent=null,M.canvas.width=1,M.canvas.height=1)})},g=function(){var C=0;return c.forEach(function(_){_.parent&&C++}),C},v=function(){return c.length-g()},f=function(){h=!0},b=function(){h=!1};return{create2D:a,create:r,createWebGL:d,disableSmoothing:f,enableSmoothing:b,first:n,free:v,pool:c,remove:p,total:g}};y.exports=o()},68703:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P="",i=function(){var u=function(o){for(var r=["i","webkitI","msI","mozI","oI"],a=0;a<r.length;a++){var d=r[a]+"mageSmoothingEnabled";if(d in o)return d}return null},x=function(o){return P===""&&(P=u(o)),P&&(o[P]=!0),o},c=function(o){return P===""&&(P=u(o)),P&&(o[P]=!1),o},h=function(o){return P!==null?o[P]:null};return{disable:c,enable:x,getPrefix:u,isEnabled:h}};y.exports=i()},65208:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u===void 0&&(u="none"),i.style.msTouchAction=u,i.style["ms-touch-action"]=u,i.style["touch-action"]=u,i};y.exports=P},91610:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){u===void 0&&(u="none");var x=["-webkit-","-khtml-","-moz-","-ms-",""];return x.forEach(function(c){i.style[c+"user-select"]=u}),i.style["-webkit-touch-callout"]=u,i.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",i};y.exports=P},26253:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={CanvasInterpolation:i(20623),CanvasPool:i(27919),Smoothing:i(68703),TouchAction:i(65208),UserSelect:i(91610)}},40987:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(37589),c=i(1e3),h=i(7537),o=i(87837),r=new u({initialize:function(a,d,n,p){a===void 0&&(a=0),d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(a,d,n,p)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(a,d,n,p,g){return p===void 0&&(p=255),g===void 0&&(g=!0),this._locked=!0,this.red=a,this.green=d,this.blue=n,this.alpha=p,this._locked=!1,this.update(g)},setGLTo:function(a,d,n,p){return p===void 0&&(p=1),this._locked=!0,this.redGL=a,this.greenGL=d,this.blueGL=n,this.alphaGL=p,this._locked=!1,this.update(!0)},setFromRGB:function(a){return this._locked=!0,this.red=a.r,this.green=a.g,this.blue=a.b,a.hasOwnProperty("a")&&(this.alpha=a.a),this._locked=!1,this.update(!0)},setFromHSV:function(a,d,n){return h(a,d,n,this)},update:function(a){if(a===void 0&&(a=!1),this._locked)return this;var d=this.r,n=this.g,p=this.b,g=this.a;return this._color=x(d,n,p),this._color32=c(d,n,p,g),this._rgba="rgba("+d+","+n+","+p+","+g/255+")",a&&o(d,n,p,this),this},updateHSV:function(){var a=this.r,d=this.g,n=this.b;return o(a,d,n,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(a){return this.setTo(a,a,a)},random:function(a,d){a===void 0&&(a=0),d===void 0&&(d=255);var n=Math.floor(a+Math.random()*(d-a)),p=Math.floor(a+Math.random()*(d-a)),g=Math.floor(a+Math.random()*(d-a));return this.setTo(n,p,g)},randomGray:function(a,d){a===void 0&&(a=0),d===void 0&&(d=255);var n=Math.floor(a+Math.random()*(d-a));return this.setTo(n,n,n)},saturate:function(a){return this.s+=a/100,this},desaturate:function(a){return this.s-=a/100,this},lighten:function(a){return this.v+=a/100,this},darken:function(a){return this.v-=a/100,this},brighten:function(a){var d=this.r,n=this.g,p=this.b;return d=Math.max(0,Math.min(255,d-Math.round(255*-(a/100)))),n=Math.max(0,Math.min(255,n-Math.round(255*-(a/100)))),p=Math.max(0,Math.min(255,p-Math.round(255*-(a/100)))),this.setTo(d,n,p)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(a){this.gl[0]=Math.min(Math.abs(a),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(a){this.gl[1]=Math.min(Math.abs(a),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(a){this.gl[2]=Math.min(Math.abs(a),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(a){this.gl[3]=Math.min(Math.abs(a),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(a){a=Math.floor(Math.abs(a)),this.r=Math.min(a,255),this.gl[0]=a/255,this.update(!0)}},green:{get:function(){return this.g},set:function(a){a=Math.floor(Math.abs(a)),this.g=Math.min(a,255),this.gl[1]=a/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(a){a=Math.floor(Math.abs(a)),this.b=Math.min(a,255),this.gl[2]=a/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(a){a=Math.floor(Math.abs(a)),this.a=Math.min(a,255),this.gl[3]=a/255,this.update()}},h:{get:function(){return this._h},set:function(a){this._h=a,h(a,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(a){this._s=a,h(this._h,a,this._v,this)}},v:{get:function(){return this._v},set:function(a){this._v=a,h(this._h,this._s,a,this)}}});y.exports=r},92728:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(37589),x=function(c){c===void 0&&(c=1024);var h=[],o=255,r,a=255,d=0,n=0;for(r=0;r<=o;r++)h.push({r:a,g:r,b:n,color:u(a,r,n)});for(d=255,r=o;r>=0;r--)h.push({r,g:d,b:n,color:u(r,d,n)});for(a=0,r=0;r<=o;r++,d--)h.push({r:a,g:d,b:r,color:u(a,d,r)});for(d=0,n=255,r=0;r<=o;r++,n--,a++)h.push({r:a,g:d,b:n,color:u(a,d,n)});if(c===1024)return h;var p=[],g=0,v=1024/c;for(r=0;r<c;r++)p.push(h[Math.floor(g)]),g+=v;return p};y.exports=x},91588:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u={r:i>>16&255,g:i>>8&255,b:i&255,a:255};return i>16777215&&(u.a=i>>>24),u};y.exports=P},62957:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u=i.toString(16);return u.length===1?"0"+u:u};y.exports=P},37589:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return i<<16|u<<8|x};y.exports=P},1e3:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){return c<<24|i<<16|u<<8|x};y.exports=P},62183:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(40987),x=i(89528),c=function(h,o,r){var a=r,d=r,n=r;if(o!==0){var p=r<.5?r*(1+o):r+o-r*o,g=2*r-p;a=x(g,p,h+1/3),d=x(g,p,h),n=x(g,p,h-1/3)}var v=new u;return v.setGLTo(a,d,n,1)};y.exports=c},27939:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7537),x=function(c,h){c===void 0&&(c=1),h===void 0&&(h=1);for(var o=[],r=0;r<=359;r++)o.push(u(r/359,c,h));return o};y.exports=x},7537:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(37589);function x(h,o,r,a){var d=(h+o*6)%6,n=Math.min(d,4-d,1);return Math.round(255*(a-a*r*Math.max(0,n)))}var c=function(h,o,r,a){o===void 0&&(o=1),r===void 0&&(r=1);var d=x(5,h,o,r),n=x(3,h,o,r),p=x(1,h,o,r);return a?a.setTo?a.setTo(d,n,p,a.alpha,!0):(a.r=d,a.g=n,a.b=p,a.color=u(d,n,p),a):{r:d,g:n,b:p,color:u(d,n,p)}};y.exports=c},70238:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(40987),x=function(c){var h=new u;c=c.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,p,g,v){return p+p+g+g+v+v});var o=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c);if(o){var r=parseInt(o[1],16),a=parseInt(o[2],16),d=parseInt(o[3],16);h.setTo(r,a,d)}return h};y.exports=x},89528:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return x<0&&(x+=1),x>1&&(x-=1),x<.16666666666666666?i+(u-i)*6*x:x<.5?u:x<.6666666666666666?i+(u-i)*(.6666666666666666-x)*6:i};y.exports=P},30100:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(40987),x=i(90664),c=function(h){var o=x(h);return new u(o.r,o.g,o.b,o.a)};y.exports=c},90664:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i>16777215?{a:i>>>24,r:i>>16&255,g:i>>8&255,b:i&255}:{a:255,r:i>>16&255,g:i>>8&255,b:i&255}};y.exports=P},13699:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(28915),x=i(37589),c=function(r,a,d,n,p,g,v,f){v===void 0&&(v=100),f===void 0&&(f=0);var b=f/v,C=u(r,n,b),_=u(a,p,b),M=u(d,g,b);return{r:C,g:_,b:M,a:255,color:x(C,_,M)}},h=function(r,a,d,n){return d===void 0&&(d=100),n===void 0&&(n=0),c(r.r,r.g,r.b,a.r,a.g,a.b,d,n)},o=function(r,a,d,n,p,g){return p===void 0&&(p=100),g===void 0&&(g=0),c(r.r,r.g,r.b,a,d,n,p,g)};y.exports={RGBWithRGB:c,ColorWithRGB:o,ColorWithColor:h}},68957:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(40987),x=function(c){return new u(c.r,c.g,c.b,c.a)};y.exports=x},87388:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(40987),x=function(c){var h=new u,o=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(c.toLowerCase());if(o){var r=parseInt(o[1],10),a=parseInt(o[2],10),d=parseInt(o[3],10),n=o[4]!==void 0?parseFloat(o[4]):1;h.setTo(r,a,d,n*255)}return h};y.exports=x},87837:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){c===void 0&&(c={h:0,s:0,v:0}),i/=255,u/=255,x/=255;var h=Math.min(i,u,x),o=Math.max(i,u,x),r=o-h,a=0,d=o===0?0:r/o,n=o;return o!==h&&(o===i?a=(u-x)/r+(u<x?6:0):o===u?a=(x-i)/r+2:o===x&&(a=(i-u)/r+4),a/=6),c.hasOwnProperty("_h")?(c._h=a,c._s=d,c._v=n):(c.h=a,c.s=d,c.v=n),c};y.exports=P},75723:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62957),x=function(c,h,o,r,a){return r===void 0&&(r=255),a===void 0&&(a="#"),a==="#"?"#"+((1<<24)+(c<<16)+(h<<8)+o).toString(16).slice(1,7):"0x"+u(r)+u(c)+u(h)+u(o)};y.exports=x},85386:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(30976),x=i(40987),c=function(h,o){return h===void 0&&(h=0),o===void 0&&(o=255),new x(u(h,o),u(h,o),u(h,o))};y.exports=c},80333:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(70238),x=i(30100),c=i(68957),h=i(87388),o=function(r){var a=typeof r;switch(a){case"string":return r.substr(0,3).toLowerCase()==="rgb"?h(r):u(r);case"number":return x(r);case"object":return c(r)}};y.exports=o},3956:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(40987);u.ColorSpectrum=i(92728),u.ColorToRGBA=i(91588),u.ComponentToHex=i(62957),u.GetColor=i(37589),u.GetColor32=i(1e3),u.HexStringToColor=i(70238),u.HSLToColor=i(62183),u.HSVColorWheel=i(27939),u.HSVToRGB=i(7537),u.HueToComponent=i(89528),u.IntegerToColor=i(30100),u.IntegerToRGB=i(90664),u.Interpolate=i(13699),u.ObjectToColor=i(68957),u.RandomRGB=i(85386),u.RGBStringToColor=i(87388),u.RGBToHSV=i(87837),u.RGBToString=i(75723),u.ValueToColor=i(80333),y.exports=u},27460:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Align:i(71926),BaseShader:i(73894),Bounds:i(58724),Canvas:i(26253),Color:i(3956),ColorMatrix:i(89422),Masks:i(69781),RGB:i(51767)}},6858:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(39429),c=new u({initialize:function(h,o,r,a,d,n){o||(o=h.sys.make.image({x:r,y:a,key:d,frame:n,add:!1})),this.bitmapMask=o,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(h){this.bitmapMask=h},preRenderWebGL:function(h,o,r){h.pipelines.BITMAPMASK_PIPELINE.beginMask(this,o,r)},postRenderWebGL:function(h,o,r){h.pipelines.BITMAPMASK_PIPELINE.endMask(this,o,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});x.register("bitmapMask",function(h,o,r,a,d){return new c(this.scene,h,o,r,a,d)}),y.exports=c},80661:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h){this.geometryMask=h,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(c){return this.geometryMask=c,this},setInvertAlpha:function(c){return c===void 0&&(c=!0),this.invertAlpha=c,this},preRenderWebGL:function(c,h,o){var r=c.gl;c.flush(),c.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),c.maskCount=0),c.currentCameraMask.mask!==this&&(c.currentMask.mask=this),c.maskStack.push({mask:this,camera:o}),this.applyStencil(c,o,!0),c.maskCount++},applyStencil:function(c,h,o){var r=c.gl,a=this.geometryMask,d=c.maskCount,n=255;r.colorMask(!1,!1,!1,!1),o?(r.stencilFunc(r.EQUAL,d,n),r.stencilOp(r.KEEP,r.KEEP,r.INCR),d++):(r.stencilFunc(r.EQUAL,d+1,n),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),this.level=d,a.renderWebGL(c,a,h),c.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.invertAlpha?r.stencilFunc(r.NOTEQUAL,d,n):r.stencilFunc(r.EQUAL,d,n)},postRenderWebGL:function(c){var h=c.gl;c.maskStack.pop(),c.maskCount--,c.flush();var o=c.currentMask;if(c.maskStack.length===0)o.mask=null,h.disable(h.STENCIL_TEST);else{var r=c.maskStack[c.maskStack.length-1];r.mask.applyStencil(c,r.camera,!1),c.currentCameraMask.mask!==r.mask?(o.mask=r.mask,o.camera=r.camera):o.mask=null}},preRenderCanvas:function(c,h,o){var r=this.geometryMask;c.currentContext.save(),r.renderCanvas(c,r,o,null,null,!0),c.currentContext.clip()},postRenderCanvas:function(c){c.currentContext.restore()},destroy:function(){this.geometryMask=null}});y.exports=x},69781:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={BitmapMask:i(6858),GeometryMask:i(80661)}},73894:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h,o,r){(!h||h==="")&&(h=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!o||o==="")&&(o=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),r===void 0&&(r=null),this.key=c,this.fragmentSrc=h,this.vertexSrc=o,this.uniforms=r}});y.exports=x},40366:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x;if(u)typeof u=="string"?x=document.getElementById(u):typeof u=="object"&&u.nodeType===1&&(x=u);else if(i.parentElement||u===null)return i;return x||(x=document.body),x.appendChild(i),i};y.exports=P},83719:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(40366),x=function(c){var h=c.config;if(!(!h.parent||!h.domCreateContainer)){var o=document.createElement("div");o.style.cssText=["display: block;","width: "+c.scale.width+"px;","height: "+c.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+h.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),c.domContainer=o,u(o,h.parent)}};y.exports=x},57264:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25892),x=function(c){if(document.readyState==="complete"||document.readyState==="interactive"){c();return}var h=function(){document.removeEventListener("deviceready",h,!0),document.removeEventListener("DOMContentLoaded",h,!0),window.removeEventListener("load",h,!0),c()};document.body?u.cordova?document.addEventListener("deviceready",h,!1):(document.addEventListener("DOMContentLoaded",h,!0),window.addEventListener("load",h,!0)):window.setTimeout(h,20)};y.exports=x},57811:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){if(!i)return window.innerHeight;var u=Math.abs(window.orientation),x={w:0,h:0},c=document.createElement("div");return c.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(c),x.w=u===90?c.offsetHeight:window.innerWidth,x.h=u===90?window.innerWidth:c.offsetHeight,document.documentElement.removeChild(c),c=null,Math.abs(window.orientation)!==90?x.h:x.w};y.exports=P},45818:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(13560),x=function(c,h){var o=window.screen,r=o?o.orientation||o.mozOrientation||o.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?u.ORIENTATION.PORTRAIT:u.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return u.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return u.ORIENTATION.LANDSCAPE}else return h>c?u.ORIENTATION.PORTRAIT:u.ORIENTATION.LANDSCAPE};y.exports=x},74403:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u;return i!==""&&(typeof i=="string"?u=document.getElementById(i):i&&i.nodeType===1&&(u=i)),u||(u=document.body),u};y.exports=P},56836:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u="";try{if(window.DOMParser){var x=new DOMParser;u=x.parseFromString(i,"text/xml")}else u=new ActiveXObject("Microsoft.XMLDOM"),u.loadXML(i)}catch{u=null}return!u||!u.documentElement||u.getElementsByTagName("parsererror").length?null:u};y.exports=P},35846:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){i.parentNode&&i.parentNode.removeChild(i)};y.exports=P},43092:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(29747),c=new u({initialize:function(){this.isRunning=!1,this.callback=x,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var h=this;this.step=function o(r){h.callback(r),h.isRunning&&(h.timeOutID=window.requestAnimationFrame(o))},this.stepTimeout=function o(){h.isRunning&&(h.timeOutID=window.setTimeout(o,h.delay)),h.callback(window.performance.now())}},start:function(h,o,r){this.isRunning||(this.callback=h,this.isSetTimeOut=o,this.delay=r,this.isRunning=!0,this.timeOutID=o?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=x}});y.exports=c},84902:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u={AddToDOM:i(40366),DOMContentLoaded:i(57264),GetInnerHeight:i(57811),GetScreenOrientation:i(45818),GetTarget:i(74403),ParseXML:i(56836),RemoveFromDOM:i(35846),RequestAnimationFrame:i(43092)};y.exports=u},47565:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(50792),c=i(37277),h=new u({Extends:x,initialize:function(){x.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});c.register("EventEmitter",h,"events"),y.exports=h},93055:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={EventEmitter:i(47565)}},20122:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72898),c=i(14811),h=new u({Extends:x,initialize:function(o,r){r===void 0&&(r=1),x.call(this,c.BARREL,o),this.amount=r}});y.exports=h},32251:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72898),c=i(14811),h=new u({Extends:x,initialize:function(o,r,a,d,n,p,g){a===void 0&&(a=1),d===void 0&&(d=1),n===void 0&&(n=1),p===void 0&&(p=1),g===void 0&&(g=4),x.call(this,c.BLOOM,o),this.steps=g,this.offsetX=a,this.offsetY=d,this.blurStrength=n,this.strength=p,this.glcolor=[1,1,1],r!=null&&(this.color=r)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var r=this.glcolor;r[0]=(o>>16&255)/255,r[1]=(o>>8&255)/255,r[2]=(o&255)/255}}});y.exports=h},9047:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72898),c=i(14811),h=new u({Extends:x,initialize:function(o,r,a,d,n,p,g){r===void 0&&(r=0),a===void 0&&(a=2),d===void 0&&(d=2),n===void 0&&(n=1),g===void 0&&(g=4),x.call(this,c.BLUR,o),this.quality=r,this.x=a,this.y=d,this.steps=g,this.strength=n,this.glcolor=[1,1,1],p!=null&&(this.color=p)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var r=this.glcolor;r[0]=(o>>16&255)/255,r[1]=(o>>8&255)/255,r[2]=(o&255)/255}}});y.exports=h},27885:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72898),c=i(14811),h=new u({Extends:x,initialize:function(o,r,a,d,n,p,g,v){r===void 0&&(r=.5),a===void 0&&(a=1),d===void 0&&(d=.2),n===void 0&&(n=!1),p===void 0&&(p=1),g===void 0&&(g=1),v===void 0&&(v=1),x.call(this,c.BOKEH,o),this.radius=r,this.amount=a,this.contrast=d,this.isTiltShift=n,this.strength=v,this.blurX=p,this.blurY=g}});y.exports=h},12578:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72898),c=i(14811),h=new u({Extends:x,initialize:function(o,r,a,d,n,p){r===void 0&&(r=8),n===void 0&&(n=1),p===void 0&&(p=.005),x.call(this,c.CIRCLE,o),this.scale=n,this.feather=p,this.thickness=r,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],a!=null&&(this.color=a),d!=null&&(this.backgroundColor=d)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var r=this.glcolor;r[0]=(o>>16&255)/255,r[1]=(o>>8&255)/255,r[2]=(o&255)/255}},backgroundColor:{get:function(){var o=this.glcolor2;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var r=this.glcolor2;r[0]=(o>>16&255)/255,r[1]=(o>>8&255)/255,r[2]=(o&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(o){this.glcolor2[3]=o}}});y.exports=h},15802:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(89422),c=i(14811),h=new u({Extends:x,initialize:function(o){x.call(this),this.type=c.COLOR_MATRIX,this.gameObject=o,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});y.exports=h},72898:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h){this.type=c,this.gameObject=h,this.active=!0},setActive:function(c){return this.active=c,this},destroy:function(){this.gameObject=null,this.active=!1}});y.exports=x},44553:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72898),c=i(14811),h=new u({Extends:x,initialize:function(o,r,a,d){r===void 0&&(r="__WHITE"),a===void 0&&(a=.005),d===void 0&&(d=.005),x.call(this,c.DISPLACEMENT,o),this.x=a,this.y=d,this.glTexture,this.setTexture(r)},setTexture:function(o){var r=this.gameObject.scene.sys.textures.getFrame(o);return r&&(this.glTexture=r.glTexture),this}});y.exports=h},68531:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72898),c=i(14811),h=new u({Extends:x,initialize:function(o,r,a,d,n){a===void 0&&(a=4),d===void 0&&(d=0),n===void 0&&(n=!1),x.call(this,c.GLOW,o),this.outerStrength=a,this.innerStrength=d,this.knockout=n,this.glcolor=[1,1,1,1],r!==void 0&&(this.color=r)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var r=this.glcolor;r[0]=(o>>16&255)/255,r[1]=(o>>8&255)/255,r[2]=(o&255)/255}}});y.exports=h},37102:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72898),c=i(14811),h=new u({Extends:x,initialize:function(o,r,a,d,n,p,g,v,f){d===void 0&&(d=.2),n===void 0&&(n=0),p===void 0&&(p=0),g===void 0&&(g=0),v===void 0&&(v=1),f===void 0&&(f=0),x.call(this,c.GRADIENT,o),this.alpha=d,this.size=f,this.fromX=n,this.fromY=p,this.toX=g,this.toY=v,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],r!=null&&(this.color1=r),a!=null&&(this.color2=a)},color1:{get:function(){var o=this.glcolor1;return(o[0]<<16)+(o[1]<<8)+(o[2]|0)},set:function(o){var r=this.glcolor1;r[0]=o>>16&255,r[1]=o>>8&255,r[2]=o&255}},color2:{get:function(){var o=this.glcolor2;return(o[0]<<16)+(o[1]<<8)+(o[2]|0)},set:function(o){var r=this.glcolor2;r[0]=o>>16&255,r[1]=o>>8&255,r[2]=o&255}}});y.exports=h},86886:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72898),c=i(14811),h=new u({Extends:x,initialize:function(o,r){r===void 0&&(r=1),x.call(this,c.PIXELATE,o),this.amount=r}});y.exports=h},92322:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72898),c=i(14811),h=new u({Extends:x,initialize:function(o,r,a,d,n,p,g,v){r===void 0&&(r=0),a===void 0&&(a=0),d===void 0&&(d=.1),n===void 0&&(n=1),g===void 0&&(g=6),v===void 0&&(v=1),x.call(this,c.SHADOW,o),this.x=r,this.y=a,this.decay=d,this.power=n,this.glcolor=[0,0,0,1],this.samples=g,this.intensity=v,p!==void 0&&(this.color=p)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var r=this.glcolor;r[0]=(o>>16&255)/255,r[1]=(o>>8&255)/255,r[2]=(o&255)/255}}});y.exports=h},39563:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72898),c=i(14811),h=new u({Extends:x,initialize:function(o,r,a,d,n){r===void 0&&(r=.5),a===void 0&&(a=.5),d===void 0&&(d=3),n===void 0&&(n=!1),x.call(this,c.SHINE,o),this.speed=r,this.lineWidth=a,this.gradient=d,this.reveal=n}});y.exports=h},56448:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72898),c=i(14811),h=new u({Extends:x,initialize:function(o,r,a,d,n){r===void 0&&(r=.5),a===void 0&&(a=.5),d===void 0&&(d=.5),n===void 0&&(n=.5),x.call(this,c.VIGNETTE,o),this.x=r,this.y=a,this.radius=d,this.strength=n}});y.exports=h},38433:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72898),c=i(14811),h=new u({Extends:x,initialize:function(o,r,a,d,n){r===void 0&&(r=.1),a===void 0&&(a=0),d===void 0&&(d=0),n===void 0&&(n=!1),x.call(this,c.WIPE,o),this.progress=0,this.wipeWidth=r,this.direction=a,this.axis=d,this.reveal=n}});y.exports=h},14811:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};y.exports=P},66064:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(79291),x=i(14811),c={Barrel:i(20122),Controller:i(72898),Bloom:i(32251),Blur:i(9047),Bokeh:i(27885),Circle:i(12578),ColorMatrix:i(15802),Displacement:i(44553),Glow:i(68531),Gradient:i(37102),Pixelate:i(86886),Shadow:i(92322),Shine:i(39563),Vignette:i(56448),Wipe:i(38433)};c=u(!1,c,x),y.exports=c},25305:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(10312),x=i(23568),c=function(h,o,r){o.x=x(r,"x",0),o.y=x(r,"y",0),o.depth=x(r,"depth",0),o.flipX=x(r,"flipX",!1),o.flipY=x(r,"flipY",!1);var a=x(r,"scale",null);typeof a=="number"?o.setScale(a):a!==null&&(o.scaleX=x(a,"x",1),o.scaleY=x(a,"y",1));var d=x(r,"scrollFactor",null);typeof d=="number"?o.setScrollFactor(d):d!==null&&(o.scrollFactorX=x(d,"x",1),o.scrollFactorY=x(d,"y",1)),o.rotation=x(r,"rotation",0);var n=x(r,"angle",null);n!==null&&(o.angle=n),o.alpha=x(r,"alpha",1);var p=x(r,"origin",null);if(typeof p=="number")o.setOrigin(p);else if(p!==null){var g=x(p,"x",.5),v=x(p,"y",.5);o.setOrigin(g,v)}o.blendMode=x(r,"blendMode",u.NORMAL),o.visible=x(r,"visible",!0);var f=x(r,"add",!0);return f&&h.sys.displayList.add(o),o.preUpdate&&h.sys.updateList.add(o),o};y.exports=c},13059:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(23568),x=function(c,h){var o=u(h,"anims",null);if(o===null)return c;if(typeof o=="string")c.anims.play(o);else if(typeof o=="object"){var r=c.anims,a=u(o,"key",void 0);if(a){var d=u(o,"startFrame",void 0),n=u(o,"delay",0),p=u(o,"repeat",0),g=u(o,"repeatDelay",0),v=u(o,"yoyo",!1),f=u(o,"play",!1),b=u(o,"delayedPlay",0),C={key:a,delay:n,repeat:p,repeatDelay:g,yoyo:v,startFrame:d};f?r.play(C):b>0?r.playAfterDelay(C,b):r.load(C)}}return c};y.exports=x},8050:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(73162),c=i(37277),h=i(51708),o=i(44594),r=i(19186),a=new u({Extends:x,initialize:function(d){x.call(this,d),this.sortChildrenFlag=!1,this.scene=d,this.systems=d.sys,this.events=d.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.events.once(o.DESTROY,this.destroy,this)},addChildCallback:function(d){d.displayList&&d.displayList!==this&&d.removeFromDisplayList(),d.parentContainer&&d.parentContainer.remove(d),d.displayList||(this.queueDepthSort(),d.displayList=this,d.emit(h.ADDED_TO_SCENE,d,this.scene),this.events.emit(o.ADDED_TO_SCENE,d,this.scene))},removeChildCallback:function(d){this.queueDepthSort(),d.displayList=null,d.emit(h.REMOVED_FROM_SCENE,d,this.scene),this.events.emit(o.REMOVED_FROM_SCENE,d,this.scene)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(r(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(d,n){return d._depth-n._depth},getChildren:function(){return this.list},shutdown:function(){for(var d=this.list,n=d.length;n--;)d[n]&&d[n].destroy(!0);d.length=0,this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});c.register("DisplayList",a,"displayList"),y.exports=a},95643:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(53774),c=i(45893),h=i(50792),o=i(51708),r=i(44594),a=new u({Extends:h,initialize:function(d,n){h.call(this),this.scene=d,this.displayList=null,this.type=n,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this),d.sys.queueDepthSort()},setActive:function(d){return this.active=d,this},setName:function(d){return this.name=d,this},setState:function(d){return this.state=d,this},setDataEnabled:function(){return this.data||(this.data=new c(this)),this},setData:function(d,n){return this.data||(this.data=new c(this)),this.data.set(d,n),this},incData:function(d,n){return this.data||(this.data=new c(this)),this.data.inc(d,n),this},toggleData:function(d){return this.data||(this.data=new c(this)),this.data.toggle(d),this},getData:function(d){return this.data||(this.data=new c(this)),this.data.get(d)},setInteractive:function(d,n,p){return this.scene.sys.input.enable(this,d,n,p),this},disableInteractive:function(d){return d===void 0&&(d=!1),this.scene.sys.input.disable(this,d),this},removeInteractive:function(d){return d===void 0&&(d=!1),this.scene.sys.input.clear(this),d&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return x(this)},willRender:function(d){var n=this.displayList&&this.displayList.active?this.displayList.willRender(d):!0;return!(!n||a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},getIndexList:function(){for(var d=this,n=this.parentContainer,p=[];n&&(p.unshift(n.getIndex(d)),d=n,n.parentContainer);)n=n.parentContainer;return this.displayList?p.unshift(this.displayList.getIndex(d)):p.unshift(this.scene.sys.displayList.getIndex(d)),p},addToDisplayList:function(d){return d===void 0&&(d=this.scene.sys.displayList),this.displayList&&this.displayList!==d&&this.removeFromDisplayList(),d.exists(this)||(this.displayList=d,d.add(this,!0),d.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),d.events.emit(r.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var d=this.displayList||this.scene.sys.displayList;return d&&d.exists(this)&&(d.remove(this,!0),d.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),d.events.emit(r.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var d=null;return this.parentContainer?d=this.parentContainer.list:this.displayList&&(d=this.displayList.list),d},destroy:function(d){!this.scene||this.ignoreDestroy||(d===void 0&&(d=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(o.DESTROY,this,d),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});a.RENDER_MASK=15,y.exports=a},44603:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(37277),c=i(44594),h=new u({initialize:function(o){this.scene=o,this.systems=o.sys,this.events=o.sys.events,this.displayList,this.updateList,this.events.once(c.BOOT,this.boot,this),this.events.on(c.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(c.DESTROY,this.destroy,this)},start:function(){this.events.once(c.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(o,r){h.prototype.hasOwnProperty(o)||(h.prototype[o]=r)},h.remove=function(o){h.prototype.hasOwnProperty(o)&&delete h.prototype[o]},x.register("GameObjectCreator",h,"make"),y.exports=h},39429:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(37277),c=i(44594),h=new u({initialize:function(o){this.scene=o,this.systems=o.sys,this.events=o.sys.events,this.displayList,this.updateList,this.events.once(c.BOOT,this.boot,this),this.events.on(c.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(c.DESTROY,this.destroy,this)},start:function(){this.events.once(c.SHUTDOWN,this.shutdown,this)},existing:function(o){return(o.renderCanvas||o.renderWebGL)&&this.displayList.add(o),o.preUpdate&&this.updateList.add(o),o},shutdown:function(){this.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(o,r){h.prototype.hasOwnProperty(o)||(h.prototype[o]=r)},h.remove=function(o){h.prototype.hasOwnProperty(o)&&delete h.prototype[o]},x.register("GameObjectFactory",h,"add"),y.exports=h},91296:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(61340),x=new u,c=new u,h=new u,o={camera:x,sprite:c,calc:h},r=function(a,d,n){var p=x,g=c,v=h;return g.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),p.copyFrom(d.matrix),n?(p.multiplyWithOffset(n,-d.scrollX*a.scrollFactorX,-d.scrollY*a.scrollFactorY),g.e=a.x,g.f=a.y):(g.e-=d.scrollX*a.scrollFactorX,g.f-=d.scrollY*a.scrollFactorY),p.multiply(g,v),o};y.exports=r},45027:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(25774),c=i(37277),h=i(44594),o=new u({Extends:x,initialize:function(r){x.call(this),this.checkQueue=!0,this.scene=r,this.systems=r.sys,r.sys.events.once(h.BOOT,this.boot,this),r.sys.events.on(h.START,this.start,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(h.PRE_UPDATE,this.update,this),r.on(h.UPDATE,this.sceneUpdate,this),r.once(h.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(r,a){for(var d=this._active,n=d.length,p=0;p<n;p++){var g=d[p];g.active&&g.preUpdate.call(g,r,a)}},shutdown:function(){for(var r=this._active.length;r--;)this._active[r].destroy(!0);for(r=this._pending.length;r--;)this._pending[r].destroy(!0);for(r=this._destroy.length;r--;)this._destroy[r].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var a=this.systems.events;a.off(h.PRE_UPDATE,this.update,this),a.off(h.UPDATE,this.sceneUpdate,this),a.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});c.register("UpdateList",o,"updateList"),y.exports=o},3217:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h,o,r,a,d,n,p,g,v,f,b){var C=x.x-u.displayOriginX+h,_=x.y-u.displayOriginY+o,M=C+x.w,E=_+x.h,A=r.a,R=r.b,L=r.c,Y=r.d,F=r.e,N=r.f,z=C*A+_*L+F,U=C*R+_*Y+N,q=C*A+E*L+F,Q=C*R+E*Y+N,K=M*A+E*L+F,et=M*R+E*Y+N,H=M*A+_*L+F,J=M*R+_*Y+N;a&&(z=Math.round(z),U=Math.round(U),q=Math.round(q),Q=Math.round(Q),K=Math.round(K),et=Math.round(et),H=Math.round(H),J=Math.round(J)),i.batchQuad(u,z,U,q,Q,K,et,H,J,c.u0,c.v0,c.u1,c.v1,d,n,p,g,v,f,b)};y.exports=P},53048:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){if(x===void 0&&(x=!1),c===void 0)return c={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},c;var h=i.text,o=h.length,r=i.maxWidth,a=i.wordWrapCharCode,d=Number.MAX_VALUE,n=Number.MAX_VALUE,p=0,g=0,v=i.fontData.chars,f=i.fontData.lineHeight,b=i.letterSpacing,C=i.lineSpacing,_=0,M=0,E=0,A=null,R=i._align,L=0,Y=0,F=i.fontSize/i.fontData.size,N=F*i.scaleX,z=F*i.scaleY,U=null,q=0,Q=[],K=Number.MAX_VALUE,et=0,H=0,J=0,X,Z,$,it=[],nt=[],at=null,ht=function(be,We){for(var $t=0,me=0;me<be.length;me++){var Vt=be.charCodeAt(me),Ce=We.chars[Vt];Ce&&($t+=Ce.xAdvance)}return $t*N};if(r>0){$=h.split(`
`);var dt=[];for(X=0;X<$.length;X++){var vt=$[X],ft="",gt="",wt="",bt="";for(Z=0;Z<vt.length;Z++)if(E=vt.charCodeAt(Z),ft+=vt[Z],E===a||Z===vt.length-1){bt=wt+ft;var xt=ht(bt,i.fontData);xt<=r?wt=bt:(gt=gt.slice(0,-1),gt+=(gt?`
`:"")+wt,wt=ft),ft=""}gt=gt.slice(0,-1),gt+=(gt?`
`:"")+wt,dt.push(gt)}h=dt.join(`
`),c.wrappedText=h,o=h.length}var Pt=0;for(X=0;X<o;X++){if(E=h.charCodeAt(X),E===10){at!==null&&(it.push({word:at.word,i:at.i,x:at.x*N,y:at.y*z,w:at.w*N,h:at.h*z}),at=null),U=null,Q[H]=J,J>et&&(et=J),J<K&&(K=J),H++,J=0,_=0,M=(f+C)*H;continue}if(A=v[E],!!A){if(L=_,Y=M,U!==null){var Ot=A.kerning[q];L+=Ot!==void 0?Ot:0}d>L&&(d=L),n>Y&&(n=Y);var Et=L+A.xAdvance,Tt=Y+f;p<Et&&(p=Et),g<Tt&&(g=Tt);var Mt=A.xOffset+A.xAdvance+(Ot!==void 0?Ot:0);E===a?at!==null&&(it.push({word:at.word,i:at.i,x:at.x*N,y:at.y*z,w:at.w*N,h:at.h*z}),at=null):(at===null&&(at={word:"",i:Pt,x:_,y:M,w:0,h:f}),at.word=at.word.concat(h[X]),at.w+=Mt),nt.push({i:Pt,idx:X,char:h[X],code:E,x:(A.xOffset+L)*F,y:(A.yOffset+M)*F,w:A.width*F,h:A.height*F,t:M*F,r:Et*F,b:f*F,line:H,glyph:A}),_+=A.xAdvance+b+(Ot!==void 0?Ot:0),U=A,q=E,J=Et*F,Pt++}}if(at!==null&&it.push({word:at.word,i:at.i,x:at.x*N,y:at.y*z,w:at.w*N,h:at.h*z}),Q[H]=J,J>et&&(et=J),J<K&&(K=J),R>0)for(var kt=0;kt<nt.length;kt++){var Gt=nt[kt];if(R===1){var qt=(et-Q[Gt.line])/2;Gt.x+=qt,Gt.r+=qt}else if(R===2){var fe=et-Q[Gt.line];Gt.x+=fe,Gt.r+=fe}}var Qt=c.local,Jt=c.global;return $=c.lines,Qt.x=d*F,Qt.y=n*F,Qt.width=p*F,Qt.height=g*F,Jt.x=i.x-i._displayOriginX+d*N,Jt.y=i.y-i._displayOriginY+n*z,Jt.width=p*N,Jt.height=g*z,$.shortest=K,$.longest=et,$.lengths=Q,u&&(Qt.x=Math.ceil(Qt.x),Qt.y=Math.ceil(Qt.y),Qt.width=Math.ceil(Qt.width),Qt.height=Math.ceil(Qt.height),Jt.x=Math.ceil(Jt.x),Jt.y=Math.ceil(Jt.y),Jt.width=Math.ceil(Jt.width),Jt.height=Math.ceil(Jt.height),$.shortest=Math.ceil(K),$.longest=Math.ceil(et)),x&&(i._displayOriginX=i.originX*Qt.width,i._displayOriginY=i.originY*Qt.height,Jt.x=i.x-i._displayOriginX*i.scaleX,Jt.y=i.y-i._displayOriginY*i.scaleY,u&&(Jt.x=Math.ceil(Jt.x),Jt.y=Math.ceil(Jt.y))),c.words=it,c.characters=nt,c.lines.height=f,c.scale=F,c.scaleX=i.scaleX,c.scaleY=i.scaleY,c};y.exports=P},61327:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(21859),x=function(c,h,o,r,a,d,n){var p=c.sys.textures.get(o),g=p.get(r),v=c.sys.cache.xml.get(a);if(g&&v){var f=u(v,g,d,n,p);return c.sys.cache.bitmapFont.add(h,{data:f,texture:o,frame:r,fromAtlas:!0}),!0}else return!1};y.exports=x},6925:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35154),x=function(c,h){var o=h.width,r=h.height,a=Math.floor(o/2),d=Math.floor(r/2),n=u(h,"chars","");if(n!==""){var p=u(h,"image",""),g=c.sys.textures.getFrame(p),v=g.cutX,f=g.cutY,b=g.source.width,C=g.source.height,_=u(h,"offset.x",0),M=u(h,"offset.y",0),E=u(h,"spacing.x",0),A=u(h,"spacing.y",0),R=u(h,"lineSpacing",0),L=u(h,"charsPerRow",null);L===null&&(L=b/o,L>n.length&&(L=n.length));for(var Y=_,F=M,N={retroFont:!0,font:p,size:o,lineHeight:r+R,chars:{}},z=0,U=0;U<n.length;U++){var q=n.charCodeAt(U),Q=(v+Y)/b,K=(f+F)/C,et=(v+Y+o)/b,H=(f+F+r)/C;N.chars[q]={x:Y,y:F,width:o,height:r,centerX:a,centerY:d,xOffset:0,yOffset:0,xAdvance:o,data:{},kerning:{},u0:Q,v0:K,u1:et,v1:H},z++,z===L?(z=0,Y=_,F+=r+A):Y+=o+E}var J={data:N,frame:null,texture:p};return J}};y.exports=x},21859:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/function P(u,x){return parseInt(u.getAttribute(x),10)}var i=function(u,x,c,h,o){c===void 0&&(c=0),h===void 0&&(h=0);var r=x.cutX,a=x.cutY,d=x.source.width,n=x.source.height,p=x.sourceIndex,g={},v=u.getElementsByTagName("info")[0],f=u.getElementsByTagName("common")[0];g.font=v.getAttribute("face"),g.size=P(v,"size"),g.lineHeight=P(f,"lineHeight")+h,g.chars={};var b=u.getElementsByTagName("char"),C=x!==void 0&&x.trimmed;if(C)var _=x.height,M=x.width;for(var E=0;E<b.length;E++){var A=b[E],R=P(A,"id"),L=String.fromCharCode(R),Y=P(A,"x"),F=P(A,"y"),N=P(A,"width"),z=P(A,"height");C&&(Y<M&&(M=Y),F<_&&(_=F)),C&&_!==0&&M!==0&&(Y-=x.x,F-=x.y);var U=(r+Y)/d,q=(a+F)/n,Q=(r+Y+N)/d,K=(a+F+z)/n;if(g.chars[R]={x:Y,y:F,width:N,height:z,centerX:Math.floor(N/2),centerY:Math.floor(z/2),xOffset:P(A,"xoffset"),yOffset:P(A,"yoffset"),xAdvance:P(A,"xadvance")+c,data:{},kerning:{},u0:U,v0:q,u1:Q,v1:K},o&&N!==0&&z!==0){var et=o.add(L,p,Y,F,N,z);et&&et.setUVs(N,z,U,q,Q,K)}}var H=u.getElementsByTagName("kerning");for(E=0;E<H.length;E++){var J=H[E],X=P(J,"first"),Z=P(J,"second"),$=P(J,"amount");g.chars[Z].kerning[X]=$}return g};y.exports=i},196:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87662),x=i(79291),c={Parse:i(6925)};c=x(!1,c,u),y.exports=c},87662:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};y.exports=P},2638:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(22186),x=i(83419),c=i(12310),h=new x({Extends:u,Mixins:[c],initialize:function(o,r,a,d,n,p,g){u.call(this,o,r,a,d,n,p,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(o,r){return this.cropWidth=o,this.cropHeight=r,this},setDisplayCallback:function(o){return this.displayCallback=o,this},setScrollX:function(o){return this.scrollX=o,this},setScrollY:function(o){return this.scrollY=o,this}});y.exports=h},86741:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(20926),x=function(c,h,o,r){var a=h._text,d=a.length,n=c.currentContext;if(!(d===0||!u(c,n,h,o,r))){o.addToRenderList(h);var p=h.fromAtlas?h.frame:h.texture.frames.__BASE,g=h.displayCallback,v=h.callbackData,f=h.fontData.chars,b=h.fontData.lineHeight,C=h._letterSpacing,_=0,M=0,E=0,A=null,R=0,L=0,Y=0,F=0,N=0,z=0,U=null,q=0,Q=h.frame.source.image,K=p.cutX,et=p.cutY,H=0,J=0,X=h._fontSize/h.fontData.size,Z=h._align,$=0,it=0;h.getTextBounds(!1);var nt=h._bounds.lines;Z===1?it=(nt.longest-nt.lengths[0])/2:Z===2&&(it=nt.longest-nt.lengths[0]),n.translate(-h.displayOriginX,-h.displayOriginY);var at=o.roundPixels;h.cropWidth>0&&h.cropHeight>0&&(n.beginPath(),n.rect(0,0,h.cropWidth,h.cropHeight),n.clip());for(var ht=0;ht<d;ht++){if(J=X,H=0,E=a.charCodeAt(ht),E===10){$++,Z===1?it=(nt.longest-nt.lengths[$])/2:Z===2&&(it=nt.longest-nt.lengths[$]),_=0,M+=b,U=null;continue}if(A=f[E],!!A){if(R=K+A.x,L=et+A.y,Y=A.width,F=A.height,N=A.xOffset+_-h.scrollX,z=A.yOffset+M-h.scrollY,U!==null){var dt=A.kerning[q];N+=dt!==void 0?dt:0}if(g){v.index=ht,v.charCode=E,v.x=N,v.y=z,v.scale=J,v.rotation=H,v.data=A.data;var vt=g(v);N=vt.x,z=vt.y,J=vt.scale,H=vt.rotation}N*=J,z*=J,N+=it,_+=A.xAdvance+C+(dt!==void 0?dt:0),U=A,q=E,!(Y===0||F===0||E===32)&&(at&&(N=Math.round(N),z=Math.round(z)),n.save(),n.translate(N,z),n.rotate(H),n.scale(J,J),n.drawImage(Q,R,L,Y,F,0,0,Y,F),n.restore())}}n.restore()}};y.exports=x},11164:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2638),x=i(25305),c=i(44603),h=i(23568);c.register("dynamicBitmapText",function(o,r){o===void 0&&(o={});var a=h(o,"font",""),d=h(o,"text",""),n=h(o,"size",!1),p=new u(this.scene,0,0,a,d,n);return r!==void 0&&(o.add=r),x(this.scene,p,o),p})},72566:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2638),x=i(39429);x.register("dynamicBitmapText",function(c,h,o,r,a){return this.displayList.add(new u(this.scene,c,h,o,r,a))})},12310:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(73482),c=i(86741),y.exports={renderWebGL:x,renderCanvas:c}},73482:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=i(61340),c=i(70554),h=new x,o=function(r,a,d,n){var p=a.text,g=p.length;if(g!==0){d.addToRenderList(a);var v=r.pipelines.set(a.pipeline,a),f=u(a,d,n);r.pipelines.preBatch(a);var b=f.sprite,C=f.calc,_=h,M=a.cropWidth>0||a.cropHeight>0;M&&(v.flush(),r.pushScissor(C.tx,C.ty,a.cropWidth*C.scaleX,a.cropHeight*C.scaleY));var E=a.frame,A=E.glTexture,R=a.tintFill,L=c.getTintAppendFloatAlpha(a.tintTopLeft,d.alpha*a._alphaTL),Y=c.getTintAppendFloatAlpha(a.tintTopRight,d.alpha*a._alphaTR),F=c.getTintAppendFloatAlpha(a.tintBottomLeft,d.alpha*a._alphaBL),N=c.getTintAppendFloatAlpha(a.tintBottomRight,d.alpha*a._alphaBR),z=v.setGameObject(a),U=0,q=0,Q=0,K=0,et=a.letterSpacing,H,J=0,X=0,Z,$=a.scrollX,it=a.scrollY,nt=a.fontData,at=nt.chars,ht=nt.lineHeight,dt=a.fontSize/nt.size,vt=0,ft=a._align,gt=0,wt=0,bt=a.getTextBounds(!1);a.maxWidth>0&&(p=bt.wrappedText,g=p.length);var xt=a._bounds.lines;ft===1?wt=(xt.longest-xt.lengths[0])/2:ft===2&&(wt=xt.longest-xt.lengths[0]);for(var Pt=d.roundPixels,Ot=a.displayCallback,Et=a.callbackData,Tt=0;Tt<g;Tt++){if(Q=p.charCodeAt(Tt),Q===10){gt++,ft===1?wt=(xt.longest-xt.lengths[gt])/2:ft===2&&(wt=xt.longest-xt.lengths[gt]),U=0,q+=ht,Z=null;continue}if(H=at[Q],!!H){J=H.width,X=H.height;var Mt=H.xOffset+U-$,kt=H.yOffset+q-it;if(Z!==null){var Gt=H.kerning[K]||0;Mt+=Gt,U+=Gt}if(U+=H.xAdvance+et,Z=H,K=Q,!(J===0||X===0||Q===32)){if(dt=a.fontSize/a.fontData.size,vt=0,Ot){Et.color=0,Et.tint.topLeft=L,Et.tint.topRight=Y,Et.tint.bottomLeft=F,Et.tint.bottomRight=N,Et.index=Tt,Et.charCode=Q,Et.x=Mt,Et.y=kt,Et.scale=dt,Et.rotation=vt,Et.data=H.data;var qt=Ot(Et);Mt=qt.x,kt=qt.y,dt=qt.scale,vt=qt.rotation,qt.color?(L=qt.color,Y=qt.color,F=qt.color,N=qt.color):(L=qt.tint.topLeft,Y=qt.tint.topRight,F=qt.tint.bottomLeft,N=qt.tint.bottomRight),L=c.getTintAppendFloatAlpha(L,d.alpha*a._alphaTL),Y=c.getTintAppendFloatAlpha(Y,d.alpha*a._alphaTR),F=c.getTintAppendFloatAlpha(F,d.alpha*a._alphaBL),N=c.getTintAppendFloatAlpha(N,d.alpha*a._alphaBR)}Mt*=dt,kt*=dt,Mt-=a.displayOriginX,kt-=a.displayOriginY,Mt+=wt,_.applyITRS(Mt,kt,vt,dt,dt),C.multiply(_,b);var fe=H.u0,Qt=H.v0,Jt=H.u1,be=H.v1,We=J,$t=X,me=b.e,Vt=b.f,Ce=$t*b.c+b.e,os=$t*b.d+b.f,qs=We*b.a+$t*b.c+b.e,yr=We*b.b+$t*b.d+b.f,xr=We*b.a+b.e,Yi=We*b.b+b.f;Pt&&(me=Math.round(me),Vt=Math.round(Vt),Ce=Math.round(Ce),os=Math.round(os),qs=Math.round(qs),yr=Math.round(yr),xr=Math.round(xr),Yi=Math.round(Yi)),v.shouldFlush(6)&&(v.flush(),z=v.setGameObject(a)),v.batchQuad(a,me,Vt,Ce,os,qs,yr,xr,Yi,fe,Qt,Jt,be,L,Y,F,N,R,A,z)}}}M&&(v.flush(),r.popScissor()),r.pipelines.postBatch(a)}};y.exports=o},22186:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(45319),c=i(31401),h=i(95643),o=i(53048),r=i(61327),a=i(21859),d=i(87841),n=i(18658),p=new u({Extends:h,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Texture,c.Tint,c.Transform,c.Visible,n],initialize:function(g,v,f,b,C,_,M){C===void 0&&(C=""),M===void 0&&(M=0),h.call(this,g,"BitmapText"),this.font=b;var E=this.scene.sys.cache.bitmapFont.get(b);if(!E)throw new Error("Invalid BitmapText key: "+b);this.fontData=E.data,this._text="",this._fontSize=_||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=M,this._bounds=o(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(v,f),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(C)},setLeftAlign:function(){return this._align=p.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=p.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=p.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(g){return this._fontSize=g,this._dirty=!0,this},setLetterSpacing:function(g){return g===void 0&&(g=0),this._letterSpacing=g,this._dirty=!0,this},setLineSpacing:function(g){return g===void 0&&(g=0),this.lineSpacing=g,this},setText:function(g){return!g&&g!==0&&(g=""),Array.isArray(g)&&(g=g.join(`
`)),g!==this.text&&(this._text=g.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(g,v,f,b){return g===void 0&&(g=0),v===void 0&&(v=0),f===void 0&&(f=0),b===void 0&&(b=.5),this.dropShadowX=g,this.dropShadowY=v,this.dropShadowColor=f,this.dropShadowAlpha=b,this},setCharacterTint:function(g,v,f,b,C,_,M){g===void 0&&(g=0),v===void 0&&(v=1),f===void 0&&(f=!1),b===void 0&&(b=-1),C===void 0&&(C=b,_=b,M=b);var E=this.text.length;v===-1&&(v=E),g<0&&(g=E+g),g=x(g,0,E-1);for(var A=x(g+v,g,E),R=this.charColors,L=g;L<A;L++){var Y=R[L];if(b===-1)R[L]=null;else{var F=f?1:0;Y?(Y.tintEffect=F,Y.tintTL=b,Y.tintTR=C,Y.tintBL=_,Y.tintBR=M):R[L]={tintEffect:F,tintTL:b,tintTR:C,tintBL:_,tintBR:M}}}return this},setWordTint:function(g,v,f,b,C,_,M){v===void 0&&(v=1);for(var E=this.getTextBounds(),A=E.words,R=typeof g=="number",L=0,Y=0;Y<A.length;Y++){var F=A[Y];if((R&&Y===g||!R&&F.word===g)&&(this.setCharacterTint(F.i,F.word.length,f,b,C,_,M),L++,L===v))return this}return this},getTextBounds:function(g){var v=this._bounds;return(this._dirty||g||this.scaleX!==v.scaleX||this.scaleY!==v.scaleY)&&(o(this,g,!0,v),this._dirty=!1),v},getCharacterAt:function(g,v,f){for(var b=this.getLocalPoint(g,v,null,f),C=this.getTextBounds(),_=C.characters,M=new d,E=0;E<_.length;E++){var A=_[E];if(M.setTo(A.x,A.t,A.r-A.x,A.b),M.contains(b.x,b.y))return A}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(g,v,f){v===void 0&&(v=this._fontSize),f===void 0&&(f=this._align);var b=this.scene.sys.cache.bitmapFont.get(g);return b&&(this.font=g,this.fontData=b.data,this._fontSize=v,this._align=f,this.fromAtlas=b.fromAtlas===!0,this.setTexture(b.texture,b.frame),o(this,!1,!0,this._bounds)),this},setMaxWidth:function(g,v){return this._maxWidth=g,this._dirty=!0,v!==void 0&&(this.wordWrapCharCode=v),this},setDisplaySize:function(g,v){this.setScale(1,1),this.getTextBounds(!1);var f=g/this.width,b=v/this.height;return this.setScale(f,b),this},align:{set:function(g){this._align=g,this._dirty=!0},get:function(){return this._align}},text:{set:function(g){this.setText(g)},get:function(){return this._text}},fontSize:{set:function(g){this._fontSize=g,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(g){this._letterSpacing=g,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(g){this._lineSpacing=g,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(g){this._maxWidth=g,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{set:function(g){this.setScaleX(1),this.getTextBounds(!1);var v=g/this.width;this.setScaleX(v)},get:function(){return this.width}},displayHeight:{set:function(g){this.setScaleY(1),this.getTextBounds(!1);var v=g/this.height;this.setScaleY(v)},get:function(){return this.height}},toJSON:function(){var g=c.ToJSON(this),v={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return g.data=v,g},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});p.ALIGN_LEFT=0,p.ALIGN_CENTER=1,p.ALIGN_RIGHT=2,p.ParseFromAtlas=r,p.ParseXMLBitmapFont=a,y.exports=p},37289:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(20926),x=function(c,h,o,r){var a=h._text,d=a.length,n=c.currentContext;if(!(d===0||!u(c,n,h,o,r))){o.addToRenderList(h);var p=h.fromAtlas?h.frame:h.texture.frames.__BASE,g=h.fontData.chars,v=h.fontData.lineHeight,f=h._letterSpacing,b=h._lineSpacing,C=0,_=0,M=0,E=null,A=0,R=0,L=0,Y=0,F=0,N=0,z=null,U=0,q=p.source.image,Q=p.cutX,K=p.cutY,et=h._fontSize/h.fontData.size,H=h._align,J=0,X=0,Z=h.getTextBounds(!1);h.maxWidth>0&&(a=Z.wrappedText,d=a.length);var $=h._bounds.lines;H===1?X=($.longest-$.lengths[0])/2:H===2&&(X=$.longest-$.lengths[0]),n.translate(-h.displayOriginX,-h.displayOriginY);for(var it=o.roundPixels,nt=0;nt<d;nt++){if(M=a.charCodeAt(nt),M===10){J++,H===1?X=($.longest-$.lengths[J])/2:H===2&&(X=$.longest-$.lengths[J]),C=0,_+=v+b,z=null;continue}if(E=g[M],!!E){if(A=Q+E.x,R=K+E.y,L=E.width,Y=E.height,F=E.xOffset+C,N=E.yOffset+_,z!==null){var at=E.kerning[U];F+=at!==void 0?at:0}F*=et,N*=et,F+=X,C+=E.xAdvance+f+(at!==void 0?at:0),z=E,U=M,!(L===0||Y===0||M===32)&&(it&&(F=Math.round(F),N=Math.round(N)),n.save(),n.translate(F,N),n.scale(et,et),n.drawImage(q,A,R,L,Y,0,0,L,Y),n.restore())}}n.restore()}};y.exports=x},57336:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(22186),x=i(25305),c=i(44603),h=i(23568),o=i(35154);c.register("bitmapText",function(r,a){r===void 0&&(r={});var d=o(r,"font",""),n=h(r,"text",""),p=h(r,"size",!1),g=o(r,"align",0),v=new u(this.scene,0,0,d,n,p,g);return a!==void 0&&(r.add=a),x(this.scene,v,r),v})},34914:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(22186),x=i(39429);x.register("bitmapText",function(c,h,o,r,a,d){return this.displayList.add(new u(this.scene,c,h,o,r,a,d))})},18658:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(33590),c=i(37289),y.exports={renderWebGL:x,renderCanvas:c}},33590:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(3217),x=i(91296),c=i(70554),h=function(o,r,a,d){var n=r._text,p=n.length;if(p!==0){a.addToRenderList(r);var g=o.pipelines.set(r.pipeline,r),v=x(r,a,d).calc;o.pipelines.preBatch(r);var f=a.roundPixels,b=a.alpha,C=r.charColors,_=r.tintFill,M=c.getTintAppendFloatAlpha,E=M(r.tintTopLeft,b*r._alphaTL),A=M(r.tintTopRight,b*r._alphaTR),R=M(r.tintBottomLeft,b*r._alphaBL),L=M(r.tintBottomRight,b*r._alphaBR),Y=r.frame.glTexture,F=g.setGameObject(r),N=r.getTextBounds(!1),z,U,q,Q=N.characters,K=r.dropShadowX,et=r.dropShadowY,H=K!==0||et!==0;if(H){var J=r.dropShadowColor,X=r.dropShadowAlpha,Z=M(J,b*X*r._alphaTL),$=M(J,b*X*r._alphaTR),it=M(J,b*X*r._alphaBL),nt=M(J,b*X*r._alphaBR);for(z=0;z<Q.length;z++)U=Q[z],q=U.glyph,!(U.code===32||q.width===0||q.height===0)&&u(g,r,U,q,K,et,v,f,Z,$,it,nt,1,Y,F)}for(z=0;z<Q.length;z++)if(U=Q[z],q=U.glyph,!(U.code===32||q.width===0||q.height===0))if(g.shouldFlush(6)&&(g.flush(),F=g.setGameObject(r)),C[U.i]){var at=C[U.i],ht=at.tintEffect,dt=M(at.tintTL,b*r._alphaTL),vt=M(at.tintTR,b*r._alphaTR),ft=M(at.tintBL,b*r._alphaBL),gt=M(at.tintBR,b*r._alphaBR);u(g,r,U,q,0,0,v,f,dt,vt,ft,gt,ht,Y,F)}else u(g,r,U,q,0,0,v,f,E,A,R,L,_,Y,F);o.pipelines.postBatch(r)}};y.exports=h},6107:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(48011),x=i(46590),c=i(83419),h=i(31401),o=i(4327),r=i(95643),a=i(73162),d=new c({Extends:r,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Size,h.Texture,h.Transform,h.Visible,u],initialize:function(n,p,g,v,f){r.call(this,n,"Blitter"),this.setTexture(v,f),this.setPosition(p,g),this.initPipeline(),this.initPostPipeline(),this.children=new a,this.renderList=[],this.dirty=!1},create:function(n,p,g,v,f){v===void 0&&(v=!0),f===void 0&&(f=this.children.length),g===void 0?g=this.frame:g instanceof o||(g=this.texture.get(g));var b=new x(this,n,p,g,v);return this.children.addAt(b,f,!1),this.dirty=!0,b},createFromCallback:function(n,p,g,v){for(var f=this.createMultiple(p,g,v),b=0;b<f.length;b++){var C=f[b];n.call(this,C,b)}return f},createMultiple:function(n,p,g){p===void 0&&(p=this.frame.name),g===void 0&&(g=!0),Array.isArray(p)||(p=[p]);var v=[],f=this;return p.forEach(function(b){for(var C=0;C<n;C++)v.push(f.create(0,0,b,g))}),v},childCanRender:function(n){return n.visible&&n.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});y.exports=d},72396:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){var h=u.getRenderList();if(h.length!==0){var o=i.currentContext,r=x.alpha*u.alpha;if(r!==0){x.addToRenderList(u),o.globalCompositeOperation=i.blendModes[u.blendMode],o.imageSmoothingEnabled=!u.frame.source.scaleMode;var a=u.x-x.scrollX*u.scrollFactorX,d=u.y-x.scrollY*u.scrollFactorY;o.save(),c&&c.copyToContext(o);for(var n=x.roundPixels,p=0;p<h.length;p++){var g=h[p],v=g.flipX||g.flipY,f=g.frame,b=f.canvasData,C=f.x,_=f.y,M=1,E=1,A=g.alpha*r;A!==0&&(o.globalAlpha=A,v?(g.flipX&&(M=-1,C-=b.width),g.flipY&&(E=-1,_-=b.height),b.width>0&&b.height>0&&(o.save(),o.translate(g.x+a,g.y+d),o.scale(M,E),o.drawImage(f.source.image,b.x,b.y,b.width,b.height,C,_,b.width,b.height),o.restore())):(n&&(C=Math.round(C),_=Math.round(_)),b.width>0&&b.height>0&&o.drawImage(f.source.image,b.x,b.y,b.width,b.height,C+g.x+a,_+g.y+d,b.width,b.height)))}o.restore()}}};y.exports=P},9403:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(6107),x=i(25305),c=i(44603),h=i(23568);c.register("blitter",function(o,r){o===void 0&&(o={});var a=h(o,"key",null),d=h(o,"frame",null),n=new u(this.scene,0,0,a,d);return r!==void 0&&(o.add=r),x(this.scene,n,o),n})},12709:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(6107),x=i(39429);x.register("blitter",function(c,h,o,r){return this.displayList.add(new u(this.scene,c,h,o,r))})},48011:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(99485),c=i(72396),y.exports={renderWebGL:x,renderCanvas:c}},99485:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(61340),x=i(70554),c=new u,h=function(o,r,a,d){var n=r.getRenderList(),p=a.alpha*r.alpha;if(!(n.length===0||p===0)){a.addToRenderList(r);var g=o.pipelines.set(this.pipeline,r),v=a.scrollX*r.scrollFactorX,f=a.scrollY*r.scrollFactorY,b=c.copyFrom(a.matrix);d&&(b.multiplyWithOffset(d,-v,-f),v=0,f=0);var C=r.x-v,_=r.y-f,M=-1,E=!1,A=a.roundPixels;o.pipelines.preBatch(r);for(var R=0;R<n.length;R++){var L=n[R],Y=L.frame,F=L.alpha*p;if(F!==0){var N=Y.width,z=Y.height,U=C+L.x+Y.x,q=_+L.y+Y.y;L.flipX&&(N*=-1,U+=Y.width),L.flipY&&(z*=-1,q+=Y.height);var Q=b.setQuad(U,q,U+N,q+z,A),K=x.getTintAppendFloatAlpha(L.tint,F);if(Y.sourceIndex!==M){var et=g.setGameObject(r,Y);M=Y.sourceIndex}g.batchQuad(r,Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6],Q[7],Y.u0,Y.v0,Y.u1,Y.v1,K,K,K,K,E,Y.glTexture,et)&&(M=-1)}}o.pipelines.postBatch(r)}};y.exports=h},46590:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(4327),c=new u({initialize:function(h,o,r,a,d){this.parent=h,this.x=o,this.y=r,this.frame=a,this.data={},this.tint=16777215,this._visible=d,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(h){return h===void 0?this.frame=this.parent.frame:h instanceof x&&h.texture===this.parent.texture?this.frame=h:this.frame=this.parent.texture.get(h),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(h,o,r){return this.x=h,this.y=o,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(h,o){return this.x=h,this.y=o,this},setFlipX:function(h){return this.flipX=h,this},setFlipY:function(h){return this.flipY=h,this},setFlip:function(h,o){return this.flipX=h,this.flipY=o,this},setVisible:function(h){return this.visible=h,this},setAlpha:function(h){return this.alpha=h,this},setTint:function(h){return this.tint=h,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(h){this.parent.dirty|=this._visible!==h,this._visible=h}},alpha:{get:function(){return this._alpha},set:function(h){this.parent.dirty|=this._alpha>0!=h>0,this._alpha=h}}});y.exports=c},16005:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45319),x=2,c={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h,o,r,a){return h===void 0&&(h=1),o===void 0?this.alpha=h:(this._alphaTL=u(h,0,1),this._alphaTR=u(o,0,1),this._alphaBL=u(r,0,1),this._alphaBR=u(a,0,1)),this},alpha:{get:function(){return this._alpha},set:function(h){var o=u(h,0,1);this._alpha=o,this._alphaTL=o,this._alphaTR=o,this._alphaBL=o,this._alphaBR=o,o===0?this.renderFlags&=~x:this.renderFlags|=x}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(h){var o=u(h,0,1);this._alphaTL=o,o!==0&&(this.renderFlags|=x)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(h){var o=u(h,0,1);this._alphaTR=o,o!==0&&(this.renderFlags|=x)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(h){var o=u(h,0,1);this._alphaBL=o,o!==0&&(this.renderFlags|=x)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(h){var o=u(h,0,1);this._alphaBR=o,o!==0&&(this.renderFlags|=x)}}};y.exports=c},88509:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45319),x=2,c={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h){return h===void 0&&(h=1),this.alpha=h,this},alpha:{get:function(){return this._alpha},set:function(h){var o=u(h,0,1);this._alpha=o,o===0?this.renderFlags&=~x:this.renderFlags|=x}}};y.exports=c},90065:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(10312),x={_blendMode:u.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(c){typeof c=="string"&&(c=u[c]),c|=0,c>=-1&&(this._blendMode=c)}},setBlendMode:function(c){return this.blendMode=c,this}};y.exports=x},94215:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(i){this.scaleX=i/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(i){this.scaleY=i/this.height}},setSize:function(i,u){return this.width=i,this.height=u,this},setDisplaySize:function(i,u){return this.displayWidth=i,this.displayHeight=u,this}};y.exports=P},61683:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={texture:null,frame:null,isCropped:!1,setCrop:function(i,u,x,c){if(i===void 0)this.isCropped=!1;else if(this.frame){if(typeof i=="number")this.frame.setCropUVs(this._crop,i,u,x,c,this.flipX,this.flipY);else{var h=i;this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};y.exports=P},89272:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(37105),x={_depth:0,depth:{get:function(){return this._depth},set:function(c){this.displayList&&this.displayList.queueDepthSort(),this._depth=c}},setDepth:function(c){return c===void 0&&(c=0),this.depth=c,this},setToTop:function(){var c=this.getDisplayList();return c&&u.BringToTop(c,this),this},setToBack:function(){var c=this.getDisplayList();return c&&u.SendToBack(c,this),this},setAbove:function(c){var h=this.getDisplayList();return h&&c&&u.MoveAbove(h,this,c),this},setBelow:function(c){var h=this.getDisplayList();return h&&c&&u.MoveBelow(h,this,c),this}};y.exports=x},47059:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(66064),c=i(19133),h=new u({initialize:function(o,r){this.gameObject=o,this.isPost=r,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(o){return o===void 0&&(o=0),this.padding=o,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(o){if(!this.isPost){var r=this.gameObject.scene.sys.renderer;r&&r.pipelines?(this.gameObject.pipeline=r.pipelines.FX_PIPELINE,o!==void 0&&(this.padding=o),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var o=this.list,r=0;r<o.length;r++)o[r].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(o){var r;if(this.isPost){var a=this.gameObject.getPostPipeline(String(o.type));for(Array.isArray(a)||(a=[a]),r=0;r<a.length;r++){var d=a[r];if(d.controller===o){this.gameObject.removePostPipeline(d),o.destroy();break}}}else{var n=this.list;for(r=0;r<n.length;r++)n[r]===o&&(c(n,r),o.destroy())}return this.gameObject},disable:function(o){return o===void 0&&(o=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,o&&this.clear(),this.gameObject},add:function(o,r){if(this.isPost){var a=String(o.type);this.gameObject.setPostPipeline(a,r);var d=this.gameObject.getPostPipeline(a);if(d)return Array.isArray(d)&&(d=d.pop()),d&&(d.controller=o),o}else return this.enabled||this.enable(),this.list.push(o),o},addGlow:function(o,r,a,d,n,p){return this.add(new x.Glow(this.gameObject,o,r,a,d),{quality:n,distance:p})},addShadow:function(o,r,a,d,n,p,g){return this.add(new x.Shadow(this.gameObject,o,r,a,d,n,p,g))},addPixelate:function(o){return this.add(new x.Pixelate(this.gameObject,o))},addVignette:function(o,r,a,d){return this.add(new x.Vignette(this.gameObject,o,r,a,d))},addShine:function(o,r,a,d){return this.add(new x.Shine(this.gameObject,o,r,a,d))},addBlur:function(o,r,a,d,n,p){return this.add(new x.Blur(this.gameObject,o,r,a,d,n,p))},addGradient:function(o,r,a,d,n,p,g,v){return this.add(new x.Gradient(this.gameObject,o,r,a,d,n,p,g,v))},addBloom:function(o,r,a,d,n,p){return this.add(new x.Bloom(this.gameObject,o,r,a,d,n,p))},addColorMatrix:function(){return this.add(new x.ColorMatrix(this.gameObject))},addCircle:function(o,r,a,d,n){return this.add(new x.Circle(this.gameObject,o,r,a,d,n))},addBarrel:function(o){return this.add(new x.Barrel(this.gameObject,o))},addDisplacement:function(o,r,a){return this.add(new x.Displacement(this.gameObject,o,r,a))},addWipe:function(o,r,a){return this.add(new x.Wipe(this.gameObject,o,r,a))},addReveal:function(o,r,a){return this.add(new x.Wipe(this.gameObject,o,r,a,!0))},addBokeh:function(o,r,a){return this.add(new x.Bokeh(this.gameObject,o,r,a))},addTiltShift:function(o,r,a,d,n,p){return this.add(new x.Bokeh(this.gameObject,o,r,a,!0,d,n,p))},destroy:function(){this.clear(),this.gameObject=null}});y.exports=h},54434:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(i){return this.flipX=i,this},setFlipY:function(i){return this.flipY=i,this},setFlip:function(i,u){return this.flipX=i,this.flipY=u,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};y.exports=P},8004:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87841),x=i(11520),c=i(26099),h={prepareBoundsOutput:function(o,r){if(r===void 0&&(r=!1),this.rotation!==0&&x(o,this.x,this.y,this.rotation),r&&this.parentContainer){var a=this.parentContainer.getBoundsTransformMatrix();a.transformPoint(o.x,o.y,o)}return o},getCenter:function(o,r){return o===void 0&&(o=new c),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(o,r)},getTopLeft:function(o,r){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,r)},getTopCenter:function(o,r){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,r)},getTopRight:function(o,r){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,r)},getLeftCenter:function(o,r){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(o,r)},getRightCenter:function(o,r){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(o,r)},getBottomLeft:function(o,r){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,r)},getBottomCenter:function(o,r){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,r)},getBottomRight:function(o,r){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,r)},getBounds:function(o){o===void 0&&(o=new u);var r,a,d,n,p,g,v,f;if(this.parentContainer){var b=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(o),b.transformPoint(o.x,o.y,o),r=o.x,a=o.y,this.getTopRight(o),b.transformPoint(o.x,o.y,o),d=o.x,n=o.y,this.getBottomLeft(o),b.transformPoint(o.x,o.y,o),p=o.x,g=o.y,this.getBottomRight(o),b.transformPoint(o.x,o.y,o),v=o.x,f=o.y}else this.getTopLeft(o),r=o.x,a=o.y,this.getTopRight(o),d=o.x,n=o.y,this.getBottomLeft(o),p=o.x,g=o.y,this.getBottomRight(o),v=o.x,f=o.y;return o.x=Math.min(r,d,p,v),o.y=Math.min(a,n,g,f),o.width=Math.max(r,d,p,v)-o.x,o.height=Math.max(a,n,g,f)-o.y,o}};y.exports=h},8573:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(6858),x=i(80661),c={mask:null,setMask:function(h){return this.mask=h,this},clearMask:function(h){return h===void 0&&(h=!1),h&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(h,o,r,a,d){return h===void 0&&(this.texture||this.shader||this.geom)&&(h=this),new u(this.scene,h,o,r,a,d)},createGeometryMask:function(h){return h===void 0&&(this.type==="Graphics"||this.geom)&&(h=this),new x(this.scene,h)}};y.exports=c},27387:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(i){this._displayOriginX=i,this.originX=i/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(i){this._displayOriginY=i,this.originY=i/this.height}},setOrigin:function(i,u){return i===void 0&&(i=.5),u===void 0&&(u=i),this.originX=i,this.originY=u,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(i,u){return i===void 0&&(i=0),u===void 0&&(u=i),this.displayOriginX=i,this.displayOriginY=u,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};y.exports=P},37640:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39506),x=i(57355),c=i(35154),h=i(86353),o=i(26099),r={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:h.PLAYING_FORWARD,setPath:function(a,d){d===void 0&&(d=this.pathConfig);var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this.path=a,d&&this.startFollow(d),this},setRotateToPath:function(a,d){return d===void 0&&(d=0),this.rotateToPath=a,this.pathRotationOffset=d,this},isFollowing:function(){var a=this.pathTween;return a&&a.isPlaying()},startFollow:function(a,d){a===void 0&&(a={}),d===void 0&&(d=0);var n=this.pathTween;n&&n.isPlaying()&&n.stop(),typeof a=="number"&&(a={duration:a}),a.from=c(a,"from",0),a.to=c(a,"to",1);var p=x(a,"positionOnPath",!1);this.rotateToPath=x(a,"rotateToPath",!1),this.pathRotationOffset=c(a,"rotationOffset",0);var g=c(a,"startAt",d);if(g&&(a.onStart=function(f){var b=f.data[0];b.progress=g,b.elapsed=b.duration*g;var C=b.ease(b.progress);b.current=b.start+(b.end-b.start)*C,b.setTargetValue()}),this.pathOffset||(this.pathOffset=new o(this.x,this.y)),this.pathVector||(this.pathVector=new o),this.pathDelta||(this.pathDelta=new o),this.pathDelta.reset(),a.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(a),this.path.getStartPoint(this.pathOffset),p&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=h.PLAYING_FORWARD,this.rotateToPath){var v=this.path.getPoint(.1);this.rotation=Math.atan2(v.y-this.y,v.x-this.x)+u(this.pathRotationOffset)}return this.pathConfig=a,this},pauseFollow:function(){var a=this.pathTween;return a&&a.isPlaying()&&a.pause(),this},resumeFollow:function(){var a=this.pathTween;return a&&a.isPaused()&&a.resume(),this},stopFollow:function(){var a=this.pathTween;return a&&a.isPlaying()&&a.stop(),this},pathUpdate:function(){var a=this.pathTween;if(a&&a.data){var d=a.data[0],n=this.pathDelta,p=this.pathVector;if(n.copy(p).negate(),d.state===h.COMPLETE){this.path.getPoint(d.end,p),n.add(p),p.add(this.pathOffset),this.setPosition(p.x,p.y);return}else if(d.state!==h.PLAYING_FORWARD&&d.state!==h.PLAYING_BACKWARD)return;this.path.getPoint(a.getValue(),p),n.add(p),p.add(this.pathOffset);var g=this.x,v=this.y;this.setPosition(p.x,p.y);var f=this.x-g,b=this.y-v;if(f===0&&b===0)return;if(d.state!==this._prevDirection){this._prevDirection=d.state;return}this.rotateToPath&&(this.rotation=Math.atan2(b,f)+u(this.pathRotationOffset))}}};y.exports=r},72699:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62644),x={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(c){this.pipelineData={};var h=this.scene.sys.renderer;if(!h)return!1;var o=h.pipelines;if(o){c===void 0&&(c=o.default);var r=o.get(c);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(c,h,o){var r=this.scene.sys.renderer;if(!r)return this;var a=r.pipelines;if(a){var d=a.get(c);d&&(this.pipeline=d),h&&(this.pipelineData=o?u(h):h)}return this},setPipelineData:function(c,h){var o=this.pipelineData;return h===void 0?delete o[c]:o[c]=h,this},resetPipeline:function(c){return c===void 0&&(c=!1),this.pipeline=this.defaultPipeline,c&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};y.exports=x},17581:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62644),x=i(47059),c=i(19133),h={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(o){this.postPipelines=[],this.postPipelineData={},this.postFX=new x(this,!0),o&&(this.preFX=new x(this,!1))},setPostPipeline:function(o,r,a){var d=this.scene.sys.renderer;if(!d)return this;var n=d.pipelines;if(n){Array.isArray(o)||(o=[o]);for(var p=0;p<o.length;p++){var g=n.getPostPipeline(o[p],this,r);g&&this.postPipelines.push(g)}r&&(this.postPipelineData=a?u(r):r)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(o,r){var a=this.postPipelineData;return r===void 0?delete a[o]:a[o]=r,this},getPostPipeline:function(o){for(var r=typeof o=="string",a=this.postPipelines,d=[],n=0;n<a.length;n++){var p=a[n];(r&&p.name===o||!r&&p instanceof o)&&d.push(p)}return d.length===1?d[0]:d},resetPostPipeline:function(o){o===void 0&&(o=!1);for(var r=this.postPipelines,a=0;a<r.length;a++)r[a].destroy();this.postPipelines=[],this.hasPostPipeline=!1,o&&(this.postPipelineData={})},removePostPipeline:function(o){for(var r=typeof o=="string",a=this.postPipelines,d=a.length-1;d>=0;d--){var n=a[d];(r&&n.name===o||!r&&n===o)&&(n.destroy(),c(a,d))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};y.exports=h},80227:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(i,u){return u===void 0&&(u=i),this.scrollFactorX=i,this.scrollFactorY=u,this}};y.exports=P},16736:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(i){this.scaleX=i/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(i){this.scaleY=i/this.frame.realHeight}},setSizeToFrame:function(i){i||(i=this.frame),this.width=i.realWidth,this.height=i.realHeight;var u=this.input;return u&&!u.customHitArea&&(u.hitArea.width=this.width,u.hitArea.height=this.height),this},setSize:function(i,u){return this.width=i,this.height=u,this},setDisplaySize:function(i,u){return this.displayWidth=i,this.displayHeight=u,this}};y.exports=P},37726:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(4327),x=8,c={texture:null,frame:null,isCropped:!1,setTexture:function(h,o,r,a){return this.texture=this.scene.sys.textures.get(h),this.setFrame(o,r,a)},setFrame:function(h,o,r){return o===void 0&&(o=!0),r===void 0&&(r=!0),h instanceof u?(this.texture=this.scene.sys.textures.get(h.texture.key),this.frame=h):this.frame=this.texture.get(h),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~x:this.renderFlags|=x,this._sizeComponent&&o&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};y.exports=c},79812:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(4327),x=8,c={texture:null,frame:null,isCropped:!1,setCrop:function(h,o,r,a){if(h===void 0)this.isCropped=!1;else if(this.frame){if(typeof h=="number")this.frame.setCropUVs(this._crop,h,o,r,a,this.flipX,this.flipY);else{var d=h;this.frame.setCropUVs(this._crop,d.x,d.y,d.width,d.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(h,o){return this.texture=this.scene.sys.textures.get(h),this.setFrame(o)},setFrame:function(h,o,r){return o===void 0&&(o=!0),r===void 0&&(r=!0),h instanceof u?(this.texture=this.scene.sys.textures.get(h.texture.key),this.frame=h):this.frame=this.texture.get(h),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~x:this.renderFlags|=x,this._sizeComponent&&o&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};y.exports=c},27472:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(i,u,x,c){return i===void 0&&(i=16777215),u===void 0&&(u=i,x=i,c=i),this.tintTopLeft=i,this.tintTopRight=u,this.tintBottomLeft=x,this.tintBottomRight=c,this.tintFill=!1,this},setTintFill:function(i,u,x,c){return this.setTint(i,u,x,c),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(i){this.setTint(i,i,i,i)}},isTinted:{get:function(){var i=16777215;return this.tintFill||this.tintTopLeft!==i||this.tintTopRight!==i||this.tintBottomLeft!==i||this.tintBottomRight!==i}}};y.exports=P},53774:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u={name:i.name,type:i.type,x:i.x,y:i.y,depth:i.depth,scale:{x:i.scaleX,y:i.scaleY},origin:{x:i.originX,y:i.originY},flipX:i.flipX,flipY:i.flipY,rotation:i.rotation,alpha:i.alpha,visible:i.visible,blendMode:i.blendMode,textureKey:"",frameKey:"",data:{}};return i.texture&&(u.textureKey=i.texture.key,u.frameKey=i.frame.name),u};y.exports=P},16901:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(36383),x=i(61340),c=i(85955),h=i(86554),o=i(30954),r=i(26099),a=4,d={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(n){this._scaleX=n,this._scaleY=n,n===0?this.renderFlags&=~a:this.renderFlags|=a}},scaleX:{get:function(){return this._scaleX},set:function(n){this._scaleX=n,n===0?this.renderFlags&=~a:this._scaleY!==0&&(this.renderFlags|=a)}},scaleY:{get:function(){return this._scaleY},set:function(n){this._scaleY=n,n===0?this.renderFlags&=~a:this._scaleX!==0&&(this.renderFlags|=a)}},angle:{get:function(){return o(this._rotation*u.RAD_TO_DEG)},set:function(n){this.rotation=o(n)*u.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(n){this._rotation=h(n)}},setPosition:function(n,p,g,v){return n===void 0&&(n=0),p===void 0&&(p=n),g===void 0&&(g=0),v===void 0&&(v=0),this.x=n,this.y=p,this.z=g,this.w=v,this},copyPosition:function(n){return n.x!==void 0&&(this.x=n.x),n.y!==void 0&&(this.y=n.y),n.z!==void 0&&(this.z=n.z),n.w!==void 0&&(this.w=n.w),this},setRandomPosition:function(n,p,g,v){return n===void 0&&(n=0),p===void 0&&(p=0),g===void 0&&(g=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),this.x=n+Math.random()*g,this.y=p+Math.random()*v,this},setRotation:function(n){return n===void 0&&(n=0),this.rotation=n,this},setAngle:function(n){return n===void 0&&(n=0),this.angle=n,this},setScale:function(n,p){return n===void 0&&(n=1),p===void 0&&(p=n),this.scaleX=n,this.scaleY=p,this},setX:function(n){return n===void 0&&(n=0),this.x=n,this},setY:function(n){return n===void 0&&(n=0),this.y=n,this},setZ:function(n){return n===void 0&&(n=0),this.z=n,this},setW:function(n){return n===void 0&&(n=0),this.w=n,this},getLocalTransformMatrix:function(n){return n===void 0&&(n=new x),n.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(n,p){n===void 0&&(n=new x);var g=this.parentContainer;if(!g)return this.getLocalTransformMatrix(n);var v=!1;for(p||(p=new x,v=!0),n.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);g;)p.applyITRS(g.x,g.y,g._rotation,g._scaleX,g._scaleY),p.multiply(n,n),g=g.parentContainer;return v&&p.destroy(),n},getLocalPoint:function(n,p,g,v){g||(g=new r),v||(v=this.scene.sys.cameras.main);var f=v.scrollX,b=v.scrollY,C=n+f*this.scrollFactorX-f,_=p+b*this.scrollFactorY-b;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(C,_,g):c(C,_,this.x,this.y,this.rotation,this.scaleX,this.scaleY,g),this._originComponent&&(g.x+=this._displayOriginX,g.y+=this._displayOriginY),g},getWorldPoint:function(n,p,g){n===void 0&&(n=new r);var v=this.parentContainer;if(!v)return n.x=this.x,n.y=this.y,n;var f=this.getWorldTransformMatrix(p,g);return n.x=f.tx,n.y=f.ty,n},getParentRotation:function(){for(var n=0,p=this.parentContainer;p;)n+=p.rotation,p=p.parentContainer;return n}};y.exports=d},61340:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(36383),c=i(26099),h=new u({initialize:function(o,r,a,d,n,p){o===void 0&&(o=1),r===void 0&&(r=0),a===void 0&&(a=0),d===void 0&&(d=1),n===void 0&&(n=0),p===void 0&&(p=0),this.matrix=new Float32Array([o,r,a,d,n,p,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(o){this.matrix[0]=o}},b:{get:function(){return this.matrix[1]},set:function(o){this.matrix[1]=o}},c:{get:function(){return this.matrix[2]},set:function(o){this.matrix[2]=o}},d:{get:function(){return this.matrix[3]},set:function(o){this.matrix[3]=o}},e:{get:function(){return this.matrix[4]},set:function(o){this.matrix[4]=o}},f:{get:function(){return this.matrix[5]},set:function(o){this.matrix[5]=o}},tx:{get:function(){return this.matrix[4]},set:function(o){this.matrix[4]=o}},ty:{get:function(){return this.matrix[5]},set:function(o){this.matrix[5]=o}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var o=this.matrix,r=o[0],a=o[1],d=o[2],n=o[3];return r||a?a>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):d||n?x.TAU-(n>0?Math.acos(-d/this.scaleY):-Math.acos(d/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var o=this.matrix;return o[0]=1,o[1]=0,o[2]=0,o[3]=1,o[4]=0,o[5]=0,this},translate:function(o,r){var a=this.matrix;return a[4]=a[0]*o+a[2]*r+a[4],a[5]=a[1]*o+a[3]*r+a[5],this},scale:function(o,r){var a=this.matrix;return a[0]*=o,a[1]*=o,a[2]*=r,a[3]*=r,this},rotate:function(o){var r=Math.sin(o),a=Math.cos(o),d=this.matrix,n=d[0],p=d[1],g=d[2],v=d[3];return d[0]=n*a+g*r,d[1]=p*a+v*r,d[2]=n*-r+g*a,d[3]=p*-r+v*a,this},multiply:function(o,r){var a=this.matrix,d=o.matrix,n=a[0],p=a[1],g=a[2],v=a[3],f=a[4],b=a[5],C=d[0],_=d[1],M=d[2],E=d[3],A=d[4],R=d[5],L=r===void 0?a:r.matrix;return L[0]=C*n+_*g,L[1]=C*p+_*v,L[2]=M*n+E*g,L[3]=M*p+E*v,L[4]=A*n+R*g+f,L[5]=A*p+R*v+b,L},multiplyWithOffset:function(o,r,a){var d=this.matrix,n=o.matrix,p=d[0],g=d[1],v=d[2],f=d[3],b=d[4],C=d[5],_=r*p+a*v+b,M=r*g+a*f+C,E=n[0],A=n[1],R=n[2],L=n[3],Y=n[4],F=n[5];return d[0]=E*p+A*v,d[1]=E*g+A*f,d[2]=R*p+L*v,d[3]=R*g+L*f,d[4]=Y*p+F*v+_,d[5]=Y*g+F*f+M,this},transform:function(o,r,a,d,n,p){var g=this.matrix,v=g[0],f=g[1],b=g[2],C=g[3],_=g[4],M=g[5];return g[0]=o*v+r*b,g[1]=o*f+r*C,g[2]=a*v+d*b,g[3]=a*f+d*C,g[4]=n*v+p*b+_,g[5]=n*f+p*C+M,this},transformPoint:function(o,r,a){a===void 0&&(a={x:0,y:0});var d=this.matrix,n=d[0],p=d[1],g=d[2],v=d[3],f=d[4],b=d[5];return a.x=o*n+r*g+f,a.y=o*p+r*v+b,a},invert:function(){var o=this.matrix,r=o[0],a=o[1],d=o[2],n=o[3],p=o[4],g=o[5],v=r*n-a*d;return o[0]=n/v,o[1]=-a/v,o[2]=-d/v,o[3]=r/v,o[4]=(d*g-n*p)/v,o[5]=-(r*g-a*p)/v,this},copyFrom:function(o){var r=this.matrix;return r[0]=o.a,r[1]=o.b,r[2]=o.c,r[3]=o.d,r[4]=o.e,r[5]=o.f,this},copyFromArray:function(o){var r=this.matrix;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],this},copyToContext:function(o){var r=this.matrix;return o.transform(r[0],r[1],r[2],r[3],r[4],r[5]),o},setToContext:function(o){return o.setTransform(this.a,this.b,this.c,this.d,this.e,this.f),o},copyToArray:function(o){var r=this.matrix;return o===void 0?o=[r[0],r[1],r[2],r[3],r[4],r[5]]:(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5]),o},setTransform:function(o,r,a,d,n,p){var g=this.matrix;return g[0]=o,g[1]=r,g[2]=a,g[3]=d,g[4]=n,g[5]=p,this},decomposeMatrix:function(){var o=this.decomposedMatrix,r=this.matrix,a=r[0],d=r[1],n=r[2],p=r[3],g=a*p-d*n;if(o.translateX=r[4],o.translateY=r[5],a||d){var v=Math.sqrt(a*a+d*d);o.rotation=d>0?Math.acos(a/v):-Math.acos(a/v),o.scaleX=v,o.scaleY=g/v}else if(n||p){var f=Math.sqrt(n*n+p*p);o.rotation=Math.PI*.5-(p>0?Math.acos(-n/f):-Math.acos(n/f)),o.scaleX=g/f,o.scaleY=f}else o.rotation=0,o.scaleX=0,o.scaleY=0;return o},applyITRS:function(o,r,a,d,n){var p=this.matrix,g=Math.sin(a),v=Math.cos(a);return p[4]=o,p[5]=r,p[0]=v*d,p[1]=g*d,p[2]=-g*n,p[3]=v*n,this},applyInverse:function(o,r,a){a===void 0&&(a=new c);var d=this.matrix,n=d[0],p=d[1],g=d[2],v=d[3],f=d[4],b=d[5],C=1/(n*v+g*-p);return a.x=v*C*o+-g*C*r+(b*g-f*v)*C,a.y=n*C*r+-p*C*o+(-b*n+f*p)*C,a},setQuad:function(o,r,a,d,n,p){n===void 0&&(n=!1),p===void 0&&(p=this.quad);var g=this.matrix,v=g[0],f=g[1],b=g[2],C=g[3],_=g[4],M=g[5],E=o*v+r*b+_,A=o*f+r*C+M,R=o*v+d*b+_,L=o*f+d*C+M,Y=a*v+d*b+_,F=a*f+d*C+M,N=a*v+r*b+_,z=a*f+r*C+M;if(n){var U=Math.floor(E+.5),q=Math.floor(A+.5),Q=U-E,K=q-A;p[0]=U,p[1]=q,p[2]=R+Q,p[3]=L+K,p[4]=Y+Q,p[5]=F+K,p[6]=N+Q,p[7]=z+K}else p[0]=E,p[1]=A,p[2]=R,p[3]=L,p[4]=Y,p[5]=F,p[6]=N,p[7]=z;return p},getX:function(o,r){return o*this.a+r*this.c+this.e},getY:function(o,r){return o*this.b+r*this.d+this.f},getXRound:function(o,r,a){var d=this.getX(o,r);return a&&(d=Math.floor(d+.5)),d},getYRound:function(o,r,a){var d=this.getY(o,r);return a&&(d=Math.floor(d+.5)),d},getCSSMatrix:function(){var o=this.matrix;return"matrix("+o[0]+","+o[1]+","+o[2]+","+o[3]+","+o[4]+","+o[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});y.exports=h},59715:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=1,i={_visible:!0,visible:{get:function(){return this._visible},set:function(u){u?(this._visible=!0,this.renderFlags|=P):(this._visible=!1,this.renderFlags&=~P)}},setVisible:function(u){return this.visible=u,this}};y.exports=i},31401:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Alpha:i(16005),AlphaSingle:i(88509),BlendMode:i(90065),ComputedSize:i(94215),Crop:i(61683),Depth:i(89272),Flip:i(54434),FX:i(47059),GetBounds:i(8004),Mask:i(8573),Origin:i(27387),PathFollower:i(37640),Pipeline:i(72699),PostPipeline:i(17581),ScrollFactor:i(80227),Size:i(16736),Texture:i(37726),TextureCrop:i(79812),Tint:i(27472),ToJSON:i(53774),Transform:i(16901),TransformMatrix:i(61340),Visible:i(59715)}},31559:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Felipe Alfonso <@bitnenfer>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(37105),x=i(10312),c=i(83419),h=i(31401),o=i(51708),r=i(95643),a=i(87841),d=i(29959),n=i(36899),p=i(26099),g=new h.TransformMatrix,v=new c({Extends:r,Mixins:[h.AlphaSingle,h.BlendMode,h.ComputedSize,h.Depth,h.Mask,h.PostPipeline,h.Transform,h.Visible,d],initialize:function(f,b,C,_){r.call(this,f,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new h.TransformMatrix,this._sortKey="",this._sysEvents=f.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(b,C),this.setBlendMode(x.SKIP_CHECK),_&&this.add(_)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(f){return f===void 0&&(f=!0),this.exclusive=f,this},getBounds:function(f){if(f===void 0&&(f=new a),f.setTo(this.x,this.y,0,0),this.parentContainer){var b=this.parentContainer.getBoundsTransformMatrix(),C=b.transformPoint(this.x,this.y);f.setTo(C.x,C.y,0,0)}if(this.list.length>0){var _=this.list,M=new a,E=!1;f.setEmpty();for(var A=0;A<_.length;A++){var R=_[A];R.getBounds&&(R.getBounds(M),E?n(M,f,f):(f.setTo(M.x,M.y,M.width,M.height),E=!0))}}return f},addHandler:function(f){f.once(o.DESTROY,this.onChildDestroyed,this),this.exclusive&&(f.parentContainer&&f.parentContainer.remove(f),f.parentContainer=this,f.removeFromDisplayList(),f.addedToScene())},removeHandler:function(f){f.off(o.DESTROY,this.remove,this),this.exclusive&&(f.parentContainer=null,f.removedFromScene(),f.addToDisplayList())},pointToContainer:function(f,b){b===void 0&&(b=new p),this.parentContainer?this.parentContainer.pointToContainer(f,b):(b.x=f.x,b.y=f.y);var C=g;return C.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),C.invert(),C.transformPoint(f.x,f.y,b),b},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(g,this.localTransform)},add:function(f){return u.Add(this.list,f,this.maxSize,this.addHandler,this),this},addAt:function(f,b){return u.AddAt(this.list,f,b,this.maxSize,this.addHandler,this),this},getAt:function(f){return this.list[f]},getIndex:function(f){return this.list.indexOf(f)},sort:function(f,b){return f?(b===void 0&&(b=function(C,_){return C[f]-_[f]}),u.StableSort(this.list,b),this):this},getByName:function(f){return u.GetFirst(this.list,"name",f)},getRandom:function(f,b){return u.GetRandom(this.list,f,b)},getFirst:function(f,b,C,_){return u.GetFirst(this.list,f,b,C,_)},getAll:function(f,b,C,_){return u.GetAll(this.list,f,b,C,_)},count:function(f,b,C,_){return u.CountAllMatching(this.list,f,b,C,_)},swap:function(f,b){return u.Swap(this.list,f,b),this},moveTo:function(f,b){return u.MoveTo(this.list,f,b),this},moveAbove:function(f,b){return u.MoveAbove(this.list,f,b),this},moveBelow:function(f,b){return u.MoveBelow(this.list,f,b),this},remove:function(f,b){var C=u.Remove(this.list,f,this.removeHandler,this);if(b&&C){Array.isArray(C)||(C=[C]);for(var _=0;_<C.length;_++)C[_].destroy()}return this},removeAt:function(f,b){var C=u.RemoveAt(this.list,f,this.removeHandler,this);return b&&C&&C.destroy(),this},removeBetween:function(f,b,C){var _=u.RemoveBetween(this.list,f,b,this.removeHandler,this);if(C)for(var M=0;M<_.length;M++)_[M].destroy();return this},removeAll:function(f){var b=this.list;if(f){for(var C=0;C<b.length;C++)b[C]&&b[C].scene&&(b[C].off(o.DESTROY,this.onChildDestroyed,this),b[C].destroy());this.list=[]}else u.RemoveBetween(b,0,b.length,this.removeHandler,this);return this},bringToTop:function(f){return u.BringToTop(this.list,f),this},sendToBack:function(f){return u.SendToBack(this.list,f),this},moveUp:function(f){return u.MoveUp(this.list,f),this},moveDown:function(f){return u.MoveDown(this.list,f),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return u.Shuffle(this.list),this},replace:function(f,b,C){var _=u.Replace(this.list,f,b);return _&&(this.addHandler(b),this.removeHandler(f),C&&f.destroy()),this},exists:function(f){return this.list.indexOf(f)>-1},setAll:function(f,b,C,_){return u.SetAll(this.list,f,b,C,_),this},each:function(f,b){var C=[null],_,M=this.list.slice(),E=M.length;for(_=2;_<arguments.length;_++)C.push(arguments[_]);for(_=0;_<E;_++)C[0]=M[_],f.apply(b,C);return this},iterate:function(f,b){var C=[null],_;for(_=2;_<arguments.length;_++)C.push(arguments[_]);for(_=0;_<this.list.length;_++)C[0]=this.list[_],f.apply(b,C);return this},setScrollFactor:function(f,b,C){return b===void 0&&(b=f),C===void 0&&(C=!1),this.scrollFactorX=f,this.scrollFactorY=b,C&&(u.SetAll(this.list,"scrollFactorX",f),u.SetAll(this.list,"scrollFactorY",b)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(f){u.Remove(this.list,f),this.exclusive&&(f.parentContainer=null,f.removedFromScene())}});y.exports=v},53584:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Felipe Alfonso <@bitnenfer>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){x.addToRenderList(u);var h=u.list;if(h.length!==0){var o=u.localTransform;c?(o.loadIdentity(),o.multiply(c),o.translate(u.x,u.y),o.rotate(u.rotation),o.scale(u.scaleX,u.scaleY)):o.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);var r=u.blendMode!==-1;r||i.setBlendMode(0);var a=u._alpha,d=u.scrollFactorX,n=u.scrollFactorY;u.mask&&u.mask.preRenderCanvas(i,null,x);for(var p=0;p<h.length;p++){var g=h[p];if(g.willRender(x)){var v=g.alpha,f=g.scrollFactorX,b=g.scrollFactorY;!r&&g.blendMode!==i.currentBlendMode&&i.setBlendMode(g.blendMode),g.setScrollFactor(f*d,b*n),g.setAlpha(v*a),g.renderCanvas(i,g,x,o),g.setAlpha(v),g.setScrollFactor(f,b)}}u.mask&&u.mask.postRenderCanvas(i)}};y.exports=P},77143:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Felipe Alfonso <@bitnenfer>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(31559),c=i(44603),h=i(23568),o=i(95540);c.register("container",function(r,a){r===void 0&&(r={});var d=h(r,"x",0),n=h(r,"y",0),p=o(r,"children",null),g=new x(this.scene,d,n,p);return a!==void 0&&(r.add=a),u(this.scene,g,r),g})},24961:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Felipe Alfonso <@bitnenfer>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(31559),x=i(39429);x.register("container",function(c,h,o){return this.displayList.add(new u(this.scene,c,h,o))})},29959:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Felipe Alfonso <@bitnenfer>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(72249),c=i(53584),y.exports={renderWebGL:x,renderCanvas:c}},72249:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Felipe Alfonso <@bitnenfer>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){x.addToRenderList(u);var h=u.list,o=h.length;if(o!==0){var r=u.localTransform;c?(r.loadIdentity(),r.multiply(c),r.translate(u.x,u.y),r.rotate(u.rotation),r.scale(u.scaleX,u.scaleY)):r.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),i.pipelines.preBatch(u);var a=u.blendMode!==-1;a||i.setBlendMode(0);for(var d=u.alpha,n=u.scrollFactorX,p=u.scrollFactorY,g=0;g<o;g++){var v=h[g];if(v.willRender(x)){var f,b,C,_;if(v.alphaTopLeft!==void 0)f=v.alphaTopLeft,b=v.alphaTopRight,C=v.alphaBottomLeft,_=v.alphaBottomRight;else{var M=v.alpha;f=M,b=M,C=M,_=M}var E=v.scrollFactorX,A=v.scrollFactorY;!a&&v.blendMode!==i.currentBlendMode&&i.setBlendMode(v.blendMode);var R=v.mask;R&&R.preRenderWebGL(i,v,x);var L=v.type;L!==i.currentType&&(i.newType=!0,i.currentType=L),i.nextTypeMatch=g<o-1?h[g+1].type===i.currentType:!1,v.setScrollFactor(E*n,A*p),v.setAlpha(f*d,b*d,C*d,_*d),v.renderWebGL(i,v,x,r,u),v.setAlpha(f,b,C,_),v.setScrollFactor(E,A),R&&R.postRenderWebGL(i,x),i.newType=!1}}i.pipelines.postBatch(u)}};y.exports=P},47407:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},3069:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(31401),c=i(441),h=i(95643),o=i(41212),r=i(35846),a=i(44594),d=i(61369),n=new u({Extends:h,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Origin,x.ScrollFactor,x.Transform,x.Visible,c],initialize:function(p,g,v,f,b,C){if(h.call(this,p,"DOMElement"),this.parent=p.sys.game.domContainer,!this.parent)throw new Error("No DOM Container set in game config");this.cache=p.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new d,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,v),typeof f=="string"?f[0]==="#"?this.setElement(f.substr(1),b,C):this.createElement(f,b,C):f&&this.setElement(f,b,C),p.sys.events.on(a.SLEEP,this.handleSceneEvent,this),p.sys.events.on(a.WAKE,this.handleSceneEvent,this),p.sys.events.on(a.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(p){var g=this.node,v=g.style;g&&(v.display=p.settings.visible?"block":"none")},setSkew:function(p,g){return p===void 0&&(p=0),g===void 0&&(g=p),this.skewX=p,this.skewY=g,this},setPerspective:function(p){return this.parent.style.perspective=p+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(p){this.parent.style.perspective=p+"px"}},addListener:function(p){if(this.node){p=p.split(" ");for(var g=0;g<p.length;g++)this.node.addEventListener(p[g],this.handler,!1)}return this},removeListener:function(p){if(this.node){p=p.split(" ");for(var g=0;g<p.length;g++)this.node.removeEventListener(p[g],this.handler)}return this},dispatchNativeEvent:function(p){this.emit(p.type,p)},createElement:function(p,g,v){return this.setElement(document.createElement(p),g,v)},setElement:function(p,g,v){this.removeElement();var f;if(typeof p=="string"?(p[0]==="#"&&(p=p.substr(1)),f=document.getElementById(p)):typeof p=="object"&&p.nodeType===1&&(f=p),!f)return this;if(this.node=f,g&&o(g))for(var b in g)f.style[b]=g[b];else typeof g=="string"&&(f.style=g);return f.style.zIndex="0",f.style.display="inline",f.style.position="absolute",f.phaser=this,this.parent.appendChild(f),v&&(f.innerText=v),this.updateSize()},createFromCache:function(p,g){var v=this.cache.get(p);return v&&this.createFromHTML(v,g),this},createFromHTML:function(p,g){g===void 0&&(g="div"),this.removeElement();var v=document.createElement(g);return this.node=v,v.style.zIndex="0",v.style.display="inline",v.style.position="absolute",v.phaser=this,this.parent.appendChild(v),v.innerHTML=p,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var p=this.node;return this.width=p.clientWidth,this.height=p.clientHeight,this.displayWidth=this.width*this.scaleX,this.displayHeight=this.height*this.scaleY,this},getChildByProperty:function(p,g){if(this.node){for(var v=this.node.querySelectorAll("*"),f=0;f<v.length;f++)if(v[f][p]===g)return v[f]}return null},getChildByID:function(p){return this.getChildByProperty("id",p)},getChildByName:function(p){return this.getChildByProperty("name",p)},setClassName:function(p){return this.node&&(this.node.className=p,this.updateSize()),this},setText:function(p){return this.node&&(this.node.innerText=p,this.updateSize()),this},setHTML:function(p){return this.node&&(this.node.innerHTML=p,this.updateSize()),this},preRender:function(){var p=this.parentContainer,g=this.node;g&&p&&!p.willRender()&&(g.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(a.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(a.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(a.PRE_RENDER,this.preRender,this)}});y.exports=n},49381:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(47407),x=i(95643),c=i(61340),h=new c,o=new c,r=new c,a=function(d,n,p,g){if(n.node){var v=n.node.style,f=n.scene.sys.settings;if(!v||!f.visible||x.RENDER_MASK!==n.renderFlags||n.cameraFilter!==0&&n.cameraFilter&p.id||n.parentContainer&&!n.parentContainer.willRender()){v.display="none";return}var b=n.parentContainer,C=p.alpha*n.alpha;b&&(C*=b.alpha);var _=h,M=o,E=r,A=0,R=0,L="0%",Y="0%";g?(A=n.width*n.scaleX*n.originX,R=n.height*n.scaleY*n.originY,M.applyITRS(n.x-A,n.y-R,n.rotation,n.scaleX,n.scaleY),_.copyFrom(p.matrix),_.multiplyWithOffset(g,-p.scrollX*n.scrollFactorX,-p.scrollY*n.scrollFactorY),M.e=n.x-A,M.f=n.y-R,_.multiply(M,E)):(A=n.width*n.originX,R=n.height*n.originY,M.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),_.copyFrom(p.matrix),L=100*n.originX+"%",Y=100*n.originY+"%",M.e-=p.scrollX*n.scrollFactorX,M.f-=p.scrollY*n.scrollFactorY,_.multiply(M,E),E.e-=A,E.f-=R),n.transformOnly||(v.display="block",v.opacity=C,v.zIndex=n._depth,v.pointerEvents=n.pointerEvents,v.mixBlendMode=u[n._blendMode]),v.transform=E.getCSSMatrix()+" skew("+n.skewX+"rad, "+n.skewY+"rad) rotate3d("+n.rotate3d.x+","+n.rotate3d.y+","+n.rotate3d.z+","+n.rotate3d.w+n.rotate3dAngle+")",v.transformOrigin=L+" "+Y}};y.exports=a},2611:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(3069),x=i(39429);x.register("dom",function(c,h,o,r,a){var d=new u(this.scene,c,h,o,r,a);return this.displayList.add(d),d})},441:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(49381),c=i(49381),y.exports={renderWebGL:x,renderCanvas:c}},62980:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="addedtoscene"},41337:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="destroy"},44947:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="removedfromscene"},49358:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="complete"},35163:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="created"},97249:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="error"},19483:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="locked"},56059:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="loop"},26772:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="metadata"},64437:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="playing"},83411:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="play"},75780:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="seeked"},67799:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="seeking"},63500:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="stalled"},55541:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="stop"},53208:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="textureready"},4992:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="unlocked"},12:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="unsupported"},51708:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={ADDED_TO_SCENE:i(62980),DESTROY:i(41337),REMOVED_FROM_SCENE:i(44947),VIDEO_COMPLETE:i(49358),VIDEO_CREATED:i(35163),VIDEO_ERROR:i(97249),VIDEO_LOCKED:i(19483),VIDEO_LOOP:i(56059),VIDEO_METADATA:i(26772),VIDEO_PLAY:i(83411),VIDEO_PLAYING:i(64437),VIDEO_SEEKED:i(75780),VIDEO_SEEKING:i(67799),VIDEO_STALLED:i(63500),VIDEO_STOP:i(55541),VIDEO_TEXTURE:i(53208),VIDEO_UNLOCKED:i(4992),VIDEO_UNSUPPORTED:i(12)}},42421:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(31401),c=i(95643),h=i(64993),o=new u({Extends:c,Mixins:[x.Alpha,x.BlendMode,x.Depth,x.Flip,x.Origin,x.ScrollFactor,x.Size,x.Texture,x.Tint,x.Transform,x.Visible,h],initialize:function(r){c.call(this,r,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});y.exports=o},70217:()=>{},56315:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(42421),x=i(39429);x.register("extern",function(){var c=new u(this.scene);return this.displayList.add(c),c})},64993:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(80287),c=i(70217),y.exports={renderWebGL:x,renderCanvas:c}},80287:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=function(c,h,o,r){c.pipelines.clear();var a=u(h,o,r).calc;h.render.call(h,c,o,a),c.pipelines.rebind()};y.exports=x},85592:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},43831:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(71911),x=i(83419),c=i(85592),h=i(31401),o=i(8497),r=i(95643),a=i(95540),d=i(35154),n=i(36383),p=i(84503),g=new x({Extends:r,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.PostPipeline,h.Transform,h.Visible,h.ScrollFactor,p],initialize:function(v,f){var b=d(f,"x",0),C=d(f,"y",0);r.call(this,v,"Graphics"),this.setPosition(b,C),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(f)},setDefaultStyles:function(v){return d(v,"lineStyle",null)&&(this.defaultStrokeWidth=d(v,"lineStyle.width",1),this.defaultStrokeColor=d(v,"lineStyle.color",16777215),this.defaultStrokeAlpha=d(v,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),d(v,"fillStyle",null)&&(this.defaultFillColor=d(v,"fillStyle.color",16777215),this.defaultFillAlpha=d(v,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(v,f,b){return b===void 0&&(b=1),this.commandBuffer.push(c.LINE_STYLE,v,f,b),this._lineWidth=v,this},fillStyle:function(v,f){return f===void 0&&(f=1),this.commandBuffer.push(c.FILL_STYLE,v,f),this},fillGradientStyle:function(v,f,b,C,_,M,E,A){return _===void 0&&(_=1),M===void 0&&(M=_),E===void 0&&(E=_),A===void 0&&(A=_),this.commandBuffer.push(c.GRADIENT_FILL_STYLE,_,M,E,A,v,f,b,C),this},lineGradientStyle:function(v,f,b,C,_,M){return M===void 0&&(M=1),this.commandBuffer.push(c.GRADIENT_LINE_STYLE,v,M,f,b,C,_),this},beginPath:function(){return this.commandBuffer.push(c.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(c.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(c.FILL_PATH),this},fill:function(){return this.commandBuffer.push(c.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(c.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(c.STROKE_PATH),this},fillCircleShape:function(v){return this.fillCircle(v.x,v.y,v.radius)},strokeCircleShape:function(v){return this.strokeCircle(v.x,v.y,v.radius)},fillCircle:function(v,f,b){return this.beginPath(),this.arc(v,f,b,0,n.PI2),this.fillPath(),this},strokeCircle:function(v,f,b){return this.beginPath(),this.arc(v,f,b,0,n.PI2),this.strokePath(),this},fillRectShape:function(v){return this.fillRect(v.x,v.y,v.width,v.height)},strokeRectShape:function(v){return this.strokeRect(v.x,v.y,v.width,v.height)},fillRect:function(v,f,b,C){return this.commandBuffer.push(c.FILL_RECT,v,f,b,C),this},strokeRect:function(v,f,b,C){var _=this._lineWidth/2,M=v-_,E=v+_;return this.beginPath(),this.moveTo(v,f),this.lineTo(v,f+C),this.strokePath(),this.beginPath(),this.moveTo(v+b,f),this.lineTo(v+b,f+C),this.strokePath(),this.beginPath(),this.moveTo(M,f),this.lineTo(E+b,f),this.strokePath(),this.beginPath(),this.moveTo(M,f+C),this.lineTo(E+b,f+C),this.strokePath(),this},fillRoundedRect:function(v,f,b,C,_){_===void 0&&(_=20);var M=_,E=_,A=_,R=_;typeof _!="number"&&(M=a(_,"tl",20),E=a(_,"tr",20),A=a(_,"bl",20),R=a(_,"br",20));var L=M>=0,Y=E>=0,F=A>=0,N=R>=0;return M=Math.abs(M),E=Math.abs(E),A=Math.abs(A),R=Math.abs(R),this.beginPath(),this.moveTo(v+M,f),this.lineTo(v+b-E,f),Y?this.arc(v+b-E,f+E,E,-n.TAU,0):this.arc(v+b,f,E,Math.PI,n.TAU,!0),this.lineTo(v+b,f+C-R),N?this.arc(v+b-R,f+C-R,R,0,n.TAU):this.arc(v+b,f+C,R,-n.TAU,Math.PI,!0),this.lineTo(v+A,f+C),F?this.arc(v+A,f+C-A,A,n.TAU,Math.PI):this.arc(v,f+C,A,0,-n.TAU,!0),this.lineTo(v,f+M),L?this.arc(v+M,f+M,M,-Math.PI,-n.TAU):this.arc(v,f,M,n.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(v,f,b,C,_){_===void 0&&(_=20);var M=_,E=_,A=_,R=_,L=Math.min(b,C)/2;typeof _!="number"&&(M=a(_,"tl",20),E=a(_,"tr",20),A=a(_,"bl",20),R=a(_,"br",20));var Y=M>=0,F=E>=0,N=A>=0,z=R>=0;return M=Math.min(Math.abs(M),L),E=Math.min(Math.abs(E),L),A=Math.min(Math.abs(A),L),R=Math.min(Math.abs(R),L),this.beginPath(),this.moveTo(v+M,f),this.lineTo(v+b-E,f),this.moveTo(v+b-E,f),F?this.arc(v+b-E,f+E,E,-n.TAU,0):this.arc(v+b,f,E,Math.PI,n.TAU,!0),this.lineTo(v+b,f+C-R),this.moveTo(v+b,f+C-R),z?this.arc(v+b-R,f+C-R,R,0,n.TAU):this.arc(v+b,f+C,R,-n.TAU,Math.PI,!0),this.lineTo(v+A,f+C),this.moveTo(v+A,f+C),N?this.arc(v+A,f+C-A,A,n.TAU,Math.PI):this.arc(v,f+C,A,0,-n.TAU,!0),this.lineTo(v,f+M),this.moveTo(v,f+M),Y?this.arc(v+M,f+M,M,-Math.PI,-n.TAU):this.arc(v,f,M,n.TAU,0,!0),this.strokePath(),this},fillPointShape:function(v,f){return this.fillPoint(v.x,v.y,f)},fillPoint:function(v,f,b){return!b||b<1?b=1:(v-=b/2,f-=b/2),this.commandBuffer.push(c.FILL_RECT,v,f,b,b),this},fillTriangleShape:function(v){return this.fillTriangle(v.x1,v.y1,v.x2,v.y2,v.x3,v.y3)},strokeTriangleShape:function(v){return this.strokeTriangle(v.x1,v.y1,v.x2,v.y2,v.x3,v.y3)},fillTriangle:function(v,f,b,C,_,M){return this.commandBuffer.push(c.FILL_TRIANGLE,v,f,b,C,_,M),this},strokeTriangle:function(v,f,b,C,_,M){return this.commandBuffer.push(c.STROKE_TRIANGLE,v,f,b,C,_,M),this},strokeLineShape:function(v){return this.lineBetween(v.x1,v.y1,v.x2,v.y2)},lineBetween:function(v,f,b,C){return this.beginPath(),this.moveTo(v,f),this.lineTo(b,C),this.strokePath(),this},lineTo:function(v,f){return this.commandBuffer.push(c.LINE_TO,v,f),this},moveTo:function(v,f){return this.commandBuffer.push(c.MOVE_TO,v,f),this},strokePoints:function(v,f,b,C){f===void 0&&(f=!1),b===void 0&&(b=!1),C===void 0&&(C=v.length),this.beginPath(),this.moveTo(v[0].x,v[0].y);for(var _=1;_<C;_++)this.lineTo(v[_].x,v[_].y);return f&&this.lineTo(v[0].x,v[0].y),b&&this.closePath(),this.strokePath(),this},fillPoints:function(v,f,b,C){f===void 0&&(f=!1),b===void 0&&(b=!1),C===void 0&&(C=v.length),this.beginPath(),this.moveTo(v[0].x,v[0].y);for(var _=1;_<C;_++)this.lineTo(v[_].x,v[_].y);return f&&this.lineTo(v[0].x,v[0].y),b&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(v,f){f===void 0&&(f=32);var b=v.getPoints(f);return this.strokePoints(b,!0)},strokeEllipse:function(v,f,b,C,_){_===void 0&&(_=32);var M=new o(v,f,b,C),E=M.getPoints(_);return this.strokePoints(E,!0)},fillEllipseShape:function(v,f){f===void 0&&(f=32);var b=v.getPoints(f);return this.fillPoints(b,!0)},fillEllipse:function(v,f,b,C,_){_===void 0&&(_=32);var M=new o(v,f,b,C),E=M.getPoints(_);return this.fillPoints(E,!0)},arc:function(v,f,b,C,_,M,E){return M===void 0&&(M=!1),E===void 0&&(E=0),this.commandBuffer.push(c.ARC,v,f,b,C,_,M,E),this},slice:function(v,f,b,C,_,M,E){return M===void 0&&(M=!1),E===void 0&&(E=0),this.commandBuffer.push(c.BEGIN_PATH),this.commandBuffer.push(c.MOVE_TO,v,f),this.commandBuffer.push(c.ARC,v,f,b,C,_,M,E),this.commandBuffer.push(c.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(c.SAVE),this},restore:function(){return this.commandBuffer.push(c.RESTORE),this},translateCanvas:function(v,f){return this.commandBuffer.push(c.TRANSLATE,v,f),this},scaleCanvas:function(v,f){return this.commandBuffer.push(c.SCALE,v,f),this},rotateCanvas:function(v){return this.commandBuffer.push(c.ROTATE,v),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(v,f,b){var C=this.scene.sys,_=C.game.renderer;f===void 0&&(f=C.scale.width),b===void 0&&(b=C.scale.height),g.TargetCamera.setScene(this.scene),g.TargetCamera.setViewport(0,0,f,b),g.TargetCamera.scrollX=this.x,g.TargetCamera.scrollY=this.y;var M,E,A={willReadFrequently:!0};if(typeof v=="string")if(C.textures.exists(v)){M=C.textures.get(v);var R=M.getSourceImage();R instanceof HTMLCanvasElement&&(E=R.getContext("2d",A))}else M=C.textures.createCanvas(v,f,b),E=M.getSourceImage().getContext("2d",A);else v instanceof HTMLCanvasElement&&(E=v.getContext("2d",A));return E&&(this.renderCanvas(_,this,g.TargetCamera,null,E,!1),M&&M.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});g.TargetCamera=new u,y.exports=g},32768:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(85592),x=i(20926),c=function(h,o,r,a,d,n){var p=o.commandBuffer,g=p.length,v=d||h.currentContext;if(!(g===0||!x(h,v,o,r,a))){r.addToRenderList(o);var f=1,b=1,C=0,_=0,M=1,E=0,A=0,R=0;v.beginPath();for(var L=0;L<g;++L){var Y=p[L];switch(Y){case u.ARC:v.arc(p[L+1],p[L+2],p[L+3],p[L+4],p[L+5],p[L+6]),L+=7;break;case u.LINE_STYLE:M=p[L+1],C=p[L+2],f=p[L+3],E=(C&16711680)>>>16,A=(C&65280)>>>8,R=C&255,v.strokeStyle="rgba("+E+","+A+","+R+","+f+")",v.lineWidth=M,L+=3;break;case u.FILL_STYLE:_=p[L+1],b=p[L+2],E=(_&16711680)>>>16,A=(_&65280)>>>8,R=_&255,v.fillStyle="rgba("+E+","+A+","+R+","+b+")",L+=2;break;case u.BEGIN_PATH:v.beginPath();break;case u.CLOSE_PATH:v.closePath();break;case u.FILL_PATH:n||v.fill();break;case u.STROKE_PATH:n||v.stroke();break;case u.FILL_RECT:n?v.rect(p[L+1],p[L+2],p[L+3],p[L+4]):v.fillRect(p[L+1],p[L+2],p[L+3],p[L+4]),L+=4;break;case u.FILL_TRIANGLE:v.beginPath(),v.moveTo(p[L+1],p[L+2]),v.lineTo(p[L+3],p[L+4]),v.lineTo(p[L+5],p[L+6]),v.closePath(),n||v.fill(),L+=6;break;case u.STROKE_TRIANGLE:v.beginPath(),v.moveTo(p[L+1],p[L+2]),v.lineTo(p[L+3],p[L+4]),v.lineTo(p[L+5],p[L+6]),v.closePath(),n||v.stroke(),L+=6;break;case u.LINE_TO:v.lineTo(p[L+1],p[L+2]),L+=2;break;case u.MOVE_TO:v.moveTo(p[L+1],p[L+2]),L+=2;break;case u.LINE_FX_TO:v.lineTo(p[L+1],p[L+2]),L+=5;break;case u.MOVE_FX_TO:v.moveTo(p[L+1],p[L+2]),L+=5;break;case u.SAVE:v.save();break;case u.RESTORE:v.restore();break;case u.TRANSLATE:v.translate(p[L+1],p[L+2]),L+=2;break;case u.SCALE:v.scale(p[L+1],p[L+2]),L+=2;break;case u.ROTATE:v.rotate(p[L+1]),L+=1;break;case u.GRADIENT_FILL_STYLE:L+=5;break;case u.GRADIENT_LINE_STYLE:L+=6;break}}v.restore()}};y.exports=c},87079:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(44603),x=i(43831);u.register("graphics",function(c,h){c===void 0&&(c={}),h!==void 0&&(c.add=h);var o=new x(this.scene,c);return c.add&&this.scene.sys.displayList.add(o),o})},1201:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43831),x=i(39429);x.register("graphics",function(c){return this.displayList.add(new u(this.scene,c))})},84503:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(77545),c=i(32768),c=i(32768),y.exports={renderWebGL:x,renderCanvas:c}},77545:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(85592),x=i(91296),c=i(61340),h=i(70554),o=function(p,g,v){this.x=p,this.y=g,this.width=v},r=function(p,g,v){this.points=[],this.pointsLength=1,this.points[0]=new o(p,g,v)},a=[],d=new c,n=function(p,g,v,f){if(g.commandBuffer.length!==0){v.addToRenderList(g);var b=p.pipelines.set(g.pipeline,g);p.pipelines.preBatch(g);for(var C=x(g,v,f).calc,_=d.loadIdentity(),M=g.commandBuffer,E=v.alpha*g.alpha,A=1,R=b.fillTint,L=b.strokeTint,Y=0,F=0,N=0,z=.01,U=Math.PI*2,q,Q=[],K=0,et=!0,H=null,J=h.getTintAppendFloatAlpha,X=0;X<M.length;X++)switch(q=M[X],q){case u.BEGIN_PATH:{Q.length=0,H=null,et=!0;break}case u.CLOSE_PATH:{et=!1,H&&H.points.length&&H.points.push(H.points[0]);break}case u.FILL_PATH:{for(K=0;K<Q.length;K++)b.batchFillPath(Q[K].points,_,C);break}case u.STROKE_PATH:{for(K=0;K<Q.length;K++)b.batchStrokePath(Q[K].points,A,et,_,C);break}case u.LINE_STYLE:{A=M[++X];var Z=M[++X],$=M[++X]*E,it=J(Z,$);L.TL=it,L.TR=it,L.BL=it,L.BR=it;break}case u.FILL_STYLE:{var nt=M[++X],at=M[++X]*E,ht=J(nt,at);R.TL=ht,R.TR=ht,R.BL=ht,R.BR=ht;break}case u.GRADIENT_FILL_STYLE:{var dt=M[++X]*E,vt=M[++X]*E,ft=M[++X]*E,gt=M[++X]*E;R.TL=J(M[++X],dt),R.TR=J(M[++X],vt),R.BL=J(M[++X],ft),R.BR=J(M[++X],gt);break}case u.GRADIENT_LINE_STYLE:{A=M[++X];var wt=M[++X]*E;L.TL=J(M[++X],wt),L.TR=J(M[++X],wt),L.BL=J(M[++X],wt),L.BR=J(M[++X],wt);break}case u.ARC:{var bt=0,xt=M[++X],Pt=M[++X],Ot=M[++X],Et=M[++X],Tt=M[++X],Mt=M[++X],kt=M[++X];for(Tt-=Et,Mt?Tt<-U?Tt=-U:Tt>0&&(Tt=-U+Tt%U):Tt>U?Tt=U:Tt<0&&(Tt=U+Tt%U),H===null&&(H=new r(xt+Math.cos(Et)*Ot,Pt+Math.sin(Et)*Ot,A),Q.push(H),bt+=z);bt<1+kt;)N=Tt*bt+Et,Y=xt+Math.cos(N)*Ot,F=Pt+Math.sin(N)*Ot,H.points.push(new o(Y,F,A)),bt+=z;N=Tt+Et,Y=xt+Math.cos(N)*Ot,F=Pt+Math.sin(N)*Ot,H.points.push(new o(Y,F,A));break}case u.FILL_RECT:{b.batchFillRect(M[++X],M[++X],M[++X],M[++X],_,C);break}case u.FILL_TRIANGLE:{b.batchFillTriangle(M[++X],M[++X],M[++X],M[++X],M[++X],M[++X],_,C);break}case u.STROKE_TRIANGLE:{b.batchStrokeTriangle(M[++X],M[++X],M[++X],M[++X],M[++X],M[++X],A,_,C);break}case u.LINE_TO:{H!==null?H.points.push(new o(M[++X],M[++X],A)):(H=new r(M[++X],M[++X],A),Q.push(H));break}case u.MOVE_TO:{H=new r(M[++X],M[++X],A),Q.push(H);break}case u.SAVE:{a.push(_.copyToArray());break}case u.RESTORE:{_.copyFromArray(a.pop());break}case u.TRANSLATE:{xt=M[++X],Pt=M[++X],_.translate(xt,Pt);break}case u.SCALE:{xt=M[++X],Pt=M[++X],_.scale(xt,Pt);break}case u.ROTATE:{_.rotate(M[++X]);break}}p.pipelines.postBatch(g)}};y.exports=n},26479:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(61061),x=i(83419),c=i(51708),h=i(50792),o=i(46710),r=i(95540),a=i(35154),d=i(97022),n=i(41212),p=i(88492),g=i(35072),v=i(68287),f=new x({Extends:h,initialize:function(b,C,_){h.call(this),_?C&&!Array.isArray(C)&&(C=[C]):Array.isArray(C)?n(C[0])&&(_=C,C=null):n(C)&&(_=C,C=null),this.scene=b,this.children=new g,this.isParent=!0,this.type="Group",this.classType=r(_,"classType",v),this.name=r(_,"name",""),this.active=r(_,"active",!0),this.maxSize=r(_,"maxSize",-1),this.defaultKey=r(_,"defaultKey",null),this.defaultFrame=r(_,"defaultFrame",null),this.runChildUpdate=r(_,"runChildUpdate",!1),this.createCallback=r(_,"createCallback",null),this.removeCallback=r(_,"removeCallback",null),this.createMultipleCallback=r(_,"createMultipleCallback",null),this.internalCreateCallback=r(_,"internalCreateCallback",null),this.internalRemoveCallback=r(_,"internalRemoveCallback",null),C&&this.addMultiple(C),_&&this.createMultiple(_),this.on(c.ADDED_TO_SCENE,this.addedToScene,this),this.on(c.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(b,C,_,M,E,A){if(b===void 0&&(b=0),C===void 0&&(C=0),_===void 0&&(_=this.defaultKey),M===void 0&&(M=this.defaultFrame),E===void 0&&(E=!0),A===void 0&&(A=!0),this.isFull())return null;var R=new this.classType(this.scene,b,C,_,M);return R.addToDisplayList(this.scene.sys.displayList),R.addToUpdateList(),R.visible=E,R.setActive(A),this.add(R),R},createMultiple:function(b){if(this.isFull())return[];Array.isArray(b)||(b=[b]);var C=[];if(b[0].key)for(var _=0;_<b.length;_++){var M=this.createFromConfig(b[_]);C=C.concat(M)}return C},createFromConfig:function(b){if(this.isFull())return[];this.classType=r(b,"classType",this.classType);var C=r(b,"key",void 0),_=r(b,"frame",null),M=r(b,"visible",!0),E=r(b,"active",!0),A=[];if(C===void 0)return A;Array.isArray(C)||(C=[C]),Array.isArray(_)||(_=[_]);var R=r(b,"repeat",0),L=r(b,"randomKey",!1),Y=r(b,"randomFrame",!1),F=r(b,"yoyo",!1),N=r(b,"quantity",!1),z=r(b,"frameQuantity",1),U=r(b,"max",0),q=p(C,_,{max:U,qty:N||z,random:L,randomB:Y,repeat:R,yoyo:F});b.createCallback&&(this.createCallback=b.createCallback),b.removeCallback&&(this.removeCallback=b.removeCallback),b.internalCreateCallback&&(this.internalCreateCallback=b.internalCreateCallback),b.internalRemoveCallback&&(this.internalRemoveCallback=b.internalRemoveCallback);for(var Q=0;Q<q.length;Q++){var K=this.create(0,0,q[Q].a,q[Q].b,M,E);if(!K)break;A.push(K)}if(d(b,"setXY")){var et=a(b,"setXY.x",0),H=a(b,"setXY.y",0),J=a(b,"setXY.stepX",0),X=a(b,"setXY.stepY",0);u.SetXY(A,et,H,J,X)}if(d(b,"setRotation")){var Z=a(b,"setRotation.value",0),$=a(b,"setRotation.step",0);u.SetRotation(A,Z,$)}if(d(b,"setScale")){var it=a(b,"setScale.x",1),nt=a(b,"setScale.y",it),at=a(b,"setScale.stepX",0),ht=a(b,"setScale.stepY",0);u.SetScale(A,it,nt,at,ht)}if(d(b,"setOrigin")){var dt=a(b,"setOrigin.x",.5),vt=a(b,"setOrigin.y",dt),ft=a(b,"setOrigin.stepX",0),gt=a(b,"setOrigin.stepY",0);u.SetOrigin(A,dt,vt,ft,gt)}if(d(b,"setAlpha")){var wt=a(b,"setAlpha.value",1),bt=a(b,"setAlpha.step",0);u.SetAlpha(A,wt,bt)}if(d(b,"setDepth")){var xt=a(b,"setDepth.value",0),Pt=a(b,"setDepth.step",0);u.SetDepth(A,xt,Pt)}if(d(b,"setScrollFactor")){var Ot=a(b,"setScrollFactor.x",1),Et=a(b,"setScrollFactor.y",Ot),Tt=a(b,"setScrollFactor.stepX",0),Mt=a(b,"setScrollFactor.stepY",0);u.SetScrollFactor(A,Ot,Et,Tt,Mt)}var kt=r(b,"hitArea",null),Gt=r(b,"hitAreaCallback",null);kt&&u.SetHitArea(A,kt,Gt);var qt=r(b,"gridAlign",!1);return qt&&u.GridAlign(A,qt),this.createMultipleCallback&&this.createMultipleCallback.call(this,A),A},preUpdate:function(b,C){if(!(!this.runChildUpdate||this.children.size===0))for(var _=this.children.entries.slice(),M=0;M<_.length;M++){var E=_[M];E.active&&E.update(b,C)}},add:function(b,C){return C===void 0&&(C=!1),this.isFull()?this:(this.children.set(b),this.internalCreateCallback&&this.internalCreateCallback.call(this,b),this.createCallback&&this.createCallback.call(this,b),C&&(b.addToDisplayList(this.scene.sys.displayList),b.addToUpdateList()),b.on(c.DESTROY,this.remove,this),this)},addMultiple:function(b,C){if(C===void 0&&(C=!1),Array.isArray(b))for(var _=0;_<b.length;_++)this.add(b[_],C);return this},remove:function(b,C,_){return C===void 0&&(C=!1),_===void 0&&(_=!1),this.children.contains(b)?(this.children.delete(b),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,b),this.removeCallback&&this.removeCallback.call(this,b),b.off(c.DESTROY,this.remove,this),_?b.destroy():C&&(b.removeFromDisplayList(),b.removeFromUpdateList()),this):this},clear:function(b,C){b===void 0&&(b=!1),C===void 0&&(C=!1);for(var _=this.children,M=0;M<_.size;M++){var E=_.entries[M];E.off(c.DESTROY,this.remove,this),C?E.destroy():b&&(E.removeFromDisplayList(),E.removeFromUpdateList())}return this.children.clear(),this},contains:function(b){return this.children.contains(b)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(b,C,_,M){return o(this.children.entries,b,C,_,M)},getFirst:function(b,C,_,M,E,A,R){return this.getHandler(!0,1,b,C,_,M,E,A,R)},getFirstNth:function(b,C,_,M,E,A,R,L){return this.getHandler(!0,b,C,_,M,E,A,R,L)},getLast:function(b,C,_,M,E,A,R){return this.getHandler(!1,1,b,C,_,M,E,A,R)},getLastNth:function(b,C,_,M,E,A,R,L){return this.getHandler(!1,b,C,_,M,E,A,R,L)},getHandler:function(b,C,_,M,E,A,R,L,Y){_===void 0&&(_=!1),M===void 0&&(M=!1);var F,N,z=0,U=this.children.entries;if(b)for(N=0;N<U.length;N++)if(F=U[N],F.active===_){if(z++,z===C)break}else F=null;else for(N=U.length-1;N>=0;N--)if(F=U[N],F.active===_){if(z++,z===C)break}else F=null;return F?(typeof E=="number"&&(F.x=E),typeof A=="number"&&(F.y=A),F):M?this.create(E,A,R,L,Y):null},get:function(b,C,_,M,E){return this.getFirst(!1,!0,b,C,_,M,E)},getFirstAlive:function(b,C,_,M,E,A){return this.getFirst(!0,b,C,_,M,E,A)},getFirstDead:function(b,C,_,M,E,A){return this.getFirst(!1,b,C,_,M,E,A)},playAnimation:function(b,C){return u.PlayAnimation(this.children.entries,b,C),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(b){b===void 0&&(b=!0);for(var C=0,_=0;_<this.children.size;_++)this.children.entries[_].active===b&&C++;return C},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var b=this.getTotalUsed(),C=this.maxSize===-1?999999999999:this.maxSize;return C-b},setActive:function(b){return this.active=b,this},setName:function(b){return this.name=b,this},propertyValueSet:function(b,C,_,M,E){return u.PropertyValueSet(this.children.entries,b,C,_,M,E),this},propertyValueInc:function(b,C,_,M,E){return u.PropertyValueInc(this.children.entries,b,C,_,M,E),this},setX:function(b,C){return u.SetX(this.children.entries,b,C),this},setY:function(b,C){return u.SetY(this.children.entries,b,C),this},setXY:function(b,C,_,M){return u.SetXY(this.children.entries,b,C,_,M),this},incX:function(b,C){return u.IncX(this.children.entries,b,C),this},incY:function(b,C){return u.IncY(this.children.entries,b,C),this},incXY:function(b,C,_,M){return u.IncXY(this.children.entries,b,C,_,M),this},shiftPosition:function(b,C,_){return u.ShiftPosition(this.children.entries,b,C,_),this},angle:function(b,C){return u.Angle(this.children.entries,b,C),this},rotate:function(b,C){return u.Rotate(this.children.entries,b,C),this},rotateAround:function(b,C){return u.RotateAround(this.children.entries,b,C),this},rotateAroundDistance:function(b,C,_){return u.RotateAroundDistance(this.children.entries,b,C,_),this},setAlpha:function(b,C){return u.SetAlpha(this.children.entries,b,C),this},setTint:function(b,C,_,M){return u.SetTint(this.children.entries,b,C,_,M),this},setOrigin:function(b,C,_,M){return u.SetOrigin(this.children.entries,b,C,_,M),this},scaleX:function(b,C){return u.ScaleX(this.children.entries,b,C),this},scaleY:function(b,C){return u.ScaleY(this.children.entries,b,C),this},scaleXY:function(b,C,_,M){return u.ScaleXY(this.children.entries,b,C,_,M),this},setDepth:function(b,C){return u.SetDepth(this.children.entries,b,C),this},setBlendMode:function(b){return u.SetBlendMode(this.children.entries,b),this},setHitArea:function(b,C){return u.SetHitArea(this.children.entries,b,C),this},shuffle:function(){return u.Shuffle(this.children.entries),this},kill:function(b){this.children.contains(b)&&b.setActive(!1)},killAndHide:function(b){this.children.contains(b)&&(b.setActive(!1),b.setVisible(!1))},setVisible:function(b,C,_){return u.SetVisible(this.children.entries,b,C,_),this},toggleVisible:function(){return u.ToggleVisible(this.children.entries),this},destroy:function(b,C){b===void 0&&(b=!1),C===void 0&&(C=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(c.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(C,b),this.scene=void 0,this.children=void 0)}});y.exports=f},94975:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(44603),x=i(26479);u.register("group",function(c){return new x(this.scene,null,c)})},3385:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26479),x=i(39429);x.register("group",function(c,h){return this.updateList.add(new u(this.scene,c,h))})},88571:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(31401),c=i(95643),h=i(59819),o=new u({Extends:c,Mixins:[x.Alpha,x.BlendMode,x.Depth,x.Flip,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Size,x.TextureCrop,x.Tint,x.Transform,x.Visible,h],initialize:function(r,a,d,n,p){c.call(this,r,"Image"),this._crop=this.resetCropObject(),this.setTexture(n,p),this.setPosition(a,d),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});y.exports=o},40652:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){x.addToRenderList(u),i.batchSprite(u,u.frame,x,c)};y.exports=P},82459:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(44603),c=i(23568),h=i(88571);x.register("image",function(o,r){o===void 0&&(o={});var a=c(o,"key",null),d=c(o,"frame",null),n=new h(this.scene,0,0,a,d);return r!==void 0&&(o.add=r),u(this.scene,n,o),n})},2117:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(88571),x=i(39429);x.register("image",function(c,h,o,r){return this.displayList.add(new u(this.scene,c,h,o,r))})},59819:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(99517),c=i(40652),y.exports={renderWebGL:x,renderCanvas:c}},99517:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){x.addToRenderList(u),this.pipeline.batchSprite(u,x,c)};y.exports=P},77856:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u={Events:i(51708),DisplayList:i(8050),GameObjectCreator:i(44603),GameObjectFactory:i(39429),UpdateList:i(45027),Components:i(31401),GetCalcMatrix:i(91296),BuildGameObject:i(25305),BuildGameObjectAnimation:i(13059),GameObject:i(95643),BitmapText:i(22186),Blitter:i(6107),Bob:i(46590),Container:i(31559),DOMElement:i(3069),DynamicBitmapText:i(2638),Extern:i(42421),Graphics:i(43831),Group:i(26479),Image:i(88571),Layer:i(93595),Particles:i(18404),PathFollower:i(1159),RenderTexture:i(591),RetroFont:i(196),Rope:i(77757),Sprite:i(68287),Text:i(50171),GetTextSize:i(14220),MeasureText:i(79557),TextStyle:i(35762),TileSprite:i(20839),Zone:i(41481),Video:i(18471),Shape:i(17803),Arc:i(23629),Curve:i(89),Ellipse:i(19921),Grid:i(30479),IsoBox:i(61475),IsoTriangle:i(16933),Line:i(57847),Polygon:i(24949),Rectangle:i(74561),Star:i(55911),Triangle:i(36931),Factories:{Blitter:i(12709),Container:i(24961),DOMElement:i(2611),DynamicBitmapText:i(72566),Extern:i(56315),Graphics:i(1201),Group:i(3385),Image:i(2117),Layer:i(20005),Particles:i(676),PathFollower:i(90145),RenderTexture:i(60505),Rope:i(96819),Sprite:i(46409),StaticBitmapText:i(34914),Text:i(68005),TileSprite:i(91681),Zone:i(84175),Video:i(89025),Arc:i(42563),Curve:i(40511),Ellipse:i(1543),Grid:i(34137),IsoBox:i(3933),IsoTriangle:i(49803),Line:i(2481),Polygon:i(64827),Rectangle:i(87959),Star:i(93697),Triangle:i(45245)},Creators:{Blitter:i(9403),Container:i(77143),DynamicBitmapText:i(11164),Graphics:i(87079),Group:i(94975),Image:i(82459),Layer:i(25179),Particles:i(92730),RenderTexture:i(34495),Rope:i(26209),Sprite:i(15567),StaticBitmapText:i(57336),Text:i(71259),TileSprite:i(14167),Zone:i(95261),Video:i(11511)}};u.Shader=i(20071),u.Mesh=i(4703),u.NineSlice=i(28103),u.PointLight=i(80321),u.Plane=i(33663),u.Factories.Shader=i(74177),u.Factories.Mesh=i(9225),u.Factories.NineSlice=i(47521),u.Factories.PointLight=i(71255),u.Factories.Plane=i(30985),u.Creators.Shader=i(54935),u.Creators.Mesh=i(20527),u.Creators.NineSlice=i(28279),u.Creators.PointLight=i(39829),u.Creators.Plane=i(56015),u.Light=i(41432),u.LightsManager=i(61356),u.LightsPlugin=i(88992),y.exports=u},93595:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(10312),x=i(83419),c=i(31401),h=i(53774),o=i(45893),r=i(50792),a=i(51708),d=i(73162),n=i(33963),p=i(44594),g=i(19186),v=new x({Extends:d,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.Mask,c.PostPipeline,c.Visible,r,n],initialize:function(f,b){d.call(this,f),r.call(this),this.scene=f,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=f.sys,this.events=f.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(u.SKIP_CHECK),b&&this.add(b),f.sys.queueDepthSort()},setActive:function(f){return this.active=f,this},setName:function(f){return this.name=f,this},setState:function(f){return this.state=f,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(f,b){return this.data||(this.data=new o(this)),this.data.set(f,b),this},incData:function(f,b){return this.data||(this.data=new o(this)),this.data.inc(f,b),this},toggleData:function(f){return this.data||(this.data=new o(this)),this.data.toggle(f),this},getData:function(f){return this.data||(this.data=new o(this)),this.data.get(f)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return h(this)},willRender:function(f){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&f.id)},getIndexList:function(){for(var f=this,b=this.parentContainer,C=[];b&&(C.unshift(b.getIndex(f)),f=b,b.parentContainer);)b=b.parentContainer;return C.unshift(this.displayList.getIndex(f)),C},addChildCallback:function(f){var b=f.displayList;b&&b!==this&&f.removeFromDisplayList(),f.displayList||(this.queueDepthSort(),f.displayList=this,f.emit(a.ADDED_TO_SCENE,f,this.scene),this.events.emit(p.ADDED_TO_SCENE,f,this.scene))},removeChildCallback:function(f){this.queueDepthSort(),f.displayList=null,f.emit(a.REMOVED_FROM_SCENE,f,this.scene),this.events.emit(p.REMOVED_FROM_SCENE,f,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(g(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(f,b){return f._depth-b._depth},getChildren:function(){return this.list},addToDisplayList:function(f){return f===void 0&&(f=this.scene.sys.displayList),this.displayList&&this.displayList!==f&&this.removeFromDisplayList(),f.exists(this)||(this.displayList=f,f.add(this,!0),f.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),f.events.emit(p.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var f=this.displayList||this.scene.sys.displayList;return f.exists(this)&&(f.remove(this,!0),f.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),f.events.emit(p.REMOVED_FROM_SCENE,this,this.scene)),this},getDisplayList:function(){var f=null;return this.parentContainer?f=this.parentContainer.list:this.displayList&&(f=this.displayList.list),f},destroy:function(f){if(!(!this.scene||this.ignoreDestroy)){this.emit(a.DESTROY,this);for(var b=this.list;b.length;)b[0].destroy(f);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});y.exports=v},2956:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=u.list;if(c.length!==0){u.depthSort();var h=u.blendMode!==-1;h||i.setBlendMode(0);var o=u._alpha;u.mask&&u.mask.preRenderCanvas(i,null,x);for(var r=0;r<c.length;r++){var a=c[r];if(a.willRender(x)){var d=a.alpha;!h&&a.blendMode!==i.currentBlendMode&&i.setBlendMode(a.blendMode),a.setAlpha(d*o),a.renderCanvas(i,a,x),a.setAlpha(d)}}u.mask&&u.mask.postRenderCanvas(i)}};y.exports=P},25179:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(93595),c=i(44603),h=i(23568);c.register("layer",function(o,r){o===void 0&&(o={});var a=h(o,"children",null),d=new x(this.scene,a);return r!==void 0&&(o.add=r),u(this.scene,d,o),d})},20005:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(93595),x=i(39429);x.register("layer",function(c){return this.displayList.add(new u(this.scene,c))})},33963:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(15869),c=i(2956),y.exports={renderWebGL:x,renderCanvas:c}},15869:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=u.list,h=c.length;if(h!==0){u.depthSort(),i.pipelines.preBatch(u);var o=u.blendMode!==-1;o||i.setBlendMode(0);for(var r=u.alpha,a=0;a<h;a++){var d=c[a];if(d.willRender(x)){var n,p,g,v;if(d.alphaTopLeft!==void 0)n=d.alphaTopLeft,p=d.alphaTopRight,g=d.alphaBottomLeft,v=d.alphaBottomRight;else{var f=d.alpha;n=f,p=f,g=f,v=f}!o&&d.blendMode!==i.currentBlendMode&&i.setBlendMode(d.blendMode);var b=d.mask;b&&b.preRenderWebGL(i,d,x);var C=d.type;C!==i.currentType&&(i.newType=!0,i.currentType=C),i.nextTypeMatch=a<h-1?c[a+1].type===i.currentType:!1,d.setAlpha(n*r,p*r,g*r,v*r),d.renderWebGL(i,d,x),d.setAlpha(n,p,g,v),b&&b.postRenderWebGL(i,x),i.newType=!1}}i.pipelines.postBatch(u)}};y.exports=P},41432:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(96503),x=i(83419),c=i(31401),h=i(51767),o=i(70554),r=new x({Extends:u,Mixins:[c.Origin,c.ScrollFactor,c.Visible],initialize:function(a,d,n,p,g,v,f){u.call(this,a,d,n),this.color=new h(p,g,v),this.intensity=f,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(n)},displayWidth:{get:function(){return this.diameter},set:function(a){this.diameter=a}},displayHeight:{get:function(){return this.diameter},set:function(a){this.diameter=a}},width:{get:function(){return this.diameter},set:function(a){this.diameter=a}},height:{get:function(){return this.diameter},set:function(a){this.diameter=a}},willRender:function(a){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&a.id)},setColor:function(a){var d=o.getFloatsFromUintRGB(a);return this.color.set(d[0],d[1],d[2]),this},setIntensity:function(a){return this.intensity=a,this},setRadius:function(a){return this.radius=a,this}});r.RENDER_MASK=15,y.exports=r},61356:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(81491),x=i(83419),c=i(20339),h=i(41432),o=i(80321),r=i(51767),a=i(19133),d=i(19186),n=i(70554),p=new x({initialize:function(){this.lights=[],this.ambientColor=new r(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(g,v,f,b,C,_){return this.systems.displayList.add(new o(this.scene,g,v,f,b,C,_))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(g){for(var v=this.lights,f=g.worldView,b=[],C=0;C<v.length;C++){var _=v[C];_.willRender(g)&&u(_,f)&&b.push({light:_,distance:c(_.x,_.y,f.centerX,f.centerY)})}return b.length>this.maxLights&&(d(b,this.sortByDistance),b=b.slice(0,this.maxLights)),this.visibleLights=b.length,b},sortByDistance:function(g,v){return g.distance>=v.distance},setAmbientColor:function(g){var v=n.getFloatsFromUintRGB(g);return this.ambientColor.set(v[0],v[1],v[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(g,v,f,b,C){g===void 0&&(g=0),v===void 0&&(v=0),f===void 0&&(f=128),b===void 0&&(b=16777215),C===void 0&&(C=1);var _=n.getFloatsFromUintRGB(b),M=new h(g,v,f,_[0],_[1],_[2],C);return this.lights.push(M),M},removeLight:function(g){var v=this.lights.indexOf(g);return v>=0&&a(this.lights,v),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});y.exports=p},88992:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(61356),c=i(37277),h=i(44594),o=new u({Extends:x,initialize:function(r){this.scene=r,this.systems=r.sys,r.sys.settings.isBooted||r.sys.events.once(h.BOOT,this.boot,this),x.call(this)},boot:function(){var r=this.systems.events;r.on(h.SHUTDOWN,this.shutdown,this),r.on(h.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});c.register("LightsPlugin",o,"lights"),y.exports=o},4703:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(31401),c=i(39506),h=i(83997),o=i(95643),r=i(34684),a=i(92515),d=i(91296),n=i(37867),p=i(29807),g=i(43396),v=i(19186),f=i(25836),b=i(39318),C=new u({Extends:o,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Size,x.Texture,x.Transform,x.Visible,p],initialize:function(_,M,E,A,R,L,Y,F,N,z,U,q){M===void 0&&(M=0),E===void 0&&(E=0),A===void 0&&(A="__WHITE"),o.call(this,_,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new f,this.modelScale=new f(1,1,1),this.modelRotation=new f,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new n,this.viewPosition=new f,this.viewMatrix=new n,this.projectionMatrix=new n,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var Q=_.sys.renderer;this.setPosition(M,E),this.setTexture(A,R),this.setSize(Q.width,Q.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(Q.width,Q.height),L&&this.addVertices(L,Y,F,N,z,U,q)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(_){return this.viewPosition.addScale(f.LEFT,_),this.dirtyCache[10]=1,this},panY:function(_){return this.viewPosition.y+=f.DOWN.y*_,this.dirtyCache[10]=1,this},panZ:function(_){return this.viewPosition.z+=_,this.dirtyCache[10]=1,this},setPerspective:function(_,M,E,A,R){return E===void 0&&(E=45),A===void 0&&(A=.01),R===void 0&&(R=1e3),this.fov=E,this.projectionMatrix.perspective(c(E),_/M,A,R),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(_,M,E,A){return _===void 0&&(_=this.scene.sys.renderer.getAspectRatio()),M===void 0&&(M=1),E===void 0&&(E=-1e3),A===void 0&&(A=1e3),this.fov=0,this.projectionMatrix.ortho(-_,_,-M,M,E,A),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(_){_.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(_,M,E,A,R,L,Y,F,N){var z=this.scene.sys.cache.obj.get(_),U;return z&&(U=r(z,this,M,E,A,R,L,Y,F,N)),(!U||U.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",_),this},sortByDepth:function(_,M){return _.depth-M.depth},depthSort:function(){return v(this.faces,this.sortByDepth),this},addVertex:function(_,M,E,A,R,L,Y){var F=new b(_,M,E,A,R,L,Y);return this.vertices.push(F),F},addFace:function(_,M,E){var A=new h(_,M,E);return this.faces.push(A),this.dirtyCache[9]=-1,A},addVertices:function(_,M,E,A,R,L,Y){var F=a(_,M,E,A,R,L,Y);return F?(this.faces=this.faces.concat(F.faces),this.vertices=this.vertices.concat(F.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(_){return this.faces[_]},hasFaceAt:function(_,M,E){E===void 0&&(E=this.scene.sys.cameras.main);for(var A=d(this,E).calc,R=this.faces,L=0;L<R.length;L++){var Y=R[L];if(Y.contains(_,M,A))return!0}return!1},getFaceAt:function(_,M,E){E===void 0&&(E=this.scene.sys.cameras.main);for(var A=d(this,E).calc,R=this.faces,L=[],Y=0;Y<R.length;Y++){var F=R[Y];F.contains(_,M,A)&&L.push(F)}return v(L,this.sortByDepth)},setDebug:function(_,M){return this.debugGraphic=_,!_&&!M?this.debugCallback=null:M?this.debugCallback=M:this.debugCallback=this.renderDebug,this},isDirty:function(){var _=this.modelPosition,M=this.modelRotation,E=this.modelScale,A=this.dirtyCache,R=_.x,L=_.y,Y=_.z,F=M.x,N=M.y,z=M.z,U=E.x,q=E.y,Q=E.z,K=this.getFaceCount(),et=A[0],H=A[1],J=A[2],X=A[3],Z=A[4],$=A[5],it=A[6],nt=A[7],at=A[8],ht=A[9];return A[0]=R,A[1]=L,A[2]=Y,A[3]=F,A[4]=N,A[5]=z,A[6]=U,A[7]=q,A[8]=Q,A[9]=K,et!==R||H!==L||J!==Y||X!==F||Z!==N||$!==z||it!==U||nt!==q||at!==Q||ht!==K},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var _=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!_[10]&&!this.isDirty())){var M=this.width,E=this.height,A=this.viewMatrix,R=this.viewPosition;_[10]&&(A.identity(),A.translate(R),A.invert(),_[10]=0);var L=this.transformMatrix;L.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var Y=R.z,F=this.faces,N=0;N<F.length;N++)F[N].transformCoordinatesLocal(L,M,E,Y);this.depthSort()}},renderDebug:function(_,M){for(var E=_.debugGraphic,A=0;A<M.length;A++){var R=M[A],L=R.vertex1.tx,Y=R.vertex1.ty,F=R.vertex2.tx,N=R.vertex2.ty,z=R.vertex3.tx,U=R.vertex3.ty;E.strokeTriangle(L,Y,F,N,z,U)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(_){_===void 0&&(_={});var M=function(E,A,R){for(var L=this.faces,Y=0;Y<L.length;Y++){var F=L[Y];if(F.contains(A,R))return!0}return!1}.bind(this);return this.scene.sys.input.enable(this,_,M),this},setTint:function(_){_===void 0&&(_=16777215);for(var M=this.vertices,E=0;E<M.length;E++)M[E].color=_;return this},uvScroll:function(_,M){for(var E=this.faces,A=0;A<E.length;A++)E[A].scrollUV(_,M);return this},uvScale:function(_,M){for(var E=this.faces,A=0;A<E.length;A++)E[A].scaleUV(_,M);return this},tint:{set:function(_){this.setTint(_)}},rotateX:{get:function(){return g(this.modelRotation.x)},set:function(_){this.modelRotation.x=c(_)}},rotateY:{get:function(){return g(this.modelRotation.y)},set:function(_){this.modelRotation.y=c(_)}},rotateZ:{get:function(){return g(this.modelRotation.z)},set:function(_){this.modelRotation.z=c(_)}}});y.exports=C},36488:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(){};y.exports=P},20527:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(44603),c=i(23568),h=i(35154),o=i(4703);x.register("mesh",function(r,a){r===void 0&&(r={});var d=c(r,"key",null),n=c(r,"frame",null),p=h(r,"vertices",[]),g=h(r,"uvs",[]),v=h(r,"indicies",[]),f=h(r,"containsZ",!1),b=h(r,"normals",[]),C=h(r,"colors",16777215),_=h(r,"alphas",1),M=new o(this.scene,0,0,d,n,p,g,v,f,b,C,_);return a!==void 0&&(r.add=a),u(this.scene,M,r),M})},9225:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(4703),x=i(39429);x.register("mesh",function(c,h,o,r,a,d,n,p,g,v,f){return this.displayList.add(new u(this.scene,c,h,o,r,a,d,n,p,g,v,f))})},29807:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(48833),c=i(36488),y.exports={renderWebGL:x,renderCanvas:c}},48833:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=function(c,h,o,r){var a=h.faces,d=a.length;if(d!==0){o.addToRenderList(h);var n=c.pipelines.set(h.pipeline,h),p=u(h,o,r).calc;c.pipelines.preBatch(h);for(var g=n.setGameObject(h),v=n.vertexViewF32,f=n.vertexViewU32,b=n.vertexCount*n.currentShader.vertexComponentCount-1,C=h.tintFill,_=[],M=h.debugCallback,E=p.a,A=p.b,R=p.c,L=p.d,Y=p.e,F=p.f,N=h.viewPosition.z,z=h.hideCCW,U=o.roundPixels,q=o.alpha*h.alpha,Q=0,K=0;K<d;K++){var et=a[K];et.isInView(o,z,N,q,E,A,R,L,Y,F,U)&&(n.shouldFlush(3)&&(n.flush(),g=n.setGameObject(h),b=n.vertexCount*n.currentShader.vertexComponentCount-1),b=et.load(v,f,b,g,C),Q++,n.vertexCount+=3,n.currentBatch.count=n.vertexCount-n.currentBatch.start,M&&_.push(et))}h.totalFrame+=Q,M&&M.call(h,h,_),c.pipelines.postBatch(h)}};y.exports=x},28103:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(31401),c=i(95643),h=i(78023),o=i(39318),r=new u({Extends:c,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Texture,x.Transform,x.Visible,h],initialize:function(a,d,n,p,g,v,f,b,C,_,M){c.call(this,a,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var E=a.textures.getFrame(p,g);this.is3Slice=!_&&!M,E&&E.scale9&&(this.is3Slice=E.is3Slice);for(var A=this.is3Slice?18:54,R=0;R<A;R++)this.vertices.push(new o);this.setPosition(d,n),this.setTexture(p,g),this.setSlices(v,f,b,C,_,M,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(a,d,n,p,g,v,f){n===void 0&&(n=10),p===void 0&&(p=10),g===void 0&&(g=0),v===void 0&&(v=0),f===void 0&&(f=!1);var b=this.frame,C=!1;if(this.is3Slice&&f&&g!==0&&v!==0&&(C=!0),C)console.warn("Cannot change 9 slice to 3 slice");else{if(b&&b.scale9&&!f){var _=b.data.scale9Borders,M=_.x,E=_.y;n=M,p=b.width-_.w-M,g=E,v=b.height-_.h-E,a===void 0&&(a=b.width),d===void 0&&(d=b.height)}else a===void 0&&(a=256),d===void 0&&(d=256);this._width=a,this._height=d,this.leftWidth=n,this.rightWidth=p,this.topHeight=g,this.bottomHeight=v,this.is3Slice&&(d=b.height,this._height=d,this.topHeight=d,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var a=this.leftWidth,d=this.rightWidth,n=this.topHeight,p=this.bottomHeight,g=this.frame.width,v=this.frame.height;this.updateQuadUVs(0,0,0,a/g,n/v),this.updateQuadUVs(6,a/g,0,1-d/g,n/v),this.updateQuadUVs(12,1-d/g,0,1,n/v),this.is3Slice||(this.updateQuadUVs(18,0,n/v,a/g,1-p/v),this.updateQuadUVs(24,a/g,n/v,1-d/g,1-p/v),this.updateQuadUVs(30,1-d/g,n/v,1,1-p/v),this.updateQuadUVs(36,0,1-p/v,a/g,1),this.updateQuadUVs(42,a/g,1-p/v,1-d/g,1),this.updateQuadUVs(48,1-d/g,1-p/v,1,1))},updateVertices:function(){var a=this.leftWidth,d=this.rightWidth,n=this.topHeight,p=this.bottomHeight,g=this.width,v=this.height;this.updateQuad(0,-.5,.5,-.5+a/g,.5-n/v),this.updateQuad(6,-.5+a/g,.5,.5-d/g,.5-n/v),this.updateQuad(12,.5-d/g,.5,.5,.5-n/v),this.is3Slice||(this.updateQuad(18,-.5,.5-n/v,-.5+a/g,-.5+p/v),this.updateQuad(24,-.5+a/g,.5-n/v,.5-d/g,-.5+p/v),this.updateQuad(30,.5-d/g,.5-n/v,.5,-.5+p/v),this.updateQuad(36,-.5,-.5+p/v,-.5+a/g,-.5),this.updateQuad(42,-.5+a/g,-.5+p/v,.5-d/g,-.5),this.updateQuad(48,.5-d/g,-.5+p/v,.5,-.5))},updateQuad:function(a,d,n,p,g){var v=this.width,f=this.height,b=this.originX,C=this.originY,_=this.vertices;_[a+0].resize(d,n,v,f,b,C),_[a+1].resize(d,g,v,f,b,C),_[a+2].resize(p,n,v,f,b,C),_[a+3].resize(d,g,v,f,b,C),_[a+4].resize(p,g,v,f,b,C),_[a+5].resize(p,n,v,f,b,C)},updateQuadUVs:function(a,d,n,p,g){var v=this.vertices,f=this.frame,b=f.u0,C=f.v0,_=f.u1,M=f.v1;if(b!==0||_!==1){var E=_-b;d=b+d*E,p=b+p*E}if(C!==0||M!==1){var A=M-C;n=C+n*A,g=C+g*A}v[a+0].setUVs(d,n),v[a+1].setUVs(d,g),v[a+2].setUVs(p,n),v[a+3].setUVs(d,g),v[a+4].setUVs(p,g),v[a+5].setUVs(p,n)},clearTint:function(){return this.setTint(16777215),this},setTint:function(a){return a===void 0&&(a=16777215),this.tint=a,this.tintFill=!1,this},setTintFill:function(a){return this.setTint(a),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(a){this._width=Math.max(a,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(a){this.is3Slice||(this._height=Math.max(a,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(a){this.scaleX=a/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(a){this.scaleY=a/this.height}},setSize:function(a,d){this.width=a,this.height=d,this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=this.width,n.hitArea.height=this.height),this},setDisplaySize:function(a,d){return this.displayWidth=a,this.displayHeight=d,this},originX:{get:function(){return this._originX},set:function(a){this._originX=a,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(a){this._originY=a,this.updateVertices()}},setOrigin:function(a,d){return a===void 0&&(a=.5),d===void 0&&(d=a),this._originX=a,this._originY=d,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var a=this.frame.height;this._height=a,this.topHeight=a,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});y.exports=r},28279:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(44603),c=i(23568),h=i(35154),o=i(28103);x.register("nineslice",function(r,a){r===void 0&&(r={});var d=c(r,"key",null),n=c(r,"frame",null),p=h(r,"width",256),g=h(r,"height",256),v=h(r,"leftWidth",10),f=h(r,"rightWidth",10),b=h(r,"topHeight",0),C=h(r,"bottomHeight",0),_=new o(this.scene,0,0,d,n,p,g,v,f,b,C);return a!==void 0&&(r.add=a),u(this.scene,_,r),_})},47521:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(28103),x=i(39429);x.register("nineslice",function(c,h,o,r,a,d,n,p,g,v){return this.displayList.add(new u(this.scene,c,h,o,r,a,d,n,p,g,v))})},78023:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(52230),y.exports={renderWebGL:x,renderCanvas:c}},52230:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=i(70554),c=function(h,o,r,a){var d=o.vertices,n=d.length;if(n!==0){r.addToRenderList(o);var p=h.pipelines.set(o.pipeline,o),g=u(o,r,a,!1).calc;h.pipelines.preBatch(o);var v=p.setGameObject(o),f=p.vertexViewF32,b=p.vertexViewU32,C=p.vertexCount*p.currentShader.vertexComponentCount-1,_=r.roundPixels,M=o.tintFill,E=r.alpha*o.alpha,A=x.getTintAppendFloatAlpha(o.tint,E),R=p.vertexAvailable(),L=-1;R<n&&(L=R);for(var Y=0;Y<n;Y++){var F=d[Y];Y===L&&(p.flush(),v=p.setGameObject(o),C=0),f[++C]=g.getXRound(F.vx,F.vy,_),f[++C]=g.getYRound(F.vx,F.vy,_),f[++C]=F.u,f[++C]=F.v,f[++C]=v,f[++C]=M,b[++C]=A,p.vertexCount++,p.currentBatch.count=p.vertexCount-p.currentBatch.start}h.pipelines.postBatch(o)}};y.exports=c},76472:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(44777),c=i(37589),h=i(6113),o=i(91389),r=i(90664),a=new u({Extends:x,initialize:function(d){x.call(this,d,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var d=this.propertyValue,n=d,p=this.defaultEmit,g=this.defaultUpdate;if(this.method===9){this.start=d[0],this.ease=h("Linear"),this.interpolation=o("linear"),p=this.easedValueEmit,g=this.easeValueUpdate,n=d[0],this.active=!0,this.r.length=0,this.g.length=0,this.b.length=0;for(var v=0;v<d.length;v++){var f=r(d[v]);this.r.push(f.r),this.g.push(f.g),this.b.push(f.b)}}return this.onEmit=p,this.onUpdate=g,this.current=n,this},setEase:function(d){this.easeName=d,this.ease=h(d)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(d,n,p){var g=this.ease(p),v=this.interpolation(this.r,g),f=this.interpolation(this.g,g),b=this.interpolation(this.b,g),C=c(v,f,b);return this.current=C,C}});y.exports=a},44777:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(30976),x=i(45319),c=i(83419),h=i(99472),o=i(6113),r=i(95540),a=i(91389),d=i(77720),n=i(15994),p=new c({initialize:function(g,v,f){f===void 0&&(f=!1),this.propertyKey=g,this.propertyValue=v,this.defaultValue=v,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=f,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(g,v){g===void 0&&(g={}),v&&(this.propertyKey=v),this.propertyValue=r(g,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(g){var v;switch(this.method){case 1:case 3:case 8:v=g;break;case 2:this.propertyValue.indexOf(g)>=0&&(v=g);break;case 4:var f=(this.end-this.start)/this.steps;v=d(g,f),this.counter=v;break;case 5:case 6:case 7:v=x(g,this.start,this.end);break;case 9:v=this.start[0];break}return this.current=v,this},getMethod:function(){var g=this.propertyValue;if(g===null)return 0;var v=typeof g;if(v==="number")return 1;if(Array.isArray(g))return 2;if(v==="function")return 3;if(v==="object"){if(this.hasBoth(g,"start","end"))return this.has(g,"steps")?4:5;if(this.hasBoth(g,"min","max"))return 6;if(this.has(g,"random"))return 7;if(this.hasEither(g,"onEmit","onUpdate"))return 8;if(this.hasEither(g,"values","interpolation"))return 9}return 0},setMethods:function(){var g=this.propertyValue,v=g,f=this.defaultEmit,b=this.defaultUpdate;switch(this.method){case 1:f=this.staticValueEmit;break;case 2:f=this.randomStaticValueEmit,v=g[0];break;case 3:this._onEmit=g,f=this.proxyEmit,v=this.defaultValue;break;case 4:this.start=g.start,this.end=g.end,this.steps=g.steps,this.counter=this.start,this.yoyo=this.has(g,"yoyo")?g.yoyo:!1,this.direction=0,f=this.steppedEmit,v=this.start;break;case 5:this.start=g.start,this.end=g.end;var C=this.has(g,"ease")?g.ease:"Linear";this.ease=o(C,g.easeParams),f=this.has(g,"random")&&g.random?this.randomRangedValueEmit:this.easedValueEmit,b=this.easeValueUpdate,v=this.start;break;case 6:this.start=g.min,this.end=g.max,f=this.has(g,"int")&&g.int?this.randomRangedIntEmit:this.randomRangedValueEmit,v=this.start;break;case 7:var _=g.random;Array.isArray(_)&&(this.start=_[0],this.end=_[1]),f=this.randomRangedIntEmit,v=this.start;break;case 8:this._onEmit=this.has(g,"onEmit")?g.onEmit:this.defaultEmit,this._onUpdate=this.has(g,"onUpdate")?g.onUpdate:this.defaultUpdate,f=this.proxyEmit,b=this.proxyUpdate,v=this.defaultValue;break;case 9:this.start=g.values;var M=this.has(g,"ease")?g.ease:"Linear";this.ease=o(M,g.easeParams),this.interpolation=a(g.interpolation),f=this.easedValueEmit,b=this.easeValueUpdate,v=this.start[0];break}return this.onEmit=f,this.onUpdate=b,this.current=v,this},has:function(g,v){return g.hasOwnProperty(v)},hasBoth:function(g,v,f){return g.hasOwnProperty(v)&&g.hasOwnProperty(f)},hasEither:function(g,v,f){return g.hasOwnProperty(v)||g.hasOwnProperty(f)},defaultEmit:function(){return this.defaultValue},defaultUpdate:function(g,v,f,b){return b},proxyEmit:function(g,v,f){var b=this._onEmit(g,v,f);return this.current=b,b},proxyUpdate:function(g,v,f,b){var C=this._onUpdate(g,v,f,b);return this.current=C,C},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var g=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[g],this.current},randomRangedValueEmit:function(g,v){var f=h(this.start,this.end);return g&&g.data[v]&&(g.data[v].min=f,g.data[v].max=this.end),this.current=f,f},randomRangedIntEmit:function(g,v){var f=u(this.start,this.end);return g&&g.data[v]&&(g.data[v].min=f,g.data[v].max=this.end),this.current=f,f},steppedEmit:function(){var g=this.counter,v=g,f=(this.end-this.start)/this.steps;if(this.yoyo){var b;this.direction===0?(v+=f,v>=this.end&&(b=v-this.end,v=this.end-b,this.direction=1)):(v-=f,v<=this.start&&(b=this.start-v,v=this.start+b,this.direction=0)),this.counter=v}else this.counter=n(v+f,this.start,this.end);return this.current=g,g},easedValueEmit:function(g,v){if(g&&g.data[v]){var f=g.data[v];f.min=this.start,f.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(g,v,f){var b=g.data[v],C,_=this.ease(f);return this.interpolation?C=this.interpolation(this.start,_):C=(b.max-b.min)*_+b.min,this.current=C,C},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});y.exports=p},24502:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(95540),c=i(20286),h=new u({Extends:c,initialize:function(o,r,a,d,n){if(typeof o=="object"){var p=o;o=x(p,"x",0),r=x(p,"y",0),a=x(p,"power",0),d=x(p,"epsilon",100),n=x(p,"gravity",50)}else o===void 0&&(o=0),r===void 0&&(r=0),a===void 0&&(a=0),d===void 0&&(d=100),n===void 0&&(n=50);c.call(this,o,r,!0),this._gravity=n,this._power=a*n,this._epsilon=d*d},update:function(o,r){var a=this.x-o.x,d=this.y-o.y,n=a*a+d*d;if(n!==0){var p=Math.sqrt(n);n<this._epsilon&&(n=this._epsilon);var g=this._power*r/(n*p)*100;o.velocityX+=a*g,o.velocityY+=d*g}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(o){this._epsilon=o*o}},power:{get:function(){return this._power/this._gravity},set:function(o){this._power=o*this._gravity}},gravity:{get:function(){return this._gravity},set:function(o){var r=this.power;this._gravity=o,this.power=r}}});y.exports=h},56480:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(9674),x=i(45319),c=i(83419),h=i(39506),o=i(87841),r=i(11520),a=i(26099),d=new c({initialize:function(n){this.emitter=n,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new a,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=n.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new u(this)),this.bounds=new o},emit:function(n,p,g,v,f,b){return this.emitter.emit(n,p,g,v,f,b)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(n,p){n===void 0&&(n=0),p===void 0&&(p=0),this.x=n,this.y=p},fire:function(n,p){var g=this.emitter,v=g.ops,f=g.getAnim();if(f?this.anims.play(f):(this.frame=g.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(g.getEmitZone(this),n===void 0?this.x+=v.x.onEmit(this,"x"):v.x.steps>0?this.x+=n+v.x.onEmit(this,"x"):this.x+=n,p===void 0?this.y+=v.y.onEmit(this,"y"):v.y.steps>0?this.y+=p+v.y.onEmit(this,"y"):this.y+=p,this.life=v.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=v.delay.onEmit(this,"delay"),this.holdCurrent=v.hold.onEmit(this,"hold"),this.scaleX=v.scaleX.onEmit(this,"scaleX"),this.scaleY=v.scaleY.active?v.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=v.rotate.onEmit(this,"rotate"),this.rotation=h(this.angle),g.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&g.getDeathZone(this))return this.lifeCurrent=0,!1;var b=v.speedX.onEmit(this,"speedX"),C=v.speedY.active?v.speedY.onEmit(this,"speedY"):b;if(g.radial){var _=h(v.angle.onEmit(this,"angle"));this.velocityX=Math.cos(_)*Math.abs(b),this.velocityY=Math.sin(_)*Math.abs(C)}else if(g.moveTo){var M=v.moveToX.onEmit(this,"moveToX"),E=v.moveToY.onEmit(this,"moveToY"),A=this.life/1e3;this.velocityX=(M-this.x)/A,this.velocityY=(E-this.y)/A}else this.velocityX=b,this.velocityY=C;return g.acceleration&&(this.accelerationX=v.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=v.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=v.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=v.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=v.bounce.onEmit(this,"bounce"),this.alpha=v.alpha.onEmit(this,"alpha"),v.color.active?this.tint=v.color.onEmit(this,"tint"):this.tint=v.tint.onEmit(this,"tint"),!0},update:function(n,p,g){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=n,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=n,!1;this.anims&&this.anims.update(0,n);var v=this.emitter,f=v.ops,b=1-this.lifeCurrent/this.life;if(this.lifeT=b,this.x=f.x.onUpdate(this,"x",b,this.x),this.y=f.y.onUpdate(this,"y",b,this.y),v.moveTo){var C=f.moveToX.onUpdate(this,"moveToX",b,v.moveToX),_=f.moveToY.onUpdate(this,"moveToY",b,v.moveToY),M=this.lifeCurrent/1e3;this.velocityX=(C-this.x)/M,this.velocityY=(_-this.y)/M}return this.computeVelocity(v,n,p,g,b),this.scaleX=f.scaleX.onUpdate(this,"scaleX",b,this.scaleX),f.scaleY.active?this.scaleY=f.scaleY.onUpdate(this,"scaleY",b,this.scaleY):this.scaleY=this.scaleX,this.angle=f.rotate.onUpdate(this,"rotate",b,this.angle),this.rotation=h(this.angle),v.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=x(f.alpha.onUpdate(this,"alpha",b,this.alpha),0,1),f.color.active?this.tint=f.color.onUpdate(this,"color",b,this.tint):this.tint=f.tint.onUpdate(this,"tint",b,this.tint),this.lifeCurrent-=n,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(n,p,g,v,f){var b=n.ops,C=this.velocityX,_=this.velocityY,M=b.accelerationX.onUpdate(this,"accelerationX",f,this.accelerationX),E=b.accelerationY.onUpdate(this,"accelerationY",f,this.accelerationY),A=b.maxVelocityX.onUpdate(this,"maxVelocityX",f,this.maxVelocityX),R=b.maxVelocityY.onUpdate(this,"maxVelocityY",f,this.maxVelocityY);this.bounce=b.bounce.onUpdate(this,"bounce",f,this.bounce),C+=n.gravityX*g+M*g,_+=n.gravityY*g+E*g,C=x(C,-A,A),_=x(_,-R,R),this.velocityX=C,this.velocityY=_,this.x+=C*g,this.y+=_*g,n.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var L=0;L<v.length;L++){var Y=v[L];Y.active&&Y.update(this,p,g,f)}},setSizeToFrame:function(){},getBounds:function(n){n===void 0&&(n=this.emitter.getWorldTransformMatrix());var p=Math.abs(n.scaleX)*this.scaleX,g=Math.abs(n.scaleY)*this.scaleY,v=this.x,f=this.y,b=this.rotation,C=this.frame.width*p/2,_=this.frame.height*g/2,M=this.bounds,E=new a(v-C,f-_),A=new a(v+C,f-_),R=new a(v-C,f+_),L=new a(v+C,f+_);return b!==0&&(r(E,v,f,b),r(A,v,f,b),r(R,v,f,b),r(L,v,f,b)),n.transformPoint(E.x,E.y,E),n.transformPoint(A.x,A.y,A),n.transformPoint(R.x,R.y,R),n.transformPoint(L.x,L.y,L),M.x=Math.min(E.x,A.x,R.x,L.x),M.y=Math.min(E.y,A.y,R.y,L.y),M.width=Math.max(E.x,A.x,R.x,L.x)-M.x,M.height=Math.max(E.y,A.y,R.y,L.y)-M.y,M},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});y.exports=d},69601:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(20286),c=i(87841),h=new u({Extends:x,initialize:function(o,r,a,d,n,p,g,v){n===void 0&&(n=!0),p===void 0&&(p=!0),g===void 0&&(g=!0),v===void 0&&(v=!0),x.call(this,o,r,!0),this.bounds=new c(o,r,a,d),this.collideLeft=n,this.collideRight=p,this.collideTop=g,this.collideBottom=v},update:function(o){var r=this.bounds,a=-o.bounce,d=o.worldPosition;d.x<r.x&&this.collideLeft?(o.x+=r.x-d.x,o.velocityX*=a):d.x>r.right&&this.collideRight&&(o.x-=d.x-r.right,o.velocityX*=a),d.y<r.y&&this.collideTop?(o.y+=r.y-d.y,o.velocityY*=a):d.y>r.bottom&&this.collideBottom&&(o.y-=d.y-r.bottom,o.velocityY*=a)}});y.exports=h},31600:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(31401),c=i(53774),h=i(43459),o=i(26388),r=i(19909),a=i(76472),d=i(44777),n=i(20696),p=i(95643),g=i(95540),v=i(26546),f=i(24502),b=i(69036),C=i(1985),_=i(97022),M=i(86091),E=i(73162),A=i(20074),R=i(269),L=i(56480),Y=i(69601),F=i(68875),N=i(87841),z=i(59996),U=i(72905),q=i(90668),Q=i(19186),K=i(61340),et=i(26099),H=i(15994),J=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],X=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],Z=new u({Extends:p,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Texture,x.Transform,x.Visible,q],initialize:function($,it,nt,at,ht){p.call(this,$,"ParticleEmitter"),this.particleClass=L,this.config=null,this.ops={accelerationX:new d("accelerationX",0),accelerationY:new d("accelerationY",0),alpha:new d("alpha",1),angle:new d("angle",{min:0,max:360},!0),bounce:new d("bounce",0),color:new a("color"),delay:new d("delay",0,!0),hold:new d("hold",0,!0),lifespan:new d("lifespan",1e3,!0),maxVelocityX:new d("maxVelocityX",1e4),maxVelocityY:new d("maxVelocityY",1e4),moveToX:new d("moveToX",0),moveToY:new d("moveToY",0),quantity:new d("quantity",1,!0),rotate:new d("rotate",0),scaleX:new d("scaleX",1),scaleY:new d("scaleY",1),speedX:new d("speedX",0,!0),speedY:new d("speedY",0,!0),tint:new d("tint",16777215),x:new d("x",0),y:new d("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new et,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new K,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new E(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(it,nt),this.setTexture(at),ht&&this.setConfig(ht)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function($){if(!$)return this;this.config=$;var it=0,nt="",at=this.ops;for(it=0;it<X.length;it++)nt=X[it],at[nt].loadConfig($);for(it=0;it<J.length;it++)nt=J[it],_($,nt)&&(this[nt]=g($,nt));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=b($,["moveToX","moveToY"]),_($,"speed")&&(at.speedX.loadConfig($,"speed"),at.speedY.active=!1),(C($,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),_($,"scale")&&(at.scaleX.loadConfig($,"scale"),at.scaleY.active=!1),_($,"callbackScope")){var ht=g($,"callbackScope",null);this.emitCallbackScope=ht,this.deathCallbackScope=ht}if(_($,"emitZone")&&this.addEmitZone($.emitZone),_($,"deathZone")&&this.addDeathZone($.deathZone),_($,"bounds")){var dt=this.addParticleBounds($.bounds);dt.collideLeft=g($,"collideLeft",!0),dt.collideRight=g($,"collideRight",!0),dt.collideTop=g($,"collideTop",!0),dt.collideBottom=g($,"collideBottom",!0)}return _($,"followOffset")&&this.followOffset.setFromObject(g($,"followOffset",0)),_($,"texture")&&this.setTexture($.texture),_($,"frame")?this.setEmitterFrame($.frame):_($,"anim")&&this.setAnim($.anim),_($,"reserve")&&this.reserve($.reserve),_($,"advance")&&this.fastForward($.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(n.START,this),this},updateConfig:function($){return $&&(this.config?this.setConfig(R(this.config,$)):this.setConfig($)),this},toJSON:function(){var $=c(this),it=0,nt="";for(it=0;it<J.length;it++)nt=J[it],$[nt]=this[nt];var at=this.ops;for(it=0;it<X.length;it++)nt=X[it],at[nt]&&($[nt]=at[nt].toJSON());return at.speedY.active||(delete $.speedX,$.speed=at.speedX.toJSON()),this.scaleX===this.scaleY&&(delete $.scaleX,delete $.scaleY,$.scale=at.scaleX.toJSON()),$},resetCounters:function($,it){var nt=this.counters;nt.fill(0),nt[0]=$,it&&(nt[5]=1)},startFollow:function($,it,nt,at){return it===void 0&&(it=0),nt===void 0&&(nt=0),at===void 0&&(at=!1),this.follow=$,this.followOffset.set(it,nt),this.trackVisible=at,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var $=this.frames,it=$.length,nt;return it===1?nt=$[0]:this.randomFrame?nt=v($):(nt=$[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===it&&(this.currentFrame=0))),this.texture.get(nt)},setEmitterFrame:function($,it,nt){it===void 0&&(it=!0),nt===void 0&&(nt=1),this.randomFrame=it,this.frameQuantity=nt,this.currentFrame=0;var at=typeof $;if(this.frames.length=0,Array.isArray($))this.frames=this.frames.concat($);else if(at==="string"||at==="number")this.frames.push($);else if(at==="object"){var ht=$;$=g(ht,"frames",null),$&&(this.frames=this.frames.concat($));var dt=g(ht,"cycle",!1);this.randomFrame=!dt,this.frameQuantity=g(ht,"quantity",nt)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var $=this.anims,it=$.length;if(it===0)return null;if(it===1)return $[0];if(this.randomAnim)return v($);var nt=$[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=H(this.currentAnim+1,0,it)),nt},setAnim:function($,it,nt){it===void 0&&(it=!0),nt===void 0&&(nt=1),this.randomAnim=it,this.animQuantity=nt,this.currentAnim=0;var at=typeof $;if(this.anims.length=0,Array.isArray($))this.anims=this.anims.concat($);else if(at==="string")this.anims.push($);else if(at==="object"){var ht=$;$=g(ht,"anims",null),$&&(this.anims=this.anims.concat($));var dt=g(ht,"cycle",!1);this.randomAnim=!dt,this.animQuantity=g(ht,"quantity",nt)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function($){return $===void 0&&($=!0),this.radial=$,this},addParticleBounds:function($,it,nt,at,ht,dt,vt,ft){if(typeof $=="object"){var gt=$;$=gt.x,it=gt.y,nt=_(gt,"w")?gt.w:gt.width,at=_(gt,"h")?gt.h:gt.height}return this.addParticleProcessor(new Y($,it,nt,at,ht,dt,vt,ft))},setParticleSpeed:function($,it){return it===void 0&&(it=$),this.ops.speedX.onChange($),$===it?this.ops.speedY.active=!1:this.ops.speedY.onChange(it),this.radial=!0,this},setParticleScale:function($,it){return $===void 0&&($=1),it===void 0&&(it=$),this.ops.scaleX.onChange($),this.ops.scaleY.onChange(it),this},setParticleGravity:function($,it){return this.gravityX=$,this.gravityY=it,this},setParticleAlpha:function($){return this.ops.alpha.onChange($),this},setParticleTint:function($){return this.ops.tint.onChange($),this},setEmitterAngle:function($){return this.ops.angle.onChange($),this},setParticleLifespan:function($){return this.ops.lifespan.onChange($),this},setQuantity:function($){return this.quantity=$,this},setFrequency:function($,it){return this.frequency=$,this.flowCounter=$>0?$:0,it&&(this.quantity=it),this},addDeathZone:function($){Array.isArray($)||($=[$]);for(var it,nt=[],at=0;at<$.length;at++)if(it=$[at],it instanceof o)nt.push(it);else if(typeof it.contains=="function")it=new o(it,!0),nt.push(it);else{var ht=g(it,"type","onEnter"),dt=g(it,"source",null);if(dt&&typeof dt.contains=="function"){var vt=ht==="onEnter";it=new o(dt,vt),nt.push(it)}}return this.deathZones=this.deathZones.concat(nt),nt},removeDeathZone:function($){return U(this.deathZones,$),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function($){Array.isArray($)||($=[$]);for(var it,nt=[],at=0;at<$.length;at++)if(it=$[at],it instanceof F||it instanceof r)nt.push(it);else{var ht=g(it,"source",null);if(ht){var dt=g(it,"type","random");if(dt==="random"&&typeof ht.getRandomPoint=="function")it=new F(ht),nt.push(it);else if(dt==="edge"&&typeof ht.getPoints=="function"){var vt=g(it,"quantity",1),ft=g(it,"stepRate",0),gt=g(it,"yoyo",!1),wt=g(it,"seamless",!0),bt=g(it,"total",-1);it=new r(ht,vt,ft,gt,wt,bt),nt.push(it)}}}return this.emitZones=this.emitZones.concat(nt),nt},removeEmitZone:function($){return U(this.emitZones,$),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function($){var it=this.emitZones,nt=it.length;if(nt!==0){var at=it[this.zoneIndex];at.getPoint($),at.total>-1&&(this.zoneTotal++,this.zoneTotal===at.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===nt&&(this.zoneIndex=0)))}},getDeathZone:function($){for(var it=this.deathZones,nt=0;nt<it.length;nt++){var at=it[nt];if(at.willKill($))return this.emit(n.DEATH_ZONE,this,$,at),!0}return!1},setEmitZone:function($){var it;return isFinite($)?it=$:it=this.emitZones.indexOf($),it>=0&&(this.zoneIndex=it),this},addParticleProcessor:function($){return this.processors.exists($)||($.emitter&&$.emitter.removeParticleProcessor($),this.processors.add($),$.emitter=this),$},removeParticleProcessor:function($){return this.processors.exists($)&&(this.processors.remove($,!0),$.emitter=null),$},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function($){return this.addParticleProcessor(new f($))},reserve:function($){var it=this.dead;if(this.maxParticles>0){var nt=this.getParticleCount();nt+$>this.maxParticles&&($=this.maxParticles-(nt+$))}for(var at=0;at<$;at++)it.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function($,it){return $===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof $=="function"&&(this.emitCallback=$,it&&(this.emitCallbackScope=it)),this},onParticleDeath:function($,it){return $===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof $=="function"&&(this.deathCallback=$,it&&(this.deathCallbackScope=it)),this},killAll:function(){for(var $=this.dead,it=this.alive;it.length>0;)$.push(it.pop());return this},forEachAlive:function($,it){for(var nt=this.alive,at=nt.length,ht=0;ht<at;ht++)$.call(it,nt[ht],this);return this},forEachDead:function($,it){for(var nt=this.dead,at=nt.length,ht=0;ht<at;ht++)$.call(it,nt[ht],this);return this},start:function($,it){return $===void 0&&($=0),this.emitting||($>0&&this.fastForward($),this.emitting=!0,this.resetCounters(this.frequency,!0),it!==void 0&&(this.duration=Math.abs(it)),this.emit(n.START,this)),this},stop:function($){return $===void 0&&($=!1),this.emitting&&(this.emitting=!1,$&&this.killAll(),this.emit(n.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function($,it){return $===void 0&&($=""),it===void 0&&(it=this.true),this.sortProperty=$,this.sortOrderAsc=it,this.sortCallback=this.depthSortCallback,this},setSortCallback:function($){return this.sortProperty!==""?$=this.depthSortCallback:$=null,this.sortCallback=$,this},depthSort:function(){return Q(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function($,it){var nt=this.sortProperty;return this.sortOrderAsc?$[nt]-it[nt]:it[nt]-$[nt]},flow:function($,it,nt){return it===void 0&&(it=1),this.emitting=!1,this.frequency=$,this.quantity=it,nt!==void 0&&(this.stopAfter=nt),this.start()},explode:function($,it,nt){this.frequency=-1,this.resetCounters(-1,!0);var at=this.emitParticle($,it,nt);return this.emit(n.EXPLODE,this,at),at},emitParticleAt:function($,it,nt){return this.emitParticle(nt,$,it)},emitParticle:function($,it,nt){if(!this.atLimit()){$===void 0&&($=this.ops.quantity.onEmit());for(var at=this.dead,ht=this.stopAfter,dt=this.follow?this.follow.x+this.followOffset.x:it,vt=this.follow?this.follow.y+this.followOffset.y:nt,ft=0;ft<$;ft++){var gt=at.pop();if(gt||(gt=new this.particleClass(this)),gt.fire(dt,vt)?(this.particleBringToTop?this.alive.push(gt):this.alive.unshift(gt),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,gt,this)):this.dead.push(gt),ht>0&&(this.stopCounter++,this.stopCounter>=ht)||this.atLimit())break}return gt}},fastForward:function($,it){it===void 0&&(it=1e3/60);var nt=0;for(this.skipping=!0;nt<Math.abs($);)this.preUpdate(0,it),nt+=it;return this.skipping=!1,this},preUpdate:function($,it){it*=this.timeScale;var nt=it/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var at=this.getProcessors(),ht=this.alive,dt=this.dead,vt=0,ft=[],gt=ht.length;for(vt=0;vt<gt;vt++){var wt=ht[vt];wt.update(it,nt,at)&&ft.push({index:vt,particle:wt})}if(gt=ft.length,gt>0){var bt=this.deathCallback,xt=this.deathCallbackScope;for(vt=gt-1;vt>=0;vt--){var Pt=ft[vt];ht.splice(Pt.index,1),dt.push(Pt.particle),bt&&bt.call(xt,Pt.particle),Pt.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&ht.length===0&&(this.completeFlag=0,this.emit(n.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=it;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=it,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function($){for(var it=this.getWorldTransformMatrix(),nt=this.alive,at=nt.length,ht=[],dt=0;dt<at;dt++){var vt=nt[dt];z($,vt.getBounds(it))&&ht.push(vt)}return ht},getBounds:function($,it,nt,at){$===void 0&&($=0),it===void 0&&(it=0),nt===void 0&&(nt=1e3/60),at===void 0&&(at=new N);var ht=this.getWorldTransformMatrix(),dt,vt,ft=this.alive,gt=!1;if(at.setTo(0,0,0,0),it>0){var wt=0;for(this.skipping=!0;wt<Math.abs(it);){for(this.preUpdate(0,nt),dt=0;dt<ft.length;dt++)vt=ft[dt].getBounds(ht),gt?A(at,vt):(gt=!0,h(vt,at));wt+=nt}this.skipping=!1}else for(dt=0;dt<ft.length;dt++)vt=ft[dt].getBounds(ht),gt?A(at,vt):(gt=!0,h(vt,at));return $>0&&M(at,$,$),at},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function($){this.ops.x.onChange($)}},particleY:{get:function(){return this.ops.y.current},set:function($){this.ops.y.onChange($)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function($){this.ops.accelerationX.onChange($)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function($){this.ops.accelerationY.onChange($)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function($){this.ops.maxVelocityX.onChange($)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function($){this.ops.maxVelocityY.onChange($)}},speed:{get:function(){return this.ops.speedX.current},set:function($){this.ops.speedX.onChange($),this.ops.speedY.onChange($)}},speedX:{get:function(){return this.ops.speedX.current},set:function($){this.ops.speedX.onChange($)}},speedY:{get:function(){return this.ops.speedY.current},set:function($){this.ops.speedY.onChange($)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function($){this.ops.moveToX.onChange($)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function($){this.ops.moveToY.onChange($)}},bounce:{get:function(){return this.ops.bounce.current},set:function($){this.ops.bounce.onChange($)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function($){this.ops.scaleX.onChange($)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function($){this.ops.scaleY.onChange($)}},particleColor:{get:function(){return this.ops.color.current},set:function($){this.ops.color.onChange($)}},colorEase:{get:function(){return this.ops.color.easeName},set:function($){this.ops.color.setEase($)}},particleTint:{get:function(){return this.ops.tint.current},set:function($){this.ops.tint.onChange($)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function($){this.ops.alpha.onChange($)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function($){this.ops.lifespan.onChange($)}},particleAngle:{get:function(){return this.ops.angle.current},set:function($){this.ops.angle.onChange($)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function($){this.ops.rotate.onChange($)}},quantity:{get:function(){return this.ops.quantity.current},set:function($){this.ops.quantity.onChange($)}},delay:{get:function(){return this.ops.delay.current},set:function($){this.ops.delay.onChange($)}},hold:{get:function(){return this.ops.hold.current},set:function($){this.ops.hold.onChange($)}},flowCounter:{get:function(){return this.counters[0]},set:function($){this.counters[0]=$}},frameCounter:{get:function(){return this.counters[1]},set:function($){this.counters[1]=$}},animCounter:{get:function(){return this.counters[2]},set:function($){this.counters[2]=$}},elapsed:{get:function(){return this.counters[3]},set:function($){this.counters[3]=$}},stopCounter:{get:function(){return this.counters[4]},set:function($){this.counters[4]=$}},completeFlag:{get:function(){return this.counters[5]},set:function($){this.counters[5]=$}},zoneIndex:{get:function(){return this.counters[6]},set:function($){this.counters[6]=$}},zoneTotal:{get:function(){return this.counters[7]},set:function($){this.counters[7]=$}},currentFrame:{get:function(){return this.counters[8]},set:function($){this.counters[8]=$}},currentAnim:{get:function(){return this.counters[9]},set:function($){this.counters[9]=$}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var $,it=this.ops;for($=0;$<X.length;$++){var nt=X[$];it[nt].destroy()}for($=0;$<this.alive.length;$++)this.alive[$].destroy();for($=0;$<this.dead.length;$++)this.dead[$].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});y.exports=Z},9871:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(59996),x=i(61340),c=new x,h=new x,o=new x,r=new x,a=function(d,n,p,g){var v=c,f=h,b=o,C=r;g?(C.loadIdentity(),C.multiply(g),C.translate(n.x,n.y),C.rotate(n.rotation),C.scale(n.scaleX,n.scaleY)):C.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY);var _=d.currentContext,M=p.roundPixels,E=p.alpha,A=n.alpha,R=n.alive,L=R.length,Y=n.viewBounds;if(!(!n.visible||L===0||Y&&!u(Y,p.worldView))){n.sortCallback&&n.depthSort(),p.addToRenderList(n);var F=n.scrollFactorX,N=n.scrollFactorY;_.save(),_.globalCompositeOperation=d.blendModes[n.blendMode];for(var z=0;z<L;z++){var U=R[z],q=U.alpha*A*E;if(!(q<=0||U.scaleX===0||U.scaleY===0)){b.applyITRS(U.x,U.y,U.rotation,U.scaleX,U.scaleY),v.copyFrom(p.matrix),v.multiplyWithOffset(C,-p.scrollX*F,-p.scrollY*N),b.e=U.x,b.f=U.y,v.multiply(b,f);var Q=U.frame,K=Q.canvasData;if(K.width>0&&K.height>0){var et=-Q.halfWidth,H=-Q.halfHeight;_.globalAlpha=q,_.save(),f.setToContext(_),M&&(et=Math.round(et),H=Math.round(H)),_.imageSmoothingEnabled=!Q.source.scaleMode,_.drawImage(Q.source.image,K.x,K.y,K.width,K.height,et,H,K.width,K.height),_.restore()}}}_.restore()}};y.exports=a},92730:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(44603),c=i(23568),h=i(95540),o=i(31600);x.register("particles",function(r,a){r===void 0&&(r={});var d=c(r,"key",null),n=h(r,"config",null),p=new o(this.scene,0,0,d);return a!==void 0&&(r.add=a),u(this.scene,p,r),n&&p.setConfig(n),p})},676:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(31600);u.register("particles",function(c,h,o,r){return c!==void 0&&typeof c=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new x(this.scene,c,h,o,r))})},90668:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(21188),c=i(9871),y.exports={renderWebGL:x,renderCanvas:c}},21188:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(59996),x=i(61340),c=i(70554),h=new x,o=new x,r=new x,a=new x,d=function(n,p,g,v){var f=n.pipelines.set(p.pipeline),b=h,C=o,_=r,M=a;v?(M.loadIdentity(),M.multiply(v),M.translate(p.x,p.y),M.rotate(p.rotation),M.scale(p.scaleX,p.scaleY)):M.applyITRS(p.x,p.y,p.rotation,p.scaleX,p.scaleY);var E=c.getTintAppendFloatAlpha,A=g.alpha,R=p.alpha;n.pipelines.preBatch(p);var L=p.alive,Y=L.length,F=p.viewBounds;if(!(Y===0||F&&!u(F,g.worldView))){p.sortCallback&&p.depthSort(),g.addToRenderList(p),b.copyFrom(g.matrix),b.multiplyWithOffset(M,-g.scrollX*p.scrollFactorX,-g.scrollY*p.scrollFactorY),n.setBlendMode(p.blendMode),p.mask&&(p.mask.preRenderWebGL(n,p,g),n.pipelines.set(p.pipeline));for(var N=p.tintFill,z,U,q=0;q<Y;q++){var Q=L[q],K=Q.alpha*R*A;if(!(K<=0||Q.scaleX===0||Q.scaleY===0)){_.applyITRS(Q.x,Q.y,Q.rotation,Q.scaleX,Q.scaleY),_.e=Q.x,_.f=Q.y,b.multiply(_,C);var et=Q.frame;et.glTexture!==U&&(U=et.glTexture,z=f.setGameObject(p,et));var H=-et.halfWidth,J=-et.halfHeight,X=C.setQuad(H,J,H+et.width,J+et.height),Z=E(Q.tint,K);f.shouldFlush(6)&&(f.flush(),z=f.setGameObject(p,et)),f.batchQuad(p,X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],et.u0,et.v0,et.u1,et.v1,Z,Z,Z,Z,N,U,z)}}p.mask&&p.mask.postRenderWebGL(n,g),n.pipelines.postBatch(p)}};y.exports=d},20286:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h,o){c===void 0&&(c=0),h===void 0&&(h=0),o===void 0&&(o=!0),this.emitter,this.x=c,this.y=h,this.active=o},update:function(){},destroy:function(){this.emitter=null}});y.exports=x},9774:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="complete"},812:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="deathzone"},30522:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="explode"},96695:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="start"},18677:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="stop"},20696:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={COMPLETE:i(9774),DEATH_ZONE:i(812),EXPLODE:i(30522),START:i(96695),STOP:i(18677)}},18404:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={EmitterColorOp:i(76472),EmitterOp:i(44777),Events:i(20696),GravityWell:i(24502),Particle:i(56480),ParticleBounds:i(69601),ParticleEmitter:i(31600),ParticleProcessor:i(20286),Zones:i(21024)}},26388:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h){this.source=c,this.killOnEnter=h},willKill:function(c){var h=c.worldPosition,o=this.source.contains(h.x,h.y);return o&&this.killOnEnter||!o&&!this.killOnEnter}});y.exports=x},19909:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h,o,r,a,d){r===void 0&&(r=!1),a===void 0&&(a=!0),d===void 0&&(d=-1),this.source=c,this.points=[],this.quantity=h,this.stepRate=o,this.yoyo=r,this.counter=-1,this.seamless=a,this._length=0,this._direction=0,this.total=d,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var c=this.points[0],h=this.points[this.points.length-1];c.x===h.x&&c.y===h.y&&this.points.pop()}var o=this._length;return this._length=this.points.length,this._length<o&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(c){return this.source=c,this.updateSource()},getPoint:function(c){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var h=this.points[this.counter];h&&(c.x=h.x,c.y=h.y)}});y.exports=x},68875:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(26099),c=new u({initialize:function(h){this.source=h,this._tempVec=new x,this.total=-1},getPoint:function(h){var o=this._tempVec;this.source.getRandomPoint(o),h.x=o.x,h.y=o.y}});y.exports=c},21024:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={DeathZone:i(26388),EdgeZone:i(19909),RandomZone:i(68875)}},1159:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(31401),c=i(68287),h=new u({Extends:c,Mixins:[x.PathFollower],initialize:function(o,r,a,d,n,p){c.call(this,o,a,d,n,p),this.path=r},preUpdate:function(o,r){this.anims.update(o,r),this.pathUpdate(o)}});y.exports=h},90145:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(1159);u.register("follower",function(c,h,o,r,a){var d=new x(this.scene,c,h,o,r,a);return this.displayList.add(d),this.updateList.add(d),d})},33663:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(9674),x=i(83419),c=i(48803),h=i(90664),o=i(4703),r=i(45650),a=new x({Extends:o,initialize:function(d,n,p,g,v,f,b,C){g||(g="__DEFAULT"),o.call(this,d,n,p,g,v),this.type="Plane",this.anims=new u(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(f,b,C),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(d,n,p){d===void 0&&(d=8),n===void 0&&(n=8),p===void 0&&(p=!1);var g=!1;return p&&(g=!0),this.gridWidth=d,this.gridHeight=n,this.isTiled=p,this.clear(),c({mesh:this,widthSegments:d,heightSegments:n,isOrtho:!1,tile:p,flipY:g}),this},setSizeToFrame:function(d){d===void 0&&(d=!0);var n=this.frame;if(this.setPerspective(this.width/n.width,this.height/n.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!d)return this;var p=this.gridWidth,g=this.gridHeight,v=this.vertices,f=n.u0,b=n.u1,C=n.v0,_=n.v1,M,E,A=0;if(this.isTiled)for(C=n.v1,_=n.v0,E=0;E<g;E++)for(M=0;M<p;M++)v[A++].setUVs(f,_),v[A++].setUVs(f,C),v[A++].setUVs(b,_),v[A++].setUVs(f,C),v[A++].setUVs(b,C),v[A++].setUVs(b,_);else{var R=p+1,L=g+1,Y=b-f,F=_-C,N=[];for(E=0;E<L;E++)for(M=0;M<R;M++){var z=f+Y*(M/p),U=C+F*(E/g);N.push(z,U)}for(E=0;E<g;E++)for(M=0;M<p;M++){var q=(M+R*E)*2,Q=(M+R*(E+1))*2,K=(M+1+R*(E+1))*2,et=(M+1+R*E)*2;v[A++].setUVs(N[q],N[q+1]),v[A++].setUVs(N[Q],N[Q+1]),v[A++].setUVs(N[et],N[et+1]),v[A++].setUVs(N[Q],N[Q+1]),v[A++].setUVs(N[K],N[K+1]),v[A++].setUVs(N[et],N[et+1])}}return this},setViewHeight:function(d){d===void 0&&(d=this.frame.height);var n=this.fov*(Math.PI/180);this.viewPosition.z=this.height/d/Math.tan(n/2),this.dirtyCache[10]=1},createCheckerboard:function(d,n,p,g,v){d===void 0&&(d=16777215),n===void 0&&(n=255),p===void 0&&(p=255),g===void 0&&(g=255),v===void 0&&(v=128);for(var f=h(d),b=h(n),C=[],_=0;_<16;_++)for(var M=0;M<16;M++)_<8&&M<8||_>7&&M>7?C.push(f.r,f.g,f.b,p):C.push(b.r,b.g,b.b,g);var E=this.scene.sys.textures.addUint8Array(r(),new Uint8Array(C),16,16);return this.removeCheckerboard(),this.setTexture(E),this.setSizeToFrame(),this.setViewHeight(v),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(d,n){return this.anims.play(d,n)},playReverse:function(d,n){return this.anims.playReverse(d,n)},playAfterDelay:function(d,n){return this.anims.playAfterDelay(d,n)},playAfterRepeat:function(d,n){return this.anims.playAfterRepeat(d,n)},stop:function(){return this.anims.stop()},stopAfterDelay:function(d){return this.anims.stopAfterDelay(d)},stopAfterRepeat:function(d){return this.anims.stopAfterRepeat(d)},stopOnFrame:function(d){return this.anims.stopOnFrame(d)},preUpdate:function(d,n){o.prototype.preUpdate.call(this,d,n),this.anims.update(d,n)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});y.exports=a},56015:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(13059),c=i(44603),h=i(23568),o=i(35154),r=i(33663);c.register("plane",function(a,d){a===void 0&&(a={});var n=h(a,"key",null),p=h(a,"frame",null),g=o(a,"width",8),v=o(a,"height",8),f=o(a,"tile",!1),b=new r(this.scene,0,0,n,p,g,v,f);d!==void 0&&(a.add=d);var C=o(a,"checkerboard",null);if(C){var _=o(C,"color1",16777215),M=o(C,"color2",255),E=o(C,"alpha1",255),A=o(C,"alpha2",255),R=o(C,"height",128);b.createCheckerboard(_,M,E,A,R)}return u(this.scene,b,a),x(b,a),b})},30985:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(33663),x=i(39429);x.register("plane",function(c,h,o,r,a,d,n){return this.displayList.add(new u(this.scene,c,h,o,r,a,d,n))})},80321:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(31401),c=i(95643),h=i(30100),o=i(36060),r=i(67277),a=new u({Extends:c,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Transform,x.Visible,r],initialize:function(d,n,p,g,v,f,b){g===void 0&&(g=16777215),v===void 0&&(v=128),f===void 0&&(f=1),b===void 0&&(b=.1),c.call(this,d,"PointLight"),this.initPipeline(o.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(n,p),this.color=h(g),this.intensity=f,this.attenuation=b,this.width=v*2,this.height=v*2,this._radius=v},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this.width=d*2,this.height=d*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});y.exports=a},39829:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(44603),c=i(23568),h=i(80321);x.register("pointlight",function(o,r){o===void 0&&(o={});var a=c(o,"color",16777215),d=c(o,"radius",128),n=c(o,"intensity",1),p=c(o,"attenuation",.1),g=new h(this.scene,0,0,a,d,n,p);return r!==void 0&&(o.add=r),u(this.scene,g,o),g})},71255:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(80321);u.register("pointlight",function(c,h,o,r,a,d){return this.displayList.add(new x(this.scene,c,h,o,r,a,d))})},67277:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(57787),y.exports={renderWebGL:x,renderCanvas:c}},57787:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=function(c,h,o,r){o.addToRenderList(h);var a=c.pipelines.set(h.pipeline),d=u(h,o,r).calc,n=h.width,p=h.height,g=-h._radius,v=-h._radius,f=g+n,b=v+p,C=d.getX(0,0),_=d.getY(0,0),M=d.getX(g,v),E=d.getY(g,v),A=d.getX(g,b),R=d.getY(g,b),L=d.getX(f,b),Y=d.getY(f,b),F=d.getX(f,v),N=d.getY(f,v);c.pipelines.preBatch(h),a.batchPointLight(h,o,M,E,A,R,L,Y,F,N,C,_),c.pipelines.postBatch(h)};y.exports=x},591:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(81320),c=i(88571),h=new u({Extends:c,initialize:function(o,r,a,d,n,p){r===void 0&&(r=0),a===void 0&&(a=0),d===void 0&&(d=32),n===void 0&&(n=32),p===void 0&&(p=!0);var g=new x(o.sys.textures,"",d,n,p);c.call(this,o,r,a,g),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(o,r){this.width=o,this.height=r,this.updateDisplayOrigin();var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=o,a.hitArea.height=r),this},resize:function(o,r,a){return this.texture.setSize(o,r,a),this.setSize(this.texture.width,this.texture.height),this},saveTexture:function(o){var r=this.texture;return r.key=o,r.manager.addDynamicTexture(r)&&(this._saved=!0),r},fill:function(o,r,a,d,n,p){return this.texture.fill(o,r,a,d,n,p),this},clear:function(){return this.texture.clear(),this},stamp:function(o,r,a,d,n){return this.texture.stamp(o,r,a,d,n),this},erase:function(o,r,a){return this.texture.erase(o,r,a),this},draw:function(o,r,a,d,n){return this.texture.draw(o,r,a,d,n),this},drawFrame:function(o,r,a,d,n,p){return this.texture.drawFrame(o,r,a,d,n,p),this},repeat:function(o,r,a,d,n,p,g,v,f){return this.texture.repeat(o,r,a,d,n,p,g,v,f),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(o,r,a,d,n){return this.texture.batchDraw(o,r,a,d,n),this},batchDrawFrame:function(o,r,a,d,n,p){return this.texture.batchDrawFrame(o,r,a,d,n,p),this},endDraw:function(o){return this.texture.endDraw(o),this},snapshotArea:function(o,r,a,d,n,p,g){return this.texture.snapshotArea(o,r,a,d,n,p,g),this},snapshot:function(o,r,a){return this.snapshotArea(0,0,this.width,this.height,o,r,a)},snapshotPixel:function(o,r,a){return this.snapshotArea(o,r,1,1,a,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});y.exports=h},34495:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(44603),c=i(23568),h=i(591);x.register("renderTexture",function(o,r){o===void 0&&(o={});var a=c(o,"x",0),d=c(o,"y",0),n=c(o,"width",32),p=c(o,"height",32),g=new h(this.scene,a,d,n,p);return r!==void 0&&(o.add=r),u(this.scene,g,o),g})},60505:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(591);u.register("renderTexture",function(c,h,o,r){return this.displayList.add(new x(this.scene,c,h,o,r))})},77757:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(9674),x=i(83419),c=i(31401),h=i(95643),o=i(36060),r=i(38745),a=i(26099),d=new x({Extends:h,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.Flip,c.Mask,c.Pipeline,c.PostPipeline,c.Size,c.Texture,c.Transform,c.Visible,c.ScrollFactor,r],initialize:function(n,p,g,v,f,b,C,_,M){v===void 0&&(v="__DEFAULT"),b===void 0&&(b=2),C===void 0&&(C=!0),h.call(this,n,"Rope"),this.anims=new u(this),this.points=b,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=v==="__DEFAULT",this.dirty=!1,this.horizontal=C,this._flipX=!1,this._flipY=!1,this._perp=new a,this.debugCallback=null,this.debugGraphic=null,this.setTexture(v,f),this.setPosition(p,g),this.setSizeToFrame(),this.initPipeline(o.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(b)&&this.resizeArrays(b.length),this.setPoints(b,_,M),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(n,p){var g=this.anims.currentFrame;this.anims.update(n,p),this.anims.currentFrame!==g&&(this.updateUVs(),this.updateVertices())},play:function(n,p,g){return this.anims.play(n,p,g),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(n,p,g){return n===void 0&&(n=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(n,p,g))},setVertical:function(n,p,g){return n===void 0&&(n=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(n,p,g)):this},setTintFill:function(n){return n===void 0&&(n=!1),this.tintFill=n,this},setAlphas:function(n,p){var g=this.points.length;if(g<1)return this;var v=this.alphas;n===void 0?n=[1]:!Array.isArray(n)&&p===void 0&&(n=[n]);var f,b=0;if(p!==void 0)for(f=0;f<g;f++)b=f*2,v[b]=n,v[b+1]=p;else if(n.length===g)for(f=0;f<g;f++)b=f*2,v[b]=n[f],v[b+1]=n[f];else{var C=n[0];for(f=0;f<g;f++)b=f*2,n.length>b&&(C=n[b]),v[b]=C,n.length>b+1&&(C=n[b+1]),v[b+1]=C}return this},setColors:function(n){var p=this.points.length;if(p<1)return this;var g=this.colors;n===void 0?n=[16777215]:Array.isArray(n)||(n=[n]);var v,f=0;if(n.length===p)for(v=0;v<p;v++)f=v*2,g[f]=n[v],g[f+1]=n[v];else{var b=n[0];for(v=0;v<p;v++)f=v*2,n.length>f&&(b=n[f]),g[f]=b,n.length>f+1&&(b=n[f+1]),g[f+1]=b}return this},setPoints:function(n,p,g){if(n===void 0&&(n=2),typeof n=="number"){var v=n;v<2&&(v=2),n=[];var f,b,C;if(this.horizontal)for(C=-this.frame.halfWidth,b=this.frame.width/(v-1),f=0;f<v;f++)n.push({x:C+f*b,y:0});else for(C=-this.frame.halfHeight,b=this.frame.height/(v-1),f=0;f<v;f++)n.push({x:0,y:C+f*b})}var _=n.length,M=this.points.length;return _<1?(console.warn("Rope: Not enough points given"),this):(_===1&&(n.unshift({x:0,y:0}),_++),M!==_&&this.resizeArrays(_),this.dirty=!0,this.points=n,this.updateUVs(),p!=null&&this.setColors(p),g!=null&&this.setAlphas(g),this)},updateUVs:function(){for(var n=this.uv,p=this.points.length,g=this.frame.u0,v=this.frame.v0,f=this.frame.u1,b=this.frame.v1,C=(f-g)/(p-1),_=(b-v)/(p-1),M=0;M<p;M++){var E=M*4,A,R,L,Y;this.horizontal?(this._flipX?(A=f-M*C,L=f-M*C):(A=g+M*C,L=g+M*C),this._flipY?(R=b,Y=v):(R=v,Y=b)):(this._flipX?(A=g,L=f):(A=f,L=g),this._flipY?(R=b-M*_,Y=b-M*_):(R=v+M*_,Y=v+M*_)),n[E+0]=A,n[E+1]=R,n[E+2]=L,n[E+3]=Y}return this},resizeArrays:function(n){var p=this.colors,g=this.alphas;this.vertices=new Float32Array(n*4),this.uv=new Float32Array(n*4),p=new Uint32Array(n*2),g=new Float32Array(n*2);for(var v=0;v<n*2;v++)p[v]=16777215,g[v]=1;return this.colors=p,this.alphas=g,this.dirty=!0,this},updateVertices:function(){var n=this._perp,p=this.points,g=this.vertices,v=p.length;if(this.dirty=!1,!(v<1)){for(var f,b=p[0],C=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,_=0;_<v;_++){var M=p[_],E=_*4;_<v-1?f=p[_+1]:f=M,n.x=f.y-b.y,n.y=-(f.x-b.x);var A=n.length();n.x/=A,n.y/=A,n.x*=C,n.y*=C,g[E]=M.x+n.x,g[E+1]=M.y+n.y,g[E+2]=M.x-n.x,g[E+3]=M.y-n.y,b=M}return this}},setDebug:function(n,p){return this.debugGraphic=n,!n&&!p?this.debugCallback=null:p?this.debugCallback=p:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(n,p,g){var v=n.debugGraphic,f=g[0],b=g[1],C=g[2],_=g[3];v.lineBetween(f,b,C,_);for(var M=4;M<p;M+=4){var E=g[M+0],A=g[M+1],R=g[M+2],L=g[M+3];v.lineBetween(f,b,E,A),v.lineBetween(C,_,R,L),v.lineBetween(C,_,E,A),v.lineBetween(E,A,R,L),f=E,b=A,C=R,_=L}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(n){return this._flipX=n,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(n){return this._flipY=n,this.updateUVs()}}});y.exports=d},95262:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(){};y.exports=P},26209:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(44603),c=i(23568),h=i(35154),o=i(77757);x.register("rope",function(r,a){r===void 0&&(r={});var d=c(r,"key",null),n=c(r,"frame",null),p=c(r,"horizontal",!0),g=h(r,"points",void 0),v=h(r,"colors",void 0),f=h(r,"alphas",void 0),b=new o(this.scene,0,0,d,n,g,p,v,f);return a!==void 0&&(r.add=a),u(this.scene,b,r),b})},96819:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(77757),x=i(39429);x.register("rope",function(c,h,o,r,a,d,n,p){return this.displayList.add(new u(this.scene,c,h,o,r,a,d,n,p))})},38745:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(20439),c=i(95262),y.exports={renderWebGL:x,renderCanvas:c}},20439:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=i(70554),c=function(h,o,r,a){r.addToRenderList(o);var d=h.pipelines.set(o.pipeline,o),n=u(o,r,a).calc,p=o.vertices,g=o.uv,v=o.colors,f=o.alphas,b=o.alpha,C=x.getTintAppendFloatAlpha,_=r.roundPixels,M=p.length,E=Math.floor(M*.5);d.flush(),h.pipelines.preBatch(o);var A=d.setGameObject(o),R=d.vertexViewF32,L=d.vertexViewU32,Y=d.vertexCount*d.currentShader.vertexComponentCount-1,F=0,N=o.tintFill;o.dirty&&o.updateVertices();for(var z=o.debugCallback,U=[],q=0;q<M;q+=2){var Q=p[q+0],K=p[q+1],et=Q*n.a+K*n.c+n.e,H=Q*n.b+K*n.d+n.f;_&&(et=Math.round(et),H=Math.round(H)),R[++Y]=et,R[++Y]=H,R[++Y]=g[q+0],R[++Y]=g[q+1],R[++Y]=A,R[++Y]=N,L[++Y]=C(v[F],r.alpha*(f[F]*b)),F++,z&&(U[q+0]=et,U[q+1]=H)}z&&z.call(o,o,M,U),d.vertexCount+=E,d.currentBatch.count=d.vertexCount-d.currentBatch.start,h.pipelines.postBatch(o)};y.exports=c},20071:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(31401),c=i(95643),h=i(95540),o=i(79291),r=i(61622),a=i(25479),d=i(61340),n=i(95428),p=i(92503),g=new u({Extends:c,Mixins:[x.ComputedSize,x.Depth,x.GetBounds,x.Mask,x.Origin,x.ScrollFactor,x.Transform,x.Visible,a],initialize:function(v,f,b,C,_,M,E,A){b===void 0&&(b=0),C===void 0&&(C=0),_===void 0&&(_=128),M===void 0&&(M=128),c.call(this,v,"Shader"),this.blendMode=-1,this.shader;var R=v.sys.renderer;this.renderer=R,this.gl=R.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=R.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=R.width,this._rendererHeight=R.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(b,C),this.setSize(_,M),this.setOrigin(.5,.5),this.setShader(f,E,A),this.renderer.on(p.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(v){return this.renderToTexture?!0:!(c.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},setRenderToTexture:function(v,f){if(!this.renderToTexture){var b=this.width,C=this.height,_=this.renderer;this.glTexture=_.createTextureFromSource(null,b,C,0),this.framebuffer=_.createFramebuffer(b,C,this.glTexture,!1),this._rendererWidth=b,this._rendererHeight=C,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),v&&(this.texture=this.scene.sys.textures.addGLTexture(v,this.glTexture))}return this.shader&&(_.pipelines.clear(),this.load(),this.flush(),_.pipelines.rebind()),this},setShader:function(v,f,b){if(this.renderer.contextLost)return this._deferSetShader={key:v,textures:f,textureData:b},this;if(f===void 0&&(f=[]),typeof v=="string"){var C=this.scene.sys.cache.shader;if(!C.has(v))return console.warn("Shader missing: "+v),this;this.shader=C.get(v)}else this.shader=v;var _=this.gl,M=this.renderer;this.program&&M.deleteProgram(this.program);var E=M.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);_.uniformMatrix4fv(_.getUniformLocation(E.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),_.uniformMatrix4fv(_.getUniformLocation(E.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),_.uniform2f(_.getUniformLocation(E.webGLProgram,"uResolution"),this.width,this.height),this.program=E;var A=new Date,R={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[A.getFullYear(),A.getMonth(),A.getDate(),A.getHours()*60*60+A.getMinutes()*60+A.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=o(!0,{},this.shader.uniforms,R):this.uniforms=R;for(var L=0;L<4;L++)f[L]&&this.setSampler2D("iChannel"+L,f[L],L,b);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(v){return this.pointer=v,this},projOrtho:function(v,f,b,C){if(this.renderer.contextLost){this._deferProjOrtho={left:v,right:f,bottom:b,top:C};return}var _=-1e3,M=1e3,E=1/(v-f),A=1/(b-C),R=1/(_-M),L=this.projectionMatrix;L[0]=-2*E,L[5]=-2*A,L[10]=2*R,L[12]=(v+f)*E,L[13]=(C+b)*A,L[14]=(M+_)*R;var Y=this.program,F=this.gl,N=this.renderer;N.setProgram(Y),F.uniformMatrix4fv(F.getUniformLocation(Y.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=f,this._rendererHeight=b},initUniforms:function(){var v=this.renderer.glFuncMap,f=this.program;this._textureCount=0;for(var b in this.uniforms){var C=this.uniforms[b],_=C.type,M=v[_];C.uniformLocation=this.renderer.createUniformLocation(f,b),_!=="sampler2D"&&(C.glMatrix=M.matrix,C.glValueLength=M.length,C.glFunc=M.func)}},setSampler2DBuffer:function(v,f,b,C,_,M){_===void 0&&(_=0),M===void 0&&(M={});var E=this.uniforms[v];return E.value=f,M.width=b,M.height=C,E.textureData=M,this._textureCount=_,this.initSampler2D(E),this},setSampler2D:function(v,f,b,C){b===void 0&&(b=0);var _=this.scene.sys.textures;if(_.exists(f)){var M=_.getFrame(f);if(M.glTexture&&M.glTexture.isRenderTexture)return this.setSampler2DBuffer(v,M.glTexture,M.width,M.height,b,C);var E=this.uniforms[v],A=M.source;E.textureKey=f,E.source=A.image,E.value=M.glTexture,A.isGLTexture&&(C||(C={}),C.width=A.width,C.height=A.height),C&&(E.textureData=C),this._textureCount=b,this.initSampler2D(E)}return this},setUniform:function(v,f){return r(this.uniforms,v,f),this},getUniform:function(v){return h(this.uniforms,v,null)},setChannel0:function(v,f){return this.setSampler2D("iChannel0",v,0,f)},setChannel1:function(v,f){return this.setSampler2D("iChannel1",v,1,f)},setChannel2:function(v,f){return this.setSampler2D("iChannel2",v,2,f)},setChannel3:function(v,f){return this.setSampler2D("iChannel3",v,3,f)},initSampler2D:function(v){if(v.value){var f=v.textureData;if(f&&!v.value.isRenderTexture){var b=this.gl,C=v.value,_=b[h(f,"magFilter","linear").toUpperCase()],M=b[h(f,"minFilter","linear").toUpperCase()],E=b[h(f,"wrapS","repeat").toUpperCase()],A=b[h(f,"wrapT","repeat").toUpperCase()],R=b[h(f,"format","rgba").toUpperCase()],L=h(f,"flipY",!1),Y=h(f,"width",C.width),F=h(f,"height",C.height),N=h(f,"source",C.pixels);f.repeat&&(E=b.REPEAT,A=b.REPEAT),f.width&&(N=null),C.update(N,Y,F,L,E,A,M,_,R)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var v=this.gl,f=this.uniforms,b,C,_,M,E,A=0;for(var R in f)b=f[R],_=b.glFunc,C=b.glValueLength,M=b.uniformLocation,E=b.value,E!==null&&(C===1?b.glMatrix?_.call(v,M.webGLUniformLocation,b.transpose,E):_.call(v,M.webGLUniformLocation,E):C===2?_.call(v,M.webGLUniformLocation,E.x,E.y):C===3?_.call(v,M.webGLUniformLocation,E.x,E.y,E.z):C===4?_.call(v,M.webGLUniformLocation,E.x,E.y,E.z,E.w):b.type==="sampler2D"&&(v.activeTexture(v.TEXTURE0+A),v.bindTexture(v.TEXTURE_2D,E.webGLTexture),v.uniform1i(M.webGLUniformLocation,A),A++))},load:function(v){var f=this.gl,b=this.width,C=this.height,_=this.renderer,M=this.program,E=this.viewMatrix;if(!this.renderToTexture){var A=-this._displayOriginX,R=-this._displayOriginY;E[0]=v[0],E[1]=v[1],E[4]=v[2],E[5]=v[3],E[8]=v[4],E[9]=v[5],E[12]=E[0]*A+E[4]*R,E[13]=E[1]*A+E[5]*R}f.useProgram(M.webGLProgram),f.uniformMatrix4fv(f.getUniformLocation(M.webGLProgram,"uViewMatrix"),!1,E),f.uniformMatrix4fv(f.getUniformLocation(M.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),f.uniform2f(f.getUniformLocation(M.webGLProgram,"uResolution"),this.width,this.height);var L=this.uniforms,Y=L.resolution;Y.value.x=b,Y.value.y=C,L.time.value=_.game.loop.getDuration();var F=this.pointer;if(F){var N=L.mouse,z=F.x/b,U=1-F.y/C;N.value.x=z.toFixed(2),N.value.y=U.toFixed(2)}this.syncUniforms()},flush:function(){var v=this.width,f=this.height,b=this.program,C=this.gl,_=this.vertexBuffer,M=this.renderer,E=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(M.setFramebuffer(this.framebuffer),C.clearColor(0,0,0,0),C.clear(C.COLOR_BUFFER_BIT)),C.bindBuffer(C.ARRAY_BUFFER,_.webGLBuffer);var A=C.getAttribLocation(b.webGLProgram,"inPosition");A!==-1&&(C.enableVertexAttribArray(A),C.vertexAttribPointer(A,2,C.FLOAT,!1,E,0));var R=this.vertexViewF32;R[3]=f,R[4]=v,R[5]=f,R[8]=v,R[9]=f,R[10]=v;var L=6;C.bufferSubData(C.ARRAY_BUFFER,0,this.bytes.subarray(0,L*E)),C.drawArrays(C.TRIANGLES,0,L),this.renderToTexture&&M.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var v=this._deferSetShader.key,f=this._deferSetShader.textures,b=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(v,f,b)}if(this._deferProjOrtho!==null){var C=this._deferProjOrtho.left,_=this._deferProjOrtho.right,M=this._deferProjOrtho.bottom,E=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(C,_,M,E)}},preDestroy:function(){var v=this.renderer;v.off(p.RESTORE_WEBGL,this.onContextRestored,this),v.deleteProgram(this.program),v.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(v.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),n(this.uniforms,function(f){v.deleteUniformLocation(f.uniformLocation),f.uniformLocation=null})}});y.exports=g},80464:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(){};y.exports=P},54935:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(44603),c=i(23568),h=i(20071);x.register("shader",function(o,r){o===void 0&&(o={});var a=c(o,"key",null),d=c(o,"x",0),n=c(o,"y",0),p=c(o,"width",128),g=c(o,"height",128),v=new h(this.scene,a,d,n,p,g);return r!==void 0&&(o.add=r),u(this.scene,v,o),v})},74177:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(20071),x=i(39429);x.register("shader",function(c,h,o,r,a,d,n){return this.displayList.add(new u(this.scene,c,h,o,r,a,d,n))})},25479:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(19257),c=i(80464),y.exports={renderWebGL:x,renderCanvas:c}},19257:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=function(c,h,o,r){if(h.shader){if(o.addToRenderList(h),c.pipelines.clear(),h.renderToTexture)h.load(),h.flush();else{var a=u(h,o,r).calc;(c.width!==h._rendererWidth||c.height!==h._rendererHeight)&&h.projOrtho(0,c.width,c.height,0),h.load(a.matrix),h.flush()}c.pipelines.rebind()}};y.exports=x},10441:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(70554),x=function(c,h,o,r,a,d){for(var n=u.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*r),p=o.pathData,g=o.pathIndexes,v=0;v<g.length;v+=3){var f=g[v]*2,b=g[v+1]*2,C=g[v+2]*2,_=p[f+0]-a,M=p[f+1]-d,E=p[b+0]-a,A=p[b+1]-d,R=p[C+0]-a,L=p[C+1]-d,Y=h.getX(_,M),F=h.getY(_,M),N=h.getX(E,A),z=h.getY(E,A),U=h.getX(R,L),q=h.getY(R,L);c.batchTri(o,Y,F,N,z,U,q,0,0,1,1,n,n,n,2)}};y.exports=x},65960:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){var h=x||u.fillColor,o=c||u.fillAlpha,r=(h&16711680)>>>16,a=(h&65280)>>>8,d=h&255;i.fillStyle="rgba("+r+","+a+","+d+","+o+")"};y.exports=P},75177:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){var h=x||u.strokeColor,o=c||u.strokeAlpha,r=(h&16711680)>>>16,a=(h&65280)>>>8,d=h&255;i.strokeStyle="rgba("+r+","+a+","+d+","+o+")",i.lineWidth=u.lineWidth};y.exports=P},17803:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(31401),c=i(95643),h=i(23031),o=new u({Extends:c,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Transform,x.Visible],initialize:function(r,a,d){a===void 0&&(a="Shape"),c.call(this,r,a),this.geom=d,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new h,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(r,a){return a===void 0&&(a=1),r===void 0?this.isFilled=!1:(this.fillColor=r,this.fillAlpha=a,this.isFilled=!0),this},setStrokeStyle:function(r,a,d){return d===void 0&&(d=1),r===void 0?this.isStroked=!1:(this.lineWidth=r,this.strokeColor=a,this.strokeAlpha=d,this.isStroked=!0),this},setClosePath:function(r){return this.closePath=r,this},setSize:function(r,a){return this.width=r,this.height=a,this},setDisplaySize:function(r,a){return this.displayWidth=r,this.displayHeight=a,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}}});y.exports=o},34682:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(70554),x=function(c,h,o,r,a){var d=c.strokeTint,n=u.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*o);d.TL=n,d.TR=n,d.BL=n,d.BR=n;var p=h.pathData,g=p.length-1,v=h.lineWidth,f=v/2,b=p[0]-r,C=p[1]-a;h.closePath||(g-=2);for(var _=2;_<g;_+=2){var M=p[_]-r,E=p[_+1]-a;c.batchLine(b,C,M,E,f,f,v,_-2,h.closePath?_===g-1:!1),b=M,C=E}};y.exports=x},23629:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(13609),x=i(83419),c=i(39506),h=i(94811),o=i(96503),r=i(36383),a=i(17803),d=new x({Extends:a,Mixins:[u],initialize:function(n,p,g,v,f,b,C,_,M){p===void 0&&(p=0),g===void 0&&(g=0),v===void 0&&(v=128),f===void 0&&(f=0),b===void 0&&(b=360),C===void 0&&(C=!1),a.call(this,n,"Arc",new o(0,0,v)),this._startAngle=f,this._endAngle=b,this._anticlockwise=C,this._iterations=.01,this.setPosition(p,g);var E=this.geom.radius*2;this.setSize(E,E),_!==void 0&&this.setFillStyle(_,M),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(n){this._iterations=n,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(n){this.geom.radius=n;var p=n*2;this.setSize(p,p),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(n){this._startAngle=n,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(n){this._endAngle=n,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(n){this._anticlockwise=n,this.updateData()}},setRadius:function(n){return this.radius=n,this},setIterations:function(n){return n===void 0&&(n=.01),this.iterations=n,this},setStartAngle:function(n,p){return this._startAngle=n,p!==void 0&&(this._anticlockwise=p),this.updateData()},setEndAngle:function(n,p){return this._endAngle=n,p!==void 0&&(this._anticlockwise=p),this.updateData()},updateData:function(){var n=this._iterations,p=n,g=this.geom.radius,v=c(this._startAngle),f=c(this._endAngle),b=this._anticlockwise,C=g,_=g;f-=v,b?f<-r.PI2?f=-r.PI2:f>0&&(f=-r.PI2+f%r.PI2):f>r.PI2?f=r.PI2:f<0&&(f=r.PI2+f%r.PI2);for(var M=[C+Math.cos(v)*g,_+Math.sin(v)*g],E;p<1;)E=f*p+v,M.push(C+Math.cos(E)*g,_+Math.sin(E)*g),p+=n;return E=f+v,M.push(C+Math.cos(E)*g,_+Math.sin(E)*g),M.push(C+Math.cos(v)*g,_+Math.sin(v)*g),this.pathIndexes=h(M),this.pathData=M,this}});y.exports=d},42542:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39506),x=i(65960),c=i(75177),h=i(20926),o=function(r,a,d,n){d.addToRenderList(a);var p=r.currentContext;if(h(r,p,a,d,n)){var g=a.radius;p.beginPath(),p.arc(g-a.originX*(g*2),g-a.originY*(g*2),g,u(a._startAngle),u(a._endAngle),a.anticlockwise),a.closePath&&p.closePath(),a.isFilled&&(x(p,a),p.fill()),a.isStroked&&(c(p,a),p.stroke()),p.restore()}};y.exports=o},42563:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(23629),x=i(39429);x.register("arc",function(c,h,o,r,a,d,n,p){return this.displayList.add(new u(this.scene,c,h,o,r,a,d,n,p))}),x.register("circle",function(c,h,o,r,a){return this.displayList.add(new u(this.scene,c,h,o,0,360,!1,r,a))})},13609:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(41447),c=i(42542),y.exports={renderWebGL:x,renderCanvas:c}},41447:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=i(10441),c=i(34682),h=function(o,r,a,d){a.addToRenderList(r);var n=o.pipelines.set(r.pipeline),p=u(r,a,d),g=n.calcMatrix.copyFrom(p.calc),v=r._displayOriginX,f=r._displayOriginY,b=a.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&x(n,g,r,b,v,f),r.isStroked&&c(n,r,b,v,f),o.pipelines.postBatch(r)};y.exports=h},89:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(33141),c=i(94811),h=i(87841),o=i(17803),r=new u({Extends:o,Mixins:[x],initialize:function(a,d,n,p,g,v){d===void 0&&(d=0),n===void 0&&(n=0),o.call(this,a,"Curve",p),this._smoothness=32,this._curveBounds=new h,this.closePath=!1,this.setPosition(d,n),g!==void 0&&this.setFillStyle(g,v),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(a){this._smoothness=a,this.updateData()}},setSmoothness:function(a){return this._smoothness=a,this.updateData()},updateData:function(){var a=this._curveBounds,d=this._smoothness;this.geom.getBounds(a,d),this.setSize(a.width,a.height),this.updateDisplayOrigin();for(var n=[],p=this.geom.getPoints(d),g=0;g<p.length;g++)n.push(p[g].x,p[g].y);return n.push(p[0].x,p[0].y),this.pathIndexes=c(n),this.pathData=n,this}});y.exports=r},3170:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(65960),x=i(75177),c=i(20926),h=function(o,r,a,d){a.addToRenderList(r);var n=o.currentContext;if(c(o,n,r,a,d)){var p=r._displayOriginX+r._curveBounds.x,g=r._displayOriginY+r._curveBounds.y,v=r.pathData,f=v.length-1,b=v[0]-p,C=v[1]-g;n.beginPath(),n.moveTo(b,C),r.closePath||(f-=2);for(var _=2;_<f;_+=2){var M=v[_]-p,E=v[_+1]-g;n.lineTo(M,E)}r.closePath&&n.closePath(),r.isFilled&&(u(n,r),n.fill()),r.isStroked&&(x(n,r),n.stroke()),n.restore()}};y.exports=h},40511:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(89);u.register("curve",function(c,h,o,r,a){return this.displayList.add(new x(this.scene,c,h,o,r,a))})},33141:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(53987),c=i(3170),y.exports={renderWebGL:x,renderCanvas:c}},53987:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(10441),x=i(91296),c=i(34682),h=function(o,r,a,d){a.addToRenderList(r);var n=o.pipelines.set(r.pipeline),p=x(r,a,d),g=n.calcMatrix.copyFrom(p.calc),v=r._displayOriginX+r._curveBounds.x,f=r._displayOriginY+r._curveBounds.y,b=a.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&u(n,g,r,b,v,f),r.isStroked&&c(n,r,b,v,f),o.pipelines.postBatch(r)};y.exports=h},19921:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(94811),c=i(54205),h=i(8497),o=i(17803),r=new u({Extends:o,Mixins:[c],initialize:function(a,d,n,p,g,v,f){d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p=128),g===void 0&&(g=128),o.call(this,a,"Ellipse",new h(p/2,g/2,p,g)),this._smoothness=64,this.setPosition(d,n),this.width=p,this.height=g,v!==void 0&&this.setFillStyle(v,f),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(a){this._smoothness=a,this.updateData()}},setSize:function(a,d){return this.width=a,this.height=d,this.geom.setPosition(a/2,d/2),this.geom.setSize(a,d),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(a){return this._smoothness=a,this.updateData()},updateData:function(){for(var a=[],d=this.geom.getPoints(this._smoothness),n=0;n<d.length;n++)a.push(d[n].x,d[n].y);return a.push(d[0].x,d[0].y),this.pathIndexes=x(a),this.pathData=a,this}});y.exports=r},7930:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(65960),x=i(75177),c=i(20926),h=function(o,r,a,d){a.addToRenderList(r);var n=o.currentContext;if(c(o,n,r,a,d)){var p=r._displayOriginX,g=r._displayOriginY,v=r.pathData,f=v.length-1,b=v[0]-p,C=v[1]-g;n.beginPath(),n.moveTo(b,C),r.closePath||(f-=2);for(var _=2;_<f;_+=2){var M=v[_]-p,E=v[_+1]-g;n.lineTo(M,E)}n.closePath(),r.isFilled&&(u(n,r),n.fill()),r.isStroked&&(x(n,r),n.stroke()),n.restore()}};y.exports=h},1543:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(19921),x=i(39429);x.register("ellipse",function(c,h,o,r,a,d){return this.displayList.add(new u(this.scene,c,h,o,r,a,d))})},54205:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(19467),c=i(7930),y.exports={renderWebGL:x,renderCanvas:c}},19467:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(10441),x=i(91296),c=i(34682),h=function(o,r,a,d){a.addToRenderList(r);var n=o.pipelines.set(r.pipeline),p=x(r,a,d),g=n.calcMatrix.copyFrom(p.calc),v=r._displayOriginX,f=r._displayOriginY,b=a.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&u(n,g,r,b,v,f),r.isStroked&&c(n,r,b,v,f),o.pipelines.postBatch(r)};y.exports=h},30479:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(17803),c=i(26015),h=new u({Extends:x,Mixins:[c],initialize:function(o,r,a,d,n,p,g,v,f,b,C){r===void 0&&(r=0),a===void 0&&(a=0),d===void 0&&(d=128),n===void 0&&(n=128),p===void 0&&(p=32),g===void 0&&(g=32),x.call(this,o,"Grid",null),this.cellWidth=p,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(r,a),this.setSize(d,n),this.setFillStyle(v,f),b!==void 0&&this.setOutlineStyle(b,C),this.updateDisplayOrigin()},setFillStyle:function(o,r){return r===void 0&&(r=1),o===void 0?this.showCells=!1:(this.fillColor=o,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function(o,r){return r===void 0&&(r=1),o===void 0?this.showAltCells=!1:(this.altFillColor=o,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function(o,r){return r===void 0&&(r=1),o===void 0?this.showOutline=!1:(this.outlineFillColor=o,this.outlineFillAlpha=r,this.showOutline=!0),this}});y.exports=h},49912:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(65960),x=i(75177),c=i(20926),h=function(o,r,a,d){a.addToRenderList(r);var n=o.currentContext;if(c(o,n,r,a,d)){var p=-r._displayOriginX,g=-r._displayOriginY,v=a.alpha*r.alpha,f=r.width,b=r.height,C=r.cellWidth,_=r.cellHeight,M=Math.ceil(f/C),E=Math.ceil(b/_),A=C,R=_,L=C-(M*C-f),Y=_-(E*_-b),F=r.showCells,N=r.showAltCells,z=r.showOutline,U=0,q=0,Q=0,K=0,et=0;if(z&&(A--,R--,L===C&&L--,Y===_&&Y--),F&&r.fillAlpha>0)for(u(n,r),q=0;q<E;q++)for(N&&(Q=q%2),U=0;U<M;U++){if(N&&Q){Q=0;continue}Q++,K=U<M-1?A:L,et=q<E-1?R:Y,n.fillRect(p+U*C,g+q*_,K,et)}if(N&&r.altFillAlpha>0)for(u(n,r,r.altFillColor,r.altFillAlpha*v),q=0;q<E;q++)for(N&&(Q=q%2),U=0;U<M;U++){if(N&&!Q){Q=1;continue}Q=0,K=U<M-1?A:L,et=q<E-1?R:Y,n.fillRect(p+U*C,g+q*_,K,et)}if(z&&r.outlineFillAlpha>0){for(x(n,r,r.outlineFillColor,r.outlineFillAlpha*v),U=1;U<M;U++){var H=U*C;n.beginPath(),n.moveTo(H+p,g),n.lineTo(H+p,b+g),n.stroke()}for(q=1;q<E;q++){var J=q*_;n.beginPath(),n.moveTo(p,J+g),n.lineTo(p+f,J+g),n.stroke()}}n.restore()}};y.exports=h},34137:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(30479);u.register("grid",function(c,h,o,r,a,d,n,p,g,v){return this.displayList.add(new x(this.scene,c,h,o,r,a,d,n,p,g,v))})},26015:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(46161),c=i(49912),y.exports={renderWebGL:x,renderCanvas:c}},46161:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=i(70554),c=function(h,o,r,a){r.addToRenderList(o);var d=h.pipelines.set(o.pipeline),n=u(o,r,a),p=d.calcMatrix.copyFrom(n.calc);p.translate(-o._displayOriginX,-o._displayOriginY);var g=r.alpha*o.alpha,v=o.width,f=o.height,b=o.cellWidth,C=o.cellHeight,_=Math.ceil(v/b),M=Math.ceil(f/C),E=b,A=C,R=b-(_*b-v),L=C-(M*C-f),Y,F,N=o.showCells,z=o.showAltCells,U=o.showOutline,q=0,Q=0,K=0,et=0,H=0;if(U&&(E--,A--,R===b&&R--,L===C&&L--),h.pipelines.preBatch(o),N&&o.fillAlpha>0)for(Y=d.fillTint,F=x.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*g),Y.TL=F,Y.TR=F,Y.BL=F,Y.BR=F,Q=0;Q<M;Q++)for(z&&(K=Q%2),q=0;q<_;q++){if(z&&K){K=0;continue}K++,et=q<_-1?E:R,H=Q<M-1?A:L,d.batchFillRect(q*b,Q*C,et,H)}if(z&&o.altFillAlpha>0)for(Y=d.fillTint,F=x.getTintAppendFloatAlpha(o.altFillColor,o.altFillAlpha*g),Y.TL=F,Y.TR=F,Y.BL=F,Y.BR=F,Q=0;Q<M;Q++)for(z&&(K=Q%2),q=0;q<_;q++){if(z&&!K){K=1;continue}K=0,et=q<_-1?E:R,H=Q<M-1?A:L,d.batchFillRect(q*b,Q*C,et,H)}if(U&&o.outlineFillAlpha>0){var J=d.strokeTint,X=x.getTintAppendFloatAlpha(o.outlineFillColor,o.outlineFillAlpha*g);for(J.TL=X,J.TR=X,J.BL=X,J.BR=X,q=1;q<_;q++){var Z=q*b;d.batchLine(Z,0,Z,f,o.lineWidth,o.lineWidth,1,0,!1)}for(Q=1;Q<M;Q++){var $=Q*C;d.batchLine(0,$,v,$,o.lineWidth,o.lineWidth,1,0,!1)}}h.pipelines.postBatch(o)};y.exports=c},61475:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(99651),x=i(83419),c=i(17803),h=new x({Extends:c,Mixins:[u],initialize:function(o,r,a,d,n,p,g,v){r===void 0&&(r=0),a===void 0&&(a=0),d===void 0&&(d=48),n===void 0&&(n=32),p===void 0&&(p=15658734),g===void 0&&(g=10066329),v===void 0&&(v=13421772),c.call(this,o,"IsoBox",null),this.projection=4,this.fillTop=p,this.fillLeft=g,this.fillRight=v,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(r,a),this.setSize(d,n),this.updateDisplayOrigin()},setProjection:function(o){return this.projection=o,this},setFaces:function(o,r,a){return o===void 0&&(o=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),this.showTop=o,this.showLeft=r,this.showRight=a,this},setFillStyle:function(o,r,a){return this.fillTop=o,this.fillLeft=r,this.fillRight=a,this.isFilled=!0,this}});y.exports=h},11508:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(65960),x=i(20926),c=function(h,o,r,a){r.addToRenderList(o);var d=h.currentContext;if(x(h,d,o,r,a)&&o.isFilled){var n=o.width,p=o.height,g=n/2,v=n/o.projection;o.showTop&&(u(d,o,o.fillTop),d.beginPath(),d.moveTo(-g,-p),d.lineTo(0,-v-p),d.lineTo(g,-p),d.lineTo(g,-1),d.lineTo(0,v-1),d.lineTo(-g,-1),d.lineTo(-g,-p),d.fill()),o.showLeft&&(u(d,o,o.fillLeft),d.beginPath(),d.moveTo(-g,0),d.lineTo(0,v),d.lineTo(0,v-p),d.lineTo(-g,-p),d.lineTo(-g,0),d.fill()),o.showRight&&(u(d,o,o.fillRight),d.beginPath(),d.moveTo(g,0),d.lineTo(0,v),d.lineTo(0,v-p),d.lineTo(g,-p),d.lineTo(g,0),d.fill()),d.restore()}};y.exports=c},3933:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(61475);u.register("isobox",function(c,h,o,r,a,d,n){return this.displayList.add(new x(this.scene,c,h,o,r,a,d,n))})},99651:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(68149),c=i(11508),y.exports={renderWebGL:x,renderCanvas:c}},68149:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=i(70554),c=function(h,o,r,a){r.addToRenderList(o);var d=h.pipelines.set(o.pipeline),n=u(o,r,a),p=d.calcMatrix.copyFrom(n.calc),g=o.width,v=o.height,f=g/2,b=g/o.projection,C=r.alpha*o.alpha;if(o.isFilled){var _,M,E,A,R,L,Y,F,N;h.pipelines.preBatch(o),o.showTop&&(_=x.getTintAppendFloatAlpha(o.fillTop,C),M=p.getX(-f,-v),E=p.getY(-f,-v),A=p.getX(0,-b-v),R=p.getY(0,-b-v),L=p.getX(f,-v),Y=p.getY(f,-v),F=p.getX(0,b-v),N=p.getY(0,b-v),d.batchQuad(o,M,E,A,R,L,Y,F,N,0,0,1,1,_,_,_,_,2)),o.showLeft&&(_=x.getTintAppendFloatAlpha(o.fillLeft,C),M=p.getX(-f,0),E=p.getY(-f,0),A=p.getX(0,b),R=p.getY(0,b),L=p.getX(0,b-v),Y=p.getY(0,b-v),F=p.getX(-f,-v),N=p.getY(-f,-v),d.batchQuad(o,M,E,A,R,L,Y,F,N,0,0,1,1,_,_,_,_,2)),o.showRight&&(_=x.getTintAppendFloatAlpha(o.fillRight,C),M=p.getX(f,0),E=p.getY(f,0),A=p.getX(0,b),R=p.getY(0,b),L=p.getX(0,b-v),Y=p.getY(0,b-v),F=p.getX(f,-v),N=p.getY(f,-v),d.batchQuad(o,M,E,A,R,L,Y,F,N,0,0,1,1,_,_,_,_,2)),h.pipelines.postBatch(o)}};y.exports=c},16933:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(60561),c=i(17803),h=new u({Extends:c,Mixins:[x],initialize:function(o,r,a,d,n,p,g,v,f){r===void 0&&(r=0),a===void 0&&(a=0),d===void 0&&(d=48),n===void 0&&(n=32),p===void 0&&(p=!1),g===void 0&&(g=15658734),v===void 0&&(v=10066329),f===void 0&&(f=13421772),c.call(this,o,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=v,this.fillRight=f,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=p,this.isFilled=!0,this.setPosition(r,a),this.setSize(d,n),this.updateDisplayOrigin()},setProjection:function(o){return this.projection=o,this},setReversed:function(o){return this.isReversed=o,this},setFaces:function(o,r,a){return o===void 0&&(o=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),this.showTop=o,this.showLeft=r,this.showRight=a,this},setFillStyle:function(o,r,a){return this.fillTop=o,this.fillLeft=r,this.fillRight=a,this.isFilled=!0,this}});y.exports=h},79590:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(65960),x=i(20926),c=function(h,o,r,a){r.addToRenderList(o);var d=h.currentContext;if(x(h,d,o,r,a)&&o.isFilled){var n=o.width,p=o.height,g=n/2,v=n/o.projection,f=o.isReversed;o.showTop&&f&&(u(d,o,o.fillTop),d.beginPath(),d.moveTo(-g,-p),d.lineTo(0,-v-p),d.lineTo(g,-p),d.lineTo(0,v-p),d.fill()),o.showLeft&&(u(d,o,o.fillLeft),d.beginPath(),f?(d.moveTo(-g,-p),d.lineTo(0,v),d.lineTo(0,v-p)):(d.moveTo(-g,0),d.lineTo(0,v),d.lineTo(0,v-p)),d.fill()),o.showRight&&(u(d,o,o.fillRight),d.beginPath(),f?(d.moveTo(g,-p),d.lineTo(0,v),d.lineTo(0,v-p)):(d.moveTo(g,0),d.lineTo(0,v),d.lineTo(0,v-p)),d.fill()),d.restore()}};y.exports=c},49803:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(16933);u.register("isotriangle",function(c,h,o,r,a,d,n,p){return this.displayList.add(new x(this.scene,c,h,o,r,a,d,n,p))})},60561:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(51503),c=i(79590),y.exports={renderWebGL:x,renderCanvas:c}},51503:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=i(70554),c=function(h,o,r,a){r.addToRenderList(o);var d=h.pipelines.set(o.pipeline),n=u(o,r,a),p=d.calcMatrix.copyFrom(n.calc),g=o.width,v=o.height,f=g/2,b=g/o.projection,C=o.isReversed,_=r.alpha*o.alpha;if(o.isFilled){h.pipelines.preBatch(o);var M,E,A,R,L,Y,F;if(o.showTop&&C){M=x.getTintAppendFloatAlpha(o.fillTop,_),E=p.getX(-f,-v),A=p.getY(-f,-v),R=p.getX(0,-b-v),L=p.getY(0,-b-v),Y=p.getX(f,-v),F=p.getY(f,-v);var N=p.getX(0,b-v),z=p.getY(0,b-v);d.batchQuad(o,E,A,R,L,Y,F,N,z,0,0,1,1,M,M,M,M,2)}o.showLeft&&(M=x.getTintAppendFloatAlpha(o.fillLeft,_),C?(E=p.getX(-f,-v),A=p.getY(-f,-v),R=p.getX(0,b),L=p.getY(0,b),Y=p.getX(0,b-v),F=p.getY(0,b-v)):(E=p.getX(-f,0),A=p.getY(-f,0),R=p.getX(0,b),L=p.getY(0,b),Y=p.getX(0,b-v),F=p.getY(0,b-v)),d.batchTri(o,E,A,R,L,Y,F,0,0,1,1,M,M,M,2)),o.showRight&&(M=x.getTintAppendFloatAlpha(o.fillRight,_),C?(E=p.getX(f,-v),A=p.getY(f,-v),R=p.getX(0,b),L=p.getY(0,b),Y=p.getX(0,b-v),F=p.getY(0,b-v)):(E=p.getX(f,0),A=p.getY(f,0),R=p.getX(0,b),L=p.getY(0,b),Y=p.getX(0,b-v),F=p.getY(0,b-v)),d.batchTri(o,E,A,R,L,Y,F,0,0,1,1,M,M,M,2)),h.pipelines.postBatch(o)}};y.exports=c},57847:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(17803),c=i(23031),h=i(36823),o=new u({Extends:x,Mixins:[h],initialize:function(r,a,d,n,p,g,v,f,b){a===void 0&&(a=0),d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p=0),g===void 0&&(g=128),v===void 0&&(v=0),x.call(this,r,"Line",new c(n,p,g,v));var C=Math.max(1,this.geom.right-this.geom.left),_=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(a,d),this.setSize(C,_),f!==void 0&&this.setStrokeStyle(1,f,b),this.updateDisplayOrigin()},setLineWidth:function(r,a){return a===void 0&&(a=r),this._startWidth=r,this._endWidth=a,this.lineWidth=r,this},setTo:function(r,a,d,n){return this.geom.setTo(r,a,d,n),this}});y.exports=o},17440:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(75177),x=i(20926),c=function(h,o,r,a){r.addToRenderList(o);var d=h.currentContext;if(x(h,d,o,r,a)){var n=o._displayOriginX,p=o._displayOriginY;o.isStroked&&(u(d,o),d.beginPath(),d.moveTo(o.geom.x1-n,o.geom.y1-p),d.lineTo(o.geom.x2-n,o.geom.y2-p),d.stroke()),d.restore()}};y.exports=c},2481:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(57847);u.register("line",function(c,h,o,r,a,d,n,p){return this.displayList.add(new x(this.scene,c,h,o,r,a,d,n,p))})},36823:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(77385),c=i(17440),y.exports={renderWebGL:x,renderCanvas:c}},77385:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=i(70554),c=function(h,o,r,a){r.addToRenderList(o);var d=h.pipelines.set(o.pipeline),n=u(o,r,a);d.calcMatrix.copyFrom(n.calc);var p=o._displayOriginX,g=o._displayOriginY,v=r.alpha*o.alpha;if(h.pipelines.preBatch(o),o.isStroked){var f=d.strokeTint,b=x.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*v);f.TL=b,f.TR=b,f.BL=b,f.BR=b,d.batchLine(o.geom.x1-p,o.geom.y1-g,o.geom.x2-p,o.geom.y2-g,o._startWidth/2,o._endWidth/2,1,0,!1,n.sprite,n.camera)}h.pipelines.postBatch(o)};y.exports=c},24949:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(90273),x=i(83419),c=i(94811),h=i(13829),o=i(25717),r=i(17803),a=i(5469),d=new x({Extends:r,Mixins:[u],initialize:function(n,p,g,v,f,b){p===void 0&&(p=0),g===void 0&&(g=0),r.call(this,n,"Polygon",new o(v));var C=h(this.geom);this.setPosition(p,g),this.setSize(C.width,C.height),f!==void 0&&this.setFillStyle(f,b),this.updateDisplayOrigin(),this.updateData()},smooth:function(n){n===void 0&&(n=1);for(var p=0;p<n;p++)a(this.geom);return this.updateData()},setTo:function(n){this.geom.setTo(n);var p=h(this.geom);return this.setSize(p.width,p.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var n=[],p=this.geom.points,g=0;g<p.length;g++)n.push(p[g].x,p[g].y);return n.push(p[0].x,p[0].y),this.pathIndexes=c(n),this.pathData=n,this}});y.exports=d},38710:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(65960),x=i(75177),c=i(20926),h=function(o,r,a,d){a.addToRenderList(r);var n=o.currentContext;if(c(o,n,r,a,d)){var p=r._displayOriginX,g=r._displayOriginY,v=r.pathData,f=v.length-1,b=v[0]-p,C=v[1]-g;n.beginPath(),n.moveTo(b,C),r.closePath||(f-=2);for(var _=2;_<f;_+=2){var M=v[_]-p,E=v[_+1]-g;n.lineTo(M,E)}r.closePath&&n.closePath(),r.isFilled&&(u(n,r),n.fill()),r.isStroked&&(x(n,r),n.stroke()),n.restore()}};y.exports=h},64827:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(24949);u.register("polygon",function(c,h,o,r,a){return this.displayList.add(new x(this.scene,c,h,o,r,a))})},90273:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(73695),c=i(38710),y.exports={renderWebGL:x,renderCanvas:c}},73695:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(10441),x=i(91296),c=i(34682),h=function(o,r,a,d){a.addToRenderList(r);var n=o.pipelines.set(r.pipeline),p=x(r,a,d),g=n.calcMatrix.copyFrom(p.calc),v=r._displayOriginX,f=r._displayOriginY,b=a.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&u(n,g,r,b,v,f),r.isStroked&&c(n,r,b,v,f),o.pipelines.postBatch(r)};y.exports=h},74561:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(94811),c=i(87841),h=i(17803),o=i(95597),r=new u({Extends:h,Mixins:[o],initialize:function(a,d,n,p,g,v,f){d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p=128),g===void 0&&(g=128),h.call(this,a,"Rectangle",new c(0,0,p,g)),this.radius=20,this.isRounded=!1,this.setPosition(d,n),this.setSize(p,g),v!==void 0&&this.setFillStyle(v,f),this.updateDisplayOrigin(),this.updateData()},setRounded:function(a){return a===void 0&&(a=16),this.radius=a,this.isRounded=a>0,this.updateRoundedData()},setSize:function(a,d){this.width=a,this.height=d,this.geom.setSize(a,d),this.updateData(),this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=a,n.hitArea.height=d),this},updateData:function(){if(this.isRounded)return this.updateRoundedData();var a=[],d=this.geom,n=this._tempLine;return d.getLineA(n),a.push(n.x1,n.y1,n.x2,n.y2),d.getLineB(n),a.push(n.x2,n.y2),d.getLineC(n),a.push(n.x2,n.y2),d.getLineD(n),a.push(n.x2,n.y2),this.pathData=a,this},updateRoundedData:function(){var a=[],d=this.width/2,n=this.height/2,p=Math.min(d,n),g=Math.min(this.radius,p),v=d,f=n,b=Math.max(1,Math.floor(g/5));return this.arcTo(a,v-d+g,f-n+g,g,Math.PI,Math.PI*1.5,b),a.push(v+d-g,f-n),this.arcTo(a,v+d-g,f-n+g,g,Math.PI*1.5,Math.PI*2,b),a.push(v+d,f+n-g),this.arcTo(a,v+d-g,f+n-g,g,0,Math.PI*.5,b),a.push(v-d+g,f+n),this.arcTo(a,v-d+g,f+n-g,g,Math.PI*.5,Math.PI,b),a.push(v-d,f-n+g),this.pathIndexes=x(a),this.pathData=a,this},arcTo:function(a,d,n,p,g,v,f){for(var b=(v-g)/f,C=0;C<=f;C++){var _=g+b*C;a.push(d+Math.cos(_)*p,n+Math.sin(_)*p)}}});y.exports=r},48682:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(65960),x=i(75177),c=i(20926),h=function(r,a,d,n,p,g){var v=Math.min(n/2,p/2),f=Math.min(g,v);if(f===0){r.rect(a,d,n,p);return}r.moveTo(a+f,d),r.lineTo(a+n-f,d),r.arcTo(a+n,d,a+n,d+f,f),r.lineTo(a+n,d+p-f),r.arcTo(a+n,d+p,a+n-f,d+p,f),r.lineTo(a+f,d+p),r.arcTo(a,d+p,a,d+p-f,f),r.lineTo(a,d+f),r.arcTo(a,d,a+f,d,f),r.closePath()},o=function(r,a,d,n){d.addToRenderList(a);var p=r.currentContext;if(c(r,p,a,d,n)){var g=a._displayOriginX,v=a._displayOriginY;a.isFilled&&(u(p,a),a.isRounded?(p.beginPath(),h(p,-g,-v,a.width,a.height,a.radius),p.fill()):p.fillRect(-g,-v,a.width,a.height)),a.isStroked&&(x(p,a),p.beginPath(),a.isRounded?h(p,-g,-v,a.width,a.height,a.radius):p.rect(-g,-v,a.width,a.height),p.stroke()),p.restore()}};y.exports=o},87959:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(74561);u.register("rectangle",function(c,h,o,r,a,d){return this.displayList.add(new x(this.scene,c,h,o,r,a,d))})},95597:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(52059),c=i(48682),y.exports={renderWebGL:x,renderCanvas:c}},52059:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(10441),x=i(91296),c=i(34682),h=i(70554),o=function(r,a,d,n){d.addToRenderList(a);var p=r.pipelines.set(a.pipeline),g=x(a,d,n);p.calcMatrix.copyFrom(g.calc);var v=a._displayOriginX,f=a._displayOriginY,b=d.alpha*a.alpha;if(r.pipelines.preBatch(a),a.isRounded&&a.isFilled)u(p,g.calc,a,b,v,f);else if(a.isFilled){var C=p.fillTint,_=h.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*b);C.TL=_,C.TR=_,C.BL=_,C.BR=_,p.batchFillRect(-v,-f,a.width,a.height)}a.isStroked&&c(p,a,b,v,f),r.pipelines.postBatch(a)};y.exports=o},55911:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(81991),x=i(83419),c=i(94811),h=i(17803),o=new x({Extends:h,Mixins:[u],initialize:function(r,a,d,n,p,g,v,f){a===void 0&&(a=0),d===void 0&&(d=0),n===void 0&&(n=5),p===void 0&&(p=32),g===void 0&&(g=64),h.call(this,r,"Star",null),this._points=n,this._innerRadius=p,this._outerRadius=g,this.setPosition(a,d),this.setSize(g*2,g*2),v!==void 0&&this.setFillStyle(v,f),this.updateDisplayOrigin(),this.updateData()},setPoints:function(r){return this._points=r,this.updateData()},setInnerRadius:function(r){return this._innerRadius=r,this.updateData()},setOuterRadius:function(r){return this._outerRadius=r,this.updateData()},points:{get:function(){return this._points},set:function(r){this._points=r,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(r){this._innerRadius=r,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(r){this._outerRadius=r,this.updateData()}},updateData:function(){var r=[],a=this._points,d=this._innerRadius,n=this._outerRadius,p=Math.PI/2*3,g=Math.PI/a,v=n,f=n;r.push(v,f+-n);for(var b=0;b<a;b++)r.push(v+Math.cos(p)*n,f+Math.sin(p)*n),p+=g,r.push(v+Math.cos(p)*d,f+Math.sin(p)*d),p+=g;return r.push(v,f+-n),this.pathIndexes=c(r),this.pathData=r,this}});y.exports=o},64272:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(65960),x=i(75177),c=i(20926),h=function(o,r,a,d){a.addToRenderList(r);var n=o.currentContext;if(c(o,n,r,a,d)){var p=r._displayOriginX,g=r._displayOriginY,v=r.pathData,f=v.length-1,b=v[0]-p,C=v[1]-g;n.beginPath(),n.moveTo(b,C),r.closePath||(f-=2);for(var _=2;_<f;_+=2){var M=v[_]-p,E=v[_+1]-g;n.lineTo(M,E)}n.closePath(),r.isFilled&&(u(n,r),n.fill()),r.isStroked&&(x(n,r),n.stroke()),n.restore()}};y.exports=h},93697:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(55911),x=i(39429);x.register("star",function(c,h,o,r,a,d,n){return this.displayList.add(new u(this.scene,c,h,o,r,a,d,n))})},81991:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(57017),c=i(64272),y.exports={renderWebGL:x,renderCanvas:c}},57017:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(10441),x=i(91296),c=i(34682),h=function(o,r,a,d){a.addToRenderList(r);var n=o.pipelines.set(r.pipeline),p=x(r,a,d),g=n.calcMatrix.copyFrom(p.calc),v=r._displayOriginX,f=r._displayOriginY,b=a.alpha*r.alpha;o.pipelines.preBatch(r),r.isFilled&&u(n,g,r,b,v,f),r.isStroked&&c(n,r,b,v,f),o.pipelines.postBatch(r)};y.exports=h},36931:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(17803),c=i(16483),h=i(96195),o=new u({Extends:x,Mixins:[h],initialize:function(r,a,d,n,p,g,v,f,b,C,_){a===void 0&&(a=0),d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p=128),g===void 0&&(g=64),v===void 0&&(v=0),f===void 0&&(f=128),b===void 0&&(b=128),x.call(this,r,"Triangle",new c(n,p,g,v,f,b));var M=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(a,d),this.setSize(M,E),C!==void 0&&this.setFillStyle(C,_),this.updateDisplayOrigin(),this.updateData()},setTo:function(r,a,d,n,p,g){return this.geom.setTo(r,a,d,n,p,g),this.updateData()},updateData:function(){var r=[],a=this.geom,d=this._tempLine;return a.getLineA(d),r.push(d.x1,d.y1,d.x2,d.y2),a.getLineB(d),r.push(d.x2,d.y2),a.getLineC(d),r.push(d.x2,d.y2),this.pathData=r,this}});y.exports=o},85172:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(65960),x=i(75177),c=i(20926),h=function(o,r,a,d){a.addToRenderList(r);var n=o.currentContext;if(c(o,n,r,a,d)){var p=r._displayOriginX,g=r._displayOriginY,v=r.geom.x1-p,f=r.geom.y1-g,b=r.geom.x2-p,C=r.geom.y2-g,_=r.geom.x3-p,M=r.geom.y3-g;n.beginPath(),n.moveTo(v,f),n.lineTo(b,C),n.lineTo(_,M),n.closePath(),r.isFilled&&(u(n,r),n.fill()),r.isStroked&&(x(n,r),n.stroke()),n.restore()}};y.exports=h},45245:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(36931);u.register("triangle",function(c,h,o,r,a,d,n,p,g,v){return this.displayList.add(new x(this.scene,c,h,o,r,a,d,n,p,g,v))})},96195:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(83253),c=i(85172),y.exports={renderWebGL:x,renderCanvas:c}},83253:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=i(34682),c=i(70554),h=function(o,r,a,d){a.addToRenderList(r);var n=o.pipelines.set(r.pipeline),p=u(r,a,d);n.calcMatrix.copyFrom(p.calc);var g=r._displayOriginX,v=r._displayOriginY,f=a.alpha*r.alpha;if(o.pipelines.preBatch(r),r.isFilled){var b=n.fillTint,C=c.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*f);b.TL=C,b.TR=C,b.BL=C,b.BR=C;var _=r.geom.x1-g,M=r.geom.y1-v,E=r.geom.x2-g,A=r.geom.y2-v,R=r.geom.x3-g,L=r.geom.y3-v;n.batchFillTriangle(_,M,E,A,R,L,p.sprite,p.camera)}r.isStroked&&x(n,r,f,g,v),o.pipelines.postBatch(r)};y.exports=h},68287:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(9674),x=i(83419),c=i(31401),h=i(95643),o=i(92751),r=new x({Extends:h,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Size,c.TextureCrop,c.Tint,c.Transform,c.Visible,o],initialize:function(a,d,n,p,g){h.call(this,a,"Sprite"),this._crop=this.resetCropObject(),this.anims=new u(this),this.setTexture(p,g),this.setPosition(d,n),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(a,d){this.anims.update(a,d)},play:function(a,d){return this.anims.play(a,d)},playReverse:function(a,d){return this.anims.playReverse(a,d)},playAfterDelay:function(a,d){return this.anims.playAfterDelay(a,d)},playAfterRepeat:function(a,d){return this.anims.playAfterRepeat(a,d)},chain:function(a){return this.anims.chain(a)},stop:function(){return this.anims.stop()},stopAfterDelay:function(a){return this.anims.stopAfterDelay(a)},stopAfterRepeat:function(a){return this.anims.stopAfterRepeat(a)},stopOnFrame:function(a){return this.anims.stopOnFrame(a)},toJSON:function(){return c.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});y.exports=r},76552:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){x.addToRenderList(u),i.batchSprite(u,u.frame,x,c)};y.exports=P},15567:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(13059),c=i(44603),h=i(23568),o=i(68287);c.register("sprite",function(r,a){r===void 0&&(r={});var d=h(r,"key",null),n=h(r,"frame",null),p=new o(this.scene,0,0,d,n);return a!==void 0&&(r.add=a),u(this.scene,p,r),x(p,r),p})},46409:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(68287);u.register("sprite",function(c,h,o,r){return this.displayList.add(new x(this.scene,c,h,o,r))})},92751:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(9409),c=i(76552),y.exports={renderWebGL:x,renderCanvas:c}},9409:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){x.addToRenderList(u),u.pipeline.batchSprite(u,x,c)};y.exports=P},14220:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=i.canvas,h=i.context,o=i.style,r=[],a=0,d=x.length;o.maxLines>0&&o.maxLines<x.length&&(d=o.maxLines),o.syncFont(c,h);for(var n=i.letterSpacing,p=0;p<d;p++){var g=o.strokeThickness;if(n===0)g+=h.measureText(x[p]).width;else{for(var v=x[p],f=0;f<v.length;f++)g+=h.measureText(v[f]).width;v.length>1&&(g+=n*(v.length-1))}o.wordWrap&&(g-=h.measureText(" ").width),r[p]=Math.ceil(g),a=Math.max(a,r[p])}var b=u.fontSize+o.strokeThickness,C=b*d,_=i.lineSpacing;return d>1&&(C+=_*(d-1)),{width:a,height:C,lines:d,lineWidths:r,lineSpacing:_,lineHeight:b}};y.exports=P},79557:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(27919),x=function(c){var h=u.create(this),o=h.getContext("2d",{willReadFrequently:!0});c.syncFont(h,o);var r=o.measureText(c.testString);if("actualBoundingBoxAscent"in r){var a=r.actualBoundingBoxAscent,d=r.actualBoundingBoxDescent;return u.remove(h),{ascent:a,descent:d,fontSize:a+d}}var n=Math.ceil(r.width*c.baselineX),p=n,g=2*p;p=p*c.baselineY|0,h.width=n,h.height=g,o.fillStyle="#f00",o.fillRect(0,0,n,g),o.font=c._font,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(c.testString,0,p);var v={ascent:0,descent:0,fontSize:0},f=o.getImageData(0,0,n,g);if(!f)return v.ascent=p,v.descent=p+6,v.fontSize=v.ascent+v.descent,u.remove(h),v;var b=f.data,C=b.length,_=n*4,M,E,A=0,R=!1;for(M=0;M<p;M++){for(E=0;E<_;E+=4)if(b[A+E]!==255){R=!0;break}if(!R)A+=_;else break}for(v.ascent=p-M,A=C-_,R=!1,M=g;M>p;M--){for(E=0;E<_;E+=4)if(b[A+E]!==255){R=!0;break}if(!R)A-=_;else break}return v.descent=M-p,v.fontSize=v.ascent+v.descent,u.remove(h),v};y.exports=x},50171:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(40366),x=i(27919),c=i(83419),h=i(31401),o=i(95643),r=i(14220),a=i(35154),d=i(35846),n=i(61771),p=i(35762),g=i(45650),v=new c({Extends:o,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,n],initialize:function(f,b,C,_,M){b===void 0&&(b=0),C===void 0&&(C=0),o.call(this,f,"Text"),this.renderer=f.sys.renderer,this.setPosition(b,C),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=x.create(this),this.context,this.style=new p(this,M),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=g(),this.texture=f.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(_),M&&M.padding&&this.setPadding(M.padding),M&&M.lineSpacing&&this.setLineSpacing(M.lineSpacing),M&&M.letterSpacing&&this.setLetterSpacing(M.letterSpacing)},initRTL:function(){if(!this.style.rtl){this.canvas.dir="ltr",this.context.direction="ltr";return}this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",u(this.canvas,this.scene.sys.canvas),this.originX=1},runWordWrap:function(f){var b=this.style;if(b.wordWrapCallback){var C=b.wordWrapCallback.call(b.wordWrapCallbackScope,f,this);return Array.isArray(C)&&(C=C.join(`
`)),C}else return b.wordWrapWidth?b.wordWrapUseAdvanced?this.advancedWordWrap(f,this.context,this.style.wordWrapWidth):this.basicWordWrap(f,this.context,this.style.wordWrapWidth):f},advancedWordWrap:function(f,b,C){for(var _="",M=f.replace(/ +/gi," ").split(this.splitRegExp),E=M.length,A=0;A<E;A++){var R=M[A],L="";R=R.replace(/^ *|\s*$/gi,"");var Y=R.length*this.letterSpacing,F=b.measureText(R).width+Y;if(F<C){_+=R+`
`;continue}for(var N=C,z=R.split(" "),U=0;U<z.length;U++){var q=z[U],Q=q+" ",K=Q.length*this.letterSpacing,et=b.measureText(Q).width+K;if(et>N){if(U===0){for(var H=Q;H.length;){H=H.slice(0,-1);var J=H.length*this.letterSpacing;if(et=b.measureText(H).width+J,et<=N)break}if(!H.length)throw new Error("wordWrapWidth < a single character");var X=q.substr(H.length);z[U]=X,L+=H}var Z=z[U].length?U:U+1,$=z.slice(Z).join(" ").replace(/[ \n]*$/gi,"");M.splice(A+1,0,$),E=M.length;break}else L+=Q,N-=et}_+=L.replace(/[ \n]*$/gi,"")+`
`}return _=_.replace(/[\s|\n]*$/gi,""),_},basicWordWrap:function(f,b,C){for(var _="",M=f.split(this.splitRegExp),E=M.length-1,A=b.measureText(" ").width,R=0;R<=E;R++){for(var L=C,Y=M[R].split(" "),F=Y.length-1,N=0;N<=F;N++){var z=Y[N],U=z.length*this.letterSpacing,q=b.measureText(z).width+U,Q=q;N<F&&(Q+=A),Q>L&&N>0&&(_+=`
`,L=C),_+=z,N<F?(_+=" ",L-=Q):L-=q}R<E&&(_+=`
`)}return _},getWrappedText:function(f){f===void 0&&(f=this._text),this.style.syncFont(this.canvas,this.context);var b=this.runWordWrap(f);return b.split(this.splitRegExp)},setText:function(f){return!f&&f!==0&&(f=""),Array.isArray(f)&&(f=f.join(`
`)),f!==this._text&&(this._text=f.toString(),this.updateText()),this},appendText:function(f,b){b===void 0&&(b=!0),!f&&f!==0&&(f=""),Array.isArray(f)&&(f=f.join(`
`)),f=f.toString();var C=this._text.concat(b?`
`+f:f);return C!==this._text&&(this._text=C,this.updateText()),this},setStyle:function(f){return this.style.setStyle(f)},setFont:function(f){return this.style.setFont(f)},setFontFamily:function(f){return this.style.setFontFamily(f)},setFontSize:function(f){return this.style.setFontSize(f)},setFontStyle:function(f){return this.style.setFontStyle(f)},setFixedSize:function(f,b){return this.style.setFixedSize(f,b)},setBackgroundColor:function(f){return this.style.setBackgroundColor(f)},setFill:function(f){return this.style.setFill(f)},setColor:function(f){return this.style.setColor(f)},setStroke:function(f,b){return this.style.setStroke(f,b)},setShadow:function(f,b,C,_,M,E){return this.style.setShadow(f,b,C,_,M,E)},setShadowOffset:function(f,b){return this.style.setShadowOffset(f,b)},setShadowColor:function(f){return this.style.setShadowColor(f)},setShadowBlur:function(f){return this.style.setShadowBlur(f)},setShadowStroke:function(f){return this.style.setShadowStroke(f)},setShadowFill:function(f){return this.style.setShadowFill(f)},setWordWrapWidth:function(f,b){return this.style.setWordWrapWidth(f,b)},setWordWrapCallback:function(f,b){return this.style.setWordWrapCallback(f,b)},setAlign:function(f){return this.style.setAlign(f)},setResolution:function(f){return this.style.setResolution(f)},setLineSpacing:function(f){return this.lineSpacing=f,this.updateText()},setLetterSpacing:function(f){return this.letterSpacing=f,this.updateText()},setPadding:function(f,b,C,_){if(typeof f=="object"){var M=f,E=a(M,"x",null);E!==null?(f=E,C=E):(f=a(M,"left",0),C=a(M,"right",f));var A=a(M,"y",null);A!==null?(b=A,_=A):(b=a(M,"top",0),_=a(M,"bottom",b))}else f===void 0&&(f=0),b===void 0&&(b=f),C===void 0&&(C=f),_===void 0&&(_=b);return this.padding.left=f,this.padding.top=b,this.padding.right=C,this.padding.bottom=_,this.updateText()},setMaxLines:function(f){return this.style.setMaxLines(f)},setRTL:function(f){f===void 0&&(f=!0);var b=this.style;return b.rtl===f?this:(b.rtl=f,f?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",u(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),b.align==="left"?b.align="right":b.align==="right"&&(b.align="left"),this)},updateText:function(){var f=this.canvas,b=this.context,C=this.style,_=C.resolution,M=C.metrics;C.syncFont(f,b);var E=this._text;(C.wordWrapWidth||C.wordWrapCallback)&&(E=this.runWordWrap(this._text));var A=E.split(this.splitRegExp),R=r(this,M,A),L=this.padding,Y;C.fixedWidth===0?(this.width=R.width+L.left+L.right,Y=R.width):(this.width=C.fixedWidth,Y=this.width-L.left-L.right,Y<R.width&&(Y=R.width)),C.fixedHeight===0?this.height=R.height+L.top+L.bottom:this.height=C.fixedHeight;var F=this.width,N=this.height;this.updateDisplayOrigin(),F*=_,N*=_,F=Math.max(F,1),N=Math.max(N,1),f.width!==F||f.height!==N?(f.width=F,f.height=N,this.frame.setSize(F,N),C.syncFont(f,b),C.rtl&&(b.direction="rtl")):b.clearRect(0,0,F,N),b.save(),b.scale(_,_),C.backgroundColor&&(b.fillStyle=C.backgroundColor,b.fillRect(0,0,F,N)),C.syncStyle(f,b),b.translate(L.left,L.top);for(var z,U,q=0;q<R.lines;q++){if(z=C.strokeThickness/2,U=C.strokeThickness/2+q*R.lineHeight+M.ascent,q>0&&(U+=R.lineSpacing*q),C.rtl)z=F-z-L.left-L.right;else if(C.align==="right")z+=Y-R.lineWidths[q];else if(C.align==="center")z+=(Y-R.lineWidths[q])/2;else if(C.align==="justify"){var Q=.85;if(R.lineWidths[q]/R.width>=Q){var K=R.width-R.lineWidths[q],et=b.measureText(" ").width,H=A[q].trim(),J=H.split(" ");K+=(A[q].length-H.length)*et;for(var X=Math.floor(K/et),Z=0;X>0;)J[Z]+=" ",Z=(Z+1)%(J.length-1||1),--X;A[q]=J.join(" ")}}this.autoRound&&(z=Math.round(z),U=Math.round(U));var $=this.letterSpacing;if(C.strokeThickness&&$===0&&(C.syncShadow(b,C.shadowStroke),b.strokeText(A[q],z,U)),C.color)if(C.syncShadow(b,C.shadowFill),$!==0)for(var it=0,nt=A[q].split(""),at=0;at<nt.length;at++)C.strokeThickness&&(C.syncShadow(b,C.shadowStroke),b.strokeText(nt[at],z+it,U),C.syncShadow(b,C.shadowFill)),b.fillText(nt[at],z+it,U),it+=b.measureText(nt[at]).width+$;else b.fillText(A[q],z,U)}b.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(f,this.frame.source.glTexture,!0));var ht=this.input;return ht&&!ht.customHitArea&&(ht.hitArea.width=this.width,ht.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(f){this.setText(f)}},toJSON:function(){var f=h.ToJSON(this),b={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return f.data=b,f},preDestroy:function(){d(this.canvas),x.remove(this.canvas);var f=this.texture;f&&f.destroy()}});y.exports=v},79724:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){u.width===0||u.height===0||(x.addToRenderList(u),i.batchSprite(u,u.frame,x,c))};y.exports=P},71259:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(44603),c=i(23568),h=i(50171);x.register("text",function(o,r){o===void 0&&(o={});var a=c(o,"text",""),d=c(o,"style",null),n=c(o,"padding",null);n!==null&&(d.padding=n);var p=new h(this.scene,0,0,a,d);return r!==void 0&&(o.add=r),u(this.scene,p,o),p.autoRound=c(o,"autoRound",!0),p.resolution=c(o,"resolution",1),p})},68005:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(50171),x=i(39429);x.register("text",function(c,h,o,r){return this.displayList.add(new u(this.scene,c,h,o,r))})},61771:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(34397),c=i(79724),y.exports={renderWebGL:x,renderCanvas:c}},35762:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23568),c=i(35154),h=i(79557),o={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},r=new u({initialize:function(a,d){this.parent=a,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(d,!1,!0)},setStyle:function(a,d,n){d===void 0&&(d=!0),n===void 0&&(n=!1);for(var p in o){var g=n?o[p][1]:this[p];p==="wordWrapCallback"||p==="wordWrapCallbackScope"?this[p]=c(a,o[p][0],g):a&&p==="fontSize"&&typeof a.fontSize=="number"?this[p]=a.fontSize.toString()+"px":this[p]=x(a,o[p][0],g)}var v=c(a,"font",null);v!==null&&this.setFont(v,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var f=c(a,"fill",null);f!==null&&(this.color=f);var b=c(a,"metrics",!1);return b?this.metrics={ascent:c(b,"ascent",0),descent:c(b,"descent",0),fontSize:c(b,"fontSize",0)}:(d||!this.metrics)&&(this.metrics=h(this)),d?this.parent.updateText():this.parent},syncFont:function(a,d){d.font=this._font},syncStyle:function(a,d){d.textBaseline="alphabetic",d.fillStyle=this.color,d.strokeStyle=this.stroke,d.lineWidth=this.strokeThickness,d.lineCap="round",d.lineJoin="round"},syncShadow:function(a,d){d?(a.shadowOffsetX=this.shadowOffsetX,a.shadowOffsetY=this.shadowOffsetY,a.shadowColor=this.shadowColor,a.shadowBlur=this.shadowBlur):(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowColor=0,a.shadowBlur=0)},update:function(a){return a&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=h(this)),this.parent.updateText()},setFont:function(a,d){d===void 0&&(d=!0);var n=a,p="",g="";if(typeof a!="string")n=c(a,"fontFamily","Courier"),p=c(a,"fontSize","16px"),g=c(a,"fontStyle","");else{var v=a.split(" "),f=0;g=v.length>2?v[f++]:"",p=v[f++]||"16px",n=v[f++]||"Courier"}return(n!==this.fontFamily||p!==this.fontSize||g!==this.fontStyle)&&(this.fontFamily=n,this.fontSize=p,this.fontStyle=g,d&&this.update(!0)),this.parent},setFontFamily:function(a){return this.fontFamily!==a&&(this.fontFamily=a,this.update(!0)),this.parent},setFontStyle:function(a){return this.fontStyle!==a&&(this.fontStyle=a,this.update(!0)),this.parent},setFontSize:function(a){return typeof a=="number"&&(a=a.toString()+"px"),this.fontSize!==a&&(this.fontSize=a,this.update(!0)),this.parent},setTestString:function(a){return this.testString=a,this.update(!0)},setFixedSize:function(a,d){return this.fixedWidth=a,this.fixedHeight=d,a&&(this.parent.width=a),d&&(this.parent.height=d),this.update(!1)},setBackgroundColor:function(a){return this.backgroundColor=a,this.update(!1)},setFill:function(a){return this.color=a,this.update(!1)},setColor:function(a){return this.color=a,this.update(!1)},setResolution:function(a){return this.resolution=a,this.update(!1)},setStroke:function(a,d){return d===void 0&&(d=this.strokeThickness),a===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==a||this.strokeThickness!==d)&&(this.stroke=a,this.strokeThickness=d,this.update(!0)),this.parent},setShadow:function(a,d,n,p,g,v){return a===void 0&&(a=0),d===void 0&&(d=0),n===void 0&&(n="#000"),p===void 0&&(p=0),g===void 0&&(g=!1),v===void 0&&(v=!0),this.shadowOffsetX=a,this.shadowOffsetY=d,this.shadowColor=n,this.shadowBlur=p,this.shadowStroke=g,this.shadowFill=v,this.update(!1)},setShadowOffset:function(a,d){return a===void 0&&(a=0),d===void 0&&(d=a),this.shadowOffsetX=a,this.shadowOffsetY=d,this.update(!1)},setShadowColor:function(a){return a===void 0&&(a="#000"),this.shadowColor=a,this.update(!1)},setShadowBlur:function(a){return a===void 0&&(a=0),this.shadowBlur=a,this.update(!1)},setShadowStroke:function(a){return this.shadowStroke=a,this.update(!1)},setShadowFill:function(a){return this.shadowFill=a,this.update(!1)},setWordWrapWidth:function(a,d){return d===void 0&&(d=!1),this.wordWrapWidth=a,this.wordWrapUseAdvanced=d,this.update(!1)},setWordWrapCallback:function(a,d){return d===void 0&&(d=null),this.wordWrapCallback=a,this.wordWrapCallbackScope=d,this.update(!1)},setAlign:function(a){return a===void 0&&(a="left"),this.align=a,this.update(!1)},setMaxLines:function(a){return a===void 0&&(a=0),this.maxLines=a,this.update(!1)},getTextMetrics:function(){var a=this.metrics;return{ascent:a.ascent,descent:a.descent,fontSize:a.fontSize}},toJSON:function(){var a={};for(var d in o)a[d]=this[d];return a.metrics=this.getTextMetrics(),a},destroy:function(){this.parent=void 0}});y.exports=r},34397:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(70554),x=function(c,h,o,r){if(!(h.width===0||h.height===0)){o.addToRenderList(h);var a=h.frame,d=a.width,n=a.height,p=u.getTintAppendFloatAlpha,g=c.pipelines.set(h.pipeline,h),v=g.setTexture2D(a.glTexture,h);g.batchTexture(h,a.glTexture,d,n,h.x,h.y,d/h.style.resolution,n/h.style.resolution,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.displayOriginX,h.displayOriginY,0,0,d,n,p(h.tintTopLeft,o.alpha*h._alphaTL),p(h.tintTopRight,o.alpha*h._alphaTR),p(h.tintBottomLeft,o.alpha*h._alphaBL),p(h.tintBottomRight,o.alpha*h._alphaBR),h.tintFill,0,0,o,r,!1,v)}};y.exports=x},20839:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(27919),x=i(83419),c=i(31401),h=i(95643),o=i(98439),r=i(68703),a=i(56295),d=i(45650),n=i(26099),p=8,g=new x({Extends:h,Mixins:[c.Alpha,c.BlendMode,c.ComputedSize,c.Crop,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Tint,c.Transform,c.Visible,a],initialize:function(v,f,b,C,_,M,E){var A=v.sys.renderer;h.call(this,v,"TileSprite");var R=v.sys.textures.get(M),L=R.get(E);L.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),R=v.sys.textures.get("__MISSING"),L=R.get()),R.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),R=v.sys.textures.get("__MISSING"),L=R.get()),!C||!_?(C=C||L.width,_=_||L.height):(C=Math.floor(C),_=Math.floor(_)),this._tilePosition=new n,this._tileScale=new n(1,1),this.dirty=!1,this.renderer=A,this.canvas=u.create(this,C,_),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=R,this.displayFrame=L,this._crop=this.resetCropObject(),this._textureKey=d(),this.texture=v.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=o(L.width),this.potHeight=o(L.height),this.fillCanvas=u.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(f,b),this.setSize(C,_),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(v,f){return this.displayTexture=this.scene.sys.textures.get(v),this.setFrame(f)},setFrame:function(v){var f=this.displayTexture.get(v);return this.potWidth=o(f.width),this.potHeight=o(f.height),this.canvas.width=0,!f.cutWidth||!f.cutHeight?this.renderFlags&=~p:this.renderFlags|=p,this.displayFrame=f,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(v,f){return v!==void 0&&(this.tilePositionX=v),f!==void 0&&(this.tilePositionY=f),this},setTileScale:function(v,f){return v===void 0&&(v=this.tileScaleX),f===void 0&&(f=v),this.tileScaleX=v,this.tileScaleY=f,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var v=this.displayFrame;if(v.source.isRenderTexture||v.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var f=this.fillContext,b=this.fillCanvas,C=this.potWidth,_=this.potHeight;(!this.renderer||!this.renderer.gl)&&(C=v.cutWidth,_=v.cutHeight),f.clearRect(0,0,C,_),b.width=C,b.height=_,f.drawImage(v.source.image,v.cutX,v.cutY,v.cutWidth,v.cutHeight,0,0,C,_),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(b,this.fillPattern):this.fillPattern=f.createPattern(b,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var v=this.canvas;if((v.width!==this.width||v.height!==this.height)&&(v.width=this.width,v.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var f=this.context;this.scene.sys.game.config.antialias||r.disable(f);var b=this._tileScale.x,C=this._tileScale.y,_=this._tilePosition.x,M=this._tilePosition.y;f.clearRect(0,0,this.width,this.height),f.save(),f.scale(b,C),f.translate(-_,-M),f.fillStyle=this.fillPattern,f.fillRect(_,M,this.width/b,this.height/C),f.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),u.remove(this.canvas),u.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var v=this.texture;v&&v.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(v){this._tilePosition.x=v,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(v){this._tilePosition.y=v,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(v){this._tileScale.x=v,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(v){this._tileScale.y=v,this.dirty=!0}}});y.exports=g},46992:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){u.updateCanvas(),x.addToRenderList(u),i.batchSprite(u,u.frame,x,c)};y.exports=P},14167:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(44603),c=i(23568),h=i(20839);x.register("tileSprite",function(o,r){o===void 0&&(o={});var a=c(o,"x",0),d=c(o,"y",0),n=c(o,"width",512),p=c(o,"height",512),g=c(o,"key",""),v=c(o,"frame",""),f=new h(this.scene,a,d,n,p,g,v);return r!==void 0&&(o.add=r),u(this.scene,f,o),f})},91681:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(20839),x=i(39429);x.register("tileSprite",function(c,h,o,r,a,d){return this.displayList.add(new u(this.scene,c,h,o,r,a,d))})},56295:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(18553),c=i(46992),y.exports={renderWebGL:x,renderCanvas:c}},18553:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(70554),x=function(c,h,o,r){h.updateCanvas();var a=h.width,d=h.height;if(!(a===0||d===0)){o.addToRenderList(h);var n=u.getTintAppendFloatAlpha,p=c.pipelines.set(h.pipeline,h),g=p.setTexture2D(h.fillPattern,h);p.batchTexture(h,h.fillPattern,h.displayFrame.width*h.tileScaleX,h.displayFrame.height*h.tileScaleY,h.x,h.y,a,d,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.originX*a,h.originY*d,0,0,a,d,n(h.tintTopLeft,o.alpha*h._alphaTL),n(h.tintTopRight,o.alpha*h._alphaTR),n(h.tintBottomLeft,o.alpha*h._alphaBL),n(h.tintBottomRight,o.alpha*h._alphaBR),h.tintFill,h.tilePositionX%h.displayFrame.width/h.displayFrame.width,h.tilePositionY%h.displayFrame.height/h.displayFrame.height,o,r,!1,g)}};y.exports=x},18471:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45319),x=i(83419),c=i(31401),h=i(51708),o=i(8443),r=i(95643),a=i(36383),d=i(14463),n=i(45650),p=i(10247),g=new x({Extends:r,Mixins:[c.Alpha,c.BlendMode,c.ComputedSize,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.TextureCrop,c.Tint,c.Transform,c.Visible,p],initialize:function(v,f,b,C){r.call(this,v,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=n(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var _=v.sys.game;this._device=_.device.video,this.setPosition(f,b),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),_.events.on(o.PAUSE,this.globalPause,this),_.events.on(o.RESUME,this.globalResume,this);var M=v.sys.sound;M&&M.on(d.GLOBAL_MUTE,this.globalMute,this),C&&this.load(C)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(v){var f=this.scene.sys.cache.video.get(v);return f?(this.cacheKey=v,this.loadHandler(f.url,f.noAudio,f.crossOrigin)):console.warn("No video in cache for key: "+v),this},changeSource:function(v,f,b,C,_){f===void 0&&(f=!0),b===void 0&&(b=!1),this.cacheKey!==v&&(this.load(v),f&&this.play(b,C,_))},getVideoKey:function(){return this.cacheKey},loadURL:function(v,f,b){f===void 0&&(f=!1);var C=this._device.getVideoURL(v);return C?(this.cacheKey="",this.loadHandler(C.url,f,b)):console.warn("No supported video format found for "+v),this},loadMediaStream:function(v,f,b){return this.loadHandler(null,f,b,v)},loadHandler:function(v,f,b,C){f||(f=!1);var _=this.video;if(_?(this.removeLoadEventHandlers(),this.stop()):(_=document.createElement("video"),_.controls=!1,_.setAttribute("playsinline","playsinline"),_.setAttribute("preload","auto"),_.setAttribute("disablePictureInPicture","true")),f?(_.muted=!0,_.defaultMuted=!0,_.setAttribute("autoplay","autoplay")):(_.muted=!1,_.defaultMuted=!1,_.removeAttribute("autoplay")),b?_.setAttribute("crossorigin",b):_.removeAttribute("crossorigin"),C)if("srcObject"in _)try{_.srcObject=C}catch(E){if(E.name!=="TypeError")throw E;_.src=URL.createObjectURL(C)}else _.src=URL.createObjectURL(C);else _.src=v;this.retry=0,this.video=_,this._playCalled=!1,_.load(),this.addLoadEventHandlers();var M=this.scene.sys.textures.get(this._key);return this.setTexture(M),this},requestVideoFrame:function(v,f){var b=this.video;if(b){var C=f.width,_=f.height,M=this.videoTexture,E=this.videoTextureSource,A=!M||E.source!==b;A?(this._codePaused=b.paused,this._codeMuted=b.muted,M?(E.source=b,E.width=C,E.height=_,M.get().setSize(C,_)):(M=this.scene.sys.textures.create(this._key,b,C,_),M.add("__BASE",0,0,0,C,_),this.setTexture(M),this.videoTexture=M,this.videoTextureSource=M.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(h.VIDEO_TEXTURE,this,M)),this.setSizeToFrame(),this.updateDisplayOrigin()):E.update(),this.isStalled=!1,this.metadata=f;var R=f.mediaTime;A&&(this._lastUpdate=R,this.emit(h.VIDEO_CREATED,this,C,_),this.frameReady||(this.frameReady=!0,this.emit(h.VIDEO_PLAY,this))),this._playingMarker?R>=this._markerOut&&(b.loop?(b.currentTime=this._markerIn,this.emit(h.VIDEO_LOOP,this)):(this.stop(!1),this.emit(h.VIDEO_COMPLETE,this))):R<this._lastUpdate&&this.emit(h.VIDEO_LOOP,this),this._lastUpdate=R,this._getFrame?(this.removeEventHandlers(),b.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(v,f,b){f===void 0&&(f=-1),b===void 0&&(b=a.MAX_SAFE_INTEGER);var C=this.video;return!C||this.isPlaying()?(C||console.warn("Video not loaded"),this):(v===void 0&&(v=C.loop),C.loop=v,this._markerIn=f,this._markerOut=b,this._playingMarker=f>-1&&b>f&&b<a.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=C.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var v=this.video;return!v||this.isPlaying()?(v||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=v.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var v=this.video;v&&(v.addEventListener("error",this._loadCallbackHandler),v.addEventListener("abort",this._loadCallbackHandler),v.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var v=this.video;v&&(v.removeEventListener("error",this._loadCallbackHandler),v.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var v=this.video;if(v){var f=this._callbacks;for(var b in f)v.addEventListener(b,f[b])}},removeEventHandlers:function(){var v=this.video;if(v){var f=this._callbacks;for(var b in f)v.removeEventListener(b,f[b])}},createPlayPromise:function(v){v===void 0&&(v=!0);var f=this.video,b=f.play();if(b!==void 0){var C=this.playSuccess.bind(this),_=this.playError.bind(this);if(!v){var M=this;_=function(){M.failedPlayAttempts++}}b.then(C).catch(_)}else f.addEventListener("playing",this._callbacks.legacy),v||this.failedPlayAttempts++},addMarker:function(v,f,b){return!isNaN(f)&&f>=0&&!isNaN(b)&&b>f&&(this.markers[v]=[f,b]),this},playMarker:function(v,f){var b=this.markers[v];return b&&this.play(f,b[0],b[1]),this},removeMarker:function(v){return delete this.markers[v],this},snapshot:function(v,f){return v===void 0&&(v=this.width),f===void 0&&(f=this.height),this.snapshotArea(0,0,this.width,this.height,v,f)},snapshotArea:function(v,f,b,C,_,M){v===void 0&&(v=0),f===void 0&&(f=0),b===void 0&&(b=this.width),C===void 0&&(C=this.height),_===void 0&&(_=b),M===void 0&&(M=C);var E=this.video,A=this.snapshotTexture;return A?(A.setSize(_,M),E&&A.context.drawImage(E,v,f,b,C,0,0,_,M)):(A=this.scene.sys.textures.createCanvas(n(),_,M),this.snapshotTexture=A,E&&A.context.drawImage(E,v,f,b,C,0,0,_,M)),A.update()},saveSnapshotTexture:function(v){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,v):this.snapshotTexture=this.scene.sys.textures.createCanvas(v,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(h.VIDEO_UNLOCKED,this));var v=this.scene.sys.sound;v&&v.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(v){var f=v.name;f==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(h.VIDEO_LOCKED,this)):f==="NotSupportedError"?(this.stop(!1),this.emit(h.VIDEO_UNSUPPORTED,this,v)):(this.stop(!1),this.emit(h.VIDEO_ERROR,this,v))},legacyPlayHandler:function(){var v=this.video;v&&(this.playSuccess(),v.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(h.VIDEO_PLAYING,this)},loadErrorHandler:function(v){this.stop(!1),this.emit(h.VIDEO_ERROR,this,v)},metadataHandler:function(v){this.emit(h.VIDEO_METADATA,this,v)},setSizeToFrame:function(v){v||(v=this.frame),this.width=v.realWidth,this.height=v.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=this.width,f.hitArea.height=this.height),this},stalledHandler:function(v){this.isStalled=!0,this.emit(h.VIDEO_STALLED,this,v)},completeHandler:function(){this._playCalled=!1,this.emit(h.VIDEO_COMPLETE,this)},preUpdate:function(v,f){var b=this.video;!b||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=f,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(v){var f=this.video;if(f){var b=f.duration;if(b!==1/0&&!isNaN(b)){var C=b*v;this.setCurrentTime(C)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(v){var f=this.video;if(f){if(typeof v=="string"){var b=v[0],C=parseFloat(v.substr(1));b==="+"?v=f.currentTime+C:b==="-"&&(v=f.currentTime-C)}f.currentTime=v}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(h.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(h.VIDEO_SEEKED,this)},getProgress:function(){var v=this.video;if(v){var f=v.duration;if(f!==1/0&&!isNaN(f))return v.currentTime/f}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(v){v===void 0&&(v=!0),this._codeMuted=v;var f=this.video;return f&&(f.muted=this._systemMuted?!0:v),this},isMuted:function(){return this._codeMuted},globalMute:function(v,f){this._systemMuted=f;var b=this.video;b&&(b.muted=this._codeMuted?!0:f)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(v){v===void 0&&(v=!0);var f=this.video;return this._codePaused=v,f&&!f.ended&&(v?f.paused||(this.removeEventHandlers(),f.pause()):v||(this._playCalled?f.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(v){return v===void 0&&(v=1),this.video&&(this.video.volume=u(v,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(v){return this.video&&(this.video.playbackRate=v),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(v){return v===void 0&&(v=!0),this.video&&(this.video.loop=v),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(v,f){return f===void 0&&(f=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,v),this.videoTextureSource.setFlipY(f)),this._key=v,this.flipY=f,!!this.videoTexture},stop:function(v){v===void 0&&(v=!0);var f=this.video;return f&&(this.removeEventHandlers(),f.cancelVideoFrameCallback(this._rfvCallbackId),f.pause()),this.retry=0,this._playCalled=!1,v&&this.emit(h.VIDEO_STOP,this),this},removeVideoElement:function(){var v=this.video;if(v){for(v.parentNode&&v.parentNode.removeChild(v);v.hasChildNodes();)v.removeChild(v.firstChild);v.removeAttribute("autoplay"),v.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var v=this.scene.sys.game.events;v.off(o.PAUSE,this.globalPause,this),v.off(o.RESUME,this.globalResume,this);var f=this.scene.sys.sound;f&&f.off(d.GLOBAL_MUTE,this.globalMute,this)}});y.exports=g},58352:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){u.videoTexture&&(x.addToRenderList(u),i.batchSprite(u,u.frame,x,c))};y.exports=P},11511:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25305),x=i(44603),c=i(23568),h=i(18471);x.register("video",function(o,r){o===void 0&&(o={});var a=c(o,"key",null),d=new h(this.scene,0,0,a);return r!==void 0&&(o.add=r),u(this.scene,d,o),d})},89025:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(18471),x=i(39429);x.register("video",function(c,h,o){return this.displayList.add(new u(this.scene,c,h,o))})},10247:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(29849),c=i(58352),y.exports={renderWebGL:x,renderCanvas:c}},29849:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){u.videoTexture&&(x.addToRenderList(u),u.pipeline.batchSprite(u,x,c))};y.exports=P},41481:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(10312),x=i(96503),c=i(87902),h=i(83419),o=i(31401),r=i(95643),a=i(87841),d=i(37303),n=new h({Extends:r,Mixins:[o.Depth,o.GetBounds,o.Origin,o.Transform,o.ScrollFactor,o.Visible],initialize:function(p,g,v,f,b){f===void 0&&(f=1),b===void 0&&(b=f),r.call(this,p,"Zone"),this.setPosition(g,v),this.width=f,this.height=b,this.blendMode=u.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(p){this.scaleX=p/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(p){this.scaleY=p/this.height}},setSize:function(p,g,v){v===void 0&&(v=!0),this.width=p,this.height=g,this.updateDisplayOrigin();var f=this.input;return v&&f&&!f.customHitArea&&(f.hitArea.width=p,f.hitArea.height=g),this},setDisplaySize:function(p,g){return this.displayWidth=p,this.displayHeight=g,this},setCircleDropZone:function(p){return this.setDropZone(new x(0,0,p),c)},setRectangleDropZone:function(p,g){return this.setDropZone(new a(0,0,p,g),d)},setDropZone:function(p,g){return this.input||this.setInteractive(p,g,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(p,g,v){v.addToRenderList(g)},renderWebGL:function(p,g,v){v.addToRenderList(g)}});y.exports=n},95261:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(44603),x=i(23568),c=i(41481);u.register("zone",function(h){var o=x(h,"x",0),r=x(h,"y",0),a=x(h,"width",1),d=x(h,"height",a);return new c(this.scene,o,r,a,d)})},84175:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(41481),x=i(39429);x.register("zone",function(c,h,o,r){return this.displayList.add(new u(this.scene,c,h,o,r))})},95166:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.radius>0?Math.PI*i.radius*i.radius:0};y.exports=P},96503:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(87902),c=i(26241),h=i(79124),o=i(23777),r=i(28176),a=new u({initialize:function(d,n,p){d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p=0),this.type=o.CIRCLE,this.x=d,this.y=n,this._radius=p,this._diameter=p*2},contains:function(d,n){return x(this,d,n)},getPoint:function(d,n){return c(this,d,n)},getPoints:function(d,n,p){return h(this,d,n,p)},getRandomPoint:function(d){return r(this,d)},setTo:function(d,n,p){return this.x=d,this.y=n,this._radius=p,this._diameter=p*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(d,n){return n===void 0&&(n=d),this.x=d,this.y=n,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(d){this._radius=d,this._diameter=d*2}},diameter:{get:function(){return this._diameter},set:function(d){this._diameter=d,this._radius=d*.5}},left:{get:function(){return this.x-this._radius},set:function(d){this.x=d+this._radius}},right:{get:function(){return this.x+this._radius},set:function(d){this.x=d-this._radius}},top:{get:function(){return this.y-this._radius},set:function(d){this.y=d+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(d){this.y=d-this._radius}}});y.exports=a},71562:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return 2*(Math.PI*i.radius)};y.exports=P},92110:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h,o){return o===void 0&&(o=new u),o.x=c.x+c.radius*Math.cos(h),o.y=c.y+c.radius*Math.sin(h),o};y.exports=x},42250:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(96503),x=function(c){return new u(c.x,c.y,c.radius)};y.exports=x},87902:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){if(i.radius>0&&u>=i.left&&u<=i.right&&x>=i.top&&x<=i.bottom){var c=(i.x-u)*(i.x-u),h=(i.y-x)*(i.y-x);return c+h<=i.radius*i.radius}else return!1};y.exports=P},5698:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87902),x=function(c,h){return u(c,h.x,h.y)};y.exports=x},70588:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87902),x=function(c,h){return u(c,h.x,h.y)&&u(c,h.right,h.y)&&u(c,h.x,h.bottom)&&u(c,h.right,h.bottom)};y.exports=x},26394:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u.setTo(i.x,i.y,i.radius)};y.exports=P},76278:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.x===u.x&&i.y===u.y&&i.radius===u.radius};y.exports=P},2074:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87841),x=function(c,h){return h===void 0&&(h=new u),h.x=c.left,h.y=c.top,h.width=c.diameter,h.height=c.diameter,h};y.exports=x},26241:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(92110),x=i(62945),c=i(36383),h=i(2141),o=function(r,a,d){d===void 0&&(d=new h);var n=x(a,0,c.PI2);return u(r,n,d)};y.exports=o},79124:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(71562),x=i(92110),c=i(62945),h=i(36383),o=function(r,a,d,n){n===void 0&&(n=[]),!a&&d>0&&(a=u(r)/d);for(var p=0;p<a;p++){var g=c(p/a,0,h.PI2);n.push(x(r,g))}return n};y.exports=o},50884:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return i.x+=u,i.y+=x,i};y.exports=P},39212:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.x+=u.x,i.y+=u.y,i};y.exports=P},28176:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h){h===void 0&&(h=new u);var o=2*Math.PI*Math.random(),r=Math.random()+Math.random(),a=r>1?2-r:r,d=a*Math.cos(o),n=a*Math.sin(o);return h.x=c.x+d*c.radius,h.y=c.y+n*c.radius,h};y.exports=x},88911:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(96503);u.Area=i(95166),u.Circumference=i(71562),u.CircumferencePoint=i(92110),u.Clone=i(42250),u.Contains=i(87902),u.ContainsPoint=i(5698),u.ContainsRect=i(70588),u.CopyFrom=i(26394),u.Equals=i(76278),u.GetBounds=i(2074),u.GetPoint=i(26241),u.GetPoints=i(79124),u.Offset=i(50884),u.OffsetPoint=i(39212),u.Random=i(28176),y.exports=u},23777:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};y.exports=P},78874:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.isEmpty()?0:i.getMajorRadius()*i.getMinorRadius()*Math.PI};y.exports=P},92990:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u=i.width/2,x=i.height/2,c=Math.pow(u-x,2)/Math.pow(u+x,2);return Math.PI*(u+x)*(1+3*c/(10+Math.sqrt(4-3*c)))};y.exports=P},79522:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h,o){o===void 0&&(o=new u);var r=c.width/2,a=c.height/2;return o.x=c.x+r*Math.cos(h),o.y=c.y+a*Math.sin(h),o};y.exports=x},58102:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(8497),x=function(c){return new u(c.x,c.y,c.width,c.height)};y.exports=x},81154:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){if(i.width<=0||i.height<=0)return!1;var c=(u-i.x)/i.width,h=(x-i.y)/i.height;return c*=c,h*=h,c+h<.25};y.exports=P},46662:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(81154),x=function(c,h){return u(c,h.x,h.y)};y.exports=x},1632:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(81154),x=function(c,h){return u(c,h.x,h.y)&&u(c,h.right,h.y)&&u(c,h.x,h.bottom)&&u(c,h.right,h.bottom)};y.exports=x},65534:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u.setTo(i.x,i.y,i.width,i.height)};y.exports=P},8497:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(81154),c=i(90549),h=i(48320),o=i(23777),r=i(24820),a=new u({initialize:function(d,n,p,g){d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=o.ELLIPSE,this.x=d,this.y=n,this.width=p,this.height=g},contains:function(d,n){return x(this,d,n)},getPoint:function(d,n){return c(this,d,n)},getPoints:function(d,n,p){return h(this,d,n,p)},getRandomPoint:function(d){return r(this,d)},setTo:function(d,n,p,g){return this.x=d,this.y=n,this.width=p,this.height=g,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(d,n){return n===void 0&&(n=d),this.x=d,this.y=n,this},setSize:function(d,n){return n===void 0&&(n=d),this.width=d,this.height=n,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(d){this.x=d+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(d){this.y=d+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});y.exports=a},36146:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.x===u.x&&i.y===u.y&&i.width===u.width&&i.height===u.height};y.exports=P},23694:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87841),x=function(c,h){return h===void 0&&(h=new u),h.x=c.left,h.y=c.top,h.width=c.width,h.height=c.height,h};y.exports=x},90549:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(79522),x=i(62945),c=i(36383),h=i(2141),o=function(r,a,d){d===void 0&&(d=new h);var n=x(a,0,c.PI2);return u(r,n,d)};y.exports=o},48320:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(92990),x=i(79522),c=i(62945),h=i(36383),o=function(r,a,d,n){n===void 0&&(n=[]),!a&&d>0&&(a=u(r)/d);for(var p=0;p<a;p++){var g=c(p/a,0,h.PI2);n.push(x(r,g))}return n};y.exports=o},73424:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return i.x+=u,i.y+=x,i};y.exports=P},44808:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.x+=u.x,i.y+=u.y,i};y.exports=P},24820:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h){h===void 0&&(h=new u);var o=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return h.x=c.x+r*Math.cos(o)*c.width/2,h.y=c.y+r*Math.sin(o)*c.height/2,h};y.exports=x},49203:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(8497);u.Area=i(78874),u.Circumference=i(92990),u.CircumferencePoint=i(79522),u.Clone=i(58102),u.Contains=i(81154),u.ContainsPoint=i(46662),u.ContainsRect=i(1632),u.CopyFrom=i(65534),u.Equals=i(36146),u.GetBounds=i(23694),u.GetPoint=i(90549),u.GetPoints=i(48320),u.Offset=i(73424),u.OffsetPoint=i(44808),u.Random=i(24820),y.exports=u},55738:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(23777),x=i(79291),c={Circle:i(88911),Ellipse:i(49203),Intersects:i(91865),Line:i(2529),Mesh:i(73090),Point:i(43711),Polygon:i(58423),Rectangle:i(93232),Triangle:i(84435)};c=x(!1,c,u),y.exports=c},2044:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(20339),x=function(c,h){return u(c.x,c.y,h.x,h.y)<=c.radius+h.radius};y.exports=x},81491:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=u.width/2,c=u.height/2,h=Math.abs(i.x-u.x-x),o=Math.abs(i.y-u.y-c),r=x+i.radius,a=c+i.radius;if(h>r||o>a)return!1;if(h<=x||o<=c)return!0;var d=h-x,n=o-c,p=d*d,g=n*n,v=i.radius*i.radius;return p+g<=v};y.exports=P},63376:(y,P,i)=>{/**
* @author       Florian Vazelle
* @author       Geoffrey Glaive
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=i(2044),c=function(h,o,r){if(r===void 0&&(r=[]),x(h,o)){var a=h.x,d=h.y,n=h.radius,p=o.x,g=o.y,v=o.radius,f,b,C,_,M;if(d===g)M=(v*v-n*n-p*p+a*a)/(2*(a-p)),f=1,b=-2*g,C=p*p+M*M-2*p*M+g*g-v*v,_=b*b-4*f*C,_===0?r.push(new u(M,-b/(2*f))):_>0&&(r.push(new u(M,(-b+Math.sqrt(_))/(2*f))),r.push(new u(M,(-b-Math.sqrt(_))/(2*f))));else{var E=(a-p)/(d-g),A=(v*v-n*n-p*p+a*a-g*g+d*d)/(2*(d-g));f=E*E+1,b=2*d*E-2*A*E-2*a,C=a*a+d*d+A*A-n*n-2*d*A,_=b*b-4*f*C,_===0?(M=-b/(2*f),r.push(new u(M,A-M*E))):_>0&&(M=(-b+Math.sqrt(_))/(2*f),r.push(new u(M,A-M*E)),M=(-b-Math.sqrt(_))/(2*f),r.push(new u(M,A-M*E)))}}return r};y.exports=c},97439:(y,P,i)=>{/**
* @author       Florian Vazelle
* @author       Geoffrey Glaive
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(4042),x=i(81491),c=function(h,o,r){if(r===void 0&&(r=[]),x(h,o)){var a=o.getLineA(),d=o.getLineB(),n=o.getLineC(),p=o.getLineD();u(a,h,r),u(d,h,r),u(n,h,r),u(p,h,r)}return r};y.exports=c},4042:(y,P,i)=>{/**
* @author       Florian Vazelle
* @author       Geoffrey Glaive
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=i(80462),c=function(h,o,r){if(r===void 0&&(r=[]),x(h,o)){var a=h.x1,d=h.y1,n=h.x2,p=h.y2,g=o.x,v=o.y,f=o.radius,b=n-a,C=p-d,_=a-g,M=d-v,E=b*b+C*C,A=2*(b*_+C*M),R=_*_+M*M-f*f,L=A*A-4*E*R,Y,F;if(L===0){var N=-A/(2*E);Y=a+N*b,F=d+N*C,N>=0&&N<=1&&r.push(new u(Y,F))}else if(L>0){var z=(-A-Math.sqrt(L))/(2*E);Y=a+z*b,F=d+z*C,z>=0&&z<=1&&r.push(new u(Y,F));var U=(-A+Math.sqrt(L))/(2*E);Y=a+U*b,F=d+U*C,U>=0&&U<=1&&r.push(new u(Y,F))}}return r};y.exports=c},36100:(y,P,i)=>{/**
* @author       Richard Davey
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25836),x=function(c,h,o,r){o===void 0&&(o=!1);var a=c.x1,d=c.y1,n=c.x2,p=c.y2,g=h.x1,v=h.y1,f=h.x2,b=h.y2,C=n-a,_=p-d,M=f-g,E=b-v,A=C*E-_*M;if(A===0)return null;var R,L,Y;if(o){if(R=(C*(v-d)+_*(a-g))/(M*_-E*C),C!==0)L=(g+M*R-a)/C;else if(_!==0)L=(v+E*R-d)/_;else return null;if(L<0||R<0||R>1)return null;Y=L}else{if(R=((g-a)*E-(v-d)*M)/A,L=((d-v)*C-(a-g)*_)/A,R<0||R>1||L<0||L>1)return null;Y=R}return r===void 0&&(r=new u),r.set(a+C*Y,d+_*Y,Y)};y.exports=x},3073:(y,P,i)=>{/**
* @author       Richard Davey
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(36100),x=i(23031),c=i(25836),h=new x,o=new c,r=function(a,d,n,p){n===void 0&&(n=!1),p===void 0&&(p=new c);var g=!1;p.set(),o.set();for(var v=d[d.length-1],f=0;f<d.length;f++){var b=d[f];h.setTo(v.x,v.y,b.x,b.y),v=b,u(a,h,n,o)&&(!g||o.z<p.z)&&(p.copy(o),g=!0)}return g?p:null};y.exports=r},56362:(y,P,i)=>{/**
* @author       Richard Davey
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25836),x=i(61369),c=i(3073),h=new u,o=function(r,a,d,n){n===void 0&&(n=new x),Array.isArray(a)||(a=[a]);var p=!1;n.set(),h.set();for(var g=0;g<a.length;g++)c(r,a[g].points,d,h)&&(!p||h.z<n.z)&&(n.set(h.x,h.y,h.z,g),p=!0);return p?n:null};y.exports=o},60646:(y,P,i)=>{/**
* @author       Florian Vazelle
* @author       Geoffrey Glaive
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=i(76112),c=i(92773),h=function(o,r,a){if(a===void 0&&(a=[]),c(o,r))for(var d=r.getLineA(),n=r.getLineB(),p=r.getLineC(),g=r.getLineD(),v=[new u,new u,new u,new u],f=[x(d,o,v[0]),x(n,o,v[1]),x(p,o,v[2]),x(g,o,v[3])],b=0;b<4;b++)f[b]&&a.push(v[b]);return a};y.exports=h},71147:(y,P,i)=>{/**
* @author       Richard Davey
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(61369),x=i(56362),c=i(23031),h=new c;function o(d,n,p,g,v){var f=Math.cos(d),b=Math.sin(d);h.setTo(n,p,n+f,p+b);var C=x(h,g,!0);C&&v.push(new u(C.x,C.y,d,C.w))}function r(d,n){return d.z-n.z}var a=function(d,n,p){Array.isArray(p)||(p=[p]);for(var g=[],v=[],f=0;f<p.length;f++)for(var b=p[f].points,C=0;C<b.length;C++){var _=Math.atan2(b[C].y-n,b[C].x-d);v.indexOf(_)===-1&&(o(_,d,n,p,g),o(_-1e-5,d,n,p,g),o(_+1e-5,d,n,p,g),v.push(_))}return g.sort(r)};y.exports=a},68389:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87841),x=i(59996),c=function(h,o,r){return r===void 0&&(r=new u),x(h,o)&&(r.x=Math.max(h.x,o.x),r.y=Math.max(h.y,o.y),r.width=Math.min(h.right,o.right)-r.x,r.height=Math.min(h.bottom,o.bottom)-r.y),r};y.exports=c},52784:(y,P,i)=>{/**
* @author       Florian Vazelle
* @author       Geoffrey Glaive
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(60646),x=i(59996),c=function(h,o,r){if(r===void 0&&(r=[]),x(h,o)){var a=h.getLineA(),d=h.getLineB(),n=h.getLineC(),p=h.getLineD();u(a,o,r),u(d,o,r),u(n,o,r),u(p,o,r)}return r};y.exports=c},26341:(y,P,i)=>{/**
* @author       Florian Vazelle
* @author       Geoffrey Glaive
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(89265),x=i(60646),c=function(h,o,r){if(r===void 0&&(r=[]),u(h,o)){var a=o.getLineA(),d=o.getLineB(),n=o.getLineC();x(a,h,r),x(d,h,r),x(n,h,r)}return r};y.exports=c},38720:(y,P,i)=>{/**
* @author       Florian Vazelle
* @author       Geoffrey Glaive
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(4042),x=i(67636),c=function(h,o,r){if(r===void 0&&(r=[]),x(h,o)){var a=h.getLineA(),d=h.getLineB(),n=h.getLineC();u(a,o,r),u(d,o,r),u(n,o,r)}return r};y.exports=c},13882:(y,P,i)=>{/**
* @author       Florian Vazelle
* @author       Geoffrey Glaive
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=i(2822),c=i(76112),h=function(o,r,a){if(a===void 0&&(a=[]),x(o,r))for(var d=o.getLineA(),n=o.getLineB(),p=o.getLineC(),g=[new u,new u,new u],v=[c(d,r,g[0]),c(n,r,g[1]),c(p,r,g[2])],f=0;f<3;f++)v[f]&&a.push(g[f]);return a};y.exports=h},75636:(y,P,i)=>{/**
* @author       Florian Vazelle
* @author       Geoffrey Glaive
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(82944),x=i(13882),c=function(h,o,r){if(r===void 0&&(r=[]),u(h,o)){var a=o.getLineA(),d=o.getLineB(),n=o.getLineC();x(h,a,r),x(h,d,r),x(h,n,r)}return r};y.exports=c},80462:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87902),x=i(2141),c=new x,h=function(o,r,a){if(a===void 0&&(a=c),u(r,o.x1,o.y1))return a.x=o.x1,a.y=o.y1,!0;if(u(r,o.x2,o.y2))return a.x=o.x2,a.y=o.y2,!0;var d=o.x2-o.x1,n=o.y2-o.y1,p=r.x-o.x1,g=r.y-o.y1,v=d*d+n*n,f=d,b=n;if(v>0){var C=(p*d+g*n)/v;f*=C,b*=C}a.x=o.x1+f,a.y=o.y1+b;var _=f*f+b*b;return _<=v&&f*d+b*n>=0&&u(r,a.x,a.y)};y.exports=h},76112:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=i.x1,h=i.y1,o=i.x2,r=i.y2,a=u.x1,d=u.y1,n=u.x2,p=u.y2;if(c===o&&h===r||a===n&&d===p)return!1;var g=(p-d)*(o-c)-(n-a)*(r-h);if(g===0)return!1;var v=((n-a)*(h-d)-(p-d)*(c-a))/g,f=((o-c)*(h-d)-(r-h)*(c-a))/g;return v<0||v>1||f<0||f>1?!1:(x&&(x.x=c+v*(o-c),x.y=h+v*(r-h)),!0)};y.exports=P},92773:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=i.x1,c=i.y1,h=i.x2,o=i.y2,r=u.x,a=u.y,d=u.right,n=u.bottom,p=0;if(x>=r&&x<=d&&c>=a&&c<=n||h>=r&&h<=d&&o>=a&&o<=n)return!0;if(x<r&&h>=r){if(p=c+(o-c)*(r-x)/(h-x),p>a&&p<=n)return!0}else if(x>d&&h<=d&&(p=c+(o-c)*(d-x)/(h-x),p>=a&&p<=n))return!0;if(c<a&&o>=a){if(p=x+(h-x)*(a-c)/(o-c),p>=r&&p<=d)return!0}else if(c>n&&o<=n&&(p=x+(h-x)*(n-c)/(o-c),p>=r&&p<=d))return!0;return!1};y.exports=P},16204:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Florian Mertens
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){x===void 0&&(x=1);var c=u.x1,h=u.y1,o=u.x2,r=u.y2,a=i.x,d=i.y,n=(o-c)*(o-c)+(r-h)*(r-h);if(n===0)return!1;var p=((a-c)*(o-c)+(d-h)*(r-h))/n;if(p<0)return Math.sqrt((c-a)*(c-a)+(h-d)*(h-d))<=x;if(p>=0&&p<=1){var g=((h-d)*(o-c)-(c-a)*(r-h))/n;return Math.abs(g)*Math.sqrt(n)<=x}else return Math.sqrt((o-a)*(o-a)+(r-d)*(r-d))<=x};y.exports=P},14199:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(16204),x=function(c,h){if(!u(c,h))return!1;var o=Math.min(h.x1,h.x2),r=Math.max(h.x1,h.x2),a=Math.min(h.y1,h.y2),d=Math.max(h.y1,h.y2);return c.x>=o&&c.x<=r&&c.y>=a&&c.y<=d};y.exports=x},59996:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.width<=0||i.height<=0||u.width<=0||u.height<=0?!1:!(i.right<u.x||i.bottom<u.y||i.x>u.right||i.y>u.bottom)};y.exports=P},89265:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(76112),x=i(37303),c=i(48653),h=i(77493),o=function(r,a){if(a.left>r.right||a.right<r.left||a.top>r.bottom||a.bottom<r.top)return!1;var d=a.getLineA(),n=a.getLineB(),p=a.getLineC();if(x(r,d.x1,d.y1)||x(r,d.x2,d.y2)||x(r,n.x1,n.y1)||x(r,n.x2,n.y2)||x(r,p.x1,p.y1)||x(r,p.x2,p.y2))return!0;var g=r.getLineA(),v=r.getLineB(),f=r.getLineC(),b=r.getLineD();if(u(d,g)||u(d,v)||u(d,f)||u(d,b)||u(n,g)||u(n,v)||u(n,f)||u(n,b)||u(p,g)||u(p,v)||u(p,f)||u(p,b))return!0;var C=h(r),_=c(a,C,!0);return _.length>0};y.exports=o},84411:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h,o){return o===void 0&&(o=0),!(u>i.right+o||x<i.left-o||c>i.bottom+o||h<i.top-o)};y.exports=P},67636:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(80462),x=i(10690),c=function(h,o){return h.left>o.right||h.right<o.left||h.top>o.bottom||h.bottom<o.top?!1:!!(x(h,o.x,o.y)||u(h.getLineA(),o)||u(h.getLineB(),o)||u(h.getLineC(),o))};y.exports=c},2822:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(76112),x=function(c,h){return!!(c.contains(h.x1,h.y1)||c.contains(h.x2,h.y2)||u(c.getLineA(),h)||u(c.getLineB(),h)||u(c.getLineC(),h))};y.exports=x},82944:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(48653),x=i(71694),c=i(76112),h=function(o,r){if(o.left>r.right||o.right<r.left||o.top>r.bottom||o.bottom<r.top)return!1;var a=o.getLineA(),d=o.getLineB(),n=o.getLineC(),p=r.getLineA(),g=r.getLineB(),v=r.getLineC();if(c(a,p)||c(a,g)||c(a,v)||c(d,p)||c(d,g)||c(d,v)||c(n,p)||c(n,g)||c(n,v))return!0;var f=x(o),b=u(r,f,!0);return b.length>0||(f=x(r),b=u(o,f,!0),b.length>0)};y.exports=h},91865:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={CircleToCircle:i(2044),CircleToRectangle:i(81491),GetCircleToCircle:i(63376),GetCircleToRectangle:i(97439),GetLineToCircle:i(4042),GetLineToLine:i(36100),GetLineToPoints:i(3073),GetLineToPolygon:i(56362),GetLineToRectangle:i(60646),GetRaysFromPointToPolygon:i(71147),GetRectangleIntersection:i(68389),GetRectangleToRectangle:i(52784),GetRectangleToTriangle:i(26341),GetTriangleToCircle:i(38720),GetTriangleToLine:i(13882),GetTriangleToTriangle:i(75636),LineToCircle:i(80462),LineToLine:i(76112),LineToRectangle:i(92773),PointToLine:i(16204),PointToLineSegment:i(14199),RectangleToRectangle:i(59996),RectangleToTriangle:i(89265),RectangleToValues:i(84411),TriangleToCircle:i(67636),TriangleToLine:i(2822),TriangleToTriangle:i(82944)}},91938:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return Math.atan2(i.y2-i.y1,i.x2-i.x1)};y.exports=P},84993:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){u===void 0&&(u=1),x===void 0&&(x=[]);var c=Math.round(i.x1),h=Math.round(i.y1),o=Math.round(i.x2),r=Math.round(i.y2),a=Math.abs(o-c),d=Math.abs(r-h),n=c<o?1:-1,p=h<r?1:-1,g=a-d;x.push({x:c,y:h});for(var v=1;!(c===o&&h===r);){var f=g<<1;f>-d&&(g-=d,c+=n),f<a&&(g+=a,h+=p),v%u===0&&x.push({x:c,y:h}),v++}return x};y.exports=P},36469:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=u-(i.x1+i.x2)/2,h=x-(i.y1+i.y2)/2;return i.x1+=c,i.y1+=h,i.x2+=c,i.y2+=h,i};y.exports=P},31116:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(23031),x=function(c){return new u(c.x1,c.y1,c.x2,c.y2)};y.exports=x},59944:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u.setTo(i.x1,i.y1,i.x2,i.y2)};y.exports=P},59220:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.x1===u.x1&&i.y1===u.y1&&i.x2===u.x2&&i.y2===u.y2};y.exports=P},78177:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35001),x=function(c,h,o){o===void 0&&(o=h);var r=u(c),a=c.x2-c.x1,d=c.y2-c.y1;return h&&(c.x1=c.x1-a/r*h,c.y1=c.y1-d/r*h),o&&(c.x2=c.x2+a/r*o,c.y2=c.y2+d/r*o),c};y.exports=x},26708:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(52816),x=i(6113),c=i(2141),h=function(o,r,a,d,n){d===void 0&&(d=0),n===void 0&&(n=[]);var p=[],g=o.x1,v=o.y1,f=o.x2-g,b=o.y2-v,C=x(r,n),_,M,E=a-1;for(_=0;_<E;_++)M=C(_/E),p.push(new c(g+f*M,v+b*M));if(M=C(1),p.push(new c(g+f*M,v+b*M)),d>0){var A=p[0],R=[A];for(_=1;_<p.length-1;_++){var L=p[_];u(A,L)>=d&&(R.push(L),A=L)}var Y=p[p.length-1];return u(A,Y)<d&&R.pop(),R.push(Y),R}else return p};y.exports=h},32125:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h){return h===void 0&&(h=new u),h.x=(c.x1+c.x2)/2,h.y=(c.y1+c.y2)/2,h};y.exports=x},99569:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Florian Mertens
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h,o){o===void 0&&(o=new u);var r=c.x1,a=c.y1,d=c.x2,n=c.y2,p=(d-r)*(d-r)+(n-a)*(n-a);if(p===0)return o;var g=((h.x-r)*(d-r)+(h.y-a)*(n-a))/p;return o.x=r+g*(d-r),o.y=a+g*(n-a),o};y.exports=x},34638:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(36383),x=i(91938),c=i(2141),h=function(o,r){r===void 0&&(r=new c);var a=x(o)-u.TAU;return r.x=Math.cos(a),r.y=Math.sin(a),r};y.exports=h},13151:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h,o){return o===void 0&&(o=new u),o.x=c.x1+(c.x2-c.x1)*h,o.y=c.y1+(c.y2-c.y1)*h,o};y.exports=x},15258:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35001),x=i(2141),c=function(h,o,r,a){a===void 0&&(a=[]),!o&&r>0&&(o=u(h)/r);for(var d=h.x1,n=h.y1,p=h.x2,g=h.y2,v=0;v<o;v++){var f=v/o,b=d+(p-d)*f,C=n+(g-n)*f;a.push(new x(b,C))}return a};y.exports=c},26408:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Florian Mertens
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=i.x1,c=i.y1,h=i.x2,o=i.y2,r=(h-x)*(h-x)+(o-c)*(o-c);if(r===0)return!1;var a=((c-u.y)*(h-x)-(x-u.x)*(o-c))/r;return Math.abs(a)*Math.sqrt(r)};y.exports=P},98770:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return Math.abs(i.y1-i.y2)};y.exports=P},35001:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return Math.sqrt((i.x2-i.x1)*(i.x2-i.x1)+(i.y2-i.y1)*(i.y2-i.y1))};y.exports=P},23031:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(13151),c=i(15258),h=i(23777),o=i(65822),r=i(26099),a=new u({initialize:function(d,n,p,g){d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=h.LINE,this.x1=d,this.y1=n,this.x2=p,this.y2=g},getPoint:function(d,n){return x(this,d,n)},getPoints:function(d,n,p){return c(this,d,n,p)},getRandomPoint:function(d){return o(this,d)},setTo:function(d,n,p,g){return d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p=0),g===void 0&&(g=0),this.x1=d,this.y1=n,this.x2=p,this.y2=g,this},setFromObjects:function(d,n){return this.x1=d.x,this.y1=d.y,this.x2=n.x,this.y2=n.y,this},getPointA:function(d){return d===void 0&&(d=new r),d.set(this.x1,this.y1),d},getPointB:function(d){return d===void 0&&(d=new r),d.set(this.x2,this.y2),d},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(d){this.x1<=this.x2?this.x1=d:this.x2=d}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(d){this.x1>this.x2?this.x1=d:this.x2=d}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(d){this.y1<=this.y2?this.y1=d:this.y2=d}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(d){this.y1>this.y2?this.y1=d:this.y2=d}}});y.exports=a},64795:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(36383),x=i(15994),c=i(91938),h=function(o){var r=c(o)-u.TAU;return x(r,-Math.PI,Math.PI)};y.exports=h},52616:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(36383),x=i(91938),c=function(h){return Math.cos(x(h)-u.TAU)};y.exports=c},87231:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(36383),x=i(91938),c=function(h){return Math.sin(x(h)-u.TAU)};y.exports=c},89662:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return i.x1+=u,i.y1+=x,i.x2+=u,i.y2+=x,i};y.exports=P},71165:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return-((i.x2-i.x1)/(i.y2-i.y1))};y.exports=P},65822:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h){h===void 0&&(h=new u);var o=Math.random();return h.x=c.x1+o*(c.x2-c.x1),h.y=c.y1+o*(c.y2-c.y1),h};y.exports=x},69777:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91938),x=i(64795),c=function(h,o){return 2*x(o)-Math.PI-u(h)};y.exports=c},39706:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(64400),x=function(c,h){var o=(c.x1+c.x2)/2,r=(c.y1+c.y2)/2;return u(c,o,r,h)};y.exports=x},82585:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(64400),x=function(c,h,o){return u(c,h.x,h.y,o)};y.exports=x},64400:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){var h=Math.cos(c),o=Math.sin(c),r=i.x1-u,a=i.y1-x;return i.x1=r*h-a*o+u,i.y1=r*o+a*h+x,r=i.x2-u,a=i.y2-x,i.x2=r*h-a*o+u,i.y2=r*o+a*h+x,i};y.exports=P},62377:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h){return i.x1=u,i.y1=x,i.x2=u+Math.cos(c)*h,i.y2=x+Math.sin(c)*h,i};y.exports=P},71366:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return(i.y2-i.y1)/(i.x2-i.x1)};y.exports=P},10809:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return Math.abs(i.x1-i.x2)};y.exports=P},2529:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(23031);u.Angle=i(91938),u.BresenhamPoints=i(84993),u.CenterOn=i(36469),u.Clone=i(31116),u.CopyFrom=i(59944),u.Equals=i(59220),u.Extend=i(78177),u.GetEasedPoints=i(26708),u.GetMidPoint=i(32125),u.GetNearestPoint=i(99569),u.GetNormal=i(34638),u.GetPoint=i(13151),u.GetPoints=i(15258),u.GetShortestDistance=i(26408),u.Height=i(98770),u.Length=i(35001),u.NormalAngle=i(64795),u.NormalX=i(52616),u.NormalY=i(87231),u.Offset=i(89662),u.PerpSlope=i(71165),u.Random=i(65822),u.ReflectAngle=i(69777),u.Rotate=i(39706),u.RotateAroundPoint=i(82585),u.RotateAroundXY=i(64400),u.SetToAngle=i(62377),u.Slope=i(71366),u.Width=i(10809),y.exports=u},83997:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(87841),c=i(26099);function h(r,a,d,n){var p=r-d,g=a-n,v=p*p+g*g;return Math.sqrt(v)}var o=new u({initialize:function(r,a,d){this.vertex1=r,this.vertex2=a,this.vertex3=d,this.bounds=new x,this._inCenter=new c},getInCenter:function(r){r===void 0&&(r=!0);var a=this.vertex1,d=this.vertex2,n=this.vertex3,p,g,v,f,b,C;r?(p=a.x,g=a.y,v=d.x,f=d.y,b=n.x,C=n.y):(p=a.vx,g=a.vy,v=d.vx,f=d.vy,b=n.vx,C=n.vy);var _=h(b,C,v,f),M=h(p,g,b,C),E=h(v,f,p,g),A=_+M+E;return this._inCenter.set((p*_+v*M+b*E)/A,(g*_+f*M+C*E)/A)},contains:function(r,a,d){var n=this.vertex1,p=this.vertex2,g=this.vertex3,v=n.vx,f=n.vy,b=p.vx,C=p.vy,_=g.vx,M=g.vy;if(d){var E=d.a,A=d.b,R=d.c,L=d.d,Y=d.e,F=d.f;v=n.vx*E+n.vy*R+Y,f=n.vx*A+n.vy*L+F,b=p.vx*E+p.vy*R+Y,C=p.vx*A+p.vy*L+F,_=g.vx*E+g.vy*R+Y,M=g.vx*A+g.vy*L+F}var N=_-v,z=M-f,U=b-v,q=C-f,Q=r-v,K=a-f,et=N*N+z*z,H=N*U+z*q,J=N*Q+z*K,X=U*U+q*q,Z=U*Q+q*K,$=et*X-H*H,it=$===0?0:1/$,nt=(X*J-H*Z)*it,at=(et*Z-H*J)*it;return nt>=0&&at>=0&&nt+at<1},isCounterClockwise:function(r){var a=this.vertex1,d=this.vertex2,n=this.vertex3,p=(d.vx-a.vx)*(n.vy-a.vy)-(d.vy-a.vy)*(n.vx-a.vx);return r<=0?p>=0:p<0},load:function(r,a,d,n,p){return d=this.vertex1.load(r,a,d,n,p),d=this.vertex2.load(r,a,d,n,p),d=this.vertex3.load(r,a,d,n,p),d},transformCoordinatesLocal:function(r,a,d,n){return this.vertex1.transformCoordinatesLocal(r,a,d,n),this.vertex2.transformCoordinatesLocal(r,a,d,n),this.vertex3.transformCoordinatesLocal(r,a,d,n),this},updateBounds:function(){var r=this.vertex1,a=this.vertex2,d=this.vertex3,n=this.bounds;return n.x=Math.min(r.vx,a.vx,d.vx),n.y=Math.min(r.vy,a.vy,d.vy),n.width=Math.max(r.vx,a.vx,d.vx)-n.x,n.height=Math.max(r.vy,a.vy,d.vy)-n.y,this},isInView:function(r,a,d,n,p,g,v,f,b,C,_){this.update(n,p,g,v,f,b,C,_);var M=this.vertex1,E=this.vertex2,A=this.vertex3;if(M.ta<=0&&E.ta<=0&&A.ta<=0||a&&!this.isCounterClockwise(d))return!1;var R=this.bounds;R.x=Math.min(M.tx,E.tx,A.tx),R.y=Math.min(M.ty,E.ty,A.ty),R.width=Math.max(M.tx,E.tx,A.tx)-R.x,R.height=Math.max(M.ty,E.ty,A.ty)-R.y;var L=r.x+r.width,Y=r.y+r.height;return R.width<=0||R.height<=0||r.width<=0||r.height<=0?!1:!(R.right<r.x||R.bottom<r.y||R.x>L||R.y>Y)},scrollUV:function(r,a){return this.vertex1.scrollUV(r,a),this.vertex2.scrollUV(r,a),this.vertex3.scrollUV(r,a),this},scaleUV:function(r,a){return this.vertex1.scaleUV(r,a),this.vertex2.scaleUV(r,a),this.vertex3.scaleUV(r,a),this},setColor:function(r){return this.vertex1.color=r,this.vertex2.color=r,this.vertex3.color=r,this},update:function(r,a,d,n,p,g,v,f){return this.vertex1.update(a,d,n,p,g,v,f,r),this.vertex2.update(a,d,n,p,g,v,f,r),this.vertex3.update(a,d,n,p,g,v,f,r),this},translate:function(r,a){a===void 0&&(a=0);var d=this.vertex1,n=this.vertex2,p=this.vertex3;return d.x+=r,d.y+=a,n.x+=r,n.y+=a,p.x+=r,p.y+=a,this},x:{get:function(){return this.getInCenter().x},set:function(r){var a=this.getInCenter();this.translate(r-a.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(r){var a=this.getInCenter();this.translate(0,r-a.y)}},alpha:{get:function(){var r=this.vertex1,a=this.vertex2,d=this.vertex3;return(r.alpha+a.alpha+d.alpha)/3},set:function(r){this.vertex1.alpha=r,this.vertex2.alpha=r,this.vertex3.alpha=r}},depth:{get:function(){var r=this.vertex1,a=this.vertex2,d=this.vertex3;return(r.vz+a.vz+d.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});y.exports=o},48803:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83997),x=i(95540),c=i(37867),h=i(25836),o=i(39318),r=new h,a=new h,d=new c,n=function(p){var g=x(p,"mesh"),v=x(p,"texture",null),f=x(p,"frame"),b=x(p,"width",1),C=x(p,"height",b),_=x(p,"widthSegments",1),M=x(p,"heightSegments",_),E=x(p,"x",0),A=x(p,"y",0),R=x(p,"z",0),L=x(p,"rotateX",0),Y=x(p,"rotateY",0),F=x(p,"rotateZ",0),N=x(p,"zIsUp",!0),z=x(p,"isOrtho",g?g.dirtyCache[11]:!1),U=x(p,"colors",[16777215]),q=x(p,"alphas",[1]),Q=x(p,"tile",!1),K=x(p,"flipY",!1),et=x(p,"width",null),H={faces:[],verts:[]};r.set(E,A,R),a.set(L,Y,F),d.fromRotationXYTranslation(a,r,N);var J;if(!v&&g)v=g.texture,f||(J=g.frame);else if(g&&typeof v=="string")v=g.scene.sys.textures.get(v);else if(!v)return H;J||(J=v.get(f)),!et&&z&&v&&g&&(b=J.width/g.height,C=J.height/g.height);var X=b/2,Z=C/2,$=Math.floor(_),it=Math.floor(M),nt=$+1,at=it+1,ht=b/$,dt=C/it,vt=[],ft=[],gt,wt,bt=0,xt=1,Pt=0,Ot=1;J&&(bt=J.u0,xt=J.u1,K?(Pt=J.v1,Ot=J.v0):(Pt=J.v0,Ot=J.v1));var Et=xt-bt,Tt=Ot-Pt;for(wt=0;wt<at;wt++){var Mt=wt*dt-Z;for(gt=0;gt<nt;gt++){var kt=gt*ht-X;ft.push(kt,-Mt);var Gt=bt+Et*(gt/$),qt=Pt+Tt*(wt/it);vt.push(Gt,qt)}}Array.isArray(U)||(U=[U]),Array.isArray(q)||(q=[q]);var fe=0,Qt=0;for(wt=0;wt<it;wt++)for(gt=0;gt<$;gt++){var Jt=(gt+nt*wt)*2,be=(gt+nt*(wt+1))*2,We=(gt+1+nt*(wt+1))*2,$t=(gt+1+nt*wt)*2,me=U[Qt],Vt=q[fe],Ce=new o(ft[Jt],ft[Jt+1],0,vt[Jt],vt[Jt+1],me,Vt).transformMat4(d),os=new o(ft[be],ft[be+1],0,vt[be],vt[be+1],me,Vt).transformMat4(d),qs=new o(ft[$t],ft[$t+1],0,vt[$t],vt[$t+1],me,Vt).transformMat4(d),yr=new o(ft[be],ft[be+1],0,vt[be],vt[be+1],me,Vt).transformMat4(d),xr=new o(ft[We],ft[We+1],0,vt[We],vt[We+1],me,Vt).transformMat4(d),Yi=new o(ft[$t],ft[$t+1],0,vt[$t],vt[$t+1],me,Vt).transformMat4(d);Q&&(Ce.setUVs(bt,Ot),os.setUVs(bt,Pt),qs.setUVs(xt,Ot),yr.setUVs(bt,Pt),xr.setUVs(xt,Pt),Yi.setUVs(xt,Ot)),Qt++,Qt===U.length&&(Qt=0),fe++,fe===q.length&&(fe=0),H.verts.push(Ce,os,qs,yr,xr,Yi),H.faces.push(new u(Ce,os,qs),new u(yr,xr,Yi))}return g&&(g.faces=g.faces.concat(H.faces),g.vertices=g.vertices.concat(H.verts)),H};y.exports=n},34684:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83997),x=i(37867),c=i(25836),h=i(39318),o=new c,r=new c,a=new x,d=function(n,p,g,v,f,b,C,_,M,E){g===void 0&&(g=1),v===void 0&&(v=0),f===void 0&&(f=0),b===void 0&&(b=0),C===void 0&&(C=0),_===void 0&&(_=0),M===void 0&&(M=0),E===void 0&&(E=!0);var A={faces:[],verts:[]},R=n.materials;o.set(v,f,b),r.set(C,_,M),a.fromRotationXYTranslation(r,o,E);for(var L=0;L<n.models.length;L++)for(var Y=n.models[L],F=Y.vertices,N=Y.textureCoords,z=Y.faces,U=0;U<z.length;U++){var q=z[U],Q=q.vertices[0],K=q.vertices[1],et=q.vertices[2],H=F[Q.vertexIndex],J=F[K.vertexIndex],X=F[et.vertexIndex],Z=Q.textureCoordsIndex,$=K.textureCoordsIndex,it=et.textureCoordsIndex,nt=Z===-1?{u:0,v:1}:N[Z],at=$===-1?{u:0,v:0}:N[$],ht=it===-1?{u:1,v:1}:N[it],dt=16777215;q.material!==""&&R[q.material]&&(dt=R[q.material]);var vt=new h(H.x*g,H.y*g,H.z*g,nt.u,nt.v,dt).transformMat4(a),ft=new h(J.x*g,J.y*g,J.z*g,at.u,at.v,dt).transformMat4(a),gt=new h(X.x*g,X.y*g,X.z*g,ht.u,ht.v,dt).transformMat4(a);A.verts.push(vt,ft,gt),A.faces.push(new u(vt,ft,gt))}return p&&(p.faces=p.faces.concat(A.faces),p.vertices=p.vertices.concat(A.verts)),A};y.exports=d},92515:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83997),x=i(39318),c=function(h,o,r,a,d,n,p,g){if(a===void 0&&(a=!1),n===void 0&&(n=16777215),p===void 0&&(p=1),g===void 0&&(g=!1),h.length!==o.length&&!a){console.warn("GenerateVerts: vertices and uvs count not equal");return}var v={faces:[],vertices:[]},f,b,C,_,M,E,A,R,L,Y,F,N=a?3:2,z=Array.isArray(n),U=Array.isArray(p);if(Array.isArray(r)&&r.length>0)for(f=0;f<r.length;f++){var q=r[f],Q=r[f]*2,K=r[f]*N;b=h[K],C=h[K+1],_=a?h[K+2]:0,M=o[Q],E=o[Q+1],g&&(E=1-E),A=z?n[q]:n,R=U?p[q]:p,L=0,Y=0,F=0,d&&(L=d[K],Y=d[K+1],F=a?d[K+2]:0),v.vertices.push(new x(b,C,_,M,E,A,R,L,Y,F))}else{var et=0,H=0;for(f=0;f<h.length;f+=N)b=h[f],C=h[f+1],_=a?h[f+2]:0,M=o[et],E=o[et+1],A=z?n[H]:n,R=U?p[H]:p,L=0,Y=0,F=0,d&&(L=d[f],Y=d[f+1],F=a?d[f+2]:0),v.vertices.push(new x(b,C,_,M,E,A,R,L,Y,F)),et+=2,H++}for(f=0;f<v.vertices.length;f+=3){var J=v.vertices[f],X=v.vertices[f+1],Z=v.vertices[f+2];v.faces.push(new u(J,X,Z))}return v};y.exports=c},85048:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=!0,i="untitled",u="",x="";function c(b){var C=b.indexOf("#");return C>-1?b.substring(0,C):b}function h(b){return b.models.length===0&&b.models.push({faces:[],name:i,textureCoords:[],vertexNormals:[],vertices:[]}),u="",b.models[b.models.length-1]}function o(b,C){var _=b.length>=2?b[1]:i;C.models.push({faces:[],name:_,textureCoords:[],vertexNormals:[],vertices:[]}),u=""}function r(b){b.length===2&&(u=b[1])}function a(b,C){var _=b.length,M=_>=2?parseFloat(b[1]):0,E=_>=3?parseFloat(b[2]):0,A=_>=4?parseFloat(b[3]):0;h(C).vertices.push({x:M,y:E,z:A})}function d(b,C){var _=b.length,M=_>=2?parseFloat(b[1]):0,E=_>=3?parseFloat(b[2]):0,A=_>=4?parseFloat(b[3]):0;isNaN(M)&&(M=0),isNaN(E)&&(E=0),isNaN(A)&&(A=0),P&&(E=1-E),h(C).textureCoords.push({u:M,v:E,w:A})}function n(b,C){var _=b.length,M=_>=2?parseFloat(b[1]):0,E=_>=3?parseFloat(b[2]):0,A=_>=4?parseFloat(b[3]):0;h(C).vertexNormals.push({x:M,y:E,z:A})}function p(b,C){var _=b.length-1;if(!(_<3)){for(var M={group:u,material:x,vertices:[]},E=0;E<_;E++){var A=b[E+1],R=A.split("/"),L=R.length;if(!(L<1||L>3)){var Y=0,F=0,N=0;Y=parseInt(R[0],10),L>1&&R[1]!==""&&(F=parseInt(R[1],10)),L>2&&(N=parseInt(R[2],10)),Y!==0&&(Y<0&&(Y=h(C).vertices.length+1+Y),F-=1,Y-=1,N-=1,M.vertices.push({textureCoordsIndex:F,vertexIndex:Y,vertexNormalIndex:N}))}}h(C).faces.push(M)}}function g(b,C){b.length>=2&&C.materialLibraries.push(b[1])}function v(b){b.length>=2&&(x=b[1])}var f=function(b,C){C===void 0&&(C=!0),P=C;var _={materials:{},materialLibraries:[],models:[]};u="",x="";for(var M=b.split(`
`),E=0;E<M.length;E++){var A=c(M[E]),R=A.replace(/\s\s+/g," ").trim().split(" ");switch(R[0].toLowerCase()){case"o":o(R,_);break;case"g":r(R);break;case"v":a(R,_);break;case"vt":d(R,_);break;case"vn":n(R,_);break;case"f":p(R,_);break;case"mtllib":g(R,_);break;case"usemtl":v(R);break}}return _};y.exports=f},61485:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(37589),x=function(c){for(var h={},o=c.split(`
`),r="",a=0;a<o.length;a++){var d=o[a].trim();if(!(d.indexOf("#")===0||d==="")){var n=d.replace(/\s\s+/g," ").trim().split(" ");switch(n[0].toLowerCase()){case"newmtl":{r=n[1];break}case"kd":{var p=Math.floor(n[1]*255),g=n.length>=2?Math.floor(n[2]*255):p,v=n.length>=3?Math.floor(n[3]*255):p;h[r]=u(p,g,v);break}}}}return h};y.exports=x},92570:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){var h,o;if(x===void 0&&c===void 0){var r=i.getInCenter();h=r.x,o=r.y}var a=Math.cos(u),d=Math.sin(u),n=i.vertex1,p=i.vertex2,g=i.vertex3,v=n.x-h,f=n.y-o;n.set(v*a-f*d+h,v*d+f*a+o),v=p.x-h,f=p.y-o,p.set(v*a-f*d+h,v*d+f*a+o),v=g.x-h,f=g.y-o,g.set(v*a-f*d+h,v*d+f*a+o)};y.exports=P},39318:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(70554),c=i(25836),h=new u({Extends:c,initialize:function(o,r,a,d,n,p,g,v,f,b){p===void 0&&(p=16777215),g===void 0&&(g=1),v===void 0&&(v=0),f===void 0&&(f=0),b===void 0&&(b=0),c.call(this,o,r,a),this.vx=0,this.vy=0,this.vz=0,this.nx=v,this.ny=f,this.nz=b,this.u=d,this.v=n,this.color=p,this.alpha=g,this.tx=0,this.ty=0,this.ta=0,this.tu=d,this.tv=n},setUVs:function(o,r){return this.u=o,this.v=r,this.tu=o,this.tv=r,this},scrollUV:function(o,r){return this.tu+=o,this.tv+=r,this},scaleUV:function(o,r){return this.tu=this.u*o,this.tv=this.v*r,this},transformCoordinatesLocal:function(o,r,a,d){var n=this.x,p=this.y,g=this.z,v=o.val,f=n*v[0]+p*v[4]+g*v[8]+v[12],b=n*v[1]+p*v[5]+g*v[9]+v[13],C=n*v[2]+p*v[6]+g*v[10]+v[14],_=n*v[3]+p*v[7]+g*v[11]+v[15];this.vx=f/_*r,this.vy=-(b/_)*a,d<=0?this.vz=C/_:this.vz=-(C/_)},resize:function(o,r,a,d,n,p){return this.x=o,this.y=r,this.vx=this.x*a,this.vy=-this.y*d,this.vz=0,n<.5?this.vx+=a*(.5-n):n>.5&&(this.vx-=a*(n-.5)),p<.5?this.vy+=d*(.5-p):p>.5&&(this.vy-=d*(p-.5)),this},update:function(o,r,a,d,n,p,g,v){var f=this.vx*o+this.vy*a+n,b=this.vx*r+this.vy*d+p;return g&&(f=Math.round(f),b=Math.round(b)),this.tx=f,this.ty=b,this.ta=this.alpha*v,this},load:function(o,r,a,d,n){return o[++a]=this.tx,o[++a]=this.ty,o[++a]=this.tu,o[++a]=this.tv,o[++a]=d,o[++a]=n,r[++a]=x.getTintAppendFloatAlpha(this.color,this.ta),a}});y.exports=h},73090:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u={Face:i(83997),GenerateGridVerts:i(48803),GenerateObjVerts:i(34684),GenerateVerts:i(92515),ParseObj:i(85048),ParseObjMaterial:i(61485),RotateFace:i(92570),Vertex:i(39318)};y.exports=u},96550:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.setTo(Math.ceil(i.x),Math.ceil(i.y))};y.exports=P},99706:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c){return new u(c.x,c.y)};y.exports=x},68010:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u.setTo(i.x,i.y)};y.exports=P},27814:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.x===u.x&&i.y===u.y};y.exports=P},73565:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.setTo(Math.floor(i.x),Math.floor(i.y))};y.exports=P},87555:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h){if(h===void 0&&(h=new u),!Array.isArray(c))throw new Error("GetCentroid points argument must be an array");var o=c.length;if(o<1)throw new Error("GetCentroid points array must not be empty");if(o===1)h.x=c[0].x,h.y=c[0].y;else{for(var r=0;r<o;r++)h.x+=c[r].x,h.y+=c[r].y;h.x/=o,h.y/=o}return h};y.exports=x},28793:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return Math.sqrt(i.x*i.x+i.y*i.y)};y.exports=P},44405:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.x*i.x+i.y*i.y};y.exports=P},20873:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87841),x=function(c,h){h===void 0&&(h=new u);for(var o=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,n=0;n<c.length;n++){var p=c[n];p.x>o&&(o=p.x),p.x<r&&(r=p.x),p.y>a&&(a=p.y),p.y<d&&(d=p.y)}return h.x=r,h.y=d,h.width=o-r,h.height=a-d,h};y.exports=x},26152:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h,o,r){return o===void 0&&(o=0),r===void 0&&(r=new u),r.x=c.x+(h.x-c.x)*o,r.y=c.y+(h.y-c.y)*o,r};y.exports=x},55767:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.setTo(i.y,i.x)};y.exports=P},79432:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h){return h===void 0&&(h=new u),h.setTo(-c.x,-c.y)};y.exports=x},2141:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23777),c=new u({initialize:function(h,o){h===void 0&&(h=0),o===void 0&&(o=h),this.type=x.POINT,this.x=h,this.y=o},setTo:function(h,o){return h===void 0&&(h=0),o===void 0&&(o=h),this.x=h,this.y=o,this}});y.exports=c},72930:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=i(44405),c=function(h,o,r){r===void 0&&(r=new u);var a=h.x*o.x+h.y*o.y,d=a/x(o);return d!==0&&(r.x=d*o.x,r.y=d*o.y),r};y.exports=c},62880:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h,o){o===void 0&&(o=new u);var r=c.x*h.x+c.y*h.y;return r!==0&&(o.x=r*h.x,o.y=r*h.y),o};y.exports=x},15093:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(28793),x=function(c,h){if(c.x!==0||c.y!==0){var o=u(c);c.x/=o,c.y/=o}return c.x*=h,c.y*=h,c};y.exports=x},43711:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141);u.Ceil=i(96550),u.Clone=i(99706),u.CopyFrom=i(68010),u.Equals=i(27814),u.Floor=i(73565),u.GetCentroid=i(87555),u.GetMagnitude=i(28793),u.GetMagnitudeSq=i(44405),u.GetRectangleFromPoints=i(20873),u.Interpolate=i(26152),u.Invert=i(55767),u.Negative=i(79432),u.Project=i(72930),u.ProjectUnit=i(62880),u.SetMagnitude=i(15093),y.exports=u},12306:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25717),x=function(c){return new u(c.points)};y.exports=x},63814:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){for(var c=!1,h=-1,o=i.points.length-1;++h<i.points.length;o=h){var r=i.points[h].x,a=i.points[h].y,d=i.points[o].x,n=i.points[o].y;(a<=x&&x<n||n<=x&&x<a)&&u<(d-r)*(x-a)/(n-a)+r&&(c=!c)}return c};y.exports=P},99338:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(63814),x=function(c,h){return u(c,h.x,h.y)};y.exports=x},94811:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/function P(H,J,X){X=X||2;var Z=J&&J.length,$=Z?J[0]*X:H.length,it=i(H,0,$,X,!0),nt=[];if(!it||it.next===it.prev)return nt;var at,ht,dt,vt,ft,gt,wt;if(Z&&(it=a(H,J,it,X)),H.length>80*X){at=dt=H[0],ht=vt=H[1];for(var bt=X;bt<$;bt+=X)ft=H[bt],gt=H[bt+1],ft<at&&(at=ft),gt<ht&&(ht=gt),ft>dt&&(dt=ft),gt>vt&&(vt=gt);wt=Math.max(dt-at,vt-ht),wt=wt!==0?32767/wt:0}return x(it,nt,X,at,ht,wt,0),nt}function i(H,J,X,Z,$){var it,nt;if($===et(H,J,X,Z)>0)for(it=J;it<X;it+=Z)nt=q(it,H[it],H[it+1],nt);else for(it=X-Z;it>=J;it-=Z)nt=q(it,H[it],H[it+1],nt);return nt&&A(nt,nt.next)&&(Q(nt),nt=nt.next),nt}function u(H,J){if(!H)return H;J||(J=H);var X=H,Z;do if(Z=!1,!X.steiner&&(A(X,X.next)||E(X.prev,X,X.next)===0)){if(Q(X),X=J=X.prev,X===X.next)break;Z=!0}else X=X.next;while(Z||X!==J);return J}function x(H,J,X,Z,$,it,nt){if(H){!nt&&it&&v(H,Z,$,it);for(var at=H,ht,dt;H.prev!==H.next;){if(ht=H.prev,dt=H.next,it?h(H,Z,$,it):c(H)){J.push(ht.i/X|0),J.push(H.i/X|0),J.push(dt.i/X|0),Q(H),H=dt.next,at=dt.next;continue}if(H=dt,H===at){nt?nt===1?(H=o(u(H),J,X),x(H,J,X,Z,$,it,2)):nt===2&&r(H,J,X,Z,$,it):x(u(H),J,X,Z,$,it,1);break}}}}function c(H){var J=H.prev,X=H,Z=H.next;if(E(J,X,Z)>=0)return!1;for(var $=J.x,it=X.x,nt=Z.x,at=J.y,ht=X.y,dt=Z.y,vt=$<it?$<nt?$:nt:it<nt?it:nt,ft=at<ht?at<dt?at:dt:ht<dt?ht:dt,gt=$>it?$>nt?$:nt:it>nt?it:nt,wt=at>ht?at>dt?at:dt:ht>dt?ht:dt,bt=Z.next;bt!==J;){if(bt.x>=vt&&bt.x<=gt&&bt.y>=ft&&bt.y<=wt&&_($,at,it,ht,nt,dt,bt.x,bt.y)&&E(bt.prev,bt,bt.next)>=0)return!1;bt=bt.next}return!0}function h(H,J,X,Z){var $=H.prev,it=H,nt=H.next;if(E($,it,nt)>=0)return!1;for(var at=$.x,ht=it.x,dt=nt.x,vt=$.y,ft=it.y,gt=nt.y,wt=at<ht?at<dt?at:dt:ht<dt?ht:dt,bt=vt<ft?vt<gt?vt:gt:ft<gt?ft:gt,xt=at>ht?at>dt?at:dt:ht>dt?ht:dt,Pt=vt>ft?vt>gt?vt:gt:ft>gt?ft:gt,Ot=b(wt,bt,J,X,Z),Et=b(xt,Pt,J,X,Z),Tt=H.prevZ,Mt=H.nextZ;Tt&&Tt.z>=Ot&&Mt&&Mt.z<=Et;){if(Tt.x>=wt&&Tt.x<=xt&&Tt.y>=bt&&Tt.y<=Pt&&Tt!==$&&Tt!==nt&&_(at,vt,ht,ft,dt,gt,Tt.x,Tt.y)&&E(Tt.prev,Tt,Tt.next)>=0||(Tt=Tt.prevZ,Mt.x>=wt&&Mt.x<=xt&&Mt.y>=bt&&Mt.y<=Pt&&Mt!==$&&Mt!==nt&&_(at,vt,ht,ft,dt,gt,Mt.x,Mt.y)&&E(Mt.prev,Mt,Mt.next)>=0))return!1;Mt=Mt.nextZ}for(;Tt&&Tt.z>=Ot;){if(Tt.x>=wt&&Tt.x<=xt&&Tt.y>=bt&&Tt.y<=Pt&&Tt!==$&&Tt!==nt&&_(at,vt,ht,ft,dt,gt,Tt.x,Tt.y)&&E(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.prevZ}for(;Mt&&Mt.z<=Et;){if(Mt.x>=wt&&Mt.x<=xt&&Mt.y>=bt&&Mt.y<=Pt&&Mt!==$&&Mt!==nt&&_(at,vt,ht,ft,dt,gt,Mt.x,Mt.y)&&E(Mt.prev,Mt,Mt.next)>=0)return!1;Mt=Mt.nextZ}return!0}function o(H,J,X){var Z=H;do{var $=Z.prev,it=Z.next.next;!A($,it)&&R($,Z,Z.next,it)&&N($,it)&&N(it,$)&&(J.push($.i/X|0),J.push(Z.i/X|0),J.push(it.i/X|0),Q(Z),Q(Z.next),Z=H=it),Z=Z.next}while(Z!==H);return u(Z)}function r(H,J,X,Z,$,it){var nt=H;do{for(var at=nt.next.next;at!==nt.prev;){if(nt.i!==at.i&&M(nt,at)){var ht=U(nt,at);nt=u(nt,nt.next),ht=u(ht,ht.next),x(nt,J,X,Z,$,it,0),x(ht,J,X,Z,$,it,0);return}at=at.next}nt=nt.next}while(nt!==H)}function a(H,J,X,Z){var $=[],it,nt,at,ht,dt;for(it=0,nt=J.length;it<nt;it++)at=J[it]*Z,ht=it<nt-1?J[it+1]*Z:H.length,dt=i(H,at,ht,Z,!1),dt===dt.next&&(dt.steiner=!0),$.push(C(dt));for($.sort(d),it=0;it<$.length;it++)X=n($[it],X);return X}function d(H,J){return H.x-J.x}function n(H,J){var X=p(H,J);if(!X)return J;var Z=U(X,H);return u(Z,Z.next),u(X,X.next)}function p(H,J){var X=J,Z=H.x,$=H.y,it=-1/0,nt;do{if($<=X.y&&$>=X.next.y&&X.next.y!==X.y){var at=X.x+($-X.y)*(X.next.x-X.x)/(X.next.y-X.y);if(at<=Z&&at>it&&(it=at,nt=X.x<X.next.x?X:X.next,at===Z))return nt}X=X.next}while(X!==J);if(!nt)return null;var ht=nt,dt=nt.x,vt=nt.y,ft=1/0,gt;X=nt;do Z>=X.x&&X.x>=dt&&Z!==X.x&&_($<vt?Z:it,$,dt,vt,$<vt?it:Z,$,X.x,X.y)&&(gt=Math.abs($-X.y)/(Z-X.x),N(X,H)&&(gt<ft||gt===ft&&(X.x>nt.x||X.x===nt.x&&g(nt,X)))&&(nt=X,ft=gt)),X=X.next;while(X!==ht);return nt}function g(H,J){return E(H.prev,H,J.prev)<0&&E(J.next,H,H.next)<0}function v(H,J,X,Z){var $=H;do $.z===0&&($.z=b($.x,$.y,J,X,Z)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next;while($!==H);$.prevZ.nextZ=null,$.prevZ=null,f($)}function f(H){var J,X,Z,$,it,nt,at,ht,dt=1;do{for(X=H,H=null,it=null,nt=0;X;){for(nt++,Z=X,at=0,J=0;J<dt&&(at++,Z=Z.nextZ,!!Z);J++);for(ht=dt;at>0||ht>0&&Z;)at!==0&&(ht===0||!Z||X.z<=Z.z)?($=X,X=X.nextZ,at--):($=Z,Z=Z.nextZ,ht--),it?it.nextZ=$:H=$,$.prevZ=it,it=$;X=Z}it.nextZ=null,dt*=2}while(nt>1);return H}function b(H,J,X,Z,$){return H=(H-X)*$|0,J=(J-Z)*$|0,H=(H|H<<8)&16711935,H=(H|H<<4)&252645135,H=(H|H<<2)&858993459,H=(H|H<<1)&1431655765,J=(J|J<<8)&16711935,J=(J|J<<4)&252645135,J=(J|J<<2)&858993459,J=(J|J<<1)&1431655765,H|J<<1}function C(H){var J=H,X=H;do(J.x<X.x||J.x===X.x&&J.y<X.y)&&(X=J),J=J.next;while(J!==H);return X}function _(H,J,X,Z,$,it,nt,at){return($-nt)*(J-at)>=(H-nt)*(it-at)&&(H-nt)*(Z-at)>=(X-nt)*(J-at)&&(X-nt)*(it-at)>=($-nt)*(Z-at)}function M(H,J){return H.next.i!==J.i&&H.prev.i!==J.i&&!F(H,J)&&(N(H,J)&&N(J,H)&&z(H,J)&&(E(H.prev,H,J.prev)||E(H,J.prev,J))||A(H,J)&&E(H.prev,H,H.next)>0&&E(J.prev,J,J.next)>0)}function E(H,J,X){return(J.y-H.y)*(X.x-J.x)-(J.x-H.x)*(X.y-J.y)}function A(H,J){return H.x===J.x&&H.y===J.y}function R(H,J,X,Z){var $=Y(E(H,J,X)),it=Y(E(H,J,Z)),nt=Y(E(X,Z,H)),at=Y(E(X,Z,J));return!!($!==it&&nt!==at||$===0&&L(H,X,J)||it===0&&L(H,Z,J)||nt===0&&L(X,H,Z)||at===0&&L(X,J,Z))}function L(H,J,X){return J.x<=Math.max(H.x,X.x)&&J.x>=Math.min(H.x,X.x)&&J.y<=Math.max(H.y,X.y)&&J.y>=Math.min(H.y,X.y)}function Y(H){return H>0?1:H<0?-1:0}function F(H,J){var X=H;do{if(X.i!==H.i&&X.next.i!==H.i&&X.i!==J.i&&X.next.i!==J.i&&R(X,X.next,H,J))return!0;X=X.next}while(X!==H);return!1}function N(H,J){return E(H.prev,H,H.next)<0?E(H,J,H.next)>=0&&E(H,H.prev,J)>=0:E(H,J,H.prev)<0||E(H,H.next,J)<0}function z(H,J){var X=H,Z=!1,$=(H.x+J.x)/2,it=(H.y+J.y)/2;do X.y>it!=X.next.y>it&&X.next.y!==X.y&&$<(X.next.x-X.x)*(it-X.y)/(X.next.y-X.y)+X.x&&(Z=!Z),X=X.next;while(X!==H);return Z}function U(H,J){var X=new K(H.i,H.x,H.y),Z=new K(J.i,J.x,J.y),$=H.next,it=J.prev;return H.next=J,J.prev=H,X.next=$,$.prev=X,Z.next=X,X.prev=Z,it.next=Z,Z.prev=it,Z}function q(H,J,X,Z){var $=new K(H,J,X);return Z?($.next=Z.next,$.prev=Z,Z.next.prev=$,Z.next=$):($.prev=$,$.next=$),$}function Q(H){H.next.prev=H.prev,H.prev.next=H.next,H.prevZ&&(H.prevZ.nextZ=H.nextZ),H.nextZ&&(H.nextZ.prevZ=H.prevZ)}function K(H,J,X){this.i=H,this.x=J,this.y=X,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}P.deviation=function(H,J,X,Z){var $=J&&J.length,it=$?J[0]*X:H.length,nt=Math.abs(et(H,0,it,X));if($)for(var at=0,ht=J.length;at<ht;at++){var dt=J[at]*X,vt=at<ht-1?J[at+1]*X:H.length;nt-=Math.abs(et(H,dt,vt,X))}var ft=0;for(at=0;at<Z.length;at+=3){var gt=Z[at]*X,wt=Z[at+1]*X,bt=Z[at+2]*X;ft+=Math.abs((H[gt]-H[bt])*(H[wt+1]-H[gt+1])-(H[gt]-H[wt])*(H[bt+1]-H[gt+1]))}return nt===0&&ft===0?0:Math.abs((ft-nt)/nt)};function et(H,J,X,Z){for(var $=0,it=J,nt=X-Z;it<X;it+=Z)$+=(H[nt]-H[it])*(H[it+1]+H[nt+1]),nt=it;return $}P.flatten=function(H){for(var J=H[0][0].length,X={vertices:[],holes:[],dimensions:J},Z=0,$=0;$<H.length;$++){for(var it=0;it<H[$].length;it++)for(var nt=0;nt<J;nt++)X.vertices.push(H[$][it][nt]);$>0&&(Z+=H[$-1].length,X.holes.push(Z))}return X},y.exports=P},13829:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87841),x=function(c,h){h===void 0&&(h=new u);for(var o=1/0,r=1/0,a=-o,d=-r,n,p=0;p<c.points.length;p++)n=c.points[p],o=Math.min(o,n.x),r=Math.min(r,n.y),a=Math.max(a,n.x),d=Math.max(d,n.y);return h.x=o,h.y=r,h.width=a-o,h.height=d-r,h};y.exports=x},26173:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){u===void 0&&(u=[]);for(var x=0;x<i.points.length;x++)u.push(i.points[x].x),u.push(i.points[x].y);return u};y.exports=P},9564:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35001),x=i(23031),c=i(30052),h=function(o,r,a,d){d===void 0&&(d=[]);var n=o.points,p=c(o);!r&&a>0&&(r=p/a);for(var g=0;g<r;g++)for(var v=p*(g/r),f=0,b=0;b<n.length;b++){var C=n[b],_=n[(b+1)%n.length],M=new x(C.x,C.y,_.x,_.y),E=u(M);if(v<f||v>f+E){f+=E;continue}var A=M.getPoint((v-f)/E);d.push(A);break}return d};y.exports=h},30052:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35001),x=i(23031),c=function(h){for(var o=h.points,r=0,a=0;a<o.length;a++){var d=o[a],n=o[(a+1)%o.length],p=new x(d.x,d.y,n.x,n.y);r+=u(p)}return r};y.exports=c},25717:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(63814),c=i(9564),h=i(23777),o=new u({initialize:function(r){this.type=h.POLYGON,this.area=0,this.points=[],r&&this.setTo(r)},contains:function(r,a){return x(this,r,a)},setTo:function(r){if(this.area=0,this.points=[],typeof r=="string"&&(r=r.split(" ")),!Array.isArray(r))return this;for(var a,d=0;d<r.length;d++)a={x:0,y:0},typeof r[d]=="number"||typeof r[d]=="string"?(a.x=parseFloat(r[d]),a.y=parseFloat(r[d+1]),d++):Array.isArray(r[d])?(a.x=r[d][0],a.y=r[d][1]):(a.x=r[d].x,a.y=r[d].y),this.points.push(a);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var r=0,a,d,n=0;n<this.points.length-1;n++)a=this.points[n],d=this.points[n+1],r+=(d.x-a.x)*(a.y+d.y);return a=this.points[0],d=this.points[this.points.length-1],r+=(a.x-d.x)*(d.y+a.y),this.area=-r*.5,this.area},getPoints:function(r,a,d){return c(this,r,a,d)}});y.exports=o},8133:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.points.reverse(),i};y.exports=P},29524:y=>{function P(o,r){var a=o.x-r.x,d=o.y-r.y;return a*a+d*d}function i(o,r,a){var d=r.x,n=r.y,p=a.x-d,g=a.y-n;if(p!==0||g!==0){var v=((o.x-d)*p+(o.y-n)*g)/(p*p+g*g);v>1?(d=a.x,n=a.y):v>0&&(d+=p*v,n+=g*v)}return p=o.x-d,g=o.y-n,p*p+g*g}function u(o,r){for(var a=o[0],d=[a],n,p=1,g=o.length;p<g;p++)n=o[p],P(n,a)>r&&(d.push(n),a=n);return a!==n&&d.push(n),d}function x(o,r,a,d,n){for(var p=d,g,v=r+1;v<a;v++){var f=i(o[v],o[r],o[a]);f>p&&(g=v,p=f)}p>d&&(g-r>1&&x(o,r,g,d,n),n.push(o[g]),a-g>1&&x(o,g,a,d,n))}function c(o,r){var a=o.length-1,d=[o[0]];return x(o,0,a,r,d),d.push(o[a]),d}var h=function(o,r,a){r===void 0&&(r=1),a===void 0&&(a=!1);var d=o.points;if(d.length>2){var n=r*r;a||(d=u(d,n)),o.setTo(c(d,n))}return o};y.exports=h},5469:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Igor Ognichenko <ognichenko.igor@gmail.com>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(u,x){return u[0]=x[0],u[1]=x[1],u},i=function(u){var x,c=[],h=u.points;for(x=0;x<h.length;x++)c.push([h[x].x,h[x].y]);var o=[];for(c.length>0&&o.push(P([0,0],c[0])),x=0;x<c.length-1;x++){var r=c[x],a=c[x+1],d=r[0],n=r[1],p=a[0],g=a[1];o.push([.85*d+.15*p,.85*n+.15*g]),o.push([.15*d+.85*p,.15*n+.85*g])}return c.length>1&&o.push(P([0,0],c[c.length-1])),u.setTo(o)};y.exports=i},24709:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){for(var c=i.points,h=0;h<c.length;h++)c[h].x+=u,c[h].y+=x;return i};y.exports=P},58423:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25717);u.Clone=i(12306),u.Contains=i(63814),u.ContainsPoint=i(99338),u.Earcut=i(94811),u.GetAABB=i(13829),u.GetNumberArray=i(26173),u.GetPoints=i(9564),u.Perimeter=i(30052),u.Reverse=i(8133),u.Simplify=i(29524),u.Smooth=i(5469),u.Translate=i(24709),y.exports=u},62224:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.width*i.height};y.exports=P},98615:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.x=Math.ceil(i.x),i.y=Math.ceil(i.y),i};y.exports=P},31688:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.x=Math.ceil(i.x),i.y=Math.ceil(i.y),i.width=Math.ceil(i.width),i.height=Math.ceil(i.height),i};y.exports=P},67502:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return i.x=u-i.width/2,i.y=x-i.height/2,i};y.exports=P},65085:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87841),x=function(c){return new u(c.x,c.y,c.width,c.height)};y.exports=x},37303:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return i.width<=0||i.height<=0?!1:i.x<=u&&i.x+i.width>=u&&i.y<=x&&i.y+i.height>=x};y.exports=P},96553:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(37303),x=function(c,h){return u(c,h.x,h.y)};y.exports=x},70273:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u.width*u.height>i.width*i.height?!1:u.x>i.x&&u.x<i.right&&u.right>i.x&&u.right<i.right&&u.y>i.y&&u.y<i.bottom&&u.bottom>i.y&&u.bottom<i.bottom};y.exports=P},43459:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u.setTo(i.x,i.y,i.width,i.height)};y.exports=P},77493:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u===void 0&&(u=[]),u.push({x:i.x,y:i.y}),u.push({x:i.right,y:i.y}),u.push({x:i.right,y:i.bottom}),u.push({x:i.x,y:i.bottom}),u};y.exports=P},9219:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.x===u.x&&i.y===u.y&&i.width===u.width&&i.height===u.height};y.exports=P},53751:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(8249),x=function(c,h){var o=u(c);return o<u(h)?c.setSize(h.height*o,h.height):c.setSize(h.width,h.width/o),c.setPosition(h.centerX-c.width/2,h.centerY-c.height/2)};y.exports=x},16088:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(8249),x=function(c,h){var o=u(c);return o>u(h)?c.setSize(h.height*o,h.height):c.setSize(h.width,h.width/o),c.setPosition(h.centerX-c.width/2,h.centerY-c.height/2)};y.exports=x},80774:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.x=Math.floor(i.x),i.y=Math.floor(i.y),i};y.exports=P},83859:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.x=Math.floor(i.x),i.y=Math.floor(i.y),i.width=Math.floor(i.width),i.height=Math.floor(i.height),i};y.exports=P},19217:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87841),x=i(36383),c=function(h,o){if(o===void 0&&(o=new u),h.length===0)return o;for(var r=Number.MAX_VALUE,a=Number.MAX_VALUE,d=x.MIN_SAFE_INTEGER,n=x.MIN_SAFE_INTEGER,p,g,v,f=0;f<h.length;f++)p=h[f],Array.isArray(p)?(g=p[0],v=p[1]):(g=p.x,v=p.y),r=Math.min(r,g),a=Math.min(a,v),d=Math.max(d,g),n=Math.max(n,v);return o.x=r,o.y=a,o.width=d-r,o.height=n-a,o};y.exports=c},9477:(y,P,i)=>{/**
* @author       samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87841),x=function(c,h,o,r,a){return a===void 0&&(a=new u),a.setTo(Math.min(c,o),Math.min(h,r),Math.abs(c-o),Math.abs(h-r))};y.exports=x},8249:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.height===0?NaN:i.width/i.height};y.exports=P},27165:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h){return h===void 0&&(h=new u),h.x=c.centerX,h.y=c.centerY,h};y.exports=x},20812:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(13019),x=i(2141),c=function(h,o,r){if(r===void 0&&(r=new x),o<=0||o>=1)return r.x=h.x,r.y=h.y,r;var a=u(h)*o;return o>.5?(a-=h.width+h.height,a<=h.width?(r.x=h.right-a,r.y=h.bottom):(r.x=h.x,r.y=h.bottom-(a-h.width))):a<=h.width?(r.x=h.x+a,r.y=h.y):(r.x=h.right,r.y=h.y+(a-h.width)),r};y.exports=c},34819:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(20812),x=i(13019),c=function(h,o,r,a){a===void 0&&(a=[]),!o&&r>0&&(o=x(h)/r);for(var d=0;d<o;d++){var n=d/o;a.push(u(h,n))}return a};y.exports=c},51313:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h){return h===void 0&&(h=new u),h.x=c.width,h.y=c.height,h};y.exports=x},86091:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(67502),x=function(c,h,o){var r=c.centerX,a=c.centerY;return c.setSize(c.width+h*2,c.height+o*2),u(c,r,a)};y.exports=x},53951:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87841),x=i(59996),c=function(h,o,r){return r===void 0&&(r=new u),x(h,o)?(r.x=Math.max(h.x,o.x),r.y=Math.max(h.y,o.y),r.width=Math.min(h.right,o.right)-r.x,r.height=Math.min(h.bottom,o.bottom)-r.y):r.setEmpty(),r};y.exports=c},14649:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(13019),x=i(2141),c=function(h,o,r,a){if(a===void 0&&(a=[]),!o&&!r)return a;o?r=Math.round(u(h)/o):o=u(h)/r;for(var d=h.x,n=h.y,p=0,g=0;g<r;g++)switch(a.push(new x(d,n)),p){case 0:d+=o,d>=h.right&&(p=1,n+=d-h.right,d=h.right);break;case 1:n+=o,n>=h.bottom&&(p=2,d-=n-h.bottom,n=h.bottom);break;case 2:d-=o,d<=h.left&&(p=3,n-=h.left-d,d=h.left);break;case 3:n-=o,n<=h.top&&(p=0,n=h.top);break}return a};y.exports=c},33595:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){for(var x=i.x,c=i.right,h=i.y,o=i.bottom,r=0;r<u.length;r++)x=Math.min(x,u[r].x),c=Math.max(c,u[r].x),h=Math.min(h,u[r].y),o=Math.max(o,u[r].y);return i.x=x,i.y=h,i.width=c-x,i.height=o-h,i};y.exports=P},20074:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=Math.min(i.x,u.x),c=Math.max(i.right,u.right);i.x=x,i.width=c-x;var h=Math.min(i.y,u.y),o=Math.max(i.bottom,u.bottom);return i.y=h,i.height=o-h,i};y.exports=P},92171:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=Math.min(i.x,u),h=Math.max(i.right,u);i.x=c,i.width=h-c;var o=Math.min(i.y,x),r=Math.max(i.bottom,x);return i.y=o,i.height=r-o,i};y.exports=P},42981:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return i.x+=u,i.y+=x,i};y.exports=P},46907:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.x+=u.x,i.y+=u.y,i};y.exports=P},60170:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.x<u.right&&i.right>u.x&&i.y<u.bottom&&i.bottom>u.y};y.exports=P},13019:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return 2*(i.width+i.height)};y.exports=P},85133:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=i(39506),c=function(h,o,r){r===void 0&&(r=new u),o=x(o);var a=Math.sin(o),d=Math.cos(o),n=d>0?h.width/2:h.width/-2,p=a>0?h.height/2:h.height/-2;return Math.abs(n*a)<Math.abs(p*d)?p=n*a/d:n=p*d/a,r.x=n+h.centerX,r.y=p+h.centerY,r};y.exports=c},26597:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h){return h===void 0&&(h=new u),h.x=c.x+Math.random()*c.width,h.y=c.y+Math.random()*c.height,h};y.exports=x},86470:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(30976),x=i(70273),c=i(2141),h=function(o,r,a){if(a===void 0&&(a=new c),x(o,r))switch(u(0,3)){case 0:a.x=o.x+Math.random()*(r.right-o.x),a.y=o.y+Math.random()*(r.top-o.y);break;case 1:a.x=r.x+Math.random()*(o.right-r.x),a.y=r.bottom+Math.random()*(o.bottom-r.bottom);break;case 2:a.x=o.x+Math.random()*(r.x-o.x),a.y=r.y+Math.random()*(o.bottom-r.y);break;case 3:a.x=r.right+Math.random()*(o.right-r.right),a.y=o.y+Math.random()*(r.bottom-o.y);break}return a};y.exports=h},87841:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(37303),c=i(20812),h=i(34819),o=i(23777),r=i(23031),a=i(26597),d=new u({initialize:function(n,p,g,v){n===void 0&&(n=0),p===void 0&&(p=0),g===void 0&&(g=0),v===void 0&&(v=0),this.type=o.RECTANGLE,this.x=n,this.y=p,this.width=g,this.height=v},contains:function(n,p){return x(this,n,p)},getPoint:function(n,p){return c(this,n,p)},getPoints:function(n,p,g){return h(this,n,p,g)},getRandomPoint:function(n){return a(this,n)},setTo:function(n,p,g,v){return this.x=n,this.y=p,this.width=g,this.height=v,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(n,p){return p===void 0&&(p=n),this.x=n,this.y=p,this},setSize:function(n,p){return p===void 0&&(p=n),this.width=n,this.height=p,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(n){return n===void 0&&(n=new r),n.setTo(this.x,this.y,this.right,this.y),n},getLineB:function(n){return n===void 0&&(n=new r),n.setTo(this.right,this.y,this.right,this.bottom),n},getLineC:function(n){return n===void 0&&(n=new r),n.setTo(this.right,this.bottom,this.x,this.bottom),n},getLineD:function(n){return n===void 0&&(n=new r),n.setTo(this.x,this.bottom,this.x,this.y),n},left:{get:function(){return this.x},set:function(n){n>=this.right?this.width=0:this.width=this.right-n,this.x=n}},right:{get:function(){return this.x+this.width},set:function(n){n<=this.x?this.width=0:this.width=n-this.x}},top:{get:function(){return this.y},set:function(n){n>=this.bottom?this.height=0:this.height=this.bottom-n,this.y=n}},bottom:{get:function(){return this.y+this.height},set:function(n){n<=this.y?this.height=0:this.height=n-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(n){this.x=n-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(n){this.y=n-this.height/2}}});y.exports=d},94845:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.width===u.width&&i.height===u.height};y.exports=P},31730:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return x===void 0&&(x=u),i.width*=u,i.height*=x,i};y.exports=P},36899:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87841),x=function(c,h,o){o===void 0&&(o=new u);var r=Math.min(c.x,h.x),a=Math.min(c.y,h.y),d=Math.max(c.right,h.right)-r,n=Math.max(c.bottom,h.bottom)-a;return o.setTo(r,a,d,n)};y.exports=x},93232:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87841);u.Area=i(62224),u.Ceil=i(98615),u.CeilAll=i(31688),u.CenterOn=i(67502),u.Clone=i(65085),u.Contains=i(37303),u.ContainsPoint=i(96553),u.ContainsRect=i(70273),u.CopyFrom=i(43459),u.Decompose=i(77493),u.Equals=i(9219),u.FitInside=i(53751),u.FitOutside=i(16088),u.Floor=i(80774),u.FloorAll=i(83859),u.FromPoints=i(19217),u.FromXY=i(9477),u.GetAspectRatio=i(8249),u.GetCenter=i(27165),u.GetPoint=i(20812),u.GetPoints=i(34819),u.GetSize=i(51313),u.Inflate=i(86091),u.Intersection=i(53951),u.MarchingAnts=i(14649),u.MergePoints=i(33595),u.MergeRect=i(20074),u.MergeXY=i(92171),u.Offset=i(42981),u.OffsetPoint=i(46907),u.Overlaps=i(60170),u.Perimeter=i(13019),u.PerimeterPoint=i(85133),u.Random=i(26597),u.RandomOutside=i(86470),u.SameDimensions=i(94845),u.Scale=i(31730),u.Union=i(36899),y.exports=u},41658:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u=i.x1,x=i.y1,c=i.x2,h=i.y2,o=i.x3,r=i.y3;return Math.abs(((o-u)*(h-x)-(c-u)*(r-x))/2)};y.exports=P},39208:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(16483),x=function(c,h,o){var r=o*(Math.sqrt(3)/2),a=c,d=h,n=c+o/2,p=h+r,g=c-o/2,v=h+r;return new u(a,d,n,p,g,v)};y.exports=x},39545:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(94811),x=i(16483),c=function(h,o,r,a,d){o===void 0&&(o=null),r===void 0&&(r=1),a===void 0&&(a=1),d===void 0&&(d=[]);for(var n=u(h,o),p,g,v,f,b,C,_,M,E,A=0;A<n.length;A+=3)p=n[A],g=n[A+1],v=n[A+2],f=h[p*2]*r,b=h[p*2+1]*a,C=h[g*2]*r,_=h[g*2+1]*a,M=h[v*2]*r,E=h[v*2+1]*a,d.push(new x(f,b,C,_,M,E));return d};y.exports=c},90301:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(16483),x=function(c,h,o,r){r===void 0&&(r=o);var a=c,d=h,n=c,p=h-r,g=c+o,v=h;return new u(a,d,n,p,g,v)};y.exports=x},23707:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(97523),x=i(13584),c=function(h,o,r,a){a===void 0&&(a=u);var d=a(h),n=o-d.x,p=r-d.y;return x(h,n,p)};y.exports=c},97523:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h){return h===void 0&&(h=new u),h.x=(c.x1+c.x2+c.x3)/3,h.y=(c.y1+c.y2+c.y3)/3,h};y.exports=x},24951:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26099);function x(h,o,r,a){return h*a-o*r}var c=function(h,o){o===void 0&&(o=new u);var r=h.x3,a=h.y3,d=h.x1-r,n=h.y1-a,p=h.x2-r,g=h.y2-a,v=2*x(d,n,p,g),f=x(n,d*d+n*n,g,p*p+g*g),b=x(d,d*d+n*n,p,p*p+g*g);return o.x=r-f/v,o.y=a+b/v,o};y.exports=c},85614:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(96503),x=function(c,h){h===void 0&&(h=new u);var o=c.x1,r=c.y1,a=c.x2,d=c.y2,n=c.x3,p=c.y3,g=a-o,v=d-r,f=n-o,b=p-r,C=g*(o+a)+v*(r+d),_=f*(o+n)+b*(r+p),M=2*(g*(p-d)-v*(n-a)),E,A;if(Math.abs(M)<1e-6){var R=Math.min(o,a,n),L=Math.min(r,d,p);E=(Math.max(o,a,n)-R)*.5,A=(Math.max(r,d,p)-L)*.5,h.x=R+E,h.y=L+A,h.radius=Math.sqrt(E*E+A*A)}else h.x=(b*C-v*_)/M,h.y=(g*_-f*C)/M,E=h.x-o,A=h.y-r,h.radius=Math.sqrt(E*E+A*A);return h};y.exports=x},74422:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(16483),x=function(c){return new u(c.x1,c.y1,c.x2,c.y2,c.x3,c.y3)};y.exports=x},10690:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=i.x3-i.x1,h=i.y3-i.y1,o=i.x2-i.x1,r=i.y2-i.y1,a=u-i.x1,d=x-i.y1,n=c*c+h*h,p=c*o+h*r,g=c*a+h*d,v=o*o+r*r,f=o*a+r*d,b=n*v-p*p,C=b===0?0:1/b,_=(v*g-p*f)*C,M=(n*f-p*g)*C;return _>=0&&M>=0&&_+M<1};y.exports=P},48653:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){x===void 0&&(x=!1),c===void 0&&(c=[]);for(var h=i.x3-i.x1,o=i.y3-i.y1,r=i.x2-i.x1,a=i.y2-i.y1,d=h*h+o*o,n=h*r+o*a,p=r*r+a*a,g=d*p-n*n,v=g===0?0:1/g,f,b,C,_,M,E,A=i.x1,R=i.y1,L=0;L<u.length&&(C=u[L].x-A,_=u[L].y-R,M=h*C+o*_,E=r*C+a*_,f=(p*M-n*E)*v,b=(d*E-n*M)*v,!(f>=0&&b>=0&&f+b<1&&(c.push({x:u[L].x,y:u[L].y}),x)));L++);return c};y.exports=P},96006:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(10690),x=function(c,h){return u(c,h.x,h.y)};y.exports=x},71326:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u.setTo(i.x1,i.y1,i.x2,i.y2,i.x3,i.y3)};y.exports=P},71694:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u===void 0&&(u=[]),u.push({x:i.x1,y:i.y1}),u.push({x:i.x2,y:i.y2}),u.push({x:i.x3,y:i.y3}),u};y.exports=P},33522:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.x1===u.x1&&i.y1===u.y1&&i.x2===u.x2&&i.y2===u.y2&&i.x3===u.x3&&i.y3===u.y3};y.exports=P},20437:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=i(35001),c=function(h,o,r){r===void 0&&(r=new u);var a=h.getLineA(),d=h.getLineB(),n=h.getLineC();if(o<=0||o>=1)return r.x=a.x1,r.y=a.y1,r;var p=x(a),g=x(d),v=x(n),f=p+g+v,b=f*o,C=0;return b<p?(C=b/p,r.x=a.x1+(a.x2-a.x1)*C,r.y=a.y1+(a.y2-a.y1)*C):b>p+g?(b-=p+g,C=b/v,r.x=n.x1+(n.x2-n.x1)*C,r.y=n.y1+(n.y2-n.y1)*C):(b-=p,C=b/g,r.x=d.x1+(d.x2-d.x1)*C,r.y=d.y1+(d.y2-d.y1)*C),r};y.exports=c},80672:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35001),x=i(2141),c=function(h,o,r,a){a===void 0&&(a=[]);var d=h.getLineA(),n=h.getLineB(),p=h.getLineC(),g=u(d),v=u(n),f=u(p),b=g+v+f;!o&&r>0&&(o=b/r);for(var C=0;C<o;C++){var _=b*(C/o),M=0,E=new x;_<g?(M=_/g,E.x=d.x1+(d.x2-d.x1)*M,E.y=d.y1+(d.y2-d.y1)*M):_>g+v?(_-=g+v,M=_/f,E.x=p.x1+(p.x2-p.x1)*M,E.y=p.y1+(p.y2-p.y1)*M):(_-=g,M=_/v,E.x=n.x1+(n.x2-n.x1)*M,E.y=n.y1+(n.y2-n.y1)*M),a.push(E)}return a};y.exports=c},39757:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141);function x(h,o,r,a){var d=h-r,n=o-a,p=d*d+n*n;return Math.sqrt(p)}var c=function(h,o){o===void 0&&(o=new u);var r=h.x1,a=h.y1,d=h.x2,n=h.y2,p=h.x3,g=h.y3,v=x(p,g,d,n),f=x(r,a,p,g),b=x(d,n,r,a),C=v+f+b;return o.x=(r*v+d*f+p*b)/C,o.y=(a*v+n*f+g*b)/C,o};y.exports=c},13584:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return i.x1+=u,i.y1+=x,i.x2+=u,i.y2+=x,i.x3+=u,i.y3+=x,i};y.exports=P},1376:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35001),x=function(c){var h=c.getLineA(),o=c.getLineB(),r=c.getLineC();return u(h)+u(o)+u(r)};y.exports=x},90260:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2141),x=function(c,h){h===void 0&&(h=new u);var o=c.x2-c.x1,r=c.y2-c.y1,a=c.x3-c.x1,d=c.y3-c.y1,n=Math.random(),p=Math.random();return n+p>=1&&(n=1-n,p=1-p),h.x=c.x1+(o*n+a*p),h.y=c.y1+(r*n+d*p),h};y.exports=x},52172:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(99614),x=i(39757),c=function(h,o){var r=x(h);return u(h,r.x,r.y,o)};y.exports=c},49907:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(99614),x=function(c,h,o){return u(c,h.x,h.y,o)};y.exports=x},99614:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){var h=Math.cos(c),o=Math.sin(c),r=i.x1-u,a=i.y1-x;return i.x1=r*h-a*o+u,i.y1=r*o+a*h+x,r=i.x2-u,a=i.y2-x,i.x2=r*h-a*o+u,i.y2=r*o+a*h+x,r=i.x3-u,a=i.y3-x,i.x3=r*h-a*o+u,i.y3=r*o+a*h+x,i};y.exports=P},16483:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(10690),c=i(20437),h=i(80672),o=i(23777),r=i(23031),a=i(90260),d=new u({initialize:function(n,p,g,v,f,b){n===void 0&&(n=0),p===void 0&&(p=0),g===void 0&&(g=0),v===void 0&&(v=0),f===void 0&&(f=0),b===void 0&&(b=0),this.type=o.TRIANGLE,this.x1=n,this.y1=p,this.x2=g,this.y2=v,this.x3=f,this.y3=b},contains:function(n,p){return x(this,n,p)},getPoint:function(n,p){return c(this,n,p)},getPoints:function(n,p,g){return h(this,n,p,g)},getRandomPoint:function(n){return a(this,n)},setTo:function(n,p,g,v,f,b){return n===void 0&&(n=0),p===void 0&&(p=0),g===void 0&&(g=0),v===void 0&&(v=0),f===void 0&&(f=0),b===void 0&&(b=0),this.x1=n,this.y1=p,this.x2=g,this.y2=v,this.x3=f,this.y3=b,this},getLineA:function(n){return n===void 0&&(n=new r),n.setTo(this.x1,this.y1,this.x2,this.y2),n},getLineB:function(n){return n===void 0&&(n=new r),n.setTo(this.x2,this.y2,this.x3,this.y3),n},getLineC:function(n){return n===void 0&&(n=new r),n.setTo(this.x3,this.y3,this.x1,this.y1),n},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(n){var p=0;this.x1<=this.x2&&this.x1<=this.x3?p=this.x1-n:this.x2<=this.x1&&this.x2<=this.x3?p=this.x2-n:p=this.x3-n,this.x1-=p,this.x2-=p,this.x3-=p}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(n){var p=0;this.x1>=this.x2&&this.x1>=this.x3?p=this.x1-n:this.x2>=this.x1&&this.x2>=this.x3?p=this.x2-n:p=this.x3-n,this.x1-=p,this.x2-=p,this.x3-=p}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(n){var p=0;this.y1<=this.y2&&this.y1<=this.y3?p=this.y1-n:this.y2<=this.y1&&this.y2<=this.y3?p=this.y2-n:p=this.y3-n,this.y1-=p,this.y2-=p,this.y3-=p}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(n){var p=0;this.y1>=this.y2&&this.y1>=this.y3?p=this.y1-n:this.y2>=this.y1&&this.y2>=this.y3?p=this.y2-n:p=this.y3-n,this.y1-=p,this.y2-=p,this.y3-=p}}});y.exports=d},84435:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(16483);u.Area=i(41658),u.BuildEquilateral=i(39208),u.BuildFromPolygon=i(39545),u.BuildRight=i(90301),u.CenterOn=i(23707),u.Centroid=i(97523),u.CircumCenter=i(24951),u.CircumCircle=i(85614),u.Clone=i(74422),u.Contains=i(10690),u.ContainsArray=i(48653),u.ContainsPoint=i(96006),u.CopyFrom=i(71326),u.Decompose=i(71694),u.Equals=i(33522),u.GetPoint=i(20437),u.GetPoints=i(80672),u.InCenter=i(39757),u.Perimeter=i(1376),u.Offset=i(13584),u.Random=i(90260),u.Rotate=i(52172),u.RotateAroundPoint=i(49907),u.RotateAroundXY=i(99614),y.exports=u},74457:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return{gameObject:i,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:u,hitAreaCallback:x,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};y.exports=P},84409:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return function(x,c,h,o){var r=i.getPixelAlpha(c,h,o.texture.key,o.frame.name);return r&&r>=u}};y.exports=P},7003:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(93301),c=i(50792),h=i(8214),o=i(8443),r=i(78970),a=i(85098),d=i(42515),n=i(36210),p=i(61340),g=i(85955),v=new u({initialize:function(f,b){this.game=f,this.scaleManager,this.canvas,this.config=b,this.enabled=!0,this.events=new c,this.isOver=!0,this.defaultCursor="",this.keyboard=b.inputKeyboard?new r(this):null,this.mouse=b.inputMouse?new a(this):null,this.touch=b.inputTouch?new n(this):null,this.pointers=[],this.pointersTotal=b.inputActivePointers;for(var C=0;C<=this.pointersTotal;C++){var _=new d(this,C);_.smoothFactor=b.inputSmoothFactor,this.pointers.push(_)}this.mousePointer=b.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new p,this._tempMatrix2=new p,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],f.events.once(o.BOOT,this.boot,this)},boot:function(){var f=this.game,b=f.events;this.canvas=f.canvas,this.scaleManager=f.scale,this.events.emit(h.MANAGER_BOOT),b.on(o.PRE_RENDER,this.preRender,this),b.once(o.DESTROY,this.destroy,this)},setCanvasOver:function(f){this.isOver=!0,this.events.emit(h.GAME_OVER,f)},setCanvasOut:function(f){this.isOver=!1,this.events.emit(h.GAME_OUT,f)},preRender:function(){var f=this.game.loop.now,b=this.game.loop.delta,C=this.game.scene.getScenes(!0,!0);this.time=f,this.events.emit(h.MANAGER_UPDATE);for(var _=0;_<C.length;_++){var M=C[_];if(M.sys.input&&M.sys.input.updatePoll(f,b)&&this.globalTopOnly)return}},setDefaultCursor:function(f){this.defaultCursor=f,this.canvas.style.cursor!==f&&(this.canvas.style.cursor=f)},setCursor:function(f){f.cursor&&(this.canvas.style.cursor=f.cursor)},resetCursor:function(f,b){(b||f&&f.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(f){f===void 0&&(f=1);var b=[];this.pointersTotal+f>10&&(f=10-this.pointersTotal);for(var C=0;C<f;C++){var _=this.pointers.length,M=new d(this,_);M.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(M),this.pointersTotal++,b.push(M)}return b},updateInputPlugins:function(f,b){var C=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var _=0;_<C.length;_++){var M=C[_];if(M.sys.input){var E=M.sys.input.update(f,b);if(E&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(f){for(var b=this.pointers,C=[],_=0;_<f.changedTouches.length;_++)for(var M=f.changedTouches[_],E=1;E<b.length;E++){var A=b[E];if(!A.active){A.touchstart(M,f),this.activePointer=A,C.push(A);break}}this.updateInputPlugins(x.TOUCH_START,C)},onTouchMove:function(f){for(var b=this.pointers,C=[],_=0;_<f.changedTouches.length;_++)for(var M=f.changedTouches[_],E=1;E<b.length;E++){var A=b[E];if(A.active&&A.identifier===M.identifier){var R=document.elementFromPoint(M.clientX,M.clientY),L=R===this.canvas;!this.isOver&&L?this.setCanvasOver(f):this.isOver&&!L&&this.setCanvasOut(f),this.isOver&&(A.touchmove(M,f),this.activePointer=A,C.push(A));break}}this.updateInputPlugins(x.TOUCH_MOVE,C)},onTouchEnd:function(f){for(var b=this.pointers,C=[],_=0;_<f.changedTouches.length;_++)for(var M=f.changedTouches[_],E=1;E<b.length;E++){var A=b[E];if(A.active&&A.identifier===M.identifier){A.touchend(M,f),C.push(A);break}}this.updateInputPlugins(x.TOUCH_END,C)},onTouchCancel:function(f){for(var b=this.pointers,C=[],_=0;_<f.changedTouches.length;_++)for(var M=f.changedTouches[_],E=1;E<b.length;E++){var A=b[E];if(A.active&&A.identifier===M.identifier){A.touchcancel(M,f),C.push(A);break}}this.updateInputPlugins(x.TOUCH_CANCEL,C)},onMouseDown:function(f){var b=this.mousePointer;b.down(f),b.updateMotion(),this.activePointer=b,this.updateInputPlugins(x.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(f){var b=this.mousePointer;b.move(f),b.updateMotion(),this.activePointer=b,this.updateInputPlugins(x.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(f){var b=this.mousePointer;b.up(f),b.updateMotion(),this.activePointer=b,this.updateInputPlugins(x.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(f){var b=this.mousePointer;b.wheel(f),this.activePointer=b,this.updateInputPlugins(x.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(f){var b=this.mouse.locked;this.mousePointer.locked=b,this.events.emit(h.POINTERLOCK_CHANGE,f,b)},inputCandidate:function(f,b){var C=f.input;if(!C||!C.enabled||!f.willRender(b))return!1;var _=!0,M=f.parentContainer;if(M)do{if(!M.willRender(b)){_=!1;break}M=M.parentContainer}while(M);return _},hitTest:function(f,b,C,_){_===void 0&&(_=this._tempHitTest);var M=this._tempPoint,E=C.scrollX,A=C.scrollY;_.length=0;var R=f.x,L=f.y;C.getWorldPoint(R,L,M),f.worldX=M.x,f.worldY=M.y;for(var Y={x:0,y:0},F=this._tempMatrix,N=this._tempMatrix2,z=0;z<b.length;z++){var U=b[z];if(this.inputCandidate(U,C)){var q=M.x+E*U.scrollFactorX-E,Q=M.y+A*U.scrollFactorY-A;U.parentContainer?(U.getWorldTransformMatrix(F,N),F.applyInverse(q,Q,Y)):g(q,Q,U.x,U.y,U.rotation,U.scaleX,U.scaleY,Y),this.pointWithinHitArea(U,Y.x,Y.y)&&_.push(U)}}return _},pointWithinHitArea:function(f,b,C){b+=f.displayOriginX,C+=f.displayOriginY;var _=f.input;return _&&_.hitAreaCallback(_.hitArea,b,C,f)?(_.localX=b,_.localY=C,!0):!1},pointWithinInteractiveObject:function(f,b,C){return f.hitArea?(b+=f.gameObject.displayOriginX,C+=f.gameObject.displayOriginY,f.localX=b,f.localY=C,f.hitAreaCallback(f.hitArea,b,C,f)):!1},transformPointer:function(f,b,C,_){var M=f.position,E=f.prevPosition;E.x=M.x,E.y=M.y;var A=this.scaleManager.transformX(b),R=this.scaleManager.transformY(C),L=f.smoothFactor;!_||L===0?(M.x=A,M.y=R):(M.x=A*L+E.x*(1-L),M.y=R*L+E.y*(1-L))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(o.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var f=0;f<this.pointers.length;f++)this.pointers[f].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});y.exports=v},48205:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(96503),x=i(87902),c=i(83419),h=i(93301),o=i(74457),r=i(84409),a=i(20339),d=i(8497),n=i(81154),p=i(8214),g=i(50792),v=i(95540),f=i(23777),b=i(89639),C=i(41212),_=i(37277),M=i(87841),E=i(37303),A=i(44594),R=i(16483),L=i(10690),Y=new c({Extends:g,initialize:function(F){g.call(this),this.scene=F,this.systems=F.sys,this.settings=F.sys.settings,this.manager=F.sys.game.input,this.pluginEvents=new g,this.enabled=!0,this.displayList,this.cameras,b.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var N={cancelled:!1};this._eventContainer={stopPropagation:function(){N.cancelled=!0}},this._eventData=N,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,F.sys.events.once(A.BOOT,this.boot,this),F.sys.events.on(A.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(A.DESTROY,this.destroy,this),this.pluginEvents.emit(p.BOOT)},start:function(){var F=this.systems.events;F.on(A.TRANSITION_START,this.transitionIn,this),F.on(A.TRANSITION_OUT,this.transitionOut,this),F.on(A.TRANSITION_COMPLETE,this.transitionComplete,this),F.on(A.PRE_UPDATE,this.preUpdate,this),F.once(A.SHUTDOWN,this.shutdown,this),this.manager.events.on(p.GAME_OUT,this.onGameOut,this),this.manager.events.on(p.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(p.START)},onGameOver:function(F){this.isActive()&&this.emit(p.GAME_OVER,F.timeStamp,F)},onGameOut:function(F){this.isActive()&&this.emit(p.GAME_OUT,F.timeStamp,F)},preUpdate:function(){this.pluginEvents.emit(p.PRE_UPDATE);var F=this._pendingRemoval,N=this._pendingInsertion,z=F.length,U=N.length;if(!(z===0&&U===0)){for(var q=this._list,Q=0;Q<z;Q++){var K=F[Q],et=q.indexOf(K);et>-1&&(q.splice(et,1),this.clear(K,!0))}this._pendingRemoval.length=0,this._list=q.concat(N.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(F){this.manager&&this.manager.setCursor(F)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(F,N){if(!this.isActive())return!1;if(this.pluginEvents.emit(p.UPDATE,F,N),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var z,U=this.manager,q=U.pointers;for(z=0;z<q.length;z++)q[z].updateMotion();if(this._list.length===0)return!1;var Q=this.pollRate;if(Q===-1)return!1;if(Q>0)if(this._pollTimer-=N,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var K=!1;for(z=0;z<q.length;z++){var et=0,H=q[z];this._tempZones=[],this._temp=this.hitTestPointer(H),this.sortGameObjects(this._temp,H),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),et+=this.processOverOutEvents(H),this.getDragState(H)===2&&this.processDragThresholdEvent(H,F),et>0&&(K=!0)}return K},update:function(F,N){if(!this.isActive())return!1;for(var z=!1,U=0;U<N.length;U++){var q=0,Q=N[U];switch(this._tempZones=[],this._temp=this.hitTestPointer(Q),this.sortGameObjects(this._temp,Q),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),F){case h.MOUSE_DOWN:q+=this.processDragDownEvent(Q),q+=this.processDownEvents(Q),q+=this.processOverOutEvents(Q);break;case h.MOUSE_UP:q+=this.processDragUpEvent(Q),q+=this.processUpEvents(Q),q+=this.processOverOutEvents(Q);break;case h.TOUCH_START:q+=this.processDragDownEvent(Q),q+=this.processDownEvents(Q),q+=this.processOverEvents(Q);break;case h.TOUCH_END:case h.TOUCH_CANCEL:q+=this.processDragUpEvent(Q),q+=this.processUpEvents(Q),q+=this.processOutEvents(Q);break;case h.MOUSE_MOVE:case h.TOUCH_MOVE:q+=this.processDragMoveEvent(Q),q+=this.processMoveEvents(Q),q+=this.processOverOutEvents(Q);break;case h.MOUSE_WHEEL:q+=this.processWheelEvent(Q);break}q>0&&(z=!0)}return this._updatedThisFrame=!0,z},clear:function(F,N){N===void 0&&(N=!1),this.disable(F);var z=F.input;z&&(this.removeDebug(F),this.manager.resetCursor(z),z.gameObject=void 0,z.target=void 0,z.hitArea=void 0,z.hitAreaCallback=void 0,z.callbackContext=void 0,F.input=null),N||this.queueForRemoval(F);var U=this._draggable.indexOf(F);return U>-1&&this._draggable.splice(U,1),F},disable:function(F,N){N===void 0&&(N=!1);var z=F.input;z&&(z.enabled=!1,z.dragState=0);for(var U=this._drag,q=this._over,Q=this.manager,K=0,et;K<Q.pointers.length;K++)et=U[K].indexOf(F),et>-1&&U[K].splice(et,1),et=q[K].indexOf(F),et>-1&&q[K].splice(et,1);return N&&this.resetCursor(),this},enable:function(F,N,z,U){return U===void 0&&(U=!1),F.input?F.input.enabled=!0:this.setHitArea(F,N,z),F.input&&U&&!F.input.dropZone&&(F.input.dropZone=U),this},hitTestPointer:function(F){for(var N=this.cameras.getCamerasBelowPointer(F),z=0;z<N.length;z++){for(var U=N[z],q=this.manager.hitTest(F,this._list,U),Q=0;Q<q.length;Q++){var K=q[Q];K.input.dropZone&&this._tempZones.push(K)}if(q.length>0)return F.camera=U,q}return F.camera=N[0],[]},processDownEvents:function(F){var N=0,z=this._temp,U=this._eventData,q=this._eventContainer;U.cancelled=!1;for(var Q=0;Q<z.length;Q++){var K=z[Q];if(!(!K.input||!K.input.enabled)&&(N++,K.emit(p.GAMEOBJECT_POINTER_DOWN,F,K.input.localX,K.input.localY,q),U.cancelled||!this.isActive()||K.input&&K.input.enabled&&(this.emit(p.GAMEOBJECT_DOWN,F,K,q),U.cancelled||!this.isActive())))break}return!U.cancelled&&this.isActive()&&(F.downElement===this.manager.game.canvas?this.emit(p.POINTER_DOWN,F,z):this.emit(p.POINTER_DOWN_OUTSIDE,F)),N},getDragState:function(F){return this._dragState[F.id]},setDragState:function(F,N){this._dragState[F.id]=N},processDragThresholdEvent:function(F,N){var z=!1,U=this.dragTimeThreshold,q=this.dragDistanceThreshold;if((q>0&&a(F.x,F.y,F.downX,F.downY)>=q||U>0&&N>=F.downTime+U)&&(z=!0),z)return this.setDragState(F,3),this.processDragStartList(F)},processDragStartList:function(F){if(this.getDragState(F)!==3)return 0;var N=this._drag[F.id];N.length>1&&(N=N.slice(0));for(var z=0;z<N.length;z++){var U=N[z],q=U.input;q.dragState=2,q.dragStartX=U.x,q.dragStartY=U.y,q.dragStartXGlobal=F.worldX,q.dragStartYGlobal=F.worldY,q.dragStartCamera=F.camera,q.dragX=q.dragStartXGlobal-q.dragStartX,q.dragY=q.dragStartYGlobal-q.dragStartY,U.emit(p.GAMEOBJECT_DRAG_START,F,q.dragX,q.dragY),this.emit(p.DRAG_START,F,U)}return this.setDragState(F,4),N.length},processDragDownEvent:function(F){var N=this._temp;if(this._draggable.length===0||N.length===0||!F.primaryDown||this.getDragState(F)!==0)return 0;this.setDragState(F,1);for(var z=[],U=0;U<N.length;U++){var q=N[U];q.input.draggable&&q.input.dragState===0&&z.push(q)}return z.length===0?(this.setDragState(F,0),0):(z.length>1&&(this.sortGameObjects(z,F),this.topOnly&&z.splice(1)),this._drag[F.id]=z,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(F,3),this.processDragStartList(F)):(this.setDragState(F,2),0))},processDragMoveEvent:function(F){if(this.getDragState(F)===2&&this.processDragThresholdEvent(F,this.manager.game.loop.now),this.getDragState(F)!==4)return 0;var N=this._tempZones,z=this._drag[F.id];z.length>1&&(z=z.slice(0));for(var U=0;U<z.length;U++){var q=z[U],Q=q.input,K=Q.target;if(K){var et=N.indexOf(K);et===0?(q.emit(p.GAMEOBJECT_DRAG_OVER,F,K),this.emit(p.DRAG_OVER,F,q,K)):et>0?(q.emit(p.GAMEOBJECT_DRAG_LEAVE,F,K),this.emit(p.DRAG_LEAVE,F,q,K),Q.target=N[0],K=Q.target,q.emit(p.GAMEOBJECT_DRAG_ENTER,F,K),this.emit(p.DRAG_ENTER,F,q,K)):(q.emit(p.GAMEOBJECT_DRAG_LEAVE,F,K),this.emit(p.DRAG_LEAVE,F,q,K),N[0]?(Q.target=N[0],K=Q.target,q.emit(p.GAMEOBJECT_DRAG_ENTER,F,K),this.emit(p.DRAG_ENTER,F,q,K)):Q.target=null)}else!K&&N[0]&&(Q.target=N[0],K=Q.target,q.emit(p.GAMEOBJECT_DRAG_ENTER,F,K),this.emit(p.DRAG_ENTER,F,q,K));var H,J,X=F.positionToCamera(Q.dragStartCamera);if(!q.parentContainer)H=X.x-Q.dragX,J=X.y-Q.dragY;else{var Z=X.x-Q.dragStartXGlobal,$=X.y-Q.dragStartYGlobal,it=q.getParentRotation(),nt=Z*Math.cos(it)+$*Math.sin(it),at=$*Math.cos(it)-Z*Math.sin(it);nt*=1/q.parentContainer.scaleX,at*=1/q.parentContainer.scaleY,H=nt+Q.dragStartX,J=at+Q.dragStartY}q.emit(p.GAMEOBJECT_DRAG,F,H,J),this.emit(p.DRAG,F,q,H,J)}return z.length},processDragUpEvent:function(F){var N=this._drag[F.id];N.length>1&&(N=N.slice(0));for(var z=0;z<N.length;z++){var U=N[z],q=U.input;if(q&&q.dragState===2){q.dragState=0,q.dragX=q.localX-U.displayOriginX,q.dragY=q.localY-U.displayOriginY,q.dragStartCamera=null;var Q=!1,K=q.target;K&&(U.emit(p.GAMEOBJECT_DROP,F,K),this.emit(p.DROP,F,U,K),q.target=null,Q=!0),U.input&&U.input.enabled&&(U.emit(p.GAMEOBJECT_DRAG_END,F,q.dragX,q.dragY,Q),this.emit(p.DRAG_END,F,U,Q))}}return this.setDragState(F,0),N.splice(0),0},processMoveEvents:function(F){var N=0,z=this._temp,U=this._eventData,q=this._eventContainer;U.cancelled=!1;for(var Q=0;Q<z.length;Q++){var K=z[Q];if(!(!K.input||!K.input.enabled)&&(N++,K.emit(p.GAMEOBJECT_POINTER_MOVE,F,K.input.localX,K.input.localY,q),U.cancelled||!this.isActive()||K.input&&K.input.enabled&&(this.emit(p.GAMEOBJECT_MOVE,F,K,q),U.cancelled||!this.isActive()||this.topOnly)))break}return!U.cancelled&&this.isActive()&&this.emit(p.POINTER_MOVE,F,z),N},processWheelEvent:function(F){var N=0,z=this._temp,U=this._eventData,q=this._eventContainer;U.cancelled=!1;for(var Q=F.deltaX,K=F.deltaY,et=F.deltaZ,H=0;H<z.length;H++){var J=z[H];if(!(!J.input||!J.input.enabled)&&(N++,J.emit(p.GAMEOBJECT_POINTER_WHEEL,F,Q,K,et,q),U.cancelled||!this.isActive()||J.input&&J.input.enabled&&(this.emit(p.GAMEOBJECT_WHEEL,F,J,Q,K,et,q),U.cancelled||!this.isActive())))break}return!U.cancelled&&this.isActive()&&this.emit(p.POINTER_WHEEL,F,z,Q,K,et),N},processOverEvents:function(F){var N=this._temp,z=0,U=N.length,q=[];if(U>0){var Q=this.manager,K=this._eventData,et=this._eventContainer;K.cancelled=!1;for(var H=0;H<U;H++){var J=N[H];if(!(!J.input||!J.input.enabled)&&(q.push(J),Q.setCursor(J.input),J.emit(p.GAMEOBJECT_POINTER_OVER,F,J.input.localX,J.input.localY,et),z++,K.cancelled||!this.isActive()||J.input&&J.input.enabled&&(this.emit(p.GAMEOBJECT_OVER,F,J,et),K.cancelled||!this.isActive())))break}!K.cancelled&&this.isActive()&&this.emit(p.POINTER_OVER,F,q)}return this._over[F.id]=q,z},processOutEvents:function(F){var N=this._over[F.id],z=0,U=N.length;if(U>0){var q=this.manager,Q=this._eventData,K=this._eventContainer;Q.cancelled=!1,this.sortGameObjects(N,F);for(var et=0;et<U;et++){var H=N[et];if(H=N[et],!(!H.input||!H.input.enabled)&&(q.resetCursor(H.input),H.emit(p.GAMEOBJECT_POINTER_OUT,F,K),z++,Q.cancelled||!this.isActive()||H.input&&H.input.enabled&&(this.emit(p.GAMEOBJECT_OUT,F,H,K),Q.cancelled||!this.isActive())))break}!Q.cancelled&&this.isActive()&&this.emit(p.POINTER_OUT,F,N),this._over[F.id]=[]}return z},processOverOutEvents:function(F){var N=this._temp,z,U,q=[],Q=[],K=[],et=this._over[F.id],H=this._drag[F.id],J=this.manager;for(z=0;z<et.length;z++)U=et[z],N.indexOf(U)===-1&&H.indexOf(U)===-1?q.push(U):K.push(U);for(z=0;z<N.length;z++)U=N[z],et.indexOf(U)===-1&&Q.push(U);var X=q.length,Z=0,$=this._eventData,it=this._eventContainer;if($.cancelled=!1,X>0){for(this.sortGameObjects(q,F),z=0;z<X&&(U=q[z],!(!(!U.input||!U.input.enabled)&&(J.resetCursor(U.input),U.emit(p.GAMEOBJECT_POINTER_OUT,F,it),Z++,$.cancelled||!this.isActive()||U.input&&U.input.enabled&&(this.emit(p.GAMEOBJECT_OUT,F,U,it),$.cancelled||!this.isActive()))));z++);(!$.cancelled||this.isActive())&&this.emit(p.POINTER_OUT,F,q)}if(X=Q.length,$.cancelled=!1,X>0){for(this.sortGameObjects(Q,F),z=0;z<X&&(U=Q[z],!(!(!U.input||!U.input.enabled)&&(J.setCursor(U.input),U.emit(p.GAMEOBJECT_POINTER_OVER,F,U.input.localX,U.input.localY,it),Z++,$.cancelled||!this.isActive()||U.input&&U.input.enabled&&(this.emit(p.GAMEOBJECT_OVER,F,U,it),$.cancelled||!this.isActive()))));z++);!$.cancelled&&this.isActive()&&this.emit(p.POINTER_OVER,F,Q)}return et=K.concat(Q),this._over[F.id]=this.sortGameObjects(et,F),Z},processUpEvents:function(F){var N=this._temp,z=this._eventData,U=this._eventContainer;z.cancelled=!1;for(var q=0;q<N.length;q++){var Q=N[q];if(!(!Q.input||!Q.input.enabled)&&(Q.emit(p.GAMEOBJECT_POINTER_UP,F,Q.input.localX,Q.input.localY,U),z.cancelled||!this.isActive()||Q.input&&Q.input.enabled&&(this.emit(p.GAMEOBJECT_UP,F,Q,U),z.cancelled||!this.isActive())))break}return!z.cancelled&&this.isActive()&&(F.upElement===this.manager.game.canvas?this.emit(p.POINTER_UP,F,N):this.emit(p.POINTER_UP_OUTSIDE,F)),N.length},forceDownState:function(F,N){this.forceState(F,N,p.GAMEOBJECT_POINTER_DOWN,p.GAMEOBJECT_DOWN,!1)},forceUpState:function(F,N){this.forceState(F,N,p.GAMEOBJECT_POINTER_UP,p.GAMEOBJECT_UP,!1)},forceOverState:function(F,N){this.forceState(F,N,p.GAMEOBJECT_POINTER_OVER,p.GAMEOBJECT_OVER,!0)},forceOutState:function(F,N){this.forceState(F,N,p.GAMEOBJECT_POINTER_OUT,p.GAMEOBJECT_OUT,!1)},forceState:function(F,N,z,U,q){var Q=this._eventData,K=this._eventContainer;Q.cancelled=!1,N.input&&N.input.enabled&&(N.emit(z,F,N.input.localX,N.input.localY,K),q&&this.setCursor(N.input),!Q.cancelled&&this.isActive()&&N.input&&N.input.enabled&&this.emit(U,F,N,K))},queueForInsertion:function(F){return this._pendingInsertion.indexOf(F)===-1&&this._list.indexOf(F)===-1&&this._pendingInsertion.push(F),this},queueForRemoval:function(F){return this._pendingRemoval.push(F),this},setDraggable:function(F,N){N===void 0&&(N=!0),Array.isArray(F)||(F=[F]);for(var z=0;z<F.length;z++){var U=F[z];U.input.draggable=N;var q=this._draggable.indexOf(U);N&&q===-1?this._draggable.push(U):!N&&q>-1&&this._draggable.splice(q,1)}return this},makePixelPerfect:function(F){F===void 0&&(F=1);var N=this.systems.textures;return r(N,F)},setHitArea:function(F,N,z){if(N===void 0)return this.setHitAreaFromTexture(F);Array.isArray(F)||(F=[F]);var U=!1,q=!1,Q=!1,K=!1,et=!1,H=!0;if(C(N)&&Object.keys(N).length){var J=N,X=F.some(function(at){return at.hasOwnProperty("faces")});if(!X){N=v(J,"hitArea",null),z=v(J,"hitAreaCallback",null),et=v(J,"pixelPerfect",!1);var Z=v(J,"alphaTolerance",1);et&&(N={},z=this.makePixelPerfect(Z))}U=v(J,"draggable",!1),q=v(J,"dropZone",!1),Q=v(J,"cursor",!1),K=v(J,"useHandCursor",!1),(!N||!z)&&(this.setHitAreaFromTexture(F),H=!1)}else typeof N=="function"&&!z&&(z=N,N={});for(var $=0;$<F.length;$++){var it=F[$];if(et&&it.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var nt=it.input?it.input:o(it,N,z);nt.customHitArea=H,nt.dropZone=q,nt.cursor=K?"pointer":Q,it.input=nt,U&&this.setDraggable(it),this.queueForInsertion(it)}return this},setHitAreaCircle:function(F,N,z,U,q){q===void 0&&(q=x);var Q=new u(N,z,U);return this.setHitArea(F,Q,q)},setHitAreaEllipse:function(F,N,z,U,q,Q){Q===void 0&&(Q=n);var K=new d(N,z,U,q);return this.setHitArea(F,K,Q)},setHitAreaFromTexture:function(F,N){N===void 0&&(N=E),Array.isArray(F)||(F=[F]);for(var z=0;z<F.length;z++){var U=F[z],q=U.frame,Q=0,K=0;if(U.width?(Q=U.width,K=U.height):q&&(Q=q.realWidth,K=q.realHeight),U.type==="Container"&&(Q===0||K===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}Q!==0&&K!==0&&(U.input=o(U,new M(0,0,Q,K),N),this.queueForInsertion(U))}return this},setHitAreaRectangle:function(F,N,z,U,q,Q){Q===void 0&&(Q=E);var K=new M(N,z,U,q);return this.setHitArea(F,K,Q)},setHitAreaTriangle:function(F,N,z,U,q,Q,K,et){et===void 0&&(et=L);var H=new R(N,z,U,q,Q,K);return this.setHitArea(F,H,et)},enableDebug:function(F,N){N===void 0&&(N=65280);var z=F.input;if(!z||!z.hitArea)return this;var U=z.hitArea,q=U.type,Q=z.hitAreaDebug,K=this.systems.add,et=this.systems.updateList;Q&&(et.remove(Q),Q.destroy(),Q=null);var H=0,J=0;switch(q){case f.CIRCLE:Q=K.arc(0,0,U.radius),H=U.x-U.radius,J=U.y-U.radius;break;case f.ELLIPSE:Q=K.ellipse(0,0,U.width,U.height),H=U.x-U.width/2,J=U.y-U.height/2;break;case f.LINE:Q=K.line(0,0,U.x1,U.y1,U.x2,U.y2);break;case f.POLYGON:Q=K.polygon(0,0,U.points);break;case f.RECTANGLE:Q=K.rectangle(0,0,U.width,U.height),H=U.x,J=U.y;break;case f.TRIANGLE:Q=K.triangle(0,0,U.x1,U.y1,U.x2,U.y2,U.x3,U.y3);break}return Q&&(Q.isFilled=!1,Q.strokeColor=N,Q.preUpdate=function(){Q.setVisible(F.visible),Q.setStrokeStyle(1/F.scale,Q.strokeColor),Q.setDisplayOrigin(F.displayOriginX,F.displayOriginY);var X=F.x,Z=F.y,$=F.rotation,it=F.scaleX,nt=F.scaleY;if(F.parentContainer){var at=F.getWorldTransformMatrix();X=at.tx,Z=at.ty,$=at.rotation,it=at.scaleX,nt=at.scaleY}Q.setRotation($),Q.setScale(it,nt),Q.setPosition(X+H*it,Z+J*nt),Q.setScrollFactor(F.scrollFactorX,F.scrollFactorY),Q.setDepth(F.depth)},et.add(Q),z.hitAreaDebug=Q),this},removeDebug:function(F){var N=F.input;if(N&&N.hitAreaDebug){var z=N.hitAreaDebug;z.destroy(),N.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(F){return this.pollRate=F,this._pollTimer=0,this},setGlobalTopOnly:function(F){return this.manager.globalTopOnly=F,this},setTopOnly:function(F){return this.topOnly=F,this},sortGameObjects:function(F,N){if(F.length<2||!N.camera)return F;var z=N.camera.renderList;return F.sort(function(U,q){var Q=Math.max(z.indexOf(U),0),K=Math.max(z.indexOf(q),0);return K-Q})},sortDropZones:function(F){return F.length<2?F:(this.scene.sys.depthSort(),F.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(F,N){if(!F.parentContainer&&!N.parentContainer)return this.displayList.getIndex(N)-this.displayList.getIndex(F);if(F.parentContainer===N.parentContainer)return N.parentContainer.getIndex(N)-F.parentContainer.getIndex(F);if(F.parentContainer===N)return-1;if(N.parentContainer===F)return 1;for(var z=F.getIndexList(),U=N.getIndexList(),q=Math.min(z.length,U.length),Q=0;Q<q;Q++){var K=z[Q],et=U[Q];if(K!==et)return et-K}return U.length-z.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(F){return this.manager.addPointer(F)},setDefaultCursor:function(F){return this.manager.setDefaultCursor(F),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(p.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var F=0;F<10;F++)this._drag[F]=[],this._over[F]=[];this.removeAllListeners();var N=this.manager;N.canvas.style.cursor=N.defaultCursor;var z=this.systems.events;z.off(A.TRANSITION_START,this.transitionIn,this),z.off(A.TRANSITION_OUT,this.transitionOut,this),z.off(A.TRANSITION_COMPLETE,this.transitionComplete,this),z.off(A.PRE_UPDATE,this.preUpdate,this),N.events.off(p.GAME_OUT,this.onGameOut,this),N.events.off(p.GAME_OVER,this.onGameOver,this),z.off(A.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var F=this.manager.pointers,N=0;N<F.length;N++)F[N].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(p.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(A.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});_.register("InputPlugin",Y,"input"),y.exports=Y},89639:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35154),x={},c={};c.register=function(h,o,r,a,d){x[h]={plugin:o,mapping:r,settingsKey:a,configKey:d}},c.getPlugin=function(h){return x[h]},c.install=function(h){var o=h.scene.sys,r=o.settings.input,a=o.game.config;for(var d in x){var n=x[d].plugin,p=x[d].mapping,g=x[d].settingsKey,v=x[d].configKey;u(r,g,a[v])&&(h[p]=new n(h))}},c.remove=function(h){x.hasOwnProperty(h)&&delete x[h]},y.exports=c},42515:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(31040),x=i(83419),c=i(20339),h=i(43855),o=i(47235),r=i(26099),a=i(25892),d=new x({initialize:function(n,p){this.manager=n,this.id=p,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new r,this.prevPosition=new r,this.midPoint=new r(-1,-1),this.velocity=new r,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=p===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(n){var p=n.getWorldPoint(this.x,this.y);return this.worldX=p.x,this.worldY=p.y,this},positionToCamera:function(n,p){return n.getWorldPoint(this.x,this.y,p)},updateMotion:function(){var n=this.position.x,p=this.position.y,g=this.midPoint.x,v=this.midPoint.y;if(!(n===g&&p===v)){var f=o(this.motionFactor,g,n),b=o(this.motionFactor,v,p);h(f,n,.1)&&(f=n),h(b,p,.1)&&(b=p),this.midPoint.set(f,b);var C=n-f,_=p-b;this.velocity.set(C,_),this.angle=u(f,b,n,p),this.distance=Math.sqrt(C*C+_*_)}},up:function(n){"buttons"in n&&(this.buttons=n.buttons),this.event=n,this.button=n.button,this.upElement=n.target,this.manager.transformPointer(this,n.pageX,n.pageY,!1),n.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=n.timeStamp,this.wasTouch=!1)},down:function(n){"buttons"in n&&(this.buttons=n.buttons),this.event=n,this.button=n.button,this.downElement=n.target,this.manager.transformPointer(this,n.pageX,n.pageY,!1),n.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),a.macOS&&n.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=n.timeStamp),this.wasTouch=!1},move:function(n){"buttons"in n&&(this.buttons=n.buttons),this.event=n,this.manager.transformPointer(this,n.pageX,n.pageY,!0),this.locked&&(this.movementX=n.movementX||n.mozMovementX||n.webkitMovementX||0,this.movementY=n.movementY||n.mozMovementY||n.webkitMovementY||0),this.moveTime=n.timeStamp,this.wasTouch=!1},wheel:function(n){"buttons"in n&&(this.buttons=n.buttons),this.event=n,this.manager.transformPointer(this,n.pageX,n.pageY,!1),this.deltaX=n.deltaX,this.deltaY=n.deltaY,this.deltaZ=n.deltaZ,this.wasTouch=!1},touchstart:function(n,p){n.pointerId&&(this.pointerId=n.pointerId),this.identifier=n.identifier,this.target=n.target,this.active=!0,this.buttons=1,this.event=p,this.downElement=n.target,this.manager.transformPointer(this,n.pageX,n.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=p.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(n,p){this.event=p,this.manager.transformPointer(this,n.pageX,n.pageY,!0),this.moveTime=p.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(n,p){this.buttons=0,this.event=p,this.upElement=n.target,this.manager.transformPointer(this,n.pageX,n.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(n,p){this.buttons=0,this.event=p,this.upElement=n.target,this.manager.transformPointer(this,n.pageX,n.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?c(this.downX,this.downY,this.x,this.y):c(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?u(this.downX,this.downY,this.x,this.y):u(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(n,p){n===void 0&&(n=10),p===void 0&&(p=[]);for(var g=this.prevPosition.x,v=this.prevPosition.y,f=this.position.x,b=this.position.y,C=0;C<n;C++){var _=1/n*C;p[C]={x:o(_,g,f),y:o(_,v,b)}}return p},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(n){this.position.x=n}},y:{get:function(){return this.position.y},set:function(n){this.position.y=n}},time:{get:function(){return this.event?this.event.timeStamp:0}}});y.exports=d},93301:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};y.exports=P},7179:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="boot"},85375:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="destroy"},39843:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="dragend"},23388:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="dragenter"},16133:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="drag"},27829:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="dragleave"},53904:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="dragover"},56058:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="dragstart"},2642:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="drop"},88171:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="gameobjectdown"},36147:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="dragend"},71692:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="dragenter"},96149:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="drag"},81285:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="dragleave"},74048:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="dragover"},21322:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="dragstart"},49378:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="drop"},86754:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="gameobjectmove"},86433:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="gameobjectout"},60709:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="gameobjectover"},24081:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pointerdown"},11172:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pointermove"},18907:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pointerout"},95579:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pointerover"},35368:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pointerup"},26972:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="wheel"},47078:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="gameobjectup"},73802:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="gameobjectwheel"},56718:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="gameout"},25936:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="gameover"},27503:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="boot"},50852:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="process"},96438:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="update"},59152:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pointerlockchange"},47777:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pointerdown"},27957:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pointerdownoutside"},19444:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pointermove"},54251:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pointerout"},18667:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pointerover"},27192:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pointerup"},24652:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pointerupoutside"},45132:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="wheel"},44512:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="preupdate"},15757:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="shutdown"},41637:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="start"},93802:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="update"},8214:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={BOOT:i(7179),DESTROY:i(85375),DRAG_END:i(39843),DRAG_ENTER:i(23388),DRAG:i(16133),DRAG_LEAVE:i(27829),DRAG_OVER:i(53904),DRAG_START:i(56058),DROP:i(2642),GAME_OUT:i(56718),GAME_OVER:i(25936),GAMEOBJECT_DOWN:i(88171),GAMEOBJECT_DRAG_END:i(36147),GAMEOBJECT_DRAG_ENTER:i(71692),GAMEOBJECT_DRAG:i(96149),GAMEOBJECT_DRAG_LEAVE:i(81285),GAMEOBJECT_DRAG_OVER:i(74048),GAMEOBJECT_DRAG_START:i(21322),GAMEOBJECT_DROP:i(49378),GAMEOBJECT_MOVE:i(86754),GAMEOBJECT_OUT:i(86433),GAMEOBJECT_OVER:i(60709),GAMEOBJECT_POINTER_DOWN:i(24081),GAMEOBJECT_POINTER_MOVE:i(11172),GAMEOBJECT_POINTER_OUT:i(18907),GAMEOBJECT_POINTER_OVER:i(95579),GAMEOBJECT_POINTER_UP:i(35368),GAMEOBJECT_POINTER_WHEEL:i(26972),GAMEOBJECT_UP:i(47078),GAMEOBJECT_WHEEL:i(73802),MANAGER_BOOT:i(27503),MANAGER_PROCESS:i(50852),MANAGER_UPDATE:i(96438),POINTER_DOWN:i(47777),POINTER_DOWN_OUTSIDE:i(27957),POINTER_MOVE:i(19444),POINTER_OUT:i(54251),POINTER_OVER:i(18667),POINTER_UP:i(27192),POINTER_UP_OUTSIDE:i(24652),POINTER_WHEEL:i(45132),POINTERLOCK_CHANGE:i(59152),PRE_UPDATE:i(44512),SHUTDOWN:i(15757),START:i(41637),UPDATE:i(93802)}},97421:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h){this.pad=c,this.events=c.events,this.index=h,this.value=0,this.threshold=.1},update:function(c){this.value=c},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});y.exports=x},28884:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(92734),c=new u({initialize:function(h,o){this.pad=h,this.events=h.manager,this.index=o,this.value=0,this.threshold=1,this.pressed=!1},update:function(h){this.value=h;var o=this.pad,r=this.index;h>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(x.BUTTON_DOWN,o,this,h),this.pad.emit(x.GAMEPAD_BUTTON_DOWN,r,h,this)):this.pressed&&(this.pressed=!1,this.events.emit(x.BUTTON_UP,o,this,h),this.pad.emit(x.GAMEPAD_BUTTON_UP,r,h,this))},destroy:function(){this.pad=null,this.events=null}});y.exports=c},99125:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(97421),x=i(28884),c=i(83419),h=i(50792),o=i(26099),r=new c({Extends:h,initialize:function(a,d){h.call(this),this.manager=a,this.pad=d,this.id=d.id,this.index=d.index;for(var n=[],p=0;p<d.buttons.length;p++)n.push(new x(this,p));this.buttons=n;var g=[];for(p=0;p<d.axes.length;p++)g.push(new u(this,p));this.axes=g,this.vibration=d.vibrationActuator;var v={value:0,pressed:!1};this._LCLeft=n[14]?n[14]:v,this._LCRight=n[15]?n[15]:v,this._LCTop=n[12]?n[12]:v,this._LCBottom=n[13]?n[13]:v,this._RCLeft=n[2]?n[2]:v,this._RCRight=n[1]?n[1]:v,this._RCTop=n[3]?n[3]:v,this._RCBottom=n[0]?n[0]:v,this._FBLeftTop=n[4]?n[4]:v,this._FBLeftBottom=n[6]?n[6]:v,this._FBRightTop=n[5]?n[5]:v,this._FBRightBottom=n[7]?n[7]:v;var f={value:0};this._HAxisLeft=g[0]?g[0]:f,this._VAxisLeft=g[1]?g[1]:f,this._HAxisRight=g[2]?g[2]:f,this._VAxisRight=g[3]?g[3]:f,this.leftStick=new o,this.rightStick=new o,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(a){return this.axes[a].getValue()},setAxisThreshold:function(a){for(var d=0;d<this.axes.length;d++)this.axes[d].threshold=a},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(a){return this.buttons[a].value},isButtonDown:function(a){return this.buttons[a].pressed},update:function(a){if(!(a.timestamp<this._created)){var d,n=this.buttons,p=a.buttons,g=n.length;for(d=0;d<g;d++)n[d].update(p[d].value);var v=this.axes,f=a.axes;for(g=v.length,d=0;d<g;d++)v[d].update(f[d]);g>=2&&(this.leftStick.set(v[0].getValue(),v[1].getValue()),g>=4&&this.rightStick.set(v[2].getValue(),v[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var a;for(a=0;a<this.buttons.length;a++)this.buttons[a].destroy();for(a=0;a<this.axes.length;a++)this.axes[a].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});y.exports=r},56654:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(50792),c=i(92734),h=i(99125),o=i(35154),r=i(89639),a=i(8214),d=new u({Extends:x,initialize:function(n){x.call(this),this.scene=n.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=n,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,n.pluginEvents.once(a.BOOT,this.boot,this),n.pluginEvents.on(a.START,this.start,this)},boot:function(){var n=this.scene.sys.game,p=this.settings.input,g=n.config;this.enabled=o(p,"gamepad",g.inputGamepad)&&n.device.input.gamepads,this.target=o(p,"gamepad.target",g.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(a.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(a.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var n=this,p=this.target,g=function(v){v.defaultPrevented||!n.isActive()||(n.refreshPads(),n.queue.push(v))};this.onGamepadHandler=g,p.addEventListener("gamepadconnected",g,!1),p.addEventListener("gamepaddisconnected",g,!1),this.sceneInputPlugin.pluginEvents.on(a.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(a.UPDATE,this.update);for(var n=0;n<this.gamepads.length;n++)this.gamepads[n].removeAllListeners()},disconnectAll:function(){for(var n=0;n<this.gamepads.length;n++)this.gamepads[n].pad.connected=!1},refreshPads:function(){var n=navigator.getGamepads();if(!n)this.disconnectAll();else for(var p=this.gamepads,g=0;g<n.length;g++){var v=n[g];if(v){var f=v.id,b=v.index,C=p[b];if(C)C.id!==f?(C.destroy(),p[b]=new h(this,v)):C.update(v);else{var _=new h(this,v);p[b]=_,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=_):this._pad3=_:this._pad2=_:this._pad1=_}}}},getAll:function(){for(var n=[],p=this.gamepads,g=0;g<p.length;g++)p[g]&&n.push(p[g]);return n},getPad:function(n){for(var p=this.gamepads,g=0;g<p.length;g++)if(p[g]&&p[g].index===n)return p[g]},update:function(){if(this.enabled){this.refreshPads();var n=this.queue.length;if(n!==0)for(var p=this.queue.splice(0,n),g=0;g<n;g++){var v=p[g],f=this.getPad(v.gamepad.index);v.type==="gamepadconnected"?this.emit(c.CONNECTED,f,v):v.type==="gamepaddisconnected"&&this.emit(c.DISCONNECTED,f,v)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var n=0;n<this.gamepads.length;n++)this.gamepads[n]&&this.gamepads[n].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});r.register("GamepadPlugin",d,"gamepad","gamepad","inputGamepad"),y.exports=d},89651:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},65294:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},90089:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},64894:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={DUALSHOCK_4:i(65294),SNES_USB:i(89651),XBOX_360:i(90089)}},46008:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="down"},7629:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="up"},42206:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="connected"},86544:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="disconnected"},94784:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="down"},14325:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="up"},92734:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={BUTTON_DOWN:i(46008),BUTTON_UP:i(7629),CONNECTED:i(42206),DISCONNECTED:i(86544),GAMEPAD_BUTTON_DOWN:i(94784),GAMEPAD_BUTTON_UP:i(14325)}},48646:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Axis:i(97421),Button:i(28884),Events:i(92734),Gamepad:i(99125),GamepadPlugin:i(56654),Configs:i(64894)}},14350:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(93301),x=i(79291),c={CreatePixelPerfectHandler:i(84409),CreateInteractiveObject:i(74457),Events:i(8214),Gamepad:i(48646),InputManager:i(7003),InputPlugin:i(48205),InputPluginCache:i(89639),Keyboard:i(51442),Mouse:i(87078),Pointer:i(42515),Touch:i(95618)};c=x(!1,c,u),y.exports=c},78970:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(72905),x=i(83419),c=i(8443),h=i(8214),o=i(46032),r=i(29747),a=new x({initialize:function(d){this.manager=d,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=r,this.onKeyUp=r,d.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var d=this.manager.config;this.enabled=d.inputKeyboard,this.target=d.inputKeyboardEventTarget,this.addCapture(d.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(c.POST_STEP,this.postUpdate,this)},startListeners:function(){var d=this;this.onKeyDown=function(p){if(!(p.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(p),d.manager.events.emit(h.MANAGER_PROCESS);var g=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;d.preventDefault&&!g&&d.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}},this.onKeyUp=function(p){if(!(p.defaultPrevented||!d.enabled||!d.manager)){d.queue.push(p),d.manager.events.emit(h.MANAGER_PROCESS);var g=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;d.preventDefault&&!g&&d.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}};var n=this.target;n&&(n.addEventListener("keydown",this.onKeyDown,!1),n.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var d=this.target;d.removeEventListener("keydown",this.onKeyDown,!1),d.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var n=this.captures,p=0;p<d.length;p++){var g=d[p];typeof g=="string"&&(g=o[g.trim().toUpperCase()]),n.indexOf(g)===-1&&n.push(g)}this.preventDefault=n.length>0},removeCapture:function(d){typeof d=="string"&&(d=d.split(",")),Array.isArray(d)||(d=[d]);for(var n=this.captures,p=0;p<d.length;p++){var g=d[p];typeof g=="string"&&(g=o[g.toUpperCase()]),u(n,g)}this.preventDefault=n.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(c.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});y.exports=a},28846:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(50792),c=i(95922),h=i(8443),o=i(35154),r=i(8214),a=i(89639),d=i(30472),n=i(46032),p=i(87960),g=i(74600),v=i(44594),f=i(56583),b=new u({Extends:x,initialize:function(C){x.call(this),this.game=C.systems.game,this.scene=C.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=C,this.manager=C.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,C.pluginEvents.once(r.BOOT,this.boot,this),C.pluginEvents.on(r.START,this.start,this)},boot:function(){var C=this.settings.input;this.enabled=o(C,"keyboard",!0);var _=o(C,"keyboard.capture",null);_&&this.addCaptures(_),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(h.BLUR,this.resetKeys,this),this.scene.sys.events.on(v.PAUSE,this.resetKeys,this),this.scene.sys.events.on(v.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(C){return this.manager.addCapture(C),this},removeCapture:function(C){return this.manager.removeCapture(C),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:n.UP,down:n.DOWN,left:n.LEFT,right:n.RIGHT,space:n.SPACE,shift:n.SHIFT})},addKeys:function(C,_,M){_===void 0&&(_=!0),M===void 0&&(M=!1);var E={};if(typeof C=="string"){C=C.split(",");for(var A=0;A<C.length;A++){var R=C[A].trim();R&&(E[R]=this.addKey(R,_,M))}}else for(var L in C)E[L]=this.addKey(C[L],_,M);return E},addKey:function(C,_,M){_===void 0&&(_=!0),M===void 0&&(M=!1);var E=this.keys;if(C instanceof d){var A=E.indexOf(C);return A>-1?E[A]=C:E[C.keyCode]=C,_&&this.addCapture(C.keyCode),C.setEmitOnRepeat(M),C}return typeof C=="string"&&(C=n[C.toUpperCase()]),E[C]||(E[C]=new d(this,C),_&&this.addCapture(C),E[C].setEmitOnRepeat(M)),E[C]},removeKey:function(C,_,M){_===void 0&&(_=!1),M===void 0&&(M=!1);var E=this.keys,A;if(C instanceof d){var R=E.indexOf(C);R>-1&&(A=this.keys[R],this.keys[R]=void 0)}else typeof C=="string"&&(C=n[C.toUpperCase()]);return E[C]&&(A=E[C],E[C]=void 0),A&&(A.plugin=null,M&&this.removeCapture(A.keyCode),_&&A.destroy()),this},removeAllKeys:function(C,_){C===void 0&&(C=!1),_===void 0&&(_=!1);for(var M=this.keys,E=0;E<M.length;E++){var A=M[E];A&&(M[E]=void 0,_&&this.removeCapture(A.keyCode),C&&A.destroy())}return this},createCombo:function(C,_){return new p(this,C,_)},checkDown:function(C,_){if(_===void 0&&(_=0),this.enabled&&C.isDown){var M=f(this.time-C.timeDown,_);if(M>C._tick)return C._tick=M,!0}return!1},update:function(){var C=this.manager.queue,_=C.length;if(!(!this.isActive()||_===0))for(var M=this.keys,E=0;E<_;E++){var A=C[E],R=A.keyCode,L=M[R],Y=!1;A.cancelled===void 0&&(A.cancelled=0,A.stopImmediatePropagation=function(){A.cancelled=1},A.stopPropagation=function(){A.cancelled=-1}),A.cancelled!==-1&&(R===this.prevCode&&A.timeStamp===this.prevTime&&A.type===this.prevType||(this.prevCode=R,this.prevTime=A.timeStamp,this.prevType=A.type,A.type==="keydown"?(L&&(Y=L.isDown,L.onDown(A)),!A.cancelled&&(!L||!Y)&&(g[R]&&this.emit(c.KEY_DOWN+g[R],A),A.cancelled||this.emit(c.ANY_KEY_DOWN,A))):(L&&L.onUp(A),A.cancelled||(g[R]&&this.emit(c.KEY_UP+g[R],A),A.cancelled||this.emit(c.ANY_KEY_UP,A))),A.cancelled===1&&(A.cancelled=0)))}},resetKeys:function(){for(var C=this.keys,_=0;_<C.length;_++)C[_]&&C[_].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(h.BLUR,this.resetKeys),this.scene.sys.events.off(v.PAUSE,this.resetKeys,this),this.scene.sys.events.off(v.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var C=this.keys,_=0;_<C.length;_++)C[_]&&C[_].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});a.register("KeyboardPlugin",b,"keyboard","keyboard","inputKeyboard"),y.exports=b},66970:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u.timeLastMatched=i.timeStamp,u.index++,u.index===u.size?!0:(u.current=u.keyCodes[u.index],!1)};y.exports=P},87960:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(95922),c=i(95540),h=i(68769),o=i(92803),r=new u({initialize:function(a,d,n){if(n===void 0&&(n={}),d.length<2)return!1;this.manager=a,this.enabled=!0,this.keyCodes=[];for(var p=0;p<d.length;p++){var g=d[p];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=c(n,"resetOnWrongKey",!0),this.maxKeyDelay=c(n,"maxKeyDelay",0),this.resetOnMatch=c(n,"resetOnMatch",!1),this.deleteOnMatch=c(n,"deleteOnMatch",!1);var v=this,f=function(b){if(!(v.matched||!v.enabled)){var C=h(b,v);C&&(v.manager.emit(x.COMBO_MATCH,v,b),v.resetOnMatch?o(v):v.deleteOnMatch&&v.destroy())}};this.onKeyDown=f,this.manager.on(x.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(x.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});y.exports=r},68769:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66970),x=function(c,h){if(h.matched)return!0;var o=!1,r=!1;if(c.keyCode===h.current)if(h.index>0&&h.maxKeyDelay>0){var a=h.timeLastMatched+h.maxKeyDelay;c.timeStamp<=a&&(r=!0,o=u(c,h))}else r=!0,o=u(c,h);return!r&&h.resetOnWrongKey&&(h.index=0,h.current=h.keyCodes[0]),o&&(h.timeLastMatched=c.timeStamp,h.matched=!0,h.timeMatched=c.timeStamp),o};y.exports=x},92803:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.current=i.keyCodes[0],i.index=0,i.timeLastMatched=0,i.matched=!1,i.timeMatched=0,i};y.exports=P},92612:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="keydown"},23345:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="keyup"},21957:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="keycombomatch"},44743:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="down"},3771:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="keydown-"},46358:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="keyup-"},75674:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="up"},95922:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={ANY_KEY_DOWN:i(92612),ANY_KEY_UP:i(23345),COMBO_MATCH:i(21957),DOWN:i(44743),KEY_DOWN:i(3771),KEY_UP:i(46358),UP:i(75674)}},51442:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Events:i(95922),KeyboardManager:i(78970),KeyboardPlugin:i(28846),Key:i(30472),KeyCodes:i(46032),KeyCombo:i(87960),AdvanceKeyCombo:i(66970),ProcessKeyCombo:i(68769),ResetKeyCombo:i(92803),JustDown:i(90229),JustUp:i(38796),DownDuration:i(37015),UpDuration:i(41170)}},37015:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){u===void 0&&(u=50);var x=i.plugin.game.loop.time-i.timeDown;return i.isDown&&x<u};y.exports=P},90229:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i._justDown?(i._justDown=!1,!0):!1};y.exports=P},38796:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i._justUp?(i._justUp=!1,!0):!1};y.exports=P},30472:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(50792),c=i(95922),h=new u({Extends:x,initialize:function(o,r){x.call(this),this.plugin=o,this.keyCode=r,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(o){return this.emitOnRepeat=o,this},onDown:function(o){this.originalEvent=o,this.enabled&&(this.altKey=o.altKey,this.ctrlKey=o.ctrlKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.location=o.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(c.DOWN,this,o):(this.isDown=!0,this.isUp=!1,this.timeDown=o.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(c.DOWN,this,o)))},onUp:function(o){this.originalEvent=o,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=o.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(c.UP,this,o))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});y.exports=h},46032:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};y.exports=P},74600:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(46032),x={};for(var c in u)x[u[c]]=c;y.exports=x},41170:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){u===void 0&&(u=50);var x=i.plugin.game.loop.time-i.timeUp;return i.isUp&&x<u};y.exports=P},85098:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(89357),c=i(8214),h=i(29747),o=new u({initialize:function(r){this.manager=r,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=h,this.onMouseDown=h,this.onMouseUp=h,this.onMouseDownWindow=h,this.onMouseUpWindow=h,this.onMouseOver=h,this.onMouseOut=h,this.onMouseWheel=h,this.pointerLockChange=h,this.isTop=!0,r.events.once(c.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputMouse,this.target=r.inputMouseEventTarget,this.passive=r.inputMousePassive,this.preventDefaultDown=r.inputMousePreventDefaultDown,this.preventDefaultUp=r.inputMousePreventDefaultUp,this.preventDefaultMove=r.inputMousePreventDefaultMove,this.preventDefaultWheel=r.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},requestPointerLock:function(){if(x.pointerLock){var r=this.target;r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock()}},releasePointerLock:function(){x.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var r=this.target;if(r){var a=this,d=this.manager,n=d.canvas,p=window&&window.focus&&d.game.config.autoFocus;this.onMouseMove=function(v){!v.defaultPrevented&&a.enabled&&d&&d.enabled&&(d.onMouseMove(v),a.preventDefaultMove&&v.preventDefault())},this.onMouseDown=function(v){p&&window.focus(),!v.defaultPrevented&&a.enabled&&d&&d.enabled&&(d.onMouseDown(v),a.preventDefaultDown&&v.target===n&&v.preventDefault())},this.onMouseDownWindow=function(v){v.sourceCapabilities&&v.sourceCapabilities.firesTouchEvents||!v.defaultPrevented&&a.enabled&&d&&d.enabled&&v.target!==n&&d.onMouseDown(v)},this.onMouseUp=function(v){!v.defaultPrevented&&a.enabled&&d&&d.enabled&&(d.onMouseUp(v),a.preventDefaultUp&&v.target===n&&v.preventDefault())},this.onMouseUpWindow=function(v){v.sourceCapabilities&&v.sourceCapabilities.firesTouchEvents||!v.defaultPrevented&&a.enabled&&d&&d.enabled&&v.target!==n&&d.onMouseUp(v)},this.onMouseOver=function(v){!v.defaultPrevented&&a.enabled&&d&&d.enabled&&d.setCanvasOver(v)},this.onMouseOut=function(v){!v.defaultPrevented&&a.enabled&&d&&d.enabled&&d.setCanvasOut(v)},this.onMouseWheel=function(v){!v.defaultPrevented&&a.enabled&&d&&d.enabled&&d.onMouseWheel(v),a.preventDefaultWheel&&v.target===n&&v.preventDefault()};var g={passive:!0};if(r.addEventListener("mousemove",this.onMouseMove),r.addEventListener("mousedown",this.onMouseDown),r.addEventListener("mouseup",this.onMouseUp),r.addEventListener("mouseover",this.onMouseOver,g),r.addEventListener("mouseout",this.onMouseOut,g),this.preventDefaultWheel?r.addEventListener("wheel",this.onMouseWheel,{passive:!1}):r.addEventListener("wheel",this.onMouseWheel,g),window&&d.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,g),window.top.addEventListener("mouseup",this.onMouseUpWindow,g)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,g),window.addEventListener("mouseup",this.onMouseUpWindow,g),this.isTop=!1}x.pointerLock&&(this.pointerLockChange=function(v){var f=a.target;a.locked=document.pointerLockElement===f||document.mozPointerLockElement===f||document.webkitPointerLockElement===f,d.onPointerLockChange(v)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseover",this.onMouseOver),r.removeEventListener("mouseout",this.onMouseOut),window&&(r=this.isTop?window.top:window,r.removeEventListener("mousedown",this.onMouseDownWindow),r.removeEventListener("mouseup",this.onMouseUpWindow)),x.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});y.exports=o},87078:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={MouseManager:i(85098)}},36210:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(8214),c=i(29747),h=new u({initialize:function(o){this.manager=o,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=c,this.onTouchStartWindow=c,this.onTouchMove=c,this.onTouchEnd=c,this.onTouchEndWindow=c,this.onTouchCancel=c,this.onTouchCancelWindow=c,this.isTop=!0,o.events.once(x.MANAGER_BOOT,this.boot,this)},boot:function(){var o=this.manager.config;this.enabled=o.inputTouch,this.target=o.inputTouchEventTarget,this.capture=o.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,o.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(o){return o.preventDefault(),!1}),this},startListeners:function(){var o=this.target;if(o){var r=this,a=this.manager,d=a.canvas,n=window&&window.focus&&a.game.config.autoFocus;this.onTouchMove=function(f){!f.defaultPrevented&&r.enabled&&a&&a.enabled&&(a.onTouchMove(f),r.capture&&f.cancelable&&f.preventDefault())},this.onTouchStart=function(f){n&&window.focus(),!f.defaultPrevented&&r.enabled&&a&&a.enabled&&(a.onTouchStart(f),r.capture&&f.cancelable&&f.target===d&&f.preventDefault())},this.onTouchStartWindow=function(f){!f.defaultPrevented&&r.enabled&&a&&a.enabled&&f.target!==d&&a.onTouchStart(f)},this.onTouchEnd=function(f){!f.defaultPrevented&&r.enabled&&a&&a.enabled&&(a.onTouchEnd(f),r.capture&&f.cancelable&&f.target===d&&f.preventDefault())},this.onTouchEndWindow=function(f){!f.defaultPrevented&&r.enabled&&a&&a.enabled&&f.target!==d&&a.onTouchEnd(f)},this.onTouchCancel=function(f){!f.defaultPrevented&&r.enabled&&a&&a.enabled&&(a.onTouchCancel(f),r.capture&&f.preventDefault())},this.onTouchCancelWindow=function(f){!f.defaultPrevented&&r.enabled&&a&&a.enabled&&a.onTouchCancel(f)};var p=this.capture,g={passive:!0},v={passive:!1};if(o.addEventListener("touchstart",this.onTouchStart,p?v:g),o.addEventListener("touchmove",this.onTouchMove,p?v:g),o.addEventListener("touchend",this.onTouchEnd,p?v:g),o.addEventListener("touchcancel",this.onTouchCancel,p?v:g),window&&a.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,v),window.top.addEventListener("touchend",this.onTouchEndWindow,v),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,v)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,v),window.addEventListener("touchend",this.onTouchEndWindow,v),window.addEventListener("touchcancel",this.onTouchCancelWindow,v),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var o=this.target;o.removeEventListener("touchstart",this.onTouchStart),o.removeEventListener("touchmove",this.onTouchMove),o.removeEventListener("touchend",this.onTouchEnd),o.removeEventListener("touchcancel",this.onTouchCancel),window&&(o=this.isTop?window.top:window,o.removeEventListener("touchstart",this.onTouchStartWindow),o.removeEventListener("touchend",this.onTouchEndWindow),o.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});y.exports=h},95618:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={TouchManager:i(36210)}},41299:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(54899),h=i(95540),o=i(98356),r=i(3374),a=i(84376),d=i(92638),n=new u({initialize:function(p,g){if(this.loader=p,this.cache=h(g,"cache",!1),this.type=h(g,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=h(g,"key",!1);var v=this.key;if(p.prefix&&p.prefix!==""&&(this.key=p.prefix+v),!this.key)throw new Error("Invalid File key: "+this.key);var f=h(g,"url");f===void 0?f=p.path+v+"."+h(g,"extension",""):typeof f=="string"&&!f.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(f=p.path+f),this.url=f,this.src="",this.xhrSettings=d(h(g,"responseType",void 0)),h(g,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,h(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?x.FILE_POPULATED:x.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=h(g,"config",{}),this.multiFile,this.linkFile,this.base64=typeof f=="string"&&f.indexOf("data:")===0,this.retryAttempts=h(g,"maxRetries",p.maxRetries)},setLink:function(p){this.linkFile=p,p.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===x.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=x.FILE_LOADING,this.src=o(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=a(this,this.loader.xhr)}},onLoad:function(p,g){var v=p.responseURL&&this.loader.localSchemes.some(function(C){return p.responseURL.indexOf(C)===0}),f=v&&g.target.status===0,b=!(g.target&&g.target.status!==200)||f;p.readyState===4&&p.status>=400&&p.status<=599&&(b=!1),this.state=x.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,b)},onBase64Load:function(p){this.xhrLoader=p,this.state=x.FILE_LOADED,this.percentComplete=1,this.loader.emit(c.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(p){p.lengthComputable&&(this.bytesLoaded=p.loaded,this.bytesTotal=p.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(c.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=x.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=x.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=x.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(p){if(this.state!==x.FILE_PENDING_DESTROY){p===void 0&&(p=this.data);var g=this.key,v=this.type;this.loader.emit(c.FILE_COMPLETE,g,v,p),this.loader.emit(c.FILE_KEY_COMPLETE+v+"-"+g,g,v,p),this.loader.flagForRemoval(this),this.state=x.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});n.createObjectURL=function(p,g,v){if(typeof URL=="function")p.src=URL.createObjectURL(g);else{var f=new FileReader;f.onload=function(){p.removeAttribute("crossOrigin"),p.src="data:"+(g.type||v)+";base64,"+f.result.split(",")[1]},f.onerror=p.onerror,f.readAsDataURL(g)}},n.revokeObjectURL=function(p){typeof URL=="function"&&URL.revokeObjectURL(p.src)},y.exports=n},74099:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={},i={install:function(u){for(var x in P)u[x]=P[x]},register:function(u,x){P[u]=x},destroy:function(){P={}}};y.exports=i},98356:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.url?i.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?i.url:u+i.url:!1};y.exports=P},74261:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(35072),h=i(50792),o=i(54899),r=i(74099),a=i(95540),d=i(35154),n=i(41212),p=i(37277),g=i(44594),v=i(92638),f=new u({Extends:h,initialize:function(b){h.call(this);var C=b.sys.game.config,_=b.sys.settings.loader;this.scene=b,this.systems=b.sys,this.cacheManager=b.sys.cache,this.textureManager=b.sys.textures,this.sceneManager=b.sys.game.scene,r.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(a(_,"baseURL",C.loaderBaseURL)),this.setPath(a(_,"path",C.loaderPath)),this.setPrefix(a(_,"prefix",C.loaderPrefix)),this.maxParallelDownloads=a(_,"maxParallelDownloads",C.loaderMaxParallelDownloads),this.xhr=v(a(_,"responseType",C.loaderResponseType),a(_,"async",C.loaderAsync),a(_,"user",C.loaderUser),a(_,"password",C.loaderPassword),a(_,"timeout",C.loaderTimeout),a(_,"withCredentials",C.loaderWithCredentials)),this.crossOrigin=a(_,"crossOrigin",C.loaderCrossOrigin),this.imageLoadType=a(_,"imageLoadType",C.loaderImageLoadType),this.localSchemes=a(_,"localScheme",C.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new c,this.inflight=new c,this.queue=new c,this._deleteQueue=new c,this.totalFailed=0,this.totalComplete=0,this.state=x.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=a(_,"maxRetries",C.loaderMaxRetries),b.sys.events.once(g.BOOT,this.boot,this),b.sys.events.on(g.START,this.pluginStart,this)},boot:function(){this.systems.events.once(g.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(g.SHUTDOWN,this.shutdown,this)},setBaseURL:function(b){return b===void 0&&(b=""),b!==""&&b.substr(-1)!=="/"&&(b=b.concat("/")),this.baseURL=b,this},setPath:function(b){return b===void 0&&(b=""),b!==""&&b.substr(-1)!=="/"&&(b=b.concat("/")),this.path=b,this},setPrefix:function(b){return b===void 0&&(b=""),this.prefix=b,this},setCORS:function(b){return this.crossOrigin=b,this},addFile:function(b){Array.isArray(b)||(b=[b]);for(var C=0;C<b.length;C++){var _=b[C];this.keyExists(_)||(this.list.set(_),this.emit(o.ADD,_.key,_.type,this,_),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(b){var C=b.hasCacheConflict();return C||this.list.iterate(function(_){if(_.type===b.type&&_.key===b.key)return C=!0,!1}),!C&&this.isLoading()&&(this.inflight.iterate(function(_){if(_.type===b.type&&_.key===b.key)return C=!0,!1}),this.queue.iterate(function(_){if(_.type===b.type&&_.key===b.key)return C=!0,!1})),C},addPack:function(b,C){if(typeof C=="string"){var _=d(b,C);_&&(b={packKey:_})}var M=0,E=this.baseURL,A=this.path,R=this.prefix;for(var L in b)if(Object.prototype.hasOwnProperty.call(b,L)){var Y=b[L],F=a(Y,"baseURL",E),N=a(Y,"path",A),z=a(Y,"prefix",R),U=a(Y,"files",null),q=a(Y,"defaultType","void");if(Array.isArray(U)){this.setBaseURL(F),this.setPath(N),this.setPrefix(z);for(var Q=0;Q<U.length;Q++){var K=U[Q],et=K.hasOwnProperty("type")?K.type:q;this[et]&&(this[et](K),M++)}}}return this.setBaseURL(E),this.setPath(A),this.setPrefix(R),M>0},removePack:function(b,C){var _=this.systems.anims,M=this.cacheManager,E=this.textureManager,A={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},R;if(n(b))R=b;else if(R=M.json.get(b),!R){console.warn("Asset Pack not found in JSON cache:",b);return}C&&(R={_:R[C]});for(var L in R){var Y=R[L],F=a(Y,"prefix",""),N=a(Y,"files"),z=a(Y,"defaultType");if(Array.isArray(N))for(var U=0;U<N.length;U++){var q=N[U],Q=q.hasOwnProperty("type")?q.type:z;if(!Q){console.warn("No type:",q);continue}var K=F+q.key;if(Q==="animation"&&_.remove(K),!((Q==="aseprite"||Q==="atlas"||Q==="atlasXML"||Q==="htmlTexture"||Q==="image"||Q==="multiatlas"||Q==="spritesheet"||Q==="svg"||Q==="texture"||Q==="unityAtlas")&&(E.remove(K),!A[Q]))){if(Q==="pack"){this.removePack(K,q.dataKey);continue}if(Q==="spine"){var et=M.custom.spine.get(K);if(!et)continue;var H=et.prefix===void 0?"":et.prefix;M.custom.spine.remove(K);var J=M.custom.spineTextures.get(K);if(!J)continue;M.custom.spineTextures.remove(K);for(var X=0;X<J.pages.length;X++){var Z=J.pages[X],$=H+Z.name,it=K+":"+$;E.exists(it)?E.remove(it):E.remove($)}}var nt=A[Q];if(nt!==null){if(!nt){console.warn("Unknown type:",Q);continue}var at=M[nt];at.remove(K)}}}}},isLoading:function(){return this.state===x.LOADER_LOADING||this.state===x.LOADER_PROCESSING},isReady:function(){return this.state===x.LOADER_IDLE||this.state===x.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(o.START,this),this.list.size===0?this.loadComplete():(this.state=x.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(g.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(o.PROGRESS,this.progress)},update:function(){this.state===x.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(b){if((b.state===x.FILE_POPULATED||b.state===x.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(b),this.list.delete(b),b.crossOrigin||(b.crossOrigin=this.crossOrigin),b.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(b,C){this.inflight&&(this.inflight.delete(b),this.updateProgress(),C?(this.totalComplete++,this.queue.set(b),this.emit(o.FILE_LOAD,b),b.onProcess()):(this.totalFailed++,this._deleteQueue.set(b),this.emit(o.FILE_LOAD_ERROR,b),this.fileProcessComplete(b)))},fileProcessComplete:function(b){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(b.state===x.FILE_ERRORED?b.multiFile&&b.multiFile.onFileFailed(b):b.state===x.FILE_COMPLETE&&(b.multiFile?b.multiFile.isReadyToProcess()&&(b.multiFile.addToCache(),b.multiFile.pendingDestroy()):(b.addToCache(),b.pendingDestroy())),this.queue.delete(b),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(o.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=x.LOADER_COMPLETE,this.systems.events.off(g.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(o.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(b){this._deleteQueue.set(b)},saveJSON:function(b,C){return this.save(JSON.stringify(b),C)},save:function(b,C,_){C===void 0&&(C="file.json"),_===void 0&&(_="application/json");var M=new Blob([b],{type:_}),E=URL.createObjectURL(M),A=document.createElement("a");return A.download=C,A.textContent="Download "+C,A.href=E,A.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var b=this.systems.game.config,C=this.systems.settings.loader;this.setBaseURL(a(C,"baseURL",b.loaderBaseURL)),this.setPath(a(C,"path",b.loaderPath)),this.setPrefix(a(C,"prefix",b.loaderPrefix)),this.state=x.LOADER_IDLE},shutdown:function(){this.reset(),this.state=x.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(g.UPDATE,this.update,this),this.systems.events.off(g.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=x.LOADER_DESTROYED,this.systems.events.off(g.UPDATE,this.update,this),this.systems.events.off(g.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});p.register("Loader",f,"load"),y.exports=f},3374:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(79291),x=i(92638),c=function(h,o){var r=h===void 0?x():u({},h);if(o)for(var a in o)o[a]!==void 0&&(r[a]=o[a]);return r};y.exports=c},26430:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(54899),h=new u({initialize:function(o,r,a,d){var n=[];d.forEach(function(v){v&&n.push(v)}),this.loader=o,this.type=r,this.key=a;var p=this.key;o.prefix&&o.prefix!==""&&(this.key=o.prefix+p),this.multiKeyIndex=o.multiKeyIndex++,this.files=n,this.state=x.FILE_PENDING,this.complete=!1,this.pending=n.length,this.failed=0,this.config={},this.baseURL=o.baseURL,this.path=o.path,this.prefix=o.prefix;for(var g=0;g<n.length;g++)n[g].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(o){return this.files.push(o),o.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(o){var r=this.files.indexOf(o);r!==-1&&this.pending--},onFileFailed:function(o){var r=this.files.indexOf(o);r!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,o.type,o.key))},pendingDestroy:function(){if(this.state!==x.FILE_PENDING_DESTROY){var o=this.key,r=this.type;this.loader.emit(c.FILE_COMPLETE,o,r),this.loader.emit(c.FILE_KEY_COMPLETE+r+"-"+o,o,r),this.loader.flagForRemoval(this);for(var a=0;a<this.files.length;a++)this.files[a].pendingDestroy();this.state=x.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});y.exports=h},84376:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(3374),x=function(c,h){var o=u(h,c.xhrSettings);if(c.base64){var r=c.url.split(";base64,").pop()||c.url.split(",").pop(),a;c.xhrSettings.responseType==="arraybuffer"?a={response:Uint8Array.from(atob(r),function(p){return p.charCodeAt(0)}).buffer}:a={responseText:atob(r)},c.onBase64Load(a);return}var d=new XMLHttpRequest;if(d.open("GET",c.src,o.async,o.user,o.password),d.responseType=c.xhrSettings.responseType,d.timeout=o.timeout,o.headers)for(var n in o.headers)d.setRequestHeader(n,o.headers[n]);return o.header&&o.headerValue&&d.setRequestHeader(o.header,o.headerValue),o.requestedWith&&d.setRequestHeader("X-Requested-With",o.requestedWith),o.overrideMimeType&&d.overrideMimeType(o.overrideMimeType),o.withCredentials&&(d.withCredentials=!0),d.onload=c.onLoad.bind(c,d),d.onerror=c.onError.bind(c,d),d.onprogress=c.onProgress.bind(c),d.ontimeout=c.onError.bind(c,d),d.send(),d};y.exports=x},92638:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h,o){return i===void 0&&(i=""),u===void 0&&(u=!0),x===void 0&&(x=""),c===void 0&&(c=""),h===void 0&&(h=0),o===void 0&&(o=!1),{responseType:i,async:u,user:x,password:c,timeout:h,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:o}};y.exports=P},23906:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};y.exports=P},42155:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="addfile"},38991:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="complete"},27540:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="filecomplete"},87464:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="filecomplete-"},94486:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="loaderror"},13035:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="load"},38144:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="fileprogress"},97520:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="postprocess"},85595:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="progress"},55680:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="start"},54899:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={ADD:i(42155),COMPLETE:i(38991),FILE_COMPLETE:i(27540),FILE_KEY_COMPLETE:i(87464),FILE_LOAD_ERROR:i(94486),FILE_LOAD:i(13035),FILE_PROGRESS:i(38144),POST_PROCESS:i(97520),PROGRESS:i(85595),START:i(55680)}},14135:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(74099),c=i(518),h=i(54899),o=new u({Extends:c,initialize:function(r,a,d,n,p){c.call(this,r,a,d,n,p),this.type="animationJSON"},onProcess:function(){this.loader.once(h.POST_PROCESS,this.onLoadComplete,this),c.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});x.register("animation",function(r,a,d,n){if(Array.isArray(r))for(var p=0;p<r.length;p++)this.addFile(new o(this,r[p]));else this.addFile(new o(this,r,a,n,d));return this}),y.exports=o},76272:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(74099),c=i(95540),h=i(19550),o=i(41212),r=i(518),a=i(26430),d=new u({Extends:a,initialize:function(n,p,g,v,f,b){var C,_;if(o(p)){var M=p;p=c(M,"key"),C=new h(n,{key:p,url:c(M,"textureURL"),extension:c(M,"textureExtension","png"),normalMap:c(M,"normalMap"),xhrSettings:c(M,"textureXhrSettings")}),_=new r(n,{key:p,url:c(M,"atlasURL"),extension:c(M,"atlasExtension","json"),xhrSettings:c(M,"atlasXhrSettings")})}else C=new h(n,p,g,f),_=new r(n,p,v,b);C.linkFile?a.call(this,n,"atlasjson",p,[C,_,C.linkFile]):a.call(this,n,"atlasjson",p,[C,_])},addToCache:function(){if(this.isReadyToProcess()){var n=this.files[0],p=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(n.key,n.data,p.data,g),p.addToCache(),this.complete=!0}}});x.register("aseprite",function(n,p,g,v,f){var b;if(Array.isArray(n))for(var C=0;C<n.length;C++)b=new d(this,n[C]),this.addFile(b.files);else b=new d(this,n,p,g,v,f),this.addFile(b.files);return this}),y.exports=d},38734:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(74099),c=i(95540),h=i(19550),o=i(41212),r=i(518),a=i(26430),d=new u({Extends:a,initialize:function(n,p,g,v,f,b){var C,_;if(o(p)){var M=p;p=c(M,"key"),C=new h(n,{key:p,url:c(M,"textureURL"),extension:c(M,"textureExtension","png"),normalMap:c(M,"normalMap"),xhrSettings:c(M,"textureXhrSettings")}),_=new r(n,{key:p,url:c(M,"atlasURL"),extension:c(M,"atlasExtension","json"),xhrSettings:c(M,"atlasXhrSettings")})}else C=new h(n,p,g,f),_=new r(n,p,v,b);C.linkFile?a.call(this,n,"atlasjson",p,[C,_,C.linkFile]):a.call(this,n,"atlasjson",p,[C,_])},addToCache:function(){if(this.isReadyToProcess()){var n=this.files[0],p=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(n.key,n.data,p.data,g),this.complete=!0}}});x.register("atlas",function(n,p,g,v,f){var b;if(Array.isArray(n))for(var C=0;C<n.length;C++)b=new d(this,n[C]),this.addFile(b.files);else b=new d(this,n,p,g,v,f),this.addFile(b.files);return this}),y.exports=d},74599:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(74099),c=i(95540),h=i(19550),o=i(41212),r=i(26430),a=i(57318),d=new u({Extends:r,initialize:function(n,p,g,v,f,b){var C,_;if(o(p)){var M=p;p=c(M,"key"),C=new h(n,{key:p,url:c(M,"textureURL"),extension:c(M,"textureExtension","png"),normalMap:c(M,"normalMap"),xhrSettings:c(M,"textureXhrSettings")}),_=new a(n,{key:p,url:c(M,"atlasURL"),extension:c(M,"atlasExtension","xml"),xhrSettings:c(M,"atlasXhrSettings")})}else C=new h(n,p,g,f),_=new a(n,p,v,b);C.linkFile?r.call(this,n,"atlasxml",p,[C,_,C.linkFile]):r.call(this,n,"atlasxml",p,[C,_])},addToCache:function(){if(this.isReadyToProcess()){var n=this.files[0],p=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(n.key,n.data,p.data,g),this.complete=!0}}});x.register("atlasXML",function(n,p,g,v,f){var b;if(Array.isArray(n))for(var C=0;C<n.length;C++)b=new d(this,n[C]),this.addFile(b.files);else b=new d(this,n,p,g,v,f),this.addFile(b.files);return this}),y.exports=d},21097:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(89749),a=i(41212),d=new u({Extends:c,initialize:function(n,p,g,v,f){if(a(p)){var b=p;p=o(b,"key"),v=o(b,"xhrSettings"),f=o(b,"context",f)}var C={type:"audio",cache:n.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:p,url:g.url,xhrSettings:v,config:{context:f}};c.call(this,n,C)},onProcess:function(){this.state=x.FILE_PROCESSING;var n=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(p){n.data=p,n.onProcessComplete()},function(p){console.error("Error decoding audio: "+n.key+" - ",p?p.message:null),n.onProcessError()}),this.config.context=null}});d.create=function(n,p,g,v,f){var b=n.systems.game,C=b.config.audio,_=b.device.audio;a(p)&&(g=o(p,"url",[]),v=o(p,"config",{}));var M=d.getAudioURL(b,g);return M?_.webAudio&&!C.disableWebAudio?new d(n,p,M,f,b.sound.context):new r(n,p,M,v):(console.warn('No audio URLs for "%s" can play on this device',p),null)},d.getAudioURL=function(n,p){Array.isArray(p)||(p=[p]);for(var g=0;g<p.length;g++){var v=o(p[g],"url",p[g]);if(v.indexOf("blob:")===0||v.indexOf("data:")===0)return{url:v,type:""};var f=v.match(/\.([a-zA-Z0-9]+)($|\?)/);if(f=o(p[g],"type",f?f[1]:"").toLowerCase(),n.device.audio[f])return{url:v,type:f}}return null},h.register("audio",function(n,p,g,v){var f=this.systems.game,b=f.config.audio,C=f.device.audio;if(b.noAudio||!C.webAudio&&!C.audioData)return this;var _;if(Array.isArray(n))for(var M=0;M<n.length;M++)_=d.create(this,n[M]),_&&this.addFile(_);else _=d.create(this,n,p,g,v),_&&this.addFile(_);return this}),y.exports=d},89524:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(21097),x=i(83419),c=i(74099),h=i(95540),o=i(41212),r=i(518),a=i(26430),d=new x({Extends:a,initialize:function(n,p,g,v,f,b,C){if(o(p)){var _=p;p=h(_,"key"),g=h(_,"jsonURL"),v=h(_,"audioURL"),f=h(_,"audioConfig"),b=h(_,"audioXhrSettings"),C=h(_,"jsonXhrSettings")}var M;if(!v)M=new r(n,p,g,C),a.call(this,n,"audiosprite",p,[M]),this.config.resourceLoad=!0,this.config.audioConfig=f,this.config.audioXhrSettings=b;else{var E=u.create(n,p,v,f,b);E&&(M=new r(n,p,g,C),a.call(this,n,"audiosprite",p,[E,M]),this.config.resourceLoad=!1)}},onFileComplete:function(n){var p=this.files.indexOf(n);if(p!==-1&&(this.pending--,this.config.resourceLoad&&n.type==="json"&&n.data.hasOwnProperty("resources"))){var g=n.data.resources,v=h(this.config,"audioConfig"),f=h(this.config,"audioXhrSettings"),b=u.create(this.loader,n.key,g,v,f);b&&(this.addToMultiFile(b),this.loader.addFile(b))}},addToCache:function(){if(this.isReadyToProcess()){var n=this.files[0],p=this.files[1];n.addToCache(),p.addToCache(),this.complete=!0}}});c.register("audioSprite",function(n,p,g,v,f,b){var C=this.systems.game,_=C.config.audio,M=C.device.audio;if(_&&_.noAudio||!M.webAudio&&!M.audioData)return this;var E;if(Array.isArray(n))for(var A=0;A<n.length;A++)E=new d(this,n[A]),E.files&&this.addFile(E.files);else E=new d(this,n,p,g,v,f,b),E.files&&this.addFile(E.files);return this})},85722:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=new u({Extends:c,initialize:function(d,n,p,g,v){var f="bin";if(r(n)){var b=n;n=o(b,"key"),p=o(b,"url"),g=o(b,"xhrSettings"),f=o(b,"extension",f),v=o(b,"dataType",v)}var C={type:"binary",cache:d.cacheManager.binary,extension:f,responseType:"arraybuffer",key:n,url:p,xhrSettings:g,config:{dataType:v}};c.call(this,d,C)},onProcess:function(){this.state=x.FILE_PROCESSING;var d=this.config.dataType;this.data=d?new d(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});h.register("binary",function(d,n,p,g){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new a(this,d[v]));else this.addFile(new a(this,d,n,g,p));return this}),y.exports=a},97025:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(74099),c=i(95540),h=i(19550),o=i(41212),r=i(26430),a=i(21859),d=i(57318),n=new u({Extends:r,initialize:function(p,g,v,f,b,C){var _,M;if(o(g)){var E=g;g=c(E,"key"),_=new h(p,{key:g,url:c(E,"textureURL"),extension:c(E,"textureExtension","png"),normalMap:c(E,"normalMap"),xhrSettings:c(E,"textureXhrSettings")}),M=new d(p,{key:g,url:c(E,"fontDataURL"),extension:c(E,"fontDataExtension","xml"),xhrSettings:c(E,"fontDataXhrSettings")})}else _=new h(p,g,v,b),M=new d(p,g,f,C);_.linkFile?r.call(this,p,"bitmapfont",g,[_,M,_.linkFile]):r.call(this,p,"bitmapfont",g,[_,M])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],g=this.files[1];p.addToCache();var v=p.cache.get(p.key),f=a(g.data,p.cache.getFrame(p.key),0,0,v);this.loader.cacheManager.bitmapFont.add(p.key,{data:f,texture:p.key,frame:null}),this.complete=!0}}});x.register("bitmapFont",function(p,g,v,f,b){var C;if(Array.isArray(p))for(var _=0;_<p.length;_++)C=new n(this,p[_]),this.addFile(C.files);else C=new n(this,p,g,v,f,b),this.addFile(C.files);return this}),y.exports=n},16024:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=new u({Extends:c,initialize:function(d,n,p,g){var v="css";if(r(n)){var f=n;n=o(f,"key"),p=o(f,"url"),g=o(f,"xhrSettings"),v=o(f,"extension",v)}var b={type:"script",cache:!1,extension:v,responseType:"text",key:n,url:p,xhrSettings:g};c.call(this,d,b)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("css",function(d,n,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new a(this,d[g]));else this.addFile(new a(this,d,n,p));return this}),y.exports=a},69559:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2021 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(38734),x=i(85722),c=i(83419),h=i(74099),o=i(95540),r=i(19550),a=i(41212),d=i(518),n=i(31403),p=i(46975),g=i(59327),v=i(26430),f=i(82038),b=i(55222),C=new c({Extends:v,initialize:function(_,M,E,A){if(E.multiAtlasURL){var R=new d(_,{key:M,url:E.multiAtlasURL,xhrSettings:A,config:E});v.call(this,_,"texture",M,[R])}else{var L=E.textureURL.substr(E.textureURL.length-3);E.type||(E.type=L.toLowerCase()==="ktx"?"KTX":"PVR");var Y=new x(_,{key:M,url:E.textureURL,extension:L,xhrSettings:A,config:E});if(E.atlasURL){var F=new d(_,{key:M,url:E.atlasURL,xhrSettings:A,config:E});v.call(this,_,"texture",M,[Y,F])}else v.call(this,_,"texture",M,[Y])}this.config=E},onFileComplete:function(_){var M=this.files.indexOf(_);if(M!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(_.type==="json"&&_.data.hasOwnProperty("textures")){var E=_.data.textures,A=this.config,R=this.loader,L=R.baseURL,Y=R.path,F=R.prefix,N=o(A,"multiBaseURL",this.baseURL),z=o(A,"multiPath",this.path),U=o(A,"prefix",this.prefix),q=o(A,"textureXhrSettings");N&&R.setBaseURL(N),z&&R.setPath(z),U&&R.setPrefix(U);for(var Q=0;Q<E.length;Q++){var K=E[Q].image,et="CMA"+this.multiKeyIndex+"_"+K,H=new x(R,et,K,q);if(this.addToMultiFile(H),R.addFile(H),E[Q].normalMap){var J=new x(R,et,E[Q].normalMap,q);J.type="normalMap",H.setLink(J),this.addToMultiFile(J),R.addFile(J)}}R.setBaseURL(L),R.setPath(Y),R.setPrefix(F)}}},addToCache:function(){function _(N){console.warn('Compressed Texture Invalid: "'+L.key+'". '+N)}if(this.isReadyToProcess()){var M=this.config;if(M.multiAtlasURL)this.addMultiToCache();else{var E=this.loader.systems.renderer,A=this.loader.textureManager,R,L=this.files[0],Y=this.files[1];if(M.type==="PVR"?R=f(L.data):M.type==="KTX"&&(R=n(L.data),R||_("KTX file contains unsupported format.")),R&&!b(R)&&(_("Texture dimensions failed verification. Check the texture format specifications for "+M.format+" 0x"+R.internalFormat.toString(16)+"."),R=null),R&&!E.supportsCompressedTexture(M.format,R.internalFormat)&&(_("Texture format "+M.format+" with internal format "+R.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),R=null),R){R.format=E.getCompressedTextureName(M.format,R.internalFormat);var F=Y&&Y.data?Y.data:null;A.addCompressedTexture(L.key,R,F)}}this.complete=!0}},addMultiToCache:function(){for(var _=this.config,M=this.files[0],E=[],A=[],R=[],L=this.loader.systems.renderer,Y=this.loader.textureManager,F,N=1;N<this.files.length;N++){var z=this.files[N];if(z.type!=="normalMap")for(var U=z.key.indexOf("_"),q=z.key.substr(U+1),Q=z.data,K=0;K<M.data.textures.length;K++){var et=M.data.textures[K];if(et.image===q){_.type==="PVR"?F=f(Q):_.type==="KTX"&&(F=n(Q)),F&&L.supportsCompressedTexture(_.format,F.internalFormat)&&(F.format=L.getCompressedTextureName(_.format,F.internalFormat),A.push(F),E.push(et),z.linkFile&&R.push(z.linkFile.data));break}}}R.length===0&&(R=void 0),Y.addAtlasJSONArray(this.key,A,E,R),this.complete=!0}});h.register("texture",function(_,M,E){var A=this.systems.renderer,R=function(Y,F,N,z){var U={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(a(F)){var q=F;F=o(q,"key"),N=o(q,"url"),z=o(q,"xhrSettings")}var Q=!1;for(var K in N)if(A.supportsCompressedTexture(K)){var et=N[K];typeof et=="string"?U.textureURL=et:U=p(et,U),U.format=K.toUpperCase(),Q=!0;break}if(!Q)console.warn("No supported compressed texture format or IMG fallback",F);else if(U.format==="IMG"){var H,J;U.multiAtlasURL?(J=new g(Y,F,U.multiAtlasURL,U.multiPath,U.multiBaseURL,z),H=J.files):U.atlasURL?(J=new u(Y,F,U.textureURL,U.atlasURL,z),H=J.files):H=new r(Y,F,U.textureURL,z),Y.addFile(H)}else{var X=new C(Y,F,U,z);Y.addFile(X.files)}};if(Array.isArray(_))for(var L=0;L<_.length;L++)R(this,_[L]);else R(this,_,M,E);return this}),y.exports=C},87674:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(98356),a=i(41212),d=new u({Extends:c,initialize:function(n,p,g,v,f,b){var C="ttf";if(a(p)){var _=p;p=o(_,"key"),g=o(_,"url"),v=o(_,"format","truetype"),f=o(_,"descriptors",null),b=o(_,"xhrSettings"),C=o(_,"extension",C)}else v===void 0&&(v="truetype");var M={type:"font",cache:!1,extension:C,responseType:"text",key:p,url:g,xhrSettings:b};c.call(this,n,M),this.data={format:v,descriptors:f},this.state=x.FILE_POPULATED},onProcess:function(){this.state=x.FILE_PROCESSING,this.src=r(this,this.loader.baseURL);var n,p=this.key,g="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?n=new FontFace(p,g,this.data.descriptors):n=new FontFace(p,g);var v=this;n.load().then(function(){document.fonts.add(n),document.body.classList.add("fonts-loaded"),v.onProcessComplete()}).catch(function(){console.warn("Font failed to load",g),v.onProcessComplete()})}});h.register("font",function(n,p,g,v,f){if(Array.isArray(n))for(var b=0;b<n.length;b++)this.addFile(new d(this,n[b]));else this.addFile(new d(this,n,p,g,v,f));return this}),y.exports=d},47931:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=i(73894),d=new u({Extends:c,initialize:function(n,p,g,v,f){var b="glsl";if(r(p)){var C=p;p=o(C,"key"),g=o(C,"url"),v=o(C,"shaderType","fragment"),f=o(C,"xhrSettings"),b=o(C,"extension",b)}else v===void 0&&(v="fragment");var _={type:"glsl",cache:n.cacheManager.shader,extension:b,responseType:"text",key:p,url:g,config:{shaderType:v},xhrSettings:f};c.call(this,n,_)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var n=this.data.split(`
`),p=this.extractBlock(n,0);if(p)for(;p;){var g=this.getShaderName(p.header),v=this.getShaderType(p.header),f=this.getShaderUniforms(p.header),b=p.shader;if(this.cache.has(g)){var C=this.cache.get(g);v==="fragment"?C.fragmentSrc=b:C.vertexSrc=b,C.uniforms||(C.uniforms=f)}else v==="fragment"?this.cache.add(g,new a(g,b,"",f)):this.cache.add(g,new a(g,"",b,f));p=this.extractBlock(n,p.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new a(this.key,this.data)):this.cache.add(this.key,new a(this.key,"",this.data))},getShaderName:function(n){for(var p=0;p<n.length;p++){var g=n[p].trim();if(g.substring(0,5)==="name:")return g.substring(5).trim()}return this.key},getShaderType:function(n){for(var p=0;p<n.length;p++){var g=n[p].trim();if(g.substring(0,5)==="type:")return g.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(n){for(var p={},g=0;g<n.length;g++){var v=n[g].trim();if(v.substring(0,8)==="uniform."){var f=v.indexOf(":");if(f){var b=v.substring(8,f);try{p[b]=JSON.parse(v.substring(f+1))}catch{console.warn("Invalid uniform JSON: "+b)}}}}return p},extractBlock:function(n,p){for(var g=-1,v=-1,f=-1,b=!1,C=!1,_=[],M=[],E=p;E<n.length;E++){var A=n[E].trim();if(A==="---")if(g===-1)g=E,b=!0;else if(b)v=E,b=!1,C=!0;else{C=!1;break}else b?_.push(A):C&&(M.push(A),f=E)}return!b&&v!==-1?{header:_,shader:M.join(`
`),offset:f}:null}});h.register("glsl",function(n,p,g,v){if(Array.isArray(n))for(var f=0;f<n.length;f++)this.addFile(new d(this,n[f]));else this.addFile(new d(this,n,p,g,v));return this}),y.exports=d},89749:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(54899),c=i(41299),h=i(95540),o=i(98356),r=i(41212),a=new u({Extends:c,initialize:function(d,n,p,g){if(r(n)){var v=n;n=h(v,"key"),g=h(v,"config",g)}var f={type:"audio",cache:d.cacheManager.audio,extension:p.type,key:n,url:p.url,config:g};c.call(this,d,f),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var d=0;d<this.data.length;d++){var n=this.data[d];n.oncanplaythrough=null,n.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(d){var n=d.target;n.oncanplaythrough=null,n.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(x.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var d=this.config&&this.config.instances||1;this.filesTotal=d,this.filesLoaded=0,this.percentComplete=0;for(var n=0;n<d;n++){var p=new Audio;p.dataset||(p.dataset={}),p.dataset.name=this.key+("0"+n).slice(-2),p.dataset.used="false",this.locked?p.dataset.locked="true":(p.dataset.locked="false",p.preload="auto",p.oncanplaythrough=this.onProgress.bind(this),p.onerror=this.onError.bind(this)),this.data.push(p)}for(n=0;n<this.data.length;n++)p=this.data[n],p.src=o(this,this.loader.baseURL),this.locked||p.load();this.locked&&setTimeout(this.onLoad.bind(this))}});y.exports=a},88470:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=new u({Extends:c,initialize:function(d,n,p,g){var v="html";if(r(n)){var f=n;n=o(f,"key"),p=o(f,"url"),g=o(f,"xhrSettings"),v=o(f,"extension",v)}var b={type:"text",cache:d.cacheManager.html,extension:v,responseType:"text",key:n,url:p,xhrSettings:g};c.call(this,d,b)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("html",function(d,n,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new a(this,d[g]));else this.addFile(new a(this,d,n,p));return this}),y.exports=a},14643:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=new u({Extends:c,initialize:function(d,n,p,g,v,f){g===void 0&&(g=512),v===void 0&&(v=512);var b="html";if(r(n)){var C=n;n=o(C,"key"),p=o(C,"url"),f=o(C,"xhrSettings"),b=o(C,"extension",b),g=o(C,"width",g),v=o(C,"height",v)}var _={type:"html",cache:d.textureManager,extension:b,responseType:"text",key:n,url:p,xhrSettings:f,config:{width:g,height:v}};c.call(this,d,_)},onProcess:function(){this.state=x.FILE_PROCESSING;var d=this.config.width,n=this.config.height,p=[];p.push('<svg width="'+d+'px" height="'+n+'px" viewBox="0 0 '+d+" "+n+'" xmlns="http://www.w3.org/2000/svg">'),p.push('<foreignObject width="100%" height="100%">'),p.push('<body xmlns="http://www.w3.org/1999/xhtml">'),p.push(this.xhrLoader.responseText),p.push("</body>"),p.push("</foreignObject>"),p.push("</svg>");var g=[p.join(`
`)],v=this;try{var f=new window.Blob(g,{type:"image/svg+xml;charset=utf-8"})}catch{v.state=x.FILE_ERRORED,v.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){c.revokeObjectURL(v.data),v.onProcessComplete()},this.data.onerror=function(){c.revokeObjectURL(v.data),v.onProcessError()},c.createObjectURL(this.data,f,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});h.register("htmlTexture",function(d,n,p,g,v){if(Array.isArray(d))for(var f=0;f<d.length;f++)this.addFile(new a(this,d[f]));else this.addFile(new a(this,d,n,p,g,v));return this}),y.exports=a},19550:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=i(98356),d=new u({Extends:c,initialize:function n(p,g,v,f,b){var C="png",_;if(r(g)){var M=g;g=o(M,"key"),v=o(M,"url"),_=o(M,"normalMap"),f=o(M,"xhrSettings"),C=o(M,"extension",C),b=o(M,"frameConfig")}Array.isArray(v)&&(_=v[1],v=v[0]);var E={type:"image",cache:p.textureManager,extension:C,responseType:"blob",key:g,url:v,xhrSettings:f,config:b};if(c.call(this,p,E),_){var A=new n(p,this.key,_,f,b);A.type="normalMap",this.setLink(A),p.addFile(A)}this.useImageElementLoad=p.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var n=this;this.data.onload=function(){c.revokeObjectURL(n.data),n.onProcessComplete()},this.data.onerror=function(){c.revokeObjectURL(n.data),n.onProcessError()},c.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var n=this.state;this.state=x.FILE_PROCESSING,n===x.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=x.FILE_LOADING,this.src=a(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var n=this;this.data.onload=function(){n.state=x.FILE_LOADED,n.loader.nextFile(n,!0)},this.data.onerror=function(){n.loader.nextFile(n,!1)},this.data.src=this.src},addToCache:function(){var n=this.linkFile;n?n.state>=x.FILE_COMPLETE&&(n.type==="spritesheet"?n.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,n.data,this.data):this.cache.addImage(this.key,this.data,n.data)):this.cache.addImage(this.key,this.data)}});h.register("image",function(n,p,g){if(Array.isArray(n))for(var v=0;v<n.length;v++)this.addFile(new d(this,n[v]));else this.addFile(new d(this,n,p,g));return this}),y.exports=d},518:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(35154),a=i(41212),d=new u({Extends:c,initialize:function(n,p,g,v,f){var b="json";if(a(p)){var C=p;p=o(C,"key"),g=o(C,"url"),v=o(C,"xhrSettings"),b=o(C,"extension",b),f=o(C,"dataKey",f)}var _={type:"json",cache:n.cacheManager.json,extension:b,responseType:"text",key:p,url:g,xhrSettings:v,config:f};c.call(this,n,_),a(g)&&(f?this.data=r(g,f):this.data=g,this.state=x.FILE_POPULATED)},onProcess:function(){if(this.state!==x.FILE_POPULATED){this.state=x.FILE_PROCESSING;try{var n=JSON.parse(this.xhrLoader.responseText)}catch(g){throw this.onProcessError(),g}var p=this.config;typeof p=="string"?this.data=r(n,p,n):this.data=n}this.onProcessComplete()}});h.register("json",function(n,p,g,v){if(Array.isArray(n))for(var f=0;f<n.length;f++)this.addFile(new d(this,n[f]));else this.addFile(new d(this,n,p,v,g));return this}),y.exports=d},59327:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(74099),c=i(95540),h=i(19550),o=i(41212),r=i(518),a=i(26430),d=new u({Extends:a,initialize:function(n,p,g,v,f,b,C){if(o(p)){var _=p;p=c(_,"key"),c(_,"url",!1)?g=c(_,"url"):g=c(_,"atlasURL"),b=c(_,"xhrSettings"),v=c(_,"path"),f=c(_,"baseURL"),C=c(_,"textureXhrSettings")}var M=new r(n,p,g,b);a.call(this,n,"multiatlas",p,[M]),this.config.path=v,this.config.baseURL=f,this.config.textureXhrSettings=C},onFileComplete:function(n){var p=this.files.indexOf(n);if(p!==-1&&(this.pending--,n.type==="json"&&n.data.hasOwnProperty("textures"))){var g=n.data.textures,v=this.config,f=this.loader,b=f.baseURL,C=f.path,_=f.prefix,M=c(v,"baseURL",this.baseURL),E=c(v,"path",this.path),A=c(v,"prefix",this.prefix),R=c(v,"textureXhrSettings");f.setBaseURL(M),f.setPath(E),f.setPrefix(A);for(var L=0;L<g.length;L++){var Y=g[L].image,F="MA"+this.multiKeyIndex+"_"+Y,N=new h(f,F,Y,R);if(this.addToMultiFile(N),f.addFile(N),g[L].normalMap){var z=new h(f,F,g[L].normalMap,R);z.type="normalMap",N.setLink(z),this.addToMultiFile(z),f.addFile(z)}}f.setBaseURL(b),f.setPath(C),f.setPrefix(_)}},addToCache:function(){if(this.isReadyToProcess()){for(var n=this.files[0],p=[],g=[],v=[],f=1;f<this.files.length;f++){var b=this.files[f];if(b.type!=="normalMap")for(var C=b.key.indexOf("_"),_=b.key.substr(C+1),M=b.data,E=0;E<n.data.textures.length;E++){var A=n.data.textures[E];if(A.image===_){g.push(M),p.push(A),b.linkFile&&v.push(b.linkFile.data);break}}}v.length===0&&(v=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,g,p,v),this.complete=!0}}});x.register("multiatlas",function(n,p,g,v,f){var b;if(Array.isArray(n))for(var C=0;C<n.length;C++)b=new d(this,n[C]),this.addFile(b.files);else b=new d(this,n,p,g,v,f),this.addFile(b.files);return this}),y.exports=d},99297:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(74099),c=i(95540),h=i(41212),o=i(26430),r=i(34328),a=new u({Extends:o,initialize:function(d,n,p,g){var v="js",f=[];if(h(n)){var b=n;n=c(b,"key"),p=c(b,"url"),g=c(b,"xhrSettings"),v=c(b,"extension",v)}Array.isArray(p)||(p=[p]);for(var C=0;C<p.length;C++){var _=new r(d,{key:n+"_"+C.toString(),url:p[C],extension:v,xhrSettings:g});_.onProcess=function(){this.onProcessComplete()},f.push(_)}o.call(this,d,"scripts",n,f)},addToCache:function(){if(this.isReadyToProcess()){for(var d=0;d<this.files.length;d++){var n=this.files[d];n.data=document.createElement("script"),n.data.language="javascript",n.data.type="text/javascript",n.data.defer=!1,n.data.text=n.xhrLoader.responseText,document.head.appendChild(n.data)}this.complete=!0}}});x.register("scripts",function(d,n,p){var g;if(Array.isArray(d))for(var v=0;v<d.length;v++)g=new a(this,d[v]),this.addFile(g.files);else g=new a(this,d,n,p),this.addFile(g.files);return this}),y.exports=a},41846:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(74099),c=i(95540),h=i(41212),o=i(26430),r=i(85048),a=i(61485),d=i(78776),n=new u({Extends:o,initialize:function(p,g,v,f,b,C){var _,M,E=p.cacheManager.obj;if(h(g)){var A=g;g=c(A,"key"),_=new d(p,{key:g,type:"obj",cache:E,url:c(A,"url"),extension:c(A,"extension","obj"),xhrSettings:c(A,"xhrSettings"),config:{flipUV:c(A,"flipUV",b)}}),f=c(A,"matURL"),f&&(M=new d(p,{key:g,type:"mat",cache:E,url:f,extension:c(A,"matExtension","mat"),xhrSettings:c(A,"xhrSettings")}))}else _=new d(p,{key:g,url:v,type:"obj",cache:E,extension:"obj",xhrSettings:C,config:{flipUV:b}}),f&&(M=new d(p,{key:g,url:f,type:"mat",cache:E,extension:"mat",xhrSettings:C}));o.call(this,p,"obj",g,[_,M])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],g=this.files[1],v=r(p.data,p.config.flipUV);g&&(v.materials=a(g.data)),p.cache.add(p.key,v),this.complete=!0}}});x.register("obj",function(p,g,v,f,b){var C;if(Array.isArray(p))for(var _=0;_<p.length;_++)C=new n(this,p[_]),this.addFile(C.files);else C=new n(this,p,g,v,f,b),this.addFile(C.files);return this}),y.exports=n},58610:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(74099),h=i(518),o=new u({Extends:h,initialize:function(r,a,d,n,p){h.call(this,r,a,d,n,p),this.type="packfile"},onProcess:function(){if(this.state!==x.FILE_POPULATED&&(this.state=x.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var r={};r[this.config]=this.data,this.data=r}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});c.register("pack",function(r,a,d,n){if(Array.isArray(r))for(var p=0;p<r.length;p++)this.addFile(new o(this,r[p]));else this.addFile(new o(this,r,a,n,d));return this}),y.exports=o},48988:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=new u({Extends:c,initialize:function(d,n,p,g,v,f){var b="js";if(r(n)){var C=n;n=o(C,"key"),p=o(C,"url"),f=o(C,"xhrSettings"),b=o(C,"extension",b),g=o(C,"start"),v=o(C,"mapping")}var _={type:"plugin",cache:!1,extension:b,responseType:"text",key:n,url:p,xhrSettings:f,config:{start:g,mapping:v}};c.call(this,d,_),typeof p=="function"&&(this.data=p,this.state=x.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,n=this.config,p=o(n,"start",!1),g=o(n,"mapping",null);if(this.state===x.FILE_POPULATED)d.install(this.key,this.data,p,g);else{this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var v=d.install(this.key,window[this.key],p,g);(p||g)&&(this.loader.systems[g]=v,this.loader.scene[g]=v)}this.onProcessComplete()}});h.register("plugin",function(d,n,p,g,v){if(Array.isArray(d))for(var f=0;f<d.length;f++)this.addFile(new a(this,d[f]));else this.addFile(new a(this,d,n,p,g,v));return this}),y.exports=a},67397:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=new u({Extends:c,initialize:function(d,n,p,g,v){var f="svg";if(r(n)){var b=n;n=o(b,"key"),p=o(b,"url"),g=o(b,"svgConfig",{}),v=o(b,"xhrSettings"),f=o(b,"extension",f)}var C={type:"svg",cache:d.textureManager,extension:f,responseType:"text",key:n,url:p,xhrSettings:v,config:{width:o(g,"width"),height:o(g,"height"),scale:o(g,"scale")}};c.call(this,d,C)},onProcess:function(){this.state=x.FILE_PROCESSING;var d=this.xhrLoader.responseText,n=[d],p=this.config.width,g=this.config.height,v=this.config.scale;t:if(p&&g||v){var f=null,b=new DOMParser;f=b.parseFromString(d,"text/xml");var C=f.getElementsByTagName("svg")[0],_=C.hasAttribute("viewBox"),M=parseFloat(C.getAttribute("width")),E=parseFloat(C.getAttribute("height"));if(!_&&M&&E)C.setAttribute("viewBox","0  0 "+M+" "+E);else if(_&&!M&&!E){var A=C.getAttribute("viewBox").split(/\s+|,/);M=A[2],E=A[3]}if(v)if(M&&E)p=M*v,g=E*v;else break t;C.setAttribute("width",p.toString()+"px"),C.setAttribute("height",g.toString()+"px"),n=[new XMLSerializer().serializeToString(C)]}try{var R=new window.Blob(n,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var L=this,Y=!1;this.data.onload=function(){Y||c.revokeObjectURL(L.data),L.onProcessComplete()},this.data.onerror=function(){Y?L.onProcessError():(Y=!0,c.revokeObjectURL(L.data),L.data.src="data:image/svg+xml,"+encodeURIComponent(n.join("")))},c.createObjectURL(this.data,R,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});h.register("svg",function(d,n,p,g){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new a(this,d[v]));else this.addFile(new a(this,d,n,p,g));return this}),y.exports=a},88423:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=new u({Extends:c,initialize:function(d,n,p,g){var v="js";if(r(n)){var f=n;n=o(f,"key"),p=o(f,"url"),g=o(f,"xhrSettings"),v=o(f,"extension",v)}var b={type:"text",extension:v,responseType:"text",key:n,url:p,xhrSettings:g};c.call(this,d,b)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),n=eval;this.loader.sceneManager.add(this.key,n(d)),this.complete=!0}});h.register("sceneFile",function(d,n,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new a(this,d[g]));else this.addFile(new a(this,d,n,p));return this}),y.exports=a},56812:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=new u({Extends:c,initialize:function(d,n,p,g,v,f){var b="js";if(r(n)){var C=n;n=o(C,"key"),p=o(C,"url"),f=o(C,"xhrSettings"),b=o(C,"extension",b),g=o(C,"systemKey"),v=o(C,"sceneKey")}var _={type:"scenePlugin",cache:!1,extension:b,responseType:"text",key:n,url:p,xhrSettings:f,config:{systemKey:g,sceneKey:v}};c.call(this,d,_),typeof p=="function"&&(this.data=p,this.state=x.FILE_POPULATED)},onProcess:function(){var d=this.loader.systems.plugins,n=this.config,p=this.key,g=o(n,"systemKey",p),v=o(n,"sceneKey",p);this.state===x.FILE_POPULATED?d.installScenePlugin(g,this.data,v,this.loader.scene,!0):(this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),d.installScenePlugin(g,window[this.key],v,this.loader.scene,!0)),this.onProcessComplete()}});h.register("scenePlugin",function(d,n,p,g,v){if(Array.isArray(d))for(var f=0;f<d.length;f++)this.addFile(new a(this,d[f]));else this.addFile(new a(this,d,n,p,g,v));return this}),y.exports=a},34328:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=new u({Extends:c,initialize:function(d,n,p,g,v){var f="js";if(r(n)){var b=n;n=o(b,"key"),p=o(b,"url"),g=o(b,"type","script"),v=o(b,"xhrSettings"),f=o(b,"extension",f)}else g===void 0&&(g="script");var C={type:g,cache:!1,extension:f,responseType:"text",key:n,url:p,xhrSettings:v};c.call(this,d,C)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("script",function(d,n,p,g){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new a(this,d[v]));else this.addFile(new a(this,d,n,p,g));return this}),y.exports=a},85035:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(74099),h=i(19550),o=new u({Extends:h,initialize:function(r,a,d,n,p){h.call(this,r,a,d,p,n),this.type="spritesheet"},addToCache:function(){var r=this.linkFile;r?r.state>=x.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,r.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,r.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});c.register("spritesheet",function(r,a,d,n){if(Array.isArray(r))for(var p=0;p<r.length;p++)this.addFile(new o(this,r[p]));else this.addFile(new o(this,r,a,d,n));return this}),y.exports=o},78776:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=new u({Extends:c,initialize:function(d,n,p,g){var v="text",f="txt",b=d.cacheManager.text;if(r(n)){var C=n;n=o(C,"key"),p=o(C,"url"),g=o(C,"xhrSettings"),f=o(C,"extension",f),v=o(C,"type",v),b=o(C,"cache",b)}var _={type:v,cache:b,extension:f,responseType:"text",key:n,url:p,xhrSettings:g};c.call(this,d,_)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("text",function(d,n,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new a(this,d[g]));else this.addFile(new a(this,d,n,p));return this}),y.exports=a},49477:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=i(80341),d=new u({Extends:c,initialize:function(n,p,g,v){var f="csv";if(r(p)){var b=p;p=o(b,"key"),g=o(b,"url"),v=o(b,"xhrSettings"),f=o(b,"extension",f)}var C={type:"tilemapCSV",cache:n.cacheManager.tilemap,extension:f,responseType:"text",key:p,url:g,xhrSettings:v};c.call(this,n,C),this.tilemapFormat=a.CSV},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var n={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,n)}});h.register("tilemapCSV",function(n,p,g){if(Array.isArray(n))for(var v=0;v<n.length;v++)this.addFile(new d(this,n[v]));else this.addFile(new d(this,n,p,g));return this}),y.exports=d},40807:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(74099),c=i(518),h=i(80341),o=new u({Extends:c,initialize:function(r,a,d,n){c.call(this,r,a,d,n),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var r={format:h.WELTMEISTER,data:this.data};this.cache.add(this.key,r)}});x.register("tilemapImpact",function(r,a,d){if(Array.isArray(r))for(var n=0;n<r.length;n++)this.addFile(new o(this,r[n]));else this.addFile(new o(this,r,a,d));return this}),y.exports=o},56775:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(74099),c=i(518),h=i(80341),o=new u({Extends:c,initialize:function(r,a,d,n){c.call(this,r,a,d,n),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var r={format:h.TILED_JSON,data:this.data};this.cache.add(this.key,r)}});x.register("tilemapTiledJSON",function(r,a,d){if(Array.isArray(r))for(var n=0;n<r.length;n++)this.addFile(new o(this,r[n]));else this.addFile(new o(this,r,a,d));return this}),y.exports=o},25771:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(74099),c=i(95540),h=i(19550),o=i(41212),r=i(26430),a=i(78776),d=new u({Extends:r,initialize:function(n,p,g,v,f,b){var C,_;if(o(p)){var M=p;p=c(M,"key"),C=new h(n,{key:p,url:c(M,"textureURL"),extension:c(M,"textureExtension","png"),normalMap:c(M,"normalMap"),xhrSettings:c(M,"textureXhrSettings")}),_=new a(n,{key:p,url:c(M,"atlasURL"),extension:c(M,"atlasExtension","txt"),xhrSettings:c(M,"atlasXhrSettings")})}else C=new h(n,p,g,f),_=new a(n,p,v,b);C.linkFile?r.call(this,n,"unityatlas",p,[C,_,C.linkFile]):r.call(this,n,"unityatlas",p,[C,_])},addToCache:function(){if(this.isReadyToProcess()){var n=this.files[0],p=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(n.key,n.data,p.data,g),this.complete=!0}}});x.register("unityAtlas",function(n,p,g,v,f){var b;if(Array.isArray(n))for(var C=0;C<n.length;C++)b=new d(this,n[C]),this.addFile(b.files);else b=new d(this,n,p,g,v,f),this.addFile(b.files);return this}),y.exports=d},33720:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(98356),r=i(95540),a=i(41212),d=new u({Extends:c,initialize:function(n,p,g,v){if(v===void 0&&(v=!1),a(p)){var f=p;p=r(f,"key"),g=r(f,"url",[]),v=r(f,"noAudio",!1)}var b=n.systems.game.device.video.getVideoURL(g);b||console.warn("VideoFile: No supported format for "+p);var C={type:"video",cache:n.cacheManager.video,extension:b.type,key:p,url:b.url,config:{noAudio:v}};c.call(this,n,C)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=o(this,this.loader.baseURL),this.state=x.FILE_LOADED,this.loader.nextFile(this,!0)}});h.register("video",function(n,p,g){if(Array.isArray(n))for(var v=0;v<n.length;v++)this.addFile(new d(this,n[v]));else this.addFile(new d(this,n,p,g));return this}),y.exports=d},57318:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(23906),c=i(41299),h=i(74099),o=i(95540),r=i(41212),a=i(56836),d=new u({Extends:c,initialize:function(n,p,g,v){var f="xml";if(r(p)){var b=p;p=o(b,"key"),g=o(b,"url"),v=o(b,"xhrSettings"),f=o(b,"extension",f)}var C={type:"xml",cache:n.cacheManager.xml,extension:f,responseType:"text",key:p,url:g,xhrSettings:v};c.call(this,n,C)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=a(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});h.register("xml",function(n,p,g){if(Array.isArray(n))for(var v=0;v<n.length;v++)this.addFile(new d(this,n[v]));else this.addFile(new d(this,n,p,g));return this}),y.exports=d},64589:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={AnimationJSONFile:i(14135),AsepriteFile:i(76272),AtlasJSONFile:i(38734),AtlasXMLFile:i(74599),AudioFile:i(21097),AudioSpriteFile:i(89524),BinaryFile:i(85722),BitmapFontFile:i(97025),CompressedTextureFile:i(69559),CSSFile:i(16024),FontFile:i(87674),GLSLFile:i(47931),HTML5AudioFile:i(89749),HTMLFile:i(88470),HTMLTextureFile:i(14643),ImageFile:i(19550),JSONFile:i(518),MultiAtlasFile:i(59327),MultiScriptFile:i(99297),OBJFile:i(41846),PackFile:i(58610),PluginFile:i(48988),SceneFile:i(88423),ScenePluginFile:i(56812),ScriptFile:i(34328),SpriteSheetFile:i(85035),SVGFile:i(67397),TextFile:i(78776),TilemapCSVFile:i(49477),TilemapImpactFile:i(40807),TilemapJSONFile:i(56775),UnityAtlasFile:i(25771),VideoFile:i(33720),XMLFile:i(57318)}},57777:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(23906),x=i(79291),c={Events:i(54899),FileTypes:i(64589),File:i(41299),FileTypesManager:i(74099),GetURL:i(98356),LoaderPlugin:i(74261),MergeXHRSettings:i(3374),MultiFile:i(26430),XHRLoader:i(84376),XHRSettings:i(92638)};c=x(!1,c,u),y.exports=c},53307:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){for(var u=0,x=0;x<i.length;x++)u+=+i[x];return u/i.length};y.exports=P},85710:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(6411),x=function(c,h){return u(c)/u(h)/u(c-h)};y.exports=x},30976:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return Math.floor(Math.random()*(u-i+1)+i)};y.exports=P},87842:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h){var o=(c-u)*.5,r=(h-x)*.5,a=i*i,d=i*a;return(2*x-2*c+o+r)*d+(-3*x+3*c-2*o-r)*a+o*i+x};y.exports=P},26302:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){u===void 0&&(u=0),x===void 0&&(x=10);var c=Math.pow(x,-u);return Math.ceil(i*c)/c};y.exports=P},45319:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return Math.max(u,Math.min(x,i))};y.exports=P},39506:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(36383),x=function(c){return c*u.DEG_TO_RAD};y.exports=x},61241:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return Math.abs(i-u)};y.exports=P},38857:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45319),x=i(83419),c=i(37867),h=i(29747),o=new c,r=new x({initialize:function a(d,n,p,g){d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p=0),g===void 0&&(g=a.DefaultOrder),this._x=d,this._y=n,this._z=p,this._order=g,this.onChangeCallback=h},x:{get:function(){return this._x},set:function(a){this._x=a,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(a){this._y=a,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(a){this._z=a,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(a){this._order=a,this.onChangeCallback(this)}},set:function(a,d,n,p){return p===void 0&&(p=this._order),this._x=a,this._y=d,this._z=n,this._order=p,this.onChangeCallback(this),this},copy:function(a){return this.set(a.x,a.y,a.z,a.order)},setFromQuaternion:function(a,d,n){return d===void 0&&(d=this._order),n===void 0&&(n=!1),o.fromQuat(a),this.setFromRotationMatrix(o,d,n)},setFromRotationMatrix:function(a,d,n){d===void 0&&(d=this._order),n===void 0&&(n=!1);var p=a.val,g=p[0],v=p[4],f=p[8],b=p[1],C=p[5],_=p[9],M=p[2],E=p[6],A=p[10],R=0,L=0,Y=0,F=.99999;switch(d){case"XYZ":{L=Math.asin(u(f,-1,1)),Math.abs(f)<F?(R=Math.atan2(-_,A),Y=Math.atan2(-v,g)):R=Math.atan2(E,C);break}case"YXZ":{R=Math.asin(-u(_,-1,1)),Math.abs(_)<F?(L=Math.atan2(f,A),Y=Math.atan2(b,C)):L=Math.atan2(-M,g);break}case"ZXY":{R=Math.asin(u(E,-1,1)),Math.abs(E)<F?(L=Math.atan2(-M,A),Y=Math.atan2(-v,C)):Y=Math.atan2(b,g);break}case"ZYX":{L=Math.asin(-u(M,-1,1)),Math.abs(M)<F?(R=Math.atan2(E,A),Y=Math.atan2(b,g)):Y=Math.atan2(-v,C);break}case"YZX":{Y=Math.asin(u(b,-1,1)),Math.abs(b)<F?(R=Math.atan2(-_,C),L=Math.atan2(-M,g)):L=Math.atan2(f,A);break}case"XZY":{Y=Math.asin(-u(v,-1,1)),Math.abs(v)<F?(R=Math.atan2(E,C),L=Math.atan2(f,g)):R=Math.atan2(-_,A);break}}return this._x=R,this._y=L,this._z=Y,this._order=d,n&&this.onChangeCallback(this),this}});r.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],r.DefaultOrder="XYZ",y.exports=r},6411:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){if(i===0)return 1;for(var u=i;--i;)u*=i;return u};y.exports=P},99472:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return Math.random()*(u-i)+i};y.exports=P},77623:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){u===void 0&&(u=0),x===void 0&&(x=10);var c=Math.pow(x,-u);return Math.floor(i*c)/c};y.exports=P},62945:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45319),x=function(c,h,o){return c=u(c,0,1),(o-h)*c+h};y.exports=x},38265:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i/u/1e3};y.exports=P},78702:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i==parseFloat(i)?!(i%2):void 0};y.exports=P},94883:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i===parseFloat(i)?!(i%2):void 0};y.exports=P},28915:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return(u-i)*x+i};y.exports=P},94908:y=>{/**
* @author       Greg McLean <GregDevProjects>
* @copyright    2021 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return x===void 0&&(x=0),i.clone().lerp(u,x)};y.exports=P},94434:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c){this.val=new Float32Array(9),c?this.copy(c):this.identity()},clone:function(){return new x(this)},set:function(c){return this.copy(c)},copy:function(c){var h=this.val,o=c.val;return h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3],h[4]=o[4],h[5]=o[5],h[6]=o[6],h[7]=o[7],h[8]=o[8],this},fromMat4:function(c){var h=c.val,o=this.val;return o[0]=h[0],o[1]=h[1],o[2]=h[2],o[3]=h[4],o[4]=h[5],o[5]=h[6],o[6]=h[8],o[7]=h[9],o[8]=h[10],this},fromArray:function(c){var h=this.val;return h[0]=c[0],h[1]=c[1],h[2]=c[2],h[3]=c[3],h[4]=c[4],h[5]=c[5],h[6]=c[6],h[7]=c[7],h[8]=c[8],this},identity:function(){var c=this.val;return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=1,c[5]=0,c[6]=0,c[7]=0,c[8]=1,this},transpose:function(){var c=this.val,h=c[1],o=c[2],r=c[5];return c[1]=c[3],c[2]=c[6],c[3]=h,c[5]=c[7],c[6]=o,c[7]=r,this},invert:function(){var c=this.val,h=c[0],o=c[1],r=c[2],a=c[3],d=c[4],n=c[5],p=c[6],g=c[7],v=c[8],f=v*d-n*g,b=-v*a+n*p,C=g*a-d*p,_=h*f+o*b+r*C;return _?(_=1/_,c[0]=f*_,c[1]=(-v*o+r*g)*_,c[2]=(n*o-r*d)*_,c[3]=b*_,c[4]=(v*h-r*p)*_,c[5]=(-n*h+r*a)*_,c[6]=C*_,c[7]=(-g*h+o*p)*_,c[8]=(d*h-o*a)*_,this):null},adjoint:function(){var c=this.val,h=c[0],o=c[1],r=c[2],a=c[3],d=c[4],n=c[5],p=c[6],g=c[7],v=c[8];return c[0]=d*v-n*g,c[1]=r*g-o*v,c[2]=o*n-r*d,c[3]=n*p-a*v,c[4]=h*v-r*p,c[5]=r*a-h*n,c[6]=a*g-d*p,c[7]=o*p-h*g,c[8]=h*d-o*a,this},determinant:function(){var c=this.val,h=c[0],o=c[1],r=c[2],a=c[3],d=c[4],n=c[5],p=c[6],g=c[7],v=c[8];return h*(v*d-n*g)+o*(-v*a+n*p)+r*(g*a-d*p)},multiply:function(c){var h=this.val,o=h[0],r=h[1],a=h[2],d=h[3],n=h[4],p=h[5],g=h[6],v=h[7],f=h[8],b=c.val,C=b[0],_=b[1],M=b[2],E=b[3],A=b[4],R=b[5],L=b[6],Y=b[7],F=b[8];return h[0]=C*o+_*d+M*g,h[1]=C*r+_*n+M*v,h[2]=C*a+_*p+M*f,h[3]=E*o+A*d+R*g,h[4]=E*r+A*n+R*v,h[5]=E*a+A*p+R*f,h[6]=L*o+Y*d+F*g,h[7]=L*r+Y*n+F*v,h[8]=L*a+Y*p+F*f,this},translate:function(c){var h=this.val,o=c.x,r=c.y;return h[6]=o*h[0]+r*h[3]+h[6],h[7]=o*h[1]+r*h[4]+h[7],h[8]=o*h[2]+r*h[5]+h[8],this},rotate:function(c){var h=this.val,o=h[0],r=h[1],a=h[2],d=h[3],n=h[4],p=h[5],g=Math.sin(c),v=Math.cos(c);return h[0]=v*o+g*d,h[1]=v*r+g*n,h[2]=v*a+g*p,h[3]=v*d-g*o,h[4]=v*n-g*r,h[5]=v*p-g*a,this},scale:function(c){var h=this.val,o=c.x,r=c.y;return h[0]=o*h[0],h[1]=o*h[1],h[2]=o*h[2],h[3]=r*h[3],h[4]=r*h[4],h[5]=r*h[5],this},fromQuat:function(c){var h=c.x,o=c.y,r=c.z,a=c.w,d=h+h,n=o+o,p=r+r,g=h*d,v=h*n,f=h*p,b=o*n,C=o*p,_=r*p,M=a*d,E=a*n,A=a*p,R=this.val;return R[0]=1-(b+_),R[3]=v+A,R[6]=f-E,R[1]=v-A,R[4]=1-(g+_),R[7]=C+M,R[2]=f+E,R[5]=C-M,R[8]=1-(g+b),this},normalFromMat4:function(c){var h=c.val,o=this.val,r=h[0],a=h[1],d=h[2],n=h[3],p=h[4],g=h[5],v=h[6],f=h[7],b=h[8],C=h[9],_=h[10],M=h[11],E=h[12],A=h[13],R=h[14],L=h[15],Y=r*g-a*p,F=r*v-d*p,N=r*f-n*p,z=a*v-d*g,U=a*f-n*g,q=d*f-n*v,Q=b*A-C*E,K=b*R-_*E,et=b*L-M*E,H=C*R-_*A,J=C*L-M*A,X=_*L-M*R,Z=Y*X-F*J+N*H+z*et-U*K+q*Q;return Z?(Z=1/Z,o[0]=(g*X-v*J+f*H)*Z,o[1]=(v*et-p*X-f*K)*Z,o[2]=(p*J-g*et+f*Q)*Z,o[3]=(d*J-a*X-n*H)*Z,o[4]=(r*X-d*et+n*K)*Z,o[5]=(a*et-r*J-n*Q)*Z,o[6]=(A*q-R*U+L*z)*Z,o[7]=(R*N-E*q-L*F)*Z,o[8]=(E*U-A*N+L*Y)*Z,this):null}});y.exports=x},37867:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(25836),c=1e-6,h=new u({initialize:function(p){this.val=new Float32Array(16),p?this.copy(p):this.identity()},clone:function(){return new h(this)},set:function(p){return this.copy(p)},setValues:function(p,g,v,f,b,C,_,M,E,A,R,L,Y,F,N,z){var U=this.val;return U[0]=p,U[1]=g,U[2]=v,U[3]=f,U[4]=b,U[5]=C,U[6]=_,U[7]=M,U[8]=E,U[9]=A,U[10]=R,U[11]=L,U[12]=Y,U[13]=F,U[14]=N,U[15]=z,this},copy:function(p){var g=p.val;return this.setValues(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15])},fromArray:function(p){return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(p,g,v){var f=o.fromQuat(v),b=f.val,C=g.x,_=g.y,M=g.z;return this.setValues(b[0]*C,b[1]*C,b[2]*C,0,b[4]*_,b[5]*_,b[6]*_,0,b[8]*M,b[9]*M,b[10]*M,0,p.x,p.y,p.z,1)},xyz:function(p,g,v){this.identity();var f=this.val;return f[12]=p,f[13]=g,f[14]=v,this},scaling:function(p,g,v){this.zero();var f=this.val;return f[0]=p,f[5]=g,f[10]=v,f[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var p=this.val,g=p[1],v=p[2],f=p[3],b=p[6],C=p[7],_=p[11];return p[1]=p[4],p[2]=p[8],p[3]=p[12],p[4]=g,p[6]=p[9],p[7]=p[13],p[8]=v,p[9]=b,p[11]=p[14],p[12]=f,p[13]=C,p[14]=_,this},getInverse:function(p){return this.copy(p),this.invert()},invert:function(){var p=this.val,g=p[0],v=p[1],f=p[2],b=p[3],C=p[4],_=p[5],M=p[6],E=p[7],A=p[8],R=p[9],L=p[10],Y=p[11],F=p[12],N=p[13],z=p[14],U=p[15],q=g*_-v*C,Q=g*M-f*C,K=g*E-b*C,et=v*M-f*_,H=v*E-b*_,J=f*E-b*M,X=A*N-R*F,Z=A*z-L*F,$=A*U-Y*F,it=R*z-L*N,nt=R*U-Y*N,at=L*U-Y*z,ht=q*at-Q*nt+K*it+et*$-H*Z+J*X;return ht?(ht=1/ht,this.setValues((_*at-M*nt+E*it)*ht,(f*nt-v*at-b*it)*ht,(N*J-z*H+U*et)*ht,(L*H-R*J-Y*et)*ht,(M*$-C*at-E*Z)*ht,(g*at-f*$+b*Z)*ht,(z*K-F*J-U*Q)*ht,(A*J-L*K+Y*Q)*ht,(C*nt-_*$+E*X)*ht,(v*$-g*nt-b*X)*ht,(F*H-N*K+U*q)*ht,(R*K-A*H-Y*q)*ht,(_*Z-C*it-M*X)*ht,(g*it-v*Z+f*X)*ht,(N*Q-F*et-z*q)*ht,(A*et-R*Q+L*q)*ht)):this},adjoint:function(){var p=this.val,g=p[0],v=p[1],f=p[2],b=p[3],C=p[4],_=p[5],M=p[6],E=p[7],A=p[8],R=p[9],L=p[10],Y=p[11],F=p[12],N=p[13],z=p[14],U=p[15];return this.setValues(_*(L*U-Y*z)-R*(M*U-E*z)+N*(M*Y-E*L),-(v*(L*U-Y*z)-R*(f*U-b*z)+N*(f*Y-b*L)),v*(M*U-E*z)-_*(f*U-b*z)+N*(f*E-b*M),-(v*(M*Y-E*L)-_*(f*Y-b*L)+R*(f*E-b*M)),-(C*(L*U-Y*z)-A*(M*U-E*z)+F*(M*Y-E*L)),g*(L*U-Y*z)-A*(f*U-b*z)+F*(f*Y-b*L),-(g*(M*U-E*z)-C*(f*U-b*z)+F*(f*E-b*M)),g*(M*Y-E*L)-C*(f*Y-b*L)+A*(f*E-b*M),C*(R*U-Y*N)-A*(_*U-E*N)+F*(_*Y-E*R),-(g*(R*U-Y*N)-A*(v*U-b*N)+F*(v*Y-b*R)),g*(_*U-E*N)-C*(v*U-b*N)+F*(v*E-b*_),-(g*(_*Y-E*R)-C*(v*Y-b*R)+A*(v*E-b*_)),-(C*(R*z-L*N)-A*(_*z-M*N)+F*(_*L-M*R)),g*(R*z-L*N)-A*(v*z-f*N)+F*(v*L-f*R),-(g*(_*z-M*N)-C*(v*z-f*N)+F*(v*M-f*_)),g*(_*L-M*R)-C*(v*L-f*R)+A*(v*M-f*_))},determinant:function(){var p=this.val,g=p[0],v=p[1],f=p[2],b=p[3],C=p[4],_=p[5],M=p[6],E=p[7],A=p[8],R=p[9],L=p[10],Y=p[11],F=p[12],N=p[13],z=p[14],U=p[15],q=g*_-v*C,Q=g*M-f*C,K=g*E-b*C,et=v*M-f*_,H=v*E-b*_,J=f*E-b*M,X=A*N-R*F,Z=A*z-L*F,$=A*U-Y*F,it=R*z-L*N,nt=R*U-Y*N,at=L*U-Y*z;return q*at-Q*nt+K*it+et*$-H*Z+J*X},multiply:function(p){var g=this.val,v=g[0],f=g[1],b=g[2],C=g[3],_=g[4],M=g[5],E=g[6],A=g[7],R=g[8],L=g[9],Y=g[10],F=g[11],N=g[12],z=g[13],U=g[14],q=g[15],Q=p.val,K=Q[0],et=Q[1],H=Q[2],J=Q[3];return g[0]=K*v+et*_+H*R+J*N,g[1]=K*f+et*M+H*L+J*z,g[2]=K*b+et*E+H*Y+J*U,g[3]=K*C+et*A+H*F+J*q,K=Q[4],et=Q[5],H=Q[6],J=Q[7],g[4]=K*v+et*_+H*R+J*N,g[5]=K*f+et*M+H*L+J*z,g[6]=K*b+et*E+H*Y+J*U,g[7]=K*C+et*A+H*F+J*q,K=Q[8],et=Q[9],H=Q[10],J=Q[11],g[8]=K*v+et*_+H*R+J*N,g[9]=K*f+et*M+H*L+J*z,g[10]=K*b+et*E+H*Y+J*U,g[11]=K*C+et*A+H*F+J*q,K=Q[12],et=Q[13],H=Q[14],J=Q[15],g[12]=K*v+et*_+H*R+J*N,g[13]=K*f+et*M+H*L+J*z,g[14]=K*b+et*E+H*Y+J*U,g[15]=K*C+et*A+H*F+J*q,this},multiplyLocal:function(p){var g=this.val,v=p.val;return this.setValues(g[0]*v[0]+g[1]*v[4]+g[2]*v[8]+g[3]*v[12],g[0]*v[1]+g[1]*v[5]+g[2]*v[9]+g[3]*v[13],g[0]*v[2]+g[1]*v[6]+g[2]*v[10]+g[3]*v[14],g[0]*v[3]+g[1]*v[7]+g[2]*v[11]+g[3]*v[15],g[4]*v[0]+g[5]*v[4]+g[6]*v[8]+g[7]*v[12],g[4]*v[1]+g[5]*v[5]+g[6]*v[9]+g[7]*v[13],g[4]*v[2]+g[5]*v[6]+g[6]*v[10]+g[7]*v[14],g[4]*v[3]+g[5]*v[7]+g[6]*v[11]+g[7]*v[15],g[8]*v[0]+g[9]*v[4]+g[10]*v[8]+g[11]*v[12],g[8]*v[1]+g[9]*v[5]+g[10]*v[9]+g[11]*v[13],g[8]*v[2]+g[9]*v[6]+g[10]*v[10]+g[11]*v[14],g[8]*v[3]+g[9]*v[7]+g[10]*v[11]+g[11]*v[15],g[12]*v[0]+g[13]*v[4]+g[14]*v[8]+g[15]*v[12],g[12]*v[1]+g[13]*v[5]+g[14]*v[9]+g[15]*v[13],g[12]*v[2]+g[13]*v[6]+g[14]*v[10]+g[15]*v[14],g[12]*v[3]+g[13]*v[7]+g[14]*v[11]+g[15]*v[15])},premultiply:function(p){return this.multiplyMatrices(p,this)},multiplyMatrices:function(p,g){var v=p.val,f=g.val,b=v[0],C=v[4],_=v[8],M=v[12],E=v[1],A=v[5],R=v[9],L=v[13],Y=v[2],F=v[6],N=v[10],z=v[14],U=v[3],q=v[7],Q=v[11],K=v[15],et=f[0],H=f[4],J=f[8],X=f[12],Z=f[1],$=f[5],it=f[9],nt=f[13],at=f[2],ht=f[6],dt=f[10],vt=f[14],ft=f[3],gt=f[7],wt=f[11],bt=f[15];return this.setValues(b*et+C*Z+_*at+M*ft,E*et+A*Z+R*at+L*ft,Y*et+F*Z+N*at+z*ft,U*et+q*Z+Q*at+K*ft,b*H+C*$+_*ht+M*gt,E*H+A*$+R*ht+L*gt,Y*H+F*$+N*ht+z*gt,U*H+q*$+Q*ht+K*gt,b*J+C*it+_*dt+M*wt,E*J+A*it+R*dt+L*wt,Y*J+F*it+N*dt+z*wt,U*J+q*it+Q*dt+K*wt,b*X+C*nt+_*vt+M*bt,E*X+A*nt+R*vt+L*bt,Y*X+F*nt+N*vt+z*bt,U*X+q*nt+Q*vt+K*bt)},translate:function(p){return this.translateXYZ(p.x,p.y,p.z)},translateXYZ:function(p,g,v){var f=this.val;return f[12]=f[0]*p+f[4]*g+f[8]*v+f[12],f[13]=f[1]*p+f[5]*g+f[9]*v+f[13],f[14]=f[2]*p+f[6]*g+f[10]*v+f[14],f[15]=f[3]*p+f[7]*g+f[11]*v+f[15],this},scale:function(p){return this.scaleXYZ(p.x,p.y,p.z)},scaleXYZ:function(p,g,v){var f=this.val;return f[0]=f[0]*p,f[1]=f[1]*p,f[2]=f[2]*p,f[3]=f[3]*p,f[4]=f[4]*g,f[5]=f[5]*g,f[6]=f[6]*g,f[7]=f[7]*g,f[8]=f[8]*v,f[9]=f[9]*v,f[10]=f[10]*v,f[11]=f[11]*v,this},makeRotationAxis:function(p,g){var v=Math.cos(g),f=Math.sin(g),b=1-v,C=p.x,_=p.y,M=p.z,E=b*C,A=b*_;return this.setValues(E*C+v,E*_-f*M,E*M+f*_,0,E*_+f*M,A*_+v,A*M-f*C,0,E*M-f*_,A*M+f*C,b*M*M+v,0,0,0,0,1)},rotate:function(p,g){var v=this.val,f=g.x,b=g.y,C=g.z,_=Math.sqrt(f*f+b*b+C*C);if(Math.abs(_)<c)return this;_=1/_,f*=_,b*=_,C*=_;var M=Math.sin(p),E=Math.cos(p),A=1-E,R=v[0],L=v[1],Y=v[2],F=v[3],N=v[4],z=v[5],U=v[6],q=v[7],Q=v[8],K=v[9],et=v[10],H=v[11],J=v[12],X=v[13],Z=v[14],$=v[15],it=f*f*A+E,nt=b*f*A+C*M,at=C*f*A-b*M,ht=f*b*A-C*M,dt=b*b*A+E,vt=C*b*A+f*M,ft=f*C*A+b*M,gt=b*C*A-f*M,wt=C*C*A+E;return this.setValues(R*it+N*nt+Q*at,L*it+z*nt+K*at,Y*it+U*nt+et*at,F*it+q*nt+H*at,R*ht+N*dt+Q*vt,L*ht+z*dt+K*vt,Y*ht+U*dt+et*vt,F*ht+q*dt+H*vt,R*ft+N*gt+Q*wt,L*ft+z*gt+K*wt,Y*ft+U*gt+et*wt,F*ft+q*gt+H*wt,J,X,Z,$)},rotateX:function(p){var g=this.val,v=Math.sin(p),f=Math.cos(p),b=g[4],C=g[5],_=g[6],M=g[7],E=g[8],A=g[9],R=g[10],L=g[11];return g[4]=b*f+E*v,g[5]=C*f+A*v,g[6]=_*f+R*v,g[7]=M*f+L*v,g[8]=E*f-b*v,g[9]=A*f-C*v,g[10]=R*f-_*v,g[11]=L*f-M*v,this},rotateY:function(p){var g=this.val,v=Math.sin(p),f=Math.cos(p),b=g[0],C=g[1],_=g[2],M=g[3],E=g[8],A=g[9],R=g[10],L=g[11];return g[0]=b*f-E*v,g[1]=C*f-A*v,g[2]=_*f-R*v,g[3]=M*f-L*v,g[8]=b*v+E*f,g[9]=C*v+A*f,g[10]=_*v+R*f,g[11]=M*v+L*f,this},rotateZ:function(p){var g=this.val,v=Math.sin(p),f=Math.cos(p),b=g[0],C=g[1],_=g[2],M=g[3],E=g[4],A=g[5],R=g[6],L=g[7];return g[0]=b*f+E*v,g[1]=C*f+A*v,g[2]=_*f+R*v,g[3]=M*f+L*v,g[4]=E*f-b*v,g[5]=A*f-C*v,g[6]=R*f-_*v,g[7]=L*f-M*v,this},fromRotationTranslation:function(p,g){var v=p.x,f=p.y,b=p.z,C=p.w,_=v+v,M=f+f,E=b+b,A=v*_,R=v*M,L=v*E,Y=f*M,F=f*E,N=b*E,z=C*_,U=C*M,q=C*E;return this.setValues(1-(Y+N),R+q,L-U,0,R-q,1-(A+N),F+z,0,L+U,F-z,1-(A+Y),0,g.x,g.y,g.z,1)},fromQuat:function(p){var g=p.x,v=p.y,f=p.z,b=p.w,C=g+g,_=v+v,M=f+f,E=g*C,A=g*_,R=g*M,L=v*_,Y=v*M,F=f*M,N=b*C,z=b*_,U=b*M;return this.setValues(1-(L+F),A+U,R-z,0,A-U,1-(E+F),Y+N,0,R+z,Y-N,1-(E+L),0,0,0,0,1)},frustum:function(p,g,v,f,b,C){var _=1/(g-p),M=1/(f-v),E=1/(b-C);return this.setValues(b*2*_,0,0,0,0,b*2*M,0,0,(g+p)*_,(f+v)*M,(C+b)*E,-1,0,0,C*b*2*E,0)},perspective:function(p,g,v,f){var b=1/Math.tan(p/2),C=1/(v-f);return this.setValues(b/g,0,0,0,0,b,0,0,0,0,(f+v)*C,-1,0,0,2*f*v*C,0)},perspectiveLH:function(p,g,v,f){return this.setValues(2*v/p,0,0,0,0,2*v/g,0,0,0,0,-f/(v-f),1,0,0,v*f/(v-f),0)},ortho:function(p,g,v,f,b,C){var _=p-g,M=v-f,E=b-C;return _=_===0?_:1/_,M=M===0?M:1/M,E=E===0?E:1/E,this.setValues(-2*_,0,0,0,0,-2*M,0,0,0,0,2*E,0,(p+g)*_,(f+v)*M,(C+b)*E,1)},lookAtRH:function(p,g,v){var f=this.val;return n.subVectors(p,g),n.lengthSq()===0&&(n.z=1),n.normalize(),a.crossVectors(v,n),a.lengthSq()===0&&(Math.abs(v.z)===1?n.x+=1e-4:n.z+=1e-4,n.normalize(),a.crossVectors(v,n)),a.normalize(),d.crossVectors(n,a),f[0]=a.x,f[1]=a.y,f[2]=a.z,f[4]=d.x,f[5]=d.y,f[6]=d.z,f[8]=n.x,f[9]=n.y,f[10]=n.z,this},lookAt:function(p,g,v){var f=p.x,b=p.y,C=p.z,_=v.x,M=v.y,E=v.z,A=g.x,R=g.y,L=g.z;if(Math.abs(f-A)<c&&Math.abs(b-R)<c&&Math.abs(C-L)<c)return this.identity();var Y=f-A,F=b-R,N=C-L,z=1/Math.sqrt(Y*Y+F*F+N*N);Y*=z,F*=z,N*=z;var U=M*N-E*F,q=E*Y-_*N,Q=_*F-M*Y;z=Math.sqrt(U*U+q*q+Q*Q),z?(z=1/z,U*=z,q*=z,Q*=z):(U=0,q=0,Q=0);var K=F*Q-N*q,et=N*U-Y*Q,H=Y*q-F*U;return z=Math.sqrt(K*K+et*et+H*H),z?(z=1/z,K*=z,et*=z,H*=z):(K=0,et=0,H=0),this.setValues(U,K,Y,0,q,et,F,0,Q,H,N,0,-(U*f+q*b+Q*C),-(K*f+et*b+H*C),-(Y*f+F*b+N*C),1)},yawPitchRoll:function(p,g,v){this.zero(),o.zero(),r.zero();var f=this.val,b=o.val,C=r.val,_=Math.sin(v),M=Math.cos(v);return f[10]=1,f[15]=1,f[0]=M,f[1]=_,f[4]=-_,f[5]=M,_=Math.sin(g),M=Math.cos(g),b[0]=1,b[15]=1,b[5]=M,b[10]=M,b[9]=-_,b[6]=_,_=Math.sin(p),M=Math.cos(p),C[5]=1,C[15]=1,C[0]=M,C[2]=-_,C[8]=_,C[10]=M,this.multiplyLocal(o),this.multiplyLocal(r),this},setWorldMatrix:function(p,g,v,f,b){return this.yawPitchRoll(p.y,p.x,p.z),o.scaling(v.x,v.y,v.z),r.xyz(g.x,g.y,g.z),this.multiplyLocal(o),this.multiplyLocal(r),f&&this.multiplyLocal(f),b&&this.multiplyLocal(b),this},multiplyToMat4:function(p,g){var v=this.val,f=p.val,b=v[0],C=v[1],_=v[2],M=v[3],E=v[4],A=v[5],R=v[6],L=v[7],Y=v[8],F=v[9],N=v[10],z=v[11],U=v[12],q=v[13],Q=v[14],K=v[15],et=f[0],H=f[1],J=f[2],X=f[3],Z=f[4],$=f[5],it=f[6],nt=f[7],at=f[8],ht=f[9],dt=f[10],vt=f[11],ft=f[12],gt=f[13],wt=f[14],bt=f[15];return g.setValues(et*b+H*E+J*Y+X*U,H*C+H*A+J*F+X*q,J*_+H*R+J*N+X*Q,X*M+H*L+J*z+X*K,Z*b+$*E+it*Y+nt*U,Z*C+$*A+it*F+nt*q,Z*_+$*R+it*N+nt*Q,Z*M+$*L+it*z+nt*K,at*b+ht*E+dt*Y+vt*U,at*C+ht*A+dt*F+vt*q,at*_+ht*R+dt*N+vt*Q,at*M+ht*L+dt*z+vt*K,ft*b+gt*E+wt*Y+bt*U,ft*C+gt*A+wt*F+bt*q,ft*_+gt*R+wt*N+bt*Q,ft*M+gt*L+wt*z+bt*K)},fromRotationXYTranslation:function(p,g,v){var f=g.x,b=g.y,C=g.z,_=Math.sin(p.x),M=Math.cos(p.x),E=Math.sin(p.y),A=Math.cos(p.y),R=f,L=b,Y=C,F=-_,N=0-F*E,z=0-M*E,U=F*A,q=M*A;return v||(R=A*f+E*C,L=N*f+M*b+U*C,Y=z*f+_*b+q*C),this.setValues(A,N,z,0,0,M,_,0,E,U,q,0,R,L,Y,1)},getMaxScaleOnAxis:function(){var p=this.val,g=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],v=p[4]*p[4]+p[5]*p[5]+p[6]*p[6],f=p[8]*p[8]+p[9]*p[9]+p[10]*p[10];return Math.sqrt(Math.max(g,v,f))}}),o=new h,r=new h,a=new x,d=new x,n=new x;y.exports=h},86883:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return Math.min(i+u,x)};y.exports=P},50040:y=>{/**
* @author       Vladislav Forsh <vlad@robowhale.com>
* @copyright    2021 RoboWhale
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u=i.length;if(u===0)return 0;i.sort(function(c,h){return c-h});var x=Math.floor(u/2);return u%2===0?(i[x]+i[x-1])/2:i[x]};y.exports=P},37204:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return Math.max(i-u,x)};y.exports=P},65201:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){x===void 0&&(x=u+1);var h=(i-u)/(x-u);return h>1?c!==void 0?(h=(c-i)/(c-x),h<0&&(h=0)):h=1:h<0&&(h=0),h};y.exports=P},15746:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(94434),c=i(29747),h=i(25836),o=1e-6,r=new Int8Array([1,2,0]),a=new Float32Array([0,0,0]),d=new h(1,0,0),n=new h(0,1,0),p=new h,g=new x,v=new u({initialize:function(f,b,C,_){this.onChangeCallback=c,this.set(f,b,C,_)},x:{get:function(){return this._x},set:function(f){this._x=f,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(f){this._y=f,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(f){this._z=f,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(f){this._w=f,this.onChangeCallback(this)}},copy:function(f){return this.set(f)},set:function(f,b,C,_,M){return M===void 0&&(M=!0),typeof f=="object"?(this._x=f.x||0,this._y=f.y||0,this._z=f.z||0,this._w=f.w||0):(this._x=f||0,this._y=b||0,this._z=C||0,this._w=_||0),M&&this.onChangeCallback(this),this},add:function(f){return this._x+=f.x,this._y+=f.y,this._z+=f.z,this._w+=f.w,this.onChangeCallback(this),this},subtract:function(f){return this._x-=f.x,this._y-=f.y,this._z-=f.z,this._w-=f.w,this.onChangeCallback(this),this},scale:function(f){return this._x*=f,this._y*=f,this._z*=f,this._w*=f,this.onChangeCallback(this),this},length:function(){var f=this.x,b=this.y,C=this.z,_=this.w;return Math.sqrt(f*f+b*b+C*C+_*_)},lengthSq:function(){var f=this.x,b=this.y,C=this.z,_=this.w;return f*f+b*b+C*C+_*_},normalize:function(){var f=this.x,b=this.y,C=this.z,_=this.w,M=f*f+b*b+C*C+_*_;return M>0&&(M=1/Math.sqrt(M),this._x=f*M,this._y=b*M,this._z=C*M,this._w=_*M),this.onChangeCallback(this),this},dot:function(f){return this.x*f.x+this.y*f.y+this.z*f.z+this.w*f.w},lerp:function(f,b){b===void 0&&(b=0);var C=this.x,_=this.y,M=this.z,E=this.w;return this.set(C+b*(f.x-C),_+b*(f.y-_),M+b*(f.z-M),E+b*(f.w-E))},rotationTo:function(f,b){var C=f.x*b.x+f.y*b.y+f.z*b.z;return C<-.999999?(p.copy(d).cross(f).length()<o&&p.copy(n).cross(f),p.normalize(),this.setAxisAngle(p,Math.PI)):C>.999999?this.set(0,0,0,1):(p.copy(f).cross(b),this._x=p.x,this._y=p.y,this._z=p.z,this._w=1+C,this.normalize())},setAxes:function(f,b,C){var _=g.val;return _[0]=b.x,_[3]=b.y,_[6]=b.z,_[1]=C.x,_[4]=C.y,_[7]=C.z,_[2]=-f.x,_[5]=-f.y,_[8]=-f.z,this.fromMat3(g).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(f,b){b=b*.5;var C=Math.sin(b);return this.set(C*f.x,C*f.y,C*f.z,Math.cos(b))},multiply:function(f){var b=this.x,C=this.y,_=this.z,M=this.w,E=f.x,A=f.y,R=f.z,L=f.w;return this.set(b*L+M*E+C*R-_*A,C*L+M*A+_*E-b*R,_*L+M*R+b*A-C*E,M*L-b*E-C*A-_*R)},slerp:function(f,b){var C=this.x,_=this.y,M=this.z,E=this.w,A=f.x,R=f.y,L=f.z,Y=f.w,F=C*A+_*R+M*L+E*Y;F<0&&(F=-F,A=-A,R=-R,L=-L,Y=-Y);var N=1-b,z=b;if(1-F>o){var U=Math.acos(F),q=Math.sin(U);N=Math.sin((1-b)*U)/q,z=Math.sin(b*U)/q}return this.set(N*C+z*A,N*_+z*R,N*M+z*L,N*E+z*Y)},invert:function(){var f=this.x,b=this.y,C=this.z,_=this.w,M=f*f+b*b+C*C+_*_,E=M?1/M:0;return this.set(-f*E,-b*E,-C*E,_*E)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(f){f*=.5;var b=this.x,C=this.y,_=this.z,M=this.w,E=Math.sin(f),A=Math.cos(f);return this.set(b*A+M*E,C*A+_*E,_*A-C*E,M*A-b*E)},rotateY:function(f){f*=.5;var b=this.x,C=this.y,_=this.z,M=this.w,E=Math.sin(f),A=Math.cos(f);return this.set(b*A-_*E,C*A+M*E,_*A+b*E,M*A-C*E)},rotateZ:function(f){f*=.5;var b=this.x,C=this.y,_=this.z,M=this.w,E=Math.sin(f),A=Math.cos(f);return this.set(b*A+C*E,C*A-b*E,_*A+M*E,M*A-_*E)},calculateW:function(){var f=this.x,b=this.y,C=this.z;return this.w=-Math.sqrt(1-f*f-b*b-C*C),this},setFromEuler:function(f,b){var C=f.x/2,_=f.y/2,M=f.z/2,E=Math.cos(C),A=Math.cos(_),R=Math.cos(M),L=Math.sin(C),Y=Math.sin(_),F=Math.sin(M);switch(f.order){case"XYZ":{this.set(L*A*R+E*Y*F,E*Y*R-L*A*F,E*A*F+L*Y*R,E*A*R-L*Y*F,b);break}case"YXZ":{this.set(L*A*R+E*Y*F,E*Y*R-L*A*F,E*A*F-L*Y*R,E*A*R+L*Y*F,b);break}case"ZXY":{this.set(L*A*R-E*Y*F,E*Y*R+L*A*F,E*A*F+L*Y*R,E*A*R-L*Y*F,b);break}case"ZYX":{this.set(L*A*R-E*Y*F,E*Y*R+L*A*F,E*A*F-L*Y*R,E*A*R+L*Y*F,b);break}case"YZX":{this.set(L*A*R+E*Y*F,E*Y*R+L*A*F,E*A*F-L*Y*R,E*A*R-L*Y*F,b);break}case"XZY":{this.set(L*A*R-E*Y*F,E*Y*R-L*A*F,E*A*F+L*Y*R,E*A*R+L*Y*F,b);break}}return this},setFromRotationMatrix:function(f){var b=f.val,C=b[0],_=b[4],M=b[8],E=b[1],A=b[5],R=b[9],L=b[2],Y=b[6],F=b[10],N=C+A+F,z;return N>0?(z=.5/Math.sqrt(N+1),this.set((Y-R)*z,(M-L)*z,(E-_)*z,.25/z)):C>A&&C>F?(z=2*Math.sqrt(1+C-A-F),this.set(.25*z,(_+E)/z,(M+L)/z,(Y-R)/z)):A>F?(z=2*Math.sqrt(1+A-C-F),this.set((_+E)/z,.25*z,(R+Y)/z,(M-L)/z)):(z=2*Math.sqrt(1+F-C-A),this.set((M+L)/z,(R+Y)/z,.25*z,(E-_)/z)),this},fromMat3:function(f){var b=f.val,C=b[0]+b[4]+b[8],_;if(C>0)_=Math.sqrt(C+1),this.w=.5*_,_=.5/_,this._x=(b[7]-b[5])*_,this._y=(b[2]-b[6])*_,this._z=(b[3]-b[1])*_;else{var M=0;b[4]>b[0]&&(M=1),b[8]>b[M*3+M]&&(M=2);var E=r[M],A=r[E];_=Math.sqrt(b[M*3+M]-b[E*3+E]-b[A*3+A]+1),a[M]=.5*_,_=.5/_,a[E]=(b[E*3+M]+b[M*3+E])*_,a[A]=(b[A*3+M]+b[M*3+A])*_,this._x=a[0],this._y=a[1],this._z=a[2],this._w=(b[A*3+E]-b[E*3+A])*_}return this.onChangeCallback(this),this}});y.exports=v},43396:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(36383),x=function(c){return c*u.RAD_TO_DEG};y.exports=x},74362:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){u===void 0&&(u=1);var x=Math.random()*2*Math.PI;return i.x=Math.cos(x)*u,i.y=Math.sin(x)*u,i};y.exports=P},60706:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){u===void 0&&(u=1);var x=Math.random()*2*Math.PI,c=Math.random()*2-1,h=Math.sqrt(1-c*c)*u;return i.x=Math.cos(x)*h,i.y=Math.sin(x)*h,i.z=c*u,i};y.exports=P},67421:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u===void 0&&(u=1),i.x=(Math.random()*2-1)*u,i.y=(Math.random()*2-1)*u,i.z=(Math.random()*2-1)*u,i.w=(Math.random()*2-1)*u,i};y.exports=P},36305:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=i.x,c=i.y;return i.x=x*Math.cos(u)-c*Math.sin(u),i.y=x*Math.sin(u)+c*Math.cos(u),i};y.exports=P},11520:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){var h=Math.cos(c),o=Math.sin(c),r=i.x-u,a=i.y-x;return i.x=r*h-a*o+u,i.y=r*o+a*h+x,i};y.exports=P},1163:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h){var o=c+Math.atan2(i.y-x,i.x-u);return i.x=u+h*Math.cos(o),i.y=x+h*Math.sin(o),i};y.exports=P},70336:y=>{/**
* @author       samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h){return i.x=u+h*Math.cos(c),i.y=x+h*Math.sin(c),i};y.exports=P},72678:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(25836),x=i(37867),c=i(15746),h=new x,o=new c,r=new u,a=function(d,n,p){return o.setAxisAngle(n,p),h.fromRotationTranslation(o,r.set(0,0,0)),d.transformMat4(h)};y.exports=a},2284:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i>0?Math.ceil(i):Math.floor(i)};y.exports=P},41013:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){u===void 0&&(u=0),x===void 0&&(x=10);var c=Math.pow(x,-u);return Math.round(i*c)/c};y.exports=P},16922:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){u===void 0&&(u=1),x===void 0&&(x=1),c===void 0&&(c=1),c*=Math.PI/i;for(var h=[],o=[],r=0;r<i;r++)x-=u*c,u+=x*c,h[r]=x,o[r]=u;return{sin:o,cos:h,length:i}};y.exports=P},7602:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return i<=u?0:i>=x?1:(i=(i-u)/(x-u),i*i*(3-2*i))};y.exports=P},54261:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return i=Math.max(0,Math.min(1,(i-u)/(x-u))),i*i*i*(i*(i*6-15)+10)};y.exports=P},44408:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26099),x=function(c,h,o,r){r===void 0&&(r=new u);var a=0,d=0,n=h*o;return c>0&&c<=n&&(c>h-1?(d=Math.floor(c/h),a=c-d*h):a=c),r.set(a,d)};y.exports=x},85955:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26099),x=function(c,h,o,r,a,d,n,p){p===void 0&&(p=new u);var g=Math.sin(a),v=Math.cos(a),f=v*d,b=g*d,C=-g*n,_=v*n,M=1/(f*_+C*-b);return p.x=_*M*c+-C*M*h+(r*C-o*_)*M,p.y=f*M*h+-b*M*c+(-r*f+o*b)*M,p};y.exports=x},26099:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(43855),c=new u({initialize:function(h,o){this.x=0,this.y=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0):(o===void 0&&(o=h),this.x=h||0,this.y=o||0)},clone:function(){return new c(this.x,this.y)},copy:function(h){return this.x=h.x||0,this.y=h.y||0,this},setFromObject:function(h){return this.x=h.x||0,this.y=h.y||0,this},set:function(h,o){return o===void 0&&(o=h),this.x=h,this.y=o,this},setTo:function(h,o){return this.set(h,o)},setToPolar:function(h,o){return o==null&&(o=1),this.x=Math.cos(h)*o,this.y=Math.sin(h)*o,this},equals:function(h){return this.x===h.x&&this.y===h.y},fuzzyEquals:function(h,o){return x(this.x,h.x,o)&&x(this.y,h.y,o)},angle:function(){var h=Math.atan2(this.y,this.x);return h<0&&(h+=2*Math.PI),h},setAngle:function(h){return this.setToPolar(h,this.length())},add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this},multiply:function(h){return this.x*=h.x,this.y*=h.y,this},scale:function(h){return isFinite(h)?(this.x*=h,this.y*=h):(this.x=0,this.y=0),this},divide:function(h){return this.x/=h.x,this.y/=h.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(h){var o=h.x-this.x,r=h.y-this.y;return Math.sqrt(o*o+r*r)},distanceSq:function(h){var o=h.x-this.x,r=h.y-this.y;return o*o+r*r},length:function(){var h=this.x,o=this.y;return Math.sqrt(h*h+o*o)},setLength:function(h){return this.normalize().scale(h)},lengthSq:function(){var h=this.x,o=this.y;return h*h+o*o},normalize:function(){var h=this.x,o=this.y,r=h*h+o*o;return r>0&&(r=1/Math.sqrt(r),this.x=h*r,this.y=o*r),this},normalizeRightHand:function(){var h=this.x;return this.x=this.y*-1,this.y=h,this},normalizeLeftHand:function(){var h=this.x;return this.x=this.y,this.y=h*-1,this},dot:function(h){return this.x*h.x+this.y*h.y},cross:function(h){return this.x*h.y-this.y*h.x},lerp:function(h,o){o===void 0&&(o=0);var r=this.x,a=this.y;return this.x=r+o*(h.x-r),this.y=a+o*(h.y-a),this},transformMat3:function(h){var o=this.x,r=this.y,a=h.val;return this.x=a[0]*o+a[3]*r+a[6],this.y=a[1]*o+a[4]*r+a[7],this},transformMat4:function(h){var o=this.x,r=this.y,a=h.val;return this.x=a[0]*o+a[4]*r+a[12],this.y=a[1]*o+a[5]*r+a[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(h){var o=this.length();return o&&o>h&&this.scale(h/o),this},reflect:function(h){return h=h.clone().normalize(),this.subtract(h.scale(2*this.dot(h)))},mirror:function(h){return this.reflect(h).negate()},rotate:function(h){var o=Math.cos(h),r=Math.sin(h);return this.set(o*this.x-r*this.y,r*this.x+o*this.y)},project:function(h){var o=this.dot(h)/h.dot(h);return this.copy(h).scale(o)}});c.ZERO=new c,c.RIGHT=new c(1,0),c.LEFT=new c(-1,0),c.UP=new c(0,-1),c.DOWN=new c(0,1),c.ONE=new c(1,1),y.exports=c},25836:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h,o){this.x=0,this.y=0,this.z=0,typeof c=="object"?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0):(this.x=c||0,this.y=h||0,this.z=o||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(c){return this.x=Math.min(this.x,c.x),this.y=Math.min(this.y,c.y),this.z=Math.min(this.z,c.z),this},max:function(c){return this.x=Math.max(this.x,c.x),this.y=Math.max(this.y,c.y),this.z=Math.max(this.z,c.z),this},clone:function(){return new x(this.x,this.y,this.z)},addVectors:function(c,h){return this.x=c.x+h.x,this.y=c.y+h.y,this.z=c.z+h.z,this},subVectors:function(c,h){return this.x=c.x-h.x,this.y=c.y-h.y,this.z=c.z-h.z,this},crossVectors:function(c,h){var o=c.x,r=c.y,a=c.z,d=h.x,n=h.y,p=h.z;return this.x=r*p-a*n,this.y=a*d-o*p,this.z=o*n-r*d,this},equals:function(c){return this.x===c.x&&this.y===c.y&&this.z===c.z},copy:function(c){return this.x=c.x,this.y=c.y,this.z=c.z||0,this},set:function(c,h,o){return typeof c=="object"?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0):(this.x=c||0,this.y=h||0,this.z=o||0),this},setFromMatrixPosition:function(c){return this.fromArray(c.val,12)},setFromMatrixColumn:function(c,h){return this.fromArray(c.val,h*4)},fromArray:function(c,h){return h===void 0&&(h=0),this.x=c[h],this.y=c[h+1],this.z=c[h+2],this},add:function(c){return this.x+=c.x,this.y+=c.y,this.z+=c.z||0,this},addScalar:function(c){return this.x+=c,this.y+=c,this.z+=c,this},addScale:function(c,h){return this.x+=c.x*h,this.y+=c.y*h,this.z+=c.z*h||0,this},subtract:function(c){return this.x-=c.x,this.y-=c.y,this.z-=c.z||0,this},multiply:function(c){return this.x*=c.x,this.y*=c.y,this.z*=c.z||1,this},scale:function(c){return isFinite(c)?(this.x*=c,this.y*=c,this.z*=c):(this.x=0,this.y=0,this.z=0),this},divide:function(c){return this.x/=c.x,this.y/=c.y,this.z/=c.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(c){var h=c.x-this.x,o=c.y-this.y,r=c.z-this.z||0;return Math.sqrt(h*h+o*o+r*r)},distanceSq:function(c){var h=c.x-this.x,o=c.y-this.y,r=c.z-this.z||0;return h*h+o*o+r*r},length:function(){var c=this.x,h=this.y,o=this.z;return Math.sqrt(c*c+h*h+o*o)},lengthSq:function(){var c=this.x,h=this.y,o=this.z;return c*c+h*h+o*o},normalize:function(){var c=this.x,h=this.y,o=this.z,r=c*c+h*h+o*o;return r>0&&(r=1/Math.sqrt(r),this.x=c*r,this.y=h*r,this.z=o*r),this},dot:function(c){return this.x*c.x+this.y*c.y+this.z*c.z},cross:function(c){var h=this.x,o=this.y,r=this.z,a=c.x,d=c.y,n=c.z;return this.x=o*n-r*d,this.y=r*a-h*n,this.z=h*d-o*a,this},lerp:function(c,h){h===void 0&&(h=0);var o=this.x,r=this.y,a=this.z;return this.x=o+h*(c.x-o),this.y=r+h*(c.y-r),this.z=a+h*(c.z-a),this},applyMatrix3:function(c){var h=this.x,o=this.y,r=this.z,a=c.val;return this.x=a[0]*h+a[3]*o+a[6]*r,this.y=a[1]*h+a[4]*o+a[7]*r,this.z=a[2]*h+a[5]*o+a[8]*r,this},applyMatrix4:function(c){var h=this.x,o=this.y,r=this.z,a=c.val,d=1/(a[3]*h+a[7]*o+a[11]*r+a[15]);return this.x=(a[0]*h+a[4]*o+a[8]*r+a[12])*d,this.y=(a[1]*h+a[5]*o+a[9]*r+a[13])*d,this.z=(a[2]*h+a[6]*o+a[10]*r+a[14])*d,this},transformMat3:function(c){var h=this.x,o=this.y,r=this.z,a=c.val;return this.x=h*a[0]+o*a[3]+r*a[6],this.y=h*a[1]+o*a[4]+r*a[7],this.z=h*a[2]+o*a[5]+r*a[8],this},transformMat4:function(c){var h=this.x,o=this.y,r=this.z,a=c.val;return this.x=a[0]*h+a[4]*o+a[8]*r+a[12],this.y=a[1]*h+a[5]*o+a[9]*r+a[13],this.z=a[2]*h+a[6]*o+a[10]*r+a[14],this},transformCoordinates:function(c){var h=this.x,o=this.y,r=this.z,a=c.val,d=h*a[0]+o*a[4]+r*a[8]+a[12],n=h*a[1]+o*a[5]+r*a[9]+a[13],p=h*a[2]+o*a[6]+r*a[10]+a[14],g=h*a[3]+o*a[7]+r*a[11]+a[15];return this.x=d/g,this.y=n/g,this.z=p/g,this},transformQuat:function(c){var h=this.x,o=this.y,r=this.z,a=c.x,d=c.y,n=c.z,p=c.w,g=p*h+d*r-n*o,v=p*o+n*h-a*r,f=p*r+a*o-d*h,b=-a*h-d*o-n*r;return this.x=g*p+b*-a+v*-n-f*-d,this.y=v*p+b*-d+f*-a-g*-n,this.z=f*p+b*-n+g*-d-v*-a,this},project:function(c){var h=this.x,o=this.y,r=this.z,a=c.val,d=a[0],n=a[1],p=a[2],g=a[3],v=a[4],f=a[5],b=a[6],C=a[7],_=a[8],M=a[9],E=a[10],A=a[11],R=a[12],L=a[13],Y=a[14],F=a[15],N=1/(h*g+o*C+r*A+F);return this.x=(h*d+o*v+r*_+R)*N,this.y=(h*n+o*f+r*M+L)*N,this.z=(h*p+o*b+r*E+Y)*N,this},projectViewMatrix:function(c,h){return this.applyMatrix4(c).applyMatrix4(h)},unprojectViewMatrix:function(c,h){return this.applyMatrix4(c).applyMatrix4(h)},unproject:function(c,h){var o=c.x,r=c.y,a=c.z,d=c.w,n=this.x-o,p=d-this.y-1-r,g=this.z;return this.x=2*n/a-1,this.y=2*p/d-1,this.z=2*g-1,this.project(h)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});x.ZERO=new x,x.RIGHT=new x(1,0,0),x.LEFT=new x(-1,0,0),x.UP=new x(0,-1,0),x.DOWN=new x(0,1,0),x.FORWARD=new x(0,0,1),x.BACK=new x(0,0,-1),x.ONE=new x(1,1,1),y.exports=x},61369:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h,o,r){this.x=0,this.y=0,this.z=0,this.w=0,typeof c=="object"?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0,this.w=c.w||0):(this.x=c||0,this.y=h||0,this.z=o||0,this.w=r||0)},clone:function(){return new x(this.x,this.y,this.z,this.w)},copy:function(c){return this.x=c.x,this.y=c.y,this.z=c.z||0,this.w=c.w||0,this},equals:function(c){return this.x===c.x&&this.y===c.y&&this.z===c.z&&this.w===c.w},set:function(c,h,o,r){return typeof c=="object"?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0,this.w=c.w||0):(this.x=c||0,this.y=h||0,this.z=o||0,this.w=r||0),this},add:function(c){return this.x+=c.x,this.y+=c.y,this.z+=c.z||0,this.w+=c.w||0,this},subtract:function(c){return this.x-=c.x,this.y-=c.y,this.z-=c.z||0,this.w-=c.w||0,this},scale:function(c){return this.x*=c,this.y*=c,this.z*=c,this.w*=c,this},length:function(){var c=this.x,h=this.y,o=this.z,r=this.w;return Math.sqrt(c*c+h*h+o*o+r*r)},lengthSq:function(){var c=this.x,h=this.y,o=this.z,r=this.w;return c*c+h*h+o*o+r*r},normalize:function(){var c=this.x,h=this.y,o=this.z,r=this.w,a=c*c+h*h+o*o+r*r;return a>0&&(a=1/Math.sqrt(a),this.x=c*a,this.y=h*a,this.z=o*a,this.w=r*a),this},dot:function(c){return this.x*c.x+this.y*c.y+this.z*c.z+this.w*c.w},lerp:function(c,h){h===void 0&&(h=0);var o=this.x,r=this.y,a=this.z,d=this.w;return this.x=o+h*(c.x-o),this.y=r+h*(c.y-r),this.z=a+h*(c.z-a),this.w=d+h*(c.w-d),this},multiply:function(c){return this.x*=c.x,this.y*=c.y,this.z*=c.z||1,this.w*=c.w||1,this},divide:function(c){return this.x/=c.x,this.y/=c.y,this.z/=c.z||1,this.w/=c.w||1,this},distance:function(c){var h=c.x-this.x,o=c.y-this.y,r=c.z-this.z||0,a=c.w-this.w||0;return Math.sqrt(h*h+o*o+r*r+a*a)},distanceSq:function(c){var h=c.x-this.x,o=c.y-this.y,r=c.z-this.z||0,a=c.w-this.w||0;return h*h+o*o+r*r+a*a},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(c){var h=this.x,o=this.y,r=this.z,a=this.w,d=c.val;return this.x=d[0]*h+d[4]*o+d[8]*r+d[12]*a,this.y=d[1]*h+d[5]*o+d[9]*r+d[13]*a,this.z=d[2]*h+d[6]*o+d[10]*r+d[14]*a,this.w=d[3]*h+d[7]*o+d[11]*r+d[15]*a,this},transformQuat:function(c){var h=this.x,o=this.y,r=this.z,a=c.x,d=c.y,n=c.z,p=c.w,g=p*h+d*r-n*o,v=p*o+n*h-a*r,f=p*r+a*o-d*h,b=-a*h-d*o-n*r;return this.x=g*p+b*-a+v*-n-f*-d,this.y=v*p+b*-d+f*-a-g*-n,this.z=f*p+b*-n+g*-d-v*-a,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});x.prototype.sub=x.prototype.subtract,x.prototype.mul=x.prototype.multiply,x.prototype.div=x.prototype.divide,x.prototype.dist=x.prototype.distance,x.prototype.distSq=x.prototype.distanceSq,x.prototype.len=x.prototype.length,x.prototype.lenSq=x.prototype.lengthSq,y.exports=x},60417:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return Math.abs(i-u)<=x};y.exports=P},15994:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=x-u;return u+((i-u)%c+c)%c};y.exports=P},31040:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){return Math.atan2(c-u,x-i)};y.exports=P},55495:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return Math.atan2(u.y-i.y,u.x-i.x)};y.exports=P},128:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return Math.atan2(u.x-i.x,u.y-i.y)};y.exports=P},41273:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){return Math.atan2(x-i,c-u)};y.exports=P},1432:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(36383),x=function(c){return c>Math.PI&&(c-=u.PI2),Math.abs(((c+u.TAU)%u.PI2-u.PI2)%u.PI2)};y.exports=x},49127:(y,P,i)=>{/**
* @author       samme
* @copyright    2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(12407),x=function(c,h){return u(h-c)};y.exports=x},52285:(y,P,i)=>{/**
* @author       samme
* @copyright    2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(12407),x=2*Math.PI,c=function(h,o){var r=u(o-h);return r>0&&(r-=x),r};y.exports=c},67317:(y,P,i)=>{/**
* @author       samme
* @copyright    2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(86554),x=function(c,h){return u(h-c)};y.exports=x},12407:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i=i%(2*Math.PI),i>=0?i:i+2*Math.PI};y.exports=P},53993:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       @samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(99472),x=function(){return u(-Math.PI,Math.PI)};y.exports=x},86564:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       @samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(99472),x=function(){return u(-180,180)};y.exports=x},90154:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(12407),x=function(c){return u(c+Math.PI)};y.exports=x},48736:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(36383),x=function(c,h,o){return o===void 0&&(o=.05),c===h||(Math.abs(h-c)<=o||Math.abs(h-c)>=u.PI2-o?c=h:(Math.abs(h-c)>Math.PI&&(h<c?h+=u.PI2:h-=u.PI2),h>c?c+=o:h<c&&(c-=o))),c};y.exports=x},61430:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=u-i;if(x===0)return 0;var c=Math.floor((x- -180)/360);return x-c*360};y.exports=P},86554:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(15994),x=function(c){return u(c,-Math.PI,Math.PI)};y.exports=x},30954:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(15994),x=function(c){return u(c,-180,180)};y.exports=x},25588:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Between:i(31040),BetweenPoints:i(55495),BetweenPointsY:i(128),BetweenY:i(41273),CounterClockwise:i(1432),GetClockwiseDistance:i(49127),GetCounterClockwiseDistance:i(52285),GetShortestDistance:i(67317),Normalize:i(12407),Random:i(53993),RandomDegrees:i(86564),Reverse:i(90154),RotateTo:i(48736),ShortestBetween:i(61430),Wrap:i(86554),WrapDegrees:i(30954)}},36383:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};y.exports=P},20339:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){var h=i-x,o=u-c;return Math.sqrt(h*h+o*o)};y.exports=P},52816:y=>{/**
* @author       samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=i.x-u.x,c=i.y-u.y;return Math.sqrt(x*x+c*c)};y.exports=P},64559:y=>{/**
* @author       samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=i.x-u.x,c=i.y-u.y;return x*x+c*c};y.exports=P},82340:y=>{/**
* @author       samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){return Math.max(Math.abs(i-x),Math.abs(u-c))};y.exports=P},14390:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h){return h===void 0&&(h=2),Math.sqrt(Math.pow(x-i,h)+Math.pow(c-u,h))};y.exports=P},2243:y=>{/**
* @author       samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){return Math.abs(i-x)+Math.abs(u-c)};y.exports=P},89774:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){var h=i-x,o=u-c;return h*h+o*o};y.exports=P},50994:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Between:i(20339),BetweenPoints:i(52816),BetweenPointsSquared:i(64559),Chebyshev:i(82340),Power:i(14390),Snake:i(2243),Squared:i(89774)}},62640:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(54178),x=i(41521),c=i(79980),h=i(85433),o=i(99140),r=i(48857),a=i(81596),d=i(59133),n=i(98516),p=i(35248),g=i(82500),v=i(49752);y.exports={Power0:a,Power1:d.Out,Power2:h.Out,Power3:n.Out,Power4:p.Out,Linear:a,Quad:d.Out,Cubic:h.Out,Quart:n.Out,Quint:p.Out,Sine:g.Out,Expo:r.Out,Circ:c.Out,Elastic:o.Out,Back:u.Out,Bounce:x.Out,Stepped:v,"Quad.easeIn":d.In,"Cubic.easeIn":h.In,"Quart.easeIn":n.In,"Quint.easeIn":p.In,"Sine.easeIn":g.In,"Expo.easeIn":r.In,"Circ.easeIn":c.In,"Elastic.easeIn":o.In,"Back.easeIn":u.In,"Bounce.easeIn":x.In,"Quad.easeOut":d.Out,"Cubic.easeOut":h.Out,"Quart.easeOut":n.Out,"Quint.easeOut":p.Out,"Sine.easeOut":g.Out,"Expo.easeOut":r.Out,"Circ.easeOut":c.Out,"Elastic.easeOut":o.Out,"Back.easeOut":u.Out,"Bounce.easeOut":x.Out,"Quad.easeInOut":d.InOut,"Cubic.easeInOut":h.InOut,"Quart.easeInOut":n.InOut,"Quint.easeInOut":p.InOut,"Sine.easeInOut":g.InOut,"Expo.easeInOut":r.InOut,"Circ.easeInOut":c.InOut,"Elastic.easeInOut":o.InOut,"Back.easeInOut":u.InOut,"Bounce.easeInOut":x.InOut}},1639:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u===void 0&&(u=1.70158),i*i*((u+1)*i-u)};y.exports=P},50099:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){u===void 0&&(u=1.70158);var x=u*1.525;return(i*=2)<1?.5*(i*i*((x+1)*i-x)):.5*((i-=2)*i*((x+1)*i+x)+2)};y.exports=P},41286:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u===void 0&&(u=1.70158),--i*i*((u+1)*i+u)+1};y.exports=P},54178:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={In:i(1639),Out:i(41286),InOut:i(50099)}},59590:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i=1-i,i<.36363636363636365?1-7.5625*i*i:i<.7272727272727273?1-(7.5625*(i-=.5454545454545454)*i+.75):i<.9090909090909091?1-(7.5625*(i-=.8181818181818182)*i+.9375):1-(7.5625*(i-=.9545454545454546)*i+.984375)};y.exports=P},41788:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u=!1;return i<.5?(i=1-i*2,u=!0):i=i*2-1,i<.36363636363636365?i=7.5625*i*i:i<.7272727272727273?i=7.5625*(i-=.5454545454545454)*i+.75:i<.9090909090909091?i=7.5625*(i-=.8181818181818182)*i+.9375:i=7.5625*(i-=.9545454545454546)*i+.984375,u?(1-i)*.5:i*.5+.5};y.exports=P},69905:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i<.36363636363636365?7.5625*i*i:i<.7272727272727273?7.5625*(i-=.5454545454545454)*i+.75:i<.9090909090909091?7.5625*(i-=.8181818181818182)*i+.9375:7.5625*(i-=.9545454545454546)*i+.984375};y.exports=P},41521:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={In:i(59590),Out:i(69905),InOut:i(41788)}},91861:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return 1-Math.sqrt(1-i*i)};y.exports=P},4177:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)};y.exports=P},57512:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return Math.sqrt(1- --i*i)};y.exports=P},79980:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={In:i(91861),Out:i(57512),InOut:i(4177)}},51150:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i*i*i};y.exports=P},82820:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)};y.exports=P},35033:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return--i*i*i+1};y.exports=P},85433:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={In:i(51150),Out:i(35033),InOut:i(82820)}},69965:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){if(u===void 0&&(u=.1),x===void 0&&(x=.1),i===0)return 0;if(i===1)return 1;var c=x/4;return u<1?u=1:c=x*Math.asin(1/u)/(2*Math.PI),-(u*Math.pow(2,10*(i-=1))*Math.sin((i-c)*(2*Math.PI)/x))};y.exports=P},50665:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){if(u===void 0&&(u=.1),x===void 0&&(x=.1),i===0)return 0;if(i===1)return 1;var c=x/4;return u<1?u=1:c=x*Math.asin(1/u)/(2*Math.PI),(i*=2)<1?-.5*(u*Math.pow(2,10*(i-=1))*Math.sin((i-c)*(2*Math.PI)/x)):u*Math.pow(2,-10*(i-=1))*Math.sin((i-c)*(2*Math.PI)/x)*.5+1};y.exports=P},7744:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){if(u===void 0&&(u=.1),x===void 0&&(x=.1),i===0)return 0;if(i===1)return 1;var c=x/4;return u<1?u=1:c=x*Math.asin(1/u)/(2*Math.PI),u*Math.pow(2,-10*i)*Math.sin((i-c)*(2*Math.PI)/x)+1};y.exports=P},99140:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={In:i(69965),Out:i(7744),InOut:i(50665)}},24590:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return Math.pow(2,10*(i-1))-.001};y.exports=P},87844:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return(i*=2)<1?.5*Math.pow(2,10*(i-1)):.5*(2-Math.pow(2,-10*(i-1)))};y.exports=P},89433:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return 1-Math.pow(2,-10*i)};y.exports=P},48857:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={In:i(24590),Out:i(89433),InOut:i(87844)}},48820:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Back:i(54178),Bounce:i(41521),Circular:i(79980),Cubic:i(85433),Elastic:i(99140),Expo:i(48857),Linear:i(81596),Quadratic:i(59133),Quartic:i(98516),Quintic:i(35248),Sine:i(82500),Stepped:i(49752)}},7147:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i};y.exports=P},81596:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports=i(7147)},34826:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i*i};y.exports=P},20544:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)};y.exports=P},92029:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i*(2-i)};y.exports=P},59133:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={In:i(34826),Out:i(92029),InOut:i(20544)}},64413:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i*i*i*i};y.exports=P},78137:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)};y.exports=P},45840:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return 1- --i*i*i*i};y.exports=P},98516:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={In:i(64413),Out:i(45840),InOut:i(78137)}},87745:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i*i*i*i*i};y.exports=P},16509:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)};y.exports=P},17868:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return--i*i*i*i*i+1};y.exports=P},35248:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={In:i(87745),Out:i(17868),InOut:i(16509)}},80461:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i===0?0:i===1?1:1-Math.cos(i*Math.PI/2)};y.exports=P},34025:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i===0?0:i===1?1:.5*(1-Math.cos(Math.PI*i))};y.exports=P},52768:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i===0?0:i===1?1:Math.sin(i*Math.PI/2)};y.exports=P},82500:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={In:i(80461),Out:i(52768),InOut:i(34025)}},72251:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u===void 0&&(u=1),i<=0?0:i>=1?1:((u*i|0)+1)*(1/u)};y.exports=P},49752:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports=i(72251)},75698:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u===void 0&&(u=1e-4),Math.ceil(i-u)};y.exports=P},43855:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return x===void 0&&(x=1e-4),Math.abs(i-u)<x};y.exports=P},25777:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u===void 0&&(u=1e-4),Math.floor(i+u)};y.exports=P},5470:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return x===void 0&&(x=1e-4),i>u-x};y.exports=P},94977:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return x===void 0&&(x=1e-4),i<u+x};y.exports=P},48379:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Ceil:i(75698),Equal:i(43855),Floor:i(25777),GreaterThan:i(5470),LessThan:i(94977)}},75508:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(36383),x=i(79291),c={Angle:i(25588),Distance:i(50994),Easing:i(48820),Fuzzy:i(48379),Interpolation:i(38289),Pow2:i(49001),Snap:i(73697),RandomDataGenerator:i(28453),Average:i(53307),Bernstein:i(85710),Between:i(30976),CatmullRom:i(87842),CeilTo:i(26302),Clamp:i(45319),DegToRad:i(39506),Difference:i(61241),Euler:i(38857),Factorial:i(6411),FloatBetween:i(99472),FloorTo:i(77623),FromPercent:i(62945),GetSpeed:i(38265),IsEven:i(78702),IsEvenStrict:i(94883),Linear:i(28915),LinearXY:i(94908),MaxAdd:i(86883),Median:i(50040),MinSub:i(37204),Percent:i(65201),RadToDeg:i(43396),RandomXY:i(74362),RandomXYZ:i(60706),RandomXYZW:i(67421),Rotate:i(36305),RotateAround:i(11520),RotateAroundDistance:i(1163),RotateTo:i(70336),RoundAwayFromZero:i(2284),RoundTo:i(41013),SinCosTableGenerator:i(16922),SmootherStep:i(54261),SmoothStep:i(7602),ToXY:i(44408),TransformXY:i(85955),Within:i(60417),Wrap:i(15994),Vector2:i(26099),Vector3:i(25836),Vector4:i(61369),Matrix3:i(94434),Matrix4:i(37867),Quaternion:i(15746),RotateVec3:i(72678)};c=x(!1,c,u),y.exports=c},89318:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(85710),x=function(c,h){for(var o=0,r=c.length-1,a=0;a<=r;a++)o+=Math.pow(1-h,r-a)*Math.pow(h,a)*c[a]*u(r,a);return o};y.exports=x},77259:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87842),x=function(c,h){var o=c.length-1,r=o*h,a=Math.floor(r);return c[0]===c[o]?(h<0&&(a=Math.floor(r=o*(1+h))),u(r-a,c[(a-1+o)%o],c[a],c[(a+1)%o],c[(a+2)%o])):h<0?c[0]-(u(-r,c[0],c[0],c[1],c[1])-c[0]):h>1?c[o]-(u(r-o,c[o],c[o],c[o-1],c[o-1])-c[o]):u(r-a,c[a?a-1:0],c[a],c[o<a+1?o:a+1],c[o<a+2?o:a+2])};y.exports=x},36316:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/function P(h,o){var r=1-h;return r*r*r*o}function i(h,o){var r=1-h;return 3*r*r*h*o}function u(h,o){return 3*(1-h)*h*h*o}function x(h,o){return h*h*h*o}var c=function(h,o,r,a,d){return P(h,o)+i(h,r)+u(h,a)+x(h,d)};y.exports=c},28392:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(28915),x=function(c,h){var o=c.length-1,r=o*h,a=Math.floor(r);return h<0?u(c[0],c[1],r):h>1?u(c[o],c[o-1],o-r):u(c[a],c[a+1>o?o:a+1],r-a)};y.exports=x},32112:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/function P(c,h){var o=1-c;return o*o*h}function i(c,h){return 2*(1-c)*c*h}function u(c,h){return c*c*h}var x=function(c,h,o,r){return P(c,h)+i(c,o)+u(c,r)};y.exports=x},47235:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7602),x=function(c,h,o){return h+(o-h)*u(c,0,1)};y.exports=x},50178:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(54261),x=function(c,h,o){return h+(o-h)*u(c,0,1)};y.exports=x},38289:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Bezier:i(89318),CatmullRom:i(77259),CubicBezier:i(36316),Linear:i(28392),QuadraticBezier:i(32112),SmoothStep:i(47235),SmootherStep:i(50178)}},98439:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u=Math.log(i)/.6931471805599453;return 1<<Math.ceil(u)};y.exports=P},50030:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i>0&&(i&i-1)===0&&u>0&&(u&u-1)===0};y.exports=P},81230:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i>0&&(i&i-1)===0};y.exports=P},49001:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={GetNext:i(98439),IsSize:i(50030),IsValue:i(81230)}},28453:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c){c===void 0&&(c=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],c&&this.init(c)},rnd:function(){var c=2091639*this.s0+this.c*23283064365386963e-26;return this.c=c|0,this.s0=this.s1,this.s1=this.s2,this.s2=c-this.c,this.s2},hash:function(c){var h,o=this.n;c=c.toString();for(var r=0;r<c.length;r++)o+=c.charCodeAt(r),h=.02519603282416938*o,o=h>>>0,h-=o,h*=o,o=h>>>0,h-=o,o+=h*4294967296;return this.n=o,(o>>>0)*23283064365386963e-26},init:function(c){typeof c=="string"?this.state(c):this.sow(c)},sow:function(c){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!c)for(var h=0;h<c.length&&c[h]!=null;h++){var o=c[h];this.s0-=this.hash(o),this.s0+=~~(this.s0<0),this.s1-=this.hash(o),this.s1+=~~(this.s1<0),this.s2-=this.hash(o),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(c,h){return Math.floor(this.realInRange(0,h-c+1)+c)},between:function(c,h){return Math.floor(this.realInRange(0,h-c+1)+c)},realInRange:function(c,h){return this.frac()*(h-c)+c},normal:function(){return 1-2*this.frac()},uuid:function(){var c="",h="";for(h=c="";c++<36;h+=~c%5|c*3&4?(c^15?8^this.frac()*(c^20?16:4):4).toString(16):"-");return h},pick:function(c){return c[this.integerInRange(0,c.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(c){return c[~~(Math.pow(this.frac(),2)*(c.length-.5)+.5)]},timestamp:function(c,h){return this.realInRange(c||9466848e5,h||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(c){return typeof c=="string"&&c.match(/^!rnd/)&&(c=c.split(","),this.c=parseFloat(c[1]),this.s0=parseFloat(c[2]),this.s1=parseFloat(c[3]),this.s2=parseFloat(c[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(c){for(var h=c.length-1,o=h;o>0;o--){var r=Math.floor(this.frac()*(o+1)),a=c[r];c[r]=c[o],c[o]=a}return c}});y.exports=x},63448:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){return x===void 0&&(x=0),u===0?i:(i-=x,i=u*Math.ceil(i/u),c?(x+i)/u:x+i)};y.exports=P},56583:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){return x===void 0&&(x=0),u===0?i:(i-=x,i=u*Math.floor(i/u),c?(x+i)/u:x+i)};y.exports=P},77720:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){return x===void 0&&(x=0),u===0?i:(i-=x,i=u*Math.round(i/u),c?(x+i)/u:x+i)};y.exports=P},73697:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Ceil:i(63448),Floor:i(56583),To:i(77720)}},85454:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/i(63595);var u=i(8054),x=i(79291),c={Actions:i(61061),Animations:i(60421),BlendModes:i(10312),Cache:i(83388),Cameras:i(26638),Core:i(42857),Class:i(83419),Create:i(15822),Curves:i(25410),Data:i(44965),Display:i(27460),DOM:i(84902),Events:i(93055),FX:i(66064),Game:i(50127),GameObjects:i(77856),Geom:i(55738),Input:i(14350),Loader:i(57777),Math:i(75508),Physics:i(44563),Plugins:i(18922),Renderer:i(36909),Scale:i(93364),ScaleModes:i(29795),Scene:i(97482),Scenes:i(62194),Structs:i(41392),Textures:i(27458),Tilemaps:i(62501),Time:i(90291),Tweens:i(43066),Utils:i(91799)};c.Sound=i(23717),c=x(!1,c,u),y.exports=c,i.g.Phaser=c},71289:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(92209),c=i(88571),h=new u({Extends:c,Mixins:[x.Acceleration,x.Angular,x.Bounce,x.Collision,x.Debug,x.Drag,x.Enable,x.Friction,x.Gravity,x.Immovable,x.Mass,x.Pushable,x.Size,x.Velocity],initialize:function(o,r,a,d,n){c.call(this,o,r,a,d,n),this.body=null}});y.exports=h},86689:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(39506),c=i(20339),h=i(89774),o=i(66022),r=i(95540),a=i(46975),d=i(72441),n=i(47956),p=i(37277),g=i(44594),v=i(26099),f=i(82248),b=new u({initialize:function(C){this.scene=C,this.systems=C.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,C.sys.events.once(g.BOOT,this.boot,this),C.sys.events.on(g.START,this.start,this)},boot:function(){this.world=new f(this.scene,this.config),this.add=new o(this.world),this.systems.events.once(g.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new f(this.scene,this.config),this.add=new o(this.world));var C=this.systems.events;r(this.config,"customUpdate",!1)||C.on(g.UPDATE,this.world.update,this.world),C.on(g.POST_UPDATE,this.world.postUpdate,this.world),C.once(g.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(g.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(g.UPDATE,this.world.update,this.world)},getConfig:function(){var C=this.systems.game.config.physics,_=this.systems.settings.physics,M=a(r(_,"arcade",{}),r(C,"arcade",{}));return M},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(C,_,M,E,A){return M===void 0&&(M=null),E===void 0&&(E=null),A===void 0&&(A=M),this.world.collideObjects(C,_,M,E,A,!0)},collide:function(C,_,M,E,A){return M===void 0&&(M=null),E===void 0&&(E=null),A===void 0&&(A=M),this.world.collideObjects(C,_,M,E,A,!1)},collideTiles:function(C,_,M,E,A){return this.world.collideTiles(C,_,M,E,A)},overlapTiles:function(C,_,M,E,A){return this.world.overlapTiles(C,_,M,E,A)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(C,_,M,E,A,R){E===void 0&&(E=60);var L=Math.atan2(M-C.y,_-C.x);return C.body.acceleration.setToPolar(L,E),A!==void 0&&R!==void 0&&C.body.maxVelocity.set(A,R),L},accelerateToObject:function(C,_,M,E,A){return this.accelerateTo(C,_.x,_.y,M,E,A)},closest:function(C,_){_||(_=this.world.bodies.entries);for(var M=Number.MAX_VALUE,E=null,A=C.x,R=C.y,L=_.length,Y=0;Y<L;Y++){var F=_[Y],N=F.body||F;if(!(C===F||C===N||C===N.gameObject||C===N.center)){var z=h(A,R,N.center.x,N.center.y);z<M&&(E=F,M=z)}}return E},furthest:function(C,_){_||(_=this.world.bodies.entries);for(var M=-1,E=null,A=C.x,R=C.y,L=_.length,Y=0;Y<L;Y++){var F=_[Y],N=F.body||F;if(!(C===F||C===N||C===N.gameObject||C===N.center)){var z=h(A,R,N.center.x,N.center.y);z>M&&(E=F,M=z)}}return E},moveTo:function(C,_,M,E,A){E===void 0&&(E=60),A===void 0&&(A=0);var R=Math.atan2(M-C.y,_-C.x);return A>0&&(E=c(C.x,C.y,_,M)/(A/1e3)),C.body.velocity.setToPolar(R,E),R},moveToObject:function(C,_,M,E){return this.moveTo(C,_.x,_.y,M,E)},velocityFromAngle:function(C,_,M){return _===void 0&&(_=60),M===void 0&&(M=new v),M.setToPolar(x(C),_)},velocityFromRotation:function(C,_,M){return _===void 0&&(_=60),M===void 0&&(M=new v),M.setToPolar(C,_)},overlapRect:function(C,_,M,E,A,R){return n(this.world,C,_,M,E,A,R)},overlapCirc:function(C,_,M,E,A){return d(this.world,C,_,M,E,A)},shutdown:function(){if(this.world){var C=this.systems.events;C.off(g.UPDATE,this.world.update,this.world),C.off(g.POST_UPDATE,this.world.postUpdate,this.world),C.off(g.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(g.START,this.start,this),this.scene=null,this.systems=null}});p.register("ArcadePhysics",b,"arcadePhysics"),y.exports=b},13759:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(92209),c=i(68287),h=new u({Extends:c,Mixins:[x.Acceleration,x.Angular,x.Bounce,x.Collision,x.Debug,x.Drag,x.Enable,x.Friction,x.Gravity,x.Immovable,x.Mass,x.Pushable,x.Size,x.Velocity],initialize:function(o,r,a,d,n){c.call(this,o,r,a,d,n),this.body=null}});y.exports=h},37742:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(78389),c=i(37747),h=i(63012),o=i(43396),r=i(87841),a=i(37303),d=i(95829),n=i(26099),p=new u({Mixins:[x],initialize:function(g,v){var f=64,b=64,C={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},_=v!==void 0;_&&v.displayWidth&&(f=v.displayWidth,b=v.displayHeight),_||(v=C),this.world=g,this.gameObject=_?v:void 0,this.isBody=!0,this.transform={x:v.x,y:v.y,rotation:v.angle,scaleX:v.scaleX,scaleY:v.scaleY,displayOriginX:v.displayOriginX,displayOriginY:v.displayOriginY},this.debugShowBody=g.defaults.debugShowBody,this.debugShowVelocity=g.defaults.debugShowVelocity,this.debugBodyColor=g.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new n,this.position=new n(v.x-v.scaleX*v.displayOriginX,v.y-v.scaleY*v.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=v.angle,this.preRotation=v.angle,this.width=f,this.height=b,this.sourceWidth=f,this.sourceHeight=b,v.frame&&(this.sourceWidth=v.frame.realWidth,this.sourceHeight=v.frame.realHeight),this.halfWidth=Math.abs(f/2),this.halfHeight=Math.abs(b/2),this.center=new n(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new n,this.newVelocity=new n,this.deltaMax=new n,this.acceleration=new n,this.allowDrag=!0,this.drag=new n,this.allowGravity=!0,this.gravity=new n,this.bounce=new n,this.worldBounce=null,this.customBoundsRectangle=g.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new n(1e4,1e4),this.maxSpeed=-1,this.friction=new n(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=c.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new n(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=d(!1),this.touching=d(!0),this.wasTouching=d(!0),this.blocked=d(!0),this.syncBounds=!1,this.physicsType=c.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=v.scaleX,this._sy=v.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new r,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var g=this.gameObject,v=this.transform;if(g.parentContainer){var f=g.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);v.x=f.tx,v.y=f.ty,v.rotation=o(f.rotation),v.scaleX=f.scaleX,v.scaleY=f.scaleY,v.displayOriginX=g.displayOriginX,v.displayOriginY=g.displayOriginY}else v.x=g.x,v.y=g.y,v.rotation=g.angle,v.scaleX=g.scaleX,v.scaleY=g.scaleY,v.displayOriginX=g.displayOriginX,v.displayOriginY=g.displayOriginY;var b=!1;if(this.syncBounds){var C=g.getBounds(this._bounds);this.width=C.width,this.height=C.height,b=!0}else{var _=Math.abs(v.scaleX),M=Math.abs(v.scaleY);(this._sx!==_||this._sy!==M)&&(this.width=this.sourceWidth*_,this.height=this.sourceHeight*M,this._sx=_,this._sy=M,b=!0)}b&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var g=this.transform;this.position.x=g.x+g.scaleX*(this.offset.x-g.displayOriginX),this.position.y=g.y+g.scaleY*(this.offset.y-g.displayOriginY),this.updateCenter()},resetFlags:function(g){g===void 0&&(g=!1);var v=this.wasTouching,f=this.touching,b=this.blocked;g?d(!0,v):(v.none=f.none,v.up=f.up,v.down=f.down,v.left=f.left,v.right=f.right),d(!0,f),d(!0,b),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(g,v){if(g&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var f=this.position;this.prev.x=f.x,this.prev.y=f.y,this.prevFrame.x=f.x,this.prevFrame.y=f.y}g&&this.update(v)},update:function(g){var v=this.prev,f=this.position,b=this.velocity;if(v.set(f.x,f.y),!this.moves){this._dx=f.x-v.x,this._dy=f.y-v.y;return}if(this.directControl){var C=this.autoFrame;b.set((f.x-C.x)/g,(f.y-C.y)/g),this.world.updateMotion(this,g),this._dx=f.x-C.x,this._dy=f.y-C.y}else this.world.updateMotion(this,g),this.newVelocity.set(b.x*g,b.y*g),f.add(this.newVelocity),this._dx=f.x-v.x,this._dy=f.y-v.y;var _=b.x,M=b.y;if(this.updateCenter(),this.angle=Math.atan2(M,_),this.speed=Math.sqrt(_*_+M*M),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var E=this.blocked;this.world.emit(h.WORLD_BOUNDS,this,E.up,E.down,E.left,E.right)}},postUpdate:function(){var g=this.position,v=g.x-this.prevFrame.x,f=g.y-this.prevFrame.y,b=this.gameObject;if(this.moves){var C=this.deltaMax.x,_=this.deltaMax.y;C!==0&&v!==0&&(v<0&&v<-C?v=-C:v>0&&v>C&&(v=C)),_!==0&&f!==0&&(f<0&&f<-_?f=-_:f>0&&f>_&&(f=_)),b&&(b.x+=v,b.y+=f)}v<0?this.facing=c.FACING_LEFT:v>0&&(this.facing=c.FACING_RIGHT),f<0?this.facing=c.FACING_UP:f>0&&(this.facing=c.FACING_DOWN),this.allowRotation&&b&&(b.angle+=this.deltaZ()),this._tx=v,this._ty=f,this.autoFrame.set(g.x,g.y)},setBoundsRectangle:function(g){return this.customBoundsRectangle=g||this.world.bounds,this},checkWorldBounds:function(){var g=this.position,v=this.velocity,f=this.blocked,b=this.customBoundsRectangle,C=this.world.checkCollision,_=this.worldBounce?-this.worldBounce.x:-this.bounce.x,M=this.worldBounce?-this.worldBounce.y:-this.bounce.y,E=!1;return g.x<b.x&&C.left?(g.x=b.x,v.x*=_,f.left=!0,E=!0):this.right>b.right&&C.right&&(g.x=b.right-this.width,v.x*=_,f.right=!0,E=!0),g.y<b.y&&C.up?(g.y=b.y,v.y*=M,f.up=!0,E=!0):this.bottom>b.bottom&&C.down&&(g.y=b.bottom-this.height,v.y*=M,f.down=!0,E=!0),E&&(this.blocked.none=!1,this.updateCenter()),E},setOffset:function(g,v){return v===void 0&&(v=g),this.offset.set(g,v),this},setGameObject:function(g,v){if(v===void 0&&(v=!0),!g||!g.hasTransformComponent)return this;var f=this.world;return this.gameObject&&this.gameObject.body&&(f.disable(this.gameObject),this.gameObject.body=null),g.body&&f.disable(g),this.gameObject=g,g.body=this,this.setSize(),this.enable=v,this},setSize:function(g,v,f){f===void 0&&(f=!0);var b=this.gameObject;if(b&&(!g&&b.frame&&(g=b.frame.realWidth),!v&&b.frame&&(v=b.frame.realHeight)),this.sourceWidth=g,this.sourceHeight=v,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),f&&b&&b.getCenter){var C=(b.width-g)/2,_=(b.height-v)/2;this.offset.set(C,_)}return this.isCircle=!1,this.radius=0,this},setCircle:function(g,v,f){return v===void 0&&(v=this.offset.x),f===void 0&&(f=this.offset.y),g>0?(this.isCircle=!0,this.radius=g,this.sourceWidth=g*2,this.sourceHeight=g*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,f),this.updateCenter()):this.isCircle=!1,this},reset:function(g,v){this.stop();var f=this.gameObject;f&&(f.setPosition(g,v),this.rotation=f.angle,this.preRotation=f.angle);var b=this.position;f&&f.getTopLeft?f.getTopLeft(b):b.set(g,v),this.prev.copy(b),this.prevFrame.copy(b),this.autoFrame.copy(b),f&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(g){return g.x=this.x,g.y=this.y,g.right=this.right,g.bottom=this.bottom,g},hitTest:function(g,v){if(!this.isCircle)return a(this,g,v);if(this.radius>0&&g>=this.left&&g<=this.right&&v>=this.top&&v<=this.bottom){var f=(this.center.x-g)*(this.center.x-g),b=(this.center.y-v)*(this.center.y-v);return f+b<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(g){var v=this.position,f=v.x+this.halfWidth,b=v.y+this.halfHeight;this.debugShowBody&&(g.lineStyle(g.defaultStrokeWidth,this.debugBodyColor),this.isCircle?g.strokeCircle(f,b,this.width/2):(this.checkCollision.up&&g.lineBetween(v.x,v.y,v.x+this.width,v.y),this.checkCollision.right&&g.lineBetween(v.x+this.width,v.y,v.x+this.width,v.y+this.height),this.checkCollision.down&&g.lineBetween(v.x,v.y+this.height,v.x+this.width,v.y+this.height),this.checkCollision.left&&g.lineBetween(v.x,v.y,v.x,v.y+this.height))),this.debugShowVelocity&&(g.lineStyle(g.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),g.lineBetween(f,b,f+this.velocity.x/2,b+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(g){return g===void 0&&(g=!0),this.directControl=g,this},setCollideWorldBounds:function(g,v,f,b){g===void 0&&(g=!0),this.collideWorldBounds=g;var C=v!==void 0,_=f!==void 0;return(C||_)&&(this.worldBounce||(this.worldBounce=new n),C&&(this.worldBounce.x=v),_&&(this.worldBounce.y=f)),b!==void 0&&(this.onWorldBounds=b),this},setVelocity:function(g,v){return this.velocity.set(g,v),g=this.velocity.x,v=this.velocity.y,this.speed=Math.sqrt(g*g+v*v),this},setVelocityX:function(g){return this.setVelocity(g,this.velocity.y)},setVelocityY:function(g){return this.setVelocity(this.velocity.x,g)},setMaxVelocity:function(g,v){return this.maxVelocity.set(g,v),this},setMaxVelocityX:function(g){return this.maxVelocity.x=g,this},setMaxVelocityY:function(g){return this.maxVelocity.y=g,this},setMaxSpeed:function(g){return this.maxSpeed=g,this},setSlideFactor:function(g,v){return this.slideFactor.set(g,v),this},setBounce:function(g,v){return this.bounce.set(g,v),this},setBounceX:function(g){return this.bounce.x=g,this},setBounceY:function(g){return this.bounce.y=g,this},setAcceleration:function(g,v){return this.acceleration.set(g,v),this},setAccelerationX:function(g){return this.acceleration.x=g,this},setAccelerationY:function(g){return this.acceleration.y=g,this},setAllowDrag:function(g){return g===void 0&&(g=!0),this.allowDrag=g,this},setAllowGravity:function(g){return g===void 0&&(g=!0),this.allowGravity=g,this},setAllowRotation:function(g){return g===void 0&&(g=!0),this.allowRotation=g,this},setDrag:function(g,v){return this.drag.set(g,v),this},setDamping:function(g){return this.useDamping=g,this},setDragX:function(g){return this.drag.x=g,this},setDragY:function(g){return this.drag.y=g,this},setGravity:function(g,v){return this.gravity.set(g,v),this},setGravityX:function(g){return this.gravity.x=g,this},setGravityY:function(g){return this.gravity.y=g,this},setFriction:function(g,v){return this.friction.set(g,v),this},setFrictionX:function(g){return this.friction.x=g,this},setFrictionY:function(g){return this.friction.y=g,this},setAngularVelocity:function(g){return this.angularVelocity=g,this},setAngularAcceleration:function(g){return this.angularAcceleration=g,this},setAngularDrag:function(g){return this.angularDrag=g,this},setMass:function(g){return this.mass=g,this},setImmovable:function(g){return g===void 0&&(g=!0),this.immovable=g,this},setEnable:function(g){return g===void 0&&(g=!0),this.enable=g,this},processX:function(g,v,f,b){this.x+=g,this.updateCenter(),v!==null&&(this.velocity.x=v*this.slideFactor.x);var C=this.blocked;f&&(C.left=!0,C.none=!1),b&&(C.right=!0,C.none=!1)},processY:function(g,v,f,b){this.y+=g,this.updateCenter(),v!==null&&(this.velocity.y=v*this.slideFactor.y);var C=this.blocked;f&&(C.up=!0,C.none=!1),b&&(C.down=!0,C.none=!1)},x:{get:function(){return this.position.x},set:function(g){this.position.x=g}},y:{get:function(){return this.position.y},set:function(g){this.position.y=g}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});y.exports=p},79342:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h,o,r,a,d,n){this.world=c,this.name="",this.active=!0,this.overlapOnly=h,this.object1=o,this.object2=r,this.collideCallback=a,this.processCallback=d,this.callbackContext=n},setName:function(c){return this.name=c,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});y.exports=x},66022:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(71289),x=i(13759),c=i(37742),h=i(83419),o=i(37747),r=i(60758),a=i(72624),d=i(71464),n=new h({initialize:function(p){this.world=p,this.scene=p.scene,this.sys=p.scene.sys},collider:function(p,g,v,f,b){return this.world.addCollider(p,g,v,f,b)},overlap:function(p,g,v,f,b){return this.world.addOverlap(p,g,v,f,b)},existing:function(p,g){var v=g?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(p,v),p},staticImage:function(p,g,v,f){var b=new u(this.scene,p,g,v,f);return this.sys.displayList.add(b),this.world.enableBody(b,o.STATIC_BODY),b},image:function(p,g,v,f){var b=new u(this.scene,p,g,v,f);return this.sys.displayList.add(b),this.world.enableBody(b,o.DYNAMIC_BODY),b},staticSprite:function(p,g,v,f){var b=new x(this.scene,p,g,v,f);return this.sys.displayList.add(b),this.sys.updateList.add(b),this.world.enableBody(b,o.STATIC_BODY),b},sprite:function(p,g,v,f){var b=new x(this.scene,p,g,v,f);return this.sys.displayList.add(b),this.sys.updateList.add(b),this.world.enableBody(b,o.DYNAMIC_BODY),b},staticGroup:function(p,g){return this.sys.updateList.add(new d(this.world,this.world.scene,p,g))},group:function(p,g){return this.sys.updateList.add(new r(this.world,this.world.scene,p,g))},body:function(p,g,v,f){var b=new c(this.world);return b.position.set(p,g),v&&f&&b.setSize(v,f),this.world.add(b,o.DYNAMIC_BODY),b},staticBody:function(p,g,v,f){var b=new a(this.world);return b.position.set(p,g),v&&f&&b.setSize(v,f),this.world.add(b,o.STATIC_BODY),b},destroy:function(){this.world=null,this.scene=null,this.sys=null}});y.exports=n},79599:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u=0;if(!Array.isArray(i))u=i;else for(var x=0;x<i.length;x++)u|=i[x];return u};y.exports=P},64897:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(37747),x=function(c,h,o,r){var a=0,d=c.deltaAbsX()+h.deltaAbsX()+r;return c._dx===0&&h._dx===0?(c.embedded=!0,h.embedded=!0):c._dx>h._dx?(a=c.right-h.x,a>d&&!o||c.checkCollision.right===!1||h.checkCollision.left===!1?a=0:(c.touching.none=!1,c.touching.right=!0,h.touching.none=!1,h.touching.left=!0,h.physicsType===u.STATIC_BODY&&!o&&(c.blocked.none=!1,c.blocked.right=!0),c.physicsType===u.STATIC_BODY&&!o&&(h.blocked.none=!1,h.blocked.left=!0))):c._dx<h._dx&&(a=c.x-h.width-h.x,-a>d&&!o||c.checkCollision.left===!1||h.checkCollision.right===!1?a=0:(c.touching.none=!1,c.touching.left=!0,h.touching.none=!1,h.touching.right=!0,h.physicsType===u.STATIC_BODY&&!o&&(c.blocked.none=!1,c.blocked.left=!0),c.physicsType===u.STATIC_BODY&&!o&&(h.blocked.none=!1,h.blocked.right=!0))),c.overlapX=a,h.overlapX=a,a};y.exports=x},45170:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(37747),x=function(c,h,o,r){var a=0,d=c.deltaAbsY()+h.deltaAbsY()+r;return c._dy===0&&h._dy===0?(c.embedded=!0,h.embedded=!0):c._dy>h._dy?(a=c.bottom-h.y,a>d&&!o||c.checkCollision.down===!1||h.checkCollision.up===!1?a=0:(c.touching.none=!1,c.touching.down=!0,h.touching.none=!1,h.touching.up=!0,h.physicsType===u.STATIC_BODY&&!o&&(c.blocked.none=!1,c.blocked.down=!0),c.physicsType===u.STATIC_BODY&&!o&&(h.blocked.none=!1,h.blocked.up=!0))):c._dy<h._dy&&(a=c.y-h.bottom,-a>d&&!o||c.checkCollision.up===!1||h.checkCollision.down===!1?a=0:(c.touching.none=!1,c.touching.up=!0,h.touching.none=!1,h.touching.down=!0,h.physicsType===u.STATIC_BODY&&!o&&(c.blocked.none=!1,c.blocked.up=!0),c.physicsType===u.STATIC_BODY&&!o&&(h.blocked.none=!1,h.blocked.down=!0))),c.overlapY=a,h.overlapY=a,a};y.exports=x},60758:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(13759),x=i(83419),c=i(78389),h=i(37747),o=i(95540),r=i(26479),a=i(41212),d=new x({Extends:r,Mixins:[c],initialize:function(n,p,g,v){if(!g&&!v)v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(a(g))v=g,g=null,v.internalCreateCallback=this.createCallbackHandler,v.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(g)&&a(g[0])){var f=this;g.forEach(function(b){b.internalCreateCallback=f.createCallbackHandler,b.internalRemoveCallback=f.removeCallbackHandler,b.classType=o(b,"classType",u)}),v=null}else v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=n,v&&(v.classType=o(v,"classType",u)),this.physicsType=h.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:o(v,"collideWorldBounds",!1),setBoundsRectangle:o(v,"customBoundsRectangle",null),setAccelerationX:o(v,"accelerationX",0),setAccelerationY:o(v,"accelerationY",0),setAllowDrag:o(v,"allowDrag",!0),setAllowGravity:o(v,"allowGravity",!0),setAllowRotation:o(v,"allowRotation",!0),setDamping:o(v,"useDamping",!1),setBounceX:o(v,"bounceX",0),setBounceY:o(v,"bounceY",0),setDragX:o(v,"dragX",0),setDragY:o(v,"dragY",0),setEnable:o(v,"enable",!0),setGravityX:o(v,"gravityX",0),setGravityY:o(v,"gravityY",0),setFrictionX:o(v,"frictionX",0),setFrictionY:o(v,"frictionY",0),setMaxSpeed:o(v,"maxSpeed",-1),setMaxVelocityX:o(v,"maxVelocityX",1e4),setMaxVelocityY:o(v,"maxVelocityY",1e4),setVelocityX:o(v,"velocityX",0),setVelocityY:o(v,"velocityY",0),setAngularVelocity:o(v,"angularVelocity",0),setAngularAcceleration:o(v,"angularAcceleration",0),setAngularDrag:o(v,"angularDrag",0),setMass:o(v,"mass",1),setImmovable:o(v,"immovable",!1)},r.call(this,p,g,v),this.type="PhysicsGroup"},createCallbackHandler:function(n){n.body||this.world.enableBody(n,h.DYNAMIC_BODY);var p=n.body;for(var g in this.defaults)p[g](this.defaults[g])},removeCallbackHandler:function(n){n.body&&this.world.disableBody(n)},setVelocity:function(n,p,g){g===void 0&&(g=0);for(var v=this.getChildren(),f=0;f<v.length;f++)v[f].body.velocity.set(n+f*g,p+f*g);return this},setVelocityX:function(n,p){p===void 0&&(p=0);for(var g=this.getChildren(),v=0;v<g.length;v++)g[v].body.velocity.x=n+v*p;return this},setVelocityY:function(n,p){p===void 0&&(p=0);for(var g=this.getChildren(),v=0;v<g.length;v++)g[v].body.velocity.y=n+v*p;return this}});y.exports=d},3017:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P,i,u,x,c,h,o,r,a,d,n,p,g,v,f,b,C,_=function(Y,F,N){P=Y,i=F;var z=P.velocity.x,U=i.velocity.x;return u=P.pushable,a=P._dx<0,d=P._dx>0,n=P._dx===0,f=Math.abs(P.right-i.x)<=Math.abs(i.right-P.x),o=U-z*P.bounce.x,x=i.pushable,p=i._dx<0,g=i._dx>0,v=i._dx===0,b=!f,r=z-U*i.bounce.x,C=Math.abs(N),M()},M=function(){return d&&f&&i.blocked.right?(P.processX(-C,o,!1,!0),1):a&&b&&i.blocked.left?(P.processX(C,o,!0),1):g&&b&&P.blocked.right?(i.processX(-C,r,!1,!0),2):p&&f&&P.blocked.left?(i.processX(C,r,!0),2):0},E=function(){var Y=P.velocity.x,F=i.velocity.x,N=Math.sqrt(F*F*i.mass/P.mass)*(F>0?1:-1),z=Math.sqrt(Y*Y*P.mass/i.mass)*(Y>0?1:-1),U=(N+z)*.5;return N-=U,z-=U,c=U+N*P.bounce.x,h=U+z*i.bounce.x,a&&b?A(0):p&&f?A(1):d&&f?A(2):g&&b?A(3):!1},A=function(Y){if(u&&x)C*=.5,Y===0||Y===3?(P.processX(C,c),i.processX(-C,h)):(P.processX(-C,c),i.processX(C,h));else if(u&&!x)Y===0||Y===3?P.processX(C,o,!0):P.processX(-C,o,!1,!0);else if(!u&&x)Y===0||Y===3?i.processX(-C,r,!1,!0):i.processX(C,r,!0);else{var F=C*.5;Y===0?v?(P.processX(C,0,!0),i.processX(0,null,!1,!0)):g?(P.processX(F,0,!0),i.processX(-F,0,!1,!0)):(P.processX(F,i.velocity.x,!0),i.processX(-F,null,!1,!0)):Y===1?n?(P.processX(0,null,!1,!0),i.processX(C,0,!0)):d?(P.processX(-F,0,!1,!0),i.processX(F,0,!0)):(P.processX(-F,null,!1,!0),i.processX(F,P.velocity.x,!0)):Y===2?v?(P.processX(-C,0,!1,!0),i.processX(0,null,!0)):p?(P.processX(-F,0,!1,!0),i.processX(F,0,!0)):(P.processX(-F,i.velocity.x,!1,!0),i.processX(F,null,!0)):Y===3&&(n?(P.processX(0,null,!0),i.processX(-C,0,!1,!0)):a?(P.processX(F,0,!0),i.processX(-F,0,!1,!0)):(P.processX(F,i.velocity.y,!0),i.processX(-F,null,!1,!0)))}return!0},R=function(Y){if(Y===1?i.velocity.x=0:f?i.processX(C,r,!0):i.processX(-C,r,!1,!0),P.moves){var F=P.directControl?P.y-P.autoFrame.y:P.y-P.prev.y;i.y+=F*P.friction.y,i._dy=i.y-i.prev.y}},L=function(Y){if(Y===2?P.velocity.x=0:b?P.processX(C,o,!0):P.processX(-C,o,!1,!0),i.moves){var F=i.directControl?i.y-i.autoFrame.y:i.y-i.prev.y;P.y+=F*i.friction.y,P._dy=P.y-P.prev.y}};y.exports={BlockCheck:M,Check:E,Set:_,Run:A,RunImmovableBody1:R,RunImmovableBody2:L}},47962:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P,i,u,x,c,h,o,r,a,d,n,p,g,v,f,b,C,_=function(Y,F,N){P=Y,i=F;var z=P.velocity.y,U=i.velocity.y;return u=P.pushable,a=P._dy<0,d=P._dy>0,n=P._dy===0,f=Math.abs(P.bottom-i.y)<=Math.abs(i.bottom-P.y),o=U-z*P.bounce.y,x=i.pushable,p=i._dy<0,g=i._dy>0,v=i._dy===0,b=!f,r=z-U*i.bounce.y,C=Math.abs(N),M()},M=function(){return d&&f&&i.blocked.down?(P.processY(-C,o,!1,!0),1):a&&b&&i.blocked.up?(P.processY(C,o,!0),1):g&&b&&P.blocked.down?(i.processY(-C,r,!1,!0),2):p&&f&&P.blocked.up?(i.processY(C,r,!0),2):0},E=function(){var Y=P.velocity.y,F=i.velocity.y,N=Math.sqrt(F*F*i.mass/P.mass)*(F>0?1:-1),z=Math.sqrt(Y*Y*P.mass/i.mass)*(Y>0?1:-1),U=(N+z)*.5;return N-=U,z-=U,c=U+N*P.bounce.y,h=U+z*i.bounce.y,a&&b?A(0):p&&f?A(1):d&&f?A(2):g&&b?A(3):!1},A=function(Y){if(u&&x)C*=.5,Y===0||Y===3?(P.processY(C,c),i.processY(-C,h)):(P.processY(-C,c),i.processY(C,h));else if(u&&!x)Y===0||Y===3?P.processY(C,o,!0):P.processY(-C,o,!1,!0);else if(!u&&x)Y===0||Y===3?i.processY(-C,r,!1,!0):i.processY(C,r,!0);else{var F=C*.5;Y===0?v?(P.processY(C,0,!0),i.processY(0,null,!1,!0)):g?(P.processY(F,0,!0),i.processY(-F,0,!1,!0)):(P.processY(F,i.velocity.y,!0),i.processY(-F,null,!1,!0)):Y===1?n?(P.processY(0,null,!1,!0),i.processY(C,0,!0)):d?(P.processY(-F,0,!1,!0),i.processY(F,0,!0)):(P.processY(-F,null,!1,!0),i.processY(F,P.velocity.y,!0)):Y===2?v?(P.processY(-C,0,!1,!0),i.processY(0,null,!0)):p?(P.processY(-F,0,!1,!0),i.processY(F,0,!0)):(P.processY(-F,i.velocity.y,!1,!0),i.processY(F,null,!0)):Y===3&&(n?(P.processY(0,null,!0),i.processY(-C,0,!1,!0)):a?(P.processY(F,0,!0),i.processY(-F,0,!1,!0)):(P.processY(F,i.velocity.y,!0),i.processY(-F,null,!1,!0)))}return!0},R=function(Y){if(Y===1?i.velocity.y=0:f?i.processY(C,r,!0):i.processY(-C,r,!1,!0),P.moves){var F=P.directControl?P.x-P.autoFrame.x:P.x-P.prev.x;i.x+=F*P.friction.x,i._dx=i.x-i.prev.x}},L=function(Y){if(Y===2?P.velocity.y=0:b?P.processY(C,o,!0):P.processY(-C,o,!1,!0),i.moves){var F=i.directControl?i.x-i.autoFrame.x:i.x-i.prev.x;P.x+=F*i.friction.x,P._dx=P.x-P.prev.x}};y.exports={BlockCheck:M,Check:E,Set:_,Run:A,RunImmovableBody1:R,RunImmovableBody2:L}},14087:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(64897),x=i(3017),c=function(h,o,r,a,d){d===void 0&&(d=u(h,o,r,a));var n=h.immovable,p=o.immovable;if(r||d===0||n&&p||h.customSeparateX||o.customSeparateX)return d!==0||h.embedded&&o.embedded;var g=x.Set(h,o,d);return!n&&!p?g>0?!0:x.Check():(n?x.RunImmovableBody1(g):p&&x.RunImmovableBody2(g),!0)};y.exports=c},89936:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45170),x=i(47962),c=function(h,o,r,a,d){d===void 0&&(d=u(h,o,r,a));var n=h.immovable,p=o.immovable;if(r||d===0||n&&p||h.customSeparateY||o.customSeparateY)return d!==0||h.embedded&&o.embedded;var g=x.Set(h,o,d);return!n&&!p?g>0?!0:x.Check():(n?x.RunImmovableBody1(g):p&&x.RunImmovableBody2(g),!0)};y.exports=c},95829:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u===void 0&&(u={}),u.none=i,u.up=!1,u.down=!1,u.left=!1,u.right=!1,i||(u.up=!0,u.down=!0,u.left=!0,u.right=!0),u};y.exports=P},72624:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87902),x=i(83419),c=i(78389),h=i(37747),o=i(37303),r=i(95829),a=i(26099),d=new x({Mixins:[c],initialize:function(n,p){var g=64,v=64,f={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},b=p!==void 0;b&&p.displayWidth&&(g=p.displayWidth,v=p.displayHeight),b||(p=f),this.world=n,this.gameObject=b?p:void 0,this.isBody=!0,this.debugShowBody=n.defaults.debugShowStaticBody,this.debugBodyColor=n.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(p.x-g*p.originX,p.y-v*p.originY),this.width=g,this.height=v,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new a(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=a.ZERO,this.allowGravity=!1,this.gravity=a.ZERO,this.bounce=a.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=r(!1),this.touching=r(!0),this.wasTouching=r(!0),this.blocked=r(!0),this.physicsType=h.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(n,p,g){if(p===void 0&&(p=!0),g===void 0&&(g=!0),!n||!n.hasTransformComponent)return this;var v=this.world;return this.gameObject&&this.gameObject.body&&(v.disable(this.gameObject),this.gameObject.body=null),n.body&&v.disable(n),this.gameObject=n,n.body=this,this.setSize(),p&&this.updateFromGameObject(),this.enable=g,this},updateFromGameObject:function(){this.world.staticTree.remove(this);var n=this.gameObject;return n.getTopLeft(this.position),this.width=n.displayWidth,this.height=n.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(n,p){return p===void 0&&(p=n),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(n,p),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(n,p,g){g===void 0&&(g=!0);var v=this.gameObject;if(v&&v.frame&&(n||(n=v.frame.realWidth),p||(p=v.frame.realHeight)),this.world.staticTree.remove(this),this.width=n,this.height=p,this.halfWidth=Math.floor(n/2),this.halfHeight=Math.floor(p/2),g&&v&&v.getCenter){var f=v.displayWidth/2,b=v.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(f-this.halfWidth,b-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(n,p,g){return p===void 0&&(p=this.offset.x),g===void 0&&(g=this.offset.y),n>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=n,this.width=n*2,this.height=n*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(p,g),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(n,p){var g=this.gameObject;n===void 0&&(n=g.x),p===void 0&&(p=g.y),this.world.staticTree.remove(this),g.setPosition(n,p),g.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(n){return n.x=this.x,n.y=this.y,n.right=this.right,n.bottom=this.bottom,n},hitTest:function(n,p){return this.isCircle?u(this,n,p):o(this,n,p)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(n){var p=this.position,g=p.x+this.halfWidth,v=p.y+this.halfHeight;this.debugShowBody&&(n.lineStyle(n.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?n.strokeCircle(g,v,this.width/2):n.strokeRect(p.x,p.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(n){return n<=0&&(n=.1),this.mass=n,this},x:{get:function(){return this.position.x},set:function(n){this.world.staticTree.remove(this),this.position.x=n,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(n){this.world.staticTree.remove(this),this.position.y=n,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});y.exports=d},71464:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(13759),x=i(83419),c=i(78389),h=i(37747),o=i(95540),r=i(26479),a=i(41212),d=new x({Extends:r,Mixins:[c],initialize:function(n,p,g,v){!g&&!v?v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:u}:a(g)?(v=g,g=null,v.internalCreateCallback=this.createCallbackHandler,v.internalRemoveCallback=this.removeCallbackHandler,v.createMultipleCallback=this.createMultipleCallbackHandler,v.classType=o(v,"classType",u)):Array.isArray(g)&&a(g[0])?(v=g,g=null,v.forEach(function(f){f.internalCreateCallback=this.createCallbackHandler,f.internalRemoveCallback=this.removeCallbackHandler,f.createMultipleCallback=this.createMultipleCallbackHandler,f.classType=o(f,"classType",u)})):v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=n,this.physicsType=h.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,r.call(this,p,g,v),this.type="StaticPhysicsGroup"},createCallbackHandler:function(n){n.body||this.world.enableBody(n,h.STATIC_BODY)},removeCallbackHandler:function(n){n.body&&this.world.disableBody(n)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var n=this.children.entries,p=0;p<n.length;p++)n[p].body.reset();return this}});y.exports=d},82248:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(55495),x=i(37742),c=i(45319),h=i(83419),o=i(79342),r=i(37747),a=i(20339),d=i(52816),n=i(50792),p=i(63012),g=i(43855),v=i(5470),f=i(94977),b=i(64897),C=i(45170),_=i(96523),M=i(35154),E=i(36383),A=i(25774),R=i(96602),L=i(87841),Y=i(59542),F=i(40012),N=i(14087),z=i(89936),U=i(35072),q=i(72624),Q=i(2483),K=i(61340),et=i(26099),H=i(15994),J=new h({Extends:n,initialize:function(X,Z){n.call(this),this.scene=X,this.bodies=new U,this.staticBodies=new U,this.pendingDestroy=new U,this.colliders=new A,this.gravity=new et(M(Z,"gravity.x",0),M(Z,"gravity.y",0)),this.bounds=new L(M(Z,"x",0),M(Z,"y",0),M(Z,"width",X.sys.scale.width),M(Z,"height",X.sys.scale.height)),this.checkCollision={up:M(Z,"checkCollision.up",!0),down:M(Z,"checkCollision.down",!0),left:M(Z,"checkCollision.left",!0),right:M(Z,"checkCollision.right",!0)},this.fps=M(Z,"fps",60),this.fixedStep=M(Z,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=M(Z,"timeScale",1),this.OVERLAP_BIAS=M(Z,"overlapBias",4),this.TILE_BIAS=M(Z,"tileBias",16),this.forceX=M(Z,"forceX",!1),this.isPaused=M(Z,"isPaused",!1),this._total=0,this.drawDebug=M(Z,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:M(Z,"debugShowBody",!0),debugShowStaticBody:M(Z,"debugShowStaticBody",!0),debugShowVelocity:M(Z,"debugShowVelocity",!0),bodyDebugColor:M(Z,"debugBodyColor",16711935),staticBodyDebugColor:M(Z,"debugStaticBodyColor",255),velocityDebugColor:M(Z,"debugVelocityColor",65280)},this.maxEntries=M(Z,"maxEntries",16),this.useTree=M(Z,"useTree",!0),this.tree=new Y(this.maxEntries),this.staticTree=new Y(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new K,this._tempMatrix2=new K,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(X,Z){Z===void 0&&(Z=r.DYNAMIC_BODY),Array.isArray(X)||(X=[X]);for(var $=0;$<X.length;$++){var it=X[$];if(it.isParent)for(var nt=it.getChildren(),at=0;at<nt.length;at++){var ht=nt[at];ht.isParent?this.enable(ht,Z):this.enableBody(ht,Z)}else this.enableBody(it,Z)}},enableBody:function(X,Z){return Z===void 0&&(Z=r.DYNAMIC_BODY),X.hasTransformComponent&&(X.body||(Z===r.DYNAMIC_BODY?X.body=new x(this,X):Z===r.STATIC_BODY&&(X.body=new q(this,X))),this.add(X.body)),X},add:function(X){return X.physicsType===r.DYNAMIC_BODY?this.bodies.set(X):X.physicsType===r.STATIC_BODY&&(this.staticBodies.set(X),this.staticTree.insert(X)),X.enable=!0,X},disable:function(X){Array.isArray(X)||(X=[X]);for(var Z=0;Z<X.length;Z++){var $=X[Z];if($.isParent)for(var it=$.getChildren(),nt=0;nt<it.length;nt++){var at=it[nt];at.isParent?this.disable(at):this.disableBody(at.body)}else this.disableBody($.body)}},disableBody:function(X){this.remove(X),X.enable=!1},remove:function(X){X.physicsType===r.DYNAMIC_BODY?(this.tree.remove(X),this.bodies.delete(X)):X.physicsType===r.STATIC_BODY&&(this.staticBodies.delete(X),this.staticTree.remove(X))},createDebugGraphic:function(){var X=this.scene.sys.add.graphics({x:0,y:0});return X.setDepth(Number.MAX_VALUE),this.debugGraphic=X,this.drawDebug=!0,X},setBounds:function(X,Z,$,it,nt,at,ht,dt){return this.bounds.setTo(X,Z,$,it),nt!==void 0&&this.setBoundsCollision(nt,at,ht,dt),this},setBoundsCollision:function(X,Z,$,it){return X===void 0&&(X=!0),Z===void 0&&(Z=!0),$===void 0&&($=!0),it===void 0&&(it=!0),this.checkCollision.left=X,this.checkCollision.right=Z,this.checkCollision.up=$,this.checkCollision.down=it,this},pause:function(){return this.isPaused=!0,this.emit(p.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(p.RESUME),this},addCollider:function(X,Z,$,it,nt){$===void 0&&($=null),it===void 0&&(it=null),nt===void 0&&(nt=$);var at=new o(this,!1,X,Z,$,it,nt);return this.colliders.add(at),at},addOverlap:function(X,Z,$,it,nt){$===void 0&&($=null),it===void 0&&(it=null),nt===void 0&&(nt=$);var at=new o(this,!0,X,Z,$,it,nt);return this.colliders.add(at),at},removeCollider:function(X){return this.colliders.remove(X),this},setFPS:function(X){return this.fps=X,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(X,Z){if(!(this.isPaused||this.bodies.size===0)){var $,it=this._frameTime,nt=this._frameTimeMS*this.timeScale;this._elapsed+=Z;var at,ht=this.bodies.entries,dt=this._elapsed>=nt;for(this.fixedStep||(it=Z*.001,dt=!0,this._elapsed=0),$=0;$<ht.length;$++)at=ht[$],at.enable&&at.preUpdate(dt,it);if(dt){this._elapsed-=nt,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(ht));var vt=this.colliders.update();for($=0;$<vt.length;$++){var ft=vt[$];ft.active&&ft.update()}this.emit(p.WORLD_STEP,it)}for(;this._elapsed>=nt;)this._elapsed-=nt,this.step(it)}},step:function(X){var Z,$,it=this.bodies.entries,nt=it.length;for(Z=0;Z<nt;Z++)$=it[Z],$.enable&&$.update(X);this.useTree&&(this.tree.clear(),this.tree.load(it));var at=this.colliders.update();for(Z=0;Z<at.length;Z++){var ht=at[Z];ht.active&&ht.update()}this.emit(p.WORLD_STEP,X),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var X,Z,$=this.bodies.entries,it=$.length,nt=this.bodies,at=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,X=0;X<it;X++)Z=$[X],Z.enable&&Z.postUpdate();if(this.drawDebug){var ht=this.debugGraphic;for(ht.clear(),X=0;X<it;X++)Z=$[X],Z.willDrawDebug()&&Z.drawDebug(ht);for($=at.entries,it=$.length,X=0;X<it;X++)Z=$[X],Z.willDrawDebug()&&Z.drawDebug(ht)}var dt=this.pendingDestroy;if(dt.size>0){var vt=this.tree,ft=this.staticTree;for($=dt.entries,it=$.length,X=0;X<it;X++)Z=$[X],Z.physicsType===r.DYNAMIC_BODY?(vt.remove(Z),nt.delete(Z)):Z.physicsType===r.STATIC_BODY&&(ft.remove(Z),at.delete(Z)),Z.world=void 0,Z.gameObject=void 0;dt.clear()}},updateMotion:function(X,Z){X.allowRotation&&this.computeAngularVelocity(X,Z),this.computeVelocity(X,Z)},computeAngularVelocity:function(X,Z){var $=X.angularVelocity,it=X.angularAcceleration,nt=X.angularDrag,at=X.maxAngular;it?$+=it*Z:X.allowDrag&&nt&&(nt*=Z,v($-nt,0,.1)?$-=nt:f($+nt,0,.1)?$+=nt:$=0),$=c($,-at,at);var ht=$-X.angularVelocity;X.angularVelocity+=ht,X.rotation+=X.angularVelocity*Z},computeVelocity:function(X,Z){var $=X.velocity.x,it=X.acceleration.x,nt=X.drag.x,at=X.maxVelocity.x,ht=X.velocity.y,dt=X.acceleration.y,vt=X.drag.y,ft=X.maxVelocity.y,gt=X.speed,wt=X.maxSpeed,bt=X.allowDrag,xt=X.useDamping;X.allowGravity&&($+=(this.gravity.x+X.gravity.x)*Z,ht+=(this.gravity.y+X.gravity.y)*Z),it?$+=it*Z:bt&&nt&&(xt?(nt=Math.pow(nt,Z),$*=nt,gt=Math.sqrt($*$+ht*ht),g(gt,0,.001)&&($=0)):(nt*=Z,v($-nt,0,.01)?$-=nt:f($+nt,0,.01)?$+=nt:$=0)),dt?ht+=dt*Z:bt&&vt&&(xt?(vt=Math.pow(vt,Z),ht*=vt,gt=Math.sqrt($*$+ht*ht),g(gt,0,.001)&&(ht=0)):(vt*=Z,v(ht-vt,0,.01)?ht-=vt:f(ht+vt,0,.01)?ht+=vt:ht=0)),$=c($,-at,at),ht=c(ht,-ft,ft),X.velocity.set($,ht),wt>-1&&X.velocity.length()>wt&&(X.velocity.normalize().scale(wt),gt=wt),X.speed=gt},separate:function(X,Z,$,it,nt){var at,ht,dt=!1,vt=!0;if(!X.enable||!Z.enable||X.checkCollision.none||Z.checkCollision.none||!this.intersects(X,Z)||!(X.collisionMask&Z.collisionCategory)||!(Z.collisionMask&X.collisionCategory)||$&&$.call(it,X.gameObject||X,Z.gameObject||Z)===!1)return dt;if(X.isCircle||Z.isCircle){var ft=this.separateCircle(X,Z,nt);ft.result?(dt=!0,vt=!1):(at=ft.x,ht=ft.y,vt=!0)}if(vt){var gt=!1,wt=!1,bt=this.OVERLAP_BIAS;nt?(gt=N(X,Z,nt,bt,at),wt=z(X,Z,nt,bt,ht)):this.forceX||Math.abs(this.gravity.y+X.gravity.y)<Math.abs(this.gravity.x+X.gravity.x)?(gt=N(X,Z,nt,bt,at),this.intersects(X,Z)&&(wt=z(X,Z,nt,bt,ht))):(wt=z(X,Z,nt,bt,ht),this.intersects(X,Z)&&(gt=N(X,Z,nt,bt,at))),dt=gt||wt}return dt&&(nt?(X.onOverlap||Z.onOverlap)&&this.emit(p.OVERLAP,X.gameObject,Z.gameObject,X,Z):(X.onCollide||Z.onCollide)&&this.emit(p.COLLIDE,X.gameObject,Z.gameObject,X,Z)),dt},separateCircle:function(X,Z,$){b(X,Z,!1,0),C(X,Z,!1,0);var it=X.isCircle,nt=Z.isCircle,at=X.center,ht=Z.center,dt=X.immovable,vt=Z.immovable,ft=X.velocity,gt=Z.velocity,wt=0,bt=!0;if(it!==nt){bt=!1;var xt=at.x,Pt=at.y,Ot=X.halfWidth,Et=Z.position.x,Tt=Z.position.y,Mt=Z.right,kt=Z.bottom;nt&&(xt=ht.x,Pt=ht.y,Ot=Z.halfWidth,Et=X.position.x,Tt=X.position.y,Mt=X.right,kt=X.bottom),Pt<Tt?xt<Et?wt=a(xt,Pt,Et,Tt)-Ot:xt>Mt&&(wt=a(xt,Pt,Mt,Tt)-Ot):Pt>kt&&(xt<Et?wt=a(xt,Pt,Et,kt)-Ot:xt>Mt&&(wt=a(xt,Pt,Mt,kt)-Ot)),wt*=-1}else wt=X.halfWidth+Z.halfWidth-d(at,ht);X.overlapR=wt,Z.overlapR=wt;var Gt=u(at,ht),qt=(wt+E.EPSILON)*Math.cos(Gt),fe=(wt+E.EPSILON)*Math.sin(Gt),Qt={overlap:wt,result:!1,x:qt,y:fe};if($&&(!bt||bt&&wt!==0))return Qt.result=!0,Qt;if(!bt&&wt===0||dt&&vt||X.customSeparateX||Z.customSeparateX)return Qt.x=void 0,Qt.y=void 0,Qt;var Jt=!X.pushable&&!Z.pushable;if(bt){var be=at.x-ht.x,We=at.y-ht.y,$t=Math.sqrt(Math.pow(be,2)+Math.pow(We,2)),me=(ht.x-at.x)/$t||0,Vt=(ht.y-at.y)/$t||0,Ce=2*(ft.x*me+ft.y*Vt-gt.x*me-gt.y*Vt)/(X.mass+Z.mass);(dt||vt||!X.pushable||!Z.pushable)&&(Ce*=2),!dt&&X.pushable&&(ft.x=ft.x-Ce/X.mass*me,ft.y=ft.y-Ce/X.mass*Vt,ft.multiply(X.bounce)),!vt&&Z.pushable&&(gt.x=gt.x+Ce/Z.mass*me,gt.y=gt.y+Ce/Z.mass*Vt,gt.multiply(Z.bounce)),!dt&&!vt&&(qt*=.5,fe*=.5),(!dt||X.pushable||Jt)&&(X.x-=qt,X.y-=fe,X.updateCenter()),(!vt||Z.pushable||Jt)&&(Z.x+=qt,Z.y+=fe,Z.updateCenter()),Qt.result=!0}else!dt&&(X.pushable||Jt)&&(X.x-=qt,X.y-=fe,X.updateCenter()),!vt&&(Z.pushable||Jt)&&(Z.x+=qt,Z.y+=fe,Z.updateCenter()),Qt.x=void 0,Qt.y=void 0;return Qt},intersects:function(X,Z){return X===Z?!1:!X.isCircle&&!Z.isCircle?!(X.right<=Z.left||X.bottom<=Z.top||X.left>=Z.right||X.top>=Z.bottom):X.isCircle?Z.isCircle?d(X.center,Z.center)<=X.halfWidth+Z.halfWidth:this.circleBodyIntersects(X,Z):this.circleBodyIntersects(Z,X)},circleBodyIntersects:function(X,Z){var $=c(X.center.x,Z.left,Z.right),it=c(X.center.y,Z.top,Z.bottom),nt=(X.center.x-$)*(X.center.x-$),at=(X.center.y-it)*(X.center.y-it);return nt+at<=X.halfWidth*X.halfWidth},overlap:function(X,Z,$,it,nt){return $===void 0&&($=null),it===void 0&&(it=null),nt===void 0&&(nt=$),this.collideObjects(X,Z,$,it,nt,!0)},collide:function(X,Z,$,it,nt){return $===void 0&&($=null),it===void 0&&(it=null),nt===void 0&&(nt=$),this.collideObjects(X,Z,$,it,nt,!1)},collideObjects:function(X,Z,$,it,nt,at){var ht,dt;X.isParent&&(X.physicsType===void 0||Z===void 0||X===Z)&&(X=X.children.entries),Z&&Z.isParent&&Z.physicsType===void 0&&(Z=Z.children.entries);var vt=Array.isArray(X),ft=Array.isArray(Z);if(this._total=0,!vt&&!ft)this.collideHandler(X,Z,$,it,nt,at);else if(!vt&&ft)for(ht=0;ht<Z.length;ht++)this.collideHandler(X,Z[ht],$,it,nt,at);else if(vt&&!ft)if(Z)for(ht=0;ht<X.length;ht++)this.collideHandler(X[ht],Z,$,it,nt,at);else for(ht=0;ht<X.length;ht++){var gt=X[ht];for(dt=ht+1;dt<X.length;dt++)ht!==dt&&this.collideHandler(gt,X[dt],$,it,nt,at)}else for(ht=0;ht<X.length;ht++)for(dt=0;dt<Z.length;dt++)this.collideHandler(X[ht],Z[dt],$,it,nt,at);return this._total>0},collideHandler:function(X,Z,$,it,nt,at){if(Z===void 0&&X.isParent)return this.collideGroupVsGroup(X,X,$,it,nt,at);if(!X||!Z)return!1;if(X.body||X.isBody){if(Z.body||Z.isBody)return this.collideSpriteVsSprite(X,Z,$,it,nt,at);if(Z.isParent)return this.collideSpriteVsGroup(X,Z,$,it,nt,at);if(Z.isTilemap)return this.collideSpriteVsTilemapLayer(X,Z,$,it,nt,at)}else if(X.isParent){if(Z.body||Z.isBody)return this.collideSpriteVsGroup(Z,X,$,it,nt,at);if(Z.isParent)return this.collideGroupVsGroup(X,Z,$,it,nt,at);if(Z.isTilemap)return this.collideGroupVsTilemapLayer(X,Z,$,it,nt,at)}else if(X.isTilemap){if(Z.body||Z.isBody)return this.collideSpriteVsTilemapLayer(Z,X,$,it,nt,at);if(Z.isParent)return this.collideGroupVsTilemapLayer(Z,X,$,it,nt,at)}},canCollide:function(X,Z){return X&&Z&&(X.collisionMask&Z.collisionCategory)!==0&&(Z.collisionMask&X.collisionCategory)!==0},collideSpriteVsSprite:function(X,Z,$,it,nt,at){var ht=X.isBody?X:X.body,dt=Z.isBody?Z:Z.body;return this.canCollide(ht,dt)?(this.separate(ht,dt,it,nt,at)&&($&&$.call(nt,X,Z),this._total++),!0):!1},collideSpriteVsGroup:function(X,Z,$,it,nt,at){var ht=X.isBody?X:X.body;if(!(Z.getLength()===0||!ht||!ht.enable||ht.checkCollision.none||!this.canCollide(ht,Z))){var dt,vt,ft;if(this.useTree||Z.physicsType===r.STATIC_BODY){var gt=this.treeMinMax;gt.minX=ht.left,gt.minY=ht.top,gt.maxX=ht.right,gt.maxY=ht.bottom;var wt=Z.physicsType===r.DYNAMIC_BODY?this.tree.search(gt):this.staticTree.search(gt);for(vt=wt.length,dt=0;dt<vt;dt++)ft=wt[dt],!(ht===ft||!ft.enable||ft.checkCollision.none||!Z.contains(ft.gameObject))&&this.separate(ht,ft,it,nt,at)&&($&&$.call(nt,ht.gameObject,ft.gameObject),this._total++)}else{var bt=Z.getChildren(),xt=Z.children.entries.indexOf(X);for(vt=bt.length,dt=0;dt<vt;dt++)ft=bt[dt].body,!(!ft||dt===xt||!ft.enable)&&this.separate(ht,ft,it,nt,at)&&($&&$.call(nt,ht.gameObject,ft.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(X,Z,$,it,nt,at){if(!this.canCollide(X,Z))return!1;var ht=X.getChildren();if(ht.length===0)return!1;for(var dt=!1,vt=0;vt<ht.length;vt++)(ht[vt].body||ht[vt].isBody)&&this.collideSpriteVsTilemapLayer(ht[vt],Z,$,it,nt,at)&&(dt=!0);return dt},collideTiles:function(X,Z,$,it,nt){return Z.length===0||X.body&&!X.body.enable||X.isBody&&!X.enable?!1:this.collideSpriteVsTilesHandler(X,Z,$,it,nt,!1,!1)},overlapTiles:function(X,Z,$,it,nt){return Z.length===0||X.body&&!X.body.enable||X.isBody&&!X.enable?!1:this.collideSpriteVsTilesHandler(X,Z,$,it,nt,!0,!1)},collideSpriteVsTilemapLayer:function(X,Z,$,it,nt,at){var ht=X.isBody?X:X.body;if(!ht.enable||ht.checkCollision.none||!this.canCollide(ht,Z))return!1;var dt=Z.layer,vt=ht.x-dt.tileWidth*Z.scaleX,ft=ht.y-dt.tileHeight*Z.scaleY,gt=ht.width+dt.tileWidth*Z.scaleX,wt=ht.height+dt.tileHeight*Z.scaleY,bt=at?null:this.tileFilterOptions,xt=_(vt,ft,gt,wt,bt,Z.scene.cameras.main,Z.layer);return xt.length===0?!1:this.collideSpriteVsTilesHandler(X,xt,$,it,nt,at,!0)},collideSpriteVsTilesHandler:function(X,Z,$,it,nt,at,ht){for(var dt=X.isBody?X:X.body,vt,ft={left:0,right:0,top:0,bottom:0},gt,wt=!1,bt=0;bt<Z.length;bt++){vt=Z[bt],gt=vt.tilemapLayer;var xt=gt.tileToWorldXY(vt.x,vt.y);ft.left=xt.x,ft.top=xt.y,ft.right=ft.left+vt.width*gt.scaleX,ft.bottom=ft.top+vt.height*gt.scaleY,Q(ft,dt)&&(!it||it.call(nt,X,vt))&&R(vt,X)&&(at||F(bt,dt,vt,ft,gt,this.TILE_BIAS,ht))&&(this._total++,wt=!0,$&&$.call(nt,X,vt),at&&dt.onOverlap?this.emit(p.TILE_OVERLAP,X,vt,dt):dt.onCollide&&this.emit(p.TILE_COLLIDE,X,vt,dt))}return wt},collideGroupVsGroup:function(X,Z,$,it,nt,at){if(!(X.getLength()===0||Z.getLength()===0||!this.canCollide(X,Z)))for(var ht=X.getChildren(),dt=0;dt<ht.length;dt++)this.collideSpriteVsGroup(ht[dt],Z,$,it,nt,at)},wrap:function(X,Z){X.body?this.wrapObject(X,Z):X.getChildren?this.wrapArray(X.getChildren(),Z):Array.isArray(X)?this.wrapArray(X,Z):this.wrapObject(X,Z)},wrapArray:function(X,Z){for(var $=0;$<X.length;$++)this.wrapObject(X[$],Z)},wrapObject:function(X,Z){Z===void 0&&(Z=0),X.x=H(X.x,this.bounds.left-Z,this.bounds.right+Z),X.y=H(X.y,this.bounds.top-Z,this.bounds.bottom+Z)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});y.exports=J},1093:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setAcceleration:function(i,u){return this.body.acceleration.set(i,u),this},setAccelerationX:function(i){return this.body.acceleration.x=i,this},setAccelerationY:function(i){return this.body.acceleration.y=i,this}};y.exports=P},59023:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setAngularVelocity:function(i){return this.body.angularVelocity=i,this},setAngularAcceleration:function(i){return this.body.angularAcceleration=i,this},setAngularDrag:function(i){return this.body.angularDrag=i,this}};y.exports=P},62069:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setBounce:function(i,u){return this.body.bounce.set(i,u),this},setBounceX:function(i){return this.body.bounce.x=i,this},setBounceY:function(i){return this.body.bounce.y=i,this},setCollideWorldBounds:function(i,u,x,c){return this.body.setCollideWorldBounds(i,u,x,c),this}};y.exports=P},78389:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(79599),x={setCollisionCategory:function(c){var h=this.body?this.body:this;return h.collisionCategory=c,this},willCollideWith:function(c){var h=this.body?this.body:this;return(h.collisionMask&c)!==0},addCollidesWith:function(c){var h=this.body?this.body:this;return h.collisionMask=h.collisionMask|c,this},removeCollidesWith:function(c){var h=this.body?this.body:this;return h.collisionMask=h.collisionMask&~c,this},setCollidesWith:function(c){var h=this.body?this.body:this;return h.collisionMask=u(c),this},resetCollisionCategory:function(){var c=this.body?this.body:this;return c.collisionCategory=1,c.collisionMask=2147483647,this}};y.exports=x},87118:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setDebug:function(i,u,x){return this.debugShowBody=i,this.debugShowVelocity=u,this.debugBodyColor=x,this},setDebugBodyColor:function(i){return this.body.debugBodyColor=i,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(i){this.body.debugShowBody=i}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(i){this.body.debugShowVelocity=i}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(i){this.body.debugBodyColor=i}}};y.exports=P},52819:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setDrag:function(i,u){return this.body.drag.set(i,u),this},setDragX:function(i){return this.body.drag.x=i,this},setDragY:function(i){return this.body.drag.y=i,this},setDamping:function(i){return this.body.useDamping=i,this}};y.exports=P},4074:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setDirectControl:function(i){return this.body.setDirectControl(i),this},enableBody:function(i,u,x,c,h){return i&&this.body.reset(u,x),c&&(this.body.gameObject.active=!0),h&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(i,u){return i===void 0&&(i=!1),u===void 0&&(u=!1),this.body.stop(),this.body.enable=!1,i&&(this.body.gameObject.active=!1),u&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};y.exports=P},40831:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setFriction:function(i,u){return this.body.friction.set(i,u),this},setFrictionX:function(i){return this.body.friction.x=i,this},setFrictionY:function(i){return this.body.friction.y=i,this}};y.exports=P},26775:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setGravity:function(i,u){return this.body.gravity.set(i,u),this},setGravityX:function(i){return this.body.gravity.x=i,this},setGravityY:function(i){return this.body.gravity.y=i,this}};y.exports=P},9437:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setImmovable:function(i){return i===void 0&&(i=!0),this.body.immovable=i,this}};y.exports=P},30621:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setMass:function(i){return this.body.mass=i,this}};y.exports=P},72441:(y,P,i)=>{var u=i(47956),x=i(96503),c=i(2044),h=i(81491),o=function(r,a,d,n,p,g){var v=u(r,a-n,d-n,2*n,2*n,p,g);if(v.length===0)return v;for(var f=new x(a,d,n),b=new x,C=[],_=0;_<v.length;_++){var M=v[_];M.isCircle?(b.setTo(M.center.x,M.center.y,M.halfWidth),c(f,b)&&C.push(M)):h(f,M)&&C.push(M)}return C};y.exports=o},47956:y=>{var P=function(i,u,x,c,h,o,r){o===void 0&&(o=!0),r===void 0&&(r=!1);var a=[],d=[],n=i.treeMinMax;if(n.minX=u,n.minY=x,n.maxX=u+c,n.maxY=x+h,r&&(d=i.staticTree.search(n)),o&&i.useTree)a=i.tree.search(n);else if(o){var p=i.bodies,g={position:{x:u,y:x},left:u,top:x,right:u+c,bottom:x+h,isCircle:!1},v=i.intersects;p.iterate(function(f){v(f,g)&&a.push(f)})}return d.concat(a)};y.exports=P},62121:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setPushable:function(i){return i===void 0&&(i=!0),this.body.pushable=i,this}};y.exports=P},29384:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setOffset:function(i,u){return this.body.setOffset(i,u),this},setSize:function(i,u,x){return this.body.setSize(i,u,x),this},setBodySize:function(i,u,x){return this.body.setSize(i,u,x),this},setCircle:function(i,u,x){return this.body.setCircle(i,u,x),this}};y.exports=P},15098:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setVelocity:function(i,u){return this.body.setVelocity(i,u),this},setVelocityX:function(i){return this.body.setVelocityX(i),this},setVelocityY:function(i){return this.body.setVelocityY(i),this},setMaxVelocity:function(i,u){return this.body.maxVelocity.set(i,u),this}};y.exports=P},92209:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Acceleration:i(1093),Angular:i(59023),Bounce:i(62069),Collision:i(78389),Debug:i(87118),Drag:i(52819),Enable:i(4074),Friction:i(40831),Gravity:i(26775),Immovable:i(9437),Mass:i(30621),OverlapCirc:i(72441),OverlapRect:i(47956),Pushable:i(62121),Size:i(29384),Velocity:i(15098)}},37747:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};y.exports=P},20009:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="collide"},36768:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="overlap"},60473:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pause"},89954:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="resume"},61804:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="tilecollide"},7161:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="tileoverlap"},34689:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="worldbounds"},16006:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="worldstep"},63012:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={COLLIDE:i(20009),OVERLAP:i(36768),PAUSE:i(60473),RESUME:i(89954),TILE_COLLIDE:i(61804),TILE_OVERLAP:i(7161),WORLD_BOUNDS:i(34689),WORLD_STEP:i(16006)}},27064:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(37747),x=i(79291),c={ArcadePhysics:i(86689),Body:i(37742),Collider:i(79342),Components:i(92209),Events:i(63012),Factory:i(66022),GetCollidesWith:i(79599),GetOverlapX:i(64897),GetOverlapY:i(45170),SeparateX:i(14087),SeparateY:i(89936),Group:i(60758),Image:i(71289),Sprite:i(13759),StaticBody:i(72624),StaticGroup:i(71464),Tilemap:i(55173),World:i(82248)};c=x(!1,c,u),y.exports=c},96602:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.collisionCallback?!i.collisionCallback.call(i.collisionCallbackContext,u,i):i.layer.callbacks[i.index]?!i.layer.callbacks[i.index].callback.call(i.layer.callbacks[i.index].callbackContext,u,i):!0};y.exports=P},36294:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){u<0?(i.blocked.none=!1,i.blocked.left=!0):u>0&&(i.blocked.none=!1,i.blocked.right=!0),i.position.x-=u,i.updateCenter(),i.bounce.x===0?i.velocity.x=0:i.velocity.x=-i.velocity.x*i.bounce.x};y.exports=P},67013:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){u<0?(i.blocked.none=!1,i.blocked.up=!0):u>0&&(i.blocked.none=!1,i.blocked.down=!0),i.position.y-=u,i.updateCenter(),i.bounce.y===0?i.velocity.y=0:i.velocity.y=-i.velocity.y*i.bounce.y};y.exports=P},40012:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(21329),x=i(53442),c=i(2483),h=function(o,r,a,d,n,p,g){var v=d.left,f=d.top,b=d.right,C=d.bottom,_=a.faceLeft||a.faceRight,M=a.faceTop||a.faceBottom;if(g||(_=!0,M=!0),!_&&!M)return!1;var E=0,A=0,R=0,L=1;if(r.deltaAbsX()>r.deltaAbsY()?R=-1:r.deltaAbsX()<r.deltaAbsY()&&(L=-1),r.deltaX()!==0&&r.deltaY()!==0&&_&&M&&(R=Math.min(Math.abs(r.position.x-b),Math.abs(r.right-v)),L=Math.min(Math.abs(r.position.y-C),Math.abs(r.bottom-f))),R<L){if(_&&(E=u(r,a,v,b,p,g),E!==0&&!c(d,r)))return!0;M&&(A=x(r,a,f,C,p,g))}else{if(M&&(A=x(r,a,f,C,p,g),A!==0&&!c(d,r)))return!0;_&&(E=u(r,a,v,b,p,g))}return E!==0||A!==0};y.exports=h},21329:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(36294),x=function(c,h,o,r,a,d){var n=0,p=h.faceLeft,g=h.faceRight,v=h.collideLeft,f=h.collideRight;return d||(p=!0,g=!0,v=!0,f=!0),c.deltaX()<0&&f&&c.checkCollision.left?g&&c.x<r&&(n=c.x-r,n<-a&&(n=0)):c.deltaX()>0&&v&&c.checkCollision.right&&p&&c.right>o&&(n=c.right-o,n>a&&(n=0)),n!==0&&(c.customSeparateX?c.overlapX=n:u(c,n)),n};y.exports=x},53442:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(67013),x=function(c,h,o,r,a,d){var n=0,p=h.faceTop,g=h.faceBottom,v=h.collideUp,f=h.collideDown;return d||(p=!0,g=!0,v=!0,f=!0),c.deltaY()<0&&f&&c.checkCollision.up?g&&c.y<r&&(n=c.y-r,n<-a&&(n=0)):c.deltaY()>0&&v&&c.checkCollision.down&&p&&c.bottom>o&&(n=c.bottom-o,n>a&&(n=0)),n!==0&&(c.customSeparateY?c.overlapY=n:u(c,n)),n};y.exports=x},2483:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return!(u.right<=i.left||u.bottom<=i.top||u.position.x>=i.right||u.position.y>=i.bottom)};y.exports=P},55173:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u={ProcessTileCallbacks:i(96602),ProcessTileSeparationX:i(36294),ProcessTileSeparationY:i(67013),SeparateTile:i(40012),TileCheckX:i(21329),TileCheckY:i(53442),TileIntersectsBody:i(2483)};y.exports=u},44563:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Arcade:i(27064),Matter:i(3875)}},68174:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(26099),c=new u({initialize:function(){this.boundsCenter=new x,this.centerDiff=new x},parseBody:function(h){if(h=h.hasOwnProperty("body")?h.body:h,!h.hasOwnProperty("bounds")||!h.hasOwnProperty("centerOfMass"))return!1;var o=this.boundsCenter,r=this.centerDiff,a=h.bounds.max.x-h.bounds.min.x,d=h.bounds.max.y-h.bounds.min.y,n=a*h.centerOfMass.x,p=d*h.centerOfMass.y;return o.set(a/2,d/2),r.set(n-o.x,p-o.y),!0},getTopLeft:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new x(o+a.x+d.x,r+a.y+d.y)}return!1},getTopCenter:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new x(o+d.x,r+a.y+d.y)}return!1},getTopRight:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new x(o-(a.x-d.x),r+a.y+d.y)}return!1},getLeftCenter:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new x(o+a.x+d.x,r+d.y)}return!1},getCenter:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.centerDiff;return new x(o+a.x,r+a.y)}return!1},getRightCenter:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new x(o-(a.x-d.x),r+d.y)}return!1},getBottomLeft:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new x(o+a.x+d.x,r-(a.y-d.y))}return!1},getBottomCenter:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new x(o+d.x,r-(a.y-d.y))}return!1},getBottomRight:function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),this.parseBody(h)){var a=this.boundsCenter,d=this.centerDiff;return new x(o-(a.x-d.x),r-(a.y-d.y))}return!1}});y.exports=c},19933:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(6790);u.Body=i(22562),u.Composite=i(69351),u.World=i(4372),u.Collision=i(52284),u.Detector=i(81388),u.Pairs=i(99561),u.Pair=i(4506),u.Query=i(73296),u.Resolver=i(66272),u.Constraint=i(48140),u.Common=i(53402),u.Engine=i(48413),u.Events=i(35810),u.Sleeping=i(53614),u.Plugin=i(73832),u.Bodies=i(66280),u.Composites=i(74116),u.Axes=i(66615),u.Bounds=i(15647),u.Svg=i(74058),u.Vector=i(31725),u.Vertices=i(41598),u.World.add=u.Composite.add,u.World.remove=u.Composite.remove,u.World.addComposite=u.Composite.addComposite,u.World.addBody=u.Composite.addBody,u.World.addConstraint=u.Composite.addConstraint,u.World.clear=u.Composite.clear,y.exports=u},28137:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66280),x=i(83419),c=i(74116),h=i(48140),o=i(74058),r=i(75803),a=i(23181),d=i(34803),n=i(73834),p=i(19496),g=i(85791),v=i(98713),f=i(41598),b=new x({initialize:function(C){this.world=C,this.scene=C.scene,this.sys=C.scene.sys},rectangle:function(C,_,M,E,A){var R=u.rectangle(C,_,M,E,A);return this.world.add(R),R},trapezoid:function(C,_,M,E,A,R){var L=u.trapezoid(C,_,M,E,A,R);return this.world.add(L),L},circle:function(C,_,M,E,A){var R=u.circle(C,_,M,E,A);return this.world.add(R),R},polygon:function(C,_,M,E,A){var R=u.polygon(C,_,M,E,A);return this.world.add(R),R},fromVertices:function(C,_,M,E,A,R,L){typeof M=="string"&&(M=f.fromPath(M));var Y=u.fromVertices(C,_,M,E,A,R,L);return this.world.add(Y),Y},fromPhysicsEditor:function(C,_,M,E,A){A===void 0&&(A=!0);var R=p.parseBody(C,_,M,E);return A&&!this.world.has(R)&&this.world.add(R),R},fromSVG:function(C,_,M,E,A,R){E===void 0&&(E=1),A===void 0&&(A={}),R===void 0&&(R=!0);for(var L=M.getElementsByTagName("path"),Y=[],F=0;F<L.length;F++){var N=o.pathToVertices(L[F],30);E!==1&&f.scale(N,E,E),Y.push(N)}var z=u.fromVertices(C,_,Y,A);return R&&this.world.add(z),z},fromJSON:function(C,_,M,E,A){E===void 0&&(E={}),A===void 0&&(A=!0);var R=g.parseBody(C,_,M,E);return R&&A&&this.world.add(R),R},imageStack:function(C,_,M,E,A,R,L,Y,F){L===void 0&&(L=0),Y===void 0&&(Y=0),F===void 0&&(F={});var N=this.world,z=this.sys.displayList;F.addToWorld=!1;var U=c.stack(M,E,A,R,L,Y,function(q,Q){var K=new a(N,q,Q,C,_,F);return z.add(K),K.body});return N.add(U),U},stack:function(C,_,M,E,A,R,L){var Y=c.stack(C,_,M,E,A,R,L);return this.world.add(Y),Y},pyramid:function(C,_,M,E,A,R,L){var Y=c.pyramid(C,_,M,E,A,R,L);return this.world.add(Y),Y},chain:function(C,_,M,E,A,R){return c.chain(C,_,M,E,A,R)},mesh:function(C,_,M,E,A){return c.mesh(C,_,M,E,A)},newtonsCradle:function(C,_,M,E,A){var R=c.newtonsCradle(C,_,M,E,A);return this.world.add(R),R},car:function(C,_,M,E,A){var R=c.car(C,_,M,E,A);return this.world.add(R),R},softBody:function(C,_,M,E,A,R,L,Y,F,N){var z=c.softBody(C,_,M,E,A,R,L,Y,F,N);return this.world.add(z),z},joint:function(C,_,M,E,A){return this.constraint(C,_,M,E,A)},spring:function(C,_,M,E,A){return this.constraint(C,_,M,E,A)},constraint:function(C,_,M,E,A){E===void 0&&(E=1),A===void 0&&(A={}),A.bodyA=C.type==="body"?C:C.body,A.bodyB=_.type==="body"?_:_.body,isNaN(M)||(A.length=M),A.stiffness=E;var R=h.create(A);return this.world.add(R),R},worldConstraint:function(C,_,M,E){M===void 0&&(M=1),E===void 0&&(E={}),E.bodyB=C.type==="body"?C:C.body,isNaN(_)||(E.length=_),E.stiffness=M;var A=h.create(E);return this.world.add(A),A},mouseSpring:function(C){return this.pointerConstraint(C)},pointerConstraint:function(C){C===void 0&&(C={}),C.hasOwnProperty("render")||(C.render={visible:!1});var _=new v(this.scene,this.world,C);return this.world.add(_.constraint),_},image:function(C,_,M,E,A){var R=new a(this.world,C,_,M,E,A);return this.sys.displayList.add(R),R},tileBody:function(C,_){return new n(this.world,C,_)},sprite:function(C,_,M,E,A){var R=new d(this.world,C,_,M,E,A);return this.sys.displayList.add(R),this.sys.updateList.add(R),R},gameObject:function(C,_,M){return r(this.world,C,_,M)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});y.exports=b},75803:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(31884),x=i(95540),c=i(26099);function h(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}var o=function(r,a,d,n){d===void 0&&(d={}),n===void 0&&(n=!0);var p=a.x,g=a.y;a.body={temp:!0,position:{x:p,y:g}};var v=[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity];if(v.forEach(function(b){for(var C in b)h(b[C])?Object.defineProperty(a,C,{get:b[C].get,set:b[C].set}):Object.defineProperty(a,C,{value:b[C]})}),a.world=r,a._tempVec2=new c(p,g),d.hasOwnProperty("type")&&d.type==="body")a.setExistingBody(d,n);else{var f=x(d,"shape",null);f||(f="rectangle"),d.addToWorld=n,a.setBody(f,d)}return a};y.exports=o},23181:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(31884),c=i(95643),h=i(95540),o=i(88571),r=i(72699),a=i(26099),d=new u({Extends:o,Mixins:[x.Bounce,x.Collision,x.Force,x.Friction,x.Gravity,x.Mass,x.Sensor,x.SetBody,x.Sleep,x.Static,x.Transform,x.Velocity,r],initialize:function(n,p,g,v,f,b){c.call(this,n.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(v,f),this.setSizeToFrame(),this.setOrigin(),this.world=n,this._tempVec2=new a(p,g);var C=h(b,"shape",null);C?this.setBody(C,b):this.setRectangle(this.width,this.height,b),this.setPosition(p,g),this.initPipeline(),this.initPostPipeline(!0)}});y.exports=d},42045:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(60461),x=i(66615),c=i(66280),h=i(22562),o=i(68174),r=i(15647),a=i(83419),d=i(52284),n=i(53402),p=i(69351),g=i(74116),v=i(48140),f=i(81388),b=i(20339),C=i(28137),_=i(95540),M=i(35154),E=i(46975),A=i(4506),R=i(99561),L=i(37277),Y=i(73296),F=i(66272),N=i(44594),z=i(74058),U=i(31725),q=i(41598),Q=i(68243);n.setDecomp(i(55973));var K=new a({initialize:function(et){this.scene=et,this.systems=et.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=h,this.composite=p,this.collision=d,this.detector=f,this.pair=A,this.pairs=R,this.query=Y,this.resolver=F,this.constraint=v,this.bodies=c,this.composites=g,this.axes=x,this.bounds=r,this.svg=z,this.vector=U,this.vertices=q,this.verts=q,this._tempVec2=U.create(),F._restingThresh=M(this.config,"restingThresh",4),F._restingThreshTangent=M(this.config,"restingThreshTangent",6),F._positionDampen=M(this.config,"positionDampen",.9),F._positionWarming=M(this.config,"positionWarming",.8),F._frictionNormalMultiplier=M(this.config,"frictionNormalMultiplier",5),et.sys.events.once(N.BOOT,this.boot,this),et.sys.events.on(N.START,this.start,this)},boot:function(){this.world=new Q(this.scene,this.config),this.add=new C(this.world),this.bodyBounds=new o,this.systems.events.once(N.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new Q(this.scene,this.config),this.add=new C(this.world));var et=this.systems.events;et.on(N.UPDATE,this.world.update,this.world),et.on(N.POST_UPDATE,this.world.postUpdate,this.world),et.once(N.SHUTDOWN,this.shutdown,this)},getConfig:function(){var et=this.systems.game.config.physics,H=this.systems.settings.physics,J=E(_(H,"matter",{}),_(et,"matter",{}));return J},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(et,H){this.world.step(et,H)},containsPoint:function(et,H,J){et=this.getMatterBodies(et);var X=U.create(H,J),Z=Y.point(et,X);return Z.length>0},intersectPoint:function(et,H,J){J=this.getMatterBodies(J);var X=U.create(et,H),Z=[],$=Y.point(J,X);return $.forEach(function(it){Z.indexOf(it)===-1&&Z.push(it)}),Z},intersectRect:function(et,H,J,X,Z,$){Z===void 0&&(Z=!1),$=this.getMatterBodies($);var it={min:{x:et,y:H},max:{x:et+J,y:H+X}},nt=[],at=Y.region($,it,Z);return at.forEach(function(ht){nt.indexOf(ht)===-1&&nt.push(ht)}),nt},intersectRay:function(et,H,J,X,Z,$){Z===void 0&&(Z=1),$=this.getMatterBodies($);for(var it=[],nt=Y.ray($,U.create(et,H),U.create(J,X),Z),at=0;at<nt.length;at++)it.push(nt[at].body);return it},intersectBody:function(et,H){H=this.getMatterBodies(H);for(var J=[],X=Y.collides(et,H),Z=0;Z<X.length;Z++){var $=X[Z];$.bodyA===et?J.push($.bodyB):J.push($.bodyA)}return J},overlap:function(et,H,J,X,Z){J===void 0&&(J=null),X===void 0&&(X=null),Z===void 0&&(Z=J),Array.isArray(et)||(et=[et]),et=this.getMatterBodies(et),H=this.getMatterBodies(H);for(var $=!1,it=0;it<et.length;it++)for(var nt=et[it],at=Y.collides(nt,H),ht=0;ht<at.length;ht++){var dt=at[ht],vt=dt.bodyA.id===nt.id?dt.bodyB:dt.bodyA;if(!X||X.call(Z,nt,vt,dt)){if($=!0,J)J.call(Z,nt,vt,dt);else if(!X)return!0}}return $},setCollisionCategory:function(et,H){return et=this.getMatterBodies(et),et.forEach(function(J){J.collisionFilter.category=H}),this},setCollisionGroup:function(et,H){return et=this.getMatterBodies(et),et.forEach(function(J){J.collisionFilter.group=H}),this},setCollidesWith:function(et,H){et=this.getMatterBodies(et);var J=0;if(!Array.isArray(H))J=H;else for(var X=0;X<H.length;X++)J|=H[X];return et.forEach(function(Z){Z.collisionFilter.mask=J}),this},getMatterBodies:function(et){if(!et)return this.world.getAllBodies();Array.isArray(et)||(et=[et]);for(var H=[],J=0;J<et.length;J++){var X=et[J].hasOwnProperty("body")?et[J].body:et[J];H.push(X)}return H},setVelocity:function(et,H,J){et=this.getMatterBodies(et);var X=this._tempVec2;return X.x=H,X.y=J,et.forEach(function(Z){h.setVelocity(Z,X)}),this},setVelocityX:function(et,H){et=this.getMatterBodies(et);var J=this._tempVec2;return J.x=H,et.forEach(function(X){J.y=X.velocity.y,h.setVelocity(X,J)}),this},setVelocityY:function(et,H){et=this.getMatterBodies(et);var J=this._tempVec2;return J.y=H,et.forEach(function(X){J.x=X.velocity.x,h.setVelocity(X,J)}),this},setAngularVelocity:function(et,H){return et=this.getMatterBodies(et),et.forEach(function(J){h.setAngularVelocity(J,H)}),this},applyForce:function(et,H){et=this.getMatterBodies(et);var J=this._tempVec2;return et.forEach(function(X){J.x=X.position.x,J.y=X.position.y,h.applyForce(X,J,H)}),this},applyForceFromPosition:function(et,H,J,X){et=this.getMatterBodies(et);var Z=this._tempVec2;return et.forEach(function($){X===void 0&&(X=$.angle),Z.x=J*Math.cos(X),Z.y=J*Math.sin(X),h.applyForce($,H,Z)}),this},applyForceFromAngle:function(et,H,J){et=this.getMatterBodies(et);var X=this._tempVec2;return et.forEach(function(Z){J===void 0&&(J=Z.angle),X.x=H*Math.cos(J),X.y=H*Math.sin(J),h.applyForce(Z,{x:Z.position.x,y:Z.position.y},X)}),this},getConstraintLength:function(et){var H=et.pointA.x,J=et.pointA.y,X=et.pointB.x,Z=et.pointB.y;return et.bodyA&&(H+=et.bodyA.position.x,J+=et.bodyA.position.y),et.bodyB&&(X+=et.bodyB.position.x,Z+=et.bodyB.position.y),b(H,J,X,Z)},alignBody:function(et,H,J,X){et=et.hasOwnProperty("body")?et.body:et;var Z;switch(X){case u.TOP_LEFT:case u.LEFT_TOP:Z=this.bodyBounds.getTopLeft(et,H,J);break;case u.TOP_CENTER:Z=this.bodyBounds.getTopCenter(et,H,J);break;case u.TOP_RIGHT:case u.RIGHT_TOP:Z=this.bodyBounds.getTopRight(et,H,J);break;case u.LEFT_CENTER:Z=this.bodyBounds.getLeftCenter(et,H,J);break;case u.CENTER:Z=this.bodyBounds.getCenter(et,H,J);break;case u.RIGHT_CENTER:Z=this.bodyBounds.getRightCenter(et,H,J);break;case u.LEFT_BOTTOM:case u.BOTTOM_LEFT:Z=this.bodyBounds.getBottomLeft(et,H,J);break;case u.BOTTOM_CENTER:Z=this.bodyBounds.getBottomCenter(et,H,J);break;case u.BOTTOM_RIGHT:case u.RIGHT_BOTTOM:Z=this.bodyBounds.getBottomRight(et,H,J);break}return Z&&h.setPosition(et,Z),this},shutdown:function(){var et=this.systems.events;this.world&&(et.off(N.UPDATE,this.world.update,this.world),et.off(N.POST_UPDATE,this.world.postUpdate,this.world)),et.off(N.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(N.START,this.start,this),this.scene=null,this.systems=null}});L.register("MatterPhysics",K,"matterPhysics"),y.exports=K},34803:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(9674),x=i(83419),c=i(31884),h=i(95643),o=i(95540),r=i(72699),a=i(68287),d=i(26099),n=new x({Extends:a,Mixins:[c.Bounce,c.Collision,c.Force,c.Friction,c.Gravity,c.Mass,c.Sensor,c.SetBody,c.Sleep,c.Static,c.Transform,c.Velocity,r],initialize:function(p,g,v,f,b,C){h.call(this,p.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new u(this),this.setTexture(f,b),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new d(g,v);var _=o(C,"shape",null);_?this.setBody(_,C):this.setRectangle(this.width,this.height,C),this.setPosition(g,v),this.initPipeline(),this.initPostPipeline(!0)}});y.exports=n},73834:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66280),x=i(22562),c=i(83419),h=i(31884),o=i(62644),r=i(50792),a=i(95540),d=i(97022),n=i(41598),p=new c({Extends:r,Mixins:[h.Bounce,h.Collision,h.Friction,h.Gravity,h.Mass,h.Sensor,h.Sleep,h.Static],initialize:function(g,v,f){r.call(this),this.tile=v,this.world=g,v.physics.matterBody&&v.physics.matterBody.destroy(),v.physics.matterBody=this;var b=a(f,"body",null),C=a(f,"addToWorld",!0);if(b)this.setBody(b,C);else{var _=v.getCollisionGroup(),M=a(_,"objects",[]);M.length>0?this.setFromTileCollision(f):this.setFromTileRectangle(f)}if(v.flipX||v.flipY){var E={x:v.getCenterX(),y:v.getCenterY()},A=v.flipX?-1:1,R=v.flipY?-1:1;x.scale(b,A,R,E)}},setFromTileRectangle:function(g){g===void 0&&(g={}),d(g,"isStatic")||(g.isStatic=!0),d(g,"addToWorld")||(g.addToWorld=!0);var v=this.tile.getBounds(),f=v.x+v.width/2,b=v.y+v.height/2,C=u.rectangle(f,b,v.width,v.height,g);return this.setBody(C,g.addToWorld),this},setFromTileCollision:function(g){g===void 0&&(g={}),d(g,"isStatic")||(g.isStatic=!0),d(g,"addToWorld")||(g.addToWorld=!0);for(var v=this.tile.tilemapLayer.scaleX,f=this.tile.tilemapLayer.scaleY,b=this.tile.getLeft(),C=this.tile.getTop(),_=this.tile.getCollisionGroup(),M=a(_,"objects",[]),E=[],A=0;A<M.length;A++){var R=M[A],L=b+R.x*v,Y=C+R.y*f,F=R.width*v,N=R.height*f,z=null;if(R.rectangle)z=u.rectangle(L+F/2,Y+N/2,F,N,g);else if(R.ellipse)z=u.circle(L+F/2,Y+N/2,F/2,g);else if(R.polygon||R.polyline){var U=R.polygon?R.polygon:R.polyline,q=U.map(function(H){return{x:H.x*v,y:H.y*f}}),Q=n.create(q),K=n.centre(Q);L+=K.x,Y+=K.y,z=u.fromVertices(L,Y,Q,g)}z&&E.push(z)}if(E.length===1)this.setBody(E[0],g.addToWorld);else if(E.length>1){var et=o(g);et.parts=E,this.setBody(x.create(et),et.addToWorld)}return this},setBody:function(g,v){return v===void 0&&(v=!0),this.body&&this.removeBody(),this.body=g,this.body.gameObject=this,v&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});y.exports=p},19496:(y,P,i)=>{/**
* @author       Joachim Grill <joachim@codeandweb.com>
* @author       Richard Davey <rich@phaser.io>
* @copyright    2018 CodeAndWeb GmbH
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66280),x=i(22562),c=i(53402),h=i(95540),o=i(41598),r={parseBody:function(a,d,n,p){p===void 0&&(p={});for(var g=h(n,"fixtures",[]),v=[],f=0;f<g.length;f++)for(var b=this.parseFixture(g[f]),C=0;C<b.length;C++)v.push(b[C]);var _=c.clone(n,!0);c.extend(_,p,!0),delete _.fixtures,delete _.type;var M=x.create(_);return x.setParts(M,v),x.setPosition(M,{x:a,y:d}),M},parseFixture:function(a){var d=c.extend({},!1,a);delete d.circle,delete d.vertices;var n;if(a.circle){var p=h(a.circle,"x"),g=h(a.circle,"y"),v=h(a.circle,"radius");n=[u.circle(p,g,v,d)]}else a.vertices&&(n=this.parseVertices(a.vertices,d));return n},parseVertices:function(a,d){d===void 0&&(d={});for(var n=[],p=0;p<a.length;p++)o.clockwiseSort(a[p]),n.push(x.create(c.extend({position:o.centre(a[p]),vertices:a[p]},d)));return u.flagCoincidentParts(n)}};y.exports=r},85791:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66280),x=i(22562),c={parseBody:function(h,o,r,a){a===void 0&&(a={});var d,n=r.vertices;if(n.length===1)a.vertices=n[0],d=x.create(a),u.flagCoincidentParts(d.parts);else{for(var p=[],g=0;g<n.length;g++){var v=x.create({vertices:n[g]});p.push(v)}u.flagCoincidentParts(p),a.parts=p,d=x.create(a)}return d.label=r.label,x.setPosition(d,{x:h,y:o}),d}};y.exports=c},98713:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(15647),x=i(83419),c=i(69351),h=i(48140),o=i(81388),r=i(1121),a=i(8214),d=i(46975),n=i(53614),p=i(26099),g=i(41598),v=new x({initialize:function(f,b,C){C===void 0&&(C={});var _={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=f,this.world=b,this.camera=null,this.pointer=null,this.active=!0,this.position=new p,this.body=null,this.part=null,this.constraint=h.create(d(C,_)),this.world.on(r.BEFORE_UPDATE,this.update,this),f.sys.input.on(a.POINTER_DOWN,this.onDown,this),f.sys.input.on(a.POINTER_UP,this.onUp,this)},onDown:function(f){this.pointer||(this.pointer=f,this.camera=f.camera)},onUp:function(f){f===this.pointer&&(this.pointer=null)},getBody:function(f){var b=this.position,C=this.constraint;this.camera.getWorldPoint(f.x,f.y,b);for(var _=c.allBodies(this.world.localWorld),M=0;M<_.length;M++){var E=_[M];if(!E.ignorePointer&&u.contains(E.bounds,b)&&o.canCollide(E.collisionFilter,C.collisionFilter)&&this.hitTestBody(E,b))return this.world.emit(r.DRAG_START,E,this.part,this),!0}return!1},hitTestBody:function(f,b){for(var C=this.constraint,_=f.parts.length,M=_>1?1:0,E=M;E<_;E++){var A=f.parts[E];if(g.contains(A.vertices,b))return C.pointA=b,C.pointB={x:b.x-f.position.x,y:b.y-f.position.y},C.bodyB=f,C.angleB=f.angle,n.set(f,!1),this.part=A,this.body=f,!0}return!1},update:function(){var f=this.pointer,b=this.body;if(!this.active||!f){b&&this.stopDrag();return}if(!f.isDown&&b){this.stopDrag();return}else if(f.isDown){if(!this.camera||!b&&!this.getBody(f))return;b=this.body;var C=this.position,_=this.constraint;this.camera.getWorldPoint(f.x,f.y,C),_.pointA.x=C.x,_.pointA.y=C.y,n.set(b,!1),this.world.emit(r.DRAG,b,this)}},stopDrag:function(){var f=this.body,b=this.constraint;b.bodyB=null,b.pointB=null,this.pointer=null,this.body=null,this.part=null,f&&this.world.emit(r.DRAG_END,f,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(r.BEFORE_UPDATE,this.update),this.scene.sys.input.off(a.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(a.POINTER_UP,this.onUp,this)}});y.exports=v},68243:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66280),x=i(22562),c=i(83419),h=i(53402),o=i(69351),r=i(48413),a=i(50792),d=i(1121),n=i(95540),p=i(35154),g=i(22562),v=i(35810),f=i(73834),b=i(4372),C=i(13037),_=i(31725),M=new c({Extends:a,initialize:function(E,A){a.call(this),this.scene=E,this.engine=r.create(A),this.localWorld=this.engine.world;var R=p(A,"gravity",null);R?this.setGravity(R.x,R.y,R.scale):R===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=p(A,"enabled",!0),this.getDelta=p(A,"getDelta",this.update60Hz);var L=n(A,"runner",{}),Y=n(L,"fps",!1);Y&&(L.delta=1e3/n(L,"fps",60)),this.runner=C.create(L),this.autoUpdate=p(A,"autoUpdate",!0);var F=p(A,"debug",!1);if(this.drawDebug=typeof F=="object"?!0:F,this.debugGraphic,this.debugConfig={showAxes:n(F,"showAxes",!1),showAngleIndicator:n(F,"showAngleIndicator",!1),angleColor:n(F,"angleColor",15208787),showBroadphase:n(F,"showBroadphase",!1),broadphaseColor:n(F,"broadphaseColor",16757760),showBounds:n(F,"showBounds",!1),boundsColor:n(F,"boundsColor",16777215),showVelocity:n(F,"showVelocity",!1),velocityColor:n(F,"velocityColor",44783),showCollisions:n(F,"showCollisions",!1),collisionColor:n(F,"collisionColor",16094476),showSeparations:n(F,"showSeparations",!1),separationColor:n(F,"separationColor",16753920),showBody:n(F,"showBody",!0),showStaticBody:n(F,"showStaticBody",!0),showInternalEdges:n(F,"showInternalEdges",!1),renderFill:n(F,"renderFill",!1),renderLine:n(F,"renderLine",!0),fillColor:n(F,"fillColor",1075465),fillOpacity:n(F,"fillOpacity",1),lineColor:n(F,"lineColor",2678297),lineOpacity:n(F,"lineOpacity",1),lineThickness:n(F,"lineThickness",1),staticFillColor:n(F,"staticFillColor",857979),staticLineColor:n(F,"staticLineColor",1255396),showSleeping:n(F,"showSleeping",!1),staticBodySleepOpacity:n(F,"staticBodySleepOpacity",.7),sleepFillColor:n(F,"sleepFillColor",4605510),sleepLineColor:n(F,"sleepLineColor",10066585),showSensors:n(F,"showSensors",!0),sensorFillColor:n(F,"sensorFillColor",857979),sensorLineColor:n(F,"sensorLineColor",1255396),showPositions:n(F,"showPositions",!0),positionSize:n(F,"positionSize",4),positionColor:n(F,"positionColor",14697178),showJoint:n(F,"showJoint",!0),jointColor:n(F,"jointColor",14737474),jointLineOpacity:n(F,"jointLineOpacity",1),jointLineThickness:n(F,"jointLineThickness",2),pinSize:n(F,"pinSize",4),pinColor:n(F,"pinColor",4382944),springColor:n(F,"springColor",14697184),anchorColor:n(F,"anchorColor",15724527),anchorSize:n(F,"anchorSize",4),showConvexHulls:n(F,"showConvexHulls",!1),hullColor:n(F,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),n(A,"setBounds",!1)){var N=A.setBounds;if(typeof N=="boolean")this.setBounds();else{var z=n(N,"x",0),U=n(N,"y",0),q=n(N,"width",E.sys.scale.width),Q=n(N,"height",E.sys.scale.height),K=n(N,"thickness",64),et=n(N,"left",!0),H=n(N,"right",!0),J=n(N,"top",!0),X=n(N,"bottom",!0);this.setBounds(z,U,q,Q,K,et,H,J,X)}}},setCompositeRenderStyle:function(E){var A=E.bodies,R=E.constraints,L=E.composites,Y,F,N;for(Y=0;Y<A.length;Y++)F=A[Y],N=F.render,this.setBodyRenderStyle(F,N.lineColor,N.lineOpacity,N.lineThickness,N.fillColor,N.fillOpacity);for(Y=0;Y<R.length;Y++)F=R[Y],N=F.render,this.setConstraintRenderStyle(F,N.lineColor,N.lineOpacity,N.lineThickness,N.pinSize,N.anchorColor,N.anchorSize);for(Y=0;Y<L.length;Y++)F=L[Y],this.setCompositeRenderStyle(F);return this},setBodyRenderStyle:function(E,A,R,L,Y,F){var N=E.render,z=this.debugConfig;return N?(A==null&&(A=E.isStatic?z.staticLineColor:z.lineColor),R==null&&(R=z.lineOpacity),L==null&&(L=z.lineThickness),Y==null&&(Y=E.isStatic?z.staticFillColor:z.fillColor),F==null&&(F=z.fillOpacity),A!==!1&&(N.lineColor=A),R!==!1&&(N.lineOpacity=R),L!==!1&&(N.lineThickness=L),Y!==!1&&(N.fillColor=Y),F!==!1&&(N.fillOpacity=F),this):this},setConstraintRenderStyle:function(E,A,R,L,Y,F,N){var z=E.render,U=this.debugConfig;if(!z)return this;if(A==null){var q=z.type;q==="line"?A=U.jointColor:q==="pin"?A=U.pinColor:q==="spring"&&(A=U.springColor)}return R==null&&(R=U.jointLineOpacity),L==null&&(L=U.jointLineThickness),Y==null&&(Y=U.pinSize),F==null&&(F=U.anchorColor),N==null&&(N=U.anchorSize),A!==!1&&(z.lineColor=A),R!==!1&&(z.lineOpacity=R),L!==!1&&(z.lineThickness=L),Y!==!1&&(z.pinSize=Y),F!==!1&&(z.anchorColor=F),N!==!1&&(z.anchorSize=N),this},setEventsProxy:function(){var E=this,A=this.engine,R=this.localWorld;this.drawDebug&&(v.on(R,"compositeModified",function(L){E.setCompositeRenderStyle(L)}),v.on(R,"beforeAdd",function(L){for(var Y=[].concat(L.object),F=0;F<Y.length;F++){var N=Y[F],z=N.render;N.type==="body"?E.setBodyRenderStyle(N,z.lineColor,z.lineOpacity,z.lineThickness,z.fillColor,z.fillOpacity):N.type==="composite"?E.setCompositeRenderStyle(N):N.type==="constraint"&&E.setConstraintRenderStyle(N,z.lineColor,z.lineOpacity,z.lineThickness,z.pinSize,z.anchorColor,z.anchorSize)}})),v.on(R,"beforeAdd",function(L){E.emit(d.BEFORE_ADD,L)}),v.on(R,"afterAdd",function(L){E.emit(d.AFTER_ADD,L)}),v.on(R,"beforeRemove",function(L){E.emit(d.BEFORE_REMOVE,L)}),v.on(R,"afterRemove",function(L){E.emit(d.AFTER_REMOVE,L)}),v.on(A,"beforeUpdate",function(L){E.emit(d.BEFORE_UPDATE,L)}),v.on(A,"afterUpdate",function(L){E.emit(d.AFTER_UPDATE,L)}),v.on(A,"collisionStart",function(L){var Y=L.pairs,F,N;Y.length>0&&Y.map(function(z){F=z.bodyA,N=z.bodyB,F.gameObject&&F.gameObject.emit("collide",F,N,z),N.gameObject&&N.gameObject.emit("collide",N,F,z),v.trigger(F,"onCollide",{pair:z}),v.trigger(N,"onCollide",{pair:z}),F.onCollideCallback&&F.onCollideCallback(z),N.onCollideCallback&&N.onCollideCallback(z),F.onCollideWith[N.id]&&F.onCollideWith[N.id](N,z),N.onCollideWith[F.id]&&N.onCollideWith[F.id](F,z)}),E.emit(d.COLLISION_START,L,F,N)}),v.on(A,"collisionActive",function(L){var Y=L.pairs,F,N;Y.length>0&&Y.map(function(z){F=z.bodyA,N=z.bodyB,F.gameObject&&F.gameObject.emit("collideActive",F,N,z),N.gameObject&&N.gameObject.emit("collideActive",N,F,z),v.trigger(F,"onCollideActive",{pair:z}),v.trigger(N,"onCollideActive",{pair:z}),F.onCollideActiveCallback&&F.onCollideActiveCallback(z),N.onCollideActiveCallback&&N.onCollideActiveCallback(z)}),E.emit(d.COLLISION_ACTIVE,L,F,N)}),v.on(A,"collisionEnd",function(L){var Y=L.pairs,F,N;Y.length>0&&Y.map(function(z){F=z.bodyA,N=z.bodyB,F.gameObject&&F.gameObject.emit("collideEnd",F,N,z),N.gameObject&&N.gameObject.emit("collideEnd",N,F,z),v.trigger(F,"onCollideEnd",{pair:z}),v.trigger(N,"onCollideEnd",{pair:z}),F.onCollideEndCallback&&F.onCollideEndCallback(z),N.onCollideEndCallback&&N.onCollideEndCallback(z)}),E.emit(d.COLLISION_END,L,F,N)})},setBounds:function(E,A,R,L,Y,F,N,z,U){return E===void 0&&(E=0),A===void 0&&(A=0),R===void 0&&(R=this.scene.sys.scale.width),L===void 0&&(L=this.scene.sys.scale.height),Y===void 0&&(Y=64),F===void 0&&(F=!0),N===void 0&&(N=!0),z===void 0&&(z=!0),U===void 0&&(U=!0),this.updateWall(F,"left",E-Y,A-Y,Y,L+Y*2),this.updateWall(N,"right",E+R,A-Y,Y,L+Y*2),this.updateWall(z,"top",E,A-Y,R,Y),this.updateWall(U,"bottom",E,A+L,R,Y),this},updateWall:function(E,A,R,L,Y,F){var N=this.walls[A];E?(N&&b.remove(this.localWorld,N),R+=Y/2,L+=F/2,this.walls[A]=this.create(R,L,Y,F,{isStatic:!0,friction:0,frictionStatic:0})):(N&&b.remove(this.localWorld,N),this.walls[A]=null)},createDebugGraphic:function(){var E=this.scene.sys.add.graphics({x:0,y:0});return E.setDepth(Number.MAX_VALUE),this.debugGraphic=E,this.drawDebug=!0,E},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(E,A,R){return E===void 0&&(E=0),A===void 0&&(A=1),R===void 0&&(R=.001),this.localWorld.gravity.x=E,this.localWorld.gravity.y=A,this.localWorld.gravity.scale=R,this},create:function(E,A,R,L,Y){var F=u.rectangle(E,A,R,L,Y);return b.add(this.localWorld,F),F},add:function(E){return b.add(this.localWorld,E),this},remove:function(E,A){Array.isArray(E)||(E=[E]);for(var R=0;R<E.length;R++){var L=E[R],Y=L.body?L.body:L;o.remove(this.localWorld,Y,A)}return this},removeConstraint:function(E,A){return o.remove(this.localWorld,E,A),this},convertTilemapLayer:function(E,A){var R=E.layer,L=E.getTilesWithin(0,0,R.width,R.height,{isColliding:!0});return this.convertTiles(L,A),this},convertTiles:function(E,A){if(E.length===0)return this;for(var R=0;R<E.length;R++)new f(this,E[R],A);return this},nextGroup:function(E){return g.nextGroup(E)},nextCategory:function(){return g.nextCategory()},pause:function(){return this.enabled=!1,this.emit(d.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=h.now(),this.emit(d.RESUME),this},update:function(E){if(!(!this.enabled||!this.autoUpdate)){var A=this.engine,R=this.runner,L=h.now(),Y=R.delta,F=0,N=E-R.timeLastTick;if((!N||!R.timeLastTick||N>Math.max(C._maxFrameDelta,R.maxFrameTime))&&(N=R.frameDelta||C._frameDeltaFallback),R.frameDeltaSmoothing){R.frameDeltaHistory.push(N),R.frameDeltaHistory=R.frameDeltaHistory.slice(-R.frameDeltaHistorySize);var z=R.frameDeltaHistory.slice(0).sort(),U=R.frameDeltaHistory.slice(z.length*C._smoothingLowerBound,z.length*C._smoothingUpperBound),q=C._mean(U);N=q||N}R.frameDeltaSnapping&&(N=1e3/Math.round(1e3/N)),R.frameDelta=N,R.timeLastTick=E,R.timeBuffer+=R.frameDelta,R.timeBuffer=h.clamp(R.timeBuffer,0,R.frameDelta+Y*C._timeBufferMargin),R.lastUpdatesDeferred=0;for(var Q=R.maxUpdates||Math.ceil(R.maxFrameTime/Y),K=h.now();Y>0&&R.timeBuffer>=Y*C._timeBufferMargin;){r.update(A,Y),R.timeBuffer-=Y,F+=1;var et=h.now()-L,H=h.now()-K,J=et+C._elapsedNextEstimate*H/F;if(F>=Q||J>R.maxFrameTime){R.lastUpdatesDeferred=Math.round(Math.max(0,R.timeBuffer/Y-C._timeBufferMargin));break}}}},step:function(E){r.update(this.engine,E)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(E){var A=E.hasOwnProperty("body")?E.body:E;return o.get(this.localWorld,A.id,A.type)!==null},getAllBodies:function(){return o.allBodies(this.localWorld)},getAllConstraints:function(){return o.allConstraints(this.localWorld)},getAllComposites:function(){return o.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var E=this.debugConfig,A=this.engine,R=this.debugGraphic,L=o.allBodies(this.localWorld);this.debugGraphic.clear(),E.showBroadphase&&A.broadphase.controller&&this.renderGrid(A.broadphase,R,E.broadphaseColor,.5),E.showBounds&&this.renderBodyBounds(L,R,E.boundsColor,.5),(E.showBody||E.showStaticBody)&&this.renderBodies(L),E.showJoint&&this.renderJoints(),(E.showAxes||E.showAngleIndicator)&&this.renderBodyAxes(L,R,E.showAxes,E.angleColor,.5),E.showVelocity&&this.renderBodyVelocity(L,R,E.velocityColor,1,2),E.showSeparations&&this.renderSeparations(A.pairs.list,R,E.separationColor),E.showCollisions&&this.renderCollisions(A.pairs.list,R,E.collisionColor)}},renderGrid:function(E,A,R,L){A.lineStyle(1,R,L);for(var Y=h.keys(E.buckets),F=0;F<Y.length;F++){var N=Y[F];if(!(E.buckets[N].length<2)){var z=N.split(/C|R/);A.strokeRect(parseInt(z[1],10)*E.bucketWidth,parseInt(z[2],10)*E.bucketHeight,E.bucketWidth,E.bucketHeight)}}return this},renderSeparations:function(E,A,R){A.lineStyle(1,R,1);for(var L=0;L<E.length;L++){var Y=E[L];if(Y.isActive){var F=Y.collision,N=F.bodyA,z=F.bodyB,U=N.position,q=z.position,Q=F.penetration,K=!N.isStatic&&!z.isStatic?4:1;z.isStatic&&(K=0),A.lineBetween(q.x,q.y,q.x-Q.x*K,q.y-Q.y*K),K=!N.isStatic&&!z.isStatic?4:1,N.isStatic&&(K=0),A.lineBetween(U.x,U.y,U.x-Q.x*K,U.y-Q.y*K)}}return this},renderCollisions:function(E,A,R){A.lineStyle(1,R,.5),A.fillStyle(R,1);var L,Y;for(L=0;L<E.length;L++)if(Y=E[L],!!Y.isActive)for(var F=0;F<Y.contactCount;F++){var N=Y.contacts[F],z=N.vertex;z&&A.fillRect(z.x-2,z.y-2,5,5)}for(L=0;L<E.length;L++)if(Y=E[L],!!Y.isActive){var U=Y.collision,q=Y.contacts;if(Y.contactCount>0){var Q=q[0].vertex.x,K=q[0].vertex.y;Y.contactCount===2&&(Q=(q[0].vertex.x+q[1].vertex.x)/2,K=(q[0].vertex.y+q[1].vertex.y)/2),U.bodyB===U.supports[0].body||U.bodyA.isStatic?A.lineBetween(Q-U.normal.x*8,K-U.normal.y*8,Q,K):A.lineBetween(Q+U.normal.x*8,K+U.normal.y*8,Q,K)}}return this},renderBodyBounds:function(E,A,R,L){A.lineStyle(1,R,L);for(var Y=0;Y<E.length;Y++){var F=E[Y];if(F.render.visible){var N=F.bounds;if(N)A.strokeRect(N.min.x,N.min.y,N.max.x-N.min.x,N.max.y-N.min.y);else for(var z=F.parts,U=z.length>1?1:0;U<z.length;U++){var q=z[U];A.strokeRect(q.bounds.min.x,q.bounds.min.y,q.bounds.max.x-q.bounds.min.x,q.bounds.max.y-q.bounds.min.y)}}}return this},renderBodyAxes:function(E,A,R,L,Y){A.lineStyle(1,L,Y);for(var F=0;F<E.length;F++){var N=E[F],z=N.parts;if(N.render.visible){var U,q,Q;if(R)for(q=z.length>1?1:0;q<z.length;q++)for(U=z[q],Q=0;Q<U.axes.length;Q++){var K=U.axes[Q];A.lineBetween(U.position.x,U.position.y,U.position.x+K.x*20,U.position.y+K.y*20)}else for(q=z.length>1?1:0;q<z.length;q++)for(U=z[q],Q=0;Q<U.axes.length;Q++)A.lineBetween(U.position.x,U.position.y,(U.vertices[0].x+U.vertices[U.vertices.length-1].x)/2,(U.vertices[0].y+U.vertices[U.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(E,A,R,L,Y){A.lineStyle(Y,R,L);for(var F=0;F<E.length;F++){var N=E[F];N.render.visible&&A.lineBetween(N.position.x,N.position.y,N.position.x+(N.position.x-N.positionPrev.x)*2,N.position.y+(N.position.y-N.positionPrev.y)*2)}return this},renderBodies:function(E){for(var A=this.debugGraphic,R=this.debugConfig,L=R.showBody,Y=R.showStaticBody,F=R.showSleeping,N=R.showInternalEdges,z=R.showConvexHulls,U=R.renderFill,q=R.renderLine,Q=R.staticBodySleepOpacity,K=R.sleepFillColor,et=R.sleepLineColor,H=R.hullColor,J=0;J<E.length;J++){var X=E[J];if(X.render.visible&&!(!Y&&X.isStatic||!L&&!X.isStatic)){var Z=X.render.lineColor,$=X.render.lineOpacity,it=X.render.lineThickness,nt=X.render.fillColor,at=X.render.fillOpacity;F&&X.isSleeping&&(X.isStatic?($*=Q,at*=Q):(Z=et,nt=K)),U||(nt=null),q||(Z=null),this.renderBody(X,A,N,Z,$,it,nt,at);var ht=X.parts.length;z&&ht>1&&this.renderConvexHull(X,A,H,it)}}},renderBody:function(E,A,R,L,Y,F,N,z){L===void 0&&(L=null),Y===void 0&&(Y=null),F===void 0&&(F=1),N===void 0&&(N=null),z===void 0&&(z=null);for(var U=this.debugConfig,q=U.sensorFillColor,Q=U.sensorLineColor,K=E.parts,et=K.length,H=et>1?1:0;H<et;H++){var J=K[H],X=J.render,Z=X.opacity;if(!(!X.visible||Z===0||J.isSensor&&!U.showSensors)){var $=J.circleRadius;if(A.beginPath(),J.isSensor?(N!==null&&A.fillStyle(q,z*Z),L!==null&&A.lineStyle(F,Q,Y*Z)):(N!==null&&A.fillStyle(N,z*Z),L!==null&&A.lineStyle(F,L,Y*Z)),$)A.arc(J.position.x,J.position.y,$,0,2*Math.PI);else{var it=J.vertices,nt=it.length;A.moveTo(it[0].x,it[0].y);for(var at=1;at<nt;at++){var ht=it[at];if(!it[at-1].isInternal||R?A.lineTo(ht.x,ht.y):A.moveTo(ht.x,ht.y),at<nt&&ht.isInternal&&!R){var dt=(at+1)%nt;A.moveTo(it[dt].x,it[dt].y)}}A.closePath()}N!==null&&A.fillPath(),L!==null&&A.strokePath()}}if(U.showPositions&&!E.isStatic){var vt=E.position.x,ft=E.position.y,gt=Math.ceil(U.positionSize/2);A.fillStyle(U.positionColor,1),A.fillRect(vt-gt,ft-gt,U.positionSize,U.positionSize)}return this},renderConvexHull:function(E,A,R,L){L===void 0&&(L=1);var Y=E.parts,F=Y.length;if(F>1){var N=E.vertices;A.lineStyle(L,R),A.beginPath(),A.moveTo(N[0].x,N[0].y);for(var z=1;z<N.length;z++)A.lineTo(N[z].x,N[z].y);A.lineTo(N[0].x,N[0].y),A.strokePath()}return this},renderJoints:function(){for(var E=this.debugGraphic,A=o.allConstraints(this.localWorld),R=0;R<A.length;R++){var L=A[R].render,Y=L.lineColor,F=L.lineOpacity,N=L.lineThickness,z=L.pinSize,U=L.anchorColor,q=L.anchorSize;this.renderConstraint(A[R],E,Y,F,N,z,U,q)}},renderConstraint:function(E,A,R,L,Y,F,N,z){var U=E.render;if(!U.visible||!E.pointA||!E.pointB)return this;A.lineStyle(Y,R,L);var q=E.bodyA,Q=E.bodyB,K,et;if(q?K=_.add(q.position,E.pointA):K=E.pointA,U.type==="pin")A.strokeCircle(K.x,K.y,F);else{if(Q?et=_.add(Q.position,E.pointB):et=E.pointB,A.beginPath(),A.moveTo(K.x,K.y),U.type==="spring")for(var H=_.sub(et,K),J=_.perp(_.normalise(H)),X=Math.ceil(h.clamp(E.length/5,12,20)),Z,$=1;$<X;$+=1)Z=$%2===0?1:-1,A.lineTo(K.x+H.x*($/X)+J.x*Z*4,K.y+H.y*($/X)+J.y*Z*4);A.lineTo(et.x,et.y)}return A.strokePath(),U.anchors&&z>0&&(A.fillStyle(N),A.fillCircle(K.x,K.y,z),A.fillCircle(et.x,et.y,z)),this},resetCollisionIDs:function(){return x._nextCollidingGroupId=1,x._nextNonCollidingGroupId=-1,x._nextCategory=1,this},shutdown:function(){v.off(this.engine),this.removeAllListeners(),b.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});y.exports=M},70410:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setBounce:function(i){return this.body.restitution=i,this}};y.exports=P},66968:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setCollisionCategory:function(i){return this.body.collisionFilter.category=i,this},setCollisionGroup:function(i){return this.body.collisionFilter.group=i,this},setCollidesWith:function(i){var u=0;if(!Array.isArray(i))u=i;else for(var x=0;x<i.length;x++)u|=i[x];return this.body.collisionFilter.mask=u,this},setOnCollide:function(i){return this.body.onCollideCallback=i,this},setOnCollideEnd:function(i){return this.body.onCollideEndCallback=i,this},setOnCollideActive:function(i){return this.body.onCollideActiveCallback=i,this},setOnCollideWith:function(i,u){Array.isArray(i)||(i=[i]);for(var x=0;x<i.length;x++){var c=i[x].hasOwnProperty("body")?i[x].body:i[x];this.body.setOnCollideWith(c,u)}return this}};y.exports=P},51607:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(22562),x={applyForce:function(c){return this._tempVec2.set(this.body.position.x,this.body.position.y),u.applyForce(this.body,this._tempVec2,c),this},applyForceFrom:function(c,h){return u.applyForce(this.body,c,h),this},thrust:function(c){var h=this.body.angle;return this._tempVec2.set(c*Math.cos(h),c*Math.sin(h)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(c){var h=this.body.angle-Math.PI/2;return this._tempVec2.set(c*Math.cos(h),c*Math.sin(h)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(c){var h=this.body.angle+Math.PI/2;return this._tempVec2.set(c*Math.cos(h),c*Math.sin(h)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(c){var h=this.body.angle-Math.PI;return this._tempVec2.set(c*Math.cos(h),c*Math.sin(h)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};y.exports=x},5436:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setFriction:function(i,u,x){return this.body.friction=i,u!==void 0&&(this.body.frictionAir=u),x!==void 0&&(this.body.frictionStatic=x),this},setFrictionAir:function(i){return this.body.frictionAir=i,this},setFrictionStatic:function(i){return this.body.frictionStatic=i,this}};y.exports=P},39858:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setIgnoreGravity:function(i){return this.body.ignoreGravity=i,this}};y.exports=P},37302:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(22562),x=i(26099),c={setMass:function(h){return u.setMass(this.body,h),this},setDensity:function(h){return u.setDensity(this.body,h),this},centerOfMass:{get:function(){return new x(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};y.exports=c},39132:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={setSensor:function(i){return this.body.isSensor=i,this},isSensor:function(){return this.body.isSensor}};y.exports=P},57772:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(66280),x=i(22562),c=i(43855),h=i(95540),o=i(19496),r=i(85791),a=i(41598),d={setRectangle:function(n,p,g){return this.setBody({type:"rectangle",width:n,height:p},g)},setCircle:function(n,p){return this.setBody({type:"circle",radius:n},p)},setPolygon:function(n,p,g){return this.setBody({type:"polygon",sides:p,radius:n},g)},setTrapezoid:function(n,p,g,v){return this.setBody({type:"trapezoid",width:n,height:p,slope:g},v)},setExistingBody:function(n,p){p===void 0&&(p=!0),this.body&&this.world.remove(this.body,!0),this.body=n;for(var g=0;g<n.parts.length;g++)n.parts[g].gameObject=this;var v=this;if(n.destroy=function(){v.world.remove(v.body,!0),v.body.gameObject=null},p&&(this.world.has(n)&&this.world.remove(n,!0),this.world.add(n)),this._originComponent){var f=n.render.sprite.xOffset,b=n.render.sprite.yOffset,C=n.centerOfMass.x,_=n.centerOfMass.y;if(c(C,.5)&&c(_,.5))this.setOrigin(f+.5,b+.5);else{var M=n.centerOffset.x,E=n.centerOffset.y;this.setOrigin(f+M/this.displayWidth,b+E/this.displayHeight)}}return this},setBody:function(n,p){if(!n)return this;var g;typeof n=="string"&&(n={type:n});var v=h(n,"type","rectangle"),f=h(n,"x",this._tempVec2.x),b=h(n,"y",this._tempVec2.y),C=h(n,"width",this.width),_=h(n,"height",this.height);switch(v){case"rectangle":g=u.rectangle(f,b,C,_,p);break;case"circle":var M=h(n,"radius",Math.max(C,_)/2),E=h(n,"maxSides",25);g=u.circle(f,b,M,p,E);break;case"trapezoid":var A=h(n,"slope",.5);g=u.trapezoid(f,b,C,_,A,p);break;case"polygon":var R=h(n,"sides",5),L=h(n,"radius",Math.max(C,_)/2);g=u.polygon(f,b,R,L,p);break;case"fromVertices":case"fromVerts":var Y=h(n,"verts",null);if(Y)if(typeof Y=="string"&&(Y=a.fromPath(Y)),this.body&&!this.body.hasOwnProperty("temp"))x.setVertices(this.body,Y),g=this.body;else{var F=h(n,"flagInternal",!1),N=h(n,"removeCollinear",.01),z=h(n,"minimumArea",10);g=u.fromVertices(f,b,Y,p,F,N,z)}break;case"fromPhysicsEditor":g=o.parseBody(f,b,n,p);break;case"fromPhysicsTracer":g=r.parseBody(f,b,n,p);break}return g&&this.setExistingBody(g,n.addToWorld),this}};y.exports=d},38083:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(1121),x=i(53614),c=i(35810),h={setToSleep:function(){return x.set(this.body,!0),this},setAwake:function(){return x.set(this.body,!1),this},setSleepThreshold:function(o){return o===void 0&&(o=60),this.body.sleepThreshold=o,this},setSleepEvents:function(o,r){return this.setSleepStartEvent(o),this.setSleepEndEvent(r),this},setSleepStartEvent:function(o){if(o){var r=this.world;c.on(this.body,"sleepStart",function(a){r.emit(u.SLEEP_START,a,this)})}else c.off(this.body,"sleepStart");return this},setSleepEndEvent:function(o){if(o){var r=this.world;c.on(this.body,"sleepEnd",function(a){r.emit(u.SLEEP_END,a,this)})}else c.off(this.body,"sleepEnd");return this}};y.exports=h},90556:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(22562),x={setStatic:function(c){return u.setStatic(this.body,c),this},isStatic:function(){return this.body.isStatic}};y.exports=x},85436:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(22562),x=i(36383),c=i(86554),h=i(30954),o=4,r={x:{get:function(){return this.body.position.x},set:function(a){this._tempVec2.set(a,this.y),u.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(a){this._tempVec2.set(this.x,a),u.setPosition(this.body,this._tempVec2)}},scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(a){this.setScale(a,a)}},scaleX:{get:function(){return this._scaleX},set:function(a){var d=1/this._scaleX,n=1/this._scaleY;this._scaleX=a,this._scaleX===0?this.renderFlags&=~o:this.renderFlags|=o,u.scale(this.body,d,n),u.scale(this.body,a,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(a){var d=1/this._scaleX,n=1/this._scaleY;this._scaleY=a,this._scaleY===0?this.renderFlags&=~o:this.renderFlags|=o,u.scale(this.body,d,n),u.scale(this.body,this._scaleX,a)}},angle:{get:function(){return h(this.body.angle*x.RAD_TO_DEG)},set:function(a){this.rotation=h(a)*x.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(a){this._rotation=c(a),u.setAngle(this.body,this._rotation)}},setPosition:function(a,d){return a===void 0&&(a=0),d===void 0&&(d=a),this._tempVec2.set(a,d),u.setPosition(this.body,this._tempVec2),this},setRotation:function(a){return a===void 0&&(a=0),this._rotation=c(a),u.setAngle(this.body,a),this},setFixedRotation:function(){return u.setInertia(this.body,1/0),this},setAngle:function(a){return a===void 0&&(a=0),this.angle=a,u.setAngle(this.body,this.rotation),this},setScale:function(a,d,n){a===void 0&&(a=1),d===void 0&&(d=a);var p=1/this._scaleX,g=1/this._scaleY;return this._scaleX=a,this._scaleY=d,u.scale(this.body,p,g,n),u.scale(this.body,a,d,n),this}};y.exports=r},42081:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(22562),x={setVelocityX:function(c){return this._tempVec2.set(c,this.body.velocity.y),u.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(c){return this._tempVec2.set(this.body.velocity.x,c),u.setVelocity(this.body,this._tempVec2),this},setVelocity:function(c,h){return this._tempVec2.set(c,h),u.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return u.getVelocity(this.body)},setAngularVelocity:function(c){return u.setAngularVelocity(this.body,c),this},getAngularVelocity:function(){return u.getAngularVelocity(this.body)},setAngularSpeed:function(c){return u.setAngularSpeed(this.body,c),this},getAngularSpeed:function(){return u.getAngularSpeed(this.body)}};y.exports=x},31884:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Bounce:i(70410),Collision:i(66968),Force:i(51607),Friction:i(5436),Gravity:i(39858),Mass:i(37302),Sensor:i(39132),SetBody:i(57772),Sleep:i(38083),Static:i(90556),Transform:i(85436),Velocity:i(42081)}},85608:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="afteradd"},1213:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="afterremove"},25968:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="afterupdate"},67205:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="beforeadd"},39438:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="beforeremove"},44823:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="beforeupdate"},92593:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="collisionactive"},60128:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="collisionend"},76861:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="collisionstart"},92362:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="dragend"},76408:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="drag"},93971:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="dragstart"},5656:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pause"},47861:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="resume"},79099:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="sleepend"},35906:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="sleepstart"},1121:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={AFTER_ADD:i(85608),AFTER_REMOVE:i(1213),AFTER_UPDATE:i(25968),BEFORE_ADD:i(67205),BEFORE_REMOVE:i(39438),BEFORE_UPDATE:i(44823),COLLISION_ACTIVE:i(92593),COLLISION_END:i(60128),COLLISION_START:i(76861),DRAG_END:i(92362),DRAG:i(76408),DRAG_START:i(93971),PAUSE:i(5656),RESUME:i(47861),SLEEP_END:i(79099),SLEEP_START:i(35906)}},3875:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={BodyBounds:i(68174),Components:i(31884),Events:i(1121),Factory:i(28137),MatterGameObject:i(75803),Image:i(23181),Matter:i(19933),MatterPhysics:i(42045),PolyDecomp:i(55973),Sprite:i(34803),TileBody:i(73834),PhysicsEditorParser:i(19496),PhysicsJSONParser:i(85791),PointerConstraint:i(98713),World:i(68243)}},22562:(y,P,i)=>{var u={};y.exports=u;var x=i(41598),c=i(31725),h=i(53614),o=i(53402),r=i(15647),a=i(66615);(function(){u._timeCorrection=!0,u._inertiaScale=4,u._nextCollidingGroupId=1,u._nextNonCollidingGroupId=-1,u._nextCategory=1,u._baseDelta=16.666666666666668,u.create=function(n){var p={id:o.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:n.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!n.hasOwnProperty("position")&&n.hasOwnProperty("vertices")?n.position=x.centre(n.vertices):n.hasOwnProperty("vertices")||(p.vertices=x.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var g=o.extend(p,n);return d(g,n),g.setOnCollideWith=function(v,f){return f?this.onCollideWith[v.id]=f:delete this.onCollideWith[v.id],this},g},u.nextGroup=function(n){return n?u._nextNonCollidingGroupId--:u._nextCollidingGroupId++},u.nextCategory=function(){return u._nextCategory=u._nextCategory<<1,u._nextCategory};var d=function(n,p){if(p=p||{},u.set(n,{bounds:n.bounds||r.create(n.vertices),positionPrev:n.positionPrev||c.clone(n.position),anglePrev:n.anglePrev||n.angle,vertices:n.vertices,parts:n.parts||[n],isStatic:n.isStatic,isSleeping:n.isSleeping,parent:n.parent||n}),x.rotate(n.vertices,n.angle,n.position),a.rotate(n.axes,n.angle),r.update(n.bounds,n.vertices,n.velocity),u.set(n,{axes:p.axes||n.axes,area:p.area||n.area,mass:p.mass||n.mass,inertia:p.inertia||n.inertia}),n.parts.length===1){var g=n.bounds,v=n.centerOfMass,f=n.centerOffset,b=g.max.x-g.min.x,C=g.max.y-g.min.y;v.x=-(g.min.x-n.position.x)/b,v.y=-(g.min.y-n.position.y)/C,f.x=b*v.x,f.y=C*v.y}};u.set=function(n,p,g){var v;typeof p=="string"&&(v=p,p={},p[v]=g);for(v in p)if(Object.prototype.hasOwnProperty.call(p,v))switch(g=p[v],v){case"isStatic":u.setStatic(n,g);break;case"isSleeping":h.set(n,g);break;case"mass":u.setMass(n,g);break;case"density":u.setDensity(n,g);break;case"inertia":u.setInertia(n,g);break;case"vertices":u.setVertices(n,g);break;case"position":u.setPosition(n,g);break;case"angle":u.setAngle(n,g);break;case"velocity":u.setVelocity(n,g);break;case"angularVelocity":u.setAngularVelocity(n,g);break;case"speed":u.setSpeed(n,g);break;case"angularSpeed":u.setAngularSpeed(n,g);break;case"parts":u.setParts(n,g);break;case"centre":u.setCentre(n,g);break;default:n[v]=g}},u.setStatic=function(n,p){for(var g=0;g<n.parts.length;g++){var v=n.parts[g];p?(v.isStatic||(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia}),v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null),v.isStatic=p}},u.setMass=function(n,p){var g=n.inertia/(n.mass/6);n.inertia=g*(p/6),n.inverseInertia=1/n.inertia,n.mass=p,n.inverseMass=1/n.mass,n.density=n.mass/n.area},u.setDensity=function(n,p){u.setMass(n,p*n.area),n.density=p},u.setInertia=function(n,p){n.inertia=p,n.inverseInertia=1/n.inertia},u.setVertices=function(n,p){p[0].body===n?n.vertices=p:n.vertices=x.create(p,n),n.axes=a.fromVertices(n.vertices),n.area=x.area(n.vertices),u.setMass(n,n.density*n.area);var g=x.centre(n.vertices);x.translate(n.vertices,g,-1),u.setInertia(n,u._inertiaScale*x.inertia(n.vertices,n.mass)),x.translate(n.vertices,n.position),r.update(n.bounds,n.vertices,n.velocity)},u.setParts=function(n,p,g){var v;for(p=p.slice(0),n.parts.length=0,n.parts.push(n),n.parent=n,v=0;v<p.length;v++){var f=p[v];f!==n&&(f.parent=n,n.parts.push(f))}if(n.parts.length!==1){if(g=typeof g<"u"?g:!0,g){var b=[];for(v=0;v<p.length;v++)b=b.concat(p[v].vertices);x.clockwiseSort(b);var C=x.hull(b),_=x.centre(C);u.setVertices(n,C),x.translate(n.vertices,_)}var M=u._totalProperties(n),E=M.centre.x,A=M.centre.y,R=n.bounds,L=n.centerOfMass,Y=n.centerOffset;r.update(R,n.vertices,n.velocity),L.x=-(R.min.x-E)/(R.max.x-R.min.x),L.y=-(R.min.y-A)/(R.max.y-R.min.y),Y.x=E,Y.y=A,n.area=M.area,n.parent=n,n.position.x=E,n.position.y=A,n.positionPrev.x=E,n.positionPrev.y=A,u.setMass(n,M.mass),u.setInertia(n,M.inertia),u.setPosition(n,M.centre)}},u.setCentre=function(n,p,g){g?(n.positionPrev.x+=p.x,n.positionPrev.y+=p.y,n.position.x+=p.x,n.position.y+=p.y):(n.positionPrev.x=p.x-(n.position.x-n.positionPrev.x),n.positionPrev.y=p.y-(n.position.y-n.positionPrev.y),n.position.x=p.x,n.position.y=p.y)},u.setPosition=function(n,p,g){var v=c.sub(p,n.position);g?(n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.velocity.x=v.x,n.velocity.y=v.y,n.speed=c.magnitude(v)):(n.positionPrev.x+=v.x,n.positionPrev.y+=v.y);for(var f=0;f<n.parts.length;f++){var b=n.parts[f];b.position.x+=v.x,b.position.y+=v.y,x.translate(b.vertices,v),r.update(b.bounds,b.vertices,n.velocity)}},u.setAngle=function(n,p,g){var v=p-n.angle;g?(n.anglePrev=n.angle,n.angularVelocity=v,n.angularSpeed=Math.abs(v)):n.anglePrev+=v;for(var f=0;f<n.parts.length;f++){var b=n.parts[f];b.angle+=v,x.rotate(b.vertices,v,n.position),a.rotate(b.axes,v),r.update(b.bounds,b.vertices,n.velocity),f>0&&c.rotateAbout(b.position,v,n.position,b.position)}},u.setVelocity=function(n,p){var g=n.deltaTime/u._baseDelta;n.positionPrev.x=n.position.x-p.x*g,n.positionPrev.y=n.position.y-p.y*g,n.velocity.x=(n.position.x-n.positionPrev.x)/g,n.velocity.y=(n.position.y-n.positionPrev.y)/g,n.speed=c.magnitude(n.velocity)},u.getVelocity=function(n){var p=u._baseDelta/n.deltaTime;return{x:(n.position.x-n.positionPrev.x)*p,y:(n.position.y-n.positionPrev.y)*p}},u.getSpeed=function(n){return c.magnitude(u.getVelocity(n))},u.setSpeed=function(n,p){u.setVelocity(n,c.mult(c.normalise(u.getVelocity(n)),p))},u.setAngularVelocity=function(n,p){var g=n.deltaTime/u._baseDelta;n.anglePrev=n.angle-p*g,n.angularVelocity=(n.angle-n.anglePrev)/g,n.angularSpeed=Math.abs(n.angularVelocity)},u.getAngularVelocity=function(n){return(n.angle-n.anglePrev)*u._baseDelta/n.deltaTime},u.getAngularSpeed=function(n){return Math.abs(u.getAngularVelocity(n))},u.setAngularSpeed=function(n,p){u.setAngularVelocity(n,o.sign(u.getAngularVelocity(n))*p)},u.translate=function(n,p,g){u.setPosition(n,c.add(n.position,p),g)},u.rotate=function(n,p,g,v){if(!g)u.setAngle(n,n.angle+p,v);else{var f=Math.cos(p),b=Math.sin(p),C=n.position.x-g.x,_=n.position.y-g.y;u.setPosition(n,{x:g.x+(C*f-_*b),y:g.y+(C*b+_*f)},v),u.setAngle(n,n.angle+p,v)}},u.scale=function(n,p,g,v){var f=0,b=0;v=v||n.position;for(var C=n.inertia===1/0,_=0;_<n.parts.length;_++){var M=n.parts[_];M.scale.x=p,M.scale.y=g,x.scale(M.vertices,p,g,v),M.axes=a.fromVertices(M.vertices),M.area=x.area(M.vertices),u.setMass(M,n.density*M.area),x.translate(M.vertices,{x:-M.position.x,y:-M.position.y}),u.setInertia(M,u._inertiaScale*x.inertia(M.vertices,M.mass)),x.translate(M.vertices,{x:M.position.x,y:M.position.y}),_>0&&(f+=M.area,b+=M.inertia),M.position.x=v.x+(M.position.x-v.x)*p,M.position.y=v.y+(M.position.y-v.y)*g,r.update(M.bounds,M.vertices,n.velocity)}n.parts.length>1&&(n.area=f,n.isStatic||(u.setMass(n,n.density*f),u.setInertia(n,b))),n.circleRadius&&(p===g?n.circleRadius*=p:n.circleRadius=null),C&&u.setInertia(n,1/0)},u.update=function(n,p){p=(typeof p<"u"?p:16.666666666666668)*n.timeScale;var g=p*p,v=u._timeCorrection?p/(n.deltaTime||p):1,f=1-n.frictionAir*(p/o._baseDelta),b=(n.position.x-n.positionPrev.x)*v,C=(n.position.y-n.positionPrev.y)*v;n.velocity.x=b*f+n.force.x/n.mass*g,n.velocity.y=C*f+n.force.y/n.mass*g,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.position.x+=n.velocity.x,n.position.y+=n.velocity.y,n.deltaTime=p,n.angularVelocity=(n.angle-n.anglePrev)*f*v+n.torque/n.inertia*g,n.anglePrev=n.angle,n.angle+=n.angularVelocity,n.speed=c.magnitude(n.velocity),n.angularSpeed=Math.abs(n.angularVelocity);for(var _=0;_<n.parts.length;_++){var M=n.parts[_];x.translate(M.vertices,n.velocity),_>0&&(M.position.x+=n.velocity.x,M.position.y+=n.velocity.y),n.angularVelocity!==0&&(x.rotate(M.vertices,n.angularVelocity,n.position),a.rotate(M.axes,n.angularVelocity),_>0&&c.rotateAbout(M.position,n.angularVelocity,n.position,M.position)),r.update(M.bounds,M.vertices,n.velocity)}},u.updateVelocities=function(n){var p=u._baseDelta/n.deltaTime,g=n.velocity;g.x=(n.position.x-n.positionPrev.x)*p,g.y=(n.position.y-n.positionPrev.y)*p,n.speed=Math.sqrt(g.x*g.x+g.y*g.y),n.angularVelocity=(n.angle-n.anglePrev)*p,n.angularSpeed=Math.abs(n.angularVelocity)},u.applyForce=function(n,p,g){var v={x:p.x-n.position.x,y:p.y-n.position.y};n.force.x+=g.x,n.force.y+=g.y,n.torque+=v.x*g.y-v.y*g.x},u._totalProperties=function(n){for(var p={mass:0,area:0,inertia:0,centre:{x:0,y:0}},g=n.parts.length===1?0:1;g<n.parts.length;g++){var v=n.parts[g],f=v.mass!==1/0?v.mass:1;p.mass+=f,p.area+=v.area,p.inertia+=v.inertia,p.centre=c.add(p.centre,c.mult(v.position,f))}return p.centre=c.div(p.centre,p.mass),p},u.wrap=function(n,p){var g=r.wrap(n.bounds,p);return g&&u.translate(n,g),g}})()},69351:(y,P,i)=>{var u={};y.exports=u;var x=i(35810),c=i(53402),h=i(15647),o=i(22562);(function(){u.create=function(r){return c.extend({id:c.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},r)},u.setModified=function(r,a,d,n){if(x.trigger(r,"compositeModified",r),r.isModified=a,a&&r.cache&&(r.cache.allBodies=null,r.cache.allConstraints=null,r.cache.allComposites=null),d&&r.parent&&u.setModified(r.parent,a,d,n),n)for(var p=0;p<r.composites.length;p++){var g=r.composites[p];u.setModified(g,a,d,n)}},u.add=function(r,a){var d=[].concat(a);x.trigger(r,"beforeAdd",{object:a});for(var n=0;n<d.length;n++){var p=d[n];switch(p.type){case"body":if(p.parent!==p){c.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}u.addBody(r,p);break;case"constraint":u.addConstraint(r,p);break;case"composite":u.addComposite(r,p);break;case"mouseConstraint":u.addConstraint(r,p.constraint);break}}return x.trigger(r,"afterAdd",{object:a}),r},u.remove=function(r,a,d){var n=[].concat(a);x.trigger(r,"beforeRemove",{object:a});for(var p=0;p<n.length;p++){var g=n[p];switch(g.type){case"body":u.removeBody(r,g,d);break;case"constraint":u.removeConstraint(r,g,d);break;case"composite":u.removeComposite(r,g,d);break;case"mouseConstraint":u.removeConstraint(r,g.constraint);break}}return x.trigger(r,"afterRemove",{object:a}),r},u.addComposite=function(r,a){return r.composites.push(a),a.parent=r,u.setModified(r,!0,!0,!1),r},u.removeComposite=function(r,a,d){var n=c.indexOf(r.composites,a);if(n!==-1){var p=u.allBodies(a);u.removeCompositeAt(r,n);for(var g=0;g<p.length;g++)p[g].sleepCounter=0}if(d)for(var g=0;g<r.composites.length;g++)u.removeComposite(r.composites[g],a,!0);return r},u.removeCompositeAt=function(r,a){return r.composites.splice(a,1),u.setModified(r,!0,!0,!1),r},u.addBody=function(r,a){return r.bodies.push(a),u.setModified(r,!0,!0,!1),r},u.removeBody=function(r,a,d){var n=c.indexOf(r.bodies,a);if(n!==-1&&(u.removeBodyAt(r,n),a.sleepCounter=0),d)for(var p=0;p<r.composites.length;p++)u.removeBody(r.composites[p],a,!0);return r},u.removeBodyAt=function(r,a){return r.bodies.splice(a,1),u.setModified(r,!0,!0,!1),r},u.addConstraint=function(r,a){return r.constraints.push(a),u.setModified(r,!0,!0,!1),r},u.removeConstraint=function(r,a,d){var n=c.indexOf(r.constraints,a);if(n!==-1&&u.removeConstraintAt(r,n),d)for(var p=0;p<r.composites.length;p++)u.removeConstraint(r.composites[p],a,!0);return r},u.removeConstraintAt=function(r,a){return r.constraints.splice(a,1),u.setModified(r,!0,!0,!1),r},u.clear=function(r,a,d){if(d)for(var n=0;n<r.composites.length;n++)u.clear(r.composites[n],a,!0);return a?r.bodies=r.bodies.filter(function(p){return p.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,u.setModified(r,!0,!0,!1),r},u.allBodies=function(r){if(r.cache&&r.cache.allBodies)return r.cache.allBodies;for(var a=[].concat(r.bodies),d=0;d<r.composites.length;d++)a=a.concat(u.allBodies(r.composites[d]));return r.cache&&(r.cache.allBodies=a),a},u.allConstraints=function(r){if(r.cache&&r.cache.allConstraints)return r.cache.allConstraints;for(var a=[].concat(r.constraints),d=0;d<r.composites.length;d++)a=a.concat(u.allConstraints(r.composites[d]));return r.cache&&(r.cache.allConstraints=a),a},u.allComposites=function(r){if(r.cache&&r.cache.allComposites)return r.cache.allComposites;for(var a=[].concat(r.composites),d=0;d<r.composites.length;d++)a=a.concat(u.allComposites(r.composites[d]));return r.cache&&(r.cache.allComposites=a),a},u.get=function(r,a,d){var n,p;switch(d){case"body":n=u.allBodies(r);break;case"constraint":n=u.allConstraints(r);break;case"composite":n=u.allComposites(r).concat(r);break}return n?(p=n.filter(function(g){return g.id.toString()===a.toString()}),p.length===0?null:p[0]):null},u.move=function(r,a,d){return u.remove(r,a),u.add(d,a),r},u.rebase=function(r){for(var a=u.allBodies(r).concat(u.allConstraints(r)).concat(u.allComposites(r)),d=0;d<a.length;d++)a[d].id=c.nextId();return r},u.translate=function(r,a,d){for(var n=d?u.allBodies(r):r.bodies,p=0;p<n.length;p++)o.translate(n[p],a);return r},u.rotate=function(r,a,d,n){for(var p=Math.cos(a),g=Math.sin(a),v=n?u.allBodies(r):r.bodies,f=0;f<v.length;f++){var b=v[f],C=b.position.x-d.x,_=b.position.y-d.y;o.setPosition(b,{x:d.x+(C*p-_*g),y:d.y+(C*g+_*p)}),o.rotate(b,a)}return r},u.scale=function(r,a,d,n,p){for(var g=p?u.allBodies(r):r.bodies,v=0;v<g.length;v++){var f=g[v],b=f.position.x-n.x,C=f.position.y-n.y;o.setPosition(f,{x:n.x+b*a,y:n.y+C*d}),o.scale(f,a,d)}return r},u.bounds=function(r){for(var a=u.allBodies(r),d=[],n=0;n<a.length;n+=1){var p=a[n];d.push(p.bounds.min,p.bounds.max)}return h.create(d)},u.wrap=function(r,a){var d=h.wrap(u.bounds(r),a);return d&&u.translate(r,d),d}})()},4372:(y,P,i)=>{var u={};y.exports=u;var x=i(69351);(function(){u.create=x.create,u.add=x.add,u.remove=x.remove,u.clear=x.clear,u.addComposite=x.addComposite,u.addBody=x.addBody,u.addConstraint=x.addConstraint})()},52284:(y,P,i)=>{var u={};y.exports=u;var x=i(41598),c=i(4506);(function(){var h=[],o={overlap:0,axis:null},r={overlap:0,axis:null};u.create=function(a,d){return{pair:null,collided:!1,bodyA:a,bodyB:d,parentA:a.parent,parentB:d.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},u.collides=function(a,d,n){if(u._overlapAxes(o,a.vertices,d.vertices,a.axes),o.overlap<=0||(u._overlapAxes(r,d.vertices,a.vertices,d.axes),r.overlap<=0))return null;var p=n&&n.table[c.id(a,d)],g;p?g=p.collision:(g=u.create(a,d),g.collided=!0,g.bodyA=a.id<d.id?a:d,g.bodyB=a.id<d.id?d:a,g.parentA=g.bodyA.parent,g.parentB=g.bodyB.parent),a=g.bodyA,d=g.bodyB;var v;o.overlap<r.overlap?v=o:v=r;var f=g.normal,b=g.tangent,C=g.penetration,_=g.supports,M=v.overlap,E=v.axis,A=E.x,R=E.y,L=d.position.x-a.position.x,Y=d.position.y-a.position.y;A*L+R*Y>=0&&(A=-A,R=-R),f.x=A,f.y=R,b.x=-R,b.y=A,C.x=A*M,C.y=R*M,g.depth=M;var F=u._findSupports(a,d,f,1),N=0;if(x.contains(a.vertices,F[0])&&(_[N++]=F[0]),x.contains(a.vertices,F[1])&&(_[N++]=F[1]),N<2){var z=u._findSupports(d,a,f,-1);x.contains(d.vertices,z[0])&&(_[N++]=z[0]),N<2&&x.contains(d.vertices,z[1])&&(_[N++]=z[1])}return N===0&&(_[N++]=F[0]),g.supportCount=N,g},u._overlapAxes=function(a,d,n,p){var g=d.length,v=n.length,f=d[0].x,b=d[0].y,C=n[0].x,_=n[0].y,M=p.length,E=Number.MAX_VALUE,A=0,R,L,Y,F,N,z;for(N=0;N<M;N++){var U=p[N],q=U.x,Q=U.y,K=f*q+b*Q,et=C*q+_*Q,H=K,J=et;for(z=1;z<g;z+=1)F=d[z].x*q+d[z].y*Q,F>H?H=F:F<K&&(K=F);for(z=1;z<v;z+=1)F=n[z].x*q+n[z].y*Q,F>J?J=F:F<et&&(et=F);if(L=H-et,Y=J-K,R=L<Y?L:Y,R<E&&(E=R,A=N,R<=0))break}a.axis=p[A],a.overlap=E},u._findSupports=function(a,d,n,p){var g=d.vertices,v=g.length,f=a.position.x,b=a.position.y,C=n.x*p,_=n.y*p,M=g[0],E=M,A=C*(f-E.x)+_*(b-E.y),R,L,Y;for(Y=1;Y<v;Y+=1)E=g[Y],L=C*(f-E.x)+_*(b-E.y),L<A&&(A=L,M=E);return R=g[(v+M.index-1)%v],A=C*(f-R.x)+_*(b-R.y),E=g[(M.index+1)%v],C*(f-E.x)+_*(b-E.y)<A?(h[0]=M,h[1]=E,h):(h[0]=M,h[1]=R,h)}})()},43424:y=>{var P={};y.exports=P,function(){P.create=function(i){return{vertex:i,normalImpulse:0,tangentImpulse:0}}}()},81388:(y,P,i)=>{var u={};y.exports=u;var x=i(53402),c=i(52284);(function(){u.create=function(h){var o={bodies:[],collisions:[],pairs:null};return x.extend(o,h)},u.setBodies=function(h,o){h.bodies=o.slice(0)},u.clear=function(h){h.bodies=[],h.collisions=[]},u.collisions=function(h){var o=h.pairs,r=h.bodies,a=r.length,d=u.canCollide,n=c.collides,p=h.collisions,g=0,v,f;for(r.sort(u._compareBoundsX),v=0;v<a;v++){var b=r[v],C=b.bounds,_=b.bounds.max.x,M=b.bounds.max.y,E=b.bounds.min.y,A=b.isStatic||b.isSleeping,R=b.parts.length,L=R===1;for(f=v+1;f<a;f++){var Y=r[f],F=Y.bounds;if(F.min.x>_)break;if(!(M<F.min.y||E>F.max.y)&&!(A&&(Y.isStatic||Y.isSleeping))&&d(b.collisionFilter,Y.collisionFilter)){var N=Y.parts.length;if(L&&N===1){var z=n(b,Y,o);z&&(p[g++]=z)}else for(var U=R>1?1:0,q=N>1?1:0,Q=U;Q<R;Q++)for(var K=b.parts[Q],C=K.bounds,et=q;et<N;et++){var H=Y.parts[et],F=H.bounds;if(!(C.min.x>F.max.x||C.max.x<F.min.x||C.max.y<F.min.y||C.min.y>F.max.y)){var z=n(K,H,o);z&&(p[g++]=z)}}}}}return p.length!==g&&(p.length=g),p},u.canCollide=function(h,o){return h.group===o.group&&h.group!==0?h.group>0:(h.mask&o.category)!==0&&(o.mask&h.category)!==0},u._compareBoundsX=function(h,o){return h.bounds.min.x-o.bounds.min.x}})()},4506:(y,P,i)=>{var u={};y.exports=u;var x=i(43424);(function(){u.create=function(c,h){var o=c.bodyA,r=c.bodyB,a={id:u.id(o,r),bodyA:o,bodyB:r,collision:c,contacts:[x.create(),x.create()],contactCount:0,separation:0,isActive:!0,isSensor:o.isSensor||r.isSensor,timeCreated:h,timeUpdated:h,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return u.update(a,c,h),a},u.update=function(c,h,o){var r=h.supports,a=h.supportCount,d=c.contacts,n=h.parentA,p=h.parentB;c.isActive=!0,c.timeUpdated=o,c.collision=h,c.separation=h.depth,c.inverseMass=n.inverseMass+p.inverseMass,c.friction=n.friction<p.friction?n.friction:p.friction,c.frictionStatic=n.frictionStatic>p.frictionStatic?n.frictionStatic:p.frictionStatic,c.restitution=n.restitution>p.restitution?n.restitution:p.restitution,c.slop=n.slop>p.slop?n.slop:p.slop,c.contactCount=a,h.pair=c;var g=r[0],v=d[0],f=r[1],b=d[1];(b.vertex===g||v.vertex===f)&&(d[1]=v,d[0]=v=b,b=d[1]),v.vertex=g,b.vertex=f},u.setActive=function(c,h,o){h?(c.isActive=!0,c.timeUpdated=o):(c.isActive=!1,c.contactCount=0)},u.id=function(c,h){return c.id<h.id?c.id.toString(36)+":"+h.id.toString(36):h.id.toString(36)+":"+c.id.toString(36)}})()},99561:(y,P,i)=>{var u={};y.exports=u;var x=i(4506),c=i(53402);(function(){u.create=function(h){return c.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},h)},u.update=function(h,o,r){var a=x.update,d=x.create,n=x.setActive,p=h.table,g=h.list,v=g.length,f=v,b=h.collisionStart,C=h.collisionEnd,_=h.collisionActive,M=o.length,E=0,A=0,R=0,L,Y,F;for(F=0;F<M;F++)L=o[F],Y=L.pair,Y?(Y.isActive&&(_[R++]=Y),a(Y,L,r)):(Y=d(L,r),p[Y.id]=Y,b[E++]=Y,g[f++]=Y);for(f=0,v=g.length,F=0;F<v;F++)Y=g[F],Y.timeUpdated>=r?g[f++]=Y:(n(Y,!1,r),Y.collision.bodyA.sleepCounter>0&&Y.collision.bodyB.sleepCounter>0?g[f++]=Y:(C[A++]=Y,delete p[Y.id]));g.length!==f&&(g.length=f),b.length!==E&&(b.length=E),C.length!==A&&(C.length=A),_.length!==R&&(_.length=R)},u.clear=function(h){return h.table={},h.list.length=0,h.collisionStart.length=0,h.collisionActive.length=0,h.collisionEnd.length=0,h}})()},73296:(y,P,i)=>{var u={};y.exports=u;var x=i(31725),c=i(52284),h=i(15647),o=i(66280),r=i(41598);(function(){u.collides=function(a,d){for(var n=[],p=d.length,g=a.bounds,v=c.collides,f=h.overlaps,b=0;b<p;b++){var C=d[b],_=C.parts.length,M=_===1?0:1;if(a!==C&&f(C.bounds,g))for(var E=M;E<_;E++){var A=C.parts[E];if(f(A.bounds,g)){var R=v(A,a);if(R){n.push(R);break}}}}return n},u.ray=function(a,d,n,p){p=p||1e-100;for(var g=x.angle(d,n),v=x.magnitude(x.sub(d,n)),f=(n.x+d.x)*.5,b=(n.y+d.y)*.5,C=o.rectangle(f,b,v,p,{angle:g}),_=u.collides(C,a),M=0;M<_.length;M+=1){var E=_[M];E.body=E.bodyB=E.bodyA}return _},u.region=function(a,d,n){for(var p=[],g=0;g<a.length;g++){var v=a[g],f=h.overlaps(v.bounds,d);(f&&!n||!f&&n)&&p.push(v)}return p},u.point=function(a,d){for(var n=[],p=0;p<a.length;p++){var g=a[p];if(h.contains(g.bounds,d))for(var v=g.parts.length===1?0:1;v<g.parts.length;v++){var f=g.parts[v];if(h.contains(f.bounds,d)&&r.contains(f.vertices,d)){n.push(g);break}}}return n}})()},66272:(y,P,i)=>{var u={};y.exports=u;var x=i(41598),c=i(53402),h=i(15647);(function(){u._restingThresh=2,u._restingThreshTangent=Math.sqrt(6),u._positionDampen=.9,u._positionWarming=.8,u._frictionNormalMultiplier=5,u._frictionMaxStatic=Number.MAX_VALUE,u.preSolvePosition=function(o){var r,a,d,n=o.length;for(r=0;r<n;r++)a=o[r],a.isActive&&(d=a.contactCount,a.collision.parentA.totalContacts+=d,a.collision.parentB.totalContacts+=d)},u.solvePosition=function(o,r,a){var d,n,p,g,v,f,b,C,_=u._positionDampen*(a||1),M=c.clamp(r/c._baseDelta,0,1),E=o.length;for(d=0;d<E;d++)n=o[d],!(!n.isActive||n.isSensor)&&(p=n.collision,g=p.parentA,v=p.parentB,f=p.normal,n.separation=p.depth+f.x*(v.positionImpulse.x-g.positionImpulse.x)+f.y*(v.positionImpulse.y-g.positionImpulse.y));for(d=0;d<E;d++)n=o[d],!(!n.isActive||n.isSensor)&&(p=n.collision,g=p.parentA,v=p.parentB,f=p.normal,C=n.separation-n.slop*M,(g.isStatic||v.isStatic)&&(C*=2),g.isStatic||g.isSleeping||(b=_/g.totalContacts,g.positionImpulse.x+=f.x*C*b,g.positionImpulse.y+=f.y*C*b),v.isStatic||v.isSleeping||(b=_/v.totalContacts,v.positionImpulse.x-=f.x*C*b,v.positionImpulse.y-=f.y*C*b))},u.postSolvePosition=function(o){for(var r=u._positionWarming,a=o.length,d=x.translate,n=h.update,p=0;p<a;p++){var g=o[p],v=g.positionImpulse,f=v.x,b=v.y,C=g.velocity;if(g.totalContacts=0,f!==0||b!==0){for(var _=0;_<g.parts.length;_++){var M=g.parts[_];d(M.vertices,v),n(M.bounds,M.vertices,C),M.position.x+=f,M.position.y+=b}g.positionPrev.x+=f,g.positionPrev.y+=b,f*C.x+b*C.y<0?(v.x=0,v.y=0):(v.x*=r,v.y*=r)}}},u.preSolveVelocity=function(o){var r=o.length,a,d;for(a=0;a<r;a++){var n=o[a];if(!(!n.isActive||n.isSensor)){var p=n.contacts,g=n.contactCount,v=n.collision,f=v.parentA,b=v.parentB,C=v.normal,_=v.tangent;for(d=0;d<g;d++){var M=p[d],E=M.vertex,A=M.normalImpulse,R=M.tangentImpulse;if(A!==0||R!==0){var L=C.x*A+_.x*R,Y=C.y*A+_.y*R;f.isStatic||f.isSleeping||(f.positionPrev.x+=L*f.inverseMass,f.positionPrev.y+=Y*f.inverseMass,f.anglePrev+=f.inverseInertia*((E.x-f.position.x)*Y-(E.y-f.position.y)*L)),b.isStatic||b.isSleeping||(b.positionPrev.x-=L*b.inverseMass,b.positionPrev.y-=Y*b.inverseMass,b.anglePrev-=b.inverseInertia*((E.x-b.position.x)*Y-(E.y-b.position.y)*L))}}}}},u.solveVelocity=function(o,r){var a=r/c._baseDelta,d=a*a,n=d*a,p=-u._restingThresh*a,g=u._restingThreshTangent,v=u._frictionNormalMultiplier*a,f=u._frictionMaxStatic,b=o.length,C,_,M,E;for(M=0;M<b;M++){var A=o[M];if(!(!A.isActive||A.isSensor)){var R=A.collision,L=R.parentA,Y=R.parentB,F=R.normal.x,N=R.normal.y,z=R.tangent.x,U=R.tangent.y,q=A.inverseMass,Q=A.friction*A.frictionStatic*v,K=A.contacts,et=A.contactCount,H=1/et,J=L.position.x-L.positionPrev.x,X=L.position.y-L.positionPrev.y,Z=L.angle-L.anglePrev,$=Y.position.x-Y.positionPrev.x,it=Y.position.y-Y.positionPrev.y,nt=Y.angle-Y.anglePrev;for(E=0;E<et;E++){var at=K[E],ht=at.vertex,dt=ht.x-L.position.x,vt=ht.y-L.position.y,ft=ht.x-Y.position.x,gt=ht.y-Y.position.y,wt=J-vt*Z,bt=X+dt*Z,xt=$-gt*nt,Pt=it+ft*nt,Ot=wt-xt,Et=bt-Pt,Tt=F*Ot+N*Et,Mt=z*Ot+U*Et,kt=A.separation+Tt,Gt=Math.min(kt,1);Gt=kt<0?0:Gt;var qt=Gt*Q;Mt<-qt||Mt>qt?(_=Mt>0?Mt:-Mt,C=A.friction*(Mt>0?1:-1)*n,C<-_?C=-_:C>_&&(C=_)):(C=Mt,_=f);var fe=dt*N-vt*F,Qt=ft*N-gt*F,Jt=H/(q+L.inverseInertia*fe*fe+Y.inverseInertia*Qt*Qt),be=(1+A.restitution)*Tt*Jt;if(C*=Jt,Tt<p)at.normalImpulse=0;else{var We=at.normalImpulse;at.normalImpulse+=be,at.normalImpulse>0&&(at.normalImpulse=0),be=at.normalImpulse-We}if(Mt<-g||Mt>g)at.tangentImpulse=0;else{var $t=at.tangentImpulse;at.tangentImpulse+=C,at.tangentImpulse<-_&&(at.tangentImpulse=-_),at.tangentImpulse>_&&(at.tangentImpulse=_),C=at.tangentImpulse-$t}var me=F*be+z*C,Vt=N*be+U*C;L.isStatic||L.isSleeping||(L.positionPrev.x+=me*L.inverseMass,L.positionPrev.y+=Vt*L.inverseMass,L.anglePrev+=(dt*Vt-vt*me)*L.inverseInertia),Y.isStatic||Y.isSleeping||(Y.positionPrev.x-=me*Y.inverseMass,Y.positionPrev.y-=Vt*Y.inverseMass,Y.anglePrev-=(ft*Vt-gt*me)*Y.inverseInertia)}}}}})()},48140:(y,P,i)=>{var u={};y.exports=u;var x=i(41598),c=i(31725),h=i(53614),o=i(15647),r=i(66615),a=i(53402);(function(){u._warming=.4,u._torqueDampen=1,u._minLength=1e-6,u.create=function(d){var n=d;n.bodyA&&!n.pointA&&(n.pointA={x:0,y:0}),n.bodyB&&!n.pointB&&(n.pointB={x:0,y:0});var p=n.bodyA?c.add(n.bodyA.position,n.pointA):n.pointA,g=n.bodyB?c.add(n.bodyB.position,n.pointB):n.pointB,v=c.magnitude(c.sub(p,g));n.length=typeof n.length<"u"?n.length:v,n.id=n.id||a.nextId(),n.label=n.label||"Constraint",n.type="constraint",n.stiffness=n.stiffness||(n.length>0?1:.7),n.damping=n.damping||0,n.angularStiffness=n.angularStiffness||0,n.angleA=n.bodyA?n.bodyA.angle:n.angleA,n.angleB=n.bodyB?n.bodyB.angle:n.angleB,n.plugin={};var f={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return n.length===0&&n.stiffness>.1?(f.type="pin",f.anchors=!1):n.stiffness<.9&&(f.type="spring"),n.render=a.extend(f,n.render),n},u.preSolveAll=function(d){for(var n=0;n<d.length;n+=1){var p=d[n],g=p.constraintImpulse;p.isStatic||g.x===0&&g.y===0&&g.angle===0||(p.position.x+=g.x,p.position.y+=g.y,p.angle+=g.angle)}},u.solveAll=function(d,n){for(var p=a.clamp(n/a._baseDelta,0,1),g=0;g<d.length;g+=1){var v=d[g],f=!v.bodyA||v.bodyA&&v.bodyA.isStatic,b=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(f||b)&&u.solve(d[g],p)}for(g=0;g<d.length;g+=1)v=d[g],f=!v.bodyA||v.bodyA&&v.bodyA.isStatic,b=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!f&&!b&&u.solve(d[g],p)},u.solve=function(d,n){var p=d.bodyA,g=d.bodyB,v=d.pointA,f=d.pointB;if(!(!p&&!g)){p&&!p.isStatic&&(c.rotate(v,p.angle-d.angleA,v),d.angleA=p.angle),g&&!g.isStatic&&(c.rotate(f,g.angle-d.angleB,f),d.angleB=g.angle);var b=v,C=f;if(p&&(b=c.add(p.position,v)),g&&(C=c.add(g.position,f)),!(!b||!C)){var _=c.sub(b,C),M=c.magnitude(_);M<u._minLength&&(M=u._minLength);var E=(M-d.length)/M,A=d.stiffness>=1||d.length===0,R=A?d.stiffness*n:d.stiffness*n*n,L=d.damping*n,Y=c.mult(_,E*R),F=(p?p.inverseMass:0)+(g?g.inverseMass:0),N=(p?p.inverseInertia:0)+(g?g.inverseInertia:0),z=F+N,U,q,Q,K,et;if(L>0){var H=c.create();Q=c.div(_,M),et=c.sub(g&&c.sub(g.position,g.positionPrev)||H,p&&c.sub(p.position,p.positionPrev)||H),K=c.dot(Q,et)}p&&!p.isStatic&&(q=p.inverseMass/F,p.constraintImpulse.x-=Y.x*q,p.constraintImpulse.y-=Y.y*q,p.position.x-=Y.x*q,p.position.y-=Y.y*q,L>0&&(p.positionPrev.x-=L*Q.x*K*q,p.positionPrev.y-=L*Q.y*K*q),U=c.cross(v,Y)/z*u._torqueDampen*p.inverseInertia*(1-d.angularStiffness),p.constraintImpulse.angle-=U,p.angle-=U),g&&!g.isStatic&&(q=g.inverseMass/F,g.constraintImpulse.x+=Y.x*q,g.constraintImpulse.y+=Y.y*q,g.position.x+=Y.x*q,g.position.y+=Y.y*q,L>0&&(g.positionPrev.x+=L*Q.x*K*q,g.positionPrev.y+=L*Q.y*K*q),U=c.cross(f,Y)/z*u._torqueDampen*g.inverseInertia*(1-d.angularStiffness),g.constraintImpulse.angle+=U,g.angle+=U)}}},u.postSolveAll=function(d){for(var n=0;n<d.length;n++){var p=d[n],g=p.constraintImpulse;if(!(p.isStatic||g.x===0&&g.y===0&&g.angle===0)){h.set(p,!1);for(var v=0;v<p.parts.length;v++){var f=p.parts[v];x.translate(f.vertices,g),v>0&&(f.position.x+=g.x,f.position.y+=g.y),g.angle!==0&&(x.rotate(f.vertices,g.angle,p.position),r.rotate(f.axes,g.angle),v>0&&c.rotateAbout(f.position,g.angle,p.position,f.position)),o.update(f.bounds,f.vertices,p.velocity)}g.angle*=u._warming,g.x*=u._warming,g.y*=u._warming}}},u.pointAWorld=function(d){return{x:(d.bodyA?d.bodyA.position.x:0)+(d.pointA?d.pointA.x:0),y:(d.bodyA?d.bodyA.position.y:0)+(d.pointA?d.pointA.y:0)}},u.pointBWorld=function(d){return{x:(d.bodyB?d.bodyB.position.x:0)+(d.pointB?d.pointB.x:0),y:(d.bodyB?d.bodyB.position.y:0)+(d.pointB?d.pointB.y:0)}},u.currentLength=function(d){var n=(d.bodyA?d.bodyA.position.x:0)+(d.pointA?d.pointA.x:0),p=(d.bodyA?d.bodyA.position.y:0)+(d.pointA?d.pointA.y:0),g=(d.bodyB?d.bodyB.position.x:0)+(d.pointB?d.pointB.x:0),v=(d.bodyB?d.bodyB.position.y:0)+(d.pointB?d.pointB.y:0),f=n-g,b=p-v;return Math.sqrt(f*f+b*b)}})()},53402:(y,P,i)=>{var u={};y.exports=u,function(){u._baseDelta=16.666666666666668,u._nextId=0,u._seed=0,u._nowStartTime=+new Date,u._warnedOnce={},u._decomp=null,u.extend=function(c,h){var o,r;typeof h=="boolean"?(o=2,r=h):(o=1,r=!0);for(var a=o;a<arguments.length;a++){var d=arguments[a];if(d)for(var n in d)r&&d[n]&&d[n].constructor===Object&&(!c[n]||c[n].constructor===Object)?(c[n]=c[n]||{},u.extend(c[n],r,d[n])):c[n]=d[n]}return c},u.clone=function(c,h){return u.extend({},h,c)},u.keys=function(c){if(Object.keys)return Object.keys(c);var h=[];for(var o in c)h.push(o);return h},u.values=function(c){var h=[];if(Object.keys){for(var o=Object.keys(c),r=0;r<o.length;r++)h.push(c[o[r]]);return h}for(var a in c)h.push(c[a]);return h},u.get=function(c,h,o,r){h=h.split(".").slice(o,r);for(var a=0;a<h.length;a+=1)c=c[h[a]];return c},u.set=function(c,h,o,r,a){var d=h.split(".").slice(r,a);return u.get(c,h,0,-1)[d[d.length-1]]=o,o},u.shuffle=function(c){for(var h=c.length-1;h>0;h--){var o=Math.floor(u.random()*(h+1)),r=c[h];c[h]=c[o],c[o]=r}return c},u.choose=function(c){return c[Math.floor(u.random()*c.length)]},u.isElement=function(c){return typeof HTMLElement<"u"?c instanceof HTMLElement:!!(c&&c.nodeType&&c.nodeName)},u.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},u.isFunction=function(c){return typeof c=="function"},u.isPlainObject=function(c){return typeof c=="object"&&c.constructor===Object},u.isString=function(c){return toString.call(c)==="[object String]"},u.clamp=function(c,h,o){return c<h?h:c>o?o:c},u.sign=function(c){return c<0?-1:1},u.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-u._nowStartTime},u.random=function(c,h){return c=typeof c<"u"?c:0,h=typeof h<"u"?h:1,c+x()*(h-c)};var x=function(){return u._seed=(u._seed*9301+49297)%233280,u._seed/233280};u.colorToNumber=function(c){return c=c.replace("#",""),c.length==3&&(c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2)),parseInt(c,16)},u.logLevel=1,u.log=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.info=function(){console&&u.logLevel>0&&u.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warn=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warnOnce=function(){var c=Array.prototype.slice.call(arguments).join(" ");u._warnedOnce[c]||(u.warn(c),u._warnedOnce[c]=!0)},u.deprecated=function(c,h,o){c[h]=u.chain(function(){u.warnOnce("🔅 deprecated 🔅",o)},c[h])},u.nextId=function(){return u._nextId++},u.indexOf=function(c,h){if(c.indexOf)return c.indexOf(h);for(var o=0;o<c.length;o++)if(c[o]===h)return o;return-1},u.map=function(c,h){if(c.map)return c.map(h);for(var o=[],r=0;r<c.length;r+=1)o.push(h(c[r]));return o},u.topologicalSort=function(c){var h=[],o=[],r=[];for(var a in c)!o[a]&&!r[a]&&u._topologicalSort(a,o,r,c,h);return h},u._topologicalSort=function(c,h,o,r,a){var d=r[c]||[];o[c]=!0;for(var n=0;n<d.length;n+=1){var p=d[n];o[p]||h[p]||u._topologicalSort(p,h,o,r,a)}o[c]=!1,h[c]=!0,a.push(c)},u.chain=function(){for(var c=[],h=0;h<arguments.length;h+=1){var o=arguments[h];o._chained?c.push.apply(c,o._chained):c.push(o)}var r=function(){for(var a,d=new Array(arguments.length),n=0,p=arguments.length;n<p;n++)d[n]=arguments[n];for(n=0;n<c.length;n+=1){var g=c[n].apply(a,d);typeof g<"u"&&(a=g)}return a};return r._chained=c,r},u.chainPathBefore=function(c,h,o){return u.set(c,h,u.chain(o,u.get(c,h)))},u.chainPathAfter=function(c,h,o){return u.set(c,h,u.chain(u.get(c,h),o))},u.setDecomp=function(c){u._decomp=c},u.getDecomp=function(){var c=u._decomp;try{!c&&typeof window<"u"&&(c=window.decomp),!c&&typeof i.g<"u"&&(c=i.g.decomp)}catch{c=null}return c}}()},48413:(y,P,i)=>{var u={};y.exports=u;var x=i(53614),c=i(66272),h=i(81388),o=i(99561),r=i(35810),a=i(69351),d=i(48140),n=i(53402),p=i(22562);(function(){u._deltaMax=16.666666666666668,u.create=function(g){g=g||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},f=n.extend(v,g);return f.world=g.world||a.create({label:"World"}),f.pairs=g.pairs||o.create(),f.detector=g.detector||h.create(),f.detector.pairs=f.pairs,f.grid={buckets:[]},f.world.gravity=f.gravity,f.broadphase=f.grid,f.metrics={},f},u.update=function(g,v){var f=n.now(),b=g.world,C=g.detector,_=g.pairs,M=g.timing,E=M.timestamp,A;v>u._deltaMax&&n.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",u._deltaMax.toFixed(3),"ms."),v=typeof v<"u"?v:n._baseDelta,v*=M.timeScale,M.timestamp+=v,M.lastDelta=v;var R={timestamp:M.timestamp,delta:v};r.trigger(g,"beforeUpdate",R);var L=a.allBodies(b),Y=a.allConstraints(b),F=a.allComposites(b);for(b.isModified&&(h.setBodies(C,L),a.setModified(b,!1,!1,!0)),g.enableSleeping&&x.update(L,v),u._bodiesApplyGravity(L,g.gravity),u.wrap(L,F),u.attractors(L),v>0&&u._bodiesUpdate(L,v),r.trigger(g,"beforeSolve",R),d.preSolveAll(L),A=0;A<g.constraintIterations;A++)d.solveAll(Y,v);d.postSolveAll(L);var N=h.collisions(C);o.update(_,N,E),g.enableSleeping&&x.afterCollisions(_.list),_.collisionStart.length>0&&r.trigger(g,"collisionStart",{pairs:_.collisionStart,timestamp:M.timestamp,delta:v});var z=n.clamp(20/g.positionIterations,0,1);for(c.preSolvePosition(_.list),A=0;A<g.positionIterations;A++)c.solvePosition(_.list,v,z);for(c.postSolvePosition(L),d.preSolveAll(L),A=0;A<g.constraintIterations;A++)d.solveAll(Y,v);for(d.postSolveAll(L),c.preSolveVelocity(_.list),A=0;A<g.velocityIterations;A++)c.solveVelocity(_.list,v);return u._bodiesUpdateVelocities(L),_.collisionActive.length>0&&r.trigger(g,"collisionActive",{pairs:_.collisionActive,timestamp:M.timestamp,delta:v}),_.collisionEnd.length>0&&r.trigger(g,"collisionEnd",{pairs:_.collisionEnd,timestamp:M.timestamp,delta:v}),u._bodiesClearForces(L),r.trigger(g,"afterUpdate",R),g.timing.lastElapsed=n.now()-f,g},u.merge=function(g,v){if(n.extend(g,v),v.world){g.world=v.world,u.clear(g);for(var f=a.allBodies(g.world),b=0;b<f.length;b++){var C=f[b];x.set(C,!1),C.id=n.nextId()}}},u.clear=function(g){o.clear(g.pairs),h.clear(g.detector)},u._bodiesClearForces=function(g){for(var v=g.length,f=0;f<v;f++){var b=g[f];b.force.x=0,b.force.y=0,b.torque=0}},u._bodiesApplyGravity=function(g,v){var f=typeof v.scale<"u"?v.scale:.001,b=g.length;if(!(v.x===0&&v.y===0||f===0))for(var C=0;C<b;C++){var _=g[C];_.ignoreGravity||_.isStatic||_.isSleeping||(_.force.y+=_.mass*v.y*f,_.force.x+=_.mass*v.x*f)}},u._bodiesUpdate=function(g,v){for(var f=g.length,b=0;b<f;b++){var C=g[b];C.isStatic||C.isSleeping||p.update(C,v)}},u._bodiesUpdateVelocities=function(g){for(var v=g.length,f=0;f<v;f++)p.updateVelocities(g[f])},u.wrap=function(g,v){for(var f=0;f<g.length;f+=1){var b=g[f];b.wrapBounds!==null&&p.wrap(b,b.wrapBounds)}for(f=0;f<v.length;f+=1){var C=v[f];C.wrapBounds!==null&&a.wrap(C,C.wrapBounds)}},u.attractors=function(g){for(var v=0;v<g.length;v++){var f=g[v],b=f.attractors;if(b&&b.length>0)for(var C=0;C<g.length;C++){var _=g[C];if(v!==C)for(var M=0;M<b.length;M++){var E=b[M],A=E;n.isFunction(E)&&(A=E(f,_)),A&&p.applyForce(_,_.position,A)}}}}})()},35810:(y,P,i)=>{var u={};y.exports=u;var x=i(53402);(function(){u.on=function(c,h,o){for(var r=h.split(" "),a,d=0;d<r.length;d++)a=r[d],c.events=c.events||{},c.events[a]=c.events[a]||[],c.events[a].push(o);return o},u.off=function(c,h,o){if(!h){c.events={};return}typeof h=="function"&&(o=h,h=x.keys(c.events).join(" "));for(var r=h.split(" "),a=0;a<r.length;a++){var d=c.events[r[a]],n=[];if(o&&d)for(var p=0;p<d.length;p++)d[p]!==o&&n.push(d[p]);c.events[r[a]]=n}},u.trigger=function(c,h,o){var r,a,d,n,p=c.events;if(p&&x.keys(p).length>0){o||(o={}),r=h.split(" ");for(var g=0;g<r.length;g++)if(a=r[g],d=p[a],d){n=x.clone(o,!1),n.name=a,n.source=c;for(var v=0;v<d.length;v++)d[v].apply(c,[n])}}}})()},6790:(y,P,i)=>{var u={};y.exports=u;var x=i(73832),c=i(53402);(function(){u.name="matter-js",u.version="0.20.0",u.uses=[],u.used=[],u.use=function(){x.use(u,Array.prototype.slice.call(arguments))},u.before=function(h,o){return h=h.replace(/^Matter./,""),c.chainPathBefore(u,h,o)},u.after=function(h,o){return h=h.replace(/^Matter./,""),c.chainPathAfter(u,h,o)}})()},73832:(y,P,i)=>{var u={};y.exports=u;var x=i(53402);(function(){u._registry={},u.register=function(c){if(u.isPlugin(c)||x.warn("Plugin.register:",u.toString(c),"does not implement all required fields."),c.name in u._registry){var h=u._registry[c.name],o=u.versionParse(c.version).number,r=u.versionParse(h.version).number;o>r?(x.warn("Plugin.register:",u.toString(h),"was upgraded to",u.toString(c)),u._registry[c.name]=c):o<r?x.warn("Plugin.register:",u.toString(h),"can not be downgraded to",u.toString(c)):c!==h&&x.warn("Plugin.register:",u.toString(c),"is already registered to different plugin object")}else u._registry[c.name]=c;return c},u.resolve=function(c){return u._registry[u.dependencyParse(c).name]},u.toString=function(c){return typeof c=="string"?c:(c.name||"anonymous")+"@"+(c.version||c.range||"0.0.0")},u.isPlugin=function(c){return c&&c.name&&c.version&&c.install},u.isUsed=function(c,h){return c.used.indexOf(h)>-1},u.isFor=function(c,h){var o=c.for&&u.dependencyParse(c.for);return!c.for||h.name===o.name&&u.versionSatisfies(h.version,o.range)},u.use=function(c,h){if(c.uses=(c.uses||[]).concat(h||[]),c.uses.length===0){x.warn("Plugin.use:",u.toString(c),"does not specify any dependencies to install.");return}for(var o=u.dependencies(c),r=x.topologicalSort(o),a=[],d=0;d<r.length;d+=1)if(r[d]!==c.name){var n=u.resolve(r[d]);if(!n){a.push("❌ "+r[d]);continue}u.isUsed(c,n.name)||(u.isFor(n,c)||(x.warn("Plugin.use:",u.toString(n),"is for",n.for,"but installed on",u.toString(c)+"."),n._warned=!0),n.install?n.install(c):(x.warn("Plugin.use:",u.toString(n),"does not specify an install function."),n._warned=!0),n._warned?(a.push("🔶 "+u.toString(n)),delete n._warned):a.push("✅ "+u.toString(n)),c.used.push(n.name))}a.length>0&&!n.silent&&x.info(a.join("  "))},u.dependencies=function(c,h){var o=u.dependencyParse(c),r=o.name;if(h=h||{},!(r in h)){c=u.resolve(c)||c,h[r]=x.map(c.uses||[],function(d){u.isPlugin(d)&&u.register(d);var n=u.dependencyParse(d),p=u.resolve(d);return p&&!u.versionSatisfies(p.version,n.range)?(x.warn("Plugin.dependencies:",u.toString(p),"does not satisfy",u.toString(n),"used by",u.toString(o)+"."),p._warned=!0,c._warned=!0):p||(x.warn("Plugin.dependencies:",u.toString(d),"used by",u.toString(o),"could not be resolved."),c._warned=!0),n.name});for(var a=0;a<h[r].length;a+=1)u.dependencies(h[r][a],h);return h}},u.dependencyParse=function(c){if(x.isString(c)){var h=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return h.test(c)||x.warn("Plugin.dependencyParse:",c,"is not a valid dependency string."),{name:c.split("@")[0],range:c.split("@")[1]||"*"}}return{name:c.name,range:c.range||c.version}},u.versionParse=function(c){var h=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;h.test(c)||x.warn("Plugin.versionParse:",c,"is not a valid version or range.");var o=h.exec(c),r=Number(o[4]),a=Number(o[5]),d=Number(o[6]);return{isRange:!!(o[1]||o[2]),version:o[3],range:c,operator:o[1]||o[2]||"",major:r,minor:a,patch:d,parts:[r,a,d],prerelease:o[7],number:r*1e8+a*1e4+d}},u.versionSatisfies=function(c,h){h=h||"*";var o=u.versionParse(h),r=u.versionParse(c);if(o.isRange){if(o.operator==="*"||c==="*")return!0;if(o.operator===">")return r.number>o.number;if(o.operator===">=")return r.number>=o.number;if(o.operator==="~")return r.major===o.major&&r.minor===o.minor&&r.patch>=o.patch;if(o.operator==="^")return o.major>0?r.major===o.major&&r.number>=o.number:o.minor>0?r.minor===o.minor&&r.patch>=o.patch:r.patch===o.patch}return c===h||c==="*"}})()},13037:(y,P,i)=>{var u={};y.exports=u;var x=i(35810),c=i(48413),h=i(53402);(function(){u._maxFrameDelta=66.66666666666667,u._frameDeltaFallback=16.666666666666668,u._timeBufferMargin=1.5,u._elapsedNextEstimate=1,u._smoothingLowerBound=.1,u._smoothingUpperBound=.9,u.create=function(r){var a={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},d=h.extend(a,r);return d.fps=0,d},u.run=function(r,a){return r.timeBuffer=u._frameDeltaFallback,function d(n){r.frameRequestId=u._onNextFrame(r,d),n&&r.enabled&&u.tick(r,a,n)}(),r},u.tick=function(r,a,d){var n=h.now(),p=r.delta,g=0,v=d-r.timeLastTick;if((!v||!r.timeLastTick||v>Math.max(u._maxFrameDelta,r.maxFrameTime))&&(v=r.frameDelta||u._frameDeltaFallback),r.frameDeltaSmoothing){r.frameDeltaHistory.push(v),r.frameDeltaHistory=r.frameDeltaHistory.slice(-r.frameDeltaHistorySize);var f=r.frameDeltaHistory.slice(0).sort(),b=r.frameDeltaHistory.slice(f.length*u._smoothingLowerBound,f.length*u._smoothingUpperBound),C=o(b);v=C||v}r.frameDeltaSnapping&&(v=1e3/Math.round(1e3/v)),r.frameDelta=v,r.timeLastTick=d,r.timeBuffer+=r.frameDelta,r.timeBuffer=h.clamp(r.timeBuffer,0,r.frameDelta+p*u._timeBufferMargin),r.lastUpdatesDeferred=0;var _=r.maxUpdates||Math.ceil(r.maxFrameTime/p),M={timestamp:a.timing.timestamp};x.trigger(r,"beforeTick",M),x.trigger(r,"tick",M);for(var E=h.now();p>0&&r.timeBuffer>=p*u._timeBufferMargin;){x.trigger(r,"beforeUpdate",M),c.update(a,p),x.trigger(r,"afterUpdate",M),r.timeBuffer-=p,g+=1;var A=h.now()-n,R=h.now()-E,L=A+u._elapsedNextEstimate*R/g;if(g>=_||L>r.maxFrameTime){r.lastUpdatesDeferred=Math.round(Math.max(0,r.timeBuffer/p-u._timeBufferMargin));break}}a.timing.lastUpdatesPerFrame=g,x.trigger(r,"afterTick",M),r.frameDeltaHistory.length>=100&&(r.lastUpdatesDeferred&&Math.round(r.frameDelta/p)>_?h.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):r.lastUpdatesDeferred&&h.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof r.isFixed<"u"&&h.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(r.deltaMin||r.deltaMax)&&h.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),r.fps!==0&&h.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},u.stop=function(r){u._cancelNextFrame(r)},u._onNextFrame=function(r,a){if(typeof window<"u"&&window.requestAnimationFrame)r.frameRequestId=window.requestAnimationFrame(a);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return r.frameRequestId},u._cancelNextFrame=function(r){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(r.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var o=function(r){for(var a=0,d=r.length,n=0;n<d;n+=1)a+=r[n];return a/d||0};u._mean=o})()},53614:(y,P,i)=>{var u={};y.exports=u;var x=i(22562),c=i(35810),h=i(53402);(function(){u._motionWakeThreshold=.18,u._motionSleepThreshold=.08,u._minBias=.9,u.update=function(o,r){for(var a=r/h._baseDelta,d=u._motionSleepThreshold,n=0;n<o.length;n++){var p=o[n],g=x.getSpeed(p),v=x.getAngularSpeed(p),f=g*g+v*v;if(p.force.x!==0||p.force.y!==0){u.set(p,!1);continue}var b=Math.min(p.motion,f),C=Math.max(p.motion,f);p.motion=u._minBias*b+(1-u._minBias)*C,p.sleepThreshold>0&&p.motion<d?(p.sleepCounter+=1,p.sleepCounter>=p.sleepThreshold/a&&u.set(p,!0)):p.sleepCounter>0&&(p.sleepCounter-=1)}},u.afterCollisions=function(o){for(var r=u._motionSleepThreshold,a=0;a<o.length;a++){var d=o[a];if(d.isActive){var n=d.collision,p=n.bodyA.parent,g=n.bodyB.parent;if(!(p.isSleeping&&g.isSleeping||p.isStatic||g.isStatic)&&(p.isSleeping||g.isSleeping)){var v=p.isSleeping&&!p.isStatic?p:g,f=v===p?g:p;!v.isStatic&&f.motion>r&&u.set(v,!1)}}}},u.set=function(o,r){var a=o.isSleeping;r?(o.isSleeping=!0,o.sleepCounter=o.sleepThreshold,o.positionImpulse.x=0,o.positionImpulse.y=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.speed=0,o.angularSpeed=0,o.motion=0,a||c.trigger(o,"sleepStart")):(o.isSleeping=!1,o.sleepCounter=0,a&&c.trigger(o,"sleepEnd"))}})()},66280:(y,P,i)=>{var u={};y.exports=u;var x=i(41598),c=i(53402),h=i(22562),o=i(15647),r=i(31725);(function(){u.rectangle=function(a,d,n,p,g){g=g||{};var v={label:"Rectangle Body",position:{x:a,y:d},vertices:x.fromPath("L 0 0 L "+n+" 0 L "+n+" "+p+" L 0 "+p)};if(g.chamfer){var f=g.chamfer;v.vertices=x.chamfer(v.vertices,f.radius,f.quality,f.qualityMin,f.qualityMax),delete g.chamfer}return h.create(c.extend({},v,g))},u.trapezoid=function(a,d,n,p,g,v){v=v||{},g>=1&&c.warn("Bodies.trapezoid: slope parameter must be < 1."),g*=.5;var f=(1-g*2)*n,b=n*g,C=b+f,_=C+b,M;g<.5?M="L 0 0 L "+b+" "+-p+" L "+C+" "+-p+" L "+_+" 0":M="L 0 0 L "+C+" "+-p+" L "+_+" 0";var E={label:"Trapezoid Body",position:{x:a,y:d},vertices:x.fromPath(M)};if(v.chamfer){var A=v.chamfer;E.vertices=x.chamfer(E.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete v.chamfer}return h.create(c.extend({},E,v))},u.circle=function(a,d,n,p,g){p=p||{};var v={label:"Circle Body",circleRadius:n};g=g||25;var f=Math.ceil(Math.max(10,Math.min(g,n)));return f%2===1&&(f+=1),u.polygon(a,d,f,n,c.extend({},v,p))},u.polygon=function(a,d,n,p,g){if(g=g||{},n<3)return u.circle(a,d,p,g);for(var v=2*Math.PI/n,f="",b=v*.5,C=0;C<n;C+=1){var _=b+C*v,M=Math.cos(_)*p,E=Math.sin(_)*p;f+="L "+M.toFixed(3)+" "+E.toFixed(3)+" "}var A={label:"Polygon Body",position:{x:a,y:d},vertices:x.fromPath(f)};if(g.chamfer){var R=g.chamfer;A.vertices=x.chamfer(A.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete g.chamfer}return h.create(c.extend({},A,g))},u.fromVertices=function(a,d,n,p,g,v,f,b){var C=c.getDecomp(),_,M,E,A,R,L,Y,F,N,z,U;for(_=!!(C&&C.quickDecomp),p=p||{},E=[],g=typeof g<"u"?g:!1,v=typeof v<"u"?v:.01,f=typeof f<"u"?f:10,b=typeof b<"u"?b:.01,c.isArray(n[0])||(n=[n]),z=0;z<n.length;z+=1)if(L=n[z],A=x.isConvex(L),R=!A,R&&!_&&c.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),A||!_)A?L=x.clockwiseSort(L):L=x.hull(L),E.push({position:{x:a,y:d},vertices:L});else{var q=L.map(function(at){return[at.x,at.y]});C.makeCCW(q),v!==!1&&C.removeCollinearPoints(q,v),b!==!1&&C.removeDuplicatePoints&&C.removeDuplicatePoints(q,b);var Q=C.quickDecomp(q);for(Y=0;Y<Q.length;Y++){var K=Q[Y],et=K.map(function(at){return{x:at[0],y:at[1]}});f>0&&x.area(et)<f||E.push({position:x.centre(et),vertices:et})}}for(Y=0;Y<E.length;Y++)E[Y]=h.create(c.extend(E[Y],p));if(g){var H=5;for(Y=0;Y<E.length;Y++){var J=E[Y];for(F=Y+1;F<E.length;F++){var X=E[F];if(o.overlaps(J.bounds,X.bounds)){var Z=J.vertices,$=X.vertices;for(N=0;N<J.vertices.length;N++)for(U=0;U<X.vertices.length;U++){var it=r.magnitudeSquared(r.sub(Z[(N+1)%Z.length],$[U])),nt=r.magnitudeSquared(r.sub(Z[N],$[(U+1)%$.length]));it<H&&nt<H&&(Z[N].isInternal=!0,$[U].isInternal=!0)}}}}}return E.length>1?(M=h.create(c.extend({parts:E.slice(0)},p)),h.setPosition(M,{x:a,y:d}),M):E[0]},u.flagCoincidentParts=function(a,d){d===void 0&&(d=5);for(var n=0;n<a.length;n++)for(var p=a[n],g=n+1;g<a.length;g++){var v=a[g];if(o.overlaps(p.bounds,v.bounds))for(var f=p.vertices,b=v.vertices,C=0;C<p.vertices.length;C++)for(var _=0;_<v.vertices.length;_++){var M=r.magnitudeSquared(r.sub(f[(C+1)%f.length],b[_])),E=r.magnitudeSquared(r.sub(f[C],b[(_+1)%b.length]));M<d&&E<d&&(f[C].isInternal=!0,b[_].isInternal=!0)}}return a}})()},74116:(y,P,i)=>{var u={};y.exports=u;var x=i(69351),c=i(48140),h=i(53402),o=i(22562),r=i(66280);(function(){u.stack=function(a,d,n,p,g,v,f){for(var b=x.create({label:"Stack"}),C=a,_=d,M,E=0,A=0;A<p;A++){for(var R=0,L=0;L<n;L++){var Y=f(C,_,L,A,M,E);if(Y){var F=Y.bounds.max.y-Y.bounds.min.y,N=Y.bounds.max.x-Y.bounds.min.x;F>R&&(R=F),o.translate(Y,{x:N*.5,y:F*.5}),C=Y.bounds.max.x+g,x.addBody(b,Y),M=Y,E+=1}else C+=g}_+=R+v,C=a}return b},u.chain=function(a,d,n,p,g,v){for(var f=a.bodies,b=1;b<f.length;b++){var C=f[b-1],_=f[b],M=C.bounds.max.y-C.bounds.min.y,E=C.bounds.max.x-C.bounds.min.x,A=_.bounds.max.y-_.bounds.min.y,R=_.bounds.max.x-_.bounds.min.x,L={bodyA:C,pointA:{x:E*d,y:M*n},bodyB:_,pointB:{x:R*p,y:A*g}},Y=h.extend(L,v);x.addConstraint(a,c.create(Y))}return a.label+=" Chain",a},u.mesh=function(a,d,n,p,g){var v=a.bodies,f,b,C,_,M;for(f=0;f<n;f++){for(b=1;b<d;b++)C=v[b-1+f*d],_=v[b+f*d],x.addConstraint(a,c.create(h.extend({bodyA:C,bodyB:_},g)));if(f>0)for(b=0;b<d;b++)C=v[b+(f-1)*d],_=v[b+f*d],x.addConstraint(a,c.create(h.extend({bodyA:C,bodyB:_},g))),p&&b>0&&(M=v[b-1+(f-1)*d],x.addConstraint(a,c.create(h.extend({bodyA:M,bodyB:_},g)))),p&&b<d-1&&(M=v[b+1+(f-1)*d],x.addConstraint(a,c.create(h.extend({bodyA:M,bodyB:_},g))))}return a.label+=" Mesh",a},u.pyramid=function(a,d,n,p,g,v,f){return u.stack(a,d,n,p,g,v,function(b,C,_,M,E,A){var R=Math.min(p,Math.ceil(n/2)),L=E?E.bounds.max.x-E.bounds.min.x:0;if(!(M>R)){M=R-M;var Y=M,F=n-1-M;if(!(_<Y||_>F)){A===1&&o.translate(E,{x:(_+(n%2===1?1:-1))*L,y:0});var N=E?_*L:0;return f(a+N+_*g,C,_,M,E,A)}}})},u.newtonsCradle=function(a,d,n,p,g){for(var v=x.create({label:"Newtons Cradle"}),f=0;f<n;f++){var b=1.9,C=r.circle(a+f*(p*b),d+g,p,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),_=c.create({pointA:{x:a+f*(p*b),y:d},bodyB:C});x.addBody(v,C),x.addConstraint(v,_)}return v},u.car=function(a,d,n,p,g){var v=o.nextGroup(!0),f=20,b=-n*.5+f,C=n*.5-f,_=0,M=x.create({label:"Car"}),E=r.rectangle(a,d,n,p,{collisionFilter:{group:v},chamfer:{radius:p*.5},density:2e-4}),A=r.circle(a+b,d+_,g,{collisionFilter:{group:v},friction:.8}),R=r.circle(a+C,d+_,g,{collisionFilter:{group:v},friction:.8}),L=c.create({bodyB:E,pointB:{x:b,y:_},bodyA:A,stiffness:1,length:0}),Y=c.create({bodyB:E,pointB:{x:C,y:_},bodyA:R,stiffness:1,length:0});return x.addBody(M,E),x.addBody(M,A),x.addBody(M,R),x.addConstraint(M,L),x.addConstraint(M,Y),M},u.softBody=function(a,d,n,p,g,v,f,b,C,_){C=h.extend({inertia:1/0},C),_=h.extend({stiffness:.2,render:{type:"line",anchors:!1}},_);var M=u.stack(a,d,n,p,g,v,function(E,A){return r.circle(E,A,b,C)});return u.mesh(M,n,p,f,_),M.label="Soft Body",M}})()},66615:(y,P,i)=>{var u={};y.exports=u;var x=i(31725),c=i(53402);(function(){u.fromVertices=function(h){for(var o={},r=0;r<h.length;r++){var a=(r+1)%h.length,d=x.normalise({x:h[a].y-h[r].y,y:h[r].x-h[a].x}),n=d.y===0?1/0:d.x/d.y;n=n.toFixed(3).toString(),o[n]=d}return c.values(o)},u.rotate=function(h,o){if(o!==0)for(var r=Math.cos(o),a=Math.sin(o),d=0;d<h.length;d++){var n=h[d],p;p=n.x*r-n.y*a,n.y=n.x*a+n.y*r,n.x=p}}})()},15647:y=>{var P={};y.exports=P,function(){P.create=function(i){var u={min:{x:0,y:0},max:{x:0,y:0}};return i&&P.update(u,i),u},P.update=function(i,u,x){i.min.x=1/0,i.max.x=-1/0,i.min.y=1/0,i.max.y=-1/0;for(var c=0;c<u.length;c++){var h=u[c];h.x>i.max.x&&(i.max.x=h.x),h.x<i.min.x&&(i.min.x=h.x),h.y>i.max.y&&(i.max.y=h.y),h.y<i.min.y&&(i.min.y=h.y)}x&&(x.x>0?i.max.x+=x.x:i.min.x+=x.x,x.y>0?i.max.y+=x.y:i.min.y+=x.y)},P.contains=function(i,u){return u.x>=i.min.x&&u.x<=i.max.x&&u.y>=i.min.y&&u.y<=i.max.y},P.overlaps=function(i,u){return i.min.x<=u.max.x&&i.max.x>=u.min.x&&i.max.y>=u.min.y&&i.min.y<=u.max.y},P.translate=function(i,u){i.min.x+=u.x,i.max.x+=u.x,i.min.y+=u.y,i.max.y+=u.y},P.shift=function(i,u){var x=i.max.x-i.min.x,c=i.max.y-i.min.y;i.min.x=u.x,i.max.x=u.x+x,i.min.y=u.y,i.max.y=u.y+c},P.wrap=function(i,u,x){var c=null,h=null;if(typeof u.min.x<"u"&&typeof u.max.x<"u"&&(i.min.x>u.max.x?c=u.min.x-i.max.x:i.max.x<u.min.x&&(c=u.max.x-i.min.x)),typeof u.min.y<"u"&&typeof u.max.y<"u"&&(i.min.y>u.max.y?h=u.min.y-i.max.y:i.max.y<u.min.y&&(h=u.max.y-i.min.y)),c!==null||h!==null)return{x:c||0,y:h||0}}}()},74058:(y,P,i)=>{var u={};y.exports=u,i(15647);var x=i(53402);(function(){u.pathToVertices=function(c,h){typeof window<"u"&&!("SVGPathSeg"in window)&&x.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var o,r,a,d,n,p,g,v,f,b,C=[],_,M,E=0,A=0,R=0;h=h||15;var L=function(F,N,z){var U=z%2===1&&z>1;if(!f||F!=f.x||N!=f.y){f&&U?(_=f.x,M=f.y):(_=0,M=0);var q={x:_+F,y:M+N};(U||!f)&&(f=q),C.push(q),A=_+F,R=M+N}},Y=function(F){var N=F.pathSegTypeAsLetter.toUpperCase();if(N!=="Z"){switch(N){case"M":case"L":case"T":case"C":case"S":case"Q":A=F.x,R=F.y;break;case"H":A=F.x;break;case"V":R=F.y;break}L(A,R,F.pathSegType)}};for(u._svgPathToAbsolute(c),a=c.getTotalLength(),p=[],o=0;o<c.pathSegList.numberOfItems;o+=1)p.push(c.pathSegList.getItem(o));for(g=p.concat();E<a;){if(b=c.getPathSegAtLength(E),n=p[b],n!=v){for(;g.length&&g[0]!=n;)Y(g.shift());v=n}switch(n.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":d=c.getPointAtLength(E),L(d.x,d.y,0);break}E+=h}for(o=0,r=g.length;o<r;++o)Y(g[o]);return C},u._svgPathToAbsolute=function(c){for(var h,o,r,a,d,n,p=c.pathSegList,g=0,v=0,f=p.numberOfItems,b=0;b<f;++b){var C=p.getItem(b),_=C.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(_))"x"in C&&(g=C.x),"y"in C&&(v=C.y);else switch("x1"in C&&(r=g+C.x1),"x2"in C&&(d=g+C.x2),"y1"in C&&(a=v+C.y1),"y2"in C&&(n=v+C.y2),"x"in C&&(g+=C.x),"y"in C&&(v+=C.y),_){case"m":p.replaceItem(c.createSVGPathSegMovetoAbs(g,v),b);break;case"l":p.replaceItem(c.createSVGPathSegLinetoAbs(g,v),b);break;case"h":p.replaceItem(c.createSVGPathSegLinetoHorizontalAbs(g),b);break;case"v":p.replaceItem(c.createSVGPathSegLinetoVerticalAbs(v),b);break;case"c":p.replaceItem(c.createSVGPathSegCurvetoCubicAbs(g,v,r,a,d,n),b);break;case"s":p.replaceItem(c.createSVGPathSegCurvetoCubicSmoothAbs(g,v,d,n),b);break;case"q":p.replaceItem(c.createSVGPathSegCurvetoQuadraticAbs(g,v,r,a),b);break;case"t":p.replaceItem(c.createSVGPathSegCurvetoQuadraticSmoothAbs(g,v),b);break;case"a":p.replaceItem(c.createSVGPathSegArcAbs(g,v,C.r1,C.r2,C.angle,C.largeArcFlag,C.sweepFlag),b);break;case"z":case"Z":g=h,v=o;break}(_=="M"||_=="m")&&(h=g,o=v)}}})()},31725:y=>{var P={};y.exports=P,function(){P.create=function(i,u){return{x:i||0,y:u||0}},P.clone=function(i){return{x:i.x,y:i.y}},P.magnitude=function(i){return Math.sqrt(i.x*i.x+i.y*i.y)},P.magnitudeSquared=function(i){return i.x*i.x+i.y*i.y},P.rotate=function(i,u,x){var c=Math.cos(u),h=Math.sin(u);x||(x={});var o=i.x*c-i.y*h;return x.y=i.x*h+i.y*c,x.x=o,x},P.rotateAbout=function(i,u,x,c){var h=Math.cos(u),o=Math.sin(u);c||(c={});var r=x.x+((i.x-x.x)*h-(i.y-x.y)*o);return c.y=x.y+((i.x-x.x)*o+(i.y-x.y)*h),c.x=r,c},P.normalise=function(i){var u=P.magnitude(i);return u===0?{x:0,y:0}:{x:i.x/u,y:i.y/u}},P.dot=function(i,u){return i.x*u.x+i.y*u.y},P.cross=function(i,u){return i.x*u.y-i.y*u.x},P.cross3=function(i,u,x){return(u.x-i.x)*(x.y-i.y)-(u.y-i.y)*(x.x-i.x)},P.add=function(i,u,x){return x||(x={}),x.x=i.x+u.x,x.y=i.y+u.y,x},P.sub=function(i,u,x){return x||(x={}),x.x=i.x-u.x,x.y=i.y-u.y,x},P.mult=function(i,u){return{x:i.x*u,y:i.y*u}},P.div=function(i,u){return{x:i.x/u,y:i.y/u}},P.perp=function(i,u){return u=u===!0?-1:1,{x:u*-i.y,y:u*i.x}},P.neg=function(i){return{x:-i.x,y:-i.y}},P.angle=function(i,u){return Math.atan2(u.y-i.y,u.x-i.x)},P._temp=[P.create(),P.create(),P.create(),P.create(),P.create(),P.create()]}()},41598:(y,P,i)=>{var u={};y.exports=u;var x=i(31725),c=i(53402);(function(){u.create=function(h,o){for(var r=[],a=0;a<h.length;a++){var d=h[a],n={x:d.x,y:d.y,index:a,body:o,isInternal:!1};r.push(n)}return r},u.fromPath=function(h,o){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,a=[];return h.replace(r,function(d,n,p){a.push({x:parseFloat(n),y:parseFloat(p)})}),u.create(a,o)},u.centre=function(h){for(var o=u.area(h,!0),r={x:0,y:0},a,d,n,p=0;p<h.length;p++)n=(p+1)%h.length,a=x.cross(h[p],h[n]),d=x.mult(x.add(h[p],h[n]),a),r=x.add(r,d);return x.div(r,6*o)},u.mean=function(h){for(var o={x:0,y:0},r=0;r<h.length;r++)o.x+=h[r].x,o.y+=h[r].y;return x.div(o,h.length)},u.area=function(h,o){for(var r=0,a=h.length-1,d=0;d<h.length;d++)r+=(h[a].x-h[d].x)*(h[a].y+h[d].y),a=d;return o?r/2:Math.abs(r)/2},u.inertia=function(h,o){for(var r=0,a=0,d=h,n,p,g=0;g<d.length;g++)p=(g+1)%d.length,n=Math.abs(x.cross(d[p],d[g])),r+=n*(x.dot(d[p],d[p])+x.dot(d[p],d[g])+x.dot(d[g],d[g])),a+=n;return o/6*(r/a)},u.translate=function(h,o,r){r=typeof r<"u"?r:1;var a=h.length,d=o.x*r,n=o.y*r,p;for(p=0;p<a;p++)h[p].x+=d,h[p].y+=n;return h},u.rotate=function(h,o,r){if(o!==0){var a=Math.cos(o),d=Math.sin(o),n=r.x,p=r.y,g=h.length,v,f,b,C;for(C=0;C<g;C++)v=h[C],f=v.x-n,b=v.y-p,v.x=n+(f*a-b*d),v.y=p+(f*d+b*a);return h}},u.contains=function(h,o){for(var r=o.x,a=o.y,d=h.length,n=h[d-1],p,g=0;g<d;g++){if(p=h[g],(r-n.x)*(p.y-n.y)+(a-n.y)*(n.x-p.x)>0)return!1;n=p}return!0},u.scale=function(h,o,r,a){if(o===1&&r===1)return h;a=a||u.centre(h);for(var d,n,p=0;p<h.length;p++)d=h[p],n=x.sub(d,a),h[p].x=a.x+n.x*o,h[p].y=a.y+n.y*r;return h},u.chamfer=function(h,o,r,a,d){typeof o=="number"?o=[o]:o=o||[8],r=typeof r<"u"?r:-1,a=a||2,d=d||14;for(var n=[],p=0;p<h.length;p++){var g=h[p-1>=0?p-1:h.length-1],v=h[p],f=h[(p+1)%h.length],b=o[p<o.length?p:o.length-1];if(b===0){n.push(v);continue}var C=x.normalise({x:v.y-g.y,y:g.x-v.x}),_=x.normalise({x:f.y-v.y,y:v.x-f.x}),M=Math.sqrt(2*Math.pow(b,2)),E=x.mult(c.clone(C),b),A=x.normalise(x.mult(x.add(C,_),.5)),R=x.sub(v,x.mult(A,M)),L=r;r===-1&&(L=Math.pow(b,.32)*1.75),L=c.clamp(L,a,d),L%2===1&&(L+=1);for(var Y=Math.acos(x.dot(C,_)),F=Y/L,N=0;N<L;N++)n.push(x.add(x.rotate(E,F*N),R))}return n},u.clockwiseSort=function(h){var o=u.mean(h);return h.sort(function(r,a){return x.angle(o,r)-x.angle(o,a)}),h},u.isConvex=function(h){var o=0,r=h.length,a,d,n,p;if(r<3)return null;for(a=0;a<r;a++)if(d=(a+1)%r,n=(a+2)%r,p=(h[d].x-h[a].x)*(h[n].y-h[d].y),p-=(h[d].y-h[a].y)*(h[n].x-h[d].x),p<0?o|=1:p>0&&(o|=2),o===3)return!1;return o!==0?!0:null},u.hull=function(h){var o=[],r=[],a,d;for(h=h.slice(0),h.sort(function(n,p){var g=n.x-p.x;return g!==0?g:n.y-p.y}),d=0;d<h.length;d+=1){for(a=h[d];r.length>=2&&x.cross3(r[r.length-2],r[r.length-1],a)<=0;)r.pop();r.push(a)}for(d=h.length-1;d>=0;d-=1){for(a=h[d];o.length>=2&&x.cross3(o[o.length-2],o[o.length-1],a)<=0;)o.pop();o.push(a)}return o.pop(),r.pop(),o.concat(r)}})()},55973:y=>{/**
* @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={decomp:Y,quickDecomp:U,isSimple:N,removeCollinearPoints:q,removeDuplicatePoints:Q,makeCCW:f};function P(H,J,X){X=X||0;var Z=[0,0],$,it,nt,at,ht,dt,vt;return $=H[1][1]-H[0][1],it=H[0][0]-H[1][0],nt=$*H[0][0]+it*H[0][1],at=J[1][1]-J[0][1],ht=J[0][0]-J[1][0],dt=at*J[0][0]+ht*J[0][1],vt=$*ht-at*it,K(vt,0,X)||(Z[0]=(ht*nt-it*dt)/vt,Z[1]=($*dt-at*nt)/vt),Z}function i(H,J,X,Z){var $=J[0]-H[0],it=J[1]-H[1],nt=Z[0]-X[0],at=Z[1]-X[1];if(nt*it-at*$===0)return!1;var ht=($*(X[1]-H[1])+it*(H[0]-X[0]))/(nt*it-at*$),dt=(nt*(H[1]-X[1])+at*(X[0]-H[0]))/(at*$-nt*it);return ht>=0&&ht<=1&&dt>=0&&dt<=1}function u(H,J,X){return(J[0]-H[0])*(X[1]-H[1])-(X[0]-H[0])*(J[1]-H[1])}function x(H,J,X){return u(H,J,X)>0}function c(H,J,X){return u(H,J,X)>=0}function h(H,J,X){return u(H,J,X)<0}function o(H,J,X){return u(H,J,X)<=0}var r=[],a=[];function d(H,J,X,Z){if(Z){var $=r,it=a;$[0]=J[0]-H[0],$[1]=J[1]-H[1],it[0]=X[0]-J[0],it[1]=X[1]-J[1];var nt=$[0]*it[0]+$[1]*it[1],at=Math.sqrt($[0]*$[0]+$[1]*$[1]),ht=Math.sqrt(it[0]*it[0]+it[1]*it[1]),dt=Math.acos(nt/(at*ht));return dt<Z}else return u(H,J,X)===0}function n(H,J){var X=J[0]-H[0],Z=J[1]-H[1];return X*X+Z*Z}function p(H,J){var X=H.length;return H[J<0?J%X+X:J%X]}function g(H){H.length=0}function v(H,J,X,Z){for(var $=X;$<Z;$++)H.push(J[$])}function f(H){for(var J=0,X=H,Z=1;Z<H.length;++Z)(X[Z][1]<X[J][1]||X[Z][1]===X[J][1]&&X[Z][0]>X[J][0])&&(J=Z);return x(p(H,J-1),p(H,J),p(H,J+1))?!1:(b(H),!0)}function b(H){for(var J=[],X=H.length,Z=0;Z!==X;Z++)J.push(H.pop());for(var Z=0;Z!==X;Z++)H[Z]=J[Z]}function C(H,J){return h(p(H,J-1),p(H,J),p(H,J+1))}var _=[],M=[];function E(H,J,X){var Z,$,it=_,nt=M;if(c(p(H,J+1),p(H,J),p(H,X))&&o(p(H,J-1),p(H,J),p(H,X)))return!1;$=n(p(H,J),p(H,X));for(var at=0;at!==H.length;++at)if(!((at+1)%H.length===J||at===J)&&c(p(H,J),p(H,X),p(H,at+1))&&o(p(H,J),p(H,X),p(H,at))&&(it[0]=p(H,J),it[1]=p(H,X),nt[0]=p(H,at),nt[1]=p(H,at+1),Z=P(it,nt),n(p(H,J),Z)<$))return!1;return!0}function A(H,J,X){for(var Z=0;Z!==H.length;++Z)if(!(Z===J||Z===X||(Z+1)%H.length===J||(Z+1)%H.length===X)&&i(p(H,J),p(H,X),p(H,Z),p(H,Z+1)))return!1;return!0}function R(H,J,X,Z){var $=Z||[];if(g($),J<X)for(var it=J;it<=X;it++)$.push(H[it]);else{for(var it=0;it<=X;it++)$.push(H[it]);for(var it=J;it<H.length;it++)$.push(H[it])}return $}function L(H){for(var J=[],X=[],Z=[],$=[],it=Number.MAX_VALUE,nt=0;nt<H.length;++nt)if(C(H,nt)){for(var at=0;at<H.length;++at)if(E(H,nt,at)){X=L(R(H,nt,at,$)),Z=L(R(H,at,nt,$));for(var ht=0;ht<Z.length;ht++)X.push(Z[ht]);X.length<it&&(J=X,it=X.length,J.push([p(H,nt),p(H,at)]))}}return J}function Y(H){var J=L(H);return J.length>0?F(H,J):[H]}function F(H,J){if(J.length===0)return[H];if(J instanceof Array&&J.length&&J[0]instanceof Array&&J[0].length===2&&J[0][0]instanceof Array){for(var X=[H],Z=0;Z<J.length;Z++)for(var $=J[Z],it=0;it<X.length;it++){var nt=X[it],at=F(nt,$);if(at){X.splice(it,1),X.push(at[0],at[1]);break}}return X}else{var $=J,Z=H.indexOf($[0]),it=H.indexOf($[1]);return Z!==-1&&it!==-1?[R(H,Z,it),R(H,it,Z)]:!1}}function N(H){var J=H,X;for(X=0;X<J.length-1;X++)for(var Z=0;Z<X-1;Z++)if(i(J[X],J[X+1],J[Z],J[Z+1]))return!1;for(X=1;X<J.length-2;X++)if(i(J[0],J[J.length-1],J[X],J[X+1]))return!1;return!0}function z(H,J,X,Z,$){$=$||0;var it=J[1]-H[1],nt=H[0]-J[0],at=it*H[0]+nt*H[1],ht=Z[1]-X[1],dt=X[0]-Z[0],vt=ht*X[0]+dt*X[1],ft=it*dt-ht*nt;return K(ft,0,$)?[0,0]:[(dt*at-nt*vt)/ft,(it*vt-ht*at)/ft]}function U(H,J,X,Z,$,it,nt){it=it||100,nt=nt||0,$=$||25,J=typeof J<"u"?J:[],X=X||[],Z=Z||[];var at=[0,0],ht=[0,0],dt=[0,0],vt=0,ft=0,gt=0,wt=0,bt=0,xt=0,Pt=0,Ot=[],Et=[],Tt=H,Mt=H;if(Mt.length<3)return J;if(nt++,nt>it)return console.warn("quickDecomp: max level ("+it+") reached."),J;for(var kt=0;kt<H.length;++kt)if(C(Tt,kt)){X.push(Tt[kt]),vt=ft=Number.MAX_VALUE;for(var Gt=0;Gt<H.length;++Gt)x(p(Tt,kt-1),p(Tt,kt),p(Tt,Gt))&&o(p(Tt,kt-1),p(Tt,kt),p(Tt,Gt-1))&&(dt=z(p(Tt,kt-1),p(Tt,kt),p(Tt,Gt),p(Tt,Gt-1)),h(p(Tt,kt+1),p(Tt,kt),dt)&&(gt=n(Tt[kt],dt),gt<ft&&(ft=gt,ht=dt,xt=Gt))),x(p(Tt,kt+1),p(Tt,kt),p(Tt,Gt+1))&&o(p(Tt,kt+1),p(Tt,kt),p(Tt,Gt))&&(dt=z(p(Tt,kt+1),p(Tt,kt),p(Tt,Gt),p(Tt,Gt+1)),x(p(Tt,kt-1),p(Tt,kt),dt)&&(gt=n(Tt[kt],dt),gt<vt&&(vt=gt,at=dt,bt=Gt)));if(xt===(bt+1)%H.length)dt[0]=(ht[0]+at[0])/2,dt[1]=(ht[1]+at[1])/2,Z.push(dt),kt<bt?(v(Ot,Tt,kt,bt+1),Ot.push(dt),Et.push(dt),xt!==0&&v(Et,Tt,xt,Tt.length),v(Et,Tt,0,kt+1)):(kt!==0&&v(Ot,Tt,kt,Tt.length),v(Ot,Tt,0,bt+1),Ot.push(dt),Et.push(dt),v(Et,Tt,xt,kt+1));else{if(xt>bt&&(bt+=H.length),wt=Number.MAX_VALUE,bt<xt)return J;for(var Gt=xt;Gt<=bt;++Gt)c(p(Tt,kt-1),p(Tt,kt),p(Tt,Gt))&&o(p(Tt,kt+1),p(Tt,kt),p(Tt,Gt))&&(gt=n(p(Tt,kt),p(Tt,Gt)),gt<wt&&A(Tt,kt,Gt)&&(wt=gt,Pt=Gt%H.length));kt<Pt?(v(Ot,Tt,kt,Pt+1),Pt!==0&&v(Et,Tt,Pt,Mt.length),v(Et,Tt,0,kt+1)):(kt!==0&&v(Ot,Tt,kt,Mt.length),v(Ot,Tt,0,Pt+1),v(Et,Tt,Pt,kt+1))}return Ot.length<Et.length?(U(Ot,J,X,Z,$,it,nt),U(Et,J,X,Z,$,it,nt)):(U(Et,J,X,Z,$,it,nt),U(Ot,J,X,Z,$,it,nt)),J}return J.push(H),J}function q(H,J){for(var X=0,Z=H.length-1;H.length>3&&Z>=0;--Z)d(p(H,Z-1),p(H,Z),p(H,Z+1),J)&&(H.splice(Z%H.length,1),X++);return X}function Q(H,J){for(var X=H.length-1;X>=1;--X)for(var Z=H[X],$=X-1;$>=0;--$)if(et(Z,H[$],J)){H.splice(X,1);continue}}function K(H,J,X){return X=X||0,Math.abs(H-J)<=X}function et(H,J,X){return K(H[0],J[0],X)&&K(H[1],J[1],X)}},52018:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var u=i(83419),x=new u({initialize:function(c){this.pluginManager=c,this.game=c.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});y.exports=x},42363:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};y.exports=P},37277:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={},i={},u={};u.register=function(x,c,h,o){o===void 0&&(o=!1),P[x]={plugin:c,mapping:h,custom:o}},u.registerCustom=function(x,c,h,o){i[x]={plugin:c,mapping:h,data:o}},u.hasCore=function(x){return P.hasOwnProperty(x)},u.hasCustom=function(x){return i.hasOwnProperty(x)},u.getCore=function(x){return P[x]},u.getCustom=function(x){return i[x]},u.getCustomClass=function(x){return i.hasOwnProperty(x)?i[x].plugin:null},u.remove=function(x){P.hasOwnProperty(x)&&delete P[x]},u.removeCustom=function(x){i.hasOwnProperty(x)&&delete i[x]},u.destroyCorePlugins=function(){for(var x in P)P.hasOwnProperty(x)&&delete P[x]},u.destroyCustomPlugins=function(){for(var x in i)i.hasOwnProperty(x)&&delete i[x]},y.exports=u},77332:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(8443),c=i(50792),h=i(74099),o=i(44603),r=i(39429),a=i(95540),d=i(37277),n=i(72905),p=i(8054),g=new u({Extends:c,initialize:function(v){c.call(this),this.game=v,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],v.isBooted||v.config.renderType===p.HEADLESS?this.boot():v.events.once(x.BOOT,this.boot,this)},boot:function(){var v,f,b,C,_,M,E,A=this.game.config,R=A.installGlobalPlugins;for(R=R.concat(this._pendingGlobal),v=0;v<R.length;v++)f=R[v],b=a(f,"key",null),C=a(f,"plugin",null),_=a(f,"start",!1),M=a(f,"mapping",null),E=a(f,"data",null),b&&(C?this.install(b,C,_,M,E):console.warn("Missing `plugin` for key: "+b));for(R=A.installScenePlugins,R=R.concat(this._pendingScene),v=0;v<R.length;v++)f=R[v],b=a(f,"key",null),C=a(f,"plugin",null),M=a(f,"mapping",null),b&&(C?this.installScenePlugin(b,C,M):console.warn("Missing `plugin` for key: "+b));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(x.DESTROY,this.destroy,this)},addToScene:function(v,f,b){var C,_,M,E=this.game,A=v.scene,R=v.settings.map,L=v.settings.isBooted;for(C=0;C<f.length;C++)_=f[C],E[_]?(v[_]=E[_],R.hasOwnProperty(_)&&(A[R[_]]=v[_])):_==="game"&&R.hasOwnProperty(_)&&(A[R[_]]=E);for(var Y=0;Y<b.length;Y++)for(M=b[Y],C=0;C<M.length;C++)if(_=M[C],!!d.hasCore(_)){var F=d.getCore(_),N=F.mapping,z=new F.plugin(A,this,N);v[N]=z,F.custom?A[N]=z:R.hasOwnProperty(N)&&(A[R[N]]=z),L&&z.boot()}for(M=this.plugins,C=0;C<M.length;C++){var U=M[C];U.mapping&&(A[U.mapping]=U.plugin)}},getDefaultScenePlugins:function(){var v=this.game.config.defaultPlugins;return v=v.concat(this.scenePlugins),v},installScenePlugin:function(v,f,b,C,_){if(_===void 0&&(_=!1),typeof f!="function"){console.warn("Invalid Scene Plugin: "+v);return}if(d.hasCore(v)||d.register(v,f,b,!0),this.scenePlugins.indexOf(v)===-1)this.scenePlugins.push(v);else if(!_&&d.hasCore(v)){console.warn("Scene Plugin key in use: "+v);return}if(C){var M=new f(C,this,v);C.sys[v]=M,b&&b!==""&&(C[b]=M),M.boot()}},install:function(v,f,b,C,_){if(b===void 0&&(b=!1),C===void 0&&(C=null),_===void 0&&(_=null),typeof f!="function")return console.warn("Invalid Plugin: "+v),null;if(d.hasCustom(v))return console.warn("Plugin key in use: "+v),null;if(C!==null&&(b=!0),!this.game.isBooted)this._pendingGlobal.push({key:v,plugin:f,start:b,mapping:C,data:_});else if(d.registerCustom(v,f,C,_),b)return this.start(v);return null},getIndex:function(v){for(var f=this.plugins,b=0;b<f.length;b++){var C=f[b];if(C.key===v)return b}return-1},getEntry:function(v){var f=this.getIndex(v);if(f!==-1)return this.plugins[f]},isActive:function(v){var f=this.getEntry(v);return f&&f.active},start:function(v,f){f===void 0&&(f=v);var b=this.getEntry(f);return b&&!b.active?(b.active=!0,b.plugin.start()):b||(b=this.createEntry(v,f)),b?b.plugin:null},createEntry:function(v,f){var b=d.getCustom(v);if(b){var C=new b.plugin(this);b={key:f,plugin:C,active:!0,mapping:b.mapping,data:b.data},this.plugins.push(b),C.init(b.data),C.start()}return b},stop:function(v){var f=this.getEntry(v);return f&&f.active&&(f.active=!1,f.plugin.stop()),this},get:function(v,f){f===void 0&&(f=!0);var b=this.getEntry(v);if(b)return b.plugin;var C=this.getClass(v);return C&&f?(b=this.createEntry(v,v),b?b.plugin:null):C||null},getClass:function(v){return d.getCustomClass(v)},removeGlobalPlugin:function(v){var f=this.getEntry(v);f&&n(this.plugins,f),d.removeCustom(v)},removeScenePlugin:function(v){n(this.scenePlugins,v),d.remove(v)},registerGameObject:function(v,f,b){return f&&r.register(v,f),b&&o.register(v,b),this},removeGameObject:function(v,f,b){return f===void 0&&(f=!0),b===void 0&&(b=!0),f&&r.remove(v),b&&o.remove(v),this},registerFileType:function(v,f,b){h.register(v,f),b&&b.sys.load&&(b.sys.load[v]=f)},destroy:function(){for(var v=0;v<this.plugins.length;v++)this.plugins[v].plugin.destroy();d.destroyCustomPlugins(),this.game.noReturn&&d.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});y.exports=g},45145:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var u=i(52018),x=i(83419),c=i(44594),h=new x({Extends:u,initialize:function(o,r,a){u.call(this,r),this.scene=o,this.systems=o.sys,this.pluginKey=a,o.sys.events.once(c.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});y.exports=h},18922:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={BasePlugin:i(52018),DefaultPlugins:i(42363),PluginCache:i(37277),PluginManager:i(77332),ScenePlugin:i(45145)}},63595:()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(y){const P=performance.now(),i=this.getVideoPlaybackQuality(),u=this.mozPresentedFrames||this.mozPaintedFrames||i.totalVideoFrames-i.droppedVideoFrames,x=(c,h)=>{const o=this.getVideoPlaybackQuality(),r=this.mozPresentedFrames||this.mozPaintedFrames||o.totalVideoFrames-o.droppedVideoFrames;if(r>u){const a=this.mozFrameDelay||o.totalFrameDelay-i.totalFrameDelay||0,d=h-c;y(h,{presentationTime:h+a*1e3,expectedDisplayTime:h+d,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+d/1e3,presentedFrames:r,processingDuration:a}),delete this._rvfcpolyfillmap[P]}else this._rvfcpolyfillmap[P]=requestAnimationFrame(a=>x(h,a))};return this._rvfcpolyfillmap[P]=requestAnimationFrame(c=>x(P,c)),P},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(y){cancelAnimationFrame(this._rvfcpolyfillmap[y]),delete this._rvfcpolyfillmap[y]})},10312:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29795:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={DEFAULT:0,LINEAR:0,NEAREST:1};y.exports=P},68627:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Felipe Alfonso <@bitnenfer>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(19715),x=i(32880),c=i(83419),h=i(8054),o=i(50792),r=i(92503),a=i(56373),d=i(97480),n=i(69442),p=i(8443),g=i(61340),v=new c({Extends:o,initialize:function(f){o.call(this);var b=f.config;this.config={clearBeforeRender:b.clearBeforeRender,backgroundColor:b.backgroundColor,antialias:b.antialias,roundPixels:b.roundPixels,transparent:b.transparent},this.game=f,this.type=h.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=f.canvas;var C={alpha:b.transparent,desynchronized:b.desynchronized,willReadFrequently:!1};this.gameContext=b.context?b.context:this.gameCanvas.getContext("2d",C),this.currentContext=this.gameContext,this.antialias=b.antialias,this.blendModes=a(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new g,this._tempMatrix2=new g,this._tempMatrix3=new g,this.isBooted=!1,this.init()},init:function(){var f=this.game;f.events.once(p.BOOT,function(){var b=this.config;if(!b.transparent){var C=this.gameContext,_=this.gameCanvas;C.fillStyle=b.backgroundColor.rgba,C.fillRect(0,0,_.width,_.height)}},this),f.textures.once(n.READY,this.boot,this)},boot:function(){var f=this.game,b=f.scale.baseSize;this.width=b.width,this.height=b.height,this.isBooted=!0,f.scale.on(d.RESIZE,this.onResize,this),this.resize(b.width,b.height)},onResize:function(f,b){(b.width!==this.width||b.height!==this.height)&&this.resize(b.width,b.height)},resize:function(f,b){this.width=f,this.height=b,this.emit(r.RESIZE,f,b)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(f){return this.currentContext.globalCompositeOperation=f,this},setContext:function(f){return this.currentContext=f||this.gameContext,this},setAlpha:function(f){return this.currentContext.globalAlpha=f,this},preRender:function(){var f=this.gameContext,b=this.config,C=this.width,_=this.height;f.globalAlpha=1,f.globalCompositeOperation="source-over",f.setTransform(1,0,0,1,0,0),this.emit(r.PRE_RENDER_CLEAR),b.clearBeforeRender&&(f.clearRect(0,0,C,_),b.transparent||(f.fillStyle=b.backgroundColor.rgba,f.fillRect(0,0,C,_))),f.save(),this.drawCount=0,this.emit(r.PRE_RENDER)},render:function(f,b,C){var _=b.length;this.emit(r.RENDER,f,C);var M=C.x,E=C.y,A=C.width,R=C.height,L=C.renderToTexture?C.context:f.sys.context;L.save(),this.game.scene.customViewports&&(L.beginPath(),L.rect(M,E,A,R),L.clip()),C.emit(u.PRE_RENDER,C),this.currentContext=L;var Y=C.mask;Y&&Y.preRenderCanvas(this,null,C._maskCamera),C.transparent||(L.fillStyle=C.backgroundColor.rgba,L.fillRect(M,E,A,R)),L.globalAlpha=C.alpha,L.globalCompositeOperation="source-over",this.drawCount+=_,C.renderToTexture&&C.emit(u.PRE_RENDER,C),C.matrix.copyToContext(L);for(var F=0;F<_;F++){var N=b[F];N.mask&&N.mask.preRenderCanvas(this,N,C),N.renderCanvas(this,N,C),N.mask&&N.mask.postRenderCanvas(this,N,C)}L.setTransform(1,0,0,1,0,0),L.globalCompositeOperation="source-over",L.globalAlpha=1,C.flashEffect.postRenderCanvas(L),C.fadeEffect.postRenderCanvas(L),C.dirty=!1,Y&&Y.postRenderCanvas(this),L.restore(),C.renderToTexture&&(C.emit(u.POST_RENDER,C),C.renderToGame&&f.sys.context.drawImage(C.canvas,M,E)),C.emit(u.POST_RENDER,C)},postRender:function(){var f=this.gameContext;f.restore(),this.emit(r.POST_RENDER);var b=this.snapshotState;b.callback&&(x(this.gameCanvas,b),b.callback=null)},snapshotCanvas:function(f,b,C,_,M,E,A,R,L){C===void 0&&(C=!1),this.snapshotArea(_,M,E,A,b,R,L);var Y=this.snapshotState;return Y.getPixel=C,x(f,Y),Y.callback=null,this},snapshot:function(f,b,C){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,f,b,C)},snapshotArea:function(f,b,C,_,M,E,A){var R=this.snapshotState;return R.callback=M,R.type=E,R.encoder=A,R.getPixel=!1,R.x=f,R.y=b,R.width=Math.min(C,this.gameCanvas.width),R.height=Math.min(_,this.gameCanvas.height),this},snapshotPixel:function(f,b,C){return this.snapshotArea(f,b,1,1,C),this.snapshotState.getPixel=!0,this},batchSprite:function(f,b,C,_){var M=C.alpha*f.alpha;if(M!==0){var E=this.currentContext,A=this._tempMatrix1,R=this._tempMatrix2,L=b.canvasData,Y=L.x,F=L.y,N=b.cutWidth,z=b.cutHeight,U=b.customPivot,q=b.source.resolution,Q=f.displayOriginX,K=f.displayOriginY,et=-Q+b.x,H=-K+b.y;if(f.isCropped){var J=f._crop;(J.flipX!==f.flipX||J.flipY!==f.flipY)&&b.updateCropUVs(J,f.flipX,f.flipY),N=J.cw,z=J.ch,Y=J.cx,F=J.cy,et=-Q+J.x,H=-K+J.y,f.flipX&&(et>=0?et=-(et+N):et<0&&(et=Math.abs(et)-N)),f.flipY&&(H>=0?H=-(H+z):H<0&&(H=Math.abs(H)-z))}var X=1,Z=1;f.flipX&&(U||(et+=-b.realWidth+Q*2),X=-1),f.flipY&&(U||(H+=-b.realHeight+K*2),Z=-1);var $=f.x,it=f.y;if(C.roundPixels&&($=Math.floor($),it=Math.floor(it)),R.applyITRS($,it,f.rotation,f.scaleX*X,f.scaleY*Z),A.copyFrom(C.matrix),_?(A.multiplyWithOffset(_,-C.scrollX*f.scrollFactorX,-C.scrollY*f.scrollFactorY),R.e=$,R.f=it):(R.e-=C.scrollX*f.scrollFactorX,R.f-=C.scrollY*f.scrollFactorY),A.multiply(R),C.renderRoundPixels&&(A.e=Math.floor(A.e+.5),A.f=Math.floor(A.f+.5)),E.save(),A.setToContext(E),E.globalCompositeOperation=this.blendModes[f.blendMode],E.globalAlpha=M,E.imageSmoothingEnabled=!b.source.scaleMode,f.mask&&f.mask.preRenderCanvas(this,f,C),N>0&&z>0){var nt=N/q,at=z/q;C.roundPixels&&(et=Math.floor(et+.5),H=Math.floor(H+.5),nt+=.5,at+=.5),E.drawImage(b.source.image,Y,F,N,z,et,H,nt,at)}f.mask&&f.mask.postRenderCanvas(this,f,C),E.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});y.exports=v},55830:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={CanvasRenderer:i(68627),GetBlendModes:i(56373),SetTransform:i(20926)}},56373:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(10312),x=i(89289),c=function(){var h=[],o=x.supportNewBlendModes,r="source-over";return h[u.NORMAL]=r,h[u.ADD]="lighter",h[u.MULTIPLY]=o?"multiply":r,h[u.SCREEN]=o?"screen":r,h[u.OVERLAY]=o?"overlay":r,h[u.DARKEN]=o?"darken":r,h[u.LIGHTEN]=o?"lighten":r,h[u.COLOR_DODGE]=o?"color-dodge":r,h[u.COLOR_BURN]=o?"color-burn":r,h[u.HARD_LIGHT]=o?"hard-light":r,h[u.SOFT_LIGHT]=o?"soft-light":r,h[u.DIFFERENCE]=o?"difference":r,h[u.EXCLUSION]=o?"exclusion":r,h[u.HUE]=o?"hue":r,h[u.SATURATION]=o?"saturation":r,h[u.COLOR]=o?"color":r,h[u.LUMINOSITY]=o?"luminosity":r,h[u.ERASE]="destination-out",h[u.SOURCE_IN]="source-in",h[u.SOURCE_OUT]="source-out",h[u.SOURCE_ATOP]="source-atop",h[u.DESTINATION_OVER]="destination-over",h[u.DESTINATION_IN]="destination-in",h[u.DESTINATION_OUT]="destination-out",h[u.DESTINATION_ATOP]="destination-atop",h[u.LIGHTER]="lighter",h[u.COPY]="copy",h[u.XOR]="xor",h};y.exports=c},20926:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91296),x=function(c,h,o,r,a){var d=r.alpha*o.alpha;if(d<=0)return!1;var n=u(o,r,a).calc;return h.globalCompositeOperation=c.blendModes[o.blendMode],h.globalAlpha=d,h.save(),n.setToContext(h),h.imageSmoothingEnabled=o.frame?!o.frame.source.scaleMode:c.antialias,!0};y.exports=x},63899:y=>{/**
* @author       Benjamin D. Richards <benjamindrichards@gmail.com>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="losewebgl"},6119:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="postrender"},48070:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="prerender"},15640:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="render"},8912:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="resize"},87124:y=>{/**
* @author       Benjamin D. Richards <benjamindrichards@gmail.com>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="restorewebgl"},92503:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={LOSE_WEBGL:i(63899),POST_RENDER:i(6119),PRE_RENDER:i(48070),RENDER:i(15640),RESIZE:i(8912),RESTORE_WEBGL:i(87124)}},36909:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Events:i(92503),Snapshot:i(89966)},y.exports.Canvas=i(55830),y.exports.WebGL=i(4159)},32880:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(27919),x=i(40987),c=i(95540),h=function(o,r){var a=c(r,"callback"),d=c(r,"type","image/png"),n=c(r,"encoder",.92),p=Math.abs(Math.round(c(r,"x",0))),g=Math.abs(Math.round(c(r,"y",0))),v=Math.floor(c(r,"width",o.width)),f=Math.floor(c(r,"height",o.height)),b=c(r,"getPixel",!1);if(b){var C=o.getContext("2d",{willReadFrequently:!1}),_=C.getImageData(p,g,1,1),M=_.data;a.call(null,new x(M[0],M[1],M[2],M[3]))}else if(p!==0||g!==0||v!==o.width||f!==o.height){var E=u.createWebGL(this,v,f),A=E.getContext("2d",{willReadFrequently:!0});v>0&&f>0&&A.drawImage(o,p,g,v,f,0,0,v,f);var R=new Image;R.onerror=function(){a.call(null),u.remove(E)},R.onload=function(){a.call(null,R),u.remove(E)},R.src=E.toDataURL(d,n)}else{var L=new Image;L.onerror=function(){a.call(null)},L.onload=function(){a.call(null,L)},L.src=o.toDataURL(d,n)}};y.exports=h},88815:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(27919),x=i(40987),c=i(95540),h=function(o,r){var a=o,d=c(r,"callback"),n=c(r,"type","image/png"),p=c(r,"encoder",.92),g=Math.abs(Math.round(c(r,"x",0))),v=Math.abs(Math.round(c(r,"y",0))),f=c(r,"getPixel",!1),b=c(r,"isFramebuffer",!1),C=b?c(r,"bufferWidth",1):a.drawingBufferWidth,_=b?c(r,"bufferHeight",1):a.drawingBufferHeight;if(f){var M=new Uint8Array(4),E=b?v:_-v;a.readPixels(g,E,1,1,a.RGBA,a.UNSIGNED_BYTE,M),d.call(null,new x(M[0],M[1],M[2],M[3]))}else{var A=Math.floor(c(r,"width",C)),R=Math.floor(c(r,"height",_)),L=A*R*4,Y=new Uint8Array(L);a.readPixels(g,_-v-R,A,R,a.RGBA,a.UNSIGNED_BYTE,Y);for(var F=u.createWebGL(this,A,R),N=F.getContext("2d",{willReadFrequently:!0}),z=N.getImageData(0,0,A,R),U=z.data,q=0;q<R;q++)for(var Q=0;Q<A;Q++){var K=((R-q-1)*A+Q)*4,et=b?L-(q*A+(A-Q))*4:(q*A+Q)*4;U[et+0]=Y[K+0],U[et+1]=Y[K+1],U[et+2]=Y[K+2],U[et+3]=Y[K+3]}N.putImageData(z,0,0);var H=new Image;H.onerror=function(){d.call(null),u.remove(F)},H.onload=function(){d.call(null,H),u.remove(F)},H.src=F.toDataURL(n,p)}};y.exports=h},89966:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Canvas:i(32880),WebGL:i(88815)}},7530:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(36060),c=i(90330),h=i(82264),o=i(95540),r=i(32302),a=i(63448),d=i(31302),n=i(58918),p=i(14811),g=i(92651),v=i(96569),f=i(56527),b=i(57516),C=i(43439),_=i(81041),M=i(12385),E=i(7589),A=i(95428),R=i(72905),L=new u({initialize:function(Y){this.game=Y.game,this.renderer=Y,this.classes=new c([[x.UTILITY_PIPELINE,E],[x.MULTI_PIPELINE,b],[x.BITMAPMASK_PIPELINE,d],[x.SINGLE_PIPELINE,M],[x.ROPE_PIPELINE,_],[x.LIGHT_PIPELINE,v],[x.POINTLIGHT_PIPELINE,C],[x.MOBILE_PIPELINE,f]]),this.postPipelineClasses=new c,this.pipelines=new c,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(Y,F,N){var z=this.renderer,U=this.renderTargets;this.frameInc=Math.floor(o(Y,"frameInc",32));var q=z.width,Q=z.height,K=this.game.config.disablePreFX,et=this.game.config.disablePostFX;if(et||this.postPipelineClasses.setAll([[String(p.BARREL),n.Barrel],[String(p.BLOOM),n.Bloom],[String(p.BLUR),n.Blur],[String(p.BOKEH),n.Bokeh],[String(p.CIRCLE),n.Circle],[String(p.COLOR_MATRIX),n.ColorMatrix],[String(p.DISPLACEMENT),n.Displacement],[String(p.GLOW),n.Glow],[String(p.GRADIENT),n.Gradient],[String(p.PIXELATE),n.Pixelate],[String(p.SHADOW),n.Shadow],[String(p.SHINE),n.Shine],[String(p.VIGNETTE),n.Vignette],[String(p.WIPE),n.Wipe]]),!K){this.classes.set(x.FX_PIPELINE,g);for(var H=Math.min(q,Q),J=Math.ceil(H/this.frameInc),X=1;X<J;X++){var Z=X*this.frameInc;U.push(new r(z,Z,Z)),U.push(new r(z,Z,Z)),U.push(new r(z,Z,Z)),this.maxDimension=Z}U.push(new r(z,q,Q,1,0,!0,!0)),U.push(new r(z,q,Q,1,0,!0,!0)),U.push(new r(z,q,Q,1,0,!0,!0))}var $,it,nt=this,at=this.game;if(this.classes.each(function(dt,vt){$=nt.add(dt,new vt({game:at})),dt===x.UTILITY_PIPELINE&&(nt.UTILITY_PIPELINE=$,nt.fullFrame1=$.fullFrame1,nt.fullFrame2=$.fullFrame2,nt.halfFrame1=$.halfFrame1,nt.halfFrame2=$.halfFrame2)}),this.MULTI_PIPELINE=this.get(x.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(x.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(x.MOBILE_PIPELINE),K||(this.FX_PIPELINE=this.get(x.FX_PIPELINE)),Y)for(it in Y){var ht=Y[it];$=new ht(at),$.name=it,$.isPostFX?this.postPipelineClasses.set(it,ht):this.has(it)||(this.classes.set(it,ht),this.add(it,$))}this.default=this.get(F),N&&!h.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(Y){var F=this.get(Y);return F&&(this.default=F),F},add:function(Y,F){if(F.isPostFX){console.warn(Y+" is a Post Pipeline. Use `addPostPipeline` instead");return}var N=this.pipelines,z=this.renderer;return N.has(Y)?console.warn("Pipeline exists: "+Y):(F.name=Y,F.manager=this,N.set(Y,F)),F.hasBooted||F.boot(),z.width!==0&&z.height!==0&&!F.isPreFX&&F.resize(z.width,z.height),F},addPostPipeline:function(Y,F){this.postPipelineClasses.has(Y)||this.postPipelineClasses.set(Y,F)},flush:function(){this.current&&this.current.flush()},has:function(Y){var F=this.pipelines;return typeof Y=="string"?F.has(Y):!!F.contains(Y)},get:function(Y){var F=this.pipelines;if(typeof Y=="string")return F.get(Y);if(F.contains(Y))return Y},getPostPipeline:function(Y,F,N){var z=this.postPipelineClasses,U,q="",Q=typeof Y;if(Q==="string"||Q==="number"?(U=z.get(Y),q=Y):Q==="function"?(z.contains(Y)&&(U=Y),q=Y.name):Q==="object"&&(U=z.get(Y.name),q=Y.name),U){var K=new U(this.game,N);return K.name=q,F&&(K.gameObject=F),this.postPipelineInstances.push(K),K}},removePostPipeline:function(Y){R(this.postPipelineInstances,Y)},remove:function(Y,F,N){F===void 0&&(F=!0),N===void 0&&(N=!0),this.pipelines.delete(Y),F&&this.classes.delete(Y),N&&this.postPipelineClasses.delete(Y)},set:function(Y,F,N){if(!Y.isPostFX)return this.isCurrent(Y,N)||(this.flush(),this.current&&this.current.unbind(),this.current=Y,Y.bind(N)),Y.updateProjectionMatrix(),Y.onBind(F),Y},preBatch:function(Y){if(Y.hasPostPipeline){this.flush();for(var F=Y.postPipelines,N=F.length-1;N>=0;N--){var z=F[N];z.active&&z.preBatch(Y)}}},postBatch:function(Y){if(Y.hasPostPipeline){this.flush();for(var F=Y.postPipelines,N=0;N<F.length;N++){var z=F[N];z.active&&z.postBatch(Y)}}},preBatchCamera:function(Y){if(Y.hasPostPipeline){this.flush();for(var F=Y.postPipelines,N=F.length-1;N>=0;N--){var z=F[N];z.active&&z.preBatch(Y)}}},postBatchCamera:function(Y){if(Y.hasPostPipeline){this.flush();for(var F=Y.postPipelines,N=0;N<F.length;N++){var z=F[N];z.active&&z.postBatch(Y)}}},isCurrent:function(Y,F){var N=this.renderer,z=this.current;return z&&!F&&(F=z.currentShader),!(z!==Y||F.program!==N.currentProgram)},copyFrame:function(Y,F,N,z,U){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(Y,F,N,z,U),this},copyToGame:function(Y){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(Y),this},drawFrame:function(Y,F,N,z){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(Y,F,N,z),this},blendFrames:function(Y,F,N,z,U){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(Y,F,N,z,U),this},blendFramesAdditive:function(Y,F,N,z,U){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(Y,F,N,z,U),this},clearFrame:function(Y,F){return this.UTILITY_PIPELINE.clearFrame(Y,F),this},blitFrame:function(Y,F,N,z,U,q){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(Y,F,N,z,U,q),this},copyFrameRect:function(Y,F,N,z,U,q,Q,K){return this.UTILITY_PIPELINE.copyFrameRect(Y,F,N,z,U,q,Q,K),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(Y){return this.UTILITY_PIPELINE.bind(Y)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(Y,F){F.restoreContext()}),A(this.postPipelineInstances,function(Y){Y.restoreContext()})},rebind:function(Y){Y===void 0&&this.previous&&(Y=this.previous);var F=this.renderer,N=F.gl;N.disable(N.DEPTH_TEST),N.disable(N.CULL_FACE),F.hasActiveStencilMask()?N.clear(N.DEPTH_BUFFER_BIT):(N.disable(N.STENCIL_TEST),N.clear(N.DEPTH_BUFFER_BIT|N.STENCIL_BUFFER_BIT)),N.viewport(0,0,F.width,F.height),F.currentProgram=null,F.setBlendMode(0,!0);var z=F.vaoExtension;z&&z.bindVertexArrayOES(null);var U=this.pipelines.entries;for(var q in U)U[q].glReset=!0;Y&&(this.current=Y,Y.rebind())},clear:function(){var Y=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,Y.currentProgram=null,Y.setBlendMode(0,!0);var F=Y.vaoExtension;F&&F.bindVertexArrayOES(null)},getRenderTarget:function(Y){var F=this.renderTargets,N=3;if(Y>this.maxDimension)return this.targetIndex=F.length-N,F[this.targetIndex];var z=(a(Y,this.frameInc,0,!0)-1)*N;return this.targetIndex=z,F[z]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});y.exports=L},32302:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(92503),c=new u({initialize:function(h,o,r,a,d,n,p,g,v){a===void 0&&(a=1),d===void 0&&(d=0),n===void 0&&(n=!0),p===void 0&&(p=!1),g===void 0&&(g=!0),v===void 0&&(v=!0),this.renderer=h,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=a,this.minFilter=d,this.autoClear=n,this.autoResize=!0,this.hasDepthBuffer=g,this.forceClamp=v,this.init(o,r),p?this.renderer.on(x.RESIZE,this.resize,this):this.autoResize=!1},init:function(h,o){var r=this.renderer;this.texture=r.createTextureFromSource(null,h,o,this.minFilter,this.forceClamp),this.framebuffer=r.createFramebuffer(h,o,this.texture,this.hasDepthBuffer),this.width=h,this.height=o},setAutoResize:function(h){return h&&!this.autoResize?(this.renderer.on(x.RESIZE,this.resize,this),this.autoResize=!0):!h&&this.autoResize&&(this.renderer.off(x.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(h,o){if(this.autoResize&&this.willResize(h,o)){var r=this.renderer;r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),this.texture=r.createTextureFromSource(null,h,o,this.minFilter,this.forceClamp),this.framebuffer=r.createFramebuffer(h,o,this.texture,this.hasDepthBuffer),this.width=h,this.height=o}return this},willResize:function(h,o){return typeof h!="number"||typeof o!="number"?!1:(h=Math.round(h*this.scale),o=Math.round(o*this.scale),h=Math.max(h,1),o=Math.max(o,1),h!==this.width||o!==this.height)},bind:function(h,o,r){h===void 0&&(h=!1);var a=this.renderer;if(h&&a.flush(),o&&r&&this.resize(o,r),a.pushFramebuffer(this.framebuffer,!1,!1),h&&this.adjustViewport(),this.autoClear){var d=this.renderer.gl;d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT)}a.clearStencilMask()},adjustViewport:function(){var h=this.renderer.gl;h.viewport(0,0,this.width,this.height),h.disable(h.SCISSOR_TEST)},clear:function(h,o,r,a){var d=this.renderer,n=d.gl;d.pushFramebuffer(this.framebuffer),h!==void 0&&o!==void 0&&r!==void 0&&a!==void 0?(n.enable(n.SCISSOR_TEST),n.scissor(h,o,r,a)):n.disable(n.SCISSOR_TEST),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),d.popFramebuffer(),d.resetScissor()},unbind:function(h){h===void 0&&(h=!1);var o=this.renderer;return h&&o.flush(),o.popFramebuffer()},destroy:function(){var h=this.renderer;h.off(x.RESIZE,this.resize,this),h.deleteFramebuffer(this.framebuffer),h.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});y.exports=c},70554:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Felipe Alfonso <@bitnenfer>
* @author       Matthew Groves <@doormat>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={getTintFromFloats:function(P,i,u,x){var c=(P*255|0)&255,h=(i*255|0)&255,o=(u*255|0)&255,r=(x*255|0)&255;return(r<<24|c<<16|h<<8|o)>>>0},getTintAppendFloatAlpha:function(P,i){var u=(i*255|0)&255;return(u<<24|P)>>>0},getTintAppendFloatAlphaAndSwap:function(P,i){var u=(P>>16|0)&255,x=(P>>8|0)&255,c=(P|0)&255,h=(i*255|0)&255;return(h<<24|c<<16|x<<8|u)>>>0},getFloatsFromUintRGB:function(P){var i=(P>>16|0)&255,u=(P>>8|0)&255,x=(P|0)&255;return[i/255,u/255,x/255]},checkShaderMax:function(P,i){var u=Math.min(16,P.getParameter(P.MAX_TEXTURE_IMAGE_UNITS));return!i||i===-1?u:Math.min(u,i)},parseFragmentShaderMaxTextures:function(P,i){if(!P)return"";for(var u="",x=0;x<i;x++)x>0&&(u+=`
	else `),x<i-1&&(u+="if (outTexId < "+x+".5)"),u+=`
	{`,u+=`
		texture = texture2D(uMainSampler[`+x+"], outTexCoord);",u+=`
	}`;return P=P.replace(/%count%/gi,i.toString()),P.replace(/%forloop%/gi,u)},setGlowQuality:function(P,i,u,x){return u===void 0&&(u=i.config.glowFXQuality),x===void 0&&(x=i.config.glowFXDistance),P=P.replace(/__SIZE__/gi,(1/u/x).toFixed(7)),P=P.replace(/__DIST__/gi,x.toFixed(0)+".0"),P}}},29100:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(62644),c=i(50792),h=i(77085),o=i(95540),r=i(37867),a=i(92503),d=i(32302),n=i(70554),p=i(38683),g=new u({Extends:c,initialize:function(v){c.call(this);var f=v.game,b=f.renderer,C=b.gl;this.name=o(v,"name","WebGLPipeline"),this.game=f,this.renderer=b,this.manager,this.gl=C,this.view=f.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=o(v,"topology",C.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=o(v,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=v,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=o(v,"resizeUniform","")},boot:function(){var v,f=this.gl,b=this.config,C=this.renderer;this.isPostFX||(this.projectionMatrix=new r().identity());var _=this.renderTargets,M=o(b,"renderTarget",!1);typeof M=="boolean"&&M&&(M=1);var E=C.width,A=C.height;if(typeof M=="number")for(v=0;v<M;v++)_.push(new d(C,E,A,1,0,!0));else if(Array.isArray(M))for(v=0;v<M.length;v++){var R=o(M[v],"scale",1),L=o(M[v],"minFilter",0),Y=o(M[v],"autoClear",1),F=o(M[v],"autoResize",!1),N=o(M[v],"width",null),z=o(M[v],"height",N);N?_.push(new d(C,N,z,1,L,Y,F)):_.push(new d(C,E,A,R,L,Y,F))}_.length&&(this.currentRenderTarget=_[0]),this.setShadersFromConfig(b);var U=this.shaders,q=0;for(v=0;v<U.length;v++)U[v].vertexSize>q&&(q=U[v].vertexSize);var Q=o(b,"batchSize",C.config.batchSize);this.vertexCapacity=Q*6;var K=new ArrayBuffer(this.vertexCapacity*q);this.vertexData=K,this.bytes=new Uint8Array(K),this.vertexViewF32=new Float32Array(K),this.vertexViewU32=new Uint32Array(K);var et=o(b,"vertices",null);for(et?(this.vertexViewF32.set(et),this.vertexBuffer=C.createVertexBuffer(K,f.STATIC_DRAW)):this.vertexBuffer=C.createVertexBuffer(K.byteLength,f.DYNAMIC_DRAW),this.setVertexBuffer(),v=U.length-1;v>=0;v--)U[v].rebind();this.hasBooted=!0,C.on(a.RESIZE,this.resize,this),C.on(a.PRE_RENDER,this.onPreRender,this),C.on(a.RENDER,this.onRender,this),C.on(a.POST_RENDER,this.onPostRender,this),this.emit(h.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(v,f,b){var C=this.renderer;if(v!==this.currentShader||C.currentProgram!==this.currentShader.program){this.flush();var _=this.setVertexBuffer(b);_&&!f&&(f=!0),v.bind(f,!1),this.currentShader=v}return this},getShaderByName:function(v){for(var f=this.shaders,b=0;b<f.length;b++)if(f[b].name===v)return f[b]},setShadersFromConfig:function(v){var f,b=this.shaders,C=this.renderer;for(f=0;f<b.length;f++)b[f].destroy();var _="vertShader",M="fragShader",E="attributes",A=o(v,_,null),R=n.parseFragmentShaderMaxTextures(o(v,M,null),C.maxTextures),L=o(v,E,null),Y=o(v,"shaders",[]),F=Y.length;if(F===0)A&&R&&(this.shaders=[new p(this,"default",A,R,x(L))]);else{var N=[];for(f=0;f<F;f++){var z=Y[f],U,q,Q,K;if(typeof z=="string"?(U="default",q=A,Q=n.parseFragmentShaderMaxTextures(z,C.maxTextures),K=L):(U=o(z,"name","default"),q=o(z,_,A),Q=n.parseFragmentShaderMaxTextures(o(z,M,R),C.maxTextures),K=o(z,E,L)),U==="default"){var et=Q.split(`
`),H=et[0].trim();H.indexOf("#define SHADER_NAME")>-1&&(U=H.substring(20))}q&&Q&&N.push(new p(this,U,q,Q,x(K)))}this.shaders=N}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(v){return this.currentBatch={start:this.vertexCount,count:0,texture:[v],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=v,this.batch.push(this.currentBatch),0},addTextureToBatch:function(v){var f=this.currentBatch;f&&(f.texture.push(v),f.unit++,f.maxUnit++)},pushBatch:function(v){if(!this.currentBatch||this.forceZero&&v!==this.currentTexture)return this.createBatch(v);if(v===this.currentTexture)return this.currentUnit;var f=this.currentBatch,b=f.texture.indexOf(v);return b===-1?f.texture.length===this.renderer.maxTextures?this.createBatch(v):(f.unit++,f.maxUnit++,f.texture.push(v),this.currentUnit=f.unit,this.currentTexture=v,f.unit):(this.currentUnit=b,this.currentTexture=v,b)},setGameObject:function(v,f){return f===void 0&&(f=v.frame),this.pushBatch(f.source.glTexture)},shouldFlush:function(v){return v===void 0&&(v=0),this.vertexCount+v>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(v,f){(v!==this.width||f!==this.height)&&this.flush(),this.width=v,this.height=f;for(var b=this.renderTargets,C=0;C<b.length;C++)b[C].resize(v,f);return this.setProjectionMatrix(v,f),this.resizeUniform&&this.set2f(this.resizeUniform,v,f),this.emit(h.RESIZE,v,f,this),this.onResize(v,f),this},setProjectionMatrix:function(v,f){var b=this.projectionMatrix;if(!b)return this;this.projectionWidth=v,this.projectionHeight=f,b.ortho(0,v,f,0,-1e3,1e3);for(var C=this.shaders,_="uProjectionMatrix",M=0;M<C.length;M++){var E=C[M];E.hasUniform(_)&&(E.resetUniform(_),E.setMatrix4fv(_,!1,b.val,E))}return this},flipProjectionMatrix:function(v){v===void 0&&(v=!0);var f=this.projectionMatrix;if(!f)return this;var b=this.projectionWidth,C=this.projectionHeight;v?f.ortho(0,b,0,C,-1e3,1e3):f.ortho(0,b,C,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,f.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var v=this.renderer.projectionWidth,f=this.renderer.projectionHeight;(this.projectionWidth!==v||this.projectionHeight!==f)&&this.setProjectionMatrix(v,f)}},bind:function(v){if(v===void 0&&(v=this.currentShader),this.glReset)return this.rebind(v);var f=!1,b=this.gl;return b.getParameter(b.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,f=!0),v.bind(f),this.currentShader=v,this.activeTextures.length=0,this.emit(h.BIND,this,v),this.onActive(v),this},rebind:function(v){this.activeBuffer=null,this.setVertexBuffer();for(var f=this.shaders,b=f.length-1;b>=0;b--){var C=f[b].rebind();(!v||C===v)&&(this.currentShader=C)}return this.activeTextures.length=0,this.emit(h.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var v=this.shaders,f=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,f&&this.setVertexBuffer();for(var b=0;b<v.length;b++){var C=v[b];C.syncUniforms(),f&&C.rebind()}},setVertexBuffer:function(v){if(v===void 0&&(v=this.vertexBuffer),v!==this.activeBuffer){var f=this.gl;return this.gl.bindBuffer(f.ARRAY_BUFFER,v.webGLBuffer),this.activeBuffer=v,!0}return!1},preBatch:function(v){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(v),this},postBatch:function(v){return this.onDraw(this.currentRenderTarget),this.onPostBatch(v),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(v){if(v===void 0&&(v=!1),this.vertexCount>0){this.emit(h.BEFORE_FLUSH,this,v),this.onBeforeFlush(v);var f=this.gl,b=this.vertexCount,C=this.currentShader.vertexSize,_=this.topology;if(this.active){this.setVertexBuffer(),b===this.vertexCapacity?f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.DYNAMIC_DRAW):f.bufferSubData(f.ARRAY_BUFFER,0,this.bytes.subarray(0,b*C));var M,E,A,R=this.batch,L=this.activeTextures;if(this.forceZero)for(L[0]||f.activeTexture(f.TEXTURE0),M=0;M<R.length;M++)E=R[M],A=E.texture[0],L[0]!==A&&(f.bindTexture(f.TEXTURE_2D,A.webGLTexture),L[0]=A),f.drawArrays(_,E.start,E.count);else for(M=0;M<R.length;M++){E=R[M];for(var Y=0;Y<=E.maxUnit;Y++)A=E.texture[Y],L[Y]!==A&&(f.activeTexture(f.TEXTURE0+Y),f.bindTexture(f.TEXTURE_2D,A.webGLTexture),L[Y]=A);f.drawArrays(_,E.start,E.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(h.AFTER_FLUSH,this,v),this.onAfterFlush(v)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(v,f,b,C,_,M,E){var A=this.vertexViewF32,R=this.vertexViewU32,L=this.vertexCount*this.currentShader.vertexComponentCount-1;A[++L]=v,A[++L]=f,A[++L]=b,A[++L]=C,A[++L]=_,A[++L]=M,R[++L]=E,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(v,f,b,C,_,M,E,A,R,L,Y,F,N,z,U,q,Q,K,et,H){H===void 0&&(H=this.currentUnit);var J=!1;this.shouldFlush(6)&&(this.flush(),J=!0),this.currentBatch||(H=this.setTexture2D(et));var X=this.vertexViewF32,Z=this.vertexViewU32,$=this.vertexCount*this.currentShader.vertexComponentCount-1;return X[++$]=f,X[++$]=b,X[++$]=L,X[++$]=Y,X[++$]=H,X[++$]=K,Z[++$]=z,X[++$]=C,X[++$]=_,X[++$]=L,X[++$]=N,X[++$]=H,X[++$]=K,Z[++$]=q,X[++$]=M,X[++$]=E,X[++$]=F,X[++$]=N,X[++$]=H,X[++$]=K,Z[++$]=Q,X[++$]=f,X[++$]=b,X[++$]=L,X[++$]=Y,X[++$]=H,X[++$]=K,Z[++$]=z,X[++$]=M,X[++$]=E,X[++$]=F,X[++$]=N,X[++$]=H,X[++$]=K,Z[++$]=Q,X[++$]=A,X[++$]=R,X[++$]=F,X[++$]=Y,X[++$]=H,X[++$]=K,Z[++$]=U,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(v),J},batchTri:function(v,f,b,C,_,M,E,A,R,L,Y,F,N,z,U,q,Q){Q===void 0&&(Q=this.currentUnit);var K=!1;this.shouldFlush(3)&&(this.flush(),K=!0),this.currentBatch||(Q=this.setTexture2D(q));var et=this.vertexViewF32,H=this.vertexViewU32,J=this.vertexCount*this.currentShader.vertexComponentCount-1;return et[++J]=f,et[++J]=b,et[++J]=A,et[++J]=R,et[++J]=Q,et[++J]=U,H[++J]=F,et[++J]=C,et[++J]=_,et[++J]=A,et[++J]=Y,et[++J]=Q,et[++J]=U,H[++J]=N,et[++J]=M,et[++J]=E,et[++J]=L,et[++J]=Y,et[++J]=Q,et[++J]=U,H[++J]=z,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(v),K},drawFillRect:function(v,f,b,C,_,M,E,A){E===void 0&&(E=this.renderer.whiteTexture),A===void 0&&(A=!0),v=Math.floor(v),f=Math.floor(f);var R=Math.floor(v+b),L=Math.floor(f+C),Y=this.setTexture2D(E),F=n.getTintAppendFloatAlphaAndSwap(_,M),N=0,z=0,U=1,q=1;A&&(z=1,q=0),this.batchQuad(null,v,f,v,L,R,L,R,f,N,z,U,q,F,F,F,F,0,E,Y)},setTexture2D:function(v){return v===void 0&&(v=this.renderer.whiteTexture),this.pushBatch(v)},bindTexture:function(v,f){f===void 0&&(f=0);var b=this.gl;return b.activeTexture(b.TEXTURE0+f),b.bindTexture(b.TEXTURE_2D,v.webGLTexture),this},bindRenderTarget:function(v,f){return this.bindTexture(v.texture,f)},setTime:function(v,f){return this.set1f(v,this.game.loop.getDuration(),f),this},setBoolean:function(v,f,b){return b===void 0&&(b=this.currentShader),b.setBoolean(v,f),this},set1f:function(v,f,b){return b===void 0&&(b=this.currentShader),b.set1f(v,f),this},set2f:function(v,f,b,C){return C===void 0&&(C=this.currentShader),C.set2f(v,f,b),this},set3f:function(v,f,b,C,_){return _===void 0&&(_=this.currentShader),_.set3f(v,f,b,C),this},set4f:function(v,f,b,C,_,M){return M===void 0&&(M=this.currentShader),M.set4f(v,f,b,C,_),this},set1fv:function(v,f,b){return b===void 0&&(b=this.currentShader),b.set1fv(v,f),this},set2fv:function(v,f,b){return b===void 0&&(b=this.currentShader),b.set2fv(v,f),this},set3fv:function(v,f,b){return b===void 0&&(b=this.currentShader),b.set3fv(v,f),this},set4fv:function(v,f,b){return b===void 0&&(b=this.currentShader),b.set4fv(v,f),this},set1iv:function(v,f,b){return b===void 0&&(b=this.currentShader),b.set1iv(v,f),this},set2iv:function(v,f,b){return b===void 0&&(b=this.currentShader),b.set2iv(v,f),this},set3iv:function(v,f,b){return b===void 0&&(b=this.currentShader),b.set3iv(v,f),this},set4iv:function(v,f,b){return b===void 0&&(b=this.currentShader),b.set4iv(v,f),this},set1i:function(v,f,b){return b===void 0&&(b=this.currentShader),b.set1i(v,f),this},set2i:function(v,f,b,C){return C===void 0&&(C=this.currentShader),C.set2i(v,f,b),this},set3i:function(v,f,b,C,_){return _===void 0&&(_=this.currentShader),_.set3i(v,f,b,C),this},set4i:function(v,f,b,C,_,M){return M===void 0&&(M=this.currentShader),M.set4i(v,f,b,C,_),this},setMatrix2fv:function(v,f,b,C){return C===void 0&&(C=this.currentShader),C.setMatrix2fv(v,f,b),this},setMatrix3fv:function(v,f,b,C){return C===void 0&&(C=this.currentShader),C.setMatrix3fv(v,f,b),this},setMatrix4fv:function(v,f,b,C){return C===void 0&&(C=this.currentShader),C.setMatrix4fv(v,f,b),this},destroy:function(){this.emit(h.DESTROY,this);var v,f=this.shaders;for(v=0;v<f.length;v++)f[v].destroy();var b=this.renderTargets;for(v=0;v<b.length;v++)b[v].destroy();var C=this.renderer;return C.deleteBuffer(this.vertexBuffer),C.off(a.RESIZE,this.resize,this),C.off(a.PRE_RENDER,this.onPreRender,this),C.off(a.RENDER,this.onRender,this),C.off(a.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});y.exports=g},74797:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Felipe Alfonso <@bitnenfer>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(95428),x=i(72905),c=i(19715),h=i(83419),o=i(8054),r=i(50792),a=i(92503),d=i(50030),n=i(37867),p=i(29747),g=i(7530),v=i(32302),f=i(97480),b=i(69442),C=i(70554),_=i(88815),M=i(26128),E=i(1482),A=i(82751),R=i(84387),L=i(93567),Y=i(57183),F=new h({Extends:r,initialize:function(N){r.call(this);var z=N.config,U={alpha:z.transparent,desynchronized:z.desynchronized,depth:!0,antialias:z.antialiasGL,premultipliedAlpha:z.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:z.failIfMajorPerformanceCaveat,powerPreference:z.powerPreference,preserveDrawingBuffer:z.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:z.clearBeforeRender,antialias:z.antialias,backgroundColor:z.backgroundColor,contextCreation:U,roundPixels:z.roundPixels,maxTextures:z.maxTextures,maxTextureSize:z.maxTextureSize,batchSize:z.batchSize,maxLights:z.maxLights,mipmapFilter:z.mipmapFilter},this.game=N,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=N.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=p,this.contextRestoredHandler=p,this.previousContextLostHandler=p,this.previousContextRestoredHandler=p,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(N){var z,U=this.game,q=this.canvas,Q=N.backgroundColor;if(U.config.context?z=U.config.context:z=q.getContext("webgl",N.contextCreation)||q.getContext("experimental-webgl",N.contextCreation),!z||z.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=z,this.setExtensions(),this.setContextHandlers(),U.context=z;for(var K=0;K<=27;K++)this.blendModes.push({func:[z.ONE,z.ONE_MINUS_SRC_ALPHA],equation:z.FUNC_ADD});this.blendModes[1].func=[z.ONE,z.DST_ALPHA],this.blendModes[2].func=[z.DST_COLOR,z.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[z.ONE,z.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[z.ZERO,z.ONE_MINUS_SRC_ALPHA],equation:z.FUNC_REVERSE_SUBTRACT},this.glFormats=[z.BYTE,z.SHORT,z.UNSIGNED_BYTE,z.UNSIGNED_SHORT,z.FLOAT],this.glFuncMap={mat2:{func:z.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:z.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:z.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:z.uniform1f,length:1},"1fv":{func:z.uniform1fv,length:1},"1i":{func:z.uniform1i,length:1},"1iv":{func:z.uniform1iv,length:1},"2f":{func:z.uniform2f,length:2},"2fv":{func:z.uniform2fv,length:1},"2i":{func:z.uniform2i,length:2},"2iv":{func:z.uniform2iv,length:1},"3f":{func:z.uniform3f,length:3},"3fv":{func:z.uniform3fv,length:1},"3i":{func:z.uniform3i,length:3},"3iv":{func:z.uniform3iv,length:1},"4f":{func:z.uniform4f,length:4},"4fv":{func:z.uniform4fv,length:1},"4i":{func:z.uniform4i,length:4},"4iv":{func:z.uniform4iv,length:1}},(!N.maxTextures||N.maxTextures===-1)&&(N.maxTextures=z.getParameter(z.MAX_TEXTURE_IMAGE_UNITS)),N.maxTextureSize||(N.maxTextureSize=z.getParameter(z.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),z.disable(z.DEPTH_TEST),z.disable(z.CULL_FACE),z.enable(z.BLEND),z.clearColor(Q.redGL,Q.greenGL,Q.blueGL,Q.alphaGL),z.clear(z.COLOR_BUFFER_BIT);var et=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return et.indexOf(N.mipmapFilter)!==-1&&(this.mipmapFilter=z[N.mipmapFilter]),this.maxTextures=C.checkShaderMax(z,N.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new g(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=new n().identity(),U.textures.once(b.READY,this.boot,this),this},boot:function(){var N=this.game,z=this.pipelines,U=N.scale.baseSize,q=U.width,Q=U.height;this.width=q,this.height=Q,this.isBooted=!0,this.renderTarget=new v(this,q,Q,1,0,!0,!0),this.maskTarget=new v(this,q,Q,1,0,!0,!0),this.maskSource=new v(this,q,Q,1,0,!0,!0);var K=N.config;z.boot(K.pipeline,K.defaultPipeline,K.autoMobilePipeline),this.blankTexture=N.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=N.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=N.textures.getFrame("__WHITE").glTexture;var et=this.gl;et.bindFramebuffer(et.FRAMEBUFFER,null),et.enable(et.SCISSOR_TEST),N.scale.on(f.RESIZE,this.onResize,this),this.resize(q,Q)},setExtensions:function(){var N=this.gl,z=N.getSupportedExtensions();this.supportedExtensions=z;var U="ANGLE_instanced_arrays";this.instancedArraysExtension=z.indexOf(U)>-1?N.getExtension(U):null;var q="OES_vertex_array_object";this.vaoExtension=z.indexOf(q)>-1?N.getExtension(q):null},setContextHandlers:function(N,z){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof N=="function"?this.contextLostHandler=N.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof z=="function"?this.contextRestoredHandler=z.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(N){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(a.LOSE_WEBGL,this),N.preventDefault()},dispatchContextRestored:function(N){var z=this.gl;if(z.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(o.BlendModes.NORMAL),z.disable(z.BLEND),z.disable(z.DEPTH_TEST),z.enable(z.CULL_FACE),this.compression=this.getCompressedTextures();var U=function(q){q.createResource()};u(this.glTextureWrappers,U),u(this.glBufferWrappers,U),u(this.glFramebufferWrappers,U),u(this.glProgramWrappers,U),u(this.glAttribLocationWrappers,U),u(this.glUniformLocationWrappers,U),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(a.RESTORE_WEBGL,this),N.preventDefault()},createTemporaryTextures:function(){for(var N=this.gl,z=0;z<this.maxTextures;z++){var U=N.createTexture();N.activeTexture(N.TEXTURE0+z),N.bindTexture(N.TEXTURE_2D,U),N.texImage2D(N.TEXTURE_2D,0,N.RGBA,1,1,0,N.RGBA,N.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(z)}},captureFrame:function(N,z){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(N,z,U){},stopCapture:function(){},onCapture:function(N){},onResize:function(N,z){(z.width!==this.width||z.height!==this.height)&&this.resize(z.width,z.height)},beginCapture:function(N,z){N===void 0&&(N=this.width),z===void 0&&(z=this.height),this.renderTarget.bind(!0,N,z),this.setProjectionMatrix(N,z)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(N,z){var U=this.gl;return this.width=N,this.height=z,this.setProjectionMatrix(N,z),U.viewport(0,0,N,z),this.drawingBufferHeight=U.drawingBufferHeight,U.scissor(0,U.drawingBufferHeight-z,N,z),this.defaultScissor[2]=N,this.defaultScissor[3]=z,this.emit(a.RESIZE,N,z),this},getCompressedTextures:function(){var N="WEBGL_compressed_texture_",z="WEBKIT_"+N,U="EXT_texture_compression_",q=function(K,et){var H=K.getExtension(N+et)||K.getExtension(z+et)||K.getExtension(U+et);if(H){var J={};for(var X in H)J[H[X]]=X;return J}},Q=this.gl;return{ETC:q(Q,"etc"),ETC1:q(Q,"etc1"),ATC:q(Q,"atc"),ASTC:q(Q,"astc"),BPTC:q(Q,"bptc"),RGTC:q(Q,"rgtc"),PVRTC:q(Q,"pvrtc"),S3TC:q(Q,"s3tc"),S3TCSRGB:q(Q,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(N,z){var U=this.compression[N.toUpperCase()];if(z in U)return U[z]},supportsCompressedTexture:function(N,z){var U=this.compression[N.toUpperCase()];return U?z?z in U:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(N,z){return(N!==this.projectionWidth||z!==this.projectionHeight)&&(this.projectionWidth=N,this.projectionHeight=z,this.projectionMatrix.ortho(0,N,z,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(N){return this.supportedExtensions?this.supportedExtensions.indexOf(N):!1},getExtension:function(N){return this.hasExtension(N)?(N in this.extensions||(this.extensions[N]=this.gl.getExtension(N)),this.extensions[N]):null},flush:function(){this.pipelines.flush()},pushScissor:function(N,z,U,q,Q){Q===void 0&&(Q=this.drawingBufferHeight);var K=this.scissorStack,et=[N,z,U,q];return K.push(et),this.setScissor(N,z,U,q,Q),this.currentScissor=et,et},setScissor:function(N,z,U,q,Q){Q===void 0&&(Q=this.drawingBufferHeight);var K=this.gl,et=this.currentScissor,H=U>0&&q>0;if(et&&H){var J=et[0],X=et[1],Z=et[2],$=et[3];H=J!==N||X!==z||Z!==U||$!==q}H&&(this.flush(),K.scissor(N,Q-z-q,U,q))},resetScissor:function(){var N=this.gl;N.enable(N.SCISSOR_TEST);var z=this.currentScissor;if(z){var U=z[0],q=z[1],Q=z[2],K=z[3];Q>0&&K>0&&N.scissor(U,this.drawingBufferHeight-q-K,Q,K)}},popScissor:function(){var N=this.scissorStack;N.pop();var z=N[N.length-1];z&&this.setScissor(z[0],z[1],z[2],z[3]),this.currentScissor=z},hasActiveStencilMask:function(){var N=this.currentMask.mask,z=this.currentCameraMask.mask;return N&&N.isStencil||z&&z.isStencil},resetViewport:function(){var N=this.gl;N.viewport(0,0,this.width,this.height),this.drawingBufferHeight=N.drawingBufferHeight},setBlendMode:function(N,z){z===void 0&&(z=!1);var U=this.gl,q=this.blendModes[N];return z||N!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==N?(this.flush(),U.enable(U.BLEND),U.blendEquation(q.equation),q.func.length>2?U.blendFuncSeparate(q.func[0],q.func[1],q.func[2],q.func[3]):U.blendFunc(q.func[0],q.func[1]),this.currentBlendMode=N,!0):!1},addBlendMode:function(N,z){var U=this.blendModes.push({func:N,equation:z});return U-1},updateBlendMode:function(N,z,U){return this.blendModes[N]&&(this.blendModes[N].func=z,U&&(this.blendModes[N].equation=U)),this},removeBlendMode:function(N){return N>17&&this.blendModes[N]&&this.blendModes.splice(N,1),this},pushFramebuffer:function(N,z,U,q,Q){return N===this.currentFramebuffer?this:(this.fboStack.push(N),this.setFramebuffer(N,z,U,q,Q))},setFramebuffer:function(N,z,U,q,Q){if(z===void 0&&(z=!1),U===void 0&&(U=!0),q===void 0&&(q=null),Q===void 0&&(Q=!1),N===this.currentFramebuffer)return this;var K=this.gl,et=this.width,H=this.height;return N&&N.renderTexture&&U?(et=N.renderTexture.width,H=N.renderTexture.height):this.flush(),N?K.bindFramebuffer(K.FRAMEBUFFER,N.webGLFramebuffer):K.bindFramebuffer(K.FRAMEBUFFER,null),U&&K.viewport(0,0,et,H),q&&K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,q.webGLTexture,0),Q&&(K.clearColor(0,0,0,0),K.clear(K.COLOR_BUFFER_BIT)),z&&(N?(this.drawingBufferHeight=H,this.pushScissor(0,0,et,H)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=N,this},popFramebuffer:function(N,z){N===void 0&&(N=!1),z===void 0&&(z=!0);var U=this.fboStack;U.pop();var q=U[U.length-1];return q||(q=null),this.setFramebuffer(q,N,z),q},restoreFramebuffer:function(N,z){N===void 0&&(N=!1),z===void 0&&(z=!0);var U=this.fboStack,q=U[U.length-1];q||(q=null),this.currentFramebuffer=null,this.setFramebuffer(q,N,z)},setProgram:function(N){return N!==this.currentProgram?(this.flush(),this.gl.useProgram(N.webGLProgram),this.currentProgram=N,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(N,z,U,q,Q){Q===void 0&&(Q=!1);var K=this.gl,et=K.NEAREST,H=K.NEAREST,J=K.CLAMP_TO_EDGE,X=null;z=N?N.width:z,U=N?N.height:U;var Z=d(z,U);if(Z&&!Q&&(J=K.REPEAT),q===o.ScaleModes.LINEAR&&this.config.antialias){var $=N&&N.compressed,it=!$&&Z||$&&N.mipmaps.length>1;et=this.mipmapFilter&&it?this.mipmapFilter:K.LINEAR,H=K.LINEAR}return!N&&typeof z=="number"&&typeof U=="number"?X=this.createTexture2D(0,et,H,J,J,K.RGBA,null,z,U):X=this.createTexture2D(0,et,H,J,J,K.RGBA,N),X},createTexture2D:function(N,z,U,q,Q,K,et,H,J,X,Z,$){typeof H!="number"&&(H=et?et.width:1),typeof J!="number"&&(J=et?et.height:1);var it=new A(this.gl,N,z,U,q,Q,K,et,H,J,X,Z,$);return this.glTextureWrappers.push(it),it},createFramebuffer:function(N,z,U,q){this.currentFramebuffer=null;var Q=new R(this.gl,N,z,U,q);return this.glFramebufferWrappers.push(Q),Q},beginBitmapMask:function(N,z){var U=this.gl;U&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==N&&(this.currentMask.mask=N,this.currentMask.camera=z))},drawBitmapMask:function(N,z,U){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),N.renderWebGL(this,N,z),this.maskSource.unbind(!0),this.maskTarget.unbind();var q=this.gl,Q=this.getCurrentStencilMask();Q?(q.enable(q.STENCIL_TEST),Q.mask.applyStencil(this,Q.camera,!0)):this.currentMask.mask=null,this.pipelines.set(U),q.activeTexture(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,this.maskTarget.texture.webGLTexture),q.activeTexture(q.TEXTURE1),q.bindTexture(q.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(N,z){var U=new E(this.gl,N,z);return this.glProgramWrappers.push(U),U},createVertexBuffer:function(N,z){var U=this.gl,q=new M(U,N,U.ARRAY_BUFFER,z);return this.glBufferWrappers.push(q),q},createAttribLocation:function(N,z){var U=new L(this.gl,N,z);return this.glAttribLocationWrappers.push(U),U},createUniformLocation:function(N,z){var U=new Y(this.gl,N,z);return this.glUniformLocationWrappers.push(U),U},createIndexBuffer:function(N,z){var U=this.gl,q=new M(U,N,U.ELEMENT_ARRAY_BUFFER,z);return this.glBufferWrappers.push(q),q},deleteTexture:function(N){if(N)return x(this.glTextureWrappers,N),N.destroy(),this},deleteFramebuffer:function(N){return N?(x(this.fboStack,N),x(this.glFramebufferWrappers,N),N.destroy(),this):this},deleteProgram:function(N){return N&&(x(this.glProgramWrappers,N),N.destroy()),this},deleteAttribLocation:function(N){return N&&(x(this.glAttribLocationWrappers,N),N.destroy()),this},deleteUniformLocation:function(N){return N&&(x(this.glUniformLocationWrappers,N),N.destroy()),this},deleteBuffer:function(N){return N?(x(this.glBufferWrappers,N),N.destroy(),this):this},preRenderCamera:function(N){var z=N.x,U=N.y,q=N.width,Q=N.height,K=N.backgroundColor;if(N.emit(c.PRE_RENDER,N),this.pipelines.preBatchCamera(N),this.pushScissor(z,U,q,Q),N.mask&&(this.currentCameraMask.mask=N.mask,this.currentCameraMask.camera=N._maskCamera,N.mask.preRenderWebGL(this,N,N._maskCamera)),K.alphaGL>0){var et=this.pipelines.setMulti();et.drawFillRect(z,U,q,Q,C.getTintFromFloats(K.blueGL,K.greenGL,K.redGL,1),K.alphaGL)}},getCurrentStencilMask:function(){var N=null,z=this.maskStack,U=this.currentCameraMask;return z.length>0?N=z[z.length-1]:U.mask&&U.mask.isStencil&&(N=U),N},postRenderCamera:function(N){var z=N.flashEffect,U=N.fadeEffect;if(z.isRunning||U.isRunning||U.isComplete){var q=this.pipelines.setMulti();z.postRenderWebGL(q,C.getTintFromFloats),U.postRenderWebGL(q,C.getTintFromFloats)}N.dirty=!1,this.popScissor(),N.mask&&(this.currentCameraMask.mask=null,N.mask.postRenderWebGL(this,N._maskCamera)),this.pipelines.postBatchCamera(N),N.emit(c.POST_RENDER,N)},preRender:function(){if(!this.contextLost){var N=this.gl;if(N.bindFramebuffer(N.FRAMEBUFFER,null),this.emit(a.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var z=this.config.backgroundColor;N.clearColor(z.redGL,z.greenGL,z.blueGL,z.alphaGL),N.clear(N.COLOR_BUFFER_BIT|N.DEPTH_BUFFER_BIT|N.STENCIL_BUFFER_BIT)}N.enable(N.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&N.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(a.PRE_RENDER)}},render:function(N,z,U){if(!this.contextLost){var q=z.length;if(this.emit(a.RENDER,N,U),this.preRenderCamera(U),q===0){this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(U);return}this.currentType="";for(var Q=this.currentMask,K=0;K<q;K++){this.finalType=K===q-1;var et=z[K],H=et.mask;Q=this.currentMask,Q.mask&&Q.mask!==H&&Q.mask.postRenderWebGL(this,Q.camera),H&&Q.mask!==H&&H.preRenderWebGL(this,et,U),et.blendMode!==this.currentBlendMode&&this.setBlendMode(et.blendMode);var J=et.type;J!==this.currentType&&(this.newType=!0,this.currentType=J),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=z[K+1].type===this.currentType,et.renderWebGL(this,et,U),this.newType=!1}Q=this.currentMask,Q.mask&&Q.mask.postRenderWebGL(this,Q.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(U)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(a.POST_RENDER);var N=this.snapshotState;N.callback&&(_(this.gl,N),N.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var N=this.gl,z=this.getCurrentStencilMask();if(z){var U=z.mask;N.enable(N.STENCIL_TEST),U.invertAlpha?N.stencilFunc(N.NOTEQUAL,U.level,255):N.stencilFunc(N.EQUAL,U.level,255)}},snapshot:function(N,z,U){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,N,z,U)},snapshotArea:function(N,z,U,q,Q,K,et){var H=this.snapshotState;return H.callback=Q,H.type=K,H.encoder=et,H.getPixel=!1,H.x=N,H.y=z,H.width=U,H.height=q,this},snapshotPixel:function(N,z,U){return this.snapshotArea(N,z,1,1,U),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(N,z,U,q,Q,K,et,H,J,X,Z){Q===void 0&&(Q=!1),K===void 0&&(K=0),et===void 0&&(et=0),H===void 0&&(H=z),J===void 0&&(J=U),X==="pixel"&&(Q=!0,X="image/png");var $=this.currentFramebuffer;this.snapshotArea(K,et,H,J,q,X,Z);var it=this.snapshotState;return it.getPixel=Q,it.isFramebuffer=!0,it.bufferWidth=z,it.bufferHeight=U,it.width=Math.min(it.width,z),it.height=Math.min(it.height,U),this.setFramebuffer(N),_(this.gl,it),this.setFramebuffer($),it.callback=null,it.isFramebuffer=!1,this},canvasToTexture:function(N,z,U,q){U===void 0&&(U=!1),q===void 0&&(q=!1);var Q=this.gl,K=Q.NEAREST,et=Q.NEAREST,H=N.width,J=N.height,X=Q.CLAMP_TO_EDGE,Z=d(H,J);return!U&&Z&&(X=Q.REPEAT),this.config.antialias&&(K=Z&&this.mipmapFilter?this.mipmapFilter:Q.LINEAR,et=Q.LINEAR),z?(z.update(N,H,J,q,X,X,K,et,z.format),z):this.createTexture2D(0,K,et,X,X,Q.RGBA,N,H,J,!0,!1,q)},createCanvasTexture:function(N,z,U){return z===void 0&&(z=!1),U===void 0&&(U=!1),this.canvasToTexture(N,null,z,U)},updateCanvasTexture:function(N,z,U,q){return U===void 0&&(U=!1),q===void 0&&(q=!1),this.canvasToTexture(N,z,q,U)},videoToTexture:function(N,z,U,q){U===void 0&&(U=!1),q===void 0&&(q=!1);var Q=this.gl,K=Q.NEAREST,et=Q.NEAREST,H=N.videoWidth,J=N.videoHeight,X=Q.CLAMP_TO_EDGE,Z=d(H,J);return!U&&Z&&(X=Q.REPEAT),this.config.antialias&&(K=Z&&this.mipmapFilter?this.mipmapFilter:Q.LINEAR,et=Q.LINEAR),z?(z.update(N,H,J,q,X,X,K,et,z.format),z):this.createTexture2D(0,K,et,X,X,Q.RGBA,N,H,J,!0,!0,q)},createVideoTexture:function(N,z,U){return z===void 0&&(z=!1),U===void 0&&(U=!1),this.videoToTexture(N,null,z,U)},updateVideoTexture:function(N,z,U,q){return U===void 0&&(U=!1),q===void 0&&(q=!1),this.videoToTexture(N,z,q,U)},createUint8ArrayTexture:function(N,z,U){var q=this.gl,Q=q.NEAREST,K=q.NEAREST,et=q.CLAMP_TO_EDGE,H=d(z,U);return H&&(et=q.REPEAT),this.createTexture2D(0,Q,K,et,et,q.RGBA,N,z,U)},setTextureFilter:function(N,z){var U=this.gl,q=z===0?U.LINEAR:U.NEAREST;U.activeTexture(U.TEXTURE0);var Q=U.getParameter(U.TEXTURE_BINDING_2D);return U.bindTexture(U.TEXTURE_2D,N.webGLTexture),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,q),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,q),N.minFilter=q,N.magFilter=q,Q&&U.bindTexture(U.TEXTURE_2D,Q),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var N=function(z){z.destroy()};u(this.glAttribLocationWrappers,N),u(this.glBufferWrappers,N),u(this.glFramebufferWrappers,N),u(this.glProgramWrappers,N),u(this.glTextureWrappers,N),u(this.glUniformLocationWrappers,N),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});y.exports=F},38683:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(95428),c=i(95540),h=i(14500),o=new u({initialize:function(r,a,d,n,p){this.pipeline=r,this.name=a,this.renderer=r.renderer,this.gl=this.renderer.gl,this.fragSrc=n,this.vertSrc=d,this.program=this.renderer.createProgram(d,n),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(p),this.createUniforms()},createAttributes:function(r){var a=0,d=0,n=[];this.vertexComponentCount=0;for(var p=0;p<r.length;p++){var g=r[p],v=g.name,f=c(g,"size",1),b=c(g,"type",h.FLOAT),C=b.enum,_=b.size,M=!!g.normalized;n.push({name:v,size:f,type:C,normalized:M,offset:d,enabled:!1,location:-1}),_===4?a+=f:a++,d+=f*_}this.vertexSize=d,this.vertexComponentCount=a,this.attributes=n},bind:function(r,a){return r===void 0&&(r=!1),a===void 0&&(a=!1),a&&this.pipeline.flush(),this.renderer.setProgram(this.program),r&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(r){r===void 0&&(r=!1);for(var a=this.gl,d=this.renderer,n=this.vertexSize,p=this.attributes,g=this.program,v=0;v<p.length;v++){var f=p[v],b=f.size,C=f.type,_=f.offset,M=f.enabled,E=f.location,A=!!f.normalized;if(r){E!==-1&&d.deleteAttribLocation(E);var R=this.renderer.createAttribLocation(g,f.name);R.webGLAttribLocation>=0?(a.enableVertexAttribArray(R.webGLAttribLocation),a.vertexAttribPointer(R.webGLAttribLocation,b,C,A,n,_),f.enabled=!0,f.location=R):R.webGLAttribLocation!==-1&&a.disableVertexAttribArray(R.webGLAttribLocation)}else M?a.vertexAttribPointer(E.webGLAttribLocation,b,C,A,n,_):!M&&E!==-1&&E.webGLAttribLocation>-1&&(a.disableVertexAttribArray(E.webGLAttribLocation),f.location=-1)}return this},createUniforms:function(){var r=this.gl,a=this.program,d=this.uniforms,n,p,g,v=r.getProgramParameter(a.webGLProgram,r.ACTIVE_UNIFORMS);for(n=0;n<v;n++){var f=r.getActiveUniform(a.webGLProgram,n);if(f){p=f.name,g=this.renderer.createUniformLocation(a,p),g!==null&&(d[p]={name:p,location:g,setter:null,value1:null,value2:null,value3:null,value4:null});var b=p.indexOf("[");b>0&&(p=p.substr(0,b),d.hasOwnProperty(p)||(g=this.renderer.createUniformLocation(a,p),g!==null&&(d[p]={name:p,location:g,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var r=this.gl;this.renderer.setProgram(this.program);for(var a in this.uniforms){var d=this.uniforms[a];d.setter&&d.setter.call(r,d.location.webGLUniformLocation,d.value1,d.value2,d.value3,d.value4)}},hasUniform:function(r){return this.uniforms.hasOwnProperty(r)},resetUniform:function(r){var a=this.uniforms[r];return a&&(a.value1=null,a.value2=null,a.value3=null,a.value4=null),this},setUniform1:function(r,a,d,n){var p=this.uniforms[a];return p?((n||p.value1!==d)&&(p.setter||(p.setter=r),p.value1=d,this.renderer.setProgram(this.program),r.call(this.gl,p.location.webGLUniformLocation,d),this.pipeline.currentShader=this),this):this},setUniform2:function(r,a,d,n,p){var g=this.uniforms[a];return g?((p||g.value1!==d||g.value2!==n)&&(g.setter||(g.setter=r),g.value1=d,g.value2=n,this.renderer.setProgram(this.program),r.call(this.gl,g.location.webGLUniformLocation,d,n),this.pipeline.currentShader=this),this):this},setUniform3:function(r,a,d,n,p,g){var v=this.uniforms[a];return v?((g||v.value1!==d||v.value2!==n||v.value3!==p)&&(v.setter||(v.setter=r),v.value1=d,v.value2=n,v.value3=p,this.renderer.setProgram(this.program),r.call(this.gl,v.location.webGLUniformLocation,d,n,p),this.pipeline.currentShader=this),this):this},setUniform4:function(r,a,d,n,p,g,v){var f=this.uniforms[a];return f?((v||f.value1!==d||f.value2!==n||f.value3!==p||f.value4!==g)&&(f.setter||(f.setter=r),f.value1=d,f.value2=n,f.value3=p,f.value4=g,this.renderer.setProgram(this.program),r.call(this.gl,f.location.webGLUniformLocation,d,n,p,g),this.pipeline.currentShader=this),this):this},setBoolean:function(r,a){return this.setUniform1(this.gl.uniform1i,r,Number(a))},set1f:function(r,a){return this.setUniform1(this.gl.uniform1f,r,a)},set2f:function(r,a,d){return this.setUniform2(this.gl.uniform2f,r,a,d)},set3f:function(r,a,d,n){return this.setUniform3(this.gl.uniform3f,r,a,d,n)},set4f:function(r,a,d,n,p){return this.setUniform4(this.gl.uniform4f,r,a,d,n,p)},set1fv:function(r,a){return this.setUniform1(this.gl.uniform1fv,r,a,!0)},set2fv:function(r,a){return this.setUniform1(this.gl.uniform2fv,r,a,!0)},set3fv:function(r,a){return this.setUniform1(this.gl.uniform3fv,r,a,!0)},set4fv:function(r,a){return this.setUniform1(this.gl.uniform4fv,r,a,!0)},set1iv:function(r,a){return this.setUniform1(this.gl.uniform1iv,r,a,!0)},set2iv:function(r,a){return this.setUniform1(this.gl.uniform2iv,r,a,!0)},set3iv:function(r,a){return this.setUniform1(this.gl.uniform3iv,r,a,!0)},set4iv:function(r,a){return this.setUniform1(this.gl.uniform4iv,r,a,!0)},set1i:function(r,a){return this.setUniform1(this.gl.uniform1i,r,a)},set2i:function(r,a,d){return this.setUniform2(this.gl.uniform2i,r,a,d)},set3i:function(r,a,d,n){return this.setUniform3(this.gl.uniform3i,r,a,d,n)},set4i:function(r,a,d,n,p){return this.setUniform4(this.gl.uniform4i,r,a,d,n,p)},setMatrix2fv:function(r,a,d){return this.setUniform2(this.gl.uniformMatrix2fv,r,a,d,!0)},setMatrix3fv:function(r,a,d){return this.setUniform2(this.gl.uniformMatrix3fv,r,a,d,!0)},setMatrix4fv:function(r,a,d){return this.setUniform2(this.gl.uniformMatrix4fv,r,a,d,!0)},createProgram:function(r,a){return r===void 0&&(r=this.vertSrc),a===void 0&&(a=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=r,this.fragSrc=a,this.program=this.renderer.createProgram(r,a),this.createUniforms(),this.rebind()},destroy:function(){var r=this.renderer;x(this.uniforms,function(a){r.deleteUniformLocation(a.location)}),this.uniforms=null,x(this.attributes,function(a){r.deleteAttribLocation(a.location)}),this.attributes=null,r.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});y.exports=o},14500:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};y.exports=P},4159:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(14500),x=i(79291),c={PipelineManager:i(7530),Pipelines:i(96615),RenderTarget:i(32302),Utils:i(70554),WebGLPipeline:i(29100),WebGLRenderer:i(74797),WebGLShader:i(38683),Wrappers:i(9503)};c=x(!1,c,u),y.exports=c},31302:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Felipe Alfonso <@bitnenfer>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(95540),c=i(78908),h=i(85191),o=i(14500),r=i(29100),a=new u({Extends:r,initialize:function(d){d.fragShader=x(d,"fragShader",c),d.vertShader=x(d,"vertShader",h),d.batchSize=x(d,"batchSize",1),d.vertices=x(d,"vertices",[-1,1,-1,-7,7,1]),d.attributes=x(d,"attributes",[{name:"inPosition",size:2,type:o.FLOAT}]),r.call(this,d)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(d,n){r.prototype.resize.call(this,d,n),this.set2f("uResolution",d,n)},beginMask:function(d,n,p){this.renderer.beginBitmapMask(d,p)},endMask:function(d,n,p){var g=this.gl,v=this.renderer,f=d.bitmapMask;f&&g&&(v.drawBitmapMask(f,n,this),p&&this.set2f("uResolution",p.width,p.height),this.set1i("uInvertMaskAlpha",d.invertAlpha),g.drawArrays(this.topology,0,3),p&&this.set2f("uResolution",this.width,this.height),g.bindTexture(g.TEXTURE_2D,null))}});y.exports=a},92651:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(58918),c=i(14811),h=i(95540),o=i(43558),r=i(89350),a=i(70554),d=new u({Extends:o,initialize:function(n){n.shaders=[a.setGlowQuality(r.FXGlowFrag,n.game),r.FXShadowFrag,r.FXPixelateFrag,r.FXVignetteFrag,r.FXShineFrag,r.FXBlurLowFrag,r.FXBlurMedFrag,r.FXBlurHighFrag,r.FXGradientFrag,r.FXBloomFrag,r.ColorMatrixFrag,r.FXCircleFrag,r.FXBarrelFrag,r.FXDisplacementFrag,r.FXWipeFrag,r.FXBokehFrag],o.call(this,n);var p=this.game;this.glow=new x.Glow(p),this.shadow=new x.Shadow(p),this.pixelate=new x.Pixelate(p),this.vignette=new x.Vignette(p),this.shine=new x.Shine(p),this.gradient=new x.Gradient(p),this.circle=new x.Circle(p),this.barrel=new x.Barrel(p),this.wipe=new x.Wipe(p),this.bokeh=new x.Bokeh(p);var g=[];g[c.GLOW]=this.onGlow,g[c.SHADOW]=this.onShadow,g[c.PIXELATE]=this.onPixelate,g[c.VIGNETTE]=this.onVignette,g[c.SHINE]=this.onShine,g[c.BLUR]=this.onBlur,g[c.GRADIENT]=this.onGradient,g[c.BLOOM]=this.onBloom,g[c.COLOR_MATRIX]=this.onColorMatrix,g[c.CIRCLE]=this.onCircle,g[c.BARREL]=this.onBarrel,g[c.DISPLACEMENT]=this.onDisplacement,g[c.WIPE]=this.onWipe,g[c.BOKEH]=this.onBokeh,this.fxHandlers=g,this.source,this.target,this.swap},onDraw:function(n,p,g){this.source=n,this.target=p,this.swap=g;var v=n.width,f=n.height,b=this.tempSprite,C=this.fxHandlers;if(b&&b.preFX)for(var _=b.preFX.list,M=0;M<_.length;M++){var E=_[M];E.active&&C[E.type].call(this,E,v,f)}this.drawToGame(this.source)},runDraw:function(){var n=this.source,p=this.target;this.copy(n,p),this.source=p,this.target=n},onGlow:function(n,p,g){var v=this.shaders[c.GLOW];this.setShader(v),this.glow.onPreRender(n,v,p,g),this.runDraw()},onShadow:function(n){var p=this.shaders[c.SHADOW];this.setShader(p),this.shadow.onPreRender(n,p),this.runDraw()},onPixelate:function(n,p,g){var v=this.shaders[c.PIXELATE];this.setShader(v),this.pixelate.onPreRender(n,v,p,g),this.runDraw()},onVignette:function(n){var p=this.shaders[c.VIGNETTE];this.setShader(p),this.vignette.onPreRender(n,p),this.runDraw()},onShine:function(n,p,g){var v=this.shaders[c.SHINE];this.setShader(v),this.shine.onPreRender(n,v,p,g),this.runDraw()},onBlur:function(n,p,g){var v=h(n,"quality"),f=this.shaders[c.BLUR+v];this.setShader(f),this.set1i("uMainSampler",0),this.set2f("resolution",p,g),this.set1f("strength",h(n,"strength")),this.set3fv("color",h(n,"glcolor"));for(var b=h(n,"x"),C=h(n,"y"),_=h(n,"steps"),M=0;M<_;M++)this.set2f("offset",b,0),this.runDraw(),this.set2f("offset",0,C),this.runDraw()},onGradient:function(n){var p=this.shaders[c.GRADIENT];this.setShader(p),this.gradient.onPreRender(n,p),this.runDraw()},onBloom:function(n,p,g){var v=this.shaders[c.BLOOM];this.copySprite(this.source,this.swap),this.setShader(v),this.set1i("uMainSampler",0),this.set1f("strength",h(n,"blurStrength")),this.set3fv("color",h(n,"glcolor"));for(var f=2/p*h(n,"offsetX"),b=2/g*h(n,"offsetY"),C=h(n,"steps"),_=0;_<C;_++)this.set2f("offset",f,0),this.runDraw(),this.set2f("offset",0,b),this.runDraw();this.blendFrames(this.swap,this.source,this.target,h(n,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(n){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",n.getData()),this.set1f("uAlpha",n.alpha),this.runDraw()},onCircle:function(n,p,g){var v=this.shaders[c.CIRCLE];this.setShader(v),this.circle.onPreRender(n,v,p,g),this.runDraw()},onBarrel:function(n){var p=this.shaders[c.BARREL];this.setShader(p),this.barrel.onPreRender(n,p),this.runDraw()},onDisplacement:function(n){this.setShader(this.shaders[c.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",n.x,n.y),this.bindTexture(n.glTexture,1),this.runDraw()},onWipe:function(n){var p=this.shaders[c.WIPE];this.setShader(p),this.wipe.onPreRender(n,p),this.runDraw()},onBokeh:function(n,p,g){var v=this.shaders[c.BOKEH];this.setShader(v),this.bokeh.onPreRender(n,v,p,g),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,o.prototype.destroy.call(this),this}});y.exports=d},96569:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Felipe Alfonso <@bitnenfer>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(95540),c=i(31063),h=i(57516),o=i(61340),r=i(26099),a=i(29100),d=new u({Extends:h,initialize:function(n){var p=x(n,"fragShader",c);n.fragShader=p.replace("%LIGHT_COUNT%",n.game.renderer.config.maxLights),h.call(this,n),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new r,this._tempMatrix=new o,this._tempMatrix2=new o},boot:function(){a.prototype.boot.call(this)},onRender:function(n,p){var g=n.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var v=g.getLights(p),f=v.length;this.lightsActive=!0;var b,C=this.renderer,_=C.height,M=p.matrix,E=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),this.set1i("uLightCount",f),b=0;b<f;b++){var A=v[b].light,R=A.color,L="uLights["+b+"].";M.transformPoint(A.x,A.y,E),this.set2f(L+"position",E.x-p.scrollX*A.scrollFactorX*p.zoom,_-(E.y-p.scrollY*A.scrollFactorY*p.zoom)),this.set3f(L+"color",R.r,R.g,R.b),this.set1f(L+"intensity",A.intensity),this.set1f(L+"radius",A.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(n){if(n!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(n){var g=-n,v=Math.cos(g),f=Math.sin(g);p[1]=f,p[3]=-f,p[0]=p[4]=v}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=n}},setTexture2D:function(n,p){var g=this.renderer;n===void 0&&(n=g.whiteTexture);var v=this.getNormalMap(p);this.isNewNormalMap(n,v)&&(this.flush(),this.createBatch(n),this.addTextureToBatch(v),this.currentNormalMap=v);var f=0;if(p&&p.parentContainer){var b=p.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);f=b.rotationNormalized}else p&&(f=p.rotation);return this.currentBatch===null&&(this.createBatch(n),this.addTextureToBatch(v)),this.setNormalMapRotation(f),0},setGameObject:function(n,p){p===void 0&&(p=n.frame);var g=p.glTexture,v=this.getNormalMap(n);if(this.isNewNormalMap(g,v)&&(this.flush(),this.createBatch(g),this.addTextureToBatch(v),this.currentNormalMap=v),n.parentContainer){var f=n.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(f.rotationNormalized)}else this.setNormalMapRotation(n.rotation);return this.currentBatch===null&&(this.createBatch(g),this.addTextureToBatch(v)),0},isNewNormalMap:function(n,p){return this.currentTexture!==n||this.currentNormalMap!==p},getNormalMap:function(n){var p;if(n)n.displayTexture?p=n.displayTexture.dataSource[n.displayFrame.sourceIndex]:n.texture?p=n.texture.dataSource[n.frame.sourceIndex]:n.tileset&&(Array.isArray(n.tileset)?p=n.tileset[0].image.dataSource[0]:p=n.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return p?p.glTexture:this.renderer.normalTexture},batchSprite:function(n,p,g){this.lightsActive&&h.prototype.batchSprite.call(this,n,p,g)},batchTexture:function(n,p,g,v,f,b,C,_,M,E,A,R,L,Y,F,N,z,U,q,Q,K,et,H,J,X,Z,$,it,nt,at,ht,dt){this.lightsActive&&h.prototype.batchTexture.call(this,n,p,g,v,f,b,C,_,M,E,A,R,L,Y,F,N,z,U,q,Q,K,et,H,J,X,Z,$,it,nt,at,ht,dt)},batchTextureFrame:function(n,p,g,v,f,b,C){this.lightsActive&&h.prototype.batchTextureFrame.call(this,n,p,g,v,f,b,C)}});y.exports=d},56527:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(95540),c=i(57516),h=i(45561),o=i(60722),r=i(14500),a=i(29100),d=new u({Extends:c,initialize:function(n){n.fragShader=x(n,"fragShader",h),n.vertShader=x(n,"vertShader",o),n.attributes=x(n,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:r.UNSIGNED_BYTE,normalized:!0}]),n.forceZero=!0,n.resizeUniform="uResolution",c.call(this,n)},boot:function(){a.prototype.boot.call(this);var n=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",n.width,n.height)}});y.exports=d},57516:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Felipe Alfonso <@bitnenfer>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(94811),c=i(95540),h=i(98840),o=i(44667),r=i(61340),a=i(70554),d=i(14500),n=i(29100),p=new u({Extends:n,initialize:function(g){var v=g.game.renderer,f=c(g,"fragShader",h);g.fragShader=a.parseFragmentShaderMaxTextures(f,v.maxTextures),g.vertShader=c(g,"vertShader",o),g.attributes=c(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:d.UNSIGNED_BYTE,normalized:!0}]),g.resizeUniform="uResolution",n.call(this,g),this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){n.prototype.boot.call(this);var g=this.renderer;this.set1iv("uMainSampler",g.textureIndexes),this.set2f("uResolution",g.width,g.height)},batchSprite:function(g,v,f){this.manager.set(this,g);var b=this._tempMatrix1,C=this._tempMatrix2,_=this._tempMatrix3,M=g.frame,E=M.glTexture,A=M.u0,R=M.v0,L=M.u1,Y=M.v1,F=M.x,N=M.y,z=M.cutWidth,U=M.cutHeight,q=M.customPivot,Q=g.displayOriginX,K=g.displayOriginY,et=-Q+F,H=-K+N;if(g.isCropped){var J=g._crop;(J.flipX!==g.flipX||J.flipY!==g.flipY)&&M.updateCropUVs(J,g.flipX,g.flipY),A=J.u0,R=J.v0,L=J.u1,Y=J.v1,z=J.width,U=J.height,F=J.x,N=J.y,et=-Q+F,H=-K+N}var X=1,Z=1;g.flipX&&(q||(et+=-M.realWidth+Q*2),X=-1),g.flipY&&(q||(H+=-M.realHeight+K*2),Z=-1);var $=g.x,it=g.y;v.roundPixels&&($=Math.floor($),it=Math.floor(it)),C.applyITRS($,it,g.rotation,g.scaleX*X,g.scaleY*Z),b.copyFrom(v.matrix),f?(b.multiplyWithOffset(f,-v.scrollX*g.scrollFactorX,-v.scrollY*g.scrollFactorY),C.e=$,C.f=it):(C.e-=v.scrollX*g.scrollFactorX,C.f-=v.scrollY*g.scrollFactorY),b.multiply(C,_);var nt=_.setQuad(et,H,et+z,H+U,v.renderRoundPixels),at=a.getTintAppendFloatAlpha,ht=v.alpha,dt=at(g.tintTopLeft,ht*g._alphaTL),vt=at(g.tintTopRight,ht*g._alphaTR),ft=at(g.tintBottomLeft,ht*g._alphaBL),gt=at(g.tintBottomRight,ht*g._alphaBR);this.shouldFlush(6)&&this.flush();var wt=this.setGameObject(g,M);this.manager.preBatch(g),this.batchQuad(g,nt[0],nt[1],nt[2],nt[3],nt[4],nt[5],nt[6],nt[7],A,R,L,Y,dt,vt,ft,gt,g.tintFill,E,wt),this.manager.postBatch(g)},batchTexture:function(g,v,f,b,C,_,M,E,A,R,L,Y,F,N,z,U,q,Q,K,et,H,J,X,Z,$,it,nt,at,ht,dt,vt,ft,gt){gt===void 0&&(gt=!1),this.manager.set(this,g);var wt=this._tempMatrix1,bt=this._tempMatrix2,xt=this._tempMatrix3,Pt=Q/f+nt,Ot=K/b+at,Et=(Q+et)/f+nt,Tt=(K+H)/b+at,Mt=M,kt=E,Gt=-U,qt=-q;if(g.isCropped){var fe=g._crop,Qt=fe.width,Jt=fe.height;Mt=Qt,kt=Jt,M=Qt,E=Jt,Q=fe.x,K=fe.y;var be=Q,We=K;Y&&(be=et-fe.x-Qt),F&&(We=H-fe.y-Jt),Pt=be/f+nt,Ot=We/b+at,Et=(be+Qt)/f+nt,Tt=(We+Jt)/b+at,Gt=-U+Q,qt=-q+K}F=F^(!vt&&v.isRenderTexture?1:0),Y&&(Mt*=-1,Gt+=M),F&&(kt*=-1,qt+=E),ht.roundPixels&&(C=Math.floor(C),_=Math.floor(_)),bt.applyITRS(C,_,L,A,R),wt.copyFrom(ht.matrix),dt?(wt.multiplyWithOffset(dt,-ht.scrollX*N,-ht.scrollY*z),bt.e=C,bt.f=_):(bt.e-=ht.scrollX*N,bt.f-=ht.scrollY*z),wt.multiply(bt,xt);var $t=xt.setQuad(Gt,qt,Gt+Mt,qt+kt,ht.renderRoundPixels);ft==null&&(ft=this.setTexture2D(v)),g&&!gt&&this.manager.preBatch(g),this.batchQuad(g,$t[0],$t[1],$t[2],$t[3],$t[4],$t[5],$t[6],$t[7],Pt,Ot,Et,Tt,J,X,Z,$,it,v,ft),g&&!gt&&this.manager.postBatch(g)},batchTextureFrame:function(g,v,f,b,C,_,M){this.manager.set(this);var E=this._tempMatrix1.copyFrom(_),A=this._tempMatrix2;M?E.multiply(M,A):A=E;var R=A.setQuad(v,f,v+g.width,f+g.height),L=this.setTexture2D(g.source.glTexture);b=a.getTintAppendFloatAlpha(b,C),this.batchQuad(null,R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],g.u0,g.v0,g.u1,g.v1,b,b,b,b,0,g.glTexture,L)},batchFillRect:function(g,v,f,b,C,_){this.renderer.pipelines.set(this);var M=this.calcMatrix;_&&_.multiply(C,M);var E=M.setQuad(g,v,g+f,v+b),A=this.fillTint;this.batchQuad(null,E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],0,0,1,1,A.TL,A.TR,A.BL,A.BR,2)},batchFillTriangle:function(g,v,f,b,C,_,M,E){this.renderer.pipelines.set(this);var A=this.calcMatrix;E&&E.multiply(M,A);var R=A.getX(g,v),L=A.getY(g,v),Y=A.getX(f,b),F=A.getY(f,b),N=A.getX(C,_),z=A.getY(C,_),U=this.fillTint;this.batchTri(null,R,L,Y,F,N,z,0,0,1,1,U.TL,U.TR,U.BL,2)},batchStrokeTriangle:function(g,v,f,b,C,_,M,E,A){var R=this.tempTriangle;R[0].x=g,R[0].y=v,R[0].width=M,R[1].x=f,R[1].y=b,R[1].width=M,R[2].x=C,R[2].y=_,R[2].width=M,R[3].x=g,R[3].y=v,R[3].width=M,this.batchStrokePath(R,M,!1,E,A)},batchFillPath:function(g,v,f){this.renderer.pipelines.set(this);var b=this.calcMatrix;f&&f.multiply(v,b);for(var C=g.length,_=this.polygonCache,M,E,A=this.fillTint.TL,R=this.fillTint.TR,L=this.fillTint.BL,Y=0;Y<C;++Y)E=g[Y],_.push(E.x,E.y);M=x(_),C=M.length;for(var F=0;F<C;F+=3){var N=M[F+0]*2,z=M[F+1]*2,U=M[F+2]*2,q=_[N+0],Q=_[N+1],K=_[z+0],et=_[z+1],H=_[U+0],J=_[U+1],X=b.getX(q,Q),Z=b.getY(q,Q),$=b.getX(K,et),it=b.getY(K,et),nt=b.getX(H,J),at=b.getY(H,J);this.batchTri(null,X,Z,$,it,nt,at,0,0,1,1,A,R,L,2)}_.length=0},batchStrokePath:function(g,v,f,b,C){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var _=g.length-1,M=0;M<_;M++){var E=g[M],A=g[M+1];this.batchLine(E.x,E.y,A.x,A.y,E.width/2,A.width/2,v,M,!f&&M===_-1,b,C)}},batchLine:function(g,v,f,b,C,_,M,E,A,R,L){this.renderer.pipelines.set(this);var Y=this.calcMatrix;L&&L.multiply(R,Y);var F=f-g,N=b-v,z=Math.sqrt(F*F+N*N);if(z!==0){var U=C*(b-v)/z,q=C*(g-f)/z,Q=_*(b-v)/z,K=_*(g-f)/z,et=f-Q,H=b-K,J=g-U,X=v-q,Z=f+Q,$=b+K,it=g+U,nt=v+q,at=Y.getX(et,H),ht=Y.getY(et,H),dt=Y.getX(J,X),vt=Y.getY(J,X),ft=Y.getX(Z,$),gt=Y.getY(Z,$),wt=Y.getX(it,nt),bt=Y.getY(it,nt),xt=this.strokeTint,Pt=xt.TL,Ot=xt.TR,Et=xt.BL,Tt=xt.BR;if(this.batchQuad(null,wt,bt,dt,vt,at,ht,ft,gt,0,0,1,1,Pt,Ot,Et,Tt,2),!(M<=2)){var Mt=this.prevQuad,kt=this.firstQuad;E>0&&Mt[4]?this.batchQuad(null,wt,bt,dt,vt,Mt[0],Mt[1],Mt[2],Mt[3],0,0,1,1,Pt,Ot,Et,Tt,2):(kt[0]=wt,kt[1]=bt,kt[2]=dt,kt[3]=vt,kt[4]=1),A&&kt[4]?this.batchQuad(null,at,ht,ft,gt,kt[0],kt[1],kt[2],kt[3],0,0,1,1,Pt,Ot,Et,Tt,2):(Mt[0]=at,Mt[1]=ht,Mt[2]=ft,Mt[3]=gt,Mt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,n.prototype.destroy.call(this),this}});y.exports=p},43439:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(95540),c=i(4127),h=i(89924),o=i(29100),r=new u({Extends:o,initialize:function(a){a.vertShader=x(a,"vertShader",h),a.fragShader=x(a,"fragShader",c),a.attributes=x(a,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),o.call(this,a)},onRender:function(a,d){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",d.zoom)},batchPointLight:function(a,d,n,p,g,v,f,b,C,_,M,E){var A=a.color,R=a.intensity,L=a.radius,Y=a.attenuation,F=A.r*R,N=A.g*R,z=A.b*R,U=d.alpha*a.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(n,p,M,E,L,Y,F,N,z,U),this.batchLightVert(g,v,M,E,L,Y,F,N,z,U),this.batchLightVert(f,b,M,E,L,Y,F,N,z,U),this.batchLightVert(n,p,M,E,L,Y,F,N,z,U),this.batchLightVert(f,b,M,E,L,Y,F,N,z,U),this.batchLightVert(C,_,M,E,L,Y,F,N,z,U),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(a,d,n,p,g,v,f,b,C,_){var M=this.vertexViewF32,E=this.vertexCount*this.currentShader.vertexComponentCount-1;M[++E]=a,M[++E]=d,M[++E]=n,M[++E]=p,M[++E]=g,M[++E]=v,M[++E]=f,M[++E]=b,M[++E]=C,M[++E]=_,this.vertexCount++}});y.exports=r},84057:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(89422),c=i(95540),h=i(27681),o=i(49627),r=i(29100),a=new u({Extends:r,initialize:function(d){d.renderTarget=c(d,"renderTarget",1),d.fragShader=c(d,"fragShader",h),d.vertShader=c(d,"vertShader",o),d.attributes=c(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),d.batchSize=1,d.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],r.call(this,d),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new x,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){r.prototype.boot.call(this);var d=this.manager.UTILITY_PIPELINE;this.fullFrame1=d.fullFrame1,this.fullFrame2=d.fullFrame2,this.halfFrame1=d.halfFrame1,this.halfFrame2=d.halfFrame2;var n=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",n.width,n.height);for(var p=this.renderTargets,g=0;g<p.length;g++)p[g].autoResize=!0},postBatch:function(d){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(d),this},onDraw:function(d){this.bindAndDraw(d)},getController:function(d){return d!==void 0?d:this.controller?this.controller:this},copySprite:function(d,n,p){p===void 0&&(p=!1);var g=this.gl;g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,d.texture.webGLTexture);var v=g.getParameter(g.FRAMEBUFFER_BINDING);g.bindFramebuffer(g.FRAMEBUFFER,n.framebuffer.webGLFramebuffer),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,n.texture.webGLTexture,0),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6),p&&(g.bindTexture(g.TEXTURE_2D,null),g.bindFramebuffer(g.FRAMEBUFFER,v))},copyFrame:function(d,n,p,g,v){this.manager.copyFrame(d,n,p,g,v)},copyToGame:function(d){this.manager.copyToGame(d)},drawFrame:function(d,n,p){this.manager.drawFrame(d,n,p,this.colorMatrix)},blendFrames:function(d,n,p,g,v){this.manager.blendFrames(d,n,p,g,v)},blendFramesAdditive:function(d,n,p,g,v){this.manager.blendFramesAdditive(d,n,p,g,v)},clearFrame:function(d,n){this.manager.clearFrame(d,n)},blitFrame:function(d,n,p,g,v,f){this.manager.blitFrame(d,n,p,g,v,f)},copyFrameRect:function(d,n,p,g,v,f,b,C){this.manager.copyFrameRect(d,n,p,g,v,f,b,C)},bindAndDraw:function(d,n,p,g,v){p===void 0&&(p=!0),g===void 0&&(g=!0);var f=this.gl,b=this.renderer;this.bind(v),this.set1i("uMainSampler",0),n?(f.viewport(0,0,n.width,n.height),f.bindFramebuffer(f.FRAMEBUFFER,n.framebuffer.webGLFramebuffer),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,n.texture.webGLTexture,0),p&&(g?f.clearColor(0,0,0,0):f.clearColor(0,0,0,1),f.clear(f.COLOR_BUFFER_BIT))):(b.popFramebuffer(!1,!1),b.currentFramebuffer||f.viewport(0,0,b.width,b.height)),b.restoreStencilMask(),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,d.texture.webGLTexture),f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6),n&&(f.bindTexture(f.TEXTURE_2D,null),f.bindFramebuffer(f.FRAMEBUFFER,b.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),r.prototype.destroy.call(this),this}});y.exports=a},43558:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(10312),x=i(67502),c=i(83419),h=i(96293),o=i(95540),r=i(57516),a=i(27681),d=i(87841),n=i(32302),p=i(45561),g=i(60722),v=i(29100),f=new c({Extends:r,initialize:function(b){var C=o(b,"fragShader",a),_=o(b,"vertShader",g),M=o(b,"drawShader",a),E=[{name:"DrawSprite",fragShader:p,vertShader:g},{name:"CopySprite",fragShader:C,vertShader:_},{name:"DrawGame",fragShader:M,vertShader:g},{name:"ColorMatrix",fragShader:h}],A=o(b,"shaders",[]);b.shaders=E.concat(A),b.vertShader||(b.vertShader=_),b.batchSize=1,r.call(this,b),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new d,this.targetBounds=new d,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){v.prototype.boot.call(this);var b=this.shaders,C=this.renderer;this.drawSpriteShader=b[0],this.copyShader=b[1],this.gameShader=b[2],this.colorMatrixShader=b[3],this.fsTarget=new n(C,C.width,C.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var _=new ArrayBuffer(168);this.quadVertexData=_,this.quadVertexViewF32=new Float32Array(_),this.quadVertexBuffer=C.createVertexBuffer(_,this.gl.STATIC_DRAW),this.onResize(C.width,C.height),this.currentShader=this.copyShader,this.set2f("uResolution",C.width,C.height)},onResize:function(b,C){var _=this.quadVertexViewF32;_[1]=C,_[22]=C,_[14]=b,_[28]=b,_[35]=b,_[36]=C},batchQuad:function(b,C,_,M,E,A,R,L,Y,F,N,z,U,q,Q,K,et,H,J){var X=Math.min(C,M,A,L),Z=Math.min(_,E,R,Y),$=Math.max(C,M,A,L),it=Math.max(_,E,R,Y),nt=$-X,at=it-Z,ht=this.spriteBounds.setTo(X,Z,nt,at),dt=b?b.preFX.padding:0,vt=nt+dt*2,ft=at+dt*2,gt=Math.abs(Math.max(vt,ft)),wt=this.manager.getRenderTarget(gt),bt=this.targetBounds.setTo(0,0,wt.width,wt.height);x(bt,Math.round(ht.centerX),Math.round(ht.centerY)),this.tempSprite=b;var xt=this.gl,Pt=this.renderer;Pt.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",Pt.width,Pt.height),this.flipProjectionMatrix(!0),b&&(this.onDrawSprite(b,wt),b.preFX.onFX(this));var Ot=this.fsTarget;return this.flush(),xt.viewport(0,0,Pt.width,Pt.height),xt.bindFramebuffer(xt.FRAMEBUFFER,Ot.framebuffer.webGLFramebuffer),xt.framebufferTexture2D(xt.FRAMEBUFFER,xt.COLOR_ATTACHMENT0,xt.TEXTURE_2D,Ot.texture.webGLTexture,0),xt.clearColor(0,0,0,0),xt.clear(xt.COLOR_BUFFER_BIT),this.setTexture2D(J),this.batchVert(C,_,F,N,0,H,q),this.batchVert(M,E,F,U,0,H,K),this.batchVert(A,R,z,U,0,H,et),this.batchVert(C,_,F,N,0,H,q),this.batchVert(A,R,z,U,0,H,et),this.batchVert(L,Y,z,N,0,H,Q),this.flush(),this.flipProjectionMatrix(!1),xt.activeTexture(xt.TEXTURE0),xt.bindTexture(xt.TEXTURE_2D,wt.texture.webGLTexture),xt.copyTexSubImage2D(xt.TEXTURE_2D,0,0,0,bt.x,bt.y,bt.width,bt.height),xt.bindFramebuffer(xt.FRAMEBUFFER,null),xt.bindTexture(xt.TEXTURE_2D,null),this.onBatch(b),this.currentShader=this.copyShader,this.onDraw(wt,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(b,C,_,M,E,A,R){_===void 0&&(_=!0),M===void 0&&(M=!0),E===void 0&&(E=!1),R===void 0&&(R=this.copyShader);var L=this.gl,Y=this.tempSprite;A&&(R=this.colorMatrixShader),this.currentShader=R;var F=this.setVertexBuffer(this.quadVertexBuffer);R.bind(F,!1);var N=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",N.width,N.height),Y.preFX.onFXCopy(this),this.onCopySprite(b,C,Y),A&&(this.set1fv("uColorMatrix",A.getData()),this.set1f("uAlpha",A.alpha)),L.activeTexture(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,b.texture.webGLTexture),b.height>C.height)L.viewport(0,0,b.width,b.height),this.setTargetUVs(b,C);else{var z=C.height-b.height;L.viewport(0,z,b.width,b.height),this.resetUVs()}if(L.bindFramebuffer(L.FRAMEBUFFER,C.framebuffer.webGLFramebuffer),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,C.texture.webGLTexture,0),_&&(L.clearColor(0,0,0,+!M),L.clear(L.COLOR_BUFFER_BIT)),E){var U=this.renderer.currentBlendMode;this.renderer.setBlendMode(u.ERASE)}L.bufferData(L.ARRAY_BUFFER,this.quadVertexData,L.STATIC_DRAW),L.drawArrays(L.TRIANGLES,0,6),E&&this.renderer.setBlendMode(U),L.bindFramebuffer(L.FRAMEBUFFER,null)},copy:function(b,C){var _=this.gl;this.set1i("uMainSampler",0),_.activeTexture(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,b.texture.webGLTexture),_.viewport(0,0,b.width,b.height),this.setUVs(0,0,0,1,1,1,1,0),_.bindFramebuffer(_.FRAMEBUFFER,C.framebuffer.webGLFramebuffer),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,C.texture.webGLTexture,0),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),_.bufferData(_.ARRAY_BUFFER,this.quadVertexData,_.STATIC_DRAW),_.drawArrays(_.TRIANGLES,0,6),_.bindFramebuffer(_.FRAMEBUFFER,null)},blendFrames:function(b,C,_,M,E){this.manager.blendFrames(b,C,_,M,E)},blendFramesAdditive:function(b,C,_,M,E){this.manager.blendFramesAdditive(b,C,_,M,E)},drawToGame:function(b){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(b)},copyToGame:function(b){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(b)},bindAndDraw:function(b){var C=this.gl,_=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(b.texture);var M=this._tempMatrix1.loadIdentity(),E=this.targetBounds.x,A=this.targetBounds.y,R=E+b.width,L=A+b.height,Y=M.getX(E,A),F=M.getX(E,L),N=M.getX(R,L),z=M.getX(R,A),U=M.getY(E,A),q=M.getY(E,L),Q=M.getY(R,L),K=M.getY(R,A),et=16777215;this.batchVert(Y,U,0,0,0,0,et),this.batchVert(F,q,0,1,0,0,et),this.batchVert(N,Q,1,1,0,0,et),this.batchVert(Y,U,0,0,0,0,et),this.batchVert(N,Q,1,1,0,0,et),this.batchVert(z,K,1,0,0,0,et),_.restoreFramebuffer(!1,!0),_.currentFramebuffer||C.viewport(0,0,_.width,_.height),_.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(b){this.drawToGame(b)},setUVs:function(b,C,_,M,E,A,R,L){var Y=this.quadVertexViewF32;Y[2]=b,Y[3]=C,Y[9]=_,Y[10]=M,Y[16]=E,Y[17]=A,Y[23]=b,Y[24]=C,Y[30]=E,Y[31]=A,Y[37]=R,Y[38]=L},setTargetUVs:function(b,C){var _=C.height/b.height;_>.5?_=.5-(_-.5):_=.5+(.5-_),this.setUVs(0,_,0,1+_,1,1+_,1,_)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,r.prototype.destroy.call(this),this}});y.exports=f},81041:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(95540),c=i(57516),h=new u({Extends:c,initialize:function(o){o.topology=5,o.batchSize=x(o,"batchSize",256),c.call(this,o)}});y.exports=h},12385:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(95540),c=i(57516),h=i(45561),o=i(60722),r=i(29100),a=new u({Extends:c,initialize:function(d){d.fragShader=x(d,"fragShader",h),d.vertShader=x(d,"vertShader",o),d.forceZero=!0,c.call(this,d)},boot:function(){r.prototype.boot.call(this);var d=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",d.width,d.height)}});y.exports=a},7589:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35407),x=i(10312),c=i(83419),h=i(89422),o=i(96293),r=i(36682),a=i(95540),d=i(48247),n=i(49627),p=i(29100),g=new c({Extends:p,initialize:function(v){v.renderTarget=a(v,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),v.vertShader=a(v,"vertShader",n),v.shaders=a(v,"shaders",[{name:"Copy",fragShader:r},{name:"AddBlend",fragShader:u},{name:"LinearBlend",fragShader:d},{name:"ColorMatrix",fragShader:o}]),v.attributes=a(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),v.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],v.batchSize=1,p.call(this,v),this.colorMatrix=new h,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){p.prototype.boot.call(this);var v=this.shaders,f=this.renderTargets;this.copyShader=v[0],this.addShader=v[1],this.linearShader=v[2],this.colorMatrixShader=v[3],this.fullFrame1=f[0],this.fullFrame2=f[1],this.halfFrame1=f[2],this.halfFrame2=f[3]},copyFrame:function(v,f,b,C,_){b===void 0&&(b=1),C===void 0&&(C=!0),_===void 0&&(_=!0);var M=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",b),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,v.texture.webGLTexture),f?(M.viewport(0,0,f.width,f.height),M.bindFramebuffer(M.FRAMEBUFFER,f.framebuffer.webGLFramebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,f.texture.webGLTexture,0)):M.viewport(0,0,v.width,v.height),C&&(_?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT)),M.bufferData(M.ARRAY_BUFFER,this.vertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},blitFrame:function(v,f,b,C,_,M,E){b===void 0&&(b=1),C===void 0&&(C=!0),_===void 0&&(_=!0),M===void 0&&(M=!1),E===void 0&&(E=!1);var A=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",b),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,v.texture.webGLTexture),v.height>f.height)A.viewport(0,0,v.width,v.height),this.setTargetUVs(v,f);else{var R=f.height-v.height;A.viewport(0,R,v.width,v.height)}if(A.bindFramebuffer(A.FRAMEBUFFER,f.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,f.texture.webGLTexture,0),C&&(_?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),M){var L=this.renderer.currentBlendMode;this.renderer.setBlendMode(x.ERASE)}E&&this.flipY(),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),M&&this.renderer.setBlendMode(L),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(v,f,b,C,_,M,E,A){E===void 0&&(E=!0),A===void 0&&(A=!0);var R=this.gl;R.bindFramebuffer(R.FRAMEBUFFER,v.framebuffer.webGLFramebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,v.texture.webGLTexture,0),E&&(A?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,f.texture.webGLTexture),R.copyTexSubImage2D(R.TEXTURE_2D,0,0,0,b,C,_,M),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null)},copyToGame:function(v){var f=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,v.texture.webGLTexture),f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6)},drawFrame:function(v,f,b,C){b===void 0&&(b=!0),C===void 0&&(C=this.colorMatrix);var _=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",C.getData()),this.set1f("uAlpha",C.alpha),_.activeTexture(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,v.texture.webGLTexture),f?(_.viewport(0,0,f.width,f.height),_.bindFramebuffer(_.FRAMEBUFFER,f.framebuffer.webGLFramebuffer),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,f.texture.webGLTexture,0)):_.viewport(0,0,v.width,v.height),b?_.clearColor(0,0,0,0):_.clearColor(0,0,0,1),_.clear(_.COLOR_BUFFER_BIT),_.bufferData(_.ARRAY_BUFFER,this.vertexData,_.STATIC_DRAW),_.drawArrays(_.TRIANGLES,0,6),_.bindFramebuffer(_.FRAMEBUFFER,null),_.bindTexture(_.TEXTURE_2D,null)},blendFrames:function(v,f,b,C,_,M){C===void 0&&(C=1),_===void 0&&(_=!0),M===void 0&&(M=this.linearShader);var E=this.gl;this.setShader(M),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",C),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,v.texture.webGLTexture),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,f.texture.webGLTexture),b?(E.bindFramebuffer(E.FRAMEBUFFER,b.framebuffer.webGLFramebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,b.texture.webGLTexture,0),E.viewport(0,0,b.width,b.height)):E.viewport(0,0,v.width,v.height),_?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},blendFramesAdditive:function(v,f,b,C,_){this.blendFrames(v,f,b,C,_,this.addShader)},clearFrame:function(v,f){f===void 0&&(f=!0);var b=this.gl;b.viewport(0,0,v.width,v.height),b.bindFramebuffer(b.FRAMEBUFFER,v.framebuffer.webGLFramebuffer),f?b.clearColor(0,0,0,0):b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT);var C=this.renderer.currentFramebuffer;b.bindFramebuffer(b.FRAMEBUFFER,C.webGLFramebuffer)},setUVs:function(v,f,b,C,_,M,E,A){var R=this.vertexViewF32;R[2]=v,R[3]=f,R[6]=b,R[7]=C,R[10]=_,R[11]=M,R[14]=v,R[15]=f,R[18]=_,R[19]=M,R[22]=E,R[23]=A},setTargetUVs:function(v,f){var b=f.height/v.height;b>.5?b=.5-(b-.5):b=.5+(.5-b),this.setUVs(0,b,0,1+b,1,1+b,1,b)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});y.exports=g},36060:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};y.exports=P},84817:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pipelineafterflush"},36712:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pipelinebeforeflush"},40285:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pipelinebind"},65918:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pipelineboot"},92852:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pipelinedestroy"},56072:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pipelinerebind"},57566:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pipelineresize"},77085:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={AFTER_FLUSH:i(84817),BEFORE_FLUSH:i(36712),BIND:i(40285),BOOT:i(65918),DESTROY:i(92852),REBIND:i(56072),RESIZE:i(57566)}},54812:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(99155),c=i(84057),h=new u({Extends:c,initialize:function(o){c.call(this,{game:o,fragShader:x}),this.amount=1},onPreRender:function(o,r){o=this.getController(o),this.set1f("amount",o.amount,r)}});y.exports=h},67329:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(24400),c=i(84057),h=new u({Extends:c,initialize:function(o){c.call(this,{game:o,fragShader:x}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(o){o=this.getController(o),this.set1f("strength",o.blurStrength),this.set3fv("color",o.glcolor)},onDraw:function(o){var r=this.getController(),a=this.fullFrame1,d=this.fullFrame2;this.copyFrame(o,d);for(var n=2/o.width*r.offsetX,p=2/o.height*r.offsetY,g=0;g<r.steps;g++)this.set2f("offset",n,0),this.copySprite(o,a),this.set2f("offset",0,p),this.copySprite(a,o);this.blendFrames(d,o,a,r.strength),this.copyToGame(a)}});y.exports=h},8861:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(41514),c=i(51078),h=i(94328),o=i(84057),r=new u({Extends:o,initialize:function(a){o.call(this,{game:a,shaders:[{name:"Gaussian5",fragShader:x},{name:"Gaussian9",fragShader:c},{name:"Gaussian13",fragShader:h}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(a){var d=this.getController(),n=this.gl,p=this.fullFrame1,g=n.getParameter(n.FRAMEBUFFER_BINDING);this.bind(this.shaders[d.quality]),n.activeTexture(n.TEXTURE0),n.viewport(0,0,a.width,a.height),this.set1i("uMainSampler",0),this.set2f("resolution",a.width,a.height),this.set1f("strength",d.strength),this.set3fv("color",d.glcolor);for(var v=0;v<d.steps;v++)this.set2f("offset",d.x,0),this.copySprite(a,p),this.set2f("offset",0,d.y),this.copySprite(p,a);n.bindFramebuffer(n.FRAMEBUFFER,g),n.bindTexture(n.TEXTURE_2D,null),this.copyToGame(a)}});y.exports=r},51051:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(90610),c=i(84057),h=new u({Extends:c,initialize:function(o){c.call(this,{game:o,fragShader:x}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(o,r,a,d){o=this.getController(o),this.set1f("radius",o.radius,r),this.set1f("amount",o.amount,r),this.set1f("contrast",o.contrast,r),this.set1f("strength",o.strength,r),this.set2f("blur",o.blurX,o.blurY,r),this.setBoolean("isTiltShift",o.isTiltShift,r),a&&d&&this.set2f("resolution",a,d,r)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});y.exports=h},89428:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(91899),c=i(84057),h=new u({Extends:c,initialize:function(o){c.call(this,{game:o,fragShader:x}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(o,r,a,d){o=this.getController(o),this.set1f("scale",o.scale,r),this.set1f("feather",o.feather,r),this.set1f("thickness",o.thickness,r),this.set3fv("color",o.glcolor,r),this.set4fv("backgroundColor",o.glcolor2,r),a&&d&&this.set2f("resolution",a,d,r)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});y.exports=h},88904:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(84057),c=new u({Extends:x,initialize:function(h){x.call(this,{game:h})},onDraw:function(h){var o=this.fullFrame1;this.controller?this.manager.drawFrame(h,o,!0,this.controller):this.drawFrame(h,o),this.copyToGame(o)}});y.exports=c},63563:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(47838),c=i(84057),h=new u({Extends:c,initialize:function(o){c.call(this,{game:o,fragShader:x}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(o){var r=this.game.textures.getFrame(o);r&&(this.glTexture=r.glTexture)},onDraw:function(o){var r=this.getController(),a=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",r.x,r.y),this.bindTexture(r.glTexture,1),this.copySprite(o,a),this.copyToGame(a)}});y.exports=h},94045:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(95540),c=i(98656),h=i(84057),o=i(70554),r=new u({Extends:h,initialize:function(a,d){var n=x(d,"quality",.1),p=x(d,"distance",10);h.call(this,{game:a,fragShader:o.setGlowQuality(c,a,n,p)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(a,d,n,p){a=this.getController(a),this.set1f("outerStrength",a.outerStrength,d),this.set1f("innerStrength",a.innerStrength,d),this.set4fv("glowColor",a.glcolor,d),this.setBoolean("knockout",a.knockout,d),n&&p&&this.set2f("resolution",n,p,d)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});y.exports=r},74088:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(70463),c=i(84057),h=new u({Extends:c,initialize:function(o){c.call(this,{game:o,fragShader:x}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(o,r){o=this.getController(o),this.set1f("alpha",o.alpha,r),this.set1i("size",o.size,r),this.set3fv("color1",o.glcolor1,r),this.set3fv("color2",o.glcolor2,r),this.set2f("positionFrom",o.fromX,o.fromY,r),this.set2f("positionTo",o.toX,o.toY,r)}});y.exports=h},99636:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(50831),c=i(84057),h=new u({Extends:c,initialize:function(o){c.call(this,{game:o,fragShader:x}),this.amount=1},onPreRender:function(o,r,a,d){o=this.getController(o),this.set1f("amount",o.amount,r),a&&d&&this.set2f("resolution",a,d,r)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});y.exports=h},34700:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(92595),c=i(84057),h=new u({Extends:c,initialize:function(o){c.call(this,{game:o,fragShader:x}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(o,r){o=this.getController(o);var a=o.samples;this.set1i("samples",a,r),this.set1f("intensity",o.intensity,r),this.set1f("decay",o.decay,r),this.set1f("power",o.power/a,r),this.set2f("lightPosition",o.x,o.y,r),this.set4fv("color",o.glcolor,r)}});y.exports=h},91157:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(72464),c=i(84057),h=new u({Extends:c,initialize:function(o){c.call(this,{game:o,fragShader:x}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(o,r,a,d){o=this.getController(o),this.setTime("time",r),this.set1f("speed",o.speed,r),this.set1f("lineWidth",o.lineWidth,r),this.set1f("gradient",o.gradient,r),this.setBoolean("reveal",o.reveal,r),a&&d&&this.set2f("resolution",a,d,r)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});y.exports=h},27797:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(39249),c=i(84057),h=new u({Extends:c,initialize:function(o){c.call(this,{game:o,fragShader:x}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(o,r){o=this.getController(o),this.set1f("radius",o.radius,r),this.set1f("strength",o.strength,r),this.set2f("position",o.x,o.y,r)}});y.exports=h},67603:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(2878),c=i(84057),h=new u({Extends:c,initialize:function(o){c.call(this,{game:o,fragShader:x}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(o,r){o=this.getController(o);var a=o.progress,d=o.wipeWidth,n=o.direction,p=o.axis;this.set4f("config",a,d,n,p,r),this.setBoolean("reveal",o.reveal,r)}});y.exports=h},58918:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u={Barrel:i(54812),Bloom:i(67329),Blur:i(8861),Bokeh:i(51051),Circle:i(89428),ColorMatrix:i(88904),Displacement:i(63563),Glow:i(94045),Gradient:i(74088),Pixelate:i(99636),Shadow:i(34700),Shine:i(91157),Vignette:i(27797),Wipe:i(67603)};y.exports=u},96615:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(36060),x=i(79291),c={FX:i(58918),BitmapMaskPipeline:i(31302),Events:i(77085),FXPipeline:i(92651),LightPipeline:i(96569),MobilePipeline:i(56527),MultiPipeline:i(57516),PointLightPipeline:i(43439),PostFXPipeline:i(84057),PreFXPipeline:i(43558),RopePipeline:i(81041),SinglePipeline:i(12385),UtilityPipeline:i(7589)};c=x(!1,c,u),y.exports=c},35407:y=>{y.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},78908:y=>{y.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},85191:y=>{y.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},96293:y=>{y.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},36682:y=>{y.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},99155:y=>{y.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},24400:y=>{y.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},94328:y=>{y.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},41514:y=>{y.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},51078:y=>{y.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},90610:y=>{y.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},91899:y=>{y.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},47838:y=>{y.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},98656:y=>{y.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},70463:y=>{y.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},50831:y=>{y.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},92595:y=>{y.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},72464:y=>{y.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},39249:y=>{y.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},2878:y=>{y.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},31063:y=>{y.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},48247:y=>{y.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},41214:y=>{y.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},39653:y=>{y.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},62143:y=>{y.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},47940:y=>{y.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},98840:y=>{y.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},44667:y=>{y.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},4127:y=>{y.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},89924:y=>{y.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},27681:y=>{y.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},49627:y=>{y.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},45561:y=>{y.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},60722:y=>{y.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},89350:(y,P,i)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={AddBlendFrag:i(35407),BitmapMaskFrag:i(78908),BitmapMaskVert:i(85191),ColorMatrixFrag:i(96293),CopyFrag:i(36682),FXBarrelFrag:i(99155),FXBloomFrag:i(24400),FXBlurHighFrag:i(94328),FXBlurLowFrag:i(41514),FXBlurMedFrag:i(51078),FXBokehFrag:i(90610),FXCircleFrag:i(91899),FXDisplacementFrag:i(47838),FXGlowFrag:i(98656),FXGradientFrag:i(70463),FXPixelateFrag:i(50831),FXShadowFrag:i(92595),FXShineFrag:i(72464),FXVignetteFrag:i(39249),FXWipeFrag:i(2878),LightFrag:i(31063),LinearBlendFrag:i(48247),MeshFrag:i(41214),MeshVert:i(39653),MobileFrag:i(62143),MobileVert:i(47940),MultiFrag:i(98840),MultiVert:i(44667),PointLightFrag:i(4127),PointLightVert:i(89924),PostFXFrag:i(27681),QuadVert:i(49627),SingleFrag:i(45561),SingleVert:i(60722)}},93567:(y,P,i)=>{/**
* @author       Benjamin D. Richards <benjamindrichards@gmail.com>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h,o){this.webGLAttribLocation=-1,this.gl=c,this.program=h,this.name=o,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var c=this.gl;c.isContextLost()||(this.webGLAttribLocation=c.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});y.exports=x},26128:(y,P,i)=>{/**
* @author       Benjamin D. Richards <benjamindrichards@gmail.com>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h,o,r){this.webGLBuffer=null,this.gl=c,this.initialDataOrSize=h,this.bufferType=o,this.bufferUsage=r,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var c=this.gl;if(!c.isContextLost()){var h=this.bufferType,o=c.createBuffer();this.webGLBuffer=o,c.bindBuffer(h,this.webGLBuffer),c.bufferData(h,this.initialDataOrSize,this.bufferUsage),c.bindBuffer(h,null)}}},destroy:function(){var c=this.gl;c.isContextLost()||c.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});y.exports=x},84387:(y,P,i)=>{/**
* @author       Benjamin D. Richards <benjamindrichards@gmail.com>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},c=new u({initialize:function(h,o,r,a,d){this.webGLFramebuffer=null,this.gl=h,this.width=o,this.height=r,this.renderTexture=a,this.addDepthStencilBuffer=!!d,this.createResource()},createResource:function(){var h=this.gl;if(!h.isContextLost()){var o=this.renderTexture,r=0,a=h.createFramebuffer();if(this.webGLFramebuffer=a,h.bindFramebuffer(h.FRAMEBUFFER,a),o.isRenderTexture=!0,o.isAlphaPremultiplied=!1,h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,o.webGLTexture,0),r=h.checkFramebufferStatus(h.FRAMEBUFFER),r!==h.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(x[r]||r));if(this.addDepthStencilBuffer){var d=h.createRenderbuffer();h.bindRenderbuffer(h.RENDERBUFFER,d),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_STENCIL,this.width,this.height),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,d)}h.bindFramebuffer(h.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var h=this.gl;if(!h.isContextLost()){h.bindFramebuffer(h.FRAMEBUFFER,this.webGLFramebuffer);var o=h.getFramebufferAttachmentParameter(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);o!==null&&(h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,null,0),h.deleteTexture(o));var r=h.getFramebufferAttachmentParameter(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);r!==null&&h.deleteRenderbuffer(r),h.bindFramebuffer(h.FRAMEBUFFER,null),h.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});y.exports=c},1482:(y,P,i)=>{/**
* @author       Benjamin D. Richards <benjamindrichards@gmail.com>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h,o){this.webGLProgram=null,this.gl=c,this.vertexSource=h,this.fragmentSource=o,this.createResource()},createResource:function(){var c=this.gl;if(!c.isContextLost()){var h=c.createProgram(),o=c.createShader(c.VERTEX_SHADER),r=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(o,this.vertexSource),c.shaderSource(r,this.fragmentSource),c.compileShader(o),c.compileShader(r);var a=`Shader failed:
`;if(!c.getShaderParameter(o,c.COMPILE_STATUS))throw new Error("Vertex "+a+c.getShaderInfoLog(o));if(!c.getShaderParameter(r,c.COMPILE_STATUS))throw new Error("Fragment "+a+c.getShaderInfoLog(r));if(c.attachShader(h,o),c.attachShader(h,r),c.linkProgram(h),!c.getProgramParameter(h,c.LINK_STATUS))throw new Error("Link "+a+c.getProgramInfoLog(h));c.useProgram(h),this.webGLProgram=h}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});y.exports=x},82751:(y,P,i)=>{/**
* @author       Benjamin D. Richards <benjamindrichards@gmail.com>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(50030),c=new u({initialize:function(h,o,r,a,d,n,p,g,v,f,b,C,_){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=h,this.mipLevel=o,this.minFilter=r,this.magFilter=a,this.wrapT=d,this.wrapS=n,this.format=p,this.pixels=g,this.width=v,this.height=f,this.pma=b??!0,this.forceSize=!!C,this.flipY=!!_,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var h=this.gl;if(!h.isContextLost()){if(this.pixels instanceof c){this.webGLTexture=this.pixels.webGLTexture;return}var o=h.createTexture();o.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=o,this._processTexture()}},update:function(h,o,r,a,d,n,p,g,v){if(!(o===0||r===0)){this.pixels=h,this.width=o,this.height=r,this.flipY=a,this.wrapS=d,this.wrapT=n,this.minFilter=p,this.magFilter=g,this.format=v;var f=this.gl;f.isContextLost()||this._processTexture()}},_processTexture:function(){var h=this.gl;h.activeTexture(h.TEXTURE0);var o=h.getParameter(h.TEXTURE_BINDING_2D);h.bindTexture(h.TEXTURE_2D,this.webGLTexture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.minFilter),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,this.magFilter),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,this.wrapS),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,this.wrapT),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,this.flipY);var r=this.pixels,a=this.mipLevel,d=this.width,n=this.height,p=this.format,g=!1;if(r==null)h.texImage2D(h.TEXTURE_2D,a,p,d,n,0,p,h.UNSIGNED_BYTE,null),g=x(d,n);else if(r.compressed){d=r.width,n=r.height,g=r.generateMipmap;for(var v=0;v<r.mipmaps.length;v++)h.compressedTexImage2D(h.TEXTURE_2D,v,r.internalFormat,r.mipmaps[v].width,r.mipmaps[v].height,0,r.mipmaps[v].data)}else r instanceof Uint8Array?(h.texImage2D(h.TEXTURE_2D,a,p,d,n,0,p,h.UNSIGNED_BYTE,r),g=x(d,n)):(this.forceSize||(d=r.width,n=r.height),h.texImage2D(h.TEXTURE_2D,a,p,p,h.UNSIGNED_BYTE,r),g=x(d,n));g&&h.generateMipmap(h.TEXTURE_2D),o?h.bindTexture(h.TEXTURE_2D,o):h.bindTexture(h.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(h){this.__SPECTOR_Metadata=h,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=h)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof c||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});y.exports=c},57183:(y,P,i)=>{/**
* @author       Benjamin D. Richards <benjamindrichards@gmail.com>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h,o){this.webGLUniformLocation=null,this.gl=c,this.program=h,this.name=o,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var c=this.gl;c.isContextLost()||(this.webGLUniformLocation=c.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});y.exports=x},9503:(y,P,i)=>{/**
* @author       Benjamin D. Richards <benjamindrichards@gmail.com>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u={WebGLAttribLocationWrapper:i(93567),WebGLBufferWrapper:i(26128),WebGLProgramWrapper:i(1482),WebGLTextureWrapper:i(82751),WebGLFramebufferWrapper:i(84387),WebGLUniformLocationWrapper:i(57183)};y.exports=u},76531:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(13560),x=i(83419),c=i(45319),h=i(50792),o=i(97480),r=i(8443),a=i(57811),d=i(74403),n=i(45818),p=i(29747),g=i(87841),v=i(86555),f=i(56583),b=i(26099),C=i(38058),_=new x({Extends:h,initialize:function(M){h.call(this),this.game=M,this.canvas,this.canvasBounds=new g,this.parent=null,this.parentIsWindow=!1,this.parentSize=new v,this.gameSize=new v,this.baseSize=new v,this.displaySize=new v,this.scaleMode=u.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new b(1,1),this.autoRound=!1,this.autoCenter=u.CENTER.NO_CENTER,this.orientation=u.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:p,windowResize:p,fullScreenChange:p,fullScreenError:p}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(r.BOOT,this.boot,this)},boot:function(){var M=this.game;this.canvas=M.canvas,this.fullscreen=M.device.fullscreen;var E=this.scaleMode;E!==u.SCALE_MODE.RESIZE&&E!==u.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(E),E===u.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),M.events.on(r.PRE_STEP,this.step,this),M.events.once(r.READY,this.refresh,this),M.events.once(r.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(M){this.getParent(M),this.getParentBounds();var E=M.width,A=M.height,R=M.scaleMode,L=M.zoom,Y=M.autoRound;if(typeof E=="string")if(E.substr(-1)!=="%")E=parseInt(E,10);else{var F=this.parentSize.width;F===0&&(F=window.innerWidth);var N=parseInt(E,10)/100;E=Math.floor(F*N)}if(typeof A=="string")if(A.substr(-1)!=="%")A=parseInt(A,10);else{var z=this.parentSize.height;z===0&&(z=window.innerHeight);var U=parseInt(A,10)/100;A=Math.floor(z*U)}this.scaleMode=R,this.autoRound=Y,this.autoCenter=M.autoCenter,this.resizeInterval=M.resizeInterval,Y&&(E=Math.floor(E),A=Math.floor(A)),this.gameSize.setSize(E,A),L===u.ZOOM.MAX_ZOOM&&(L=this.getMaxZoom()),this.zoom=L,L!==1&&(this._resetZoom=!0),this.baseSize.setSize(E,A),Y&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),M.minWidth>0&&this.displaySize.setMin(M.minWidth*L,M.minHeight*L),M.maxWidth>0&&this.displaySize.setMax(M.maxWidth*L,M.maxHeight*L),this.displaySize.setSize(E,A),(M.snapWidth>0||M.snapHeight>0)&&this.displaySize.setSnap(M.snapWidth,M.snapHeight),this.orientation=n(E,A)},getParent:function(M){var E=M.parent;if(E!==null){if(this.parent=d(E),this.parentIsWindow=this.parent===document.body,M.expandParent&&M.scaleMode!==u.SCALE_MODE.NONE){var A=this.parent.getBoundingClientRect();(this.parentIsWindow||A.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",A=this.parent.getBoundingClientRect(),!this.parentIsWindow&&A.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}M.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=d(M.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var M=this.parentSize,E=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(E.height=a(!0));var A=E.width,R=E.height;if(M.width!==A||M.height!==R)return M.setSize(A,R),!0;if(this.canvas){var L=this.canvasBounds,Y=this.canvas.getBoundingClientRect();if(Y.x!==L.x||Y.y!==L.y)return!0}return!1},lockOrientation:function(M){var E=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return E?E.call(screen,M):!1},setParentSize:function(M,E){return this.parentSize.setSize(M,E),this.refresh()},setGameSize:function(M,E){var A=this.autoRound;A&&(M=Math.floor(M),E=Math.floor(E));var R=this.width,L=this.height;return this.gameSize.resize(M,E),this.baseSize.resize(M,E),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(M/E),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(R,L)},resize:function(M,E){var A=this.zoom,R=this.autoRound;R&&(M=Math.floor(M),E=Math.floor(E));var L=this.width,Y=this.height;this.gameSize.resize(M,E),this.baseSize.resize(M,E),R&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(M*A,E*A),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var F=this.canvas.style,N=M*A,z=E*A;return R&&(N=Math.floor(N),z=Math.floor(z)),(N!==M||z!==E)&&(F.width=N+"px",F.height=z+"px"),this.refresh(L,Y)},setZoom:function(M){return this.zoom=M,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(M,E){return M===void 0&&(M=0),E===void 0&&(E=M),this.displaySize.setSnap(M,E),this.refresh()},refresh:function(M,E){M===void 0&&(M=this.width),E===void 0&&(E=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var A=this.game.domContainer;if(A){this.baseSize.setCSS(A);var R=this.canvas.style,L=A.style;L.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",L.marginLeft=R.marginLeft,L.marginTop=R.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,M,E),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var M=n(this.width,this.height);M!==this.orientation&&(this.orientation=M,this.emit(o.ORIENTATION_CHANGE,M))}},updateScale:function(){var M=this.canvas.style,E=this.gameSize.width,A=this.gameSize.height,R,L,Y=this.zoom,F=this.autoRound;if(this.scaleMode===u.SCALE_MODE.NONE)this.displaySize.setSize(E*Y,A*Y),R=this.displaySize.width,L=this.displaySize.height,F&&(R=Math.floor(R),L=Math.floor(L)),this._resetZoom&&(M.width=R+"px",M.height=L+"px",this._resetZoom=!1);else if(this.scaleMode===u.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),R=this.displaySize.width,L=this.displaySize.height,F&&(R=Math.floor(R),L=Math.floor(L)),this.canvas.width=R,this.canvas.height=L;else if(this.scaleMode===u.SCALE_MODE.EXPAND){var N=this.game.config.width,z=this.game.config.height,U=this.parentSize.width,q=this.parentSize.height,Q=U/N,K=q/z,et,H;Q<K?(et=N,H=Q!==0?q/Q:z):(et=K!==0?U/K:N,H=z);var J=c(et,this.displaySize.minWidth,this.displaySize.maxWidth),X=c(H,this.displaySize.minHeight,this.displaySize.maxHeight);this.baseSize.setSize(J,X),this.gameSize.setSize(J,X),F&&(J=Math.floor(J),X=Math.floor(X)),this.canvas.width=J,this.canvas.height=X;var Z=U*(J/et),$=q*(X/H);this.displaySize.setSize(Z,$),R=this.displaySize.width,L=this.displaySize.height,F&&(R=Math.floor(R),L=Math.floor(L)),M.width=R+"px",M.height=L+"px"}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),R=this.displaySize.width,L=this.displaySize.height,F&&(R=Math.floor(R),L=Math.floor(L)),M.width=R+"px",M.height=L+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var M=f(this.parentSize.width,this.gameSize.width,0,!0),E=f(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(M,E),1)},updateCenter:function(){var M=this.autoCenter;if(M!==u.CENTER.NO_CENTER){var E=this.canvas,A=E.style,R=E.getBoundingClientRect(),L=R.width,Y=R.height,F=Math.floor((this.parentSize.width-L)/2),N=Math.floor((this.parentSize.height-Y)/2);M===u.CENTER.CENTER_HORIZONTALLY?N=0:M===u.CENTER.CENTER_VERTICALLY&&(F=0),A.marginLeft=F+"px",A.marginTop=N+"px"}},updateBounds:function(){var M=this.canvasBounds,E=this.canvas.getBoundingClientRect();M.x=E.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),M.y=E.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),M.width=E.width,M.height=E.height},transformX:function(M){return(M-this.canvasBounds.left)*this.displayScale.x},transformY:function(M){return(M-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(M){M===void 0&&(M={navigationUI:"hide"});var E=this.fullscreen;if(!E.available){this.emit(o.FULLSCREEN_UNSUPPORTED);return}if(!E.active){var A=this.getFullscreenTarget();E.keyboard?A[E.request](Element.ALLOW_KEYBOARD_INPUT):A[E.request](M)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(M){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,M)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var M=document.createElement("div");M.style.margin="0",M.style.padding="0",M.style.width="100%",M.style.height="100%",this.fullscreenTarget=M,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var E=this.canvas.parentNode;E.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var M=this.fullscreenTarget;if(M&&M.parentNode){var E=M.parentNode;E.insertBefore(this.canvas,M),E.removeChild(M)}}},stopFullscreen:function(){var M=this.fullscreen;if(!M.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;M.active&&document[M.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(M){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(M)},startListeners:function(){var M=this,E=this.domlisteners;if(E.orientationChange=function(){M.updateBounds(),M._checkOrientation=!0,M.dirty=!0,M.refresh()},E.windowResize=function(){M.updateBounds(),M.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",E.orientationChange,!1):window.addEventListener("orientationchange",E.orientationChange,!1),window.addEventListener("resize",E.windowResize,!1),this.fullscreen.available){E.fullScreenChange=function(R){return M.onFullScreenChange(R)},E.fullScreenError=function(R){return M.onFullScreenError(R)};var A=["webkit","moz",""];A.forEach(function(R){document.addEventListener(R+"fullscreenchange",E.fullScreenChange,!1),document.addEventListener(R+"fullscreenerror",E.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",E.fullScreenChange,!1),document.addEventListener("MSFullscreenError",E.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(M,E){M instanceof C||(E=M,M=void 0),E===void 0&&(E=new g);var A=this.baseSize,R=this.parentSize,L=this.canvasBounds,Y=this.displayScale,F=L.x>=0?0:-(L.x*Y.x),N=L.y>=0?0:-(L.y*Y.y),z;R.width>=L.width?z=A.width:z=A.width-(L.width-R.width)*Y.x;var U;return R.height>=L.height?U=A.height:U=A.height-(L.height-R.height)*Y.y,E.setTo(F,N,z,U),M&&(E.width/=M.zoomX,E.height/=M.zoomY,E.centerX=M.centerX+M.scrollX,E.centerY=M.centerY+M.scrollY),E},step:function(M,E){this.parent&&(this._lastCheck+=E,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var M=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",M.orientationChange,!1):window.removeEventListener("orientationchange",M.orientationChange,!1),window.removeEventListener("resize",M.windowResize,!1);var E=["webkit","moz",""];E.forEach(function(A){document.removeEventListener(A+"fullscreenchange",M.fullScreenChange,!1),document.removeEventListener(A+"fullscreenerror",M.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",M.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",M.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===u.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===u.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});y.exports=_},64743:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},39218:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}},81050:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}},80805:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},13560:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u={CENTER:i(64743),ORIENTATION:i(39218),SCALE_MODE:i(81050),ZOOM:i(80805)};y.exports=u},56139:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="enterfullscreen"},2336:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="fullscreenfailed"},47412:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="fullscreenunsupported"},51452:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="leavefullscreen"},20666:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="orientationchange"},47945:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="resize"},97480:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={ENTER_FULLSCREEN:i(56139),FULLSCREEN_FAILED:i(2336),FULLSCREEN_UNSUPPORTED:i(47412),LEAVE_FULLSCREEN:i(51452),ORIENTATION_CHANGE:i(20666),RESIZE:i(47945)}},93364:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(79291),x=i(13560),c={Center:i(64743),Events:i(97480),Orientation:i(39218),ScaleManager:i(76531),ScaleModes:i(81050),Zoom:i(80805)};c=u(!1,c,x.CENTER),c=u(!1,c,x.ORIENTATION),c=u(!1,c,x.SCALE_MODE),c=u(!1,c,x.ZOOM),y.exports=c},27397:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(95540),x=i(35355),c=function(h){var o=h.game.config.defaultPhysicsSystem,r=u(h.settings,"physics",!1);if(!(!o&&!r)){var a=[];if(o&&a.push(x(o+"Physics")),r)for(var d in r)d=x(d.concat("Physics")),a.indexOf(d)===-1&&a.push(d);return a}};y.exports=c},52106:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(95540),x=function(c){var h=c.plugins.getDefaultScenePlugins(),o=u(c.settings,"plugins",!1);return Array.isArray(o)?o:h||[]};y.exports=x},87033:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};y.exports=P},97482:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(2368),c=new u({initialize:function(h){this.sys=new x(this,h),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});y.exports=c},60903:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(89993),c=i(44594),h=i(8443),o=i(35154),r=i(54899),a=i(29747),d=i(97482),n=i(2368),p=new u({initialize:function(g,v){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,v){Array.isArray(v)||(v=[v]);for(var f=0;f<v.length;f++)this._pending.push({key:"default",scene:v[f],autoStart:f===0,data:{}})}g.events.once(h.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new d),this.game.events.emit(h.SYSTEM_READY,this.systemScene,this);var g,v,f,b;for(g=0;g<this._pending.length;g++){v=this._pending[g],f=v.key,b=v.scene;var C;b instanceof d?C=this.createSceneFromInstance(f,b):typeof b=="object"?C=this.createSceneFromObject(f,b):typeof b=="function"&&(C=this.createSceneFromFunction(f,b)),f=C.sys.settings.key,this.keys[f]=C,this.scenes.push(C),this._data[f]&&(C.sys.settings.data=this._data[f].data,this._data[f].autoStart&&(v.autoStart=!0)),(v.autoStart||C.sys.settings.active)&&this._start.push(f)}for(this._pending.length=0,this._data={},this.isBooted=!0,g=0;g<this._start.length;g++)v=this._start[g],this.start(v);this._start.length=0}},processQueue:function(){var g=this._pending.length,v=this._queue.length;if(!(g===0&&v===0)){var f,b;if(g){for(f=0;f<g;f++)b=this._pending[f],this.add(b.key,b.scene,b.autoStart,b.data);for(f=0;f<this._start.length;f++)b=this._start[f],this.start(b);this._start.length=0,this._pending.length=0}for(f=0;f<this._queue.length;f++)b=this._queue[f],this[b.op](b.keyA,b.keyB,b.data);this._queue.length=0}},add:function(g,v,f,b){if(f===void 0&&(f=!1),b===void 0&&(b={}),this.isProcessing||!this.isBooted)return this._pending.push({key:g,scene:v,autoStart:f,data:b}),this.isBooted||(this._data[g]={data:b}),null;g=this.getKey(g,v);var C;return v instanceof d?C=this.createSceneFromInstance(g,v):typeof v=="object"?(v.key=g,C=this.createSceneFromObject(g,v)):typeof v=="function"&&(C=this.createSceneFromFunction(g,v)),C.sys.settings.data=b,g=C.sys.settings.key,this.keys[g]=C,this.scenes.push(C),(f||C.sys.settings.active)&&(this._pending.length?this._start.push(g):this.start(g)),C},remove:function(g){if(this.isProcessing)return this.queueOp("remove",g);var v=this.getScene(g);if(!v||v.sys.isTransitioning())return this;var f=this.scenes.indexOf(v),b=v.sys.settings.key;return f>-1&&(delete this.keys[b],this.scenes.splice(f,1),this._start.indexOf(b)>-1&&(f=this._start.indexOf(b),this._start.splice(f,1)),v.sys.destroy()),this},bootScene:function(g){var v=g.sys,f=v.settings;v.sceneUpdate=a,g.init&&(g.init.call(g,f.data),f.status=x.INIT,f.isTransition&&v.events.emit(c.TRANSITION_INIT,f.transitionFrom,f.transitionDuration));var b;v.load&&(b=v.load,b.reset()),b&&g.preload?(g.preload.call(g),f.status=x.LOADING,b.once(r.COMPLETE,this.loadComplete,this),b.start()):this.create(g)},loadComplete:function(g){this.create(g.scene)},payloadComplete:function(g){this.bootScene(g.scene)},update:function(g,v){this.processQueue(),this.isProcessing=!0;for(var f=this.scenes.length-1;f>=0;f--){var b=this.scenes[f].sys;b.settings.status>x.START&&b.settings.status<=x.RUNNING&&b.step(g,v),b.scenePlugin&&b.scenePlugin._target&&b.scenePlugin.step(g,v)}},render:function(g){for(var v=0;v<this.scenes.length;v++){var f=this.scenes[v].sys;f.settings.visible&&f.settings.status>=x.LOADING&&f.settings.status<x.SLEEPING&&f.render(g)}this.isProcessing=!1},create:function(g){var v=g.sys,f=v.settings;g.create&&(f.status=x.CREATING,g.create.call(g,f.data),f.status===x.DESTROYED)||(f.isTransition&&v.events.emit(c.TRANSITION_START,f.transitionFrom,f.transitionDuration),g.update&&(v.sceneUpdate=g.update),f.status=x.RUNNING,v.events.emit(c.CREATE,g))},createSceneFromFunction:function(g,v){var f=new v;if(f instanceof d){var b=f.sys.settings.key;if(b!==""&&(g=b),this.keys.hasOwnProperty(g))throw new Error("Cannot add Scene with duplicate key: "+g);return this.createSceneFromInstance(g,f)}else return f.sys=new n(f),f.sys.settings.key=g,f.sys.init(this.game),f},createSceneFromInstance:function(g,v){var f=v.sys.settings.key;return f===""&&(v.sys.settings.key=g),v.sys.init(this.game),v},createSceneFromObject:function(g,v){var f=new d(v),b=f.sys.settings.key;b!==""?g=b:f.sys.settings.key=g,f.sys.init(this.game);for(var C=["init","preload","create","update","render"],_=0;_<C.length;_++){var M=o(v,C[_],null);M&&(f[C[_]]=M)}if(v.hasOwnProperty("extend")){for(var E in v.extend)if(v.extend.hasOwnProperty(E)){var A=v.extend[E];E==="data"&&f.hasOwnProperty("data")&&typeof A=="object"?f.data.merge(A):E!=="sys"&&(f[E]=A)}}return f},getKey:function(g,v){if(g||(g="default"),typeof v=="function")return g;if(v instanceof d?g=v.sys.settings.key:typeof v=="object"&&v.hasOwnProperty("key")&&(g=v.key),this.keys.hasOwnProperty(g))throw new Error("Cannot add Scene with duplicate key: "+g);return g},getScenes:function(g,v){g===void 0&&(g=!0),v===void 0&&(v=!1);for(var f=[],b=this.scenes,C=0;C<b.length;C++){var _=b[C];_&&(!g||g&&_.sys.isActive())&&f.push(_)}return v?f.reverse():f},getScene:function(g){if(typeof g=="string"){if(this.keys[g])return this.keys[g]}else for(var v=0;v<this.scenes.length;v++)if(g===this.scenes[v])return g;return null},isActive:function(g){var v=this.getScene(g);return v?v.sys.isActive():null},isPaused:function(g){var v=this.getScene(g);return v?v.sys.isPaused():null},isVisible:function(g){var v=this.getScene(g);return v?v.sys.isVisible():null},isSleeping:function(g){var v=this.getScene(g);return v?v.sys.isSleeping():null},pause:function(g,v){var f=this.getScene(g);return f&&f.sys.pause(v),this},resume:function(g,v){var f=this.getScene(g);return f&&f.sys.resume(v),this},sleep:function(g,v){var f=this.getScene(g);return f&&!f.sys.isTransitioning()&&f.sys.sleep(v),this},wake:function(g,v){var f=this.getScene(g);return f&&f.sys.wake(v),this},run:function(g,v){var f=this.getScene(g);if(!f){for(var b=0;b<this._pending.length;b++)if(this._pending[b].key===g){this.queueOp("start",g,v);break}return this}f.sys.isSleeping()?f.sys.wake(v):f.sys.isPaused()?f.sys.resume(v):this.start(g,v)},start:function(g,v){if(!this.isBooted)return this._data[g]={autoStart:!0,data:v},this;var f=this.getScene(g);if(!f)return console.warn("Scene key not found: "+g),this;var b=f.sys,C=b.settings.status;if(C>=x.START&&C<=x.CREATING)return this;if(C>=x.RUNNING&&C<=x.SLEEPING)b.shutdown(),b.sceneUpdate=a,b.start(v);else{b.sceneUpdate=a,b.start(v);var _;if(b.load&&(_=b.load),_&&b.settings.hasOwnProperty("pack")&&(_.reset(),_.addPack({payload:b.settings.pack})))return b.settings.status=x.LOADING,_.once(r.COMPLETE,this.payloadComplete,this),_.start(),this}return this.bootScene(f),this},stop:function(g,v){var f=this.getScene(g);if(f&&!f.sys.isTransitioning()&&f.sys.settings.status!==x.SHUTDOWN){var b=f.sys.load;b&&(b.off(r.COMPLETE,this.loadComplete,this),b.off(r.COMPLETE,this.payloadComplete,this)),f.sys.shutdown(v)}return this},switch:function(g,v,f){var b=this.getScene(g),C=this.getScene(v);return b&&C&&b!==C&&(this.sleep(g),this.isSleeping(v)?this.wake(v,f):this.start(v,f)),this},getAt:function(g){return this.scenes[g]},getIndex:function(g){var v=this.getScene(g);return this.scenes.indexOf(v)},bringToTop:function(g){if(this.isProcessing)return this.queueOp("bringToTop",g);var v=this.getIndex(g),f=this.scenes;if(v!==-1&&v<f.length){var b=this.getScene(g);f.splice(v,1),f.push(b)}return this},sendToBack:function(g){if(this.isProcessing)return this.queueOp("sendToBack",g);var v=this.getIndex(g);if(v!==-1&&v>0){var f=this.getScene(g);this.scenes.splice(v,1),this.scenes.unshift(f)}return this},moveDown:function(g){if(this.isProcessing)return this.queueOp("moveDown",g);var v=this.getIndex(g);if(v>0){var f=v-1,b=this.getScene(g),C=this.getAt(f);this.scenes[v]=C,this.scenes[f]=b}return this},moveUp:function(g){if(this.isProcessing)return this.queueOp("moveUp",g);var v=this.getIndex(g);if(v<this.scenes.length-1){var f=v+1,b=this.getScene(g),C=this.getAt(f);this.scenes[v]=C,this.scenes[f]=b}return this},moveAbove:function(g,v){if(g===v)return this;if(this.isProcessing)return this.queueOp("moveAbove",g,v);var f=this.getIndex(g),b=this.getIndex(v);if(f!==-1&&b!==-1&&b<f){var C=this.getAt(b);this.scenes.splice(b,1),this.scenes.splice(f+(b>f),0,C)}return this},moveBelow:function(g,v){if(g===v)return this;if(this.isProcessing)return this.queueOp("moveBelow",g,v);var f=this.getIndex(g),b=this.getIndex(v);if(f!==-1&&b!==-1&&b>f){var C=this.getAt(b);this.scenes.splice(b,1),f===0?this.scenes.unshift(C):this.scenes.splice(f-(b<f),0,C)}return this},queueOp:function(g,v,f,b){return this._queue.push({op:g,keyA:v,keyB:f,data:b}),this},swapPosition:function(g,v){if(g===v)return this;if(this.isProcessing)return this.queueOp("swapPosition",g,v);var f=this.getIndex(g),b=this.getIndex(v);if(f!==b&&f!==-1&&b!==-1){var C=this.getAt(f);this.scenes[f]=this.scenes[b],this.scenes[b]=C}return this},dump:function(){for(var g=[],v=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],f=0;f<this.scenes.length;f++){var b=this.scenes[f].sys,C=b.settings.visible&&(b.settings.status===x.RUNNING||b.settings.status===x.PAUSED)?"[*] ":"[-] ";C+=b.settings.key+" ("+v[b.settings.status]+")",g.push(C)}console.log(g.join(`
`))},destroy:function(){for(var g=0;g<this.scenes.length;g++){var v=this.scenes[g].sys;v.destroy()}this.systemScene.sys.destroy(),this.update=a,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});y.exports=p},52209:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45319),x=i(83419),c=i(44594),h=i(95540),o=i(37277),r=new x({initialize:function(a){this.scene=a,this.systems=a.sys,this.settings=a.sys.settings,this.key=a.sys.settings.key,this.manager=a.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,a.sys.events.once(c.BOOT,this.boot,this),a.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},start:function(a,d){return a===void 0&&(a=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",a,d),this},restart:function(a){var d=this.key;return this.manager.queueOp("stop",d),this.manager.queueOp("start",d,a),this},transition:function(a){a===void 0&&(a={});var d=h(a,"target",!1),n=this.manager.getScene(d);if(!d||!this.checkValidTransition(n))return!1;var p=h(a,"duration",1e3);this._elapsed=0,this._target=n,this._duration=p,this._willSleep=h(a,"sleep",!1),this._willRemove=h(a,"remove",!1);var g=h(a,"onUpdate",null);g&&(this._onUpdate=g,this._onUpdateScope=h(a,"onUpdateScope",this.scene));var v=h(a,"allowInput",!1);this.settings.transitionAllowInput=v;var f=n.sys.settings;f.isTransition=!0,f.transitionFrom=this.scene,f.transitionDuration=p,f.transitionAllowInput=v,h(a,"moveAbove",!1)?this.manager.moveAbove(this.key,d):h(a,"moveBelow",!1)&&this.manager.moveBelow(this.key,d),n.sys.isSleeping()?n.sys.wake(h(a,"data")):this.manager.start(d,h(a,"data"));var b=h(a,"onStart",null),C=h(a,"onStartScope",this.scene);return b&&b.call(C,this.scene,n,p),this.systems.events.emit(c.TRANSITION_OUT,n,p),!0},checkValidTransition:function(a){return!(!a||a.sys.isActive()||a.sys.isTransitioning()||a===this.scene||this.systems.isTransitioning())},step:function(a,d){this._elapsed+=d,this.transitionProgress=u(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var a=this._target.sys,d=this._target.sys.settings;a.events.emit(c.TRANSITION_COMPLETE,this.scene),d.isTransition=!1,d.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(a,d,n,p){return this.manager.add(a,d,n,p)},launch:function(a,d){return a&&a!==this.key&&this.manager.queueOp("start",a,d),this},run:function(a,d){return a&&a!==this.key&&this.manager.queueOp("run",a,d),this},pause:function(a,d){return a===void 0&&(a=this.key),this.manager.queueOp("pause",a,d),this},resume:function(a,d){return a===void 0&&(a=this.key),this.manager.queueOp("resume",a,d),this},sleep:function(a,d){return a===void 0&&(a=this.key),this.manager.queueOp("sleep",a,d),this},wake:function(a,d){return a===void 0&&(a=this.key),this.manager.queueOp("wake",a,d),this},switch:function(a,d){return a!==this.key&&this.manager.queueOp("switch",this.key,a,d),this},stop:function(a,d){return a===void 0&&(a=this.key),this.manager.queueOp("stop",a,d),this},setActive:function(a,d,n){d===void 0&&(d=this.key);var p=this.manager.getScene(d);return p&&p.sys.setActive(a,n),this},setVisible:function(a,d){d===void 0&&(d=this.key);var n=this.manager.getScene(d);return n&&n.sys.setVisible(a),this},isSleeping:function(a){return a===void 0&&(a=this.key),this.manager.isSleeping(a)},isActive:function(a){return a===void 0&&(a=this.key),this.manager.isActive(a)},isPaused:function(a){return a===void 0&&(a=this.key),this.manager.isPaused(a)},isVisible:function(a){return a===void 0&&(a=this.key),this.manager.isVisible(a)},swapPosition:function(a,d){return d===void 0&&(d=this.key),a!==d&&this.manager.swapPosition(a,d),this},moveAbove:function(a,d){return d===void 0&&(d=this.key),a!==d&&this.manager.moveAbove(a,d),this},moveBelow:function(a,d){return d===void 0&&(d=this.key),a!==d&&this.manager.moveBelow(a,d),this},remove:function(a){return a===void 0&&(a=this.key),this.manager.remove(a),this},moveUp:function(a){return a===void 0&&(a=this.key),this.manager.moveUp(a),this},moveDown:function(a){return a===void 0&&(a=this.key),this.manager.moveDown(a),this},bringToTop:function(a){return a===void 0&&(a=this.key),this.manager.bringToTop(a),this},sendToBack:function(a){return a===void 0&&(a=this.key),this.manager.sendToBack(a),this},get:function(a){return this.manager.getScene(a)},getStatus:function(a){var d=this.manager.getScene(a);if(d)return d.sys.getStatus()},getIndex:function(a){return a===void 0&&(a=this.key),this.manager.getIndex(a)},shutdown:function(){var a=this.systems.events;a.off(c.SHUTDOWN,this.shutdown,this),a.off(c.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});o.register("ScenePlugin",r,"scenePlugin"),y.exports=r},55681:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(89993),x=i(35154),c=i(46975),h=i(87033),o={create:function(r){return typeof r=="string"?r={key:r}:r===void 0&&(r={}),{status:u.PENDING,key:x(r,"key",""),active:x(r,"active",!1),visible:x(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:x(r,"pack",!1),cameras:x(r,"cameras",null),map:x(r,"map",c(h,x(r,"mapAdd",{}))),physics:x(r,"physics",{}),loader:x(r,"loader",{}),plugins:x(r,"plugins",!1),input:x(r,"input",{})}}};y.exports=o},2368:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(89993),c=i(42363),h=i(44594),o=i(27397),r=i(52106),a=i(29747),d=i(55681),n=new u({initialize:function(p,g){this.scene=p,this.game,this.renderer,this.config=g,this.settings=d.create(g),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=a},init:function(p){this.settings.status=x.INIT,this.sceneUpdate=a,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var g=p.plugins;this.plugins=g,g.addToScene(this,c.Global,[c.CoreScene,r(this),o(this)]),this.events.emit(h.BOOT,this),this.settings.isBooted=!0},step:function(p,g){var v=this.events;v.emit(h.PRE_UPDATE,p,g),v.emit(h.UPDATE,p,g),this.sceneUpdate.call(this.scene,p,g),v.emit(h.POST_UPDATE,p,g)},render:function(p){var g=this.displayList;g.depthSort(),this.events.emit(h.PRE_RENDER,p),this.cameras.render(p,g),this.events.emit(h.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var g=this.settings,v=this.getStatus();return v!==x.CREATING&&v!==x.RUNNING?console.warn("Cannot pause non-running Scene",g.key):this.settings.active&&(g.status=x.PAUSED,g.active=!1,this.events.emit(h.PAUSE,this,p)),this},resume:function(p){var g=this.events,v=this.settings;return this.settings.active||(v.status=x.RUNNING,v.active=!0,g.emit(h.RESUME,this,p)),this},sleep:function(p){var g=this.settings,v=this.getStatus();return v!==x.CREATING&&v!==x.RUNNING?console.warn("Cannot sleep non-running Scene",g.key):(g.status=x.SLEEPING,g.active=!1,g.visible=!1,this.events.emit(h.SLEEP,this,p)),this},wake:function(p){var g=this.events,v=this.settings;return v.status=x.RUNNING,v.active=!0,v.visible=!0,g.emit(h.WAKE,this,p),v.isTransition&&g.emit(h.TRANSITION_WAKE,v.transitionFrom,v.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var p=this.settings.status;return p>x.PENDING&&p<=x.RUNNING},isSleeping:function(){return this.settings.status===x.SLEEPING},isActive:function(){return this.settings.status===x.RUNNING},isPaused:function(){return this.settings.status===x.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,g){return p?this.resume(g):this.pause(g)},start:function(p){var g=this.events,v=this.settings;p&&(v.data=p),v.status=x.START,v.active=!0,v.visible=!0,g.emit(h.START,this),g.emit(h.READY,this,p)},shutdown:function(p){var g=this.events,v=this.settings;g.off(h.TRANSITION_INIT),g.off(h.TRANSITION_START),g.off(h.TRANSITION_COMPLETE),g.off(h.TRANSITION_OUT),v.status=x.SHUTDOWN,v.active=!1,v.visible=!1,g.emit(h.SHUTDOWN,this,p)},destroy:function(){var p=this.events,g=this.settings;g.status=x.DESTROYED,g.active=!1,g.visible=!1,p.emit(h.DESTROY,this),p.removeAllListeners();for(var v=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],f=0;f<v.length;f++)this[v[f]]=null}});y.exports=n},89993:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};y.exports=P},69830:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="addedtoscene"},7919:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="boot"},46763:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="create"},11763:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="destroy"},71555:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pause"},36735:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="postupdate"},3809:y=>{/**
* @author       samme
* @copyright    2021 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="prerender"},90716:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="preupdate"},58262:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="ready"},91633:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="removedfromscene"},10319:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="render"},87132:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="resume"},81961:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="shutdown"},90194:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="sleep"},6265:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="start"},33178:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="transitioncomplete"},43063:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="transitioninit"},11259:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="transitionout"},61611:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="transitionstart"},45209:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="transitionwake"},22966:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="update"},21747:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="wake"},44594:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={ADDED_TO_SCENE:i(69830),BOOT:i(7919),CREATE:i(46763),DESTROY:i(11763),PAUSE:i(71555),POST_UPDATE:i(36735),PRE_RENDER:i(3809),PRE_UPDATE:i(90716),READY:i(58262),REMOVED_FROM_SCENE:i(91633),RENDER:i(10319),RESUME:i(87132),SHUTDOWN:i(81961),SLEEP:i(90194),START:i(6265),TRANSITION_COMPLETE:i(33178),TRANSITION_INIT:i(43063),TRANSITION_OUT:i(11259),TRANSITION_START:i(61611),TRANSITION_WAKE:i(45209),UPDATE:i(22966),WAKE:i(21747)}},62194:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(89993),x=i(79291),c={Events:i(44594),GetPhysicsPlugins:i(27397),GetScenePlugins:i(52106),SceneManager:i(60903),ScenePlugin:i(52209),Settings:i(55681),Systems:i(2368)};c=x(!1,c,u),y.exports=c},30341:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(50792),c=i(14463),h=i(79291),o=i(29747),r=new u({Extends:x,initialize:function(a,d,n){x.call(this),this.manager=a,this.key=d,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=h(this.config,n),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(a){return!a||!a.name||typeof a.name!="string"?!1:this.markers[a.name]?(console.error("addMarker "+a.name+" already exists in Sound"),!1):(a=h(!0,{name:"",start:0,duration:this.totalDuration-(a.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},a),this.markers[a.name]=a,!0)},updateMarker:function(a){return!a||!a.name||typeof a.name!="string"?!1:this.markers[a.name]?(this.markers[a.name]=h(!0,this.markers[a.name],a),!0):(console.warn("Audio Marker: "+a.name+" missing in Sound: "+this.key),!1)},removeMarker:function(a){var d=this.markers[a];return d?(this.markers[a]=null,d):null},play:function(a,d){if(a===void 0&&(a=""),typeof a=="object"&&(d=a,a=""),typeof a!="string")return!1;if(!a)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[a])return console.warn("Marker: "+a+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[a],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=h(this.currentConfig,d),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:o,calculateRate:function(){var a=1.0005777895065548,d=this.currentConfig.detune+this.manager.detune,n=Math.pow(a,d);this.totalRate=this.currentConfig.rate*this.manager.rate*n},destroy:function(){this.pendingRemove||(this.stop(),this.emit(c.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});y.exports=r},85034:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(41786),c=i(50792),h=i(14463),o=i(8443),r=i(46710),a=i(58731),d=i(29747),n=i(26099),p=new u({Extends:c,initialize:function(g){c.call(this),this.game=g,this.jsonCache=g.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new n;var v=g.events;v.on(o.BLUR,this.onGameBlur,this),v.on(o.FOCUS,this.onGameFocus,this),v.on(o.PRE_STEP,this.update,this),v.once(o.DESTROY,this.destroy,this)},add:d,addAudioSprite:function(g,v){v===void 0&&(v={});var f=this.add(g,v);f.spritemap=this.jsonCache.get(g).spritemap;for(var b in f.spritemap)if(f.spritemap.hasOwnProperty(b)){var C=x(v),_=f.spritemap[b];C.loop=_.hasOwnProperty("loop")?_.loop:!1,f.addMarker({name:b,start:_.start,duration:_.end-_.start,config:C})}return f},get:function(g){return a(this.sounds,"key",g)},getAll:function(g){return g?r(this.sounds,"key",g):r(this.sounds)},getAllPlaying:function(){return r(this.sounds,"isPlaying",!0)},play:function(g,v){var f=this.add(g);return f.once(h.COMPLETE,f.destroy,f),v?v.name?(f.addMarker(v),f.play(v.name)):f.play(v):f.play()},playAudioSprite:function(g,v,f){var b=this.addAudioSprite(g);return b.once(h.COMPLETE,b.destroy,b),b.play(v,f)},remove:function(g){var v=this.sounds.indexOf(g);return v!==-1?(g.destroy(),this.sounds.splice(v,1),!0):!1},removeAll:function(){this.sounds.forEach(function(g){g.destroy()}),this.sounds.length=0},removeByKey:function(g){for(var v=0,f=this.sounds.length-1;f>=0;f--){var b=this.sounds[f];b.key===g&&(b.destroy(),this.sounds.splice(f,1),v++)}return v},pauseAll:function(){this.forEachActiveSound(function(g){g.pause()}),this.emit(h.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(g){g.resume()}),this.emit(h.RESUME_ALL,this)},setListenerPosition:d,stopAll:function(){this.forEachActiveSound(function(g){g.stop()}),this.emit(h.STOP_ALL,this)},stopByKey:function(g){var v=0;return this.getAll(g).forEach(function(f){f.stop()&&v++}),v},isPlaying:function(g){var v=this.sounds,f=v.length-1,b;if(g===void 0){for(;f>=0;f--)if(b=this.sounds[f],b.isPlaying)return!0}else for(;f>=0;f--)if(b=this.sounds[f],b.key===g&&b.isPlaying)return!0;return!1},unlock:d,onBlur:d,onFocus:d,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(g,v){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(h.UNLOCKED,this));for(var f=this.sounds.length-1;f>=0;f--)this.sounds[f].pendingRemove&&this.sounds.splice(f,1);this.sounds.forEach(function(b){b.update(g,v)})},destroy:function(){this.game.events.off(o.BLUR,this.onGameBlur,this),this.game.events.off(o.FOCUS,this.onGameFocus,this),this.game.events.off(o.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(g,v){var f=this;this.sounds.forEach(function(b,C){b&&!b.pendingRemove&&g.call(v||f,b,C,f.sounds)})},setRate:function(g){return this.rate=g,this},rate:{get:function(){return this._rate},set:function(g){this._rate=g,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(h.GLOBAL_RATE,this,g)}},setDetune:function(g){return this.detune=g,this},detune:{get:function(){return this._detune},set:function(g){this._detune=g,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(h.GLOBAL_DETUNE,this,g)}}});y.exports=p},14747:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(33684),x=i(25960),c=i(57490),h={create:function(o){var r=o.config.audio,a=o.device.audio;return r.noAudio||!a.webAudio&&!a.audioData?new x(o):a.webAudio&&!r.disableWebAudio?new c(o):new u(o)}};y.exports=h},19723:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="complete"},98882:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="decodedall"},57506:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="decoded"},73146:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="destroy"},11305:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="detune"},40577:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="detune"},30333:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="mute"},20394:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="rate"},21802:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="volume"},1299:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="looped"},99190:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="loop"},97125:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="mute"},89259:y=>{/**
* @author       pi-kei
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pan"},79986:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pauseall"},17586:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pause"},19618:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="play"},42306:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="rate"},10387:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="resumeall"},48959:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="resume"},9960:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="seek"},19180:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="stopall"},98328:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="stop"},50401:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="unlocked"},52498:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="volume"},14463:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={COMPLETE:i(19723),DECODED:i(57506),DECODED_ALL:i(98882),DESTROY:i(73146),DETUNE:i(11305),GLOBAL_DETUNE:i(40577),GLOBAL_MUTE:i(30333),GLOBAL_RATE:i(20394),GLOBAL_VOLUME:i(21802),LOOP:i(99190),LOOPED:i(1299),MUTE:i(97125),PAN:i(89259),PAUSE_ALL:i(79986),PAUSE:i(17586),PLAY:i(19618),RATE:i(42306),RESUME_ALL:i(10387),RESUME:i(48959),SEEK:i(9960),STOP_ALL:i(19180),STOP:i(98328),UNLOCKED:i(50401),VOLUME:i(52498)}},64895:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(30341),x=i(83419),c=i(14463),h=i(45319),o=new x({Extends:u,initialize:function(r,a,d){if(d===void 0&&(d={}),this.tags=r.game.cache.audio.get(a),!this.tags)throw new Error('No cached audio asset with key "'+a);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,u.call(this,r,a,d)},play:function(r,a){return this.manager.isLocked(this,"play",[r,a])||!u.prototype.play.call(this,r,a)||!this.pickAndPlayAudioTag()?!1:(this.emit(c.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!u.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(c.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!u.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(c.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!u.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(c.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var r=this.currentConfig.seek,a=this.currentConfig.delay,d=(this.currentMarker?this.currentMarker.start:0)+r;return this.previousTime=d,this.audio.currentTime=d,this.applyConfig(),a===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+a*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var r=0;r<this.tags.length;r++){var a=this.tags[r];if(a.dataset.used==="false")return a.dataset.used="true",this.audio=a,!0}if(!this.manager.override)return!1;var d=[];this.manager.forEachActiveSound(function(p){p.key===this.key&&p.audio&&d.push(p)},this),d.sort(function(p,g){return p.loop===g.loop?g.seek/g.duration-p.seek/p.duration:p.loop?1:-1});var n=d[0];return this.audio=n.audio,n.reset(),n.audio=null,n.startTime=0,n.previousTime=0,!0},playCatchPromise:function(){var r=this.audio.play();r&&r.catch(function(a){console.warn(a)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){u.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(r){if(this.isPlaying){if(this.startTime>0){this.startTime<r-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,r-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var a=this.currentMarker?this.currentMarker.start:0,d=a+this.duration,n=this.audio.currentTime;if(this.currentConfig.loop)n>=d-this.manager.loopEndOffset?(this.audio.currentTime=a+Math.max(0,n-d),n=this.audio.currentTime):n<a&&(this.audio.currentTime+=a,n=this.audio.currentTime),n<this.previousTime&&this.emit(c.LOOPED,this);else if(n>=d){this.reset(),this.stopAndReleaseAudioTag(),this.emit(c.COMPLETE,this);return}this.previousTime=n}},destroy:function(){u.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=h(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){u.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(r){this.currentConfig.mute=r,!this.manager.isLocked(this,"mute",r)&&(this.updateMute(),this.emit(c.MUTE,this,r))}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.currentConfig.volume},set:function(r){this.currentConfig.volume=r,!this.manager.isLocked(this,"volume",r)&&(this.updateVolume(),this.emit(c.VOLUME,this,r))}},setVolume:function(r){return this.volume=r,this},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,!this.manager.isLocked(this,c.RATE,r)&&(this.calculateRate(),this.emit(c.RATE,this,r))}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,!this.manager.isLocked(this,c.DETUNE,r)&&(this.calculateRate(),this.emit(c.DETUNE,this,r))}},setDetune:function(r){return this.detune=r,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.isLocked(this,"seek",r)||this.startTime>0||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.isPlaying?(this.previousTime=r,this.audio.currentTime=r):this.isPaused&&(this.currentConfig.seek=r),this.emit(c.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,!this.manager.isLocked(this,"loop",r)&&(this.audio&&(this.audio.loop=r),this.emit(c.LOOP,this,r))}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.currentConfig.pan},set:function(r){this.currentConfig.pan=r,this.emit(c.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});y.exports=o},33684:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(85034),x=i(83419),c=i(14463),h=i(64895),o=new x({Extends:u,initialize:function(r){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,u.call(this,r)},add:function(r,a){var d=new h(this,r,a);return this.sounds.push(d),d},unlock:function(){this.locked=!1;var r=this;if(this.game.cache.audio.entries.each(function(p,g){for(var v=0;v<g.length;v++)if(g[v].dataset.locked==="true")return r.locked=!0,!1;return!0}),!!this.locked){var a=!1,d=function(){a=!0},n=function(){if(a){a=!1;return}document.body.removeEventListener("touchmove",d),document.body.removeEventListener("touchend",n);var p=[];if(r.game.cache.audio.entries.each(function(v,f){for(var b=0;b<f.length;b++){var C=f[b];C.dataset.locked==="true"&&p.push(C)}return!0}),p.length!==0){var g=p[p.length-1];g.oncanplaythrough=function(){g.oncanplaythrough=null,p.forEach(function(v){v.dataset.locked="false"}),r.unlocked=!0},p.forEach(function(v){v.load()})}};this.once(c.UNLOCKED,function(){for(this.forEachActiveSound(function(g){g.currentMarker===null&&g.duration===0&&(g.duration=g.tags[0].duration),g.totalDuration=g.tags[0].duration});this.lockedActionsQueue.length;){var p=this.lockedActionsQueue.shift();p.sound[p.prop].apply?p.sound[p.prop].apply(p.sound,p.value||[]):p.sound[p.prop]=p.value}},this),document.body.addEventListener("touchmove",d,!1),document.body.addEventListener("touchend",n,!1)}},onBlur:function(){this.forEachActiveSound(function(r){r.isPlaying&&(this.onBlurPausedSounds.push(r),r.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(r){r.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){u.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(r,a,d){return r.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:r,prop:a,value:d}),!0):!1},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this._mute},set:function(r){this._mute=r,this.forEachActiveSound(function(a){a.updateMute()}),this.emit(c.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this._volume},set:function(r){this._volume=r,this.forEachActiveSound(function(a){a.updateVolume()}),this.emit(c.GLOBAL_VOLUME,this,r)}}});y.exports=o},23717:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={SoundManagerCreator:i(14747),Events:i(14463),BaseSound:i(30341),BaseSoundManager:i(85034),WebAudioSound:i(71741),WebAudioSoundManager:i(57490),HTML5AudioSound:i(64895),HTML5AudioSoundManager:i(33684),NoAudioSound:i(4603),NoAudioSoundManager:i(25960)}},4603:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(30341),x=i(83419),c=i(50792),h=i(79291),o=i(29747),r=function(){return!1},a=function(){return null},d=function(){return this},n=new x({Extends:c,initialize:function(p,g,v){v===void 0&&(v={}),c.call(this),this.manager=p,this.key=g,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=h({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},v),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:r,updateMarker:r,removeMarker:a,play:r,pause:r,resume:r,stop:r,setMute:d,setVolume:d,setRate:d,setDetune:d,setSeek:d,setLoop:d,setPan:d,applyConfig:a,resetConfig:a,update:o,calculateRate:a,destroy:function(){u.prototype.destroy.call(this)}});y.exports=n},25960:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(85034),x=i(83419),c=i(50792),h=i(4603),o=i(29747),r=new x({Extends:c,initialize:function(a){c.call(this),this.game=a,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(a,d){var n=new h(this,a,d);return this.sounds.push(n),n},addAudioSprite:function(a,d){var n=this.add(a,d);return n.spritemap={},n},get:function(a){return u.prototype.get.call(this,a)},getAll:function(a){return u.prototype.getAll.call(this,a)},play:function(a,d){return!1},playAudioSprite:function(a,d,n){return!1},remove:function(a){return u.prototype.remove.call(this,a)},removeAll:function(){return u.prototype.removeAll.call(this)},removeByKey:function(a){return u.prototype.removeByKey.call(this,a)},stopByKey:function(a){return u.prototype.stopByKey.call(this,a)},onBlur:o,onFocus:o,onGameBlur:o,onGameFocus:o,pauseAll:o,resumeAll:o,stopAll:o,update:o,setRate:o,setDetune:o,setMute:o,setVolume:o,unlock:o,forEachActiveSound:function(a,d){u.prototype.forEachActiveSound.call(this,a,d)},destroy:function(){u.prototype.destroy.call(this)}});y.exports=r},71741:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(30341),x=i(83419),c=i(14463),h=i(95540),o=new x({Extends:u,initialize:function(r,a,d){if(d===void 0&&(d={}),this.audioBuffer=r.game.cache.audio.get(a),!this.audioBuffer)throw new Error('Audio key "'+a+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=r.context.createGain(),this.volumeNode=r.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),r.context.createPanner&&(this.spatialNode=r.context.createPanner(),this.volumeNode.connect(this.spatialNode)),r.context.createStereoPanner?(this.pannerNode=r.context.createStereoPanner(),r.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(r.destination)):r.context.createPanner?this.spatialNode.connect(r.destination):this.volumeNode.connect(r.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,u.call(this,r,a,d)},play:function(r,a){return u.prototype.play.call(this,r,a)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(c.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!u.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(c.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!u.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(c.RESUME,this),!0)},stop:function(){return u.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(c.STOP,this),!0):!1},createAndStartBufferSource:function(){var r=this.currentConfig.seek,a=this.currentConfig.delay,d=this.manager.context.currentTime+a,n=(this.currentMarker?this.currentMarker.start:0)+r,p=this.duration-r;this.playTime=d-r,this.startTime=d,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,d),Math.max(0,n),Math.max(0,p)),this.resetConfig()},createAndStartLoopBufferSource:function(){var r=this.getLoopTime(),a=this.currentMarker?this.currentMarker.start:0,d=this.duration;this.loopTime=r,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,r),Math.max(0,a),Math.max(0,d))},createBufferSource:function(){var r=this,a=this.manager.context.createBufferSource();return a.buffer=this.audioBuffer,a.connect(this.muteNode),a.onended=function(d){var n=d.target;(n===r.source||n===r.loopSource)&&(r.currentConfig.loop?r.hasLooped=!0:r.hasEnded=!0)},a},stopAndRemoveBufferSource:function(){if(this.source){var r=this.source;this.source=null,r.stop(),r.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var r=this.currentConfig.source;if(r&&this.manager.context.createPanner){var a=this.spatialNode;a.panningModel=h(r,"panningModel","equalpower"),a.distanceModel=h(r,"distanceModel","inverse"),a.orientationX.value=h(r,"orientationX",0),a.orientationY.value=h(r,"orientationY",0),a.orientationZ.value=h(r,"orientationZ",-1),a.refDistance=h(r,"refDistance",1),a.maxDistance=h(r,"maxDistance",1e4),a.rolloffFactor=h(r,"rolloffFactor",1),a.coneInnerAngle=h(r,"coneInnerAngle",360),a.coneOuterAngle=h(r,"coneOuterAngle",0),a.coneOuterGain=h(r,"coneOuterGain",0),this.spatialSource=h(r,"follow",null),this.spatialSource||(a.positionX.value=h(r,"x",0),a.positionY.value=h(r,"y",0),a.positionZ.value=h(r,"z",0))}u.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(r){this.spatialNode&&(this.spatialNode.positionX.value=r)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(r){this.spatialNode&&(this.spatialNode.positionY.value=r)}},update:function(){if(this.isPlaying&&this.spatialSource){var r=h(this.spatialSource,"x",null),a=h(this.spatialSource,"y",null);r&&r!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=r),a&&a!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=a)}this.hasEnded?(u.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(c.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(c.LOOPED,this))},destroy:function(){this.pendingRemove||(u.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){u.prototype.calculateRate.call(this);var r=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,r),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,r)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var r=0,a=0;a<this.rateUpdates.length;a++){var d=0;a<this.rateUpdates.length-1?d=this.rateUpdates[a+1].time:d=this.manager.context.currentTime-this.playTime,r+=(d-this.rateUpdates[a].time)*this.rateUpdates[a].rate}return r},getLoopTime:function(){for(var r=0,a=0;a<this.rateUpdates.length-1;a++)r+=(this.rateUpdates[a+1].time-this.rateUpdates[a].time)*this.rateUpdates[a].rate;var d=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+d.time+(this.duration-r)/d.rate},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,this.calculateRate(),this.emit(c.RATE,this,r)}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,this.calculateRate(),this.emit(c.DETUNE,this,r)}},setDetune:function(r){return this.detune=r,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(r){this.currentConfig.mute=r,this.muteNode.gain.setValueAtTime(r?0:1,0),this.emit(c.MUTE,this,r)}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(r){this.currentConfig.volume=r,this.volumeNode.gain.setValueAtTime(r,0),this.emit(c.VOLUME,this,r)}},setVolume:function(r){return this.volume=r,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.currentConfig.seek=r,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(c.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),r&&this.createAndStartLoopBufferSource()),this.emit(c.LOOP,this,r)}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(r){this.currentConfig.pan=r,this.pannerNode&&this.pannerNode.pan.setValueAtTime(r,this.manager.context.currentTime),this.emit(c.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});y.exports=o},57490:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(53134),x=i(85034),c=i(83419),h=i(14463),o=i(8443),r=i(71741),a=i(95540),d=new c({Extends:x,initialize:function(n){this.context=this.createAudioContext(n),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended",x.call(this,n),this.locked&&(n.isBooted?this.unlock():n.events.once(o.BOOT,this.unlock,this)),n.events.on(o.VISIBLE,this.onGameVisible,this)},onGameVisible:function(){var n=this.context;window.setTimeout(function(){n&&(n.suspend(),n.resume())},100)},createAudioContext:function(n){var p=n.config.audio;if(p.context)return p.context.resume(),p.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(n){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=n,this.masterMuteNode=n.createGain(),this.masterVolumeNode=n.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(n.destination),this.destination=this.masterMuteNode,this},add:function(n,p){var g=new r(this,n,p);return this.sounds.push(g),g},decodeAudio:function(n,p){var g;Array.isArray(n)?g=n:g=[{key:n,data:p}];for(var v=this.game.cache.audio,f=g.length,b=0;b<g.length;b++){var C=g[b],_=C.key,M=C.data;typeof M=="string"&&(M=u(M));var E=function(R,L){v.add(R,L),this.emit(h.DECODED,R),f--,f===0&&this.emit(h.DECODED_ALL)}.bind(this,_),A=function(R,L){console.error("Error decoding audio: "+R+" - ",L?L.message:""),f--,f===0&&this.emit(h.DECODED_ALL)}.bind(this,_);this.context.decodeAudioData(M,E,A)}},setListenerPosition:function(n,p){return n===void 0&&(n=this.game.scale.width/2),p===void 0&&(p=this.game.scale.height/2),this.listenerPosition.set(n,p),this},unlock:function(){var n=this,p=document.body,g=function v(){if(n.context&&p){var f=p.removeEventListener.bind(p);n.context.resume().then(function(){f("touchstart",v),f("touchend",v),f("mousedown",v),f("mouseup",v),f("keydown",v),n.unlocked=!0},function(){f("touchstart",v),f("touchend",v),f("mousedown",v),f("mouseup",v),f("keydown",v)})}};p&&(p.addEventListener("touchstart",g,!1),p.addEventListener("touchend",g,!1),p.addEventListener("mousedown",g,!1),p.addEventListener("mouseup",g,!1),p.addEventListener("keydown",g,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var n=this.context;n&&!this.locked&&(n.state==="suspended"||n.state==="interrupted")&&n.resume()},update:function(n,p){var g=this.context.listener,v=a(this.listenerPosition,"x",null),f=a(this.listenerPosition,"y",null);if(g&&g.positionX!==void 0)v&&v!==this._spatialx&&(this._spatialx=g.positionX.value=v),f&&f!==this._spatialy&&(this._spatialy=g.positionY.value=f);else if(g){v&&v!==this._spatialx&&(this._spatialx=v),f&&f!==this._spatialy&&(this._spatialy=f);var b=a(g,"z",0);g.setPosition(this._spatialx||0,this._spatialy||0,b)}x.prototype.update.call(this,n,p),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var n=this;this.context.close().then(function(){n.context=null})}this.game.events.off(o.VISIBLE,this.onGameVisible,this),x.prototype.destroy.call(this)},setMute:function(n){return this.mute=n,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(n){this.masterMuteNode.gain.setValueAtTime(n?0:1,0),this.emit(h.GLOBAL_MUTE,this,n)}},setVolume:function(n){return this.volume=n,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(n){this.masterVolumeNode.gain.setValueAtTime(n,0),this.emit(h.GLOBAL_VOLUME,this,n)}}});y.exports=d},73162:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(37105),x=i(83419),c=i(29747),h=i(19186),o=new x({initialize:function(r){this.parent=r,this.list=[],this.position=0,this.addCallback=c,this.removeCallback=c,this._sortKey=""},add:function(r,a){return a?u.Add(this.list,r):u.Add(this.list,r,0,this.addCallback,this)},addAt:function(r,a,d){return d?u.AddAt(this.list,r,a):u.AddAt(this.list,r,a,0,this.addCallback,this)},getAt:function(r){return this.list[r]},getIndex:function(r){return this.list.indexOf(r)},sort:function(r,a){return r?(a===void 0&&(a=function(d,n){return d[r]-n[r]}),h(this.list,a),this):this},getByName:function(r){return u.GetFirst(this.list,"name",r)},getRandom:function(r,a){return u.GetRandom(this.list,r,a)},getFirst:function(r,a,d,n){return u.GetFirst(this.list,r,a,d,n)},getAll:function(r,a,d,n){return u.GetAll(this.list,r,a,d,n)},count:function(r,a){return u.CountAllMatching(this.list,r,a)},swap:function(r,a){u.Swap(this.list,r,a)},moveTo:function(r,a){return u.MoveTo(this.list,r,a)},moveAbove:function(r,a){return u.MoveAbove(this.list,r,a)},moveBelow:function(r,a){return u.MoveBelow(this.list,r,a)},remove:function(r,a){return a?u.Remove(this.list,r):u.Remove(this.list,r,this.removeCallback,this)},removeAt:function(r,a){return a?u.RemoveAt(this.list,r):u.RemoveAt(this.list,r,this.removeCallback,this)},removeBetween:function(r,a,d){return d?u.RemoveBetween(this.list,r,a):u.RemoveBetween(this.list,r,a,this.removeCallback,this)},removeAll:function(r){for(var a=this.list.length;a--;)this.remove(this.list[a],r);return this},bringToTop:function(r){return u.BringToTop(this.list,r)},sendToBack:function(r){return u.SendToBack(this.list,r)},moveUp:function(r){return u.MoveUp(this.list,r),r},moveDown:function(r){return u.MoveDown(this.list,r),r},reverse:function(){return this.list.reverse(),this},shuffle:function(){return u.Shuffle(this.list),this},replace:function(r,a){return u.Replace(this.list,r,a)},exists:function(r){return this.list.indexOf(r)>-1},setAll:function(r,a,d,n){return u.SetAll(this.list,r,a,d,n),this},each:function(r,a){for(var d=[null],n=2;n<arguments.length;n++)d.push(arguments[n]);for(n=0;n<this.list.length;n++)d[0]=this.list[n],r.apply(a,d)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});y.exports=o},90330:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c){this.entries={},this.size=0,this.setAll(c)},setAll:function(c){if(Array.isArray(c))for(var h=0;h<c.length;h++)this.set(c[h][0],c[h][1]);return this},set:function(c,h){return this.has(c)||this.size++,this.entries[c]=h,this},get:function(c){if(this.has(c))return this.entries[c]},getArray:function(){var c=[],h=this.entries;for(var o in h)c.push(h[o]);return c},has:function(c){return this.entries.hasOwnProperty(c)},delete:function(c){return this.has(c)&&(delete this.entries[c],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(c){delete this.entries[c]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var c=[],h=this.entries;for(var o in h)c.push(h[o]);return c},dump:function(){var c=this.entries;console.group("Map");for(var h in c)console.log(h,c[h]);console.groupEnd()},each:function(c){var h=this.entries;for(var o in h)if(c(o,h[o])===!1)break;return this},contains:function(c){var h=this.entries;for(var o in h)if(h[o]===c)return!0;return!1},merge:function(c,h){h===void 0&&(h=!1);var o=this.entries,r=c.entries;for(var a in r)o.hasOwnProperty(a)&&h?o[a]=r[a]:this.set(a,r[a]);return this}});y.exports=x},25774:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(50792),c=i(82348),h=new u({Extends:x,initialize:function(){x.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(o){return this._active.indexOf(o)>-1},isPending:function(o){return this._toProcess>0&&this._pending.indexOf(o)>-1},isDestroying:function(o){return this._destroy.indexOf(o)>-1},add:function(o){return this.checkQueue&&this.isActive(o)&&!this.isDestroying(o)||this.isPending(o)||(this._pending.push(o),this._toProcess++),o},remove:function(o){if(this.isPending(o)){var r=this._pending,a=r.indexOf(o);a!==-1&&r.splice(a,1)}else this.isActive(o)&&(this._destroy.push(o),this._toProcess++);return o},removeAll:function(){for(var o=this._active,r=this._destroy,a=o.length;a--;)r.push(o[a]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var o=this._destroy,r=this._active,a,d;for(a=0;a<o.length;a++){d=o[a];var n=r.indexOf(d);n!==-1&&(r.splice(n,1),this.emit(c.PROCESS_QUEUE_REMOVE,d))}for(o.length=0,o=this._pending,a=0;a<o.length;a++)d=o[a],(!this.checkQueue||this.checkQueue&&r.indexOf(d)===-1)&&(r.push(d),this.emit(c.PROCESS_QUEUE_ADD,d));return o.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});y.exports=h},59542:(y,P,i)=>{/**
* @author       Vladimir Agafonkin
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(43886);function x(M){if(!(this instanceof x))return new x(M);this._maxEntries=Math.max(4,M||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}x.prototype={all:function(){return this._all(this.data,[])},search:function(M){var E=this.data,A=[],R=this.toBBox;if(!b(M,E))return A;for(var L=[],Y,F,N,z;E;){for(Y=0,F=E.children.length;Y<F;Y++)N=E.children[Y],z=E.leaf?R(N):N,b(M,z)&&(E.leaf?A.push(N):f(M,z)?this._all(N,A):L.push(N));E=L.pop()}return A},collides:function(M){var E=this.data,A=this.toBBox;if(!b(M,E))return!1;for(var R=[],L,Y,F,N;E;){for(L=0,Y=E.children.length;L<Y;L++)if(F=E.children[L],N=E.leaf?A(F):F,b(M,N)){if(E.leaf||f(M,N))return!0;R.push(F)}E=R.pop()}return!1},load:function(M){if(!(M&&M.length))return this;if(M.length<this._minEntries){for(var E=0,A=M.length;E<A;E++)this.insert(M[E]);return this}var R=this._build(M.slice(),0,M.length-1,0);if(!this.data.children.length)this.data=R;else if(this.data.height===R.height)this._splitRoot(this.data,R);else{if(this.data.height<R.height){var L=this.data;this.data=R,R=L}this._insert(R,this.data.height-R.height-1,!0)}return this},insert:function(M){return M&&this._insert(M,this.data.height-1),this},clear:function(){return this.data=C([]),this},remove:function(M,E){if(!M)return this;for(var A=this.data,R=this.toBBox(M),L=[],Y=[],F,N,z,U;A||L.length;){if(A||(A=L.pop(),N=L[L.length-1],F=Y.pop(),U=!0),A.leaf&&(z=c(M,A.children,E),z!==-1))return A.children.splice(z,1),L.push(A),this._condense(L),this;!U&&!A.leaf&&f(A,R)?(L.push(A),Y.push(F),F=0,N=A,A=A.children[0]):N?(F++,A=N.children[F],U=!1):A=null}return this},toBBox:function(M){return M},compareMinX:a,compareMinY:d,toJSON:function(){return this.data},fromJSON:function(M){return this.data=M,this},_all:function(M,E){for(var A=[];M;)M.leaf?E.push.apply(E,M.children):A.push.apply(A,M.children),M=A.pop();return E},_build:function(M,E,A,R){var L=A-E+1,Y=this._maxEntries,F;if(L<=Y)return F=C(M.slice(E,A+1)),h(F,this.toBBox),F;R||(R=Math.ceil(Math.log(L)/Math.log(Y)),Y=Math.ceil(L/Math.pow(Y,R-1))),F=C([]),F.leaf=!1,F.height=R;var N=Math.ceil(L/Y),z=N*Math.ceil(Math.sqrt(Y)),U,q,Q,K;for(_(M,E,A,z,this.compareMinX),U=E;U<=A;U+=z)for(Q=Math.min(U+z-1,A),_(M,U,Q,N,this.compareMinY),q=U;q<=Q;q+=N)K=Math.min(q+N-1,Q),F.children.push(this._build(M,q,K,R-1));return h(F,this.toBBox),F},_chooseSubtree:function(M,E,A,R){for(var L,Y,F,N,z,U,q,Q;R.push(E),!(E.leaf||R.length-1===A);){for(q=Q=1/0,L=0,Y=E.children.length;L<Y;L++)F=E.children[L],z=n(F),U=g(M,F)-z,U<Q?(Q=U,q=z<q?z:q,N=F):U===Q&&z<q&&(q=z,N=F);E=N||E.children[0]}return E},_insert:function(M,E,A){var R=this.toBBox,L=A?M:R(M),Y=[],F=this._chooseSubtree(L,this.data,E,Y);for(F.children.push(M),r(F,L);E>=0&&Y[E].children.length>this._maxEntries;)this._split(Y,E),E--;this._adjustParentBBoxes(L,Y,E)},_split:function(M,E){var A=M[E],R=A.children.length,L=this._minEntries;this._chooseSplitAxis(A,L,R);var Y=this._chooseSplitIndex(A,L,R),F=C(A.children.splice(Y,A.children.length-Y));F.height=A.height,F.leaf=A.leaf,h(A,this.toBBox),h(F,this.toBBox),E?M[E-1].children.push(F):this._splitRoot(A,F)},_splitRoot:function(M,E){this.data=C([M,E]),this.data.height=M.height+1,this.data.leaf=!1,h(this.data,this.toBBox)},_chooseSplitIndex:function(M,E,A){var R,L,Y,F,N,z,U,q;for(z=U=1/0,R=E;R<=A-E;R++)L=o(M,0,R,this.toBBox),Y=o(M,R,A,this.toBBox),F=v(L,Y),N=n(L)+n(Y),F<z?(z=F,q=R,U=N<U?N:U):F===z&&N<U&&(U=N,q=R);return q},_chooseSplitAxis:function(M,E,A){var R=M.leaf?this.compareMinX:a,L=M.leaf?this.compareMinY:d,Y=this._allDistMargin(M,E,A,R),F=this._allDistMargin(M,E,A,L);Y<F&&M.children.sort(R)},_allDistMargin:function(M,E,A,R){M.children.sort(R);var L=this.toBBox,Y=o(M,0,E,L),F=o(M,A-E,A,L),N=p(Y)+p(F),z,U;for(z=E;z<A-E;z++)U=M.children[z],r(Y,M.leaf?L(U):U),N+=p(Y);for(z=A-E-1;z>=E;z--)U=M.children[z],r(F,M.leaf?L(U):U),N+=p(F);return N},_adjustParentBBoxes:function(M,E,A){for(var R=A;R>=0;R--)r(E[R],M)},_condense:function(M){for(var E=M.length-1,A;E>=0;E--)M[E].children.length===0?E>0?(A=M[E-1].children,A.splice(A.indexOf(M[E]),1)):this.clear():h(M[E],this.toBBox)},compareMinX:function(M,E){return M.left-E.left},compareMinY:function(M,E){return M.top-E.top},toBBox:function(M){return{minX:M.left,minY:M.top,maxX:M.right,maxY:M.bottom}}};function c(M,E,A){if(!A)return E.indexOf(M);for(var R=0;R<E.length;R++)if(A(M,E[R]))return R;return-1}function h(M,E){o(M,0,M.children.length,E,M)}function o(M,E,A,R,L){L||(L=C(null)),L.minX=1/0,L.minY=1/0,L.maxX=-1/0,L.maxY=-1/0;for(var Y=E,F;Y<A;Y++)F=M.children[Y],r(L,M.leaf?R(F):F);return L}function r(M,E){return M.minX=Math.min(M.minX,E.minX),M.minY=Math.min(M.minY,E.minY),M.maxX=Math.max(M.maxX,E.maxX),M.maxY=Math.max(M.maxY,E.maxY),M}function a(M,E){return M.minX-E.minX}function d(M,E){return M.minY-E.minY}function n(M){return(M.maxX-M.minX)*(M.maxY-M.minY)}function p(M){return M.maxX-M.minX+(M.maxY-M.minY)}function g(M,E){return(Math.max(E.maxX,M.maxX)-Math.min(E.minX,M.minX))*(Math.max(E.maxY,M.maxY)-Math.min(E.minY,M.minY))}function v(M,E){var A=Math.max(M.minX,E.minX),R=Math.max(M.minY,E.minY),L=Math.min(M.maxX,E.maxX),Y=Math.min(M.maxY,E.maxY);return Math.max(0,L-A)*Math.max(0,Y-R)}function f(M,E){return M.minX<=E.minX&&M.minY<=E.minY&&E.maxX<=M.maxX&&E.maxY<=M.maxY}function b(M,E){return E.minX<=M.maxX&&E.minY<=M.maxY&&E.maxX>=M.minX&&E.maxY>=M.minY}function C(M){return{children:M,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(M,E,A,R,L){for(var Y=[E,A],F;Y.length;)A=Y.pop(),E=Y.pop(),!(A-E<=R)&&(F=E+Math.ceil((A-E)/R/2)*R,u(M,F,E,A,L),Y.push(E,F,F,A))}y.exports=x},35072:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c){if(this.entries=[],Array.isArray(c))for(var h=0;h<c.length;h++)this.set(c[h])},set:function(c){return this.entries.indexOf(c)===-1&&this.entries.push(c),this},get:function(c,h){for(var o=0;o<this.entries.length;o++){var r=this.entries[o];if(r[c]===h)return r}},getArray:function(){return this.entries.slice(0)},delete:function(c){var h=this.entries.indexOf(c);return h>-1&&this.entries.splice(h,1),this},dump:function(){console.group("Set");for(var c=0;c<this.entries.length;c++){var h=this.entries[c];console.log(h)}console.groupEnd()},each:function(c,h){var o,r=this.entries.slice(),a=r.length;if(h)for(o=0;o<a&&c.call(h,r[o],o)!==!1;o++);else for(o=0;o<a&&c(r[o],o)!==!1;o++);return this},iterate:function(c,h){var o,r=this.entries.length;if(h)for(o=0;o<r&&c.call(h,this.entries[o],o)!==!1;o++);else for(o=0;o<r&&c(this.entries[o],o)!==!1;o++);return this},iterateLocal:function(c){var h,o=[];for(h=1;h<arguments.length;h++)o.push(arguments[h]);var r=this.entries.length;for(h=0;h<r;h++){var a=this.entries[h];a[c].apply(a,o)}return this},clear:function(){return this.entries.length=0,this},contains:function(c){return this.entries.indexOf(c)>-1},union:function(c){var h=new x;return c.entries.forEach(function(o){h.set(o)}),this.entries.forEach(function(o){h.set(o)}),h},intersect:function(c){var h=new x;return this.entries.forEach(function(o){c.contains(o)&&h.set(o)}),h},difference:function(c){var h=new x;return this.entries.forEach(function(o){c.contains(o)||h.set(o)}),h},size:{get:function(){return this.entries.length},set:function(c){return c<this.entries.length?this.entries.length=c:this.entries.length}}});y.exports=x},86555:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45319),x=i(83419),c=i(56583),h=i(26099),o=new x({initialize:function(r,a,d,n){r===void 0&&(r=0),a===void 0&&(a=r),d===void 0&&(d=0),n===void 0&&(n=null),this._width=r,this._height=a,this._parent=n,this.aspectMode=d,this.aspectRatio=a===0?1:r/a,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new h},setAspectMode:function(r){return r===void 0&&(r=0),this.aspectMode=r,this.setSize(this._width,this._height)},setSnap:function(r,a){return r===void 0&&(r=0),a===void 0&&(a=r),this.snapTo.set(r,a),this.setSize(this._width,this._height)},setParent:function(r){return this._parent=r,this.setSize(this._width,this._height)},setMin:function(r,a){return r===void 0&&(r=0),a===void 0&&(a=r),this.minWidth=u(r,0,this.maxWidth),this.minHeight=u(a,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(r,a){return r===void 0&&(r=Number.MAX_VALUE),a===void 0&&(a=r),this.maxWidth=u(r,this.minWidth,Number.MAX_VALUE),this.maxHeight=u(a,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(r,a){switch(r===void 0&&(r=0),a===void 0&&(a=r),this.aspectMode){case o.NONE:this._width=this.getNewWidth(c(r,this.snapTo.x)),this._height=this.getNewHeight(c(a,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case o.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(c(r,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case o.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(c(a,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case o.FIT:this.constrain(r,a,!0);break;case o.ENVELOP:this.constrain(r,a,!1);break}return this},setAspectRatio:function(r){return this.aspectRatio=r,this.setSize(this._width,this._height)},resize:function(r,a){return this._width=this.getNewWidth(c(r,this.snapTo.x)),this._height=this.getNewHeight(c(a,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(r,a){return a===void 0&&(a=!0),r=u(r,this.minWidth,this.maxWidth),a&&this._parent&&r>this._parent.width&&(r=Math.max(this.minWidth,this._parent.width)),r},getNewHeight:function(r,a){return a===void 0&&(a=!0),r=u(r,this.minHeight,this.maxHeight),a&&this._parent&&r>this._parent.height&&(r=Math.max(this.minHeight,this._parent.height)),r},constrain:function(r,a,d){r===void 0&&(r=0),a===void 0&&(a=r),d===void 0&&(d=!0),r=this.getNewWidth(r),a=this.getNewHeight(a);var n=this.snapTo,p=a===0?1:r/a;return d&&this.aspectRatio>p||!d&&this.aspectRatio<p?(r=c(r,n.x),a=r/this.aspectRatio,n.y>0&&(a=c(a,n.y),r=a*this.aspectRatio)):(d&&this.aspectRatio<p||!d&&this.aspectRatio>p)&&(a=c(a,n.y),r=a*this.aspectRatio,n.x>0&&(r=c(r,n.x),a=r*(1/this.aspectRatio))),this._width=r,this._height=a,this},fitTo:function(r,a){return this.constrain(r,a,!0)},envelop:function(r,a){return this.constrain(r,a,!1)},setWidth:function(r){return this.setSize(r,this._height)},setHeight:function(r){return this.setSize(this._width,r)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(r){r&&r.style&&(r.style.width=this._width+"px",r.style.height=this._height+"px")},copy:function(r){return r.setAspectMode(this.aspectMode),r.aspectRatio=this.aspectRatio,r.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(r){this.setSize(r,this._height)}},height:{get:function(){return this._height},set:function(r){this.setSize(this._width,r)}}});o.NONE=0,o.WIDTH_CONTROLS_HEIGHT=1,o.HEIGHT_CONTROLS_WIDTH=2,o.FIT=3,o.ENVELOP=4,y.exports=o},15238:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="add"},56187:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="remove"},82348:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={PROCESS_QUEUE_ADD:i(15238),PROCESS_QUEUE_REMOVE:i(56187)}},41392:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Events:i(82348),List:i(73162),Map:i(90330),ProcessQueue:i(25774),RTree:i(59542),Set:i(35072),Size:i(86555)}},57382:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(45319),c=i(40987),h=i(8054),o=i(50030),r=i(79237),a=new u({Extends:r,initialize:function(d,n,p,g,v){r.call(this,d,n,p,g,v),this.add("__BASE",0,0,0,g,v),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=g,this.height=v,this.imageData=this.context.getImageData(0,0,g,v),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===h.WEBGL&&this.refresh(),this},draw:function(d,n,p,g){return g===void 0&&(g=!0),this.context.drawImage(p,d,n),g&&this.update(),this},drawFrame:function(d,n,p,g,v){p===void 0&&(p=0),g===void 0&&(g=0),v===void 0&&(v=!0);var f=this.manager.getFrame(d,n);if(f){var b=f.canvasData,C=f.cutWidth,_=f.cutHeight,M=f.source.resolution;this.context.drawImage(f.source.image,b.x,b.y,C,_,p,g,C/M,_/M),v&&this.update()}return this},setPixel:function(d,n,p,g,v,f){f===void 0&&(f=255),d=Math.abs(Math.floor(d)),n=Math.abs(Math.floor(n));var b=this.getIndex(d,n);if(b>-1){var C=this.context.getImageData(d,n,1,1);C.data[0]=p,C.data[1]=g,C.data[2]=v,C.data[3]=f,this.context.putImageData(C,d,n)}return this},putData:function(d,n,p,g,v,f,b){return g===void 0&&(g=0),v===void 0&&(v=0),f===void 0&&(f=d.width),b===void 0&&(b=d.height),this.context.putImageData(d,n,p,g,v,f,b),this},getData:function(d,n,p,g){d=x(Math.floor(d),0,this.width-1),n=x(Math.floor(n),0,this.height-1),p=x(p,1,this.width-d),g=x(g,1,this.height-n);var v=this.context.getImageData(d,n,p,g);return v},getPixel:function(d,n,p){p||(p=new c);var g=this.getIndex(d,n);if(g>-1){var v=this.data,f=v[g+0],b=v[g+1],C=v[g+2],_=v[g+3];p.setTo(f,b,C,_)}return p},getPixels:function(d,n,p,g){d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p=this.width),g===void 0&&(g=p),d=Math.abs(Math.round(d)),n=Math.abs(Math.round(n));for(var v=x(d,0,this.width),f=x(d+p,0,this.width),b=x(n,0,this.height),C=x(n+g,0,this.height),_=new c,M=[],E=b;E<C;E++){for(var A=[],R=v;R<f;R++)_=this.getPixel(R,E,_),A.push({x:R,y:E,color:_.color,alpha:_.alphaGL});M.push(A)}return M},getIndex:function(d,n){return d=Math.abs(Math.round(d)),n=Math.abs(Math.round(n)),d<this.width&&n<this.height?(d+n*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(d,n,p,g,v){return d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p=this.width),g===void 0&&(g=this.height),v===void 0&&(v=!0),this.context.clearRect(d,n,p,g),v&&this.update(),this},setSize:function(d,n){return n===void 0&&(n=d),(d!==this.width||n!==this.height)&&(this.canvas.width=d,this.canvas.height=n,this._source.width=d,this._source.height=n,this._source.isPowerOf2=o(d,n),this.frames.__BASE.setSize(d,n,0,0),this.width=d,this.height=n,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});y.exports=a},81320:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(10312),x=i(38058),c=i(27919),h=i(83419),o=i(8054),r=i(4327),a=i(95540),d=i(36060),n=i(32302),p=i(79237),g=i(70554),v=new h({Extends:p,initialize:function(f,b,C,_,M){C===void 0&&(C=256),_===void 0&&(_=256),M===void 0&&(M=!0),this.type="DynamicTexture";var E=f.game.renderer,A=E&&E.type===o.CANVAS,R=A?c.create2D(this,C,_):[this];p.call(this,f,b,R,C,_),this.add("__BASE",0,0,0,C,_),this.renderer=E,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=A?R:null,this.context=A?R.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new x(0,0,C,_).setScene(f.game.scene.systemScene,!1),this.renderTarget=A?null:new n(E,C,_,1,0,!1,!1,!0,!1),this.pipeline=A?null:E.pipelines.get(d.SINGLE_PIPELINE),this.setSize(C,_,M)},setSize:function(f,b,C){b===void 0&&(b=f),C===void 0&&(C=!0),C&&(f=Math.floor(f),b=Math.floor(b),f%2!==0&&f++,b%2!==0&&b++);var _=this.get(),M=_.source;if(f!==this.width||b!==this.height){this.canvas&&(this.canvas.width=f,this.canvas.height=b);var E=this.renderTarget;E&&(E.willResize(f,b)&&E.resize(f,b),E.texture!==M.glTexture&&this.renderer.deleteTexture(M.glTexture),this.setFromRenderTarget()),this.camera.setSize(f,b),M.width=f,M.height=b,_.setSize(f,b),this.width=f,this.height=b}else{var A=this.getSourceImage();_.cutX+f>A.width&&(f=A.width-_.cutX),_.cutY+b>A.height&&(b=A.height-_.cutY),_.setSize(f,b,_.cutX,_.cutY)}return this},setFromRenderTarget:function(){var f=this.get(),b=f.source,C=this.renderTarget;return b.isRenderTexture=!0,b.isGLTexture=!0,b.glTexture=C.texture,this},setIsSpriteTexture:function(f){return this.isSpriteTexture=f,this},fill:function(f,b,C,_,M,E){var A=this.camera,R=this.renderer;b===void 0&&(b=1),C===void 0&&(C=0),_===void 0&&(_=0),M===void 0&&(M=this.width),E===void 0&&(E=this.height);var L=f>>16&255,Y=f>>8&255,F=f&255,N=this.renderTarget;if(A.preRender(),N){N.bind(!0);var z=this.pipeline.manager.set(this.pipeline),U=R.width/N.width,q=R.height/N.height,Q=N.height-(_+E);z.drawFillRect(C*U,Q*q,M*U,E*q,g.getTintFromFloats(F/255,Y/255,L/255,1),b),N.unbind(!0)}else{var K=this.context;R.setContext(K),K.globalCompositeOperation="source-over",K.fillStyle="rgba("+L+","+Y+","+F+","+b+")",K.fillRect(C,_,M,E),R.setContext()}return this.dirty=!0,this},clear:function(f,b,C,_){if(this.dirty){var M=this.context,E=this.renderTarget;E?E.clear(f,b,C,_):M&&(f!==void 0&&b!==void 0&&C!==void 0&&_!==void 0?M.clearRect(f,b,C,_):(M.save(),M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,this.width,this.height),M.restore())),this.dirty=!1}return this},stamp:function(f,b,C,_,M){C===void 0&&(C=0),_===void 0&&(_=0);var E=a(M,"alpha",1),A=a(M,"tint",16777215),R=a(M,"angle",0),L=a(M,"rotation",0),Y=a(M,"scale",1),F=a(M,"scaleX",Y),N=a(M,"scaleY",Y),z=a(M,"originX",.5),U=a(M,"originY",.5),q=a(M,"blendMode",0),Q=a(M,"erase",!1),K=a(M,"skipBatch",!1),et=this.manager.resetStamp(E,A);return et.setAngle(0),R!==0?et.setAngle(R):L!==0&&et.setRotation(L),et.setScale(F,N),et.setTexture(f,b),et.setOrigin(z,U),et.setBlendMode(q),Q&&(this._eraseMode=!0),K?this.batchGameObject(et,C,_):this.draw(et,C,_),Q&&(this._eraseMode=!1),this},erase:function(f,b,C){return this._eraseMode=!0,this.draw(f,b,C),this._eraseMode=!1,this},draw:function(f,b,C,_,M){return this.beginDraw(),this.batchDraw(f,b,C,_,M),this.endDraw(),this},drawFrame:function(f,b,C,_,M,E){return this.beginDraw(),this.batchDrawFrame(f,b,C,_,M,E),this.endDraw(),this},repeat:function(f,b,C,_,M,E,A,R,L){if(C===void 0&&(C=0),_===void 0&&(_=0),M===void 0&&(M=this.width),E===void 0&&(E=this.height),A===void 0&&(A=1),R===void 0&&(R=16777215),L===void 0&&(L=!1),f instanceof r?b=f:b=this.manager.getFrame(f,b),!b)return this;var Y=this.manager.resetStamp(A,R);Y.setFrame(b),Y.setOrigin(0);var F=b.width,N=b.height;M=Math.floor(M),E=Math.floor(E);var z=Math.ceil(M/F),U=Math.ceil(E/N),q=z*F-M,Q=U*N-E;q>0&&(q=F-q),Q>0&&(Q=N-Q),C<0&&(z+=Math.ceil(Math.abs(C)/F)),_<0&&(U+=Math.ceil(Math.abs(_)/N));var K=C,et=_,H=!1,J=this.manager.stampCrop.setTo(0,0,F,N);L||this.beginDraw();for(var X=0;X<U;X++){if(et+N<0){et+=N;continue}for(var Z=0;Z<z;Z++){if(H=!1,K+F<0){K+=F;continue}else K<0&&(H=!0,J.width=F+K,J.x=F-J.width);et<0&&(H=!0,J.height=N+et,J.y=N-J.height),q>0&&Z===z-1&&(H=!0,J.width=q),Q>0&&X===U-1&&(H=!0,J.height=Q),H&&Y.setCrop(J),this.batchGameObject(Y,K,et),Y.isCropped=!1,J.setTo(0,0,F,N),K+=F}K=C,et+=N}return L||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var f=this.camera,b=this.renderer,C=this.renderTarget;f.preRender(),C?b.beginCapture(C.width,C.height):b.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(f,b,C,_,M){return Array.isArray(f)||(f=[f]),this.batchList(f,b,C,_,M),this},batchDrawFrame:function(f,b,C,_,M,E){C===void 0&&(C=0),_===void 0&&(_=0),M===void 0&&(M=1),E===void 0&&(E=16777215);var A=this.manager.getFrame(f,b);return A&&(this.renderTarget?this.pipeline.batchTextureFrame(A,C,_,E,M,this.camera.matrix,null):this.batchTextureFrame(A,C,_,M,E)),this},endDraw:function(f){if(f===void 0&&(f=this._eraseMode),this.isDrawing){var b=this.renderer,C=this.renderTarget;if(C){var _=b.endCapture(),M=b.pipelines.setUtility();M.blitFrame(_,C,1,!1,!1,f,this.isSpriteTexture),b.resetScissor(),b.resetViewport()}else b.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(f,b,C,_,M){var E=f.length;if(E!==0)for(var A=0;A<E;A++){var R=f[A];!R||R===this||(R.renderWebGL||R.renderCanvas?this.batchGameObject(R,b,C):R.isParent||R.list?this.batchGroup(R.getChildren(),b,C):typeof R=="string"?this.batchTextureFrameKey(R,null,b,C,_,M):R instanceof r?this.batchTextureFrame(R,b,C,_,M):Array.isArray(R)&&this.batchList(R,b,C,_,M))}},batchGroup:function(f,b,C){b===void 0&&(b=0),C===void 0&&(C=0);for(var _=0;_<f.length;_++){var M=f[_];M.willRender(this.camera)&&this.batchGameObject(M,M.x+b,M.y+C)}},batchGameObject:function(f,b,C){b===void 0&&(b=f.x),C===void 0&&(C=f.y);var _=f.x,M=f.y,E=this.camera,A=this.renderer,R=this._eraseMode,L=f.mask;if(f.setPosition(b,C),this.canvas){if(R){var Y=f.blendMode;f.blendMode=u.ERASE}L&&L.preRenderCanvas(A,f,E),f.renderCanvas(A,f,E,null),L&&L.postRenderCanvas(A,f,E),R&&(f.blendMode=Y)}else A&&(L&&L.preRenderWebGL(A,f,E),R||A.setBlendMode(f.blendMode),f.renderWebGL(A,f,E),L&&L.postRenderWebGL(A,E,this.renderTarget));f.setPosition(_,M)},batchTextureFrameKey:function(f,b,C,_,M,E){var A=this.manager.getFrame(f,b);A&&this.batchTextureFrame(A,C,_,M,E)},batchTextureFrame:function(f,b,C,_,M){b===void 0&&(b=0),C===void 0&&(C=0),_===void 0&&(_=1),M===void 0&&(M=16777215);var E=this.camera.matrix,A=this.renderTarget;if(A)this.pipeline.batchTextureFrame(f,b,C,M,_,E,null);else{var R=this.context,L=f.canvasData,Y=f.source.image;R.save(),R.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",R.globalAlpha=_,E.setToContext(R),L.width>0&&L.height>0&&R.drawImage(Y,L.x,L.y,L.width,L.height,b,C,L.width,L.height),R.restore()}},snapshotArea:function(f,b,C,_,M,E,A){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,M,!1,f,b,C,_,E,A):this.renderer.snapshotCanvas(this.canvas,M,!1,f,b,C,_,E,A),this},snapshot:function(f,b,C){return this.snapshotArea(0,0,this.width,this.height,f,b,C)},snapshotPixel:function(f,b,C){return this.snapshotArea(f,b,1,1,C,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(f,b,C,_){var M=this.manager.resetStamp();M.setTexture(this),M.setOrigin(0),M.renderWebGL(f,M,C,_)},renderCanvas:function(){},destroy:function(){var f=this.manager.stamp;f&&f.texture===this&&this.manager.resetStamp(),p.prototype.destroy.call(this),c.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});y.exports=v},4327:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(45319),c=i(79291),h=new u({initialize:function(o,r,a,d,n,p,g){this.texture=o,this.name=r,this.source=o.source[a],this.sourceIndex=a,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(p,g,d,n)},setCutPosition:function(o,r){return o===void 0&&(o=0),r===void 0&&(r=0),this.cutX=o,this.cutY=r,this.updateUVs()},setCutSize:function(o,r){return this.cutWidth=o,this.cutHeight=r,this.updateUVs()},setSize:function(o,r,a,d){a===void 0&&(a=0),d===void 0&&(d=0),this.setCutPosition(a,d),this.setCutSize(o,r),this.width=o,this.height=r,this.halfWidth=Math.floor(o*.5),this.halfHeight=Math.floor(r*.5),this.centerX=Math.floor(o/2),this.centerY=Math.floor(r/2);var n=this.data,p=n.cut;p.x=a,p.y=d,p.w=o,p.h=r,p.r=a+o,p.b=d+r,n.sourceSize.w=o,n.sourceSize.h=r,n.spriteSourceSize.w=o,n.spriteSourceSize.h=r,n.radius=.5*Math.sqrt(o*o+r*r);var g=n.drawImage;return g.x=a,g.y=d,g.width=o,g.height=r,this.updateUVs()},setTrim:function(o,r,a,d,n,p){var g=this.data,v=g.spriteSourceSize;return g.trim=!0,g.sourceSize.w=o,g.sourceSize.h=r,v.x=a,v.y=d,v.w=n,v.h=p,v.r=a+n,v.b=d+p,this.x=a,this.y=d,this.width=n,this.height=p,this.halfWidth=n*.5,this.halfHeight=p*.5,this.centerX=Math.floor(n/2),this.centerY=Math.floor(p/2),this.updateUVs()},setScale9:function(o,r,a,d){var n=this.data;return n.scale9=!0,n.is3Slice=r===0&&d===this.height,n.scale9Borders.x=o,n.scale9Borders.y=r,n.scale9Borders.w=a,n.scale9Borders.h=d,this},setCropUVs:function(o,r,a,d,n,p,g){var v=this.cutX,f=this.cutY,b=this.cutWidth,C=this.cutHeight,_=this.realWidth,M=this.realHeight;r=x(r,0,_),a=x(a,0,M),d=x(d,0,_-r),n=x(n,0,M-a);var E=v+r,A=f+a,R=d,L=n,Y=this.data;if(Y.trim){var F=Y.spriteSourceSize;d=x(d,0,F.x+b-r),n=x(n,0,F.y+C-a);var N=r+d,z=a+n,U=!(F.r<r||F.b<a||F.x>N||F.y>z);if(U){var q=Math.max(F.x,r),Q=Math.max(F.y,a),K=Math.min(F.r,N)-q,et=Math.min(F.b,z)-Q;R=K,L=et,p?E=v+(b-(q-F.x)-K):E=v+(q-F.x),g?A=f+(C-(Q-F.y)-et):A=f+(Q-F.y),r=q,a=Q,d=K,n=et}else E=0,A=0,R=0,L=0}else p&&(E=v+(b-r-d)),g&&(A=f+(C-a-n));var H=this.source.width,J=this.source.height;return o.u0=Math.max(0,E/H),o.v0=Math.max(0,A/J),o.u1=Math.min(1,(E+R)/H),o.v1=Math.min(1,(A+L)/J),o.x=r,o.y=a,o.cx=E,o.cy=A,o.cw=R,o.ch=L,o.width=d,o.height=n,o.flipX=p,o.flipY=g,o},updateCropUVs:function(o,r,a){return this.setCropUVs(o,o.x,o.y,o.width,o.height,r,a)},setUVs:function(o,r,a,d,n,p){var g=this.data.drawImage;return g.width=o,g.height=r,this.u0=a,this.v0=d,this.u1=n,this.v1=p,this},updateUVs:function(){var o=this.cutX,r=this.cutY,a=this.cutWidth,d=this.cutHeight,n=this.data.drawImage;n.width=a,n.height=d;var p=this.source.width,g=this.source.height;return this.u0=o/p,this.v0=r/g,this.u1=(o+a)/p,this.v1=(r+d)/g,this},updateUVsInverted:function(){var o=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/o,this.v0=this.cutY/r,this.u1=this.cutX/o,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function(){var o=new h(this.texture,this.name,this.sourceIndex);return o.cutX=this.cutX,o.cutY=this.cutY,o.cutWidth=this.cutWidth,o.cutHeight=this.cutHeight,o.x=this.x,o.y=this.y,o.width=this.width,o.height=this.height,o.halfWidth=this.halfWidth,o.halfHeight=this.halfHeight,o.centerX=this.centerX,o.centerY=this.centerY,o.rotated=this.rotated,o.data=c(!0,o.data,this.data),o.updateUVs(),o},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});y.exports=h},79237:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(4327),c=i(11876),h='Texture "%s" has no frame "%s"',o=new u({initialize:function(r,a,d,n,p){Array.isArray(d)||(d=[d]),this.manager=r,this.key=a,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var g=0;g<d.length;g++)this.source.push(new c(this,d[g],n,p))},add:function(r,a,d,n,p,g){if(this.has(r))return null;var v=new x(this,r,a,d,n,p,g);return this.frames[r]=v,this.firstFrame==="__BASE"&&(this.firstFrame=r),this.frameTotal++,v},remove:function(r){if(this.has(r)){var a=this.get(r);return a.destroy(),delete this.frames[r],!0}return!1},has:function(r){return this.frames.hasOwnProperty(r)},get:function(r){r||(r=this.firstFrame);var a=this.frames[r];return a||(console.warn(h,this.key,r),a=this.frames[this.firstFrame]),a},getTextureSourceIndex:function(r){for(var a=0;a<this.source.length;a++)if(this.source[a]===r)return a;return-1},getFramesFromTextureSource:function(r,a){a===void 0&&(a=!1);var d=[];for(var n in this.frames)if(!(n==="__BASE"&&!a)){var p=this.frames[n];p.sourceIndex===r&&d.push(p)}return d},getFrameBounds:function(r){r===void 0&&(r=0);for(var a=this.getFramesFromTextureSource(r,!0),d=a[0],n=d.cutX,p=d.cutY,g=d.cutX+d.cutWidth,v=d.cutY+d.cutHeight,f=1;f<a.length;f++){var b=a[f];b.cutX<n&&(n=b.cutX),b.cutY<p&&(p=b.cutY),b.cutX+b.cutWidth>g&&(g=b.cutX+b.cutWidth),b.cutY+b.cutHeight>v&&(v=b.cutY+b.cutHeight)}return{x:n,y:p,width:g-n,height:v-p}},getFrameNames:function(r){r===void 0&&(r=!1);var a=Object.keys(this.frames);if(!r){var d=a.indexOf("__BASE");d!==-1&&a.splice(d,1)}return a},getSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var a=this.frames[r];return a?a.source.image:(console.warn(h,this.key,r),this.frames.__BASE.source.image)},getDataSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var a=this.frames[r],d;return a?d=a.sourceIndex:(console.warn(h,this.key,r),d=this.frames.__BASE.sourceIndex),this.dataSource[d].image},setDataSource:function(r){Array.isArray(r)||(r=[r]);for(var a=0;a<r.length;a++){var d=this.source[a];this.dataSource.push(new c(this,r[a],d.width,d.height))}},setFilter:function(r){var a;for(a=0;a<this.source.length;a++)this.source[a].setFilter(r);for(a=0;a<this.dataSource.length;a++)this.dataSource[a].setFilter(r)},destroy:function(){var r,a=this.source,d=this.dataSource;for(r=0;r<a.length;r++)a[r]&&a[r].destroy();for(r=0;r<d.length;r++)d[r]&&d[r].destroy();for(var n in this.frames){var p=this.frames[n];p&&p.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});y.exports=o},17130:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(27919),x=i(57382),c=i(83419),h=i(40987),o=i(8054),r=i(81320),a=i(50792),d=i(69442),n=i(4327),p=i(8443),g=i(99584),v=i(35154),f=i(88571),b=i(41212),C=i(61309),_=i(87841),M=i(79237),E=new c({Extends:a,initialize:function(A){a.call(this),this.game=A,this.name="TextureManager",this.list={},this._tempCanvas=u.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new _,this.silentWarnings=!1,A.events.once(p.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(d.LOAD,this.updatePending,this),this.on(d.ERROR,this.updatePending,this);var A=this.game.config;A.defaultImage!==null&&this.addBase64("__DEFAULT",A.defaultImage),A.missingImage!==null&&this.addBase64("__MISSING",A.missingImage),A.whiteImage!==null&&this.addBase64("__WHITE",A.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(p.DESTROY,this.destroy,this),this.game.events.once(p.SYSTEM_READY,function(R){this.stamp=new f(R).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(d.LOAD),this.off(d.ERROR),this.emit(d.READY))},checkKey:function(A){return!A||typeof A!="string"||this.exists(A)?(this.silentWarnings||console.error("Texture key already in use: "+A),!1):!0},remove:function(A){if(typeof A=="string")if(this.exists(A))A=this.get(A);else return this.silentWarnings||console.warn("No texture found matching key: "+A),this;var R=A.key;return this.list.hasOwnProperty(R)&&(A.destroy(),this.emit(d.REMOVE,R),this.emit(d.REMOVE_KEY+R)),this},removeKey:function(A){return this.list.hasOwnProperty(A)&&delete this.list[A],this},addBase64:function(A,R){if(this.checkKey(A)){var L=this,Y=new Image;Y.onerror=function(){L.emit(d.ERROR,A)},Y.onload=function(){var F=L.create(A,Y);F&&(C.Image(F,0),L.emit(d.ADD,A,F),L.emit(d.ADD_KEY+A,F),L.emit(d.LOAD,A,F))},Y.src=R}return this},getBase64:function(A,R,L,Y){L===void 0&&(L="image/png"),Y===void 0&&(Y=.92);var F="",N=this.getFrame(A,R);if(N&&(N.source.isRenderTexture||N.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(N){var z=N.canvasData,U=u.create2D(this,z.width,z.height),q=U.getContext("2d",{willReadFrequently:!0});z.width>0&&z.height>0&&q.drawImage(N.source.image,z.x,z.y,z.width,z.height,0,0,z.width,z.height),F=U.toDataURL(L,Y),u.remove(U)}return F},addImage:function(A,R,L){var Y=null;return this.checkKey(A)&&(Y=this.create(A,R),C.Image(Y,0),L&&Y.setDataSource(L),this.emit(d.ADD,A,Y),this.emit(d.ADD_KEY+A,Y)),Y},addGLTexture:function(A,R){var L=null;if(this.checkKey(A)){var Y=R.width,F=R.height;L=this.create(A,R,Y,F),L.add("__BASE",0,0,0,Y,F),this.emit(d.ADD,A,L),this.emit(d.ADD_KEY+A,L)}return L},addCompressedTexture:function(A,R,L){var Y=null;if(this.checkKey(A)){if(Y=this.create(A,R),Y.add("__BASE",0,0,0,R.width,R.height),L){var F=function(z,U,q){Array.isArray(q.textures)||Array.isArray(q.frames)?C.JSONArray(z,U,q):C.JSONHash(z,U,q)};if(Array.isArray(L))for(var N=0;N<L.length;N++)F(Y,N,L[N]);else F(Y,0,L)}this.emit(d.ADD,A,Y),this.emit(d.ADD_KEY+A,Y)}return Y},addRenderTexture:function(A,R){var L=null;return this.checkKey(A)&&(L=this.create(A,R),L.add("__BASE",0,0,0,R.width,R.height),this.emit(d.ADD,A,L),this.emit(d.ADD_KEY+A,L)),L},generate:function(A,R){if(this.checkKey(A)){var L=u.create(this,1,1);return R.canvas=L,g(R),this.addCanvas(A,L)}else return null},createCanvas:function(A,R,L){if(R===void 0&&(R=256),L===void 0&&(L=256),this.checkKey(A)){var Y=u.create(this,R,L,o.CANVAS,!0);return this.addCanvas(A,Y)}return null},addCanvas:function(A,R,L){L===void 0&&(L=!1);var Y=null;return L?Y=new x(this,A,R,R.width,R.height):this.checkKey(A)&&(Y=new x(this,A,R,R.width,R.height),this.list[A]=Y,this.emit(d.ADD,A,Y),this.emit(d.ADD_KEY+A,Y)),Y},addDynamicTexture:function(A,R,L){var Y=null;return typeof A=="string"&&!this.exists(A)?Y=new r(this,A,R,L):(Y=A,A=Y.key),this.checkKey(A)?(this.list[A]=Y,this.emit(d.ADD,A,Y),this.emit(d.ADD_KEY+A,Y)):Y=null,Y},addAtlas:function(A,R,L,Y){return Array.isArray(L.textures)||Array.isArray(L.frames)?this.addAtlasJSONArray(A,R,L,Y):this.addAtlasJSONHash(A,R,L,Y)},addAtlasJSONArray:function(A,R,L,Y){var F=null;if(R instanceof M?(A=R.key,F=R):this.checkKey(A)&&(F=this.create(A,R)),F){if(Array.isArray(L))for(var N=L.length===1,z=0;z<F.source.length;z++){var U=N?L[0]:L[z];C.JSONArray(F,z,U)}else C.JSONArray(F,0,L);Y&&F.setDataSource(Y),this.emit(d.ADD,A,F),this.emit(d.ADD_KEY+A,F)}return F},addAtlasJSONHash:function(A,R,L,Y){var F=null;if(R instanceof M?(A=R.key,F=R):this.checkKey(A)&&(F=this.create(A,R)),F){if(Array.isArray(L))for(var N=0;N<L.length;N++)C.JSONHash(F,N,L[N]);else C.JSONHash(F,0,L);Y&&F.setDataSource(Y),this.emit(d.ADD,A,F),this.emit(d.ADD_KEY+A,F)}return F},addAtlasXML:function(A,R,L,Y){var F=null;return R instanceof M?(A=R.key,F=R):this.checkKey(A)&&(F=this.create(A,R)),F&&(C.AtlasXML(F,0,L),Y&&F.setDataSource(Y),this.emit(d.ADD,A,F),this.emit(d.ADD_KEY+A,F)),F},addUnityAtlas:function(A,R,L,Y){var F=null;return R instanceof M?(A=R.key,F=R):this.checkKey(A)&&(F=this.create(A,R)),F&&(C.UnityYAML(F,0,L),Y&&F.setDataSource(Y),this.emit(d.ADD,A,F),this.emit(d.ADD_KEY+A,F)),F},addSpriteSheet:function(A,R,L,Y){var F=null;if(R instanceof M?(A=R.key,F=R):this.checkKey(A)&&(F=this.create(A,R)),F){var N=F.source[0].width,z=F.source[0].height;C.SpriteSheet(F,0,0,0,N,z,L),Y&&F.setDataSource(Y),this.emit(d.ADD,A,F),this.emit(d.ADD_KEY+A,F)}return F},addSpriteSheetFromAtlas:function(A,R){if(!this.checkKey(A))return null;var L=v(R,"atlas",null),Y=v(R,"frame",null);if(!(!L||!Y)){var F=this.get(L),N=F.get(Y);if(N){var z=N.source.image;z||(z=N.source.glTexture);var U=this.create(A,z);return N.trimmed?C.SpriteSheetFromAtlas(U,N,R):C.SpriteSheet(U,0,N.cutX,N.cutY,N.cutWidth,N.cutHeight,R),this.emit(d.ADD,A,U),this.emit(d.ADD_KEY+A,U),U}}},addUint8Array:function(A,R,L,Y){if(!this.checkKey(A)||R.length/4!==L*Y)return null;var F=this.create(A,R,L,Y);return F.add("__BASE",0,0,0,L,Y),this.emit(d.ADD,A,F),this.emit(d.ADD_KEY+A,F),F},create:function(A,R,L,Y){var F=null;return this.checkKey(A)&&(F=new M(this,A,R,L,Y),this.list[A]=F),F},exists:function(A){return this.list.hasOwnProperty(A)},get:function(A){return A===void 0&&(A="__DEFAULT"),this.list[A]?this.list[A]:A instanceof M?A:A instanceof n?A.texture:this.list.__MISSING},cloneFrame:function(A,R){if(this.list[A])return this.list[A].get(R).clone()},getFrame:function(A,R){if(this.list[A])return this.list[A].get(R)},parseFrame:function(A){if(A){if(typeof A=="string")return this.getFrame(A);if(Array.isArray(A)&&A.length===2)return this.getFrame(A[0],A[1]);if(b(A))return this.getFrame(A.key,A.frame);if(A instanceof M)return A.get();if(A instanceof n)return A}else return},getTextureKeys:function(){var A=[];for(var R in this.list)R!=="__DEFAULT"&&R!=="__MISSING"&&R!=="__WHITE"&&R!=="__NORMAL"&&A.push(R);return A},getPixel:function(A,R,L,Y){var F=this.getFrame(L,Y);if(F){A-=F.x,R-=F.y;var N=F.data.cut;if(A+=N.x,R+=N.y,A>=N.x&&A<N.r&&R>=N.y&&R<N.b){var z=this._tempContext;z.clearRect(0,0,1,1),z.drawImage(F.source.image,A,R,1,1,0,0,1,1);var U=z.getImageData(0,0,1,1);return new h(U.data[0],U.data[1],U.data[2],U.data[3])}}return null},getPixelAlpha:function(A,R,L,Y){var F=this.getFrame(L,Y);if(F){A-=F.x,R-=F.y;var N=F.data.cut;if(A+=N.x,R+=N.y,A>=N.x&&A<N.r&&R>=N.y&&R<N.b){var z=this._tempContext;z.clearRect(0,0,1,1),z.drawImage(F.source.image,A,R,1,1,0,0,1,1);var U=z.getImageData(0,0,1,1);return U.data[3]}}return null},setTexture:function(A,R,L){return this.list[R]&&(A.texture=this.list[R],A.frame=A.texture.get(L)),A},renameTexture:function(A,R){var L=this.get(A);return L&&A!==R?(L.key=R,this.list[R]=L,delete this.list[A],!0):!1},each:function(A,R){for(var L=[null],Y=1;Y<arguments.length;Y++)L.push(arguments[Y]);for(var F in this.list)L[0]=this.list[F],A.apply(R,L)},resetStamp:function(A,R){A===void 0&&(A=1),R===void 0&&(R=16777215);var L=this.stamp;return L.setCrop(),L.setPosition(0),L.setAngle(0),L.setScale(1),L.setAlpha(A),L.setTint(R),L.setTexture("__WHITE"),L},destroy:function(){for(var A in this.list)this.list[A].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,u.remove(this._tempCanvas)}});y.exports=E},11876:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(27919),x=i(83419),c=i(50030),h=i(29795),o=i(82751),r=new x({initialize:function(a,d,n,p,g){g===void 0&&(g=!1);var v=a.manager.game;this.renderer=v.renderer,this.texture=a,this.source=d,this.image=d.compressed?null:d,this.compressionAlgorithm=d.compressed?d.format:null,this.resolution=1,this.width=n||d.naturalWidth||d.videoWidth||d.width||0,this.height=p||d.naturalHeight||d.videoHeight||d.height||0,this.scaleMode=h.DEFAULT,this.isCanvas=d instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&d instanceof HTMLVideoElement,this.isRenderTexture=d.type==="RenderTexture"||d.type==="DynamicTexture",this.isGLTexture=d instanceof o,this.isPowerOf2=c(this.width,this.height),this.glTexture=null,this.flipY=g,this.init(v)},init:function(a){var d=this.renderer;if(d){var n=this.source;if(d.gl){var p=this.image,g=this.flipY,v=this.width,f=this.height,b=this.scaleMode;this.isCanvas?this.glTexture=d.createCanvasTexture(p,!1,g):this.isVideo?this.glTexture=d.createVideoTexture(p,!1,g):this.isRenderTexture?this.glTexture=d.createTextureFromSource(null,v,f,b):this.isGLTexture?this.glTexture=n:this.compressionAlgorithm?this.glTexture=d.createTextureFromSource(n,void 0,void 0,b):n instanceof Uint8Array?this.glTexture=d.createUint8ArrayTexture(n,v,f,b):this.glTexture=d.createTextureFromSource(p,v,f,b)}else this.isRenderTexture&&(this.image=n.canvas)}a.config.antialias||this.setFilter(1)},setFilter:function(a){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,a),this.scaleMode=a},setFlipY:function(a){return a===void 0&&(a=!0),a===this.flipY?this:(this.flipY=a,this.update(),this)},update:function(){var a=this.renderer,d=this.image,n=this.flipY,p=a.gl;p&&this.isCanvas?a.updateCanvasTexture(d,this.glTexture,n):p&&this.isVideo&&a.updateVideoTexture(d,this.glTexture,n)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&u.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});y.exports=r},19673:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={LINEAR:0,NEAREST:1};y.exports=P},44538:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="addtexture"},63486:y=>{/**
* @author       samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="addtexture-"},94851:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="onerror"},29099:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="onload"},8678:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="ready"},86415:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="removetexture"},30879:y=>{/**
* @author       samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="removetexture-"},69442:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={ADD:i(44538),ADD_KEY:i(63486),ERROR:i(94851),LOAD:i(29099),READY:i(8678),REMOVE:i(86415),REMOVE_KEY:i(30879)}},27458:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(79291),x=i(19673),c={CanvasTexture:i(57382),DynamicTexture:i(81320),Events:i(69442),FilterMode:x,Frame:i(4327),Parsers:i(61309),Texture:i(79237),TextureManager:i(17130),TextureSource:i(11876)};c=u(!1,c,x),y.exports=c},89905:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){if(!x.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var c=i.source[u];i.add("__BASE",u,0,0,c.width,c.height);for(var h=x.getElementsByTagName("SubTexture"),o,r=0;r<h.length;r++){var a=h[r].attributes,d=a.name.value,n=parseInt(a.x.value,10),p=parseInt(a.y.value,10),g=parseInt(a.width.value,10),v=parseInt(a.height.value,10);if(o=i.add(d,u,n,p,g,v),a.frameX){var f=Math.abs(parseInt(a.frameX.value,10)),b=Math.abs(parseInt(a.frameY.value,10)),C=parseInt(a.frameWidth.value,10),_=parseInt(a.frameHeight.value,10);o.setTrim(g,v,f,b,C,_)}}return i};y.exports=P},72893:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=i.source[u];return i.add("__BASE",u,0,0,x.width,x.height),i};y.exports=P},4832:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=i.source[u];return i.add("__BASE",u,0,0,x.width,x.height),i};y.exports=P},78566:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(41786),x=function(c,h,o){if(!o.frames&&!o.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=c.source[h];c.add("__BASE",h,0,0,r.width,r.height);for(var a=Array.isArray(o.textures)?o.textures[h].frames:o.frames,d,n=0;n<a.length;n++){var p=a[n];if(d=c.add(p.filename,h,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!d){console.warn("Invalid atlas json, frame already exists: "+p.filename);continue}p.trimmed&&d.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(d.rotated=!0,d.updateUVsInverted());var g=p.anchor||p.pivot;g&&(d.customPivot=!0,d.pivotX=g.x,d.pivotY=g.y),p.scale9Borders&&d.setScale9(p.scale9Borders.x,p.scale9Borders.y,p.scale9Borders.w,p.scale9Borders.h),d.customData=u(p)}for(var v in o)v!=="frames"&&(Array.isArray(o[v])?c.customData[v]=o[v].slice(0):c.customData[v]=o[v]);return c};y.exports=x},39711:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(41786),x=function(c,h,o){if(!o.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=c.source[h];c.add("__BASE",h,0,0,r.width,r.height);var a=o.frames,d;for(var n in a)if(a.hasOwnProperty(n)){var p=a[n];if(d=c.add(n,h,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!d){console.warn("Invalid atlas json, frame already exists: "+n);continue}p.trimmed&&d.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(d.rotated=!0,d.updateUVsInverted());var g=p.anchor||p.pivot;g&&(d.customPivot=!0,d.pivotX=g.x,d.pivotY=g.y),p.scale9Borders&&d.setScale9(p.scale9Borders.x,p.scale9Borders.y,p.scale9Borders.w,p.scale9Borders.h),d.customData=u(p)}for(var v in o)v!=="frames"&&(Array.isArray(o[v])?c.customData[v]=o[v].slice(0):c.customData[v]=o[v]);return c};y.exports=x},31403:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2021 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u=[171,75,84,88,32,49,49,187,13,10,26,10],x,c=new Uint8Array(i,0,12);for(x=0;x<c.length;x++)if(c[x]!==u[x]){console.warn("KTXParser - Invalid file format");return}var h=Uint32Array.BYTES_PER_ELEMENT,o=new DataView(i,12,13*h),r=o.getUint32(0,!0)===67305985,a=o.getUint32(1*h,r);if(a!==0){console.warn("KTXParser - Only compressed formats supported");return}var d=o.getUint32(4*h,r),n=o.getUint32(6*h,r),p=o.getUint32(7*h,r),g=Math.max(1,o.getUint32(11*h,r)),v=o.getUint32(12*h,r),f=new Array(g),b=12+13*4+v,C=n,_=p;for(x=0;x<g;x++){var M=new Int32Array(i,b,1)[0];b+=4,f[x]={data:new Uint8Array(i,b,M),width:C,height:_},C=Math.max(1,C>>1),_=Math.max(1,_>>1),b+=M}return{mipmaps:f,width:n,height:p,internalFormat:d,compressed:!0,generateMipmap:!1}};y.exports=P},82038:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2021 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/function P(R,L,Y,F,N,z,U){return U===void 0&&(U=16),Math.floor((R+Y)/N)*Math.floor((L+F)/z)*U}function i(R,L){return R=Math.max(R,16),L=Math.max(L,8),R*L/4}function u(R,L){return R=Math.max(R,8),L=Math.max(L,8),R*L/2}function x(R,L){return Math.ceil(R/4)*Math.ceil(L/4)*16}function c(R,L){return P(R,L,3,3,4,4,8)}function h(R,L){return P(R,L,3,3,4,4)}function o(R,L){return P(R,L,4,3,5,4)}function r(R,L){return P(R,L,4,4,5,5)}function a(R,L){return P(R,L,5,4,6,5)}function d(R,L){return P(R,L,5,5,6,6)}function n(R,L){return P(R,L,7,4,8,5)}function p(R,L){return P(R,L,7,5,8,6)}function g(R,L){return P(R,L,7,7,8,8)}function v(R,L){return P(R,L,9,4,10,5)}function f(R,L){return P(R,L,9,5,10,6)}function b(R,L){return P(R,L,9,7,10,8)}function C(R,L){return P(R,L,9,9,10,10)}function _(R,L){return P(R,L,11,9,12,10)}function M(R,L){return P(R,L,11,11,12,12)}var E={0:{sizeFunc:i,glFormat:[35841]},1:{sizeFunc:i,glFormat:[35843]},2:{sizeFunc:u,glFormat:[35840]},3:{sizeFunc:u,glFormat:[35842]},6:{sizeFunc:c,glFormat:[36196]},7:{sizeFunc:c,glFormat:[33776,35916]},8:{sizeFunc:h,glFormat:[33777,35917]},9:{sizeFunc:h,glFormat:[33778,35918]},11:{sizeFunc:h,glFormat:[33779,35919]},14:{sizeFunc:x,glFormat:[36494,36495]},15:{sizeFunc:x,glFormat:[36492,36493]},22:{sizeFunc:c,glFormat:[37492,37493]},23:{sizeFunc:h,glFormat:[37496,37497]},24:{sizeFunc:c,glFormat:[37494,37495]},25:{sizeFunc:c,glFormat:[37488]},26:{sizeFunc:h,glFormat:[37490]},27:{sizeFunc:h,glFormat:[37808,37840]},28:{sizeFunc:o,glFormat:[37809,37841]},29:{sizeFunc:r,glFormat:[37810,37842]},30:{sizeFunc:a,glFormat:[37811,37843]},31:{sizeFunc:d,glFormat:[37812,37844]},32:{sizeFunc:n,glFormat:[37813,37845]},33:{sizeFunc:p,glFormat:[37814,37846]},34:{sizeFunc:g,glFormat:[37815,37847]},35:{sizeFunc:v,glFormat:[37816,37848]},36:{sizeFunc:f,glFormat:[37817,37849]},37:{sizeFunc:b,glFormat:[37818,37850]},38:{sizeFunc:C,glFormat:[37819,37851]},39:{sizeFunc:_,glFormat:[37820,37852]},40:{sizeFunc:M,glFormat:[37821,37853]}},A=function(R){for(var L=new Uint32Array(R,0,13),Y=L[0],F=Y===55727696,N=F?L[2]:L[3],z=L[4],U=E[N].glFormat[z],q=E[N].sizeFunc,Q=L[11],K=L[7],et=L[6],H=52+L[12],J=new Uint8Array(R,H),X=new Array(Q),Z=0,$=K,it=et,nt=0;nt<Q;nt++){var at=q($,it);X[nt]={data:new Uint8Array(J.buffer,J.byteOffset+Z,at),width:$,height:it},$=Math.max(1,$>>1),it=Math.max(1,it>>1),Z+=at}return{mipmaps:X,width:K,height:et,internalFormat:U,compressed:!0,generateMipmap:!1}};y.exports=A},75549:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(95540),x=function(c,h,o,r,a,d,n){var p=u(n,"frameWidth",null),g=u(n,"frameHeight",p);if(p===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var v=c.source[h];c.add("__BASE",h,0,0,v.width,v.height);var f=u(n,"startFrame",0),b=u(n,"endFrame",-1),C=u(n,"margin",0),_=u(n,"spacing",0),M=Math.floor((a-C+_)/(p+_)),E=Math.floor((d-C+_)/(g+_)),A=M*E;A===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",c.key),(f>A||f<-A)&&(f=0),f<0&&(f=A+f),(b===-1||b>A||b<f)&&(b=A);for(var R=C,L=C,Y=0,F=0,N=0,z=0;z<A;z++){Y=0,F=0;var U=R+p,q=L+g;U>a&&(Y=U-a),q>d&&(F=q-d),z>=f&&z<=b&&(c.add(N,h,o+R,r+L,p-Y,g-F),N++),R+=p+_,R+p>a&&(R=C,L+=g+_)}return c};y.exports=x},47534:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(95540),x=function(c,h,o){var r=u(o,"frameWidth",null),a=u(o,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var d=c.source[0];c.add("__BASE",0,0,0,d.width,d.height),u(o,"startFrame",0),u(o,"endFrame",-1);for(var n=u(o,"margin",0),p=u(o,"spacing",0),g=h.cutX,v=h.cutY,f=h.cutWidth,b=h.cutHeight,C=h.realWidth,_=h.realHeight,M=Math.floor((C-n+p)/(r+p)),E=Math.floor((_-n+p)/(a+p)),A=h.x,R=r-A,L=r-(C-f-A),Y=h.y,F=a-Y,N=a-(_-b-Y),z,U=n,q=n,Q=0,K=0,et=0;et<E;et++){for(var H=et===0,J=et===E-1,X=0;X<M;X++){var Z=X===0,$=X===M-1;if(z=c.add(Q,K,g+U,v+q,r,a),Z||H||$||J){var it=Z?A:0,nt=H?Y:0,at=0,ht=0;Z&&(at+=r-R),$&&(at+=r-L),H&&(ht+=a-F),J&&(ht+=a-N);var dt=r-at,vt=a-ht;z.cutWidth=dt,z.cutHeight=vt,z.setTrim(r,a,it,nt,dt,vt)}U+=p,Z?U+=R:$?U+=L:U+=r,Q++}U=n,q+=p,H?q+=F:J?q+=N:q+=a}return c};y.exports=x},86147:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=0,i=function(x,c,h,o){var r=P-o.y-o.height;x.add(h,c,o.x,r,o.width,o.height)},u=function(x,c,h){var o=x.source[c];x.add("__BASE",c,0,0,o.width,o.height),P=o.height;for(var r=h.split(`
`),a=/^[ ]*(- )*(\w+)+[: ]+(.*)/,d="",n="",p={x:0,y:0,width:0,height:0},g=0;g<r.length;g++){var v=r[g].match(a);if(v){var f=v[1]==="- ",b=v[2],C=v[3];if(f&&(n!==d&&(i(x,c,n,p),d=n),p={x:0,y:0,width:0,height:0}),b==="name"){n=C;continue}switch(b){case"x":case"y":case"width":case"height":p[b]=parseInt(C,10);break}}}return n!==d&&i(x,c,n,p),x};y.exports=u},55222:(y,P,i)=>{/**
* @author       Ben Richards <benjamindrichards@gmail.com>
* @copyright    2024 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(50030),x=function(d){for(var n=d.mipmaps,p=1;p<n.length;p++){var g=n[p].width,v=n[p].height;if(!u(g,v))return console.warn("Mip level "+p+" is not a power-of-two size: "+g+"x"+v),!1}var f=a[d.internalFormat];return f?f(d):(console.warn("No format checker found for internal format "+d.internalFormat+". Assuming valid."),!0)};function c(d){for(var n=d.mipmaps,p=0;p<n.length;p++){var g=n[p].width,v=n[p].height;if((g<<p)%4!==0||(v<<p)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+p+" is "+g+"x"+v),!1}return!0}function h(){return!0}function o(d){var n=d.mipmaps,p=n[0];return u(p.width,p.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+p.width+"x"+p.height),!1)}function r(d){var n=d.mipmaps,p=n[0];return p.width%4!==0||p.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+p.width+"x"+p.height+" pixels"),!1):!0}var a={37488:h,37489:h,37490:h,37491:h,37492:h,37493:h,37494:h,37495:h,37496:h,37497:h,36196:h,37808:h,37809:h,37810:h,37811:h,37812:h,37813:h,37814:h,37815:h,37816:h,37817:h,37818:h,37819:h,37820:h,37821:h,37840:h,37841:h,37842:h,37843:h,37844:h,37845:h,37846:h,37847:h,37848:h,37849:h,37850:h,37851:h,37852:h,37853:h,36492:c,36493:c,36494:c,36495:c,36283:c,36284:c,36285:c,36286:c,35840:o,35841:o,35842:o,35843:o,33776:c,33777:c,33778:c,33779:c,35916:r,35917:r,35918:r,35919:r};y.exports=x},61309:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={AtlasXML:i(89905),Canvas:i(72893),Image:i(4832),JSONArray:i(78566),JSONHash:i(39711),KTXParser:i(31403),PVRParser:i(82038),SpriteSheet:i(75549),SpriteSheetFromAtlas:i(47534),UnityYAML:i(86147)}},80341:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},16536:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c,h,o,r,a,d,n){(o===void 0||o<=0)&&(o=32),(r===void 0||r<=0)&&(r=32),a===void 0&&(a=0),d===void 0&&(d=0),this.name=c,this.firstgid=h|0,this.imageWidth=o|0,this.imageHeight=r|0,this.imageMargin=a|0,this.imageSpacing=d|0,this.properties=n||{},this.images=[],this.total=0},containsImageIndex:function(c){return c>=this.firstgid&&c<this.firstgid+this.total},addImage:function(c,h,o,r){return this.images.push({gid:c,image:h,width:o,height:r}),this.total++,this}});y.exports=x},27462:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2021 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=new u({initialize:function(c){if(this.gids=[],c!==void 0)for(var h=0;h<c.length;++h)for(var o=c[h],r=0;r<o.total;++r)this.gids[o.firstgid+r]=o;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(c){this.gids=c?this._gids:void 0}},getTypeIncludingTile:function(c){if(c.type!==void 0&&c.type!=="")return c.type;if(!(!this.gids||c.gid===void 0)){var h=this.gids[c.gid];if(h){var o=h.getTileData(c.gid);if(o)return o.type}}},setTextureAndFrame:function(c,h,o,r){if(h===null&&this.gids&&r.gid!==void 0){var a=this.gids[r.gid];a&&(h===null&&a.image!==void 0&&(h=a.image.key),o===null&&(o=r.gid-a.firstgid),c.scene.textures.getFrame(h,o)||(h=null,o=null))}c.setTexture(h,o)},setPropertiesFromTiledObject:function(c,h){if(this.gids!==void 0&&h.gid!==void 0){var o=this.gids[h.gid];o!==void 0&&this.setFromJSON(c,o.getTileProperties(h.gid))}this.setFromJSON(c,h.properties)},setFromJSON:function(c,h){if(h){if(Array.isArray(h)){for(var o=0;o<h.length;o++){var r=h[o];c[r.name]!==void 0?c[r.name]=r.value:c.setData(r.name,r.value)}return}for(var a in h)c[a]!==void 0?c[a]=h[a]:c.setData(a,h[a])}}});y.exports=x},31989:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(80341),x=i(87010),c=i(46177),h=i(49075),o=function(r,a,d,n,p,g,v,f){d===void 0&&(d=32),n===void 0&&(n=32),p===void 0&&(p=10),g===void 0&&(g=10),f===void 0&&(f=!1);var b=null;if(Array.isArray(v)){var C=a!==void 0?a:"map";b=c(C,u.ARRAY_2D,v,d,n,f)}else if(a!==void 0){var _=r.cache.tilemap.get(a);_?b=c(a,_.format,_.data,d,n,f):console.warn("No map data found for key "+a)}return b===null&&(b=new x({tileWidth:d,tileHeight:n,width:p,height:g})),new h(r,b)};y.exports=o},23029:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(31401),c=i(91907),h=i(62644),o=i(93232),r=new u({Mixins:[x.AlphaSingle,x.Flip,x.Visible],initialize:function(a,d,n,p,g,v,f,b){this.layer=a,this.index=d,this.x=n,this.y=p,this.width=g,this.height=v,this.right,this.bottom,this.baseWidth=f!==void 0?f:g,this.baseHeight=b!==void 0?b:v,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(a,d){return!(a<this.pixelX||d<this.pixelY||a>this.right||d>this.bottom)},copy:function(a){return this.index=a.index,this.alpha=a.alpha,this.properties=h(a.properties),this.visible=a.visible,this.setFlip(a.flipX,a.flipY),this.tint=a.tint,this.rotation=a.rotation,this.collideUp=a.collideUp,this.collideDown=a.collideDown,this.collideLeft=a.collideLeft,this.collideRight=a.collideRight,this.collisionCallback=a.collisionCallback,this.collisionCallbackContext=a.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(a){var d=this.tilemapLayer;if(d){var n=d.tileToWorldXY(this.x,this.y,void 0,a);return n.x}return this.x*this.baseWidth},getRight:function(a){var d=this.tilemapLayer;return d?this.getLeft(a)+this.width*d.scaleX:this.getLeft(a)+this.width},getTop:function(a){var d=this.tilemapLayer;if(d){var n=d.tileToWorldXY(this.x,this.y,void 0,a);return n.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(a){var d=this.tilemapLayer;return d?this.getTop(a)+this.height*d.scaleY:this.getTop(a)+this.height},getBounds:function(a,d){return d===void 0&&(d=new o),d.x=this.getLeft(a),d.y=this.getTop(a),d.width=this.getRight(a)-d.x,d.height=this.getBottom(a)-d.y,d},getCenterX:function(a){return(this.getLeft(a)+this.getRight(a))/2},getCenterY:function(a){return(this.getTop(a)+this.getBottom(a))/2},intersects:function(a,d,n,p){return!(n<=this.pixelX||p<=this.pixelY||a>=this.right||d>=this.bottom)},isInteresting:function(a,d){return a&&d?this.canCollide||this.hasInterestingFace:a?this.collides:d?this.hasInterestingFace:!1},resetCollision:function(a){if(a===void 0&&(a=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,a){var d=this.tilemapLayer;d&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(a,d,n,p,g){if(d===void 0&&(d=a),n===void 0&&(n=a),p===void 0&&(p=a),g===void 0&&(g=!0),this.collideLeft=a,this.collideRight=d,this.collideUp=n,this.collideDown=p,this.faceLeft=a,this.faceRight=d,this.faceTop=n,this.faceBottom=p,g){var v=this.tilemapLayer;v&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(a,d){return a===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=a,this.collisionCallbackContext=d),this},setSize:function(a,d,n,p){return a!==void 0&&(this.width=a),d!==void 0&&(this.height=d),n!==void 0&&(this.baseWidth=n),p!==void 0&&(this.baseHeight=p),this.updatePixelXY(),this},updatePixelXY:function(){var a=this.layer.orientation;if(a===c.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(a===c.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(a===c.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(a===c.HEXAGONAL){var d=this.layer.staggerAxis,n=this.layer.staggerIndex,p=this.layer.hexSideLength,g,v;d==="y"?(v=(this.baseHeight-p)/2+p,n==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*v):d==="x"&&(g=(this.baseWidth-p)/2+p,this.pixelX=this.x*g,n==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var a=this.layer.tilemapLayer;if(a){var d=a.gidMap[this.index];if(d)return d}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var a=this.tilemapLayer;return a?a.tilemap:null}}});y.exports=r},49075:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(84101),x=i(83419),c=i(39506),h=i(80341),o=i(95540),r=i(14977),a=i(27462),d=i(91907),n=i(36305),p=i(19133),g=i(68287),v=i(23029),f=i(81086),b=i(20442),C=i(33629),_=new x({initialize:function(M,E){this.scene=M,this.tileWidth=E.tileWidth,this.tileHeight=E.tileHeight,this.width=E.width,this.height=E.height,this.orientation=E.orientation,this.renderOrder=E.renderOrder,this.format=E.format,this.version=E.version,this.properties=E.properties,this.widthInPixels=E.widthInPixels,this.heightInPixels=E.heightInPixels,this.imageCollections=E.imageCollections,this.images=E.images,this.layers=E.layers,this.tiles=E.tiles,this.tilesets=E.tilesets,this.objects=E.objects,this.currentLayerIndex=0,this.hexSideLength=E.hexSideLength;var A=this.orientation;this._convert={WorldToTileXY:f.GetWorldToTileXYFunction(A),WorldToTileX:f.GetWorldToTileXFunction(A),WorldToTileY:f.GetWorldToTileYFunction(A),TileToWorldXY:f.GetTileToWorldXYFunction(A),TileToWorldX:f.GetTileToWorldXFunction(A),TileToWorldY:f.GetTileToWorldYFunction(A),GetTileCorners:f.GetTileCornersFunction(A)}},setRenderOrder:function(M){var E=["right-down","left-down","right-up","left-up"];return typeof M=="number"&&(M=E[M]),E.indexOf(M)>-1&&(this.renderOrder=M),this},addTilesetImage:function(M,E,A,R,L,Y,F,N){if(M===void 0)return null;E==null&&(E=M);var z=this.scene.sys.textures;if(!z.exists(E))return console.warn('Texture key "%s" not found',E),null;var U=z.get(E),q=this.getTilesetIndex(M);if(q===null&&this.format===h.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',M,this.tilesets),null;var Q=this.tilesets[q];return Q?((A||R)&&Q.setTileSize(A,R),(L||Y)&&Q.setSpacing(L,Y),Q.setImage(U),Q):(A===void 0&&(A=this.tileWidth),R===void 0&&(R=this.tileHeight),L===void 0&&(L=0),Y===void 0&&(Y=0),F===void 0&&(F=0),N===void 0&&(N={x:0,y:0}),Q=new C(M,F,A,R,L,Y,void 0,void 0,N),Q.setImage(U),this.tilesets.push(Q),this.tiles=u(this),Q)},copy:function(M,E,A,R,L,Y,F,N){return N=this.getLayer(N),N!==null?(f.Copy(M,E,A,R,L,Y,F,N),this):null},createBlankLayer:function(M,E,A,R,L,Y,F,N){A===void 0&&(A=0),R===void 0&&(R=0),L===void 0&&(L=this.width),Y===void 0&&(Y=this.height),F===void 0&&(F=this.tileWidth),N===void 0&&(N=this.tileHeight);var z=this.getLayerIndex(M);if(z!==null)return console.warn("Invalid Tilemap Layer ID: "+M),null;for(var U=new r({name:M,tileWidth:F,tileHeight:N,width:L,height:Y,orientation:this.orientation,hexSideLength:this.hexSideLength}),q,Q=0;Q<Y;Q++){q=[];for(var K=0;K<L;K++)q.push(new v(U,-1,K,Q,F,N,this.tileWidth,this.tileHeight));U.data.push(q)}this.layers.push(U),this.currentLayerIndex=this.layers.length-1;var et=new b(this.scene,this,this.currentLayerIndex,E,A,R);return et.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(et),et},createLayer:function(M,E,A,R){var L=this.getLayerIndex(M);if(L===null)return console.warn("Invalid Tilemap Layer ID: "+M),typeof M=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var Y=this.layers[L];if(Y.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+M),null;this.currentLayerIndex=L,A===void 0&&(A=Y.x),R===void 0&&(R=Y.y);var F=new b(this.scene,this,L,E,A,R);return F.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(F),F},createFromObjects:function(M,E,A){A===void 0&&(A=!0);var R=[],L=this.getObjectLayer(M);if(!L)return console.warn("createFromObjects: Invalid objectLayerName given: "+M),R;var Y=new a(A?this.tilesets:void 0);Array.isArray(E)||(E=[E]);for(var F=L.objects,N=0;N<E.length;N++){var z=E[N],U=o(z,"id",null),q=o(z,"gid",null),Q=o(z,"name",null),K=o(z,"type",null);Y.enabled=!o(z,"ignoreTileset",null);for(var et,H=[],J=0;J<F.length;J++)et=F[J],(U===null&&q===null&&Q===null&&K===null||U!==null&&et.id===U||q!==null&&et.gid===q||Q!==null&&et.name===Q||K!==null&&Y.getTypeIncludingTile(et)===K)&&H.push(et);for(var X=o(z,"classType",g),Z=o(z,"scene",this.scene),$=o(z,"container",null),it=o(z,"key",null),nt=o(z,"frame",null),at=0;at<H.length;at++){et=H[at];var ht=new X(Z);if(ht.setName(et.name),ht.setPosition(et.x,et.y),Y.setTextureAndFrame(ht,it,nt,et),et.width&&(ht.displayWidth=et.width),et.height&&(ht.displayHeight=et.height),this.orientation===d.ISOMETRIC){var dt=this.tileWidth/this.tileHeight,vt={x:ht.x-ht.y,y:(ht.x+ht.y)/dt};ht.x=vt.x,ht.y=vt.y}var ft={x:ht.originX*et.width,y:(ht.originY-(et.gid?1:0))*et.height};if(et.rotation){var gt=c(et.rotation);n(ft,gt),ht.rotation=gt}ht.x+=ft.x,ht.y+=ft.y,(et.flippedHorizontal!==void 0||et.flippedVertical!==void 0)&&ht.setFlip(et.flippedHorizontal,et.flippedVertical),et.visible||(ht.visible=!1),Y.setPropertiesFromTiledObject(ht,et),$?$.add(ht):Z.add.existing(ht),R.push(ht)}}return R},createFromTiles:function(M,E,A,R,L,Y){return Y=this.getLayer(Y),Y===null?null:f.CreateFromTiles(M,E,A,R,L,Y)},fill:function(M,E,A,R,L,Y,F){return Y===void 0&&(Y=!0),F=this.getLayer(F),F===null?null:(f.Fill(M,E,A,R,L,Y,F),this)},filterObjects:function(M,E,A){if(typeof M=="string"){var R=M;if(M=this.getObjectLayer(M),!M)return console.warn("No object layer found with the name: "+R),null}return M.objects.filter(E,A)},filterTiles:function(M,E,A,R,L,Y,F,N){return N=this.getLayer(N),N===null?null:f.FilterTiles(M,E,A,R,L,Y,F,N)},findByIndex:function(M,E,A,R){return R=this.getLayer(R),R===null?null:f.FindByIndex(M,E,A,R)},findObject:function(M,E,A){if(typeof M=="string"){var R=M;if(M=this.getObjectLayer(M),!M)return console.warn("No object layer found with the name: "+R),null}return M.objects.find(E,A)||null},findTile:function(M,E,A,R,L,Y,F,N){return N=this.getLayer(N),N===null?null:f.FindTile(M,E,A,R,L,Y,F,N)},forEachTile:function(M,E,A,R,L,Y,F,N){return N=this.getLayer(N),N===null?null:(f.ForEachTile(M,E,A,R,L,Y,F,N),this)},getImageIndex:function(M){return this.getIndex(this.images,M)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(M){return M.name})},getIndex:function(M,E){for(var A=0;A<M.length;A++)if(M[A].name===E)return A;return null},getLayer:function(M){var E=this.getLayerIndex(M);return E!==null?this.layers[E]:null},getObjectLayer:function(M){var E=this.getIndex(this.objects,M);return E!==null?this.objects[E]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(M){return M.name})},getLayerIndex:function(M){return M===void 0?this.currentLayerIndex:typeof M=="string"?this.getLayerIndexByName(M):typeof M=="number"&&M<this.layers.length?M:M instanceof b&&M.tilemap===this?M.layerIndex:null},getLayerIndexByName:function(M){return this.getIndex(this.layers,M)},getTileAt:function(M,E,A,R){return R=this.getLayer(R),R===null?null:f.GetTileAt(M,E,A,R)},getTileAtWorldXY:function(M,E,A,R,L){return L=this.getLayer(L),L===null?null:f.GetTileAtWorldXY(M,E,A,R,L)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(M){return M.name})},getTilesWithin:function(M,E,A,R,L,Y){return Y=this.getLayer(Y),Y===null?null:f.GetTilesWithin(M,E,A,R,L,Y)},getTilesWithinShape:function(M,E,A,R){return R=this.getLayer(R),R===null?null:f.GetTilesWithinShape(M,E,A,R)},getTilesWithinWorldXY:function(M,E,A,R,L,Y,F){return F=this.getLayer(F),F===null?null:f.GetTilesWithinWorldXY(M,E,A,R,L,Y,F)},getTileset:function(M){var E=this.getIndex(this.tilesets,M);return E!==null?this.tilesets[E]:null},getTilesetIndex:function(M){return this.getIndex(this.tilesets,M)},hasTileAt:function(M,E,A){return A=this.getLayer(A),A===null?null:f.HasTileAt(M,E,A)},hasTileAtWorldXY:function(M,E,A,R){return R=this.getLayer(R),R===null?null:f.HasTileAtWorldXY(M,E,A,R)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(M){this.setLayer(M)}},putTileAt:function(M,E,A,R,L){return R===void 0&&(R=!0),L=this.getLayer(L),L===null?null:f.PutTileAt(M,E,A,R,L)},putTileAtWorldXY:function(M,E,A,R,L,Y){return R===void 0&&(R=!0),Y=this.getLayer(Y),Y===null?null:f.PutTileAtWorldXY(M,E,A,R,L,Y)},putTilesAt:function(M,E,A,R,L){return R===void 0&&(R=!0),L=this.getLayer(L),L===null?null:(f.PutTilesAt(M,E,A,R,L),this)},randomize:function(M,E,A,R,L,Y){return Y=this.getLayer(Y),Y===null?null:(f.Randomize(M,E,A,R,L,Y),this)},calculateFacesAt:function(M,E,A){return A=this.getLayer(A),A===null?null:(f.CalculateFacesAt(M,E,A),this)},calculateFacesWithin:function(M,E,A,R,L){return L=this.getLayer(L),L===null?null:(f.CalculateFacesWithin(M,E,A,R,L),this)},removeLayer:function(M){var E=this.getLayerIndex(M);if(E!==null){p(this.layers,E);for(var A=E;A<this.layers.length;A++)this.layers[A].tilemapLayer&&this.layers[A].tilemapLayer.layerIndex--;return this.currentLayerIndex===E&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(M){var E=this.getLayerIndex(M);return E!==null?(M=this.layers[E],M.tilemapLayer.destroy(),p(this.layers,E),this.currentLayerIndex===E&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var M=this.layers,E=0;E<M.length;E++)M[E].tilemapLayer&&M[E].tilemapLayer.destroy(!1);return M.length=0,this.currentLayerIndex=0,this},removeTile:function(M,E,A){E===void 0&&(E=-1),A===void 0&&(A=!0);var R=[];Array.isArray(M)||(M=[M]);for(var L=0;L<M.length;L++){var Y=M[L];R.push(this.removeTileAt(Y.x,Y.y,!0,A,Y.tilemapLayer)),E>-1&&this.putTileAt(E,Y.x,Y.y,A,Y.tilemapLayer)}return R},removeTileAt:function(M,E,A,R,L){return A===void 0&&(A=!0),R===void 0&&(R=!0),L=this.getLayer(L),L===null?null:f.RemoveTileAt(M,E,A,R,L)},removeTileAtWorldXY:function(M,E,A,R,L,Y){return A===void 0&&(A=!0),R===void 0&&(R=!0),Y=this.getLayer(Y),Y===null?null:f.RemoveTileAtWorldXY(M,E,A,R,L,Y)},renderDebug:function(M,E,A){return A=this.getLayer(A),A===null?null:(this.orientation===d.ORTHOGONAL&&f.RenderDebug(M,E,A),this)},renderDebugFull:function(M,E){for(var A=this.layers,R=0;R<A.length;R++)f.RenderDebug(M,E,A[R]);return this},replaceByIndex:function(M,E,A,R,L,Y,F){return F=this.getLayer(F),F===null?null:(f.ReplaceByIndex(M,E,A,R,L,Y,F),this)},setCollision:function(M,E,A,R,L){return E===void 0&&(E=!0),A===void 0&&(A=!0),L===void 0&&(L=!0),R=this.getLayer(R),R===null?null:(f.SetCollision(M,E,A,R,L),this)},setCollisionBetween:function(M,E,A,R,L){return A===void 0&&(A=!0),R===void 0&&(R=!0),L=this.getLayer(L),L===null?null:(f.SetCollisionBetween(M,E,A,R,L),this)},setCollisionByProperty:function(M,E,A,R){return E===void 0&&(E=!0),A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:(f.SetCollisionByProperty(M,E,A,R),this)},setCollisionByExclusion:function(M,E,A,R){return E===void 0&&(E=!0),A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:(f.SetCollisionByExclusion(M,E,A,R),this)},setCollisionFromCollisionGroup:function(M,E,A){return M===void 0&&(M=!0),E===void 0&&(E=!0),A=this.getLayer(A),A===null?null:(f.SetCollisionFromCollisionGroup(M,E,A),this)},setTileIndexCallback:function(M,E,A,R){return R=this.getLayer(R),R===null?null:(f.SetTileIndexCallback(M,E,A,R),this)},setTileLocationCallback:function(M,E,A,R,L,Y,F){return F=this.getLayer(F),F===null?null:(f.SetTileLocationCallback(M,E,A,R,L,Y,F),this)},setLayer:function(M){var E=this.getLayerIndex(M);return E!==null&&(this.currentLayerIndex=E),this},setBaseTileSize:function(M,E){this.tileWidth=M,this.tileHeight=E,this.widthInPixels=this.width*M,this.heightInPixels=this.height*E;for(var A=0;A<this.layers.length;A++){this.layers[A].baseTileWidth=M,this.layers[A].baseTileHeight=E;for(var R=this.layers[A].data,L=this.layers[A].width,Y=this.layers[A].height,F=0;F<Y;F++)for(var N=0;N<L;N++){var z=R[F][N];z!==null&&z.setSize(void 0,void 0,M,E)}}return this},setLayerTileSize:function(M,E,A){if(A=this.getLayer(A),A===null)return this;A.tileWidth=M,A.tileHeight=E;for(var R=A.data,L=A.width,Y=A.height,F=0;F<Y;F++)for(var N=0;N<L;N++){var z=R[F][N];z!==null&&z.setSize(M,E)}return this},shuffle:function(M,E,A,R,L){return L=this.getLayer(L),L===null?null:(f.Shuffle(M,E,A,R,L),this)},swapByIndex:function(M,E,A,R,L,Y,F){return F=this.getLayer(F),F===null?null:(f.SwapByIndex(M,E,A,R,L,Y,F),this)},tileToWorldX:function(M,E,A){return A=this.getLayer(A),A===null?null:this._convert.TileToWorldX(M,E,A)},tileToWorldY:function(M,E,A){return A=this.getLayer(A),A===null?null:this._convert.TileToWorldY(M,E,A)},tileToWorldXY:function(M,E,A,R,L){return L=this.getLayer(L),L===null?null:this._convert.TileToWorldXY(M,E,A,R,L)},getTileCorners:function(M,E,A,R){return R=this.getLayer(R),R===null?null:this._convert.GetTileCorners(M,E,A,R)},weightedRandomize:function(M,E,A,R,L,Y){return Y=this.getLayer(Y),Y===null?null:(f.WeightedRandomize(E,A,R,L,M,Y),this)},worldToTileX:function(M,E,A,R){return R=this.getLayer(R),R===null?null:this._convert.WorldToTileX(M,E,A,R)},worldToTileY:function(M,E,A,R){return R=this.getLayer(R),R===null?null:this._convert.WorldToTileY(M,E,A,R)},worldToTileXY:function(M,E,A,R,L,Y){return Y=this.getLayer(Y),Y===null?null:this._convert.WorldToTileXY(M,E,A,R,L,Y)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});y.exports=_},45939:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(44603),x=i(31989);u.register("tilemap",function(c){var h=c!==void 0?c:{};return x(this.scene,h.key,h.tileWidth,h.tileHeight,h.width,h.height,h.data,h.insertNull)})},46029:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(39429),x=i(31989);u.register("tilemap",function(c,h,o,r,a,d,n){return c===null&&(c=void 0),h===null&&(h=void 0),o===null&&(o=void 0),r===null&&(r=void 0),a===null&&(a=void 0),x(this.scene,c,h,o,r,a,d,n)})},20442:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(78389),c=i(31401),h=i(95643),o=i(81086),r=i(19218),a=i(26099),d=new u({Extends:h,Mixins:[c.Alpha,c.BlendMode,c.ComputedSize,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.Transform,c.Visible,c.ScrollFactor,x,r],initialize:function(n,p,g,v,f,b){h.call(this,n,"TilemapLayer"),this.isTilemap=!0,this.tilemap=p,this.layerIndex=g,this.layer=p.layers[g],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=o.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new a,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(v),this.setAlpha(this.layer.alpha),this.setPosition(f,b),this.setOrigin(0,0),this.setSize(p.tileWidth*this.layer.width,p.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(n){var p=[],g=[],v=this.tilemap;Array.isArray(n)||(n=[n]);for(var f=0;f<n.length;f++){var b=n[f];if(typeof b=="string"&&(b=v.getTileset(b)),b){g.push(b);for(var C=b.firstgid,_=0;_<b.total;_++)p[C+_]=b}}this.gidMap=p,this.tileset=g},setRenderOrder:function(n){var p=["right-down","left-down","right-up","left-up"];return typeof n=="string"&&(n=p.indexOf(n)),n>=0&&n<4&&(this._renderOrder=n),this},calculateFacesAt:function(n,p){return o.CalculateFacesAt(n,p,this.layer),this},calculateFacesWithin:function(n,p,g,v){return o.CalculateFacesWithin(n,p,g,v,this.layer),this},createFromTiles:function(n,p,g,v,f){return o.CreateFromTiles(n,p,g,v,f,this.layer)},cull:function(n){return this.cullCallback(this.layer,n,this.culledTiles,this._renderOrder)},copy:function(n,p,g,v,f,b,C){return o.Copy(n,p,g,v,f,b,C,this.layer),this},fill:function(n,p,g,v,f,b){return o.Fill(n,p,g,v,f,b,this.layer),this},filterTiles:function(n,p,g,v,f,b,C){return o.FilterTiles(n,p,g,v,f,b,C,this.layer)},findByIndex:function(n,p,g){return o.FindByIndex(n,p,g,this.layer)},findTile:function(n,p,g,v,f,b,C){return o.FindTile(n,p,g,v,f,b,C,this.layer)},forEachTile:function(n,p,g,v,f,b,C){return o.ForEachTile(n,p,g,v,f,b,C,this.layer),this},setTint:function(n,p,g,v,f,b){n===void 0&&(n=16777215);var C=function(_){_.tint=n,_.tintFill=!1};return this.forEachTile(C,this,p,g,v,f,b)},setTintFill:function(n,p,g,v,f,b){n===void 0&&(n=16777215);var C=function(_){_.tint=n,_.tintFill=!0};return this.forEachTile(C,this,p,g,v,f,b)},getTileAt:function(n,p,g){return o.GetTileAt(n,p,g,this.layer)},getTileAtWorldXY:function(n,p,g,v){return o.GetTileAtWorldXY(n,p,g,v,this.layer)},getIsoTileAtWorldXY:function(n,p,g,v,f){g===void 0&&(g=!0);var b=this.tempVec;return o.IsometricWorldToTileXY(n,p,!0,b,f,this.layer,g),this.getTileAt(b.x,b.y,v)},getTilesWithin:function(n,p,g,v,f){return o.GetTilesWithin(n,p,g,v,f,this.layer)},getTilesWithinShape:function(n,p,g){return o.GetTilesWithinShape(n,p,g,this.layer)},getTilesWithinWorldXY:function(n,p,g,v,f,b){return o.GetTilesWithinWorldXY(n,p,g,v,f,b,this.layer)},hasTileAt:function(n,p){return o.HasTileAt(n,p,this.layer)},hasTileAtWorldXY:function(n,p,g){return o.HasTileAtWorldXY(n,p,g,this.layer)},putTileAt:function(n,p,g,v){return o.PutTileAt(n,p,g,v,this.layer)},putTileAtWorldXY:function(n,p,g,v,f){return o.PutTileAtWorldXY(n,p,g,v,f,this.layer)},putTilesAt:function(n,p,g,v){return o.PutTilesAt(n,p,g,v,this.layer),this},randomize:function(n,p,g,v,f){return o.Randomize(n,p,g,v,f,this.layer),this},removeTileAt:function(n,p,g,v){return o.RemoveTileAt(n,p,g,v,this.layer)},removeTileAtWorldXY:function(n,p,g,v,f){return o.RemoveTileAtWorldXY(n,p,g,v,f,this.layer)},renderDebug:function(n,p){return o.RenderDebug(n,p,this.layer),this},replaceByIndex:function(n,p,g,v,f,b){return o.ReplaceByIndex(n,p,g,v,f,b,this.layer),this},setSkipCull:function(n){return n===void 0&&(n=!0),this.skipCull=n,this},setCullPadding:function(n,p){return n===void 0&&(n=1),p===void 0&&(p=1),this.cullPaddingX=n,this.cullPaddingY=p,this},setCollision:function(n,p,g,v){return o.SetCollision(n,p,g,this.layer,v),this},setCollisionBetween:function(n,p,g,v){return o.SetCollisionBetween(n,p,g,v,this.layer),this},setCollisionByProperty:function(n,p,g){return o.SetCollisionByProperty(n,p,g,this.layer),this},setCollisionByExclusion:function(n,p,g){return o.SetCollisionByExclusion(n,p,g,this.layer),this},setCollisionFromCollisionGroup:function(n,p){return o.SetCollisionFromCollisionGroup(n,p,this.layer),this},setTileIndexCallback:function(n,p,g){return o.SetTileIndexCallback(n,p,g,this.layer),this},setTileLocationCallback:function(n,p,g,v,f,b){return o.SetTileLocationCallback(n,p,g,v,f,b,this.layer),this},shuffle:function(n,p,g,v){return o.Shuffle(n,p,g,v,this.layer),this},swapByIndex:function(n,p,g,v,f,b){return o.SwapByIndex(n,p,g,v,f,b,this.layer),this},tileToWorldX:function(n,p){return this.tilemap.tileToWorldX(n,p,this)},tileToWorldY:function(n,p){return this.tilemap.tileToWorldY(n,p,this)},tileToWorldXY:function(n,p,g,v){return this.tilemap.tileToWorldXY(n,p,g,v,this)},getTileCorners:function(n,p,g){return this.tilemap.getTileCorners(n,p,g,this)},weightedRandomize:function(n,p,g,v,f){return o.WeightedRandomize(p,g,v,f,n,this.layer),this},worldToTileX:function(n,p,g){return this.tilemap.worldToTileX(n,p,g,this)},worldToTileY:function(n,p,g){return this.tilemap.worldToTileY(n,p,g,this)},worldToTileXY:function(n,p,g,v,f){return this.tilemap.worldToTileXY(n,p,g,v,f,this)},destroy:function(n){n===void 0&&(n=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),n&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],h.prototype.destroy.call(this))}});y.exports=d},16153:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(61340),x=new u,c=new u,h=new u,o=function(r,a,d,n){var p=a.cull(d),g=p.length,v=d.alpha*a.alpha;if(!(g===0||v<=0)){var f=x,b=c,C=h;b.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),f.copyFrom(d.matrix);var _=r.currentContext,M=a.gidMap;_.save(),n?(f.multiplyWithOffset(n,-d.scrollX*a.scrollFactorX,-d.scrollY*a.scrollFactorY),b.e=a.x,b.f=a.y,f.multiply(b,C),C.copyToContext(_)):(b.e-=d.scrollX*a.scrollFactorX,b.f-=d.scrollY*a.scrollFactorY,b.copyToContext(_)),(!r.antialias||a.scaleX>1||a.scaleY>1)&&(_.imageSmoothingEnabled=!1);for(var E=0;E<g;E++){var A=p[E],R=M[A.index];if(R){var L=R.image.getSourceImage(),Y=R.getTileTextureCoordinates(A.index),F=R.tileWidth,N=R.tileHeight;if(!(Y===null||F===0||N===0)){var z=F*.5,U=N*.5;Y.x+=R.tileOffset.x,Y.y+=R.tileOffset.y,_.save(),_.translate(A.pixelX+z,A.pixelY+U),A.rotation!==0&&_.rotate(A.rotation),(A.flipX||A.flipY)&&_.scale(A.flipX?-1:1,A.flipY?-1:1),_.globalAlpha=v*A.alpha,_.drawImage(L,Y.x,Y.y,F,N,-z,-U,F,N),_.restore()}}}_.restore()}};y.exports=o},19218:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(29747),x=u,c=u;x=i(99558),c=i(16153),y.exports={renderWebGL:x,renderCanvas:c}},99558:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(70554),x=function(c,h,o){var r=h.cull(o),a=r.length,d=o.alpha*h.alpha;if(!(a===0||d<=0)){var n=h.gidMap,p=c.pipelines.set(h.pipeline,h),g=u.getTintAppendFloatAlpha,v=h.scrollFactorX,f=h.scrollFactorY,b=h.x,C=h.y,_=h.scaleX,M=h.scaleY;c.pipelines.preBatch(h);for(var E=0;E<a;E++){var A=r[E],R=n[A.index];if(R){var L=R.getTileTextureCoordinates(A.index),Y=R.tileWidth,F=R.tileHeight;if(!(!L||Y===0||F===0)){var N=Y*.5,z=F*.5,U=R.glTexture,q=p.setTexture2D(U,h),Q=Y,K=F,et=L.x,H=L.y,J=R.tileOffset.x,X=R.tileOffset.y,Z=g(A.tint,d*A.alpha);p.batchTexture(h,U,U.width,U.height,b+A.pixelX*_+(N*_-J),C+A.pixelY*M+(z*M-X),Y,F,_,M,A.rotation,A.flipX,A.flipY,v,f,N,z,et,H,Q,K,Z,Z,Z,Z,A.tintFill,0,0,o,null,!0,q,!0)}}}c.pipelines.postBatch(h)}};y.exports=x},33629:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(26099),c=new u({initialize:function(h,o,r,a,d,n,p,g,v){(r===void 0||r<=0)&&(r=32),(a===void 0||a<=0)&&(a=32),d===void 0&&(d=0),n===void 0&&(n=0),p===void 0&&(p={}),g===void 0&&(g={}),this.name=h,this.firstgid=o,this.tileWidth=r,this.tileHeight=a,this.tileMargin=d,this.tileSpacing=n,this.tileProperties=p,this.tileData=g,this.tileOffset=new x,v!==void 0&&this.tileOffset.set(v.x,v.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(h){return this.containsTileIndex(h)?this.tileProperties[h-this.firstgid]:null},getTileData:function(h){return this.containsTileIndex(h)?this.tileData[h-this.firstgid]:null},getTileCollisionGroup:function(h){var o=this.getTileData(h);return o&&o.objectgroup?o.objectgroup:null},containsTileIndex:function(h){return h>=this.firstgid&&h<this.firstgid+this.total},getTileTextureCoordinates:function(h){return this.containsTileIndex(h)?this.texCoordinates[h-this.firstgid]:null},setImage:function(h){this.image=h;var o=h.get(),r=h.getFrameBounds();return this.glTexture=o.source.glTexture,o.width>r.width||o.height>r.height?this.updateTileData(o.width,o.height):this.updateTileData(r.width,r.height,r.x,r.y),this},setTileSize:function(h,o){return h!==void 0&&(this.tileWidth=h),o!==void 0&&(this.tileHeight=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(h,o){return h!==void 0&&(this.tileMargin=h),o!==void 0&&(this.tileSpacing=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(h,o,r,a){r===void 0&&(r=0),a===void 0&&(a=0);var d=(o-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),n=(h-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(d%1!==0||n%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),d=Math.floor(d),n=Math.floor(n),this.rows=d,this.columns=n,this.total=d*n,this.texCoordinates.length=0;for(var p=this.tileMargin+r,g=this.tileMargin+a,v=0;v<this.rows;v++){for(var f=0;f<this.columns;f++)this.texCoordinates.push({x:p,y:g}),p+=this.tileWidth+this.tileSpacing;p=this.tileMargin+r,g+=this.tileHeight+this.tileSpacing}return this}});y.exports=c},72023:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7423),x=function(c,h,o){var r=u(c,h,!0,o),a=u(c,h-1,!0,o),d=u(c,h+1,!0,o),n=u(c-1,h,!0,o),p=u(c+1,h,!0,o),g=r&&r.collides;return g&&(r.faceTop=!0,r.faceBottom=!0,r.faceLeft=!0,r.faceRight=!0),a&&a.collides&&(g&&(r.faceTop=!1),a.faceBottom=!g),d&&d.collides&&(g&&(r.faceBottom=!1),d.faceTop=!g),n&&n.collides&&(g&&(r.faceLeft=!1),n.faceRight=!g),p&&p.collides&&(g&&(r.faceRight=!1),p.faceLeft=!g),r&&!r.collides&&r.resetFaces(),r};y.exports=x},42573:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7423),x=i(7386),c=function(h,o,r,a,d){for(var n=null,p=null,g=null,v=null,f=x(h,o,r,a,null,d),b=0;b<f.length;b++){var C=f[b];C&&(C.collides?(n=u(C.x,C.y-1,!0,d),p=u(C.x,C.y+1,!0,d),g=u(C.x-1,C.y,!0,d),v=u(C.x+1,C.y,!0,d),C.faceTop=!(n&&n.collides),C.faceBottom=!(p&&p.collides),C.faceLeft=!(g&&g.collides),C.faceRight=!(v&&v.collides)):C.resetFaces())}};y.exports=c},33528:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26099),x=new u,c=function(h,o,r,a){var d=r.tilemapLayer,n=d.cullPaddingX,p=d.cullPaddingY,g=d.tilemap.tileToWorldXY(h,o,x,a,d);return g.x>a.worldView.x+d.scaleX*r.tileWidth*(-n-.5)&&g.x<a.worldView.right+d.scaleX*r.tileWidth*(n-.5)&&g.y>a.worldView.y+d.scaleY*r.tileHeight*(-p-1)&&g.y<a.worldView.bottom+d.scaleY*r.tileHeight*(p-.5)};y.exports=c},1785:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(42573),x=i(7386),c=i(62991),h=i(23029),o=function(r,a,d,n,p,g,v,f){v===void 0&&(v=!0);var b=x(r,a,d,n,null,f),C=[];b.forEach(function(Y){var F=new h(Y.layer,Y.index,Y.x,Y.y,Y.width,Y.height,Y.baseWidth,Y.baseHeight);F.copy(Y),C.push(F)});for(var _=p-r,M=g-a,E=0;E<C.length;E++){var A=C[E],R=A.x+_,L=A.y+M;c(R,L,f)&&f.data[L][R]&&(A.x=R,A.y=L,A.updatePixelXY(),f.data[L][R]=A)}v&&u(p-1,g-1,d+2,n+2,f),b.length=0,C.length=0};y.exports=o},78419:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62644),x=i(7386),c=i(27987),h=function(o,r,a,d,n,p){a||(a={}),Array.isArray(o)||(o=[o]);var g=p.tilemapLayer;d||(d=g.scene),n||(n=d.cameras.main);var v=p.width,f=p.height,b=x(0,0,v,f,null,p),C=[],_,M=function(L,Y,F){for(var N=0;N<F.length;N++){var z=F[N];L.hasOwnProperty(z)||(L[z]=Y[z])}};for(_=0;_<b.length;_++){var E=b[_],A=u(a);if(o.indexOf(E.index)!==-1){var R=g.tileToWorldXY(E.x,E.y,void 0,n,p);A.x=R.x,A.y=R.y,M(A,E,["rotation","flipX","flipY","alpha","visible","tint"]),A.hasOwnProperty("origin")||(A.x+=E.width*.5,A.y+=E.height*.5),A.hasOwnProperty("useSpriteSheet")&&(A.key=E.tileset.image,A.frame=E.index-E.tileset.firstgid),C.push(d.make.sprite(A))}}if(Array.isArray(r))for(_=0;_<o.length;_++)c(o[_],r[_],0,0,v,f,p);else if(r!==null)for(_=0;_<o.length;_++)c(o[_],r,0,0,v,f,p);return C};y.exports=h},19545:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(87841),x=i(63448),c=i(56583),h=new u,o=function(r,a){var d=r.tilemapLayer.tilemap,n=r.tilemapLayer,p=Math.floor(d.tileWidth*n.scaleX),g=Math.floor(d.tileHeight*n.scaleY),v=c(a.worldView.x-n.x,p,0,!0)-n.cullPaddingX,f=x(a.worldView.right-n.x,p,0,!0)+n.cullPaddingX,b=c(a.worldView.y-n.y,g,0,!0)-n.cullPaddingY,C=x(a.worldView.bottom-n.y,g,0,!0)+n.cullPaddingY;return h.setTo(v,b,f-v,C-b)};y.exports=o},30003:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(19545),x=i(32483),c=function(h,o,r,a){r===void 0&&(r=[]),a===void 0&&(a=0),r.length=0;var d=h.tilemapLayer,n=u(h,o);return(d.skipCull||d.scrollFactorX!==1||d.scrollFactorY!==1)&&(n.left=0,n.right=h.width,n.top=0,n.bottom=h.height),x(h,n,a,r),r};y.exports=c},35137:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7386),x=i(42573),c=i(20576),h=function(o,r,a,d,n,p,g){for(var v=g.collideIndexes.indexOf(o)!==-1,f=u(r,a,d,n,null,g),b=0;b<f.length;b++)f[b].index=o,c(f[b],v);p&&x(r-1,a-1,d+2,n+2,g)};y.exports=h},40253:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7386),x=function(c,h,o,r,a,d,n,p){var g=u(o,r,a,d,n,p);return g.filter(c,h)};y.exports=x},52692:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){u===void 0&&(u=0),x===void 0&&(x=!1);var h=0,o,r,a;if(x){for(r=c.height-1;r>=0;r--)for(o=c.width-1;o>=0;o--)if(a=c.data[r][o],a&&a.index===i){if(h===u)return a;h+=1}}else for(r=0;r<c.height;r++)for(o=0;o<c.width;o++)if(a=c.data[r][o],a&&a.index===i){if(h===u)return a;h+=1}return null};y.exports=P},66151:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7386),x=function(c,h,o,r,a,d,n,p){var g=u(o,r,a,d,n,p);return g.find(c,h)||null};y.exports=x},97560:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7386),x=function(c,h,o,r,a,d,n,p){var g=u(o,r,a,d,n,p);g.forEach(c,h)};y.exports=x},43305:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91907),x=i(30003),c=i(9474),h=i(14018),o=i(29747),r=i(54503),a=function(d){return d===u.ORTHOGONAL?x:d===u.HEXAGONAL?c:d===u.STAGGERED?r:d===u.ISOMETRIC?h:o};y.exports=a},7423:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62991),x=function(c,h,o,r){if(u(c,h,r)){var a=r.data[h][c]||null;return a?a.index===-1?o?a:null:a:null}else return null};y.exports=x},60540:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7423),x=i(26099),c=new x,h=function(o,r,a,d,n){return n.tilemapLayer.worldToTileXY(o,r,!0,c,d),u(c.x,c.y,a,n)};y.exports=h},55826:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26099),x=function(c,h,o,r){var a=r.baseTileWidth,d=r.baseTileHeight,n=r.tilemapLayer,p=0,g=0;n&&(o||(o=n.scene.cameras.main),p=n.x+o.scrollX*(1-n.scrollFactorX),g=n.y+o.scrollY*(1-n.scrollFactorY),a*=n.scaleX,d*=n.scaleY);var v=p+c*a,f=g+h*d;return[new u(v,f),new u(v+a,f),new u(v+a,f+d),new u(v,f+d)]};y.exports=x},11758:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91907),x=i(27229),c=i(29747),h=i(55826),o=function(r){return r===u.ORTHOGONAL?h:r===u.ISOMETRIC?c:r===u.HEXAGONAL?x:(u.STAGGERED,c)};y.exports=o},39167:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91907),x=i(29747),c=i(97281),h=function(o){return o===u.ORTHOGONAL?c:x};y.exports=h},62e3:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91907),x=i(19951),c=i(14127),h=i(29747),o=i(97202),r=i(70326),a=function(d){return d===u.ORTHOGONAL?r:d===u.ISOMETRIC?c:d===u.HEXAGONAL?x:d===u.STAGGERED?o:h};y.exports=a},5984:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91907),x=i(29747),c=i(28054),h=i(29650),o=function(r){return r===u.ORTHOGONAL?h:r===u.STAGGERED?c:x};y.exports=o},7386:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(95540),x=function(c,h,o,r,a,d){c===void 0&&(c=0),h===void 0&&(h=0),o===void 0&&(o=d.width),r===void 0&&(r=d.height),a||(a={});var n=u(a,"isNotEmpty",!1),p=u(a,"isColliding",!1),g=u(a,"hasInterestingFace",!1);c<0&&(o+=c,c=0),h<0&&(r+=h,h=0),c+o>d.width&&(o=Math.max(d.width-c,0)),h+r>d.height&&(r=Math.max(d.height-h,0));for(var v=[],f=h;f<h+r;f++)for(var b=c;b<c+o;b++){var C=d.data[f][b];if(C!==null){if(n&&C.index===-1||p&&!C.collides||g&&!C.hasInterestingFace)continue;v.push(C)}}return v};y.exports=x},91141:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(55738),x=i(7386),c=i(91865),h=i(29747),o=i(26099),r=i(91907),a=function(v,f){return c.RectangleToTriangle(f,v)},d=new o,n=new o,p=new o,g=function(v,f,b,C){if(C.orientation!==r.ORTHOGONAL)return console.warn("GetTilesWithinShape only works with orthogonal tilemaps"),[];if(v===void 0)return[];var _=h;v instanceof u.Circle?_=c.CircleToRectangle:v instanceof u.Rectangle?_=c.RectangleToRectangle:v instanceof u.Triangle?_=a:v instanceof u.Line&&(_=c.LineToRectangle),C.tilemapLayer.worldToTileXY(v.left,v.top,!0,n,b);var M=n.x,E=n.y;C.tilemapLayer.worldToTileXY(v.right,v.bottom,!1,p,b);var A=Math.ceil(p.x),R=Math.ceil(p.y),L=Math.max(A-M,1),Y=Math.max(R-E,1),F=x(M,E,L,Y,f,C),N=C.tileWidth,z=C.tileHeight;C.tilemapLayer&&(N*=C.tilemapLayer.scaleX,z*=C.tilemapLayer.scaleY);for(var U=[],q=new u.Rectangle(0,0,N,z),Q=0;Q<F.length;Q++){var K=F[Q];C.tilemapLayer.tileToWorldXY(K.x,K.y,d,b),q.x=d.x,q.y=d.y,_(v,q)&&U.push(K)}return U};y.exports=g},96523:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7386),x=i(26099),c=new x,h=new x,o=function(r,a,d,n,p,g,v){var f=v.tilemapLayer.tilemap._convert.WorldToTileXY;f(r,a,!0,c,g,v);var b=c.x,C=c.y;f(r+d,a+n,!1,h,g,v);var _=Math.ceil(h.x),M=Math.ceil(h.y);return u(b,C,_-b,M-C,p,v)};y.exports=o},96113:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91907),x=i(20242),c=i(10095),h=function(o){return o===u.ORTHOGONAL?c:x};y.exports=h},16926:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91907),x=i(86625),c=i(96897),h=i(29747),o=i(15108),r=i(85896),a=function(d){return d===u.ORTHOGONAL?r:d===u.ISOMETRIC?c:d===u.HEXAGONAL?x:d===u.STAGGERED?o:h};y.exports=a},55762:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91907),x=i(20242),c=i(51900),h=i(63288),o=function(r){return r===u.ORTHOGONAL?h:r===u.STAGGERED?c:x};y.exports=o},45091:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62991),x=function(c,h,o){if(u(c,h,o)){var r=o.data[h][c];return r!==null&&r.index>-1}else return!1};y.exports=x},24152:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(45091),x=i(26099),c=new x,h=function(o,r,a,d){d.tilemapLayer.worldToTileXY(o,r,!0,c,a);var n=c.x,p=c.y;return u(n,p,d)};y.exports=h},90454:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(63448),x=i(56583),c=function(h,o){var r=h.tilemapLayer.tilemap,a=h.tilemapLayer,d=Math.floor(r.tileWidth*a.scaleX),n=Math.floor(r.tileHeight*a.scaleY),p=h.hexSideLength,g,v,f,b;if(h.staggerAxis==="y"){var C=(n-p)/2+p;g=x(o.worldView.x-a.x,d,0,!0)-a.cullPaddingX,v=u(o.worldView.right-a.x,d,0,!0)+a.cullPaddingX,f=x(o.worldView.y-a.y,C,0,!0)-a.cullPaddingY,b=u(o.worldView.bottom-a.y,C,0,!0)+a.cullPaddingY}else{var _=(d-p)/2+p;g=x(o.worldView.x-a.x,_,0,!0)-a.cullPaddingX,v=u(o.worldView.right-a.x,_,0,!0)+a.cullPaddingX,f=x(o.worldView.y-a.y,n,0,!0)-a.cullPaddingY,b=u(o.worldView.bottom-a.y,n,0,!0)+a.cullPaddingY}return{left:g,right:v,top:f,bottom:b}};y.exports=c},9474:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(90454),x=i(32483),c=function(h,o,r,a){r===void 0&&(r=[]),a===void 0&&(a=0),r.length=0;var d=h.tilemapLayer,n=u(h,o);return d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1&&(n.left=0,n.right=h.width,n.top=0,n.bottom=h.height),x(h,n,a,r),r};y.exports=c},27229:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(19951),x=i(26099),c=new x,h=function(o,r,a,d){var n=d.baseTileWidth,p=d.baseTileHeight,g=d.tilemapLayer;g&&(n*=g.scaleX,p*=g.scaleY);var v=u(o,r,c,a,d),f=[],b=.5773502691896257,C,_;d.staggerAxis==="y"?(C=b*n,_=p/2):(C=n/2,_=b*p);for(var M=0;M<6;M++){var E=2*Math.PI*(.5-M)/6;f.push(new x(v.x+C*Math.cos(E),v.y+_*Math.sin(E)))}return f};y.exports=h},19951:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26099),x=function(c,h,o,r,a){o||(o=new u);var d=a.baseTileWidth,n=a.baseTileHeight,p=a.tilemapLayer,g=0,v=0;p&&(r||(r=p.scene.cameras.main),g=p.x+r.scrollX*(1-p.scrollFactorX),v=p.y+r.scrollY*(1-p.scrollFactorY),d*=p.scaleX,n*=p.scaleY);var f=d/2,b=n/2,C,_,M=a.staggerAxis,E=a.staggerIndex;return M==="y"?(C=g+d*c+d,_=v+1.5*h*b+b,h%2===0&&(E==="odd"?C-=f:C+=f)):M==="x"&&E==="odd"&&(C=g+1.5*c*f+f,_=v+n*c+n,c%2===0&&(E==="odd"?_-=b:_+=b)),o.set(C,_)};y.exports=x},86625:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26099),x=function(c,h,o,r,a,d){r||(r=new u);var n=d.baseTileWidth,p=d.baseTileHeight,g=d.tilemapLayer;g&&(a||(a=g.scene.cameras.main),c=c-(g.x+a.scrollX*(1-g.scrollFactorX)),h=h-(g.y+a.scrollY*(1-g.scrollFactorY)),n*=g.scaleX,p*=g.scaleY);var v=.5773502691896257,f=-.3333333333333333,b=0,C=.6666666666666666,_=n/2,M=p/2,E,A,R,L,Y;d.staggerAxis==="y"?(E=(c-_)/(v*n),A=(h-M)/M,R=v*E+f*A,L=b*E+C*A):(E=(c-_)/_,A=(h-M)/(v*p),R=f*E+v*A,L=C*E+b*A),Y=-R-L;var F=Math.round(R),N=Math.round(L),z=Math.round(Y),U=Math.abs(F-R),q=Math.abs(N-L),Q=Math.abs(z-Y);U>q&&U>Q?F=-N-z:q>Q&&(N=-F-z);var K,et=N;return d.staggerIndex==="odd"?K=et%2===0?N/2+F:N/2+F-.5:K=et%2===0?N/2+F:N/2+F+.5,r.set(K,et)};y.exports=x},62991:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return i>=0&&i<x.width&&u>=0&&u<x.height};y.exports=P},14018:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(33528),x=function(c,h,o,r){o===void 0&&(o=[]),r===void 0&&(r=0),o.length=0;var a=c.tilemapLayer,d=c.data,n=c.width,p=c.height,g=a.skipCull,v=0,f=n,b=0,C=p,_,M,E;if(r===0)for(M=b;M<C;M++)for(_=v;_<f;_++)E=d[M][_],!(!E||E.index===-1||!E.visible||E.alpha===0)&&(!g&&!u(_,M,c,h)||o.push(E));else if(r===1)for(M=b;M<C;M++)for(_=f;_>=v;_--)E=d[M][_],!(!E||E.index===-1||!E.visible||E.alpha===0)&&(!g&&!u(_,M,c,h)||o.push(E));else if(r===2)for(M=C;M>=b;M--)for(_=v;_<f;_++)E=d[M][_],!(!E||E.index===-1||!E.visible||E.alpha===0)&&(!g&&!u(_,M,c,h)||o.push(E));else if(r===3)for(M=C;M>=b;M--)for(_=f;_>=v;_--)E=d[M][_],!(!E||E.index===-1||!E.visible||E.alpha===0)&&(!g&&!u(_,M,c,h)||o.push(E));return a.tilesDrawn=o.length,a.tilesTotal=n*p,o};y.exports=x},14127:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26099),x=function(c,h,o,r,a){o||(o=new u);var d=a.baseTileWidth,n=a.baseTileHeight,p=a.tilemapLayer,g=0,v=0;p&&(r||(r=p.scene.cameras.main),g=p.x+r.scrollX*(1-p.scrollFactorX),d*=p.scaleX,v=p.y+r.scrollY*(1-p.scrollFactorY),n*=p.scaleY);var f=g+(c-h)*(d/2),b=v+(c+h)*(n/2);return o.set(f,b)};y.exports=x},96897:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26099),x=function(c,h,o,r,a,d,n){r||(r=new u);var p=d.baseTileWidth,g=d.baseTileHeight,v=d.tilemapLayer;v&&(a||(a=v.scene.cameras.main),h=h-(v.y+a.scrollY*(1-v.scrollFactorY)),g*=v.scaleY,c=c-(v.x+a.scrollX*(1-v.scrollFactorX)),p*=v.scaleX);var f=p/2,b=g/2;c=c-f,n||(h=h-g);var C=.5*(c/f+h/b),_=.5*(-c/f+h/b);return o&&(C=Math.floor(C),_=Math.floor(_)),r.set(C,_)};y.exports=x},71558:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(23029),x=i(62991),c=i(72023),h=i(20576),o=function(r,a,d,n,p){if(n===void 0&&(n=!0),!x(a,d,p))return null;var g,v=p.data[d][a],f=v&&v.collides;r instanceof u?(p.data[d][a]===null&&(p.data[d][a]=new u(p,r.index,a,d,p.tileWidth,p.tileHeight)),p.data[d][a].copy(r)):(g=r,p.data[d][a]===null?p.data[d][a]=new u(p,g,a,d,p.tileWidth,p.tileHeight):p.data[d][a].index=g);var b=p.data[d][a],C=p.collideIndexes.indexOf(b.index)!==-1;if(g=r instanceof u?r.index:r,g===-1)b.width=p.tileWidth,b.height=p.tileHeight;else{var _=p.tilemapLayer.tilemap,M=_.tiles,E=M[g][2],A=_.tilesets[E];b.width=A.tileWidth,b.height=A.tileHeight}return h(b,C),n&&f!==b.collides&&c(a,d,p),b};y.exports=o},26303:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(71558),x=i(26099),c=new x,h=function(o,r,a,d,n,p){return p.tilemapLayer.worldToTileXY(r,a,!0,c,n,p),u(o,c.x,c.y,d,p)};y.exports=h},14051:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(42573),x=i(71558),c=function(h,o,r,a,d){if(a===void 0&&(a=!0),!Array.isArray(h))return null;Array.isArray(h[0])||(h=[h]);for(var n=h.length,p=h[0].length,g=0;g<n;g++)for(var v=0;v<p;v++){var f=h[g][v];x(f,o+v,r+g,!1,d)}a&&u(o-1,r-1,p+2,n+2,d)};y.exports=c},77389:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7386),x=i(26546),c=function(h,o,r,a,d,n){var p,g=u(h,o,r,a,{},n);if(!d)for(d=[],p=0;p<g.length;p++)d.indexOf(g[p].index)===-1&&d.push(g[p].index);for(p=0;p<g.length;p++)g[p].index=x(d)};y.exports=c},63557:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(23029),x=i(62991),c=i(72023),h=function(o,r,a,d,n){if(a===void 0&&(a=!0),d===void 0&&(d=!0),!x(o,r,n))return null;var p=n.data[r][o];if(p)n.data[r][o]=a?null:new u(n,-1,o,r,n.tileWidth,n.tileHeight);else return null;return d&&p&&p.collides&&c(o,r,n),p};y.exports=h},94178:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(63557),x=i(26099),c=new x,h=function(o,r,a,d,n,p){return p.tilemapLayer.worldToTileXY(o,r,!0,c,n,p),u(c.x,c.y,a,d,p)};y.exports=h},15533:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7386),x=i(3956),c=new x(105,210,231,150),h=new x(243,134,48,200),o=new x(40,39,37,150),r=function(a,d,n){d===void 0&&(d={});var p=d.tileColor!==void 0?d.tileColor:c,g=d.collidingTileColor!==void 0?d.collidingTileColor:h,v=d.faceColor!==void 0?d.faceColor:o,f=u(0,0,n.width,n.height,null,n);a.translateCanvas(n.tilemapLayer.x,n.tilemapLayer.y),a.scaleCanvas(n.tilemapLayer.scaleX,n.tilemapLayer.scaleY);for(var b=0;b<f.length;b++){var C=f[b],_=C.tileset?C.tileset.tileOffset:{x:0,y:0},M=C.width,E=C.height,A=C.pixelX-_.x,R=C.pixelY-_.y,L=C.collides?g:p;L!==null&&(a.fillStyle(L.color,L.alpha/255),a.fillRect(A,R,M,E)),A+=1,R+=1,M-=2,E-=2,v!==null&&(a.lineStyle(1,v.color,v.alpha/255),C.faceTop&&a.lineBetween(A,R,A+M,R),C.faceRight&&a.lineBetween(A+M,R,A+M,R+E),C.faceBottom&&a.lineBetween(A,R+E,A+M,R+E),C.faceLeft&&a.lineBetween(A,R,A,R+E))}};y.exports=r},27987:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7386),x=function(c,h,o,r,a,d,n){for(var p=u(o,r,a,d,null,n),g=0;g<p.length;g++)p[g]&&p[g].index===c&&(p[g].index=h)};y.exports=x},32483:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){var h=i.data,o=i.width,r=i.height,a=i.tilemapLayer,d=Math.max(0,u.left),n=Math.min(o,u.right),p=Math.max(0,u.top),g=Math.min(r,u.bottom),v,f,b;if(x===0)for(f=p;f<g;f++)for(v=d;h[f]&&v<n;v++)b=h[f][v],!(!b||b.index===-1||!b.visible||b.alpha===0)&&c.push(b);else if(x===1)for(f=p;f<g;f++)for(v=n;h[f]&&v>=d;v--)b=h[f][v],!(!b||b.index===-1||!b.visible||b.alpha===0)&&c.push(b);else if(x===2)for(f=g;f>=p;f--)for(v=d;h[f]&&v<n;v++)b=h[f][v],!(!b||b.index===-1||!b.visible||b.alpha===0)&&c.push(b);else if(x===3)for(f=g;f>=p;f--)for(v=n;h[f]&&v>=d;v--)b=h[f][v],!(!b||b.index===-1||!b.visible||b.alpha===0)&&c.push(b);return a.tilesDrawn=c.length,a.tilesTotal=o*r,c};y.exports=P},57068:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(20576),x=i(42573),c=i(9589),h=function(o,r,a,d,n){r===void 0&&(r=!0),a===void 0&&(a=!0),n===void 0&&(n=!0),Array.isArray(o)||(o=[o]);for(var p=0;p<o.length;p++)c(o[p],r,d);if(n)for(var g=0;g<d.height;g++)for(var v=0;v<d.width;v++){var f=d.data[g][v];f&&o.indexOf(f.index)!==-1&&u(f,r)}a&&x(0,0,d.width,d.height,d)};y.exports=h},37266:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(20576),x=i(42573),c=i(9589),h=function(o,r,a,d,n,p){if(a===void 0&&(a=!0),d===void 0&&(d=!0),p===void 0&&(p=!0),!(o>r)){for(var g=o;g<=r;g++)c(g,a,n);if(p)for(var v=0;v<n.height;v++)for(var f=0;f<n.width;f++){var b=n.data[v][f];b&&b.index>=o&&b.index<=r&&u(b,a)}d&&x(0,0,n.width,n.height,n)}};y.exports=h},75661:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(20576),x=i(42573),c=i(9589),h=function(o,r,a,d){r===void 0&&(r=!0),a===void 0&&(a=!0),Array.isArray(o)||(o=[o]);for(var n=0;n<d.height;n++)for(var p=0;p<d.width;p++){var g=d.data[n][p];g&&o.indexOf(g.index)===-1&&(u(g,r),c(g.index,r,d))}a&&x(0,0,d.width,d.height,d)};y.exports=h},64740:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(20576),x=i(42573),c=i(97022),h=function(o,r,a,d){r===void 0&&(r=!0),a===void 0&&(a=!0);for(var n=0;n<d.height;n++)for(var p=0;p<d.width;p++){var g=d.data[n][p];if(g){for(var v in o)if(c(g.properties,v)){var f=o[v];Array.isArray(f)||(f=[f]);for(var b=0;b<f.length;b++)g.properties[v]===f[b]&&u(g,r)}}}a&&x(0,0,d.width,d.height,d)};y.exports=h},63307:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(20576),x=i(42573),c=function(h,o,r){h===void 0&&(h=!0),o===void 0&&(o=!0);for(var a=0;a<r.height;a++)for(var d=0;d<r.width;d++){var n=r.data[a][d];if(n){var p=n.getCollisionGroup();p&&p.objects&&p.objects.length>0&&u(n,h)}}o&&x(0,0,r.width,r.height,r)};y.exports=c},9589:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=x.collideIndexes.indexOf(i);u&&c===-1?x.collideIndexes.push(i):!u&&c!==-1&&x.collideIndexes.splice(c,1)};y.exports=P},20576:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){u?i.setCollision(!0,!0,!0,!0,!1):i.resetCollision(!1)};y.exports=P},79583:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){if(typeof i=="number")c.callbacks[i]=u!==null?{callback:u,callbackContext:x}:void 0;else for(var h=0,o=i.length;h<o;h++)c.callbacks[i[h]]=u!==null?{callback:u,callbackContext:x}:void 0};y.exports=P},93254:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7386),x=function(c,h,o,r,a,d,n){for(var p=u(c,h,o,r,null,n),g=0;g<p.length;g++)p[g].setCollisionCallback(a,d)};y.exports=x},32903:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7386),x=i(33680),c=function(h,o,r,a,d){var n=u(h,o,r,a,null,d),p=n.map(function(v){return v.index});x(p);for(var g=0;g<n.length;g++)n[g].index=p[g]};y.exports=c},61325:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(63448),x=i(56583),c=function(h,o){var r=h.tilemapLayer.tilemap,a=h.tilemapLayer,d=Math.floor(r.tileWidth*a.scaleX),n=Math.floor(r.tileHeight*a.scaleY),p=x(o.worldView.x-a.x,d,0,!0)-a.cullPaddingX,g=u(o.worldView.right-a.x,d,0,!0)+a.cullPaddingX,v=x(o.worldView.y-a.y,n/2,0,!0)-a.cullPaddingY,f=u(o.worldView.bottom-a.y,n/2,0,!0)+a.cullPaddingY;return{left:p,right:g,top:v,bottom:f}};y.exports=c},54503:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(61325),x=i(32483),c=function(h,o,r,a){r===void 0&&(r=[]),a===void 0&&(a=0),r.length=0;var d=h.tilemapLayer,n=u(h,o);return d.skipCull&&d.scrollFactorX===1&&d.scrollFactorY===1&&(n.left=0,n.right=h.width,n.top=0,n.bottom=h.height),x(h,n,a,r),r};y.exports=c},97202:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26099),x=function(c,h,o,r,a){o||(o=new u);var d=a.baseTileWidth,n=a.baseTileHeight,p=a.tilemapLayer,g=0,v=0;p&&(r||(r=p.scene.cameras.main),g=p.x+r.scrollX*(1-p.scrollFactorX),d*=p.scaleX,v=p.y+r.scrollY*(1-p.scrollFactorY),n*=p.scaleY);var f=g+c*d+h%2*(d/2),b=v+h*(n/2);return o.set(f,b)};y.exports=x},28054:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=x.baseTileHeight,h=x.tilemapLayer,o=0;return h&&(u===void 0&&(u=h.scene.cameras.main),o=h.y+u.scrollY*(1-h.scrollFactorY),c*=h.scaleY),o+i*(c/2)+c};y.exports=P},15108:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26099),x=function(c,h,o,r,a,d){r||(r=new u);var n=d.baseTileWidth,p=d.baseTileHeight,g=d.tilemapLayer;g&&(a||(a=g.scene.cameras.main),h=h-(g.y+a.scrollY*(1-g.scrollFactorY)),p*=g.scaleY,c=c-(g.x+a.scrollX*(1-g.scrollFactorX)),n*=g.scaleX);var v=o?Math.floor(h/(p/2)):h/(p/2),f=o?Math.floor((c+v%2*.5*n)/n):(c+v%2*.5*n)/n;return r.set(f,v)};y.exports=x},51900:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){var h=c.baseTileHeight,o=c.tilemapLayer;return o&&(x||(x=o.scene.cameras.main),i=i-(o.y+x.scrollY*(1-o.scrollFactorY)),h*=o.scaleY),u?Math.floor(i/(h/2)):i/(h/2)};y.exports=P},86560:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7386),x=function(c,h,o,r,a,d,n){for(var p=u(o,r,a,d,null,n),g=0;g<p.length;g++)p[g]&&(p[g].index===c?p[g].index=h:p[g].index===h&&(p[g].index=c))};y.exports=x},97281:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=x.baseTileWidth,h=x.tilemapLayer,o=0;return h&&(u||(u=h.scene.cameras.main),o=h.x+u.scrollX*(1-h.scrollFactorX),c*=h.scaleX),o+i*c};y.exports=P},70326:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(97281),x=i(29650),c=i(26099),h=function(o,r,a,d,n){return a||(a=new c(0,0)),a.x=u(o,d,n),a.y=x(r,d,n),a};y.exports=h},29650:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=x.baseTileHeight,h=x.tilemapLayer,o=0;return h&&(u||(u=h.scene.cameras.main),o=h.y+u.scrollY*(1-h.scrollFactorY),c*=h.scaleY),o+i*c};y.exports=P},77366:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(7386),x=i(75508),c=function(h,o,r,a,d,n){if(d){var p,g=u(h,o,r,a,null,n),v=0;for(p=0;p<d.length;p++)v+=d[p].weight;if(!(v<=0))for(p=0;p<g.length;p++){for(var f=x.RND.frac()*v,b=0,C=-1,_=0;_<d.length;_++)if(b+=d[_].weight,f<=b){var M=d[_].index;C=Array.isArray(M)?M[Math.floor(x.RND.frac()*M.length)]:M;break}g[p].index=C}}};y.exports=c},10095:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(85896),x=i(26099),c=new x,h=function(o,r,a,d){return u(o,0,r,c,a,d),c.x};y.exports=h},85896:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(26099),x=function(c,h,o,r,a,d){o===void 0&&(o=!0),r||(r=new u);var n=d.baseTileWidth,p=d.baseTileHeight,g=d.tilemapLayer;g&&(a||(a=g.scene.cameras.main),c=c-(g.x+a.scrollX*(1-g.scrollFactorX)),h=h-(g.y+a.scrollY*(1-g.scrollFactorY)),n*=g.scaleX,p*=g.scaleY);var v=c/n,f=h/p;return o&&(v=Math.floor(v),f=Math.floor(f)),r.set(v,f)};y.exports=x},63288:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(85896),x=i(26099),c=new x,h=function(o,r,a,d){return u(0,o,r,c,a,d),c.y};y.exports=h},81086:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={CalculateFacesAt:i(72023),CalculateFacesWithin:i(42573),CheckIsoBounds:i(33528),Copy:i(1785),CreateFromTiles:i(78419),CullBounds:i(19545),CullTiles:i(30003),Fill:i(35137),FilterTiles:i(40253),FindByIndex:i(52692),FindTile:i(66151),ForEachTile:i(97560),GetCullTilesFunction:i(43305),GetTileAt:i(7423),GetTileAtWorldXY:i(60540),GetTileCorners:i(55826),GetTileCornersFunction:i(11758),GetTilesWithin:i(7386),GetTilesWithinShape:i(91141),GetTilesWithinWorldXY:i(96523),GetTileToWorldXFunction:i(39167),GetTileToWorldXYFunction:i(62e3),GetTileToWorldYFunction:i(5984),GetWorldToTileXFunction:i(96113),GetWorldToTileXYFunction:i(16926),GetWorldToTileYFunction:i(55762),HasTileAt:i(45091),HasTileAtWorldXY:i(24152),HexagonalCullBounds:i(90454),HexagonalCullTiles:i(9474),HexagonalGetTileCorners:i(27229),HexagonalTileToWorldXY:i(19951),HexagonalWorldToTileXY:i(86625),IsInLayerBounds:i(62991),IsometricCullTiles:i(14018),IsometricTileToWorldXY:i(14127),IsometricWorldToTileXY:i(96897),PutTileAt:i(71558),PutTileAtWorldXY:i(26303),PutTilesAt:i(14051),Randomize:i(77389),RemoveTileAt:i(63557),RemoveTileAtWorldXY:i(94178),RenderDebug:i(15533),ReplaceByIndex:i(27987),RunCull:i(32483),SetCollision:i(57068),SetCollisionBetween:i(37266),SetCollisionByExclusion:i(75661),SetCollisionByProperty:i(64740),SetCollisionFromCollisionGroup:i(63307),SetLayerCollisionIndex:i(9589),SetTileCollision:i(20576),SetTileIndexCallback:i(79583),SetTileLocationCallback:i(93254),Shuffle:i(32903),StaggeredCullBounds:i(61325),StaggeredCullTiles:i(54503),StaggeredTileToWorldXY:i(97202),StaggeredTileToWorldY:i(28054),StaggeredWorldToTileXY:i(15108),StaggeredWorldToTileY:i(51900),SwapByIndex:i(86560),TileToWorldX:i(97281),TileToWorldXY:i(70326),TileToWorldY:i(29650),WeightedRandomize:i(77366),WorldToTileX:i(10095),WorldToTileXY:i(85896),WorldToTileY:i(63288)}},91907:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},21829:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u={ORIENTATION:i(91907)};y.exports=u},62501:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(79291),x=i(21829),c={Components:i(81086),Parsers:i(57442),Formats:i(80341),ImageCollection:i(16536),ParseToTilemap:i(31989),Tile:i(23029),Tilemap:i(49075),TilemapCreator:i(45939),TilemapFactory:i(46029),Tileset:i(33629),TilemapLayer:i(20442),Orientation:i(91907),LayerData:i(14977),MapData:i(87010),ObjectLayer:i(48700)};c=u(!1,c,x.ORIENTATION),y.exports=c},14977:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(91907),c=i(95540),h=new u({initialize:function(o){o===void 0&&(o={}),this.name=c(o,"name","layer"),this.id=c(o,"id",0),this.x=c(o,"x",0),this.y=c(o,"y",0),this.width=c(o,"width",0),this.height=c(o,"height",0),this.tileWidth=c(o,"tileWidth",0),this.tileHeight=c(o,"tileHeight",0),this.baseTileWidth=c(o,"baseTileWidth",this.tileWidth),this.baseTileHeight=c(o,"baseTileHeight",this.tileHeight),this.orientation=c(o,"orientation",x.ORTHOGONAL),this.widthInPixels=c(o,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=c(o,"heightInPixels",this.height*this.baseTileHeight),this.alpha=c(o,"alpha",1),this.visible=c(o,"visible",!0),this.properties=c(o,"properties",[]),this.indexes=c(o,"indexes",[]),this.collideIndexes=c(o,"collideIndexes",[]),this.callbacks=c(o,"callbacks",[]),this.bodies=c(o,"bodies",[]),this.data=c(o,"data",[]),this.tilemapLayer=c(o,"tilemapLayer",null),this.hexSideLength=c(o,"hexSideLength",0),this.staggerAxis=c(o,"staggerAxis","y"),this.staggerIndex=c(o,"staggerIndex","odd")}});y.exports=h},87010:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(91907),c=i(95540),h=new u({initialize:function(o){o===void 0&&(o={}),this.name=c(o,"name","map"),this.width=c(o,"width",0),this.height=c(o,"height",0),this.infinite=c(o,"infinite",!1),this.tileWidth=c(o,"tileWidth",0),this.tileHeight=c(o,"tileHeight",0),this.widthInPixels=c(o,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=c(o,"heightInPixels",this.height*this.tileHeight),this.format=c(o,"format",null),this.orientation=c(o,"orientation",x.ORTHOGONAL),this.renderOrder=c(o,"renderOrder","right-down"),this.version=c(o,"version","1"),this.properties=c(o,"properties",{}),this.layers=c(o,"layers",[]),this.images=c(o,"images",[]),this.objects=c(o,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=c(o,"collision",{}),this.tilesets=c(o,"tilesets",[]),this.imageCollections=c(o,"imageCollections",[]),this.tiles=c(o,"tiles",[]),this.hexSideLength=c(o,"hexSideLength",0),this.staggerAxis=c(o,"staggerAxis","y"),this.staggerIndex=c(o,"staggerIndex","odd")}});y.exports=h},48700:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(95540),c=new u({initialize:function(h){h===void 0&&(h={}),this.name=x(h,"name","object layer"),this.id=x(h,"id",0),this.opacity=x(h,"opacity",1),this.properties=x(h,"properties",{}),this.propertyTypes=x(h,"propertytypes",{}),this.type=x(h,"type","objectgroup"),this.visible=x(h,"visible",!0),this.objects=x(h,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});y.exports=c},6641:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(91907),x=function(c){return c=c.toLowerCase(),c==="isometric"?u.ISOMETRIC:c==="staggered"?u.STAGGERED:c==="hexagonal"?u.HEXAGONAL:u.ORTHOGONAL};y.exports=x},46177:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(80341),x=i(2342),c=i(82593),h=i(46594),o=i(87021),r=function(a,d,n,p,g,v){var f;switch(d){case u.ARRAY_2D:f=x(a,n,p,g,v);break;case u.CSV:f=c(a,n,p,g,v);break;case u.TILED_JSON:f=h(a,n,v);break;case u.WELTMEISTER:f=o(a,n,v);break;default:console.warn("Unrecognized tilemap data format: "+d),f=null}return f};y.exports=r},2342:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(80341),x=i(14977),c=i(87010),h=i(23029),o=function(r,a,d,n,p){for(var g=new x({tileWidth:d,tileHeight:n}),v=new c({name:r,tileWidth:d,tileHeight:n,format:u.ARRAY_2D,layers:[g]}),f=[],b=a.length,C=0,_=0;_<a.length;_++){f[_]=[];for(var M=a[_],E=0;E<M.length;E++){var A=parseInt(M[E],10);isNaN(A)||A===-1?f[_][E]=p?null:new h(g,-1,E,_,d,n):f[_][E]=new h(g,A,E,_,d,n)}C===0&&(C=M.length)}return v.width=g.width=C,v.height=g.height=b,v.widthInPixels=g.widthInPixels=C*d,v.heightInPixels=g.heightInPixels=b*n,g.data=f,v};y.exports=o},82593:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(80341),x=i(2342),c=function(h,o,r,a,d){var n=o.trim().split(`
`).map(function(g){return g.split(",")}),p=x(h,n,r,a,d);return p.format=u.CSV,p};y.exports=c},6656:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(14977),x=i(23029),c=function(h,o){for(var r=[],a=0;a<h.layer.length;a++){for(var d=h.layer[a],n=new u({name:d.name,width:d.width,height:d.height,tileWidth:d.tilesize,tileHeight:d.tilesize,visible:d.visible===1}),p=[],g=[],v=0;v<d.data.length;v++){for(var f=0;f<d.data[v].length;f++){var b=d.data[v][f]-1,C;b>-1?C=new x(n,b,f,v,d.tilesize,d.tilesize):C=o?null:new x(n,-1,f,v,d.tilesize,d.tilesize),p.push(C)}g.push(p),p=[]}n.data=g,r.push(n)}return r};y.exports=c},96483:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(33629),x=function(c){for(var h=[],o=[],r=0;r<c.layer.length;r++){var a=c.layer[r],d=a.tilesetName;d!==""&&o.indexOf(d)===-1&&(o.push(d),h.push(new u(d,0,a.tilesize,a.tilesize,0,0)))}return h};y.exports=x},87021:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(80341),x=i(87010),c=i(6656),h=i(96483),o=function(r,a,d){if(a.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+r),null;for(var n=0,p=0,g=0;g<a.layer.length;g++)a.layer[g].width>n&&(n=a.layer[g].width),a.layer[g].height>p&&(p=a.layer[g].height);var v=new x({width:n,height:p,name:r,tileWidth:a.layer[0].tilesize,tileHeight:a.layer[0].tilesize,format:u.WELTMEISTER});return v.layers=c(a,d),v.tilesets=h(a),v};y.exports=o},52833:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={ParseTileLayers:i(6656),ParseTilesets:i(96483),ParseWeltmeister:i(87021)}},57442:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={FromOrientationString:i(6641),Parse:i(46177),Parse2DArray:i(2342),ParseCSV:i(82593),Impact:i(52833),Tiled:i(96761)}},51233:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(79291),x=function(c){for(var h,o,r,a,d,n=0;n<c.layers.length;n++){h=c.layers[n],a=null;for(var p=0;p<h.data.length;p++){d=h.data[p];for(var g=0;g<d.length;g++)o=d[g],!(o===null||o.index<0)&&(r=c.tiles[o.index][2],a=c.tilesets[r],o.width=a.tileWidth,o.height=a.tileHeight,a.tileProperties&&a.tileProperties[o.index-a.firstgid]&&(o.properties=u(o.properties,a.tileProperties[o.index-a.firstgid])))}}};y.exports=x},41868:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){for(var u=window.atob(i),x=u.length,c=new Array(x/4),h=0;h<x;h+=4)c[h/4]=(u.charCodeAt(h)|u.charCodeAt(h+1)<<8|u.charCodeAt(h+2)<<16|u.charCodeAt(h+3)<<24)>>>0;return c};y.exports=P},84101:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(33629),x=function(c){var h,o,r=[];for(h=0;h<c.imageCollections.length;h++)for(var a=c.imageCollections[h],d=a.images,n=0;n<d.length;n++){var p=d[n],g={x:0,y:p.height-c.tileHeight};o=new u(p.image,p.gid,p.width,p.height,0,0,void 0,void 0,g),o.updateTileData(p.width,p.height),c.tilesets.push(o)}for(h=0;h<c.tilesets.length;h++){o=c.tilesets[h];for(var v=o.tileMargin,f=o.tileMargin,b=0,C=0,_=0,M=o.firstgid;M<o.firstgid+o.total&&(r[M]=[v,f,h],v+=o.tileWidth+o.tileSpacing,b++,!(b===o.total||(C++,C===o.columns&&(v=o.tileMargin,f+=o.tileHeight+o.tileSpacing,C=0,_++,_===o.rows))));M++);}return r};y.exports=x},79677:(y,P,i)=>{/**
* @author       Seth Berrier <berriers@uwstout.edu>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(95540),x=function(c,h,o){if(!h)return{i:0,layers:c.layers,name:"",opacity:1,visible:!0,x:0,y:0};var r=h.x+u(h,"startx",0)*c.tilewidth+u(h,"offsetx",0),a=h.y+u(h,"starty",0)*c.tileheight+u(h,"offsety",0);return{i:0,layers:h.layers,name:o.name+h.name+"/",opacity:o.opacity*h.opacity,visible:o.visible&&h.visible,x:o.x+r,y:o.y+a}};y.exports=x},29920:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=2147483648,i=1073741824,u=536870912,x=function(c){var h=!!(c&P),o=!!(c&i),r=!!(c&u);c=c&536870911;var a=0,d=!1;return h&&o&&r?(a=Math.PI/2,d=!0):h&&o&&!r?(a=Math.PI,d=!1):h&&!o&&r?(a=Math.PI/2,d=!1):h&&!o&&!r?(a=0,d=!0):!h&&o&&r?(a=3*Math.PI/2,d=!1):!h&&o&&!r?(a=Math.PI,d=!0):!h&&!o&&r?(a=3*Math.PI/2,d=!0):!h&&!o&&!r&&(a=0,d=!1),{gid:c,flippedHorizontal:h,flippedVertical:o,flippedAntiDiagonal:r,rotation:a,flipped:d}};y.exports=x},12635:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(95540),x=i(79677),c=function(h){for(var o=[],r=[],a=x(h);a.i<a.layers.length||r.length>0;){if(a.i>=a.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=r.pop();continue}var d=a.layers[a.i];if(a.i++,d.type!=="imagelayer"){if(d.type==="group"){var n=x(h,d,a);r.push(a),a=n}continue}var p=u(d,"offsetx",0)+u(d,"startx",0),g=u(d,"offsety",0)+u(d,"starty",0);o.push({name:a.name+d.name,image:d.image,x:a.x+p+d.x,y:a.y+g+d.y,alpha:a.opacity*d.opacity,visible:a.visible&&d.visible,properties:u(d,"properties",{})})}return o};y.exports=c},46594:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(51233),x=i(84101),c=i(91907),h=i(62644),o=i(80341),r=i(6641),a=i(87010),d=i(12635),n=i(22611),p=i(28200),g=i(24619),v=function(f,b,C){var _=h(b),M=new a({width:_.width,height:_.height,name:f,tileWidth:_.tilewidth,tileHeight:_.tileheight,orientation:r(_.orientation),format:o.TILED_JSON,version:_.version,properties:_.properties,renderOrder:_.renderorder,infinite:_.infinite});if(M.orientation===c.HEXAGONAL)if(M.hexSideLength=_.hexsidelength,M.staggerAxis=_.staggeraxis,M.staggerIndex=_.staggerindex,M.staggerAxis==="y"){var E=(M.tileHeight-M.hexSideLength)/2;M.widthInPixels=M.tileWidth*(M.width+.5),M.heightInPixels=M.height*(M.hexSideLength+E)+E}else{var A=(M.tileWidth-M.hexSideLength)/2;M.widthInPixels=M.width*(M.hexSideLength+A)+A,M.heightInPixels=M.tileHeight*(M.height+.5)}M.layers=p(_,C),M.images=d(_);var R=g(_);return M.tilesets=R.tilesets,M.imageCollections=R.imageCollections,M.objects=n(_),M.tiles=x(M),u(M),M};y.exports=v},52205:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(18254),x=i(29920),c=function(r){return{x:r.x,y:r.y}},h=["id","name","type","rotation","properties","visible","x","y","width","height"],o=function(r,a,d){a===void 0&&(a=0),d===void 0&&(d=0);var n=u(r,h);if(n.x+=a,n.y+=d,r.gid){var p=x(r.gid);n.gid=p.gid,n.flippedHorizontal=p.flippedHorizontal,n.flippedVertical=p.flippedVertical,n.flippedAntiDiagonal=p.flippedAntiDiagonal}else r.polyline?n.polyline=r.polyline.map(c):r.polygon?n.polygon=r.polygon.map(c):r.ellipse?n.ellipse=r.ellipse:r.text?n.text=r.text:r.point?n.point=!0:n.rectangle=!0;return n};y.exports=o},22611:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(95540),x=i(52205),c=i(48700),h=i(79677),o=function(r){for(var a=[],d=[],n=h(r);n.i<n.layers.length||d.length>0;){if(n.i>=n.layers.length){if(d.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}n=d.pop();continue}var p=n.layers[n.i];if(n.i++,p.opacity*=n.opacity,p.visible=n.visible&&p.visible,p.type!=="objectgroup"){if(p.type==="group"){var g=h(r,p,n);d.push(n),n=g}continue}p.name=n.name+p.name;for(var v=n.x+u(p,"startx",0)+u(p,"offsetx",0),f=n.y+u(p,"starty",0)+u(p,"offsety",0),b=[],C=0;C<p.objects.length;C++){var _=x(p.objects[C],v,f);b.push(_)}var M=new c(p);M.objects=b,a.push(M)}return a};y.exports=o},28200:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(41868),x=i(91907),c=i(79677),h=i(6641),o=i(95540),r=i(14977),a=i(29920),d=i(23029),n=function(p,g){for(var v=o(p,"infinite",!1),f=[],b=[],C=c(p);C.i<C.layers.length||b.length>0;){if(C.i>=C.layers.length){if(b.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}C=b.pop();continue}var _=C.layers[C.i];if(C.i++,_.type!=="tilelayer"){if(_.type==="group"){var M=c(p,_,C);b.push(C),C=M}continue}if(_.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+_.name+"'");continue}else if(_.encoding&&_.encoding==="base64"){if(_.chunks)for(var E=0;E<_.chunks.length;E++)_.chunks[E].data=u(_.chunks[E].data);_.data&&(_.data=u(_.data)),delete _.encoding}var A,R,L,Y,F,N,z=[],U=0;if(v){var q=o(_,"startx",0)+_.x,Q=o(_,"starty",0)+_.y;A=new r({name:C.name+_.name,id:_.id,x:C.x+o(_,"offsetx",0)+q*p.tilewidth,y:C.y+o(_,"offsety",0)+Q*p.tileheight,width:_.width,height:_.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:C.opacity*_.opacity,visible:C.visible&&_.visible,properties:o(_,"properties",[]),orientation:h(p.orientation)}),A.orientation===x.HEXAGONAL&&(A.hexSideLength=p.hexsidelength,A.staggerAxis=p.staggeraxis,A.staggerIndex=p.staggerindex,A.staggerAxis==="y"?(F=(A.tileHeight-A.hexSideLength)/2,A.widthInPixels=A.tileWidth*(A.width+.5),A.heightInPixels=A.height*(A.hexSideLength+F)+F):(N=(A.tileWidth-A.hexSideLength)/2,A.widthInPixels=A.width*(A.hexSideLength+N)+N,A.heightInPixels=A.tileHeight*(A.height+.5)));for(var K=0;K<_.height;K++){z[K]=[null];for(var et=0;et<_.width;et++)z[K][et]=null}for(K=0,vt=_.chunks.length;K<vt;K++)for(var H=_.chunks[K],J=H.x-q,X=H.y-Q,Z=0,$=0,it=H.data.length;$<it;$++){var nt=U+J,at=Z+X;R=a(H.data[$]),R.gid>0?(L=new d(A,R.gid,nt,at,p.tilewidth,p.tileheight),L.rotation=R.rotation,L.flipX=R.flipped,z[at][nt]=L):(Y=g?null:new d(A,-1,nt,at,p.tilewidth,p.tileheight),z[at][nt]=Y),U++,U===H.width&&(Z++,U=0)}}else{A=new r({name:C.name+_.name,id:_.id,x:C.x+o(_,"offsetx",0)+_.x,y:C.y+o(_,"offsety",0)+_.y,width:_.width,height:_.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:C.opacity*_.opacity,visible:C.visible&&_.visible,properties:o(_,"properties",[]),orientation:h(p.orientation)}),A.orientation===x.HEXAGONAL&&(A.hexSideLength=p.hexsidelength,A.staggerAxis=p.staggeraxis,A.staggerIndex=p.staggerindex,A.staggerAxis==="y"?(F=(A.tileHeight-A.hexSideLength)/2,A.widthInPixels=A.tileWidth*(A.width+.5),A.heightInPixels=A.height*(A.hexSideLength+F)+F):(N=(A.tileWidth-A.hexSideLength)/2,A.widthInPixels=A.width*(A.hexSideLength+N)+N,A.heightInPixels=A.tileHeight*(A.height+.5)));for(var ht=[],dt=0,vt=_.data.length;dt<vt;dt++)R=a(_.data[dt]),R.gid>0?(L=new d(A,R.gid,U,z.length,p.tilewidth,p.tileheight),L.rotation=R.rotation,L.flipX=R.flipped,ht.push(L)):(Y=g?null:new d(A,-1,U,z.length,p.tilewidth,p.tileheight),ht.push(Y)),U++,U===_.width&&(z.push(ht),U=0,ht=[])}A.data=z,f.push(A)}return f};y.exports=n},24619:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(33629),x=i(16536),c=i(52205),h=i(57880),o=function(r){for(var a=[],d=[],n=null,p,g=0;g<r.tilesets.length;g++){var v=r.tilesets[g];if(v.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(v.image){var f=new u(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,void 0,void 0,v.tileoffset);if(r.version>1){var b=void 0,C=void 0;if(Array.isArray(v.tiles)){b=b||{},C=C||{};for(var _=0;_<v.tiles.length;_++){var M=v.tiles[_];if(M.properties){var E={};M.properties.forEach(function(K){E[K.name]=K.value}),C[M.id]=E}if(M.objectgroup&&((b[M.id]||(b[M.id]={})).objectgroup=M.objectgroup,M.objectgroup.objects)){var A=M.objectgroup.objects.map(function(K){return c(K)});b[M.id].objectgroup.objects=A}M.animation&&((b[M.id]||(b[M.id]={})).animation=M.animation),M.type&&((b[M.id]||(b[M.id]={})).type=M.type)}}Array.isArray(v.wangsets)&&(b=b||{},C=C||{},h(v.wangsets,b)),b&&(f.tileData=b,f.tileProperties=C)}else if(v.tileproperties&&(f.tileProperties=v.tileproperties),v.tiles){f.tileData=v.tiles;for(p in f.tileData){var R=f.tileData[p].objectgroup;if(R&&R.objects){var L=R.objects.map(function(K){return c(K)});f.tileData[p].objectgroup.objects=L}}}f.updateTileData(v.imagewidth,v.imageheight),a.push(f)}else{var Y=new x(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,v.properties),F=0;for(_=0;_<v.tiles.length;_++){M=v.tiles[_];var N=M.image,z=parseInt(M.id,10),U=v.firstgid+z,q=M.imagewidth,Q=M.imageheight;Y.addImage(U,N,q,Q),F=Math.max(z,F)}Y.maxId=F,d.push(Y)}n&&(n.lastgid=v.firstgid-1),n=v}return{tilesets:a,imageCollections:d}};y.exports=o},57880:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){for(var x=0;x<i.length;x++){var c=i[x],h=x;if(c.name&&c.name!==""&&(h=c.name),Array.isArray(c.wangtiles)&&c.wangtiles.length>0){var o={},r={},a,d,n;if(Array.isArray(c.edgecolors))for(a=0;a<c.edgecolors.length;a++)n=1+a,d=c.edgecolors[a],d.name!==""&&(o[n]=d.name);if(Array.isArray(c.cornercolors))for(a=0;a<c.cornercolors.length;a++)n=1+a,d=c.cornercolors[a],d.name!==""&&(r[n]=d.name);if(Array.isArray(c.colors))for(a=0;a<c.colors.length;a++)d=c.colors[a],n=1+a,d.name!==""&&(o[n]=r[n]=d.name);for(var p=[o,r,o,r,o,r,o,r],g=0;g<c.wangtiles.length;g++){var v=c.wangtiles[g],f=u[v.tileid]||(u[v.tileid]={});f=f.wangid||(f.wangid={});for(var b=[],C=0;C<Math.min(p.length,v.wangid.length);C++){if(d=v.wangid[C],d===0){b.push(void 0);continue}var _=p[C][d];if(_!==void 0){b.push(_);continue}b.push(d)}f[h]=b}}}};y.exports=P},96761:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={AssignTileProperties:i(51233),Base64Decode:i(41868),BuildTilesetIndex:i(84101),CreateGroupLayer:i(79677),ParseGID:i(29920),ParseImageLayers:i(12635),ParseJSONTiled:i(46594),ParseObject:i(52205),ParseObjectLayers:i(22611),ParseTileLayers:i(28200),ParseTilesets:i(24619)}},33385:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(37277),c=i(44594),h=i(94880),o=i(72905),r=new u({initialize:function(a){this.scene=a,this.systems=a.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],a.sys.events.once(c.BOOT,this.boot,this),a.sys.events.on(c.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var a=this.systems.events;a.on(c.PRE_UPDATE,this.preUpdate,this),a.on(c.UPDATE,this.update,this),a.once(c.SHUTDOWN,this.shutdown,this)},addEvent:function(a){var d;if(a instanceof h){if(d=a,this.removeEvent(d),d.elapsed=d.startAt,d.hasDispatched=!1,d.repeatCount=d.repeat===-1||d.loop?999999999999:d.repeat,d.delay<=0&&d.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay")}else d=new h(a);return this._pendingInsertion.push(d),d},delayedCall:function(a,d,n,p){return this.addEvent({delay:a,callback:d,args:n,callbackScope:p})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(a){Array.isArray(a)||(a=[a]);for(var d=0;d<a.length;d++){var n=a[d];o(this._pendingRemoval,n),o(this._pendingInsertion,n),o(this._active,n)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var a=this._pendingRemoval.length,d=this._pendingInsertion.length;if(!(a===0&&d===0)){var n,p;for(n=0;n<a;n++){p=this._pendingRemoval[n];var g=this._active.indexOf(p);g>-1&&this._active.splice(g,1),p.destroy()}for(n=0;n<d;n++)p=this._pendingInsertion[n],this._active.push(p);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(a,d){if(this.now=a,!this.paused){d*=this.timeScale;for(var n=0;n<this._active.length;n++){var p=this._active[n];if(!p.paused&&(p.elapsed+=d*p.timeScale,p.elapsed>=p.delay)){var g=p.elapsed-p.delay;if(p.elapsed=p.delay,!p.hasDispatched&&p.callback&&(p.hasDispatched=!0,p.callback.apply(p.callbackScope,p.args)),p.repeatCount>0){if(p.repeatCount--,g>=p.delay)for(;g>=p.delay&&p.repeatCount>0;)p.callback&&p.callback.apply(p.callbackScope,p.args),g-=p.delay,p.repeatCount--;p.elapsed=g,p.hasDispatched=!1}else p.hasDispatched&&this._pendingRemoval.push(p)}}}},shutdown:function(){var a;for(a=0;a<this._pendingInsertion.length;a++)this._pendingInsertion[a].destroy();for(a=0;a<this._active.length;a++)this._active[a].destroy();for(a=0;a<this._pendingRemoval.length;a++)this._pendingRemoval[a].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var d=this.systems.events;d.off(c.PRE_UPDATE,this.preUpdate,this),d.off(c.UPDATE,this.update,this),d.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});x.register("Clock",r,"time"),y.exports=r},96120:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(50792),c=i(39429),h=i(95540),o=i(44594),r=i(89809),a=new u({Extends:x,initialize:function(d,n){x.call(this),this.scene=d,this.systems=d.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var p=this.systems.events;p.on(o.PRE_UPDATE,this.preUpdate,this),p.on(o.UPDATE,this.update,this),p.once(o.SHUTDOWN,this.destroy,this),n&&this.add(n)},preUpdate:function(d,n){this.paused||(this.elapsed+=n*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var d,n=this.events,p=!1,g=this.systems,v;for(d=0;d<n.length;d++){var f=n[d];if(!f.complete&&f.time<=this.elapsed){if(f.complete=!0,this.totalComplete++,v=f.target?f.target:this,f.if&&!f.if.call(v,f))continue;if(f.once&&(p=!0),f.set&&f.target)for(var b in f.set)f.target[b]=f.set[b];this.iteration&&f.repeat++,f.loop&&f.repeat&&f.loop.call(v),f.tween&&(f.tweenInstance=g.tweens.add(f.tween)),f.sound&&(typeof f.sound=="string"?g.sound.play(f.sound):g.sound.play(f.sound.key,f.sound.config)),f.event&&this.emit(f.event,v),f.run&&f.run.call(v),f.stop&&this.stop()}}if(p)for(d=0;d<n.length;d++)n[d].complete&&n[d].once&&(n.splice(d,1),d--);this.totalComplete>=n.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(r.COMPLETE,this)}},play:function(d){return d===void 0&&(d=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,d&&this.reset(),this},pause:function(){this.paused=!0;for(var d=this.events,n=0;n<d.length;n++){var p=d[n];p.tweenInstance&&(p.tweenInstance.paused=!0)}return this},repeat:function(d){return(d===void 0||d===!0)&&(d=-1),d===!1&&(d=0),this.loop=d,this},resume:function(){this.paused=!1;for(var d=this.events,n=0;n<d.length;n++){var p=d[n];p.tweenInstance&&(p.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(d){d===void 0&&(d=!1),this.elapsed=0,d||(this.iteration=0);for(var n=this.events,p=0;p<n.length;p++){var g=n[p];g.complete=!1,d||(g.repeat=0),g.tweenInstance&&g.tweenInstance.stop()}return this.play(!1)},add:function(d){Array.isArray(d)||(d=[d]);var n=this.events,p=0;n.length>0&&(p=n[n.length-1].time);for(var g=0;g<d.length;g++){var v=d[g],f=h(v,"at",0),b=h(v,"in",null);b!==null&&(f=this.elapsed+b);var C=h(v,"from",null);C!==null&&(f=p+C),n.push({complete:!1,time:f,repeat:0,if:h(v,"if",null),run:h(v,"run",null),loop:h(v,"loop",null),event:h(v,"event",null),target:h(v,"target",null),set:h(v,"set",null),tween:h(v,"tween",null),sound:h(v,"sound",null),once:h(v,"once",!1),stop:h(v,"stop",!1)}),p=f}return this.complete=!1,this},clear:function(){for(var d=this.events,n=0;n<d.length;n++){var p=d[n];p.tweenInstance&&p.tweenInstance.stop()}return d=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var d=Math.min(this.totalComplete,this.events.length);return d/this.events.length},destroy:function(){var d=this.systems.events;d.off(o.PRE_UPDATE,this.preUpdate,this),d.off(o.UPDATE,this.update,this),d.off(o.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});c.register("timeline",function(d){return new a(this.scene,d)}),y.exports=a},94880:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(95540),c=new u({initialize:function(h){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(h)},reset:function(h){if(this.delay=x(h,"delay",0),this.repeat=x(h,"repeat",0),this.loop=x(h,"loop",!1),this.callback=x(h,"callback",void 0),this.callbackScope=x(h,"callbackScope",this),this.args=x(h,"args",[]),this.timeScale=x(h,"timeScale",1),this.startAt=x(h,"startAt",0),this.paused=x(h,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay<=0&&this.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var h=this.delay+this.delay*this.repeat,o=this.elapsed+this.delay*(this.repeat-this.repeatCount);return o/h}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(h){h===void 0&&(h=!1),this.elapsed=this.delay,this.hasDispatched=!h,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});y.exports=c},35945:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="complete"},89809:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={COMPLETE:i(35945)}},90291:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Clock:i(33385),Events:i(89809),Timeline:i(96120),TimerEvent:i(94880)}},40382:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(72905),x=i(83419),c=i(43491),h=i(88032),o=i(37277),r=i(44594),a=i(93109),d=i(86081),n=i(8357),p=i(43960),g=i(26012),v=new x({initialize:function(f){this.scene=f,this.events=f.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(r.UPDATE,this.update,this),this.events.once(r.SHUTDOWN,this.shutdown,this)},create:function(f){Array.isArray(f)||(f=[f]);for(var b=[],C=0;C<f.length;C++){var _=f[C];_ instanceof d||_ instanceof p?b.push(_):Array.isArray(_.tweens)?b.push(g(this,_)):b.push(n(this,_))}return b.length===1?b[0]:b},add:function(f){var b=f,C=this.tweens;return b instanceof d||b instanceof p||(Array.isArray(b.tweens)?b=g(this,b):b=n(this,b)),C.push(b.reset()),b},addMultiple:function(f){for(var b,C=[],_=this.tweens,M=0;M<f.length;M++)b=f[M],b instanceof d||b instanceof p||(Array.isArray(b.tweens)?b=g(this,b):b=n(this,b)),_.push(b.reset()),C.push(b);return C},chain:function(f){var b=g(this,f);return this.tweens.push(b.init()),b},getChainedTweens:function(f){return f.getChainedTweens()},has:function(f){return this.tweens.indexOf(f)>-1},existing:function(f){return this.has(f)||this.tweens.push(f.reset()),this},addCounter:function(f){var b=h(this,f);return this.tweens.push(b.reset()),b},stagger:function(f,b){return a(f,b)},setLagSmooth:function(f,b){return f===void 0&&(f=1/1e-8),b===void 0&&(b=0),this.maxLag=f,this.lagSkip=Math.min(b,this.maxLag),this},setFps:function(f){return f===void 0&&(f=240),this.gap=1e3/f,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(f){var b=Date.now()-this.prevTime;b>this.maxLag&&(this.startTime+=b-this.lagSkip),this.prevTime+=b;var C=this.prevTime-this.startTime,_=C-this.nextTime,M=C-this.time*1e3;return _>0||f?(C/=1e3,this.time=C,this.nextTime+=_+(_>=this.gap?4:this.gap-_)):M=0,M},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(f){f===void 0&&(f=!1);var b=this.getDelta(f);if(!(b<=0)){this.processing=!0;var C,_,M=[],E=this.tweens;for(C=0;C<E.length;C++)_=E[C],_.update(b)&&M.push(_);var A=M.length;if(A&&E.length>0){for(C=0;C<A;C++){_=M[C];var R=E.indexOf(_);R>-1&&(_.isPendingRemove()||_.isDestroyed())&&(E.splice(R,1),_.destroy())}M.length=0}this.processing=!1}},remove:function(f){return this.processing?f.setPendingRemoveState():(u(this.tweens,f),f.setRemovedState()),this},reset:function(f){return this.existing(f),f.seek(),f.setActiveState(),this},makeActive:function(f){return this.existing(f),f.setActiveState(),this},each:function(f,b){var C,_=[null];for(C=1;C<arguments.length;C++)_.push(arguments[C]);return this.tweens.forEach(function(M){_[0]=M,f.apply(b,_)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(f){var b=[],C=this.tweens;Array.isArray(f)?f=c(f):f=[f];for(var _=f.length,M=0;M<C.length;M++)for(var E=C[M],A=0;A<_;A++)!E.isDestroyed()&&E.hasTarget(f[A])&&b.push(E);return b},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(f){return this.timeScale=f,this},isTweening:function(f){for(var b=this.tweens,C,_=0;_<b.length;_++)if(C=b[_],C.isPlaying()&&C.hasTarget(f))return!0;return!1},killAll:function(){for(var f=this.processing?this.getTweens():this.tweens,b=0;b<f.length;b++)f[b].destroy();return this.processing||(f.length=0),this},killTweensOf:function(f){for(var b=this.getTweensOf(f),C=0;C<b.length;C++)b[C].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(r.UPDATE,this.update,this),this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.events=null}});o.register("TweenManager",v,"tweens"),y.exports=v},57355:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){return i&&i.hasOwnProperty(u)?i[u]:x};y.exports=P},6113:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(62640),x=i(35355),c=function(h,o){var r=u.Power0;if(typeof h=="string")if(u.hasOwnProperty(h))r=u[h];else{var a="";if(h.indexOf(".")){a=h.substring(h.indexOf(".")+1);var d=a.toLowerCase();d==="in"?a="easeIn":d==="out"?a="easeOut":d==="inout"&&(a="easeInOut")}h=x(h.substring(0,h.indexOf(".")+1)+a),u.hasOwnProperty(h)&&(r=u[h])}else typeof h=="function"&&(r=h);if(!o)return r;var n=o.slice(0);return n.unshift(0),function(p){return n[0]=p,r.apply(this,n)}};y.exports=c},91389:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(89318),x=i(77259),c=i(28392),h={bezier:u,catmull:x,catmullrom:x,linear:c},o=function(r){if(r===null)return null;var a=h.linear;return typeof r=="string"?h.hasOwnProperty(r)&&(a=h[r]):typeof r=="function"&&(a=r),a};y.exports=o},55292:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c;if(i.hasOwnProperty(u)){var h=typeof i[u];h==="function"?c=function(o,r,a,d,n,p){return i[u](o,r,a,d,n,p)}:c=function(){return i[u]}}else typeof x=="function"?c=x:c=function(){return x};return c};y.exports=P},82985:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(81076),x=function(c){var h,o=[];if(c.hasOwnProperty("props"))for(h in c.props)h.substring(0,1)!=="_"&&o.push({key:h,value:c.props[h]});else for(h in c)u.indexOf(h)===-1&&h.substring(0,1)!=="_"&&o.push({key:h,value:c[h]});return o};y.exports=x},62329:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35154),x=function(c){var h=u(c,"targets",null);return h===null||(typeof h=="function"&&(h=h.call()),Array.isArray(h)||(h=[h])),h};y.exports=x},17777:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(30976),x=i(99472);function c(d){return!!d.getActive&&typeof d.getActive=="function"}function h(d){return!!d.getStart&&typeof d.getStart=="function"}function o(d){return!!d.getEnd&&typeof d.getEnd=="function"}function r(d){return h(d)||o(d)||c(d)}var a=function(d,n){var p,g=function(K,et,H){return H},v=function(K,et,H){return H},f=null,b=typeof n;if(b==="number")g=function(){return n};else if(Array.isArray(n))v=function(){return n[0]},g=function(){return n[n.length-1]};else if(b==="string"){var C=n.toLowerCase(),_=C.substring(0,6)==="random",M=C.substring(0,3)==="int";if(_||M){var E=C.indexOf("("),A=C.indexOf(")"),R=C.indexOf(",");if(E&&A&&R){var L=parseFloat(C.substring(E+1,R)),Y=parseFloat(C.substring(R+1,A));_?g=function(){return x(L,Y)}:g=function(){return u(L,Y)}}else throw new Error("invalid random() format")}else{C=C[0];var F=parseFloat(n.substr(2));switch(C){case"+":g=function(K,et,H){return H+F};break;case"-":g=function(K,et,H){return H-F};break;case"*":g=function(K,et,H){return H*F};break;case"/":g=function(K,et,H){return H/F};break;default:g=function(){return parseFloat(n)}}}}else if(b==="function")g=n;else if(b==="object")if(r(n))c(n)&&(f=n.getActive),o(n)&&(g=n.getEnd),h(n)&&(v=n.getStart);else if(n.hasOwnProperty("value"))p=a(d,n.value);else{var N=n.hasOwnProperty("to"),z=n.hasOwnProperty("from"),U=n.hasOwnProperty("start");if(N&&(z||U)){if(p=a(d,n.to),U){var q=a(d,n.start);p.getActive=q.getEnd}if(z){var Q=a(d,n.from);p.getStart=Q.getEnd}}}return p||(p={getActive:f,getEnd:g,getStart:v}),p};y.exports=a},88032:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(70402),x=i(69902),c=i(23568),h=i(57355),o=i(6113),r=i(95540),a=i(55292),d=i(35154),n=i(17777),p=i(269),g=i(86081),v=function(f,b,C){if(b instanceof g)return b.parent=f,b;C===void 0?C=x:C=p(x,C);var _=r(b,"from",0),M=r(b,"to",1),E=[{value:_}],A=r(b,"delay",C.delay),R=r(b,"easeParams",C.easeParams),L=r(b,"ease",C.ease),Y=n("value",M),F=new g(f,E),N=F.add(0,"value",Y.getEnd,Y.getStart,Y.getActive,o(r(b,"ease",L),r(b,"easeParams",R)),a(b,"delay",A),r(b,"duration",C.duration),h(b,"yoyo",C.yoyo),r(b,"hold",C.hold),r(b,"repeat",C.repeat),r(b,"repeatDelay",C.repeatDelay),!1,!1);N.start=_,N.current=_,F.completeDelay=c(b,"completeDelay",0),F.loop=Math.round(c(b,"loop",0)),F.loopDelay=Math.round(c(b,"loopDelay",0)),F.paused=h(b,"paused",!1),F.persist=h(b,"persist",!1),F.isNumberTween=!0,F.callbackScope=d(b,"callbackScope",F);for(var z=u.TYPES,U=0;U<z.length;U++){var q=z[U],Q=d(b,q,!1);if(Q){var K=d(b,q+"Params",[]);F.setCallback(q,Q,K)}}return F};y.exports=v},93109:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(6113),x=i(35154),c=i(36383),h=function(o,r){r===void 0&&(r={});var a,d=x(r,"start",0),n=x(r,"ease",null),p=x(r,"grid",null),g=x(r,"from",0),v=g==="first",f=g==="center",b=g==="last",C=typeof g=="number",_=Array.isArray(o),M=parseFloat(_?o[0]:o),E=_?parseFloat(o[1]):0,A=Math.max(M,E);if(_&&(d+=M),p){var R=p[0],L=p[1],Y=0,F=0,N=0,z=0,U=[];b?(Y=R-1,F=L-1):C?(Y=g%R,F=Math.floor(g/R)):f&&(Y=(R-1)/2,F=(L-1)/2);for(var q=c.MIN_SAFE_INTEGER,Q=0;Q<L;Q++){U[Q]=[];for(var K=0;K<R;K++){N=Y-K,z=F-Q;var et=Math.sqrt(N*N+z*z);et>q&&(q=et),U[Q][K]=et}}}var H=n?u(n):null;return p?a=function(J,X,Z,$){var it=0,nt=$%R,at=Math.floor($/R);nt>=0&&nt<R&&at>=0&&at<L&&(it=U[at][nt]);var ht;if(_){var dt=E-M;H?ht=it/q*dt*H(it/q):ht=it/q*dt}else H?ht=it*M*H(it/q):ht=it*M;return ht+d}:a=function(J,X,Z,$,it){it--;var nt;v?nt=$:f?nt=Math.abs(it/2-$):b?nt=it-$:C&&(nt=Math.abs(g-$));var at;if(_){var ht;f?ht=(E-M)/it*(nt*2):ht=(E-M)/it*nt,H?at=ht*H(nt/it):at=ht}else H?at=it*A*H(nt/it):at=nt*M;return at+d},a};y.exports=h},8357:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(70402),x=i(69902),c=i(23568),h=i(57355),o=i(6113),r=i(95540),a=i(91389),d=i(55292),n=i(82985),p=i(62329),g=i(35154),v=i(17777),f=i(269),b=i(86081),C=function(_,M,E){if(M instanceof b)return M.parent=_,M;E===void 0?E=x:E=f(x,E);var A=p(M);!A&&E.targets&&(A=E.targets);for(var R=n(M),L=r(M,"delay",E.delay),Y=r(M,"duration",E.duration),F=r(M,"easeParams",E.easeParams),N=r(M,"ease",E.ease),z=r(M,"hold",E.hold),U=r(M,"repeat",E.repeat),q=r(M,"repeatDelay",E.repeatDelay),Q=h(M,"yoyo",E.yoyo),K=h(M,"flipX",E.flipX),et=h(M,"flipY",E.flipY),H=r(M,"interpolation",E.interpolation),J=function(gt,wt,bt,xt){if(bt==="texture"){var Pt=xt,Ot=void 0;Array.isArray(xt)?(Pt=xt[0],Ot=xt[1]):xt.hasOwnProperty("value")?(Pt=xt.value,Array.isArray(xt.value)?(Pt=xt.value[0],Ot=xt.value[1]):typeof xt.value=="string"&&(Pt=xt.value)):typeof xt=="string"&&(Pt=xt),gt.addFrame(wt,Pt,Ot,d(xt,"delay",L),r(xt,"duration",Y),r(xt,"hold",z),r(xt,"repeat",U),r(xt,"repeatDelay",q),h(xt,"flipX",K),h(xt,"flipY",et))}else{var Et=v(bt,xt),Tt=a(r(xt,"interpolation",H));gt.add(wt,bt,Et.getEnd,Et.getStart,Et.getActive,o(r(xt,"ease",N),r(xt,"easeParams",F)),d(xt,"delay",L),r(xt,"duration",Y),h(xt,"yoyo",Q),r(xt,"hold",z),r(xt,"repeat",U),r(xt,"repeatDelay",q),h(xt,"flipX",K),h(xt,"flipY",et),Tt,Tt?xt:null)}},X=new b(_,A),Z=0;Z<R.length;Z++)for(var $=R[Z].key,it=R[Z].value,nt=0;nt<A.length;nt++)$==="scale"&&!A[nt].hasOwnProperty("scale")?(J(X,nt,"scaleX",it),J(X,nt,"scaleY",it)):J(X,nt,$,it);X.completeDelay=c(M,"completeDelay",0),X.loop=Math.round(c(M,"loop",0)),X.loopDelay=Math.round(c(M,"loopDelay",0)),X.paused=h(M,"paused",!1),X.persist=h(M,"persist",!1),X.callbackScope=r(M,"callbackScope",X);for(var at=u.TYPES,ht=0;ht<at.length;ht++){var dt=at[ht],vt=g(M,dt,!1);if(vt){var ft=g(M,dt+"Params",[]);X.setCallback(dt,vt,ft)}}return X};y.exports=C},26012:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(70402),x=i(23568),c=i(57355),h=i(62329),o=i(35154),r=i(8357),a=i(43960),d=function(n,p){if(p instanceof a)return p.parent=n,p;var g=new a(n);g.startDelay=o(p,"delay",0),g.completeDelay=x(p,"completeDelay",0),g.loop=Math.round(x(p,"loop",o(p,"repeat",0))),g.loopDelay=Math.round(x(p,"loopDelay",o(p,"repeatDelay",0))),g.paused=c(p,"paused",!1),g.persist=c(p,"persist",!1),g.callbackScope=o(p,"callbackScope",g);var v,f=u.TYPES;for(v=0;v<f.length;v++){var b=f[v],C=o(p,b,!1);if(C){var _=o(p,b+"Params",[]);g.setCallback(b,C,_)}}var M=o(p,"tweens",null);if(Array.isArray(M)){var E=[],A=h(p),R=void 0;for(A&&(R={targets:A}),v=0;v<M.length;v++)E.push(r(g,M[v],R));g.add(E)}return g};y.exports=d},30231:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={GetBoolean:i(57355),GetEaseFunction:i(6113),GetInterpolationFunction:i(91389),GetNewValue:i(55292),GetProps:i(82985),GetTargets:i(62329),GetValueOp:i(17777),NumberTweenBuilder:i(88032),StaggerBuilder:i(93109),TweenBuilder:i(8357)}},73685:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="active"},98540:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="complete"},67233:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="loop"},2859:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="pause"},98336:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="repeat"},25764:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="resume"},32193:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="start"},84371:y=>{/**
* @author       samme
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="stop"},70766:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="update"},55659:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports="yoyo"},842:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={TWEEN_ACTIVE:i(73685),TWEEN_COMPLETE:i(98540),TWEEN_LOOP:i(67233),TWEEN_PAUSE:i(2859),TWEEN_RESUME:i(25764),TWEEN_REPEAT:i(98336),TWEEN_START:i(32193),TWEEN_STOP:i(84371),TWEEN_UPDATE:i(70766),TWEEN_YOYO:i(55659)}},43066:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u={States:i(86353),Builders:i(30231),Events:i(842),TweenManager:i(40382),Tween:i(86081),TweenData:i(48177),TweenFrameData:i(42220),BaseTween:i(70402),TweenChain:i(43960)};y.exports=u},70402:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(50792),c=i(842),h=i(86353),o=new u({Extends:x,initialize:function(r){x.call(this),this.parent=r,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=h.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(r){return this.timeScale=r,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(c.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(c.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(c.TWEEN_COMPLETE,"onComplete")},complete:function(r){return r===void 0&&(r=0),r?(this.setCompleteDelayState(),this.countdown=r):this.onCompleteHandler(),this},completeAfterLoop:function(r){return r===void 0&&(r=0),this.loopCounter>r&&(this.loopCounter=r),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(c.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(r){this.countdown-=r,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(c.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(r){return this.countdown-=r,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(c.TWEEN_START,"onStart"),r=0),r},updateCompleteDelay:function(r){this.countdown-=r,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(r,a,d){return d===void 0&&(d=[]),this.callbacks.hasOwnProperty(r)&&(this.callbacks[r]={func:a,params:d}),this},setPendingState:function(){this.state=h.PENDING},setActiveState:function(){this.state=h.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=h.LOOP_DELAY},setCompleteDelayState:function(){this.state=h.COMPLETE_DELAY},setStartDelayState:function(){this.state=h.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=h.PENDING_REMOVE},setRemovedState:function(){this.state=h.REMOVED},setFinishedState:function(){this.state=h.FINISHED},setDestroyedState:function(){this.state=h.DESTROYED},isPending:function(){return this.state===h.PENDING},isActive:function(){return this.state===h.ACTIVE},isLoopDelayed:function(){return this.state===h.LOOP_DELAY},isCompleteDelayed:function(){return this.state===h.COMPLETE_DELAY},isStartDelayed:function(){return this.state===h.START_DELAY},isPendingRemove:function(){return this.state===h.PENDING_REMOVE},isRemoved:function(){return this.state===h.REMOVED},isFinished:function(){return this.state===h.FINISHED},isDestroyed:function(){return this.state===h.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(r){r.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});o.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],y.exports=o},95042:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(83419),x=i(842),c=i(86353),h=new u({initialize:function(o,r,a,d,n,p,g,v,f,b){this.tween=o,this.targetIndex=r,this.duration=d<=0?.01:d,this.totalDuration=0,this.delay=0,this.getDelay=a,this.yoyo=n,this.hold=p,this.repeat=g,this.repeatDelay=v,this.repeatCounter=0,this.flipX=f,this.flipY=b,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(o){o===void 0&&(o=this.current),this.tween.targets[this.targetIndex][this.key]=o},setCreatedState:function(){this.state=c.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=c.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=c.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=c.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=c.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=c.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=c.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=c.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===c.CREATED},isDelayed:function(){return this.state===c.DELAY},isPendingRender:function(){return this.state===c.PENDING_RENDER},isPlayingForward:function(){return this.state===c.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===c.PLAYING_BACKWARD},isHolding:function(){return this.state===c.HOLD_DELAY},isRepeating:function(){return this.state===c.REPEAT_DELAY},isComplete:function(){return this.state===c.COMPLETE},setStateFromEnd:function(o){this.yoyo?this.onRepeat(o,!0,!0):this.repeatCounter>0?this.onRepeat(o,!0,!1):this.setCompleteState()},setStateFromStart:function(o){this.repeatCounter>0?this.onRepeat(o,!1):this.setCompleteState()},reset:function(){var o=this.tween,r=o.totalTargets,a=this.targetIndex,d=o.targets[a],n=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(d,n,0,a,r,o),this.repeatCounter=this.repeat===-1?c.MAX:this.repeat,this.setPendingRenderState();var p=this.duration+this.hold;this.yoyo&&(p+=this.duration);var g=p+this.repeatDelay;this.totalDuration=this.delay+p,this.repeat===-1?(this.totalDuration+=g*c.MAX,o.isInfinite=!0):this.repeat>0&&(this.totalDuration+=g*this.repeat),this.totalDuration>o.duration&&(o.duration=this.totalDuration),this.delay<o.startDelay&&(o.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(o,r,a){var d=this.tween,n=d.totalTargets,p=this.targetIndex,g=d.targets[p],v=this.key,f=v!=="texture";if(this.elapsed=o,this.progress=o/this.duration,this.flipX&&g.toggleFlipX(),this.flipY&&g.toggleFlipY(),f&&(r||a)&&(this.start=this.getStartValue(g,v,this.start,p,n,d)),a){this.setPlayingBackwardState(),this.dispatchEvent(x.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,f&&(this.end=this.getEndValue(g,v,this.start,p,n,d)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-o,f&&(this.current=this.start,g[v]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(x.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});y.exports=h},69902:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};y.exports=P},81076:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},86081:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(70402),x=i(83419),c=i(842),h=i(44603),o=i(39429),r=i(36383),a=i(86353),d=i(48177),n=i(42220),p=new x({Extends:u,initialize:function(g,v){u.call(this,g),this.targets=v,this.totalTargets=v.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.isNumberTween=!1},add:function(g,v,f,b,C,_,M,E,A,R,L,Y,F,N,z,U){var q=new d(this,g,v,f,b,C,_,M,E,A,R,L,Y,F,N,z,U);return this.totalData=this.data.push(q),q},addFrame:function(g,v,f,b,C,_,M,E,A,R){var L=new n(this,g,v,f,b,C,_,M,E,A,R);return this.totalData=this.data.push(L),L},getValue:function(g){g===void 0&&(g=0);var v=null;return this.data&&(v=this.data[g].current),v},hasTarget:function(g){return this.targets&&this.targets.indexOf(g)!==-1},updateTo:function(g,v,f){if(f===void 0&&(f=!1),g!=="texture")for(var b=0;b<this.totalData;b++){var C=this.data[b];C.key===g&&(C.isPlayingForward()||C.isPlayingBackward())&&(C.end=v,f&&(C.start=C.current))}return this},restart:function(){switch(this.state){case a.REMOVED:case a.FINISHED:this.seek(),this.parent.makeActive(this);break;case a.PENDING:case a.PENDING_REMOVE:this.parent.reset(this);break;case a.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(c.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,u.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(g,v,f){if(g===void 0&&(g=0),v===void 0&&(v=16.6),f===void 0&&(f=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;f||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive");var b=this.paused;if(this.paused=!1,g>0){for(var C=Math.floor(g/v),_=g-C*v,M=0;M<C;M++)this.update(v);_>0&&this.update(_)}return this.paused=b,this.isSeeking=!1,this},initTweenData:function(g){g===void 0&&(g=!1),this.duration=0,this.startDelay=r.MAX_SAFE_INTEGER;for(var v=this.data,f=0;f<this.totalData;f++)v[f].reset(g);this.duration=Math.max(this.duration,.01);var b=this.duration,C=this.completeDelay,_=this.loopCounter,M=this.loopDelay;_>0?this.totalDuration=b+C+(b+M)*_:this.totalDuration=b+C},reset:function(g){return g===void 0&&(g=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=a.MAX),g||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive")),this},update:function(g){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.paused||this.isFinished())return!1;if(g*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(g),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(g),!1;this.hasStarted||(this.startDelay-=g,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(c.TWEEN_START,"onStart"),g=0));var v=!1;if(this.isActive())for(var f=this.data,b=0;b<this.totalData;b++)f[b].update(g)&&(v=!0);this.elapsed+=g,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=g,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),v||this.nextState();var C=this.isPendingRemove();return C&&this.persist&&(this.setFinishedState(),C=!1),C},forward:function(g){return this.update(g),this},rewind:function(g){return this.update(-g),this},dispatchEvent:function(g,v){if(!this.isSeeking){if(this.emit(g,this,this.targets),!this.callbacks)return;var f=this.callbacks[v];f&&f.func.apply(this.callbackScope,[this,this.targets].concat(f.params))}},destroy:function(){u.prototype.destroy.call(this),this.targets=null}});o.register("tween",function(g){return this.scene.sys.tweens.add(g)}),h.register("tween",function(g){return this.scene.sys.tweens.create(g)}),y.exports=p},43960:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(72905),x=i(70402),c=i(83419),h=i(842),o=i(44603),r=i(39429),a=i(86353),d=new c({Extends:x,initialize:function(n){x.call(this,n),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?a.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(n){var p=this.parent.create(n);Array.isArray(p)||(p=[p]);for(var g=this.data,v=0;v<p.length;v++){var f=p[v];f.parent=this,g.push(f.reset())}return this.totalData=g.length,this},remove:function(n){return u(this.data,n),n.setRemovedState(),n===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(n){for(var p=this.data,g=0;g<this.totalData;g++)if(p[g].hasTarget(n))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(n){return n.seek(),n.setActiveState(),this},makeActive:function(n){return n.reset(),n.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(h.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var n=this.data,p=this.totalData,g=0;g<p;g++)n[g].reset(!1);this.setCurrentTween(0)},update:function(n){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.isFinished()||this.paused)return!1;if(n*=this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(n),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(n),!1;this.hasStarted||(this.startDelay-=n,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(h.TWEEN_START,"onStart"),n=0));var p=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(n)&&this.nextTween()&&this.nextState(),p=this.isPendingRemove(),p&&this.persist&&(this.setFinishedState(),p=!1)),p},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(n){this.currentIndex=n,this.currentTween=this.data[n],this.currentTween.setActiveState()},dispatchEvent:function(n,p){this.emit(n,this);var g=this.callbacks[p];g&&g.func.apply(this.callbackScope,[this].concat(g.params))},destroy:function(){x.prototype.destroy.call(this),this.currentTween=null}});r.register("tweenchain",function(n){return this.scene.sys.tweens.chain(n)}),o.register("tweenchain",function(n){return this.scene.sys.tweens.create(n)}),y.exports=d},48177:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(95042),x=i(45319),c=i(83419),h=i(842),o=new c({Extends:u,initialize:function(r,a,d,n,p,g,v,f,b,C,_,M,E,A,R,L,Y){u.call(this,r,a,f,b,C,_,M,E,A,R),this.key=d,this.getActiveValue=g,this.getEndValue=n,this.getStartValue=p,this.ease=v,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=L,this.interpolationData=Y},reset:function(r){u.prototype.reset.call(this);var a=this.tween.targets[this.targetIndex],d=this.key;r&&(a[d]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(a[d]=this.getActiveValue(a,d,0))},update:function(r){var a=this.tween,d=a.totalTargets,n=this.targetIndex,p=a.targets[n],g=this.key;if(!p)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(h.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(p,g,p[g],n,d,a),this.end=this.getEndValue(p,g,this.start,n,d,a),this.current=this.start,p[g]=this.start,this.setPlayingForwardState(),!0;var v=this.isPlayingForward(),f=this.isPlayingBackward();if(v||f){var b=this.elapsed,C=this.duration,_=0,M=!1;b+=r,b>=C?(_=b-C,b=C,M=!0):b<0&&(b=0);var E=x(b/C,0,1);this.elapsed=b,this.progress=E,this.previous=this.current,v||(E=1-E);var A=this.ease(E);this.interpolation?this.current=this.interpolation(this.interpolationData,A):this.current=this.start+(this.end-this.start)*A,p[g]=this.current,M&&(v?(a.isNumberTween&&(this.current=this.end,p[g]=this.current),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(_)):(a.isNumberTween&&(this.current=this.start,p[g]=this.current),this.setStateFromStart(_))),this.dispatchEvent(h.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,a){var d=this.tween;if(!d.isSeeking){var n=d.targets[this.targetIndex],p=this.key,g=this.current,v=this.previous;d.emit(r,d,p,n,g,v);var f=d.callbacks[a];f&&f.func.apply(d.callbackScope,[d,n,p,g,v].concat(f.params))}},destroy:function(){u.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});y.exports=o},42220:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(95042),x=i(45319),c=i(83419),h=i(842),o=new c({Extends:u,initialize:function(r,a,d,n,p,g,v,f,b,C,_){u.call(this,r,a,p,g,!1,v,f,b,C,_),this.key="texture",this.startTexture=null,this.endTexture=d,this.startFrame=null,this.endFrame=n,this.yoyo=f!==0},reset:function(r){u.prototype.reset.call(this);var a=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=a.texture.key,this.startFrame=a.frame.name),r&&a.setTexture(this.startTexture,this.startFrame)},update:function(r){var a=this.tween,d=this.targetIndex,n=a.targets[d];if(!n)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(h.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&n.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var p=this.isPlayingForward(),g=this.isPlayingBackward();if(p||g){var v=this.elapsed,f=this.duration,b=0,C=!1;v+=r,v>=f?(b=v-f,v=f,C=!0):v<0&&(v=0);var _=x(v/f,0,1);this.elapsed=v,this.progress=_,C&&(p?(n.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(b)):(n.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(b))),this.dispatchEvent(h.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,a){var d=this.tween;if(!d.isSeeking){var n=d.targets[this.targetIndex],p=this.key;d.emit(r,d,p,n);var g=d.callbacks[a];g&&g.func.apply(d.callbackScope,[d,n,p].concat(g.params))}},destroy:function(){u.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});y.exports=o},86353:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};y.exports=P},83419:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/function P(o){return!!o.get&&typeof o.get=="function"||!!o.set&&typeof o.set=="function"}function i(o,r,a){var d=a?o[r]:Object.getOwnPropertyDescriptor(o,r);return!a&&d.value&&typeof d.value=="object"&&(d=d.value),d&&P(d)?(typeof d.enumerable>"u"&&(d.enumerable=!0),typeof d.configurable>"u"&&(d.configurable=!0),d):!1}function u(o,r){var a=Object.getOwnPropertyDescriptor(o,r);return a?(a.value&&typeof a.value=="object"&&(a=a.value),a.configurable===!1):!1}function x(o,r,a,d){for(var n in r)if(r.hasOwnProperty(n)){var p=i(r,n,a);if(p!==!1){var g=d||o;if(u(g.prototype,n)){if(h.ignoreFinals)continue;throw new Error("cannot override final property '"+n+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(o.prototype,n,p)}else o.prototype[n]=r[n]}}function c(o,r){if(r){Array.isArray(r)||(r=[r]);for(var a=0;a<r.length;a++)x(o,r[a].prototype||r[a])}}function h(o){o||(o={});var r,a;if(o.initialize){if(typeof o.initialize!="function")throw new Error("initialize must be a function");r=o.initialize,delete o.initialize}else if(o.Extends){var d=o.Extends;r=function(){d.apply(this,arguments)}}else r=function(){};o.Extends?(r.prototype=Object.create(o.Extends.prototype),r.prototype.constructor=r,a=o.Extends,delete o.Extends):r.prototype.constructor=r;var n=null;return o.Mixins&&(n=o.Mixins,delete o.Mixins),c(r,n),x(r,o,!0,a),r}h.extend=x,h.mixin=c,h.ignoreFinals=!1,y.exports=h},29747:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(){};y.exports=P},20242:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(){return null};y.exports=P},71146:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h){if(h===void 0&&(h=i),x>0){var o=x-i.length;if(o<=0)return null}if(!Array.isArray(u))return i.indexOf(u)===-1?(i.push(u),c&&c.call(h,u),u):null;for(var r=u.length-1;r>=0;)i.indexOf(u[r])!==-1&&u.splice(r,1),r--;if(r=u.length,r===0)return null;x>0&&r>o&&(u.splice(o),r=o);for(var a=0;a<r;a++){var d=u[a];i.push(d),c&&c.call(h,d)}return u};y.exports=P},51067:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c,h,o){if(x===void 0&&(x=0),o===void 0&&(o=i),c>0){var r=c-i.length;if(r<=0)return null}if(!Array.isArray(u))return i.indexOf(u)===-1?(i.splice(x,0,u),h&&h.call(o,u),u):null;for(var a=u.length-1;a>=0;)i.indexOf(u[a])!==-1&&u.pop(),a--;if(a=u.length,a===0)return null;c>0&&a>r&&(u.splice(r),a=r);for(var d=a-1;d>=0;d--){var n=u[d];i.splice(x,0,n),h&&h.call(o,n)}return u};y.exports=P},66905:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=i.indexOf(u);return x!==-1&&x<i.length&&(i.splice(x,1),i.push(u)),u};y.exports=P},21612:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(82011),x=function(c,h,o,r,a){r===void 0&&(r=0),a===void 0&&(a=c.length);var d=0;if(u(c,r,a))for(var n=r;n<a;n++){var p=c[n];p[h]===o&&d++}return d};y.exports=x},95428:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c,h=[null];for(c=3;c<arguments.length;c++)h.push(arguments[c]);for(c=0;c<i.length;c++)h[0]=i[c],u.apply(x,h);return i};y.exports=P},36914:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(82011),x=function(c,h,o,r,a){if(r===void 0&&(r=0),a===void 0&&(a=c.length),u(c,r,a)){var d,n=[null];for(d=5;d<arguments.length;d++)n.push(arguments[d]);for(d=r;d<a;d++)n[0]=c[d],h.apply(o,n)}return c};y.exports=x},81957:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){if(u.length){if(u.length===1)return u[0]}else return NaN;var c=1,h,o;if(x){if(i<u[0][x])return u[0];for(;u[c][x]<i;)c++}else for(;u[c]<i;)c++;return c>u.length&&(c=u.length),x?(h=u[c-1][x],o=u[c][x],o-i<=i-h?u[c]:u[c-1]):(h=u[c-1],o=u[c],o-i<=i-h?o:h)};y.exports=P},43491:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){u===void 0&&(u=[]);for(var x=0;x<i.length;x++)Array.isArray(i[x])?P(i[x],u):u.push(i[x]);return u};y.exports=P},46710:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(82011),x=function(c,h,o,r,a){r===void 0&&(r=0),a===void 0&&(a=c.length);var d=[];if(u(c,r,a))for(var n=r;n<a;n++){var p=c[n];(!h||h&&o===void 0&&p.hasOwnProperty(h)||h&&o!==void 0&&p[h]===o)&&d.push(p)}return d};y.exports=x},58731:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(82011),x=function(c,h,o,r,a){if(r===void 0&&(r=0),a===void 0&&(a=c.length),r!==-1){if(u(c,r,a))for(var d=r;d<a;d++){var n=c[d];if(!h||h&&o===void 0&&n.hasOwnProperty(h)||h&&o!==void 0&&n[h]===o)return n}}else if(u(c,0,a))for(var d=a;d>=0;d--){var n=c[d];if(!h||h&&o===void 0&&n.hasOwnProperty(h)||h&&o!==void 0&&n[h]===o)return n}return null};y.exports=x},26546:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){u===void 0&&(u=0),x===void 0&&(x=i.length);var c=u+Math.floor(Math.random()*x);return i[c]===void 0?null:i[c]};y.exports=P},85835:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){if(u===x)return i;var c=i.indexOf(u),h=i.indexOf(x);if(c<0||h<0)throw new Error("Supplied items must be elements of the same array");return c>h||(i.splice(c,1),h=i.indexOf(x),i.splice(h+1,0,u)),i};y.exports=P},83371:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){if(u===x)return i;var c=i.indexOf(u),h=i.indexOf(x);if(c<0||h<0)throw new Error("Supplied items must be elements of the same array");return c<h||(i.splice(c,1),h===0?i.unshift(u):i.splice(h,0,u)),i};y.exports=P},70864:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=i.indexOf(u);if(x>0){var c=i[x-1],h=i.indexOf(c);i[x]=c,i[h]=u}return i};y.exports=P},69693:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=i.indexOf(u);if(c===-1||x<0||x>=i.length)throw new Error("Supplied index out of bounds");return c!==x&&(i.splice(c,1),i.splice(x,0,u)),u};y.exports=P},40853:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=i.indexOf(u);if(x!==-1&&x<i.length-1){var c=i[x+1],h=i.indexOf(c);i[x]=c,i[h]=u}return i};y.exports=P},20283:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){var h=[],o,r=!1;if((x||c)&&(r=!0,x||(x=""),c||(c="")),u<i)for(o=i;o>=u;o--)r?h.push(x+o.toString()+c):h.push(o);else for(o=i;o<=u;o++)r?h.push(x+o.toString()+c):h.push(o);return h};y.exports=P},593:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(2284),x=function(c,h,o){c===void 0&&(c=0),h===void 0&&(h=null),o===void 0&&(o=1),h===null&&(h=c,c=0);for(var r=[],a=Math.max(u((h-c)/(o||1)),0),d=0;d<a;d++)r.push(c),c+=o;return r};y.exports=x},43886:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/function P(x,c,h){var o=x[c];x[c]=x[h],x[h]=o}function i(x,c){return x<c?-1:x>c?1:0}var u=function(x,c,h,o,r){for(h===void 0&&(h=0),o===void 0&&(o=x.length-1),r===void 0&&(r=i);o>h;){if(o-h>600){var a=o-h+1,d=c-h+1,n=Math.log(a),p=.5*Math.exp(2*n/3),g=.5*Math.sqrt(n*p*(a-p)/a)*(d-a/2<0?-1:1),v=Math.max(h,Math.floor(c-d*p/a+g)),f=Math.min(o,Math.floor(c+(a-d)*p/a+g));u(x,c,v,f,r)}var b=x[c],C=h,_=o;for(P(x,h,c),r(x[o],b)>0&&P(x,h,o);C<_;){for(P(x,C,_),C++,_--;r(x[C],b)<0;)C++;for(;r(x[_],b)>0;)_--}r(x[h],b)===0?P(x,h,_):(_++,P(x,_,o)),_<=c&&(h=_+1),c<=_&&(o=_-1)}};y.exports=u},88492:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35154),x=i(33680),c=function(o,r,a){for(var d=[],n=0;n<o.length;n++)for(var p=0;p<r.length;p++)for(var g=0;g<a;g++)d.push({a:o[n],b:r[p]});return d},h=function(o,r,a){var d=u(a,"max",0),n=u(a,"qty",1),p=u(a,"random",!1),g=u(a,"randomB",!1),v=u(a,"repeat",0),f=u(a,"yoyo",!1),b=[];if(g&&x(r),v===-1)if(d===0)v=0;else{var C=o.length*r.length*n;f&&(C*=2),v=Math.ceil(d/C)}for(var _=0;_<=v;_++){var M=c(o,r,n);p&&x(M),b=b.concat(M),f&&(M.reverse(),b=b.concat(M))}return d&&b.splice(d),b};y.exports=h},72905:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(19133),x=function(c,h,o,r){r===void 0&&(r=c);var a;if(!Array.isArray(h))return a=c.indexOf(h),a!==-1?(u(c,a),o&&o.call(r,h),h):null;for(var d=h.length-1,n=[];d>=0;){var p=h[d];a=c.indexOf(p),a!==-1&&(u(c,a),n.push(p),o&&o.call(r,p)),d--}return n};y.exports=x},60248:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(19133),x=function(c,h,o,r){if(r===void 0&&(r=c),h<0||h>c.length-1)throw new Error("Index out of bounds");var a=u(c,h);return o&&o.call(r,a),a};y.exports=x},81409:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(82011),x=function(c,h,o,r,a){if(h===void 0&&(h=0),o===void 0&&(o=c.length),a===void 0&&(a=c),u(c,h,o)){var d=o-h,n=c.splice(h,d);if(r)for(var p=0;p<n.length;p++){var g=n[p];r.call(a,g)}return n}else return[]};y.exports=x},31856:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(19133),x=function(c,h,o){h===void 0&&(h=0),o===void 0&&(o=c.length);var r=h+Math.floor(Math.random()*o);return u(c,r)};y.exports=x},42169:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=i.indexOf(u),h=i.indexOf(x);return c!==-1&&h===-1?(i[c]=x,!0):!1};y.exports=P},86003:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){u===void 0&&(u=1);for(var x=null,c=0;c<u;c++)x=i.shift(),i.push(x);return x};y.exports=P},49498:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){u===void 0&&(u=1);for(var x=null,c=0;c<u;c++)x=i.pop(),i.unshift(x);return x};y.exports=P},82011:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){var h=i.length;if(u<0||u>=h||u>=x||x>h){if(c)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};y.exports=P},89545:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){var x=i.indexOf(u);return x!==-1&&x>0&&(i.splice(x,1),i.unshift(u)),u};y.exports=P},17810:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(82011),x=function(c,h,o,r,a){if(r===void 0&&(r=0),a===void 0&&(a=c.length),u(c,r,a))for(var d=r;d<a;d++){var n=c[d];n.hasOwnProperty(h)&&(n[h]=o)}return c};y.exports=x},33680:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){for(var u=i.length-1;u>0;u--){var x=Math.floor(Math.random()*(u+1)),c=i[u];i[u]=i[x],i[x]=c}return i};y.exports=P},90126:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u=/\D/g;return i.sort(function(x,c){return parseInt(x.replace(u,""),10)-parseInt(c.replace(u,""),10)}),i};y.exports=P},19133:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){if(!(u>=i.length)){for(var x=i.length-1,c=i[u],h=u;h<x;h++)i[h]=i[h+1];return i.length=x,c}};y.exports=P},19186:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @author       Angry Bytes (and contributors)
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(82264);function x(r,a){return String(r).localeCompare(a)}function c(r,a){var d=r.length;if(d<=1)return r;for(var n=new Array(d),p=1;p<d;p*=2){h(r,a,p,n);var g=r;r=n,n=g}return r}function h(r,a,d,n){var p=r.length,g=0,v=d*2,f,b,C,_,M;for(f=0;f<p;f+=v)for(b=f+d,C=b+d,b>p&&(b=p),C>p&&(C=p),_=f,M=b;;)if(_<b&&M<C)a(r[_],r[M])<=0?n[g++]=r[_++]:n[g++]=r[M++];else if(_<b)n[g++]=r[_++];else if(M<C)n[g++]=r[M++];else break}var o=function(r,a){if(a===void 0&&(a=x),!r||r.length<2)return r;if(u.features.stableSort)return r.sort(a);var d=c(r,a);return d!==r&&h(d,null,r.length,r),r};y.exports=o},25630:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){if(u===x)return i;var c=i.indexOf(u),h=i.indexOf(x);if(c<0||h<0)throw new Error("Supplied items must be elements of the same array");return i[c]=x,i[h]=u,i};y.exports=P},37105:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Matrix:i(54915),Add:i(71146),AddAt:i(51067),BringToTop:i(66905),CountAllMatching:i(21612),Each:i(95428),EachInRange:i(36914),FindClosestInSorted:i(81957),Flatten:i(43491),GetAll:i(46710),GetFirst:i(58731),GetRandom:i(26546),MoveDown:i(70864),MoveTo:i(69693),MoveUp:i(40853),MoveAbove:i(85835),MoveBelow:i(83371),NumberArray:i(20283),NumberArrayStep:i(593),QuickSelect:i(43886),Range:i(88492),Remove:i(72905),RemoveAt:i(60248),RemoveBetween:i(81409),RemoveRandomElement:i(31856),Replace:i(42169),RotateLeft:i(86003),RotateRight:i(49498),SafeRange:i(82011),SendToBack:i(89545),SetAll:i(17810),Shuffle:i(33680),SortByDigits:i(90126),SpliceOne:i(19133),StableSort:i(19186),Swap:i(25630)}},86922:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){if(!Array.isArray(i)||!Array.isArray(i[0]))return!1;for(var u=i[0].length,x=1;x<i.length;x++)if(i[x].length!==u)return!1;return!0};y.exports=P},63362:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(41836),x=i(86922),c=function(h){var o="";if(!x(h))return o;for(var r=0;r<h.length;r++){for(var a=0;a<h[r].length;a++){var d=h[r][a].toString();d!=="undefined"?o+=u(d,2):o+="?",a<h[r].length-1&&(o+=" |")}if(r<h.length-1){o+=`
`;for(var n=0;n<h[r].length;n++)o+="---",n<h[r].length-1&&(o+="+");o+=`
`}}return o};y.exports=c},92598:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.reverse()};y.exports=P},21224:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){for(var u=0;u<i.length;u++)i[u].reverse();return i};y.exports=P},98717:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(37829),x=function(c){return u(c,180)};y.exports=x},44657:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(37829),x=function(c,h){h===void 0&&(h=1);for(var o=0;o<h;o++)c=u(c,90);return c};y.exports=x},37829:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(86922),x=i(2429),c=function(h,o){if(o===void 0&&(o=90),!u(h))return null;if(typeof o!="string"&&(o=(o%360+360)%360),o===90||o===-270||o==="rotateLeft")h=x(h),h.reverse();else if(o===-90||o===270||o==="rotateRight")h.reverse(),h=x(h);else if(Math.abs(o)===180||o==="rotate180"){for(var r=0;r<h.length;r++)h[r].reverse();h.reverse()}return h};y.exports=c},92632:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(37829),x=function(c,h){h===void 0&&(h=1);for(var o=0;o<h;o++)c=u(c,-90);return c};y.exports=x},69512:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(86003),x=i(49498),c=function(h,o,r){if(o===void 0&&(o=0),r===void 0&&(r=0),r!==0&&(r<0?u(h,Math.abs(r)):x(h,r)),o!==0)for(var a=0;a<h.length;a++){var d=h[a];o<0?u(d,Math.abs(o)):x(d,o)}return h};y.exports=c},2429:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){for(var u=i.length,x=i[0].length,c=new Array(x),h=0;h<x;h++){c[h]=new Array(u);for(var o=u-1;o>-1;o--)c[h][o]=i[o][h]}return c};y.exports=P},54915:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={CheckMatrix:i(86922),MatrixToString:i(63362),ReverseColumns:i(92598),ReverseRows:i(21224),Rotate180:i(98717),RotateLeft:i(44657),RotateMatrix:i(37829),RotateRight:i(92632),Translate:i(69512),TransposeMatrix:i(2429)}},71334:y=>{/**
* @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(u,x){for(var c=new Uint8Array(u),h=c.length,o=x?"data:"+x+";base64,":"",r=0;r<h;r+=3)o+=P[c[r]>>2],o+=P[(c[r]&3)<<4|c[r+1]>>4],o+=P[(c[r+1]&15)<<2|c[r+2]>>6],o+=P[c[r+2]&63];return h%3===2?o=o.substring(0,o.length-1)+"=":h%3===1&&(o=o.substring(0,o.length-2)+"=="),o};y.exports=i},53134:y=>{/**
* @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/for(var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256),u=0;u<P.length;u++)i[P.charCodeAt(u)]=u;var x=function(c){c=c.substr(c.indexOf(",")+1);var h=c.length,o=h*.75,r=0,a,d,n,p;c[h-1]==="="&&(o--,c[h-2]==="="&&o--);for(var g=new ArrayBuffer(o),v=new Uint8Array(g),f=0;f<h;f+=4)a=i[c.charCodeAt(f)],d=i[c.charCodeAt(f+1)],n=i[c.charCodeAt(f+2)],p=i[c.charCodeAt(f+3)],v[r++]=a<<2|d>>4,v[r++]=(d&15)<<4|n>>2,v[r++]=(n&3)<<6|p&63;return g};y.exports=x},65839:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={ArrayBufferToBase64:i(71334),Base64ToArrayBuffer:i(53134)}},91799:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Array:i(37105),Base64:i(65839),Objects:i(1183),String:i(31749),NOOP:i(29747),NULL:i(20242)}},41786:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u={};for(var x in i)Array.isArray(i[x])?u[x]=i[x].slice(0):u[x]=i[x];return u};y.exports=P},62644:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){var u,x,c;if(typeof i!="object"||i===null)return i;u=Array.isArray(i)?[]:{};for(c in i)x=i[c],u[c]=P(x);return u};y.exports=P},79291:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(41212),x=function(){var c,h,o,r,a,d,n=arguments[0]||{},p=1,g=arguments.length,v=!1;for(typeof n=="boolean"&&(v=n,n=arguments[1]||{},p=2),g===p&&(n=this,--p);p<g;p++)if((c=arguments[p])!=null)for(h in c)o=n[h],r=c[h],n!==r&&(v&&r&&(u(r)||(a=Array.isArray(r)))?(a?(a=!1,d=o&&Array.isArray(o)?o:[]):d=o&&u(o)?o:{},n[h]=x(v,d,r)):r!==void 0&&(n[h]=r));return n};y.exports=x},23568:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(75508),x=i(35154),c=function(h,o,r){var a=x(h,o,null);if(a===null)return r;if(Array.isArray(a))return u.RND.pick(a);if(typeof a=="object"){if(a.hasOwnProperty("randInt"))return u.RND.integerInRange(a.randInt[0],a.randInt[1]);if(a.hasOwnProperty("randFloat"))return u.RND.realInRange(a.randFloat[0],a.randFloat[1])}else if(typeof a=="function")return a(o);return a};y.exports=c},95540:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){var c=typeof i;return!i||c==="number"||c==="string"?x:i.hasOwnProperty(u)&&i[u]!==void 0?i[u]:x};y.exports=P},82840:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(35154),x=i(45319),c=function(h,o,r,a,d){d===void 0&&(d=r);var n=u(h,o,d);return x(n,r,a)};y.exports=c},35154:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){if(!i&&!c||typeof i=="number")return x;if(i&&i.hasOwnProperty(u))return i[u];if(c&&c.hasOwnProperty(u))return c[u];if(u.indexOf(".")!==-1){for(var h=u.split("."),o=i,r=c,a=x,d=x,n=!0,p=!0,g=0;g<h.length;g++)o&&o.hasOwnProperty(h[g])?(a=o[h[g]],o=o[h[g]]):n=!1,r&&r.hasOwnProperty(h[g])?(d=r[h[g]],r=r[h[g]]):p=!1;return n?a:p?d:x}else return x};y.exports=P},69036:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){for(var x=0;x<u.length;x++)if(!i.hasOwnProperty(u[x]))return!1;return!0};y.exports=P},1985:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){for(var x=0;x<u.length;x++)if(i.hasOwnProperty(u[x]))return!0;return!1};y.exports=P},97022:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.hasOwnProperty(u)};y.exports=P},41212:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){if(!i||typeof i!="object"||i.nodeType||i===i.window)return!1;try{if(i.constructor&&!{}.hasOwnProperty.call(i.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};y.exports=P},46975:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(41786),x=function(c,h){var o=u(c);for(var r in h)o.hasOwnProperty(r)||(o[r]=h[r]);return o};y.exports=x},269:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(41786),x=function(c,h){var o=u(c);for(var r in h)o.hasOwnProperty(r)&&(o[r]=h[r]);return o};y.exports=x},18254:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var u=i(97022),x=function(c,h){for(var o={},r=0;r<h.length;r++){var a=h[r];u(c,a)&&(o[a]=c[a])}return o};y.exports=x},61622:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x){if(!i||typeof i=="number")return!1;if(i.hasOwnProperty(u))return i[u]=x,!0;if(u.indexOf(".")!==-1){for(var c=u.split("."),h=i,o=i,r=0;r<c.length;r++)if(h.hasOwnProperty(c[r]))o=h,h=h[c[r]];else return!1;return o[c[c.length-1]]=x,!0}return!1};y.exports=P},1183:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Clone:i(41786),DeepCopy:i(62644),Extend:i(79291),GetAdvancedValue:i(23568),GetFastValue:i(95540),GetMinMaxValue:i(82840),GetValue:i(35154),HasAll:i(69036),HasAny:i(1985),HasValue:i(97022),IsPlainObject:i(41212),Merge:i(46975),MergeRight:i(269),Pick:i(18254),SetValue:i(61622)}},27902:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return i.replace(/%([0-9]+)/g,function(x,c){return u[Number(c)-1]})};y.exports=P},41836:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u,x,c){u===void 0&&(u=0),x===void 0&&(x=" "),c===void 0&&(c=3),i=i.toString();var h=0;if(u+1>=i.length)switch(c){case 1:i=new Array(u+1-i.length).join(x)+i;break;case 3:var o=Math.ceil((h=u-i.length)/2),r=h-o;i=new Array(r+1).join(x)+i+new Array(o+1).join(x);break;default:i=i+new Array(u+1-i.length).join(x);break}return i};y.exports=P},33628:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i,u){return u===0?i.slice(1):i.slice(0,u)+i.slice(u+1)};y.exports=P},27671:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i.split("").reverse().join("")};y.exports=P},45650:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var u=Math.random()*16|0,x=i==="x"?u:u&3|8;return x.toString(16)})};y.exports=P},35355:y=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var P=function(i){return i&&i[0].toUpperCase()+i.slice(1)};y.exports=P},31749:(y,P,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/y.exports={Format:i(27902),Pad:i(41836),RemoveAt:i(33628),Reverse:i(27671),UppercaseFirst:i(35355),UUID:i(45650)}}},O={};function I(y){var P=O[y];if(P!==void 0)return P.exports;var i=O[y]={exports:{}};return T[y](i,i.exports,I),i.exports}I.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var B=I(85454);return B})())})(AC);var zj=AC.exports;const lt=EC(zj);var RC={exports:{}};(function(W,m){(function(T,O){W.exports=O()})(OC,function(){class T{constructor(t){this.scene=t,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null}static register(t,s){T.prototype[t]=s}}var O=function(e){return e===void 0&&(e=I),this.getFrameNameCallback=e,this},I=function(e,t,s){return s==="__BASE"?`${e},${t}`:`${s}:${e},${t}`};function B(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(s=>B(s));if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(Object.getPrototypeOf(e)!==Object.prototype)return e;const t={};for(let s in e)e.hasOwnProperty(s)&&(t[s]=B(e[s]));return t}var y=function(e,t,s,l){Array.isArray(t)&&(l=s,s=t,t=void 0),t==null&&(t="__BASE"),typeof s=="number"&&arguments.length>=6?(s=[arguments[2],void 0,arguments[3]],l=[arguments[4],void 0,arguments[5]]):s===void 0&&l===void 0&&this.columns.data!==void 0&&this.rows.data!==void 0?(s=this.columns.data,l=this.rows.data):(s=B(s),l=B(l)),this.textureKey=e,this.baseFrameName=t,this.columns.data=s,this.columns.count=s?s.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=l,this.rows.count=l?l.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var w=this.scene.sys.textures.get(e);if(!w)return this.clear(),this;if(!s||!l)return this.clear(),this;for(var S=w.get(t),k=S.width,D=0,V=0,G=s.length;V<G;V++)s[V]===void 0?D++:typeof s[V]=="number"?k-=s[V]:k-=s[V].width;for(var j=D>0?k/D:0,tt=S.height,st=0,V=0,G=l.length;V<G;V++)l[V]===void 0?st++:typeof l[V]=="number"?tt-=l[V]:tt-=l[V].width;for(var rt=st?tt/st:0,ot,ut,ct,pt,mt,yt=0,St=0,Ct=0,_t=l.length;Ct<_t;Ct++){l[Ct]===void 0&&(l[Ct]=rt),typeof l[Ct]=="number"&&(l[Ct]={height:l[Ct],stretch:Ct%2}),ot=l[Ct],ct=ot.height,this.rows.stretch+=ot.stretch|0,this.rows.minHeight+=ot.stretch>0?0:ct,yt=0;for(var V=0,Rt=s.length;V<Rt;V++){if(s[V]===void 0&&(s[V]=j),typeof s[V]=="number"&&(s[V]={width:s[V],stretch:V%2}),ut=s[V],pt=ut.width,Ct===0&&(this.columns.stretch+=ut.stretch|0,this.columns.minWidth+=ut.stretch>0?0:pt),pt>=1&&ct>=1){mt=this.getFrameNameCallback(V,Ct,t);var Ft=typeof mt;(Ft==="string"||Ft==="number")&&w.add(mt,0,yt+S.cutX,St+S.cutY,pt,ct)}yt+=pt}St+=ct}return this.updateTexture(),this},P=function(){if(this.clear(),this.textureKey===void 0)return this;var e=this.scene.sys.textures.get(this.textureKey);if(!e)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,s=this.rows.minHeight*this.maxFixedPartScaleY,l=this.width-t,w=this.height-s,S=l>=0?this.maxFixedPartScaleX:this.width/t,k=w>=0?this.maxFixedPartScaleY:this.height/s;if(this.preserveRatio){var D=Math.min(S,k);if(S>D){var V=(S-D)*t;l>=0?l+=V:l=V,S=D}if(k>D){var G=(k-D)*s;w>=0?w+=G:w=G,k=D}}this.columns.scale=S,this.rows.scale=k;var j;l>0?j=this.columns.stretch>0?l/this.columns.stretch:0:j=0;var tt;w>0?tt=this.rows.stretch>0?w/this.rows.stretch:0:tt=0;var st,rt,ot,ut,ct,pt=0,mt=0,yt;this._beginDraw();for(var St=0,Ct=this.rows.count;St<Ct;St++){ot=this.rows.data[St],ct=ot.stretch===0?ot.height*k:tt*ot.stretch,pt=0;for(var _t=0,Rt=this.columns.count;_t<Rt;_t++)rt=this.columns.data[_t],ut=rt.stretch===0?rt.width*S:j*rt.stretch,st=this.getFrameNameCallback(_t,St,this.baseFrameName),e.has(st)&&ut>0&&ct>0&&(ot.stretch===0&&rt.stretch===0||this.getStretchMode(_t,St)===0?yt=0:yt=1,yt===0?this._drawImage(this.textureKey,st,pt,mt,ut,ct):this._drawTileSprite(this.textureKey,st,pt,mt,ut,ct)),pt+=ut;mt+=ct}this._endDraw()};const i=Phaser.Utils.Objects.IsPlainObject,u=Phaser.Utils.Objects.GetValue;var x=function(e){return i(e)?(this.stretchMode.edge=c(u(e,"edge",0)),this.stretchMode.internal=c(u(e,"internal",0))):(e=c(e),this.stretchMode.edge=e,this.stretchMode.internal=e),this},c=function(e){return typeof e=="string"&&(e=h[e]),e};const h={scale:0,repeat:1};var o=function(e,t){return e===0||e===this.columns.count-1||t===0||t===this.rows.count-1},r=function(e,t){return o.call(this,e,t)?this.stretchMode.edge:this.stretchMode.internal},a=function(e){return e==null&&(e=!0),this.preserveRatio=e,this},d=function(e,t){return t===void 0&&(t=e),this.maxFixedPartScaleX=e,this.maxFixedPartScaleY=t,this},n=function(){},p={_beginDraw:n,_drawImage:n,_drawTileSprite:n,_endDraw:n,setGetFrameNameCallback:O,setBaseTexture:y,updateTexture:P,setStretchMode:x,getStretchMode:r,setPreserveRatio:a,setMaxFixedPartScale:d};const g=Phaser.Utils.Objects.IsPlainObject,v=Phaser.Utils.Objects.GetValue;var f=function(e,t){class s extends e{constructor(w,S,k,D,V,G,j,tt,st,rt){if(g(S)?(rt=S,S=v(rt,"x",0),k=v(rt,"y",0),D=v(rt,"width",1),V=v(rt,"height",1),G=v(rt,"key",void 0),j=v(rt,"baseFrame",void 0),tt=v(rt,"columns",void 0),st=v(rt,"rows",void 0)):g(D)?(rt=D,D=v(rt,"width",1),V=v(rt,"height",1),G=v(rt,"key",void 0),j=v(rt,"baseFrame",void 0),tt=v(rt,"columns",void 0),st=v(rt,"rows",void 0)):g(G)?(rt=G,G=v(rt,"key",void 0),j=v(rt,"baseFrame",void 0),tt=v(rt,"columns",void 0),st=v(rt,"rows",void 0)):g(j)?(rt=j,j=v(rt,"baseFrame",void 0),tt=v(rt,"columns",void 0),st=v(rt,"rows",void 0)):Array.isArray(j)?(rt=st,st=tt,tt=j,j=v(rt,"baseFrame",void 0)):g(tt)&&(rt=tt,tt=v(rt,"columns",void 0),st=v(rt,"rows",void 0)),j===void 0&&(j=v(rt,"frame",void 0)),tt===void 0){var ot=v(rt,"leftWidth",void 0),ut=v(rt,"rightWidth",void 0);ot!==void 0&&ut!==void 0&&(tt=[ot,void 0,ut])}if(st===void 0){var ct=v(rt,"topHeight",void 0),pt=v(rt,"bottomHeight",void 0);ct!==void 0&&pt!==void 0&&(st=[ct,void 0,pt])}super(w),this.type=t,this.setPosition(S,k).setSize(D,V).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(v(rt,"getFrameNameCallback",void 0)),this.setStretchMode(v(rt,"stretchMode",0)),this.setPreserveRatio(v(rt,"preserveRatio",!0));var mt=v(rt,"maxFixedPartScale",1),yt=v(rt,"maxFixedPartScaleX",mt),St=v(rt,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(yt,St),this.setBaseTexture(G,j,tt,st)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(w,S){return this.width===w&&this.height===S?this:(super.resize?super.resize(w,S):super.setSize(w,S),this.updateTexture(),this)}get leftWidth(){return this.columns.data[0]}get rightWidth(){return this.columns.data[this.columns.count-1]}get topHeight(){return this.rows.data[0]}get bottomHeight(){return this.rows.data[this.rows.count-1]}}return Object.assign(s.prototype,p),s};const b=Phaser.Game;var C=function(e){return e instanceof b};const _=Phaser.Scene;var M=function(e){return e instanceof _},E=function(e){if(e==null||typeof e!="object")return null;if(C(e))return e;if(C(e.game))return e.game;if(M(e))return e.sys.game;if(M(e.scene))return e.scene.sys.game};const A=Phaser.GameObjects;var R=void 0,L=function(e,t){if(R||(R={},E(e).events.once("destroy",function(){for(var l in R)R[l].destroy();R=void 0})),!R.hasOwnProperty(t)){var s=E(e).scene.systemScene,e=new A[t](s);e.setOrigin(0),R[t]=e}return R[t]},Y=function(e,t,s,l,w,S){var k=L(this,"Image").setTexture(e,t).setDisplaySize(w,S);this.draw(k,s,l)},F=function(e,t,s,l,w,S){var k=L(this,"TileSprite").setTexture(e,t).setSize(w,S);this.draw(k,s,l)};const N=Phaser.GameObjects.RenderTexture;let z=class extends f(N,"rexNinePatch"){};var U={_drawImage:Y,_drawTileSprite:F};Object.assign(z.prototype,U);var q=function(e){return e==null||e===""||e.length===0},Q=function(e,t,s){var l=e;if(!q(t)){typeof t=="string"&&(t=t.split("."));for(var w,S=0,k=t.length;S<k;S++){if(w=t[S],l[w]==null||typeof l[w]!="object"){var D;S===k-1?D={}:D={},l[w]=D}l=l[w]}}return l},K=function(e,t,s,l){if(l===void 0&&(l="."),typeof e=="object"){if(q(t)){if(s==null)return;typeof s=="object"&&(e=s)}else{typeof t=="string"&&(t=t.split(l));var w=t.pop(),S=Q(e,t);S[w]=s}return e}};T.register("ninePatch",function(e,t,s,l,w,S,k,D){var V=new z(this.scene,e,t,s,l,w,S,k,D);return this.scene.add.existing(V),V}),K(window,"RexPlugins.UI.NinePatch",z);const et=Phaser.GameObjects.GetCalcMatrix;var H=function(e,t,s,l){var w=t.getRenderList();if(w.length!==0){s.addToRenderList(t);var S=e.pipelines.set(t.pipeline),k=t.frame.glTexture,D=S.setGameObject(t),V=s.roundPixels,G=et(t,s,l),j=S.calcMatrix.copyFrom(G.calc),tt=t._displayOriginX,st=t._displayOriginY,rt=s.alpha*t.alpha;e.pipelines.preBatch(t);for(var ot=0,ut=w.length;ot<ut;ot++)w[ot].webglRender(S,j,rt,tt,st,k,D,V);e.pipelines.postBatch(t)}};const J=Phaser.Renderer.Canvas.SetTransform;var X=function(e,t,s,l){var w=e.currentContext,S=t.getRenderList();if(!(S.length===0||!J(e,w,t,s,l))){s.addToRenderList(t);var k=s.roundPixels,D=-t._displayOriginX,V=-t._displayOriginY;w.translate(D,V);for(var G=0,j=S.length;G<j;G++)S[G].canvasRender(w,D,V,k);w.restore()}},Z={renderWebGL:H,renderCanvas:X},$=function(e,t){return this.texture=this.scene.sys.textures.get(e),this.frame=this.texture.get(t),this},it=function(e,t){if(this.width===e&&this.height===t)return this;this.width=e,this.height=t,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=e,s.hitArea.height=t),this},nt=function(e){return this.lastAppendedChildren.length=0,Array.isArray(e)?(this.children.add(e),this.lastAppendedChildren.push(...e)):(this.children.add(e),this.lastAppendedChildren.push(e)),this};const at=Phaser.Utils.Array.Remove;var ht=function(e){return this.poolManager&&this.poolManager.free(e),at(this.children.list,e),this.lastAppendedChildren.length=0,this.dirty=!0,this},dt=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},vt=function(){return this.lastAppendedChildren},ft=function(){return this.children.list},gt={setTint(e){return this.tint=e,this.tintFill=!1,this},setTintFill(e){return this.tint=e,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}},wt={setTexture:$,resize:it,setSize:it,addChild:nt,removeChild:ht,removeChildren:dt,clear:dt,getLastAppendedChildren:vt,getChildren:ft};Object.assign(wt,gt);class bt{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const xt=Phaser.Utils.Objects.GetValue;var Pt={};let Ot=class{constructor(e){this.pools=xt(e,"pools",Pt)}destroy(){this.pools=void 0}free(e){if(!this.pools)return this;var t=e.type;return this.pools.hasOwnProperty(t)||(this.pools[t]=new bt),this.pools[t].push(e),e.onFree(),this}freeMultiple(e){if(!this.pools)return this;for(var t=0,s=e.length;t<s;t++)this.free(e[t]);return this}allocate(e){return!this.pools||!this.pools.hasOwnProperty(e)?null:this.pools[e].pop()}};const Et=60;var Tt=!1,Mt=function(e){if(!Tt){e===void 0&&(e=Et);var t=Phaser.VERSION.split("."),s=parseInt(t[0]);if(s===3){var l=parseInt(t[1]);l<e&&console.error(`Minimum supported version : ${s}.${l}`)}else console.error(`Can't supported version : ${s}`);Tt=!0}};Mt();const kt=Phaser.GameObjects.GameObject,Gt=Phaser.Utils.Objects.IsPlainObject,qt=Phaser.Utils.Objects.GetValue,fe=Phaser.Structs.List,Qt=Phaser.Utils.Array.StableSort;class Jt extends kt{constructor(t,s,l,w,S,k){Gt(s)&&(k=s,s=qt(k,"x",0),l=qt(k,"y",0),w=qt(k,"texture"),S=qt(k,"frame")),s===void 0&&(s=0),l===void 0&&(l=0),super(t,"rexBlitter"),this.children=new fe,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var D=qt(k,"reuseBob",!0);this.poolManager=D?new Ot(k):void 0,this.setTexture(w,S),this.setPosition(s,l),this.setOrigin(0,0),this.clearTint(),this.initPipeline(),this.initPostPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,s=this.children.list,l=0,w=s.length;l<w;l++){var S=s[l];be(S)&&(this.renderList.push(S),t||(t=S.depth!==0))}t&&Qt(this.renderList,We),this.displayListDirty=!1}return this.renderList}}var be=function(e){return e.active&&e.visible&&e.alpha>0},We=function(e,t){return e._depth-t._depth};const $t=Phaser.GameObjects.Components;Phaser.Class.mixin(Jt,[$t.Alpha,$t.BlendMode,$t.ComputedSize,$t.Depth,$t.GetBounds,$t.Mask,$t.Origin,$t.Pipeline,$t.PostPipeline,$t.ScrollFactor,$t.Transform,$t.Visible,Z,wt]);const me="image";var Vt=function(e,t,s){if(!e||typeof e=="number")return s;if(typeof t=="string"){if(e.hasOwnProperty(t))return e[t];if(t.indexOf(".")!==-1)t=t.split(".");else return s}for(var l=t,w=e,S=s,k=0;k<l.length;k++)if(t=l[k],w.hasOwnProperty(t))S=w[t],w=S;else{S=s;break}return S},Ce=function(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t];return e},os={enableData(){return this.data===void 0&&(this.data={}),this},setData(e,t){if(this.enableData(),arguments.length===1){var s=e;for(e in s)this.data[e]=s[e]}else this.data[e]=t;return this},getData(e,t){return this.enableData(),e===void 0?this.data:Vt(this.data,e,t)},incData(e,t,s){return s===void 0&&(s=0),this.enableData(),this.setData(e,this.getData(e,s)+t),this},mulData(e,t,s){return s===void 0&&(s=0),this.enableData(),this.setData(e,this.getData(e,s)*t),this},clearData(){return this.data&&Ce(this.data),this}};let qs=class{constructor(e,t){this.type=t,this.data=void 0,this.setParent(e).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(e){return this.parent=e,this}setDisplayListDirty(e){return e&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(e){this.setDisplayListDirty(this._active!=e),this._active=e}setActive(e){return e===void 0&&(e=!0),this.active=e,this}modifyPorperties(e){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(qs.prototype,os);const yr=Phaser.Math.DegToRad,xr=Phaser.Math.RadToDeg,Yi=Phaser.Utils.Objects.GetValue;let YP=class extends qs{get visible(){return this._visible}set visible(e){this.setDisplayListDirty(this._visible!=e),this._visible=e}setVisible(e){return e===void 0&&(e=!0),this.visible=e,this}get alpha(){return this._alpha}set alpha(e){this.setDisplayListDirty(!!this._alpha!=!!e),this._alpha=e}setAlpha(e){return this.alpha=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setPosition(e,t){return this.x=e,this.y=t,this}setRotation(e){return this.rotation=e,this}get angle(){return xr(this.rotation)}set angle(e){this.rotation=yr(e)}setAngle(e){return this.angle=e,this}setScaleX(e){return this.scaleX=e,this}get width(){return this._width}set width(e){this._width=e}setWidth(e,t){return t===void 0&&(t=!1),this.width=e,t&&(this.scaleY=this.scaleX),this}setScaleY(e){return this.scaleY=e,this}setScale(e,t){return t===void 0&&(t=e),this.scaleX=e,this.scaleY=t,this}get height(){return this._height}set height(e){this._height=e}setHeight(e,t){return t===void 0&&(t=!1),this.height=e,t&&(this.scaleX=this.scaleY),this}setScale(e,t){return t===void 0&&(t=e),this.scaleX=e,this.scaleY=t,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(e){this.scaleX=e/this._width}setDisplayWidth(e,t){return t===void 0&&(t=!1),this.displayWidth=e,t&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(e){this.scaleY=e/this._height}setDisplayHeight(e,t){return t===void 0&&(t=!1),this.displayHeight=e,t&&(this.scaleX=this.scaleY),this}setOriginX(e){return this.originX=e,this._displayOriginX=this.width*e,this}setOriginY(e){return this.originY=e,this._displayOriginY=this.height*e,this}setOrigin(e,t){return t===void 0&&(t=e),this.setOriginX(e).setOriginY(t),this}get depth(){return this._depth}set depth(e){this.setDisplayListDirty(this._depth!=e),this._depth=e}setDepth(e){return e===void 0&&(e=0),this.depth=e,this}modifyPorperties(e){if(!e)return this;e.hasOwnProperty("x")&&this.setX(e.x),e.hasOwnProperty("y")&&this.setY(e.y),e.hasOwnProperty("rotation")?this.setRotation(e.rotation):e.hasOwnProperty("angle")&&this.setAngle(e.angle),e.hasOwnProperty("alpha")&&this.setAlpha(e.alpha);var t=Yi(e,"width",void 0),s=Yi(e,"height",void 0),l=Yi(e,"scale",void 0),w=Yi(e,"scaleX",l),S=Yi(e,"scaleY",l);t!==void 0?s===void 0&&S===void 0?this.setWidth(t,!0):this.setWidth(t):w!==void 0?this.setScaleX(w):e.hasOwnProperty("displayWidth")&&this.setDisplayWidth(e.displayWidth),s!==void 0?t===void 0&&w===void 0?this.setHeight(s,!0):this.setHeight(s):S!==void 0?this.setScaleY(S):e.hasOwnProperty("displayHeight")&&this.setDisplayHeight(e.displayHeight);var k=Yi(e,"origin",void 0);return k!==void 0?this.setOrigin(k):(e.hasOwnProperty("originX")&&this.setOriginX(e.originX),e.hasOwnProperty("originY")&&this.setOriginY(e.originY)),e.hasOwnProperty("depth")&&this.setDepth(e.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(e,t,s,l,w,S,k,D){}canvasRender(e,t,s,l){}};const VP=Phaser.GameObjects.Components.TransformMatrix,zP=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var El=new VP,GP=function(e,t,s,l,w,S,k,D){var V=this.frame;if(V){var G=this._width,j=this._height,tt=G*this.originX,st=j*this.originY,rt=this.x-l,ot=this.y-w,ut,ct,pt,mt,yt,St,Ct,_t;if(this.isCropped){var Rt=this._crop;(Rt.flipX!==this.flipX||Rt.flipY!==this.flipY)&&V.updateCropUVs(Rt,this.flipX,this.flipY),ut=Rt.u0,ct=Rt.v0,pt=Rt.u1,mt=Rt.v1,Ct=Rt.width,_t=Rt.height,yt=Rt.x,St=Rt.y}else ut=this.frame.u0,ct=this.frame.v0,pt=this.frame.u1,mt=this.frame.v1,Ct=G,_t=j,yt=0,St=0;var Ft=1,It=1;this.flipX&&(rt+=G-tt*2,Ft=-1),this.flipY&&(ot+=j-st*2,It=-1),El.applyITRS(rt,ot,this.rotation,this.scaleX*Ft,this.scaleY*It),t.multiply(El,El);var Bt=-tt+yt,Wt=-st+St,se=Bt+Ct,ne=Wt+_t,Yt=El.setQuad(Bt,Wt,se,ne,D),xe=zP(this.tint,this.alpha*s);e.batchQuad(this.parent,Yt[0],Yt[1],Yt[2],Yt[3],Yt[4],Yt[5],Yt[6],Yt[7],ut,ct,pt,mt,xe,xe,xe,xe,this.tintFill,S,k)}},UP=function(e,t,s,l){var w=this.frame;if(w){e.save();var S=this._width,k=this._height,D=S*this.originX,V=k*this.originY,G=this.x-D,j=this.y-V,tt,st,rt,ot;if(this.isCropped){var ut=this._crop;(ut.flipX!==this.flipX||ut.flipY!==this.flipY)&&w.updateCropUVs(ut,this.flipX,this.flipY),rt=ut.cw,ot=ut.ch,tt=ut.cx,st=ut.cy}else rt=w.cutWidth,ot=w.cutHeight,tt=w.cutX,st=w.cutY;var ct=1,pt=1;this.flipX&&(G+=S,ct=-1),this.flipY&&(j+=k,pt=-1);var mt=w.source.resolution,yt=rt/mt,St=ot/mt;l&&(G=Math.floor(G+.5),j=Math.floor(j+.5),yt+=.5,St+=.5),e.translate(G,j),e.rotate(this.rotation),e.scale(this.scaleX*ct,this.scaleY*pt),e.drawImage(w.source.image,tt,st,rt,ot,0,0,yt,St),e.restore()}};const WP=Phaser.Utils.Objects.IsPlainObject;let Bm=class extends YP{constructor(e,t){super(e,me),this._crop=XP(),this.setFrame(t)}get width(){return this._width}set width(e){}get height(){return this._height}set height(e){}setFrame(e){return arguments.length>0&&!WP(e)&&(e=this.parent.texture.get(e)),this.frame=e,e?(this._width=e.realWidth,this._height=e.realHeight):(this._width=0,this._height=0),this}setFlipX(e){return e===void 0&&(e=!0),this.flipX=e,this}setFlipY(e){return e===void 0&&(e=!0),this.flipY=e,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(e){this._tint=e}setTint(e){return this.tint=e,this.tintFill=!1,this}setTintFill(e){return this.tint=e,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(e){this._tintFill=e}setCrop(e,t,s,l){return e===void 0?(this.isCropped=!1,this):this.frame?e===0&&t===0&&s===this._width&&l===this._height?(this.isCropped=!1,this):(this.frame.setCropUVs(this._crop,e,t,s,l,this.flipX,this.flipY),this.isCropped=!0,this):this}reset(){return super.reset(),this.resetFlip().resetTint().setFrame().setCrop(),this}modifyPorperties(e){return e?(e.hasOwnProperty("width")&&(e.displayWidth=e.width,delete e.width),e.hasOwnProperty("height")&&(e.displayHeight=e.height,delete e.height),e.hasOwnProperty("frame")&&this.setFrame(e.frame),super.modifyPorperties(e),e.hasOwnProperty("flipX")&&this.setFlipX(e.flipX),e.hasOwnProperty("flipY")&&this.setFlipY(e.flipY),e.hasOwnProperty("tint")&&this.setTint(e.tint),e.hasOwnProperty("tintFill")&&this.setTintFill(e.tintFill),this):this}};var XP=function(e){return e===void 0&&(e={}),e.u0=0,e.v0=0,e.u1=0,e.v1=0,e.x=0,e.y=0,e.width=0,e.height=0,e.flipX=!1,e.flipY=!1,e.cx=0,e.cy=0,e.cw=0,e.ch=0,e},jP={webglRender:GP,canvasRender:UP};Object.assign(Bm.prototype,jP);var Nm=function(e,t){typeof t=="string"&&(t={frame:t});var s=e.poolManager?e.poolManager.allocate(me):null;return s===null?s=new Bm(e):s.setParent(e).setActive(),s.modifyPorperties(t),e.addChild(s),s},HP=function(e,t,s,l,w,S){Nm(this,{frame:t,x:s,y:l,width:w,height:S})},$P=function(e,t,s,l,w,S){var k=this.texture.get(t),D=k.width,V=k.height,G=w%D,j=S%V;G===0&&(G=D),j===0&&(j=V);for(var tt=Math.ceil(w/D),st=Math.ceil(S/V),rt=tt-1,ot=st-1,ut=0;ut<tt;ut++)for(var ct=0;ct<st;ct++){let yt=Nm(this,{frame:t,x:s+ut*D,y:l+ct*V});var pt=ut===rt?G:D,mt=ct===ot?j:V;(pt!==D||mt!==V)&&yt.setCrop(0,0,pt,mt)}},qP={_drawImage:HP,_drawTileSprite:$P};class Ud extends f(Jt,"rexNinePatch2"){setBaseTexture(t,s,l,w){return this.setTexture(t,s),super.setBaseTexture(t,s,l,w),this}}Object.assign(Ud.prototype,qP),T.register("ninePatch2",function(e,t,s,l,w,S,k,D){var V=new Ud(this.scene,e,t,s,l,w,S,k,D);return this.scene.add.existing(V),V}),K(window,"RexPlugins.UI.NinePatch2",Ud);var KP=Phaser.Renderer.WebGL.Utils,Ym=function(e,t,s,l,w,S){for(var k=KP.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*l),D=s.pathData,V=s.pathIndexes,G=0;G<V.length;G+=3){var j=V[G]*2,tt=V[G+1]*2,st=V[G+2]*2,rt=D[j+0]-w,ot=D[j+1]-S,ut=D[tt+0]-w,ct=D[tt+1]-S,pt=D[st+0]-w,mt=D[st+1]-S,yt=t.getX(rt,ot),St=t.getY(rt,ot),Ct=t.getX(ut,ct),_t=t.getY(ut,ct),Rt=t.getX(pt,mt),Ft=t.getY(pt,mt);e.batchTri(s,yt,St,Ct,_t,Rt,Ft,0,0,1,1,k,k,k,2)}},QP=Phaser.Renderer.WebGL.Utils,Al=function(e,t,s,l,w){var S=e.strokeTint,k=QP.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*s);S.TL=k,S.TR=k,S.BL=k,S.BR=k;var D=t.pathData,V=D.length-1,G=t.lineWidth,j=G/2,tt=D[0]-l,st=D[1]-w;t.closePath||(V-=2);for(var rt=2;rt<V;rt+=2){var ot=D[rt]-l,ut=D[rt+1]-w;e.batchLine(tt,st,ot,ut,j,j,G,rt-2,t.closePath?rt===V-1:!1),tt=ot,st=ut}};const JP=Phaser.GameObjects.GetCalcMatrix;var ZP=function(e,t,s,l){t.dirty&&(t.updateData(),t.dirty=!1),s.addToRenderList(t);var w=e.pipelines.set(t.pipeline),S=JP(t,s,l),k=w.calcMatrix.copyFrom(S.calc),D=t._displayOriginX,V=t._displayOriginY,G=s.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&Ym(w,k,t,G,D,V),t.isStroked&&Al(w,t,G,D,V),e.pipelines.postBatch(t)},Yo=function(e,t,s,l){var w=t.fillColor,S=t.fillAlpha,k=(w&16711680)>>>16,D=(w&65280)>>>8,V=w&255;e.fillStyle="rgba("+k+","+D+","+V+","+S+")"},Vo=function(e,t,s,l){var w=t.strokeColor,S=t.strokeAlpha,k=(w&16711680)>>>16,D=(w&65280)>>>8,V=w&255;e.strokeStyle="rgba("+k+","+D+","+V+","+S+")",e.lineWidth=t.lineWidth};const tM=Phaser.Renderer.Canvas.SetTransform;var eM=function(e,t,s,l){t.dirty&&(t.updateData(),t.dirty=!1),s.addToRenderList(t);var w=e.currentContext;if(tM(e,w,t,s,l)){var S=t._displayOriginX,k=t._displayOriginY,D=t.pathData,V=D.length-1,G=D[0]-S,j=D[1]-k;w.beginPath(),w.moveTo(G,j),t.closePath||(V-=2);for(var tt=2;tt<V;tt+=2){var st=D[tt]-S,rt=D[tt+1]-k;w.lineTo(st,rt)}w.closePath(),t.isFilled&&(Yo(w,t),w.fill()),t.isStroked&&(Vo(w,t),w.stroke()),w.restore()}},iM={renderWebGL:ZP,renderCanvas:eM};const sM=Phaser.GameObjects.Shape;class Wd extends sM{get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=t!=null&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&this._fillColor!=null}setFillStyle(t,s){return s===void 0&&(s=1),this.fillColor=t,this.fillAlpha=s,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=t!=null&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this._strokeAlpha=t,this.isStroked=t>0&&this._strokeColor!=null&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&this._strokeColor!=null}setStrokeStyle(t,s,l){return l===void 0&&(l=1),this.lineWidth=t,this.strokeColor=s,this.strokeAlpha=l,this}updateData(){return this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,s){var l=this.input;return l&&!l.customHitArea&&(l.hitArea.width=t,l.hitArea.height=s),this}resize(t,s){return this.setSize(t,s),this}}Object.assign(Wd.prototype,iM);const Hr=Phaser.Utils.Objects.GetValue;let Xd=class{constructor(e,t,s,l,w){e===void 0&&(e=0),t===void 0&&(t=e),s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(e,t,s,l,w)}setTo(e,t,s,l,w){return this.setPosition(e,t),this.setRadius(w),this.setSize(s,l),this}setPosition(e,t){return this.x=e,this.y=t,this}setRadius(e){return e===void 0&&(e=0),this.radius=e,this}setSize(e,t){return this.width=e,this.height=t,this}get minWidth(){var e=this.cornerRadius;return Math.max(e.tl.x+e.tr.x,e.bl.x+e.br.x)}get minHeight(){var e=this.cornerRadius;return Math.max(e.tl.y+e.bl.y,e.tr.y+e.br.y)}get width(){return this._width}set width(e){e==null&&(e=0),this._width=Math.max(e,this.minWidth)}get height(){return this._height}set height(e){e==null&&(e=0),this._height=Math.max(e,this.minHeight)}get radius(){var e=this.cornerRadius;return Math.max(e.tl.x,e.tl.y,e.tr.x,e.tr.y,e.bl.x,e.bl.y,e.br.x,e.br.y)}set radius(e){var t,s;typeof e=="number"?(t=e,s=e):(t=Hr(e,"x",0),s=Hr(e,"y",0));var l=this.cornerRadius;l.tl=Rl(Hr(e,"tl",void 0),t,s),l.tr=Rl(Hr(e,"tr",void 0),t,s),l.bl=Rl(Hr(e,"bl",void 0),t,s),l.br=Rl(Hr(e,"br",void 0),t,s)}get radiusTL(){var e=this.cornerRadius.tl;return Math.max(e.x,e.y)}set radiusTL(e){Dl(this.cornerRadius.tl,e)}get radiusTR(){var e=this.cornerRadius.tr;return Math.max(e.x,e.y)}set radiusTR(e){Dl(this.cornerRadius.tr,e)}get radiusBL(){var e=this.cornerRadius.bl;return Math.max(e.x,e.y)}set radiusBL(e){Dl(this.cornerRadius.bl,e)}get radiusBR(){var e=this.cornerRadius.br;return Math.max(e.x,e.y)}set radiusBR(e){Dl(this.cornerRadius.br,e)}};var Rl=function(e,t,s){return e===void 0?e={x:t,y:s}:typeof e=="number"&&(e={x:e,y:e}),Vm(e),e},Dl=function(e,t){typeof t=="number"?(e.x=t,e.y=t):(e.x=Hr(t,"x",0),e.y=Hr(t,"y",0)),Vm(e)},Vm=function(e){e.convex=e.x>=0||e.y>=0,e.x=Math.abs(e.x),e.y=Math.abs(e.y)},_e=function(e){return e.x>0&&e.y>0},oi=function(e,t,s){var l=s.length;if(l>=2){var w=s[l-2],S=s[l-1];if(e===w&&t===S)return s}return s.push(e,t),s};const zm=Phaser.Math.DegToRad;var hi=function(e,t,s,l,w,S,k,D,V){k&&S>w?S-=360:!k&&S<w&&(S+=360);var G=S-w,j=zm(G)/D;w=zm(w);for(var tt=0;tt<=D;tt++){var st=w+j*tt,rt=e+s*Math.cos(st),ot=t+l*Math.sin(st);oi(rt,ot,V)}return V};const rM=Phaser.Utils.Objects.IsPlainObject,Gm=Phaser.Utils.Objects.GetValue,nM=Phaser.Geom.Polygon.Earcut;let Dn=class extends Wd{constructor(e,t,s,l,w,S,k,D){var V,G,j,tt;if(rM(t)){var st=t;t=st.x,s=st.y,l=st.width,w=st.height,S=st.radius,k=st.color,D=st.alpha,V=st.strokeColor,G=st.strokeAlpha,j=st.strokeWidth,tt=st.shape}t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=1),w===void 0&&(w=l),S===void 0&&(S=0),tt===void 0&&(tt=0);var rt=new Xd;if(super(e,"rexRoundRectangleShape",rt),this.setShapeType(tt),this.shapeType===0){var ot=Gm(S,"radius",S);rt.setTo(0,0,l,w,ot)}else{var ot={x:l/2,y:w/2};rt.setTo(0,0,l,w,ot)}this.setIteration(Gm(S,"iteration",void 0)),this.setPosition(t,s),this.setFillStyle(k,D),j===void 0&&(j=2),this.setStrokeStyle(j,V,G),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var e=this.geom,t=this.pathData;t.length=0;var s=e.width,l=e.height,w=e.cornerRadius,S,k=this.iteration+1;if(S=w.tl,_e(S))if(S.convex){var D=S.x,V=S.y;hi(D,V,S.x,S.y,180,270,!1,k,t)}else{var D=0,V=0;hi(D,V,S.x,S.y,90,0,!0,k,t)}else oi(0,0,t);if(S=w.tr,_e(S))if(S.convex){var D=s-S.x,V=S.y;hi(D,V,S.x,S.y,270,360,!1,k,t)}else{var D=s,V=0;hi(D,V,S.x,S.y,180,90,!0,k,t)}else oi(s,0,t);if(S=w.br,_e(S))if(S.convex){var D=s-S.x,V=l-S.y;hi(D,V,S.x,S.y,0,90,!1,k,t)}else{var D=s,V=l;hi(D,V,S.x,S.y,270,180,!0,k,t)}else oi(s,l,t);if(S=w.bl,_e(S))if(S.convex){var D=S.x,V=l-S.y;hi(D,V,S.x,S.y,90,180,!1,k,t)}else{var D=0,V=l;hi(D,V,S.x,S.y,360,270,!0,k,t)}else oi(0,l,t);return t.push(t[0],t[1]),this.pathIndexes=nM(t),this}setShapeType(e){return typeof e=="string"&&(e=aM[e]),this.shapeType=e,this}setSize(e,t){return t===void 0&&(t=e),this.geom.width===e&&this.geom.height===t?this:(this.geom.setSize(e,t),this.shapeType===1&&this.setRadius({x:e/2,y:t/2}),this.updateDisplayOrigin(),this.dirty=!0,super.setSize(e,t),this)}get radius(){return this.geom.radius}set radius(e){this.geom.setRadius(e),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(e){this.geom.radiusTL=e,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(e){this.geom.radiusTR=e,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(e){this.geom.radiusBL=e,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(e){this.geom.radiusBR=e,this.dirty=!0}setRadius(e){return e===void 0&&(e=0),this.radius=e,this}setRadiusTL(e){return e===void 0&&(e=0),this.radiusTL=e,this}setRadiusTR(e){return e===void 0&&(e=0),this.radiusTR=e,this}setRadiusBL(e){return e===void 0&&(e=0),this.radiusBL=e,this}setRadiusBR(e){return e===void 0&&(e=0),this.radiusBR=e,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(e){this.radius=e}setCornerRadius(e){return this.setRadius(e)}get iteration(){return this._iteration}set iteration(e){if(this._iteration===void 0){this._iteration=e;return}this._iteration!==e&&(this._iteration=e,this.dirty=!0)}setIteration(e){return e===void 0&&(e=6),this.iteration=e,this}};const aM={rectangle:0,circle:1};T.register("roundRectangle",function(e,t,s,l,w,S,k){var D=new Dn(this.scene,e,t,s,l,w,S,k);return this.scene.add.existing(D),D}),K(window,"RexPlugins.UI.RoundRectangle",Dn);const oM=Phaser.Renderer.WebGL.Utils;var hM=function(e,t,s,l){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){s.addToRenderList(t);var w=t.frame,S=w.width,k=w.height,D=oM.getTintAppendFloatAlpha,V=e.pipelines.set(t.pipeline,t),G=V.setTexture2D(w.glTexture,t);e.pipelines.preBatch(t),V.batchTexture(t,w.glTexture,S,k,t.x,t.y,S/t.resolution,k/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,S,k,D(t.tintTopLeft,s.alpha*t._alphaTL),D(t.tintTopRight,s.alpha*t._alphaTR),D(t.tintBottomLeft,s.alpha*t._alphaBL),D(t.tintBottomRight,s.alpha*t._alphaBR),t.tintFill,0,0,s,l,!1,G),e.pipelines.postBatch(t)}},lM=function(e,t,s,l){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(s.addToRenderList(t),e.batchSprite(t,t.frame,s,l))},uM={renderWebGL:hM,renderCanvas:lM};const cM=Phaser.Display.Color;var dM={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(e){return this.context.fillStyle=e,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(e,t,s,l,w,S,k,D,V,G){var j=this.scene.sys.textures.getFrame(e,t);if(!j)return this;var tt=j.cutWidth,st=j.cutHeight;s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=tt),S===void 0&&(S=st),k===void 0&&(k=0),D===void 0&&(D=0),V===void 0&&(V=tt),G===void 0&&(G=st);var rt=j.cutX+k,ot=j.cutY+D;return this.context.drawImage(j.source.image,rt,ot,V,G,s,l,w,S),this.dirty=!0,this},getDataURL(e,t){return this.canvas.toDataURL(e,t)},getPixel(e,t,s){s===void 0&&(s=new cM);var l=this.context.getImageData(e,t,1,1);return s.setTo(l.data[0],l.data[1],l.data[2],l.data[3]),s},setPixel(e,t,s,l,w,S){if(typeof s!="number"){var k=s;s=k.red,l=k.green,w=k.blue,S=k.alpha}S===void 0&&(S=s!==0||l!==0||w!==0?255:0);var D=this.context.createImageData(1,1);return D.data[0]=s,D.data[1]=l,D.data[2]=w,D.data[3]=S,this.context.putImageData(D,e,t),this.dirty=!0,this}},Um=function(e,t,s,l,w,S,k){var D=e.sys.textures,V=e.renderer;l===void 0&&(l=0),w===void 0&&(w=0),S===void 0&&(S=t.width),k===void 0&&(k=t.height);var G;D.exists(s)?G=D.get(s):G=D.createCanvas(s,S,k);var j=G.getSourceImage();j.width!==S&&(j.width=S),j.height!==k&&(j.height=k);var tt=j.getContext("2d",{willReadFrequently:!0});tt.clearRect(0,0,S,k),tt.drawImage(t,l,w,S,k),V.gl&&G&&V.canvasToTexture(j,G.source[0].glTexture,!0,0)},pM={updateTexture(e,t){if(e){var s=this.resolution;s!==1&&(this.context.save(),this.context.scale(s,s)),t?e.call(t,this.canvas,this.context):e(this.canvas,this.context),s!==1&&this.context.restore()}(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"Canvas Game Object"}),this.dirty=!1;var l=this.input;return l&&!l.customHitArea&&(l.hitArea.width=this.width,l.hitArea.height=this.height),this},generateTexture(e,t,s,l,w){var S=this.canvas;return l===void 0?l=S.width:l*=this.resolution,w===void 0?w=S.height:w*=this.resolution,Um(this.scene,S,e,t,s,l,w),this},loadTexture(e,t){var s=this.scene.sys.textures.getFrame(e,t);return s?(this.width!==s.cutWidth||this.height!==s.cutHeight?this.setSize(s.cutWidth,s.cutHeight):this.clear(),this.drawFrame(e,t),this.dirty=!0,this):this}};Mt();const Wm=Phaser.Display.Canvas.CanvasPool,fM=Phaser.GameObjects.GameObject,gM=Phaser.Utils.String.UUID;let $r=class extends fM{constructor(e,t,s,l,w,S){t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=1),w===void 0&&(w=1),S===void 0&&(S=1),super(e,"rexCanvas"),this.renderer=e.sys.game.renderer,this._width=l,this._height=w,this.resolution=S,l=Math.max(Math.ceil(l*this.resolution),1),w=Math.max(Math.ceil(w*this.resolution),1),this.canvas=Wm.create(this,l,w),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(t,s),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline(!0),this._crop=this.resetCropObject(),this._textureKey=gM(),this.texture=e.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){Wm.remove(this.canvas),this.canvas=null,this.context=null;var e=this.texture;e&&e.destroy()}setResolution(e){if(this.resolution===e)return this;this.resolution=e;var t=Math.max(Math.ceil(this.width*e),1),s=Math.max(Math.ceil(this.height*e),1);return this.canvas.width=t,this.canvas.height=s,this.frame.source.resolution=e,this.dirty=!0,this}get width(){return this._width}set width(e){this.setSize(e,this._height)}get height(){return this._height}set height(e){this.setSize(this._width,e)}setCanvasSize(e,t){return this._width===e&&this._height===t?this:(this._width=e,this._height=t,this.updateDisplayOrigin(),e=Math.max(Math.ceil(e*this.resolution),1),t=Math.max(Math.ceil(t*this.resolution),1),this.canvas.width=e,this.canvas.height=t,this.frame.setSize(e,t),this.dirty=!0,this)}setSize(e,t){return this.setCanvasSize(e,t),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(e){this.scaleX=e/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(e){this.scaleY=e/this._height}setDisplaySize(e,t){return this.displayWidth=e,this.displayHeight=t,this}getCanvas(e){return e||(this.dirty=!0),this.canvas}getContext(e){return e||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(e,t){return this.setSize(e,t),this}};const Vi=Phaser.GameObjects.Components;Phaser.Class.mixin($r,[Vi.Alpha,Vi.BlendMode,Vi.Crop,Vi.Depth,Vi.Flip,Vi.GetBounds,Vi.Mask,Vi.Origin,Vi.Pipeline,Vi.PostPipeline,Vi.ScrollFactor,Vi.Tint,Vi.Transform,Vi.Visible,uM,dM,pM]);const vM=Phaser.Utils.String.Pad;var Xt=function(e,t,s){if(e==null)return e;switch(typeof e){case"string":return e;case"number":return`#${vM(Math.floor(e).toString(16),6,"0",1)}`;case"function":return e(t,s);case"object":return e.hasOwnProperty("r")?e.hasOwnProperty("a")?`rgba(${e.r},${e.g},${e.b},${e.a})`:`rgb(${e.r},${e.g},${e.b})`:e.hasOwnProperty("h")?e.hasOwnProperty("a")?`hsla(${e.h},${e.s},${e.l},${e.a})`:`hsl(${e.h},${e.s},${e.l})`:e;default:return e}};const Xm=Phaser.Math.DegToRad;var jm=function(e,t,s,l,w,S,k){var D=new Xd(t,s,l,w,S),V=D.minWidth,G=D.minHeight,j=l>=V?1:l/V,tt=w>=G?1:w/G,st=D.cornerRadius,rt,ot,ut,ct,pt,mt,yt;e.save(),e.beginPath(),e.translate(t,s),rt=st.tl,Ll(rt)?(ot=rt.x*j,ut=rt.y*tt,Il(rt)?(ct=ot,pt=ut,qr(e,ct,pt,ot,ut,180,270,!1,k)):(ct=0,pt=0,qr(e,ct,pt,ot,ut,90,0,!0,k)),mt=0,yt=ut):(e.lineTo(0,0),mt=0,yt=0),rt=st.tr,Ll(rt)?(ot=rt.x*j,ut=rt.y*tt,Il(rt)?(ct=l-ot,pt=ut,qr(e,ct,pt,ot,ut,270,360,!1,k)):(ct=l,pt=0,qr(e,ct,pt,ot,ut,180,90,!0,k))):e.lineTo(l,0),rt=st.br,Ll(rt)?(ot=rt.x*j,ut=rt.y*tt,Il(rt)?(ct=l-ot,pt=w-ut,qr(e,ct,pt,ot,ut,0,90,!1,k)):(ct=l,pt=w,qr(e,ct,pt,ot,ut,270,180,!0,k))):e.lineTo(l,w),rt=st.bl,Ll(rt)?(ot=rt.x*j,ut=rt.y*tt,Il(rt)?(ct=ot,pt=w-ut,qr(e,ct,pt,ot,ut,90,180,!1,k)):(ct=0,pt=w,qr(e,ct,pt,ot,ut,360,270,!0,k))):e.lineTo(0,w),e.lineTo(mt,yt),e.closePath(),e.restore()},Il=function(e){return!e.hasOwnProperty("convex")||e.convex},Ll=function(e){return e.x>0&&e.y>0},qr=function(e,t,s,l,w,S,k,D,V){if(D&&k>S?k-=360:!D&&k<S&&(k+=360),S=Xm(S),k=Xm(k),V==null)e.ellipse(t,s,l,w,0,S,k,D);else{V+=1;for(var G,j,tt,st=(k-S)/V,rt=0;rt<=V;rt++)tt=S+st*rt,G=t+l*Math.cos(tt),j=s+w*Math.sin(tt),e.lineTo(G,j)}},mM=function(e,t,s,l,w,S,k,D,V,G,j,tt,st){if(jm(t,s,l,w,S,k,st),D!=null){if(j!=null){var rt;tt?rt=t.createLinearGradient(0,0,w,0):rt=t.createLinearGradient(0,0,0,S),rt.addColorStop(0,D),rt.addColorStop(1,j),D=rt}t.fillStyle=D,t.fill()}V!=null&&G>0&&(t.strokeStyle=V,t.lineWidth=G,t.stroke())},jd=function(e,t,s,l,w,S,k,D){if(!(t==null&&s==null)){var V=e.canvas.width,G=e.canvas.height;s==null&&(l=0);var j=l/2;V=Math.max(1,V-l),G=Math.max(1,G-l),mM(e.canvas,e.context,j,j,V,G,w,t,s,l,S,k,D)}},yM=function(){jd(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const Hm=Phaser.Utils.Objects.GetValue;let $m=class extends $r{constructor(e,t,s,l,w,S,k,D,V,G,j,tt){t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=1),w===void 0&&(w=l),S===void 0&&(S=0),tt===void 0&&(tt=1),super(e,t,s,l,w,tt),this.type="rexRoundRectangleCanvas";var st=Hm(S,"radius",S),rt=Hm(S,"iteration",void 0);this.setRadius(st),this.setIteration(rt),this.setFillStyle(k,G,j),this.setStrokeStyle(D,V)}get radius(){return this._radius}set radius(e){this.dirty|=this._radius!=e,this._radius=e}setRadius(e){return this.radius=e,this}get iteration(){return this._iteration}set iteration(e){this.dirty|=this._iteration!=e,this._iteration=e}setIteration(e){return this.iteration=e,this}get fillStyle(){return this._fillStyle}set fillStyle(e){e=Xt(e,this.canvas,this.context),this.dirty|=this._fillStyle!=e,this._fillStyle=e}get fillColor2(){return this._fillColor2}set fillColor2(e){e=Xt(e,this.canvas,this.context),this.dirty|=this._fillColor2!=e,this._fillColor2=e}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(e){this.dirty|=this._isHorizontalGradient!=e,this._isHorizontalGradient=e}setFillStyle(e,t,s){return s===void 0&&(s=!0),this.fillStyle=e,this.fillColor2=t,this.isHorizontalGradient=s,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){e=Xt(e,this.canvas,this.context),this.dirty|=this._strokeStyle!=e,this._strokeStyle=e}get lineWidth(){return this._lineWidth}set lineWidth(e){this.dirty|=this._lineWidth!=e,this._lineWidth=e}setStrokeStyle(e,t){return this.strokeStyle=e,this.lineWidth=t,this}updateTexture(){return super.updateTexture(function(){this.clear(),yM.call(this)},this),this}};T.register("roundRectangleCanvas",function(e,t,s,l,w,S,k,D,V,G){var j=new $m(this.scene,e,t,s,l,w,S,k,D,V,G);return this.scene.add.existing(j),j}),K(window,"RexPlugins.UI.RoundRectangleCanvas",$m);var he=function(e,t){if(!e)return!1;if(e.hasOwnProperty(t))return!0;for(;e;){if(Object.getOwnPropertyDescriptor(e,t))return!0;e=e.__proto__}return!1},Kr=function(e,t,s){!t||he(e,`${t}X`)||(Object.defineProperty(e,`${t}X`,{get:function(){return s.x},set:function(l){s.x=l,e.dirty=!0}}),Object.defineProperty(e,`${t}Y`,{get:function(){return s.y},set:function(l){s.y=l,e.dirty=!0}}),Object.defineProperty(e,`${t}T`,{get:function(){return s.t},set:function(l){s.t=l,e.dirty=!0}}))},xM={setTLPosition(e,t){return this.geom.setTLPosition(e,t),this.dirty=!0,this},setTRPosition(e,t){return this.geom.setTRPosition(e,t),this.dirty=!0,this},setBLPosition(e,t){return this.geom.setBLPosition(e,t),this.dirty=!0,this},setBRPosition(e,t){return this.geom.setBRPosition(e,t),this.dirty=!0,this},resetCornerPosition(){return this.geom.resetCornerPosition(),this.dirty=!0,this},insertTopSidePoint(e,t,s,l){var w=this.geom.topSidePoints;if(Array.isArray(e))for(var w=e,S,k=0,D=w.length;k<D;k++)S=w[k],this.geom.insertTopSidePoint(S.t,S.x,S.y),Kr(this,S.key,w[w.length-1]);else this.geom.insertTopSidePoint(e,t,s),Kr(this,l,w[w.length-1]);return this.dirty=!0,this},insertRightSidePoint(e,t,s,l){var w=this.geom.rightSidePoints;if(Array.isArray(e))for(var w=e,S,k=0,D=w.length;k<D;k++)S=w[k],this.geom.insertRightSidePoint(S.t,S.x,S.y),Kr(this,S.key,w[w.length-1]);else this.geom.insertRightSidePoint(e,t,s),Kr(this,l,w[w.length-1]);return this.dirty=!0,this},insertBottomSidePoint(e,t,s,l){var w=this.geom.bottomSidePoints;if(Array.isArray(e))for(var w=e,S,k=0,D=w.length;k<D;k++)S=w[k],this.geom.insertBottomSidePoint(S.t,S.x,S.y),Kr(this,S.key,w[w.length-1]);else this.geom.insertBottomSidePoint(e,t,s),Kr(this,l,w[w.length-1]);return this.dirty=!0,this},insertLeftSidePoint(e,t,s,l){var w=this.geom.leftSidePoints;if(Array.isArray(e))for(var w=e,S,k=0,D=w.length;k<D;k++)S=w[k],this.geom.insertLeftSidePoint(S.t,S.x,S.y),Kr(this,S.key,w[w.length-1]);else this.geom.insertLeftSidePoint(e,t,s),Kr(this,l,w[w.length-1]);return this.dirty=!0,this},clearTopSidePoints(){return this.geom.clearTopSidePoints(),this.dirty=!0,this},clearRightSidePoints(){return this.geom.clearRightSidePoints(),this.dirty=!0,this},clearBottomSidePoints(){return this.geom.clearBottomSidePoints(),this.dirty=!0,this},clearLeftSidePoints(){return this.geom.clearLeftSidePoints(),this.dirty=!0,this},clearAllSidesPoints(){return this.geom.clearAllSidesPoints(),this.dirty=!0,this}};class bM{constructor(t,s,l,w){t===void 0&&(t=0),s===void 0&&(s=t),l===void 0&&(l=0),w===void 0&&(w=0),this.setTo(t,s,l,w),this.tlx=0,this.tly=0,this.trx=0,this.try=0,this.blx=0,this.bly=0,this.brx=0,this.bry=0,this.topSidePoints=[],this.rightSidePoints=[],this.bottomSidePoints=[],this.leftSidePoints=[]}setTo(t,s,l,w){return this.setPosition(t,s),this.setSize(l,w),this}setPosition(t,s){return this.x=t,this.y=s,this}setSize(t,s){return this.width=t,this.height=s,this}setTLPosition(t,s){return this.tlx=t,this.tly=s,this}setTRPosition(t,s){return this.trx=t,this.try=s,this}setBLPosition(t,s){return this.blx=t,this.bly=s,this}setBRPosition(t,s){return this.brx=t,this.bry=s,this}resetCornerPosition(){return this.setTLPosition(0,0).setTRPosition(0,0).setBLPosition(0,0).setBRPosition(0,0),this}insertTopSidePoint(t,s,l){return Fl(this.topSidePoints,t,s,l),this}insertRightSidePoint(t,s,l){return Fl(this.rightSidePoints,t,s,l),this}insertBottomSidePoint(t,s,l){return Fl(this.bottomSidePoints,t,s,l),this}insertLeftSidePoint(t,s,l){return Fl(this.leftSidePoints,t,s,l),this}clearTopSidePoints(){return this.topSidePoints.length=0,this}clearRightSidePoints(){return this.rightSidePoints.length=0,this}clearBottomSidePoints(){return this.bottomSidePoints.length=0,this}clearLeftSidePoints(){return this.leftSidePoints.length=0,this}clearAllSidesPoints(){return this.clearTopSidePoints().clearRightSidePoints().clearBottomSidePoints().clearLeftSidePoints(),this}}var Fl=function(e,t,s,l){if(typeof t!="number"){var w=t;t=w.t,s=w.x,l=w.y}e.push({t,x:s,y:l})};const wM=Phaser.Utils.Objects.IsPlainObject,hs=Phaser.Utils.Objects.GetValue,Qr=Phaser.Math.Linear,SM=Phaser.Geom.Polygon.Earcut;class Hd extends Wd{constructor(t,s,l,w,S,k,D){var V,G,j;if(wM(s)){var tt=s;s=tt.x,l=tt.y,w=tt.width,S=tt.height,k=tt.color,D=tt.alpha,V=tt.strokeColor,G=tt.strokeAlpha,j=tt.strokeWidth}s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=1),S===void 0&&(S=w);var st=new bM;super(t,"rexQuadShape",st),st.setTo(0,0,w,S),this.setPosition(s,l),this.setFillStyle(k,D),V!==void 0&&j===void 0&&(j=2),this.setStrokeStyle(j,V,G),this.setTLPosition(hs(tt,"tlx",0),hs(tt,"tly",0)).setTRPosition(hs(tt,"trx",0),hs(tt,"try",0)).setBLPosition(hs(tt,"blx",0),hs(tt,"bly",0)).setBRPosition(hs(tt,"brx",0),hs(tt,"bry",0));var rt=hs(tt,"leftSidePoints");rt&&this.insertLeftSidePoint(rt);var ot=hs(tt,"topSidePoints");ot&&this.insertTopSidePoint(ot);var ut=hs(tt,"rightSidePoints");ut&&this.insertRightSidePoint(ut);var ct=hs(tt,"bottomSidePoints");ct&&this.insertBottomSidePoint(ct),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,s=this.pathData;s.length=0;var l=t.width,w=t.height,S=0+t.tlx,k=0+t.tly,D=l+t.trx,V=0+t.try,G=l+t.brx,j=w+t.bry,tt=0+t.blx,st=w+t.bly,rt=t.topSidePoints,ot=t.rightSidePoints,ut=t.bottomSidePoints,ct=t.leftSidePoints;oi(S,k,s),Bl(rt);for(var pt=0,mt=rt.length;pt<mt;pt++){var yt=rt[pt],St=Qr(S,D,yt.t)+yt.x,Ct=Qr(k,V,yt.t)+yt.y;oi(St,Ct,s)}oi(D,V,s),Bl(ot);for(var pt=0,mt=ot.length;pt<mt;pt++){var yt=ot[pt],St=Qr(D,G,yt.t)+yt.x,Ct=Qr(V,j,yt.t)+yt.y;oi(St,Ct,s)}oi(G,j,s),Bl(ut);for(var pt=ut.length-1;pt>=0;pt--){var yt=ut[pt],St=Qr(tt,G,yt.t)+yt.x,Ct=Qr(st,j,yt.t)+yt.y;oi(St,Ct,s)}oi(tt,st,s),Bl(ct);for(var pt=ct.length-1;pt>=0;pt--){var yt=ct[pt],St=Qr(S,tt,yt.t)+yt.x,Ct=Qr(k,st,yt.t)+yt.y;oi(St,Ct,s)}return s.push(s[0],s[1]),this.pathIndexes=SM(s),this}get tlx(){return this.geom.tlx}set tlx(t){this.geom.tlx=t,this.dirty=!0}get tly(){return this.geom.tly}set tly(t){this.geom.tly=t,this.dirty=!0}get trx(){return this.geom.trx}set trx(t){this.geom.trx=t,this.dirty=!0}get try(){return this.geom.try}set try(t){this.geom.try=t,this.dirty=!0}get blx(){return this.geom.blx}set blx(t){this.geom.blx=t,this.dirty=!0}get bly(){return this.geom.bly}set bly(t){this.geom.bly=t,this.dirty=!0}get brx(){return this.geom.brx}set brx(t){this.geom.brx=t,this.dirty=!0}get bry(){return this.geom.bry}set bry(t){this.geom.bry=t,this.dirty=!0}get leftSidePoints(){return this.geom.leftSidePoints}get topSidePoints(){return this.geom.topSidePoints}get bottomSidePoints(){return this.geom.bottomSidePoints}get rightSidePoints(){return this.geom.rightSidePoints}}var Bl=function(e){e.length<=1||e.sort(function(t,s){return t.t-s.t})};Object.assign(Hd.prototype,xM),T.register("QuadShape",function(e,t,s,l,w,S){var k=new Hd(this.scene,e,t,s,l,w,S);return this.scene.add.existing(k),k}),K(window,"RexPlugins.UI.QuadShape",Hd);var TM=Phaser.Renderer.WebGL.Utils,CM=function(e,t,s,l){if(!(t.width===0||t.height===0)){s.addToRenderList(t);var w=t.frame,S=w.width,k=w.height,D=TM.getTintAppendFloatAlpha,V=e.pipelines.set(t.pipeline,t),G=V.setTexture2D(w.glTexture,t);e.pipelines.preBatch(t),V.batchTexture(t,w.glTexture,S,k,t.x,t.y,S/t.style.resolution,k/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,S,k,D(t.tintTopLeft,s.alpha*t._alphaTL),D(t.tintTopRight,s.alpha*t._alphaTR),D(t.tintBottomLeft,s.alpha*t._alphaBL),D(t.tintBottomRight,s.alpha*t._alphaBR),t.tintFill,0,0,s,l,!1,G),e.pipelines.postBatch(t)}},PM=function(e,t,s,l){t.width===0||t.height===0||(s.addToRenderList(t),e.batchSprite(t,t.frame,s,l))},MM={renderWebGL:CM,renderCanvas:PM};const $d=Phaser.Display.Canvas.CanvasPool;var _M=function(e,t,s){s===void 0&&(s={});var l=$d.create(this),w=l.getContext("2d",{willReadFrequently:!0});e.syncFont(l,w);var S=w.measureText(t),k=Math.ceil(S.width*e.baselineX),D=k,V=2*D;if(D=D*e.baselineY|0,l.width=k,l.height=V,w.fillStyle="#f00",w.fillRect(0,0,k,V),w.font=e._font,w.textBaseline="alphabetic",w.fillStyle="#000",w.fillText(e.testString,0,D),s.left=0,k===0||V===0||!w.getImageData(0,0,k,V))return $d.remove(l),s;for(var G=w.getImageData(0,0,k,V).data,j=!1,tt=0;tt<k;tt++){for(var st=0;st<V;st++){var rt=(st*k+tt)*4;if(G[rt]!==255){s.left=tt,j=!0;break}}if(j)break}return $d.remove(l),s};Mt();const kM=Phaser.GameObjects.GameObject;class qm extends kM{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,s){return this.style.setFixedSize(t,s)}setBackgroundColor(t,s,l){return this.style.setBackgroundColor(t,s,l)}setBackgroundStrokeColor(t,s){return this.style.setBackgroundStrokeColor(t,s)}setBackgroundCornerRadius(t,s){return this.style.setBackgroundCornerRadius(t,s)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,s){return this.style.setStroke(t,s)}setShadow(t,s,l,w,S,k){return this.style.setShadow(t,s,l,w,S,k)}setShadowOffset(t,s){return this.style.setShadowOffset(t,s)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setUnderline(t,s,l){return this.style.setUnderline(t,s,l)}setUnderlineColor(t){return this.style.setUnderlineColor(t)}setUnderlineThickness(t){return this.style.setUnderlineThickness(t)}setUnderlineOffset(t){return this.style.setUnderlineOffset(t)}setStrikethrough(t,s,l){return this.style.setStrikethrough(t,s,l)}setStrikethroughColor(t){return this.style.setStrikethroughColor(t)}setStrikethroughThickness(t){return this.style.setStrikethroughThickness(t)}setStrikethroughOffset(t){return this.style.setStrikethroughOffset(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}get lineSpacing(){return this.style.lineSpacing}set lineSpacing(t){this.style.lineSpacing=t}setLineSpacing(t){return this.style.lineSpacing=t,this.updateText(!0),this}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,s){return this.style.setTextMetrics(t,s)}measureTextMargins(t,s){return _M(this.style,t,s)}}const Ei=Phaser.GameObjects.Components;Phaser.Class.mixin(qm,[Ei.Alpha,Ei.BlendMode,Ei.ComputedSize,Ei.Crop,Ei.Depth,Ei.Flip,Ei.GetBounds,Ei.Mask,Ei.Origin,Ei.Pipeline,Ei.PostPipeline,Ei.ScrollFactor,Ei.Tint,Ei.Transform,Ei.Visible,MM]);var OM={backgroundColor:["backgroundColor",null,Xt],backgroundColor2:["backgroundColor2",null,Xt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,Xt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",Xt],stroke:["stroke","#fff",Xt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",Xt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",Xt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],strikethroughColor:["strikethrough.color","#000",Xt],strikethroughThickness:["strikethrough.thickness",0,null],strikethroughOffset:["strikethrough.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|MÃ‰qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2018 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
*/const Nl=Phaser.Display.Canvas.CanvasPool;var Km=function(e){var t=Nl.create(this),s=t.getContext("2d",{willReadFrequently:!0});e.syncFont(t,s);var l=s.measureText(e.testString);if("actualBoundingBoxAscent"in l){var w=l.actualBoundingBoxAscent,S=l.actualBoundingBoxDescent,G={ascent:w,descent:S,fontSize:w+S};return Nl.remove(t),G}var k=Math.ceil(l.width*e.baselineX),D=k,V=2*D;D=D*e.baselineY|0,t.width=k,t.height=V,s.fillStyle="#f00",s.fillRect(0,0,k,V),s.font=e._font,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(e.testString,0,D);var G={ascent:0,descent:0,fontSize:0};if(!s.getImageData(0,0,k,V))return G.ascent=D,G.descent=D+6,G.fontSize=G.ascent+G.descent,Nl.remove(t),G;var j=s.getImageData(0,0,k,V).data,tt=j.length,st=k*4,rt,ot,ut=0,ct=!1;for(rt=0;rt<D;rt++){for(ot=0;ot<st;ot+=4)if(j[ut+ot]!==255){ct=!0;break}if(!ct)ut+=st;else break}for(G.ascent=D-rt,ut=tt-st,ct=!1,rt=V;rt>D;rt--){for(ot=0;ot<st;ot+=4)if(j[ut+ot]!==255){ct=!0;break}if(!ct)ut-=st;else break}return G.descent=rt-D,G.fontSize=G.ascent+G.descent,Nl.remove(t),G},Xe={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,MIX_WRAP:3,SPLITREGEXP:/(?:\r\n|\r|\n)/};const Yl={none:Xe.NO_WRAP,word:Xe.WORD_WRAP,char:Xe.CHAR_WRAP,character:Xe.CHAR_WRAP,mix:Xe.MIX_WRAP},EM=Phaser.Utils.Objects.GetAdvancedValue,qi=Phaser.Utils.Objects.GetValue;let qd=class{constructor(e,t,s){this.parent=e,s===void 0&&(s=OM),this.propertyMap=s,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.strikethroughColor,this.strikethroughThickness,this.strikethroughOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(t,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Xe.NO_WRAP&&this.wrapWidth===0}setStyle(e,t,s){if(t===void 0&&(t=!0),s===void 0&&(s=!1),e&&e.hasOwnProperty("wordWrap")){var l=e.wordWrap;l.hasOwnProperty("width")&&(e.wrap={mode:"word",width:l.width})}if(e&&e.hasOwnProperty("wrap")){var w=e.wrap;if(w.hasOwnProperty("mode")){var S=w.mode;typeof S=="string"&&(w.mode=Yl[S])}else w.hasOwnProperty("width")&&(w.mode=1)}e&&e.rtl&&s&&!e.hasOwnProperty("halign")&&(e.halign="right"),e&&e.hasOwnProperty("fontSize")&&typeof e.fontSize=="number"&&(e.fontSize=e.fontSize.toString()+"px");var k=this.propertyMap;for(var D in k){var V=k[D],G=V[0],j=s?V[1]:this[D],tt=V[2];if(D==="wrapCallback"||D==="wrapCallbackScope")this[D]=qi(e,G,j);else{var st=EM(e,G,j);tt&&(st=tt(st)),this[D]=st}}var rt=qi(e,"font",null);rt===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=rt;var ot=qi(e,"fill",null);ot!==null&&(this.color=Xt(ot));var ut=qi(e,"metrics",!1);return ut?this.metrics={ascent:qi(ut,"ascent",0),descent:qi(ut,"descent",0),fontSize:qi(ut,"fontSize",0)}:(t||!this.metrics)&&(this.metrics=Km(this)),t?this.parent.updateText():this.parent}syncFont(e,t){t.font=this._font}syncStyle(e,t){t.textBaseline="alphabetic",t.fillStyle=this.color,t.strokeStyle=this.stroke,t.lineWidth=this.strokeThickness,t.lineCap="round",t.lineJoin="round"}syncShadow(e,t){t?(e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY,e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur):(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor=0,e.shadowBlur=0)}update(e){return e&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=Km(this)),this.parent.updateText(e)}buildFont(){var e=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return e!==this._font&&(this._font=e),this}setFont(e){return typeof e=="string"?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=qi(e,"fontFamily","Courier"),this.fontSize=qi(e,"fontSize","16px"),this.fontStyle=qi(e,"fontStyle","")),this.update(!0)}setFontFamily(e){return this.fontFamily=e,this.update(!0)}setFontStyle(e){return this.fontStyle=e,this.update(!0)}setFontSize(e){return typeof e=="number"&&(e=e.toString()+"px"),this.fontSize=e,this.update(!0)}setTestString(e){return this.testString=e,this.update(!0)}setFixedSize(e,t){return this.fixedWidth=e,this.fixedHeight=t,e&&(this.parent.width=e),t&&(this.parent.height=t),this.update(this.isWrapFitMode)}setResolution(e){return this.resolution=e,this.update(!1)}setXOffset(e){return this.xOffset=e,this.update(!1)}setBackgroundColor(e,t,s){return s===void 0&&(s=!0),this.backgroundColor=Xt(e,this.parent.canvas,this.parent.context),this.backgroundColor2=Xt(t,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=s,this.update(!1)}setBackgroundStrokeColor(e,t){return this.backgroundStrokeColor=Xt(e,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=t,this.update(!1)}setBackgroundCornerRadius(e,t){return this.backgroundCornerRadius=e,this.backgroundCornerIteration=t,this.update(!1)}setFill(e){return this.color=Xt(e,this.parent.canvas,this.parent.context),this.update(!1)}setColor(e){return this.color=Xt(e,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(e,t){return e===void 0?this.strokeThickness=0:(t===void 0&&(t=this.strokeThickness),this.stroke=Xt(e,this.parent.canvas,this.parent.context),this.strokeThickness=t),this.update(!0)}setShadow(e,t,s,l,w,S){return e===void 0&&(e=0),t===void 0&&(t=0),s===void 0&&(s="#000"),l===void 0&&(l=0),w===void 0&&(w=!1),S===void 0&&(S=!0),this.shadowOffsetX=e,this.shadowOffsetY=t,this.shadowColor=Xt(s,this.parent.canvas,this.parent.context),this.shadowBlur=l,this.shadowStroke=w,this.shadowFill=S,this.update(!1)}setShadowOffset(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.shadowOffsetX=e,this.shadowOffsetY=t,this.update(!1)}setShadowColor(e){return e===void 0&&(e="#000"),this.shadowColor=Xt(e,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(e){return e===void 0&&(e=0),this.shadowBlur=e,this.update(!1)}setShadowStroke(e){return this.shadowStroke=e,this.update(!1)}setShadowFill(e){return this.shadowFill=e,this.update(!1)}setUnderline(e,t,s){return e===void 0&&(e="#000"),t===void 0&&(t=0),s===void 0&&(s=0),this.underlineColor=Xt(e,this.parent.canvas,this.parent.context),this.underlineThickness=t,this.underlineOffset=s,this.update(!1)}setUnderlineColor(e){return e===void 0&&(e="#000"),this.underlineColor=Xt(e,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(e){return e===void 0&&(e=0),this.underlineThickness=e,this.update(!1)}setUnderlineOffset(e){return e===void 0&&(e=0),this.underlineOffset=e,this.update(!1)}setStrikethrough(e,t,s){return e===void 0&&(e="#000"),t===void 0&&(t=0),s===void 0&&(s=0),this.strikethroughColor=Xt(e,this.parent.canvas,this.parent.context),this.strikethroughThickness=t,this.strikethroughOffset=s,this.update(!1)}setStrikethroughColor(e){return e===void 0&&(e="#000"),this.strikethroughColor=Xt(e,this.parent.canvas,this.parent.context),this.update(!1)}setStrikethroughThickness(e){return e===void 0&&(e=0),this.strikethroughThickness=e,this.update(!1)}setStrikethroughOffset(e){return e===void 0&&(e=0),this.strikethroughOffset=e,this.update(!1)}setWrapMode(e){return typeof e=="string"&&(e=Yl[e.toLowerCase()]||0),this.wrapMode=e,this.update(!0)}setWrapWidth(e){return this.wrapWidth=e,this.update(!1)}setAlign(e,t){return e===void 0&&(e="left"),t===void 0&&(t="top"),this.halign=e,this.valign=t,this.update(!1)}setHAlign(e){return e===void 0&&(e="left"),this.halign=e,this.update(!1)}setVAlign(e){return e===void 0&&(e="top"),this.valign=e,this.update(!1)}setMaxLines(e){return e===void 0&&(e=0),this.maxLines=e,this.update(!1)}getTextMetrics(){var e=this.metrics;return{ascent:e.ascent,descent:e.descent,fontSize:e.fontSize}}setTextMetrics(e,t){return this.metrics.ascent=e.ascent,this.metrics.descent=e.descent,this.metrics.fontSize=e.fontSize,t&&(typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=qi(t,"fontFamily",this.fontFamily),this.fontSize=qi(t,"fontSize",this.fontSize),this.fontStyle=qi(t,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.parent.lineSpacing}toJSON(){var e={},t=this.propertyMap;for(var s in t)e[s]=this[s];return e.metrics=this.getTextMetrics(),e}destroy(){this.parent=void 0}};var Sa=function(e){return e==null?e="":Array.isArray(e)?e=e.join(`
`):typeof e=="number"&&(e=e.toString()),e},AM={draw(e,t,s,l){var w=this.penManager;this.hitAreaManager.clear();var S=this.context;S.save();var k=this.defaultStyle;this.clear(),jd(this,k.backgroundColor,k.backgroundStrokeColor,k.backgroundStrokeLineWidth,k.backgroundCornerRadius,k.backgroundColor2,k.backgroundHorizontalGradient,k.backgroundCornerIteration),e+=this.startXOffset,t+=this.startYOffset;var D=k.halign,V=k.valign,G,j=k.lineHeight,tt=w.lines,st=tt.length,rt=k.maxLines,ot,ut,ct;rt>0&&st>rt?(ot=rt,V==="center"?ut=Math.floor((st-ot)/2):V==="bottom"?ut=st-ot:ut=0):(ot=st,ut=0),ct=ut+ot;var pt,mt,yt=this.rtl,St=yt?this.parent.width:void 0;V==="center"?mt=Math.max((l-ot*j)/2,0):V==="bottom"?mt=Math.max(l-ot*j-2,0):mt=0,mt+=t;for(var Ct=ut;Ct<ct;Ct++)if(G=w.getLineWidth(Ct),G!==0){for(var _t=tt[Ct],Rt=_t.length,Ft=D,It=0;It<Rt;It++){var Bt=_t[It].prop.align;if(Bt!==void 0){Ft=Bt;break}}Ft==="center"?pt=(s-G)/2:Ft==="right"?pt=yt?0:s-G:pt=yt?s-G:0,pt+=e;for(var It=0;It<Rt;It++)this.drawPen(_t[It],pt,mt,St)}S.restore()},drawPen(e,t,s,l){t+=e.x,s+=e.y+(e.prop.y||0),l!==void 0&&(t=l-t);var w=this.canvas,S=this.context;S.save();var k=this.parser.propToContextStyle(this.defaultStyle,e.prop);if(k.bgcolor!==null&&e.width>0){var D=this.defaultStyle.metrics,V=s-D.ascent,G=D.fontSize;this.drawRectangle(t,V,e.width,G,k.bgcolor,k)}if(k.underlineThickness>0&&e.width>0){var j=s+k.underlineOffset-k.underlineThickness/2;this.drawLine(t,j,e.width,k.underlineThickness,k.underlineColor,k)}if(e.isTextPen&&(k.buildFont(),k.syncFont(w,S),k.syncStyle(w,S),this.drawText(t,s,e.text,k)),e.isImagePen&&this.drawImage(t,s,e.prop.img,e.prop.color,k),k.strikethroughThickness>0&&e.width>0){var j=s+k.strikethroughOffset-k.strikethroughThickness/2;this.drawLine(t,j,e.width,k.strikethroughThickness,k.strikethroughColor,k)}if(S.restore(),e.hasAreaMarker&&e.width>0){var tt,st=e.prop.area;if(st)tt={key:st};else{var rt=e.prop.url;tt={key:`url:${rt}`,url:rt}}this.hitAreaManager.add(t,s-this.startYOffset,e.width,this.defaultStyle.lineHeight,tt)}},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawRectangle(e,t,s,l,w,S){this.autoRound&&(e=Math.round(e),t=Math.round(t));var k=this.context;k.fillStyle=w,k.fillRect(e,t,s,l)},drawLine(e,t,s,l,w,S){this.autoRound&&(e=Math.round(e),t=Math.round(t));var k=this.context;S.syncShadow(k,S.shadowStroke);var D=k.lineCap;k.lineCap="butt",k.strokeStyle=w,k.lineWidth=l,k.beginPath(),k.moveTo(e,t),k.lineTo(e+s,t),k.stroke(),k.lineCap=D},drawText(e,t,s,l){this.autoRound&&(e=Math.round(e),t=Math.round(t));var w=this.context;l.stroke&&l.stroke!=="none"&&l.strokeThickness>0&&(l.syncShadow(w,l.shadowStroke),w.strokeText(s,e,t)),l.color&&l.color!=="none"&&(l.syncShadow(w,l.shadowFill),w.fillText(s,e,t))},drawImage(e,t,s,l,w){t-=this.startYOffset,this.parent.imageManager.draw(s,this.context,e,t,l,this.autoRound)}};const In=Phaser.Utils.Objects.GetValue,RM=Xe.NO_NEWLINE,Qm=Xe.RAW_NEWLINE;class DM{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=In(t,"text",""),this.x=In(t,"x",0),this.y=In(t,"y",0),this.width=In(t,"width",0);var s=In(t,"prop",null);s===null&&(s={}),this.prop=s,this.newLineMode=In(t,"newLineMode",0),this.startIndex=In(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===Qm&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==RM&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===Qm&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}}var Ms=function(e,t){var s=Array.isArray(e);if(t===void 0?t=s?[]:{}:Ce(t),s){t.length=e.length;for(var l=0,w=e.length;l<w;l++)t[l]=e[l]}else for(var S in e)t[S]=e[S];return t};const Jm=Phaser.Utils.Objects.GetFastValue,Zm=Xe.NO_NEWLINE,IM=Xe.WRAPPED_NEWLINE;class Kd{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=Jm(t,"tagToText",n),this.tagToTextScope=Jm(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,s=this.lines.length;t<s;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,s,l,w,S,k){var D=this.pensPool.pop();return D==null&&(D=new DM),Ln.text=t,Ln.x=s,Ln.y=l,Ln.width=w,Ln.prop=S,Ln.newLineMode=k,D.resetFromJSON(Ln),this.addPen(D),this}addImagePen(t,s,l,w){return this.addTextPen("",t,s,l,w,Zm),this}addNewLinePen(){var t=this.lastPen,s=t?t.lastX:0,l=t?t.y:0,w=t?Ms(t.prop):null;return this.addTextPen("",s,l,0,w,IM),this}addPen(t){var s=this.lastPen;s==null?t.startIndex=0:t.startIndex=s.endIndex,this.pens.push(t);var l=this.lastLine;l==null&&(l=this.linesPool.pop()||[],this.lines.push(l)),l.push(t),t.newLineMode!==Zm&&(l=this.linesPool.pop()||[],this.lines.push(l)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new Kd),t.clear();for(var s=0,l=this.lines.length;s<l;s++)for(var w=this.lines[s],S=0,k=w.length;S<k;S++){var D=w[S];t.addPen(D.text,D.x,D.y,D.width,Ms(D.prop),D.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var s=this.lines[t];return s&&s[0]?s[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var s,l=!1,w;for(s=t;s>=0&&(w=this.lines[s],l=w!=null&&w.length>0,!l);s--);if(!l)return 0;var S=w[w.length-1];return S.endIndex}getLineWidth(t){var s=this.lines[t];if(!s)return 0;var l=s[s.length-1];if(l==null)return 0;var w=l.lastX;return w}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,s=0,l=0,w=this.lines.length;l<w;l++)t=this.getLineWidth(l),t>s&&(s=t);return this.maxLinesWidth=s,s}getLineWidths(){for(var t=[],s=0,l=this.lines.length;s<l;s++)t.push(this.getLineWidth(s));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",s=this.pens,l=0,w=s.length;l<w;l++)t+=s[l].plainText;return t}get rawTextLength(){for(var t=0,s=this.pens,l=0,w=this.pens.length;l<w;l++)t+=s[l].rawTextLength;return t}getSliceTagText(t,s,l){var w=this.lastPen;if(w==null)return"";var S=w.endIndex;(t===void 0||t===0)&&(t=-1),(s===void 0||s===S)&&(s=S+1),l===void 0&&(l=!1);for(var k="",D,V,G,j,tt,st,rt,ot=0,ut=this.pens.length;ot<ut&&(D=this.pens[ot],j=D.endIndex,!(!(j<=t)&&(D=this.pens[ot],V=l?D.wrapText:D.plainText,st=D.prop,G=D.startIndex,tt=G>=t&&j<=s,tt||(V=V.substring(t-G,s-G)),this.tagToTextScope?k+=this.tagToText.call(this.tagToTextScope,V,st,rt):k+=this.tagToText(V,st,rt),rt=st,j>=s)));ot++);return k}get length(){return this.lines.length}set length(t){this.clear()}}var Ln={};const LM=Phaser.Geom.Rectangle;var t0=new bt;class FM{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var t=0,s=this.hitAreas.length;t<s;t++)this.hitAreas[t].data=null;return t0.pushMultiple(this.hitAreas),this}add(t,s,l,w,S){S===void 0&&(S={});var k=t0.pop();return k===null?k=new LM(t,s,l,w):k.setTo(t,s,l,w),k.data=S,this.hitAreas.push(k),this}getFirst(t,s){for(var l=0,w=this.hitAreas.length;l<w;l++){var S=this.hitAreas[l];if(S.contains(t,s))return S}return null}getByKey(t){for(var s=0,l=this.hitAreas.length;s<l;s++){var w=this.hitAreas[s];if(w.data.key===t)return w}return null}drawBounds(t,s,l){s===void 0&&(s=16777215),l&&t.save().translateCanvas(l.x,l.y).rotateCanvas(l.rotation).scaleCanvas(l.scaleX,l.scaleY);for(var w=0,S=this.hitAreas.length;w<S;w++){var k=this.hitAreas[w];t.lineStyle(1,s).strokeRect(k.x,k.y,k.width,k.height)}return l&&t.restore(),this}}var BM=function(){this.parent.on("pointerdown",NM,this).on("pointerup",YM,this).on("pointermove",Qd,this).on("pointerover",Qd,this).on("pointerout",function(e,t){Qd.call(this,e,null,null,t)},this)},NM=function(e,t,s,l){var w=this.hitAreaManager.getFirst(t,s);if(w!==null){var S=w.data.key;Ta.call(this,"areadown",S,e,t,s,l),w.data&&(w.data.isDown=!0)}},YM=function(e,t,s,l){var w=this.hitAreaManager.getFirst(t,s);if(w!==null){var S=w.data.key;if(Ta.call(this,"areaup",S,e,t,s,l),!!w.data){if(w.data.isDown){if(Ta.call(this,"areaclick",S,e,t,s,l),!w.data)return;var k=w.data.url;k&&window.open(k,"_blank")}w.data.isDown=!1}}},Qd=function(e,t,s,l){if(t===null){if(this.lastHitAreaKey!==null){Ta.call(this,"areaout",this.lastHitAreaKey,e,t,s,l);var w=this.hitAreaManager.getByKey(this.lastHitAreaKey);w&&w.data&&(w.data.isDown=!1),this.lastHitAreaKey=null}return}var w=this.hitAreaManager.getFirst(t,s),S=w?w.data.key:null;if(this.lastHitAreaKey!==S){if(this.lastHitAreaKey!==null){Ta.call(this,"areaout",this.lastHitAreaKey,e,t,s,l);var k=this.hitAreaManager.getByKey(this.lastHitAreaKey);k&&(this.urlTagCursorStyle&&e0(this.scene,k,""),k.data.isDown=!1)}S!==null&&(Ta.call(this,"areaover",S,e,t,s,l),w.data&&this.urlTagCursorStyle&&e0(this.scene,w,this.urlTagCursorStyle)),this.lastHitAreaKey=S}},Ta=function(e,t,s,l,w,S){this.parent.emit(`${e}-${t}`,s,l,w,S),this.parent.emit(e,t,s,l,w,S)},e0=function(e,t,s){!t||!t.data||!t.data.url||(e.input.manager.canvas.style.cursor=s)};const i0=Phaser.GameObjects.Components.TransformMatrix,VM=Phaser.Math.TransformXY;var s0=function(e,t,s,l,w){l===void 0&&(l=e.scene.cameras.main),w===void 0?w={}:w===!0&&(w=zM);var S=l.scrollX,k=l.scrollY,D=t+S*e.scrollFactorX-S,V=s+k*e.scrollFactorY-k;return e.parentContainer?(Vl===void 0&&(Vl=new i0,r0=new i0),e.getWorldTransformMatrix(Vl,r0),Vl.applyInverse(D,V,w)):VM(D,V,e.x,e.y,e.rotation,e.scaleX,e.scaleY,w),w.x+=e.displayOriginX,w.y+=e.displayOriginY,w},Vl,r0,zM={},GM=function(e,t,s){var l=s0(this.parent,e,t,s,!0),w=this.hitAreaManager.getFirst(l.x,l.y);if(w!==null)return w.data.key},UM=/^[\x00-\x7F]+$/,zo=function(e){return UM.test(e)};const WM=Xe.NO_NEWLINE,XM=Xe.RAW_NEWLINE,Jd=Xe.WRAPPED_NEWLINE,n0=Xe.NO_WRAP,jM=Xe.WORD_WRAP,a0=Xe.CHAR_WRAP,HM=Xe.SPLITREGEXP;var o0=function(e,t,s,l,w,S){l<=0&&(s=n0);var k=[];if(!e||!e.length)return k;for(var D=s===n0,V=e.split(HM),G,j,tt,st=0,rt=V.length;st<rt;st++){if(G=V[st],tt=st===rt-1?WM:XM,D){var ot=t.measureText(G).width;k.push(S.getLine(G,ot,tt));continue}if(j=st===0?l-w:l,G.length<=100){var ot=t.measureText(G).width;if(ot<=j){k.push(S.getLine(G,ot,tt));continue}}for(var ut=$M(G,s),ct,pt,mt="",yt=0,St,Ct=0,_t=ut.length;Ct<_t;Ct++){if(ct=ut[Ct],pt=t.measureText(ct).width,pt>l&&qM(ct)){mt!==""?k.push(S.getLine(mt,yt,Jd)):Ct===0&&w>0&&k.push(S.getLine("",0,Jd)),k.push(...o0(ct,t,a0,l,0,S));var Rt=k.pop();mt=Rt.text,yt=Rt.width,S.freeLine(Rt),mt===" "&&(mt="",yt=0);continue}St=yt+pt,St>j?(k.push(S.getLine(mt,yt,Jd)),mt=ct,yt=pt,j=l):(mt+=ct,yt=St),Ct===_t-1&&k.push(S.getLine(mt,yt,tt))}}return k},$M=function(e,t){var s;switch(t){case jM:s=[],e=e.split(" ");for(var l=0,w=e.length;l<w;l++){var S=e[l];l<w-1?s.push(S+" "):S!==""&&s.push(S)}break;case a0:s=e.split("");break;default:s=[],e=e.split(" ");for(var l=0,w=e.length;l<w;l++){var S=e[l];l<w-1?zo(S)?s.push(S+" "):(s.push(...S.split("")),s.push(" ")):S!==""&&(zo(S)?s.push(S):s.push(...S.split("")))}break}return s},qM=function(e){switch(e.length){case 1:return!1;case 2:return e.charAt(1)!==" ";default:return!0}};const Zd=Phaser.Utils.Objects.GetValue,KM=Xe.NO_WRAP,h0=Xe.NO_NEWLINE,QM=Xe.WRAPPED_NEWLINE;class l0{constructor(t){this.parent=t.parent,this.scene=this.parent.scene,this.context=Zd(t,"context",null),this.canvas=this.context.canvas,this.parser=Zd(t,"parser",null),this.defaultStyle=Zd(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new FM,this.lastHitAreaKey=null,this.urlTagCursorStyle=null}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,s,l,w,S){if(S===void 0&&(S=this.penManager),S.clear(),t==="")return S;var k=this.parent.style;if(k.isWrapFitMode){var D=this.parent.padding;l=k.fixedWidth-D.left-D.right}for(var V=this.canvas,G=this.context,j=0,tt=0,st=k.wrapCallback,rt=k.wrapCallbackScope,ot=!0,ut,ct,pt,mt=this.parser.splitText(t),yt,St,Ct=this.wrapTextLinesPool,_t=0,Rt=mt.length;_t<Rt;_t++)if(yt=this.parser.tagTextToProp(mt[_t],ct),ut=yt.plainText,ct=yt.prop,ct.img){var Ft=this.imageManager.getOuterWidth(ct.img);l>0&&s!==KM&&l<j+Ft&&(S.addNewLinePen(),tt+=w,j=0),S.addImagePen(j,tt,Ft,Ms(ct)),j+=Ft}else if(ut!==""){if(G.save(),pt=this.parser.propToContextStyle(this.defaultStyle,ct),pt.buildFont(),pt.syncFont(V,G),pt.syncStyle(V,G),!st)St=o0(ut,G,s,l,j,Ct);else{St=st.call(rt,ut,G,l,j),typeof St=="string"&&(St=St.split(`
`));for(var It,Bt=0,Wt=St.length;Bt<Wt;Bt++)It=St[Bt],typeof It=="string"?St[Bt]=Ct.getLine(It,G.measureText(It).width,Bt<Wt-1?QM:h0):ot=!1}for(var It,Bt=0,Wt=St.length;Bt<Wt;Bt++)It=St[Bt],S.addTextPen(It.text,j,tt,It.width,Ms(ct),It.newLineMode),It.newLineMode!==h0?(j=0,tt+=w):j+=It.width;ot&&Ct.freeLines(St),St=null,G.restore()}for(var _t=0,Rt=this.lines.length;_t<Rt;_t++){var se=this.lines[_t],ne=se[se.length-1];ne&&(ne.width+=this.parser.getStrokeThinkness(this.defaultStyle,ne.prop))}return S}get startXOffset(){return this.defaultStyle.xOffset}get startYOffset(){return this.defaultStyle.metrics.ascent}get lines(){return this.penManager.lines}get displayLinesCount(){var t=this.penManager.linesCount,s=this.defaultStyle.maxLines;return s>0&&t>s&&(t=s),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.displayLinesCount,s=this.defaultStyle.lineHeight*t;return t>0&&(s-=this.defaultStyle.lineSpacing),s}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new Kd({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,s,l){var w;if(t==null)w=this.penManager.plainText;else{var S=this.parser.splitText(t,1);w="";for(var k=0,D=S.length;k<D;k++)w+=S[k]}return(s!=null||l!=null)&&(s==null&&(s=0),l==null&&(l=w.length),w=w.substring(s,l)),w}getPenManager(t,s){if(t===void 0)return this.copyPenManager(s,this.penManager);s===void 0&&(s=this.newPenManager());var l=this.defaultStyle;return this.updatePenManager(t,l.wrapMode,l.wrapWidth,l.lineHeight,s),s}getText(t,s,l,w){if(t==null)return this.penManager.getSliceTagText(s,l,w);var S=this.tmpPenManager,k=this.defaultStyle;return this.updatePenManager(t,k.wrapMode,k.wrapWidth,k.lineHeight,S),S.getSliceTagText(s,l,w)}copyPenManager(t,s){return s===void 0&&(s=this.penManager),s.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var JM={setInteractive:BM,getHitArea:GM};Object.assign(l0.prototype,AM,JM);class u0 extends bt{freeLine(t){if(t)return this.push(t),this}freeLines(t){if(t)return this.pushMultiple(t),this}getLine(t,s,l){var w=this.pop();return w===null&&(w={}),w.text=t,w.width=s,w.newLineMode=l,w}}const ZM=Phaser.Utils.Objects.IsPlainObject,Ca=Phaser.Utils.Objects.GetValue;var tp=function(e,t){ZM(e)?(t=e,e=t.key):t===void 0&&(t={key:e}),t.hasOwnProperty("key")||(t.key=e);var s=t.key,l=t.frame,w=t.width,S=t.height;if(w===void 0||S===void 0){var k=this.textureManager.getFrame(s,l),D=k?k.cutWidth:0,V=k?k.cutHeight:0;w===void 0&&S===void 0?(w=D,S=V):w===void 0?w=D*(S/V):S===void 0&&(S=V*(w/D))}this.images[e]={key:s,frame:l,width:w,height:S,y:Ca(t,"y",0),left:Ca(t,"left",0),right:Ca(t,"right",0),originX:Ca(t,"originX",0),originY:Ca(t,"originY",0),tintFill:Ca(t,"tintFill",!1)}};const c0=Phaser.Display.Canvas.CanvasPool;var d0=function(e,t,s,l,w,S,k,D){s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=e.cutWidth),S===void 0&&(S=e.cutHeight),D===void 0&&(D=!1),D&&(s=Math.round(s),l=Math.round(l));var V=t.getContext("2d",{willReadFrequently:!0});if(k){var G=c0.create(null,w,S,Phaser.CANVAS,!0),j=G.getContext("2d",{willReadFrequently:!0});j.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,w,S),j.globalCompositeOperation="source-in",j.fillStyle=k,j.fillRect(0,0,w,S),V.drawImage(G,0,0,w,S,s,l,w,S),c0.remove(G)}else V.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,s,l,w,S)},t_=function(e,t,s,l,w,S){var k=this.get(e);if(k){var D=this.textureManager.getFrame(k.key,k.frame),V=k.width,G=k.height;s+=k.left-k.originX*V,l+=k.y-k.originY*G,k.tintFill||(w=void 0),d0(D,t.canvas,s,l,V,G,w,S)}};class ep{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,s){if(typeof t=="string")tp.call(this,t,s);else if(Array.isArray(t))for(var l=t,w=0,S=l.length;w<S;w++)tp.call(this,l[w]);else{var l=t;for(var t in l)tp.call(this,t,l[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var s=this.get(t);return s?s.width+s.left+s.right:0}getFrame(t){var s=this.get(t);return s?this.textureManager.getFrame(s.key,s.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var e_={draw:t_};Object.assign(ep.prototype,e_);var p0=function(e,t){!e&&e!==0&&(e=""),t===void 0&&(t=!0),Array.isArray(e)&&(e=e.join(`
`));var s;return t?s=`${this.text}
${e}`:s=`${this.text}${e}`,s!=this.text&&this.setText(s),this};const i_=Phaser.Utils.Objects.IsPlainObject,f0=Phaser.DOM.AddToDOM,g0=Phaser.Display.Canvas.CanvasPool,s_=Phaser.GameObjects.GameObject,zi=Phaser.Utils.Objects.GetValue,r_=Phaser.DOM.RemoveFromDOM,n_=Xe.SPLITREGEXP,a_=Phaser.Utils.String.UUID;var Pa=null,ip=null,sp=null;class rp extends qm{constructor(t,s,l,w,S,k,D){if(i_(s)){var V=s;s=zi(V,"x",0),l=zi(V,"y",0),w=zi(V,"text",""),S=zi(V,"style")}if(s===void 0&&(s=0),l===void 0&&(l=0),super(t,k),this.renderer=t.sys.game.renderer,this.setPosition(s,l),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=g0.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,S){if(S.hasOwnProperty("align")){var G=S.align;delete S.align,S.halign=G}S.hasOwnProperty("stroke")&&!S.hasOwnProperty("strokeThickness")&&(S.strokeThickness=1)}this.style=new qd(this,S);var j=zi(S,"images",void 0);j&&this.addImage(j),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=a_(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);var tt=zi(S,"sharedPool",!0),st,rt,ot;tt?(Pa||(Pa={},ip=new bt,sp=new u0,this.scene.game.events.once("destroy",function(){Pa=null,ip=null,sp=null})),Pa.hasOwnProperty(k)||(Pa[k]=new bt),st=Pa[k],rt=ip,ot=sp):(st=new bt,rt=new bt,ot=new u0),this.canvasText=new l0({parent:this,context:this.context,parser:D,style:this.style,pensPool:st,linesPool:rt,wrapTextLinesPool:ot}),this.parser=D,this.initRTL(),S&&S.padding&&this.setPadding(S.padding),this.setText(w),this.setUrlTagCursorStyle(zi(S,"urlTagCursorStyle","pointer")),zi(S,"interactive",!1)&&this.setInteractive()}preDestroy(){r_(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),g0.remove(this.canvas);var t=this.texture;t&&t.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",f0(this.canvas,this.scene.sys.canvas),this.originX=1)}setRTL(t){t===void 0&&(t=!0);var s=this.style;if(s.rtl===t)return this;if(s.rtl=t,t?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",f0(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),s.halign==="left"?s.halign="right":s.halign==="right"&&(s.halign="left"),this._imageManager){var l=this._imageManager.images;for(var w in l)l[w].originX=1-l[w].originX}return this}setText(t){return t=Sa(t),t===this._text?this:(this._text=t,this.updateText(),this)}setPadding(t,s,l,w){if(typeof t=="object"){var S=t,k=zi(S,"x",null);k!==null?(t=k,l=k):(t=zi(S,"left",0),l=zi(S,"right",t));var D=zi(S,"y",null);D!==null?(s=D,w=D):(s=zi(S,"top",0),w=zi(S,"bottom",s))}else t===void 0&&(t=0),s===void 0&&(s=t),l===void 0&&(l=t),w===void 0&&(w=s);return this.padding.left=t,this.padding.top=s,this.padding.right=l,this.padding.bottom=w,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var s=this.canvasText,l=this.style;t&&s.updatePenManager(this._text,l.wrapMode,l.wrapWidth,l.lineHeight);var w=this.padding,S,k,D=Math.ceil(s.linesWidth);l.fixedWidth===0?(this.width=D+w.left+w.right,S=D):(this.width=l.fixedWidth,S=this.width-w.left-w.right,S<D&&(S=D)),l.fixedHeight===0?(this.height=s.linesHeight+w.top+w.bottom,k=s.linesHeight):(this.height=l.fixedHeight,k=this.height-w.top-w.bottom,k<s.linesHeight&&(k=s.linesHeight));var V=this.width,G=this.height;this.updateDisplayOrigin();var j=l.resolution;V*=j,G*=j,V=Math.max(Math.ceil(V),1),G=Math.max(Math.ceil(G),1);var tt=this.canvas,st=this.context;tt.width!==V||tt.height!==G?(tt.width=V,tt.height=G,this.frame.setSize(V,G)):st.clearRect(0,0,V,G),st.save(),st.scale(j,j);var rt=this.style.rtl?w.right:w.left,ot=w.top;s.draw(rt,ot,S,k),st.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(tt,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"BBCodeText Game Object"}),this.dirty=!0;var ut=this.input;return ut&&!ut.customHitArea&&(ut.hitArea.width=this.width,ut.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),s={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=s,t}setInteractive(t,s,l){var w=!!this.input;return s_.prototype.setInteractive.call(this,t,s,l),w||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(t){return this.urlTagCursorStyle=t,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(t){this.canvasText.urlTagCursorStyle=t}getWrappedText(t,s,l){return typeof t=="number"&&(l=s,s=t,t=void 0),t=this.canvasText.getText(t,s,l,!0),t.split(n_)}getPlainText(t,s,l){return typeof t=="number"&&(l=s,s=t,t=void 0),this.canvasText.getPlainText(t,s,l)}getText(t,s,l,w){return typeof t=="number"&&(w=l,l=s,s=t,t=void 0),w===void 0&&(w=!1),this.canvasText.getText(t,s,l,w)}getSubString(t,s,l){return typeof t=="number"&&(l=s,s=t,t=void 0),this.getText(t,s,l)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,s){return this.canvasText.getPenManager(t,s)}setSize(t,s){return this.setFixedSize(t,s)}resize(t,s){return this.setFixedSize(t,s)}get imageManager(){return this._imageManager||(this._imageManager=new ep(this.scene)),this._imageManager}addImage(t,s){return this.imageManager.add(t,s),this}drawAreaBounds(t,s){return this.canvasText.hitAreaManager.drawBounds(t,s,this),this}generateTexture(t,s,l,w,S){var k=this.canvas;return w===void 0?w=k.width:w*=this.resolution,S===void 0?S=k.height:S*=this.resolution,Um(this.scene,k,t,s,l,w,S),this}getHitArea(t,s,l){return this.canvasText.getHitArea(t,s,l)}}var o_={appendText:p0};Object.assign(rp.prototype,o_);var h_=function(e,t){for(var s=this.tagRegex,l=[],w=0,S=!1,k=!1;;){var D=s.RE_SPLITTEXT.exec(e);if(!D)break;var V=D[0];if(k)if(s.RE_ESC_CLOSE.test(V))k=!1;else continue;else if(S)if(s.RE_RAW_CLOSE.test(V))S=!1;else continue;else s.RE_ESC_OPEN.test(V)?k=!0:s.RE_RAW_OPEN.test(V)&&(S=!0);var G=s.RE_SPLITTEXT.lastIndex,j=G-V.length;if(w<j){var tt=e.substring(w,j);l.push(tt)}t===void 0&&l.push(V),w=G}var st=e.length;return w<st&&l.push(e.substring(w,st)),l};const Fe=!1,ke=!0;var l_={plainText:null,prevProp:null},u_=function(e,t){var s=this.tagRegex;t==null&&(t={});var l="";if(t.img&&jt(t,Fe,"img"),t.esc)s.RE_ESC_CLOSE.test(e)?jt(t,Fe,"esc"):l=e;else if(t.raw)s.RE_RAW_CLOSE.test(e)?jt(t,Fe,"raw"):l=e;else if(s.RE_ESC_OPEN.test(e))jt(t,ke,"esc",!0);else if(s.RE_ESC_CLOSE.test(e))jt(t,Fe,"esc");else if(s.RE_RAW_OPEN.test(e))jt(t,ke,"raw",!0);else if(s.RE_RAW_CLOSE.test(e))jt(t,Fe,"raw");else if(s.RE_BLOD_OPEN.test(e))jt(t,ke,"b",!0);else if(s.RE_BLOD_CLOSE.test(e))jt(t,Fe,"b");else if(s.RE_ITALICS_OPEN.test(e))jt(t,ke,"i",!0);else if(s.RE_ITALICS_CLOSE.test(e))jt(t,Fe,"i");else if(s.RE_WEIGHT_OPEN.test(e)){var w=e.match(s.RE_WEIGHT_OPEN);jt(t,ke,"weight",w[1])}else if(s.RE_WEIGHT_CLOSE.test(e))jt(t,Fe,"weight");else if(s.RE_SIZE_OPEN.test(e)){var w=e.match(s.RE_SIZE_OPEN);jt(t,ke,"size",`${w[1]}px`)}else if(s.RE_SIZE_CLOSE.test(e))jt(t,Fe,"size");else if(s.RE_FAMILY_OPEN.test(e)){var w=e.match(s.RE_FAMILY_OPEN);jt(t,ke,"family",w[1])}else if(s.RE_FAMILY_CLOSE.test(e))jt(t,Fe,"family");else if(s.RE_COLOR_OPEN.test(e)){var w=e.match(s.RE_COLOR_OPEN);jt(t,ke,"color",w[1])}else if(s.RE_COLOR_CLOSE.test(e))jt(t,Fe,"color");else if(s.RE_UNDERLINE_OPEN.test(e))jt(t,ke,"u",!0);else if(s.RE_UNDERLINE_OPENC.test(e)){var w=e.match(s.RE_UNDERLINE_OPENC);jt(t,ke,"u",w[1])}else if(s.RE_UNDERLINE_CLOSE.test(e))jt(t,Fe,"u");else if(s.RE_STRIKETHROUGH_OPEN.test(e))jt(t,ke,"s",!0);else if(s.RE_STRIKETHROUGH_OPENC.test(e)){var w=e.match(s.RE_STRIKETHROUGH_OPENC);jt(t,ke,"s",w[1])}else if(s.RE_STRIKETHROUGH_CLOSE.test(e))jt(t,Fe,"s");else if(s.RE_SHADOW_OPEN.test(e))jt(t,ke,"shadow",!0);else if(s.RE_SHADOW_OPENC.test(e)){var w=e.match(s.RE_SHADOW_OPENC);jt(t,ke,"shadow",w[1])}else if(s.RE_SHADOW_CLOSE.test(e))jt(t,Fe,"shadow");else if(s.RE_STROKE_OPEN.test(e))jt(t,ke,"stroke",!0);else if(s.RE_STROKE_OPENC.test(e)){var w=e.match(s.RE_STROKE_OPENC);jt(t,ke,"stroke",w[1])}else if(s.RE_STROKE_CLOSE.test(e))jt(t,Fe,"stroke");else if(s.RE_BGCOLOR_OPEN.test(e)){var w=e.match(s.RE_BGCOLOR_OPEN);jt(t,ke,"bgcolor",w[1])}else if(s.RE_BGCOLOR_CLOSE.test(e))jt(t,Fe,"bgcolor");else if(s.RE_OFFSETY_OPEN.test(e)){var w=e.match(s.RE_OFFSETY_OPEN);jt(t,ke,"y",parseFloat(w[1]))}else if(s.RE_OFFSETY_CLOSE.test(e))jt(t,Fe,"y");else if(s.RE_IMAGE_OPEN.test(e)){var w=e.match(s.RE_IMAGE_OPEN);jt(t,ke,"img",w[1])}else if(s.RE_IMAGE_CLOSE.test(e))jt(t,Fe,"img");else if(s.RE_AREA_OPEN.test(e)){var w=e.match(s.RE_AREA_OPEN);jt(t,ke,"area",w[1])}else if(s.RE_AREA_CLOSE.test(e))jt(t,Fe,"area");else if(s.RE_URL_OPEN.test(e)){var w=e.match(s.RE_URL_OPEN);jt(t,ke,"url",w[1])}else if(s.RE_URL_CLOSE.test(e))jt(t,Fe,"url");else if(s.RE_ALIGN_OPEN.test(e)){var w=e.match(s.RE_ALIGN_OPEN);jt(t,ke,"align",w[1])}else if(s.RE_ALIGN_CLOSE.test(e))jt(t,Fe,"align");else if(s.RE_ID_OPEN.test(e)){var w=e.match(s.RE_ID_OPEN);jt(t,ke,"id",w[1])}else s.RE_ID_CLOSE.test(e)?jt(t,Fe,"id"):l=e;var S=l_;return S.plainText=l,S.prop=t,S},jt=function(e,t,s,l){return t===ke?e[s]=l:e.hasOwnProperty(s)&&delete e[s],e},c_=function(e,t){var s=p_;if(t.hasOwnProperty("img"))s.image=t.img;else{if(s.image=null,t.hasOwnProperty("family")?s.fontFamily=t.family:s.fontFamily=e.fontFamily,t.hasOwnProperty("size")){var l=t.size;typeof l=="number"&&(l=`${l}px`),s.fontSize=l}else s.fontSize=e.fontSize;s.fontStyle=d_(t),t.hasOwnProperty("color")?s.color=t.color:s.color=e.color,t.hasOwnProperty("stroke")?t.stroke===!0?(s.stroke=e.stroke,s.strokeThickness=e.strokeThickness):(s.stroke=t.stroke,s.strokeThickness=e.strokeThickness):(s.stroke=e.stroke,s.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(s.shadowColor=e.shadowColor,s.shadowOffsetX=e.shadowOffsetX,s.shadowOffsetY=e.shadowOffsetY,s.shadowBlur=e.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0):(s.shadowColor=t.shadow,s.shadowOffsetX=e.shadowOffsetX,s.shadowOffsetY=e.shadowOffsetY,s.shadowBlur=e.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0):(s.shadowColor="#000",s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowBlur=0,s.shadowStroke=!1,s.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(s.underlineColor=e.underlineColor,s.underlineThickness=e.underlineThickness,s.underlineOffset=e.underlineOffset):(s.underlineColor=t.u,s.underlineThickness=e.underlineThickness,s.underlineOffset=e.underlineOffset):(s.underlineColor="#000",s.underlineThickness=0,s.underlineOffset=0),t.hasOwnProperty("s")?t.s===!0?(s.strikethroughColor=e.strikethroughColor,s.strikethroughThickness=e.strikethroughThickness,s.strikethroughOffset=e.strikethroughOffset):(s.strikethroughColor=t.s,s.strikethroughThickness=e.strikethroughThickness,s.strikethroughOffset=e.strikethroughOffset):(s.strikethroughColor="#000",s.strikethroughThickness=0,s.strikethroughOffset=0),t.hasOwnProperty("bgcolor")?s.bgcolor=t.bgcolor:s.bgcolor=null,s},d_=function(e){var t=e.b,s=e.weight,l=e.i;return t||s||l?l?t?"bold italic":s?`${s} italic`:"italic":t?"bold":s.toString():""},p_=new qd,f_=function(e,t,s){s==null&&(s=g_);var l=this.delimiters[0],w=this.delimiters[1],S=[];for(var k in s)t.hasOwnProperty(k)||S.push(`${l}/${k}${w}`);for(var k in t){var D=t[k];if(!(k!=="img"&&s[k]===D))switch(k){case"size":S.push(`${l}size=${D.replace("px","")}${w}`);break;case"color":case"weight":case"family":case"stroke":case"bgcolor":case"y":case"img":case"area":case"url":case"align":case"id":S.push(`${l}${k}=${D}${w}`);break;case"u":case"s":D===!0?S.push(`${l}${k}${w}`):S.push(`${l}${k}=${D}${w}`);break;default:S.push(`${l}${k}${w}`);break}}return S.push(e),S.join("")},g_={},Ma=function(e){return e.replace(v_,"\\$&").replace(m_,"\\x2d")},v_=/[|\\{}()[\]^$+*?.]/g,m_=/-/g,v0,m0,Ht={},Re=function(e,t,s,l){return l===void 0?`${e}${s}${t}`:`${e}${s}=(${l})${t}`},ii=function(e,t,s){return`${e}/${s}${t}`},y_=function(e){return`[^${e}]+`},np="[-.0-9]+",x_=["[a-zA-Z]+","#[0-9abcdef]+","rgba?\\(s*[.0-9]+s*(,s*[.0-9]+s*){2,3}\\)"],_a=x_.join("|"),y0=function(e,t){if(t===void 0){var s=e;e=s[0],t=s[1]}if(v0===e&&m0===t)return!1;v0=e,m0=t,e=Ma(e),t=Ma(t);var l=y_(t),w="esc",S=Re(e,t,w),k=ii(e,t,w),D="raw",V=Re(e,t,D),G=ii(e,t,D),j="b",tt=Re(e,t,j),st=ii(e,t,j),rt="i",ot=Re(e,t,rt),ut=ii(e,t,rt),ct="weight",pt=Re(e,t,ct,np),mt=ii(e,t,ct),yt="size",St=Re(e,t,yt,np),Ct=ii(e,t,yt),_t="family",Rt=Re(e,t,_t,l),Ft=ii(e,t,_t),It="color",Bt=Re(e,t,It,_a),Wt=ii(e,t,It),se="u",ne=Re(e,t,se),Yt=Re(e,t,se,_a),xe=ii(e,t,se),Pe="s",Ie=Re(e,t,Pe),ni=Re(e,t,Pe,_a),Ze=ii(e,t,Pe),Ii="shadow",ws=Re(e,t,Ii),Ss=Re(e,t,Ii,_a),dr=ii(e,t,Ii),da="stroke",ad=Re(e,t,da),Li=Re(e,t,da,_a),ol=ii(e,t,da),hl="bgcolor",od=Re(e,t,hl,_a),Nr=ii(e,t,hl),GT="y",UT=Re(e,t,GT,np),WT=ii(e,t,GT),XT="img",jT=Re(e,t,XT,l),HT=ii(e,t,XT),$T="area",qT=Re(e,t,$T,l),KT=ii(e,t,$T),QT="url",JT=Re(e,t,QT,l),ZT=ii(e,t,QT),tC="align",eC=Re(e,t,tC,l),iC=ii(e,t,tC),sC="id",rC=Re(e,t,sC,l),nC=ii(e,t,sC);return Ht.RE_ESC_OPEN=new RegExp(S,"i"),Ht.RE_ESC_CLOSE=new RegExp(k,"i"),Ht.RE_RAW_OPEN=new RegExp(V,"i"),Ht.RE_RAW_CLOSE=new RegExp(G,"i"),Ht.RE_BLOD_OPEN=new RegExp(tt,"i"),Ht.RE_BLOD_CLOSE=new RegExp(st,"i"),Ht.RE_ITALICS_OPEN=new RegExp(ot,"i"),Ht.RE_ITALICS_CLOSE=new RegExp(ut,"i"),Ht.RE_WEIGHT_OPEN=new RegExp(pt,"i"),Ht.RE_WEIGHT_CLOSE=new RegExp(mt,"i"),Ht.RE_SIZE_OPEN=new RegExp(St,"i"),Ht.RE_SIZE_CLOSE=new RegExp(Ct,"i"),Ht.RE_FAMILY_OPEN=new RegExp(Rt,"i"),Ht.RE_FAMILY_CLOSE=new RegExp(Ft,"i"),Ht.RE_COLOR_OPEN=new RegExp(Bt,"i"),Ht.RE_COLOR_CLOSE=new RegExp(Wt,"i"),Ht.RE_UNDERLINE_OPEN=new RegExp(ne,"i"),Ht.RE_UNDERLINE_OPENC=new RegExp(Yt,"i"),Ht.RE_UNDERLINE_CLOSE=new RegExp(xe,"i"),Ht.RE_STRIKETHROUGH_OPEN=new RegExp(Ie,"i"),Ht.RE_STRIKETHROUGH_OPENC=new RegExp(ni,"i"),Ht.RE_STRIKETHROUGH_CLOSE=new RegExp(Ze,"i"),Ht.RE_SHADOW_OPEN=new RegExp(ws,"i"),Ht.RE_SHADOW_OPENC=new RegExp(Ss,"i"),Ht.RE_SHADOW_CLOSE=new RegExp(dr,"i"),Ht.RE_STROKE_OPEN=new RegExp(ad,"i"),Ht.RE_STROKE_OPENC=new RegExp(Li,"i"),Ht.RE_STROKE_CLOSE=new RegExp(ol,"i"),Ht.RE_BGCOLOR_OPEN=new RegExp(od,"i"),Ht.RE_BGCOLOR_CLOSE=new RegExp(Nr,"i"),Ht.RE_OFFSETY_OPEN=new RegExp(UT,"i"),Ht.RE_OFFSETY_CLOSE=new RegExp(WT,"i"),Ht.RE_IMAGE_OPEN=new RegExp(jT,"i"),Ht.RE_IMAGE_CLOSE=new RegExp(HT,"i"),Ht.RE_AREA_OPEN=new RegExp(qT,"i"),Ht.RE_AREA_CLOSE=new RegExp(KT,"i"),Ht.RE_URL_OPEN=new RegExp(JT,"i"),Ht.RE_URL_CLOSE=new RegExp(ZT,"i"),Ht.RE_ALIGN_OPEN=new RegExp(eC,"i"),Ht.RE_ALIGN_CLOSE=new RegExp(iC,"i"),Ht.RE_ID_OPEN=new RegExp(rC,"i"),Ht.RE_ID_CLOSE=new RegExp(nC,"i"),Ht.RE_SPLITTEXT=new RegExp([V,G,S,k,tt,st,ot,ut,pt,mt,St,Ct,Rt,Ft,Bt,Wt,ne,Yt,xe,Ie,ni,Ze,ws,Ss,dr,ad,Li,ol,od,Nr,UT,WT,jT,HT,qT,KT,JT,ZT,eC,iC,rC,nC].join("|"),"ig"),!0},x0=function(e,t){return e!==void 0&&y0(e,t),Object.assign({},Ht)};const b_=Phaser.Utils.Objects.GetValue;let b0=class{constructor(e){var t=b_(e,"delimiters","[]");this.tagRegex=x0(t),this.delimiters=t}getStrokeThinkness(e,t){var s;return t.hasOwnProperty("stroke")?s=e.strokeThickness:s=0,s}setDelimiters(e,t){return y0(e,t)&&(this.tagRegex=x0()),this}};var w_={splitText:h_,tagTextToProp:u_,propToContextStyle:c_,propToTagText:f_};Object.assign(b0.prototype,w_);class ap extends rp{constructor(t,s,l,w,S){var k=new b0(S);super(t,s,l,w,S,"rexBBCodeText",k)}setDelimiters(t,s){return this.parser.setDelimiters(t,s),this}}T.register("BBCodeText",function(e,t,s,l){var w=new ap(this.scene,e,t,s,l);return this.scene.add.existing(w),w}),K(window,"RexPlugins.UI.BBCodeText",ap);var S_={plainText:null,prevProp:null},T_=new qd;let C_=class{constructor(e){e===void 0&&(e={}),this.tags=e}addTag(e,t){this.tags[e]=t}getTag(e){return this.tags[e]}splitText(e,t){for(var s=[],l=0;;){var w=op.exec(e);if(!w)break;var S=w[0],k=op.lastIndex-S.length;if(l<k&&s.push(e.substring(l,k)),t===void 0)s.push(S);else if(t===1){if(S0.test(S)){var D=S.match(T0);s.push(D[2])}else if(C0.test(S)){var D=S.match(P0);s.push(D[2])}}l=op.lastIndex}var V=e.length;return l<V&&s.push(e.substring(l,V)),s}tagTextToProp(e,t){var s,l;if(S0.test(e)){var w=e.match(T0);if(w!=null){var S=w[1],k=this.tags;k.hasOwnProperty(S)?l=k[S]:l={},l._class=S,s=w[2]}}else if(C0.test(e)){var w=e.match(P0);if(w!=null){var D=w[1];l=P_(D),l._style=D,s=w[2]}}s==null&&(s=e),l==null&&(l={});var V=S_;return V.plainText=s,V.prop=l,V}propToContextStyle(e,t){var s=T_;if(t.hasOwnProperty("img"))s.image=t.img;else{if(s.image=null,t.hasOwnProperty("family")||t.hasOwnProperty("fontFamily")||t.hasOwnProperty("font-family")){var l=t.hasOwnProperty("family")?t.family:t.hasOwnProperty("fontFamily")?t.fontFamily:t["font-family"];s.fontFamily=l}else s.fontFamily=e.fontFamily;if(t.hasOwnProperty("size")||t.hasOwnProperty("fontSize")||t.hasOwnProperty("font-size")){var w=t.hasOwnProperty("size")?t.size:t.hasOwnProperty("fontSize")?t.fontSize:t["font-size"];typeof w=="number"&&(w=`${w}px`),s.fontSize=w}else s.fontSize=e.fontSize;if(t.hasOwnProperty("style")||t.hasOwnProperty("fontStyle")||t.hasOwnProperty("font-style")){var S=t.hasOwnProperty("style")?t.style:t.hasOwnProperty("fontStyle")?t.fontStyle:t["font-style"];s.fontStyle=S}else s.fontStyle=e.fontStyle;if(t.hasOwnProperty("color")||t.hasOwnProperty("font-color")){var k=t.hasOwnProperty("color")?t.color:t["font-color"];s.color=k}else s.color=e.color;if(t.hasOwnProperty("stroke")){var D=t.stroke;s.stroke=D.hasOwnProperty("color")?D.color:e.stroke,s.strokeThickness=D.hasOwnProperty("thickness")?D.thickness:e.strokeThickness}else s.stroke=e.stroke,s.strokeThickness=e.strokeThickness}if(t.hasOwnProperty("shadow")){var V=t.shadow;s.shadowColor=V.hasOwnProperty("color")?V.color:e.shadowColor,s.shadowOffsetX=V.hasOwnProperty("offsetX")?V.offsetX:e.shadowOffsetX,s.shadowOffsetY=V.hasOwnProperty("offsetY")?V.offsetY:e.shadowOffsetY,s.shadowBlur=V.hasOwnProperty("blur")?V.blur:e.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0}else s.shadowColor=e.shadowColor,s.shadowOffsetX=e.shadowOffsetX,s.shadowOffsetY=e.shadowOffsetY,s.shadowBlur=e.shadowBlur,s.shadowStroke=e.shadowStroke,s.shadowFill=e.shadowFill;if(t.hasOwnProperty("u")||t.hasOwnProperty("underline")){var G=t.hasOwnProperty("u")?t.u:t.underline;s.underlineColor=G.hasOwnProperty("color")?G.color:e.underlineColor,s.underlineThickness=G.hasOwnProperty("thickness")?G.thickness:e.underlineThickness,s.underlineOffset=G.hasOwnProperty("offset")?G.offset:e.underlineOffset}else s.underlineColor=e.underlineColor,s.underlineThickness=e.underlineThickness,s.underlineOffset=e.underlineOffset;if(t.hasOwnProperty("s")||t.hasOwnProperty("strikethrough")){var j=t.hasOwnProperty("s")?t.s:t.strikethrough;s.strikethroughColor=j.hasOwnProperty("color")?j.color:e.strikethroughColor,s.strikethroughThickness=j.hasOwnProperty("thickness")?j.thickness:e.strikethroughThickness,s.strikethroughOffset=j.hasOwnProperty("offset")?j.offset:e.strikethroughOffset}else s.strikethroughColor=e.strikethroughColor,s.strikethroughThickness=e.strikethroughThickness,s.strikethroughOffset=e.strikethroughOffset;return s}getStrokeThinkness(e,t){var s;if(t.hasOwnProperty("stroke")){var l=t.stroke;s=l.hasOwnProperty("thickness")?l.thickness:e.strokeThickness}else s=e.strokeThickness;return s}propToTagText(e,t,s){return t.hasOwnProperty("_class")?e===""&&this.isTextTag(t._class)?"":`<class='${t._class}'>${e}</class>`:t.hasOwnProperty("_style")?`<style='${t._style}'>${e}</style>`:e}destroy(){this.tags=void 0}isTextTag(e){var t=this.tags[e];return t?t.img==null:!1}};var P_=function(e){e=e.split(";");for(var t={},s,l,w,S=0,k=e.length;S<k;S++)if(s=e[S].split(":"),l=s[0],w=s[1],!(w0(l)||w0(w))){switch(l){case"stroke":var D=w.split(" "),V=D.length;w={},V>=1&&(w.color=D[0]),V>=2&&(w.thickness=parseInt(D[1].replace("px","")));break;case"shadow":var D=w.split(" "),V=D.length;w={},V>=1&&(w.color=D[0]),V>=2&&(w.offsetX=parseInt(D[1].replace("px",""))),V>=3&&(w.offsetY=parseInt(D[2].replace("px",""))),V>=4&&(w.blur=parseInt(D[3].replace("px","")));break;case"u":case"underline":case"s":case"strikethrough":var D=w.split(" "),V=D.length;w={},V>=1&&(w.color=D[0]),V>=2&&(w.thickness=parseInt(D[1].replace("px",""))),V>=3&&(w.offset=parseInt(D[2].replace("px",""))),l==="underline"?l="u":l==="strikethrough"&&(l="s");break;case"y":w=parseFloat(w);break}t[l]=w}return t},w0=function(e){return e=e.replace(M_,""),e.length===0},op=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,S0=/<\s*class=/i,T0=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,C0=/<\s*style=/i,P0=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,M_=/^\s+|\s+$/;const __=Phaser.Utils.Objects.GetValue;class M0 extends rp{constructor(t,s,l,w,S){var k=__(S,"tags",void 0),D=new C_(k);super(t,s,l,w,S,"rexTagText",D)}addTag(t,s){return this.parser.addTag(t,s),this.updateText(!0)}addTags(t){for(var s in t)this.parser.addTag(s,t[s]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}T.register("tagText",function(e,t,s,l){var w=new M0(this.scene,e,t,s,l);return this.scene.add.existing(w),w}),K(window,"RexPlugins.UI.TagText",M0);const zl=Phaser.Utils.Objects.GetValue;var Gl=function(e,t){return t===void 0?e:e[t]},Jr=function(e,t,s){e===void 0&&(e={}),t===void 0&&(t=0);var l=typeof t;return l==="string"?e[t]=s:l==="number"?(e.left=t,e.right=t,e.top=t,e.bottom=t):(e.left=zl(t,"left",0),e.right=zl(t,"right",0),e.top=zl(t,"top",0),e.bottom=zl(t,"bottom",0)),e};let hp=class{constructor(e,t){this.setParent(e),this.type=t,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(e){return this.parent=e,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(e){return e&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(e){this.setDirty(this._active!=e),this._active=e}setActive(e){return e===void 0&&(e=!0),this.active=e,this}modifyPorperties(e){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(e,t){return!1}};Object.assign(hp.prototype,os);var k_={renderContent(){},render(){if(!this.willRender)return this;var e=this.context;if(e.save(),e.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,s=this.drawY;this.autoRound&&(t=Math.round(t),s=Math.round(s)),e.translate(t,s),e.scale(this.scaleX,this.scaleY),e.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),e.restore(),this}};const O_=Phaser.Math.RotateAround;var E_=function(e,t,s,l){return l===void 0?l={}:l===!0&&(lp===void 0&&(lp={}),l=lp),l.x=(e-s.drawX)/s.scaleX,l.y=(t-s.drawY)/s.scaleY,s.rotation!==0&&O_(l,0,0,-s.rotation),l},lp;const A_=Phaser.Geom.Rectangle;var R_=function(e,t){if(this.width===0||this.height===0)return!1;var s=E_(e,t,this,!0);return D_(this).contains(s.x,s.y)},D_=function(e){Ul===void 0&&(Ul=new A_);var t=e.drawTLX,s=e.drawTLY;return Ul.setTo(t,s,e.drawTRX-t,e.drawBLY-s),Ul},Ul;const I_=Phaser.Math.RotateAround;var _0=function(e,t,s,l){return l===void 0?l={}:l===!0&&(up===void 0&&(up={}),l=up),l.x=t,l.y=s,e.rotation!==0&&I_(l,0,0,e.rotation),l.x=l.x*e.scaleX+e.drawX,l.y=l.y*e.scaleY+e.drawY,l},up;const k0=Phaser.GameObjects.Components.TransformMatrix;var L_=function(e,t,s,l){l===void 0?l={}:l===!0&&(l=F_);var w=t-e.width*e.originX,S=s-e.height*e.originY;return Go===void 0&&(Go=new k0,O0=new k0),e.parentContainer?e.getWorldTransformMatrix(Go,O0):Go.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),Go.transformPoint(w,S,l),l},Go,O0,F_={},B_=function(e,t,s,l,w){var S=_0(t,s,l,!0),k=L_(e,S.x,S.y,w);return k},E0=function(e,t,s,l,w){typeof s!="number"&&(w=s,s=0,l=0);var S=t.drawCenterX+s,k=t.drawCenterY+l;return B_(e,t,S,k,w)},N_=function(e,t,s){return E0(this.parent,this,e,t,s)},A0={contains:R_,getWorldPosition:N_};Object.assign(A0,k_);const Y_=Phaser.Math.DegToRad,V_=Phaser.Math.RadToDeg,Wl=Phaser.Utils.Objects.GetValue;class Fn extends hp{constructor(t,s){super(t,s),this.renderable=!0,this.scrollFactorX=1,this.scrollFactorY=1,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,s){return this.x=t,this.y=s,this}setInitialPosition(t,s){return this.x0=t,this.y0=s,this}setScrollFactorX(t){return this.scrollFactorX=t,this}setScrollFactorY(t){return this.scrollFactorY=t,this}setScrollFactor(t,s){return s===void 0&&(s=t),this.scrollFactorX=t,this.scrollFactorY=s,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return V_(this._rotation)}set angle(t){this.rotation=Y_(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,s){return s===void 0&&(s=!1),this.width=t,s&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var s=Wl(t,"width",void 0),l=Wl(t,"height",void 0),w=Wl(t,"scaleX",void 0),S=Wl(t,"scaleY",void 0);return s!==void 0?l===void 0&&S===void 0?this.setWidth(s,!0):this.setWidth(s):w!==void 0&&this.setScaleX(w),l!==void 0?s===void 0&&w===void 0?this.setHeight(l,!0):this.setHeight(l):S!==void 0&&this.setScaleY(S),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){var t=this.x+this.leftSpace+this.offsetX-this.originX*this.width;return this.parent._textOX*this.scrollFactorX+t}get drawY(){var t=this.y+this.offsetY;return this.parent._textOY*this.scrollFactorY+t}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(Fn.prototype,A0);var Zr=function(e,t,s){return t.hasOwnProperty(e)?t[e]:s[e]};const Bn=Phaser.Utils.Objects.GetValue;class z_ extends Fn{constructor(t,s){super(t,"background"),this.setScrollFactor(0),this.setColor(Bn(s,"color",null),Bn(s,"color2",null),Bn(s,"horizontalGradient",!0)),this.setStroke(Bn(s,"stroke",null),Bn(s,"strokeThickness",2)),this.setCornerRadius(Bn(s,"cornerRadius",0),Bn(s,"cornerIteration",null))}set color(t){t=Xt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=Xt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,s,l){return l===void 0&&(l=!0),this.color=t,this.color2=s,this.horizontalGradient=l,this}set stroke(t){t=Xt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,s){return t!=null&&s===void 0&&(s=2),this.stroke=t,this.strokeThickness=s,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,Zr("color2",t,this),Zr("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,Zr("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,Zr("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,s){return this.cornerRadius=t,this.cornerIteration=s,this}renderContent(){jd(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const tn=Phaser.Utils.Objects.GetValue;class G_ extends Fn{constructor(t,s){super(t,"innerbounds"),this.setScrollFactor(0),this.setColor(tn(s,"color",null),tn(s,"color2",null),tn(s,"horizontalGradient",!0)),this.setStroke(tn(s,"stroke",null),tn(s,"strokeThickness",2))}set color(t){t=Xt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=Xt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,s,l){return l===void 0&&(l=!0),this.color=t,this.color2=s,this.horizontalGradient=l,this}set stroke(t){t=Xt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,s){return t!=null&&s===void 0&&(s=2),this.stroke=t,this.strokeThickness=s,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,tn(t,"color2",null),tn(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,tn(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,s=t.left,l=t.top,w=this.parent.width-t.left-t.right,S=this.parent.height-t.top-t.bottom,k=this.context;if(this.color!=null){var D;if(this.color2!=null){var V;this.horizontalGradient?V=k.createLinearGradient(0,0,w,0):V=k.createLinearGradient(0,0,0,S),V.addColorStop(0,this.color),V.addColorStop(1,this.color2),D=V}else D=this.color;k.fillStyle=D,k.fillRect(s,l,w,S)}this.stroke!=null&&this.strokeThickness>0&&(k.strokeStyle=this.stroke,k.lineWidth=this.strokeThickness,k.strokeRect(s,l,w,S))}}const je=Phaser.Utils.Objects.GetValue;class Xl{constructor(t,s){this.parent=t,this.set(s)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(je(t,"bold",!1)),this.setItalic(je(t,"italic",!1)),this.setFontSize(je(t,"fontSize","16px")),this.setFontFamily(je(t,"fontFamily","Courier")),this.setColor(je(t,"color","#fff")),this.setStrokeStyle(je(t,"stroke",null),je(t,"strokeThickness",0)),this.setShadow(je(t,"shadowColor",null),je(t,"shadowOffsetX",0),je(t,"shadowOffsetY",0),je(t,"shadowBlur",0)),this.setOffset(je(t,"offsetX",0),je(t,"offsetY",0)),this.setSpace(je(t,"leftSpace",0),je(t,"rightSpace",0)),this.setAlign(je(t,"align",void 0)),this.setBackgroundColor(je(t,"backgroundColor",null)),this.setBackgroundHeight(je(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(je(t,"backgroundBottomY",void 0)),this.setBackgroundLeftX(je(t,"backgroundLeftX",0)),this.setBackgroundRightX(je(t,"backgroundRightX",0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(Zr("stroke",t,this),Zr("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(Zr("shadowOffsetX",t,this),Zr("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),t.hasOwnProperty("backgroundLeftX")&&this.setBackgroundLeftX(t.backgroundLeftX),t.hasOwnProperty("backgroundRightX")&&this.setBackgroundRightX(t.backgroundRightX),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new Xl(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=Xt(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,s){return this.stroke=Xt(t),s!==void 0&&(this.strokeThickness=s),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=Xt(t),this}setShadowOffset(t,s){return t===void 0&&(t=0),s===void 0&&(s=0),this.shadowOffsetX=t,this.shadowOffsetY=s,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,s,l,w){return this.setShadowColor(t).setShadowOffset(s,l).setShadowBlur(w),this}setBackgroundColor(t){return this.backgroundColor=Xt(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setBackgroundLeftX(t){return this.backgroundLeftX=t,this}setBackgroundRightX(t){return this.backgroundRightX=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,s){return this.setOffsetX(t).setOffsetY(s),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,s){return this.setLeftSpace(t).setRightSpace(s),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var s=this.hasFill,l=this.hasStroke;return t.fillStyle=s?this.color:"#000",t.strokeStyle=l?this.stroke:"#000",t.lineWidth=l?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,s){return this.syncFont(t).syncStyle(t),t.measureText(s)}}var U_=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=0),this.fixedWidth===e&&this.fixedHeight===t?this:(this.fixedWidth=e,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(e>0?e:this.width,t>0?t:this.height),this)},W_=function(e,t){var s=this.padding,l=s.left,w=s.right,S=s.top,k=s.bottom;return Jr(s,e,t),this.dirty=this.dirty||l!=s.left||w!=s.right||S!=s.top||k!=s.bottom,this},X_=function(e){return Gl(this.padding,e)},j_=function(e){return this.textStyle.modify(e),this},H_=function(e){return this.defaultTextStyle.modify(e),this},$_=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},q_=function(e){return this.testString=e,this};const K_=Phaser.Utils.Array.Remove;var Q_=function(e){return this.poolManager.free(e),K_(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},J_=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this};const Z_=Phaser.Utils.Array.Remove;var t2=function(e){return Z_(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},e2=function(){return this.setText(),this},i2=function(e,t){var s=Array.isArray(e);return t===void 0||t===this.children.length?s?this.children.push(...e):this.children.push(e):s?this.children.splice(t,0,...e):this.children.splice(t,0,e),this.lastAppendedChildren.length=0,s?this.lastAppendedChildren.push(...e):this.lastAppendedChildren.push(e),this};const br="text",R0="image",D0="drawer",I0="space",cp="command";var L0=function(e){return e.type===br&&e.text===`
`},F0=function(e){return e.type===br&&e.text==="\f"},s2=function(e){return e.type===br&&e.text===" "},Nn=function(e){return e.type===br},r2=function(e){return e.type===cp};class B0 extends Fn{constructor(t,s,l){super(t,br),this.updateTextFlag=!1,this.style=new Xl(this,l),this.setText(s)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.clearTextSize();else{var s=this.style.getTextMetrics(this.context,this.text);this.textWidth=s.width;var l,w;"actualBoundingBoxAscent"in s?(l=s.actualBoundingBoxAscent,w=s.actualBoundingBoxDescent):(l=0,w=0),this.textHeight=l+w,this.ascent=l,this.descent=w}return this.updateTextFlag=!1,this}clearTextSize(){return this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0,this}copyTextSize(t){return this.textWidth=t.textWidth,this.textHeight=t.textHeight,this.ascent=t.ascent,this.descent=t.descent,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){return this.textWidth===0?!1:super.willRender}renderContent(){var t=this.context,s=this.style;if(s.hasBackgroundColor){t.fillStyle=s.backgroundColor;var l=this.drawTLX+s.backgroundLeftX,w=this.drawTRX+s.backgroundRightX,S=l,k=w-l+1;if(k>0){var D=s.backgroundBottomY;D==null&&(D=this.drawBLY);var V=s.backgroundHeight;V==null&&(V=D-this.drawTLY);var G=D-V;t.fillRect(S,G,k,V)}}var j=s.hasFill,tt=s.hasStroke;!j&&!tt||(s.syncFont(t).syncStyle(t),tt&&(s.syncShadow(t),t.strokeText(this.text,0,0)),j&&(s.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var n2=function(e,t){t&&this.textStyle.modify(t);var s=this.poolManager.allocate(br);return s===null?s=new B0(this,e,this.textStyle):s.setParent(this).setActive().modifyStyle(this.textStyle).setText(e),s},a2=function(e,t){t&&this.textStyle.modify(t);for(var s=[],l=0,w=e.length;l<w;l++){var S=e.charAt(l),k=this.poolManager.allocate(br);k===null?k=new B0(this,S,this.textStyle):k.setParent(this).setActive().modifyStyle(this.textStyle).setText(S),s.push(k)}return s},Uo=function(e,t){var s=this.createCharChildren(e,t);return this.addChild(s),this},o2=function(e,t){return e===void 0&&(e=""),this.removeChildren(),Uo.call(this,e,t),this.dirty=!0,this},h2=function(e,t,s){var l=this.createCharChildren(t,s);return e=this.getCharChildIndex(e,!0),this.addChild(l,e),this},l2=function(e,t){t===void 0&&(t=1);for(var s=0;s<t;s++){var l=this.getCharChildIndex(e,!0);if(l===void 0)break;this.removeChild(this.children[l])}return this},u2=function(e){var t="";return this.forEachCharChild(function(s){t+=s.text},void 0,e),t};Phaser.Display.Canvas.CanvasPool;class c2 extends Fn{constructor(t,s,l){super(t,R0),this.setTexture(s,l),this.color=void 0}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,s){return this.key=t,this.frame=s,this.frameObj=this.scene.sys.textures.getFrame(t,s),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setColor(t){return this.color=t,this}modifyPorperties(t){return t.hasOwnProperty("color")&&this.setColor(t.color),super.modifyPorperties(t),this}renderContent(){d0(this.frameObj,this.canvas,0,0,this.frameWidth,this.frameHeight,this.color,!1)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var d2=function(e,t,s){var l=this.poolManager.allocate(R0);return l===null?l=new c2(this,e,t):l.setParent(this).setActive().setTexture(e,t),l.modifyPorperties(s),l},N0=function(e,t,s){var l=this.createImageChild(e,t,s);return this.addChild(l),this};class p2 extends Fn{constructor(t,s,l,w){super(t,D0),this.setRenderCallback(s),this.setDrawerSize(l,w)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,s){return t===!0?(this.toLocalPosition=!1,t=void 0,s=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),s===void 0&&(s=t),this.drawerWidth=t,this.drawerHeight=s,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}var f2=function(e,t,s){var l=this.poolManager.allocate(D0);return l===null?l=new p2(this,e,t,s):l.setParent(this).setActive().setRenderCallback(e).setDrawerSize(t,s),l},g2=function(e,t,s){var l=this.createDrawerChild(e,t,s);return this.addChild(l),this};let v2=class extends Fn{constructor(e,t){super(e,I0),this.setSpaceWidth(t)}get width(){return this.spaceWidth*this.scaleX}set width(e){this.spaceWidth>0?this.scaleX=e/this.spaceWidth:this.scaleX=1}setSpaceWidth(e){return this.spaceWidth=e,this}};var m2=function(e){var t=this.poolManager.allocate(I0);return t===null?t=new v2(this,e):t.setParent(this).setActive().setSpaceWidth(e),t},Y0=function(e){var t=this.createSpaceChild(e);return this.addChild(t),this};class y2 extends hp{constructor(t,s,l,w,S){super(t,cp),this.setName(s).setParameter(w).setCallback(l,S)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,s){return this.callback=t,this.scope=s,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var x2=function(e,t,s,l){var w=this.poolManager.allocate(cp);return w===null?w=new y2(this,e,t,s,l):w.setParent(this).setActive().setName(e).setCallback(t,l).setParameter(s),w},Nt=function(e,t,s,l){var w=this.createCommandChild(e,t,s,l);return this.addChild(w),this},b2=function(e){return e===void 0?e={}:typeof e=="object"&&(e=B(e)),this.wrapConfig=e,this},V0=function(e){var t={callback:void 0,start:0,isLastPage:!1,maxLines:void 0,padding:void 0,letterSpacing:void 0,hAlign:void 0,vAlign:void 0,children:[],lines:[],maxLineWidth:0,linesHeight:0,lineHeight:void 0,maxLineHeight:0,linesWidth:0,lineWidth:void 0};return Object.assign(t,e)};const w2={none:0,word:1,char:2,character:2,mix:3};var S2=function(e,t,s,l){l===void 0&&(l={word:[],width:0}),l.word.length=0;for(var w=s===2,S=s===3,k=!w&&!S,D=e.length,V=t,G=l.word,j=0,tt=!1;V<D;){var st=e[V];if(!st.renderable){G.push(st),V++;continue}var rt=st.type===br?st.text:null;if(rt===null||rt===`
`||rt==="\f"){V===t&&(G.push(st),j+=st.outerWidth);break}if(k){if(G.push(st),j+=st.outerWidth,rt===" ")break;V++}else if(w){G.push(st),j+=st.outerWidth;break}else if(S)if(zo(rt)){if(G.push(st),j+=st.outerWidth,rt===" ")break;V++,tt=!0}else{if(tt)break;G.push(st),j+=st.outerWidth;var ot=e[V+1];ot&&ot.type===br&&ot.text===" "&&(G.push(ot),j+=ot.outerWidth);break}}return l.width=j,l},z0=function(e){for(var t=0,s=e.length;t<s;t++){var l=e[t];if(l.align!==void 0)return l.align}},G0=function(e,t,s){if(!(t===0&&s===0))for(var l=0,w=e.length;l<w;l++){var S=e[l];S.renderable&&(S.x+=t,S.y+=s)}},T2=function(e,t,s){for(var l=e.hAlign,w=e.vAlign,S=e.justifyPercentage,k=e.lines,D,V,G=0,j=k.length;G<j;G++){var tt=k[G],st=tt.width,rt=tt.children,ot=z0(rt);switch(ot===void 0&&(ot=l),ot){case 0:case"left":D=0;break;case 1:case"center":var ut=t-st;D=ut/2;break;case 2:case"right":var ut=t-st;D=ut;break;case 3:case"justify":case"justify-left":var ut=t-st,ct=ut/t;ct<S&&dp(rt,ut),D=0;break;case 4:case"justify-center":var ut=t-st,ct=ut/t;ct<S?(dp(rt,ut),D=0):D=ut/2;break;case 5:case"justify-right":var ut=t-st,ct=ut/t;ct<S?(dp(rt,ut),D=0):D=ut;break;default:D=0;break}var pt=e.linesHeight;switch(w){case 1:case"center":V=(s-pt)/2;break;case 2:case"bottom":V=s-pt;break;default:V=0;break}G0(rt,D,V)}},dp=function(e,t){for(var s=t/e.length,l=0,w=e.length;l<w;l++){var S=e[l];S.renderable&&(S.x+=s*l)}},U0=function(){var e=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,s;return"actualBoundingBoxAscent"in e?(t=e.actualBoundingBoxAscent,s=e.actualBoundingBoxDescent):(t=0,s=0),jl.ascent=t,jl.descent=s,jl.height=t+s,jl},jl={};const Ai=Phaser.Utils.Objects.GetValue;var C2=function(e){var t=Ai(e,"start",0);Jr(this.wrapPadding,Ai(e,"padding",0));var s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,l=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,w=Ai(e,"lineHeight"),S=Ai(e,"ascent",w),k;if(w===void 0){var D=Ai(e,"useDefaultTextHeight",!1);if(k=Ai(e,"maxLines",0),this.fixedHeight>0&&!D){var Nr=this.fixedHeight-s;if(k>0)w=Nr/k;else{var V=U0.call(this);w=V.height,S=V.ascent,k=Math.floor((Nr-S)/w)}}else{var V=U0.call(this);w=V.height,S=V.ascent}}else if(this.fixedHeight>0){if(k=Ai(e,"maxLines"),k===void 0){var Nr=this.fixedHeight-s;k=Math.floor(Nr/w)}}else k=Ai(e,"maxLines",0);S===void 0&&(S=w);var G=k===0,j=Ai(e,"wrapMode");if(j===void 0){var tt=Ai(e,"charWrap",!1);j=tt?"char":"word"}typeof j=="string"&&(j=w2[j]);var st=Ai(e,"wrapWidth",void 0);st===void 0&&(this.fixedWidth>0?st=this.fixedWidth-l:(st=1/0,j=0));for(var rt=Ai(e,"letterSpacing",0),ot=Ai(e,"hAlign",0),ut=Ai(e,"vAlign",0),ct=Ai(e,"justifyPercentage",.25),pt=V0({callback:"runWordWrap",start:t,padding:this.wrapPadding,letterSpacing:rt,maxLines:k,hAlign:ot,vAlign:ut,justifyPercentage:ct,ascent:S,lineHeight:w,wrapWidth:st,wrapMode:j}),mt=this.children,yt=0,St=mt.length;yt<St;yt++)mt[yt].setActive(!1);st+=rt;for(var Ct=this.padding.left+this.wrapPadding.left,_t=this.padding.top+this.wrapPadding.top+S,Rt=Ct,Ft=_t,It=st,Bt=t,Wt=mt.length,se=pt.children,ne=pt.lines,Yt=[],xe=0,Pe=0,Ie,ni=!1;Bt<Wt;){Ie=S2(mt,Bt,j,Ie);var Ze=Ie.word,Ii=Ze.length,ws=Ie.width+Ii*rt;Bt+=Ii;var Ss=L0(Ze[0]);ni=F0(Ze[0]);var dr=Ss||ni;if(It<ws||dr){if(dr){var da=Ze[0];da.setActive().setPosition(Rt,Ft),se.push(da),Yt.push(da)}Rt=Ct,Ft+=w,It=st,ne.push({children:Yt,width:xe}),Pe=Math.max(Pe,xe),xe=0,Yt=[];var ad=ni||!G&&ne.length===k;if(ad)break;if(dr)continue}It-=ws,xe+=ws;for(var yt=0,St=Ze.length;yt<St;yt++){var Li=Ze[yt];Li.setActive(),se.push(Li),Yt.push(Li),Li.renderable&&(Li.setPosition(Rt,Ft),Rt+=Li.outerWidth+rt)}}Yt.length>0&&(ne.push({children:Yt,width:xe}),Pe=Math.max(Pe,xe)),pt.start+=se.length,pt.isLastPage=!ni&&pt.start===Wt,pt.maxLineWidth=Pe,pt.linesHeight=ne.length*w;var ol=this.fixedWidth>0?this.fixedWidth:pt.maxLineWidth+l,hl=this.fixedHeight>0?this.fixedHeight:pt.linesHeight+s,od=ol-l,Nr=hl-s;T2(pt,od,Nr),this.setCanvasSize(ol,hl);for(var yt=0,St=se.length;yt<St;yt++){var Li=se[yt];Li.renderable&&(Li.x0=Li.x,Li.y0=Li.y)}return pt};const P2=Phaser.Utils.Objects.Merge;var M2=function(e){return e===void 0&&(e={}),C2.call(this,P2(e,this.wrapConfig))},_2=function(e,t,s){var l=e.hAlign,w=e.vAlign,S,k,D=e.rtl,V=e.lines,G=e.lineWidth,j=e.linesWidth;switch(l){case 1:case"center":S=(t-j)/2;break;case 2:case"right":S=t-j;break;default:S=0;break}D&&(S+=G);for(var tt=0,st=V.length;tt<st;tt++){var rt=V[D?st-tt-1:tt],ot=rt.children,ut=rt.height,ct=z0(ot);switch(ct===void 0&&(ct=w),ct){case 1:case"center":k=(s-ut)/2;break;case 2:case"bottom":k=s-ut;break;default:k=0;break}G0(ot,S,k),S+=G}};const Ki=Phaser.Utils.Objects.GetValue;var k2=function(e){var t=Ki(e,"start",0);Jr(this.wrapPadding,Ki(e,"padding",0));var s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,l=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,w=Ki(e,"lineWidth",void 0),S;if(w===void 0)if(S=Ki(e,"maxLines",0),this.fixedWidth>0){var Ss=this.fixedWidth-l;w=Ss/S}else w=0;else if(this.fixedWidth>0){if(S=Ki(e,"maxLines",void 0),S===void 0){var Ss=this.fixedWidth-l;S=Math.floor(Ss/w)+1}}else S=Ki(e,"maxLines",0);var k=S===0,D=Ki(e,"fixedCharacterHeight",void 0);if(D===void 0){var V=Ki(e,"charPerLine",void 0);if(V!==void 0){var dr=this.fixedHeight-s;D=Math.floor(dr/V)}}var G=Ki(e,"wrapHeight",void 0);G===void 0&&(this.fixedHeight>0?G=this.fixedHeight-s:G=1/0);for(var j=Ki(e,"letterSpacing",0),tt=Ki(e,"rtl",!0),st=Ki(e,"hAlign",tt?2:0),rt=Ki(e,"vAlign",0),ot=V0({callback:"runVerticalWrap",start:t,padding:this.wrapPadding,letterSpacing:j,maxLines:S,hAlign:st,vAlign:rt,lineWidth:w,fixedCharacterHeight:D,wrapHeight:G,rtl:tt}),ut=this.children,ct=0,pt=ut.length;ct<pt;ct++)ut[ct].setActive(!1);G+=j;for(var mt=this.padding.left+this.wrapPadding.left,yt=this.padding.top+this.wrapPadding.top,St=mt,Ct=yt,_t=G,Rt=t,Ft=ut.length,It=ot.children,Bt=ot.lines,Wt=[],se=0,ne=0;Rt<Ft;){var Yt=ut[Rt];if(Rt++,!Yt.renderable){Yt.setActive(),It.push(Yt),Wt.push(Yt);continue}var xe=(D!==void 0?D:Yt.height)+j,Pe=L0(Yt),Ie=F0(Yt),ni=Pe||Ie;if(_t<xe||ni){Pe&&(Yt.setActive().setPosition(St,Ct).setOrigin(.5),It.push(Yt),Wt.push(Yt)),St=mt,Ct=yt,_t=G,Bt.push({children:Wt,height:se}),ne=Math.max(ne,se),se=0,Wt=[];var Ze=Ie||!k&&Bt.length===S;if(Ze)break;if(ni)continue}_t-=xe,se+=xe,Yt.setActive().setPosition(St,Ct).setOrigin(.5),It.push(Yt),Wt.push(Yt),Ct+=xe}Wt.length>0&&(Bt.push({children:Wt,height:se}),ne=Math.max(ne,se)),ot.start+=It.length,ot.isLastPage=ot.start===Ft,ot.maxLineHeight=ne,ot.linesWidth=Bt.length*w;var Ii=this.fixedWidth>0?this.fixedWidth:ot.linesWidth+l,ws=this.fixedHeight>0?this.fixedHeight:ot.maxLineHeight+s,Ss=Ii-l,dr=ws-s;_2(ot,Ss,dr),this.setCanvasSize(Ii,ws);for(var ct=0,pt=It.length;ct<pt;ct++){var Yt=It[ct];Yt.renderable&&(Yt.x0=Yt.x,Yt.y0=Yt.y)}return ot};const O2=Phaser.Utils.Objects.Merge;var E2=function(e){return e===void 0&&(e={}),k2.call(this,O2(e,this.wrapConfig))};const W0=Phaser.Utils.Objects.GetValue;var A2=function(e){var t=W0(this.wrapConfig,"callback");return t||(t=W0(e,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,e)},R2={setVAlign(e){return this.wrapConfig.vAlign=e,this},setHAlign(e){return this.wrapConfig.hAlign=e,this}},D2={setTextOX(e){return e===this._textOX?this:(this._textOX=e,this)},setTextOY(e){return e===this._textOY?this:(this._textOY=e,this)},setTextOXY(e,t){if(!(e===this._textOX&&t===this._textOY))return this._textOX=e,this._textOY=t,this},addTextOX(e){return this.setTextOX(this._textOX+e),this},addTextOY(e){return this.setTextOY(this._textOY+e),this},addTextOXY(e,t){return this.setTextOXY(this._textOX+e,this._textOY+t),this}},I2=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var e,t=0,s=this.children.length;t<s;t++)e=this.children[t],e.active&&e.render();this.innerBounds.active&&this.innerBounds.render()},L2=function(e,t,s){s===void 0&&(s=!0);for(var l=this.children.filter(function(V){return!(s&&!V.active)}),w=0,S=l.length;w<S;w++){var k=l[w],D;if(t?D=e.call(this,k,w,l):D=e(k,w,l),D)break}return this},F2=function(e,t,s){s===void 0&&(s=!0);for(var l=this.children.filter(function(V){return!(s&&!V.active||!V.renderable||V.removed)}),w=0,S=l.length;w<S;w++){var k=l[w],D;if(t?D=e.call(this,k,w,l):D=e(k,w,l),D)break}return this},B2=function(e,t,s){s===void 0&&(s=!0);for(var l=this.children.filter(function(V){return!(s&&!V.active||!Nn(V)||V.removed)}),w=0,S=l.length;w<S;w++){var k=l[w],D;if(t?D=e.call(this,k,w,l):D=e(k,w,l),D)break}return this},N2=function(){return this.children};const Y2=Phaser.Utils.Array.GetAll;var V2=function(){return Y2(this.children,"active",!0)},z2=function(e,t){return t===void 0&&(t=[]),this.forEachCharChild(function(s){t.push(s)},void 0,e),t},G2=function(){return this.lastAppendedChildren},U2=function(e,t,s,l){typeof t!="number"&&(l=t,t=0,s=0);var w=e.drawCenterX+t,S=e.drawCenterY+s;return _0(e,w,S,l)};const W2=Phaser.Math.Distance.BetweenPointsSquared;var X2=function(e,t){var s={x:e,y:t},l=1/0,w=null;return this.forEachRenderableChild(function(S){var k=W2(s,U2(S,!0));l>k&&(l=k,w=S)}),w},j2=function(e,t,s,l){return typeof e=="number"&&(e=this.getCharChild(e,!0)),E0(this,e,t,s,l)},H2=function(){for(var e=this.children,t=0,s=0,l=0,w=e.length;l<w;l++){var S=e[l];if(!(!S.renderable||!S.active||!S.visible)){var k=S.x0!==void 0?S.x0:S.x,D=S.y0!==void 0?S.y0:S.y;t=Math.max(t,k),s=Math.max(s,D)}}var V=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,G=s+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==V||this.height!==G)&&(this.dirty=!0,this.setCanvasSize(V,G)),this},$2=function(e,t){t===void 0&&(t=!0);for(var s=this.children,l=0,w=s.length;l<w;l++){var S=s[l];if(!(t&&!S.active)&&Nn(S)&&!S.removed){if(e===0)return l;e--}}},q2=function(e,t){t===void 0&&(t=!0);for(var s=this.children,l=0,w=s.length;l<w;l++){var S=s[l];if(!(t&&!S.active)&&Nn(S)&&!S.removed){if(e===0)return S;e--}}},K2=function(e,t){if(typeof e!="number"&&(e=this.children.indexOf(e),e<0))return null;t===void 0&&(t=!0);var s=this.children;e>=s.length&&(e=s.length);for(var l=0,w=0;w<e;w++){var S=s[w];t&&!S.active||Nn(S)&&!S.removed&&l++}return l},Q2=function(e){return e===void 0&&(e=!0),this.childrenInteractiveEnable!==e&&(this.lastOverChild=null),this.childrenInteractiveEnable=e,this},pp=function(e,t,s){for(var e=e,l=0,w=e.length;l<w;l++){var S=e[l];if(!(!S.active||!S.renderable)&&S.contains(t,s))return S}return null},J2=function(){return this.on("pointerdown",Z2,this).on("pointerdown",tk,this).on("pointermove",fp,this).on("pointerover",fp,this).on("pointerout",function(e,t){fp.call(this,e,null,null,t)},this),this},Z2=function(e,t,s,l){if(this.childrenInteractiveEnable){var w=pp(this.children,t,s);w&&this.emit("child.pointerdown",w,e,t,s,l)}},tk=function(e,t,s,l){if(this.childrenInteractiveEnable){var w=pp(this.children,t,s);w&&this.emit("child.pointerup",w,e,t,s,l)}},fp=function(e,t,s,l){if(this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,e,t,s,l),this.lastOverChild=null);return}var w=pp(this.children,t,s);w!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,e,t,s,l),w!==null&&this.emit("child.pointerover",w,e,t,s,l),this.lastOverChild=w)}};const ek=Phaser.GameObjects.GameObject;var ik=function(e,t,s){var l=!!this.input;return ek.prototype.setInteractive.call(this,e,t,s),l||J2.call(this),this};const sk=Phaser.Utils.Array.BringToTop,rk=Phaser.Utils.Array.SendToBack,nk=Phaser.Utils.Array.MoveUp,ak=Phaser.Utils.Array.MoveDown,ok=Phaser.Utils.Array.MoveAbove,hk=Phaser.Utils.Array.MoveBelow;var lk={moveChildToFist(e){return rk(this.children,e),this},moveChildToLast(e){return sk(this.children,e),this},movechildUp(e){return nk(this.children,e),this},movechildDown(e){return ak(this.children,e),this},movechildAbove(e,t){return ok(this.children,e,t),this},movechildBelow(e,t){return hk(this.children,e,t),this}},uk={setBackgroundColor(e,t,s){return this.background.setColor(e,t,s),this},setBackgroundStroke(e,t){return this.background.setStroke(e,t),this},setBackgroundCornerRadius(e,t){return this.background.setCornerRadius(e,t),this}},ck={setInnerBoundsColor(e,t,s){return this.innerBounds.setColor(e,t,s),this},setInnerBoundsStroke(e,t){return this.innerBounds.setStroke(e,t),this}},X0={setFixedSize:U_,setPadding:W_,getPadding:X_,modifyTextStyle:j_,modifyDefaultTextStyle:H_,resetTextStyle:$_,setTestString:q_,removeChild:Q_,removeChildren:J_,popChild:t2,clearContent:e2,addChild:i2,createCharChild:n2,createCharChildren:a2,setText:o2,appendText:Uo,insertText:h2,removeText:l2,getText:u2,createImageChild:d2,appendImage:N0,createDrawerChild:f2,appendDrawer:g2,createSpaceChild:m2,appendSpace:Y0,createCommandChild:x2,appendCommand:Nt,setWrapConfig:b2,runWordWrap:M2,runVerticalWrap:E2,runWrap:A2,renderContent:I2,forEachChild:L2,forEachRenderableChild:F2,forEachCharChild:B2,getChildren:N2,getActiveChildren:V2,getCharChildren:z2,getLastAppendedChildren:G2,getNearestChild:X2,getCharWorldPosition:j2,setToMinSize:H2,getCharChildIndex:$2,getCharChild:q2,getCharIndex:K2,setChildrenInteractiveEnable:Q2,setInteractive:ik};Object.assign(X0,lk,uk,ck,R2,D2);const dk=Phaser.Utils.Objects.GetFastValue;var pk={};class fk{constructor(t){this.pools=dk(t,"pools",pk)}free(t){if(!this.pools)return this;var s=t.type;return this.pools.hasOwnProperty(s)||(this.pools[s]=new bt),this.pools[s].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var s=0,l=t.length;s<l;s++)this.free(t[s]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const gp=Phaser.Utils.Objects.IsPlainObject,fi=Phaser.Utils.Objects.GetValue;class ka extends $r{constructor(t,s,l,w,S,k,D){gp(s)?(D=s,s=fi(D,"x",0),l=fi(D,"y",0),w=fi(D,"width",0),S=fi(D,"height",0),k=fi(D,"resolution",1)):gp(w)?(D=w,w=fi(D,"width",0),S=fi(D,"height",0),k=fi(D,"resolution",1)):gp(k)&&(D=k,k=fi(D,"resolution",1));var V=w===0?1:w,G=S===0?1:S;super(t,s,l,V,G,k),this.type="rexDynamicText",this.autoRound=!0,this.padding=Jr(),this.wrapPadding=Jr();var j=fi(D,"style",void 0);this.defaultTextStyle=new Xl(null,j),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(fi(D,"testString","|MÉqgy")),this._textOX=0,this._textOY=0,this.background=new z_(this,fi(D,"background",void 0)),this.innerBounds=new G_(this,fi(D,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new fk(D),this.setFixedSize(w,S),this.setPadding(fi(D,"padding",0)),this.setWrapConfig(fi(D,"wrap",void 0)),this.setChildrenInteractiveEnable(fi(D,"childrenInteractive",!1));var tt=fi(D,"text",void 0);tt&&this.setText(tt)}updateTexture(){return super.updateTexture(function(){this.renderContent()},this),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,s){return this.setFixedSize(t,s),this}get textOX(){return this._textOX}set textOX(t){this.setTextOX(t)}get textOY(){return this._textOY}set textOY(t){this.setTextOY(t)}}Object.assign(ka.prototype,X0),T.register("dynamicText",function(e,t,s,l,w){var S=new ka(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.DynamicText",ka);var Wo={setEventEmitter(e,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},gk={hasProperty(e){var t=this.gameObject;if(t.hasOwnProperty(e))return!0;var s=t[e];return s!==void 0},getProperty(e){return this.gameObject[e]},setProperty(e,t){return this.gameObject[e]=t,this},easeProperty(st){var t=st.property,s=st.value,l=st.duration,w=st.delay,S=st.ease,k=st.repeat,D=st.yoyo,V=st.from,G=st.complete,j=st.target;if(l===void 0&&(l=1e3),w===void 0&&(w=0),S===void 0&&(S="Linear"),k===void 0&&(k=0),D===void 0&&(D=!1),j===void 0&&(j=this.gameObject),V){var tt=s;s=j[t],j[t]=tt}var st={targets:j,duration:l,delay:w,ease:S,repeat:k,yoyo:D,onComplete:G};return st[t]=s,this.addTweenTask(t,st),this},addTweenTask(e,t){var s=this.tweens,l=s[e];l&&l.remove();var w=t.onComplete;return t.onComplete=function(){s[e].remove(),s[e]=null,w&&w(t.targets,e)},l=this.scene.tweens.add(t),l.timeScale=this.timeScale,s[e]=l,this},getTweenTask(e){return this.tweens[e]},freeTweens(){var e=this.tweens,t;for(var s in e)t=e[s],t&&t.remove(),e[s]=null;return this}},vk={hasMethod(e){return typeof this.gameObject[e]=="function"},call(e,...t){if(!this.hasMethod(e))return console.warn(`[GameObjectManager] Game object '${this.name}' does not have method '${e}'`),this;var s=this.gameObject;return s[e].apply(s,t),this}},mk={hasData(e){var t=this.gameObject;return t.data?t.data.has(e):!1},getData(e){return this.gameObject.getData(e)},setData(e,t){return this.gameObject.setData(e,t),this}};class vp{constructor(t,s,l){this.GOManager=t,this.tweens={},this.effects={},this.setGO(s,l)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeGO(){return this.freeTweens(),this.gameObject.bob=void 0,this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,s){return t.goName=s,t.goType=this.GOManager.name,t.bob=this,this.gameObject=t,this.name=s,this.freeTweens(),this}setTimeScale(t){var s=this.tweens;for(var l in s){var w=s[l];w&&(w.timeScale=t)}return this}}Object.assign(vp.prototype,gk,vk,mk);var Xo=function(e){for(var t in e)return!1;return!0},Yn=function(e){return e&&e.charAt(0)!=="!"},yk={has(e){return this.bobs.hasOwnProperty(e)},exists(e){return this.bobs.hasOwnProperty(e)},get(e,t){if(Yn(e))return this.bobs[e];t===void 0&&(t=[]),e&&(e=e.substring(1));for(var s in this.bobs)e&&s===e||t.push(this.bobs[s]);return t},getFitst(e){e&&e.charAt(0)==="!"&&(e=e.substring(1));for(var t in this.bobs)if(!(e&&e===t))return this.bobs[t];return null},getGO(e,t){var s=this.get(e);if(s)if(Array.isArray(s)){t===void 0&&(t=[]);var l=s;return l.forEach(function(w){t.push(w.gameObject)}),t}else return s.gameObject;else return null},forEachGO(e,t){for(var s in this.bobs){var l=this.bobs[s].gameObject,w;if(t?w=e.call(t,l,s,this):w=e(l,s,this),w)break}return this},getAllGO(e){e===void 0&&(e=[]);for(var t in this.bobs){var s=this.bobs[t].gameObject;e.push(s)}return e}},jo=function(e){return e>>16&255},Ho=function(e){return e>>8&255},$o=function(e){return e&255},j0=function(e,t){return t===void 0&&(t={}),t.r=e>>16&255,t.g=e>>8&255,t.b=e&255,t};const xk=65535,bk=16711935,wk=16776960;var Sk=function(e,t){return(t&255)<<16|e&xk},Tk=function(e,t){return(t&255)<<8|e&bk},Ck=function(e,t){return t&255|e&wk},Pk=function(e,t,s,l){return(t&255)<<16|(s&255)<<8|l&255},Mk=function(e,t){if(e.hasOwnProperty("tintR"))return e;t===void 0&&(t=16777215);var s=jo(t),l=Ho(t),w=$o(t);return Object.defineProperty(e,"tint",{get:function(){return t},set:function(S){S=Math.floor(S)&16777215,e.setTint&&e.setTint(S),t!==S&&(t=S,s=jo(t),l=Ho(t),w=$o(t))}}),Object.defineProperty(e,"tintR",{get:function(){return s},set:function(S){S=Math.floor(S)&255,s!==S&&(s=S,e.tint=Sk(t,S))}}),Object.defineProperty(e,"tintG",{get:function(){return l},set:function(S){S=Math.floor(S)&255,l!==S&&(l=S,e.tint=Tk(t,S))}}),Object.defineProperty(e,"tintB",{get:function(){return w},set:function(S){S=Math.floor(S)&255,w!==S&&(w=S,e.tint=Ck(t,S))}}),Object.defineProperty(e,"tintGray",{get:function(){return Math.floor((s+l+w)/3)},set:function(S){S=Math.floor(S)&255,(s!==S||l!==S||w!==S)&&(s=S,l=S,w=S,e.tint=Pk(t,S,S,S))}}),e.tint=t,e};const _k=Phaser.Events.EventEmitter;var kk=function(e){if(e.events)return e;var t=new _k,s=e.x;Object.defineProperty(e,"x",{get:function(){return s},set:function(k){s!==k&&(s=k,t.emit("update",e))}});var l=e.y;Object.defineProperty(e,"y",{get:function(){return l},set:function(k){l!==k&&(l=k,t.emit("update",e))}});var w=e.width;Object.defineProperty(e,"width",{get:function(){return w},set:function(k){w!==k&&(w=k,t.emit("update",e))}});var S=e.height;return Object.defineProperty(e,"height",{get:function(){return S},set:function(k){S!==k&&(S=k,t.emit("update",e))}}),e.events=t,e},Ok=function(e,t,s,l,w,S){return S===void 0?S={}:S===!0&&(S=Ek),typeof s!="number"&&(s=0,l=0),S.x=w.x+w.width*e+s,S.y=w.y+w.height*t+l,S},Ek={},Ak=function(e,t,s,l,w,S,k){if(e.hasOwnProperty("vp"))return e;typeof s=="function"&&(k=s,s=void 0),typeof w=="function"&&(k=w,w=void 0),s===void 0&&(s=.5),l===void 0&&(l=.5),w===void 0&&(w=0),S===void 0&&(S=0),k===void 0&&(k=Ok),kk(t);var D=t.events;e.vp=t;var V=function(){k(s,l,w,S,t,e)};D.on("update",V),e.once("destroy",function(){D.off("update",V),e.vp=void 0}),Object.defineProperty(e,"vpx",{get:function(){return s},set:function(G){s!==G&&(s=G,V())}}),Object.defineProperty(e,"vpy",{get:function(){return l},set:function(G){l!==G&&(l=G,V())}}),Object.defineProperty(e,"vpxOffset",{get:function(){return w},set:function(G){w!==G&&(w=G,V())}}),Object.defineProperty(e,"vpyOffset",{get:function(){return S},set:function(G){S!==G&&(S=G,V())}}),V()},wi=function(e){return e.preFX?e.preFX:e.postFX?e.postFX:null},Be=function(e,t){e._effectSwitchNames||(e._effectSwitchNames=[],e.clearAllEffects=function(){for(var s=e._effectSwitchNames,l=0,w=s.length;l<w;l++)e[s[l]]=null;return e},e.on("destroy",e.clearAllEffects,e)),e._effectSwitchNames.push(t)},Rk=function(e){if(he(e,"barrel"))return e;var t=wi(e);if(!t)return e;var s;return Object.defineProperty(e,"barrel",{get:function(){return s},set:function(l){s!==l&&(s=l,s===null||s===!1?e._barrelEffect&&(t.remove(e._barrelEffect),e._barrelEffect=void 0):(e._barrelEffect||(e._barrelEffect=t.addBarrel()),e._barrelEffect.amount=s))}}),e.barrel=null,Be(e,"barrel"),e},gi=function(e,t,s){if(he(e,t))return e;var l=wi(e);if(!l)return e;var w=`_${t}Effect`,S;return Object.defineProperty(e,t,{get:function(){return S},set:function(k){if(S!==k)if(S=k,S===null||S===!1)e[w]&&(l.remove(e[w]),e[w]=void 0);else{e[w]||(e[w]=l.addColorMatrix());var D=e[w];D[t](s===1?k:void 0)}}}),e[t]=null,Be(e,t),e},Dk=function(e){return gi(e,"blackWhite"),e},Ik=function(e){if(he(e,"bloomColor"))return e;var t=wi(e);if(!t)return e;var s,l=1,w=1,S=1,k=1,D=4;return Object.defineProperty(e,"bloomColor",{get:function(){return s},set:function(V){s!==V&&(s=V,s===null||s===!1?e._bloom&&(t.remove(e._bloom),e._bloom=void 0,t.setPadding(0)):(e._bloom||(e._bloom=t.addBloom(s,l,w,S,k,D),t.setPadding(Math.max(l,w)+1)),e._bloom.color=s))}}),Object.defineProperty(e,"bloomOffsetX",{get:function(){return l},set:function(V){if(l!==V&&(l=V,e._bloom)){var G=Math.max(l,w);t.setPadding(G+1),e._bloom.offsetX=l}}}),Object.defineProperty(e,"bloomOffsetY",{get:function(){return w},set:function(V){if(w!==V&&(w=V,e._bloom)){var G=Math.max(l,w);t.setPadding(G+1),e._bloom.offsetY=w}}}),Object.defineProperty(e,"bloomBlurStrength",{get:function(){return S},set:function(V){S!==V&&(S=V,e._bloom&&(e._bloom.blurStrength=S))}}),Object.defineProperty(e,"bloomStrength",{get:function(){return k},set:function(V){k!==V&&(k=V,e._bloom&&(e._bloom.strength=k))}}),Object.defineProperty(e,"bloomSteps",{get:function(){return D},set:function(V){D!==V&&(D=V,e._bloom&&(e._bloom.steps=D))}}),e.bloomColor=null,Be(e,"bloomColor"),e},Lk=function(e){if(he(e,"blurColor"))return e;var t=wi(e);if(!t)return e;var s,l=0,w=1,S=1,k=1,D=4;return Object.defineProperty(e,"blurColor",{get:function(){return s},set:function(V){s!==V&&(s=V,s===null||s===!1?e._blur&&(t.remove(e._blur),e._blur=void 0,t.setPadding(0)):(e._blur||(e._blur=t.addBlur(l,w,S,k,s,D),t.setPadding(Math.max(w,S)+1)),e._blur.color=s))}}),Object.defineProperty(e,"blurQuality",{get:function(){return l},set:function(V){l!==V&&(l=V,e._blur&&(e._blur.quality=l))}}),Object.defineProperty(e,"blurX",{get:function(){return w},set:function(V){if(w!==V&&(w=V,e._blur)){var G=Math.max(w,S);t.setPadding(G+1),e._blur.x=w}}}),Object.defineProperty(e,"blurY",{get:function(){return S},set:function(V){if(S!==V&&(S=V,e._blur)){var G=Math.max(w,S);t.setPadding(G+1),e._blur.y=S}}}),Object.defineProperty(e,"blurStrength",{get:function(){return k},set:function(V){k!==V&&(k=V,e._blur&&(e._blur.strength=k))}}),Object.defineProperty(e,"blurSteps",{get:function(){return D},set:function(V){D!==V&&(D=V,e._blur&&(e._blur.steps=D))}}),e.blurColor=null,Be(e,"blurColor"),e},Fk=function(e){if(he(e,"bokehRadius"))return e;var t=wi(e);if(!t)return e;var s,l=1,w=.2;return Object.defineProperty(e,"bokehRadius",{get:function(){return s},set:function(S){s!==S&&(s=S,s===null||s===!1?e._bokeh&&(t.remove(e._bokeh),e._bokeh=void 0):(e._bokeh||(e._bokeh=t.addBokeh(s,l,w)),e._bokeh.radius=s))}}),Object.defineProperty(e,"bokehAmount",{get:function(){return l},set:function(S){l!==S&&(l=S,e._bokeh&&(e._bokeh.amount=l))}}),Object.defineProperty(e,"bokehContrast",{get:function(){return w},set:function(S){w!==S&&(w=S,e._bokeh&&(e._bokeh.contrast=w))}}),e.bokehRadius=null,Be(e,"bokehRadius"),e},Bk=function(e){return gi(e,"brightness",1),e},Nk=function(e){return gi(e,"brown"),e},Yk=function(e){if(he(e,"circleColor"))return e;var t=wi(e);if(!t)return e;var s,l=8,w=0,S=.4,k=1,D=.005;return Object.defineProperty(e,"circleColor",{get:function(){return s},set:function(V){s!==V&&(s=V,s===null||s===!1?e._circle&&(t.remove(e._circle),e._circle=void 0):(e._circle||(e._circle=t.addCircle(l,s,w,k,D),e.circleBackgroundAlpha=S),e._circle.color=s))}}),Object.defineProperty(e,"circleThickness",{get:function(){return l},set:function(V){l!==V&&(l=V,e._circle&&(e._circle.thickness=l))}}),Object.defineProperty(e,"circleBackgroundColor",{get:function(){return w},set:function(V){w!==V&&(w=V,e._circle&&(e._circle.backgroundColor=w))}}),Object.defineProperty(e,"circleBackgroundAlpha",{get:function(){return S},set:function(V){S!==V&&(S=V,e._circle&&(e._circle.glcolor2[3]=S))}}),Object.defineProperty(e,"circleScale",{get:function(){return k},set:function(V){k!==V&&(k=V,e._circle&&(e._circle.scale=k))}}),Object.defineProperty(e,"circleFeather",{get:function(){return D},set:function(V){D!==V&&(D=V,e._circle&&(e._circle.feather=D))}}),e.circleColor=null,Be(e,"circleColor"),e},Vk=function(e){return gi(e,"contrast",1),e},zk=function(e){return gi(e,"desaturate",1),e},Gk=function(e){return gi(e,"desaturateLuminance"),e},Uk=function(e){if(he(e,"displacementKey"))return e;var t=wi(e);if(!t)return e;var s,l=.005,w=.005;return Object.defineProperty(e,"displacementKey",{get:function(){return s},set:function(S){s!==S&&(s=S,s===null||s===!1?e._displacement&&(t.remove(e._displacement),e._displacement=void 0):(e._displacement||(e._displacement=t.addDisplacement(s,l,w)),e._displacement.setTexture(s)))}}),Object.defineProperty(e,"displacementX",{get:function(){return l},set:function(S){l!==S&&(l=S,e._displacement&&(e._displacement.x=l))}}),Object.defineProperty(e,"displacementY",{get:function(){return w},set:function(S){w!==S&&(w=S,e._displacement&&(e._displacement.y=w))}}),e.displacementKey=null,Be(e,"displacementKey"),e},Wk=function(e){if(he(e,"glowColor"))return e;var t=wi(e);if(!t)return e;var s,l=4,w=0;return Object.defineProperty(e,"glowColor",{get:function(){return s},set:function(S){s!==S&&(s=S,s===null||s===!1?e._glow&&(t.remove(e._glow),e._glow=void 0,t.setPadding(0)):(e._glow||(e._glow=t.addGlow(s,l,w),t.setPadding(l+1)),e._glow.color=s))}}),Object.defineProperty(e,"glowOuterStrength",{get:function(){return l},set:function(S){l!==S&&(l=S,e._glow&&(t.setPadding(l+1),e._glow.outerStrength=l))}}),Object.defineProperty(e,"glowInnerStrength",{get:function(){return w},set:function(S){w!==S&&(w=S,e._glow&&(e._glow.innerStrength=w))}}),e.glowColor=null,Be(e,"glowColor"),e},Xk=function(e){if(he(e,"gradientColor"))return e;var t=wi(e);if(!t)return e;var s,l,w=.5,S=0,k=0,D=0,V=1,G=0;return Object.defineProperty(e,"gradientColor",{get:function(){return[s,l]},set:function(j){var tt,st;j===null||j===!1?(tt=null,st=null):(tt=j[0],st=j[1]),!(s===tt&&l===st)&&(s=tt,l=st,s===null||s===!1?e._gradient&&(t.remove(e._gradient),e._gradient=void 0):(e._gradient||(e._gradient=t.addGradient(s,l,w,S,k,D,V,G)),e._gradient.color1=s,e._gradient.color2=l))}}),Object.defineProperty(e,"gradientColor1",{get:function(){return s},set:function(j){if(j===null||j===!1){e.gradientColor=j;return}s!==j&&(s=j,e._gradient&&(e._gradient.color1=s))}}),Object.defineProperty(e,"gradientColor2",{get:function(){return l},set:function(j){if(j===null||j===!1){e.gradientColor=j;return}l!==j&&(l=j,e._gradient&&(e._gradient.color2=l))}}),Object.defineProperty(e,"gradientAlpha",{get:function(){return w},set:function(j){w!==j&&(w=j,e._gradient&&(e._gradient.alpha=w))}}),Object.defineProperty(e,"gradientFromX",{get:function(){return S},set:function(j){S!==j&&(S=j,e._gradient&&(e._gradient.fromX=S))}}),Object.defineProperty(e,"gradientFromY",{get:function(){return k},set:function(j){k!==j&&(k=j,e._gradient&&(e._gradient.fromY=k))}}),Object.defineProperty(e,"gradientToX",{get:function(){return D},set:function(j){D!==j&&(D=j,e._gradient&&(e._gradient.toX=D))}}),Object.defineProperty(e,"gradientToY",{get:function(){return V},set:function(j){V!==j&&(V=j,e._gradient&&(e._gradient.toY=V))}}),Object.defineProperty(e,"gradientSize",{get:function(){return G},set:function(j){G!==j&&(G=j,e._gradient&&(e._gradient.size=G))}}),e.gradientColor=null,Be(e,"gradientColor"),e},jk=function(e){return gi(e,"grayscale",1),e},Hk=function(e){return gi(e,"hue",1),e},$k=function(e){return gi(e,"kodachrome"),e},qk=function(e){return gi(e,"lsd"),e},Kk=function(e){return gi(e,"negative"),e},Qk=function(e){if(he(e,"pixelate"))return e;var t=wi(e);if(!t)return e;var s;return Object.defineProperty(e,"pixelate",{get:function(){return s},set:function(l){s!==l&&(s=l,s===null||s===!1?e._pixelateEffect&&(t.remove(e._pixelateEffect),e._pixelateEffect=void 0):(e._pixelateEffect||(e._pixelateEffect=t.addPixelate()),e._pixelateEffect.amount=s))}}),e.pixelate=null,Be(e,"pixelate"),e},Jk=function(e){return gi(e,"polaroid"),e},Zk=function(e){if(he(e,"revealLeft"))return e;var t=wi(e);if(!t)return e;var s,l,w,S,k=.1,D=function(){s=null,l=null,w=null,S=null},V=function(G){G._revealEffect&&(t.remove(G._revealEffect),G._revealEffect=void 0)};return Object.defineProperty(e,"revealLeft",{get:function(){return s},set:function(G){s!==G&&(D(),s=G,s===null||s===!1?V(e):(e._revealEffect||(e._revealEffect=t.addReveal(k,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=0,e._revealEffect.progress=s))}}),Object.defineProperty(e,"revealRight",{get:function(){return l},set:function(G){l!==G&&(D(),l=G,l===null||l===!1?V(e):(e._revealEffect||(e._revealEffect=t.addReveal(k,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=0,e._revealEffect.progress=l))}}),Object.defineProperty(e,"revealUp",{get:function(){return w},set:function(G){w!==G&&(D(),w=G,w===null||w===!1?V(e):(e._revealEffect||(e._revealEffect=t.addReveal(k,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=1,e._revealEffect.progress=w))}}),Object.defineProperty(e,"revealDown",{get:function(){return S},set:function(G){S!==G&&(D(),S=G,S===null||S===!1?V(e):(e._revealEffect||(e._revealEffect=t.addReveal(k,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=1,e._revealEffect.progress=S))}}),Object.defineProperty(e,"revealWidth",{get:function(){return k},set:function(G){k!==G&&(k=G,e._revealEffect&&(e._revealEffect.wipeWidth=k))}}),e.revealLeft=null,Be(e,"revealLeft"),Be(e,"revealRight"),Be(e,"revealUp"),Be(e,"revealDown"),e},tO=function(e){return gi(e,"saturate",1),e},eO=function(e){return gi(e,"sepia"),e},iO=function(e){if(he(e,"shadowColor"))return e;var t=wi(e);if(!t)return e;var s,l=0,w=0,S=.1,k=1,D=6,V=1;return Object.defineProperty(e,"shadowColor",{get:function(){return s},set:function(G){s!==G&&(s=G,s===null||s===!1?e._shadow&&(t.remove(e._shadow),e._shadow=void 0):(e._shadow||(e._shadow=t.addShadow(l,w,S,k,s,D,V)),e._shadow.color=s))}}),Object.defineProperty(e,"shadowX",{get:function(){return l},set:function(G){l!==G&&(l=G,e._shadow&&(e._shadow.x=l))}}),Object.defineProperty(e,"shadowY",{get:function(){return w},set:function(G){w!==G&&(w=G,e._shadow&&(e._shadow.y=w))}}),Object.defineProperty(e,"decay",{get:function(){return S},set:function(G){S!==G&&(S=G,e._shadow&&(e._shadow.decay=S))}}),Object.defineProperty(e,"shadowPower",{get:function(){return k},set:function(G){k!==G&&(k=G,e._shadow&&(e._shadow.power=k))}}),Object.defineProperty(e,"shadowSamples",{get:function(){return D},set:function(G){D!==G&&(D=G,e._shadow&&(e._shadow.samples=D))}}),Object.defineProperty(e,"shadowIntensity",{get:function(){return V},set:function(G){V!==G&&(V=G,e._shadow&&(e._shadow.intensity=V))}}),e.shadowColor=null,Be(e,"shadowColor"),e},sO=function(e){return gi(e,"shiftToBGR"),e},rO=function(e){if(he(e,"shineSpeed"))return e;var t=wi(e);if(!t)return e;var s,l=.5,w=3;return Object.defineProperty(e,"shineSpeed",{get:function(){return s},set:function(S){s!==S&&(s=S,s===null||s===!1?e._shine&&(t.remove(e._shine),e._shine=void 0):(e._shine||(e._shine=t.addShine(s,l,w)),e._shine.speed=s))}}),Object.defineProperty(e,"shineLineWidth",{get:function(){return l},set:function(S){l!==S&&(l=S,e._shine&&(e._shine.lineWidth=l))}}),Object.defineProperty(e,"shineGradient",{get:function(){return w},set:function(S){w!==S&&(w=S,e._shine&&(e._shine.gradient=w))}}),e.shineSpeed=null,Be(e,"shineSpeed"),e},nO=function(e){return gi(e,"technicolor"),e},aO=function(e){if(he(e,"tiltShiftRadius"))return e;var t=wi(e);if(!t)return e;var s,l=1,w=.2,S=1,k=1,D=1;return Object.defineProperty(e,"tiltShiftRadius",{get:function(){return s},set:function(V){s!==V&&(s=V,s===null||s===!1?e._tiltShift&&(t.remove(e._tiltShift),e._tiltShift=void 0):(e._tiltShift||(e._tiltShift=t.addTiltShift(s,l,w,S,k,D)),e._tiltShift.radius=s))}}),Object.defineProperty(e,"tiltShiftAmount",{get:function(){return l},set:function(V){l!==V&&(l=V,e._tiltShift&&(e._tiltShift.amount=l))}}),Object.defineProperty(e,"tiltShiftContrast",{get:function(){return w},set:function(V){w!==V&&(w=V,e._tiltShift&&(e._tiltShift.contrast=w))}}),Object.defineProperty(e,"tiltShiftBlurX",{get:function(){return S},set:function(V){S!==V&&(S=V,e._tiltShift&&(e._tiltShift.blurX=S))}}),Object.defineProperty(e,"tiltShiftBlurY",{get:function(){return k},set:function(V){k!==V&&(k=V,e._tiltShift&&(e._tiltShift.blurY=k))}}),Object.defineProperty(e,"tiltShiftStrength",{get:function(){return D},set:function(V){D!==V&&(D=V,e._tiltShift&&(e._tiltShift.strength=D))}}),e.tiltShiftRadius=null,Be(e,"tiltShiftRadius"),e},oO=function(e){if(he(e,"vignetteRadius"))return e;var t=wi(e);if(!t)return e;var s,l=.5,w=.5,S=.5;return Object.defineProperty(e,"vignetteRadius",{get:function(){return s},set:function(k){s!==k&&(s=k,s===null||s===!1?e._vignette&&(t.remove(e._vignette),e._vignette=void 0):(e._vignette||(e._vignette=t.addVignette(l,w,s,S)),e._vignette.radius=s))}}),Object.defineProperty(e,"vignetteX",{get:function(){return l},set:function(k){l!==k&&(l=k,e._vignette&&(e._vignette.x=l))}}),Object.defineProperty(e,"vignetteY",{get:function(){return w},set:function(k){w!==k&&(w=k,e._vignette&&(e._vignette.y=w))}}),Object.defineProperty(e,"vignetteStrength",{get:function(){return S},set:function(k){S!==k&&(S=k,e._vignette&&(e._vignette.strength=S))}}),e.vignetteRadius=null,Be(e,"vignetteRadius"),e},hO=function(e){return gi(e,"vintagePinhole"),e},lO=function(e){if(he(e,"wipeLeft"))return e;var t=wi(e);if(!t)return e;var s,l,w,S,k=.1,D=function(){s=null,l=null,w=null,S=null},V=function(G){G._wipeEffect&&(t.remove(G._wipeEffect),G._wipeEffect=void 0)};return Object.defineProperty(e,"wipeLeft",{get:function(){return s},set:function(G){s!==G&&(D(),s=G,s===null||s===!1?V(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(k,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=0,e._wipeEffect.progress=s))}}),Object.defineProperty(e,"wipeRight",{get:function(){return l},set:function(G){l!==G&&(D(),l=G,l===null||l===!1?V(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(k,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=0,e._wipeEffect.progress=l))}}),Object.defineProperty(e,"wipeUp",{get:function(){return w},set:function(G){w!==G&&(D(),w=G,w===null||w===!1?V(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(k,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=1,e._wipeEffect.progress=w))}}),Object.defineProperty(e,"wipeDown",{get:function(){return S},set:function(G){S!==G&&(D(),S=G,S===null||S===!1?V(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(k,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=1,e._wipeEffect.progress=S))}}),Object.defineProperty(e,"wipeWidth",{get:function(){return k},set:function(G){k!==G&&(k=G,e._wipeEffect&&(e._wipeEffect.wipeWidth=k))}}),e.wipeLeft=null,Be(e,"wipeLeft"),Be(e,"wipeRight"),Be(e,"wipeUp"),Be(e,"wipeDown"),e};const Hl={barrel:Rk,blackWhite:Dk,bloom:Ik,blur:Lk,bokeh:Fk,brightness:Bk,brown:Nk,circle:Yk,contrast:Vk,desaturate:zk,desaturateLuminance:Gk,displacement:Uk,glow:Wk,gradient:Xk,grayscale:jk,hue:Hk,kodachrome:$k,lsd:qk,negative:Kk,pixelate:Qk,polaroid:Jk,reveal:Zk,saturate:tO,sepia:eO,shadow:iO,shiftToBGR:sO,shine:rO,technicolor:nO,tiltShift:aO,vignette:oO,vintagePinhole:hO,wipe:lO};var Oa=function(e,t){if(t===void 0)t=!0;else if(typeof t=="string")t={config:!0};else if(Array.isArray(t))for(var s=t,t={},l=0,w=s.length;l<w;l++)t[s[l]]=!0;if(t===!0)for(var S in Hl)Hl[S](e);else for(var S in t)t[S]&&Hl[S]&&Hl[S](e);return e};const uO=Phaser.Utils.Array.Remove;var cO={addGO(e,t){this.remove(e,!0),this.useTintFadeEffect(t)&&Mk(t),this.viewportCoordinateEnable&&Ak(t,this.viewport),this.effectPropertiesConfig&&Oa(t,this.effectPropertiesConfig),t.setName(e).once("destroy",function(){uO(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var s=new this.BobClass(this,t,e);return this.bobs[e]=s,this},add(e,...t){var s=this.createGameObjectCallback,l=this.createGameObjectScope,w=s.call(l,this.scene,...t);this.addGO(e,w),this.gameObjectDepth!=null&&w.setDepth(this.gameObjectDepth);var S=this.get(e);return this.fadeBob(S,0,1),this}},dO={remove(e,t){var s=this.get(e);if(s)Array.isArray(s)||(s=[s]);else return this;var l=this;return s.forEach(function(w){delete l.bobs[w.name];var S=w.gameObject;l.removedGOs.push(S),S.setName(),t?w.destroy():l.fadeBob(w,void 0,0,function(){w.destroy()})}),this},removeAll(){var e=this.bobs;for(var t in e)this.remove(t);return this},clear(e){e===void 0&&(e=!0);var t=this.bobs;for(var s in t)e&&t[s].destroy(),delete t[s];return this.removedGOs.length=0,this}},pO={hasProperty(e,t){var s=Yn(e)?this.get(e):this.getFitst(e);return s?s.hasProperty(t):!1},getProperty(e,t){var s=Yn(e)?this.get(e):this.getFitst(e);if(s)return s.getProperty(t)},isNumberProperty(e,t){var s=this.getProperty(e,t);return typeof s=="number"},setProperty(e,t,s){var l=this.get(e);if(l)Array.isArray(l)||(l=[l]);else return this;return this.symbols&&typeof s=="string"&&this.isNumberProperty(e,t)&&(s in this.symbols?s=this.symbols[s]:console.warn(`Can't find symbol ${s}`)),l.forEach(function(w){w.setProperty(t,s)}),this},easeProperty(e,t){var s=this.get(e);if(s)Array.isArray(s)||(s=[s]);else return this;var l=t.value,w=t.property;return this.symbols&&typeof l=="string"&&this.isNumberProperty(e,w)&&l in this.symbols&&(t.value=this.symbols[l]),s.forEach(function(S){S.easeProperty(t)}),this},hasTweenTask(e,t){var s=Yn(e)?this.get(e):this.getFitst(e);return s?s.tweens.hasOwnProperty(t):!1},getTweenTask(e,t){var s=Yn(e)?this.get(e):this.getFitst(e);return s&&s.tweens[t]||null}},fO={hasMethod(e,t){var s=Yn(e)?this.get(e):this.getFitst(e);return s?s.hasMethod(t):!1},call(e,t,...s){var l=this.get(e);if(l)Array.isArray(l)||(l=[l]);else return this;return l.forEach(function(w){w.call(t,...s)}),this}},gO={hasData(e,t){var s=Yn(e)?this.get(e):this.getFitst(e);return s?s.hasData(t):!1},getData(e,t){if(this.has(e))return this.get(e).getData(t)},setData(e,t,s){var l=this.get(e);if(l)Array.isArray(l)||(l=[l]);else return this;return l.forEach(function(w){w.setData(t,s)}),this}};const H0=0,$0=1,mp=2,q0=3,K0=4,yp=5,vO={tint:H0,alpha:$0,revealUp:mp,revealDown:q0,revealLeft:K0,revealRight:yp};var mO={setGOFadeMode(e){return typeof e=="string"&&(e=vO[e]),this.fadeMode=e,this},setGOFadeTime(e){return this.fadeTime=e,this},useTintFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===H0)&&this.fadeTime>0&&e.setTint!==void 0},useAlphaFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===$0)&&this.fadeTime>0&&e.setAlpha!==void 0},useRevealEffect(e){return this.fadeMode>=mp&&this.fadeMode<=yp&&this.fadeTime>0&&(e.preFX||e.postFX)},fadeBob(e,t,s,l){var w=e.gameObject;if(this.useTintFadeEffect(w))t!==void 0&&e.setProperty("tintGray",255*t),e.easeProperty({property:"tintGray",value:Math.floor(255*s),duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:l});else if(this.useAlphaFadeEffect(w))t!==void 0&&e.setProperty("alpha",t),e.easeProperty({property:"alpha",value:s,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:l});else if(this.useRevealEffect(w)){Oa(w,"reveal");var S;switch(this.fadeMode){case mp:S="revealUp";break;case q0:S="revealDown";break;case K0:S="revealLeft";break;case yp:S="revealRight";break}t===void 0&&(t=0),w[S]=t,e.easeProperty({property:S,value:s,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:l}),e.getTweenTask(S).once("complete",function(){w[S]=null})}else l&&l(w);return this}},le=function(e){return e.displayWidth!==void 0?e.displayWidth:e.width},ue=function(e){return e.displayHeight!==void 0?e.displayHeight:e.height};const Q0=Phaser.Geom.Rectangle,Ks=Phaser.Math.Vector2,yO=Phaser.Math.RotateAround,xO=Phaser.GameObjects.Container;var xp=function(e,t){if(t===void 0?t=new Q0:t===!0&&(bp===void 0&&(bp=new Q0),t=bp),e.getBounds&&!(e instanceof xO))return e.getBounds(t);var s,l,w,S,k,D,V,G;if(e.parentContainer){var j=e.parentContainer.getBoundsTransformMatrix();Vn(e,t),j.transformPoint(t.x,t.y,t),s=t.x,l=t.y,qo(e,t),j.transformPoint(t.x,t.y,t),w=t.x,S=t.y,Ko(e,t),j.transformPoint(t.x,t.y,t),k=t.x,D=t.y,wp(e,t),j.transformPoint(t.x,t.y,t),V=t.x,G=t.y}else Vn(e,t),s=t.x,l=t.y,qo(e,t),w=t.x,S=t.y,Ko(e,t),k=t.x,D=t.y,wp(e,t),V=t.x,G=t.y;return t.x=Math.min(s,w,k,V),t.y=Math.min(l,S,D,G),t.width=Math.max(s,w,k,V)-t.x,t.height=Math.max(l,S,D,G)-t.y,t},bp=void 0,Vn=function(e,t,s){return t===void 0?t=new Ks:t===!0&&(Ri===void 0&&(Ri=new Ks),t=Ri),e.getTopLeft?e.getTopLeft(t):(t.x=e.x-le(e)*e.originX,t.y=e.y-ue(e)*e.originY,Qo(e,t,s))},qo=function(e,t,s){return t===void 0?t=new Ks:t===!0&&(Ri===void 0&&(Ri=new Ks),t=Ri),e.getTopRight?e.getTopRight(t):(t.x=e.x-le(e)*e.originX+le(e),t.y=e.y-ue(e)*e.originY,Qo(e,t,s))},Ko=function(e,t,s){return t===void 0?t=new Ks:t===!0&&(Ri===void 0&&(Ri=new Ks),t=Ri),e.getBottomLeft?e.getBottomLeft(t):(t.x=e.x-le(e)*e.originX,t.y=e.y-ue(e)*e.originY+ue(e),Qo(e,t,s))},wp=function(e,t,s){return t===void 0?t=new Ks:t===!0&&(Ri===void 0&&(Ri=new Ks),t=Ri),e.getBottomRight?e.getBottomRight(t):(t.x=e.x-le(e)*e.originX+le(e),t.y=e.y-ue(e)*e.originY+ue(e),Qo(e,t,s))},J0=function(e,t,s){t===void 0?t=new Ks:t===!0&&(Ri===void 0&&(Ri=new Ks),t=Ri);var l=le(e),w=ue(e);return t.x=e.x+l*(.5-e.originX),t.y=e.y+w*(.5-e.originY),Qo(e,t,s)},Ri=void 0,Qo=function(e,t,s){if(s===void 0&&(s=!1),e.rotation!==0&&yO(t,e.x,e.y,e.rotation),s&&e.parentContainer){var l=e.parentContainer.getBoundsTransformMatrix();l.transformPoint(t.x,t.y,t)}return t};const Jo=Phaser.Utils.Objects.GetValue;var Z0=function(e,t,s){var l,w,S,k,D;if(typeof s=="number"?l=s:(l=Jo(s,"color"),w=Jo(s,"lineWidth"),S=Jo(s,"fillColor"),k=Jo(s,"fillAlpha",1),D=Jo(s,"padding",0)),Array.isArray(e))for(var V=0,G=e.length;V<G;V++)ty(e[V],t,l,w,S,k,D);else ty(e,t,l,w,S,k,D)},ty=function(e,t,s,l,w,S,k){var D=e.getBounds||e.width!==void 0&&e.height!==void 0;if(D){s===void 0&&(s=16777215),l===void 0&&(l=1),w===void 0&&(w=null),S===void 0&&(S=1),k===void 0&&(k=0);var V=Vn(e,Ea[0]);V.x-=k,V.y-=k;var G=qo(e,Ea[1]);G.x+=k,G.y-=k;var j=wp(e,Ea[2]);j.x+=k,j.y+=k;var tt=Ko(e,Ea[3]);tt.x-=k,tt.y+=k,w!==null&&t.fillStyle(w,S).fillPoints(Ea,!0,!0),s!==null&&t.lineStyle(l,s).strokePoints(Ea,!0,!0)}},Ea=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],bO=function(e,t){return this.forEachGO(function(s){s.drawBounds?s.drawBounds(e,t):Z0(s,e,t)}),this},ey=function(e,t){var s=e.cameras,l;if(t===void 0)l=s.main;else{var w=typeof t;switch(w){case"string":l=s.getCamera(t);break;case"number":l=s.cameras[t];break;default:l=t;break}}return l},wO={setCamera(e,t){var s=this.get(e);if(!s)return this;var l=ey(this.scene,t);return l?(s.gameObject.cameraFilter=4294967295^l.id,s.camera=l,this):this},getCamera(e){var t=this.get(e);return t?t.camera:null}},iy={drawGameObjectsBounds:bO};Object.assign(iy,yk,cO,dO,pO,fO,gO,mO,wO);const SO=Phaser.Cameras.Scene2D.BaseCamera;var TO=function(e){return e instanceof SO};const sy=Phaser.Geom.Rectangle;var Aa=function(e,t,s){return TO(t)||(s=t,t=void 0),s===void 0?s=new sy:s===!0&&(s=CO),t?e.scale.getViewPort(t,s):e.scale.getViewPort(s)},CO=new sy;const Gi=Phaser.Utils.Objects.GetValue;class Ra{constructor(t,s){this.scene=t,this.BobClass=Gi(s,"BobClass",vp),this.setCreateGameObjectCallback(Gi(s,"createGameObject"),Gi(s,"createGameObjectScope")),this.setEventEmitter(Gi(s,"eventEmitter",void 0)),this.setGameObjectDepth(Gi(s,"depth",void 0));var l=Gi(s,"fade",500);typeof l=="number"?(this.setGOFadeMode(),this.setGOFadeTime(l)):(this.setGOFadeMode(Gi(l,"mode")),this.setGOFadeTime(Gi(l,"time",500)));var w=Gi(s,"viewportCoordinate",!1);w!==!1?(this.setViewportCoordinateEnable(Gi(s,"enable",!0)),this.setViewport(Gi(w,"viewport"))):this.setViewportCoordinateEnable(!1);var S=Gi(s,"effectProperties",!1);this.setEffectPropertiesConfig(S),this.setSymbols(Gi(s,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1,this.name=Gi(s,"name")}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var s=this.bobs;for(var l in s)s[l].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,s){return this.createGameObjectCallback=t,this.createGameObjectScope=s,this}setGameObjectDepth(t){return this.gameObjectDepth=t,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setEffectPropertiesConfig(t){return t===void 0&&(t=!0),this.effectPropertiesConfig=t,this}setViewport(t){return t===void 0&&(t=Aa(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return Xo(this.bobs)&&this.removedGOs.length===0}}Object.assign(Ra.prototype,Wo,iy);const PO=Phaser.GameObjects.GameObject,MO=Phaser.GameObjects.Layer;var Ui=function(e){return e instanceof PO||e instanceof MO};const _O=Phaser.GameObjects.Layer;var Zo=function(e){return e instanceof _O},ry=function(e){var t=e.displayList;return Zo(t)?t:null},ls=function(e,t){if(e.length<=1)return e;t===void 0&&(t=!1);for(var s,l=0,w=e.length;l<w;l++){var S=e[l];if(S.displayList?s=S.displayList:S.parentContainer&&(s=S.parentContainer.list),s)break}return s||(s=S.scene.sys.displayList),s.depthSort&&(s.depthSort(),s=s.list),t?e.sort(function(k,D){return s.indexOf(D)-s.indexOf(k)}):e.sort(function(k,D){return s.indexOf(k)-s.indexOf(D)}),e},kO={getLayer(e){return this.getGO(e)},getLayers(e){return e===void 0&&(e=[]),this.forEachGO(function(t){e.push(t)}),ls(e,!1),e},addToLayer(e,t){var s=this.getGO(e);if(!s){console.warn(`[LayerManager] Can't get layer "${e}"`);return}Array.isArray(t)||(t=[t]);for(var l=0,w=t.length;l<w;l++){var S=t[l];S.isRexContainerLite?S.addToLayer(s):s.add(S)}return s.scrollFactorX!==void 0&&S.setScrollFactor(s.scrollFactorX,s.scrollFactorY),this},addToBottomLayer(e){var t=this.getLayers()[0];return this.addToLayer(t.goName,e),this},addToTopLayer(e){var t=this.getLayers(),s=t[t.length-1];return this.addToLayer(s.goName,e),this},removeFromLayer(e,t,s){var l=this.getGO(e);if(!l){console.warn(`[LayerManager] Can't get layer "${e}"`);return}return s===void 0&&(s=!0),t.isRexContainerLite?t.removeFromLayer(l,s):(l.remove(t),s&&t.addToDisplayList()),this},clearLayer(e,t){t===void 0&&(t=!0);var s=this.getGO(e);if(!s){console.warn(`Can't get layer "${e}"`);return}if(t)for(var l=s.getAll(),w=0,S=l.length;w<S;w++)l[w].destroy();else s.removeAll();return this}},OO={setScrollFactor(e,t,s){s===void 0&&(s=t);var l=this.getLayer(e);if(!l)return this;l.scrollFactorX=t,l.scrollFactorY=s;for(var w=l.getAll(),S=0,k=w.length;S<k;S++)w[S].setScrollFactor(t,s);return this}};const $l=Phaser.Utils.Array,EO=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?($l.BringToTop(e,this),this):this},AO=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?($l.SendToBack(e,this),this):this},ny=function(e){var t;return e.parentContainer?(t=e.parentContainer.list,t.indexOf(this)===-1&&e.parentContainer.add(this)):e.displayList&&(t=e.displayList.list,t.indexOf(this)===-1&&e.displayList.add(this)),t?($l.MoveBelow(t,this,e),this):this},ay=function(e){var t;return e.parentContainer?(t=e.parentContainer.list,t.indexOf(this)===-1&&(e.isRexContainerLite?e.addToContainer(e.parentContainer):e.parentContainer.add(e))):e.displayList&&(t=e.displayList.list,t.indexOf(this)===-1&&(e.isRexContainerLite?e.addToLayer(e.displayList):e.displayList.add(e))),t?($l.MoveAbove(t,this,e),this):this};var ql={bringMeToTop:EO,sendMeToBack:AO,moveMyDepthBelow:ny,moveMyDepthAbove:ay},RO={bringLayerToTop(e){var t=this.getLayer(e);return t?(ql.bringMeToTop.call(t),this):this},sendLayerToBack(e){var t=this.getLayer(e);return t?(ql.sendMeToBack.call(t),this):this},moveLayerBelow(e,t){if(e===t)return this;var s=this.getLayer(e),l=this.getLayer(t);return!s||!l?this:(ql.moveMyDepthBelow.call(s,l),this)},moveLayerAbove(e,t){if(e===t)return this;var s=this.getLayer(e),l=this.getLayer(t);return!s||!l?this:(ql.moveMyDepthAbove.call(s,l),this)}};const DO=Ra.prototype.setCamera;var IO={setCamera(e,t){var s=ey(this.scene,t);return s||(s=this.scene.cameras.add(void 0,void 0,void 0,void 0,!1,t)),DO.call(this,e,s),this}},oy={};Object.assign(oy,kO,OO,RO,IO);const Kl=Phaser.Utils.Objects.GetValue;class Ql extends Ra{constructor(t,s){s===void 0?s={}:Array.isArray(s)&&(s={layers:s}),s.hasOwnProperty("fade")||(s.fade=0),s.viewportCoordinate=!1,super(t,s);var l=Kl(s,"rootLayer");this.setRootLayer(l);var w=Kl(s,"layers");if(w)for(var S=0,k=w.length;S<k;S++){var D=w[S];if(typeof D=="string")this.add(D);else{var V=D.name;this.add(V);var G=D.scrollFactor,j=Kl(D,"scrollFactorX",G),tt=Kl(D,"scrollFactorY",G);j!==void 0&&this.setScrollFactor(V,j,tt),this.setCamera(V,D.cameraName)}}}setCreateGameObjectCallback(t,s){return t||(t=LO),super.setCreateGameObjectCallback(t,s),this}setRootLayer(t){if(t===this.rootLayer)return this;var s=this.getAllGO();return t?t.add(s):this.scene.displayList.add(s),this.rootLayer=t,this}addGO(t,s){return super.addGO(t,s),s.name=t,this.rootLayer&&this.rootLayer.add(s),this}get(t,s){if(Ui(t)){var l=ry(t);if(!l||(t=l.name,!t))return}return super.get(t,s)}}var LO=function(e,t){var s=e.add.layer();return t!==void 0&&s.setDepth(t),s};Object.assign(Ql.prototype,oy);var FO=function(e){return M(e)?e.sys.sound:e.sound},BO=function(e){return this.sound.game.cache.audio.has(e)},Da=function(e){return e==null||typeof e!="object"?null:M(e)?e:e.scene&&M(e.scene)?e.scene:e.parent&&e.parent.scene&&M(e.parent.scene)?e.parent.scene:null};const NO=Phaser.Utils.Objects.GetValue;class Oe{constructor(t,s){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(NO(s,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,s){this.destroy(s)}setParent(t){return this.parent=t,this.scene=Da(t),this.game=E(t),this}}Object.assign(Oe.prototype,Wo);const YO=Phaser.Utils.Objects.GetValue;class Jl extends Oe{constructor(t,s){super(t,s),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(YO(s,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=VO[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isPaused=!1,this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const VO={no:0,lazy:1,always:2},zO=Phaser.Utils.Objects.GetValue;class GO extends Jl{constructor(t,s){super(t,s);var l=this.scene?"update":"step";this.tickEventName=zO(s,"tickEventName",l),this.isSceneTicker=!UO(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var UO=function(e){return e==="step"||e==="poststep"};const wr=Phaser.Utils.Objects.GetValue,hy=Phaser.Math.Clamp;let ly=class{constructor(e){this.resetFromJSON(e)}resetFromJSON(e){this.state=wr(e,"state",th),this.timeScale=wr(e,"timeScale",1),this.delay=wr(e,"delay",0),this.repeat=wr(e,"repeat",0),this.repeatCounter=wr(e,"repeatCounter",0),this.repeatDelay=wr(e,"repeatDelay",0),this.duration=wr(e,"duration",0),this.nowTime=wr(e,"nowTime",0),this.justRestart=wr(e,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(e){return this.timeScale=e,this}setDelay(e){return e===void 0&&(e=0),this.delay=e,this}setDuration(e){return this.duration=e,this}setRepeat(e){return this.repeat=e,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(e){return this.repeatDelay=e,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?Ia:eh,this.repeatCounter=0,this}stop(){return this.state=th,this}update(e,t){this.state===th||this.state===Zl||t===0||this.timeScale===0||(this.nowTime+=t*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=uy)):(this.nowTime=this.duration,this.state=Zl):this.nowTime>=0&&(this.state=Ia))}get t(){var e;switch(this.state){case th:case eh:case uy:e=0;break;case Ia:e=this.nowTime/this.duration;break;case Zl:e=1;break}return hy(e,0,1)}set t(e){e=hy(e,-1,1),e<0?(this.state=eh,this.nowTime=-this.delay*e):(this.state=Ia,this.nowTime=this.duration*e,e===1&&this.repeat!==0&&this.repeatCounter++)}setT(e){return this.t=e,this}get isIdle(){return this.state===th}get isDelay(){return this.state===eh}get isCountDown(){return this.state===Ia}get isRunning(){return this.state===eh||this.state===Ia}get isDone(){return this.state===Zl}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}};const th=0,eh=1,Ia=2,uy=3,Zl=-1;class WO extends GO{constructor(t,s){super(t,s),this.timer=new ly}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const ih=Phaser.Utils.Objects.GetValue,cy=Phaser.Utils.Objects.GetAdvancedValue,XO=Phaser.Tweens.Builders.GetEaseFunction;class zn extends WO{resetFromJSON(t){return this.timer.resetFromJSON(ih(t,"timer")),this.setEnable(ih(t,"enable",!0)),this.setTarget(ih(t,"target",this.parent)),this.setDelay(cy(t,"delay",0)),this.setDuration(cy(t,"duration",1e3)),this.setEase(ih(t,"ease","Linear")),this.setRepeat(ih(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=XO(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateTarget(this.target,this.timer),this.complete()),this}update(t,s){if(!this.isRunning||!this.enable||this.parent.hasOwnProperty("active")&&!this.parent.active)return this;var l=this.target,w=this.timer;return w.update(t,s),w.isDelay||this.updateTarget(l,w),this.emit("update",l,this),w.isDone&&this.complete(),this}updateTarget(t,s){}}const jO=Phaser.Sound.BaseSound;var Sp=function(e){return e instanceof jO};const dy=Phaser.Utils.Objects.GetValue,py=Phaser.Utils.Objects.GetAdvancedValue,HO=Phaser.Math.Linear;let fy=class extends zn{constructor(e,t,s){Sp(e)&&(s=t,t=e,e=void 0),t.active=!0,t.scene=e,t.game=t.manager.game,super(t,s),this.volume={},this.resetFromJSON(s)}resetFromJSON(e){return super.resetFromJSON(e),this.setMode(dy(e,"mode",0)),this.setEnable(dy(e,"enable",!0)),this.setVolumeRange(py(e,"volume.start",this.parent.volume),py(e,"volume.end",0)),this}setMode(e){return typeof e=="string"&&(e=$O[e]),this.mode=e,this}setVolumeRange(e,t){return this.volume.start=e,this.volume.end=t,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateTarget(e,t){e.volume=HO(this.volume.start,this.volume.end,t.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.stop(),this.parent.destroy();break}return this}};const $O={stop:1,destroy:2};var tu=function(e,t,s,l,w){Sp(e)&&(w=l,l=s,s=t,t=e,e=void 0),l===void 0&&(l=1),w===void 0&&(w=0);var S={mode:0,volume:{start:w,end:l},duration:s};typeof t=="string"&&(t=e.sys.sound.add(t));var k;return t.hasOwnProperty("_fade")?(k=t._fade,k.stop().resetFromJSON(S)):(k=new fy(e,t,S),t._fade=k),k.start(),t.isPlaying||t.setVolume(w).play(),t},La=function(e,t,s,l){Sp(e)&&(l=s,s=t,t=e,e=void 0),l===void 0&&(l=!0);var w={mode:l?2:1,volume:{start:t.volume,end:0},duration:s},S;return t.hasOwnProperty("_fade")?(S=t._fade,S.stop().resetFromJSON(w)):(S=new fy(e,t,w),t._fade=S),S.start(),t.isPlaying||t.play(),t};const sh=Phaser.Utils.Objects.GetValue;var qO={setBackgroundMusicLoop(e){return e===void 0&&(e=!0),this.backgroundMusicLoop=e,this},setBackgroundMusicFadeTime(e){return this.backgroundMusicFadeTime=e,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(e){return this.backgroundMusic=e,e&&(e.once("complete",function(){this.backgroundMusic===e&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===e&&(this.backgroundMusic=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic&&this.backgroundMusic.key===e)return this;this.stopBackgroundMusic();var s=this.sound.add(e,{loop:sh(t,"loop",this.backgroundMusicLoop),mute:sh(t,"mute",this.backgroundMusicMute),volume:sh(t,"volume",this.backgroundMusicVolume),detune:sh(t,"detune",0),rate:sh(t,"rate",1)});return this.setCurrentBackgroundMusic(s),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(e){return this.backgroundMusic&&tu(this.backgroundMusic,e,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(e,t){return this.backgroundMusic&&La(this.backgroundMusic,e,t),this},crossFadeBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(e).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=s,this},setBackgroundMusicMute(e){return e===void 0&&(e=!0),this.backgroundMusicMute=e,this},setBackgroundMusicVolume(e){return this.backgroundMusicVolume=e,this},setBackgroundMusicRate(e){return this.backgroundMusic&&this.backgroundMusic.setRate(e),this},setBackgroundMusicDetune(e){return this.backgroundMusic&&this.backgroundMusic.setDetune(e),this}};const rh=Phaser.Utils.Objects.GetValue;var KO={setBackgroundMusic2Loop(e){return e===void 0&&(e=!0),this.backgroundMusic2Loop=e,this},setBackgroundMusic2FadeTime(e){return this.backgroundMusic2FadeTime=e,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(e){return this.backgroundMusic2=e,e&&(e.once("complete",function(){this.backgroundMusic2===e&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===e&&(this.backgroundMusic2=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic2&&this.backgroundMusic2.key===e)return this;this.stopBackgroundMusic2();var s=this.sound.add(e,{loop:rh(t,"loop",this.backgroundMusicLoop),mute:rh(t,"mute",this.backgroundMusic2Mute),volume:rh(t,"volume",this.backgroundMusic2Volume),detune:rh(t,"detune",0),rate:rh(t,"rate",1)});return this.setCurrentBackgroundMusic2(s),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(e){return this.backgroundMusic2&&tu(this.backgroundMusic2,e,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(e,t){return this.backgroundMusic2&&La(this.backgroundMusic2,e,t),this},crossFadeBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(e).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=s,this},setBackgroundMusic2Mute(e){return e===void 0&&(e=!0),this.backgroundMusic2Mute=e,this},setBackgroundMusic2Volume(e){return this.backgroundMusic2Volume=e,this},setBackgroundMusic2Rate(e){return this.backgroundMusic2&&this.backgroundMusic2.setRate(e),this},setBackgroundMusic2Detune(e){return this.backgroundMusic2&&this.backgroundMusic2.setDetune(e),this}};const gy=Phaser.Utils.Array.Remove,eu=Phaser.Utils.Objects.GetValue;var QO={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.sound.add(e,{mute:eu(t,"mute",this.soundEffectsMute),volume:eu(t,"volume",this.soundEffectsVolume),detune:eu(t,"detune",0),rate:eu(t,"rate",1)});return this.soundEffects.push(s),s.once("complete",function(){s.destroy(),this.sound&&gy(this.soundEffects,s)},this).once("destroy",function(){this.sound&&gy(this.soundEffects,s)},this).play(),this},stopAllSoundEffects(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect(e){var t=this.getLastSoundEffect();return t&&tu(t,e,this.soundEffectsVolume,0),this},fadeOutSoundEffect(e,t){var s=this.getLastSoundEffect();return s&&La(s,e,t),this},fadeOutAllSoundEffects(e,t){for(var s=this.soundEffects.length-1;s>=0;s--)La(this.soundEffects[s],e,t);return this},setSoundEffectMute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var s=this.getLastSoundEffect();s&&s.setMute(e)}else this.soundEffectsMute=e;return this},setSoundEffectVolume(e,t){if(t===void 0&&(t=!1),t){var s=this.getLastSoundEffect();s&&s.setVolume(e)}else this.soundEffectsVolume=e;return this},setSoundEffectDetune(e,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect()]:s=this.soundEffects;for(var l=0,w=s.length;l<w;l++)s[l].setDetune(e);return this},setSoundEffectRate(e,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect()]:s=this.soundEffects;for(var l=0,w=s.length;l<w;l++)s[l].setRate(e);return this}};const vy=Phaser.Utils.Array.Remove,iu=Phaser.Utils.Objects.GetValue;var JO={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.sound.add(e,{mute:iu(t,"mute",this.soundEffects2Mute),volume:iu(t,"volume",this.soundEffects2Volume),detune:iu(t,"detune",0),rate:iu(t,"rate",1)});return this.soundEffects2.push(s),s.once("complete",function(){s.destroy(),this.sound&&vy(this.soundEffects2,s)},this).once("destroy",function(){this.sound&&vy(this.soundEffects2,s)},this).play(),this},stopAllSoundEffects2(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect2(e){var t=this.getLastSoundEffect2();return t&&tu(t,e,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(e,t){var s=this.getLastSoundEffect2();return s&&La(s,e,t),this},fadeOutAllSoundEffects2(e,t){for(var s=this.soundEffects2.length-1;s>=0;s--)La(this.soundEffects2[s],e,t);return this},setSoundEffect2Mute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var s=this.getLastSoundEffect2();s&&s.setMute(e)}else this.soundEffects2Mute=e;return this},setSoundEffect2Volume(e,t){if(t===void 0&&(t=!1),t){var s=this.getLastSoundEffect2();s&&s.setVolume(e)}else this.soundEffects2Volume=e;return this},setSoundEffect2Detune(e,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect2()]:s=this.soundEffects2;for(var l=0,w=s.length;l<w;l++)s[l].setDetune(e);return this},setSoundEffect2Rate(e,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect2()]:s=this.soundEffects2;for(var l=0,w=s.length;l<w;l++)s[l].setRate(e);return this}},my={hasAudio:BO};Object.assign(my,qO,KO,QO,JO);const us=Phaser.Utils.Objects.GetValue;class yy{constructor(t,s){this.sound=FO(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=us(s,"bgm.volume",1),this._backgroundMusicMute=us(s,"bgm.mute",!1),this.setBackgroundMusicLoop(us(s,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(us(s,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=us(s,"bgm2.volume",1),this._backgroundMusic2Mute=us(s,"bgm2.mute",!1),this.setBackgroundMusic2Loop(us(s,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(us(s,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=us(s,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=us(s,"soundEffect2.volume",1);var l=us(s,"bgm.initial",void 0);l&&this.setCurrentBackgroundMusic(l);var w=us(s,"bgm2.initial",void 0);w&&this.setCurrentBackgroundMusic2(w)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(var t=this.soundEffects2.length-1;t>=0;t--)this.soundEffects2[t].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicMute(){return this._backgroundMusicMute}set backgroundMusicMute(t){this._backgroundMusicMute=t,this.backgroundMusic&&this.backgroundMusic.setMute(mute)}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get backgroundMusic2Mute(){return this._backgroundMusic2Mute}set backgroundMusic2Mute(t){this._backgroundMusic2Mute=t,this.backgroundMusic2&&this.backgroundMusic2.setMute(mute)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(t){this._backgroundMusic2Volume=t,this.backgroundMusic2&&this.backgroundMusic2.setVolume(t)}get soundEffectsMute(){return this._soundEffectsMute}set soundEffectsMute(t){this._soundEffectsMute=t;for(var s=this.soundEffects,l=0,w=s.length;l<w;l++)s[l].setMute(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var s=this.soundEffects,l=0,w=s.length;l<w;l++)s[l].setVolume(t)}get soundEffects2Mute(){return this._soundEffects2Mute}set soundEffects2Mute(t){this._soundEffects2Mute=t;for(var s=this.soundEffects,l=0,w=soundEffects2.length;l<w;l++)s[l].setMute(t)}get soundEffects2Volume(){return this._soundEffects2Volume}set soundEffects2Volume(t){this._soundEffects2Volume=t;for(var s=this.soundEffects2,l=0,w=s.length;l<w;l++)s[l].setVolume(t)}}Object.assign(yy.prototype,my);const Tp=Phaser.Utils.Objects.GetValue;class ZO extends Jl{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.isRunning=Tp(t,"isRunning",!1),this.timeScale=Tp(t,"timeScale",1),this.now=Tp(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class xy extends ZO{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,s){return!this.isRunning||this.timeScale===0?this:(this.tick(s),this)}}var ye=function(e,t){return t===void 0&&(t=.5),e<=t?e=e/t:e=1-(e-t)/(1-t),e};const by=Phaser.Math.Clamp;class tE{constructor(t,s){this.setTimeline(t).reset(s)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,s,l,w){return this.target=t,this.onStart=s,this.onProgress=l,this.onComplete=w,this}setDuration(t,s){return s===void 0&&(s=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=s,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=by(t,0,1),this.yoyo&&(t=ye(t)),t}setProgress(t){t=by(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){t&&t(this.target,this.t,this)}update(t,s){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=s,this.t=this.getProgress(),this.runCallback(this.onProgress);var l=this.remainder<=0;return l&&this.runCallback(this.onComplete),l}}let eE=class extends bt{allocate(){return this.pop()}free(e){e.onFree(),this.push(e)}freeMultiple(e){for(var t=0,s=e.length;t<s;t++)this.free(e[t]);return this}};const iE=Phaser.Utils.Objects.GetValue,sE=new eE;class rE extends xy{constructor(t,s){super(t,s),this.addedTimers=[],this.timers=[],this.timerPool=iE(s,"pool",sE)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var s=this.timerPool.allocate();return s?s.setTimeline(this).reset(t):s=new tE(this,t),this.addedTimers.push(s),s.runCallback(s.onStart),this.isRunning||this.start(),s}delayCall(t,s,l,w){var S=this.addTimer({duration:t,onComplete:function(k,D,V){l===void 0&&(l=[]),l.push(V),s.apply(w,l)}});return S}delayEvent(t,s){this.removeDelayEvent(s);var l=this.delayCall(t,function(){this.removeDelayEvent(s),this.emit(s)},[],this);return this.once(`_remove.${s}`,function(){l.remove(),l=void 0}),this}removeDelayEvent(t){return this.emit(`_remove.${t}`),this}getTimers(t){for(var s=[],l=[this.addedTimers,this.timers],w=0,S=l.length;w<S;w++)for(var k=l[w],D=0,V=k.length;D<V;D++){var G=k[D];G.name===t&&s.push(G)}return s}update(t,s){if(super.update(t,s),!!this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var l=[],w=0,S=this.timers.length;w<S;w++){var k=this.timers[w],D=k.update(this.now,this.delta);D?this.timerPool.free(k):l.push(k)}this.timers=l,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}}const nE="_wait.complete",aE="_remove.wait";var oE=function(e,t,s,l,w){var S=Da(e),k=S.time.delayedCall(t,function(){S.sys.events.once("preupdate",function(){s.call(l,w)})});return k};let wy=class{constructor(e){e||(this.setEventEmitter(!0),e=this),this.parent=e,this.waitId=0,this.waitCompleteEventName=nE,this.removeWaitEventsEventName=aE}destroy(){this.removeWaitEvents(),this.clearWaitCompleteCallbacks(),this.parent=null}waitEvent(e,t,s){var l=this.getWaitCompleteTriggerCallback(s);return e.once(t,l,this),this.parent.once(this.removeWaitEventsEventName,function(){e.off(t,l,this)}),this.parent}getWaitCompleteTriggerCallback(e){e===void 0&&(e=!0);var t=this.waitId,s=this,l=function(){t<s.waitId||(s.waitId++,s.removeWaitEvents(),s.parent.emit(s.waitCompleteEventName))};if(e){var w=function(){oE(s.parent,0,l)};return w}else return l}removeWaitEvents(){return this.parent.emit(this.removeWaitEventsEventName),this}addWaitCompleteCallback(e,t){return this.parent.on(this.waitCompleteEventName,e,t),this}clearWaitCompleteCallbacks(){return this.parent.off(this.waitCompleteEventName),this}};Object.assign(wy.prototype,Wo);var hE={waitTime(e){var t=this.parent.timeline;return t.delayEvent(e,"delay"),this.parent.once(this.removeWaitEventsEventName,function(){t.removeDelayEvent("delay")}),this.waitEvent(t,"delay")}},lE=function(e,t){var s=`(?<!\\\\)\\${t}`,l=`\\${t}`;return e.split(new RegExp(s,"g")).map(function(w){return w.replace(l,t)})},uE={setClickTarget(e){return this.clickTarget=e,e?M(e)?this.touchEE=e.input:this.touchEE=e.setInteractive():this.touchEE=null,this},clearClickTarget(){return this.setClickTarget(),this},setClickShortcutKeys(e){return this.clickShortcutKeys=e,this},clearClickShortcutKeys(){return this.setClickShortcutKeys(),this},waitClick(){var e=this.touchEE,t=this.clickShortcutKeys;return e||t?(e&&this.waitEvent(e,"pointerdown"),t&&this.waitKeyDown(t)):this.waitTime(0),this},waitKeyDown(e){var t=this.scene.input.keyboard;if(typeof e=="string"){if(e.indexOf("|")===-1)return this.waitEvent(t,`keydown-${e.toUpperCase()}`);for(var s=lE(e,"|"),l=0,w=s.length;l<w;l++)this.waitEvent(t,`keydown-${s[l].toUpperCase()}`);return this.parent}else return this.waitEvent(t,"keydown")}},cE={waitGameObjectTweenComplete(e,t,s){var l=this.parent.getGameObjectTweenTask(e,t,s);return l?this.waitEvent(l,"complete"):this.waitTime(0)},waitGameObjectDataFlag(e,t,s,l){var w=this.parent.getGameObject(e,t);if(!w)return this.waitTime(0);if(w.getData(s)===l)return this.waitTime(0);var S=`changedata-${s}`,k=function(D,V,G){V=!!V,V===l&&D.emit("_dataFlagMatch")};return w.on(S,k),this.parent.once(this.removeWaitEventsEventName,function(){w.off(S,k)}),this.waitEvent(w,"_dataFlagMatch")},waitGameObjectDestroy(e,t){var s=this.parent.getGameObject(e,t);return s?this.waitEvent(s,"destroy"):this.waitTime(0)},waitGameObjectManagerEmpty(e){if(e){var t=this.parent.getGameObjectManager(e);return t?this.waitEvent(t,"empty"):this.waitTime(0)}else{var s=this.parent.gameObjectManagers,l=!1;for(var w in s)l=!0,this.waitEvent(s[w],"empty");return l?this.parent:this.waitTime(0)}}},dE={setCameraTarget(e){return this.cameraTarget=e,this},clearCameraTarget(){return this.setCameraTarget(),this},waitCameraEffectComplete(e,t){var s;if(t?s=this.scene.cameras.getCamera(t):s=this.cameraTarget,!s)return this.waitTime(0);var l,w;switch(e){case"camera.fadein":l=s.fadeEffect,w="camerafadeincomplete";break;case"camera.fadeout":l=s.fadeEffect,w="camerafadeoutcomplete";break;case"camera.flash":l=s.flashEffect,w="cameraflashcomplete";break;case"camera.shake":l=s.shakeEffect,w="camerashakecomplete";break;case"camera.zoom":l=s.zoomEffect,w="camerazoomcomplete";break;case"camera.rotate":l=s.rotateToEffect,w="camerarotatecomplete";break;case"camera.scroll":l=s.panEffect,w="camerapancomplete";break}return l.isRunning?this.waitEvent(s,w):this.waitTime(0)}},pE={waitSoundEffectComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitSoundEffect2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect2();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusicComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusic2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic2();return e?this.waitEvent(e,"complete"):this.waitTime(0)}},fE=function(e){if(!e)return this.waitTime(0);var t=!1;for(var s in e)switch(s){case"time":t=!0,this.waitTime(e.time);break;case"click":t=!0,this.waitClick();break;case"key":t=!0,this.waitKeyDown(e.key);break;case"bgm":t=!0,this.waitBackgroundMusicComplete();break;case"bgm2":t=!0,this.waitBackgroundMusic2Complete();break;case"se":t=!0,this.waitSoundEffectComplete();break;case"se2":t=!0,this.waitSoundEffect2Complete();break;case"camera":t=!0,this.waitCameraEffectComplete(`camera.${e.camera.toLowerCase()}`,e.cameraName);break;default:var l=s.split(".");if(l.length===2){var w=l[0],S=l[1],k=this.parent.getGameObjectManager(void 0,w);if(!k)continue;if(S==="destroy")return this.waitGameObjectDestroy(void 0,w);var D=k.getProperty(w,S);if(typeof D=="number"){t=!0,this.waitGameObjectTweenComplete(void 0,w,S);continue}var V=S,G=V.startsWith("!");if(G&&(V=V.substring(1)),k.hasData(w,S)){t=!0,this.waitGameObjectDataFlag(void 0,w,V,!G);continue}this.waitEvent(gameObject,S);continue}else l.length;break}return t||this.waitTime(0),this.parent},Sy={waitAny:fE};Object.assign(Sy,hE,uE,cE,dE,pE);class Ty extends wy{constructor(t,s){super(t),this.waitCompleteEventName=Vt(s,"completeEventName",this.waitCompleteEventName),this.setClickTarget(Vt(s,"clickTarget",this.scene)),this.setClickShortcutKeys(Vt(s,"clickShortcutKeys",void 0)),this.setCameraTarget(Vt(s,"camera",this.scene.cameras.main))}get clickTarget(){return this.parent.clickTarget}set clickTarget(t){this.parent.clickTarget=t}get clickShortcutKeys(){return this.parent.clickShortcutKeys}set clickShortcutKeys(t){this.parent.clickShortcutKeys=t}get cameraTarget(){return this.parent.cameraTarget}set cameraTarget(t){this.parent.cameraTarget=t}destroy(){this.clearClickTarget(),this.clearClickShortcutKeys(),this.clearCameraTarget(),super.destroy()}get scene(){return this.parent.managersScene}}Object.assign(Ty.prototype,Sy);const su=Phaser.Utils.Objects.GetValue;var gE=function(e,t){this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=e,this.gameObjectManagers={};var s=su(t,"layers",!1);if(s!==!1){var l=new Ql(e,{name:"LAYER",layers:s,rootLayer:su(t,"rootLayer",void 0),depth:su(t,"layerDepth",void 0)});this.addGameObjectManager(l),this.layerManager=l}var w=su(t,"sounds");return w!==!1&&(this.soundManager=new yy(e,w)),this.timeline=new rE(this),this.waitEventManager=new Ty(this,t),this},vE=function(e){this.timeline.timeScale=e;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(e);return this},mE=function(){return this.timeline.timeScale},yE=function(e){this.waitEventManager.destroy(),this.waitEventManager=void 0,delete this.gameObjectManagers.layer;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(e),delete this.gameObjectManagers[t];this.layerManager&&(this.layerManager.destroy(e),this.layerManager=void 0),this.soundManager&&(this.soundManager.destroy(),this.soundManager=void 0),this.timeline&&(this.timeline.destroy(),this.timeline=void 0),this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=void 0},Cy={addGameObjectManager(e,t){var s;return e instanceof Ra?s=e:typeof e=="string"?(s=t,s.name=e):(e===void 0&&(e={}),t===void 0&&(t=Ra),e.createGameObjectScope||(e.createGameObjectScope=this),s=new t(this.managersScene,e)),this.gameObjectManagers[s.name]=s,this},getGameObjectManager(e,t){if(e){var s=this.gameObjectManagers[e];return s}else{t&&t.charAt(0)==="!"&&(t=t.substring(1));for(var e in this.gameObjectManagers){var s=this.gameObjectManagers[e];if(s.has(t))return s}}},getGameObjectManagerNames(){var e=[];for(var t in this.gameObjectManagers)e.push(t);return e},getGameObjectManagerName(e){var t=this.getGameObjectManager(void 0,e);if(t)return t.name},hasGameObjectMananger(e){return e in this.gameObjectManagers}},xE={createGameObject(e,t,...s){return this.getGameObjectManager(e,t).add(t,...s),this},destroyGameObject(e,t){var s=this.getGameObjectManager(e,t);return t===void 0?s.removeAll():s.remove(t),this},hasGameObject(e,t){return!!this.getGameObjectManager(e,t)},callGameObjectMethod(e,t,s,...l){return this.getGameObjectManager(e,t).call(t,s,...l),this},setGameObjectProperty(e,t,s,l){return this.getGameObjectManager(e,t).setProperty(t,s,l),this},easeGameObjectProperty(e,t,s){return this.getGameObjectManager(e,t).easeProperty(t,s),this},getGameObjectTweenTask(e,t,s){return this.getGameObjectManager(e,t).getTweenTask(t,s)},getGameObject(e,t,s){var l=this.getGameObjectManager(e,t);if(!l)return s;if(typeof t=="string")return l.getGO(t);s===void 0&&(s=[]);var w=t;w===void 0&&(w=Object.keys(l.bobs));for(var S=Array.isArray(s),k=0,D=w.length;k<D;k++){t=w[k];var V=l.getGO(t);V&&(S?s.push(V):s[t]=V)}return s},addGameObject(e,t,s){var l=this.getGameObjectManager(e,t);if(typeof t=="string")l.addGO(t,s);else{var w=t;for(t in w)l.addGO(t,w[t])}return this},drawGameObjectsBounds(e,t,s){e instanceof Phaser.GameObjects.Graphics&&(s=t,t=e,e=void 0),e===void 0&&(e=this.getGameObjectManagerNames()),Array.isArray(e)||(e=[e]);for(var l=0,w=e.length;l<w;l++)this.getGameObjectManager(e[l]).drawGameObjectsBounds(t,s);return this}},bE=function(e){class t extends e{}var s={initManagers:gE,setTimeScale:vE,getTimeScale:mE,destroyManagers:yE};return Object.assign(t.prototype,s,Cy,xE),t};function wE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Py={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,s="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(s=!1));function w(V,G,j){this.fn=V,this.context=G,this.once=j||!1}function S(V,G,j,tt,st){if(typeof j!="function")throw new TypeError("The listener must be a function");var rt=new w(j,tt||V,st),ot=s?s+G:G;return V._events[ot]?V._events[ot].fn?V._events[ot]=[V._events[ot],rt]:V._events[ot].push(rt):(V._events[ot]=rt,V._eventsCount++),V}function k(V,G){--V._eventsCount===0?V._events=new l:delete V._events[G]}function D(){this._events=new l,this._eventsCount=0}D.prototype.eventNames=function(){var V=[],G,j;if(this._eventsCount===0)return V;for(j in G=this._events)t.call(G,j)&&V.push(s?j.slice(1):j);return Object.getOwnPropertySymbols?V.concat(Object.getOwnPropertySymbols(G)):V},D.prototype.listeners=function(V){var G=s?s+V:V,j=this._events[G];if(!j)return[];if(j.fn)return[j.fn];for(var tt=0,st=j.length,rt=new Array(st);tt<st;tt++)rt[tt]=j[tt].fn;return rt},D.prototype.listenerCount=function(V){var G=s?s+V:V,j=this._events[G];return j?j.fn?1:j.length:0},D.prototype.emit=function(V,G,j,tt,st,rt){var ot=s?s+V:V;if(!this._events[ot])return!1;var ut=this._events[ot],ct=arguments.length,pt,mt;if(ut.fn){switch(ut.once&&this.removeListener(V,ut.fn,void 0,!0),ct){case 1:return ut.fn.call(ut.context),!0;case 2:return ut.fn.call(ut.context,G),!0;case 3:return ut.fn.call(ut.context,G,j),!0;case 4:return ut.fn.call(ut.context,G,j,tt),!0;case 5:return ut.fn.call(ut.context,G,j,tt,st),!0;case 6:return ut.fn.call(ut.context,G,j,tt,st,rt),!0}for(mt=1,pt=new Array(ct-1);mt<ct;mt++)pt[mt-1]=arguments[mt];ut.fn.apply(ut.context,pt)}else{var yt=ut.length,St;for(mt=0;mt<yt;mt++)switch(ut[mt].once&&this.removeListener(V,ut[mt].fn,void 0,!0),ct){case 1:ut[mt].fn.call(ut[mt].context);break;case 2:ut[mt].fn.call(ut[mt].context,G);break;case 3:ut[mt].fn.call(ut[mt].context,G,j);break;case 4:ut[mt].fn.call(ut[mt].context,G,j,tt);break;default:if(!pt)for(St=1,pt=new Array(ct-1);St<ct;St++)pt[St-1]=arguments[St];ut[mt].fn.apply(ut[mt].context,pt)}}return!0},D.prototype.on=function(V,G,j){return S(this,V,G,j,!1)},D.prototype.once=function(V,G,j){return S(this,V,G,j,!0)},D.prototype.removeListener=function(V,G,j,tt){var st=s?s+V:V;if(!this._events[st])return this;if(!G)return k(this,st),this;var rt=this._events[st];if(rt.fn)rt.fn===G&&(!tt||rt.once)&&(!j||rt.context===j)&&k(this,st);else{for(var ot=0,ut=[],ct=rt.length;ot<ct;ot++)(rt[ot].fn!==G||tt&&!rt[ot].once||j&&rt[ot].context!==j)&&ut.push(rt[ot]);ut.length?this._events[st]=ut.length===1?ut[0]:ut:k(this,st)}return this},D.prototype.removeAllListeners=function(V){var G;return V?(G=s?s+V:V,this._events[G]&&k(this,G)):(this._events=new l,this._eventsCount=0),this},D.prototype.off=D.prototype.removeListener,D.prototype.addListener=D.prototype.on,D.prefixed=s,D.EventEmitter=D,e.exports=D})(Py);var SE=Py.exports,TE=wE(SE);class My extends TE{shutdown(){this.removeAllListeners()}destroy(){this.removeAllListeners()}}var _y={setEventEmitter(e,t){return t===void 0&&(t=My),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},CE=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,PE=/^0x[0-9A-F]+$/i,Cp=function(e){if(typeof e!="string")return e;if(e==="")e=null;else if(CE.test(e))e=parseFloat(e);else if(PE.test(e))e=parseInt(e,16);else switch(e){case"false":e=!1;break;case"true":e=!0;break;case"null":e=null;break;case"undefined":e=void 0;break}return e};let ky=class{constructor(e){this.setEventEmitter(Vt(e,"eventEmitter",void 0)),this.setValueConverter(Vt(e,"valueConvert",!0)),this.setLoopEnable(Vt(e,"loop",!1)),this.setMultipleLinesTagEnable(Vt(e,"multipleLinesTag",!1));var t=Vt(e,"delimiters","<>");this.setDelimiters(t[0],t[1]),this.setTranslateTagNameCallback(Vt(e,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(e){return e===void 0&&(e=!0),this.multipleLinesTagEnable=e,this}setDelimiters(e,t){t===void 0&&(t=e[1],e=e[0]),this.delimiterLeft=e,this.delimiterRight=t,e=Ma(this.delimiterLeft),t=Ma(this.delimiterRight);var s=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${e}(.+?)${t}`,s),this}setTranslateTagNameCallback(e){return this.translateTagNameCallback=e,this}setValueConverter(e){return e===!0?e=Cp:e||(e=ME),this.valueConverter=e,this}setLoopEnable(e){return e===void 0&&(e=!0),this.loopEnable=e,this}setSource(e){return this.source=e,this}resetIndex(e){return e===void 0&&(e=0),this.progressIndex=e,this.reSplit.lastIndex=e,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(e){return this.setSource(e).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var e=this.source,t=e.length;for(this.reSplit.lastIndex=this.progressIndex;;){var s=this.reSplit.exec(e);if(!s){if(this.progressIndex<t&&(this.onContent(e.substring(this.progressIndex,t)),this.isPaused)){this.progressIndex=t;break}this.onComplete(),this.isRunning=!1;return}var l=this.reSplit.lastIndex,w=l-s[0].length;if(this.progressIndex<w&&(this.onContent(e.substring(this.progressIndex,w)),this.isPaused)){this.progressIndex=w;break}if(this.lastTagSource=s[0],this.onTag(s[1]),this.lastTagSource=void 0,this.progressIndex=l,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(e,t){return this.isPaused?this:(this.pause(),e.once(t,function(){this.next()},this),this)}onContent(e){this.skipEventFlag=!1,this.emit("content",e),this.lastContent=e}onTag(e){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}};const ME=function(e){return e};Object.assign(ky.prototype,_y);var _E=function(e,t,s){if(e==null)return[];t===void 0&&(t=Cp),s===void 0&&(s=",");for(var l=e.split(s),w=0,S=l.length;w<S;w++)l[w]=t(l[w]);return l};class kE extends ky{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(Vt(t,"regex.tag",void 0)),this.setValueExpression(Vt(t,"regex.value",void 0));var s=Vt(t,"delimiters","<>");this.setDelimiters(s[0],s[1])}setTagExpression(t){return t||(t=ru),this.tagExpression=t,this}setValueExpression(t){return t||(t=ru),this.valueExpression=t,this}setDelimiters(t,s){super.setDelimiters(t,s);var l=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(l,"i"),this.tagExpression!==ru||this.valueExpression!==ru){var w=`${this.tagExpression}(=${this.valueExpression})?`,S=`/${this.tagExpression}`;t=Ma(this.delimiterLeft),s=Ma(this.delimiterRight);var k=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${w})|(${S}))${s}`,k)}return this}onTag(t){var s=t.match(this.reTag),l=s[1],w=l.charAt(0)==="/";if(w&&(l=l.substring(1,l.length)),this.translateTagNameCallback&&(l=this.translateTagNameCallback(l)),this.skipEventFlag=!1,w)this.emit(`-${l}`),this.skipEventFlag||this.emit("-",l),this.lastTagEnd=l;else{var S=_E(s[3],this.valueConverter);this.emit(`+${l}`,...S),this.skipEventFlag||this.emit("+",l,...S),this.lastTagStart=l}}}const ru="[^=]+";var OE=function(e,t,s){var l="color",w;t.on("start",function(){w=e.textStyle.color}).on(`+${l}`,function(S){e.textStyle.setColor(S),t.skipEvent()}).on(`-${l}`,function(){e.textStyle.setColor(w),t.skipEvent()}).on("complete",function(){e.textStyle.setColor(w)})},EE=function(e,t,s){var l="stroke",w;t.on("start",function(){w=e.textStyle.stroke,e.textStyle.setStrokeStyle(null)}).on(`+${l}`,function(S){S===void 0&&(S=w),e.textStyle.setStrokeStyle(S),t.skipEvent()}).on(`-${l}`,function(){e.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){e.textStyle.setStrokeStyle(w)})},AE=function(e,t,s){var l="b";t.on("start",function(){e.textStyle.setBold(!1)}).on(`+${l}`,function(){e.textStyle.setBold(!0),t.skipEvent()}).on(`-${l}`,function(){e.textStyle.setBold(!1),t.skipEvent()})},RE=function(e,t,s){var l="i";t.on("start",function(){e.textStyle.setItalic(!1)}).on(`+${l}`,function(){e.textStyle.setItalic(!0),t.skipEvent()}).on(`-${l}`,function(){e.textStyle.setItalic(!1),t.skipEvent()})},DE=function(e,t,s){var l="size",w;t.on("start",function(){w=e.textStyle.fontSize}).on(`+${l}`,function(S){e.textStyle.setFontSize(S),t.skipEvent()}).on(`-${l}`,function(){e.textStyle.setFontSize(w),t.skipEvent()}).on("complete",function(){e.textStyle.setFontSize(w)})},IE=function(e,t,s){var l="y",w;t.on("start",function(){w=e.textStyle.offsetY,e.textStyle.setOffsetY(0)}).on(`+${l}`,function(S){S===void 0&&(S=w),e.textStyle.setOffsetY(S),t.skipEvent()}).on(`-${l}`,function(){e.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetY(0)})},LE=function(e,t,s){var l="x",w;t.on("start",function(){w=e.textStyle.offsetY,e.textStyle.setOffsetX(0)}).on(`+${l}`,function(S){S===void 0&&(S=w),e.textStyle.setOffsetX(S),t.skipEvent()}).on(`-${l}`,function(){e.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetX(0)})},FE=function(e,t,s){var l="left",w;t.on("start",function(){w=e.textStyle.leftSpace,e.textStyle.setLeftSpace(0)}).on(`+${l}`,function(S){S===void 0&&(S=w),e.textStyle.setLeftSpace(S),t.skipEvent()}).on(`-${l}`,function(){e.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setLeftSpace(0)})},BE=function(e,t,s){var l="right",w;t.on("start",function(){w=e.textStyle.rightSpace,e.textStyle.setRightSpace(0)}).on(`+${l}`,function(S){S===void 0&&(S=w),e.textStyle.setRightSpace(S),t.skipEvent()}).on(`-${l}`,function(){e.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setRightSpace(0)})},NE=function(e,t,s){var l="shadow",w;t.on("start",function(){w=e.textStyle.shadowColor,e.textStyle.setShadowColor(null)}).on(`+${l}`,function(S){S===void 0&&(S=w),e.textStyle.setShadowColor(S),t.skipEvent()}).on(`-${l}`,function(){e.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){e.textStyle.setShadowColor(w)})},YE=function(e,t,s){var l="align";t.on(`+${l}`,function(w){e.textStyle.setAlign(w),t.skipEvent()}).on(`-${l}`,function(){e.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){e.textStyle.setAlign()})},VE=function(e,t,s){var l="img";t.on(`+${l}`,function(w){var S=e.imageManager.get(w);S&&N0.call(e,S.key,S.frame,{width:S.width,hieght:S.height,leftSpace:S.left,rightSpace:S.right,color:S.tintFill?e.textStyle.color:void 0}),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})},zE=function(e,t,s){var l="space";t.on(`+${l}`,function(w){Y0.call(e,w),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})},GE=function(e,t,s){var l="speed";t.on(`+${l}`,function(w){Oy(e,w),t.skipEvent()}).on(`-${l}`,function(){Oy(e,void 0),t.skipEvent()})},UE=function(e){this.typeWriter.setTypingSpeed(e)},Oy=function(e,t){Nt.call(e,"speed",UE,t,e)},WE=function(e,t,s){var l="se";t.on(`+${l}`,function(w,S){Nt.call(e,l,XE,[w,S],e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="se2";t.on(`+${l}`,function(w,S){Nt.call(e,l,jE,[w,S],e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})},XE=function(e){if(!this.skipSoundEffect){var t=e[0],s=e[1];this.soundManager.playSoundEffect(t),s&&this.soundManager.fadeInSoundEffect(s)}},jE=function(e){if(!this.skipSoundEffect){var t=e[0],s=e[1];this.soundManager.playSoundEffect2(t),s&&this.soundManager.fadeInSoundEffect2(s)}},HE=function(e,t,s){var l="se.fadein";t.on(`+${l}`,function(w){Nt.call(e,l,$E,w,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="se2.fadein";t.on(`+${l}`,function(w){Nt.call(e,l,qE,w,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})},$E=function(e){this.soundManager.fadeInSoundEffect(e)},qE=function(e){this.soundManager.fadeInSoundEffect2(e)},KE=function(e,t,s){var l="se.fadeout";t.on(`+${l}`,function(w,S){S=S==="stop",Nt.call(e,l,QE,[w,S],e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="se2.fadeout";t.on(`+${l}`,function(w,S){S=S==="stop",Nt.call(e,l,JE,[w,S],e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})},QE=function(e){this.soundManager.fadeOutSoundEffect(...e)},JE=function(e){this.soundManager.fadeOutSoundEffect2(...e)},ZE=function(e,t,s){var l="se.volume";t.on(`+${l}`,function(w){Nt.call(e,l,tA,w,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="se2.volume";t.on(`+${l}`,function(w){Nt.call(e,l,eA,w,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})},tA=function(e){this.soundManager.setSoundEffectVolume(e,!0)},eA=function(e){this.soundManager.setSoundEffectVolume2(e,!0)},iA=function(e,t,s){var l="se.mute";t.on(`+${l}`,function(){Nt.call(e,l,sA,void 0,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="se2.mute";t.on(`+${l}`,function(){Nt.call(e,l,rA,void 0,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="se.unmute";t.on(`+${l}`,function(){Nt.call(e,l,nA,void 0,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="se2.unmute";t.on(`+${l}`,function(){Nt.call(e,l,aA,void 0,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})},sA=function(){this.soundManager.setSoundEffectMute(!0)},rA=function(){this.soundManager.setSoundEffect2Mute(!0)},nA=function(){this.soundManager.setSoundEffectMute(!1)},aA=function(){this.soundManager.setSoundEffect2Mute(!1)},oA=function(e,t,s){var l="bgm";t.on(`+${l}`,function(w,S){Nt.call(e,l,hA,[w,S],e),t.skipEvent()}).on(`-${l}`,function(){Nt.call(e,"bgm.stop",lA,void 0,e),t.skipEvent()});var l="bgm2";t.on(`+${l}`,function(w,S){Nt.call(e,l,uA,[w,S],e),t.skipEvent()}).on(`-${l}`,function(){Nt.call(e,"bgm2.stop",cA,void 0,e),t.skipEvent()})},hA=function(e){var t=e[0],s=e[1];this.soundManager.playBackgroundMusic(t),s&&this.soundManager.fadeInBackgroundMusic(s)},lA=function(){this.soundManager.stopBackgroundMusic()},uA=function(e){var t=e[0],s=e[1];this.soundManager.playBackgroundMusic2(t),s&&this.soundManager.fadeInBackgroundMusic2(s)},cA=function(){this.soundManager.stopBackgroundMusic2()},dA=function(e,t,s){var l="bgm.fadein";t.on(`+${l}`,function(w){Nt.call(e,l,pA,w,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="bgm2.fadein";t.on(`+${l}`,function(w){Nt.call(e,l,fA,w,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})},pA=function(e){this.soundManager.fadeInBackgroundMusic(e)},fA=function(e){this.soundManager.fadeInBackgroundMusic2(e)},gA=function(e,t,s){var l="bgm.fadeout";t.on(`+${l}`,function(w,S){S=S==="stop",Nt.call(e,l,vA,[w,S],e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="bgm2.fadeout";t.on(`+${l}`,function(w,S){S=S==="stop",Nt.call(e,l,mA,[w,S],e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})},vA=function(e){this.soundManager.fadeOutBackgroundMusic(...e)},mA=function(e){this.soundManager.fadeOutBackgroundMusic2(...e)},yA=function(e,t,s){var l="bgm.cross";t.on(`+${l}`,function(w,S){Nt.call(e,l,xA,[w,S],e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="bgm2.cross";t.on(`+${l}`,function(w,S){Nt.call(e,l,bA,[w,S],e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})},xA=function(e){this.soundManager.crossFadeBackgroundMusic(...e)},bA=function(e){this.soundManager.crossFadeBackgroundMusic2(...e)},wA=function(e,t,s){var l="bgm.pause";t.on(`+${l}`,function(){Nt.call(e,l,SA,void 0,e),t.skipEvent()}).on(`-${l}`,function(){Nt.call(e,"bgm.resume",TA,void 0,e),t.skipEvent()});var l="bgm2.pause";t.on(`+${l}`,function(){Nt.call(e,l,CA,void 0,e),t.skipEvent()}).on(`-${l}`,function(){Nt.call(e,"bgm2.resume",PA,void 0,e),t.skipEvent()})},SA=function(){this.soundManager.pauseBackgroundMusic()},TA=function(){this.soundManager.resumeBackgroundMusic()},CA=function(){this.soundManager.pauseBackgroundMusic2()},PA=function(){this.soundManager.resumeBackgroundMusic2()},MA=function(e,t,s){var l="bgm.volume";t.on(`+${l}`,function(w){Nt.call(e,l,_A,w,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="bgm2.volume";t.on(`+${l}`,function(w){Nt.call(e,l,kA,w,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})},_A=function(e){this.soundManager.setBackgroundMusicVolume(e)},kA=function(e){this.soundManager.setBackgroundMusicVolume2(e)},OA=function(e,t,s){var l="bgm.mute";t.on(`+${l}`,function(){Nt.call(e,l,EA,void 0,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="bgm2.mute";t.on(`+${l}`,function(){Nt.call(e,l,AA,void 0,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="bgm.unmute";t.on(`+${l}`,function(){Nt.call(e,l,RA,void 0,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()});var l="bgm2.unmute";t.on(`+${l}`,function(){Nt.call(e,l,DA,void 0,e),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})},EA=function(){this.soundManager.setBackgroundMusicMute(!0)},AA=function(){this.soundManager.setBackgroundMusic2Mute(!0)},RA=function(){this.soundManager.setBackgroundMusicMute(!1)},DA=function(){this.soundManager.setBackgroundMusic2Mute(!1)},IA=function(e,t,s){var l="camera.fadein";t.on(`+${l}`,function(w,S,k,D){Nt.call(e,l,LA,[w,S,k,D],e),t.skipEvent()})},LA=function(e){this.cameraTarget.fadeIn(...e)},FA=function(e,t,s){var l="camera.fadeout";t.on(`+${l}`,function(w,S,k,D){Nt.call(e,l,BA,[w,S,k,D],e),t.skipEvent()})},BA=function(e){this.cameraTarget.fadeOut(...e)},NA=function(e,t,s){var l="camera.shake";t.on(`+${l}`,function(w,S){Nt.call(e,l,YA,[w,S],e),t.skipEvent()})},YA=function(e){this.cameraTarget.shake(...e)},VA=function(e,t,s){var l="camera.flash";t.on(`+${l}`,function(w,S,k,D){Nt.call(e,l,zA,[w,S,k,D],e),t.skipEvent()})},zA=function(e){this.cameraTarget.flash(...e)},GA=function(e,t,s){var l="camera.zoom";t.on(`+${l}`,function(w){Nt.call(e,l,UA,w,e),t.skipEvent()}).on(`+${l}.to`,function(w,S,k){Nt.call(e,"camera.zoom.to",WA,[w,S,k],e),t.skipEvent()})},UA=function(e){this.cameraTarget.setZoom(e)},WA=function(e){this.cameraTarget.zoomTo(...e)};const Ey=Phaser.Math.DegToRad;var XA=function(e,t,s){var l="camera.rotate";t.on(`+${l}`,function(w){w=Ey(w),Nt.call(e,l,jA,w,e),t.skipEvent()}).on(`+${l}.to`,function(w,S,k){w=Ey(w),Nt.call(e,"camera.rotate.to",HA,[w,S,k],e),t.skipEvent()})},jA=function(e){this.cameraTarget.setRotation(e)},HA=function(e){var t=e[0],s=e[1],l=e[2];this.cameraTarget.rotateTo(t,!1,s,l)},$A=function(e,t,s){var l="camera.scroll";t.on(`+${l}`,function(w,S){Nt.call(e,l,qA,[w,S],e),t.skipEvent()}).on(`+${l}.to`,function(w,S,k,D){Nt.call(e,"camera.scroll.to",KA,[w,S,k,D],e),t.skipEvent()})},qA=function(e){this.cameraTarget.setScroll(...e)},KA=function(e){var t=e[0],s=e[1],l=e[2],w=e[3],S=this.cameraTarget,k=S.scrollX,D=S.scrollY;S.setScroll(t,s),t+=S.centerX,s+=S.centerY,S.setScroll(k,D),S.pan(t,s,l,w)},QA=function(e,t,s){var l="wait",w="click";t.on(`+${l}`,function(S){Ay(e,S),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()}).on(`+${w}`,function(){Ay(e,"click"),t.skipEvent()}).on(`-${w}`,function(){t.skipEvent()})},JA=function(e){this.typeWriter.wait(e)},Ay=function(e,t){Nt.call(e,"wait",JA,t,e)},ZA=function(e,t,s){var l="r";t.on(`+${l}`,function(){Uo.call(e,`
`),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})},tR=function(e,t,s){for(var l=["pagebreak","pb"],w=0,S=l.length;w<S;w++){var k=l[w];t.on(`+${k}`,function(){Uo.call(e,"\f"),t.skipEvent()}).on(`-${k}`,function(){t.skipEvent()})}},eR=function(e,t,s){var l="content.off";t.on(`+${l}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},iR=function(e,t,s){var l="content.on";t.on(`+${l}`,function(){t.setContentOutputEnable(),t.skipEvent()})},sR=function(e,t,s){t.on("content",function(l){if(t.contentOutputEnable)Uo.call(e,l);else{var w=`+${t.lastTagStart}`;e.emit(`parser.${w}#content`,t,l)}})},rR=function(e,t,s){t.on("start",function(){e.emit("parser.start",t)}).on("+",function(l,...w){if(!t.skipEventFlag){var S=`+${l}`,k=w;e.emit(`parser.${S}`,t,...w,k),Ry(e,S,k)}}).on("-",function(l){if(!t.skipEventFlag){var w=`-${l}`,S=[];e.emit(`parser.${w}`,t,S),Ry(e,w,S)}}).on("complete",function(){e.emit("parser.complete",t)})},nR=function(e,t){var s=`tag.${t}`;e==null?this.emit(s):this.emit(s,...e)},Ry=function(e,t,s){Nt.call(e,t,nR,s,e)};const Dy=[OE,EE,AE,RE,DE,NE,YE,IE,LE,FE,BE,VE,zE,GE,WE,HE,KE,ZE,iA,oA,dA,gA,yA,wA,MA,OA,IA,FA,NA,VA,GA,XA,$A,QA,ZA,tR,eR,iR,sR,rR];var aR=function(e,t,s){for(var l=0,w=Dy.length;l<w;l++)Dy[l](e,t,s)},oR=function(e,t){for(var s=e.commentLineStart,l=t.split(`
`),w=0,S=l.length;w<S;w++){var k=l[w];k===""||(k.trim().length===0||s&&k.startsWith(s))&&(l[w]="")}return l.join("")};const hR=Phaser.Utils.Objects.GetValue;class lR extends kE{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("delimiters")||(s.delimiters="[]"),super(s),aR(t,this,s),this.setCommentLineStartSymbol(hR(s,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(oR(this,t)),this}}var uR={setDefaultTypingSpeed(e){return this.defaultSpeed=e,this},setTypingSpeed(e){return e===void 0&&(e=this.defaultSpeed),this.speed=e,this}};const Gn="page.fadeout",Pp="_remove.play",Iy=[Gn,Pp];var cR=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(Gn),this;var e=this.children.filter(function(l){return l.renderable}),t=this.fadeOutPageCallback(e,this.fadeOutPageDuration);if(!t)this.emit(Gn);else if(t.once)t.once("complete",function(){this.emit(Gn)},this);else if(t.then){var s=this;t.then(function(){s.emit(Gn)})}else this.emit(Gn);return this},nu=function(e,t){return new Promise(function(s,l){e.once(t,function(){s()})})},vi=function(e){return nu(e,"complete")},dR=function(e){return this.children=e,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(e),this.typing(),vi(this)};const pR="delay",Ly="anim";var Fy=function(e){e===void 0&&(e=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var s=this.getNextChild();if(!s){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(s.renderable){var l=this.animationConfig;if(l.duration>0){var w=this.timeline.addTimer({name:Ly,target:s,duration:l.duration,yoyo:l.yoyo,onStart:l.onStart,onProgress:l.onProgress,onComplete:l.onComplete});this.skipTypingAnimation&&w.seek(1)}else l.onStart&&l.onStart(s,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",s);var S=this.nextChild;if(S&&!(this.skipSpaceEnable&&s2(S))&&(t+=this.speed+e,e=0,t>0)){this.typingTimer=this.timeline.addTimer({name:pR,target:this,duration:t,onComplete:function(k,D,V){k.typingTimer=void 0,Fy.call(k,V.remainder)}});break}}else r2(s)&&s.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},fR=function(){return this.timeline.pause(),this},gR=function(){return this.timeline.resume(),this},vR=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},mR=function(e){return this.isTypingPaused?(e===void 0&&(e=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=e):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(e)),this):this},yR=function(e){switch(e){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},xR=function(e,t){var s=t.split(".");return e.gameObjectManagers.hasOwnProperty(s[0])},bR=function(e,t,s,l){var w=e.waitEventManager,S=t.split("."),k=S[0],D=e.getGameObjectManager(k),V=`wait.${k}`;switch(S.length){case 1:w.waitGameObjectManagerEmpty(k),e.emit(V);return;case 2:var G=S[1];w.waitGameObjectDestroy(k,G),e.emit(V,G);return;case 3:var G=S[1],j=S[2],tt=D.getProperty(G,j);if(typeof tt=="number"){w.waitGameObjectTweenComplete(k,G,j),e.emit(V,G,j);return}var st=j,rt=st.startsWith("!");if(rt&&(st=st.substring(1)),D.hasData(G,st)){w.waitGameObjectDataFlag(k,G,st,!rt),e.emit(V,G,st);return}else{w.waitTime(0);return}}};const wR=Phaser.Input.Keyboard.KeyCodes;var By=function(e,t,s,l){var w=e.waitEventManager;w.clearWaitCompleteCallbacks().addWaitCompleteCallback(s,l),typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var S=0,k=t.length;S<k;S++){var D=t[S];if(D==null||D==="wait"){var V=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit("wait",V)}else if(typeof D=="number"||!isNaN(D)){var G=parseFloat(D);w.waitTime(G),e.emit("wait.time",G)}else if(D==="click")w.waitClick(),e.emit("wait.click");else if(D==="se"){w.waitSoundEffectComplete();var j=e.soundManager.getLastSoundEffect();e.emit("wait.music",j)}else if(D==="se2"){w.waitSoundEffect2Complete();var j=e.soundManager.getLastSoundEffect2();e.emit("wait.music",j)}else if(D==="bgm"){w.waitBackgroundMusicComplete();var j=e.soundManager.getBackgroundMusic();e.emit("wait.music",j)}else if(D==="bgm2"){w.waitBackgroundMusic2Complete();var j=e.soundManager.getBackgroundMusic2();e.emit("wait.music",j)}else if(wR.hasOwnProperty(D.toUpperCase()))w.waitKeyDown(D),e.emit("wait.keydown",D);else if(yR(D))w.waitCameraEffectComplete(D),e.emit("wait.camera",D);else if(xR(e,D))bR(e,D);else{var V=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit(`wait.${D}`,V)}}},SR=function(e){return this.ignoreWait?this:(this.pauseTyping(),By(this.textPlayer,e,this.resumeTyping,this),this)},TR=function(e){return e===void 0&&(e=!0),this.ignoreWait=e,this},CR=function(e){return e===void 0&&(e=!0),this.skipSpaceEnable=e,this},PR=function(e){if(e===void 0&&(e=!0),this.skipTypingAnimation=e,e)for(var t=this.timeline.getTimers(Ly),s=0,l=t.length;s<l;s++)t[s].seek(1);return this},MR=function(e){if(e===void 0&&(e=!0),this.skipSoundEffect=e,e){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},_R=function(){return this.typingTimer&&this.typingTimer.seek(1),this},Ny={fadeOutPage:cR,start:dR,typing:Fy,pause:fR,resume:gR,pauseTyping:vR,resumeTyping:mR,wait:SR,setIgnoreWait:TR,setSkipSpaceEnable:CR,setSkipTypingAnimation:PR,setSkipSoundEffect:MR,skipCurrentTypingDelay:_R};Object.assign(Ny,uR);const Fa=Phaser.Utils.Objects.GetValue;class Yy{constructor(t,s){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(Fa(s,"onTypingStart",OR)),this.setDefaultTypingSpeed(Fa(s,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(Fa(s,"skipSpace",!1)),this.setAnimationConfig(Fa(s,"animation",void 0)),this.setMinSizeEnable(Fa(s,"minSizeEnable",!1)),this.setFadeOutPageCallback(Fa(s,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=kR),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var kR=function(e){e.setVisible&&e.setVisible()},OR=function(e){for(var t=0,s=e.length;t<s;t++){var l=e[t];l.setVisible&&l.setVisible(!1)}};Object.assign(Yy.prototype,Wo,Ny);class ER extends vp{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}var AR={playAnimation(e,t){return this.has(e)||this.add(e),this.get(e).playAnimation(t),this},stopAnimation(e){return this.has(e)?(this.get(e).stopAnimation(),this):this},chainAnimation(e,t){return this.has(e)?(this.get(e).chainAnimation(t),this):this},pauseAnimation(e){return this.has(e)?(this.get(e).pauseAnimation(),this):this}},Vy={};Object.assign(Vy,AR);var zy=function(e){return!e||e==="sprite"?e=RR:e==="image"&&(e=DR),e},RR=function(e,t,s){return typeof s!="string"&&typeof s!="number"&&(s=void 0),e.add.sprite(0,0,t,s)},DR=function(e,t,s){return typeof s!="string"&&typeof s!="number"&&(s=void 0),e.add.image(0,0,t,s)};class Gy extends Ra{constructor(t,s){s===void 0&&(s={}),s.BobClass=ER,super(t,s)}setCreateGameObjectCallback(t,s){return t=zy(t),super.setCreateGameObjectCallback(t,s),this}}Object.assign(Gy.prototype,Vy);var Uy=function(e,t){return e.length===3&&e[0]===t&&e[2]==="play"},IR=function(e,t){return e.length===3&&e[0]===t&&e[2]==="stop"},LR=function(e,t,s){var l=s.name;t.on("+",function(w,...S){if(!t.skipEventFlag){var k=w.split("."),D;if(Uy(k,l))D=k[1];else return;Nt.call(e,`${l}.play`,FR,[l,D,S],e),t.skipEvent()}}).on("+",function(w){if(!t.skipEventFlag){var S=w.split("."),k;if(IR(S,l))k=S[1];else return;Nt.call(e,`${l}.stop`,Wy,[l,k],e),t.skipEvent()}}).on("-",function(w){if(!t.skipEventFlag){var S=w.split("."),k;if(Uy(S,l))k=S[1];else return;Nt.call(e,`${l}.stop`,Wy,[l,k],e),t.skipEvent()}})},FR=function(e){var t,s,l;[t,s,l]=e;var w=l.shift(),S=this.getGameObjectManager(t);S.playAnimation(s,w),l.length>0&&S.chainAnimation(s,l)},Wy=function(e){var t,s;[t,...s]=e;var l=this.getGameObjectManager(t);l.stopAnimation(...s)},BR=function(e,t){return e.length===3&&e[0]===t&&e[2]==="pause"},NR=function(e,t,s){var l=s.name;t.on("+",function(w){if(!t.skipEventFlag){var S=w.split("."),k;if(BR(S,l))k=S[1];else return;Nt.call(e,`${l}.pause`,YR,[l,k],e),t.skipEvent()}})},YR=function(e){var t,s;[t,...s]=e;var l=this.getGameObjectManager(t);l.pauseAnimation(...s)},VR=function(e,t){return e.length===3&&e[0]===t&&e[2]==="chain"},zR=function(e,t,s){var l=s.name;t.on("+",function(w){if(!t.skipEventFlag){var S=w.split("."),k;if(VR(S,l))k=S[1];else return;var D=Array.prototype.slice.call(arguments,1);Nt.call(e,`${l}.chain`,GR,[l,k,D],e),t.skipEvent()}})},GR=function(e){var t,s;[t,...s]=e;var l=this.getGameObjectManager(t);l.chainAnimation(...s)};const UR=[LR,NR,zR];var WR=function(e){e===void 0&&(e={}),e.name="sprite",e.parseCallbacks=UR,e.createGameObject=zy(e.createGameObject),this.addGameObjectManager(e,Gy)},Xy=function(e,t){return e.length===2&&e[0]===t},XR=function(e,t,s){var l=s.name;t.on("+",function(w,...S){if(!t.skipEventFlag){var k=w.split("."),D;if(Xy(k,l))D=k[1];else return;Nt.call(e,`${l}.add`,jR,[l,D,...S],e),t.skipEvent()}}).on("-",function(w){if(!t.skipEventFlag){var S=w.split("."),k;if(Xy(S,l))k=S[1];else return;Nt.call(e,`${l}.remove`,HR,[l,k],e),t.skipEvent()}})},jR=function(e){var t,s;[t,...s]=e;var l=this.getGameObjectManager(t);l.add(...s)},HR=function(e){var t,s;[t,...s]=e;var l=this.getGameObjectManager(t);l.remove(...s)},$R=function(e,t,s){var l=s.name;t.on("-",function(w){t.skipEventFlag||w===l&&(Nt.call(e,`${l}.removeall`,qR,l,e),t.skipEvent())})},qR=function(e){var t=this.getGameObjectManager(e);t.removeAll()},KR=function(e,t){return e.length===3&&e[0]===t},QR=function(e,t,s){var l=s.name;t.on("+",function(w,...S){if(!t.skipEventFlag){var k=w.split("."),D,V;if(KR(k,l))D=k[1],V=k[2];else return;Nt.call(e,`${l}.call`,JR,[l,D,V,...S],e),t.skipEvent()}})},JR=function(e){var t,s,l,w;[t,s,l,...w]=e;var S=`${t}.${l}`;if(this.emit(S,s,...w),!(this.listenerCount(S)>0)){var k=this.getGameObjectManager(t);k.hasMethod(s,l)?k.call(s,l,...w):k.setProperty(s,l,w[0])}},ZR={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},tD=function(e,t){return e.length===4&&e[0]===t&&ZR[e[3]]},eD=function(e,t,s){var l=s.name;e.getGameObjectManager(l),t.on("+",function(w,S,k,D,V){if(!t.skipEventFlag){var G=w.split("."),j,tt,st;if(tD(G,l))j=G[1],tt=G[2],st=G[3];else return;typeof D=="number"&&(V=D,D=void 0),Nt.call(e,`${l}.ease`,iD,[l,j,tt,S,k,D,V,st],e),t.skipEvent()}})},iD=function(e){var t,s,l,w,S,k,D,V;[t,s,l,w,S,k,D,V]=e;var G=this.getGameObjectManager(t),j=G.getProperty(s,l);if(typeof j=="number"){V.endsWith("Left")||V.endsWith("Up")?V.startsWith("to")||V.startsWith("yoyo")?w=j-w:V.startsWith("from")&&(G.setProperty(s,l,j-w),w=j):V.endsWith("Right")||V.endsWith("Down")?V.startsWith("to")||V.startsWith("yoyo")?w=j+w:V.startsWith("from")&&(G.setProperty(s,l,j+w),w=j):V==="from"&&(G.setProperty(s,l,w),w=j);var tt=V.startsWith("yoyo");G.easeProperty(s,{property:l,value:w,duration:S,ease:k,repeat:D,yoyo:tt})}};const jy=[XR,$R,QR,eD],sD=Cy.addGameObjectManager;var rD={addGameObjectManager(e,t){e=e?Ms(e):{};var s=e.name;s||console.warn("[TextPlayer] Parameter 'name' is required in addGameObjectManager(config) method");var l=e.defaultLayer,w=e.createGameObject,S=this.layerManager;e.createGameObject=function(G,...j){var tt=w.call(this,G,...j);return l&&S&&S.addToLayer(l,tt),tt},sD.call(this,e,t);var k=e.parseCallbacks;k?k=[...k,...jy]:k=jy;for(var D=0,V=k.length;D<V;D++)k[D](this,this.parser,e);return this}},nD=function(e){return this.waitEventManager.setClickTarget(e),this},aD=function(e){return this.waitEventManager.setCameraTarget(e),this},oD=function(e){var t=this;e?typeof e=="function"?this.nextPageInput=function(s,l){var w=t.waitEventManager;w.clearWaitCompleteCallbacks().addWaitCompleteCallback(s,l);var S=w.getWaitCompleteTriggerCallback();e.call(t,S)}:this.nextPageInput=function(s,l){By(t,e,s,l)}:this.nextPageInput=null},hD=function(e,t){return this.imageManager.add(e,t),this},lD={play(e){return this.isPlaying?this:(this.removeChildren(),this.parser.start(e),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(e){var t=vi(this);return this.play(e),t}},Mp=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once(Gn,uD,this).fadeOutPage(),this)},uD=function(){var e=this.runWrap(this.lastWrapResult);this.lastWrapResult=e,this.emit("page.start");var t=function(){this.emit(Pp),e.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?Mp.call(this):this.nextPageInput&&this.nextPageInput(Mp,this))};this.once(Pp,function(){this.typeWriter.off("complete",t,this)},this),this.typeWriter.once("complete",t,this).start(e.children)},cD={pauseTyping(){return this.typeWriter.pauseTyping(),this},pause(){return this.pauseTyping(),this.timeline.pause(),this}},dD={resumeTyping(e){return this.typeWriter.resumeTyping(e),this},resume(){return this.resumeTyping(),this.timeline.resume(),this}},pD=function(e){return this.typeWriter.wait(e),this},fD={setDefaultTypingSpeed(e){return this.defaultTypingSpeed=e,this},setTypingSpeed(e){return this.typingSpeed=e,this}},gD=function(e){return this.typeWriter.setIgnoreWait(e),this},vD=function(e){return e===void 0&&(e=!0),this.ignoreNextPageInput=e,this},mD=function(){if(!this.isPlaying||!this.isPageTyping)return this;var e=this.typeWriter.speed,t=this.typeWriter.ignoreWait,s=this.typeWriter.skipTypingAnimation,l=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(e).setIgnoreWait(t).setSkipTypingAnimation(s).setSkipSoundEffect(l)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},yD={getSprite(e){return this.getGameObject("sprite",e)},addSprite(e,t){return this.addGameObject("sprite",e,t),this}},xD={setContentOutputEnable(e){return this.parser.setContentOutputEnable(e),this},setContentCallback(e,t){return this.contentCallback=e,this.contentCallbackScope=t,this}},Hy={setClickTarget:nD,setCameraTarget:aD,setNextPageInput:oD,addImage:hD,typingNextPage:Mp,wait:pD,setIgnoreWait:gD,setIgnoreNextPageInput:vD,showPage:mD};Object.assign(Hy,rD,lD,cD,dD,fD,yD,xD);var bD=function(e){for(var t=0,s=Iy.length;t<s;t++)e.emit(Iy[t])};const $y=Phaser.Utils.Objects.IsPlainObject,Ba=Phaser.Utils.Objects.GetValue;class _p extends bE(ka){constructor(t,s,l,w,S,k){$y(s)?k=s:$y(w)&&(k=w),k===void 0&&(k={});var D=k.text;delete k.text,super(t,s,l,w,S,k),this.type="rexTextPlayer",this.initManagers(t,k),this.parser=new lR(this,Ba(k,"parser",void 0)),this.typeWriter=new Yy(this,Ba(k,"typing",void 0)),this._imageManager=void 0;var V=Ba(k,"images",void 0);V&&this.addImage(V);var G=Ba(k,"sprites");G!==!1&&G!==null&&WR.call(this,G),this.setIgnoreNextPageInput(Ba(k,"ignoreNextPageInput",!1)),this.setNextPageInput(Ba(k,"nextPageInput",null)),this.isPlaying=!1,D&&this.play(D)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new ep(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||this.ignoreDestroy||(bD(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}}Object.assign(_p.prototype,Hy),T.register("textPlayer",function(e,t,s,l,w){var S=new _p(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.TextPlayer",_p);const qy={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},Ky={direction:["direction",void 0]};var en=function(e,t,s){if(typeof s=="string")e.hasOwnProperty(s)&&(t[s]=e[s]);else{var l=s;if(Array.isArray(l))for(var w=0,S=l.length;w<S;w++)en(e,t,l[w]);else for(var s in l)en(e,t,s)}},wD=function(e){e===void 0&&(e={});var t={};return en(e,t,"inputType"),en(e,t,"type"),en(e,t,"style"),en(e,t,Ky),en(e,t,qy),t},kp=function(e,t,s,l,w){if(t)return!(s&&!s(e,t)||!Qy(e,t)||l&&!l(e,t));w===void 0&&(w=!1);for(var S=e.scene.input.manager,k=S.pointersTotal,D=S.pointers,t,V=0;V<k;V++)if(t=D[V],!(s&&!s(e,t))&&Qy(e,t)&&!(l&&!l(e,t)))return w?t:!0;return!1},Qy=function(e,t){for(var s=e.scene,l=s.input.cameras.getCamerasBelowPointer(t),w=s.input.manager,S=[e],k=0,D=l.length;k<D;k++)if(w.hitTest(t,S,l[k],au),au.length>0)return au.length=0,!0;return au.length=0,!1},au=[],Na=void 0,SD=function(e){e!==Na&&(Na!==void 0&&Na.close(),Na=e)},TD=function(e){e===Na&&(Na=void 0)};const CD=Phaser.Utils.Objects.GetValue;var ou=function(e,t,s){s===void 0&&(s={});var l,w;for(var S in e)l=e[S],w=CD(t,S,l[1]),w!==void 0&&(s[l[0]]=w);return s},Jy=function(e){e.addEventListener("touchstart",Ya,!1),e.addEventListener("touchmove",Ya,!1),e.addEventListener("touchend",Ya,!1),e.addEventListener("mousedown",Ya,!1),e.addEventListener("mouseup",Ya,!1),e.addEventListener("mousemove",Ya,!1)},Ya=function(e){e.stopPropagation()},Zy=function(){return this.close(),this.emit("keydown-ENTER",this.parent,this),this},PD=function(){this.isOpened=!0,this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",Zy,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.clickOutSideTarget?(ay.call(this.clickOutSideTarget,this.parent),ny.call(this.clickOutSideTarget,this.parent),this.clickOutSideTarget.setInteractive().on("pointerdown",this.onClickOutside,this)):this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this)},MD=function(e){if(e){var t=e.parentElement;t&&t.removeChild(e)}},_D=function(){this.isOpened=!1,this.updateText(),this.enterCloseEnable&&this.scene.input.keyboard.off("keydown-ENTER",Zy,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.clickOutSideTarget?this.clickOutSideTarget.disableInteractive().off("pointerdown",this.onClickOutside,this):this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),MD(this.node),this.node=void 0,this.emit("close",this)};const Op=Phaser.Utils.Objects.GetValue;var kD=function(e,t){var s,l=Op(t,"inputType",void 0);l===void 0&&(l=Op(t,"type","text")),l==="textarea"?(s=document.createElement("textarea"),s.style.resize="none"):(s=document.createElement("input"),s.type=l);var w=Op(t,"style",void 0),S=s.style;ou(Ky,w,S),S.position="absolute",S.opacity=0,S.pointerEvents="none",S.zIndex=0,S.transform="scale(0)",ou(qy,t,s),Jy(s);var k=e.scene.sys.scale,D=k.isFullscreen?k.fullscreenTarget:document.body;return D.appendChild(s),s.addEventListener("focus",function(V){PD.call(e)}),s.addEventListener("blur",function(V){_D.call(e)}),s},OD=function(){return this.isOpened?this:this.readOnly?this:(SD(this),this.node||(this.node=kD(this,this.nodeConfig)),this.setFocus(),this)},ED=function(){return this.isOpened?(TD(this),this.setBlur(),this):this},AD={open:OD,close:ED};const Sr=Phaser.Utils.Objects.GetValue;class Ep extends Oe{constructor(t,s){super(t);var l=Sr(s,"inputType",void 0);l===void 0&&(l=Sr(s,"type","text")),this.setEnterCloseEnable(Sr(s,"enterClose",l!=="textarea"));var w=Sr(s,"onOpen",void 0);w||(w=Sr(s,"onFocus",void 0)),this.onOpenCallback=w,this.clickOutSideTarget=Sr(s,"clickOutSideTarget",void 0);var S=Sr(s,"onClose",void 0);S||(S=Sr(s,"onBlur",void 0)),this.onCloseCallback=S,this.onUpdateCallback=Sr(s,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=wD(s),this.node=void 0}destroy(){this.close(),this.clickOutSideTarget&&this.clickOutSideTarget.destroy(),super.destroy()}onClickOutside(t){kp(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){this.node&&(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node&&(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,s){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,s),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){this.node&&this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){this.node&&(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(this.node)return this.node.style.color}set fontColor(t){this.node&&(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,s){return this.node?(this.node.style[t]=s,this):this}getStyle(t){if(this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(Ep.prototype,AD);var tx=function(e,t,s){e=e.replace(" ","");var l=s.previousText;if(e===l)return e;if(isNaN(e)){s.emit("nan",e,s),e=l;var w=s.cursorPosition-1;s.setText(e),s.setCursorPosition(w)}else s.previousText=e;return e},RD=function(e){var t=e.parent,s=e.isOpened?e.selectionStart:null,l=e.isOpened?e.selectionEnd:null,w=e.prevSelectionStart,S=e.prevSelectionEnd;if(!(w===s&&S===l)){var k,D;w===null?(k=s,D=l):s===null?(k=w,D=S):(k=Math.min(w,s),D=Math.max(S,l));for(var V=k;V<D;V++){var G;w===null?G=!1:G=V>=w&&V<S;var j;if(s===null?j=!1:j=V>=s&&V<l,G!==j){var tt=t.getCharChild(V);if(tt){var st=G?"rangeout":"rangein";t.emit(st,tt,V,t)}}}e.prevSelectionStart=s,e.prevSelectionEnd=l}},DD=function(e){var t=e.parent,s=0,l=t.width,w=0,S=t.height,k=e.drawX,D=e.drawY,V=k+e.drawTLX,G=k+e.drawTRX,j=D+e.drawTLY,tt=D+e.drawBLY,st;V<s?st=s-V:G>l?st=l-G:st=0;var rt;j<w?rt=w-j:tt>S?rt=S-tt:rt=0,t._textOX+=st,t._textOY+=rt},ID=function(e){var t=e.parent,s=t.text;e.requestCursorPosition!==null&&(e.setCursorPosition(e.requestCursorPosition),e.requestCursorPosition=null);var l=e.cursorPosition;if(e.prevCursorPosition!==l){if(e.prevCursorPosition!==null&&e.prevCursorPosition>s.length&&(e.prevCursorPosition=null),e.prevCursorPosition!==null){var w=t.getCharChild(e.prevCursorPosition);w&&(w.text===`
`&&w.clearTextSize(),t.emit("cursorout",w,e.prevCursorPosition,t))}if(l!=null){var w=t.getCharChild(l);w&&(w.text===`
`&&w.copyTextSize(t.lastInsertCursor),DD(w),t.emit("cursorin",w,l,t))}t.emit("movecursor",l,e.prevCursorPosition,t),e.prevCursorPosition=l}},ex=function(e){var t=e.prevSelectionStart;if(t!==null){for(var s=e.prevSelectionEnd,l=e.parent,w=t;w<s;w++){var S=l.getCharChild(w);S&&l.emit("cursorout",S,w,l)}e.prevSelectionStart=null,e.prevSelectionEnd=null}},ix=function(e){var t=e.prevCursorPosition;if(t!==null){var s=e.parent,l=s.getCharChild(t);l&&s.emit("cursorout",l,t,s),e.prevCursorPosition=null}};const LD=Phaser.Utils.Objects.GetValue;let FD=class extends Ep{constructor(e,t){super(e,t),this.setSelectAllWhenFocusEnable(LD(t,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,this.requestCursorPosition=null,e.on("pointerdown",function(s,l,w,S){var k=e.getNearestChild(l,w),D=e.getCharIndex(k);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(D),this.cursorMoveStartIndex=D,this.firstClickAfterOpen=!1},this).on("pointermove",function(s,l,w,S){if(s.isDown){var k=e.getNearestChild(l,w),D=e.getCharIndex(k);this.cursorMoveStartIndex<D?this.selectText(this.cursorMoveStartIndex,D+1):this.selectText(D,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,e.emit("open")},this).on("close",function(){e.emit("close")}).on("keydown-ENTER",function(){e.emit("keydown-ENTER")})}initText(){var e=this.parent;return this.prevCursorPosition=null,this.setText(e.text),this}updateText(){var e=this.parent,t=this.text;if(this.onUpdateCallback){var s=this.onUpdateCallback(t,e,this);s!=null&&(t=s)}return e.text!==t&&e.setText(t),this.isOpened?this.selectionStart!==this.selectionEnd?(ix(this),RD(this)):(ex(this),ID(this)):(ex(this),ix(this)),this}setNumberInput(){return this.onUpdateCallback=tx,this}setSelectAllWhenFocusEnable(e){return e===void 0&&(e=!0),this.selectAllWhenFocus=e,this}setRequestCursorPosition(e){return this.isOpened?(this.requestCursorPosition=e,this):this}};const BD=Phaser.Utils.Objects.GetValue,ND=["inputType","onOpen","clickOutSideTarget","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var YD=function(e,t){var s=BD(t,"edit");return s===void 0&&(s={}),en(t,s,ND),new FD(e,s)},Tr=function(e,t){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var s=t.split("."),l=e,w=0;w<s.length;w++)if(l.hasOwnProperty(s[w]))l=l[s[w]];else return!1;return!0}else return!1},Ap=function(e){if(e.parentContainer)return Ap(e.parentContainer);var t=ry(e);return t?Ap(t):e},VD=function(e){for(var t=Ap(e).cameraFilter,s=e.scene.sys.cameras.cameras,l,w,S=0,k=s.length;S<k;S++)if(l=s[S],w=(t&l.id)>0,!w)return l;return null};class sx extends Oe{constructor(t,s){super(t),this.targetCamera=void 0,this.boot()}boot(){this.scene.sys.events.on("prerender",this.resize,this)}destroy(){this.scene&&(this.scene.sys.events.off("prerender",this.resize,this),super.destroy())}resize(){var t=this.scene,s=this.parent,l=VD(s);if(l){s.setScrollFactor(0).setOrigin(.5);var w=t.sys.scale.gameSize,S=w.width,k=w.height,D=1/l.zoom,V=S/2,G=k/2,j=S*D,tt=k*D;(s.x!==V||s.y!==G)&&s.setPosition(V,G),(s.width!==j||s.height!==tt)&&s.setSize(j,tt)}}}const zD=Phaser.GameObjects.Zone;let Rp=class extends zD{constructor(e){super(e,0,0,2,2),this.fullWindow=new sx(this)}};var GD=function(e,t){var s=!t.textArea;if(!Tr(t,"wrap.vAlign")){var l=s?"center":"top";K(t,"wrap.vAlign",l)}if(Tr(t,"wrap.wrapMode")||K(t,"wrap.wrapMode","char"),!Tr(t,"wrap.maxLines")){var l=s?1:void 0;K(t,"wrap.maxLines",l)}if(s&&K(t,"wrap.wrapWidth",1/0),Tr(t,"wrap.useDefaultTextHeight")||K(t,"wrap.useDefaultTextHeight",!0),t.edit||(t.edit={}),!Tr(t.edit,"inputType")){var l=s?"text":"textarea";K(t.edit,"inputType",l)}if(t.clickOutSideTarget===!0){var w=new Rp(e);e.add.existing(w),t.clickOutSideTarget=w}return t},hu=function(e,t,s,l){if(s===void 0&&(s="."),l===void 0&&(l={}),!e)return l;if(t in e)return Object.assign(l,e[t]);t+=s;for(var w in e)w.startsWith(t)&&(l[w.replace(t,"")]=e[w]);return l},UD=function(){var e=this.scene.input.keyboard;this.textEdit.on("open",function(){e.on("keydown-UP",this.cursorMoveUp,this).on("keydown-DOWN",this.cursorMoveDown,this)},this).on("close",function(){e.off("keydown-UP",this.cursorMoveUp,this).off("keydown-DOWN",this.cursorMoveDown,this)},this)},lu=function(e,t,s){if(s===void 0&&(s={}),Array.isArray(t))for(var l,w=0,S=t.length;w<S;w++)l=t[w],s[l]=e[l];else for(var l in t)s[l]=e[l];return s},nh=function(e,t){for(var s in e)if(!(s in t)||e[s]!==t[s])return!1;for(var s in t)if(!(s in e))return!1;return!0},WD=function(e){Xo(e)||this.setCursorStyle(e).on("cursorin",function(t){var s=this.cursorStyle,l=lu(t.style,s);nh(s,l)||(t.styleSave=l,t.modifyStyle(s))},this).on("cursorout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},XD=function(e){Xo(e)||this.setRangeStyle(e).on("rangein",function(t){var s=this.rangeStyle,l=lu(t.style,s);nh(s,l)||(t.styleSave=l,t.modifyStyle(s))},this).on("rangeout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},jD=function(e){Xo(e)||this.setFocusStyle(e).on("open",function(){var t=this.background,s=this.focusStyle,l=lu(t,s);nh(s,l)||(t.styleSave=l,t.modifyStyle(s))},this).on("close",function(){var t=this.background;t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},HD=function(e){var t=e.createCharChild("|");return t.text="",t};function Cr(){}Cr.prototype={diff(e,t,s={}){let l=s.callback;typeof s=="function"&&(l=s,s={}),this.options=s;let w=this;function S(rt){return l?(setTimeout(function(){l(void 0,rt)},0),!0):rt}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));let k=t.length,D=e.length,V=1,G=k+D;s.maxEditLength&&(G=Math.min(G,s.maxEditLength));let j=[{newPos:-1,components:[]}],tt=this.extractCommon(j[0],t,e,0);if(j[0].newPos+1>=k&&tt+1>=D)return S([{value:this.join(t),count:t.length}]);function st(){for(let rt=-1*V;rt<=V;rt+=2){let ot,ut=j[rt-1],ct=j[rt+1],pt=(ct?ct.newPos:0)-rt;ut&&(j[rt-1]=void 0);let mt=ut&&ut.newPos+1<k,yt=ct&&0<=pt&&pt<D;if(!mt&&!yt){j[rt]=void 0;continue}if(!mt||yt&&ut.newPos<ct.newPos?(ot=qD(ct),w.pushComponent(ot.components,void 0,!0)):(ot=ut,ot.newPos++,w.pushComponent(ot.components,!0,void 0)),pt=w.extractCommon(ot,t,e,rt),ot.newPos+1>=k&&pt+1>=D)return S($D(w,ot.components,t,e,w.useLongestToken));j[rt]=ot}V++}if(l)(function rt(){setTimeout(function(){if(V>G)return l();st()||rt()},0)})();else for(;V<=G;){let rt=st();if(rt)return rt}},pushComponent(e,t,s){let l=e[e.length-1];l&&l.added===t&&l.removed===s?e[e.length-1]={count:l.count+1,added:t,removed:s}:e.push({count:1,added:t,removed:s})},extractCommon(e,t,s,l){let w=t.length,S=s.length,k=e.newPos,D=k-l,V=0;for(;k+1<w&&D+1<S&&this.equals(t[k+1],s[D+1]);)k++,D++,V++;return V&&e.components.push({count:V}),e.newPos=k,D},equals(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty(e){let t=[];for(let s=0;s<e.length;s++)e[s]&&t.push(e[s]);return t},castInput(e){return e},tokenize(e){return e.split("")},join(e){return e.join("")}};function $D(e,t,s,l,w){let S=0,k=t.length,D=0,V=0;for(;S<k;S++){let j=t[S];if(j.removed){if(j.value=e.join(l.slice(V,V+j.count)),V+=j.count,S&&t[S-1].added){let tt=t[S-1];t[S-1]=t[S],t[S]=tt}}else{if(!j.added&&w){let tt=s.slice(D,D+j.count);tt=tt.map(function(st,rt){let ot=l[V+rt];return ot.length>st.length?ot:st}),j.value=e.join(tt)}else j.value=e.join(s.slice(D,D+j.count));D+=j.count,j.added||(V+=j.count)}}let G=t[k-1];return k>1&&typeof G.value=="string"&&(G.added||G.removed)&&e.equals("",G.value)&&(t[k-2].value+=G.value,t.pop()),t}function qD(e){return{newPos:e.newPos,components:e.components.slice(0)}}const KD=new Cr;function QD(e,t,s){return KD.diff(e,t,s)}const rx=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,nx=/\S/,ax=new Cr;ax.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!nx.test(e)&&!nx.test(t)},ax.tokenize=function(e){let t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let s=0;s<t.length-1;s++)!t[s+1]&&t[s+2]&&rx.test(t[s])&&rx.test(t[s+2])&&(t[s]+=t[s+2],t.splice(s+1,2),s--);return t};const ox=new Cr;ox.tokenize=function(e){let t=[],s=e.split(/(\n|\r\n)/);s[s.length-1]||s.pop();for(let l=0;l<s.length;l++){let w=s[l];l%2&&!this.options.newlineIsToken?t[t.length-1]+=w:(this.options.ignoreWhitespace&&(w=w.trim()),t.push(w))}return t};const JD=new Cr;JD.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};const ZD=new Cr;ZD.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};const t3=Object.prototype.toString,ah=new Cr;ah.useLongestToken=!0,ah.tokenize=ox.tokenize,ah.castInput=function(e){const{undefinedReplacement:t,stringifyReplacer:s=(l,w)=>typeof w>"u"?t:w}=this.options;return typeof e=="string"?e:JSON.stringify(Dp(e,null,null,s),s,"  ")},ah.equals=function(e,t){return Cr.prototype.equals.call(ah,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Dp(e,t,s,l,w){t=t||[],s=s||[],l&&(e=l(w,e));let S;for(S=0;S<t.length;S+=1)if(t[S]===e)return s[S];let k;if(t3.call(e)==="[object Array]"){for(t.push(e),k=new Array(e.length),s.push(k),S=0;S<e.length;S+=1)k[S]=Dp(e[S],t,s,l,w);return t.pop(),s.pop(),k}if(e&&e.toJSON&&(e=e.toJSON()),typeof e=="object"&&e!==null){t.push(e),k={},s.push(k);let D=[],V;for(V in e)e.hasOwnProperty(V)&&D.push(V);for(D.sort(),S=0;S<D.length;S+=1)V=D[S],k[V]=Dp(e[V],t,s,l,V);t.pop(),s.pop()}else k=e;return k}const Ip=new Cr;Ip.tokenize=function(e){return e.slice()},Ip.join=Ip.removeEmpty=function(e){return e};const e3=Phaser.Utils.Array.Remove;var i3=function(e,t){var s=e.text;if(t!==s){if(s==null&&(s=""),e3(e.children,e.lastInsertCursor),t==="")e.removeChildren();else for(var l=QD(s,t),w=0,S=0,k=l.length;S<k;S++){var D=l[S];D.removed?e.removeText(w,D.count):(D.added&&e.insertText(w,D.value),w+=D.count)}e.children.push(e.lastInsertCursor),e.runWrap(),e.isOpened&&e.textEdit.setText(t),e.emit("textchange",t,e)}},s3={setTextOYByPercentage(e){return this.setTextOY(-this.textVisibleHeight*e),this},getTextOYPercentage(){var e=this.textVisibleHeight;return e===0?0:this._textOY/-e},setTextOXByPercentage(e){return this.setTextOX(-this.textVisibleWidth*e),this},getTextOXPercentage(){var e=this.textVisibleWidth;return e===0?0:this._textOX/-e}};const uu=Phaser.Math.Clamp;var hx=function(e,t){var s={lineIndex:0,position:0};if(t<0)return s;for(var l=0,w=e.length;l<w;l++){var S=e[l];if(t<=S){s.lineIndex=l;break}t-=S}return s.position=t,s},lx=function(e,t){var s=0,l=t.lineIndex;if(l<0)return s;for(var w=0,S=e.length;w<S;w++){var k=e[w];if(l>w)s+=k;else if(l===w)s+=Math.min(t.position,k);else break}return s},r3={cursorMoveLeft(){if(!this.isOpened)return this;var e=uu(this.cursorPosition-1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveRight(){if(!this.isOpened)return this;var e=uu(this.cursorPosition+1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveUp(){if(!this.isOpened)return this;var e=hx(this.characterCountOfLines,this.cursorPosition);e.lineIndex-=1;var t=uu(lx(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this},cursorMoveDown(){if(!this.isOpened)return this;var e=hx(this.characterCountOfLines,this.cursorPosition);e.lineIndex+=1;var t=uu(lx(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this}};const ux=Phaser.Utils.Objects.IsPlainObject;class oh extends ka{constructor(t,s,l,w,S,k){ux(s)?k=s:ux(w)&&(k=w),k===void 0&&(k={}),GD(t,k);var D=k.text;D&&delete k.text;var V=hu(k.background,"focus"),G=hu(k.style,"cursor"),j=hu(k.style,"range");super(t,s,l,w,S,k),this.type="rexCanvasInput",this.contentWidth=void 0,this.contentHeight=void 0,this.lineHeight=void 0,this.linesCount=void 0,this.characterCountOfLines=[],this._text,this.textEdit=YD(this,k),UD.call(this),k.focusStyle&&Object.assign(V,k.focusStyle),jD.call(this,V),k.cursorStyle&&Object.assign(G,k.cursorStyle),WD.call(this,G),k.rangeStyle&&Object.assign(j,k.rangeStyle),Xo(j)&&Object.assign(j,G),XD.call(this,j);var tt=k.onAddChar;tt&&this.on("addchar",tt);var st=k.onCursorIn;st&&this.on("cursorin",st);var rt=k.onCursorOut;rt&&this.on("cursorout",rt);var ot=!k.onRangeIn&&!k.onRangeOut,ut=ot?k.onCursorIn:k.onRangeIn;ut&&this.on("rangein",ut);var ct=ot?k.onCursorOut:k.onRangeOut;ct&&this.on("rangeout",ct);var pt=k.onMoveCursor;pt&&this.on("movecursor",pt),this.setParseTextCallback(k.parseTextCallback),this.lastInsertCursor=HD(this),D||(D=""),this.setText(D)}addChild(t,s){if(super.addChild(t,s),Array.isArray(t))for(var l=t,w=0,S=l.length;w<S;w++){var t=l[w];Nn(t)&&this.emit("addchar",t,s+w,this)}else Nn(t)&&this.emit("addchar",t,s,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&(i3(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}runWrap(t){var s=super.runWrap(t);this.contentWidth=s.maxLineWidth,this.contentHeight=s.linesHeight,this.lineHeight=s.lineHeight,this.linesCount=s.lines.length,this.characterCountOfLines.length=0;for(var l=s.lines,w=0,S=l.length;w<S;w++){for(var k=l[w].children,D=0,V=0,G=k.length;V<G;V++){var j=k[V];j.active&&!j.removed&&Nn(j)&&D++}this.characterCountOfLines.push(D)}return s}setSize(t,s){return this.width===t&&this.height===s?this:(super.setSize(t,s),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=n3),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setRangeStyle(t){return this.rangeStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput().setSelectAllWhenFocusEnable(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}get cursorPosition(){return this.textEdit.cursorPosition}set cursorPosition(t){this.isOpened&&(this.textEdit.cursorPosition=t,this.textEdit.requestCursorPosition=t)}setCursorPosition(t){return this.cursorPosition=t,this}get topTextOY(){return 0}get bottomTextOY(){return-this.tableVisibleHeight}get leftTextOX(){return 0}get rightTextOX(){return-this.textVisibleWidth}get textVisibleHeight(){var t=this.contentHeight-this.height;return t<0&&(t=0),t}get textVisibleWidth(){var t=this.contentWidth-this.width;return t<0&&(t=0),t}set t(t){this.setTextOYByPercentage(t).updateTexture()}get t(){return this.getTextOYPercentage()}set s(t){this.setTextOXByPercentage(t).updateTexture()}get s(){return this.getTextOXPercentage()}}var n3=function(e){return e};Object.assign(oh.prototype,s3,r3),T.register("canvasInput",function(e,t,s,l,w){var S=new oh(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.CanvasInput",oh);var Lp=function(e){return E(e).loop.delta};const cx=Phaser.Utils.Objects.GetValue,a3=Phaser.Math.Wrap;class dx extends Ep{constructor(t,s){s===void 0&&(s={}),s.onUpdate==="number"&&(s.onUpdate=tx),super(t,s),this.setCursor(cx(s,"cursor","|")),this.setCursorFlashDuration(cx(s,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var t=this.parent,s=this.text;if(this.onUpdateCallback){var l=this.onUpdateCallback(s,t,this);l!=null&&(s=l)}if(this.isOpened&&this.hasCursor){var w=this.cursorPosition;s=s.substring(0,w)+this.cursor+s.substring(w),this.prevCursorPosition!==w&&(this.prevCursorPosition=w)}return t.text!==s&&(t.setText(s),this.emit("textchange",s,t,this)),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var s=this.cursorFlashTimer+Lp(this.scene);return this.cursorFlashTimer=a3(s,0,this.cursorFlashDuration),t}}T.register("hiddenEdit",function(e,t){var s=new dx(e,t);return s}),K(window,"RexPlugins.UI.HiddenEdit",dx);const o3=Phaser.GameObjects.GetCalcMatrix;var h3=function(e,t,s,l){t.updateData(),s.addToRenderList(t);var w=e.pipelines.set(t.pipeline),S=o3(t,s,l),k=w.calcMatrix.copyFrom(S.calc),D=t._displayOriginX,V=t._displayOriginY,G=s.alpha*t.alpha;e.pipelines.preBatch(t);for(var j=t.geom,tt,st=0,rt=j.length;st<rt;st++)tt=j[st],tt.visible&&tt.webglRender(w,k,G,D,V);e.pipelines.postBatch(t)};const l3=Phaser.Renderer.Canvas.SetTransform;var u3=function(e,t,s,l){t.updateData(),s.addToRenderList(t);var w=e.currentContext;if(l3(e,w,t,s,l)){for(var S=t._displayOriginX,k=t._displayOriginY,D=t.geom,V,G=0,j=D.length;G<j;G++)V=D[G],V.visible&&V.canvasRender(w,S,k);w.restore()}},c3={renderWebGL:h3,renderCanvas:u3};const d3=Phaser.GameObjects.Shape,p3=Phaser.Utils.Array.Remove;class Pr extends d3{constructor(t,s,l,w,S){s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=2),S===void 0&&(S=w),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(s,l),this.setSize(w,S),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,s){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==s,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=s,this.updateDisplayOrigin();var l=this.input;return l&&!l.customHitArea&&(l.hitArea.width=t,l.hitArea.height=s),this}resize(t,s){return this.setSize(t,s),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==s,this._fillColor=t,this._fillAlpha=s,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,s,l){return l===void 0&&(l=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==s||this.strokeAlpha!==l,this._lineWidth=t,this._strokeColor=s,this._strokeAlpha=l,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,s=0,l=t.length;s<l;s++){var w=t[s];w.dirty&&w.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,Ce(this.shapes),this.dirty=!0,this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var s=t.name;return s&&(this.shapes[s]=t),this.dirty=!0,this}deleteShape(t){var s=this.getShape(t);return s&&(delete this.shapes[t],p3(this.geom,s)),this}}Object.assign(Pr.prototype,c3);var f3={setBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==e||this.boxFillAlpha!==t,this.boxFillColor=e,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==e||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=e,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(e,t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.boxLineWidth!==e||this.boxStrokeColor!==t||this.boxStrokeAlpha!==s,this.boxLineWidth=e,this.boxStrokeColor=t,this.boxStrokeAlpha=s,this},setUncheckedBoxStrokeStyle(e,t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==e||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==s,this.uncheckedBoxLineWidth=e,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=s,this},setCheckerStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==e||this.checkAlpha!==t,this.checkerColor=e,this.checkAlpha=t,this},setBoxShape(e){return e===void 0&&(e=!1),this.isCircleShape===e?this:(this.isCircleShape=e,this.isSizeChanged=!0,this.dirty=!0,this)}},g3={setBoxSize(e){return this.dirty=this.dirty||this.boxSize!==e,this.boxSize=e,this},setCheckerSize(e){return this.dirty=this.dirty||this.checkerSize!==e,this.checkerSize=e,this}},v3=function(e,t){return e==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=e,this.fillAlpha=t),this},m3=function(e,t,s){return e==null||t==null?this.isStroked=!1:(s===void 0&&(s=1),this.isStroked=!0,this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=s),this},y3={fillStyle:v3,lineStyle:m3};class cu{constructor(){this.name=void 0,this.dirty=!0,this.visible=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}reset(){return this.setVisible().fillStyle().lineStyle(),this}webglRender(t,s,l,w,S){}canvasRender(t,s,l){}updateData(){this.dirty=!1}}Object.assign(cu.prototype,y3,os);const x3=Phaser.Geom.Polygon.Earcut;class hh extends cu{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=x3(this.pathData),super.updateData(),this}webglRender(t,s,l,w,S){this.isFilled&&Ym(t,s,this,l,w,S),this.isStroked&&Al(t,this,l,w,S)}canvasRender(t,s,l){var w=this.pathData,S=w.length-1,k=w[0]-s,D=w[1]-l;t.beginPath(),t.moveTo(k,D),this.closePath||(S-=2);for(var V=2;V<S;V+=2){var G=w[V]-s,j=w[V+1]-l;t.lineTo(G,j)}this.closePath&&t.closePath(),this.isFilled&&(Yo(t,this),t.fill()),this.isStroked&&(Vo(t,this),t.stroke())}}const px=Phaser.Math.DegToRad;class Va extends hh{constructor(t,s,l,w,S,k,D,V){t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=0),S===void 0&&(S=0),k===void 0&&(k=360),D===void 0&&(D=!1),V===void 0&&(V=!1),super(),this.setCenterPosition(t,s),this.setRadius(l,w),this.setAngle(S,k,D),this.setPie(V),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,s){return s===void 0&&(s=t),this.x=t,this.y=s,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,s){return s===void 0&&(s=t),this.radiusX=t,this.radiusY=s,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,s,l){return l===void 0&&(l=!1),this.startAngle=t,this.endAngle=s,this.anticlockwise=l,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),hi(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,s,l){t.beginPath();var w=this.x-s,S=this.y-l,k=px(this.startAngle),D=px(this.endAngle);this.pie&&(t.moveTo(w,S),t.lineTo(w+Math.cos(k)*this.radiusX,S+Math.sin(k)*this.radiusY)),t.ellipse(w,S,this.radiusX,this.radiusY,0,k,D,this.anticlockwise),this.pie&&t.lineTo(w,S),this.isFilled&&(Yo(t,this),t.fill()),this.isStroked&&(Vo(t,this),t.stroke())}}class cs extends Va{constructor(t,s,l){super(t,s,l,l,0,360)}}class b3 extends hh{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),s=0,l=t.length;s<l;s++)this.pathData.push(t[s].x,t[s].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class w3 extends Va{constructor(t,s,l,w){super(t,s,l,w,0,360)}}class sn extends hh{constructor(t,s,l,w){t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=0),super(),this.setP0(t,s),this.setP1(l,w)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,s){return this.x0=t,this.y0=s,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,s){return this.x1=t,this.y1=s,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var S3=function(e,t,s){return s.length=0,e!=null&&s.push(e,t),s};const fx=Phaser.Math.Interpolation.QuadraticBezier;var T3=function(e,t,s,l,w,S){for(var k=S.length,D=S[k-2],V=S[k-1],G=1,j=w-1;G<=j;G++){var tt=G/j;S.push(fx(tt,D,e,s),fx(tt,V,t,l))}return S};const gx=Phaser.Math.Interpolation.CubicBezier;var C3=function(e,t,s,l,w,S,k,D){for(var V=D.length,G=D[V-2],j=D[V-1],tt=1,st=k-1;tt<=st;tt++){var rt=tt/st;D.push(gx(rt,G,e,s,w),gx(rt,j,t,l,S))}return D};const vx=Phaser.Math.Interpolation.CatmullRom;var P3=function(e,t,s){for(var l=s.length,w=s[l-2],S=s[l-1],k=[w],D=[S],V=0,G=e.length;V<G;V+=2)k.push(e[V]),D.push(e[V+1]);for(var V=1,j=t-1;V<=j;V++){var tt=V/j;s.push(vx(k,tt),vx(D,tt))}return s},mx=function(e){var t=e.length;if(t<2)return e;var s=e[t-2],l=e[t-1];return e.push(s),e.push(l),e},M3={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(e,t){return this.restorePathData(),this.accumulationLengths=void 0,S3(e,t,this.pathData),this.firstPointX=e,this.firstPointY=t,this.lastPointX=e,this.lastPointY=t,this},lineTo(e,t,s){return s===void 0&&(s=!1),s&&(e+=this.lastPointX,t+=this.lastPointY),oi(e,t,this.pathData),this.lastPointX=e,this.lastPointY=t,this},verticalLineTo(e,t){return this.lineTo(e,this.lastPointY,t),this},horizontalLineTo(e,t){return this.lineTo(this.lastPointX,e,t),this},ellipticalArc(e,t,s,l,w,S,k){return k===void 0&&(k=!1),hi(e,t,s,l,w,S,k,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(e,t,s,l,w,S){return this.ellipticalArc(e,t,s,s,l,w,S),this},quadraticBezierTo(e,t,s,l){return T3(e,t,s,l,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=l,this},cubicBezierTo(e,t,s,l,w,S){return C3(e,t,s,l,w,S,this.iterations,this.pathData),this.lastPointX=w,this.lastPointY=S,this},catmullRomTo(...e){return P3(e,this.iterations,this.pathData),this.lastPointX=e[e.length-2],this.lastPointY=e[e.length-1],this},close(){var e=this.pathData[0],t=this.pathData[1];return(e!==this.lastPointX||t!==this.lastPointY)&&this.lineTo(e,t),this.closePath=!0,this},end(){return mx(this.pathData),this}};const _3=Phaser.Math.RotateAround;var k3=function(e,t,s,l){for(var w={x:0,y:0},S=0,k=l.length-1;S<k;S+=2)w.x=l[S],w.y=l[S+1],_3(w,e,t,s),l[S]=w.x,l[S+1]=w.y;return l},O3=function(e,t,s,l,w){for(var S=0,k=w.length-1;S<k;S+=2){var D=w[S]-e,V=w[S+1]-t;D*=s,V*=l,w[S]=D+e,w[S+1]=V+t}return w},yx=function(e,t,s){for(var l=0,w=s.length-1;l<w;l+=2)s[l]+=e,s[l+1]+=t;return s};const E3=Phaser.Math.DegToRad;Phaser.Math.RotateAround;var A3={rotateAround(e,t,s){if(this.pathData.length===0)return this;s=E3(s),k3(e,t,s,this.pathData);var l=this.pathData.length;return this.lastPointX=this.pathData[l-2],this.lastPointY=this.pathData[l-1],this},scale(e,t,s,l){return this.pathData.length===0?this:(O3(e,t,s,l,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this)},offset(e,t){return yx(e,t,this.pathData),this}},du=function(e,t,s,l){s===void 0&&(s=0),l===void 0&&(l=t.length),e.length=l-s;for(var w=0,S=e.length;w<S;w++)e[w]=t[w+s];return e},R3={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(du(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}};const D3=Phaser.Math.Distance.Between,I3=Phaser.Math.Wrap,L3=Phaser.Math.Linear;var xx=function(e,t,s,l,w){if(l===void 0&&(l=s,s=0),s=bx(s),l=bx(l),s!==l){var S=t[t.length-1],k=S*s,D=S*l;s<l?Fp(e,t,k,D,w):(Fp(e,t,k,S,w),Fp(e,t,0,D,w)),mx(w)}},Fp=function(e,t,s,l,w){for(var S=s>0,k=0,D=t.length;k<D;k++){var V=k*2,G=t[k];if(S){if(G<s)continue;if(G==s)S=!1;else{var j=G-t[k-1],tt=1-(G-s)/j;w.push(pu(e,V-2,V,tt)),w.push(pu(e,V-1,V+1,tt)),S=!1}}if(G<=l){if(w.push(e[V]),w.push(e[V+1]),G===l)break}else{var j=G-t[k-1],tt=1-(G-l)/j;w.push(pu(e,V-2,V,tt)),w.push(pu(e,V-1,V+1,tt));break}}},pu=function(e,t,s,l){var w=e[t],S=e[s];return L3(w,S,l)},bx=function(e){return e===0?0:e%1===0?1:I3(e,0,1)},F3={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var e=this.accumulationLengths,t=this.pathData,s,l,w,S,k,D=0,V=0,G=t.length;V<G;V+=2)w=t[V],S=t[V+1],k=s===void 0?0:D3(s,l,w,S),D+=k,e.push(D),s=w,l=S;return this.totalPathLength=D,this},setDisplayPathSegment(e,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,xx(this.pathDataSave,this.accumulationLengths,e,t,this.pathData),this},appendFromPathSegment(e,t,s){return t===void 0?this.pathData.push(...e.pathData):(e.updateAccumulationLengths(),xx(e.pathData,e.accumulationLengths,t,s,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},B3={draw(e,t,s){var l=this.toPoints();return t&&e.fillPoints(l,this.closePath,this.closePath),s&&e.strokePoints(l,this.closePath,this.closePath),this}},N3=function(e,t){t===void 0&&(t=[]);for(var s=0,l=e.length-1;s<l;s+=2)t.push({x:e[s],y:e[s+1]});return t};const Y3=Phaser.Geom.Polygon;var V3=function(e,t){return t===void 0&&(t=new Y3),t.setTo(e),t};class wx{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return N3(this.pathData)}toPolygon(t){return V3(this.pathData,t)}}Object.assign(wx.prototype,M3,A3,R3,F3,B3);class mi extends hh{constructor(){super(),this.builder=new wx(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,s){return this.builder.startAt(t,s),this.dirty=!0,this}lineTo(t,s,l){return this.builder.lineTo(t,s,l),this.dirty=!0,this}verticalLineTo(t,s){return this.builder.verticalLineTo(t,s),this.dirty=!0,this}horizontalLineTo(t,s){return this.builder.horizontalLineTo(t,s),this.dirty=!0,this}ellipticalArc(t,s,l,w,S,k,D){return this.builder.ellipticalArc(t,s,l,w,S,k,D),this.dirty=!0,this}arc(t,s,l,w,S,k){return this.builder.arc(t,s,l,w,S,k),this.dirty=!0,this}quadraticBezierTo(t,s,l,w){return this.builder.quadraticBezierTo(t,s,l,w),this.dirty=!0,this}cubicBezierTo(t,s,l,w,S,k){return this.builder.cubicBezierTo(t,s,l,w,S,k),this.dirty=!0,this}catmullRomTo(...t){return this.builder.catmullRomTo(...t),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,s,l){return this.builder.rotateAround(t,s,l),this.dirty=!0,this}scale(t,s,l,w){return this.builder.scale(t,s,l,w),this.dirty=!0,this}offset(t,s){return this.builder.offset(t,s),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,s,l){return this.builder.appendFromPathSegment(t.builder,s,l),this}copyPathFrom(t,s,l){return this.builder.clear().appendFromPathSegment(t.builder,s,l),this}setDisplayPathSegment(t,s){return this.builder.setDisplayPathSegment(t,s),this}}const z3=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let G3=class extends cu{constructor(e,t,s,l){e===void 0&&(e=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=s),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(e,t),this.setSize(s,l)}get x(){return this._x}set x(e){this.dirty=this.dirty||this._x!==e,this._x=e}get y(){return this._y}set y(e){this.dirty=this.dirty||this._y!==e,this._y=e}setTopLeftPosition(e,t){return this.x=e,this.y=t,this}get width(){return this._width}set width(e){this.dirty=this.dirty||this._width!==e,this._width=e}get height(){return this._height}set height(e){this.dirty=this.dirty||this._height!==e,this._height=e}setSize(e,t){return this.width=e,this.height=t,this}get centerX(){return this.x+this.width/2}set centerX(e){this.x=e-this.width/2}get centerY(){return this.y+this.height/2}set centerY(e){this.y=e-this.height/2}setCenterPosition(e,t){return this.centerX=e,this.centerY=t,this}updateData(){this.pathData.length=0;var e=this.x,t=e+this.width,s=this.y,l=s+this.height;return this.pathData.push(e,s),this.pathData.push(t,s),this.pathData.push(t,l),this.pathData.push(e,l),this.pathData.push(e,s),super.updateData(),this}webglRender(e,t,s,l,w){if(this.isFilled){var S=e.fillTint,k=z3(this.fillColor,this.fillAlpha*s);S.TL=k,S.TR=k,S.BL=k,S.BR=k,e.batchFillRect(-l+this.x,-w+this.y,this.width,this.height)}this.isStroked&&Al(e,this,s,l,w)}canvasRender(e,t,s){this.isFilled&&(Yo(e,this),e.fillRect(-t,-s,this.width,this.height)),this.isStroked&&(Vo(e,this),e.beginPath(),e.rect(-t,-s,this.width,this.height),e.stroke())}};const fu=Phaser.Utils.Objects.GetValue;class gu extends hh{constructor(t,s,l,w,S,k){t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=l),S===void 0&&(S=0),k===void 0&&(k=6),super(),this.setTopLeftPosition(t,s),this.setSize(l,w),this.setRadius(S),this.setIterations(k),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,s){return this.x=t,this.y=s,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,s){return this.width=t,this.height=s,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,s){return this.centerX=t,this.centerY=s,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var s=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==s,this._convexTL=s,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var s=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==s,this._convexTR=s,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var s=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==s,this._convexBL=s,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var s=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==s,this._convexBR=s,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=fu(t,"tl",0),this.radiusTR=fu(t,"tr",0),this.radiusBL=fu(t,"bl",0),this.radiusBR=fu(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var s=this.width,l=this.height,w,S=this.iterations+1;if(w=this.radiusTL,w>0)if(this._convexTL){var k=w,D=w;hi(k,D,w,w,180,270,!1,S,t)}else{var k=0,D=0;hi(k,D,w,w,90,0,!0,S,t)}else oi(0,0,t);if(w=this.radiusTR,w>0)if(this._convexTR){var k=s-w,D=w;hi(k,D,w,w,270,360,!1,S,t)}else{var k=s,D=0;hi(k,D,w,w,180,90,!0,S,t)}else oi(s,0,t);if(w=this.radiusBR,w>0)if(this._convexBR){var k=s-w,D=l-w;hi(k,D,w,w,0,90,!1,S,t)}else{var k=s,D=l;hi(k,D,w,w,270,180,!0,S,t)}else oi(s,l,t);if(w=this.radiusBL,w>0)if(this._convexBL){var k=w,D=l-w;hi(k,D,w,w,90,180,!1,S,t)}else{var k=0,D=l;hi(k,D,w,w,360,270,!0,S,t)}else oi(0,l,t);return t.push(t[0],t[1]),yx(this.x,this.y,t),super.updateData(),this}}const U3=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let W3=class extends cu{constructor(e,t,s,l,w,S){e===void 0&&(e=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=0),S===void 0&&(S=0),super(),this.pathData=[],this.closePath=!0,this.setP0(e,t),this.setP1(s,l),this.setP2(w,S)}get x0(){return this._x0}set x0(e){this.dirty=this.dirty||this._x0!==e,this._x0=e}get y0(){return this._y0}set y0(e){this.dirty=this.dirty||this._y0!==e,this._y0=e}setP0(e,t){return this.x0=e,this.y0=t,this}get x1(){return this._x1}set x1(e){this.dirty=this.dirty||this._x1!==e,this._x1=e}get y1(){return this._y1}set y1(e){this.dirty=this.dirty||this._y1!==e,this._y1=e}setP1(e,t){return this.x1=e,this.y1=t,this}get x2(){return this._x2}set x2(e){this.dirty=this.dirty||this._x2!==e,this._x2=e}get y2(){return this._y2}set y2(e){this.dirty=this.dirty||this._y2!==e,this._y2=e}setP2(e,t){return this.dirty=this.dirty||this.x2!==e||this.y2!==t,this.x2=e,this.y2=t,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(e,t,s,l,w){if(this.isFilled){var S=U3(this.fillColor,this.fillAlpha*s),k=this.x0-l,D=this.y0-w,V=this.x1-l,G=this.y1-w,j=this.x2-l,tt=this.y2-w,st=t.getX(k,D),rt=t.getY(k,D),ot=t.getX(V,G),ut=t.getY(V,G),ct=t.getX(j,tt),pt=t.getY(j,tt);e.batchTri(st,rt,ot,ut,ct,pt,S,S,S)}this.isStroked&&Al(e,this,s,l,w)}canvasRender(e,t,s){var l=this.x1-t,w=this.y1-s,S=this.x2-t,k=this.y2-s,D=this.x3-t,V=this.y3-s;e.beginPath(),e.moveTo(l,w),e.lineTo(S,k),e.lineTo(D,V),e.closePath(),this.isFilled&&(Yo(e,this),e.fill()),this.isStroked&&(Vo(e,this),e.stroke())}};var X3={buildShapes(){this.addShape(new gu().setName("box")).addShape(new mi().setName("checker"))},updateShapes(){var e=this.width/2,t=this.height/2,s=Math.min(e,t),l=s*2,w=e-s,S=t-s,k=this.boxLineWidth,D=Math.max(l/10,2),V=this.getShape("box"),G=this.getShape("checker");if(this.isSizeChanged){var st=l*(1-this.boxSize)/2,j=k/2,tt=l*this.boxSize-k;V.setTopLeftPosition(w+j+st,S+j+st).setSize(tt,tt),this.isCircleShape?V.setRadius(tt/2):V.setRadius(0);var st=l*(1-this.checkerSize)/2,rt=l*this.checkerSize/4,ot=rt*1,ut=rt*2,ct=rt*3;G.startAt(ot,ut).lineTo(ut,ct).lineTo(ct,ot).offset(w+st,S+st).end()}this.checked?(V.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(k,this.boxStrokeColor,this.boxStrokeAlpha),G.lineStyle(D,this.checkerColor)):(V.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(k,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),G.lineStyle()),this.checked&&G.setDisplayPathSegment(this.checkerAnimProgress)}};const rn=Phaser.Utils.Objects.GetValue,j3=Phaser.Math.Linear;class _s extends zn{constructor(t,s){super(t,s),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var s=this.target;this.propertyKey=rn(t,"key","value");var l=s[this.propertyKey];return this.fromValue=rn(t,"from",l),this.toValue=rn(t,"to",l),this.setEase(rn(t,"ease",this.ease)),this.setDuration(rn(t,"duration",this.duration)),this.setRepeat(rn(t,"repeat",0)),this.setDelay(rn(t,"delay",0)),this.setRepeatDelay(rn(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),s[this.propertyKey]=this.fromValue,super.start(),this}updateTarget(t,s){var l=s.t;l=this.easeFn(l),t[this.propertyKey]=j3(this.fromValue,this.toValue,l)}}var H3={setCheckerAnimationDuration(e){return e===void 0&&(e=0),this.checkerAnimDuration=e,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new _s(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}},Sx={};Object.assign(Sx,f3,g3,X3,H3);const lh=23730,$3=16777215,Ne=Phaser.Utils.Objects.GetValue,Tx=Phaser.Utils.Objects.IsPlainObject;class Cx extends Pr{constructor(t,s,l,w,S,k,D){Tx(s)?(D=s,s=Ne(D,"x",0),l=Ne(D,"y",0),w=Ne(D,"width",2),S=Ne(D,"height",2),k=Ne(D,"color",lh)):Tx(k)&&(D=k,k=Ne(D,"color",lh)),super(t,s,l,w,S),this.type="rexCheckbox",k===void 0&&(k=lh),this.setBoxShape(Ne(D,"circleBox",!1)),this.setBoxFillStyle(k,Ne(D,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(Ne(D,"uncheckedColor",null),Ne(D,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(Ne(D,"boxLineWidth",4),Ne(D,"boxStrokeColor",k),Ne(D,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,Ne(D,"uncheckedBoxStrokeColor",this.boxStrokeColor),Ne(D,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(Ne(D,"checkerColor",$3),Ne(D,"checkerAlpha",1)),this.setBoxSize(Ne(D,"boxSize",1)),this.setCheckerSize(Ne(D,"checkerSize",1)),this.setCheckerAnimationDuration(Ne(D,"animationDuration",150)),this.buildShapes();var V=Ne(D,"checked");V===void 0&&(V=Ne(D,"value",!1)),this.setValue(V)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}}Object.assign(Cx.prototype,Sx);const uh=Phaser.Utils.Objects.GetValue;class Mr extends Oe{constructor(t,s){super(t,s),this._enable=void 0,t.setInteractive(uh(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.isDown=!1,this.isOver=!1,this.setEnable(uh(t,"enable",!0)),this.setMode(uh(t,"mode",1)),this.setClickInterval(uh(t,"clickInterval",100)),this.setDragThreshold(uh(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var s=t?"enable":"disable";this.emit(s,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=q3[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,s,l,w){this.pointer===void 0&&(this.pointer=t,this.isDown=!0,this.emit("down",this,this.parent,t,w),this.mode===0&&this.click(t.downTime,t,w))}onRelease(t,s,l,w){this.pointer===t&&(this.isDown=!1,this.emit("up",this,this.parent,t,w),this.mode===1&&this.click(t.upTime,t,w),this.pointer=void 0)}onPointOut(t,s){this.pointer===t&&this.cancel()}onMove(t,s,l,w){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&t.getDistance()>=this.dragThreshold&&this.cancel()}onOver(t,s,l,w){return this.enable?(this.isOver=!0,this.emit("over",this,this.parent,t,w),this):this}onOut(t,s){return this.enable?(this.isOver=!1,this.emit("out",this,this.parent,t,s),this):this}click(t,s,l){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,s,l),this;this.pointer=void 0;var w=this.lastClickTime;return w!==void 0&&t-w<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,s,l),this)}cancel(){return this.pointer=void 0,this}}const q3={press:0,pointerdown:0,release:1,pointerup:1},nn=Phaser.Utils.Objects.GetValue,Px=Phaser.Utils.Objects.IsPlainObject;class Bp extends Cx{constructor(t,s,l,w,S,k,D){Px(s)?(D=s,s=nn(D,"x",0),l=nn(D,"y",0),w=nn(D,"width",2),S=nn(D,"height",2),k=nn(D,"color",lh)):Px(k)&&(D=k,k=nn(D,"color",lh)),super(t,s,l,w,S,k,D),this._click=new Mr(this,nn(D,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(nn(D,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}T.register("checkbox",function(e,t,s,l,w,S){var k=new Bp(this.scene,e,t,s,l,w,S);return this.scene.add.existing(k),k}),K(window,"RexPlugins.UI.Checkbox",Bp);var K3={setTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==e||this.trackFillAlpha!==t,this.trackFillColor=e,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==e||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=e,this.falseValueTrackFillAlpha=t,this},setThumbStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==e||this.checkAlpha!==t,this.thumbColor=e,this.thumbAlpha=t,this}},Q3={setTrackSize(e,t){return this.dirty=this.dirty||this.trackWidth!==e||this.trackHeight!==t,this.trackWidth=e,this.trackHeight=t,this},setTrackRadius(e){return this.dirty=this.dirty||this.trackRadius!==e,this.trackRadius=e,this},setThumbSize(e,t){return t===void 0&&(t=e),this.dirty=this.dirty||this.thumbWidth!==e||this.thumbHeight!==t,this.thumbWidth=e,this.thumbHeight=t,this},setThumbRadius(e){return this.dirty=this.dirty||this.thumbRadius!==e,this.thumbRadius=e,this}},J3={setThumbPosition(e,t){return t===void 0&&(t=1-e),this.thumbLeftX=e,this.thumbRightX=t,this},setRTL(e){return e===void 0&&(e=!0),this.rtl=e,this}};/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2019 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
*/var Np=function(e,t,s){return(t-e)*s+e},Z3=function(e,t,s){var l=Np(jo(e),jo(t),s),w=Np(Ho(e),Ho(t),s),S=Np($o(e),$o(t),s);return(l&255)<<16|(w&255)<<8|S&255};const Mx=Phaser.Math.Linear;var t5={buildShapes(){this.addShape(new gu().setName("track")).addShape(new gu().setName("thumb"))},updateShapes(){var e=this.width,t=this.height,s=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,l=this.getShape("track");if(this.isSizeChanged){var w=e*this.trackWidth,S=t*this.trackHeight,k=(e-w)/2,D=(t-S)/2,V=t*this.trackRadius;l.setTopLeftPosition(k,D).setSize(w,S).setRadius(V)}var G=Z3(this.falseValueTrackColor,this.trackFillColor,s),j=Mx(this.falseValueTrackFillAlpha,this.trackFillAlpha,s);l.fillStyle(G,j);var tt=this.getShape("thumb");if(this.isSizeChanged){var st=e*this.thumbWidth,rt=t*this.thumbHeight,ot=t*this.thumbRadius;tt.setSize(st,rt).setRadius(ot)}var ut=Mx(this.thumbLeftX,this.thumbRightX,s)*e;this.rtl&&(ut=e-ut);var ct=t/2;tt.setCenterPosition(ut,ct),tt.fillStyle(this.thumbColor,this.thumbAlpha)}},e5={setToggleAnimationDuration(e){return e===void 0&&(e=0),this.toggleAnimDuration=e,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new _s(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}},_x={};Object.assign(_x,K3,Q3,J3,t5,e5);var i5=function(e){var t=.3*jo(e)+.59*Ho(e)+.11*$o(e);return(t&255)<<16|(t&255)<<8|t&255};const Ye=Phaser.Utils.Objects.GetValue,kx=Phaser.Utils.Objects.IsPlainObject,Yp=23730,s5=16777215;class Ox extends Pr{constructor(t,s,l,w,S,k,D){kx(s)?(D=s,s=Ye(D,"x",0),l=Ye(D,"y",0),w=Ye(D,"width",2),S=Ye(D,"height",2),k=Ye(D,"color",Yp)):kx(k)&&(D=k,k=Ye(D,"color",Yp)),super(t,s,l,w,S),this.type="rexToggleSwitch",k===void 0&&(k=Yp),this.setTrackFillStyle(k,Ye(D,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(Ye(D,"falseValueTrackColor",i5(k)),Ye(D,"falseValueTrackFillAlpha",1)),this.setThumbStyle(Ye(D,"thumbColor",s5),Ye(D,"thumbAlpha",1)),this.setTrackSize(Ye(D,"trackWidth",.9),Ye(D,"trackHeight",.5)),this.setTrackRadius(Ye(D,"trackRadius",this.trackHeight*.5));var V=Ye(D,"thumbHeight",void 0),G=Ye(D,"thumbWidth",V);G===void 0&&(G=this.trackHeight*.9),this.setThumbSize(G,V),this.setThumbRadius(Ye(D,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(Ye(D,"thumbLeft",.3),Ye(D,"thumbRight",void 0)),this.setRTL(Ye(D,"rtl",!1)),this.setToggleAnimationDuration(Ye(D,"animationDuration",150)),this.buildShapes(),this.setValue(Ye(D,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,s){s===void 0&&(s=this.toggleAnimDuration);var l=this.toggleAnimDuration;return this.toggleAnimDuration=s,this.value=t,this.toggleAnimDuration=l,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}}Object.assign(Ox.prototype,_x);const Ex=Phaser.Utils.Objects.GetValue;class Vp extends Ox{constructor(t,s,l,w,S,k,D){super(t,s,l,w,S,k,D),this._click=new Mr(this,Ex(D,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(Ex(D,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}T.register("toggleSwitch",function(e,t,s,l,w,S){var k=new Vp(this.scene,e,t,s,l,w,S);return this.scene.add.existing(k),k}),K(window,"RexPlugins.UI.ToggleSwitch",Vp);var r5={loadFromURL(e,t){var s=this,l=new Image;return l.onload=function(){s.width!==l.width||s.height!==l.height?s.resize(l.width,l.height):s.clear(),s.context.drawImage(l,0,0),s.updateTexture(),t&&t(),l.onload=null,l.src="",l.remove()},l.src=e,this},loadFromURLPromise(e){var t=this;return new Promise(function(s,l){t.loadFromURL(e,s)})},loadFromFile(e,t){var s=URL.createObjectURL(e);return this.loadFromURL(s,function(){URL.revokeObjectURL(s),t&&t()}),this},loadFromFilePromise(e){var t=this;return new Promise(function(s,l){t.loadFromFile(e,s)})}};class Un extends $r{}Object.assign(Un.prototype,r5),T.register("canvas",function(e,t,s,l){var w=new Un(this.scene,e,t,s,l);return this.scene.add.existing(w),w}),K(window,"RexPlugins.UI.Canvas",Un);const za=Phaser.Utils.Objects.GetValue;class Ax extends $r{constructor(t,s,l,w,S,k){super(t,s,l),this.type="rexCircleMaskImage",this.setTexture(w,S,k)}setTexture(t,s,l){typeof s=="object"&&(l=s,s=void 0),typeof l=="string"&&(l={maskType:l});var w=za(l,"maskType",0),S=za(l,"backgroundColor",void 0),k=za(l,"strokeColor",void 0),D=k!=null?10:0,V=za(l,"strokeWidth",D);if(w===void 0?w=0:typeof w=="string"&&(w=n5[w]),this._textureKey=t,this._frameName=s,w===null)return this.loadTexture(t,s),this.dirty=!0,this;var G=this.scene.sys.textures.getFrame(t,s);if(!G)return this;G.cutWidth!==this.width||G.cutHeight!==this.height?this.setCanvasSize(G.cutWidth,G.cutHeight):this.clear();var j=this.canvas,tt=this.context,st=j.width,rt=j.height;S!=null&&(tt.fillStyle=S,tt.fillRect(0,0,st,rt)),tt.save(),tt.beginPath();var ot=V/2;switch(w){case 1:var yt=Math.floor(st/2),St=Math.floor(rt/2),ut=yt-ot,ct=St-ot;tt.ellipse(yt,St,ut,ct,0,0,2*Math.PI);break;case 2:var pt=za(l,"radius",0),mt=za(l,"iteration",void 0);jm(tt,ot,ot,st-V,rt-V,pt,mt);break;default:var yt=Math.floor(st/2),St=Math.floor(rt/2),Ct=Math.min(yt,St)-ot;tt.arc(yt,St,Ct,0,2*Math.PI);break}return k!=null&&(tt.strokeStyle=k,tt.lineWidth=V,tt.stroke()),tt.clip(),this.loadTexture(t,s),tt.restore(),this.dirty=!0,this}resize(t,s){return this.setDisplaySize(t,s),this}}const n5={circle:0,ellipse:1,roundRectangle:2};T.register("circleMaskImage",function(e,t,s,l,w){var S=new Ax(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.CircleMaskImage",Ax);const ch=Phaser.Utils.Objects.GetValue;class Rx extends $r{constructor(t,s,l,w,S,k){super(t,s,l),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(w,S,k)}setTexture(t,s,l){typeof s=="object"&&(l=s,s=void 0),typeof l=="string"&&(l={mask:{key:l}});var w=ch(l,"mask.key"),S=ch(l,"mask.frame"),k=ch(l,"mask.invertAlpha",!1),D=ch(l,"mask.scale"),V=ch(l,"backgroundColor");if(w){this._maskKey=w,this._maskFrame=S,this._maskScale=D;var G=w?this.scene.sys.textures.get(w):null;this.maskFrame=G?G.get(S):null}this._textureKey=t,this._frameName=s;var j=this.maskFrame;if(j===null)return this.loadTexture(t,s),this.dirty=!0,this;var tt=V!=null;this.loadTexture(t,s);var st=this.canvas,rt=this.context,ot=st.width,ut=st.height;rt.save(),rt.globalCompositeOperation=k?"destination-out":"destination-in";var ct,pt;this._maskScale!=null?(ct=j.cutWidth*this._maskScale,pt=j.cutHeight*this._maskScale):(ct=ot,pt=ut);var mt=(ot-ct)/2,yt=(ut-pt)/2;return this.drawFrame(this._maskKey,this._maskFrame,mt,yt,ct,pt),rt.restore(),tt&&(rt.save(),rt.globalCompositeOperation="destination-over",rt.fillStyle=V,rt.fillRect(0,0,ot,ut),rt.restore()),this.dirty=!0,this}resize(t,s){return this.setDisplaySize(t,s),this}}T.register("alphaMaskImage",function(e,t,s,l,w){var S=new Rx(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.AlphaMaskImage",Rx);const a5=Phaser.Math.Linear,Dx=Phaser.Math.Percent;var o5={setValue(e,t,s){return e==null?this:(t!==void 0&&(e=Dx(e,t,s)),this.value=e,this)},addValue(e,t,s){return t!==void 0&&(e=Dx(e,t,s)),this.value+=e,this},getValue(e,t){var s=this.value;return e!==void 0&&t!==void 0&&(s=a5(e,t,s)),s}};const h5=Phaser.Math.Percent;var l5={setEaseValuePropName(e){return this.easeValuePropName=e,this},setEaseValueDuration(e){return this.easeValueDuration=e,this},setEaseValueFunction(e){return this.easeFunction=e,this},stopEaseValue(){return this.easeValueTask&&this.easeValueTask.stop(),this},easeValueTo(e,t,s){return e==null?this:(t!==void 0&&(e=h5(e,t,s)),this.easeValueTask===void 0&&(this.easeValueTask=new _s(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:e,duration:this.easeValueDuration,ease:this.easeFunction}),this)},easeValueRepeat(e,t,s,l){return s===void 0&&(s=-1),l===void 0&&(l=0),this.easeValueTask===void 0&&(this.easeValueTask=new _s(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:e,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:s,repeatDelay:l}),this}};const dh=Phaser.Utils.Objects.GetValue,u5=Phaser.Math.Clamp;function an(e){class t extends e{bootProgressBase(l){this.eventEmitter=dh(l,"eventEmitter",this);var w=dh(l,"valuechangeCallback",null);if(w!==null){var S=dh(l,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",w,S)}return this.setEaseValuePropName("value").setEaseValueDuration(dh(l,"easeValue.duration",0)).setEaseValueFunction(dh(l,"easeValue.ease","Linear")),this}get value(){return this._value}set value(l){l=u5(l,0,1);var w=this._value,S=w!=l;this.dirty=this.dirty||S,this._value=l,S&&this.eventEmitter.emit("valuechange",this._value,w,this.eventEmitter)}}return Object.assign(t.prototype,o5,l5),t}const c5=Phaser.Math.RadToDeg,Ix=Phaser.Math.DegToRad;var Lx=function(e,t,s,l,w,S,k,D){var V=Math.abs(k-S)===360,G=Ix(S),j=Ix(k),tt=Math.cos(G),st=Math.sin(G),rt=Math.cos(j),ot=Math.sin(j);return e.startAt(t+tt*l,s+st*l),e.arc(t,s,l,S,k,D),V&&w===0||(e.lineTo(t+rt*w,s+ot*w),w>0&&e.arc(t,s,w,k,S,!D)),e.close(),e},d5={buildShapes(){var e=this.iterations;this.addShape(new mi().setIterations(e).setName("track")).addShape(new mi().setIterations(e).setName("bar")).addShape(new cs().setIterations(e).setName("center"))},updateShapes(){var e=this.radius,t=this.thickness*this.radius,s=this.radius,l=s-t,w=this.getShape("track");this.trackColor!=null&&this.thickness>0?(w.fillStyle(this.trackColor),Lx(w,e,e,s,l,0,360,!1)):w.reset();var S=this.getShape("bar");if(this.barColor!=null&&this.thickness>0){var k,D,V;if(this.value===1)k=!1,D=0,V=360;else{k=this.anticlockwise,D=c5(this.startAngle);var G=360*(k?1-this.value:this.value);V=G+D}S.fillStyle(this.barColor),Lx(S,e,e,s+1,l-1,D,V,!1)}else S.reset();var j=this.getShape("center");this.centerColor&&l>0?j.setCenterPosition(e,e).setRadius(l).fillStyle(this.centerColor):j.reset()}};const ks=Phaser.Utils.Objects.GetValue,p5=Phaser.Utils.Objects.IsPlainObject,f5=Phaser.Math.Clamp,g5=Phaser.Math.DegToRad(270);let zp=class extends an(Pr){constructor(e,t,s,l,w,S,k){p5(t)&&(k=t,t=ks(k,"x",0),s=ks(k,"y",0),l=ks(k,"radius",1),w=ks(k,"barColor",void 0),S=ks(k,"value",0)),l===void 0&&(l=1);var D=l*2;super(e,t,s,D,D),this.type="rexCircularProgress",this.bootProgressBase(k),this.setRadius(l),this.setTrackColor(ks(k,"trackColor",void 0)),this.setBarColor(w),this.setCenterColor(ks(k,"centerColor",void 0)),this.setThickness(ks(k,"thickness",.2)),this.setStartAngle(ks(k,"startAngle",g5)),this.setAnticlockwise(ks(k,"anticlockwise",!1)),this.iterations=ks(k,"iterations",128),this.buildShapes(),this.setValue(S)}resize(e,t){return e=Math.floor(Math.min(e,t)),e===this.width?this:(super.resize(e,e),this.setRadius(e/2),this)}get radius(){return this._radius}set radius(e){this.dirty=this.dirty||this._radius!=e,this._radius=e;var t=e*2;this.resize(t,t)}setRadius(e){return this.radius=e,this}get trackColor(){return this._trackColor}set trackColor(e){this.dirty=this.dirty||this._trackColor!=e,this._trackColor=e}setTrackColor(e){return this.trackColor=e,this}get barColor(){return this._barColor}set barColor(e){this.dirty=this.dirty||this._barColor!=e,this._barColor=e}setBarColor(e){return this.barColor=e,this}get startAngle(){return this._startAngle}set startAngle(e){this.dirty=this.dirty||this._startAngle!=e,this._startAngle=e}setStartAngle(e){return this.startAngle=e,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(e){this.dirty=this.dirty||this._anticlockwise!=e,this._anticlockwise=e}setAnticlockwise(e){return e===void 0&&(e=!0),this.anticlockwise=e,this}get thickness(){return this._thickness}set thickness(e){e=f5(e,0,1),this.dirty=this.dirty||this._thickness!=e,this._thickness=e}setThickness(e){return this.thickness=e,this}get centerColor(){return this._centerColor}set centerColor(e){this.dirty=this.dirty||this._centerColor!=e,this._centerColor=e}setCenterColor(e){return this.centerColor=e,this}};Object.assign(zp.prototype,d5),T.register("circularProgress",function(e,t,s,l,w,S){var k=new zp(this.scene,e,t,s,l,w,S);return this.scene.add.existing(k),k}),K(window,"RexPlugins.UI.CircularProgress",zp);var Gp=function(e,t,s,l,w,S,k,D,V,G,j,tt){G===void 0&&(G=0),j===void 0&&(j=2*Math.PI),tt===void 0&&(tt=!1),t.beginPath(),t.ellipse(s,l,w,S,0,G,j,tt),k!=null&&(t.fillStyle=k,t.fill()),D!=null&&(t.strokeStyle=D,t.lineWidth=V,t.stroke())};const Fx=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],v5=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];for(var Up={},Bx,vu=0,m5=Fx.length;vu<m5;vu++)Bx=Fx[vu].toLowerCase(),Up[Bx]=v5[vu];var y5=function(e){return e=e.toLowerCase(),Up.hasOwnProperty(e)?Up[e]:null},Wp=function(e){return typeof e!="string"||(e.startsWith("#")?e=parseInt(e.substring(1),16):e.startsWith("0x")?e=parseInt(e.substring(2),16):e=y5(e)),e};const x5=Phaser.Math.DegToRad,Xp=Phaser.Math.Linear;var b5=function(e,t,s,l,w,S,k,D,V,G,j,tt,st){G===void 0&&(G=0),j===void 0&&(j=2*Math.PI),tt===void 0&&(tt=!1),st===void 0&&(st=2),k=Wp(k),D=Wp(D),ph=j0(k,ph),fh=j0(D,fh);var rt=x5(st),ot;tt?ot=G-j:ot=j-G,ot<0&&(ot+=2*Math.PI);var ut=Math.ceil(ot/rt),ct=ot/ut;tt&&(ct=-ct);for(var pt=0;pt<ut;pt++){var mt=pt/ut,yt=Math.round(Xp(ph.r,fh.r,mt)),St=Math.round(Xp(ph.g,fh.g,mt)),Ct=Math.round(Xp(ph.b,fh.b,mt)),_t=G+pt*ct,Rt=_t+ct;pt<ut-1&&(Rt+=ct/2),t.beginPath(),t.ellipse(s,l,w,S,0,_t,Rt,tt),t.strokeStyle=`rgb(${yt},${St},${Ct})`,t.lineWidth=V,t.stroke()}},ph,fh,w5=function(e,t,s,l,w,S,k,D,V,G,j){V===void 0&&D!=null&&(V=2),t.font=S,t.textAlign=G,t.textBaseline=j,t.fillStyle=k,t.strokeStyle=D,t.lineWidth=V,t.lineCap="round",t.lineJoin="round",D!=null&&D!=="none"&&V>0&&t.strokeText(w,s,l),k!=null&&k!=="none"&&t.fillText(w,s,l)};const jp=Phaser.Math.PI2;var S5=function(){var e=this.radius,t=this.thickness*this.radius,s=this.radius-t/2,l=this.radius-t,w=this.canvas,S=this.context,k=this.anticlockwise,D=this.startAngle,V=this.endAngle,G=this._deltaAngle;if(this.trackColor&&t>0&&(S.save(),Gp(w,S,e,e,s,s,void 0,this.trackColor,t,D,V,k),S.restore()),this.barColor&&s>0){var j;this.value>=1?j=V:k?j=(D-G*this.value+jp)%jp:j=(D+G*this.value)%jp,S.save(),this.barColor2?b5(w,S,e,e,s,s,this.barColor2,this.barColor,t,D,j,k):Gp(w,S,e,e,s,s,void 0,this.barColor,t,D,j,k),S.restore()}if(this.centerColor&&l>0){var tt;this.centerColor2?(tt=this.context.createRadialGradient(e,e,0,e,e,l),tt.addColorStop(0,this.centerColor),tt.addColorStop(1,this.centerColor2)):tt=this.centerColor,S.save(),Gp(w,S,e,e,l,l,tt),S.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(S.save(),w5(w,S,e,e,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),S.restore())};const De=Phaser.Utils.Objects.GetValue,T5=Phaser.Utils.Objects.IsPlainObject,C5=Phaser.Math.Clamp,P5=Phaser.Math.DegToRad(270),mu=Phaser.Math.PI2;class yu extends an($r){constructor(t,s,l,w,S,k,D){T5(s)&&(D=s,s=De(D,"x",0),l=De(D,"y",0),w=De(D,"radius",1),S=De(D,"barColor",void 0),k=De(D,"value",0));var V=w*2,G=De(D,"resolution",1);super(t,s,l,V,V,G),this.type="rexCircularProgressCanvas",this.bootProgressBase(D),this.setRadius(w),this.setTrackColor(De(D,"trackColor",void 0)),this.setBarColor(S),this.setBarColor2(De(D,"barColor2",void 0)),this.setCenterColor(De(D,"centerColor",void 0)),this.setThickness(De(D,"thickness",.2)),this.setAnticlockwise(De(D,"anticlockwise",!1)),this.setStartAngle(De(D,"startAngle",P5));var j=De(D,"endAngle");j===void 0&&(this.anticlockwise?j=this.startAngle-mu:j=this.startAngle+mu),this.setEndAngle(De(D,"endAngle",j)),this.setTextColor(De(D,"textColor",void 0)),this.setTextStrokeColor(De(D,"textStrokeColor",void 0),De(D,"textStrokeThickness",void 0));var tt=De(D,"textFont",void 0);tt?this.setTextFont(tt):this.setTextFont(De(D,"textSize","16px"),De(D,"textFamily","Courier"),De(D,"textStyle","")),this.setTextFormatCallback(De(D,"textFormatCallback",void 0),De(D,"textFormatCallbackScope",void 0)),this.setValue(k)}resize(t,s){return t=Math.floor(Math.min(t,s)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var s=t*2;this.resize(s,s)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get barColor2(){return this._barColor2}set barColor2(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}setBarColor2(t){return this.barColor2=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t,this._deltaAngle=Hp(this._startAngle,this._endAngle,this._anticlockwise)}setStartAngle(t){return this.startAngle=t,this}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!=t,this._endAngle=t,this._deltaAngle=Hp(this._startAngle,this._endAngle,this._anticlockwise)}setEndAngle(t){return this.endAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t,this._deltaAngle=Hp(this._startAngle,this._endAngle,this._anticlockwise)}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=C5(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,s){return this.centerColor=t,this.centerColor2=s,this}get textColor(){return this._textColor}set textColor(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,s){return s===void 0&&(s=2),this.textStrokeColor=t,this.textStrokeThickness=s,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,s,l){var w;return s===void 0?w=t:w=l+" "+t+" "+s,this.textFont=w,this}setTextFormatCallback(t,s){return this.textFormatCallback=t,this.textFormatCallbackScope=s,this}updateTexture(){return super.updateTexture(function(){this.clear(),S5.call(this)},this),this}getFormatText(t){t===void 0&&(t=this.value);var s;return this.textFormatCallbackScope?s=this.textFormatCallback(t):s=this.textFormatCallback.call(this.textFormatCallbackScope,t),s}}var Hp=function(e,t,s){return s?e<=t?mu+e-t:e-t:e>=t?mu+t-e:t-e};T.register("circularProgressCanvas",function(e,t,s,l,w,S){var k=new yu(this.scene,e,t,s,l,w,S);return this.scene.add.existing(k),k}),K(window,"RexPlugins.UI.CircularProgressCanvas",yu);var M5=function(){var e=this.skewX,t=this.width-Math.abs(e),s=this.height,l=this.getShape("trackFill");l.fillStyle(this.trackColor),l.isFilled&&$p(l,0,0,t,s,e);var w=this.getShape("bar");if(w.fillStyle(this.barColor),w.isFilled){var S,k;this.rtl?(S=t*(1-this.value),k=t):(S=0,k=t*this.value),$p(w,S,0,k,s,e)}var D=this.getShape("trackStroke");D.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),D.isStroked&&$p(D,0,0,t,s,e)},$p=function(e,t,s,l,w,S){var k=(t+l)/2;return S>=0?e.startAt(k+S,s).lineTo(l+S,s).lineTo(l,w).lineTo(t,w).lineTo(t+S,s).lineTo(k+S,s):e.startAt(k,s).lineTo(l,s).lineTo(l-S,w).lineTo(t-S,w).lineTo(t,s).lineTo(k,s),e.close(),e};const gh=Phaser.Utils.Objects.GetValue,qp=Phaser.Utils.Objects.IsPlainObject;let xu=class extends an(Pr){constructor(e,t,s,l,w,S,k,D){qp(t)?(D=t,t=D.x,s=D.y,l=D.width,w=D.height,S=D.barColor,k=D.value):qp(l)?(D=l,l=D.width,w=D.height,S=D.barColor,k=D.value):qp(S)&&(D=S,S=D.barColor,k=D.value),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=2),w===void 0&&(w=l),k===void 0&&(k=0),super(e,t,s,l,w,D),this.type="rexLineProgress",this.bootProgressBase(D),this.addShape(new mi().setName("trackFill")).addShape(new mi().setName("bar")).addShape(new mi().setName("trackStroke")),this.setTrackColor(gh(D,"trackColor",void 0)),this.setBarColor(S),this.setTrackStroke(gh(D,"trackStrokeThickness",2),gh(D,"trackStrokeColor",void 0)),this.setSkewX(gh(D,"skewX",0)),this.setRTL(gh(D,"rtl",!1)),this.setValue(k)}get trackColor(){return this._trackColor}set trackColor(e){this.dirty=this.dirty||this._trackColor!=e,this._trackColor=e}setTrackColor(e){return this.trackColor=e,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(e){this.dirty=this.dirty||this._trackStrokeColor!=e,this._trackStrokeColor=e}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(e){this.dirty=this.dirty||this._trackStrokeThickness!=e,this._trackStrokeThickness=e}setTrackStroke(e,t){return this.trackStrokeThickness=e,this.trackStrokeColor=t,this}get barColor(){return this._barColor}set barColor(e){this.dirty=this.dirty||this._barColor!=e,this._barColor=e}setBarColor(e){return this.barColor=e,this}get skewX(){return this._skewX}set skewX(e){this.dirty=this.dirty||this._skewX!=e,this._skewX=e}setSkewX(e){return this.skewX=e,this}get rtl(){return this._rtl}set rtl(e){e=!!e,this.dirty=this.dirty||this._rtl!=e,this._rtl=e}setRTL(e){return e===void 0&&(e=!0),this.rtl=e,this}};var _5={updateShapes:M5};Object.assign(xu.prototype,_5),T.register("lineProgress",function(e,t,s,l,w,S,k){var D=new xu(this.scene,e,t,s,l,w,S,k);return this.scene.add.existing(D),D}),K(window,"RexPlugins.UI.LineProgress",xu);var Kp=function(e,t,s,l,w){e.setIterations(w).start();var D=l.tl;if(_e(D))if(D.convex){var S=D.x,k=D.y;e.ellipticalArc(S,k,D.x,D.y,180,270,!1)}else{var S=0,k=0;e.ellipticalArc(S,k,D.x,D.y,90,0,!0)}else e.lineTo(0,0);var D=l.tr;if(_e(D))if(D.convex){var S=t-D.x,k=D.y;e.ellipticalArc(S,k,D.x,D.y,270,360,!1)}else{var S=t,k=0;e.ellipticalArc(S,k,D.x,D.y,180,90,!0)}else e.lineTo(t,0);var D=l.br;if(_e(D))if(D.convex){var S=t-D.x,k=s-D.y;e.ellipticalArc(S,k,D.x,D.y,0,90,!1)}else{var S=t,k=s;e.ellipticalArc(S,k,D.x,D.y,270,180,!0)}else e.lineTo(t,s);var D=l.bl;if(_e(D))if(D.convex){var S=D.x,k=s-D.y;e.ellipticalArc(S,k,D.x,D.y,90,180,!1)}else{var S=0,k=s;e.ellipticalArc(S,k,D.x,D.y,360,270,!0)}else e.lineTo(0,s);return e.close(),e},bu=Phaser.Math.RadToDeg,k5=function(e,t,s,l,w){var S=t*w,G=l.tl;if(_e(G)){var k;S>G.x?k=90:k=bu(Math.acos((G.x-S)/G.x));var D=G.x,V=G.y;e.ellipticalArc(D,V,G.x,G.y,180,180+k,!1)}else e.lineTo(0,0);var G=l.tr;if(_e(G)&&S>t-G.x){var k=90-bu(Math.acos((S-(t-G.x))/G.x)),D=t-G.x,V=G.y;e.ellipticalArc(D,V,G.x,G.y,270,270+k,!1)}else e.lineTo(S,0);var G=l.br;if(_e(G)&&S>t-G.x){var k=90-bu(Math.acos((S-(t-G.x))/G.x)),D=t-G.x,V=s-G.y;e.ellipticalArc(D,V,G.x,G.y,90-k,90,!1)}else e.lineTo(S,s);var G=l.bl;if(_e(G)){var k;S>G.x?k=90:k=bu(Math.acos((G.x-S)/G.x));var D=G.x,V=s-G.y;e.ellipticalArc(D,V,G.x,G.y,180-k,180,!1)}else e.lineTo(0,s)},wu=Phaser.Math.RadToDeg,O5=function(e,t,s,l,w){var S=s*w,G=l.tl;if(_e(G)){var k;S>G.y?k=90:k=wu(Math.acos((G.y-S)/G.y));var D=G.x,V=G.y;e.ellipticalArc(D,V,G.x,G.y,270-k,270,!1)}else e.lineTo(0,0);var G=l.tr;if(_e(G)){var k;S>G.y?k=90:k=wu(Math.acos((G.y-S)/G.y));var D=t-G.x,V=G.y;e.ellipticalArc(D,V,G.x,G.y,270,270+k,!1)}else e.lineTo(t,0);var G=l.br;if(_e(G)&&S>s-G.y){var k=90-wu(Math.acos((S-(s-G.y))/G.y)),D=t-G.x,V=s-G.y;e.ellipticalArc(D,V,G.x,G.y,0,0+k,!1)}else e.lineTo(t,S);var G=l.bl;if(_e(G)&&S>s-G.y){var k=90-wu(Math.acos((S-(s-G.y))/G.y)),D=G.x,V=s-G.y;e.ellipticalArc(D,V,G.x,G.y,180-k,180,!1)}else e.lineTo(0,S)},Su=Phaser.Math.RadToDeg,E5=function(e,t,s,l,w){var S=t*w,G=l.tr;if(_e(G)){var k;S>G.x?k=90:k=Su(Math.acos((G.x-S)/G.x));var D=t-G.x,V=G.y;e.ellipticalArc(D,V,G.x,G.y,360-k,360,!1)}else e.lineTo(t,0);var G=l.br;if(_e(G)){var k;S>G.x?k=90:k=Su(Math.acos((G.x-S)/G.x));var D=t-G.x,V=s-G.y;e.ellipticalArc(D,V,G.x,G.y,0,0+k,!1)}else e.lineTo(t,s);var G=l.bl;if(_e(G)&&S>t-G.x){var k=90-Su(Math.acos((S-(t-G.x))/G.x)),D=G.x,V=s-G.y;e.ellipticalArc(D,V,G.x,G.y,90,90+k,!1)}else e.lineTo(t-S,s);var G=l.tl;if(_e(G)&&S>t-G.x){var k=90-Su(Math.acos((S-(t-G.x))/G.x)),D=G.x,V=G.y;e.ellipticalArc(D,V,G.x,G.y,270-k,270,!1)}else e.lineTo(t-S,0)},Tu=Phaser.Math.RadToDeg,A5=function(e,t,s,l,w){var S=s*w,G=l.br;if(_e(G)){S>G.y?V=90:V=Tu(Math.acos((G.y-S)/G.y));var k=t-G.x,D=s-G.y;e.ellipticalArc(k,D,G.x,G.y,90-V,90,!1)}else e.lineTo(t,s);var G=l.bl;if(_e(G)){S>G.y?V=90:V=Tu(Math.acos((G.y-S)/G.y));var k=G.x,D=s-G.y;e.ellipticalArc(k,D,G.x,G.y,90,90+V,!1)}else e.lineTo(0,s);var G=l.tl;if(_e(G)&&S>s-G.y){var V=90-Tu(Math.acos((S-(s-G.y))/G.y)),k=G.x,D=G.y;e.ellipticalArc(k,D,G.x,G.y,180,180+V,!1)}else e.lineTo(0,s-S);var G=l.tr;if(_e(G)&&S>s-G.y){var V=90-Tu(Math.acos((S-(s-G.y))/G.y)),k=t-G.x,D=G.y;e.ellipticalArc(k,D,G.x,G.y,360-V,360,!1)}else e.lineTo(t,s-S)},R5=function(e,t,s,l,w,S,k,D){if(e.setIterations(D).start(),w===0)return e;if(w===1)return Kp(e,t,s,l,D);var V;return S===0?V=k?E5:k5:V=k?A5:O5,V(e,t,s,l,w),e.close(),e},D5=function(){var e=this.width,t=this.height,s=this.rrGeom.cornerRadius,l=this.value,w=this.orientation,S=this.rtl,k=this.iteration+1,D=this.getShape("trackFill");D.fillStyle(this.trackColor),D.isFilled&&Kp(D,e,t,s,k);var V=this.getShape("bar");V.fillStyle(this.barColor),V.isFilled&&R5(V,e,t,s,l,w,S,k);var G=this.getShape("trackStroke");G.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),G.isStroked&&Kp(G,e,t,s,k)},I5={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},Wn=function(e){return typeof e=="string"&&(e=I5[e]),e};const Ga=Phaser.Utils.Objects.GetValue,Qp=Phaser.Utils.Objects.IsPlainObject;class Jp extends an(Pr){constructor(t,s,l,w,S,k,D,V,G){Qp(s)?(G=s,s=G.x,l=G.y,w=G.width,S=G.height,k=G.radius,D=G.barColor,V=G.value):Qp(w)?(G=w,w=G.width,S=G.height,k=G.radius,D=G.barColor,V=G.value):Qp(k)&&(G=k,k=G.radius,D=G.barColor,V=G.value),s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=1),S===void 0&&(S=w),k===void 0&&(k=0),V===void 0&&(V=0),super(t,s,l,w,S,G),this.type="rexRoundRectangleProgress",this.rrGeom=new Xd,this.bootProgressBase(G),this.addShape(new mi().setName("trackFill")).addShape(new mi().setName("bar")).addShape(new mi().setName("trackStroke")),this.setTrackColor(Ga(G,"trackColor",void 0)),this.setBarColor(D),this.setTrackStroke(Ga(G,"trackStrokeThickness",2),Ga(G,"trackStrokeColor",void 0)),this.setOrientation(Ga(G,"orientation",0)),this.setRTL(Ga(G,"rtl",!1)),this.setRadius(k),this.setIteration(Ga(k,"iteration",void 0)),this.setValue(V)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,s){return this.trackStrokeThickness=t,this.trackStrokeColor=s,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get orientation(){return this._orientation}set orientation(t){t=Wn(t),this.dirty=this.dirty||this._orientation!=t,this._orientation=t}setOrientation(t){return this.orientation=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get radius(){return this.rrGeom.radius}set radius(t){this.rrGeom.setRadius(t),this.dirty=!0}get radiusTL(){return this.rrGeom.radiusTL}set radiusTL(t){this.rrGeom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.rrGeom.radiusTR}set radiusTR(t){this.rrGeom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.rrGeom.radiusBL}set radiusBL(t){this.rrGeom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.rrGeom.radiusBR}set radiusBR(t){this.rrGeom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.rrGeom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}}var L5={updateShapes:D5};Object.assign(Jp.prototype,L5),T.register("roundRectanleProgress",function(e,t,s,l,w,S,k,D){var V=new Jp(this.scene,e,t,s,l,w,S,k,D);return this.scene.add.existing(V),V}),K(window,"RexPlugins.UI.RoundRectangleProgress",Jp);var F5=function(e,t){e.save(),e.beginPath();var s=t[0];e.moveTo(s.x,s.y);for(var l=1,w=t.length;l<w;l++)s=t[l],e.lineTo(s.x,s.y);e.closePath(),e.restore()},Zp=function(e,t,s,l,w,S,k){k===void 0&&(k="round"),F5(t,s),t.lineJoin=k,l!=null&&(t.fillStyle=l,t.fill()),w!=null&&(t.strokeStyle=w,t.lineWidth=S,t.stroke())},B5=function(){var e=this.skewX,t=this.width-Math.abs(e),s=this.height,l=this.canvas,w=this.context;(this.trackColor||this.trackStrokeColor)&&Nx(0,0,t,s,e,this.trackPoints);var S,k;if(this.barColor&&(this.rtl?(S=t*(1-this.value),k=t):(S=0,k=t*this.value),Nx(S,0,k,s,e,this.barPoints)),this.trackColor&&(w.save(),Zp(l,w,this.trackPoints,this.trackColor),w.restore()),this.barColor){w.save();var D;if(this.barColor2){var V;if(this.isHorizontalGradient){var G=s/2;V=w.createLinearGradient(S,G,k,G)}else{var j=t/2;V=w.createLinearGradient(j,0,j,s)}V.addColorStop(0,this.rtl?this.barColor:this.barColor2),V.addColorStop(1,this.rtl?this.barColor2:this.barColor),D=V}else D=this.barColor;Zp(l,w,this.barPoints,D),w.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(w.save(),Zp(l,w,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),w.restore())},Nx=function(e,t,s,l,w,S){S===void 0&&(S=[]),S.length=4;for(var k=0;k<4;k++)S[k]||(S[k]={});var D;return w>=0?(D=S[0],D.x=e+w,D.y=t,D=S[1],D.x=s+w,D.y=t,D=S[2],D.x=s,D.y=l,D=S[3],D.x=e,D.y=l):(D=S[0],D.x=e,D.y=t,D=S[1],D.x=s,D.y=t,D=S[2],D.x=s-w,D.y=l,D=S[3],D.x=e-w,D.y=l),S};const Qe=Phaser.Utils.Objects.GetValue,tf=Phaser.Utils.Objects.IsPlainObject;class ef extends an($r){constructor(t,s,l,w,S,k,D,V){tf(s)?(V=s,s=Qe(V,"x",0),l=Qe(V,"y",0),w=Qe(V,"width",2),S=Qe(V,"height",2),k=Qe(V,"barColor",void 0),D=Qe(V,"value",0)):tf(w)?(V=w,w=Qe(V,"width",2),S=Qe(V,"height",2),k=Qe(V,"barColor",void 0),D=Qe(V,"value",0)):tf(k)&&(V=k,k=Qe(V,"barColor",void 0),D=Qe(V,"value",0));var G=Qe(V,"resolution",1);super(t,s,l,w,S,G),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(V),this.setTrackColor(Qe(V,"trackColor",void 0)),this.setBarColor(k,Qe(V,"barColor2",void 0),Qe(V,"isHorizontalGradient",void 0)),this.setTrackStroke(Qe(V,"trackStrokeThickness",2),Qe(V,"trackStrokeColor",void 0)),this.setSkewX(Qe(V,"skewX",0)),this.setRTL(Qe(V,"rtl",!1)),this.setValue(D)}get trackColor(){return this._trackColor}set trackColor(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,s){return this.trackStrokeThickness=t,this.trackStrokeColor=s,this}get barColor(){return this._barColor}set barColor(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=Xt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,s,l){return l===void 0&&(l=!0),this.barColor=t,this.barColor2=s,this.isHorizontalGradient=l,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return super.updateTexture(function(){this.clear(),B5.call(this)},this),this}}T.register("circularProgressCanvas",function(e,t,s,l,w,S,k){var D=new ef(this.scene,e,t,s,l,w,S,k);return this.scene.add.existing(D),D}),K(window,"RexPlugins.UI.LineProgressCanvas",ef),Phaser.Math.Wrap;const Ua=Phaser.Math.Linear;var N5=function(){var e=this.getShape("triangle"),t=this.padding,s=this.width-t.right,l=0+t.left,w=this.height-t.bottom,S=0+t.top,k=(l+s)/2,D=(S+w)/2,V={0:{a:{x:l,y:S},b:{x:s,y:D},c:{x:l,y:w}},1:{a:{x:l,y:S},b:{x:k,y:w},c:{x:s,y:S}},2:{a:{x:s,y:S},b:{x:l,y:D},c:{x:s,y:w}},3:{a:{x:l,y:w},b:{x:k,y:S},c:{x:s,y:w}}},G,j,tt,st,rt,ot;if(this.previousDirection===void 0){var ut=V[this.direction],ct=ut.a,pt=ut.b,mt=ut.c;G=ct.x,j=ct.y,tt=pt.x,st=pt.y,rt=mt.x,ot=mt.y}else{var yt=V[this.previousDirection],St=V[this.direction],Ct=this.easeDirectionProgress;G=Ua(yt.a.x,St.a.x,Ct),j=Ua(yt.a.y,St.a.y,Ct),tt=Ua(yt.b.x,St.b.x,Ct),st=Ua(yt.b.y,St.b.y,Ct),rt=Ua(yt.c.x,St.c.x,Ct),ot=Ua(yt.c.y,St.c.y,Ct)}e.startAt(G,j).lineTo(tt,st).lineTo(rt,ot),this.arrowOnly?e.end():e.close()};const Y5=Phaser.Math.DegToRad,Cu=Y5(120);var V5=function(t){var t=this.getShape("triangle"),s=this.width/2,l=this.height/2,w=Math.min(s,l)*this.radius,S=this.verticeRotation;t.startAt(s+w*Math.cos(S+Cu),l+w*Math.sin(S+Cu)).lineTo(s+w*Math.cos(S),l+w*Math.sin(S)).lineTo(s+w*Math.cos(S-Cu),l+w*Math.sin(S-Cu)),this.arrowOnly?t.end():t.close()},z5={buildShapes(){this.addShape(new mi().setName("triangle"))},updateShapes(){var e=this.getShape("triangle");this.arrowOnly?e.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):e.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?N5.call(this):V5.call(this)}},G5={setEaseDuration(e){return e===void 0&&(e=0),this.easeDuration=e,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new _s(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}};const Wa=Phaser.Utils.Objects.GetValue,U5=Phaser.Utils.Objects.IsPlainObject,W5=Phaser.Math.DegToRad,X5=Phaser.Math.RadToDeg;class vh extends Pr{constructor(t,s,l,w,S,k,D){var V,G,j,tt,st,rt,ot,ut;if(U5(s)){var ct=s;s=ct.x,l=ct.y,w=ct.width,S=ct.height,k=ct.color,D=ct.alpha,V=ct.strokeColor,G=ct.strokeAlpha,j=ct.strokeWidth,tt=ct.arrowOnly,st=ct.direction,rt=ct.easeDuration,ot=ct.padding,ut=ct.radius}s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=1),S===void 0&&(S=w),tt===void 0&&(tt=!1),st===void 0&&(st=0),rt===void 0&&(rt=0),ot===void 0&&(ot=0),ut===void 0&&(ut=void 0),super(t,s,l,w,S),this.type="rexTriangle",this.setFillStyle(k,D),V!==void 0&&j===void 0&&(j=2),this.setStrokeStyle(j,V,G),this.setArrowOnly(tt),this.setDirection(st,rt),this.setPadding(ot),this.setRadius(ut),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=H5(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,s){return s!==void 0&&this.setEaseDuration(s),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,s,l,w){if(typeof t=="object"){var S=t,k=Wa(S,"x",null);k!==null?(t=k,l=k):(t=Wa(S,"left",0),l=Wa(S,"right",t));var D=Wa(S,"y",null);D!==null?(s=D,w=D):(s=Wa(S,"top",0),w=Wa(S,"bottom",s))}else t===void 0&&(t=0),s===void 0&&(s=t),l===void 0&&(l=t),w===void 0&&(w=s);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=s||this.padding.right!=l||this.padding.bottom!=w,this.padding.left=t,this.padding.top=s,this.padding.right=l,this.padding.bottom=w,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return X5(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=W5(t)}setVerticeAngle(t){return this.verticeAngle=t,this}}const j5={right:0,down:1,left:2,up:3};var H5=function(e){return typeof e=="string"&&(e=j5[e]),e=e%4,e};Object.assign(vh.prototype,z5,G5),T.register("triangle",function(e,t,s,l,w,S){var k=new vh(this.scene,e,t,s,l,w,S);return this.scene.add.existing(k),k}),K(window,"RexPlugins.UI.Triangle",vh),Mt();const $5=Phaser.GameObjects.Zone,q5=Phaser.Utils.Array.Add,K5=Phaser.Utils.Array.Remove;let mh=class extends $5{constructor(e,t,s,l,w){t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=1),w===void 0&&(w=1),super(e,t,s,l,w),this.children=[]}destroy(e){if(!(!this.scene||this.ignoreDestroy)){if(e)for(var t,s=this.children.length-1;s>=0;s--)t=this.children[s],!t.parentContainer&&!t.displayList&&t.destroy(e);this.clear(!e),super.destroy(e)}}contains(e){return this.children.indexOf(e)!==-1}add(e){var t=this;return q5(this.children,e,0,function(s){s.once("destroy",t.onChildDestroy,t)},this),this}remove(e,t){var s=this;return K5(this.children,e,function(l){l.off("destroy",s.onChildDestroy,s),t&&l.destroy()}),this}onChildDestroy(e,t){this.remove(e,!1)}clear(e){for(var t=this,s,l=0,w=this.children.length;l<w;l++)s=this.children[l],s.off("destroy",t.onChildDestroy,t),e&&s.destroy();return this.children.length=0,this}};const Yx=Phaser.GameObjects.Components;Phaser.Class.mixin(mh,[Yx.Alpha,Yx.Flip]);var Qi=function(e,t){var s;if(t===void 0)e.hasOwnProperty("rexContainer")&&(s=e.rexContainer.parent);else for(s=Qi(e);s&&s.name!==t;)s=Qi(s);return s},Vx=function(e){for(var t=Qi(e);t;)e=t,t=Qi(t);return e};const Q5=Phaser.Math.DegToRad,J5=Phaser.Math.RadToDeg;var Kt=function(e){if(!e.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,syncScrollFactor:!0,syncCameraFilter:!0,syncDisplayList:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return J5(this.rotation)},set:function(s){this.rotation=Q5(s)}}),Object.defineProperty(t,"displayWidth",{get:function(){return e.width*this.scaleX},set:function(s){this.scaleX=s/e.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return e.height*this.scaleY},set:function(s){this.scaleY=s/e.height}}),e.rexContainer=t}return e.rexContainer},Z5={setParent(e,t){t===void 0&&(t=this);var s=Kt(e);return t?(s.parent=t,s.self=e):(s.parent=null,s.self=null),this},getParent(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),Qi(e,t)},getTopmostParent(e){return e===void 0&&(e=this),Vx(e)}};const Xn=Phaser.Utils.Objects.GetValue,zx=mh.prototype.add;var Gx=function(e,t){this.setParent(e);var s=Kt(e);return Ux(s,t),this.resetChildState(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e).updateCameraFilter(e),zx.call(this,e),Wx.call(this,e,s),this},sf=function(e,t){this.setParent(e);var s=Kt(e);return Ux(s,t),s.x=e.x,s.y=e.y,s.rotation=e.rotation,s.scaleX=e.scaleX,s.scaleY=e.scaleY,s.alpha=e.alpha,s.visible=e.visible,s.active=e.active,this.updateChildPosition(e).updateChildAlpha(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e),zx.call(this,e),Wx.call(this,e,s),this},Ux=function(e,t){t===void 0&&(t=!0),typeof t=="boolean"?(e.syncPosition=t,e.syncRotation=t,e.syncScale=t,e.syncAlpha=t,e.syncScrollFactor=t,e.syncCameraFilter=t,e.syncDisplayList=t):(e.syncPosition=Xn(t,"syncPosition",!0),e.syncRotation=Xn(t,"syncRotation",!0),e.syncScale=Xn(t,"syncScale",!0),e.syncAlpha=Xn(t,"syncAlpha",!0),e.syncScrollFactor=Xn(t,"syncScrollFactor",!0),e.syncCameraFilter=Xn(t,"syncCameraFilter",!0),e.syncDisplayList=Xn(t,"syncDisplayList",!0))},Wx=function(e,t){this.addToParentContainer(e),t.syncDisplayList&&this.addToPatentLayer(e),this.addToRenderLayer(e)},tI={add(e){return Array.isArray(e)?this.addMultiple(e):Gx.call(this,e),this},pin(e,t){return Array.isArray(e)?this.addMultiple(e,t):Gx.call(this,e,t),this},addMultiple(e){for(var t=Array.from(arguments),s=0,l=e.length;s<l;s++)t[0]=e[s],this.add.apply(this,t);return this},addLocal(e){return Array.isArray(e)?this.addMultiple(e):sf.call(this,e),this},pinLocal(e,t){return Array.isArray(e)?this.addMultiple(e,t):sf.call(this,e,t),this},addLocalMultiple(e){for(var t=0,s=e.length;t<s;t++)sf.call(this,e[t]);return this}};const Xx=mh.prototype.remove,eI=mh.prototype.clear;var iI={remove(e,t){return Qi(e)!==this?this:(this.setParent(e,null),t||this.removeFromRenderLayer(e),Xx.call(this,e,t),this)},unpin(e,t){return Qi(e)!==this?this:(this.setParent(e,null),t||this.removeFromRenderLayer(e),Xx.call(this,e,t),this)},clear(e){for(var t=this.children,s=0,l=t.length;s<l;s++){var w=t[s];this.setParent(w,null),e||this.removeFromRenderLayer(w)}return eI.call(this,e),this}},sI={getLocalState(e){return Kt(e)},resetChildState(e){return this.resetChildPositionState(e).resetChildVisibleState(e).resetChildAlphaState(e).resetChildActiveState(e),this},resetChildrenState(e){for(var t=0,s=e.length;t<s;t++)this.resetChildState(e[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},rI={worldToLocal(e){e.x-=this.x,e.y-=this.y;var t=Math.cos(-this.rotation),s=Math.sin(-this.rotation),l=e.x,w=e.y;return e.x=l*t-w*s,e.y=l*s+w*t,e.x/=this.scaleX,e.y/=this.scaleY,e},localToWorld(e){e.x*=this.scaleX,e.y*=this.scaleY;var t=Math.cos(this.rotation),s=Math.sin(this.rotation),l=e.x,w=e.y;return e.x=l*t-w*s,e.y=l*s+w*t,e.x+=this.x,e.y+=this.y,e}},yh=function(e,t){return e===t?1:e/t},nI={updateChildPosition(e){e.isRexContainerLite&&(e.syncChildrenEnable=!1);var t=Kt(e),s=t.parent;return t.syncPosition&&(e.x=t.x,e.y=t.y,s.localToWorld(e)),t.syncRotation&&(e.rotation=t.rotation+s.rotation),t.syncScale&&(e.scaleX=t.scaleX*s.scaleX,e.scaleY=t.scaleY*s.scaleY),e.isRexContainerLite&&(e.syncChildrenEnable=!0,e.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(e){var t=Kt(e),s=t.parent;return t.x=e.x,t.y=e.y,s.worldToLocal(t),t.scaleX=yh(e.scaleX,s.scaleX),t.scaleY=yh(e.scaleY,s.scaleY),t.rotation=e.rotation-s.rotation,this},setChildPosition(e,t,s){return e.x=t,e.y=s,this.resetChildPositionState(e),this},setChildLocalPosition(e,t,s){var l=Kt(e);return l.x=t,l.y=s,this.updateChildPosition(e),this},resetLocalPositionState(){var e=Kt(this).parent;return e&&e.resetChildPositionState(this),this},getChildLocalX(e){var t=Kt(e);return t.x},getChildLocalY(e){var t=Kt(e);return t.y}};const aI=Phaser.Math.DegToRad;var oI={updateChildRotation(e){var t=Kt(e),s=t.parent;return t.syncRotation&&(e.rotation=s.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(e){var t=Kt(e),s=t.parent;return t.rotation=e.rotation-s.rotation,this},setChildRotation(e,t){return e.rotation=t,this.resetChildRotationState(e),this},setChildAngle(e,t){return e.angle=t,this.resetChildRotationState(e),this},setChildLocalRotation(e,t){var s=Kt(e);return s.rotation=t,this.updateChildRotation(e),this},setChildLocalAngle(e,t){var s=Kt(e);return s.rotation=aI(t),this.updateChildRotation(e),this},resetLocalRotationState(){var e=Kt(this).parent;return e&&e.resetChildRotationState(this),this},getChildLocalRotation(e){var t=Kt(e);return t.rotation}},hI={updateChildScale(e){var t=Kt(e),s=t.parent;return t.syncScale&&(e.scaleX=s.scaleX*t.scaleX,e.scaleY=s.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(e){var t=Kt(e),s=t.parent;return t.scaleX=yh(e.scaleX,s.scaleX),t.scaleY=yh(e.scaleY,s.scaleY),this},setChildScale(e,t,s){return s===void 0&&(s=t),e.scaleX=t,e.scaleY=s,this.resetChildScaleState(e),this},setChildLocalScale(e,t,s){s===void 0&&(s=t);var l=Kt(e);return l.scaleX=t,l.scaleY=s,this.updateChildScale(e),this},setChildDisplaySize(e,t,s){return e.setDisplaySize(t,s),this.resetChildScaleState(e),this},resetLocalScaleState(){var e=Kt(this).parent;return e&&e.resetChildScaleState(this),this},getChildLocalScaleX(e){var t=Kt(e);return t.scaleX},getChildLocalScaleY(e){var t=Kt(e);return t.scaleY}},lI={updateChildVisible(e){var t=Kt(e),s=t.parent,l=t.hasOwnProperty("maskVisible")?t.maskVisible:!0,w=s?s.visible:!0;return e.visible=w&&t.visible&&l,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(e){var t=Kt(e);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=e.visible,this},setChildVisible(e,t){return this.setChildLocalVisible(e,t),this},setChildLocalVisible(e,t){t===void 0&&(t=!0);var s=Kt(e);return s.visible=t,this.updateChildVisible(e),this},setChildMaskVisible(e,t){t===void 0&&(t=!0);var s=Kt(e);return s.maskVisible=t,this.updateChildVisible(e),this},resetLocalVisibleState(){var e=Kt(this).parent;return e&&e.resetChildVisibleState(this),this},getChildLocalVisible(e){var t=Kt(e);return t.visible}},uI={updateChildAlpha(e){var t=Kt(e),s=t.parent;return t.syncAlpha&&(e.alpha=s.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(e){var t=Kt(e),s=t.parent;return t.alpha=yh(e.alpha,s.alpha),this},setChildAlpha(e,t){return e.alpha=t,this.resetChildAlphaState(e),this},setChildLocalAlpha(e,t){var s=Kt(e);return s.alpha=t,this.updateChildAlpha(e),this},resetLocalAlphaState(){var e=Kt(this).parent;return e&&e.resetChildAlphaState(this),this},getChildLocalAlpha(e){var t=Kt(e);return t.alpha}},cI={updateChildActive(e){var t=Kt(e),s=t.parent;return e.active=s.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(e){var t=Kt(e);return t.active=e.active,this},setChildActive(e,t){return e.active=t,this.resetChildActiveState(e),this},setChildLocalActive(e,t){t===void 0&&(t=!0);var s=Kt(e);return s.active=t,this.updateChildActive(e),this},resetLocalActiveState(){var e=Kt(this).parent;return e&&e.resetChildActiveState(this),this},getChildLocalActive(e){var t=Kt(e);return t.active}},dI={updateChildScrollFactor(e){var t=Kt(e),s=t.parent;return t.syncScrollFactor&&(e.scrollFactorX=s.scrollFactorX,e.scrollFactorY=s.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},pI={updateCameraFilter(e){var t=Kt(e),s=t.parent;return t.syncCameraFilter&&(e.cameraFilter=s.cameraFilter),this},syncCameraFilter(){return this.syncChildrenEnable&&this.children.forEach(this.updateCameraFilter,this),this}},fI={updateChildMask(e){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==e&&(e.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(e){return this.mask=e,this},clearMask(e){e===void 0&&(e=!1);var t=this;return this._mask=null,this.setChildMaskVisible(this),this.children.forEach(function(s){s.clearMask&&s.clearMask(!1),s.hasOwnProperty("isRexContainerLite")||t.setChildMaskVisible(s)}),e&&this.mask&&this.mask.destroy(),this}},Pu=function(e){return e.filter(function(t){if(t.displayList||t.parentContainer)return!0})},gI={setDepth(e,t){if(this.depth=e,!t&&this.children)for(var s=this.getAllChildren(),l=0,w=s.length;l<w;l++)s[l].depth=e;return this},swapDepth(e){var t=this.depth,s=e.depth;return this.setDepth(s),e.setDepth(t),this},incDepth(e){if(this.depth+=e,this.children)for(var t=this.getAllChildren(),s=0,l=t.length;s<l;s++)t[s].depth+=e;return this},bringToTop(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);ls(t,!1);for(var s=0,l=t.length;s<l;s++){var w=t[s];e.exists(w)&&e.bringToTop(w)}return this},bringMeToTop(){return this.bringToTop()},sendToBack(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);ls(t,!0);for(var s=0,l=t.length;s<l;s++){var w=t[s];e.exists(w)&&e.sendToBack(w)}return this},sendMeToBack(){return this.sendToBack()},moveDepthBelow(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var s=this.getAllChildren([this]);ls(s,!1);for(var l=0,w=s.length;l<w;l++){var S=s[l];if(t.exists(S)){t.moveBelow(e,S);break}}return this},moveMyDepthBelow(e){return this.moveDepthBelow(e)},moveDepthAbove(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var s=this.getAllChildren([this]);ls(s,!0);for(var l=0,w=s.length;l<w;l++){var S=s[l];if(t.exists(S)){t.moveAbove(e,S);break}}return this},moveMyDepthAbove(e){return this.moveDepthAbove(e)},bringChildToTop(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=Pu(t),t=ls(t,!1)):t=[e];var s=this.getAllChildren([this]);s=Pu(s),s=ls(s,!1);for(var l=s[s.length-1],w=0,S=t.length;w<S;w++){var k=t[w];l!==k&&(k!==this&&l.displayList!==k.displayList||(l.displayList.moveAbove(k,l),l=k))}return this},sendChildToBack(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=Pu(t),t=ls(t,!1)):t=[e];var s=this.getAllChildren([this]);s=Pu(s),s=ls(s,!1);for(var l=s[0],w=t.length-1;w>=0;w--){var S=t[w];l!==S&&(S!==this&&l.displayList!==S.displayList||(l.displayList.moveBelow(S,l),l=S))}return this}},jx=function(e,t){var s=t(e);if(!s&&e.isRexContainerLite)for(var l=e.children,w=0,S=l.length;w<S;w++)jx(l[w],t)},rf=function(e,t){for(var s=[e];s.length>0;){var l=s.shift(),w=t(l);!w&&l.isRexContainerLite&&s.push(...l.children)}};const jn=Phaser.Utils.Array;var vI={getChildren(e){if(!e)e=this.children;else for(var t=0,s=this.children.length;t<s;t++)e.push(this.children[t]);return e},getAllChildren(e){e===void 0&&(e=[]);var t=this;return rf(t,function(s){s!==t&&e.push(s)}),e},getAllVisibleChildren(e){e===void 0&&(e=[]);var t=this;return rf(t,function(s){if(s!==t){if(!s.visible)return!0;e.push(s)}}),e},bfs(e,t){return t===void 0&&(t=this),rf(t,e),this},dfs(e,t){return t===void 0&&(t=this),jx(t,e),this},contains(e){var t=Qi(e);return t?t===this?!0:this.contains(t):!1},getByName(e,t){if(t){for(var s=[this],l,w;s.length;){l=s.shift();for(var S=0,k=l.children.length;S<k;S++){if(w=l.children[S],w.name===e)return w;w.isRexContainerLite&&s.push(w)}}return null}else return jn.GetFirst(this.children,"name",e)},getRandom(e,t){return jn.GetRandom(this.children,e,t)},getFirst(e,t,s,l){return jn.GetFirstElement(this.children,e,t,s,l)},getAll(e,t,s,l){return jn.GetAll(this.children,e,t,s,l)},count(e,t,s,l){return jn.CountAllMatching(this.children,e,t,s,l)},swap(e,t){return jn.Swap(this.children,e,t),this},setAll(e,t,s,l){return jn.SetAll(this.children,e,t,s,l),this}},Hx=function(e){for(var t=[],s=0,l=e.length;s<l;s++){var w=e[s];w.hasOwnProperty("rexContainer")&&t.push(w.rexContainer)}return t},mI=function(e){for(var t=0,s=e.length;t<s;t++){var l=e[t].scene;if(l)return l}return null},$x=function(e,t,s){if(!s.parent){e.remove();return}var l=s.parent,w=s.self;switch(t){case"x":case"y":l.updateChildPosition(w);break;case"angle":case"rotation":l.updateChildRotation(w);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":l.updateChildScale(w);break;case"alpha":l.updateChildAlpha(w);break;default:l.updateChildPosition(w),l.updateChildRotation(w),l.updateChildScale(w),l.updateChildAlpha(w);break}},yI={tweenChild(e){var t=e.targets;Array.isArray(t)||(t=[t]);var s=this.scene||mI(t);if(s){e.targets=Hx(t);var l=s.tweens.add(e);return l.on("update",$x),l}},tweenSelf(e){return e.targets=[this],this.tweenChild(e)},createTweenChildConfig(e){var t=e.targets;t&&(Array.isArray(t)||(t=[t]),e.targets=Hx(t));var s=e.onUpdate;return e.onUpdate=function(l,w){s&&s(l,w),$x(l,void 0,w)},e},tween(e){var t=this.scene;return e.targets||(e.targets=this),t.tweens.add(e)}};const xI=Phaser.GameObjects.Container;var bI=function(e){return e instanceof xI},qx=function(e){var t=e.getAllChildren([e]);return t=t.filter(function(s){return!!s.displayList||!!s.parentContainer}),t},Kx=function(e){var t=qx(this);t.indexOf(this)===-1&&t.push(this),ls(t),e.add(t)},Qx=function(e,t,s){if(this.scene){var l=qx(this);ls(l,t),e.remove(l),s&&l.forEach(function(w){w.addToDisplayList()})}},wI={addToContainer(e){return bI(e)?(this._setParentContainerFlag=!0,Kx.call(this,e),this._setParentContainerFlag=!1,this):this},addToLayer(e){return Zo(e)?(Kx.call(this,e),this):this},removeFromContainer(){return this.parentContainer?(this._setParentContainerFlag=!0,Qx.call(this,this.parentContainer,!0,!1),this._setParentContainerFlag=!1,this):this},removeFromLayer(e){return e===void 0&&(e=!0),Zo(this.displayList)?(Qx.call(this,this.displayList,!1,e),this):this},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var e=this.getParent();e;){var t=e.parentContainer;if(t)return t;e=e.getParent()}return null},addToParentContainer(e){if(!e.displayList)return this;var t=this.getParentContainer();return t?(e.isRexContainerLite?e.addToContainer(t):t.add(e),this):this},addToPatentLayer(e){if(!e.displayList)return this;var t=this.displayList;return t===e.displayList?this:(Zo(t)&&(e.isRexContainerLite?e.addToLayer(t):t.add(e)),this)}},SI={hasLayer(){return!!this.privateRenderLayer},enableLayer(){if(this.hasLayer())return this;var e=this.scene.add.layer();return this.moveDepthBelow(e),this.addToLayer(e),this.privateRenderLayer=e,this},getLayer(){return this.hasLayer()||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.hasLayer())return this.privateRenderLayer;for(var e=this.getParent();e;){var t=e.privateRenderLayer;if(t)return t;e=e.getParent()}return null},addToRenderLayer(e){if(!e.displayList)return this;var t=this.getRenderLayer();if(!t)return this;if(t===e.displayList)return this;e.isRexContainerLite?e.addToLayer(t):t.add(e);var s=Kt(e);return s.layer=t,this},removeFromRenderLayer(e){var t=Kt(e),s=t.layer;return s?(e.isRexContainerLite?e.removeFromLayer(!0):s.remove(e),t.layer=null,this):this}};const Jx=Phaser.Geom.Rectangle,TI=Phaser.Geom.Rectangle.Union;var CI=function(e,t){t===void 0?t=new Jx:t===!0&&(nf===void 0&&(nf=new Jx),t=nf),t.setTo(0,0,0,0);for(var s,l=!0,w=0,S=e.length;w<S;w++)if(s=e[w],!!s.getBounds){var k=xp(s,!0);l?(t.setTo(k.x,k.y,k.width,k.height),l=!1):TI(k,t,t)}return t},nf,Hn=Phaser.Utils.Objects.GetValue,af=function(e){if(e){var t=e.gameObjects,s=e.renderTexture,l=e.saveTexture,w=Hn(e,"x",void 0),S=Hn(e,"y",void 0),k=Hn(e,"width",void 0),D=Hn(e,"height",void 0),V=Hn(e,"originX",0),G=Hn(e,"originY",0),j=Hn(e,"padding",0),tt,st;if(k===void 0||D===void 0||w===void 0||S===void 0){var rt=CI(t,!0),ot=w!==void 0&&S!==void 0;ot?(k=Math.max(w-rt.left,rt.right-w)*2,D=Math.max(S-rt.top,rt.bottom-S)*2,V=.5,G=.5):(w=rt.x,S=rt.y,k=rt.width,D=rt.height,V=0,G=0),tt=rt.x,st=rt.y}else tt=w+(0-V)*k,st=S+(0-G)*D;tt-=j,st-=j,k+=j*2,D+=j*2;var ut=t[0].scene,ct=ut.sys.textures;return l&&!s&&(s=ct.addDynamicTexture(l,k,D)),s||(s=ut.add.renderTexture(0,0,k,D)),s.setPosition&&s.setPosition(w,S),(s.width!==k||s.height!==D)&&s.setSize(k,D),s.setOrigin&&s.setOrigin(V,G),s.camera.setScroll(tt,st),t=ls(Ms(t)),s.draw(t),l&&(Ui(s)?s.saveTexture(l):s.key!==l&&ct.renameTexture(s.key,key)),s}},PI={snapshot(e){var t=this.scaleX,s=this.scaleY,l=t===1&&s===1;l||this.setScale(1),e===void 0&&(e={}),e.gameObjects=this.getAllVisibleChildren(),e.x=this.x,e.y=this.y,e.originX=this.originX,e.originY=this.originY;var w=af(e),S=!!w.scene;return l||(this.setScale(t,s),S&&w.setScale(t,s)),S?w:this}};const Zx=Phaser.Utils.Objects.GetValue;var MI=function(e,t){var s=Zx(t,"drawContainer",!0),l=Zx(t,"children");return l===void 0&&(l=this.getAllVisibleChildren([this])),s||(l=l.filter(function(w){return!w.isRexContainerLite})),Z0(l,e,t),this};const _I=Phaser.Math.RotateAround;var kI=function(e,t,s){s===void 0&&(s=t);var l={x:(t-e.originX)*e.displayWidth,y:(s-e.originY)*e.displayHeight};return _I(l,0,0,e.rotation),e.originX=t,e.originY=s,e.x=e.x+l.x,e.y=e.y+l.y,e},OI=function(e,t){this.syncChildrenEnable=!1,kI(this,e,t),this.syncChildrenEnable=!0;for(var s=this.getAllChildren(),l=0,w=s.length;l<w;l++)this.resetChildPositionState(s[l]);return this},t1={changeOrigin:OI,drawBounds:MI};Object.assign(t1,Z5,tI,iI,sI,rI,nI,oI,hI,lI,uI,cI,dI,pI,fI,gI,vI,yI,wI,SI,PI);class Ji extends mh{constructor(t,s,l,w,S,k){Array.isArray(w)&&(k=w,w=void 0,S=void 0),super(t,s,l,w,S),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this._cameraFilter=0,this.privateRenderLayer=void 0,k&&this.add(k)}destroy(t){!this.scene||this.ignoreDestroy||(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&this.privateRenderLayer.scene&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,s){return this.setSize(t,s),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get cameraFilter(){return this._cameraFilter}set cameraFilter(t){this._cameraFilter!==t&&(this._cameraFilter=t,this.syncCameraFilter())}get list(){return this.children}static GetParent(t){return Qi(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=Qi(this);return t?t.setParentContainerFlag:!1}}Object.assign(Ji.prototype,t1);var Mu=function(e){return e.hasOwnProperty("rexSizer")||(e.rexSizer={}),e.rexSizer};function EI(e){return e===void 0&&(e=this),Mu(e)}var AI=function(e){var t=Mu(e);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},RI=function(e){return e===void 0&&(e=Aa(this.scene)),this.left=Math.max(this.left,e.left),this.right=Math.min(this.right,e.right),this.top=Math.max(this.top,e.top),this.bottom=Math.min(this.bottom,e.bottom),this};const Ve=Phaser.Display.Align;var Xa={center:Ve.CENTER,left:Ve.LEFT_CENTER,right:Ve.RIGHT_CENTER,top:Ve.TOP_CENTER,bottom:Ve.BOTTOM_CENTER,"left-top":Ve.TOP_LEFT,"top-left":Ve.TOP_LEFT,"left-center":Ve.LEFT_CENTER,"center-left":Ve.LEFT_CENTER,"left-bottom":Ve.BOTTOM_LEFT,"bottom-left":Ve.BOTTOM_LEFT,"center-top":Ve.TOP_CENTER,"top-center":Ve.TOP_CENTER,"center-center":Ve.CENTER,"center-bottom":Ve.BOTTOM_CENTER,"bottom-center":Ve.BOTTOM_CENTER,"right-top":Ve.TOP_RIGHT,"top-right":Ve.TOP_RIGHT,"right-center":Ve.RIGHT_CENTER,"center-right":Ve.RIGHT_CENTER,"right-bottom":Ve.BOTTOM_RIGHT,"bottom-right":Ve.BOTTOM_RIGHT},of=new Phaser.GameObjects.Zone({sys:{queueDepthSort:n,events:{once:n}}},0,0,1,1);of.setOrigin(0);var _r={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_CENTER:4,CENTER:6,RIGHT_CENTER:8,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},hf=function(e){var t=ue(e);return e.y+t-t*e.originY},lf=function(e){var t=le(e);return e.x-t*e.originX+t*.5},uf=function(e,t){var s=ue(e);return e.y=t-s+s*e.originY,e},cf=function(e,t){var s=le(e),l=s*e.originX;return e.x=t+l-s*.5,e},DI=function(e,t,s,l){return s===void 0&&(s=0),l===void 0&&(l=0),cf(e,lf(t)+s),uf(e,hf(t)+l),e},df=function(e){var t=le(e);return e.x-t*e.originX},pf=function(e,t){var s=le(e);return e.x=t+s*e.originX,e},II=function(e,t,s,l){return s===void 0&&(s=0),l===void 0&&(l=0),pf(e,df(t)-s),uf(e,hf(t)+l),e},ff=function(e){var t=le(e);return e.x+t-t*e.originX},gf=function(e,t){var s=le(e);return e.x=t-s+s*e.originX,e},LI=function(e,t,s,l){return s===void 0&&(s=0),l===void 0&&(l=0),gf(e,ff(t)+s),uf(e,hf(t)+l),e},vf=function(e,t){var s=ue(e),l=s*e.originY;return e.y=t+l-s*.5,e},FI=function(e,t,s){return cf(e,t),vf(e,s)},mf=function(e){var t=ue(e);return e.y-t*e.originY+t*.5},BI=function(e,t,s,l){return s===void 0&&(s=0),l===void 0&&(l=0),FI(e,lf(t)+s,mf(t)+l),e},NI=function(e,t,s,l){return s===void 0&&(s=0),l===void 0&&(l=0),pf(e,df(t)-s),vf(e,mf(t)+l),e},YI=function(e,t,s,l){return s===void 0&&(s=0),l===void 0&&(l=0),gf(e,ff(t)+s),vf(e,mf(t)+l),e},yf=function(e){var t=ue(e);return e.y-t*e.originY},xf=function(e,t){var s=ue(e);return e.y=t+s*e.originY,e},VI=function(e,t,s,l){return s===void 0&&(s=0),l===void 0&&(l=0),cf(e,lf(t)+s),xf(e,yf(t)-l),e},zI=function(e,t,s,l){return s===void 0&&(s=0),l===void 0&&(l=0),pf(e,df(t)-s),xf(e,yf(t)-l),e},GI=function(e,t,s,l){return s===void 0&&(s=0),l===void 0&&(l=0),gf(e,ff(t)+s),xf(e,yf(t)-l),e},Qs=[];Qs[_r.BOTTOM_CENTER]=DI,Qs[_r.BOTTOM_LEFT]=II,Qs[_r.BOTTOM_RIGHT]=LI,Qs[_r.CENTER]=BI,Qs[_r.LEFT_CENTER]=NI,Qs[_r.RIGHT_CENTER]=YI,Qs[_r.TOP_CENTER]=VI,Qs[_r.TOP_LEFT]=zI,Qs[_r.TOP_RIGHT]=GI;var e1=function(e,t,s,l,w){return Qs[s](e,t,l,w)},xh=function(e,t,s,l,w,S){of.setPosition(t,s).setSize(l,w),e1(e,of,S)};const ja=Phaser.Utils.Objects.GetValue,UI=Phaser.GameObjects.Group,WI=Phaser.GameObjects.Container;var XI=function(e,t){var s=e.scene,l,w,S,k,D;if(typeof t=="number")l=t;else{l=ja(t,"color"),w=ja(t,"lineWidth");var V=ja(t,"name",!1);V&&(S=ja(V,"createTextCallback",jI),k=ja(V,"createTextCallbackScope",void 0),D=ja(V,"align","left-top"),typeof D=="string"&&(D=Xa[D]))}if(l===void 0&&(l=16777215),w===void 0&&(w=1),S&&!e.children){e.children=new UI(s),e.once("destroy",function(ut,ct){ut.children.destroy(!ct),ut.children=void 0});var G=e.clear.bind(e);e.clear=function(){G(),e.children.clear(!1,!0)}}var j=this.getAllShownChildren([this]);i1(j,j);for(var tt,st,rt=0,ot=j.length;rt<ot;rt++){if(tt=j[rt],tt.getBounds||tt.width!==void 0&&tt.height!==void 0)$n=xp(tt,$n);else continue;l!=null&&e.lineStyle(w,l).strokeRectShape($n),tt.name&&S&&(k?st=S.call(k,s):st=S(s),st&&(st.setText(tt.name),e.children.add(st),xh(st,$n.x,$n.y,$n.width,$n.height,D)))}return this},jI=function(e,t,s){return e.add.text(0,0,"")},i1=function(e,t){Array.isArray(e)||(e=[e]),t===void 0&&(t=[]);for(var s=0,l=e.length;s<l;s++){var w=e[s];w instanceof WI&&(t.push(...w.list),i1(w.list,t))}return t},$n=void 0;const _u=Phaser.Utils.Objects.GetValue;var qn=function(e,t){return e===void 0&&(e=0),t===void 0&&(t={}),typeof e=="number"?(t.left=e,t.right=e,t.top=e,t.bottom=e):(t.left=_u(e,"left",0),t.right=_u(e,"right",0),t.top=_u(e,"top",0),t.bottom=_u(e,"bottom",0)),t};const HI=Ji.prototype.add;var bh=function(e){return HI.call(this,e),this.sizerEventsEnable&&(e.emit("sizer.add",e,this),this.emit("add",e,this)),this},$I={addBackground(e,t,s){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(s=t,t=void 0),t===void 0&&(t=0),bh.call(this,e),this.backgroundChildren.push(e);var l=this.getSizerConfig(e);return l.padding=qn(t),s!==void 0&&this.addChildrenMap(s,e),this},isBackground(e){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(e)!==-1}},on=function(e,t){var s=null;if(t===void 0)e.hasOwnProperty("rexContainer")&&(s=e.rexContainer.parent,s?s.isRexSizer||(s=on(s)):s=null);else for(s=on(e);s&&s.name!==t;)s=on(s);return s},qI=function(e){for(var t=on(e);t;)e=t,t=on(t);return e},Ha={getParentSizer(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),on(e,t)},getTopmostSizer(e){return e===void 0&&(e=this),qI(e)},hasParentSizer(e,t){t===void 0&&(t=this);for(var s=on(t);s;){if(s===e)return!0;s=on(s)}return!1},hasChild(e,t){return t===void 0&&(t=this),this.hasParentSizer(t,e)}};const KI=Phaser.Utils.Array.Remove,QI=Ji.prototype.remove,s1=Ha.getParentSizer;var wh=function(e,t){for(var s=s1(e);s;)s.removeChildCallback&&s.removeChildCallback(e,t),s=s1(s);return this.isBackground(e)&&KI(this.backgroundChildren,e),QI.call(this,e,t),!t&&this.sizerEventsEnable&&(e.emit("sizer.remove",e,this),this.emit("remove",e,this)),this};const JI=Phaser.Utils.Array.Remove,ZI=Ha.getParentSizer;var tL={removeFromParentSizer(){var e=ZI(gameObject);return e&&e.remove(this),this},removeBackground(e,t){return this.backgroundChildren===void 0?this:this.getParentSizer(e)!==this?this:(JI(this.backgroundChildren,e),wh.call(this,e,t),this)},removeAllBackgrounds(e){if(this.backgroundChildren===void 0)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],e);return this}},r1=function(e,t){if(typeof e=="string")this.childrenMap[e]=t;else{var s=e;for(e in s)this.childrenMap[e]=s[e]}return this},eL=function(e){if(typeof e=="object"){var t=e;for(var e in this.childrenMap)if(this.childrenMap[e]===t)return delete this.childrenMap[e],this}return delete this.childrenMap[e],this},iL=function(e,t){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){t===void 0&&(t=!1);var s=e.shift(),l=null;if(s.charAt(0)==="#")s=s.substring(1),l=this.getByName(s,t);else if(e.length===0&&t){var w=this.childrenMap;if(w)for(var S=[w],k;S.length;){w=S.shift();for(var D in w)if(k=w[D],D===s){l=k;break}else k&&typeof k=="object"&&k.childrenMap&&S.push(k.childrenMap);if(l)break}}else if(s.indexOf("[")===-1)this.childrenMap&&(l=this.childrenMap[s]);else{var V=s.match(sL);if(V!=null&&this.childrenMap){var G=this.childrenMap[V[1]];G&&(l=G[V[2]])}}return e.length===0?l:l&&l.childrenMap?l.getElement(e):null}};const sL=/(\S+)\[(\d+)\]/i;var rL=function(e){if(Array.isArray(this.sizerChildren)){var t=this.sizerChildren.indexOf(e);return t===-1&&(t=null),t}else{if(this.getParentSizer(e)!==this)return null;for(var s in this.sizerChildren)if(this.sizerChildre[s]===e)return s;return null}},nL={getInnerPadding(e){return Gl(this.space,e)},setInnerPadding(e,t){return Jr(this.space,e,t),this},getOuterPadding(e){return Gl(this.getSizerConfig(this).padding,e)},setOuterPadding(e,t){return Jr(this.getSizerConfig(this).padding,e,t),this},getChildOuterPadding(e,t){return typeof e=="string"&&(e=this.getElement(e)),Gl(this.getSizerConfig(e).padding,t)},setChildOuterPadding(e,t,s){return typeof e=="string"&&(e=this.getElement(e)),Jr(this.getSizerConfig(e).padding,t,s),this}},bf=function(e){var t=this.childrenWidth;if(t!==void 0){var s=this.minWidth!==void 0?this.minWidth*this.scaleX:0;return e===void 0?(e=Math.max(s,t),this.layoutWarnEnable&&s>0&&t>s&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${s}) < childrenWidth (${t})`)):this.layoutWarnEnable&&(s>e||t>e)&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${s}) or childrenWidth (${t} > targetWidth ${e})`),e}},wf=function(){var e;for(var t in this.sizerChildren)if(e=this.sizerChildren[t],!(!e||e.isRexSizer&&e.ignoreLayout||!e.runWidthWrap)&&(!e.hasWidthWrap||e.hasWidthWrap()))return!0;return!1},aL=function(e){var t,s,l;for(var w in this.sizerChildren)t=this.sizerChildren[w],t&&t.isRexSizer&&!t.ignoreLayout&&(s=this.getExpandedChildWidth(t,e),l=t.resolveWidth(s),l===void 0&&(l=s),t.resolveChildrenWidth(l))},Sf=function(e){var t,s,l;for(var w in this.sizerChildren)t=this.sizerChildren[w],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(s=this.getExpandedChildWidth(t,e),t.isRexSizer?(l=t.resolveWidth(s),l===void 0&&(l=s)):l=s,t.runWidthWrap(l));return this},Tf=function(e){var t=this.childrenHeight;if(t!==void 0){var s=this.minHeight!==void 0?this.minHeight*this.scaleY:0;return e===void 0?(e=Math.max(s,t),this.layoutWarnEnable&&s>0&&t>s&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${s}) < childrenHeight (${t})`)):this.layoutWarnEnable&&(s>e||t>e)&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${s}) or childrenHeight (${t}) > targetHeight (${e})`),e}},Cf=function(){var e;for(var t in this.sizerChildren)if(e=this.sizerChildren[t],!(!e||e.isRexSizer&&e.ignoreLayout||!e.runHeightWrap)&&(!e.hasHeightWrap||e.hasHeightWrap()))return!0;return!1},oL=function(e){var t,s,l;for(var w in this.sizerChildren)t=this.sizerChildren[w],t&&t.isRexSizer&&!t.ignoreLayout&&(s=this.getExpandedChildHeight(t,e),l=t.resolveHeight(s),l===void 0&&(l=s),t.resolveChildrenHeight(l))},Pf=function(e){var t,s,l;for(var w in this.sizerChildren)t=this.sizerChildren[w],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap)&&(s=this.getExpandedChildHeight(t,e),t.isRexSizer?(l=t.resolveHeight(s),l===void 0&&(l=s)):l=s,t.runHeightWrap(l));return this},hL=function(e){var t;if(e.isRexSizer){var s=e.childrenWidth;if(s==null)return;var l=e.minWidth*e.scaleX;t=Math.max(l,s)}else e.minWidth!==void 0?t=e.minWidth:e._minWidth!==void 0?t=e._minWidth:t=le(e);return t},lL=function(e){var t;if(e.isRexSizer){var s=e.childrenHeight;if(s===void 0)return;var l=e.minHeight*e.scaleY;t=Math.max(l,s)}else e.minHeight!==void 0?t=e.minHeight:e._minHeight!==void 0?t=e._minHeight:t=ue(e);return t},uL=function(e,t){return t},cL=function(e,t){return t},dL=function(){return 0},pL=function(){return 0},fL=function(e){e===void 0&&(e=[]);for(var t=e.length,s=this.getChildrenSizers(e),l=e.length,w=t;w<l;w++)s[w].getAllChildrenSizers(e);return e},gL=function(e){return e===void 0&&(e=[]),e},vL={getShownChildren(e){e===void 0&&(e=[]);for(var t=this.children,s,l=0,w=t.length;l<w;l++)s=t[l],!(s.rexSizer&&s.rexSizer.hidden)&&e.push(s);return e},getAllShownChildren(e){e===void 0&&(e=[]);for(var t=[this];t.length>0;){var s=t.shift();s.rexSizer&&s.rexSizer.hidden||(s!==this&&e.push(s),s.isRexContainerLite&&t.push(...s.children))}return e}},Sh=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var e=this.getChildrenSizers(),t,s=0,l=e.length;s<l;s++)t=e[s],!t.ignoreLayout&&t.preLayout()},mL=function(){return this.runLayout(),this},yL=function(e){if(e.resize)return!0;if(!e.setSize)return!1;for(var t=0,s=n1.length;t<s;t++){var l=n1[t];if(l&&e instanceof l)return!1}return!0},n1=[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Mesh,Phaser.GameObjects.Shader,Phaser.GameObjects.Video],xL=function(e){if(e.displayWidth===void 0)return!1;for(var t=0,s=a1.length;t<s;t++){var l=a1[t];if(l&&e instanceof l)return!1}return!0},a1=[Phaser.GameObjects.BitmapText],Si=function(e,t,s){if(!(!e||t===void 0&&s===void 0))if(yL(e)){var l,w;t===void 0?l=e.width:l=t/e.scaleX,s===void 0?w=e.height:w=s/e.scaleY,e.resize?e.resize(l,w):e.setSize(l,w)}else{var S=xL(e);t!==void 0&&(S?e.displayWidth=t:e.scaleX=t/e.width),s!==void 0&&(S?e.displayHeight=s:e.scaleY=s/e.height)}},bL=function(e,t,s){if(this.ignoreLayout)return this;var l=!e;l&&this.preLayout();var w,S;l||e.runChildrenWrapFlag?(w=this.hasWidthWrap(),S=this.hasHeightWrap()):(w=!1,S=!1);var k=wL(this,t,s,w,S);k||console.error("Can't resolve size of ",this);var D=k.width,V=k.height;return Si(this,D,V),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout(e,D,V),l&&this._anchor&&this._anchor.updatePosition(),this},wL=function(e,t,s,l,w){var S=o1(e,t,l),k=SL(e,s,w);return S===void 0&&(S=o1(e,t,l)),S!==void 0&&k!==void 0?{width:S,height:k}:!1},o1=function(e,l,s){var l=e.resolveWidth(l);return l!==void 0&&s&&(e.resolveChildrenWidth(l),e.runWidthWrap(l)),l},SL=function(e,l,s){var l=e.resolveHeight(l);return l!==void 0&&s&&(e.resolveChildrenHeight(l),e.runHeightWrap(l)),l},TL=function(){},CL=function(e,t,s){return this},PL=function(e,t,s,l){Si(s,e,t)};const ku=Phaser.Utils.Objects.GetValue;class Mf extends Oe{constructor(t,s){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(s)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var s,l;t.x!==void 0?(s=null,l=t.x):t.left!==void 0?(s=0,l=t.left):t.right!==void 0?(s=1,l=t.right):t.centerX!==void 0&&(s=.5,l=t.centerX);var w,S;t.y!==void 0?(w=null,S=t.y):t.top!==void 0?(w=0,S=t.top):t.bottom!==void 0?(w=1,S=t.bottom):t.centerY!==void 0&&(w=.5,S=t.centerY);var k,D;l!==void 0&&(l=l.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),k=parseFloat(l[0])/100,D=l[1]===""?0:parseFloat(l[1]));var V,G;S!==void 0&&(S=S.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),V=parseFloat(S[0])/100,G=S[1]===""?0:parseFloat(S[1]));var j=t.width,tt,st;j!==void 0&&(j=j.split("%"),tt=parseFloat(j[0])/100,st=j[1]===""?0:parseFloat(j[1]));var rt=t.height,ot,ut;rt!==void 0&&(rt=rt.split("%"),ot=parseFloat(rt[0])/100,ut=rt[1]===""?0:parseFloat(rt[1])),this.setAlign(s,w),this.setPercentage(k,V),this.setOffset(D,G),this.setSizePercentage(tt,ot),this.setSizePadding(st,ut);var ct=ku(t,"onResizeCallback",PL),pt=ku(t,"onResizeCallbackScope");this.setResizeCallback(ct,pt);var mt=ku(t,"onUpdateViewportCallback"),yt=ku(t,"onUpdateViewportCallbackScope");return this.setUpdateViewportCallback(mt,yt),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,s){return this.alignX=t,this.alignY=s,this}setPercentage(t,s){return this.percentageX=t,this.percentageY=s,this}setOffset(t,s){return this.offsetX=t,this.offsetY=s,this}setSizePercentage(t,s){return this.percentageWidth=t,this.percentageHeight=s,this}setSizePadding(t,s){return this.paddingWidth=t,this.paddingHeight=s,this}setResizeCallback(t,s){return this.onResizeCallback=t,this.onResizeCallbackScope=s,this}setUpdateViewportCallback(t,s){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=s,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,s=this.onResizeCallbackScope,l=this.anchorWidth,w=this.anchorHeight;if(!(l===void 0&&w===void 0||!t)){var S=this.parent;l===void 0&&(l=S.width),w===void 0&&(w=S.height),s?t.call(s,l,w,S,this):t(l,w,S,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=Aa(this.scene,t,this.viewport);var s=this.viewport,l=this.onUpdateViewportCallback,w=this.onUpdateViewportCallbackScope;l&&(w?l.call(w,s,this.parent,this):l(s,this.parent,this))}}var ML=function(e){e===void 0&&(e={});var t=e.hasOwnProperty("width"),s=e.hasOwnProperty("height"),l=e.hasOwnProperty("onResizeCallback");return(t||s)&&!l&&(e.onResizeCallback=function(w,S,k){t&&k.setMinWidth(w),s&&k.setMinHeight(S),k.layout()}),this._anchor===void 0?this._anchor=new Mf(this,e):this._anchor.resetFromJSON(e),this};const _L=Phaser.Utils.Objects.GetValue,$a=Phaser.Utils.Objects.GetAdvancedValue,h1=Phaser.Math.Linear;class Th extends zn{constructor(t,s){super(t,s),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(_L(t,"mode",0)),this.setScaleRange($a(t,"start",void 0),$a(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=kL[t]),this.mode=t,this}setScaleRange(t,s){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=$a(t,"x",this.parent.scaleX),this.startY=$a(t,"y",this.parent.scaleY)),typeof s=="number"?(this.endX=s,this.endY=s):(this.endX=$a(s,"x",void 0),this.endY=$a(s,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var s=this.repeat;return this.mode===2&&s!==-1&&(s=(s+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(s),super.start(),this}updateTarget(t,s){var l=s.t;s.isOddIteration&&(l=1-l),l=this.easeFn(l),this.hasScaleX&&(t.scaleX=h1(this.startX,this.endX,l)),this.hasScaleY&&(t.scaleY=h1(this.startY,this.endY,l))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const kL={stop:0,destroy:1,yoyo:2};var _f=function(e,t,s,l,w){l===void 0&&(l="Cubic");var S,k;switch(s){case 0:case"x":S={x:0},k={x:e.scaleX};break;case 1:case"y":S={y:0},k={y:e.scaleY};break;default:S=0,k=e.scale;break}var D={mode:0,start:S,end:k,duration:t,ease:l};return w===void 0?w=new Th(e,D):w.resetFromJSON(D),w.restart(),w},l1=function(e,t,s,l,w,S){l===void 0&&(l="Linear"),w instanceof Th&&(S=w,w=void 0),w===void 0&&(w=!0);var k={};switch(k.mode=w?1:0,s){case 0:case"x":k.end={x:0};break;case 1:case"y":k.end={y:0};break;default:k.end=0;break}return k.duration=t,k.ease=l,S===void 0?S=new Th(e,k):S.resetFromJSON(k),S.restart(),S},OL=function(e,t,s,l,w,S,k){s===void 0&&(s=1.2),l===void 0&&(l=0),S===void 0&&(S="Cubic");var D,V;switch(w){case 0:case"x":D={x:e.scaleX},V={x:s};break;case 1:case"y":D={y:e.scaleX},V={y:s};break;default:D=e.scaleX,V=s;break}var G={mode:2,start:D,end:V,duration:t/2,ease:S,repeat:l};return k===void 0?k=new Th(e,G):k.resetFromJSON(G),k.restart(),k};const kf=Phaser.Utils.Objects.IsPlainObject;var u1={onInitScale(){var e=this,t=this._scaleBehavior;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},popUp(e,t,s){if(kf(e)){var l=e;e=l.duration,t=l.orientation,s=l.ease}var w=this._scaleBehavior===void 0;return this._scaleBehavior=_f(this,e,t,s,this._scaleBehavior),w&&this.onInitScale(),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(e,t,s){return this.popUp(e,t,s),vi(this._scaleBehavior)},isRunningPopUp(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="popup.complete"},scaleDownDestroy(e,t,s,l){if(kf(e)){var w=e;e=w.duration,t=w.orientation,s=w.ease,l=w.destroy}var S=this._scaleBehavior===void 0;return this._scaleBehavior=l1(this,e,t,s,l,this._scaleBehavior),S&&this.onInitScale(),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(e,t,s,l){return this.scaleDownDestroy(e,t,s,l),vi(this._scaleBehavior)},scaleDown(e,t,s){return this.scaleDownDestroy(e,t,s,!1),this},scaleDownPromise(e,t,s){return this.scaleDown(e,t,s),vi(this._scaleBehavior)},isRunningScaleDown(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="scaledown.complete"},scaleYoyo(e,t,s,l,w){if(kf(e)){var S=e;e=S.duration,t=S.peakValue,s=S.repeat,l=S.orientation,w=S.ease}var k=this._scaleBehavior===void 0;return this._scaleBehavior=OL(this,e,t,s,l,w,this._scaleBehavior),k&&this.onInitScale(),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(e,t,s,l,w){return this.scaleYoyo(e,t,s,l,w),vi(this._scaleBehavior)},isRunningScaleYoyo(){return this._scaleBehavior&&(this._scaleBehavior.completeEventName="scaleyoyo.complete")},isRunningEaseScale(){return this.isRunningPopUp()||this.isRunningScaleDown()||this.isRunningScaleYoyo()}},kr={};Object.assign(kr,u1),kr.onInitScale=function(){u1.onInitScale.call(this);var e=this,t=this._scaleBehavior;t.on("update",function(){var s=Ha.getParentSizer(e);s&&s.resetChildPositionState(e)})};const EL=Phaser.Utils.Objects.GetValue,c1=Phaser.Utils.Objects.GetAdvancedValue,AL=Phaser.Math.Linear;let Of=class extends zn{constructor(e,t){super(e,t),this.resetFromJSON(t),this.boot()}resetFromJSON(e){return super.resetFromJSON(e),this.setMode(EL(e,"mode",0)),this.setAlphaRange(c1(e,"start",this.parent.alpha),c1(e,"end",0)),this}setMode(e){return typeof e=="string"&&(e=RL[e]),this.mode=e,this}setAlphaRange(e,t){return this.alphaStart=e,this.alphaEnd=t,this}start(){if(this.timer.isRunning)return this;var e=this.parent;return e.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateTarget(e,t){var s=t.t;t.isOddIteration&&(s=1-s),e.alpha=AL(this.alphaStart,this.alphaEnd,s)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}};const RL={stop:0,destroy:1,yoyo:2},DL=Phaser.Utils.Objects.IsPlainObject;var Ou=function(e,t,s,l){var w,S;DL(s)?(w=s.start,S=s.end):S=s,w===void 0&&(w=0),S===void 0&&(S=1);var k={mode:0,start:w,end:S,duration:t};return l===void 0?l=new Of(e,k):l.resetFromJSON(k),l.restart(),l},Eu=function(e,t,s,l){s instanceof Of&&(l=s,s=void 0),s===void 0&&(s=!0);var w={mode:s?1:0,end:0,duration:t};return l===void 0?l=new Of(e,w):l.resetFromJSON(w),l.restart(),l};const d1=Phaser.Utils.Objects.IsPlainObject;var p1={onInitFade(){var e=this,t=this._fade;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},fadeIn(e,t){if(d1(e)){var s=e;e=s.duration,t=s.alpha}var l=this._fade===void 0;return this._fade=Ou(this,e,t,this._fade),l&&this.onInitFade(),this._fade.completeEventName="fadein.complete",this},fadeInPromise(e,t){return this.fadeIn(e,t),vi(this._fade)},isRunningFadeIn(){return this._fade&&this._fade.completeEventName==="fadein.complete"},fadeOutDestroy(e,t){if(d1(e)){var s=e;e=s.duration,t=s.destroy}var l=this._fade===void 0;return this._fade=Eu(this,e,t,this._fade),l&&this.onInitFade(),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(e,t){return this.fadeOutDestroy(e,t),vi(this._fade)},fadeOut(e){return this.fadeOutDestroy(e,!1),this},fadeOutPromise(e){return this.fadeOut(e),vi(this._fade)},isRunningFadeOut(){return this._fade&&this._fade.completeEventName==="fadeout.complete"},isRunningEaseFade(){return this.isRunningFadeIn()||this.isRunningFadeOut()}},Ch={};Object.assign(Ch,p1),Ch.onInitFade=function(){p1.onInitFade.call(this);var e=this,t=this._fade;t.on("update",function(){var s=Ha.getParentSizer(e);s&&s.resetChildAlphaState(e)})};const IL=Phaser.Utils.Objects.GetValue,qa=Phaser.Utils.Objects.GetAdvancedValue,f1=Phaser.Math.Linear;class Au extends zn{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(IL(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var s=qa(t,"x",void 0),l=qa(t,"y",void 0);this.setTargetPosition(s,l)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=LL[t]),this.mode=t,this}setTargetPosition(t,s){if(typeof t=="number"||typeof s=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=s;else{var l=t;this.startX=qa(l,"startX",void 0),this.startY=qa(l,"startY",void 0),this.endX=qa(l,"endX",void 0),this.endY=qa(l,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateTarget(t,s){var l=s.t;s.isOddIteration&&(l=1-l),l=this.easeFn(l),this.hasMoveX&&(t.x=f1(this.startX,this.endX,l)),this.hasMoveY&&(t.y=f1(this.startY,this.endY,l))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const LL={stop:0,destroy:1,yoyo:2};var Ru=function(e,t){if(typeof e=="number")return e;var s=e[0],l=parseFloat(e.substr(2));switch(s){case"+":return t+l;case"-":return t-l;case"*":return t*l;case"/":return t/l}},g1=function(e,t,s,l,w,S,k){S instanceof Au&&(k=S,S=void 0),S===void 0&&(S=!1);var D={};return D.mode=S?1:0,s!==void 0&&(D.startX=e.x,D.endX=Ru(s,e.x)),l!==void 0&&(D.startY=e.y,D.endY=Ru(l,e.y)),D.duration=t,D.ease=w===void 0?"Linear":w,k===void 0?k=new Au(e,D):k.resetFromJSON(D),k.restart(),k},v1=function(e,t,s,l,w,S,k){S instanceof Au&&(k=S,S=void 0),S===void 0&&(S=!1);var D={};return D.mode=S?1:0,s!==void 0&&(D.startX=Ru(s,e.x),D.endX=e.x),l!==void 0&&(D.startY=Ru(l,e.y),D.endY=e.y),D.duration=t,D.ease=w===void 0?"Linear":w,k===void 0?k=new Au(e,D):k.resetFromJSON(D),k.restart(),k};const m1=Phaser.Utils.Objects.IsPlainObject,y1=Phaser.Math.Distance.Between;var x1={onInitEaseMove(){var e=this,t=this._easeMove;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},moveFrom(e,t,s,l,w){if(m1(e)){var S=e;t=S.x,s=S.y,S.hasOwnProperty("speed")?e=y1(t,s,this.x,this.y)*1e3/S.speed:e=S.duration,l=S.ease}var k=this._easeMove===void 0;return this._easeMove=v1(this,e,t,s,l,w,this._easeMove),k&&this.onInitEaseMove(),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(e,t,s,l,w){return this.moveFrom(e,t,s,l,w),vi(this._easeMove)},moveFromDestroy(e,t,s,l){return this.moveFrom(e,t,s,l,!0),this},moveFromDestroyPromise(e,t,s,l){return this.moveFromDestroy(e,t,s,l),vi(this._easeMove)},isRunningMoveFrom(){return this._easeMove&&(this._easeMove.completeEventName="movefrom.complete")},moveTo(e,t,s,l,w){if(m1(e)){var S=e;t=S.x,s=S.y,S.hasOwnProperty("speed")?e=y1(t,s,this.x,this.y)*1e3/S.speed:e=S.duration,l=S.ease}var k=this._easeMove===void 0;return this._easeMove=g1(this,e,t,s,l,w,this._easeMove),k&&this.onInitEaseMove(),this._easeMove.completeEventName,this},moveToPromise(e,t,s,l,w){return this.moveTo(e,t,s,l,w),vi(this._easeMove)},moveToDestroy(e,t,s,l){return this.moveTo(e,t,s,l,!0),this},moveToDestroyPromise(e,t,s,l){return this.moveToDestroy(e,t,s,l,!0),vi(this._easeMove)},isRunningMoveTo(){return this._easeMove&&this._easeMove.completeEventName==="moveto.complete"},isRunningEaseMove(){return this.isRunningMoveFrom()||this.isRunningMoveTo()},moveStop(e){return this._easeMove?(this._easeMove.stop(e),this):this}},Du={};Object.assign(Du,x1),Du.onInitEaseMove=function(){x1.onInitEaseMove.call(this);var e=this,t=this._easeMove;t.on("update",function(){var s=Ha.getParentSizer(e);s&&s.resetChildPositionState(e)})};const ds=Phaser.Utils.Objects.GetValue;class Ef extends Jl{constructor(t,s){super(t,s),this.timer=new ly,this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(ds(t,"timer")),this.setEnable(ds(t,"enable",!0)),this.setMode(ds(t,"mode",1)),this.isRunning=ds(t,"isRunning",!1),this.setMagnitudeMode(ds(t,"magnitudeMode",1)),this.setAxisMode(ds(t,"axis",0)),this.setDuration(ds(t,"duration",500)),this.setMagnitude(ds(t,"magnitude",10)),this.ox=ds(t,"ox",void 0),this.oy=ds(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=FL[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=NL[t]),this.magnitudeMode=t,this}setAxisMode(t){return typeof t=="string"&&(t=BL[t]),this.axisMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,s){if(typeof t!="number"){var l=t;s=ds(l,"magnitude",void 0),t=ds(l,"duration",void 0)}return s!==void 0&&this.setMagnitude(s),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,s){return this.start(t,s),this}update(t,s){if(!this.isRunning||!this.enable)return this;var l=this.parent;if(!l.active)return this;if(this.timer.update(t,s),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=l.x,this.oy=l.y);var w=this.magnitude;this.magnitudeMode===1&&(w*=1-this.timer.t);var S=Math.random()*Math.PI*2,k=this.ox+Math.cos(S)*w,D=this.oy+Math.sin(S)*w;switch(this.axisMode){case 1:l.x=k;break;case 2:l.y=D;break;default:l.x=k,l.y=D;break}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;switch(this.axisMode){case 1:t.x=this.ox;break;case 2:t.y=this.oy;break;default:t.x=this.ox,t.y=this.oy;break}return this.ox=void 0,this.oy=void 0,this}}const FL={effect:0,behavior:1},BL={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},NL={constant:0,decay:1},YL=Phaser.Utils.Objects.IsPlainObject;var VL=function(e,t){t.on("complete",function(){e.emit("shake.complete",e)})},zL={shake(e,t,s){if(YL(e)){var l=e;e=l.duration,t=l.magnitude,s=l.magnitudeMode}return this._shake===void 0&&(this._shake=new Ef(this,{mode:0,magnitudeMode:1}),VL(this,this._shake)),e!==void 0&&this._shake.setDuration(e),t!==void 0&&this._shake.setMagnitude(t),s!==void 0&&this._shake.setMagnitudeMode(s),this._shake.shake(),this},shakePromise(e,t){return this.shake(e,t),vi(this._shake)}};const b1=Phaser.Utils.Objects.IsPlainObject;class GL extends Oe{constructor(t,s){super(t,s),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var s=this.easeTasks[t];return s===void 0&&(s=new _s(this.parent),this.easeTasks[t]=s,s.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),s}easeTo(t,s,l,w){if(b1(t)){var S=t;t=S.key,s=S.value,l=S.duration,w=S.ease;var k=S.speed;l===void 0&&k!==void 0&&(l=Math.abs(s-this.parent.data.values[t])/k*1e3)}l===void 0&&(l=1e3),w===void 0&&(w="Linear");var D=this.getEaseTask(t);return D.restart({key:t,to:s,duration:l,ease:w}),this}easeFrom(t,s,l,w){if(b1(t)){var S=t;t=S.key,s=S.value,l=S.duration,w=S.ease;var k=S.speed;l===void 0&&k!==void 0&&(l=Math.abs(s-this.parent.data.values[t])/k*1e3)}l===void 0&&(l=1e3),w===void 0&&(w="Linear");var D=this.getEaseTask(t);return D.restart({key:t,from:s,duration:l,ease:w}),this}stopEase(t,s){s===void 0&&(s=!0);var l=this.easeTasks[t];return l&&l.stop(s),this}stopAll(t){t===void 0&&(t=!0);for(var s in this.easeTasks)this.stopEase(s,t);return this}}var UL=function(e,t){t.on("complete",function(s){e.emit(`easedata.${s}.complete`,e),e.emit("easedata.complete",s,e)})},WL={easeDataTo(e,t,s,l){return this._easeData||(this._easeData=new GL(this),UL(this,this._easeData)),this._easeData.easeTo(e,t,s,l),this},easeDataToPromise(e,t,s,l){return this.easeDataTo(e,t,s,l),nu(this._easeData,`complete-${e}`)},stopEaseData(e,t){return this._easeData?(this._easeData.stopEase(e,t),this):this},stopAllEaseData(e){return this._easeData?(this._easeData.stopAll(e),this):this}},XL=Phaser.Utils.Array.Remove,jL=function(e){e._delayCallTimers=[],e.once("destroy",function(){for(var t=e._delayCallTimers,s=0,l=t.length;s<l;s++)t[s].remove();e._delayCallTimers=void 0})},w1={delayCall(e,t,s){var l=this._delayCallTimers;l===void 0&&jL(this);var w,S=this,k=function(){XL(S._delayCallTimers,w),s?t.call(s):t()};return w=this.scene.time.delayedCall(e,k),this._delayCallTimers.push(w),this}},hn=function(e){S1(e,!1)},ln=function(e){S1(e,!0)},Af=function(e){if(!e)return!1;var t=Mu(e);return!t.hidden},S1=function(e,t){if(e){var s=Mu(e);s.hidden=t;var l=Qi(e);l?l.setChildVisible(e,!t):e.setVisible(!t)}},HL={show(e){return e===void 0&&(e=this),hn(e),this},hide(e){return e===void 0&&(e=this),ln(e),this},isShow(e){return e===void 0&&(e=this),Af(e)}};const $L=["next","exit","enter"];let T1=class{constructor(e){var t=Vt(e,"states",void 0);t&&this.addStates(t);var s=Vt(e,"extend",void 0);if(s)for(var l in s)(!this.hasOwnProperty(l)||this[l]===void 0)&&(this[l]=s[l]);var w=Vt(e,"eventEmitter",void 0),S=Vt(e,"EventEmitterClass",void 0);this.setEventEmitter(w,S),this._stateLock=!1,this.resetFromJSON(e)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(e){this.setEnable(Vt(e,"enable",!0)),this.start(Vt(e,"start",void 0));var t=Vt(e,"init",void 0);return t&&t.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(e){return e===void 0&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(e){if(!(!this.enable||this._stateLock)&&this._state!==e){if(this._prevState=this._state,this._state=e,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var t="exit_"+this._prevState,s=this[t];s&&s.call(this),this.emit(t,this)}if(this._stateLock=!1,this._state!=null){var l="enter_"+this._state,w=this[l];w&&w.call(this),this.emit(l,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(e){return this._start=e,this._prevState=void 0,this._state=e,this}goto(e){return e!=null&&(this.state=e),this}next(){var e,t=this["next_"+this.state];return t&&(typeof t=="string"?e=t:e=t.call(this)),this.goto(e),this}get stateProperties(){return $L}addState(e,t){typeof e!="string"&&(t=e,e=t.name);for(var s=this.stateProperties,l=0,w=s.length;l<w;l++){var S=s[l],k=t[S];k&&(this[`${S}_${e}`]=k)}return this}addStates(e){if(Array.isArray(e))for(var t=0,s=e.length;t<s;t++)this.addState(e[t]);else for(var l in e)this.addState(l,e[l]);return this}runMethod(e,t,s,l,w,S){var k=this[e+"_"+this.state];if(k){var D=arguments.length;switch(D){case 1:return k.call(this);case 2:return k.call(this,t);case 3:return k.call(this,t,s);case 4:return k.call(this,t,s,l);case 5:return k.call(this,t,s,l,w);case 6:return k.call(this,t,s,l,w,S)}for(var V=new Array(D-1),G=1;G<D;G++)V[G-1]=arguments[G];return k.apply(this,V)}}};Object.assign(T1.prototype,_y);var Rf=function(e,t,s,l,w){w===void 0&&(w=!1);var S=e._events[t];if(!S)return!1;for(var k=0,D=S.length;k<D;k++){var V=S[k];if(V.fn===s&&V.context===l&&V.once===w)return!0}return!1};const qL=["next","exit","enter","update","preupdate","postupdate"];class Or extends T1{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=Vt(t,"scene",void 0),this}get stateProperties(){return qL}update(t,s){this.runMethod("update",t,s)}preupdate(t,s){this.runMethod("preupdate",t,s)}postupdate(t,s){this.runMethod("postupdate",t,s)}startUpdate(t){t||(t=this._scene);var s=t.sys.events;return Rf(s,"update",this.update,this)?this:(this._scene=t,s.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var s=t.sys.events;return Rf(s,"preupdate",this.preupdate,this)?this:(this._scene=t,s.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var s=t.sys.events;return Rf(s,"postupdate",this.postupdate,this)?this:(this._scene=t,s.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}let KL=class extends Or{constructor(e,t){super(t),this.parent=e;var s=t.initState||"IDLE";this.start(s)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var e=this.parent;if(e.transitInTime>0){var t=e.runTransitionInCallback();e.delayCall(t,this.next,this)}else this.next()}exit_TRANS_OPNE(){var e=this.parent;e.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var e=this.parent;e.onOpen()}exit_OPEN(){var e=this.parent;e.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var e=this.parent;if(e.transitOutTime>0){var t=e.runTransitionOutCallback();e.delayCall(t,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var e=this.parent;e.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var e=this.parent;e.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}};var QL=function(e,t,s,l,w){var S=Da(e),k=S.time.delayedCall(t,function(){S.game.events.once("poststep",function(){s.call(l,w)})});return k},JL={delayCall(e,t,s){return this.delayCallTimer=QL(this,e,t,s),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},ZL={setTransitInTime(e){return this.transitInTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInCallback(e){return e||(e=n),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=n),this.transitOutCallback=e,this}},t4={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(e,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?e:this.parent;var s=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=s,this}},e4={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(e,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?e:this.parent;var s=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=s,this}},C1={};Object.assign(C1,JL,ZL,t4,e4);const Ka=Phaser.Utils.Objects.GetValue;class Iu extends Oe{constructor(t,s){super(t,s),this.setTransitInTime(Ka(s,"duration.in",200)),this.setTransitOutTime(Ka(s,"duration.out",200)),this.setTransitInCallback(Ka(s,"transitIn")),this.setTransitOutCallback(Ka(s,"transitOut")),this.oneShotMode=Ka(s,"destroy",!1),this.delayCallTimer=void 0,this._state=new KL(this,{eventEmitter:!1,initState:Ka(s,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}}Object.assign(Iu.prototype,C1);const i4=Phaser.GameObjects.Rectangle;class Df extends i4{constructor(t,s,l){super(t,0,0,2,2,s,1),this.fullWindow=new sx(this),this.setAlpha(l)}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}}const If=Phaser.Utils.Objects.GetValue;class Lu extends Oe{constructor(t,s){super(t,{eventEmitter:!1}),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setHitAreaMode(If(t,"hitAreaMode",0)),this.setEnable(If(t,"enable",!0)),this.setStopMode(If(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,s,l,w){this.stopAllLevels&&w.stopPropagation()},this).on("pointerup",function(t,s,l,w){this.stopAllLevels&&w.stopPropagation()},this).on("pointermove",function(t,s,l,w){this.stopAllLevels&&w.stopPropagation()},this).on("pointerover",function(t,s,l,w){this.stopAllLevels&&w.stopPropagation()},this).on("pointerout",function(t,s){this.stopAllLevels&&s.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=s4[t]);var s=this.parent;return s.input&&s.removeInteractive(),t===0?s.setInteractive():s.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var s4={default:0,fullWindow:1};const P1=Phaser.Utils.Objects.GetValue;class Lf extends Df{constructor(t,s){var l=P1(s,"color",0),w=P1(s,"alpha",.8);super(t,l,w),this.touchEventStop=new Lu(this,{hitAreaMode:1})}}var r4=function(e,t){var s=e.scene,l=new Lf(s,t);return s.add.existing(l),e.isRexContainerLite?(e.pin(l,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1}),e.moveDepthBelow(l)):s.children.moveBelow(l,e),l},Fu={popUp(e,t){e._modalScaleSave!==void 0?(e.scaleX=e._modalScaleSave,e.scaleY=e._modalScaleSave):e._modalScaleSave=e.scaleX,_f(e,t)},scaleDown(e,t){l1(e,t,void 0,void 0,!1)},fadeIn(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,Ou(e,t)},fadeOut(e,t){Eu(e,t,!1)}},n4=function(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,Ou(e,t,e.alpha)},a4=function(e,t){Eu(e,t,!1)},Bu=function(e,t,s,l,w){if(!e||l&&!l(e,t,s))return!1;var S=xp(e,!0);return!(!S.contains(t,s)||w&&!w(e,t,s))};const Js=Phaser.Utils.Objects.GetValue;let o4=class extends Iu{constructor(e,t){t===void 0&&(t={}),t.transitIn==null&&(t.transitIn=un.popUp),t.transitOut==null&&(t.transitOut=un.scaleDown),t.destroy=Js(t,"destroy",!0),super(e,t);var s=Js(t,"cover");this.cover=s!==!1?r4(e,s):void 0,this.cover&&(this.setCoverTransitInCallback(Js(s,"transitIn",n4)),this.setCoverTransitOutCallback(Js(s,"transitOut",a4)));var l=Js(t,"touchOutsideClose",!1),w=Js(t,"duration.hold",-1),S=Js(t,"timeOutClose",w>=0),k=Js(t,"anyTouchClose",!1),D=Js(t,"manualClose",!1);D&&(l=!1,k=!1,S=!1),k&&(l=!1),S?this.setDisplayTime(w):this.setDisplayTime(-1),k?this.once("open",this.anyTouchClose,this):l&&this.once("open",this.touchOutsideClose,this),Js(t,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(e){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!e&&(this.cover.destroy(),this.cover=void 0),super.shutdown(e))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(e){this.clickOutsideTest&&Bu(this.parent,e.worldX,e.worldY)||this.requestClose()}runTransitionInCallback(){var e=super.runTransitionInCallback(),t=this.cover;return t&&this.coverTransitInCallback&&this.coverTransitInCallback(t,e),e}runTransitionOutCallback(){var e=super.runTransitionOutCallback(),t=this.cover;return t&&this.coverTransitOutCallback&&this.coverTransitOutCallback(t,e),e}onOpen(){var e=this.displayTime;e>=0&&this.delayCall(e,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(e){return this.displayTime=e,this}setTransitInCallback(e){switch(typeof e=="string"&&(e=un[e]),e){case un.popUp:e=Fu.popUp;break;case un.fadeIn:e=Fu.fadeIn;break}return super.setTransitInCallback(e),this}setTransitOutCallback(e){switch(typeof e=="string"&&(e=un[e]),e){case un.scaleDown:e=Fu.scaleDown;break;case un.fadeOut:e=Fu.fadeOut;break}return super.setTransitOutCallback(e),this}setCoverTransitInCallback(e){return this.coverTransitInCallback=e,this}setCoverTransitOutCallback(e){return this.coverTransitOutCallback=e,this}};const un={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var Ff=function(e,t){var s=new o4(e,t);return s.on("open",function(){e.emit("modal.open",s)}),s.on("close",function(l){e.emit("modal.close",l,s)}),e.on("modal.requestClose",s.requestClose,s),s},h4=function(e,t){var s=Ff(e,t);return new Promise(function(l,w){s.once("close",function(S){l(S)})})},M1=function(e,t){e.emit("modal.requestClose",t)},Os=function(e){return e&&typeof e=="function"},Nu={modal(e,t){return Os(e)&&(t=e,e=void 0),this._modalBehavior===void 0&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,e),this._modalBehavior=Ff(this,e)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(e){var t=this;return new Promise(function(s,l){t.modal(e,s)})},modalClose(e){return M1(this,e),this}},l4=function(e,t,s,l,w,S){return S===void 0&&(S=!1),t[S?"once":"on"](s,l,w),e.once("destroy",function(){t.off(s,l,w)}),e},Er=function(e,t,s,l,w){Os(t)&&(w=l,l=s,s=t,t=this);var S=this.scene.events;return this.bindEvent(t,S,e,s,l,w),this},u4={bindEvent(e,t,s,l,w,S){return typeof t=="string"&&(S=w,w=l,l=s,s=t,t=e,e=this),l4(e,t,s,l,w,S),this},bindScenePreupdateEvent(e,t,s,l){return Er.call(this,"preupdate",e,t,s,l),this},bindSceneUpdateEvent(e,t,s,l){return Er.call(this,"update",e,t,s,l),this},bindScenePostupdateEvent(e,t,s,l){return Er.call(this,"postupdate",e,t,s,l),this},bindSceneRenderEvent(e,t,s,l){return Er.call(this,"render",e,t,s,l),this},bindScenePauseEvent(e,t,s,l){return Er.call(this,"pause",e,t,s,l),this},bindSceneResumeEvent(e,t,s,l){return Er.call(this,"resume",e,t,s,l),this},bindSceneSleepEvent(e,t,s,l){return Er.call(this,"sleep",e,t,s,l),this},bindSceneWakeEvent(e,t,s,l){return Er.call(this,"wake",e,t,s,l),this},bindSceneShutdownEvent(e,t,s,l){return Er.call(this,"shutdown",e,t,s,l),this}},Yu=function(e,t,s){var l=e.camera;return l?(s===void 0?s={}:s===!0&&(s=c4),l===t?(s.x=e.worldX,s.y=e.worldY):l.getWorldPoint(e.x,e.y,s),s):null},c4={},d4=function(e,t,s,l,w){var S=e.scene.sys.cameras.main,k,D=e.scrollFactorX===0&&e.scrollFactorY===0;if(t)return D?s(e,t.x,t.y,l,w):(k=Yu(t,S,!0),k?s(e,k.x,k.y,l,w):!1);for(var V=e.scene.input.manager,G=V.pointersTotal,j=V.pointers,tt=0;tt<G;tt++)if(t=j[tt],D){if(s(e,t.x,t.y,l,w))return!0}else{if(k=Yu(t,S,!0),!k)continue;if(s(e,k.x,k.y,l,w))return!0}return!1},Zs=function(e,t,s,l){return d4(e,t,Bu,s,l)},p4=function(e,t){return(Ui(e)||typeof e=="string")&&(t=e,e=void 0),t===void 0?t=this:typeof t=="string"&&(t=this.getElement(t)),Zs(t,e)},Es=function(e){return Object.prototype.toString.call(e)==="[object Array]"},Kn=function(e,t,s,l,w){return Bu(e,t,s,f4(l),w)},_1=function(e){var t=e.rexSizer&&e.rexSizer.hidden;return!t},f4=function(e){return e?function(t,s,l){return _1(t)?(e(t,s,l),!0):!1}:_1},k1=function(e,t,s,l,w){if(Os(s)||(w=s,s=void 0,l=void 0),w===void 0&&(this.sizerChildren?w=this.sizerChildren:this.isRexContainerLite?w=this.children:w=this.list),Es(w)){for(var S,k=0,D=w.length;k<D;k++)if(S=w[k],Kn(S,e,t,s,l))return S}else{var S;for(var V in w)if(S=w[V],Kn(S,e,t,s,l))return S}return null},g4=function(e,t){return t===void 0?t={}:t===!0&&(t=v4),t.x=e.x,t.y=e.y,t.scaleX=e.scaleX,t.scaleY=e.scaleY,t.width=e.width,t.height=e.height,t.displayWidth=e.displayWidth,t.displayHeight=e.displayHeight,t},v4={},Ph=function(e){this.sizerEventsEnable&&(g4(e,this.getChildPrevState(e)),this.layoutedChildren.push(e))},Mh=function(e,t,s,l,w,S,k,D){k===void 0&&(k=0),D===void 0&&(D=0),xh(e,t,s,l,w,S),e.x+=k,e.y+=D,this.resetChildPositionState(e),this.sizerEventsEnable&&e.emit("sizer.postlayout",e,this)};const m4=Phaser.Display.Align.CENTER;var y4=function(){if(this.backgroundChildren!==void 0)for(var e=this.backgroundChildren,t=this.left,s=this.top,l=this.width*this.scaleX,w=this.height*this.scaleY,S,k,D,V,G,j,tt,st=0,rt=e.length;st<rt;st++)S=e[st],k=S.rexSizer,!k.hidden&&(D=k.padding,Ph.call(this,S),V=t+D.left*this.scaleX,G=s+D.top*this.scaleY,j=l-(D.left+D.right)*this.scaleX,tt=w-(D.top+D.bottom)*this.scaleY,Si(S,j,tt),Mh.call(this,S,V,G,j,tt,m4,0,0))};const x4=Phaser.Utils.Objects.IsPlainObject;var b4=function(e,t,s){if(x4(e)){var l=e;e=l.sensor,s=l.target,t=l.draggable}else typeof t!="boolean"&&(s=t,t=void 0);var w=typeof e;if(w==="string"){var S=e;if(e=this.getElement(S),!e)return console.error(`Can get element '${S}'`),this}else(e===void 0||w!="object")&&(t=e,e=this);return t===void 0&&(t=!0),e.input&&e.input._rexUIDragSizer?e.input.draggable=t:t&&(e.setInteractive(),e.scene.input.setDraggable(e),e.on("drag",function(k,D,V){var G=s===void 0?this.getTopmostSizer():s;G.x+=D-e.x,G.y+=V-e.y,G.emit("sizer.drag",k,D,V)},this).on("dragstart",function(k,D,V){var G=s===void 0?this.getTopmostSizer():s;G.emit("sizer.dragstart",k,D,V)},this).on("dragend",function(k,D,V,G){var j=s===void 0?this.getTopmostSizer():s;j.emit("sizer.dragend",k,D,V,G)},this).on("drop",function(k,D){var V=s===void 0?this.getTopmostSizer():s;V.emit("sizer.drop",k,D)}),e.input._rexUIDragSizer=!0),this},Bf={onClick(e,t,s,l){return e?(typeof e=="function"&&(l=s,s=t,t=e,e=this),e._click===void 0&&(e._click=new Mr(e,l)),e._click.on("click",t,s),this):this},offClick(e,t,s){return typeof e=="function"&&(s=t,t=e,e=this),e._click===void 0?this:(e._click.off("click",t,s),this)},enableClick(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._click===void 0?this:(e._click.setEnable(t),this)},disableClick(e){return e===void 0&&(e=this),e._click===void 0?this:(e._click.setEnable(!1),this)}};const _h=Phaser.Utils.Objects.GetValue;class Nf extends Oe{constructor(t,s){super(t,s),this._enable=void 0;var l=_h(s,"inputConfig",void 0);l&&t.setInteractive(l),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(_h(t,"enable",!0)),this.setMode(_h(t,"mode",1)),this.setClickInterval(_h(t,"clickInterval",100)),this.setDragThreshold(_h(t,"threshold",void 0)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this),t.input.on("pointermove",this.onMove,this)}shutdown(t){if(!this.isShutdown){var s=this.parent.scene;s.input.off("pointerdown",this.onPress,this),s.input.off("pointerup",this.onRelease,this),s.input.off("pointermove",this.onMove,this),this.pointer=null,super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var s=t?"enable":"disable";this.emit(s,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=w4[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}isPointerInside(t){var s=this.parent,l=s.input?kp:Zs;return l(s,t)}onPress(t){this.parent.willRender(t.camera)&&this.pointer===void 0&&(this.isPointerInside(t)||(this.pointer=t,this.mode===0&&(this.isPointerInside(t)||this.click(t.downTime,t))))}onRelease(t){this.parent.willRender(t.camera)&&this.pointer===t&&(this.mode===1&&(this.isPointerInside(t)||this.click(t.upTime,t)),this.pointer=void 0)}onMove(t,s,l,w){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&(t.getDistance()>=this.dragThreshold||this.isPointerInside(t))&&this.cancel()}click(t,s){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,s),this;this.pointer=void 0;var l=this.lastClickTime;return l!==void 0&&t-l<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,s),this)}cancel(){return this.pointer=void 0,this}}const w4={press:0,pointerdown:0,release:1,pointerup:1};var S4={onClickOutside(e,t,s,l){return e?(typeof e=="function"&&(l=s,s=t,t=e,e=this),e._clickOutside===void 0&&(e._clickOutside=new Nf(e,l)),e._clickOutside.on("clickoutside",t,s),this):this},offClickOutside(e,t,s){return typeof e=="function"&&(s=t,t=e,e=this),e._clickOutside===void 0?this:(e._clickOutside.off("clickoutside",t,s),this)},enableClickOutside(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._clickOutside===void 0?this:(e._clickOutside.setEnable(t),this)},disableClickOutside(e){return e===void 0&&(e=this),e._clickOutside===void 0?this:(e._clickOutside.setEnable(!1),this)}};class T4 extends Or{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,s){this.remainderTime-=s,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>s?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const Yf=Phaser.Utils.Objects.GetValue;class Qa extends Oe{constructor(t,s){super(t,s),this._enable=void 0,this.cooldown=new T4,this.parent.setInteractive(Yf(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(Yf(t,"enable",!0)),this.setCooldown(Yf(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,s,l){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,s){this.cooldown.update(t,s),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}}var C4={isPointerInBounds(e){return e===void 0?e=this:typeof e=="string"&&(e=this.getElement(e)),e?Zs(e):!1},onTouching(e,t,s,l){return e?(typeof e=="function"&&(l=s,s=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new Qa(e,l)),e._inTouching.on("intouch",t,s),this):this},offTouching(e,t,s){return typeof e=="function"&&(s=t,t=e,e=this),e._inTouching===void 0?this:(e._inTouching.off("intouch",t,s),this)},onTouchingEnd(e,t,s,l){return e?(typeof e=="function"&&(l=s,s=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new Qa(e,l)),e._inTouching.on("touchend",t,s),this):this},offTouchingEnd(e,t,s){return typeof e=="function"&&(s=t,t=e,e=this),e._inTouching===void 0?this:(e._inTouching.off("touchend",t,s),this)},enableTouching(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._inTouching===void 0?this:(e._inTouching.setEnable(t),this)},disableTouching(e){return e===void 0&&(e=this),e._inTouching===void 0?this:(e._inTouching.setEnable(!1),this)}},P4={onOver(e,t,s){return e?(typeof e=="function"&&(s=t,t=e,e=this),e.setInteractive().on("pointerover",t,s),this):this},onOut(e,t,s){return e?(typeof e=="function"&&(s=t,t=e,e=this),e.setInteractive().on("pointerout",t,s),this):this}},O1=function(e,t,s,l){if(e==="parent"){for(var w,S=0,k=t.length;S<k;S++)if(w=t[S],!!Kn(w,s,l))return w.pointToChild?w.pointToChild(s,l):k1.call(w,s,l)}else for(var S=0,k=t.length;S<k;S++){var D=t[S];if(Kn(D,s,l))return D}return null},ps=function(e,t,s,l,w,S,k,D){var V;if(S===void 0)V=w;else{var G=s[0];if(!G)return;var j=k.camera,tt=w+j.scrollX*(G.scrollFactorX-1),st=S+j.scrollY*(G.scrollFactorY-1);V=O1(l,s,tt,st)}V&&e.emit(t,V,k,D)};const M4=Phaser.Utils.Objects.GetValue;var _4=function(e){var t=M4(e,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",k4,this))},k4=function(e,t,s,l){var w=this._childrenInteractive;ps(w.eventEmitter,`${w.eventNamePrefix}down`,w.targetSizers,w.targetMode,e.worldX,e.worldY,e,l)};const O4=Phaser.Utils.Objects.GetValue;var E4=function(e){var t=O4(e,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",A4,this))},A4=function(e,t,s,l){var w=this._childrenInteractive;ps(w.eventEmitter,`${w.eventNamePrefix}up`,w.targetSizers,w.targetMode,e.worldX,e.worldY,e,l)};const R4=Phaser.Utils.Objects.GetValue;var D4=function(e){var t=R4(e,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",E1,this).on("pointerover",E1,this).on("pointerout",I4,this))},E1=function(e,t,s,l){var w=this._childrenInteractive,S=w.targetSizers[0];if(S){var k=e.camera,D=e.worldX+k.scrollX*(S.scrollFactorX-1),V=e.worldY+k.scrollY*(S.scrollFactorY-1),G=O1(w.targetMode,w.targetSizers,D,V),j=w.lastOverChild;G&&j&&G===j||(w.lastOverChild=G,ps(w.eventEmitter,`${w.eventNamePrefix}out`,w.targetSizers,w.targetMode,j,void 0,e,l),ps(w.eventEmitter,`${w.eventNamePrefix}over`,w.targetSizers,w.targetMode,G,void 0,e,l))}},I4=function(e,t){var s=this._childrenInteractive,l=s.lastOverChild;s.lastOverChild=null,ps(s.eventEmitter,`${s.eventNamePrefix}out`,s.targetSizers,s.targetMode,l,void 0,e,t)};const L4=Phaser.Utils.Objects.GetValue;var F4=function(e){var t=L4(e,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var s=this._childrenInteractive;this._click=new Mr(this,t),this._click.on("click",function(l,w,S,k){ps(s.eventEmitter,`${s.eventNamePrefix}click`,s.targetSizers,s.targetMode,S.worldX,S.worldY,S,k)},this)}};const Vf=Phaser.Utils.Objects.GetValue;class Vu extends Jl{constructor(t,s){var l=Da(t);l===t&&(t=void 0),super(l,s),this.gameObject=t,t&&t.setInteractive(Vf(s,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(Vf(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(Vf(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=zf,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,s){if(this.enable&&this.pointer===void 0){var l=this.bounds?this.bounds.contains(t.x,t.y):!0;l&&this.pointer!==t&&(this.pointer=t,this.pointerCamera=t.camera,this.lastPointer=t,this.movedState=!1,this.tracerState=A1,this.gameObject===void 0&&(this.isTouchingAnyObject=s.length>0),this.onDragStart())}}onPointerUp(t){if(this.enable){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;s&&this.pointer===t&&(this.pointer=void 0,this.pointerCamera=void 0,this.movedState=!1,this.tracerState=zf,this.onDragEnd())}}onPointerMove(t){if(this.enable&&t.isDown){var s=this.bounds?this.bounds.contains(t.x,t.y):!0,l=this.pointer===t;!l&&s||(l&&!s?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===A1&&this.onDragEnd(),this.pointer=void 0,this.tracerState=zf,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,s){}postUpdate(t,s){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=B4,this}isPointerInGameObject(t,s,l){var w=this.lastPointer;return w?Zs(t,w,s,l):!1}}const zf=0,A1=1,B4="IDLE",Qn=Phaser.Utils.Objects.GetValue,N4=Phaser.Math.Distance.Between;class zu extends Vu{constructor(t,s){super(t,s);var l=this,w={states:{IDLE:{enter:function(){l.stop(),l.tapsCount=0,l.x=0,l.y=0,l.worldX=0,l.worldY=0,l.lastPointer=void 0},exit:function(){var S=l.lastPointer;l.x=S.x,l.y=S.y,l.worldX=S.worldX,l.worldY=S.worldY}},BEGIN:{enter:function(){l.start(),l.tapsCount=0,l.emit("tappingstart",l,l.gameObject,l.lastPointer)}},RECOGNIZED:{enter:function(){l.start(),l.emit("tap",l,l.gameObject,l.lastPointer),l.emit(`${l.tapsCount}tap`,l,l.gameObject,l.lastPointer)}}},init:function(){this.state=Jn},eventEmitter:!1};this.setRecongizedStateObject(new Or(w))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(Qn(t,"time",250)),this.setTapInterval(Qn(t,"tapInterval",200)),this.setDragThreshold(Qn(t,"threshold",9)),this.setTapOffset(Qn(t,"tapOffset",10));var s=Qn(t,"taps",void 0);return s!==void 0?this.setTaps(s):(this.setMaxTaps(Qn(t,"maxTaps",void 0)),this.setMinTaps(Qn(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case Jn:this.state=Ja;break;case Ja:var t=this.lastPointer,s=N4(t.upX,t.upY,t.x,t.y);s>this.tapOffset&&(this.state=Za,this.state=Ja);break;case Za:this.state=Ja;break}}onDragEnd(){this.state===Ja&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Za))}onDrag(){this.state!==Jn&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Jn)}preUpdate(t,s){if(!(!this.isRunning||!this.enable)&&this.state===Ja){var l=this.lastPointer;if(l.isDown){var w=t-l.downTime;w>this.holdTime&&(this.state=Jn)}else{var S=t-l.upTime;S>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Za:this.state=Jn)}}}postUpdate(t,s){!this.isRunning||!this.enable||this.state===Za&&(this.state=Jn)}get isTapping(){return this.state===Za}get isTapped(){return this.isTapping}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,s){return s===void 0&&(s=t),this.setMinTaps(t).setMaxTaps(s),this}}const Jn="IDLE",Ja="BEGIN",Za="RECOGNIZED",R1=Phaser.Utils.Objects.GetValue;class Gu extends Vu{constructor(t,s){super(t,s);var l=this,w={states:{IDLE:{enter:function(){l.x=0,l.y=0,l.worldX=0,l.worldY=0,l.lastPointer=void 0},exit:function(){var S=l.lastPointer;l.x=S.x,l.y=S.y,l.worldX=S.worldX,l.worldY=S.worldY}},BEGIN:{enter:function(){l.start()},exit:function(){l.stop()}},RECOGNIZED:{enter:function(){l.emit("pressstart",l,l.gameObject,l.lastPointer)},exit:function(){l.emit("pressend",l,l.gameObject,l.lastPointer)}}},init:function(){this.state=Uu},eventEmitter:!1};this.setRecongizedStateObject(new Or(w))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(R1(t,"threshold",9)),this.setHoldTime(R1(t,"time",251)),this}onDragStart(){this.state=D1,this.holdTime===0&&(this.state=Gf)}onDragEnd(){this.state=Uu}onDrag(){this.state!==Uu&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Uu)}preUpdate(t,s){if(!(!this.isRunning||!this.enable)&&this.state===D1){var l=t-this.pointer.downTime;l>=this.holdTime&&(this.state=Gf)}}get isPressing(){return this.state===Gf}get isPressed(){return this.isPressing}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const Uu="IDLE",D1="BEGIN",Gf="RECOGNIZED",Y4=Phaser.Utils.Objects.GetValue;class I1 extends Vu{constructor(t,s){super(t,s);var l=this,w={states:{IDLE:{},BEGIN:{enter:function(){var S=l.pointer;l.startX=S.x,l.startY=S.y,l.startWorldX=S.worldX,l.startWorldY=S.worldY}},RECOGNIZED:{enter:function(){l.emit("panstart",l,l.gameObject,l.lastPointer)},exit:function(){var S=l.lastPointer;l.endX=S.x,l.endY=S.y;var k=Yu(S,l.pointerCamera,!0);l.endWorldX=k.x,l.endWorldY=k.y,l.emit("panend",l,l.gameObject,l.lastPointer)}}},init:function(){this.state=L1},eventEmitter:!1};this.setRecongizedStateObject(new Or(w))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Y4(t,"threshold",10)),this}onDragStart(){this.state=F1,this.dragThreshold===0&&(this.state=Wu)}onDragEnd(){this.state=L1}onDrag(){switch(this.state){case F1:if(this.pointer.getDistance()>=this.dragThreshold){this.state=Wu,this.dx=0,this.dy=0,this.dWorldX=0,this.dWorldY=0;var w=this.pointer;this.x=w.x,this.y=w.y,this.worldX=w.worldX,this.worldY=w.worldY}break;case Wu:var t=this.pointerCamera,s=this.pointer.position,l=this.pointer.prevPosition;this.dx=s.x-l.x,this.dy=s.y-l.y,this.dWorldX=this.dx/t.zoom,this.dWorldY=this.dy/t.zoom;var w=this.pointer;this.x=w.x,this.y=w.y;var S=Yu(w,t,!0);this.worldX=S.x,this.worldY=S.y,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanning(){return this.state===Wu}get isPanned(){return this.isPanning}setDragThreshold(t){return this.dragThreshold=t,this}}const L1="IDLE",F1="BEGIN",Wu="RECOGNIZED",V4=Phaser.Math.Distance.Between,z4=Phaser.Math.Angle.Between;var G4={getDt:function(){var e=Lp(this.scene);return e},getVelocity:function(){var e=this.pointer.position,t=this.pointer.prevPosition,s=V4(t.x,t.y,e.x,e.y),l=s/(this.getDt()*.001);return l},getVelocityX:function(){var e=this.pointer.position,t=this.pointer.prevPosition,s=Math.abs(e.x-t.x),l=s/(this.getDt()*.001);return l},getVelocityY:function(){var e=this.pointer.position,t=this.pointer.prevPosition,s=Math.abs(e.y-t.y),l=s/(this.getDt()*.001);return l},getVelocityAngle:function(){var e=this.pointer.position,t=this.pointer.prevPosition,s=z4(t.x,t.y,e.x,e.y);return s}},U4={"up&down":0,"left&right":1,"4dir":2,"8dir":3},W4=function(e,t,s){switch(s===void 0?s={}:s===!0&&(s=X4),s.left=!1,s.right=!1,s.up=!1,s.down=!1,e=(e+360)%360,t){case 0:e<180?s.down=!0:s.up=!0;break;case 1:e>90&&e<=270?s.left=!0:s.right=!0;break;case 2:e>45&&e<=135?s.down=!0:e>135&&e<=225?s.left=!0:e>225&&e<=315?s.up=!0:s.right=!0;break;case 3:e>22.5&&e<=67.5?(s.down=!0,s.right=!0):e>67.5&&e<=112.5?s.down=!0:e>112.5&&e<=157.5?(s.down=!0,s.left=!0):e>157.5&&e<=202.5?s.left=!0:e>202.5&&e<=247.5?(s.left=!0,s.up=!0):e>247.5&&e<=292.5?s.up=!0:(e>292.5&&e<=337.5&&(s.up=!0),s.right=!0);break}return s},X4={};const Uf=Phaser.Utils.Objects.GetValue,j4=Phaser.Math.RadToDeg;class kh extends Vu{constructor(t,s){super(t,s);var l=this,w={states:{IDLE:{enter:function(){l.x=0,l.y=0,l.worldX=0,l.worldY=0},exit:function(){var S=l.lastPointer;l.x=S.x,l.y=S.y,l.worldX=S.worldX,l.worldY=S.worldY}},BEGIN:{enter:function(){l.validDrag=!1}},RECOGNIZED:{enter:function(){l.start(),l.updateDirectionStates(),l.emit("swipe",l,l.gameObject,l.lastPointer)},exit:function(){l.stop(),l.clearDirectionStates()}}},init:function(){this.state=Wf},eventEmitter:!1};this.setRecongizedStateObject(new Or(w)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Uf(t,"threshold",10)),this.setVelocityThreshold(Uf(t,"velocityThreshold",1e3)),this.setDirectionMode(Uf(t,"dir","8dir")),this}onDragStart(){this.state=B1}onDragEnd(){this.state=Wf}onDrag(){this.state===B1&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=Xf))}postUpdate(t,s){!this.isRunning||!this.enable||this.state===Xf&&(this.state=Wf)}get isSwiping(){return this.state===Xf}get isSwiped(){return this.isSwiping}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=U4[t]),this.dirMode=t,this}updateDirectionStates(){var t=j4(this.getVelocityAngle());return W4(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(kh.prototype,G4);const Wf="IDLE",B1="BEGIN",Xf="RECOGNIZED",Xu=Phaser.Utils.Objects.GetValue,H4=Phaser.Utils.Array.SpliceOne,$4=Phaser.Math.Distance.Between,q4=Phaser.Math.Angle.Between;class jf{constructor(t,s){var l=Da(t);l===t&&(t=void 0);var w=l.input.manager.pointersTotal-1;w<2&&l.input.addPointer(2-w),this.scene=l,this.gameObject=t,t&&t.setInteractive(Xu(s,"inputConfig",void 0)),this.setEventEmitter(Xu(s,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(Xu(t,"enable",!0)),this.bounds=Xu(t,"bounds",void 0),this.tracerState=ju,this.pointers.length=0,Ce(this.movedState),this}boot(){this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,Ce(this.movedState),this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0,this.gameObject=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&this.pointers.length!==2){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;if(s){var l=this.pointers.indexOf(t);if(l===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.pointerCamera=t.camera,this.tracerState){case ju:this.tracerState=Eh,this.onDrag1Start();break;case Eh:this.tracerState=tr,this.onDrag2Start();break}}}}onPointerUp(t){if(this.enable){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;if(s){var l=this.pointers.indexOf(t);if(l!==-1)switch(delete this.movedState[t.id],H4(this.pointers,l),this.tracerState){case Eh:this.tracerState=ju,this.onDrag1End();break;case tr:this.tracerState=Eh,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(this.enable&&t.isDown){var s=this.bounds?this.bounds.contains(t.x,t.y):!0,l=this.pointers.indexOf(t)!==-1;if(!(!l&&s)){if(l&&!s)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Eh:this.onDrag1();break;case tr:this.onDrag2();break}}}}dragCancel(){return this.tracerState===tr&&this.onDrag2End(),this.pointers.length=0,Ce(this.movedState),this.tracerState=ju,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==tr)return 0;var t=this.pointers[0],s=this.pointers[1];return $4(t.x,t.y,s.x,s.y)}get angleBetween(){if(this.tracerState!==tr)return 0;var t=this.pointers[0],s=this.pointers[1];return q4(t.x,t.y,s.x,s.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var s=t.position,l=t.prevPosition;Oh.x=s.x-l.x,Oh.y=s.y-l.y}else Oh.x=0,Oh.y=0;return Oh}get centerX(){if(this.tracerState!==tr)return 0;var t=this.pointers[0].position,s=this.pointers[1].position;return(t.x+s.x)/2}get centerY(){if(this.tracerState!==tr)return 0;var t=this.pointers[0].position,s=this.pointers[1].position;return(t.y+s.y)/2}get prevCenterX(){if(this.tracerState!==tr)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,s=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+s.x)/2}get prevCenterY(){if(this.tracerState!==tr)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,s=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+s.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=K4,this}isPointer0InGameObject(t,s,l){var w=this.pointers[0];return w?Zs(t,w,s,l):!1}isPointer1InGameObject(t,s,l){var w=this.pointers[1];return w?Zs(t,w,s,l):!1}}Object.assign(jf.prototype,Wo);var Oh={};const ju=0,Eh=1,tr=2,K4="IDLE",Q4=Phaser.Utils.Objects.GetValue;class N1 extends jf{constructor(t,s){super(t,s);var l=this,w={states:{IDLE:{enter:function(){l.prevDistance=void 0,l.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){l.emit("pinchstart",l)},exit:function(){l.emit("pinchend",l)}}},init:function(){this.state=Y1},eventEmitter:!1};this.setRecongizedStateObject(new Or(w))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Q4(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=V1,this.dragThreshold===0&&(this.state=Hu)}onDrag2End(){this.state=Y1}onDrag2(){switch(this.state){case V1:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Hu}break;case Hu:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinching(){return this.state===Hu}get isPinched(){return this.isPinching}setDragThreshold(t){return this.dragThreshold=t,this}}const Y1="IDLE",V1="BEGIN",Hu="RECOGNIZED",J4=Phaser.Math.RotateAround;var z1=function(e,t,s,l){return J4(e,t,s,l),e.rotation+=l,e},Z4=function(e,t,s,l){return l===void 0?l={}:l===!0&&(l=tF),s.getWorldPoint(e,t,l),l},tF={},eF=function(e,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var s=this.movementCenterX,l=this.movementCenterY,w=Z4(this.centerX,this.centerY,t,!0),S=w.x,k=w.y,D=this.rotation;if(Array.isArray(e))for(var V=e,G=0,j=V.length;G<j;G++)e=V[G],e.x+=s,e.y+=l,z1(e,S,k,D);else e.x+=s,e.y+=l,z1(e,S,k,D);return this};const iF=Phaser.Utils.Objects.GetValue,Hf=Phaser.Math.Angle.WrapDegrees,G1=Phaser.Math.Angle.ShortestBetween,$f=Phaser.Math.RadToDeg,sF=Phaser.Math.DegToRad;class qf extends jf{constructor(t,s){super(t,s);var l=this,w={states:{IDLE:{enter:function(){l.prevAngle=void 0,l.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){l.emit("rotatestart",l)},exit:function(){l.emit("rotateend",l)}}},init:function(){this.state=U1},eventEmitter:!1};this.setRecongizedStateObject(new Or(w))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(iF(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=Hf($f(this.angleBetween)),this.state=W1,this.dragThreshold===0&&(this.state=$u)}onDrag2End(){this.state=U1}onDrag2(){switch(this.state){case W1:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=Hf($f(this.angleBetween));this.angle=G1(this.prevAngle,t),this.prevAngle=t,this.state=$u}break;case $u:var t=Hf($f(this.angleBetween));this.angle=G1(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotating(){return this.state===$u}get isRotated(){return this.isRotating}get rotation(){return sF(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var rF={spinObject:eF};Object.assign(qf.prototype,rF);const U1="IDLE",W1="BEGIN",$u="RECOGNIZED",nF=Phaser.Utils.Objects.GetValue;var aF=function(e){var t=nF(e,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var s=this._childrenInteractive;this._tap=new zu(this,t),this._tap.on("tap",function(l,w,S){ps(s.eventEmitter,`${s.eventNamePrefix}${l.tapsCount}tap`,s.targetSizers,s.targetMode,l.worldX,l.worldY,S,l),ps(s.eventEmitter,`${s.eventNamePrefix}tap`,s.targetSizers,s.targetMode,l.worldX,l.worldY,S,l)},this)}};const oF=Phaser.Utils.Objects.GetValue;var hF=function(e){var t=oF(e,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var s=this._childrenInteractive;this._press=new Gu(this,t),this._press.on("pressstart",function(l,w,S){ps(s.eventEmitter,`${s.eventNamePrefix}pressstart`,s.targetSizers,s.targetMode,l.worldX,l.worldY,S,l)},this).on("pressend",function(l,w,S){ps(s.eventEmitter,`${s.eventNamePrefix}pressend`,s.targetSizers,s.targetMode,l.worldX,l.worldY,S,l)},this)}};const lF=Phaser.Utils.Objects.GetValue;var uF=function(e){var t=lF(e,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var s=this._childrenInteractive;this._swipe=new kh(this,t),this._swipe.on("swipe",function(l,w,S){var k=l.left?"left":l.right?"right":l.up?"up":"down";ps(s.eventEmitter,`${s.eventNamePrefix}swipe${k}`,s.targetSizers,s.targetMode,l.worldX,l.worldY,S,l),ps(s.eventEmitter,`${s.eventNamePrefix}swipe`,s.targetSizers,s.targetMode,l.worldX,l.worldY,S,l)},this)}};const Ah=Phaser.Utils.Objects.GetValue;var qu=function(e,t){return e.setInteractive(),Ah(t,"dropZone",!1)&&(e.input.dropZone=!0),e._childrenInteractive={targetSizers:Ah(t,"targets",[e]),targetMode:Ah(t,"targetMode","parent"),eventEmitter:Ah(t,"eventEmitter",e),eventNamePrefix:Ah(t,"inputEventPrefix","child.")},_4.call(e,t),E4.call(e,t),D4.call(e,t),F4.call(e,t),aF.call(e,t),hF.call(e,t),uF.call(e,t),e},cF=function(e){return qu(this,e),this},dF=function(){for(var e=this.getAllChildren([this]),t=0,s=e.length;t<s;t++){var l=e[t];l.emit.apply(l,arguments)}return this},X1={getSizerConfig:EI,getChildPrevState:AI,pushIntoBounds:RI,drawBounds:XI,resolveWidth:bf,hasWidthWrap:wf,resolveChildrenWidth:aL,runWidthWrap:Sf,resolveHeight:Tf,hasHeightWrap:Cf,resolveChildrenHeight:oL,runHeightWrap:Pf,getChildWidth:hL,getChildHeight:lL,getExpandedChildWidth:uL,getExpandedChildHeight:cL,getChildrenWidth:dL,getChildrenHeight:pL,addChildrenMap:r1,addElement:r1,removeChildrenMap:eL,getElement:iL,getChildIndex:rL,getAllChildrenSizers:fL,getChildrenSizers:gL,preLayout:Sh,layout:mL,runLayout:bL,layoutChildren:TL,layoutBackgrounds:y4,postLayout:CL,setAnchor:ML,isInTouching:p4,pointToChild:k1,setDraggable:b4,setChildrenInteractive:cF,broadcastEvent:dF};Object.assign(X1,nL,$I,tL,Ha,kr,Ch,Du,zL,WL,w1,Bf,S4,C4,P4,HL,Nu,vL,u4);const Ar=Phaser.Utils.Objects.GetValue;let Zn=class extends Ji{constructor(e,t,s,l,w,S){super(e,t,s,1,1),this.isRexSizer=!0;var k=Ar(S,"origin",.5),D=Ar(S,"originX",k),V=Ar(S,"originY",k);this.setOrigin(D,V),this.setMinSize(l,w),this.setName(Ar(S,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0,this.runChildrenWrapFlag=!1,this.enableLayoutWarn(!1);var G=Ar(S,"anchor",void 0);G&&this.setAnchor(G),this.setInnerPadding(Ar(S,"space",0));var j=Ar(S,"draggable",!1);j&&this.setDraggable(j),this.setSizerEventsEnable(Ar(S,"sizerEvents",!1)),this.setDirty(!0),Ar(S,"enableLayer",!1)&&this.enableLayer()}destroy(e){if(!(!this.scene||this.ignoreDestroy)){if(e)for(var t=this.getAllChildrenSizers([this]),s=0,l=t.length;s<l;s++)t[s].sizerEventsEnable=!1;super.destroy(e),Ce(this.backgroundChildren),Ce(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(e,t){return this.setMinWidth(e).setMinHeight(t),this}setMinWidth(e){return e==null&&(e=0),this.minWidth=e,this}setMinHeight(e){return e==null&&(e=0),this.minHeight=e,this}setDirty(e){return e===void 0&&(e=!0),this.dirty=e,this}setSizerEventsEnable(e){return e===void 0&&(e=!0),this.sizerEventsEnable=e,this}enableLayoutWarn(e){return e===void 0&&(e=!0),this.layoutWarnEnable=e,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-le(this)*this.originX}set left(e){this.x+=e-this.left}alignLeft(e){return this.left=e,this}get right(){return this.left+le(this)}set right(e){this.x+=e-this.right}alignRight(e){return this.right=e,this}get centerX(){return this.left+le(this)/2}set centerX(e){this.x+=e-this.centerX}alignCenterX(e){return this.centerX=e,this}get top(){return this.y-ue(this)*this.originY}set top(e){this.y+=e-this.top}alignTop(e){return this.top=e,this}get bottom(){return this.top+ue(this)}set bottom(e){this.y+=e-this.bottom}alignBottom(e){return this.bottom=e,this}get centerY(){return this.top+ue(this)/2}set centerY(e){this.y+=e-this.centerY}alignCenterY(e){return this.centerY=e,this}get innerLeft(){return this.left+this.space.left*this.scaleX}get innerRight(){return this.right-this.space.right*this.scaleX}get innerTop(){return this.top+this.space.top*this.scaleY}get innerBottom(){return this.bottom-this.space.bottom*this.scaleY}get innerWidth(){return(this.width-this.space.left-this.space.right)*this.scaleX}get innerHeight(){return(this.height-this.space.top-this.space.bottom)*this.scaleY}get minInnerWidth(){var e=(this.minWidth-this.space.left-this.space.right)*this.scaleX;return Math.max(e,0)}get minInnerHeight(){var e=(this.minHeight-this.space.top-this.space.bottom)*this.scaleY;return Math.max(e,0)}};Object.assign(Zn.prototype,X1);var pF=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,s,l,w,S=!1;for(var k in t)s=t[k],w=this.getChildWidth(s),w===void 0&&(S=!0),!S&&(l=s.rexSizer.padding,w+=(l.left+l.right)*this.scaleX,e=Math.max(w,e));if(!S)return e+(this.space.left+this.space.right)*this.scaleX},fF=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,s,l,w,S=!1;for(var k in t)s=t[k],w=this.getChildHeight(s),w===void 0&&(S=!0),!S&&(l=s.rexSizer.padding,w+=(l.top+l.bottom)*this.scaleY,e=Math.max(w,e));if(!S)return e+(this.space.top+this.space.bottom)*this.scaleY},gF=function(e,t){t===void 0&&(t=this.width*this.scaleX);var s,l=e.rexSizer;if(l.expandWidth){var w=t-(this.space.left+this.space.right)*this.scaleX,S=l.padding;s=w-(S.left+S.right)*this.scaleX}return s},vF=function(e,t){t===void 0&&(t=this.height);var s,l=e.rexSizer;if(l.expandHeight){var w=t-(this.space.top+this.space.bottom)*this.scaleY,S=l.padding;s=w-(S.top+S.bottom)*this.scaleY}return s},mF=function(e){e===void 0&&(e=[]);var t=this.sizerChildren,s;for(var l in t)s=t[l],s.isRexSizer&&e.push(s);return e},Kf=function(e,t,s,l){if(s===void 0)s=0;else{var w=typeof s;w==="boolean"?(l=s,s=0):w==="string"&&(s=yF[s])}l===void 0?l={}:l===!0&&(l=xF);var S=t.width/e.width,k=t.height/e.height,D=s?Math.max(S,k):Math.min(S,k);return l.width=e.width*D,l.height=e.height*D,l};const yF={fit:0,FIT:0,envelop:1,ENVELOP:1};var xF={},Qf=function(e,t){e.layoutWarnEnable&&(e.width<e.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${e.constructor.name}`),e.height<e.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${e.constructor.name}`))},bF=function(){var e,t,s,l=this.innerLeft,w=this.innerTop,S=this.innerWidth,k=this.innerHeight,D,V,G,j,tt,st,rt,ot,ut,ct=this.sizerChildren;for(var pt in ct)e=ct[pt],!e.rexSizer.hidden&&(t=e.rexSizer,s=t.padding,Ph.call(this,e),rt=this.getExpandedChildWidth(e),ot=this.getExpandedChildHeight(e),t.aspectRatio>0&&(Jf.width=t.aspectRatio,Jf.height=1,Zf.width=rt,Zf.height=ot,ut=Kf(Jf,Zf,"FIT",!0),rt=ut.width,ot=ut.height),e.isRexSizer?(e.runLayout(this,rt,ot),Qf(e,this)):Si(e,rt,ot),D=l+s.left*this.scaleX,G=S-(s.left+s.right)*this.scaleX,V=w+s.top*this.scaleY,j=k-(s.top+s.bottom)*this.scaleY,rt===void 0&&(rt=le(e)),ot===void 0&&(ot=ue(e)),tt=(t.alignOffsetX+t.alignOffsetOriginX*rt)*this.scaleX,st=(t.alignOffsetY+t.alignOffsetOriginY*ot)*this.scaleY,Mh.call(this,e,D,V,G,j,t.align,tt,st))},Jf={},Zf={};const j1=Phaser.Utils.Objects.IsPlainObject,Zi=Phaser.Utils.Objects.GetValue,H1=Phaser.Display.Align.CENTER,wF=Phaser.Utils.String.UUID;var SF=function(e,t,s,l,w,S,k,D,V,G){var j,tt;if(bh.call(this,e),j1(t)){var rt=t;t=Zi(rt,"key",void 0),s=Zi(rt,"align",H1),l=Zi(rt,"padding",0),w=Zi(rt,"expand",!0),e.isRexSizer||(S=Zi(rt,"minWidth",e._minWidth),k=Zi(rt,"minHeight",e._minHeighted)),D=Zi(rt,"offsetX",0),V=Zi(rt,"offsetY",0),j=Zi(rt,"offsetOriginX",0),tt=Zi(rt,"offsetOriginY",0),G=Zi(rt,"aspectRatio",0)}var st=t!==void 0;st||(t=wF()),typeof s=="string"&&(s=Xa[s]),s===void 0&&(s=H1),l===void 0&&(l=0),w===void 0&&(w=!0),e.isRexSizer||(S===void 0&&(S=e._minWidth),k===void 0&&(k=e._minHeight)),D===void 0&&(D=0),V===void 0&&(V=0),j===void 0&&(j=0),tt===void 0&&(tt=0),G===void 0?G=0:G===!0&&(G=le(e)/ue(e)),G>0&&(w=!0,S===void 0&&(S=0),k===void 0&&(k=0));var rt=this.getSizerConfig(e);return rt.align=s,rt.padding=qn(l),j1(w)?(rt.expandWidth=Zi(w,"width",!1),rt.expandHeight=Zi(w,"height",!1)):(rt.expandWidth=w,rt.expandHeight=w),e.isRexSizer||(rt.expandWidth&&(e.minWidth=S===void 0?le(e):S),rt.expandHeight&&(e.minHeight=k===void 0?ue(e):k)),rt.alignOffsetX=D,rt.alignOffsetY=V,rt.alignOffsetOriginX=j,rt.alignOffsetOriginY=tt,rt.aspectRatio=G,this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=e,st&&this.addChildrenMap(t,e),this},TF={add:SF};const CF=Ji.prototype.clear;var Ku=function(e){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!e&&this.sizerEventsEnable,s;if(t&&(s=this.getChildren([])),CF.call(this,e),t)for(var l,w=0,S=s.length;w<S;w++)l=s[w],l.emit("sizer.remove",l,this),this.emit("remove",l,this);return this},PF={remove(e,t){var s;if(typeof e=="string"){if(s=e,e=this.sizerChildren[s],!e)return this}else{if(this.getParentSizer(e)!==this)return this;s=this.childToKey(e)}return s&&(delete this.sizerChildren[s],this.childrenMap.hasOwnProperty(s)&&delete this.childrenMap[s]),wh.call(this,e,t),this},removeAll(e){for(var t in this.sizerChildren)this.remove(t,e);return this},clear(e){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return Ku.call(this,e),this}},$1={getChildrenWidth:pF,getChildrenHeight:fF,getExpandedChildWidth:gF,getExpandedChildHeight:vF,getChildrenSizers:mF,layoutChildren:bF};Object.assign($1,TF,PF);var Qu=function(e,t){if(Array.isArray(e))return e.indexOf(t);for(var s in e)if(e[s]===t)return s;return null};const q1=Phaser.Utils.Objects.IsPlainObject,to=Phaser.Utils.Objects.GetValue;class fs extends Zn{constructor(t,s,l,w,S,k){q1(s)?(k=s,s=to(k,"x",0),l=to(k,"y",0),w=to(k,"width",void 0),S=to(k,"height",void 0)):q1(w)&&(k=w,w=to(k,"width",void 0),S=to(k,"height",void 0)),super(t,s,l,w,S,k),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var s=t;if(this.sizerChildren.hasOwnPropery(s))return s}else return Qu(this.sizerChildren,t);return null}}Object.assign(fs.prototype,$1);var MF=Phaser.Math.Distance.Between,Ju=function(e,t,s){var l=e.width/2;return MF(l,l,t,s)<=l};const _F=Phaser.Math.Angle.Between,kF=Phaser.Math.Angle.Normalize;var K1=function(e,t,s){if(this.enable&&e.isDown){var l=this.sizerChildren.knob;if(Ju(l,t,s)){var w=l.width/2,S=l.startAngle,k=_F(w,w,t,s),D=l.anticlockwise?S-k:k-S,V=kF(D)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-V)<.1?this.value=V:this.easeValueTo(V)}}},OF=function(){var e=this.sizerChildren.knob;e.on("pointerdown",K1,this).on("pointermove",K1,this).setInteractive()};const Q1=Phaser.Math.Angle.Between,EF=Phaser.Math.Angle.Wrap;var AF=function(e,t,s){if(!(!this.enable||this.panPointer)){var l=this.sizerChildren.knob;Ju(l,t,s)&&J1.call(this,e)}},RF=function(e,t,s){if(this.enable&&e.isDown){var l=this.sizerChildren.knob;switch(this.panState){case tg:Ju(l,t,s)&&J1.call(this,e);break;case tb:Ju(l,t,s)?IF.call(this):Z1.call(this);break}}},DF=function(e,t,s){!this.enable||this.panPointer!==e||Z1.call(this)},J1=function(e){this.panPointer=e,this.panState=tb},Z1=function(){this.panPointer=void 0,this.panState=tg},IF=function(){var e=this.panPointer.prevPosition,t=this.panPointer.position,s=this.sizerChildren.knob,l=Q1(s.x,s.y,e.x,e.y),w=Q1(s.x,s.y,t.x,t.y),S=s.anticlockwise?l-w:w-l,k=EF(S)/(Math.PI*2);this.stopEaseValue(),this.value+=k};const tg=0,tb=1;var LF=function(){var e=this.sizerChildren.knob;e.on("pointerdown",AF,this).on("pointermove",RF,this).on("pointerup",DF,this).setInteractive(),this.panPointer=void 0,this.panState=tg},FF=function(e,t){return this.textFormatCallback=e,this.textFormatCallbackScope=t,this},eb=function(e){e===void 0&&(e=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(e):t=this.textFormatCallback.call(this.textFormatCallbackScope,e),t},BF=function(e){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(eb.call(this,e)),t.layout&&t.layout()),this},NF={setTextFormatCallback:FF,getFormatText:eb,updateText:BF};const As=Phaser.Utils.Objects.GetValue,YF=Phaser.Math.Snap.To;class eg extends an(fs){constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexKnob",this.bootProgressBase(s);var l=As(s,"background",void 0),w=As(s,"text",void 0);l&&this.addBackground(l),w&&(s.textColor=void 0,s.textStrokeColor=void 0,this.setTextFormatCallback(As(s,"textFormatCallback",void 0),As(s,"textFormatCallbackScope",void 0)),s.textFormatCallback=void 0,s.textFormatCallbackScope=void 0);var S=new yu(t,s);S.setDepth(As(s,"knobDepth",0)),S._value=-1,t.add.existing(S),this.add(S,"knob"),w&&(this.add(w,"text","center",0,!1),t.children.moveBelow(S,w)),this.addChildrenMap("background",l),this.addChildrenMap("knob",S),this.addChildrenMap("text",w),this.setEnable(As(s,"enable",void 0)),this.setGap(As(s,"gap",void 0)),this.setValue(As(s,"value",0),As(s,"min",void 0),As(s,"max",void 0));var k=As(s,"input",0);switch(typeof k=="string"&&(k=VF[k]),k){case 0:LF.call(this);break;case 1:OF.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=YF(t,this.gap));var s=this.value;this.sizerChildren.knob.value=t;var l=this.value;s!==l&&(this.updateText(),this.eventEmitter.emit("valuechange",l,s,this.eventEmitter))}}const VF={pan:0,drag:0,click:1,none:-1};Object.assign(eg.prototype,NF),T.register("knob",function(e){var t=new eg(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Knob",eg);const zF={arc:Va,circle:cs,curve:b3,ellipse:w3,line:sn,lines:mi,rectangle:G3,roundRectangle:gu,triangle:W3},ib=Phaser.Utils.Objects.GetValue,GF=Phaser.Utils.Objects.IsPlainObject,UF=function(){for(var e=this.getShapes(),t=0,s=e.length;t<s;t++)e[t].lineStyle().fillStyle()};var WF={createShape(e,t){var s=zF[e],l=new s;return t&&l.setName(t),l},buildShapes(e){var t=ib(e,"create",void 0);if(GF(t)){var s=t;for(var l in s){var w=s[l];switch(typeof w){case"number":for(var S=0;S<w;S++)this.addShape(this.createShape(l));break;case"string":this.addShape(this.createShape(l,w));break;default:for(var k=w,S=0,D=k.length;S<D;S++)this.addShape(this.createShape(l,k[S]));break}}}else if(Array.isArray(t))for(var s=t,S=0,D=s.length;S<D;S++){var V=s[S];this.addShape(this.createShape(V.type,V.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(ib(e,"update"))},setUpdateShapesCallback(e){return e===void 0&&(e=UF),this.dirty=this.dirty||this.updateCallback!==e,this.updateCallback=e,this},updateShapes(){this.updateCallback.call(this)}};const Rh=Phaser.Utils.Objects.GetValue,XF=Phaser.Utils.Objects.IsPlainObject;class Zu extends Pr{constructor(t,s,l,w,S,k){XF(s)&&(k=s,s=Rh(k,"x",0),l=Rh(k,"y",0),w=Rh(k,"width",2),S=Rh(k,"height",2)),super(t,s,l,w,S),this.type=Rh(k,"type","rexCustomShapes"),this.buildShapes(k)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(t,s,l,w){return typeof l=="boolean"&&(w=l,l=void 0),s0(this,t,s,l,w)}}Object.assign(Zu.prototype,WF),T.register("customShapes",function(e,t,s,l,w){var S=new Zu(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.CustomShapes",Zu);const Dh=Phaser.Utils.Objects.GetValue,jF=Phaser.Utils.Objects.IsPlainObject;class er extends an(Zu){constructor(t,s,l,w,S,k){jF(s)&&(k=s,s=Dh(k,"x",0),l=Dh(k,"y",0),w=Dh(k,"width",2),S=Dh(k,"height",2)),k===void 0&&(k={}),k.type||(k.type="rexCustomProgress"),super(t,s,l,w,S,k),this.bootProgressBase(k),this.setValue(Dh(k,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}}T.register("customProgress",function(e,t,s,l,w){var S=new er(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.CustomProgress",er);var HF=function(e){return this.easeValueTask||(this.easeValueTask=new _s(this,{eventEmitter:null})),e!==void 0&&(this.duration=e,this.easeValueTask.stop()),this.easeValueTask.isRunning?this:(this.easeValueTask.restart({key:"value",from:0,to:1,duration:this.duration,ease:this.ease,repeat:-1,delay:this.delay,repeatDelay:this.repeatDelay}),this.setDirty(),this)},$F=function(){return this.easeValueTask?(this.easeValueTask.stop(),this.setDirty(),this):this},qF=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this},KF=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this},QF={start:HF,stop:$F,pause:qF,resume:KF};const Rs=Phaser.Utils.Objects.GetValue;class sb extends Pr{constructor(t,s){var l=Rs(s,"x",0),w=Rs(s,"y",0),S=Rs(s,"width",64),k=Rs(s,"height",64);super(t,l,w,S,k),this.resetFromConfig(s,!0),this.buildShapes(s),Rs(s,"start",!0)&&this.start()}resetFromConfig(t,s){s===void 0&&(s=!1);var l;return l=s?1e3:this.duration,this.setDuration(Rs(t,"duration",l)),l=s?"Linear":this.ease,this.setEase(Rs(t,"ease",l)),l=s?0:this.delay,this.setDelay(Rs(t,"delay",l)),l=s?0:this.repeatDelay,this.setRepeatDelay(Rs(t,"repeatDelay",l)),l=s?16777215:this.color,this.setColor(Rs(t,"color",l)),l=s?0:this.value,this.setValue(Rs(t,"value",l)),this}buildShapes(){}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get color(){return this._color}set color(t){this.isColorChanged=this.isColorChanged||this._color!==t,this.dirty=this.dirty||this.isColorChanged,this._color=t,this.setShapesColor(t)}setColor(t){return this.color=t,this}setShapesColor(t){}get value(){return this._value}set value(t){t=Phaser.Math.Clamp(t,0,1),this.dirty=this.dirty||this._value!=t,this._value=t}setValue(t){return this.value=t,this}setDuration(t){return this.duration=t,this}setDelay(t){return this.delay=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return this.ease=t,this}get isRunning(){return this.tweenTask?this.tweenTask.isRunning:!1}}Object.assign(sb.prototype,QF);const cn=Phaser.Math.DegToRad,JF=Phaser.Math.Linear,ZF=Phaser.Math.Easing.Expo.In,tB={right:0,down:1,left:2,up:3};var eB=function(e,t,s,l,w,S,k,D,V,G,j){var tt=eo(t,0,l,w,S,k,D,V,G,j);e.startAt(tt.x,tt.y);var st=eo(s,0,l,w,S,k,D,V,G,j);e.lineTo(st.x,st.y);var rt=eo(s,s,l,w,S,k,D,V,G,j);e.lineTo(rt.x,rt.y);var ot=eo(0,s,l,w,S,k,D,V,G,j);e.lineTo(ot.x,ot.y);var ut=eo(0,t,l,w,S,k,D,V,G,j);e.lineTo(ut.x,ut.y);var ct=eo(t,t,l,w,S,k,D,V,G,j);e.lineTo(ct.x,ct.y),e.close()},ig={},eo=function(e,t,s,l,w,S,k,D,V,G){var j=e*s,tt=t*l;return ig.x=k*j+D*tt+w,ig.y=V*j+G*tt+S,ig},tc={setDirection(e){return typeof e=="string"&&(e=tB[e]),this.direction=e,this},buildShapes(){for(var e=0;e<3;e++)this.addShape(new mi)},updateShapes(){var e,t,s,l,w,S;switch(this.direction){case 1:e=this.centerX,t=this.centerY-this.radius;var k=cn(315);s=Math.cos(k),l=Math.sin(k);var D=cn(45);w=Math.cos(D),S=Math.sin(D);break;case 3:e=this.centerX,t=this.centerY+this.radius;var k=cn(135);s=Math.cos(k),l=Math.sin(k);var D=cn(225);w=Math.cos(D),S=Math.sin(D);break;case 2:e=this.centerX+this.radius,t=this.centerY;var k=cn(225);s=Math.cos(k),l=Math.sin(k);var D=cn(315);w=Math.cos(D),S=Math.sin(D);break;default:e=this.centerX-this.radius,t=this.centerY;var k=cn(45);s=Math.cos(k),l=Math.sin(k);var D=cn(135);w=Math.cos(D),S=Math.sin(D);break}for(var V=this.radius/7,G=this.getShapes(),j=0,tt=G.length;j<tt;j++){var st=G[j],rt=(this.value+(tt-j)*.1)%1;rt=ZF(ye(rt));var ot=JF(.25,1,rt);st.fillStyle(this.color,ot);var ut=j*3+1,ct=ut+2;eB(st,ut,ct,V,V,e,t,s,l,w,S)}}};const iB=Phaser.Math.Linear;var sB={buildShapes(){for(var e=0;e<4;e++)this.addShape(new sn);this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,l=e-s,w=t+s,S=s*2,k=this.getShapes(),D=k.length,V=s*2/D,G=V*.7;if(this.prevValue===void 0||this.prevValue>this.value)for(var j=0;j<D;j++){var tt=k[j],st=this.prevValue===void 0?Math.random():tt.getData("to");tt.setData("from",st).setData("to",Math.random())}this.prevValue=this.value;for(var j=0;j<D;j++){var tt=k[j],st=tt.getData("from"),rt=tt.getData("to"),ot=iB(st,rt,this.value),ut=ot*S,ct=l+V*(j+.5);tt.lineStyle(G,this.color,1).setP0(ct,w).setP1(ct,w-ut)}}};const rB=Phaser.Math.Linear;var nB={buildShapes(){for(var e=0;e<3;e++)this.addShape(new cs)},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,l=s*.1,w=Math.ceil(l*.25),S=1-ye(this.value),k=rB(.3,.9,S)*s,D=this.getShapes(),V=0,G=D.length;V<G;V++){var j=D[V],S=(this.value+V/G)%1,tt=Math.PI*2*S;j.lineStyle(w,this.color).setRadius(l).setCenterPosition(e+Math.cos(tt)*k,t+Math.sin(tt)*k)}}};const aB=Phaser.Math.Linear,oB=Phaser.Math.Easing.Expo.In;var hB={buildShapes(){for(var e=5,t=0;t<e;t++){var s=new sn;this.addShape(s);var l=ye(t/(e-1))/2;s.setData("offset",l)}},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,l=e-s,w=s*2,S=this.getShapes(),k=S.length,D=s*2/k,V=D*.7,G=0;G<k;G++){var j=S[G],tt=(this.value+j.getData("offset"))%1;tt=oB(ye(tt));var st=aB(.4,1,tt)*w,rt=l+D*(G+.5);j.lineStyle(V,this.color,1).setP0(rt,t-st/2).setP1(rt,t+st/2)}}},lB={buildShapes(){this.addShape(new mi().setName("border")),this.addShape(new mi().setName("fill"))},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,l=s*.7,w=e-l,S=t-l,k=l*2;if(this.getShape("border").lineStyle(2,this.color,1).startAt(w,S).lineTo(k,0,!0).lineTo(0,k,!0).lineTo(-k,0,!0).lineTo(0,-k,!0).close(),this.value<.5){var D=(.5-this.value)*2,V=k*D;this.getShape("fill").fillStyle(this.color,1).startAt(w,S).lineTo(k,0,!0).lineTo(0,V,!0).lineTo(-k,0,!0).lineTo(0,-V,!0).close()}else{var D=(this.value-.5)*2,G=180*D;this.getShape("border").rotateAround(e,t,G),this.getShape("fill").fillStyle().lineStyle()}}};const rb=Phaser.Math.RadToDeg,nb=Phaser.Math.Angle.WrapDegrees,uB=Phaser.Math.Angle.Wrap,cB=Phaser.Math.Angle.ShortestBetween,dB=Phaser.Math.DegToRad,ab=Phaser.Math.DegToRad(270);var pB={buildShapes(){this.addShape(new cs().setName("border")),this.addShape(new sn().setName("minuteHand")),this.addShape(new sn().setName("hourHand")),this.minuteHandAngle=0,this.hourHandAngle=0},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,l=Math.ceil(s/25),w=s-l/2,S=s*.8,k=s*.5,D=this.minuteHandAngle;this.minuteHandAngle=Math.PI*2*this.value;var V=nb(rb(D)),G=nb(rb(this.minuteHandAngle)),j=cB(V,G);this.hourHandAngle=uB(this.hourHandAngle+dB(j)/12),this.getShape("border").lineStyle(l,this.color).setRadius(w).setCenterPosition(e,t);var tt=this.minuteHandAngle+ab;this.getShape("minuteHand").lineStyle(l,this.color).setP0(e,t).setP1(e+Math.cos(tt)*S,t+Math.sin(tt)*S);var tt=this.hourHandAngle+ab;this.getShape("hourHand").lineStyle(l,this.color).setP0(e,t).setP1(e+Math.cos(tt)*k,t+Math.sin(tt)*k)}};const ob=Phaser.Math.Linear,fB=Phaser.Math.Easing.Expo.In,sg=2,rg=2;var gB={buildShapes(){for(var e=sg*rg,t=0;t<e;t++){var s=new sn;this.addShape(s)}},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,l=e-s,w=t-s,S=s*2/rg,k=s*2/sg,D=this.getShapes(),V=D.length,G=0;G<V;G++){var j=G%rg,tt=Math.floor(G/sg),st=l+S*(j+.5),rt=w+k*(tt+.5),ot=D[G],ut=(this.value+(V-G)*.1)%1;ut=fB(ye(ut));var ct=(V-G)/V,pt=ob(.7,1,ut)*k,mt=ob(.7,1,ut)*S;ot.lineStyle(mt,this.color,ct).setP0(st-pt/2,rt).setP1(st+pt/2,rt)}}};const hb=Phaser.Math.Linear;var vB={buildShapes(){for(var e=3,t=0;t<e;t++){var s=new cs;this.addShape(s);var l=ye(t/(e-1))/2;s.setData("offset",l)}},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,l=e-s,w=this.getShapes(),S=w.length,k=s*2/S,D=k/2,V=0;V<S;V++){var G=w[V],j=(this.value+G.getData("offset"))%1;j=ye(j);var tt=hb(.25,1,j),st=hb(.5,1,j)*D;G.fillStyle(this.color,tt).setRadius(st).setCenterPosition(l+k*(V+.5),t)}}};const lb=Phaser.Math.Linear,mB=Phaser.Math.Easing.Expo.In;var yB={buildShapes(){for(var e=0;e<3;e++){var t=new sn;this.addShape(t)}},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,l=e-s,w=this.getShapes(),S=w.length,k=s*2/S,D=s*2,V=0;V<S;V++){var G=w[V],j=(this.value+(S-V)*.1)%1;j=mB(ye(j));var tt=(V+1)/S,st=lb(.7,1,j)*D,rt=lb(.7,1,j)*k,ot=l+k*(V+.5);G.lineStyle(rt,this.color,tt).setP0(ot,t-st/2).setP1(ot,t+st/2)}}};const xB=Phaser.Math.Linear,ng=3,ag=3;var bB={buildShapes(){for(var e=ng*ag,t=0;t<e;t++){var s=new cs;this.addShape(s),s.setData("offset",Math.random())}this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,l=this.isInitialize||this.isSizeChanged,w=e-s,S=t-s,k=s*2/ag,D=s*2/ng,V=Math.min(k,D)/2*.8,G=this.getShapes(),j=0,tt=G.length;j<tt;j++){var st=j%ag,rt=Math.floor(j/ng),ot=w+k*(st+.5),ut=S+D*(rt+.5),ct=G[j],pt=(this.value+ct.getData("offset"))%1;pt=ye(pt),ct.fillStyle(this.color,xB(.25,1,pt)),l&&ct.setRadius(V).setCenterPosition(ot,ut)}this.isInitialize=!1}},wB={buildShapes(){for(var e=0;e<2;e++)this.addShape(new mi)},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,l=Math.ceil(s/25),w=s-l,S=w*.6,k=w*.7,D=w*1.2,V=this.getShapes(),G=0,j=V.length;G<j;G++){var tt=V[G],st=(this.value+G/j)%1,rt=ye(st),ot=e,ut=t-15*st,ct=w*st,pt=S*st,mt=k*st,yt=D*st;tt.lineStyle(l,this.color,rt).startAt(ot,ut).cubicBezierTo(ot,ut-pt,ot-ct,ut-pt,ot-ct,ut).cubicBezierTo(ot-ct,ut+pt,ot,ut+mt,ot,ut+yt).cubicBezierTo(ot,ut+mt,ot+ct,ut+pt,ot+ct,ut).cubicBezierTo(ot+ct,ut-pt,ot,ut-pt,ot,ut).close()}}};const SB=Phaser.Math.Linear;var TB={buildShapes(){for(var e=0;e<12;e++)this.addShape(new sn);this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.isInitialize||this.isSizeChanged,l=this.radius,w=l/2,S=Math.ceil(l/20),k=this.getShapes(),D=0,V=k.length;D<V;D++){var G=k[D],j=D/V,tt=Math.PI*2*j,st=SB(.25,1,(1-this.value+j)%1);G.lineStyle(S,this.color,st),s&&G.setP0(e+Math.cos(tt)*w,t+Math.sin(tt)*w).setP1(e+Math.cos(tt)*l,t+Math.sin(tt)*l)}this.isInitialize=!1}},CB={buildShapes(){this.addShape(new cs().setName("track")),this.addShape(new cs().setName("thumb"))},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,l=s*.9,w=Math.ceil(l/25),S=s*.1,k=Math.PI*2*this.value;this.getShape("track").lineStyle(w,this.color,.7).setRadius(l).setCenterPosition(e,t),this.getShape("thumb").fillStyle(this.color).setRadius(S).setCenterPosition(e+Math.cos(k)*l,t+Math.sin(k)*l)}},PB={buildShapes(){this.addShape(new cs().setName("track")),this.addShape(new Va().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,l=Math.ceil(s/25),w=s-l/2;this.getShape("track").lineStyle(l,this.color,.5).setRadius(w).setCenterPosition(e,t);var S=this.value*360,k=S+60;this.getShape("arc").lineStyle(l,this.color,1).setRadius(w).setCenterPosition(e,t).setAngle(S,k)}};const MB=Phaser.Math.Linear;var _B={buildShapes(){for(var e=0;e<4;e++){var t=new Va().setPie();this.addShape(t),t.setData("speed",MB(180,360,Math.random()))}this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,l;this.prevValue!==void 0&&(l=this.value-this.prevValue,this.prevValue>this.value&&(l+=1));for(var w=this.getShapes(),S=0,k=w.length;S<k;S++){var D=w[S],V=(S+1)/k;if(this.prevValue===void 0){var G=S/k*360,j=G+90;D.fillStyle(this.color,V).setRadius(s).setCenterPosition(e,t).setAngle(G,j).setData("angle",G)}else{var G=D.getData("angle")+D.getData("speed")*l;G=G%360;var j=G+90;D.fillStyle(this.color,V).setRadius(s).setCenterPosition(e,t).setAngle(G,j).setData("angle",G)}}this.prevValue=this.value}},kB={buildShapes(){this.addShape(new cs)},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,l=s*this.value,w=Math.ceil(s/25),S=ye(this.value);this.getShapes()[0].lineStyle(w,this.color,S).setRadius(l).setCenterPosition(e,t)}};const OB=Phaser.Math.Linear,EB=Phaser.Math.Easing.Expo.In;var AB={buildShapes(){this.addShape(new cs().setName("center")),this.addShape(new mi().setName("arc0")),this.addShape(new mi().setName("arc1")),this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,l=this.isInitialize||this.isSizeChanged,w=s*2/6,S=e-s+w,k=t+s-w,D=this.getShapes(),V=0,G=D.length;V<G;V++){var j=D[V],tt=(this.value+(G-V)*.1)%1;tt=EB(ye(tt));var st=OB(.25,1,tt);switch(j.name){case"center":j.fillStyle(this.color,st),l&&j.setRadius(w).setCenterPosition(S,k);break;case"arc0":if(j.fillStyle(this.color,st),l){var rt=w*2,ot=w*3;j.startAt(S,k-rt).lineTo(S,k-ot).setIterations(8).arc(S,k,ot,270,360).lineTo(S+rt,k).setIterations(6).arc(S,k,rt,360,270,!0).close()}break;case"arc1":if(j.fillStyle(this.color,st),l){var rt=w*4,ot=w*5;j.startAt(S,k-rt).lineTo(S,k-ot).setIterations(8).arc(S,k,ot,270,360).lineTo(S+rt,k).setIterations(6).arc(S,k,rt,360,270,!0).close()}break}}this.isInitialize=!1}},RB={buildShapes(){for(var e=0;e<2;e++)this.addShape(new cs)},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,l=Math.ceil(s/25),w=s-l,S=this.getShapes(),k=0,D=S.length;k<D;k++){var V=S[k],G=(this.value+k/D)%1,j=ye(G);V.lineStyle(l,this.color,j).setRadius(G*w).setCenterPosition(e,t)}}},DB={buildShapes(){this.addShape(new Va().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,l=Math.ceil(s/10),w=s-l,S=this.value*720,k=ye(this.value)*180,D=S-k;this.getShape("arc").lineStyle(l,this.color,1).setRadius(w).setCenterPosition(e,t).setAngle(D+315,S+315)}};Phaser.Utils.Objects.GetValue;const og={leftArrow:tc,rightArrow:tc,upArrow:tc,downArrow:tc,audio:sB,ball:nB,bars:hB,box:lB,clock:pB,cube:gB,dots:vB,facebook:yB,grid:bB,hearts:wB,ios:TB,oribit:CB,oval:PB,pie:_B,puff:kB,radio:AB,rings:RB,spinner:DB},hg=[];for(var IB in og)hg.push(IB);const ub=Phaser.Utils.Array.GetRandom;var LB={setAnimationMode(e,t){og.hasOwnProperty(e)||(e=ub(hg)),this.animationMode=e;var s=og[e];switch(t&&this.resetFromConfig(t),e){case"leftArrow":s.setDirection.call(this,"left");break;case"rightArrow":s.setDirection.call(this,"right");break;case"upArrow":s.setDirection.call(this,"up");break;case"downArrow":s.setDirection.call(this,"down");break}return this.clear(),s.buildShapes.call(this),this.updateShapes=s.updateShapes.bind(this),this.stop().start(),this},setRandomAnimationMode(e){var t=ub(hg);return this.setAnimationMode(t,e),this}};const FB=Phaser.Utils.Objects.GetValue;class lg extends sb{constructor(t,s){super(t,s),this.type="rexSpinnerAIO",this.setAnimationMode(FB(s,"animationMode"))}}Object.assign(lg.prototype,LB),T.register("aioSpinner",function(e){var t=new lg(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.AIOSpinner",lg);var BB={setTransitionStartCallback(e,t){return this.onStartCallback=e,this.onStartCallbackScope=t,this},setTransitionProgressCallback(e,t){return this.onProgressCallback=e,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(e,t){return this.onCompleteCallback=e,this.onCompleteCallbackScope=t,this}},cb=function(){for(var e=this.scaleMode-1,t=0,s=this.images.length;t<s;t++){var l=this.images[t],w=Kf(l,this,e,!0),S=w.width/l.width;this.setChildLocalScale(l,S),l.biasScale=S}},ec=function(e){this.scaleMode===0?this.resize(e.width,e.height):cb.call(this)};const db=Phaser.Utils.Objects.IsPlainObject,ug=Phaser.Utils.Objects.GetValue,NB=Phaser.Utils.Array.GetRandom;var YB={out:0,in:1},ir=function(e,t,...s){for(var l=0,w=s.length;l<w;l++){var S=s[l];if(S&&S.hasOwnProperty(e))return S[e]}return t},VB={setTransitionDirection(e){return typeof e=="string"&&(e=YB[e]),this.dir=e,this},setDuration(e){return this.duration=e,this},setEaseFunction(e){return this.easeFunction=e,this},setNextTexture(e,t){return this.nextImage.setTexture(e,t),ec.call(this,this.nextImage),this},transit(e,t,s){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),s!==void 0&&(e={key:e,frame:t,mode:s}),this.currentTransitionMode=void 0,db(e)){var l=e;e=ug(l,"key",void 0),t=ug(l,"frame",void 0),s=ug(l,"mode"),Array.isArray(s)&&(s=NB(s));var w;this.transitionModes&&this.transitionModes.hasOwnProperty(s)&&(w=this.transitionModes[s],this.currentTransitionMode=s),this.setDuration(ir("duration",this.duration,l,w)).setEaseFunction(ir("ease",this.easeFunction,l,w)).setTransitionDirection(ir("dir",this.dir,l,w));var S=ir("mask",void 0,l,w);S&&this.setMaskGameObject(S),this.setMaskEnable(S===!0);var k=ir("onStart",void 0,l,w),D=ir("onProgress",void 0,l,w),V=ir("onComplete",void 0,l,w);(k!==void 0||D!==void 0||V!==void 0)&&this.setTransitionStartCallback(k,ir("onStartScope",void 0,l,w)).setTransitionProgressCallback(D,ir("onProgressScope",void 0,l,w)).setTransitionCompleteCallback(V,ir("onCompleteScope",void 0,l,w))}return this.setNextTexture(e,t),this.start(),this},addTransitionMode(e,t){return this.transitionModes===void 0&&(this.transitionModes={}),db(e)&&(t=e,e=t.name,delete t.name),this.transitionModes[e]=t,this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new _s(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};const zB=Phaser.GameObjects.Graphics.prototype.setPosition;var GB=function(e,t){var s=this.parent;return e===void 0&&(e=s.x),t===void 0&&(t=s.y),zB.call(this,e,t),this};const pb=Phaser.Geom.Rectangle,fb=Phaser.Geom.Circle;var UB=function(e,t,s,l,w,S,k){switch(e){case 1:l=l.left;var D=-t*(w-.5),V=-s*(S-.5),G=Math.min(t,s)/2+l;(k===void 0||!(k instanceof fb))&&(k=new fb),k.setTo(D,V,G);break;default:var j=-(t*w)-l.left,tt=-(s*S)-l.top,st=t+l.left+l.right,rt=s+l.top+l.bottom;(k===void 0||!(k instanceof pb))&&(k=new pb),k.setTo(j,tt,st,rt);break}return k},gb=function(e,t,s,l,w){switch(this.geom=UB(this.shapeType,e,t,s,l,w,this.geom),this.clear().fillStyle(16777215),this.shapeType){case 1:this.fillCircleShape(this.geom);break;default:this.fillRectShape(this.geom);break}},WB=function(e,t,s){var l=this.parent;e===void 0&&(e=l.width),t===void 0&&(t=l.height),s===void 0?s=this.padding:typeof s=="number"&&(s=GetBoundsConfig(s));var w=this.width!==e||this.height!==t,S=this.padding!==s&&!nh(this.padding,s);return!w&&!S?this:(this.width=e,this.height=t,S&&Ms(s,this.padding),this.originX=l.originX,this.originY=l.originY,gb.call(this,e,t,s,l.originX,l.originY),this)},XB=function(e,t){t===void 0&&(t=e);var s=this.parent;return e===void 0&&(e=s.originX),t===void 0&&(t=s.originY),this.originX===e&&this.originY===t?this:(this.originX=e,this.originY=t,gb.call(this,this.width,this.height,this.padding,e,t),this)},jB=function(e,t){return e-=this.x,t-=this.y,this.geom.contains(e,t)},HB={setPosition:GB,resize:WB,setOrigin:XB,contains:jB};const $B=Phaser.GameObjects.Graphics;class ic extends $B{constructor(t,s,l){s===void 0&&(s=0),typeof s=="string"&&(s=qB[s]),super(t.scene),this.parent=t,this.shapeType=s,this.padding=qn(l),this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}}const qB={rectangle:0,circle:1};Object.assign(ic.prototype,HB);var KB={setMaskGameObject(e){if(!e)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(e===!0&&this.maskGameObject instanceof ic)return this;if(this.maskGameObject===e)return this;this.removeMaskGameObject()}return e===!0&&(e=new ic(this)),e.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(e),this.maskGameObject=e,e._maskObject||(e._maskObject=e.createGeometryMask(),e.once("destroy",function(){e._maskObject.destroy(),e._maskObject=void 0})),this.childrenMask=e._maskObject,this},removeMaskGameObject(e){return e===void 0&&(e=!0),this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,e),this.maskGameObject=void 0,this},setImageMaskEnable(e,t,s){return t===void 0&&(t=!0),s===void 0&&(s=!1),t?(this.childrenMask||this.setMaskGameObject(!0),e.setMask(this.childrenMask),this.childrenMask.setInvertAlpha(s)):e.clearMask(),this},setCurrentImageMaskEnable(e,t){return this.setImageMaskEnable(this.currentImage,e,t),this},setNextImageMaskEnable(e,t){return this.setImageMaskEnable(this.nextImage,e,t),this},setCellImagesMaskEnable(e,t){for(var s=this.getCellImages(),l=0,w=s.length;l<w;l++)this.setImageMaskEnable(s[l],e,t);return this},setMaskEnable(e,t){return this.setImageMaskEnable(this.backImage,e,t),this.setImageMaskEnable(this.frontImage,e,t),this.setCellImagesMaskEnable(e,t),this}},QB=function(e,t){typeof e=="object"&&(e=e.name),t===void 0&&(t=",");var s;return e==="__BASE"?s=function(l,w){return`${l}${t}${w}`}:s=function(l,w){return`${e}_${l}${t}${w}`},s},JB=function(e,t,s,l,w,S){s==null&&(s="__BASE"),S||(S=QB(s,S));for(var k=e.sys.textures.get(t),D=typeof s=="object"?s:k.get(s),V=D.width,G=D.height,j,tt,st,rt=V/l,ot=G/w,ut=D.cutX,ct=D.cutY,pt=0,mt=0,yt=0;yt<w;yt++){pt=0;for(var St=0;St<l;St++)st=S(St,yt),j=pt+ut,tt=mt+ct,k.add(st,0,j,tt,rt,ot),pt+=rt;mt+=ot}return{getFrameNameCallback:S,cellWidth:rt,cellHeight:ot,columns:l,rows:w}};const Rr=Phaser.Utils.Objects.GetValue,ZB=Phaser.GameObjects.Image,t9=Phaser.Utils.Objects.IsPlainObject,e9=Phaser.Math.RotateAround;var i9=function(e,t,s,l){t9(t)&&(l=t,t=Rr(l,"columns",1),s=Rr(l,"rows",1));var w=Rr(l,"createImageCallback");if(!w){var S=Rr(l,"ImageClass",ZB);w=function(Ie,ni,Ze){return new S(Ie,0,0,ni,Ze)}}for(var k=Rr(l,"originX",.5),D=Rr(l,"originY",.5),V=Rr(l,"add",!0),G=Rr(l,"align",V),j=Rr(l,"objectPool",void 0),tt=e.scene,st=e.texture,rt=e.frame,ot=JB(tt,st,rt,t,s),ut=ot.getFrameNameCallback,ct=e.scaleX,pt=e.scaleY,mt=e.rotation,yt=e.getTopLeft(),St=yt.x,Ct=yt.y,_t=[],Rt=ot.cellWidth*ct,Ft=ot.cellHeight*pt,It=0;It<s;It++)for(var Bt=0;Bt<t;Bt++){var Wt,se=ut(Bt,It);if(j&&j.length>0?Wt=j.pop().setTexture(st,se):Wt=w(tt,st,se),V&&tt.add.existing(Wt),G){var ne=St+Rt*Bt,Yt=Ct+Ft*It,xe=ne+k*Rt,Pe=Yt+D*Ft;Wt.setOrigin(k,D).setPosition(xe,Pe).setScale(ct,pt).setRotation(mt),e9(Wt,St,Ct,mt)}_t.push(Wt)}return _t},s9={gridCutImage(e,t,s,l){l===void 0&&(l={}),l.objectPool=this.imagesPool;for(var w=i9(e,t,s,l),S,k=0,D=w.length;k<D;k++)S=w[k],S.setVisible(!0),this.add(S);return this.cellImages=w,this.setChildLocalVisible(e,!1),w},gridCutCurrentImage(e,t,s){return this.gridCutImage(this.currentImage,e,t,s)},gridCutNextImage(e,t,s){return this.gridCutImage(this.nextImage,e,t,s)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var e=this.cellImages[0].texture,t=this.cellImages,s,l,w=0,S=t.length;w<S;w++)s=t[w],this.setChildLocalAlpha(s,1).setChildLocalScale(s,1).setChildLocalVisible(s,!1),s.clearMask(),l=s.frame.name,s.setTexture(),e.remove(l);return this.imagesPool.push(...t),t.length=0,this}},vb={setFlipX(e){return this.flipX=e,this},setFlipY(e){return this.flipY=e,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(e,t){return this.flipX=e,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}},mb={};Object.assign(mb,BB,VB,KB,s9,vb);var r9=function(e,t,s,l){},n9=function(e,t,s,l){e.setChildLocalAlpha(t,1-l).setChildLocalAlpha(s,l)},a9=function(e,t,s,l){e.setChildLocalAlpha(t,1)};const yb=Phaser.Utils.Objects.IsPlainObject,si=Phaser.Utils.Objects.GetValue,o9=Phaser.Math.Clamp;class sc extends Ji{constructor(t,s,l,w,S,k){yb(s)?(k=s,s=si(k,"x",0),l=si(k,"y",0),w=si(k,"key",void 0),S=si(k,"frame",void 0)):yb(S)&&(k=S,S=void 0);var D=si(k,"back",void 0),V=si(k,"front",void 0);D||(D=t.add.image(s,l,w,S)),V||(V=t.add.image(s,l,w,S));var G=si(k,"width",void 0),j=si(k,"height",void 0),tt=G!==void 0&&j!==void 0?1:0;G===void 0&&(G=V.width),j===void 0&&(j=V.height),super(t,s,l,G,j),this.type="rexTransitionImage",this._flipX=!1,this._flipY=!1,tt=si(k,"scaleMode",tt),typeof tt=="string"&&(tt=h9[tt]),this.scaleMode=tt,D.setVisible(!1),this.addMultiple([D,V]),this.backImage=D,this.frontImage=V,this.images=[this.backImage,this.frontImage],this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[],this.transitionModes=void 0,this.currentTransitionMode=void 0;var st=si(k,"onStart",void 0),rt=si(k,"onProgress",void 0),ot=si(k,"onComplete",void 0),ut=si(k,"dir",0);st===void 0&&rt===void 0&&ot===void 0&&(st=r9,rt=n9,ot=a9,ut=0),this.setTransitionStartCallback(st,si(k,"onStartScope",void 0)).setTransitionProgressCallback(rt,si(k,"onProgressScope",void 0)).setTransitionCompleteCallback(ot,si(k,"onCompleteScope",void 0)).setTransitionDirection(ut).setDuration(si(k,"duration",1e3)).setEaseFunction(si(k,"ease","Linear"));var ct=si(k,"mask",void 0);ct&&this.setMaskGameObject(ct),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1,ec.call(this,this.frontImage)}destroy(t){!this.scene||this.ignoreDestroy||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.images.length=0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,this.transitionModes=void 0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get tint(){return this._tint}set tint(t){this._tint!==t&&(this._tint=t,this.backImage.setTint(t),this.frontImage.setTint(t))}setTint(t){return this.tint=t,this}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}setFlipX(t){return this.flipX=t,this}toggleFlipX(){return this.flipX=!this.flipX,this}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}setFlipY(t){return this.flipY=t,this}toggleFlipY(){return this.flipY=!this.flipY,this}setFlip(t,s){return this.flipX=t,this.flipY=s,this}get t(){return this._t}set t(t){if(t=o9(t,0,1),this._t!==t){this._t=t;var s=this.currentImage,l=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),cg.call(this,this.onStartCallback,this.onStartCallbackScope,this,s,l,t)),cg.call(this,this.onProgressCallback,this.onProgressCallbackScope,this,s,l,t),t===1){cg.call(this,this.onCompleteCallback,this.onCompleteCallbackScope,this,s,l,t);var w=l.texture.key,S=l.frame.name;this.frontImage.setTexture(w,S),this.backImage.setTexture(w,S),ec.call(this,l),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,s){return super.setOrigin(t,s),this.backImage.setOrigin(t,s),this.frontImage.setOrigin(t,s),this.maskGameObject&&this.maskGameObject.setOrigin(t,s),this}setTexture(t,s){return this.frontImage.setTexture(t,s),this.backImage.setTexture(t,s).setVisible(!1),ec.call(this,this.frontImage),this}setSize(t,s){return super.setSize(t,s),this.scaleMode&&cb.call(this),this}}var cg=function(e,t,s,l,w,S){if(e){if(this.scaleMode){var k;l.biasScale>0&&(k=this.getChildLocalScaleX(l),k=k/l.biasScale,this.setChildLocalScale(l,k)),w.biasScale&&(k=this.getChildLocalScaleX(w),k=k/w.biasScale,this.setChildLocalScale(w,k))}if(t?e.call(t,s,l,w,S):e(s,l,w,S),this.scaleMode){var k;l.biasScale>0&&(k=this.getChildLocalScaleX(l),k=k*l.biasScale,this.setChildLocalScale(l,k)),w.biasScale&&(k=this.getChildLocalScaleX(w),k=k*w.biasScale,this.setChildLocalScale(w,k))}}};Object.assign(sc.prototype,mb);const h9={fit:1,FIT:1,envelop:2,ENVELOP:2};T.register("transitionImage",function(e,t,s,l,w){var S=new sc(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.TransitionImage",sc);const l9="slideLeft",u9="slideRight",c9="slideUp",d9="slideDown",p9="slideAwayLeft",f9="slideAwayRight",g9="slideAwayUp",v9="slideAwayDown",m9="pushLeft",y9="pushRight",x9="pushUp",b9="pushDown",w9="zoomOut",S9="zoomIn",T9="zoomInOut",C9="fade",P9="crossFade",M9="wipeLeft",_9="wipeRight",k9="wipeUp",O9="wipeDown",E9="irisOut",A9="irisIn",R9="irisInOut",D9="pieOut",I9="pieIn",L9="pieInOut",F9="blinds",B9="squares",N9="diamonds",Y9="circles",V9="curtain",z9="pixellate",G9="dissolve",U9="revealLeft",W9="revealRight",X9="revealUp",j9="revealDown";var H9=function(e){e.addTransitionMode(f9,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=s.width*w;t.setChildLocalPosition(s,S,0)},onComplete:function(t,s,l,w){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(p9,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=s.width*-w;t.setChildLocalPosition(s,S,0)},onComplete:function(t,s,l,w){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(v9,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=s.height*w;t.setChildLocalPosition(s,0,S)},onComplete:function(t,s,l,w){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(g9,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=s.height*-w;t.setChildLocalPosition(s,0,S)},onComplete:function(t,s,l,w){t.setChildLocalPosition(s,0,0)}})},$9=function(e){e.addTransitionMode(u9,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=l.width*(w-1);t.setChildLocalPosition(l,S,0)},onComplete:function(t,s,l,w){t.setChildLocalPosition(l,0,0)}}).addTransitionMode(l9,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=l.width*(1-w);t.setChildLocalPosition(l,S,0)},onComplete:function(t,s,l,w){t.setChildLocalPosition(l,0,0)}}).addTransitionMode(d9,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=l.height*(w-1);t.setChildLocalPosition(l,0,S)},onComplete:function(t,s,l,w){t.setChildLocalPosition(l,0,0)}}).addTransitionMode(c9,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=l.height*(1-w);t.setChildLocalPosition(l,0,S)},onComplete:function(t,s,l,w){t.setChildLocalPosition(l,0,0)}})},q9=function(e){e.addTransitionMode(y9,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=s.width*w;t.setChildLocalPosition(s,S,0);var S=l.width*(w-1);t.setChildLocalPosition(l,S,0)},onComplete:function(t,s,l,w){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(l,0,0)}}).addTransitionMode(m9,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=s.width*-w;t.setChildLocalPosition(s,S,0);var S=l.width*(1-w);t.setChildLocalPosition(l,S,0)},onComplete:function(t,s,l,w){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(l,0,0)}}).addTransitionMode(b9,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=s.height*w;t.setChildLocalPosition(s,0,S);var S=l.height*(w-1);t.setChildLocalPosition(l,0,S)},onComplete:function(t,s,l,w){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(l,0,0)}}).addTransitionMode(x9,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=s.height*-w;t.setChildLocalPosition(s,0,S);var S=l.height*(1-w);t.setChildLocalPosition(l,0,S)},onComplete:function(t,s,l,w){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(l,0,0)}})},K9=function(e){e.addTransitionMode(w9,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=1-w;t.setChildLocalScale(s,S,S)},onComplete:function(t,s,l,w){t.setChildLocalScale(s,1,1)}}).addTransitionMode(S9,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){var S=w;t.setChildLocalScale(l,S,S)},onComplete:function(t,s,l,w){t.setChildLocalScale(l,1,1)}}).addTransitionMode(T9,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,l,w){l.tint=0},onProgress:function(t,s,l,w){var S;w<.5?(S=1-ye(w),t.setChildLocalScale(s,S,S)):(s.visible&&t.setChildVisible(s,!1),S=1-ye(w),t.setChildLocalScale(l,S,S))},onComplete:function(t,s,l,w){t.setChildLocalScale(s,1,1),t.setChildVisible(s,!0),s.tint=16777215,t.setChildLocalScale(l,1,1),t.setChildVisible(l,!0),l.tint=16777215}})},Q9=function(e){e.addTransitionMode(C9,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,l,w){l.tint=0},onProgress:function(t,s,l,w){var S;w<.5?(w=ye(w),S=Math.floor(255*(1-w)),s.tint=(S<<16)+(S<<8)+S):(s.visible&&t.setChildVisible(s,!1),w=ye(w),S=Math.floor(255*(1-w)),l.tint=(S<<16)+(S<<8)+S)},onComplete:function(t,s,l,w){t.setChildVisible(s,!0),s.tint=16777215,t.setChildVisible(l,!0),l.tint=16777215}}).addTransitionMode(P9,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,l,w){},onProgress:function(t,s,l,w){t.setChildLocalAlpha(s,1-w),t.setChildLocalAlpha(l,w)},onComplete:function(t,s,l,w){t.setChildLocalAlpha(s,1)}})},J9=function(e){var t=new er(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){var s=this.getShape("rect").fillStyle(16777215),l=1-this.value;switch(this.wipeMode){case"right":s.setSize(this.width*l,this.height).setTopLeftPosition(this.width-s.width,0);break;case"left":s.setSize(this.width*l,this.height).setTopLeftPosition(0,0);break;case"down":s.setSize(this.width,this.height*l).setTopLeftPosition(0,this.height-s.height);break;case"up":s.setSize(this.width,this.height*l).setTopLeftPosition(0,0);break}}});return t},Z9=function(e){var t=J9(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(_9,{ease:"Linear",dir:"out",mask:t,onStart:function(s,l,w,S){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="right"},onProgress:function(s,l,w,S){s.maskGameObject.setValue(S)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1)}}).addTransitionMode(M9,{ease:"Linear",dir:"out",mask:t,onStart:function(s,l,w,S){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="left"},onProgress:function(s,l,w,S){s.maskGameObject.setValue(S)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1)}}).addTransitionMode(O9,{ease:"Linear",dir:"out",mask:t,onStart:function(s,l,w,S){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="down"},onProgress:function(s,l,w,S){s.maskGameObject.setValue(S)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1)}}).addTransitionMode(k9,{ease:"Linear",dir:"out",mask:t,onStart:function(s,l,w,S){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="up"},onProgress:function(s,l,w,S){s.maskGameObject.setValue(S)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1)}})},t6=function(e){var t=new er(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){this.getShape("rect").fillStyle(16777215).setSize(this.width*this.value,this.height*this.value).setCenterPosition(this.centerX,this.centerY)}});return t},e6=function(e){var t=t6(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(E9,{ease:"Linear",dir:"out",mask:t,onStart:function(s,l,w,S){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,l,w,S){s.maskGameObject.setValue(S)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1)}}).addTransitionMode(A9,{ease:"Linear",dir:"in",mask:t,onStart:function(s,l,w,S){s.setNextImageMaskEnable(!0,!0)},onProgress:function(s,l,w,S){s.maskGameObject.setValue(1-S)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1)}}).addTransitionMode(R9,{ease:"Linear",dir:"out",mask:t,onStart:function(s,l,w,S){w.tint=0,s.setCurrentImageMaskEnable(!0),s.setNextImageMaskEnable(!0)},onProgress:function(s,l,w,S){var k;S<.5?(S=ye(S),k=Math.floor(255*(1-S)),s.maskGameObject.setValue(1-S),l.tint=(k<<16)+(k<<8)+k):(l.visible&&s.setChildVisible(l,!1),S=ye(S),k=Math.floor(255*(1-S)),s.maskGameObject.setValue(1-S),w.tint=(k<<16)+(k<<8)+k)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1),s.setChildVisible(l,!0),l.tint=16777215,s.setChildVisible(w,!0),w.tint=16777215}})},i6=function(e){var t=new er(e,{type:"Graphics",create:[{name:"pie",type:"arc"}],update:function(){var s=Math.max(this.width,this.height)*2,l=90*this.value;this.getShape("pie").fillStyle(16777215).setCenterPosition(this.centerX,0).setRadius(s).setAngle(90-l,90+l).setPie()}});return t},s6=function(e){var t=i6(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(D9,{ease:"Linear",dir:"out",mask:t,onStart:function(s,l,w,S){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,l,w,S){s.maskGameObject.setValue(S)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1)}}).addTransitionMode(I9,{ease:"Linear",dir:"in",mask:t,onStart:function(s,l,w,S){s.setNextImageMaskEnable(!0,!0)},onProgress:function(s,l,w,S){s.maskGameObject.setValue(1-S)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1)}}).addTransitionMode(L9,{ease:"Linear",dir:"out",mask:t,onStart:function(s,l,w,S){w.tint=0,s.setCurrentImageMaskEnable(!0),s.setNextImageMaskEnable(!0)},onProgress:function(s,l,w,S){var k;S<.5?(S=ye(S),k=Math.floor(255*(1-S)),s.maskGameObject.setValue(1-S),l.tint=(k<<16)+(k<<8)+k):(l.visible&&s.setChildVisible(l,!1),S=ye(S),k=Math.floor(255*(1-S)),s.maskGameObject.setValue(1-S),w.tint=(k<<16)+(k<<8)+k)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1),s.setChildVisible(l,!0),l.tint=16777215,s.setChildVisible(w,!0),w.tint=16777215}})},r6=function(e,t){var s=new er(e,{type:"Graphics",create:{rectangle:t},update:function(){for(var l=this.getShapes(),w=this.width/t,S=0;S<t;S++)l[S].fillStyle(16777215).setSize(w*this.value,this.height).setTopLeftPosition(w*S,0)}});return s},n6=function(e){var t=r6(e.scene,10);e.once("destroy",function(){t.destroy()}).addTransitionMode(F9,{ease:"Linear",dir:"out",mask:t,onStart:function(s,l,w,S){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,l,w,S){s.maskGameObject.setValue(S)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1)}})},a6=function(e,t,s){var l=new er(e,{type:"Graphics",create:{rectangle:t*s},update:function(){for(var w=this.getShapes(),S=this.width/t,k=this.height/s,D=0;D<s;D++)for(var V=0;V<t;V++)w[V*s+D].fillStyle(16777215).setSize(S*this.value,k*this.value).setCenterPosition(S*(V+.5),k*(D+.5))}});return l},o6=function(e){var t=a6(e.scene,Math.ceil(e.width/40),Math.ceil(e.height/40));e.once("destroy",function(){t.destroy()}).addTransitionMode(B9,{ease:"Linear",dir:"out",mask:t,onStart:function(s,l,w,S){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,l,w,S){s.maskGameObject.setValue(S)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1)}})},h6=function(e,t,s){var l=new er(e,{type:"Graphics",create:{lines:t*s},update:function(){for(var w=this.getShapes(),S=this.width/(t-1),k=this.height/s,D=k*2,V=S*this.value,G=k*this.value,j=0;j<s;j++)for(var tt=0;tt<t;tt++){var st=tt*S,rt=j*D+tt%2*k;w[tt*s+j].fillStyle(16777215).start(st+V,rt).lineTo(st,rt+G).lineTo(st-V,rt).lineTo(st,rt-G).lineTo(st+V,rt).close()}}});return l},l6=function(e){var t=h6(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",function(){t.destroy()}).addTransitionMode(N9,{ease:"Linear",dir:"out",mask:t,onStart:function(s,l,w,S){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,l,w,S){s.maskGameObject.setValue(S)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1)}})},u6=function(e,t,s){var l=new er(e,{type:"Graphics",create:{circle:t*s},update:function(){for(var w=this.getShapes(),S=this.width/(t-1),k=this.height/s,D=k*2,V=Math.max(S,k)*this.value,G=0;G<s;G++)for(var j=0;j<t;j++){var tt=j*S,st=G*D+j%2*k;w[j*s+G].fillStyle(16777215).setCenterPosition(tt,st).setRadius(V)}}});return l},c6=function(e){var t=u6(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",function(){t.destroy()}).addTransitionMode(Y9,{ease:"Linear",dir:"out",mask:t,onStart:function(s,l,w,S){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,l,w,S){s.maskGameObject.setValue(S)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1)}})},d6=function(e,t){var s=new er(e,{type:"Graphics",create:{lines:t},update:function(){for(var l=this.getShapes(),w=this.width/t,S=w/2,k=0;k<t;k++){var D=w*k,V=this.height*this.value,G=D+S;l[k].fillStyle(16777215).start(D,0).horizontalLineTo(V).arc(G,V,S,180,0,!0).horizontalLineTo(-V).lineTo(D,0).close()}}});return s},p6=function(e){var t=d6(e.scene,10);e.once("destroy",function(){t.destroy()}).addTransitionMode(V9,{ease:"Linear",dir:"out",mask:t,onStart:function(s,l,w,S){w.tint=0,s.setCurrentImageMaskEnable(!0,!0),s.setNextImageMaskEnable(!0,!0)},onProgress:function(s,l,w,S){var k;S<.5?(S=ye(S),k=Math.floor(255*(1-S)),s.maskGameObject.setValue(S),l.tint=(k<<16)+(k<<8)+k):(l.visible&&s.setChildVisible(l,!1),S=ye(S),k=Math.floor(255*(1-S)),s.maskGameObject.setValue(S),w.tint=(k<<16)+(k<<8)+k)},onComplete:function(s,l,w,S){s.removeMaskGameObject(!1),s.setChildVisible(l,!0),l.tint=16777215,s.setChildVisible(w,!0),w.tint=16777215}})},f6=function(e){e.addTransitionMode(z9,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,l,w){t.setChildVisible(l,!1),s.effect=s.preFX.addPixelate(0),l.effect=l.preFX.addPixelate(0)},onProgress:function(t,s,l,w){if(w<.5){w=ye(w);var S=Math.min(s.width,s.height)/5;s.effect.amount=Math.ceil(S*w)}else{s.visible&&t.setChildVisible(s,!1),l.visible||t.setChildVisible(l,!0),w=ye(w);var S=Math.min(l.width,l.height)/5;l.effect.amount=Math.ceil(S*w)}},onComplete:function(t,s,l,w){s.preFX.remove(s.effect),delete s.effect,t.setChildVisible(s,!0),l.preFX.remove(l.effect),delete l.effect}})};const g6=`#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
// Scene buffer
uniform sampler2D uMainSampler;
uniform sampler2D uMainSampler2;

uniform int resizeMode;
uniform float progress;
uniform float fromRatio;
uniform float toRatio;
varying vec2 outFragCoord;
// Effect parameters
uniform float noiseX;
uniform float noiseY;
uniform float noiseZ;
uniform float fromEdgeStart;
uniform float fromEdgeWidth;
uniform float toEdgeStart;
uniform float toEdgeWidth;

vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 fade(vec3 t) { return t*t*t*(t*(t*6.0-15.0)+10.0); }
float Perlin(vec3 P) {
    vec3 i0 = mod289(floor(P)), i1 = mod289(i0 + vec3(1.0));
    vec3 f0 = fract(P), f1 = f0 - vec3(1.0), f = fade(f0);
    vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x), iy = vec4(i0.yy, i1.yy);
    vec4 iz0 = i0.zzzz, iz1 = i1.zzzz;
    vec4 ixy = permute(permute(ix) + iy), ixy0 = permute(ixy + iz0), ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0), gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    vec4 gx1 = ixy1 * (1.0 / 7.0), gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0); gx1 = fract(gx1);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0), sz0 = step(gz0, vec4(0.0));
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1), sz1 = step(gz1, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5); gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    gx1 -= sz1 * (step(0.0, gx1) - 0.5); gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g0 = vec3(gx0.x,gy0.x,gz0.x), g1 = vec3(gx0.y,gy0.y,gz0.y),
        g2 = vec3(gx0.z,gy0.z,gz0.z), g3 = vec3(gx0.w,gy0.w,gz0.w),
        g4 = vec3(gx1.x,gy1.x,gz1.x), g5 = vec3(gx1.y,gy1.y,gz1.y),
        g6 = vec3(gx1.z,gy1.z,gz1.z), g7 = vec3(gx1.w,gy1.w,gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g0,g0), dot(g2,g2), dot(g1,g1), dot(g3,g3)));
    vec4 norm1 = taylorInvSqrt(vec4(dot(g4,g4), dot(g6,g6), dot(g5,g5), dot(g7,g7)));
    g0 *= norm0.x; g2 *= norm0.y; g1 *= norm0.z; g3 *= norm0.w;
    g4 *= norm1.x; g6 *= norm1.y; g5 *= norm1.z; g7 *= norm1.w;
    vec4 nz = mix(vec4(dot(g0, vec3(f0.x, f0.y, f0.z)), dot(g1, vec3(f1.x, f0.y, f0.z)),
        dot(g2, vec3(f0.x, f1.y, f0.z)), dot(g3, vec3(f1.x, f1.y, f0.z))),
        vec4(dot(g4, vec3(f0.x, f0.y, f1.z)), dot(g5, vec3(f1.x, f0.y, f1.z)),
            dot(g6, vec3(f0.x, f1.y, f1.z)), dot(g7, vec3(f1.x, f1.y, f1.z))), f.z);
    return 2.2 * mix(mix(nz.x,nz.z,f.y), mix(nz.y,nz.w,f.y), f.x);
}
float Perlin(vec2 P) { return Perlin(vec3(P, 0.0)); }


vec4 getFromColor (vec2 uv) {
  return texture2D(uMainSampler, uv);
}

vec4 getToColor (vec2 uv) {
  if (resizeMode == 2) {
    //  cover
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(min(fromRatio / toRatio, 1.0), min((toRatio / fromRatio), 1.0)));
  } else if (resizeMode == 1) {
    //  contain
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(max(fromRatio / toRatio, 1.0), max((toRatio / fromRatio), 1.0)));
  } else {
    //  stretch
    return texture2D(uMainSampler2, vec2(uv.x, 1.0 - uv.y));
  }
}

vec4 transition (vec2 uv) {    
  vec4 colorFront = getFromColor(uv);
  vec4 colorTo = getToColor(uv);

  float noise = (Perlin(vec3(uv.x * noiseX, uv.y * noiseY, noiseZ)) + 1.0) / 2.0
    * (1.0 - (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth))
    + (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth) * 0.5;
  vec4 colorResult = colorFront * smoothstep(progress - (fromEdgeStart + fromEdgeWidth), progress - fromEdgeStart, noise)
    + colorTo * smoothstep((1.0 - progress) - (toEdgeStart + toEdgeWidth), (1.0 - progress) - toEdgeStart, (1.0 - noise));
  return colorResult;
}

void main () {
  vec2 uv = outFragCoord;
  gl_FragColor = transition(uv);
}
`,v6=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,Ds=Phaser.Utils.Objects.GetValue,m6=Phaser.Math.Clamp;class dg extends v6{constructor(t){super({name:"rexDissolvePostFx",game:t,renderTarget:!0,fragShader:g6}),this._progress=0,this.toFrame=null,this.targetTexture=null,this.resizeMode=1,this.toRatio=1,this.noiseX=0,this.noiseY=0,this.noiseZ=0,this.fromEdgeStart=.01,this.fromEdgeWidth=.05,this.toEdgeStart=.01,this.toEdgeWidth=.05}resetFromJSON(t){return this.setProgress(Ds(t,"progress",0)),this.setTransitionTargetTexture(Ds(t,"toTexture","__DEFAULT"),Ds(t,"toFrame",void 0),Ds(t,"resizeMode",1)),this.setNoise(Ds(t,"noiseX",void 0),Ds(t,"noiseY",void 0),Ds(t,"noiseZ",void 0)),this.setFromEdge(Ds(t,"fromEdgeStart",.01),Ds(t,"fromEdgeWidth",.05)),this.setToEdge(Ds(t,"toEdgeStart",.01),Ds(t,"toEdgeWidth",.05)),this}onBoot(){}onPreRender(){this.set1f("progress",this.progress),this.set1i("resizeMode",this.resizeMode),this.set1f("noiseX",this.noiseX),this.set1f("noiseY",this.noiseY),this.set1f("noiseZ",this.noiseZ),this.set1f("fromEdgeStart",this.fromEdgeStart),this.set1f("fromEdgeWidth",this.fromEdgeWidth),this.set1f("toEdgeStart",this.toEdgeStart),this.set1f("toEdgeWidth",this.toEdgeWidth)}onDraw(t){this.set1f("fromRatio",t.width/t.height),this.set1f("toRatio",this.toRatio),this.set1i("uMainSampler2",1),this.bindTexture(this.targetTexture,1),this.bindAndDraw(t)}get progress(){return this._progress}set progress(t){this._progress=m6(t,0,1)}setProgress(t){return this.progress=t,this}setTransitionTargetTexture(t,s,l){t===void 0&&(t="__DEFAULT");var w=this.game.textures.getFrame(t,s);return w||(w=this.game.textures.getFrame("__DEFAULT")),this.toRatio=w.width/w.height,this.toFrame=w,this.targetTexture=w.glTexture,l!==void 0&&(this.resizeMode=l),this}setResizeMode(t){return typeof t=="string"&&(t=y6[t]),this.resizeMode=t,this}setNoise(t,s,l){return t===void 0&&(t=4+Math.random()*6),s===void 0&&(s=4+Math.random()*6),l===void 0&&(l=Math.random()*10),this.noiseX=t,this.noiseY=s,this.noiseZ=l,this}setFromEdge(t,s){return this.fromEdgeStart=t,this.fromEdgeWidth=s,this}setToEdge(t,s){return this.toEdgeStart=t,this.toEdgeWidth=s,this}}var y6={stretch:0,contain:1,cover:2},x6=function(e,t,s){E(e).renderer.pipelines.addPostPipeline(t,s)},b6=function(e,t,s){s===void 0&&(s={}),e.setPostPipeline(t);var l=e.postPipelines[e.postPipelines.length-1];return l.resetFromJSON(s),s.name&&(l.name=s.name),l};const w6=Phaser.Utils.Array.SpliceOne;var S6=function(e,t,s){for(var w,S,l,w=e.postPipelines,S=w.length-1;S>=0;S--){var l=w[S];l instanceof t&&(l.destroy(),w6(w,S))}e.hasPostPipeline=e.postPipelines.length>0},T6=function(e){x6(e.scene.game,"rexDissolvePostFx",dg),e.addTransitionMode(G9,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,l,w){s.effect=b6(s,dg)},onProgress:function(t,s,l,w){s.effect.setProgress(w)},onComplete:function(t,s,l,w){S6(s,dg),delete s.effect}})};const rc=.1,C6=0,P6=0,M6=1,_6=1,xb=0,bb=1;var k6=function(e){e.addTransitionMode(W9,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,l,w){l.effect=l.preFX.addReveal(rc,C6,xb)},onProgress:function(t,s,l,w){l.effect.progress=w},onComplete:function(t,s,l,w){l.preFX.remove(l.effect),delete l.effect}}).addTransitionMode(U9,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,l,w){l.effect=l.preFX.addReveal(rc,M6,xb)},onProgress:function(t,s,l,w){l.effect.progress=w},onComplete:function(t,s,l,w){l.preFX.remove(l.effect),delete l.effect}}).addTransitionMode(j9,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,l,w){l.effect=l.preFX.addReveal(rc,P6,bb)},onProgress:function(t,s,l,w){l.effect.progress=w},onComplete:function(t,s,l,w){l.preFX.remove(l.effect),delete l.effect}}).addTransitionMode(X9,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,l,w){l.effect=l.preFX.addReveal(rc,_6,bb)},onProgress:function(t,s,l,w){l.effect.progress=w},onComplete:function(t,s,l,w){l.preFX.remove(l.effect),delete l.effect}})};const wb=[H9,$9,q9,K9,Q9,e6,s6,Z9,n6,o6,l6,c6,p6,f6,T6,k6];class Sb extends sc{constructor(t,s,l,w,S,k){super(t,s,l,w,S,k);for(var D=0,V=wb.length;D<V;D++)wb[D](this)}}T.register("transitionImagePack",function(e,t,s,l,w){var S=new Sb(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.TransitionImagePack",Sb);var O6=function(){var e=this.image;if(!this.scaleUp&&e.width<=this.width&&e.height<=this.height)return this;var t=Kf(e,this,"FIT",!0);return e.setDisplaySize(t.width,t.height),this.resetChildScaleState(e),this},Tb={scaleImage:O6};Object.assign(Tb,vb);var E6=function(){var e=this.background;return e?(e.setOrigin(this.originX,this.originY),e.setPosition(this.x,this.y),Si(e,this.displayWidth,this.displayHeight),this.resetChildScaleState(e),this):this};const Cb=Phaser.Utils.Objects.IsPlainObject,Dr=Phaser.Utils.Objects.GetValue;class nc extends Ji{constructor(t,s,l,w,S,k){Cb(s)?(k=s,s=Dr(k,"x",0),l=Dr(k,"y",0),w=Dr(k,"key",void 0),S=Dr(k,"frame",void 0)):Cb(S)&&(k=S,S=void 0);var D=Dr(k,"image");D?D.setPosition(s,l).setOrigin(.5):(D=t.add.image(s,l,w,S),w===void 0&&D.setVisible(!1)),super(t,s,l,1,1),this.type="rexImageBox";var V=Dr(k,"background");V&&this.add(V),this.background=V,this.add(D),this.image=D,this.scaleUp=Dr(k,"scaleUp",!1);var G=Dr(k,"width",D.width),j=Dr(k,"height",D.height);this.resize(G,j)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.image.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.image.setFlipY(t))}resize(t,s){return super.resize(t,s),E6.call(this),this.scaleImage(),this}setTexture(t,s){var l=this.image;return l.setTexture(t,s),t!==null?(this.setChildVisible(l,!0),this.scaleImage()):this.setChildVisible(l,!1),this}}Object.assign(nc.prototype,Tb),T.register("imageBox",function(e,t,s,l,w){var S=new nc(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.ImageBox",nc),T.register("fullWindowRectangle",function(e,t){var s=new Df(this.scene,e,t);return this.scene.add.existing(s),s}),K(window,"RexPlugins.UI.FullWindowRectangle",Df),T.register("fullWindowZone",function(){var e=new Rp(this.scene);return this.scene.add.existing(e),e}),K(window,"RexPlugins.UI.FullWindowZone",Rp),T.register("cover",function(e){var t=new Lf(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Cover",Lf);var pg=function(e,t){if(this.scene.sys.scale.autoRound&&(e=Math.floor(e),t=Math.floor(t)),this.width===e&&this.height===t)return this;var s=this.node.style;return s.width=`${e}px`,s.height=`${t}px`,this.updateSize(),this};const Pb={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"],autoCapitalize:["autocapitalize","off"]},Mb={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],borderRadius:["border-radius",void 0],outline:["outline","none"],direction:["direction",void 0]},A6={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"},_b=Phaser.Utils.Objects.GetValue;var kb=function(e,t,s,l){var w=_b(l,"preventDefault",!1),S=_b(l,"preTest");for(let k in s)t.addEventListener(k,function(D){(!S||S(e,k))&&e.emit(s[k],e,D),w&&D.preventDefault()})};const R6=Phaser.GameObjects.DOMElement,Ob=Phaser.Utils.Objects.IsPlainObject,sr=Phaser.Utils.Objects.GetValue;class ac extends R6{constructor(t,s,l,w,S,k){Ob(s)?(k=s,s=sr(k,"x",0),l=sr(k,"y",0),w=sr(k,"width",0),S=sr(k,"height",0)):Ob(w)&&(k=w,w=sr(k,"width",0),S=sr(k,"height",0)),k===void 0&&(k={});var D,V=sr(k,"inputType",void 0);V===void 0&&(V=sr(k,"type","text")),V==="textarea"?(D=document.createElement("textarea"),D.style.resize="none"):(D=document.createElement("input"),D.type=V),ou(Pb,k,D);var G=sr(k,"style",void 0);G=ou(Mb,k,G);var j=D.style;for(var tt in k)if(!(tt in Pb||tt in Mb)){if(tt in j)G[tt]=k[tt];else if(tt in D){if(tt==="type")continue;D[tt]=k[tt]}}G["box-sizing"]="border-box",super(t,s,l,D,G),this.type="rexInputText",this.resize(w,S),kb(this,D,A6),Jy(D),sr(k,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get inputType(){return this.node.tagName.toLowerCase()==="textarea"?"textarea":this.node.type}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,s){return t===void 0?this.node.select():this.node.setSelectionRange(t,s),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,s){return this.node.style[t]=s,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var D6={resize:pg};Object.assign(ac.prototype,D6),T.register("inputText",function(e){var t=new ac(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.InputText",ac);const Eb=Phaser.Utils.Objects.GetValue;var I6=function(e,t){var s=document.createElement("input");s.type="file";var l=Eb(t,"accept",""),w=Eb(t,"multiple",!1);return s.setAttribute("accept",l),w?s.setAttribute("multiple",""):s.removeAttribute("multiple"),s},Ab=function(e,t){return e===void 0&&(e=0),new Promise(function(s,l){setTimeout(function(){s(t)},e)})},Rb=function({game:e,fileInput:t,closeDelay:s}){return nu(E(e).events,"focus").then(function(){return Ab(s)}).then(function(){var l={files:t.files};return Promise.resolve(l)})};const L6=Phaser.Utils.Objects.GetValue,F6=Phaser.DOM.RemoveFromDOM;var Db=function(e,t){var s=L6(t,"closeDelay",200),l=I6(e,t);return l.click(),Rb({game:e,fileInput:l,closeDelay:s}).then(function(w){return F6(l),l.remove(),Promise.resolve(w)})},Ib=function(e){return this.setOrigin(e.originX,e.originY),this.setPosition(e.x,e.y),this.resize(e.displayWidth,e.displayHeight),this},B6=function(e,t,s){if(s===void 0)switch(t){case"image":case"svg":s="textures";break;case"animation":s="json";break;case"tilemapTiledJSON":case"tilemapCSV":s="tilemap";break;case"glsl":s="shader";break;default:s=t;break}e=E(e);var l;return s==="textures"?l=e.textures:l=e.cache[s],l},Lb=function(e,t,s,l,w,S){if(!(w===null||w===!1))if(Os(w))w();else{var k=B6(e,s,w);k.exists(l)&&k.remove(l)}var D=e.load;if(S&&D.once(`filecomplete-${s}-${l}`,function(G,j,tt){S(tt)}),Os(t))t();else{var V=window.URL.createObjectURL(t);D[s](l,V)}D.start()},N6=function(e,t,s,l,w){var S=this.scene;return Lb(S,e,t,s,l,w),this},Y6=function(e,t,s,l){var w=this.scene;return new Promise(function(S,k){var D=function(V){S(V)};Lb(w,e,t,s,l,D)})},Fb={loadFile:N6,loadFilePromise:Y6};const V6=Phaser.GameObjects.DOMElement,Bb=Phaser.Utils.Objects.IsPlainObject,rr=Phaser.Utils.Objects.GetValue;class Ih extends V6{constructor(t,s,l,w,S,k){Bb(s)?(k=s,s=rr(k,"x",0),l=rr(k,"y",0),w=rr(k,"width",0),S=rr(k,"height",0)):Bb(w)&&(k=w,w=rr(k,"width",0),S=rr(k,"height",0));var D=document.createElement("input");D.type="file";var V=D.style;V.display="none";var G=document.createElement("label");G.appendChild(D);var j=rr(k,"style",void 0);super(t,s,l,G,j),this.type="rexFileChooser",this.resetFromJSON(k),this.resize(w,S);var tt=this;D.onchange=function(){tt.emit("change",tt)},this.setCloseDelay(rr(k,"closeDelay",200)),D.onclick=function(){Rb({game:t,fileInput:D,closeDelay:tt.closeDelay}).then(function(){tt.emit("select",tt)})}}resetFromJSON(t){return this.setAccept(rr(t,"accept","")),this.setMultiple(rr(t,"multiple",!1)),this}setAccept(t){return t===void 0&&(t=""),this.fileInput.setAttribute("accept",t),this}setMultiple(t){return t===void 0&&(t=!0),t?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(t){return t===void 0&&(t=200),this.closeDelay=t,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}setOpenEnable(t){return t===void 0&&(t=!0),this.fileInput.disabled=!t,this}}var z6={resize:pg,syncTo:Ib};Object.assign(Ih.prototype,z6,Fb),T.register("fileChooser",function(e){var t=new Ih(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.FileChooser",Ih);var G6={setDropEnable(e){return e===void 0&&(e=!0),this.dropEnable=e,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}},U6={addFilter(e,t){return this.filters||(this.filters={}),this.filters[e]=t,this},addFilters(e){this.filters||(this.filters={});for(var t in e)this.filters[t]=e[t];return this}},Nb={resize:pg,syncTo:Ib};Object.assign(Nb,G6,U6,Fb);const W6={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"},X6=Phaser.GameObjects.DOMElement,Yb=Phaser.Utils.Objects.IsPlainObject,Ir=Phaser.Utils.Objects.GetValue;class fg extends X6{constructor(t,s,l,w,S,k){Yb(s)?(k=s,s=Ir(k,"x",0),l=Ir(k,"y",0),w=Ir(k,"width",0),S=Ir(k,"height",0)):Yb(w)&&(k=w,w=Ir(k,"width",0),S=Ir(k,"height",0)),k===void 0&&(k={});var D=document.createElement("div"),V=Ir(k,"style",void 0);super(t,s,l,D,V),this.type="rexFileDropZone",this.resize(w,S),this._files=[],this.setDropEnable(Ir(k,"dropEnable",!0));var G=Ir(k,"filters");G&&this.addFilters(G),kb(this,D,W6,{preventDefault:!0,preTest(j){return j.dropEnable}}),this.on("drop",function(j,tt){this._files=tt.dataTransfer.files;var st=this._files;if(st&&this.filters)for(var rt in this.filters){for(var ot=this.filters[rt],ut=[],ct=0,pt=st.length;ct<pt;ct++){var mt=st[ct];ot(mt,st)&&ut.push(mt)}ut.length>0&&this.emit(`drop.${rt}`,ut)}},this)}get files(){return this._files}}Object.assign(fg.prototype,Nb),T.register("fileDropZone",function(e){var t=new fg(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.FileDropZone",fg);var j6=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,s=this.sizerChildren,l,w,S,k,D,V=!1;if(this.childrenProportion,this.orientation===0)for(var G=!0,j=0,tt=s.length;j<tt;j++)l=s[j],l.hasOwnProperty("rexSizer")&&(w=l.rexSizer,!w.hidden&&(S=w.proportion,S===0||e?(D=this.getChildWidth(l),w.fitRatio>0&&!w.resolved&&(D=void 0),D===void 0&&(S!==0&&!this.hasProportion0Child?D=0:V=!0)):D=0,!V&&(k=l.rexSizer.padding,D+=(k.left+k.right)*this.scaleX,G?G=!1:D+=this.space.item*this.scaleX,t+=D)));else for(var j=0,tt=s.length;j<tt;j++)l=s[j],l.hasOwnProperty("rexSizer")&&(w=l.rexSizer,!w.hidden&&(D=this.getChildWidth(l),D===void 0&&(V=!0),!V&&(k=w.padding,D+=(k.left+k.right)*this.scaleX,t=Math.max(D,t))));if(!V)return t+(this.space.left+this.space.right)*this.scaleX},H6=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,s=this.sizerChildren,l,w,S,k,D,V=!1;if(this.childrenProportion,this.orientation===0)for(var G=0,j=s.length;G<j;G++)l=s[G],l.hasOwnProperty("rexSizer")&&(w=l.rexSizer,!w.hidden&&(D=this.getChildHeight(l),D===void 0&&(V=!0),!V&&(k=w.padding,D+=(k.top+k.bottom)*this.scaleY,t=Math.max(D,t))));else for(var tt=!0,G=0,j=s.length;G<j;G++)l=s[G],l.hasOwnProperty("rexSizer")&&(w=l.rexSizer,!w.hidden&&(S=w.proportion,S===0||e?(D=this.getChildHeight(l),w.fitRatio>0&&!w.resolved&&(D=void 0),D===void 0&&(S!==0&&!this.hasProportion0Child?D=0:V=!0)):D=0,!V&&(k=w.padding,D+=(k.top+k.bottom)*this.scaleY,tt?tt=!1:D+=this.space.item*this.scaleY,t+=D)));if(!V)return t+(this.space.top+this.space.bottom)*this.scaleY},$6=function(e,t){t===void 0&&(t=this.width*this.scaleX);var s,l=e.rexSizer;if(this.orientation===0)l.proportion>0&&this.proportionLength>0&&(s=l.proportion*this.proportionLength);else if(l.expand){var w=this.space,S=t-(w.left+w.right)*this.scaleX,k=l.padding;s=S-(k.left+k.right)*this.scaleX}return s},q6=function(e,t){t===void 0&&(t=this.height);var s,l=e.rexSizer;if(this.orientation===0){if(l.expand){var w=this.space,S=t-(w.top+w.bottom)*this.scaleY,k=l.padding;s=S-(k.top+k.bottom)*this.scaleY}}else l.proportion>0&&this.proportionLength>0&&(s=l.proportion*this.proportionLength);return s},K6=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,s,l=0,w=t.length;l<w;l++)s=t[l],s.isRexSizer&&e.push(s);return e},Q6=function(){this.hasRatioFitChild=!1;for(var e,t,s=this.sizerChildren,l=0,w=s.length;l<w;l++)e=s[l],t=e.rexSizer,!t.hidden&&t.fitRatio>0&&(Si(e,0,0),t.resolved=!1,this.hasRatioFitChild=!0);return this._childrenProportion=void 0,this.hasProportion0Child=!1,this.proportionLength=void 0,Sh.call(this),this};const J6=Phaser.Math.Wrap;var Z6=function(){for(var e=this.sizerChildren,t,s,l,w=this.innerLeft,S=this.innerTop,k=this.innerWidth,D=this.innerHeight,V=w,G=S,j,tt,st,rt,ot,ut,ct,pt,mt,yt=this.startChildIndex,St=0,Ct=e.length;St<Ct;St++)yt===0?mt=St:mt=J6(St+yt,0,Ct),this.rtl&&(mt=Ct-mt-1),t=e[mt],!t.rexSizer.hidden&&(s=t.rexSizer,l=s.padding,Ph.call(this,t),t.isRexSpace?(ct=0,pt=0):(ct=this.getExpandedChildWidth(t),pt=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,ct,pt),Qf(t,this)):Si(t,ct,pt),ct===void 0&&(ct=le(t)),pt===void 0&&(pt=ue(t)),this.orientation===0?(j=V+l.left*this.scaleX,s.proportion===0||this.proportionLength===0?st=ct:st=s.proportion*this.proportionLength,tt=G+l.top*this.scaleY,rt=D-(l.top+l.bottom)*this.scaleY):(j=V+l.left*this.scaleX,st=k-(l.left+l.right)*this.scaleX,tt=G+l.top*this.scaleY,s.proportion===0||this.proportionLength===0?rt=pt:rt=s.proportion*this.proportionLength),ct===void 0&&(ct=le(t)),pt===void 0&&(pt=ue(t)),ot=(s.alignOffsetX+s.alignOffsetOriginX*ct)*this.scaleX,ut=(s.alignOffsetY+s.alignOffsetOriginY*pt)*this.scaleY,Mh.call(this,t,j,tt,st,rt,s.align,ot,ut),this.orientation===0?V+=st+(l.left+l.right)*this.scaleX+this.space.item*this.scaleX:G+=rt+(l.top+l.bottom)*this.scaleY+this.space.item*this.scaleY)},t8=function(t){var t=bf.call(this,t);if(t!==void 0&&this.orientation===0&&this.proportionLength===void 0){var s=t-this.childrenWidth;s>0?(s=t-this.getChildrenWidth(!1),this.proportionLength=s/this.childrenProportion):this.proportionLength=0}return t},e8=function(t){var t=Tf.call(this,t);if(t!==void 0&&this.orientation===1&&this.proportionLength===void 0){var s=t-this.childrenHeight;s>0?(s=t-this.getChildrenHeight(!1),this.proportionLength=s/this.childrenProportion):this.proportionLength=0}return t},i8=function(){return this.hasRatioFitChild&&this.orientation===1?!0:wf.call(this)},Vb=function(e,t){if(this.hasRatioFitChild){var s;this.orientation===0?s=t-(this.getInnerPadding("top")+this.getInnerPadding("bottom"))*this.scaleY:e-(this.getInnerPadding("left")+this.getInnerPadding("right"))*this.scaleX;for(var l,w,S,k,D=this.sizerChildren,V=0,G=D.length;V<G;V++){var l=D[V],w=l.rexSizer;if(!w.hidden){var j=w.fitRatio;j&&(this.orientation===0?(k=s-(this.getChildOuterPadding(l,"top")+this.getChildOuterPadding(l,"bottom"))*this.scaleY,S=k*j):(S=s-(this.getChildOuterPadding(l,"top")+this.getChildOuterPadding(l,"bottom"))*this.scaleX,k=S/j),Si(l,S,k),l.isRexSizer&&l.setMinSize(S,k),w.resolved=!0)}}}},s8=function(e){this.wrapResult||(this.orientation===1&&Vb.call(this,e,void 0),Sf.call(this,e))},r8=function(){return this.hasRatioFitChild&&this.orientation===0?!0:Cf.call(this)},n8=function(e){this.wrapResult||(this.orientation===0&&Vb.call(this,void 0,e),Pf.call(this,e))};const a8=Phaser.GameObjects.Zone;class gg extends a8{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var o8=function(e,t){var s=this.sizerChildren;if(s.length===0)return-1;for(var l=-1,w=1/0,S=0,k=s.length;S<k;S++){var D=s[S],V;this.orientation===0?V=Math.abs(D.left-e):V=Math.abs(D.top-t),w>V&&(w=V,l=S)}var D=s[s.length-1],V;return this.orientation===0?V=Math.abs(D.right-e):V=Math.abs(D.bottom-t),w>V&&(w=V,l=S+1),l};const zb=Phaser.Utils.Objects.IsPlainObject,ts=Phaser.Utils.Objects.GetValue,Gb=Phaser.Display.Align.CENTER,h8={min:0,full:-1};var vg=function(e,t,s,l,w,S,k,D,V,G){var j,tt,st,rt;bh.call(this,e);var ot=e.isRexSpace,ut=typeof t;if(t===null)return this;if(ut!=="number"){if(ut==="string")t=h8[t];else if(zb(t)){var ct=t;t=ts(ct,"proportion",void 0),s=ts(ct,"align",Gb),l=ts(ct,"padding",0),w=ts(ct,"expand",!1),S=ts(ct,"key",void 0),k=ts(ct,"index",void 0),e.isRexSizer||(D=ts(ct,"minWidth",void 0),V=ts(ct,"minHeight",void 0)),G=ts(ct,"fitRatio",0),j=ts(ct,"offsetX",0),tt=ts(ct,"offsetY",0),st=ts(ct,"offsetOriginX",0),rt=ts(ct,"offsetOriginY",0)}}typeof s=="string"&&(s=Xa[s]),t===void 0&&(t=ot?1:0),s===void 0&&(s=Gb),l===void 0&&(l=0),w===void 0&&(w=!1),D===void 0&&(ot?D=0:e.isRexSizer||(D=e._minWidth)),V===void 0&&(ot?V=0:e.isRexSizer||(V=e._minHeight)),G===void 0||G===!1?G=0:G===!0&&(G=le(e)/ue(e)),j===void 0&&(j=0),tt===void 0&&(tt=0),st===void 0&&(st=0),rt===void 0&&(rt=0);var ct=this.getSizerConfig(e);return ct.proportion=t,ct.align=s,ct.padding=qn(l),ct.expand=w,ct.fitRatio=t===0?G:0,ct.alignOffsetX=j,ct.alignOffsetY=tt,ct.alignOffsetOriginX=st,ct.alignOffsetOriginY=rt,k===void 0||k>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(k,0,e),e.isRexSizer||(t>0&&(this.orientation===0?e.minWidth=D===void 0?le(e):D:e.minHeight=V===void 0?ue(e):V),w&&(this.orientation===0?e.minHeight=V:e.minWidth=D)),S!==void 0&&this.addChildrenMap(S,e),this},l8={add:vg,addSpace(e){return this.insertSpace(void 0,e),this},insertSpace(e,t){return t===void 0&&(t=1),vg.call(this,new gg(this.scene),{proportion:t,minWidth:0,minHeight:0,index:e}),this},insert(e,t,s,l,w,S,k,D){return zb(s)&&(s.index=e),vg.call(this,t,s,l,w,S,k,e,D),this},insertAtPosition(e,t,s,l,w,S,k,D,V){var G=o8.call(this,e,t);return G===-1&&(G=void 0),this.insert(G,s,l,w,S,k,D,V),this}};const u8=Phaser.Utils.Array.Remove;var c8={remove(e,t){return this.getParentSizer(e)!==this?this:(u8(this.sizerChildren,e),wh.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,Ku.call(this,e),this}},d8={getChildAlign(e){return this.getSizerConfig(e).align},setChildAlign(e,t){return typeof t=="string"&&(t=Xa[t]),this.getSizerConfig(e).align=t,this}},p8={getChildProportion(e){return this.getSizerConfig(e).proportion},setChildProportion(e,t){return this.getSizerConfig(e).proportion=t,this}},f8={getChildExpand(e){return this.getSizerConfig(e).expand},setChildExpand(e,t){return this.getSizerConfig(e).expand=t,this}},g8=function(e){e===void 0&&(e="left");var t=this.sizerChildren,s=t[0],l=s&&s.isRexSpace;e==="right"||e==="bottom"||e==="center"?l||this.insertSpace(0):l&&this.remove(s,!0);var w=t.length-1,S=t[w],k=S&&S.isRexSpace;return e==="center"?k||this.insertSpace(w+1):k&&this.remove(S,!0),this},mg={sortChildren(e){return this.sizerChildren.sort(e),this},sortChildrenByData(e,t){return this.sizerChildren.sort(function(s,l){var w=s.getData(e),S=l.getData(e);return t?S-w:w-S}),this},sortChildrenByProperty(e,t){return this.sizerChildren.sort(function(s,l){var w=s[e],S=l[e];return t?S-w:w-S}),this}},Ub={getChildrenWidth:j6,getChildrenHeight:H6,getExpandedChildWidth:$6,getExpandedChildHeight:q6,getChildrenSizers:K6,preLayout:Q6,layoutChildren:Z6,resolveWidth:t8,resolveHeight:e8,hasWidthWrap:i8,runWidthWrap:s8,hasHeightWrap:r8,runHeightWrap:n8,setChildrenAlignMode:g8};Object.assign(Ub,l8,c8,d8,p8,f8,mg);var v8=function(){for(var e=0,t=this.sizerChildren,s,l,w=0,S=t.length;w<S;w++)s=t[w],!s.rexSizer.hidden&&(l=s.rexSizer.proportion,l>0?e+=l:l===0&&(this.hasProportion0Child=!0));return e};const yg=Phaser.Utils.Objects.IsPlainObject,gs=Phaser.Utils.Objects.GetValue;class Zt extends Zn{constructor(t,s,l,w,S,k,D){yg(s)?(D=s,s=gs(D,"x",0),l=gs(D,"y",0),w=gs(D,"width",void 0),S=gs(D,"height",void 0),k=gs(D,"orientation",0)):yg(w)?(D=w,w=gs(D,"width",void 0),S=gs(D,"height",void 0),k=gs(D,"orientation",0)):yg(k)&&(D=k,k=gs(D,"orientation",0)),k===void 0&&(k=0),super(t,s,l,w,S,D),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(k),this.setItemSpacing(gs(D,"space.item",0)),this.setStartChildIndex(gs(D,"startChildIndex",0)),this.setRTL(gs(D,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Wn(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=v8.call(this)),this._childrenProportion}}Object.assign(Zt.prototype,Ub);var oc=function(e,t,s){if(e){var l=t==null,w=s==null;return l&&w||(l||(e.displayWidth=t),w||(e.displayHeight=s),l&&(e.scaleX=e.scaleY),w&&(e.scaleY=e.scaleX)),e}},m8=function(e){e===void 0?e={}:typeof e=="string"&&(e={text:e});var t=e.text||"";this.setText(t);var s=this.childrenMap.icon;if(s){e.icon?this.show(s):this.hide(s);var l=e.iconSize;l&&(this.setChildDisplaySize(s,l,l),this.iconWidth!==void 0&&this.setIconSize(l)),e.icon!==!0&&this.setIconTexture(e.icon,e.iconFrame)}var w=this.childrenMap.action;if(w){e.action?this.show(w):this.hide(w);var S=e.actionSize;S&&(this.setChildDisplaySize(w,S,S),this.actionWidth!==void 0&&this.setActionSize(S)),e.action!==!0&&this.setActionTexture(e.action,e.actionFrame)}return this},y8={appendText:p0,resetDisplayContent:m8};class xg extends Zt{get text(){var t=this.childrenMap.text;return t?t.text:""}set text(t){var s=this.childrenMap.text;s&&s.setText(t)}setText(t){return this.text=t,this}setIconTexture(t,s){var l=this.childrenMap.icon;return!l||!l.setTexture?this:(l.setTexture(t,s),this.iconWidth!==void 0&&this.iconHeight!==void 0&&(oc(l,this.iconWidth,this.iconHeight),this.resetChildScaleState(l)),this)}setTexture(t,s){return this.setIconTexture(t,s),this}setIconSize(t,s){return s===void 0&&(s=t),this.iconWidth=t,this.iconHeight=s,this}get texture(){var t=this.childrenMap.icon;if(t)return t.texture}get frame(){var t=this.childrenMap.icon;if(t)return t.frame}setActionTexture(t,s){var l=this.childrenMap.action;return!l||!l.setTexture?this:(l.setTexture(t,s),this.actionWidth!==void 0&&this.actionHeight!==void 0&&(oc(l,this.actionWidth,this.actionHeight),this.resetChildScaleState(l)),this)}get actionTexture(){var t=this.childrenMap.action;if(t)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t)return t.frame}setActionSize(t,s){return s===void 0&&(s=t),this.actionWidth=t,this.actionHeight=s,this}preLayout(){var t=this.childrenMap.icon;t&&this.iconWidth!==void 0&&this.iconHeight!==void 0&&oc(t,this.iconWidth,this.iconHeight);var s=this.childrenMap.action;s&&this.actionWidth!==void 0&&this.actionHeight!==void 0&&oc(s,this.actionWidth,this.actionHeight),super.preLayout()}postLayout(t,s,l){var w=this.childrenMap.iconMask;w&&(w.setPosition(),this.resetChildPositionState(w));var S=this.childrenMap.actionMask;return S&&(S.setPosition(),this.resetChildPositionState(S)),super.postLayout(t,s,l),this}resize(t,s){super.resize(t,s);var l=this.childrenMap.iconMask;l&&l.resize();var w=this.childrenMap.actionMask;return w&&w.resize(),this}}Object.assign(xg.prototype,y8);var Is=function(e,t,s,l){var w=new ic(t,s,l);if(e&&!e.isRexSizer){var S=w.createGeometryMask();e.setMask(S),this.once("destroy",function(){e.setMask(),S.destroy()})}return this.pin(w),w};const x8=Phaser.GameObjects.Text;var bg=function(e){return e instanceof x8};const b8=Phaser.GameObjects.BitmapText;var Wb=function(e){return e instanceof b8};const Ti=0,Ci=1,es=2;var dn=function(e){var t;return Wb(e)?t=es:bg(e)?t=Ti:t=Ci,t},w8=function(e,t){for(var s=[],l=e.split(`
`),w=t.style,S=w.wordWrapWidth,k=w.hasOwnProperty("wrapMode")?w.wrapMode:3,D=t.context,V=0,G=l.length;V<G;V++)T8(D,l[V],S,k,s);return s},S8=function(e,t){var s;if(t===2)s=e.split("");else{s=[];for(var l=e.split(" "),w,S=0,k=l.length;S<k;S++)w=l[S],S<k-1?zo(w)?s.push(w+" "):(s.push(...w.split("")),s.push(" ")):w!==""&&(zo(w)?s.push(w):s.push(...w.split("")))}return s},T8=function(e,t,s,l,w){if(t.length<=100){var S=e.measureText(t).width;if(S<=s)return w.push(t),w}for(var k=S8(t,l),D,V,G=[],j=s,tt=0,st=k.length;tt<st;tt++)D=k[tt],V=e.measureText(D).width,j-=V,j<0&&(w.push(G.join("")),G.length=0,j=s-V),G.push(D);return G.length>0&&w.push(G.join("")),w},wg=function(e,t){var s=dn(e);switch(s){case Ti:switch(typeof t=="string"&&(t=Yl[t]||0),e.style.wrapMode=t,t){case 2:case 3:e.style.wordWrapCallback=w8;break;case 1:default:e.style.wordWrapCallback=null;break}break;case Ci:typeof t=="string"&&(t=Yl[t]||0),e.style.wrapMode=t;break}},C8=function(e){var t=function(s){var l=e.padding,w=s-(l.left+l.right)*e.scaleX,S=e.style;return bg(e)?(S.wordWrapWidth=w,S.maxLines=0):(S.wrapMode===0&&(S.wrapMode=1),S.wrapWidth=w,S.maxLines=0),S.fixedWidth=s,S.fixedHeight=0,e.updateText(),e.minHeight=e.height,e};return t},P8=function(e){var t=function(s){return e.setFixedSize(s,0).runWordWrap(),e.minHeight=e.height,e};return t},M8=function(e){var t=function(s){return e.setMaxWidth(s),e.minHeight=e.height,e};return t},_8=function(e){return e instanceof ka},hc=function(e,t){return t===void 0&&(t=0),e._minWidth=t,e.runWidthWrap=_8(e)?P8(e):Wb(e)?M8(e):C8(e),e};const Sg=65535;var lc=function(e,t,s){if(t==null)return e;if(t===0)return Tg(e,0,s),e;var l=e.text.length;if(l===0)return Tg(e,t,s),e;var w=Math.floor(t*1.5/l);s!==void 0&&w>s&&(w=Math.floor(s));for(var S={},k=jb(e,w,t,s,S),D=0;D<=Sg&&k!==0;D++){if(w+=k,w<0){w=0;break}k=jb(e,w,t,s,S)}return D===Sg&&console.warn(`FontSizeFit: Test count exceeds ${Sg}`),e.setFontSize(w),Tg(e,t,s),e},Xb=function(e,t,s){return s[t]===void 0&&(e.setFontSize(t),s[t]={width:e.width,height:e.height}),s[t]},jb=function(e,t,s,l,w){var S=Xb(e,t,w),k=Xb(e,t+1,w),D;if(l!==void 0)if(S.height<=l&&k.height>l)D=0;else{if(S.height>l)return-1;D=Math.floor(l-S.height)}var V;if(S.width<=s&&k.width>s)return 0;if(S.width>s)return-1;var V=Math.floor(s-S.width);return D===void 0?V:Math.min(V,D)},Tg=function(e,t,s){var l=e.style;l&&(l.fixedWidth=t,l.parent.width=t,s!==void 0&&(l.fixedHeight=s,l.parent.height=s),l.update(!1))};const Cg=Phaser.Utils.Objects.GetValue;var uc=function(e,t){typeof t=="number"&&(t={minWidth:t});var s=Cg(t,"minWidth",0),l=Cg(t,"minHeight",0),w=Cg(t,"fitHeight",!1);return e._minWidth=s,e._minHeight=l,w?(e.runWidthWrap=function(S){return e.setFixedSize&&e.setFixedSize(0,0),e.setFontSize(1),e},e.resize=function(S,k){return lc(e,S,k),e}):(e.runWidthWrap=function(S){return e.setFixedSize&&e.setFixedSize(0,0),lc(e,S,void 0),e},e.resize=function(S,k){return e.width===S&&e.height===k||e.setFixedSize(S,k),e}),e};const ae=Phaser.Utils.Objects.GetValue;class Lr extends xg{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexLabel";var l=ae(s,"background",void 0),w=ae(s,"icon",void 0),S=ae(s,"iconMask",void 0),k=ae(s,"text",void 0),D=ae(s,"action",void 0),V=ae(s,"actionMask",void 0),G=ae(s,"align",void 0);if(l&&this.addBackground(l),w){var j;this.orientation===0?(k||D)&&(j={right:ae(s,"space.icon",0),top:ae(s,"space.iconTop",0),bottom:ae(s,"space.iconBottom",0),left:ae(s,"space.iconLeft",0)}):(k||D)&&(j={bottom:ae(s,"space.icon",0),left:ae(s,"space.iconLeft",0),right:ae(s,"space.iconRight",0),top:ae(s,"space.iconTop",0)});var tt=ae(s,"squareFitIcon",!1)?1:0;if(this.add(w,{proportion:0,padding:j,fitRatio:tt}),S&&(S=Is.call(this,w,w,1)),!tt){var st=ae(s,"iconSize",void 0);this.setIconSize(ae(s,"iconWidth",st),ae(s,"iconHeight",st))}}if(k){var rt=ae(s,"wrapText",!1),ot=ae(s,"adjustTextFontSize",!1);rt?(rt===!0&&(rt="word"),wg(k,rt),s.expandTextWidth=!0,hc(k)):ot&&(s.expandTextWidth=!0,s.expandTextHeight=!0,uc(k,{fitHeight:!0}));var ut=ae(s,"space.text",0),ct=ae(s,"expandTextWidth",!1),pt=ae(s,"expandTextHeight",!1),mt,j,yt;this.orientation===0?(mt=ct?1:0,D&&(j={right:ut}),yt=pt):(mt=pt?1:0,D&&(j={bottom:ut}),yt=ct),this.add(k,{proportion:mt,expand:yt,padding:j})}if(D){var j;this.orientation===0?j={top:ae(s,"space.actionTop",0),bottom:ae(s,"space.actionBottom",0),right:ae(s,"space.actionRight",0)}:j={left:ae(s,"space.actionLeft",0),right:ae(s,"space.actionRight",0),bottom:ae(s,"space.actionBottom",0)};var tt=ae(s,"squareFitAction",!1)?1:0;if(this.add(D,{proportion:0,padding:j,fitRatio:tt}),V&&(V=Is.call(this,D,D,1)),!tt){var St=ae(s,"actionSize");this.setActionSize(ae(s,"actionWidth",St),ae(s,"actionHeight",St))}}this.setChildrenAlignMode(G),this.addChildrenMap("background",l),this.addChildrenMap("icon",w),this.addChildrenMap("iconMask",S),this.addChildrenMap("text",k),this.addChildrenMap("action",D),this.addChildrenMap("actionMask",V)}}const pn=Phaser.Utils.Objects.GetValue;var k8=function(e,t){var s=pn(t,"canvas"),l=pn(s,"width",128),w=pn(s,"height",128),S=new Un(e,0,0,l,w);e.add.existing(S);var k=pn(s,"key"),D=pn(s,"frame"),V=pn(s,"fill");return V!==void 0?S.fill(V):k!==void 0&&S.loadTexture(k,D),S.setTexture=S.loadTexture.bind(S),S},O8=function(e,t){var s=new nc(e,{scaleUp:pn(t,"scaleUpIcon",!1),background:pn(t,"iconBackground"),image:k8(e,t)});return e.add.existing(s),s};const E8=Phaser.Utils.Objects.GetValue;var Hb=function(e,t){var s=E8(t,"clickTarget",this);return typeof s=="string"&&(s=e.getElement(s)),s};const A8=Phaser.Utils.Objects.GetValue;var R8=function(e,t){var s=Hb(e,t);if(s){var l=A8(t,"click"),w=new Mr(s,l);return w.on("click",e.open,e),w}};const $b={accept:"image/*",multiple:!1};var qb=function(e,t){if(t.length!==0){var s=e.childrenMap.icon,l=s.image,w=t[0];return l.loadFromFilePromise(w).then(function(){return s.scaleImage(),e.emit("select",w,e),Promise.resolve(w)})}},D8=function(e,t){var s=e.scene,l=new Ih(s,$b);return s.add.existing(l),e.pin(l),l.on("change",function(){qb(e,l.files)}),l},I8={async openPromise(){var e=this;return Db(this.scene.game,$b).then(function(t){return qb(e,t.files)})},open(){return this.openPromise(),this},setClickOpenEnable(e){return e===void 0&&(e=!0),this.clickBehavior&&this.clickBehavior.setEnable(e),this.fileChooser&&this.fileChooser.setOpenEnable(e),this}},L8=function(e){if(!e)return null;var t=e.name;return t.substr(0,t.lastIndexOf("."))},F8=function(e){var t=this.childrenMap.canvas;return t.generateTexture(e),this},Kb={getFileName:L8,saveTexture:F8};Object.assign(Kb,I8);const B8=Phaser.Utils.Objects.GetValue;class Pg extends Lr{constructor(t,s){var l=O8(t,s);s.icon=l,super(t,s),this.type="rexImageFileInputLabel";var w=this.iconWidth,S=this.iconWidth;w!==void 0&&S!==void 0&&l.resize(w,S),this.clickTarget=Hb(this,s),this.clickTarget&&(B8(s,"domButton",!0)?this.fileChooser=D8(this):this.clickBehavior=R8(this,s)),this.addChildrenMap("canvas",l.image),this.addChildrenMap("iconBackground",l.background),this.addChildrenMap("fileChooser",this.fileChooser)}postLayout(t,s,l){this.fileChooser&&(this.fileChooser.syncTo(this.clickTarget),this.resetChildState(this.fileChooser)),super.postLayout(t,s,l)}}Object.assign(Pg.prototype,Kb),T.register("imageInputLabel",function(e){var t=new Pg(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.ImageInputLabel",Pg);let N8=class extends Oe{constructor(e,t){return super(e),new Proxy(this,this)}get(e,t){if(he(e,t))return e[t];var s=e.parent;if(he(s,t))return s[t]}set(e,t,s){return he(e,t)?e[t]=s:he(e.parent,t)&&(e.parent[t]=s),!0}get key(){return this.parent.texture.key}set key(e){this.parent.setTexture(e,this.frame)}get frame(){return this.parent.frame.name}set frame(e){this.parent.setFrame(e)}get scale(){return this.parent.scaleX}set scale(e){this.parent.setScale(e)}};const Mg=Phaser.Utils.Objects.GetValue;class Y8 extends Oe{constructor(t,s){super(t,s),this.style=Mg(s,"style",this);var l=Mg(s,"propertiesMap");this.activeStyle=_g(s,"active",l),this.hoverStyle=_g(s,"hover",l),this.disableStyle=_g(s,"disable",l),this.onModifyStyle=Mg(s,"onModifyStyle")}getStyle(t){return lu(this.style,t)}modifyStyle(t){for(var s in t)this.style[s]=t[s];return this.onModifyStyle&&this.onModifyStyle(this.parent,t),this}applyStyle(t){if(t){var s=this.getStyle(t);if(!nh(s,t))return this.modifyStyle(t),s}}setActiveState(t){return kg.call(this,"active",t),this}setHoverState(t){return kg.call(this,"hover",t),this}setDisableState(t){return kg.call(this,"disable",t),this}}var _g=function(e,t,s){var l=hu(e,t);if(s)for(var w in l)s.hasOwnProperty(w)&&(l[s[w]]=l[w],delete l[w]);return l},kg=function(e,t){t===void 0&&(t=!0);var s=`${e}State`,l=`${e}Style`,w=`${e}StyleSave`;this[s]!==t&&(this[s]=t,t?this[w]=this.applyStyle(this[l]):(this.applyStyle(this[w]),this[w]=void 0))},ta={addStyleManager(e){return this.styleManager=new Y8(this,e),this},setActiveState(e){return this.styleManager.setActiveState(e),this},setHoverState(e){return this.styleManager.setHoverState(e),this},setDisableState(e){return this.styleManager.setDisableState(e),this}};const V8=Phaser.GameObjects.Image,Lh=Phaser.Utils.Objects.GetValue;class Fh extends V8{constructor(t,s){s===void 0&&(s={});var l=Lh(s,"x",0),w=Lh(s,"y",0),S=Lh(s,"key",""),k=Lh(s,"frame",void 0);super(t,l,w,S,k),this.type="rexStatesImage";var D=Lh(s,"effects",!0);D&&Oa(this,D),this.style=new N8(this,s),s.style=this.style,this.addStyleManager(s),delete s.style}}Object.assign(Fh.prototype,ta),T.register("statesImage",function(e){var t=new Fh(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.StatesImage",Fh);class Bh extends Dn{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexStatesRoundRectangleShape",s.style=this,s.propertiesMap=z8,this.addStyleManager(s),delete s.style,delete s.propertiesMap}}const z8={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(Bh.prototype,ta),T.register("statesRoundRectangle",function(e){var t=new Bh(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.StatesRoundRectangle",Bh);let G8=class extends Oe{constructor(e,t){return super(e),new Proxy(this,this)}get(e,t){if(he(e,t))return e[t];var s=e.parent;if(he(s,t))return s[t]}set(e,t,s){return he(e,t)?e[t]=s:he(e.parent,t)&&(e.parent[t]=s),!0}get key(){return this.parent.texture.key}set key(e){this.key!==e&&this.parent.setTexture(e,this.frame)}get frame(){return this.parent.frame.name}set frame(e){this.frame!==e&&this.parent.setFrame(e)}};const U8=Phaser.GameObjects.NineSlice,Ls=Phaser.Utils.Objects.GetValue;class Nh extends U8{constructor(t,s){s===void 0&&(s={});var l=Ls(s,"x",0),w=Ls(s,"y",0),S=Ls(s,"key",null),k=Ls(s,"frame",null),D=Ls(s,"width",0),V=Ls(s,"height",0),G=Ls(s,"leftWidth",0),j=Ls(s,"rightWidth",0),tt=Ls(s,"topHeight",0),st=Ls(s,"bottomHeight",0);super(t,l,w,S,k,D,V,G,j,tt,st),this.type="rexStatesNineSlice";var rt=Ls(s,"effects",!0);rt&&Oa(this,rt),this.style=new G8(this,s),s.style=this.style,this.addStyleManager(s),delete s.style}}Object.assign(Nh.prototype,ta),T.register("statesNineSlice",function(e){var t=new Nh(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.StatesNineSlice",Nh);let W8=class extends Oe{constructor(e,t){return super(e),new Proxy(this,this)}get(e,t){if(he(e,t))return e[t];var s=e.parent;if(he(s,t))return s[t]}set(e,t,s){return he(e,t)?e[t]=s:he(e.parent,t)&&(e.parent[t]=s),!0}get key(){return this.parent.textureKey}set key(e){this.key!==e&&this.parent.setBaseTexture(e,this.baseFrameName)}get frame(){return this.parent.baseFrameName}set frame(e){this.frame!==e&&this.parent.setBaseTexture(this.parent.textureKey,e)}};const X8=Phaser.Utils.Objects.GetValue;class Yh extends z{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexStatesNinePatch";var l=X8(s,"effects",!0);l&&Oa(this,l),this.style=new W8(this,s),s.style=this.style,this.addStyleManager(s),delete s.style}}Object.assign(Yh.prototype,ta),T.register("statesNinePatch",function(e){var t=new Yh(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.StatesNinePatch",Yh);const j8=Phaser.GameObjects.Text,Og=Phaser.Utils.Objects.GetValue;class cc extends j8{constructor(t,s){s===void 0&&(s={});var l=Og(s,"x",0),w=Og(s,"y",0),S=Og(s,"text","");super(t,l,w,S,s),this.type="rexStatesText",s.style=this.style,s.onModifyStyle=function(k,D){var V=D.hasOwnProperty("fontStyle")||D.hasOwnProperty("fontSize")||D.hasOwnProperty("fontFamily");k.style.update(V)},this.addStyleManager(s),delete s.style}}Object.assign(cc.prototype,ta),T.register("statesText",function(e){var t=new cc(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.StatesText",cc);class H8 extends Oe{constructor(t,s){return super(t),new Proxy(this,this)}get(t,s){if(he(t,s))return t[s];var l=t.parent;if(he(l,s))return l[s]}set(t,s,l){return he(t,s)?t[s]=l:he(t.parent,s)&&(t.parent[s]=l),!0}get key(){return this.parent.texture.key}set key(t){this.parent.setTexture(t,this.frame)}get fontSize(){return this.parent.fontSize}set fontSize(t){this.parent.setFontSize(t)}get tint(){return this.parent.tintTopLeft}set tint(t){this.parent.setTint(t)}get letterSpacing(){return this.parent.letterSpacing}set letterSpacing(t){this.parent.setLetterSpacing(t)}get lineSpacing(){return this.parent.lineSpacing}set lineSpacing(t){this.parent.setLineSpacing(t)}}const $8=Phaser.GameObjects.BitmapText,ea=Phaser.Utils.Objects.GetValue;class dc extends $8{constructor(t,s){s===void 0&&(s={});var l=ea(s,"x",0),w=ea(s,"y",0),S=ea(s,"font",""),k=ea(s,"fontSize",!1),D=ea(s,"align",0),V=ea(s,"tint");super(t,l,w,S,"",k,D),this.type="rexStatesBitmapText",V!==void 0&&this.setTint(V);var G=ea(s,"effects",!0);G&&Oa(this,G),this.style=new H8(this,s),s.style=this.style,this.addStyleManager(s),delete s.style}}Object.assign(dc.prototype,ta),T.register("statesBitmapText",function(e){var t=new dc(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.StatesBitmapText",dc);class pc extends xu{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("value")||(s.value=0),s.hasOwnProperty("hover.bar")||(s["hover.bar"]=!0),s.hasOwnProperty("easeDuration")||(s.easeDuration=200),s.hasOwnProperty("ease")||(s.ease="Quad"),K(s,"easeValue.duration",s.easeDuration),K(s,"easeValue.ease",s.ease),super(t,s),this.type="rexStatesBarRectangleShape",this.barState=!1,s.style=this,s.propertiesMap=q8,this.addStyleManager(s),delete s.style,delete s.propertiesMap}get bar(){return this.barState}set bar(t){t=!!t,this.barState!==t&&(this.barState=t,this.easeValueTo(this.barState?1:0))}}const q8={color:"trackColor",strokeColor:"trackStrokeColor",strokeWidth:"trackStrokeThickness"};Object.assign(pc.prototype,ta),T.register("statesBarRectangle",function(e){var t=new pc(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.StatesBarRectangle",pc);var K8=function(e){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,Q8(this,e)),this},Q8=function(e,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var s=t.options;s.responsive=!1,s.maintainAspectRatio=!1,s.hasOwnProperty("devicePixelRatio")||(s.devicePixelRatio=1);var l=!1;s.animation===void 0?s.animation={}:s.animation===!1&&(l=!0,s.animation={});var w=s.animation;l&&(w.duration=0);var S=w.onProgress;w.onProgress=function(D){S&&S(D),e.needRedraw()};var k=w.onComplete;return w.onComplete=function(D){k&&k(D),e.needRedraw()},t},J8=function(e){if(this.chart!==void 0)if(typeof e=="string"){for(var t=this.chart.data.datasets,s,l=0,w=t.length;l<w;l++)if(s=t[l],s.label===e)return s}else return this.chart.data.datasets[e]},Z8=function(e,t){var s=this.getChartDataset(e);if(s!==void 0){if(typeof t=="string"){var l=this.chart.data.labels;if(t=l.indexOf(t),t===-1)return}return s.data[t]}},t7=function(e,t,s){if(this.chart===void 0)return this;var l=this.getChartDataset(e);if(typeof t=="string"){var w=this.chart.data.labels;if(t=w.indexOf(t),t===-1)return this}return l.data[t]=s,this},e7=function(){return this.chart===void 0?this:(this.chart.update(),this)};let Eg=class extends Un{constructor(e,t,s,l,w,S){super(e,t,s,l,w),this.type="rexChart",this.chart=void 0,S!==void 0&&this.setChart(S)}destroy(e){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(e))}resize(e,t){if(e===this.width&&t===this.height)return this;if(super.resize(e,t),this.chart){var s=this.chart;s.height=this.canvas.height,s.width=this.canvas.width,s.aspectRatio=s.height?s.width/s.height:null,s.update()}return this}};var i7={setChart:K8,getChartDataset:J8,getChartData:Z8,setChartData:t7,updateChart:e7};Object.assign(Eg.prototype,i7),T.register("chart",function(e,t,s,l,w){var S=new Eg(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.Chart",Eg),T.register("container",function(e,t,s,l,w){var S=new Ji(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.Container",Ji),T.register("sizer",function(e,t,s,l,w,S){var k=new Zt(this.scene,e,t,s,l,w,S);return this.scene.add.existing(k),k}),K(window,"RexPlugins.UI.Sizer",Zt);var Qb=function(){return Array.prototype.reduce.call(arguments,s7,0)},s7=function(e,t){return e+t},r7=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,s,l=this.sizerChildren,w,S,k,D,V=!1;this.totalColumnProportions;for(var G=0;G<this.columnCount;G++){if(D=this.columnProportions[G],s=0,D===0||e){for(var j=0;j<this.rowCount;j++)w=l[j*this.columnCount+G],w&&(w.rexSizer.hidden||(k=this.getChildWidth(w),k===void 0&&(D!==0&&!this.hasColumnProportion0Child?k=0:V=!0),!V&&(S=w.rexSizer.padding,k+=(S.left+S.right)*this.scaleX,s=Math.max(s,k))));V||(t+=s)}V||e&&(this.columnWidth[G]=s)}if(!V){var tt=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven),st=Qb(this.space.left,tt,...this.space.column,this.space.right);return t+st*this.scaleX}},n7=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,s,l=this.sizerChildren,w,S,k,D,V=!1;this.totalRowProportions;for(var G=0;G<this.rowCount;G++){if(D=this.rowProportions[G],s=0,D===0||e){for(var j=0;j<this.columnCount;j++)w=l[G*this.columnCount+j],w&&(w.rexSizer.hidden||(k=this.getChildHeight(w),k===void 0&&(D!==0&&!this.hasRowProportion0Child?k=0:V=!0),!V&&(S=w.rexSizer.padding,k+=(S.top+S.bottom)*this.scaleY,s=Math.max(s,k))));V||(t+=s)}V||e&&(this.rowHeight[G]=s)}if(!V){var tt=Math.max(this.space.indentTopOdd,this.space.indentTopEven),st=Qb(this.space.top,tt,...this.space.row,this.space.bottom);return t+st*this.scaleY}},a7=function(e,t){var s,l=e.rexSizer;if(l.expandWidth){var w=l.padding;s=t-(w.left+w.right)*this.scaleX}return s},o7=function(e,t){var s,l=e.rexSizer;if(l.expandHeight){var w=l.padding;s=t-(w.top+w.bottom)*this.scaleY}return s},h7=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,s,l=0,w=t.length;l<w;l++)s=t[l],s&&s.isRexSizer&&e.push(s);return e},l7=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.hasColumnProportion0Child=!1,this.hasRowProportion0Child=!1,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,Sh.call(this),this},u7=function(){for(var e,t,s,l=this.innerLeft,w=this.innerTop,S,k=w,D,V,G,j,tt,st,rt,ot,ut,ct,pt,mt,yt=0;yt<this.rowCount;yt++){ct=this.getRowHeight(yt),pt=yt%2?this.space.indentLeftEven:this.space.indentLeftOdd,S=l+pt*this.scaleX;for(var St=0;St<this.columnCount;St++){if(ut=this.getColumnWidth(St),e=this.getChildAt(St,yt),!e||e.rexSizer.hidden){S+=ut+this.space.column[St]*this.scaleX;continue}Ph.call(this,e),rt=this.getExpandedChildWidth(e,ut),ot=this.getExpandedChildHeight(e,ct),e.isRexSizer?(e.runLayout(this,rt,ot),Qf(e,this)):Si(e,rt,ot),t=e.rexSizer,s=t.padding,D=S+s.left*this.scaleX,G=ut-(s.left+s.right)*this.scaleX,mt=St%2?this.space.indentTopEven:this.space.indentTopOdd,V=k+mt*this.scaleY+s.top*this.scaleY,j=ct-(s.top+s.bottom)*this.scaleY,rt===void 0&&(rt=le(e)),ot===void 0&&(ot=ue(e)),tt=(t.alignOffsetX+t.alignOffsetOriginX*rt)*this.scaleX,st=(t.alignOffsetY+t.alignOffsetOriginY*ot)*this.scaleY,Mh.call(this,e,D,V,G,j,t.align,tt,st),S+=ut+this.space.column[St]*this.scaleX}k+=ct+this.space.row[yt]*this.scaleY}},c7=function(t){var t=bf.call(this,t);if(t!==void 0&&this.proportionWidthLength===void 0){var s=this.totalColumnProportions;if(s>0){var l=t-this.getChildrenWidth(!1);l>=0&&(this.proportionWidthLength=l/s)}else this.proportionWidthLength=0}return t},d7=function(t){var t=Tf.call(this,t);if(t!==void 0&&this.proportionHeightLength===void 0){var s=this.totalRowProportions;if(s>0){var l=t-this.getChildrenHeight(!1);l>=0&&(this.proportionHeightLength=l/s)}else this.proportionHeightLength=0}return t},p7=function(e){var t,s,l,w;for(var S in this.sizerChildren)t=this.sizerChildren[S],t&&t.isRexSizer&&!t.ignoreLayout&&(w=this.getColumnWidth(parseInt(S)%this.columnCount),s=this.getExpandedChildWidth(t,w),l=t.resolveWidth(s),l===void 0&&(l=s),t.resolveChildrenWidth(l))},f7=function(e){var t,s,l,w;for(var S in this.sizerChildren)t=this.sizerChildren[S],t&&t.isRexSizer&&!t.ignoreLayout&&(w=this.getRowHeight(Math.floor(parseInt(S)/this.rowCount)),s=this.getExpandedChildHeight(t,w),l=t.resolveHeight(s),l===void 0&&(l=s),t.resolveChildrenHeight(l))},g7=function(e){var t,s,l,w;for(var S in this.sizerChildren)t=this.sizerChildren[S],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(w=this.getColumnWidth(parseInt(S)%this.columnCount),s=this.getExpandedChildWidth(t,w),t.isRexSizer&&(l=t.resolveWidth(s),l===void 0&&(l=s)),t.runWidthWrap(l));return this},v7=function(e){var t,s,l,w;for(var S in this.sizerChildren)t=this.sizerChildren[S],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap)&&(w=this.getRowHeight(Math.floor(parseInt(S)/this.rowCount)),s=this.getExpandedChildHeight(t,w),t.isRexSizer&&(l=t.resolveHeight(s),l===void 0&&(l=s)),t.runHeightWrap(l));return this};const Jb=Phaser.Utils.Objects.IsPlainObject,vs=Phaser.Utils.Objects.GetValue,Zb=Phaser.Display.Align.CENTER;var tw=function(e,t,s,l,w){if(typeof e=="number"||typeof t=="number")if(e===void 0){for(var S,k=0;k<l;k++)if(S=t*l+k,!s[S])return S}else if(t===void 0){for(var S,k=0;k<w;k++)if(S=k*l+e,!s[S])return S}else{var S=t*l+e;if(!s[S])return S}else if(t===!0){for(var S,k=0;k<l;k++)for(var D=0;D<w;D++)if(S=D*l+k,!s[S])return S}else for(var k=0,V=s.length;k<V;k++)if(!s[k])return k;return null},m7=function(e,t,s,l,w,S,k){var D,V,G,j;if(bh.call(this,e),Jb(t)){var st=t;t=vs(st,"column",void 0),s=vs(st,"row",void 0),l=vs(st,"align",Zb),w=vs(st,"padding",0),S=vs(st,"expand",!1),k=vs(st,"key",void 0),D=vs(st,"offsetX",0),V=vs(st,"offsetY",0),G=vs(st,"offsetOriginX",0),j=vs(st,"offsetOriginY",0)}var tt=tw(t,s,this.sizerChildren,this.columnCount,this.rowCount);if(tt===null){if(typeof t=="number"&&typeof s=="number")return this;s===!0||typeof s=="number"?this.addEmptyColumn():this.addEmptyRow(),tt=tw(t,s,this.sizerChildren,this.columnCount,this.rowCount)}typeof l=="string"&&(l=Xa[l]),l===void 0&&(l=Zb),w===void 0&&(w=0),S===void 0&&(S=!0),D===void 0&&(D=0),V===void 0&&(V=0),G===void 0&&(G=0),j===void 0&&(j=0);var st=this.getSizerConfig(e);return st.align=l,st.padding=qn(w),Jb(S)?(st.expandWidth=vs(S,"width",!1),st.expandHeight=vs(S,"height",!1)):(st.expandWidth=S,st.expandHeight=S),st.alignOffsetX=D,st.alignOffsetY=V,st.alignOffsetOriginX=G,st.alignOffsetOriginY=j,this.sizerChildren[tt]=e,k!==void 0&&this.addChildrenMap(k,e),this},y7={add:m7},io=function(e,t,s,l){s===void 0&&(s=0),l===void 0&&(l=e.length-1);for(var w=s;w<=l;w++)e[w]=t;return e},x7={remove(e,t){if(this.getParentSizer(e)!==this)return this;var s=this.sizerChildren.indexOf(e);return s!==-1&&(this.sizerChildren[s]=null),wh.call(this,e,t),this},removeAt(e,t,s){var l=this.getChildAt(e,t);return l&&this.remove(l,s),this},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--){var s=this.sizerChildren[t];s&&this.remove(s,e)}return this},clear(e){return io(this.sizerChildren,null),Ku.call(this,e),this}},b7={setColumnSpace(e){if(this.space.column||(this.space.column=[]),this.space.column.length=this.columnCount-1,typeof e=="number")this.space.column0=e,io(this.space.column,e);else{this.space.column0=e[0];for(var t=0,s=this.columnCount-1;t<s;t++)this.space.column[t]=e[t]||0}return this},setRowSpace(e){if(this.space.row||(this.space.row=[]),this.space.row.length=this.rowCount-1,typeof e=="number")this.space.row0=e,io(this.space.row,e);else{this.space.row0=e[t];for(var t=0,s=this.rowCount-1;t<s;t++)this.space.row[t]=e[t]||0}return this},setIndentLeft(e,t){return this.space.indentLeftOdd=e,this.space.indentLeftEven=t,this},setIndentTop(e,t){return this.space.indentTopOdd=e,this.space.indentTopEven=t,this}};const ew=Phaser.Utils.Objects.GetValue;var w7=function(e,t,s,l,w){if(e===void 0&&(e=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),this.columnCount=e,this.rowCount=t,this.gridCount=e*t,this.removeAll(),this.sizerChildren.length=e*t,io(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=e,typeof s=="number")io(this.columnProportions,s);else for(var S=0;S<e;S++)this.columnProportions[S]=s[S]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof l=="number")io(this.rowProportions,l);else for(var S=0;S<t;S++)this.rowProportions[S]=l[S]||0;this.columnWidth=[],this.columnWidth.length=e,this.rowHeight=[],this.rowHeight.length=t,this.setColumnSpace(ew(w,"column",0)),this.setRowSpace(ew(w,"row",0));var k=this.scene,D=this.createCellContainerCallback;if(D)for(var V=0,G=this.rowCount;V<G;V++)for(var j=0,tt=this.columnCount;j<tt;j++){var st={column:j,row:V},rt=D(k,j,V,st);rt&&this.add(rt,st)}return this},iw=function(e,t,s){t===void 0&&(t=this.rowProportions[0]||0),s===void 0&&(s=this.space.row0||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var l=[e*this.columnCount,0],w=0;w<this.columnCount;w++)l.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,l),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(e,0,s),this},S7=function(e,t){return iw.call(this,this.rowCount,e,t),this},sw=function(e,t,s){t===void 0&&(t=this.columnProportions[0]||0),s===void 0&&(s=this.space.column0||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var l=this.rowCount-1;l>=0;l--){var w=l*this.columnCount+e;this.sizerChildren.splice(w,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(e,0,s),this},T7=function(e,t){return sw.call(this,this.columnCount,e,t),this},rw={getChildrenWidth:r7,getChildrenHeight:n7,getExpandedChildWidth:a7,getExpandedChildHeight:o7,getChildrenSizers:h7,preLayout:l7,layoutChildren:u7,resolveWidth:c7,resolveHeight:d7,resolveChildrenWidth:p7,resolveChildrenHeight:f7,runWidthWrap:g7,runHeightWrap:v7,resetGrid:w7,insertEmptyRow:iw,addEmptyRow:S7,insertEmptyColumn:sw,addEmptyColumn:T7};Object.assign(rw,y7,x7,b7,mg);var C7=function(){for(var e=0,t,s=0;s<this.columnCount;s++)t=this.columnProportions[s],t>0?e+=t:t===0&&(this.hasColumnProportion0Child=!0);return e},P7=function(){for(var e=0,t,s=0;s<this.rowCount;s++)t=this.rowProportions[s],t>0?e+=t:t===0&&(this.hasRowProportion0Child=!0);return e};const fc=Phaser.Utils.Objects.IsPlainObject,we=Phaser.Utils.Objects.GetValue;class Fs extends Zn{constructor(t,s,l,w,S,k,D,V,G,j){fc(s)?(j=s,s=we(j,"x",0),l=we(j,"y",0),w=we(j,"width",void 0),S=we(j,"height",void 0),k=we(j,"column",j.col||0),D=we(j,"row",0),V=we(j,"columnProportions",0),G=we(j,"rowProportions",0)):fc(w)?(j=w,w=we(j,"width",void 0),S=we(j,"height",void 0),k=we(j,"column",j.col||0),D=we(j,"row",0),V=we(j,"columnProportions",0),G=we(j,"rowProportions",0)):fc(k)?(j=k,k=we(j,"column",j.col||0),D=we(j,"row",0),V=we(j,"columnProportions",0),G=we(j,"rowProportions",0)):fc(V)&&(j=V,V=we(j,"columnProportions",0),G=we(j,"rowProportions",0)),super(t,s,l,w,S,j),this.type="rexGridSizer",this.sizerChildren=[],this.addChildrenMap("items",this.sizerChildren),this.setCreateCellContainerCallback(we(j,"createCellContainerCallback")),this.setIndentLeft(we(j,"space.indentLeftOdd",0),we(j,"space.indentLeftEven",0)),this.setIndentTop(we(j,"space.indentTopOdd",0),we(j,"space.indentTopEven",0)),this.resetGrid(k,D,V,G,we(j,"space",void 0))}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0,this.createCellContainerCallback=void 0)}setColumnProportion(t,s){return t>=this.columnProportions.length?this:(this.columnProportions[t]=s,this)}setRowProportion(t,s){return t>=this.rowProportions.length?this:(this.rowProportions[t]=s,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=C7.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=P7.call(this)),this._totalRowProportions}getChildAt(t,s){return this.sizerChildren[s*this.columnCount+t]}childToGridIndex(t,s){if(!t)return null;var l=this.sizerChildren.indexOf(t);return l===-1?null:(s===void 0&&(s={}),s.x=l%this.columnCount,s.y=Math.floor(l/this.columnCount),s)}getColumnWidth(t){var s=this.columnProportions[t],l=s===0?this.columnWidth[t]:s*this.proportionWidthLength;return l}getRowHeight(t){var s=this.rowProportions[t],l=s===0?this.rowHeight[t]:s*this.proportionHeightLength;return l}setCreateCellContainerCallback(t){return this.createCellContainerCallback=t,this}}Object.assign(Fs.prototype,rw),T.register("gridSizer",function(e,t,s,l,w,S,k,D,V){var G=new Fs(this.scene,e,t,s,l,w,S,k,D,V);return this.scene.add.existing(G),G}),K(window,"RexPlugins.UI.GridSizer",Fs);var M7=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t;if(this.orientation===0?e?t=this.maxChildWidth:t=this.rexSizer.resolved?this.wrapResult.width:void 0:t=this.rexSizer.resolved?this.wrapResult.width:void 0,t!==void 0)return t+(this.space.left+this.space.right)*this.scaleX},_7=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t;if(this.orientation===1?e?t=this.maxChildHeight:t=this.rexSizer.resolved?this.wrapResult.height:void 0:t=this.rexSizer.resolved?this.wrapResult.height:void 0,t!==void 0)return t+(this.space.top+this.space.bottom)*this.scaleY},k7=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,s,l=0,w=t.length;l<w;l++)s=t[l],s!==`
`&&s.isRexSizer&&e.push(s);return e},O7=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,this.wrapResult=void 0,this.rexSizer.resolved=!1,Sh.call(this),this},E7=function(){for(var e=this.orientation===0,t=e?this.innerWidth:this.innerHeight,s,l,w,S=0,k,D,V=this.innerLeft,G=this.innerTop,j,tt,st,rt,ot,ut,ct=this.wrapResult.lines,pt,mt,yt,St=V,Ct=G,_t=0,Rt=ct.length;_t<Rt;_t++){switch(pt=ct[_t],mt=pt.children,this.rtl&&mt.reverse(),e?(k=_t%2?this.space.indentLeftEven:this.space.indentLeftOdd,St=V+k*this.scaleX):(D=_t%2?this.space.indentTopEven:this.space.indentTopOdd,Ct=G+D*this.scaleY),yt=t-(e?pt.width:pt.height),this.align){case 0:break;case 1:e?St+=yt:Ct+=yt;break;case 2:e?St+=yt/2:Ct+=yt/2;break;case 3:S=Ag(t,yt,this.justifyPercentage,mt.length);break;case 4:S=Ag(t,yt,this.justifyPercentage,mt.length),S===0&&(e?St+=yt:Ct+=yt);break;case 5:S=Ag(t,yt,this.justifyPercentage,mt.length),S===0&&(e?St+=yt/2:Ct+=yt/2);break}for(var Ft=!0,It=0,Bt=mt.length;It<Bt;It++)s=mt[It],!s.rexSizer.hidden&&(l=s.rexSizer,w=l.padding,Ph.call(this,s),e?j=St+w.left*this.scaleX:tt=Ct+w.top*this.scaleY,Ft?Ft=!1:e?j+=this.space.item*this.scaleX:tt+=this.space.item*this.scaleY,st=le(s),rt=ue(s),e?(D=It%2?this.space.indentTopEven:this.space.indentTopOdd,tt=Ct+D*this.scaleY+w.top*this.scaleY,St=j+st+w.right*this.scaleX+S):(k=It%2?this.space.indentLeftEven:this.space.indentLeftOdd,j=St+k*this.scaleX+w.left*this.scaleX,Ct=tt+rt+w.top*this.scaleY+S),ot=(l.alignOffsetX+l.alignOffsetOriginX*st)*this.scaleX,ut=(l.alignOffsetY+l.alignOffsetOriginY*rt)*this.scaleY,Mh.call(this,s,j,tt,st,rt,l.align,ot,ut));e?Ct+=pt.height+this.space.line*this.scaleY:St+=pt.width+this.space.line*this.scaleX}},Ag=function(e,t,s,l){return t/e<=s?t/(l-1):0},A7=function(){return this.orientation===0?!0:wf.call(this)},nw=function(e){var t={lines:[],width:0,height:0},s=this.sizerChildren,l,w,S,k,D=0,V,G,j=t.lines,tt=void 0,st;if(this.orientation===0){for(var rt=0,ot=s.length;rt<ot;rt++){if(l=s[rt],l===`
`)l=void 0,S=0,st=!0;else{if(l.rexSizer.hidden)continue;l.isRexSizer&&l.runLayout(this),S=this.getChildWidth(l),w=l.rexSizer.padding,S+=(w.left+w.right)*this.scaleX,st=D<S||tt===void 0}st&&(tt&&(tt.width=e-(D+this.space.item*this.scaleX),t.width=Math.max(t.width,tt.width),t.height+=tt.height+this.space.line*this.scaleY),tt={children:[],width:0,height:0},j.push(tt),V=j.length%2?this.space.indentLeftOdd:this.space.indentLeftEven,D=e-V*this.scaleX),D-=S+this.space.item*this.scaleX,l&&(tt.children.push(l),k=this.getChildHeight(l),w=l.rexSizer.padding,k+=(w.top+w.bottom)*this.scaleY,tt.height=Math.max(tt.height,k))}tt&&(tt.width=e-(D+this.space.item*this.scaleX),t.width=Math.max(t.width,tt.width),t.height+=tt.height),t.height+=Math.max(this.space.indentTopOdd,this.space.indentTopEven)*this.scaleY}else{for(var ut=e,rt=0,ot=s.length;rt<ot;rt++){if(l=s[rt],l===`
`)l=void 0,S=0,st=!0;else{if(l.rexSizer.hidden)continue;l.isRexSizer&&l.layout(),k=this.getChildHeight(l),w=l.rexSizer.padding,k+=(w.top+w.bottom)*this.scaleY,st=D<k||tt===void 0}st&&(tt&&(tt.height=ut-(D+this.space.item*this.scaleY),t.height=Math.max(t.height,tt.height),t.width+=tt.width+this.space.line*this.scaleX),tt={children:[],width:0,height:0},j.push(tt),G=j.length%2?this.space.indentTopOdd:this.space.indentTopEven,D=ut-G*this.scaleY),D-=k+this.space.item*this.scaleY,l&&(tt.children.push(l),S=this.getChildWidth(l),w=l.rexSizer.padding,S+=(w.left+w.right)*this.scaleX,tt.width=Math.max(tt.width,S))}tt&&(tt.height=ut-(D+this.space.item*this.scaleY),t.height=Math.max(t.height,tt.height),t.width+=tt.width),t.width+=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven)*this.scaleX}return t},R7=function(e){if(!this.wrapResult&&this.orientation===0){var t=e-(this.space.left+this.space.right)*this.scaleX;this.wrapResult=nw.call(this,t),this.rexSizer.resolved=!0,Sf.call(this,e)}},D7=function(){return this.orientation===1?!0:Cf.call(this)},I7=function(e){if(!this.wrapResult&&this.orientation===1){var t=e-(this.space.top+this.space.bottom)*this.scaleY;this.wrapResult=nw.call(this,t),this.rexSizer.resolved=!0,Pf.call(this,e)}},L7=function(e,t){},F7=function(e,t){};const aw=Phaser.Math.Distance.Between;var B7=function(e,t){var s=this.sizerChildren;if(s.length===0)return-1;for(var l=-1,w=1/0,S=0,k=s.length;S<k;S++){var D=s[S];if(!(Math.abs(D.centerY-t)>D.height/2)){var V=aw(D.left,D.centerY,e,t);w>V&&(w=V,l=S);var G=s[S+1];if(!(G&&G.y===D.y)){var V=aw(D.right,D.centerY,e,t);w>V&&(w=V,l=S+1)}}}return l};const N7=Phaser.Utils.Objects.IsPlainObject,ia=Phaser.Utils.Objects.GetValue,Y7=Phaser.Display.Align.CENTER;var Rg=function(e,t,s,l){if(e===`
`)return this.addNewLine(),this;var w,S,k,D;if(bh.call(this,e),N7(t)){var V=t;t=ia(V,"padding",0),s=ia(V,"key",void 0),l=ia(V,"index",void 0),w=ia(V,"offsetX",0),S=ia(V,"offsetY",0),k=ia(V,"offsetOriginX",0),D=ia(V,"offsetOriginY",0)}t===void 0&&(t=0),w===void 0&&(w=0),S===void 0&&(S=0),k===void 0&&(k=0),D===void 0&&(D=0);var V=this.getSizerConfig(e);return V.align=Y7,V.padding=qn(t),V.alignOffsetX=w,V.alignOffsetY=S,V.alignOffsetOriginX=k,V.alignOffsetOriginY=D,l===void 0||l>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(l,0,e),s!==void 0&&this.addChildrenMap(s,e),this},V7={add(e,t,s){if(Es(e))for(var l=e,w=0,S=l.length;w<S;w++)Rg.call(this,l[w],t);else Rg.call(this,e,t,s);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(e,t,s,l){return Rg.call(this,t,s,l,e),this},insertAtPosition(e,t,s,l,w){var S=B7.call(this,e,t);return S===-1&&(S=void 0),this.insert(S,s,l,w),this}};const z7=Phaser.Utils.Array.Remove;var G7={remove(e,t){return this.getParentSizer(e)!==this?this:(z7(this.sizerChildren,e),wh.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,Ku.call(this,e),this}},ow={getChildrenWidth:M7,getChildrenHeight:_7,getChildrenSizers:k7,preLayout:O7,layoutChildren:E7,hasWidthWrap:A7,runWidthWrap:R7,hasHeightWrap:D7,runHeightWrap:I7,getExpandedChildWidth:L7,getExpandedChildHeight:F7};Object.assign(ow,V7,G7,mg);var U7=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,s,l,w=!1,S=0,k=e.length;S<k;S++)s=e[S],s!==`
`&&(l=this.getChildWidth(s),l===void 0&&(w=!0),!w&&(t=Math.max(l,t)));if(!w)return t},W7=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,s,l,w=!1,S=0,k=e.length;S<k;S++)s=e[S],s!==`
`&&(l=this.getChildHeight(s),l===void 0&&(w=!0),!w&&(t=Math.max(l,t)));if(!w)return t};const hw=Phaser.Utils.Objects.IsPlainObject,Pi=Phaser.Utils.Objects.GetValue;class fn extends Zn{constructor(t,s,l,w,S,k){hw(s)?(k=s,s=Pi(k,"x",0),l=Pi(k,"y",0),w=Pi(k,"width",void 0),S=Pi(k,"height",void 0)):hw(w)&&(k=w,w=Pi(k,"width",void 0),S=Pi(k,"height",void 0)),super(t,s,l,w,S,k),this.type="rexFixWidthSizer",this.sizerChildren=[],this.runChildrenWrapFlag=!0,this.setOrientation(Pi(k,"orientation",0)),this.setItemSpacing(Pi(k,"space.item",0)),this.setLineSpacing(Pi(k,"space.line",0)),this.setIntentLeft(Pi(k,"space.indentLeftOdd",0),Pi(k,"space.indentLeftEven",0)),this.setIntentTop(Pi(k,"space.indentTopOdd",0),Pi(k,"space.indentTopEven",0)),this.setAlign(Pi(k,"align",0)),this.setJustifyPercentage(Pi(k,"justifyPercentage",.25)),this.setRTL(Pi(k,"rtl",!1)),this.wrapResult=void 0,this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Wn(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,s){return this.space.indentLeftOdd=t,this.space.indentLeftEven=s,this}setIntentTop(t,s){return this.space.indentTopOdd=t,this.space.indentTopEven=s,this}setAlign(t){return typeof t=="string"&&(t=X7[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=U7.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=W7.call(this)),this._maxChildHeight}}const X7={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(fn.prototype,ow),T.register("fixWidthSizer",function(e,t,s,l,w){var S=new fn(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.FixWidthSizer",fn),T.register("overlapSizer",function(e,t,s,l,w){var S=new fs(this.scene,e,t,s,l,w);return this.scene.add.existing(S),S}),K(window,"RexPlugins.UI.OverlapSizer",fs),T.register("space",function(){var e=new gg(this.scene);return e}),K(window,"RexPlugins.UI.Space",gg),T.register("label",function(e){var t=new Lr(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Label",Lr);const lw=["alpha","tint","flipX","flipY"];var Dg=function(e,t){if(!t)return e;for(var s=0,l=lw.length;s<l;s++){var w=lw[s];w in t&&w in e&&(e[w]=t[w])}if("origin"in t&&"originX"in e)e.setOrigin(t.origin);else{var S,k;"originX"in t&&"originX"in e&&(S=t.originX),"originY"in t&&"originY"in e&&(k=t.originY),S!==void 0&&k!==void 0&&e.setOrigin(S,k)}return e},ri=function(e,t){var s;t&&(t.hasOwnProperty("$type")?s=t.$type:t.hasOwnProperty("barColor")?s="bar":t.hasOwnProperty("leftWidth")?s="nineSlice":t.hasOwnProperty("key")&&(s="image"));var l;switch(s){case"bar":l=new pc(e,t);break;case"image":l=new Fh(e,t);break;case"nineSlice":t.hasOwnProperty("stretchMode")?l=new Yh(e,t):l=new Nh(e,t);break;default:l=new Bh(e,t);break}return Dg(l,t),e.add.existing(l),l},j7=function(){switch(this.scrollMode){case 0:case 1:Ig.call(this),this.updateController(),Lg.call(this),Fg.call(this);break;default:Ig.call(this,"y"),Ig.call(this,"x"),this.updateController(),Lg.call(this,"y"),Lg.call(this,"x"),Fg.call(this,"y"),Fg.call(this,"x");break}return this},Ig=function(e){var t,s,l,w;switch(this.scrollMode){case 0:case 1:t=this.topChildOY,s=this.bottomChildOY,l=this.childrenMap.scroller,w=this.childrenMap.slider,e=this.scrollMode===0?"Y":"X";break;default:e=e.toUpperCase(),e==="Y"?(t=this.topChildOY,s=this.bottomChildOY):(t=this.leftChildOX,s=this.rightChildOX),l=this.childrenMap[`scroller${e}`],w=this.childrenMap[`slider${e}`]}var S=e==="Y"?this.scaleY:this.scaleX;s*=S,l&&l.setBounds(t,s),w&&(w.setEnable(t!==s),w.tickLength&&w.setTick(w.tickLength,t,s))},Lg=function(e){switch(this.scrollMode){case 0:case 1:var s=this.childrenMap.slider;s&&this.hideUnscrollableSlider&&this.setChildVisible(s,this.isOverflow);var w=this.childrenMap.scroller;w&&this.disableUnscrollableDrag&&w.setEnable(this.isOverflow);break;default:e=e.toUpperCase();var t=this[`isOverflow${e}`],s=this.childrenMap[`slider${e}`],l=this[`hideUnscrollableSlider${e}`];s&&l&&this.setChildVisible(s,t);var w=this.childrenMap.scroller,S=this[`disableUnscrollableDrag${e}`];w&&S&&w.setEnable(t);break}},Fg=function(e){switch(this.scrollMode){case 0:case 1:if(!this.adaptThumbSizeMode)return;var S=this.childrenMap.slider;if(!S)return;var t=Math.min(this.childVisibleHeight/this.childHeight,1),k=S.childrenMap.track,D=S.childrenMap.thumb,V=this.minThumbSize;if(this.scrollMode===0){var s=k.displayHeight*t;V!==void 0&&s<V&&(s=V),Si(D,void 0,s)}else{var l=k.displayWidth*t;V!==void 0&&l<V&&(l=V),Si(D,l,void 0)}uw(S);break;default:e=e.toUpperCase();var w=this[`adaptThumb${e}SizeMode`];if(!w)return;var S=this.childrenMap[`slider${e}`];if(!S)return;var k=S.childrenMap.track,D=S.childrenMap.thumb,V=this[`minThumb${e}Size`];if(e==="Y"){var t=Math.min(this.childVisibleHeight/this.childHeight,1),s=k.displayHeight*t;V!==void 0&&s<V&&(s=V),Si(D,void 0,s)}else{var t=Math.min(this.childVisibleWidth/this.childWidth,1),l=k.displayWidth*t;V!==void 0&&l<V&&(l=V),Si(D,l,void 0)}uw(S);break}},uw=function(e){var t=e.minWidth,s=e.minHeight;e.minWidth=e.width,e.minHeight=e.height,e.layout(),e.minWidth=t,e.minHeight=s},H7=function(){switch(this.scrollMode){case 0:case 1:var e=this.childrenMap.scroller,t=this.childrenMap.slider;e&&e.setValue(this.childOY),t&&t.setValue(this.t);break;default:var s=this.childrenMap.scrollerY,l=this.childrenMap.sliderY,w=this.childrenMap.scrollerX,S=this.childrenMap.sliderX;s&&s.setValue(this.childOY),l&&l.setValue(this.t),w&&w.setValue(this.childOX),S&&S.setValue(this.s);break}};const gc=Phaser.Math.Clamp;var $7={setChildOY(e,t){return t===void 0&&(t=!1),t&&(e=gc(e,this.bottomChildOY,this.topChildOY)),this.childOY=e,this},addChildOY(e,t){return this.setChildOY(this.childOY+e,t),this},setT(e,t){return t===void 0&&(t=!1),t&&(e=gc(e,0,1)),this.t=e,this},addT(e,t){return this.setT(this.t+e,t),this},scrollToTop(){return this.t=0,this},scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this},setChildOX(e,t){return t===void 0&&(t=!1),t&&(e=gc(e,this.leftChildOX,this.rightChildOX)),this.childOX=e,this},addChildOX(e,t){return this.setChildOX(this.childOX+e,t),this},setS(e,t){return t===void 0&&(t=!1),t&&(e=gc(e,0,1)),this.s=e,this},addS(e,t){return this.setS(this.s+e,t),this},scrollToLeft(){return this.s=0,this},scrollToRight(){if(this.s=1,this.s===0)return this;do this.s=1;while(this.s!==1);return this}},cw={resizeController:j7,updateController:H7};Object.assign(cw,$7);var dw={v:0,vertical:0,y:0,h:1,horizontal:1,x:1,xy:2,vh:2},Bg=function(e,t){t===void 0&&(t="scrollMode"),e.hasOwnProperty(t)||(e[t]=q7(e));var s=e[t];return typeof s=="string"&&(s=dw[s]),s},q7=function(e){var t=!!e.sliderY||!!e.scrollerY,s=!!e.sliderX||!!e.scrollerX,l;return t&&s?l=2:t?l=0:s?l=1:l=0,l};const li=Phaser.Utils.Objects.GetValue;var K7=function(e,t,s){var l=li(s,"child"),w=li(l,"gameObject",void 0);if(w){var S=li(s,"space.child",0);e.childMargin={};var k=e.childMargin,D={};if(typeof S=="number")switch(e.scrollMode){case 0:case 1:k.top=0,k.bottom=0,k.left=0,k.right=0;break;default:k.top=S,k.bottom=S,k.left=S,k.right=S;break}else switch(e.scrollMode){case 0:k.top=li(S,"top",0),k.bottom=li(S,"bottom",0),D.left=li(S,"left",0),D.right=li(S,"right",0);break;case 1:k.top=li(S,"left",0),k.bottom=li(S,"right",0),D.top=li(S,"top",0),D.bottom=li(S,"bottom",0);break;default:k.top=li(S,"top",0),k.bottom=li(S,"bottom",0),k.left=li(S,"left",0),k.right=li(S,"right",0);break}t.add(w,{column:1,row:1,align:li(l,"align","center"),padding:D,expand:{width:li(l,"expandWidth",!0),height:li(l,"expandHeight",!0)}})}e.addChildrenMap("child",w)};const pw=Phaser.Math.Percent;var Q7=function(e,t,s){var l;return e.y===t.y?l=pw(s.x,e.x,t.x):e.x===t.x&&(l=pw(s.y,e.y,t.y)),l},fw=function(e,t){Ng.x=e,Ng.y=t;var s,l;this.reverseAxis?(s=this.getEndPoint(),l=this.getStartPoint()):(s=this.getStartPoint(),l=this.getEndPoint());var w=Q7(s,l,Ng);return w},Ng={},J7=function(e,t,s){!this.enable||!this.inputActive||(this.value=fw.call(this,t,s))},Yg=function(e){if(!(!this.enable||!this.inputActive)&&e.isDown){var t=fw.call(this,e.worldX,e.worldY);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-t)<.1?this.value=t:this.easeValueTo(t)}};const Z7=Phaser.Utils.Objects.GetValue;var tN=function(e){this.inputActive=!1;var t=Z7(e,"input",0);typeof t=="string"&&(t=eN[t]);var s=this.childrenMap.thumb;switch(t){case 0:s&&(s.setInteractive(),this.scene.input.setDraggable(s),s.on("dragstart",function(w){this.inputActive=!0,this.eventEmitter.emit("inputstart",w)},this).on("dragend",function(w){this.inputActive=!1,this.eventEmitter.emit("inputend",w)},this).on("drag",J7,this));break;case 1:this.setInteractive().on("pointerdown",function(w){this.inputActive=!0,this.eventEmitter.emit("inputstart",w)},this).on("pointerdown",Yg,this);var l=function(w){this.inputActive&&(this.inputActive=!1,this.eventEmitter.emit("inputend",w))};this.scene.input.on("pointerup",l,this).on("pointermove",Yg,this),this.once("destroy",function(){this.scene.input.on("pointerup",l,this).off("pointermove",Yg,this)},this);break}};const eN={pan:0,drag:0,click:1,none:-1};var gw=function(e,t){t===void 0&&(t=iN);var s=this.childrenMap.thumb,l=s.x,w=s.y;return xh(s,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,e),t.x=s.x,t.y=s.y,s.x=l,s.y=w,t},iN={};const sN=Phaser.Display.Align.LEFT_CENTER,rN=Phaser.Display.Align.TOP_CENTER;var nN=function(e){if(e===void 0&&(e=aN),this.childrenMap.thumb){var t=this.orientation===0?sN:rN;gw.call(this,t,e)}else this.orientation===0?(e.x=this.innerLeft+1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerTop+1);return e},aN={};const oN=Phaser.Display.Align.RIGHT_CENTER,hN=Phaser.Display.Align.BOTTOM_CENTER;var lN=function(e){if(e===void 0&&(e=uN),this.childrenMap.thumb){var t=this.orientation===0?oN:hN;gw.call(this,t,e)}else this.orientation===0?(e.x=this.innerRight-1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerBottom-1);return e},uN={};const vw=Phaser.Math.Linear;var cN=function(e,t,s,l){return l===void 0&&(l=dN),l.x=vw(t.x,s.x,e),l.y=vw(t.y,s.y,e),l},dN={},pN=function(e){var t=this.childrenMap.thumb;if(t===void 0)return this;e===void 0&&(e=this.value);var s,l;return this.reverseAxis?(s=this.getEndPoint(),l=this.getStartPoint()):(s=this.getStartPoint(),l=this.getEndPoint()),cN(e,s,l,t),t.x+=this.thumbOffsetX,t.y+=this.thumbOffsetY,this.resetChildPositionState(t),this};const fN=Phaser.Display.Align.LEFT_CENTER,gN=Phaser.Display.Align.TOP_CENTER,vN=Phaser.Display.Align.RIGHT_CENTER,mN=Phaser.Display.Align.BOTTOM_CENTER;var yN=function(e){var t=this.childrenMap.indicator;if(t===void 0)return this;e===void 0&&(e=this.value);var s=this.reverseAxis,l,w,S=this.childrenMap.thumb;if(S)if(this.orientation===0){var k=le(S);if(s){var D=S.x-k*S.originX;l=this.right-D}else{var D=S.x-k*S.originX,V=D+k;l=V-this.left}}else{var G=ue(S);if(s){var j=S.y-G*S.originY;w=this.bottom-j}else{var j=S.y-G*S.originY,tt=j+G;w=tt-this.top}}else this.orientation===0?l=this.width*e:w=this.height*e;Si(t,l,w);var st;s?st=this.orientation===0?vN:mN:st=this.orientation===0?fN:gN,e1(t,this,st),this.resetChildPositionState(t)};const is=Phaser.Utils.Objects.GetValue,vc=Phaser.Utils.Objects.IsPlainObject,xN=Phaser.Math.Clamp,bN=Phaser.Math.Snap.To;class so extends an(Zt){constructor(t,s){super(t,s),this.type="rexSlider",this.bootProgressBase(s),this.reverseAxis=is(s,"reverseAxis",!1);var l=is(s,"background",void 0),w=is(s,"track",void 0),S=is(s,"indicator",void 0),k=is(s,"thumb",void 0);if(l&&(vc(l)&&(l=ri(t,l)),this.addBackground(l)),w&&(vc(w)&&(w=ri(t,w)),this.add(w,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0})),S&&(vc(S)&&(S=ri(t,S)),this.pin(S)),k){vc(k)&&(k=ri(t,k)),this.pin(k);var D=is(s,"thumbOffsetX",0),V=is(s,"thumbOffsetY",0);this.setThumbOffset(D,V)}this.addChildrenMap("background",l),this.addChildrenMap("track",w),this.addChildrenMap("indicator",S),this.addChildrenMap("thumb",k),this.setEnable(is(s,"enable",void 0));var G=is(s,"tick",void 0);G===void 0&&(G=is(s,"gap",void 0)),this.setGap(G),tN.call(this,s),this.setValue(is(s,"value",0),is(s,"min",void 0),is(s,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,s,l){return t&&s!==void 0&&(t=t/(l-s)),this.gap=t,this}setTick(t,s,l){return this.setGap(t,s,l),this}get tick(){return this.gap}set tick(t){this.gap=t}setThumbOffset(t,s){return this.thumbOffsetX=t,this.thumbOffsetY=s,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=bN(t,this.gap));var s=this._value;this._value=xN(t,0,1),s!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,s,this.eventEmitter))}postLayout(t,s,l){return this.updateThumb(),this.updateIndicator(),super.postLayout(t,s,l),this}}var wN={getStartPoint:nN,getEndPoint:lN,updateThumb:pN,updateIndicator:yN};Object.assign(so.prototype,wN);const Wi=Phaser.Utils.Objects.GetValue;class Vg extends Zt{constructor(t,s){super(t,s),this.type="rexScrollBar";var l=Wi(s,"background",void 0),w=Wi(s,"buttons",void 0),S=Wi(w,"top",Wi(w,"left",void 0)),k=Wi(w,"bottom",Wi(w,"right",void 0)),D,V=Wi(s,"slider",void 0);if(l&&this.addBackground(l),S){this.add(S);var G=new Qa(S);G.on("intouch",function(){if(this.enable){var ct=D.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=ct}},this)}if(V){V.orientation=this.orientation,V.eventEmitter=this,V.value=null;var j;if(this.orientation===0){var tt=Wi(V,"width",void 0);j=tt===void 0?1:0}else{var st=Wi(V,"height",void 0);j=st===void 0?1:0}D=new so(t,V),t.add.existing(D),this.add(D,{proportion:j})}if(k){this.add(k);var G=new Qa(k);G.on("intouch",function(){if(this.enable){var pt=D.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=pt}},this)}var rt=[S,k];this.addChildrenMap("background",l),this.addChildrenMap("slider",D),this.addChildrenMap("buttons",rt);var ot=Wi(s,"valuechangeCallback",null);if(ot!==null){var ut=Wi(s,"valuechangeCallbackScope",void 0);this.on("valuechange",ot,ut)}this.setEnable(Wi(s,"enable",void 0)),this.setValue(Wi(s,"value",0)),this.setScrollStep(Wi(w,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,s,l){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,s,l),this}addValue(t,s,l){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,s,l),this}getValue(t,s){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,s):0}easeValueTo(t,s,l){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,s,l),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}setGap(t,s,l){return this.childrenMap.slider&&this.childrenMap.slider.setGap(t,s,l),this}get gap(){if(this.childrenMap.slider)return this.childrenMap.slider.gap}set gap(t){this.childrenMap.slider&&(this.childrenMap.slider.gap=t)}setTick(t,s,l){return this.setGap(t,s,l),this}get tick(){if(this.childrenMap.slider)return this.childrenMap.slider.tick}set tick(t){this.childrenMap.slider&&(this.childrenMap.slider.tick=t)}}var SN=function(e,t){t===void 0&&(t={});var s=Ms(t);t={slider:s},t.orientation=s.orientation,delete s.orientation,t.background=s.background,delete s.background,t.buttons=s.buttons,delete s.buttons,t.value=null;var l=new Vg(e,t);e.add.existing(l);var w=l.childrenMap.slider;return l.addChildrenMap("track",w.childrenMap.track),l.addChildrenMap("indicator",w.childrenMap.indicator),l.addChildrenMap("thumb",w.childrenMap.thumb),l};const TN=Phaser.Math.Snap.To;Phaser.Math.Clamp;var CN=function(){this.emit("dragstart")},PN=function(){this.emit("dragend")},MN=function(){this.value+=this.dragDelta},_N=function(){var e=this.value,t=this.dragSpeed,s=this.snapStep,l=!!s;if(l){var w=e,S=t===0?0:t*t/(2*this.slidingDeceleration);if(w+=t>0?S:-S,w=TN(w,s,this.minValue),S=Math.abs(w-e),S>0){var k;t===0?(k=this.backDeceleration,t=Math.sqrt(2*k*S)):(k=t*t/(2*S),k*=.99),this._slowDown.init(e,void 0,t,k,w)}else this._slowDown.stop(),this._state.next()}else if(t===0)this._slowDown.stop(),this._state.next();else{var k=this.slidingDeceleration;this._slowDown.init(e,t>0,t,k)}},kN=function(e,t){t*=.001;var s=this._slowDown.update(t).value;this.overMax(s)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(s)?(this.value=this.minValue,this._slowDown.stop()):this.value=s},ON=function(){var e=this.value,t=this.outOfMinBound?this.minValue:this.maxValue,s=Math.abs(t-e),l=this.backDeceleration,w=Math.sqrt(2*l*s);this._slowDown.init(e,void 0,w,l,t)},EN=function(e,t){t*=.001,this.value=this._slowDown.update(t).value,this._slowDown.isMoving||this._state.next()},mw=function(){this._slowDown.stop()};class AN extends Or{constructor(t,s){super(s),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,s=this.parent,l=s.dragState;return l.isDown&&(t=s.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,s){this.next()}next_DRAGBEGIN(){var t,s=this.parent,l=s.dragState;return l.isDown?t=l.pointer.getDistance()>=s.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,s){this.next()}next_DRAG(){var t,s=this.parent,l=s.dragState;return l.isUp&&(s.outOfBounds?t="BACK":s.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,s){var l=this.parent,w=l.dragState;w.justMoved&&MN.call(l),this.next()}enter_DRAG(){CN.call(this.parent)}exit_DRAG(){PN.call(this.parent)}next_SLIDE(){var t,s=this.parent,l=s.dragState;return l.isDown?t="DRAG":s.isSliding||(t="IDLE"),t}enter_SLIDE(){_N.call(this.parent)}exit_SLIDE(){mw.call(this.parent)}update_SLIDE(t,s){kN.call(this.parent,t,s),this.next()}next_BACK(){var t,s=this.parent,l=s.dragState;return l.isDown?t="DRAG":s.isPullBack||(t="IDLE"),t}enter_BACK(){ON.call(this.parent)}exit_BACK(){mw.call(this.parent)}update_BACK(t,s){EN.call(this.parent,t,s),this.next()}}const Vh=Phaser.Utils.Objects.GetValue,RN=Phaser.Math.Distance.Between;class DN extends Oe{constructor(t,s){super(t,s),this._enable=void 0,this.rectBoundsInteractive=Vh(s,"rectBoundsInteractive",!1),this.rectBoundsInteractive||t.setInteractive(Vh(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(Vh(t,"enable",!0)),this.holdThreshold=Vh(t,"holdThreshold",50),this.pointerOutReleaseEnable=Vh(t,"pointerOutRelease",!0),this}boot(){var t=this.scene,s=this.parent;this.rectBoundsInteractive?(t.input.on("pointerdown",this.onPointIn,this),t.input.on("pointerup",this.onPointOut,this),t.input.on("pointermove",this.onPointerMove,this)):(s.on("pointerdown",this.onPointIn,this),s.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&s.on("pointerout",this.onPointOut,this),s.on("pointermove",this.onPointerMove,this)),t.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){if(!this.isShutdown){var s=this.scene;this.parent,this.rectBoundsInteractive&&(s.input.off("pointerdown",this.onPointIn,this),s.input.off("pointerup",this.onPointOut,this),s.input.off("pointermove",this.onPointerMove,this)),s.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t)}}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=Lp(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=RN(this.preX,this.preY,this.x,this.y),s=t/(this.dt*.001);return s}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,s,l){!this.enable||!t.isDown||this.pointer!==void 0||this.rectBoundsInteractive&&!Zs(this.parent,t)||(this.pointer=t,this.localX=s,this.localY=l)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,s,l){if(!(!this.enable||!t.isDown||this.pointer!==t)){if(this.rectBoundsInteractive&&this.pointerOutReleaseEnable&&!Zs(this.parent,t)){this.onPointOut(t);return}this.localX=s,this.localY=l}}preupdate(t,s){if(this.enable){var l=this.pointer;this.justMoved=!1,l&&!this.isInTouched?(this.x=l.worldX,this.y=l.worldY,this.preX=l.worldX,this.preY=l.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",l,this.localX,this.localY)):l&&this.isInTouched?this.x===l.x&&this.y===l.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=l.worldX,this.y=l.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",l,this.localX,this.localY)):!l&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",l))}}}const zg=Phaser.Utils.Objects.GetValue;class IN{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(zg(t,"value",0)),this.setSpeed(zg(t,"speed",0)),this.setAcceleration(zg(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class LN{constructor(){this.value,this.dir,this.movement=new IN}init(t,s,l,w,S){return this.value=t,this.end=S,S!==void 0?this.dir=t<S:this.dir=s,l=Math.abs(l),this.movement.setSpeed(l).setAcceleration(-w),this}stop(){this.movement.reset()}update(t){var s=this.movement.getDeltaValue(t);return this.dir||(s=-s),this.end===void 0?this.value+=s:s===0?this.value=this.end:(this.value+=s,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const ze=Phaser.Utils.Objects.GetValue,FN=Phaser.Math.Clamp;class BN extends Oe{constructor(t,s){super(t,s);var l=ze(s,"enable",!0);this._state=new AN(this,{enable:l,eventEmitter:!1});var w={rectBoundsInteractive:ze(s,"rectBoundsInteractive",!1),inputConfig:ze(s,"inputConfig",void 0),enable:l,pointerOutRelease:ze(s,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new DN(t,w),this._enable=void 0,this._value=void 0,this._slowDown=new LN,this.setSnapStep(ze(s,"snapStep",void 0));var S=ze(s,"valuechangeCallback",null);if(S!==null){var k=ze(s,"valuechangeCallbackScope",void 0);this.on("valuechange",S,k)}if(S=ze(s,"overmaxCallback",null),S!==null){var k=ze(s,"overmaxCallbackScope",void 0);this.on("overmax",S,k)}if(S=ze(s,"overminCallback",null),S!==null){var k=ze(s,"overminCallbackScope",void 0);this.on("overmin",S,k)}this.resetFromJSON(s),this.boot()}resetFromJSON(t){this.setOrientationMode(ze(t,"orientation",0)),this.setDragThreshold(ze(t,"threshold",10)),this.setSlidingDeceleration(ze(t,"slidingDeceleration",5e3)),this.setBackDeceleration(ze(t,"backDeceleration",2e3));var s=ze(t,"dragRate",1);s=s*(ze(t,"dragReverse",!1)?-1:1),this.setDragRate(s);var l=ze(t,"bounds",void 0);return l?this.setBounds(l):this.setBounds(ze(t,"max",0),ze(t,"min",0)),this.setValue(ze(t,"value",this.maxValue||0)),this.setEnable(ze(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=NN[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRate(t){return this.dragRate=t,this}setBounds(t,s){if(Array.isArray(t)){var l=t;t=l[0],s=l[1]}return t<s?(this.minValue=t,this.maxValue=s):(this.minValue=s,this.maxValue=t),this}setSnapStep(t){return this.snapStep=t,this}get value(){return this._value}set value(t){if(t!==this._value){var s=this._value,l=this.overMax(t),w=this.overMin(t);l&&this.emit("overmax",t,s),w&&this.emit("overmin",t,s),this.backEnable||(l&&(t=this.maxValue),w&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,s)}}setValue(t,s){return s===void 0&&(s=!1),s&&(t=FN(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,s){return this.setValue(this.value+t,s),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRate,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRate,t}}const NN={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},mc=Phaser.Utils.Objects.GetValue;class YN extends Oe{constructor(t,s){switch(super(t,s),this.parent!==this.scene?this.focusMode=mc(s,"focus",!0):this.focusMode=!1,typeof this.focusMode=="boolean"&&(this.focusMode=this.focusMode?1:0),this.setSpeed(mc(s,"speed",.1)),this.setEnable(mc(s,"enable",!0)),this.focusMode){case 0:case 2:this.scene.input.on("wheel",this.onSceneScroll,this);break;default:t.setInteractive(mc(s,"inputConfig",void 0)).on("wheel",function(l,w,S,k,D){this.tryScroll(S)},this);break}}destroy(){switch(this.focusMode){case 0:case 2:this.scene.input.off("wheel",this.onSceneScroll,this);break}}onSceneScroll(t,s,l,w,S,k){this.focusMode===2&&!Zs(this.parent,t)||this.tryScroll(w)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}tryScroll(t){if(this.enable)return this.scroll(t),this}scroll(t){return t*=this.speed,this.emit("scroll",t,this.parent,this),this}}const He=Phaser.Utils.Objects.GetValue,VN=Phaser.Math.Snap.To;var yc=function(e,t,s,l){s=s.toUpperCase();var w=s==="Y",S=e.scrollMode===2,k=e.childrenMap.child,D,V=`snapStep${s}`;if(S)D=He(l,V,void 0);else{var D=He(l,"snapStep",void 0);D===void 0&&(D=He(l,V,void 0))}e[V]=D;var G,j,tt=`slider${s}`;if(S||l.hasOwnProperty(tt)?G=He(l,tt,void 0):G=He(l,"slider",void 0),G){G===!0&&(G={}),G.orientation=w?1:0,j=SN(e.scene,G);var st,rt,ot,ut=He(G,"position",0);typeof ut=="string"&&(ut=zN[ut]);var ct=He(l,`space.slider${s}`,void 0),pt;ct===void 0&&(ct=He(l,"space.slider",void 0),ct===void 0&&(S?ct=0:pt=He(l,"space.child",0)));var mt;pt===void 0?mt=typeof ct=="number":mt=typeof pt=="number",w?ut===0?(st=2,rt=1,pt===void 0?ot=mt?{left:ct}:ct:ot={left:He(pt,"right",pt)}):(st=0,rt=1,pt===void 0?ot=mt?{right:ct}:ct:ot={right:He(pt,"left",pt)}):ut===0?(st=1,rt=2,pt===void 0?ot=mt?{top:ct}:ct:ot={top:He(pt,"bottom",pt)}):(st=1,rt=0,pt===void 0?ot=mt?{bottom:ct}:ct:ot={bottom:He(pt,"top",pt)}),t.add(j,{column:st,row:rt,align:"center",padding:ot,expand:!0}),e[`hideUnscrollableSlider${s}`]=He(G,"hideUnscrollableSlider",!1),e[`disableUnscrollableDrag${s}`]=He(G,"disableUnscrollableDrag",!1),e[`adaptThumb${s}SizeMode`]=He(G,"adaptThumbSize",!1),e[`minThumb${s}Size`]=He(G,"minThumbSize",void 0)}else e[`hideUnscrollableSlider${s}`]=!1,e[`disableUnscrollableDrag${s}`]=!1,e[`adaptThumb${s}SizeMode`]=!1,e[`minThumb${s}Size`]=void 0;var yt=He(l,"scrollDetectionMode");typeof yt=="string"&&(yt=GN[yt]);var St,Ct,_t=`scroller${s}`;S||l.hasOwnProperty(_t)?St=He(l,_t,!0):St=He(l,"scroller",!0),St&&k&&(St===!0&&(St={}),St.orientation=w?0:1,yt!==void 0&&(St.rectBoundsInteractive=yt===1),St.snapStep=D,Ct=new BN(k,St),k.isRexContainerLite&&k.sendChildToBack(k));var Rt=He(l,S?`mouseWheelScroller${s}`:"mouseWheelScroller",!1),Ft;if(Rt&&k&&(yt!==void 0&&(Rt.focus=yt===1?2:0),Ft=new YN(k,Rt)),e.addChildrenMap(`slider${s}`,j),e.addChildrenMap(`scroller${s}`,Ct),e.addChildrenMap(`mouseWheelScroller${s}`,Ft),(!S||w)&&(e.hideUnscrollableSlider=e[`hideUnscrollableSlider${s}`],e.disableUnscrollableDrag=e[`disableUnscrollableDrag${s}`],e.adaptThumbSizeMode=e[`adaptThumb${s}SizeMode`],e.minThumbSize=e[`minThumb${s}Size`],e.addChildrenMap("slider",j),e.addChildrenMap("scroller",Ct),e.addChildrenMap("mouseWheelScroller",Ft)),j){var It,Bt;S?(It=w?"t":"s",Bt=`scroll${s}`):(It="t",Bt="scroll"),j.on("valuechange",function(ne){e[It]=ne,e.emit(Bt,e)}).on("inputend",function(){var ne=e[`snapStep${s}`];if(ne){var Yt=e[w?"topChildOY":"leftChildOX"],xe=e[w?"bottomChildOY":"rightChildOX"],Pe=e[`childO${s}`],Ie=VN(Pe,ne,Yt),ni=500*(Math.abs(Ie-Pe)/ne);j.setEaseValueDuration(ni).easeValueTo(Ie,Yt,xe)}})}if(Ct){var Wt,Bt;S?(Wt=`childO${s}`,Bt=`scroll${s}`):(Wt="childOY",Bt="scroll"),Ct.on("valuechange",function(Yt){e[Wt]=Yt,e.emit(Bt,e)})}if(Ft){var se;S?se=`addChildO${s}`:se="addChildOY",Ft.on("scroll",function(ne){var Yt=e[V];Yt&&(ne=Yt),e[se](-ne,!0)})}};const zN={right:0,left:1,bottom:0,top:1},GN={gameObject:0,rectBounds:1},xc=Phaser.Utils.Objects.GetValue;var UN=function(e,t){var s=e.scene,l=[0,1,0],w=[0,1,0],S=xc(t,"width"),k=xc(t,"height");if(!S){var D=xc(t,"child.expandWidth",!0);D||(l[1]=0)}if(!k){var V=xc(t,"child.expandHeight",!0);V||(w[1]=0)}var G=new Fs(s,{column:3,row:3,columnProportions:l,rowProportions:w});switch(K7(e,G,t),e.scrollMode){case 0:yc(e,G,"y",t);break;case 1:yc(e,G,"x",t);break;default:yc(e,G,"y",t),yc(e,G,"x",t);break}return G};const nr=Phaser.Utils.Objects.GetValue;let zh=class extends Zt{constructor(e,t){t===void 0&&(t={});var s=Bg(t),l=s===1;t.orientation=l?0:1,super(e,t),this.type=nr(t,"type","rexScrollable"),this.scrollMode=s;var w=nr(t,"background",void 0);w&&this.addBackground(w);var S=nr(t,"header",void 0);if(S){var k=nr(t,"align.header","center"),D=nr(t,"space.header",0),V;l?V={right:D}:V={bottom:D},this.add(S,{proportion:0,align:k,padding:V,expand:nr(t,"expand.header",!0)})}var G=UN(this,t);G&&this.add(G,{proportion:1,align:"center",padding:0,expand:!0});var j=nr(t,"footer",void 0);if(j){var k=nr(t,"align.footer","center"),tt=nr(t,"space.footer",0),V;l?V={left:tt}:V={top:tt},this.add(j,{proportion:0,align:k,padding:V,expand:nr(t,"expand.footer",!0)})}this.addChildrenMap("background",w),this.addChildrenMap("header",S),this.addChildrenMap("footer",j),this.runLayoutFlag=!1}postLayout(e,t,s){var l=0,w=0;return this.runLayoutFlag?(w=this.t,this.scrollMode===2&&(l=this.s)):this.runLayoutFlag=!0,this.resizeController(),this.setT(w),this.scrollMode===2&&this.setS(l),super.postLayout(e,t,s),this}set t(e){var t=this.childMargin;if(t.top!==0||t.bottom!==0){var s=this.childrenMap.child,l=s.topChildOY-s.bottomChildOY,w=l+t.top+t.bottom,S=w*e-t.top;e=l!==0?S/l:0}this.childrenMap.child.t=e,this.updateController()}get t(){var e=this.childrenMap.child.t,t=this.childMargin;if(t.top!==0||t.bottom!==0){var s=this.childrenMap.child,l=s.topChildOY-s.bottomChildOY,w=l+t.top+t.bottom,S=l*e+t.top;e=w!==0?S/w:0}return e}set s(e){var t=this.childMargin;if(t.left!==0||t.right!==0){var s=this.childrenMap.child,l=s.leftChildOX-s.rightChildOX,w=l+t.left+t.right,S=w*e-t.left;e=l!==0?S/l:0}this.childrenMap.child.s=e,this.updateController()}get s(){var e=this.childrenMap.child.s,t=this.childMargin;if(t.left!==0||t.right!==0){var s=this.childrenMap.child,l=s.leftChildOX-s.rightChildOX,w=l+t.left+t.right,S=l*e+t.left;e=w!==0?S/w:0}return e}set childOY(e){this.childrenMap.child.childOY=e,this.updateController()}get childOY(){return this.childrenMap.child.childOY}set childOX(e){this.childrenMap.child.childOX=e,this.updateController()}get childOX(){return this.childrenMap.child.childOX}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get leftChildOX(){return this.childrenMap.child.leftChildOX+this.childMargin.left}get rightChildOX(){return this.childrenMap.child.rightChildOX-this.childMargin.right}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get childVisibleWidth(){return this.childrenMap.child.childVisibleWidth}get childWidth(){return this.childrenMap.child.childWidth}get isOverflow(){var e=this.childrenMap.child;return e.topChildOY!==e.bottomChildOY}get isOverflowY(){return this.isOverflow}get isOverflowX(){var e=this.childrenMap.child;return e.leftChildOX!==e.rightChildOX}get sliderEnable(){var e=this.childrenMap.slider;return e?e.enable:!1}set sliderEnable(e){var t=this.childrenMap.slider;t&&t.setEnable(e)}setSliderEnable(e){return e===void 0&&(e=!0),this.sliderEnable=e,this}get sliderYEnable(){return this.sliderEnable}set sliderYEnable(e){this.sliderEnable=e}setSliderYEnable(e){return this.setSliderEnable(e),this}get sliderXEnable(){var e=this.childrenMap.sliderX;return e?e.enable:!1}set sliderXEnable(e){var t=this.childrenMap.sliderX;t&&t.setEnable(e)}setSliderXEnable(e){return e===void 0&&(e=!0),this.sliderXEnable=e,this}get scrollerEnable(){var e=this.childrenMap.scroller;return e?e.enable:!1}set scrollerEnable(e){var t=this.childrenMap.scroller;t&&t.setEnable(e)}setScrollerEnable(e){return e===void 0&&(e=!0),this.scrollerEnable=e,this}get scrollerYEnable(){return this.scrollerEnable}set scrollerYEnable(e){this.scrollerEnable=e}setScrollerYEnable(e){return this.setScrollerEnable(e),this}get scrollerXEnable(){var e=this.childrenMap.scrollerX;return e?e.enable:!1}set scrollerXEnable(e){var t=this.childrenMap.scrollerX;t&&t.setEnable(e)}setScrollerXEnable(e){return e===void 0&&(e=!0),this.scrollerXEnable=e,this}get scrollerXEnable(){var e=this.childrenMap.scrollerX;return e?e.enable:!1}set scrollerXEnable(e){var t=this.childrenMap.scrollerX;t&&t.setEnable(e)}setScrollerXEnable(e){return e===void 0&&(e=!0),this.scrollerXEnable=e,this}get mouseWheelScrollerEnable(){var e=this.childrenMap.mouseWheelScroller;return e?e.enable:!1}set mouseWheelScrollerEnable(e){var t=this.childrenMap.mouseWheelScroller;t&&t.setEnable(e)}setMouseWheelScrollerEnable(e){return e===void 0&&(e=!0),this.mouseWheelScrollerEnable=e,this}get mouseWheelScrollerYEnable(){return this.mouseWheelScrollerEnable}set mouseWheelScrollerYEnable(e){this.mouseWheelScrollerEnable=e}setMouseWheelScrollerYEnable(e){return this.setMouseWheelScrollerEnable(e),this}get mouseWheelScrollerXEnable(){var e=this.childrenMap.mouseWheelScrollerX;return e?e.enable:!1}set mouseWheelScrollerXEnable(e){var t=this.childrenMap.mouseWheelScrollerX;t&&t.setEnable(e)}setMouseWheelScrollerXEnable(e){return e===void 0&&(e=!0),this.mouseWheelScrollerXEnable=e,this}setDropZoneEnable(e){e===void 0&&(e=!0);var t=this.childrenMap.child;return t.setInteractive(),t.input.dropZone=e,this}};Object.assign(zh.prototype,cw);var Gg=function(e,t,s){var l=dn(e);switch(l){case Ti:s=e.getWrappedText(t);break;case Ci:s=e.getPenManager(t,s);break;case es:e.maxWidth>0?s=e.setText(t).getTextBounds().wrappedText.split(`
`):s=t.split(`
`);break}return s},WN=function(e){return e!==void 0&&(this.text=e),this.lines=Gg(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},yw=function(e){return(e-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},xw=function(e){return e*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},XN=function(e){var t=e+this.visibleLinesCount+1,s;switch(this.textObjectType){case Ti:s=this.lines.slice(e,t).join(`
`);break;case Ci:var l=this.lines.getLineStartIndex(e),w=this.lines.getLineEndIndex(t-1);s=this.lines.getSliceTagText(l,w,!0);break;case es:s=this.lines.slice(e,t).join(`
`);break}return s},bc=function(e,t){var s=dn(e);switch(s){case Ti:var S=e.style,l=S.wordWrapWidth,w=S.wordWrapCallback;S.wordWrapWidth=0,S.wordWrapCallback=void 0,e.setText(t),S.wordWrapWidth=l,S.wordWrapCallback=w;break;case Ci:var S=e.style,k=S.wrapMode;S.wrapMode=0,e.setText(t),S.wrapMode=k;break;case es:var D=e._maxWidth;e._maxWidth=0,e.setText(t),e._maxWidth=D;break}},bw=function(){var e=this.textObject.rexSizer;this.textObject.y+=e.offsetY-e.preOffsetY,e.preOffsetY=e.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&jN.call(this)},jN=function(){if(this.textObject.setCrop){var e=this.textObject.rexSizer.offsetY,t,s;e<=0?(t=-e,s=this.height):(t=0,s=this.height-e),this.textObject.setCrop(0,t,this.width,s)}},HN=function(){var e=Math.max(Math.floor(yw.call(this,-this.textOY)),0),t=xw.call(this,e)+this.textOY,s=XN.call(this,e);return bc(this.textObject,s),this.textObject.rexSizer.offsetY=t,bw.call(this),this},$N=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,Sh.call(this),this},qN=function(e,t,s){if(s+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===s)){switch(this.textObjectWidth=t,this._textObjectRealHeight=s,this.textObjectType){case Ti:case Ci:e.setFixedSize(t,s);var l=e.style,w=Math.max(t,0);this.textObjectType===Ti?l.wordWrapWidth=w:(l.wrapMode===0&&(l.wrapMode=1),l.wrapWidth=w);break;case es:e.setMaxWidth(t);break}this.setText()}},KN=function(){var e,t,s,l=this.left,w=this.top,S,k,D,V;e=this.textObject,e.rexSizer.hidden||(t=e.rexSizer,s=t.padding,S=l+s.left*this.scaleX,k=w+s.top*this.scaleY,D=this.width*this.scaleX-(s.left+s.right)*this.scaleX,V=this.height*this.scaleY-(s.top+s.bottom)*this.scaleY,qN.call(this,e,D,V),xh(e,S,k,D,V,t.align),t.preOffsetY=0,bw.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},QN={setText:WN,updateTextObject:HN,preLayout:$N,layoutChildren:KN};const ww=Phaser.Utils.Objects.IsPlainObject,ss=Phaser.Utils.Objects.GetValue,JN=Phaser.Display.Align.TOP_LEFT;class Sw extends Zn{constructor(t,s,l,w,S,k){ww(s)?(k=s,s=ss(k,"x",0),l=ss(k,"y",0),w=ss(k,"width",void 0),S=ss(k,"height",void 0)):ww(w)&&(k=w,w=ss(k,"width",void 0),S=ss(k,"height",void 0)),super(t,s,l,w,S,k),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=ss(k,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(ss(k,"clampTextOY",!0)),this.alwaysScrollable=ss(k,"alwaysScrollable",!1);var D=ss(k,"background",void 0),V=ss(k,"text",void 0);V===void 0&&(V=ZN(t)),this.textCropEnable=ss(k,"textCrop",!!V.setCrop);var G=ss(k,"textMask",!this.textCropEnable);D&&this.addBackground(D),this.add(V),this.sizerChildren=[V];var j=this.getSizerConfig(V);j.align=JN,j.padding=qn(0),j.expand=!0,this.textObject=V,this.textObjectType=dn(V),j.preOffsetY=0,j.offsetY=0,G&&(this.textMask=Is.call(this,this.textObject,this)),this.addChildrenMap("background",D),this.addChildrenMap("text",V)}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case Ti:this.lines.length=0;break;case Ci:this.lines.destroy();break;case es:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case Ti:case Ci:var s=this.textObject.style;t=s.metrics.fontSize+s.strokeThickness;break;case es:var l=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*l;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case Ti:case Ci:t=this.textObject.lineSpacing;break;case es:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(yw.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=xw.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var s=this.topTextOY,l=this.bottomTextOY,w=this.textOYExceedTop(t),S=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:w?t=s:S&&(t=l)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),w&&(this.execeedTopState||this.emit("execeedtop",this,t,s)),this.execeedTopState=w,S&&(this.execeedBottomState||this.emit("execeedbottom",this,t,l)),this.execeedBottomState=S}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var ZN=function(e){return e.add.text(0,0,"")};Object.assign(Sw.prototype,QN);var tY=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textObjectHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.textHeight}})},eY={setText(e){var t=this.childrenMap.child;return t.setText(e),this.resizeController(),this},appendText(e){return this.setText(this.text+e),this}},iY={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}};const ar=Phaser.Utils.Objects.GetValue;class Gh extends zh{constructor(t,s){s===void 0&&(s={});var l=ar(s,"text",void 0),w=ar(s,"textWidth",void 0),S=ar(s,"textHeight",void 0),k=ar(s,"textCrop",!!l.setCrop),D=ar(s,"textMask",!k),V=ar(s,"content",""),G=new Sw(t,{width:w,height:S,text:l,textMask:D,textCrop:k&&!D,content:V,clampTextOY:ar(s,"clampChildOY",!1),alwaysScrollable:ar(s,"alwaysScrollable",!1)});t.add.existing(G),tY(G),s.scrollMode=0,s.type="rexTextArea",s.child={gameObject:G,expandWidth:w===void 0,expandHeight:S===void 0};var j=ar(s,"space",void 0);j&&(j.child=ar(j,"text",0)),super(t,s),this.addChildrenMap("text",l)}get text(){return this.childrenMap.child.text}get lineHeight(){var t=this.childrenMap.child;return t.textLineHeight+t.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.textHeight}}Object.assign(Gh.prototype,eY,iY);const wc=Phaser.Utils.Objects.GetValue;var Tw=function(e,t,s){t=t?B(t):{};var l=wc(s,"background",ri),w=wc(s,"text",Ug),S=wc(s,"track",ri),k=wc(s,"thumb",ri);l?t.background=l(e,t.background):delete t.background,w?t.text=w(e,t.text):delete t.text;var D=t.slider;D!==!1&&D!==null&&(D===void 0&&(D={}),S?D.track=S(e,D.track):delete D.track,k?D.thumb=k(e,D.thumb):delete D.thumb,t.slider=D);var V=new Gh(e,t);return e.add.existing(V),V},Ug=function(e,t){var s;t&&(t.hasOwnProperty("$type")?s=t.$type:t.hasOwnProperty("key")&&(s="bitmaptext",t.font=t.key));var l;switch(s){case"bitmaptext":case"bitmap":l=new dc(e,t);break;case"bbcodetext":case"bbcode":l=new ap(e,0,0,"",t);break;case"label":l=new Uh(e,t);break;case"textarea":l=Tw(e,t);break;default:l=new cc(e,t);break}return Dg(l,t),e.add.existing(l),l},Cw=function(e,t){var s;t&&(t.hasOwnProperty("$type")?s=t.$type:t.hasOwnProperty("leftWidth")?s="nineSlice":(t.hasOwnProperty("color")||t.hasOwnProperty("strokeColor"))&&(s="roundRectangle"));var l;switch(s){case"nineSlice":t.hasOwnProperty("stretchMode")?l=new Yh(e,t):l=new Nh(e,t);break;case"roundRectangle":l=new Bh(e,t);break;default:l=new Fh(e,t);break}return Dg(l,t),e.add.existing(l),l};const Sc=Phaser.Utils.Objects.GetValue;var Tc=function(e,t,s){t=t?B(t):{};var l=Sc(s,"background",ri),w=Sc(s,"text",Ug),S=Sc(s,"icon",Cw),k=Sc(s,"action",Cw);return t.background!==null&&l?t.background=l(e,t.background):delete t.background,t.text!==null&&w?t.text=w(e,t.text):delete t.text,t.icon!==null&&S?t.icon=S(e,t.icon):delete t.icon,t.action!==null&&k?t.action=k(e,t.action):delete t.action,t};class Uh extends Lr{constructor(t,s,l){s=Tc(t,s,l),super(t,s),this.type="rexSimpleLabel"}setActiveState(t){return Wg(this.getChildren(),"setActiveState",t),this}setHoverState(t){return Wg(this.getChildren(),"setHoverState",t),this}setDisableState(t){return Wg(this.getChildren(),"setDisableState",t),this}}var Wg=function(e,t,s){for(var l=0,w=e.length;l<w;l++){var S=e[l];S&&S[t]&&S[t](s)}};T.register("simpleLabel",function(e,t){var s=new Uh(this.scene,e,t);return this.scene.add.existing(s),s}),K(window,"RexPlugins.UI.SimpleLabel",Uh);const Ut=Phaser.Utils.Objects.GetValue;var sY=function(e){var t=this.scene,s=Ut(e,"orientation",0);this.setOrientation(s);var l=Ut(e,"icon",void 0),w=Ut(e,"iconMask",void 0),S=Ut(e,"innerBackground",void 0),k=Ut(e,"title",void 0),D=Ut(e,"separator",void 0),V=Ut(e,"text",void 0),G=Ut(e,"action",void 0),j=Ut(e,"actionMask",void 0);if(l){var tt=Ut(e,"align.icon","center"),_t;this.orientation===0?_t={right:Ut(e,"space.icon",0),top:Ut(e,"space.iconTop",0),bottom:Ut(e,"space.iconBottom",0),left:Ut(e,"space.iconLeft",0)}:_t={bottom:Ut(e,"space.icon",0),left:Ut(e,"space.iconLeft",0),right:Ut(e,"space.iconRight",0),top:Ut(e,"space.iconTop",0)};var st=Ut(e,"squareFitIcon",!1)?1:0;if(this.add(l,{proportion:0,align:tt,padding:_t,fitRatio:st}),w&&(w=Is.call(this,l,l,1)),!st){var rt=Ut(e,"iconSize",void 0);this.setIconSize(Ut(e,"iconWidth",rt),Ut(e,"iconHeight",rt))}}var ot=new Zt(t,{orientation:1});S&&ot.addBackground(S);var ut=Ut(e,"space.separator",0);if(k){var tt=Ut(e,"align.title","left"),ct=Ut(e,"expandTitleWidth",!1),pt=Ut(e,"expandTitleHeight",!1),mt,_t,yt;mt=pt?1:0,yt=ct,_t={bottom:!D&&V?Ut(e,"space.title",ut):0,left:Ut(e,"space.titleLeft",0),right:Ut(e,"space.titleRight",0)},ot.add(k,{proportion:mt,expand:yt,align:tt,padding:_t})}if(D){var _t={top:k?ut:0,bottom:V?ut:0,left:Ut(e,"space.separatorLeft",0),right:Ut(e,"space.separatorRight",0)};ot.add(D,{expand:!0,padding:_t})}if(V){var tt=Ut(e,"align.text","left"),St=Ut(e,"expandTextWidth",!1),Ct=Ut(e,"expandTextHeight",!1),mt,_t,yt;mt=Ct?1:0,yt=St,_t={left:Ut(e,"space.textLeft",0),right:Ut(e,"space.textRight",0)},ot.add(V,{proportion:mt,expand:yt,align:tt,padding:_t})}var _t=void 0;if(G&&(_t={right:Ut(e,"space.text",0)}),this.add(ot,{proportion:1,padding:_t}),G){var tt=Ut(e,"align.action","center"),_t;this.orientation===0?_t={top:Ut(e,"space.actionTop",0),bottom:Ut(e,"space.actionBottom",0),right:Ut(e,"space.actionRight",0)}:_t={left:Ut(e,"space.actionLeft",0),right:Ut(e,"space.actionRight",0),bottom:Ut(e,"space.actionBottom",0)};var st=Ut(e,"squareFitAction",!1)?1:0;if(this.add(G,{proportion:0,align:tt,padding:_t,fitRatio:st}),j&&(j=Is.call(this,G,G,1)),!st){var Rt=Ut(e,"actionSize");this.setActionSize(Ut(e,"actionWidth",Rt),Ut(e,"actionHeight",Rt))}}this.addChildrenMap("icon",l),this.addChildrenMap("iconMask",w),this.addChildrenMap("innerSizer",ot),this.addChildrenMap("innerBackground",S),this.addChildrenMap("title",k),this.addChildrenMap("separator",D),this.addChildrenMap("text",V),this.addChildrenMap("action",G),this.addChildrenMap("actionMask",j)};const zt=Phaser.Utils.Objects.GetValue;var rY=function(e){this.setOrientation(1),this.setRTL(!1);var t=this.scene,s=zt(e,"title",void 0),l=zt(e,"separator",void 0),w=zt(e,"innerBackground",void 0),S=zt(e,"icon",void 0),k=zt(e,"iconMask",void 0),D=zt(e,"text",void 0),V=zt(e,"action",void 0),G=zt(e,"actionMask",void 0);if(s){var j=zt(e,"align.title","left"),tt=zt(e,"expandTitleWidth",!1),st=zt(e,"expandTitleHeight",!1),rt,ot,ut;rt=st?1:0,ut=tt,ot={bottom:zt(e,"space.title",0),left:zt(e,"space.titleLeft",0),right:zt(e,"space.titleRight",0)},this.add(s,{proportion:rt,expand:ut,align:j,padding:ot})}if(l){var ct=zt(e,"space.separator",0),ot={top:s?ct:0,bottom:D?ct:0,left:zt(e,"space.separatorLeft",0),right:zt(e,"space.separatorRight",0)};this.add(l,{proportion:0,expand:!0,padding:ot})}var pt=zt(e,"orientation",0),mt=new Zt(t,{orientation:pt,rtl:zt(e,"rtl",!1),space:{left:zt(e,"space.innerLeft",0),right:zt(e,"space.innerRight",0),top:zt(e,"space.innerTop",0),bottom:zt(e,"space.innerBottom",0)}});if(w&&mt.addBackground(w),this.add(mt,{proportion:1,expand:!0}),S){var j=zt(e,"align.icon","center"),ot;mt.orientation===0?ot={right:zt(e,"space.icon",0),top:zt(e,"space.iconTop",0),bottom:zt(e,"space.iconBottom",0),left:zt(e,"space.iconLeft",0)}:ot={bottom:zt(e,"space.icon",0),left:zt(e,"space.iconLeft",0),right:zt(e,"space.iconRight",0),top:zt(e,"space.iconTop",0)};var yt=zt(e,"squareFitIcon",!1)?1:0;if(mt.add(S,{proportion:0,align:j,padding:ot,fitRatio:yt}),k&&(k=Is.call(this,S,S,1)),!yt){var St=zt(e,"iconSize",void 0);this.setIconSize(zt(e,"iconWidth",St),zt(e,"iconHeight",St))}}if(D){var j=zt(e,"align.text","left"),Ct=zt(e,"space.text",0),_t=zt(e,"expandTextWidth",!1),Rt=zt(e,"expandTextHeight",!1),rt,ot,ut;mt.orientation===0?(rt=_t?1:0,V&&(ot={right:Ct}),ut=Rt):(rt=Rt?1:0,V&&(ot={bottom:Ct}),ut=_t),mt.add(D,{proportion:rt,expand:ut,align:j,padding:ot})}if(V){var j=zt(e,"align.action","center"),ot;mt.orientation===0?ot={top:zt(e,"space.actionTop",0),bottom:zt(e,"space.actionBottom",0),right:zt(e,"space.actionRight",0)}:ot={left:zt(e,"space.actionLeft",0),right:zt(e,"space.actionRight",0),bottom:zt(e,"space.actionBottom",0)};var yt=zt(e,"squareFitAction",!1)?1:0;if(mt.add(V,{proportion:0,align:j,padding:ot,fitRatio:yt}),G&&(G=Is.call(this,V,V,1)),!yt){var Ft=zt(e,"actionSize");this.setActionSize(zt(e,"actionWidth",Ft),zt(e,"actionHeight",Ft))}}this.addChildrenMap("title",s),this.addChildrenMap("separator",l),this.addChildrenMap("innerSizer",mt),this.addChildrenMap("innerBackground",w),this.addChildrenMap("icon",S),this.addChildrenMap("iconMask",k),this.addChildrenMap("text",D),this.addChildrenMap("action",V),this.addChildrenMap("actionMask",G)};const gn=Phaser.Utils.Objects.GetValue,Pw=[sY,rY];class Cc extends xg{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexTitleLabel";var l=gn(s,"background",void 0);l&&this.addBackground(l);var w=gn(s,"title",void 0),S=gn(s,"text",void 0);if(w){var k=gn(s,"wrapTitle",!1),D=gn(s,"adjustTitleFontSize",!1);k?(k===!0&&(k="word"),wg(w,k),s.expandTitleWidth=!0,hc(w)):D&&(s.expandTextWidth=!0,s.expandTextHeight=!0,uc(w,{fitHeight:!0}))}if(S){var V=gn(s,"wrapText",!1),G=gn(s,"adjustTextFontSize",!1);V?(V===!0&&(V="word"),wg(S,V),s.expandTextWidth=!0,hc(S)):G&&(s.expandTextWidth=!0,s.expandTextHeight=!0,uc(S,{fitHeight:!0}))}var j=gn(s,"layoutMode",0),tt=Pw[j]||Pw[0];tt.call(this,s),this.addChildrenMap("background",s.background)}get title(){var t=this.childrenMap.title;return t?t.title:""}set title(t){var s=this.childrenMap.title;s&&s.setText(t)}setTitle(t){return this.title=t,this}resetDisplayContent(t){t===void 0?t={}:typeof t=="string"&&(t={text:t}),super.resetDisplayContent(t);var s=this.childrenMap.title;return s&&(t.title===void 0||(t.title?(this.show(s),this.setTitle(t.title)):this.hide(s))),this}}T.register("titleLabel",function(e){var t=new Cc(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.TitleLabel",Cc);const Xg=Phaser.Utils.Objects.GetValue;var Mw=function(e,t,s){var l=Xg(s,"innerBackground",ri),w=Xg(s,"separator",ri),S=Xg(s,"title",Ug),k,D;t.innerBackground!==null&&l&&(k=l(e,t.innerBackground)),t.separator!==null&&w&&(D=w(e,t.separator)),t=Tc(e,t,s),k?t.innerBackground=k:delete t.innerBackground,D?t.separator=D:delete t.separator,t.title!==null&&S?t.title=S(e,t.title):delete t.title;var V=t.background;return V&&(k?e.children.moveBelow(V,k):D&&e.children.moveBelow(V,D)),t};class _w extends Cc{constructor(t,s,l){s=Mw(t,s,l),super(t,s),this.type="rexSimpleTitleLabel"}setActiveState(t){return jg(this.getChildren(),"setActiveState",t),this}setHoverState(t){return jg(this.getChildren(),"setHoverState",t),this}setDisableState(t){return jg(this.getChildren(),"setDisableState",t),this}}var jg=function(e,t,s){for(var l=0,w=e.length;l<w;l++){var S=e[l];S&&S[t]&&S[t](s)}};T.register("simpleTitleLabel",function(e,t){var s=new _w(this.scene,e,t);return this.scene.add.existing(s),s}),K(window,"RexPlugins.UI.SimpleTitleLabel",_w);const oe=Phaser.Utils.Objects.GetValue,nY=Phaser.Utils.Objects.IsPlainObject;var aY=function(e,t){var s=oe(t,"background",void 0),l=oe(t,"icon",void 0),w=oe(t,"iconMask",void 0),S=oe(t,"nameText",void 0),k=oe(t,"valueText",void 0),D=oe(t,"bar",void 0),V=oe(t,"action",void 0),G=oe(t,"actionMask",void 0),j=oe(t,"barShape","line")==="line";if(nY(D)){var tt=j?ef:yu;D=new tt(e,D),e.add.existing(D),S&&e.children.moveBelow(D,S),k&&e.children.moveBelow(D,k)}var st=S||k||D;if(s&&this.addBackground(s),l){var rt=void 0;this.orientation===0?(st||V)&&(rt={right:oe(t,"space.icon",0),top:oe(t,"space.iconTop",0),bottom:oe(t,"space.iconBottom",0)}):(st||V)&&(rt={bottom:oe(t,"space.icon",0),left:oe(t,"space.iconLeft",0),right:oe(t,"space.iconRight",0)}),this.add(l,{proportion:0,padding:rt}),w&&(w=Is.call(this,l,l,1))}if(st){var ot=new Zt(e,{orientation:1}),ut;if(S||k){if(ut=new Zt(e,{orientation:0}),S){S.text===""&&S.setText(" "),S.setOrigin(0,S.originY);var rt={left:oe(t,"space.name",0)};ut.add(S,{padding:rt})}if(k){k.text===""&&k.setText(" "),k.setOrigin(1,k.originY),ut.addSpace();var rt={right:oe(t,"space.value",0)};ut.add(k,{padding:rt}),this.setValueTextFormatCallback(oe(t,"valueTextFormatCallback",oY),oe(t,"valueTextFormatCallbackScope",void 0))}ot.add(ut,{expand:!0})}if(D)if(j){var ct=ut?oe(t,"space.bar"):0;ct===void 0&&(ct=oe(t,"space.barTop",0));var rt={top:ct,bottom:oe(t,"space.barBottom",0),left:oe(t,"space.barLeft",0),right:oe(t,"space.barRight",0)};ot.add(D,{expand:!0,padding:rt})}else{var rt={top:oe(t,"space.barTop",0),bottom:oe(t,"space.barBottom",0),left:oe(t,"space.barLeft",0),right:oe(t,"space.barRight",0)};this.addBackground(D,rt)}var rt=void 0;V&&(rt={right:oe(t,"space.text",0)});var pt=oe(t,"align.text","bottom");this.add(ot,{proportion:1,align:pt,padding:rt})}if(V){var rt;this.orientation===0?rt={top:oe(t,"space.actionTop",0),bottom:oe(t,"space.actionBottom",0)}:rt={left:oe(t,"space.actionLeft",0),right:oe(t,"space.actionRight",0)},this.add(V,{proportion:0,padding:rt}),G&&(G=Is.call(this,V,V,1))}this.addChildrenMap("background",s),this.addChildrenMap("icon",l),this.addChildrenMap("iconMask",w),this.addChildrenMap("name",S),this.addChildrenMap("value",k),this.addChildrenMap("bar",D),this.addChildrenMap("action",V),this.addChildrenMap("actionMask",G)},oY=function(e,t,s){return e.toString()};const hY=Phaser.Math.Clamp;var lY={setValueTextFormatCallback(e,t){return this.valueTextFormatCallback=e,this.valueTextFormatCallbackScope=t,this},getFormatValueText(e,t,s){e===void 0&&(e=this.value),t===void 0&&(t=this.minValue),s===void 0&&(s=this.maxValue);var l;return this.valueTextFormatCallbackScope?l=this.valueTextFormatCallback(e,t,s):l=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,e,t,s),l},updateValueText(e,t,s){var l=this.childrenMap.value;return l&&this.valueTextFormatCallback&&(l.setText(this.getFormatValueText(e,t,s)),l.layout&&l.layout()),this},setValue(e,t,s){return t===void 0?t=this.minValue:this.minValue=t,s===void 0?s=this.maxValue:this.maxValue=s,e=hY(e,t,s),this.value=e,this.updateValueText(e,t,s),this.setBarValue(e,t,s),this},setEaseValueDuration(e){return this.easeValueDuration=e,this},easeValueTo(e,t,s){return t===void 0?t=this.minValue:this.minValue=t,s===void 0?s=this.maxValue:this.maxValue=s,this.easeValueTask===void 0&&(this.easeValueTask=new _s(this),this.easeValueTask.on("update",function(){this.setValue(this.value,this.minValue,this.maxValue)},this)),this.easeValueTask.restart({key:"value",to:e,duration:this.easeValueDuration}),this}};class Pc extends Zt{constructor(t,s){super(t,s),this.type="rexNameValueLabel",aY.call(this,t,s),this.setEaseValueDuration(1e3)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var s=this.childrenMap.name;s!==void 0&&s.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var s=this.childrenMap.value;s!==void 0&&s.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var s=this.childrenMap.bar;s!==void 0&&s.setValue(t)}setBarValue(t,s,l){var w=this.childrenMap.bar;return w===void 0?this:(w.setValue(t,s,l),this)}easeBarValueTo(t,s,l){var w=this.childrenMap.bar;return w===void 0?this:(w.easeValueTo(t,s,l),this)}setTexture(t,s){var l=this.childrenMap.icon;if(l!==void 0)return l.setTexture(t,s),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}postLayout(t,s,l){var w=this.childrenMap.iconMask;w&&(w.setPosition(),this.resetChildPositionState(w));var S=this.childrenMap.actionMask;return S&&(S.setPosition(),this.resetChildPositionState(S)),super.postLayout(t,s,l),this}resize(t,s){super.resize(t,s);var l=this.childrenMap.iconMask;l&&l.resize();var w=this.childrenMap.actionMask;return w&&w.resize(),this}}Object.assign(Pc.prototype,lY),T.register("nameValueLabel",function(e){var t=new Pc(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.NameValueLabel",Pc);class uY extends My{constructor(t){super(),this.setTable(Vt(t,"table")),this.setMaxLevel(Vt(t,"maxLevel"));var s=Vt(t,"exp",0),l=Vt(t,"level",void 0);l!==void 0&&!this.checkLevel(l,s)&&(console.error(`Level ${l} and Exp ${s} are mismatch`),l=void 0),this.resetExp(s,l)}setTable(t){return this.levelTable=t,this.isLevelMapFunction=Os(t),this}setMaxLevel(t){t===void 0&&(Array.isArray(this.levelTable)?t=this.levelTable.length-1:t=-1);var s;return t!==-1?s=this.getExp(t):s=-1,this.hasMaxLevel=t!==-1,this.maxLevel=t,this.maxExp=s,this}resetExp(t,s){return this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),s===void 0&&(s=this.getLevel(t)),this._exp=t,this._level=s,this._requiredExp=this.getRequiredExpToNextLevel(s,t),this}get exp(){return this._exp}set exp(t){if(this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),t<this._exp){this.resetExp(t);return}if(t!==this._exp){for(var s=this.getLevel(t,this._level),l=this._level,w=this._exp,S;;){var k=this.getExp(l),D=this.getExp(l+1);if(S=Math.min(D,t),this.emit("levelup",l,w,S,k,D),l===s&&S===t)break;l++,w=D}this.resetExp(t,s)}}get level(){return this._level}set level(t){this.hasMaxLevel&&t>this.maxLevel?this.exp=this.maxExp:this.exp=this.getExp(t)}get requiredExp(){return this._requiredExp}getExp(t){return t===void 0?this._exp:this.isLevelMapFunction?this.levelTable(t):(this.hasMaxLevel&&t>this.maxLevel&&(t=this.maxLevel),this.levelTable[t])}getLevel(t,s){if(t===void 0)return this._level;for(s===void 0&&(s=0);;){var l=this.getExp(s+1);if(l>t||(s++,this.hasMaxLevel&&l===this.maxExp))break}return s}getRequiredExpToNextLevel(t,s){return t===void 0&&(t=this.level),s===void 0&&(s=this.exp),this.getExp(t+1)-s}checkLevel(t,s){return s>=this.getExp(t)&&s<this.getExp(t+1)}gainExp(t,s,l){return s&&this.on("levelup",s,l),this.exp+=t,s&&this.off("levelup",s,l),this}setExp(t,s,l){return s&&this.on("levelup",s,l),this.exp=t,s&&this.off("levelup",s,l),this}setLevel(t,s,l){return s&&this.on("levelup",s,l),this.level=t,s&&this.off("levelup",s,l),this}}var Hg=function(e,t,s){var l=Vt(s,"reverse",!1),w;if(Es(e[0]))if(l)for(var S=e.length,k=S-1;k>=0;k--)w=Hg(e[k],t,s);else for(var k=0,S=e.length;k<S;k++)w=Hg(e[k],t,s);else w=cY(e,t,s);return w},cY=function(e,t,s){var l=Vt(s,"argsConvert",void 0),w=Vt(s,"argsConvertScope",void 0),S=e[0];if(vn=du(vn,e,1),l){l===!0&&(l=Cp,w=void 0);for(var k=0,D=vn.length;k<D;k++)w?vn[k]=l.call(w,vn[k],e):vn[k]=l(vn[k],e)}var V;typeof S=="string"?(V=t[S],V==null&&(V=Vt(t,S,null))):V=S;var G=V.apply(t,vn);return G},vn=[];const Bs=Phaser.Utils.Objects.GetValue;class kw extends Oe{constructor(t,s){super(t,s);var l=Bs(s,"clock",void 0);l||(l=new xy(t)),this.clock=l,this.clock.on("update",this.update,this),this.commands=[],this.resetFromJSON(s)}resetFromJSON(t){return this.clock.resetFromJSON(Bs(t,"clock",void 0)),this.state=Bs(t,"state",0),this.commands=Bs(t,"commands",[]),this.scope=Bs(t,"scope",void 0),this.setTimeUnit(Bs(t,"timeUnit",0)),this.setDtMode(Bs(t,"dtMode",0)),this.index=Bs(t,"index",0),this.nextTime=Bs(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,s,l){this.stop();var w=Bs(l,"timeUnit",void 0);w!==void 0&&this.setTimeUnit(w);var S=Bs(l,"dtMode",void 0);return S!==void 0&&this.setDtMode(S),t=t.filter(function(k){var D=k[0];return!isNaN(D)}).map(function(k){var D=k[0];return typeof D=="string"&&(k[0]=parseFloat(k[0])),k}),this.dtMode===0&&t.sort(function(k,D){var V=k[0],G=D[0];return V>G?1:V<G?-1:0}),du(this.commands,t),this.scope=s,this}clear(){return this.commands.length=0,this}append(t,s,...l){var w;return Array.isArray(s)?w=s:w=[s,...l],this.commands.push([t,w]),this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var s=this.commands;;){var l=s[this.index],w=l[1];if(Es(w)||(w=du(dY,l,1)),Hg(w,this.scope),this.emit("runcommand",w,this.scope),this.index>=s.length-1)return this.nextTime=0,this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var s=this.commands[this.index][0];return this.timeUnit===1&&(s=s*1e3),this.dtMode===1&&(s+=t),s}setDtMode(t){return typeof t=="string"&&(t=fY[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=pY[t]),this.timeUnit=t,this}}var dY=[];const pY={ms:0,s:1,sec:1},fY={abs:0,absolute:0,inc:1,increment:1};var gY=function(e,t,s,l,w){var S=(s-t)/(w-l)*this.totalEaseDuration,k=s===w?e+1:e;this.player.append(0,this.setEaseValueDuration,S).append(0,this.easeValueTo,s,l,w).append(0,this.emit,"levelup.start",e,t,s,this).append(S,n).append(0,this.emit,"levelup.end",k,t,s,this),this.player.isPlaying||this.player.start()},vY={setExpTable(e){return this.levelCounter.setTable(e),this},resetExp(e){return this.levelCounter.resetExp(e),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1)),this},getExp(e){return this.levelCounter.getExp(e)},getLevel(e,t){return this.levelCounter.getLevel(e,t)},getRequiredExpToNextLevel(e,t){return this.levelCounter.getRequiredExpToNextLevel(e,t)},gainExp(e){return this.levelCounter.gainExp(e),this},setExp(e){return this.levelCounter.setExp(e),this},setLevel(e){return this.levelCounter.setLevel(e),this}};const Ow=Phaser.Utils.Objects.GetValue;class $g extends Pc{constructor(t,s){super(t,s),this.type="rexExpBar",this.setTotalEaseDuration(Ow(s,"easeDuration",1e3)),this.levelCounter=new uY(Ow(s,"levelCounter")),this.player=new kw(this,{scope:this,dtMode:1}),this.levelCounter.on("levelup",gY,this),this.player.on("complete",function(){this.player.clear(),this.emit("levelup.complete",this.level,this)},this),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1))}destroy(t){!this.scene||this.ignoreDestroy||(this.levelCounter.destroy(),this.levelCounter=void 0,this.player.destroy(),this.player=void 0,super.destroy(t))}get exp(){return this.levelCounter.exp}set exp(t){this.levelCounter.exp=t}get level(){return this.levelCounter.level}set level(t){this.levelCounter.level=t}get requiredExp(){return this.levelCounter.requiredExp}setTotalEaseDuration(t){return this.totalEaseDuration=t,this}}Object.assign($g.prototype,vY),T.register("expBar",function(e){var t=new $g(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.ExpBar",$g);const Mc=Zt.prototype.add,Ew=Zt.prototype.addSpace;var qg=function(e){var t=!e.isRexSpace,s=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var l=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");l&&Ew.call(this),Mc.call(this,e,{proportion:s,expand:!0});var w=!this.buttonsExpand&&this.buttonsAlign==="center";w&&Ew.call(this),this.hasTailSpace=w}else Mc.call(this,e,{proportion:s,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var S=this.sizerChildren.length-1;Mc.call(this,e,{index:S,proportion:s,expand:!0})}else Mc.call(this,e,{proportion:s,expand:!0});return t&&this.buttonGroup.add(e),this},mY={addButton(e){if(Es(e))for(var t=e,s=0,l=t.length;s<l;s++)qg.call(this,t[s]);else qg.call(this,e);return this},addButtons(e){for(var t=0,s=e.length;t<s;t++)qg.call(this,e[t]);return this}};const yY=Zt.prototype.remove,xY=Zt.prototype.clear;var Kg=function(e,t){return this.getParentSizer(e)!==this?this:(this.buttonGroup.remove(e),yY.call(this,e,t),this)},bY={remove(e,t){if(Es(e))for(var s=e,l=0,w=s.length;l<w;l++)Kg.call(this,s[l],t);else Kg.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,xY.call(this,e),this},removeButton(s,t){var s=this.getButton(s);return s?(this.remove(s,t),this):this},clearButtons(e){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)Kg.call(this,t[s],e);return this}},wY=function(e,t,s){if(e){var l=this.setValueCallback,w=this.setValueCallbackScope;l&&(w?l.call(w,e,t,s):l(e,t,s)),this.fireEvent("button.statechange",e,t,s)}},SY=function(e){var t=this;e._selected=void 0,Object.defineProperty(e,"selected",{get:function(){return e._selected},set:function(s){if(e._selected!==s){var l=e._selected;e._selected=s,wY.call(t,e,s,l)}},enumerable:!0,configurable:!0}),e.selected=!1},TY={add(e){return this.buttons.push(e),e._click||(e._click=new Mr(e,this.clickConfig),e._click.on("click",function(t,s,l,w){this.fireEvent("button.click",s,l,w)},this).on("enable",function(t,s){this.fireEvent("button.enable",s)},this).on("disable",function(t,s){this.fireEvent("button.disable",s)},this).on("over",function(t,s,l,w){this.fireEvent("button.over",s,l,w)},this).on("out",function(t,s,l,w){this.fireEvent("button.out",s,l,w)},this).on("down",function(t,s,l,w){this.fireEvent("button.down",s,l,w)},this).on("up",function(t,s,l,w){this.fireEvent("button.up",s,l,w)},this),e.isRexContainerLite&&e.sendChildToBack(e)),this.buttonsType&&(e.name===void 0&&console.error(`${this.parent.constructor.name}: Option button miss value`),SY.call(this,e)),this},addMultiple(e){for(var t=0,s=e.length;t<s;t++)this.add(e[t]);return this}};const CY=Phaser.Utils.Array.Remove;var PY={remove(e){return this.buttonsType&&delete e.selected,CY(this.buttons,e),this},clear(){if(this.buttonsType)for(var e=this.buttons,t=0,s=e.length;t<s;t++)delete e[t].selected;return this.buttons.length=0,this}},MY=function(e,t,...s){if(this.buttons){var l;if(typeof t=="number"){if(l=t,t=this.buttons[l],!t)return}else if(l=this.buttons.indexOf(t),l===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(e,t,l,...s),this.groupName!==void 0?this.eventEmitter.emit(e,t,this.groupName,l,...s):this.eventEmitter.emit(e,t,l,...s)}};const Wh=Phaser.Utils.Objects.GetValue;var _Y={setButtonsType(e){e===void 0&&(e={});var t=Wh(e,"buttonsType",e.type);if(this.buttonsType=t,!this.buttonsType)return this;var s,l;switch(s=Wh(e,"setValueCallback",void 0),l=Wh(e,"setValueCallbackScope",void 0),s===void 0&&(s=Wh(e,"setButtonStateCallback",void 0),l=Wh(e,"setButtonStateCallbackScope",void 0)),this.setValueCallback=s,this.setValueCallbackScope=l,t){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType();break}return this},setRadioType(){var e=this.parent,t=this.buttons;e._value=void 0;var s=void 0;return Object.defineProperty(e,"value",{get:function(){return e._value},set:function(l){if(e._value!==l){e._value=l;for(var w=0,S=t.length;w<S;w++){var k=t[w];k.rexSizer.hidden||(s===void 0?k.name===l?k.selected=!0:k.selected=!1:s===w?k.selected=!0:k.selected=!1)}}},enumerable:!0,configurable:!0}),e.on("button.click",function(l){s=this.buttons.indexOf(l),e.value=l.name,s=void 0},this),this},setCheckboxesType(){var e=this.parent;return e.on("button.click",function(t){t.selected=!t.selected}),this},clearAllButtonsState(){for(var e=this.buttons,t=0,s=e.length;t<s;t++){var l=e[t];l.selected=!1}return this},getAllButtonsState(){for(var e={},t=this.buttons,s=0,l=t.length;s<l;s++){var w=t[s];w.rexSizer.hidden||(e[w.name]=w.selected)}return e},setSelectedButtonName(e){return this.parent.value=e,this},getSelectedButtonName(){return this.parent.value},setButtonState(e,t){t===void 0&&(t=!0);for(var s=this.buttons,l=0,w=s.length;l<w;l++){var S=s[l];if(!S.rexSizer.hidden&&S.name===e){S.selected=t;break}}return this},getButtonState(e){for(var t=this.buttons,s=0,l=t.length;s<l;s++){var w=t[s];if(!w.rexSizer.hidden&&w.name===e)return w.selected}}},kY=function(e,t){if(e)if(Es(e)){for(var s,l=0,w=e.length;l<w;l++)if(s=Aw(e[l],t),s)return s}else{var s;for(var S in e)if(s=Aw(e[S],t),s)return s}else return null},Aw=function(e,t){return e?e.hasOwnProperty("name")?e.name===t?e:null:GetElementByName(e,t):null},_c={getButton(e){var t=this.buttons,s,l=typeof e;switch(l){case"number":s=t[e];break;case"string":s=kY(t,e);break;default:s=e,t.indexOf(s)===-1&&(s=void 0);break}return s},getButtons(){return this.buttons},hasAnyButton(){return this.buttons.length>0},setButtonEnable(e,t){var s=this.buttons;if(e===void 0||typeof e=="boolean"){t=e;for(var l=0,w=s.length;l<w;l++)s[l]._click.setEnable(t)}else this.getButton(e)._click.setEnable(t);return this},toggleButtonEnable(e){var t=this.buttons;if(e===void 0||typeof e=="boolean")for(var s=0,l=t.length;s<l;s++)t[s]._click.toggleEnable();else this.getButton(e)._click.toggleEnable();return this},getButtonEnable(e){return e===void 0&&(e=0),this.getButton(e)._click.enable},emitButtonClick(e){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",e),this},emitButtonOver(e){for(var t=this.buttonGroup?this.buttonGroup:this,s=this.buttons,l=0,w=s.length;l<w;l++){var S=s[l];S._click.isOver&&(S._click.isOver=!1,t.fireEvent("button.out",S))}var S=this.getButton(e);return S&&(S._click.isOver=!0,t.fireEvent("button.over",S)),this},showButton(e){return hn(this.getButton(e)),this},hideButton(e){return ln(this.getButton(e)),this},isButtonShown(e){return Af(this.getButton(e)),this},forEachButtton(e,t){for(var s=this.buttons,l=0,w=s.length;l<w;l++)t?e.call(t,s[l],l,s):e(s[l],l,s);return this}};class kc{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var OY={fireEvent:MY};Object.assign(kc.prototype,TY,PY,_Y,_c,OY);var Qg={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(e){return this.buttonGroup.setSelectedButtonName(e),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(e,t){return this.buttonGroup.setButtonState(e,t),this},getButtonState(e){return this.buttonGroup.getButtonState(e)}};const sa=Phaser.Utils.Objects.GetValue;let ui=class extends Zt{constructor(e,t){t===void 0&&(t={});var s=t.space;typeof s=="number"&&(t.space={item:s}),super(e,t),this.type="rexButtons",this.buttonGroup=new kc({parent:this,eventEmitter:sa(t,"eventEmitter",this),groupName:sa(t,"groupName",void 0),clickConfig:sa(t,"click",void 0)}).setButtonsType(t);var l=sa(t,"background",void 0),w=sa(t,"buttons",void 0);this.buttonsExpand=sa(t,"expand",!1),this.buttonsAlign=sa(t,"align",void 0),l&&this.addBackground(l),w&&this.addButtons(w),this.addChildrenMap("background",l),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(e){!this.scene||this.ignoreDestroy||(super.destroy(e),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(e){this.buttonGroup.groupName=e}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(ui.prototype,mY,bY,_c,Qg),T.register("buttons",function(e){var t=new ui(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Buttons",ui);const EY=Fs.prototype.add;var AY={addButton(e,t,s){return EY.call(this,e,t,s,void 0,0,this.buttonsExpand),this.buttonGroup.add(e),this},addButtons(e,t){for(var s=0,l=e;s<l;s++)this.addButton(e[s],void 0,t);return this}};const RY=Fs.prototype.remove,DY=Fs.prototype.clear;var Jg=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),RY.call(this,s,t),this):this},IY={remove(e,t){if(Es(e))for(var s=e,l=0,w=s.length;l<w;l++)Jg.call(this,s[l],t);else Jg.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,DY.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)Jg.call(this,t[s],e);return this}};const or=Phaser.Utils.Objects.GetValue;class Oc extends Fs{constructor(t,s){s===void 0&&(s={});var l=or(s,"row",0),w=or(s,"column",s.col||0),S=or(s,"createCellContainerCallback"),k=or(s,"buttons",void 0),D=or(s,"expand",!0),V=D?1:0;if(S&&(s.createCellContainerCallback=void 0),k!==void 0){l=Math.max(l,k.length);for(var G=0,j=k.length;G<j;G++)w=Math.max(w,k[G].length)}s.row=l,s.column=w,s.columnProportions=V,s.rowProportions=V,super(t,s),this.type="rexGridButtons",this.buttonGroup=new kc({parent:this,eventEmitter:or(s,"eventEmitter",this),groupName:or(s,"groupName",void 0),clickConfig:or(s,"click",void 0)}).setButtonsType(s);var tt=or(s,"background",void 0);if(this.buttonsExpand=D,or(s,"space",void 0),tt&&this.addBackground(tt),k)for(var st,rt,ot=0,ut=k.length;ot<ut;ot++){st=k[ot];for(var ct=0,pt=st.length;ct<pt;ct++)rt=st[ct],rt&&this.addButton(rt,ct,ot)}else if(S)for(var mt=0;mt<l;mt++)for(var yt=0;yt<w;yt++){var rt=S(t,yt,mt);rt&&this.addButton(rt,yt,mt)}this.addChildrenMap("background",tt),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Oc.prototype,AY,IY,_c,Qg),T.register("gridButtons",function(e){var t=new Oc(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.GridButtons",Oc);const Rw=fn.prototype.add;var Ec=function(e){return Rw.call(this,e),this.buttonGroup.add(e),this},LY={addButton(e){if(Es(e))for(var t=e,s=0,l=t.length;s<l;s++)Ec.call(this,t[s]);else Ec.call(this,e);return this},addButtons(e){if(Es(e[0]))for(var t=e,s,l=0,w=t.length-1;l<=w;l++){s=t[l];for(var S=0,k=s.length;S<k;S++)Ec.call(this,s[S]);l>w&&Rw.addNewLine(this)}else for(var S=0,k=e.length;S<k;S++)Ec.call(this,e[S]);return this}};const FY=fn.prototype.remove,BY=fn.prototype.clear;var Zg=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),FY.call(this,s,t),this):this},NY={remove(e,t){if(Es(e))for(var s=e,l=0,w=s.length;l<w;l++)Zg.call(this,s[l],t);else Zg.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,BY.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)Zg.call(this,t[s],e);return this}};const ro=Phaser.Utils.Objects.GetValue;class mn extends fn{constructor(t,s){s===void 0&&(s={});var l=s.space;typeof l=="number"&&(s.space={item:l,line:l}),super(t,s),this.type="rexFixWidthButtons",this.buttonGroup=new kc({parent:this,eventEmitter:ro(s,"eventEmitter",this),groupName:ro(s,"groupName",void 0),clickConfig:ro(s,"click",void 0)}).setButtonsType(s);var w=ro(s,"background",void 0),S=ro(s,"buttons",void 0);this.buttonsAlign=ro(s,"align",void 0),w&&this.addBackground(w),S&&this.addButtons(S),this.addChildrenMap("background",w),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(mn.prototype,LY,NY,_c,Qg),T.register("fixWidthButtons",function(e){var t=new mn(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.FixWidthButtons",mn);var YY={setAccept(e){return this.childrenMap.fileChooser.setAccept(e),this},setMultiple(e){return this.childrenMap.fileChooser.setMultiple(e),this},loadFile(e,t,s,l,w){return this.childrenMap.fileChooser.loadFile(e,t,s,l,w),this},loadFilePromise(e,t,s,l){return this.childrenMap.fileChooser.loadFilePromise(e,t,s,l)}};const Dw=Phaser.Utils.Objects.GetValue;class tv extends Lr{constructor(t,s){super(t,s),this.type="rexFileSelectorButton";var l=new Ih(t);t.add.existing(l),this.addBackground(l),this.addChildrenMap("fileChooser",l),this.setAccept(Dw(s,"accept","")),this.setMultiple(Dw(s,"multiple",!1)),l.on("change",function(w){var S=w.files;S.length!==0&&(S=Array.from(S),this.emit("select",S,this))},this)}get files(){return this.childrenMap.fileChooser.files}}Object.assign(tv.prototype,YY),T.register("fileSelectorButton",function(e){var t=new tv(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.FileSelectorButton",tv);var VY={getChoice(e){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(e)},getAction(e){return this.childrenMap.actionsSizer.getButton(e)},getToolbar(e){return this.childrenMap.toolbarSizer.getButton(e)},getLeftToolbar(e){return this.childrenMap.leftToolbarSizer.getButton(e)},setChoiceEnable(e,t){var s=this.childrenMap.choicesSizer;return s&&s.setButtonEnable(e,t),this},setActionEnable(e,t){return this.childrenMap.actionsSizer.setButtonEnable(e,t),this},setToolbarEnable(e,t){return this.childrenMap.toolbarSizer.setButtonEnable(e,t),this},setLeftToolbarEnable(e,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(e,t),this},toggleChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(e),this},toggleActionEnable(e){return this.childrenMap.actionsSizer.toggleButtonEnable(e),this},toggleToolbarEnable(e){return this.childrenMap.toolbarSizer.toggleButtonEnable(e),this},toggleLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(e),this},getChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(e):!1},getActionEnable(e){return this.childrenMap.actionsSizer.getButtonEnable(e)},getToolbarEnable(e){return this.childrenMap.toolbarSizer.getButtonEnable(e)},getLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.getButtonEnable(e)},emitChoiceClick(e){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(e),this},emitActionClick(e){return this.childrenMap.actionsSizer.emitButtonClick(e),this},emitToolbarClick(e){return this.childrenMap.toolbarSizer.emitButtonClick(e),this},emitLeftToolbarClick(e){return this.childrenMap.leftToolbarSizer.emitButtonClick(e),this},showChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.showButton(e),this},showAction(e){return this.childrenMap.actionsSizer.showButton(e),this},showToolbar(e){return this.childrenMap.toolbarSizer.showButton(e),this},showLeftToolbar(e){return this.childrenMap.leftToolbarSizer.showButton(e),this},hideChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(e),this},hideAction(e){return this.childrenMap.actionsSizer.hideButton(e),this},hideToolbar(e){return this.childrenMap.toolbarSizer.hideButton(e),this},hideLeftToolbar(e){return this.childrenMap.leftToolbarSizer.hideButton(e),this},addChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.addButton(e),this},addAction(e){return this.childrenMap.actionsSizer.addButton(e),this},addToolbar(e){return this.childrenMap.toolbarSizer.addButton(e),this},addLeftToolbar(e){return this.childrenMap.leftToolbarSizer.addButton(e),this},removeChoice(e,t){var s=this.childrenMap.choicesSizer;return s&&s.removeButton(e,t),this},removeAction(e,t){return this.childrenMap.actionsSizer.removeButton(e,t),this},removeToolbar(e,t){return this.childrenMap.toolbarSizer.removeButton(e,t),this},removeLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.removeButton(e,t),this},clearChoices(e){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(e),this},clearActions(e){return this.childrenMap.actionsSizer.clearButtons(e),this},clearToolbar(e){return this.childrenMap.toolbarSizer.clearButtons(e),this},clearLeftToolbar(e){return this.childrenMap.leftToolbarSizer.clearButtons(e),this},forEachChoice(e,t){var s=this.childrenMap.choicesSizer;return s&&s.forEachButtton(e,t),this},forEachAction(e,t){return this.childrenMap.actionsSizer.forEachButtton(e,t),this},forEachToolbar(e,t){return this.childrenMap.toolbarSizer.forEachButtton(e,t),this},forEachLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.forEachButtton(e,t),this},setAllButtonsEnable(e){return e===void 0&&(e=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(e),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(e),this.childrenMap.actionsSizer&&this.setActionEnable(e),this.childrenMap.choicesSizer&&this.setChoiceEnable(e),this},getChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e?e.getAllButtonsState():{}},getChoicesButtonState(e){var t=this.childrenMap.choicesSizer;return e===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(e):!1},setChoicesButtonState(e,t){var s=this.childrenMap.choicesSizer;return s&&s.setButtonState(e,t),this},clearChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e&&e.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var e=this.childrenMap.choicesSizer;return e?e.getSelectedButtonName():""},setChoicesSelectedButtonName(e){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(e),this},hasAnyChoice(){var e=this.childrenMap.choicesSizer;return e?e.hasAnyButton():!1},hasAnyAction(){var e=this.childrenMap.actionsSizer;return e?e.hasAnyButton():!1},hasAnyToolbar(){var e=this.childrenMap.toolbarSizer;return e?e.hasAnyButton():!1},hasAnyLeftToolbar(){var e=this.childrenMap.leftToolbarSizer;return e?e.hasAnyButton():!1}},zY={onCreateModalBehavior(e){e.on("button.click",function(t,s,l,w,S){var k=!1;switch(s){case"actions":k=!0;break;case"choices":e.hasAnyAction()||(k=!0);break}if(k){var D={index:l,text:t.text,button:t,dialog:e};switch(e.buttonsType){case"radio":D.value=e.getChoicesSelectedButtonName();break;case"checkboxes":D.value=e.getChoicesButtonStates();break;default:D.value=void 0}e.modalClose(D)}})},modal(e,t){return e&&e.defaultBehavior===!1?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,Nu.modal.call(this,e,t),this}},Iw={};Object.assign(Iw,VY,zY);const Lt=Phaser.Utils.Objects.GetValue;class Xh extends Zt{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexDialog",this.eventEmitter=Lt(s,"eventEmitter",this);var l=Lt(s,"background",void 0),w=Lt(s,"title",void 0),S=Lt(s,"toolbar",void 0),k=Lt(s,"toolbarBackground",void 0),D=Lt(s,"leftToolbar",void 0),V=Lt(s,"leftToolbarBackground",void 0),G=Lt(s,"content",void 0),j=Lt(s,"description",void 0),tt,st=Lt(s,"choices",void 0),rt=Lt(s,"choicesBackground",void 0),ot,ut=Lt(s,"actions",void 0),ct=Lt(s,"actionsBackground",void 0),pt=Lt(s,"click",void 0);l&&this.addBackground(l);var mt;S&&(mt=new ui(t,{groupName:"toolbar",background:k,buttons:S,orientation:0,space:{item:Lt(s,"space.toolbarItem",0)},click:pt,eventEmitter:this.eventEmitter}),t.add.existing(mt));var yt;if(D&&(yt=new ui(t,{groupName:"leftToolbar",background:V,buttons:D,orientation:0,space:{item:Lt(s,"space.leftToolbarItem",0)},click:pt,eventEmitter:this.eventEmitter}),t.add.existing(yt)),w||S||D){var St=!!w&&Lt(s,"expand.title",!0),Ct=Lt(s,"align.title","center"),_t=w&&!St&&Ct==="center"||!w&&(S||D),Rt=!_t,Ft;Rt?Ft=new Zt(t,{orientation:0}):Ft=new fs(t),t.add.existing(Ft);var It=Rt?!0:{height:!0};if(yt&&Ft.add(yt,{align:"left",expand:It}),w){Rt&&!St&&Ct==="right"&&Ft.addSpace();var Bt={left:Lt(s,"space.titleLeft",0),right:Lt(s,"space.titleRight",0)},Wt=St?1:0;Ft.add(w,{align:Ct,proportion:Wt,expand:It,padding:Bt}),Rt&&!St&&Ct==="left"&&Ft.addSpace()}mt&&(Rt&&!w&&Ft.addSpace(),Ft.add(mt,{align:"right",expand:It}));var Bt;(G||j||st||ut)&&(Bt={bottom:Lt(s,"space.title",0),top:Lt(s,"space.titleTop",0)});var Wt=Lt(s,"proportion.title",0);this.add(Ft,{padding:Bt,proportion:Wt,expand:!0})}if(G){var se=Lt(s,"align.content","center"),ne=Lt(s,"space.content",0),Bt={left:Lt(s,"space.contentLeft",0),right:Lt(s,"space.contentRight",0),bottom:j||st||ut?ne:0},Wt=Lt(s,"proportion.content",0),Yt=Lt(s,"expand.content",!0);this.add(G,{align:se,padding:Bt,proportion:Wt,expand:Yt})}if(j){var se=Lt(s,"align.description","center"),xe=Lt(s,"space.description",0),Bt={left:Lt(s,"space.descriptionLeft",0),right:Lt(s,"space.descriptionRight",0),bottom:st||ut?xe:0},Wt=Lt(s,"proportion.description",0),Yt=Lt(s,"expand.description",!0);this.add(j,{align:se,padding:Bt,proportion:Wt,expand:Yt})}if(st){var Pe=Lt(s,"choicesType","").split("-"),Ie=jh(Pe,"wrap")?mn:jh(Pe,"grid")?Oc:ui,ni=jh(Pe,"radio")?"radio":jh(Pe,"checkboxes")?"checkboxes":void 0,Ze={left:Lt(s,"space.choicesBackgroundLeft",0),right:Lt(s,"space.choicesBackgroundRight",0),top:Lt(s,"space.choicesBackgroundTop",0),bottom:Lt(s,"space.choicesBackgroundBottom",0)},Ii=Lt(s,"space.choice",0);Ie===ui?Ze.item=Ii:Ie===mn?(Ze.item=Ii,Ze.line=Lt(s,"space.choiceLine",Ii)):(Ze.column=Lt(s,"space.choiceColumn",Ii),Ze.row=Lt(s,"space.choiceRow",Ii));var ws={width:Lt(s,"choicesWidth",void 0),height:Lt(s,"choicesHeight",void 0),groupName:"choices",buttonsType:ni,background:rt,buttons:st,space:Ze,click:pt,eventEmitter:this.eventEmitter,setValueCallback:Lt(s,"choicesSetValueCallback",void 0),setValueCallbackScope:Lt(s,"choicesSetValueCallbackScope",void 0)};Ie===ui&&(ws.orientation=jh(Pe,"x")?0:1),tt=new Ie(t,ws),t.add.existing(tt);var Ss=Lt(s,"space.choices",0),Bt={left:Lt(s,"space.choicesLeft",0),right:Lt(s,"space.choicesRight",0),bottom:ut?Ss:0},se=Lt(s,"align.choices","center"),Wt=Lt(s,"proportion.choices",0),Yt=Lt(s,"expand.choices",!0);this.add(tt,{align:se,padding:Bt,proportion:Wt,expand:Yt}),this.buttonsType=ni}if(ut){ot=new ui(t,{groupName:"actions",background:ct,buttons:ut,orientation:0,space:{item:Lt(s,"space.action",0)},expand:Lt(s,"expand.actions",!1),align:Lt(s,"align.actions","center"),click:pt,eventEmitter:this.eventEmitter}),t.add.existing(ot);var Bt={left:Lt(s,"space.actionsLeft",0),right:Lt(s,"space.actionsRight",0),bottom:Lt(s,"space.actionsBottom",0)},Wt=Lt(s,"proportion.action",0);this.add(ot,{align:"center",padding:Bt,proportion:Wt,expand:!0})}Hh(this,"click"),Hh(this,"over"),Hh(this,"out"),Hh(this,"enable"),Hh(this,"disable"),this.addChildrenMap("background",l),this.addChildrenMap("title",w),this.addChildrenMap("toolbar",S),this.addChildrenMap("leftToolbar",D),this.addChildrenMap("content",G),this.addChildrenMap("description",j),this.addChildrenMap("choices",tt?tt.buttons:void 0),this.addChildrenMap("actions",ot?ot.buttons:void 0),this.addChildrenMap("choicesSizer",tt),this.addChildrenMap("actionsSizer",ot),this.addChildrenMap("toolbarSizer",mt),this.addChildrenMap("leftToolbarSizer",yt)}}var jh=function(e,t){return e.indexOf(t)!==-1},Lw={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},Hh=function(e,t){e.on(`button.${t}`,function(s,l,w,S,k){Lw.hasOwnProperty(l)&&e.emit(`${Lw[l]}.${t}`,s,w,S,k)})};Object.assign(Xh.prototype,Iw),T.register("dialog",function(e){var t=new Xh(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Dialog",Xh);var ci=function(e,t,s){var l=new Uh(e,t,s);return e.add.existing(l),l},GY=function(e){return e===void 0&&(e={}),UY.call(this,e),WY.call(this,e),XY.call(this,e),jY.call(this,e),this},UY=function(e){var t=this.childrenMap.title;e=e.title,e===null?t.hide():(t.show(),t.resetDisplayContent(e))},WY=function(e){var t=this.childrenMap.content;if(e=e.content,e===null)t.hide();else if(t.show(),t.resetDisplayContent)t.resetDisplayContent(e);else{var s=e||"";t.setText(s)}},XY=function(e){var t=this.childrenMap.actions;if(t){var s=e.buttons;if(s){for(var l=this.scene,w=this.defaultActionConfig,S=this.defaultActionButtonCreator,k=0,D=s.length;k<D;k++){var V=s[k],G=t[k];G||(G=ci(l,w,S),this.addAction(G)),G.show().resetDisplayContent(V)}this.buttonMode=s.length;for(var k=s.length,D=t.length;k<D;k++)t[k].hide()}else{var j=t[0];j&&(e.buttonA===null?j.hide():(j.show(),j.resetDisplayContent(e.buttonA)));var tt=t[1];tt&&(e.buttonB===null?tt.hide():(tt.show(),tt.resetDisplayContent(e.buttonB)))}}},jY=function(e){var t=this.childrenMap.choices;if(t){var s=e.choices;s||(s=[]);for(var l=this.scene,w=this.defaultChoiceConfig,S=this.defaultActionButtonCreator,k=0,D=s.length;k<D;k++){var V=s[k];typeof V=="string"&&(V={text:V});var G=t[k];G||(G=ci(l,w,S),this.addChoice(G)),G.show().resetDisplayContent(V);var j;V.hasOwnProperty("value")?j=V.value:j=V.text,G.setName(j)}for(var k=s.length,D=t.length;k<D;k++)t[k].hide()}};const HY=Phaser.Utils.Objects.Merge;var $Y=function(e,t){Os(e)&&(t=e,e=void 0),e===void 0&&(e={}),e=HY(e,this.modalStyle);var s;this.buttonMode===0?this.hasAnyChoice()?s=!1:s=!0:s=!1,e.hasOwnProperty("anyTouchClose")||(e.anyTouchClose=s),e.hasOwnProperty("manualClose")||(e.manualClose=!s);var l=this,w=function(S){var k=S.index;k===l.confirmButtonIndex?l.emit("confirm",S):k===l.cancelButtonIndex&&l.emit("cancel",S),t&&t(S)};return Nu.modal.call(this,e,w),this},qY={setConfirmButtonIndex(e){return this.confirmButtonIndex=e,this},setCancelButtonIndex(e){return this.cancelButtonIndex=e,this}},Fw={resetDisplayContent:GY,modal:$Y};Object.assign(Fw,qY);var KY=function(e){e.setHoverState&&e.setHoverState(!0)},QY=function(e){e.setHoverState&&e.setHoverState(!1)},JY=function(e,t,s,l){e.setActiveState&&e.setActiveState(l)},ZY=function(e){e.setDisableState&&e.setDisableState(!1)},tV=function(e){e.setDisableState&&e.setDisableState(!0)},Bw=function(){this.on("button.over",KY).on("button.out",QY).on("button.enable",ZY).on("button.disable",tV).on("button.statechange",JY)};const eV=Phaser.Utils.Objects.GetValue;var iV=function(e,t,s){var l=eV(t,"$type");l===void 0&&t&&(t.hasOwnProperty("slider")||t.hasOwnProperty("scroller"))&&(l="textarea");var w;switch(l){case"textarea":w=new Tw(e,t,s);break;default:w=new ci(e,t,s);break}return e.add.existing(w),w};const ev=Phaser.Utils.Objects.GetValue;class Ac extends Xh{constructor(t,s,l){s=s?B(s):{},l===void 0&&(l={});var w=ev(l,"background",ri);s.background=w(t,s.background),s.title=ci(t,s.title,l.title),s.content=iV(t,s.content,l.content),s.content instanceof Gh&&Tr(s,"height")&&!Tr(s,"proportion.content")&&K(s,"proportion.content",1);var S=s.button,k=s.buttonA||S,D=s.buttonB||S,V=s.buttonMode;V===void 0&&(V=k&&D?2:k?1:0);var G=l.button,j=l.buttonA||G,tt=l.buttonB||G;switch(V){case 2:s.actions=[ci(t,k,j),ci(t,D,tt)];break;case 1:s.actions=[ci(t,k,j)];break;case 0:break;default:s.actions=[];break}var st=s.choice;st&&(s.choices=[]),super(t,s),this.type="rexConfirmDialog",this.buttonMode=V,this.defaultActionConfig=S,this.defaultActionButtonCreator=G,this.defaultChoiceConfig=st,this.defaultChoiceCreator=l.choice;var rt=this.childrenMap.actions;this.addChildrenMap("buttonA",rt?rt[0]:null),this.addChildrenMap("buttonB",rt?rt[1]:null),Bw.call(this),this.setConfirmButtonIndex(ev(s,"confirmButtonIndex",0)),this.setCancelButtonIndex(ev(s,"cancelButtonIndex",1)),this.modalStyle=s.modal||{}}}Object.assign(Ac.prototype,Fw),T.register("confirmDialog",function(e,t){var s=new Ac(this.scene,e,t);return this.scene.add.existing(s),s}),K(window,"RexPlugins.UI.ConfirmDialog",Ac);const Nw=Phaser.Utils.Objects.GetValue;var Yw=function(e,t){var s=t.dialog,l=!s;if(l){var w=t.style;w.buttonMode=2,s=new Ac(e,w,t.creators),e.add.existing(s)}s.setConfirmButtonIndex(Nw(t,"confirmButtonIndex",0)).setCancelButtonIndex(Nw(t,"cancelButtonIndex",1)).resetDisplayContent(t.content).layout(),l&&t.onCreateDialog&&t.onCreateDialog(s);var S=t.modal;S&&!S.hasOwnProperty("destroy")&&(S.destroy=l);var k=t.confirm,D=t.cancel,V=t.confirmScope,G=t.cancelScope;k&&s.once("confirm",k,V),D&&s.once("cancel",D,G);var j=function(tt){s.off("confirm",k,V),s.off("cancel",D,G)};return s.modal(S,j),s};class Vw extends Lr{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexConfirmActionButton",this.setConfirmDialogEnable(),this.confirmActionConfig=Ms(s.confirmDialog||{}),s.confirm&&this.setConfirmCallback(s.confirm,s.confirmScope),s.cancel&&this.setCancelCallback(s.cancel,s.cancelScope),this.onClickCallback=function(){if(this.confirmDialogEnable){if(this.confirmDialog)return;this.confirmDialog=Yw(t,this.confirmActionConfig),this.confirmDialog.once("destroy",function(){this.confirmDialog=void 0},this)}else this.runConfirmCallback()},this.onClick(this.onClickCallback,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.confirmDialog&&this.confirmDialog.destroy(),super.destroy(t),this.confirmActionConfig=void 0,this.onClickCallback=void 0,this.confirmDialog=void 0)}setConfirmCallback(t,s){return this.confirmActionConfig.confirm=t,this.confirmActionConfig.confirmScope=s,this}setCancelCallback(t,s){return this.confirmActionConfig.cancel=t,this.confirmActionConfig.cancelScope=s,this}setConfirmDialogContent(t){return this.confirmActionConfig.content=t,this}setConfitmDialogStyle(t){return this.confirmActionConfig.style=t,this}setConfitmDialogModalConfig(t){return this.confirmActionConfig.modal=t,this}setConfirmDialogEnable(t){return t===void 0&&(t=!0),this.confirmDialogEnable=t,this}runConfirmCallback(){var t=this.confirmActionConfig.confirm,s=this.confirmActionConfig.confirmScope;return t&&t.call(s),this}}T.register("confirmActionButton",function(e){var t=new Vw(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.ConfirmActionButton",Vw);var sV=function(e){return e===void 0&&(e={}),rV.call(this,e),nV.call(this,e),aV.call(this,e),this},rV=function(e){var t=this.childrenMap.title;e.title===null?this.hide(t):(this.show(t),t.resetDisplayContent(e.title))},nV=function(e){var t=this.childrenMap.firstNameTitle;if(e.firstNameTitle===null)this.hide(t);else{this.show(t);var s=e.firstNameTitle||"";t.resetDisplayContent(s)}var l=this.childrenMap.firstNameInput;if(e.firstName===null)this.hide(l);else{this.show(l);var w=e.firstName||"";l.setText(w)}var S=this.childrenMap.lastNameTitle;if(e.lastNameTitle===null)this.hide(S);else{this.show(S);var k=e.lastNameTitle||"";S.resetDisplayContent(k)}var D=this.childrenMap.lastNameInput;if(e.lastName===null)this.hide(D);else{this.show(D);var V=e.lastName||"";D.setText(V)}},aV=function(e){var t=this.childrenMap.actions[0];e.button===null?this.hide(t):(this.show(t),t.resetDisplayContent(e.button))};const oV=Phaser.Utils.Objects.Merge;var hV=function(e,t){Os(e)&&(t=e,e=void 0),e===void 0&&(e={}),e=oV(e,this.modalStyle),e.anyTouchClose=!1,e.manualClose=!1;var s=this,l=function(w){w.firstName=s.firstName,w.lastName=s.lastName,s.emit("confirm",w),t&&t(w)};return Nu.modal.call(this,e,l),this},lV={resetDisplayContent:sV,modal:hV},yn=function(e,t,s){s===void 0&&(s=!0),s?t=t?B(t):{}:t||(t={});var l=new oh(e,t);return e.add.existing(l),l};const ms=Phaser.Utils.Objects.GetValue;var uV=function(e,t,s){var l=Wn(ms(t,"layoutMode",0)),w=l===0,S=new Zt(e,{orientation:l,space:{item:ms(t,"space.firstName",0)}});e.add.existing(S);var k=new Zt(e,{orientation:"x"});e.add.existing(k);var D=ms(t,"firstNameTitle",t.nameTitle),V=ci(e,D,s.firstNameTitle||s.nameTitle);k.add(V,{expand:!0,proportion:ms(t,"proportion.firstNameTitle",0),padding:{right:ms(t,"space.firstNameTitle",0)}});var G=t.nameInput||{},j=ms(t,"firstNameInput",G),tt=yn(e,j,s.firstNameInput||s.nameInput),st=!j.hasOwnProperty("width");k.add(tt,{expand:!0,proportion:st?1:0});var rt=new Zt(e,{orientation:"x"});e.add.existing(rt);var ot=ms(t,"lastNameTitle",t.nameTitle),ut=ci(e,ot,s.lastNameTitle||s.nameTitle);rt.add(ut,{expand:!0,proportion:ms(t,"proportion.lastNameTitle",0),padding:{right:ms(t,"space.lastNameTitle",0)}});var ct=ms(t,"firstNameInput",G),pt=yn(e,ct,s.lastNameInput||s.nameInput),mt=!ct.hasOwnProperty("width");if(rt.add(pt,{expand:!0,proportion:mt?1:0}),w){var yt=st?1:0,St=ms(t,"proportion.firstName",yt);S.add(k,{expand:!0,proportion:St});var Ct=mt?1:0,_t=ms(t,"proportion.lastName",Ct);S.add(rt,{expand:!0,proportion:_t})}else S.add(k,{expand:st,proportion:0}),S.add(rt,{expand:mt,proportion:0});return S.addChildrenMap("firstNameTitle",V),S.addChildrenMap("firstNameInput",tt),S.addChildrenMap("lastNameTitle",ut),S.addChildrenMap("lastNameInput",pt),S};const cV=Phaser.Utils.Objects.GetValue;class iv extends Xh{constructor(t,s,l){s===void 0&&(s={}),l===void 0&&(l={}),s.orientation="y";var w=s.space;w&&(w.hasOwnProperty("names")&&(w.content=w.names),w.hasOwnProperty("namesLeft")&&(w.contentLeft=w.namesLeft),w.hasOwnProperty("namesRight")&&(w.contentRight=w.namesRight));var S=cV(l,"background",ri);s.background=S(t,s.background),s.title=ci(t,s.title,l.title),s.content=uV(t,s,l),s.actions=[ci(t,s.button,l.button)],super(t,s),this.type="rexNameInputDialog";var k=s.content.childrenMap;this.addChildrenMap("firstNameTitle",k.firstNameTitle),this.addChildrenMap("firstNameInput",k.firstNameInput),this.addChildrenMap("lastNameTitle",k.lastNameTitle),this.addChildrenMap("lastNameInput",k.lastNameInput),this.addChildrenMap("button",s.actions[0]),Bw.call(this),this.modalStyle=s.modal||{}}get firstName(){return this.childrenMap.firstNameInput.text}set firstName(t){this.childrenMap.firstNameInput.setText(t)}setFirstName(t){return this.firstName=t,this}get lastName(){return this.childrenMap.lastNameInput.text}set lastName(t){this.childrenMap.lastNameInput.setText(t)}setLastName(t){return this.lastName=t,this}}Object.assign(iv.prototype,lV),T.register("nameInputDialog",function(e,t){var s=new iv(this.scene,e,t);return this.scene.add.existing(s),s}),K(window,"RexPlugins.UI.NameInputDialog",iv);var ra=function(e,t){if(e){var s=Qi(e);s&&s.remove(e,t)}};const Rc=Phaser.Utils.Objects.GetValue;var $h=function(e,t,s){var l=Rc(e,`proportion.${t}`,s.proportion),w=Rc(e,`align.${t}`,"center"),S=Rc(e,`space.${t}`,void 0);if(typeof S=="number"&&s.paddingKey){var k=S;S={},S[s.paddingKey]=k}var D=Rc(e,`expand.${t}`,!0);return{proportion:l,align:w,padding:S,expand:D}},Dc=function(e){return $h(e,"header",{proportion:0,paddingKey:"bottom"})},Ic=function(e){return $h(e,"leftSide",{proportion:0,paddingKey:"right"})},Lc=function(e){return $h(e,"content",{proportion:1})},Fc=function(e){return $h(e,"rightSide",{proportion:0,paddingKey:"left"})},Bc=function(e){return $h(e,"footer",{proportion:0,paddingKey:"top"})},Fr=function(e){return{proportion:1,align:"center",padding:0,expand:!0}},Br=function(e,t){var s=new Zt(e,{orientation:t});return e.add.existing(s),s},dV=function(e){var t=this.scene,s=e.header;s&&this.add(s,Dc(e));var l=Br(t,0);this.add(l,Fr());var w=e.leftSide;w&&l.add(w,Ic(e));var S=e.content;S&&l.add(S,Lc(e));var k=e.rightSide;k&&l.add(k,Fc(e));var D=e.footer;D&&this.add(D,Bc(e))},pV=function(e){var t=this.scene,s=e.header;s&&this.add(s,Dc(e));var l=Br(t,0);this.add(l,Fr());var w=e.leftSide;w&&l.add(w,Ic(e));var S=Br(t,1);l.add(S,Fr());var k=Br(t,0);S.add(k,Fr());var D=e.content;D&&k.add(D,Lc(e));var V=e.rightSide;V&&k.add(V,Fc(e));var G=e.footer;G&&S.add(G,Bc(e))},fV=function(e){var t=this.scene,s=e.header;s&&this.add(s,Dc(e));var l=Br(t,0);this.add(l,Fr());var w=Br(t,1);l.add(w,Fr());var S=Br(t,0);w.add(S,Fr());var k=e.leftSide;k&&S.add(k,Ic(e));var D=e.content;D&&S.add(D,Lc(e));var V=e.footer;V&&w.add(V,Bc(e));var G=e.rightSide;G&&l.add(G,Fc(e))},gV=function(e){var t=this.scene,s=e.header;s&&this.add(s,Dc(e));var l=Br(t,0);this.add(l,Fr());var w=e.leftSide;w&&l.add(w,Ic(e));var S=Br(t,1);l.add(S,Fr());var k=e.content;k&&S.add(k,Lc(e));var D=e.footer;D&&S.add(D,Bc(e));var V=e.rightSide;V&&l.add(V,Fc(e))};const vV=Phaser.Utils.Objects.GetValue,zw=[dV,pV,fV,gV];var mV=function(e){e===void 0&&(e={});var t=e.background,s=e.header,l=e.leftSide,w=e.content,S=e.rightSide,k=e.footer;ra(t),ra(s),ra(l),ra(w),ra(S),ra(k),this.clear(!0),t&&this.addBackground(t);var D=vV(e,"layoutMode",0);typeof D=="string"&&(D=yV[D.toUpperCase()]);var V=zw[D]||zw[0];return V.call(this,e),this.addChildrenMap("background",t),this.addChildrenMap("header",s),this.addChildrenMap("leftSide",l),this.addChildrenMap("content",w),this.addChildrenMap("rightSide",S),this.addChildrenMap("footer",k),this};const yV={FFF:0,LFF:1,FFR:2,LFR:3};class sv extends Zt{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexHolyGrail",this.build(s)}}var xV={build:mV};Object.assign(sv.prototype,xV),T.register("holyGrail",function(e){var t=new sv(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.HolyGrail",sv);var bV={getButtonsSizer(e){return this.childrenMap[`${e}ButtonsSizer`]},getButton(e,t){var s=this.getButtonsSizer(e);return s?s.getButton(t):void 0},setButtonEnable(e,t,s){return this.getButtonsSizer(e).setButtonEnable(t,s),this},setLeftButtonEnable(e,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(e,t),this},setRightButtonEnable(e,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(e,t),this},setTopButtonEnable(e,t){return this.childrenMap.topButtonsSizer.setButtonEnable(e,t),this},setBottomButtonEnable(e,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(e,t),this},toggleButtonEnable(e,t){return this.getButtonsSizer(e).toggleButtonEnable(t),this},toggleLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(e),this},toggleRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(e),this},toggleTopButtonEnable(e){return this.childrenMap.topButtonsSizer.toggleButtonEnable(e),this},toggleBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(e),this},getButtonEnable(e,t){return this.getButtonsSizer(e).getButtonEnable(t)},getLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.getButtonEnable(e)},getRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.getButtonEnable(e)},getTopButtonEnable(e){return this.childrenMap.topButtonsSizer.getButtonEnable(e)},getBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.getButtonEnable(e)},emitButtonClick(e,t){var s=this.getButtonsSizer(e);return s?(s.emitButtonClick(t),this):this},emitLeftButtonClick(e){return this.childrenMap.leftButtonsSizer.emitButtonClick(e),this},emitRightButtonClick(e){return this.childrenMap.rightButtonsSizer.emitButtonClick(e),this},emitTopButtonClick(e){return this.childrenMap.topButtonsSizer.emitButtonClick(e),this},emitBottomButtonClick(e){return this.childrenMap.bottomButtonsSizer.emitButtonClick(e),this},getLeftButton(e){return this.childrenMap.leftButtonsSizer.getButton(e)},getRightButton(e){return this.childrenMap.rightButtonsSizer.getButton(e)},getTopButton(e){return this.childrenMap.topButtonsSizer.getButton(e)},getBottomButton(e){return this.childrenMap.bottomButtonsSizer.getButton(e)},showButton(e,t){return hn(this.getButton(e,t)),this},showLeftButton(e){return hn(this.getLeftButton(e)),this},showRightButton(e){return hn(this.getRightButton(e)),this},showTopButton(e){return hn(this.getTopButton(e)),this},showBottomButton(e){return hn(this.getBottomButton(e)),this},hideButton(e,t){return ln(this.getButton(e,t)),this},hideLeftButton(e){return ln(this.getLeftButton(e)),this},hideRightButton(e){return ln(this.getRightButton(e)),this},hideTopButton(e){return ln(this.getTopButton(e)),this},hideBottomButton(e){return ln(this.getBottomButton(e)),this},addButton(e,t){return this.getButtonsSizer(e).addButton(t),this},addLeftButton(e){return this.addButton("left",e),this},addRightButton(e){return this.addButton("right",e),this},addTopButton(e){return this.addButton("top",e),this},removeButton(e,t,s){return this.getButtonsSizer(e).removeButton(t,s),this},removeLeftButton(e,t){return this.removeButton("left",e,t),this},removeRightButton(e,t){return this.removeButton("right",e,t),this},removeTopButton(e,t){return this.removeButton("top",e,t),this},removeBottomButton(e,t){return this.removeButton("bottom",e,t),this},clearButtons(e,t){return this.getButtonsSizer(e).clearButtons(t),this},clearLeftButtons(e){return this.clearButtons("left",e),this},clearRightButtons(e){return this.clearButtons("right",e),this},clearTopButtons(e){return this.clearButtons("top",e),this},clearBottomButtonss(e){return this.clearButtons("bottom",e),this},forEachButton(e,t,s){return this.getButtonsSizer(e).forEachButtton(t,s),this},forEachLeftButton(e,t){return this.childrenMap.leftButtonsSizer.forEachButtton(e,t),this},forEachRightButton(e,t){return this.childrenMap.rightButtonsSizer.forEachButtton(e,t),this},forEachTopButton(e,t){return this.childrenMap.topButtonsSizer.forEachButtton(e,t),this},forEachBottomButton(e,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(e,t),this}};const ce=Phaser.Utils.Objects.GetValue;class rv extends Fs{constructor(t,s){s===void 0&&(s={}),s.column=3,s.row=3,s.columnProportions=[0,0,0],s.rowProportions=[0,0,0];var l=ce(s,"expand.panel",!1);l&&(s.columnProportions[1]=1,s.rowProportions[1]=1),super(t,s),this.type="rexTabs",this.eventEmitter=ce(s,"eventEmitter",this);var w=ce(s,"background",void 0),S=ce(s,"panel",void 0),k=ce(s,"leftButtons",void 0),D=ce(s,"leftButtonsBackground",void 0),V,G=ce(s,"rightButtons",void 0),j=ce(s,"rightButtonsBackground",void 0),tt,st=ce(s,"topButtons",void 0),rt=ce(s,"topButtonsBackground",void 0),ot,ut=ce(s,"bottomButtons",void 0),ct=ce(s,"bottomButtonsBackground",void 0),pt,mt=ce(s,"click",void 0);if(w&&this.addBackground(w),S&&this.add(S,{column:1,row:1,expand:l}),k){var yt=ce(s,"space.leftButtonsOffset",0),St=ce(s,"space.leftButton",0),Ct=ce(s,"expand.leftButtons",!1),_t=ce(s,"align.leftButtons","top");V=new ui(t,{groupName:"left",background:D,buttons:k,orientation:"y",space:{item:St},expand:Ct,click:mt,eventEmitter:this.eventEmitter}),this.add(V,{column:0,row:1,align:_t,padding:{top:yt},expand:Ct})}if(G){var Rt=ce(s,"space.rightButtonsOffset",0),Ft=ce(s,"space.rightButton",0),It=ce(s,"expand.rightButtons",!1),Bt=ce(s,"align.rightButtons","top");tt=new ui(t,{groupName:"right",background:j,buttons:G,orientation:"y",space:{item:Ft},expand:It,click:mt,eventEmitter:this.eventEmitter}),this.add(tt,{column:2,row:1,align:Bt,padding:{top:Rt},expand:It})}if(st){var Wt=ce(s,"space.topButtonsOffset",0),se=ce(s,"space.topButton",0),ne=ce(s,"expand.topButtons",!1),Yt=ce(s,"align.topButtons","left");ot=new ui(t,{groupName:"top",background:rt,buttons:st,orientation:"x",space:{item:se},expand:ne,align:ce(s,"align.topButtons",void 0),click:mt,eventEmitter:this.eventEmitter}),this.add(ot,{column:1,row:0,align:Yt,padding:{left:Wt},expand:ne})}if(ut){var xe=ce(s,"space.bottomButtonsOffset",0),Pe=ce(s,"space.bottomButton",0),Ie=ce(s,"expand.bottomButtons",!1),ni=ce(s,"align.bottomButtons","left");pt=new ui(t,{groupName:"bottom",background:ct,buttons:ut,orientation:"x",space:{item:Pe},expand:Ie,align:ce(s,"align.bottomButtons",void 0),click:mt,eventEmitter:this.eventEmitter}),this.add(pt,{column:1,row:2,align:ni,padding:{left:xe},expand:Ie})}this.addChildrenMap("background",w),this.addChildrenMap("panel",S),this.addChildrenMap("leftButtons",k),this.addChildrenMap("rightButtons",G),this.addChildrenMap("topButtons",st),this.addChildrenMap("bottomButtons",ut),this.addChildrenMap("leftButtonsSizer",V),this.addChildrenMap("rightButtonsSizer",tt),this.addChildrenMap("topButtonsSizer",ot),this.addChildrenMap("bottomButtonsSizer",pt)}}Object.assign(rv.prototype,bV),T.register("tabs",function(e){var t=new rv(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Tabs",rv),T.register("slider",function(e){var t=new so(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Slider",so);class Gw{constructor(t,s){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,s){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,s),this}setCellContainerAlign(t){return typeof t=="string"&&(t=Xa[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var s=this.parent;this._deltaHeight===0&&t!==0?s.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&s.nonZeroDeltaHeightCount--;var l=this._deltaHeight!==t;if(this._deltaHeight=t,l){s.resetTotalRowsHeight();var w=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(w,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(Gw.prototype,os);const Uw=Phaser.Utils.Objects.GetValue,wV=Phaser.Utils.Array.SpliceOne;class SV{constructor(t,s){this.parent=t,this.cells=[],this.cellPool=new bt,this.resetFromJSON(s)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var s=t.cellHeight;s===void 0&&(s=60);var l=t.cellWidth;return l===void 0&&(l=60),this.setDefaultCellHeight(s),this.setDefaultCellWidth(l),this.initCells(Uw(t,"cellsCount",0)),this.setColumnCount(Uw(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var s=this.cells;s.length=t;for(var l=0;l<t;l++)s[l]=null;return this}insertNewCells(t,s){var l=this.cells;if(t===l.length){var w=t+s;l.legth=w;for(var S=t;S<w;S++)l[S]=null}else{var k=[];k.length=s;for(var S=0;S<s;S++)k[S]=null;this.cells.splice(t,0,...k)}return this.resetTotalRowsHeight(),this}removeCells(t,s){for(var l=t+s,w=t;w<l;w++)this.freeCell(w);return l===this.cells.length?this.cells.length=t:(s===1?wV(this.cells,t):this.cells.splice(t,s),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){this.colCount=t,this.resetTotalRowsHeight();var s=this.parent;if(s.expandCellSize){var l=s.scrollMode===0?s.width:s.height,w=l/t;this.setDefaultCellWidth(w)}return this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,s){if(s===void 0&&(s=0),t===0)return 0;if(this.defaultCellHeightMode){var l=t/this.defaultCellHeight;switch(s){case 1:l=Math.ceil(l);break;default:l=Math.floor(l);break}return l}for(var w=this.rowCount,S=t,k,D,l=0;;)if(D=this.getRowHeight(l),S-=D,k=l>=0&&l<w,S>0&&k)l+=1;else{if(S===0)return s===2&&(l+=1),l;if(s===1){var V=l;l+=1,k=l>=0&&l<w,k||(l=V)}return l}}widthToColIndex(t,s){if(t===0)return 0;var l=t/this.defaultCellWidth;return s?l=Math.ceil(l):l=Math.floor(l),l}colRowToCellIndex(t,s){return t>=this.colCount?null:s*this.colCount+t}rowIndexToHeight(t,s){if(this.defaultCellHeightMode)return(s-t+1)*this.defaultCellHeight;for(var l,w=0,S=t;S<=s;S++)l=this.getRowHeight(S),w+=l;return w}colIndexToWidth(t,s){return(s-t+1)*this.defaultCellWidth}getRowHeight(t){var s=this.colCount;if(s<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var l=0,w,S=0;S<s;S++)w=this.getCellHeight(this.colRowToCellIndex(S,t)),l<w&&(l=w);return l}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var s;if(this.defaultCellHeightMode)s=this.defaultCellHeight;else{var l=this.getCell(t,!1),w=l?l.deltaHeight:0;s=this.defaultCellHeight+w}return s}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,s){if(!this.isValidCellIdx(t))return null;if(s===void 0&&(s=!0),this.cells[t]===null&&s){var l=this.newCell(t);this.cells[t]=l}return this.cells[t]}newCell(t){var s=this.cellPool.pop();return s===null?s=new Gw(this):s.setParent(this),s.index=t,s}buildCellIndex(t){t===void 0&&(t=0);for(var s=this.cells,l,w=t,S=s.length;w<S;w++)l=s[w],l&&(l.index=w);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var TV=function(e){var t=this.table,s=this.topTableOY,l=this.bottomTableOY,w=e>s,S=e<l;if(this.clampTableOXY){var k=t.rowCount,D=t.heightToRowIndex(this.instHeight,1);k<D?e=0:w?e=s:S&&(e=l)}return this._tableOY!==e&&(this._tableOY=e),w&&(this.execeedTopState||this.emit("execeedtop",this,e,s)),this.execeedTopState=w,S&&(this.execeedBottomState||this.emit("execeedbottom",this,e,l)),this.execeedBottomState=S,this},CV=function(e){var t=this.table,s=this.leftTableOX,l=this.rightTableOX,w=e>this.leftTableOX,S=e<this.rightTableOX;if(this.clampTableOXY){var k=t.colCount,D=t.widthToColIndex(this.instWidth,!0);k<D?e=0:w?e=s:S&&(e=l)}return this._tableOX!==e&&(this._tableOX=e),w&&(this.execeedLeftState||this.emit("execeedleft",this,e,s)),this.execeedLeftState=w,S&&(this.execeedRightState||this.emit("execeedright",this,e,l)),this.execeedRightState=S,this},nv=function(e){return e.hasOwnProperty("geometryMask")?e.geometryMask:e.bitmapMask};const PV=Phaser.Geom.Intersects.RectangleToRectangle,MV=Phaser.Geom.Rectangle.Overlaps;var _V=function({parent:e,mask:t,children:s,onVisible:l,onInvisible:w,scope:S}){if(t){s===void 0&&(s=e.getAllChildren());for(var k=!!l||!!w,D=e.getBounds(),V=nv(t),G,j,tt,st,rt=0,ot=s.length;rt<ot;rt++)if(G=s[rt],G!==V&&kV(G)){if(st=G.visible,G.getBounds)switch(j=G.getBounds(j),tt=OV(D,j),tt){case 4:EV(e,G);break;case 0:PV(D,j)||MV(D,j)?av(e,G,t):AV(e,G);break;default:av(e,G,t);break}else av(e,G,t);if(k&&G.visible!==st){var ut=G.visible?l:w;ut&&(S?ut.call(S,G,e):ut(G,e))}}}},kV=function(e){if(!e.displayList)return!1;for(;;){var t=e.rexContainer;if(t)if(t.visible){var s=t.parent;if(s){e=s;continue}else return!0}else return!1;else return e.visible}},OV=function(e,t){var s=t.top,l=t.bottom,w=t.left,S=t.right,k=0;return k+=e.contains(w,s)?1:0,k+=e.contains(w,l)?1:0,k+=e.contains(S,s)?1:0,k+=e.contains(S,l)?1:0,k},EV=function(e,t,s){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!0))},av=function(e,t,s){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.setMask&&t.setMask(s),e.setChildMaskVisible(t,!0))},AV=function(e,t,s){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!1),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!1))};const no=Phaser.Utils.Objects.GetValue,RV={update:0,everyTick:1};var Ww={setupChildrenMask(e){return e===!1?this:(this.setMaskUpdateMode(no(e,"updateMode",0)),this.enableChildrenMask(no(e,"padding",0)),this.setMaskLayer(no(e,"layer",void 0)),this.onMaskGameObjectVisible=no(e,"onVisible"),this.onMaskGameObjectInvisible=no(e,"onInvisible"),this.maskGameObjectCallbackScope=no(e,"scope"),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this.onMaskGameObjectVisible=null,this.onMaskGameObjectInvisible=null,this.maskGameObjectCallbackScope=null,this):this},setMaskUpdateMode(e){return typeof e=="string"&&(e=RV[e]),this.maskUpdateMode=e,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(e){var t=Is.call(this,null,this,0,e);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(e){return e===void 0&&(e=!0),this.maskChildrenFlag=e,this},setMaskLayer(e){return this.maskLayer=e,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):_V({parent:this,mask:this.childrenMask,onVisible:this.onMaskGameObjectVisible,onInvisible:this.onMaskGameObjectInvisible,scope:this.maskGameObjectCallbackScope}),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var e=nv(this.childrenMask);return e.setPosition().resize(),this.resetChildPositionState(e),this}},DV=function(){if(this.cellsCount!==0){var e=this.scaleX,t=this.scaleY,s=e===1&&t===1;s||this.setScale(1);var l=this.table,w=this.tableOYOffset,S=this.tableOY+w,k=this.tableOX;this.startRowIndex=Math.max(l.heightToRowIndex(-S,2),0);for(var D=this.startRowIndex,V=Math.max(l.widthToColIndex(-k),0),G=V,j=l.colRowToCellIndex(G,D),tt=this.bottomBound,st=this.rightBound,rt=l.cellsCount-1,ot=l.colCount-1,ut=this.getCellTLX(G),ct=ut,pt=this.getCellTLY(D)+w,mt=pt;mt<tt&&j<=rt;){if(this.table.isValidCellIdx(j)){var yt=l.getCell(j,!0);this.visibleCells.set(yt),this.preVisibleCells.contains(yt)||this.showCell(yt);var St,Ct;if(this.scrollMode===0?(St=ct,Ct=mt):(St=mt,Ct=ct),yt.cellContainerAlign==null)yt.setXY(St,Ct);else{var _t=yt.getContainer();xh(_t,St,Ct,yt.width,yt.height,yt.cellContainerAlign),yt.setXY(_t.x,_t.y)}}ct<st&&G<ot?(ct+=l.getColWidth(G),G+=1):(ct=ut,mt+=l.getRowHeight(D),G=V,D+=1),j=l.colRowToCellIndex(G,D)}s||this.setScale(e,t)}},Xw=function(e){var t=null,s=e.getContainer();if(s?(t=s,e.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",e,t,this),this.cellContainersPool){var s=e.getContainer();s?t===null?this.cellContainersPool.add(s):t!==s&&(this.cellContainersPool.add(s),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},IV=function(e){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,s=this.tableOX+this.table.colIndexToWidth(0,e-1)+t;return s},LV=function(e){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,s=this.tableOY+this.table.rowIndexToHeight(0,e-1)+t;return s},FV=function(){var e=this.preVisibleCells,t=this.visibleCells;e.iterate(function(s){t.contains(s)||this.hideCell(s)},this)},jw=function(e){if(this.emit("cellinvisible",e),this.cellContainersPool){var t=e.popContainer();t&&(t.setScale(1).setAlpha(1),this.cellContainersPool.killAndHide(t))}e.destroyContainer()},BV=function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),e&&(Hw.call(this),this.hideCells()),Hw.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),t&&(this.layoutChildrenMask(),this.maskChildren()),this},Hw=function(){var e=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=e,this.visibleCells.clear()},NV=function(e){var t=this.table.getCell(e,!1);return t&&this.visibleCells.contains(t)},$w=function(e,t){t-=this.y+this.topLeftY,e-=this.x+this.topLeftX;var s=this.tableOY-(this.scrollMode===0?t:e),l=this.tableOX-(this.scrollMode===0?e:t),w=this.table,S=w.heightToRowIndex(-s,0),k=w.widthToColIndex(-l),D=w.colRowToCellIndex(k,S);return D===null||!this.isCellVisible(D)?null:D},YV=function(e,t){var s=$w.call(this,e,t);if(s!==null)return this.getCellContainer(s)},VV=function(e,t){return this.visibleCells.each(e,t),this},zV=function(e,t){return this.visibleCells.iterate(e,t),this},GV=function(e,t){return this.table.cells.slice().forEach(e,t),this},UV=function(e,t){return this.table.cells.forEach(e,t),this},WV=function(e){var t=this.cellsCount;return t===e?this:(t>e?this.removeCells(e,t-e):this.insertNewCells(t,e-t),this)};const XV=Phaser.Math.Clamp;var jV=function(e,t){return typeof e=="object"&&(e=e.index),t===void 0&&(t=1),t<=0?this:(e=XV(e,0,this.cellsCount),this.table.insertNewCells(e,t),this)},HV=function(e,t){if(typeof e=="object"&&(e=e.index),t===void 0&&(t=1),e<0&&(t+=e,e=0),t<=0)return this;if(e>this.cellsCount)return this;for(var s,l=e,w=e+t;l<w;l++)s=this.getCell(l,!1),s&&(this.visibleCells.contains(s)&&(jw.call(this,s),this.visibleCells.delete(s)),this.preVisibleCells.delete(s));return this.table.removeCells(e,t),this},$V=function(e){return this.table.colCount===e?this:(this.table.setColumnCount(e),this)},qV=function(e,t){return this.setCellsCount(e*t),this.table.setColumnCount(e),this},KV=function(e){var t=this.table.getCell(e,!1);return!t||!t.container?this:(Xw.call(this,t),this)},qw={setTableOY:TV,setTableOX:CV,showCells:DV,showCell:Xw,getCellTLX:IV,getCellTLY:LV,hideCells:FV,hideCell:jw,updateTable:BV,isCellVisible:NV,pointToCellIndex:$w,pointToCellContainer:YV,eachVisibleCell:VV,iterateVisibleCell:zV,eachCell:GV,iterateCell:UV,setCellsCount:WV,insertNewCells:jV,removeCells:HV,setColumnCount:$V,setGridSize:qV,updateVisibleCell:KV};Object.assign(qw,Ww);const QV=Phaser.GameObjects.Group,Kw=Phaser.Structs.Set,ys=Phaser.Utils.Objects.GetValue;let Qw=class extends Ji{constructor(e,t,s,l,w,S){S===void 0&&(S={}),super(e,t,s,l,w),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new Kw,this.preVisibleCells=new Kw,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var k=ys(S,"reuseCellContainer",!1);k&&(this.cellContainersPool=new QV(e));var D=ys(S,"cellVisibleCallback",null);if(D!==null){var V=ys(S,"cellVisibleCallbackScope",void 0);this.on("cellvisible",D,V)}if(D=ys(S,"cellInvisibleCallback",null),D!==null){var V=ys(S,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",D,V)}ys(S,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(ys(S,"mask",void 0)),this.setScrollMode(ys(S,"scrollMode",0)),this.setClampMode(ys(S,"clampTableOXY",!0)),this.setStartFromBottomEnable(ys(S,"startFromBottom",!1));var G,j,tt,st=this.scrollMode===0;if(st?(G=S.cellWidth,j=S.cellHeight,tt=S.columns):(G=S.cellHeight,j=S.cellWidth,tt=ys(S,"rows",S.columns)),this.fixedCellSize=ys(S,"fixedCellSize",!1),this.expandCellSize=!this.fixedCellSize&&G===void 0,tt||(tt=1),this.fixedCellSize)tt=Math.max(Math.floor(this.instWidth/G),1);else if(this.expandCellSize){var l=st?this.width:this.height;G=l/tt}S.cellWidth=G,S.cellHeight=j,S.columns=tt,this.table=new SV(this,S),this.updateTable()}destroy(e){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.table.destroy(e),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(e))}setScrollMode(e){return typeof e=="string"&&(e=JV[e.toLowerCase()]),this.scrollMode=e,this}setClampMode(e){return e===void 0&&(e=!0),this.clampTableOXY=e,this}setStartFromBottomEnable(e){return e===void 0&&(e=!0),this.startFromBottomEnable=e,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(e){this.setTableOY(e).updateTable()}set tableOX(e){this.setTableOX(e).updateTable()}setTableOXY(e,t){return this.setTableOY(t).setTableOX(e),this}addTableOY(e){return this.setTableOY(this.tableOY+e),this}addTableOX(e){return this.setTableOX(this.tableOX+e),this}addTableOXY(e,t){return this.addTableOY(t).addTableOX(e),this}setTableOYByPercentage(e){return this.setTableOY(-this.tableVisibleHeight*e),this}getTableOYPercentage(){var e=this.tableVisibleHeight;return e===0?0:this.tableOY/-e}setTableOXByPercentage(e){return this.setTableOX(-this.tableVisibleWidth*e),this}getTableOXPercentage(){var e=this.tableVisibleWidth;return e===0?0:this.tableOX/-e}set t(e){this.setTableOYByPercentage(e).updateTable()}get t(){return this.getTableOYPercentage()}set s(e){this.setTableOXByPercentage(e).updateTable()}get s(){return this.getTableOXPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}scrollToRow(e){this.scrollToBottom();var t=this.table.rowIndexToHeight(0,e-1);return this.setTableOY(-t).updateTable(),this}scrollToNextRow(e){return e===void 0&&(e=1),this.scrollToRow(this.startRowIndex+e),this}getCell(e){return this.table.getCell(e,!0)}getCellContainer(e){var t=this.table.getCell(e,!1),s;return t&&(s=t.getContainer()),s}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(e,t){var s;return typeof e=="number"?s=this.table.getCell(e,!0):s=e,s.height=t,this}setCellWidth(e,t){var s;return typeof e=="number"?s=this.table.getCell(e,!0):s=e,s.width=t,this}resetAllCellsSize(e,t){if(this.scrollMode===1){var s=e;e=t,t=s}this.table.setDefaultCellHeight(t).setDefaultCellWidth(e);for(var l=this.table.cells,w=0,S=l.length;w<S;w++){var k=l[w];k&&(k.deltaHeight=0)}if(this.fixedCellSize){var D=Math.floor(this.instWidth/e);this.table.setColumnCount(D)}return this.updateTable(!0,!0),this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get tableOYOffset(){if(this.startFromBottomEnable){var e=this.tableHeight-this.instHeight;if(e<0)return-e}return 0}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var e=this.tableHeight-this.instHeight;return e<0&&(e=0),e}get tableVisibleWidth(){var e=this.tableWidth-this.instWidth;return e<0&&(e=0),e}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(e,t){if(this.width===e&&this.height===t)return this;if(super.resize(e,t),this.fixedCellSize){var s=Math.floor(this.instWidth/this.table.defaultCellWidth);this.table.setColumnCount(s)}else this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount);return this.updateTable(!0,!0),this}};Object.assign(Qw.prototype,qw);const JV={v:0,vertical:0,h:1,horizontal:1};var ZV=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.tableOY},set:function(t){e.tableOY=t}}),Object.defineProperty(e,"childOX",{configurable:!0,get:function(){return e.tableOX},set:function(t){e.tableOX=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTableOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTableOY}}),Object.defineProperty(e,"leftChildOX",{get:function(){return e.leftTableOX}}),Object.defineProperty(e,"rightChildOX",{get:function(){return e.rightTableOX}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.instHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.tableHeight}}),Object.defineProperty(e,"childVisibleWidth",{get:function(){return e.instWidth}}),Object.defineProperty(e,"childWidth",{get:function(){return e.tableWidth}})},tz=function(e){e.on("cellvisible",function(t,k,l){var w=this.createCellContainerCallback,S=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var k;S?k=w.call(S,t,k,l):k=w(t,k,l),k&&(t.cellContainerAlign==null&&k.setOrigin&&k.setOrigin(0),k.isRexSizer&&k.layout()),t.item=void 0,t.items=void 0,t.setContainer(k)},this)},hr=function(e,t,s,l,w,S,k){var D;if(w===void 0)D=l;else{var V=S.camera,G=l+V.scrollX*(s.scrollFactorX-1),j=w+V.scrollY*(s.scrollFactorY-1);D=s.pointToCellIndex(G,j)}if(D!=null){var tt=s.getCellContainer(D);tt&&e.emit(t,tt,D,S,k)}},ez=function(e,t){e.on("pointerdown",function(s,l,w,S){hr(this.eventEmitter,"cell.down",e,s.worldX,s.worldY,s,S)},this).on("pointerup",function(s,l,w,S){hr(this.eventEmitter,"cell.up",e,s.worldX,s.worldY,s,S)},this)},iz=function(e,t){e.on("pointermove",Jw,this).on("pointerover",Jw,this).on("pointerout",sz,this)},Jw=function(e,t,s,l){var w=this.childrenMap.child,S=e.camera,k=e.worldX+S.scrollX*(w.scrollFactorX-1),D=e.worldY+S.scrollY*(w.scrollFactorY-1),V=w.pointToCellIndex(k,D);if(V!==w.input.lastOverCellIndex){var G=w.input.lastOverCellIndex;w.input.lastOverCellIndex=V,hr(this.eventEmitter,"cell.out",w,G,void 0,e,l),hr(this.eventEmitter,"cell.over",w,V,void 0,e,l)}},sz=function(e,t){var s=this.childrenMap.child,l=s.input.lastOverCellIndex;s.input.lastOverCellIndex=void 0,hr(this.eventEmitter,"cell.out",s,l,void 0,e,t)};const rz=Phaser.Utils.Objects.GetValue;var nz=function(e,t){var s=rz(t,"click",void 0);s!==!1&&(s===void 0&&(s={}),s.threshold=10,e._click=new Mr(e,s),e._click.on("click",function(l,w,S,k){hr(this.eventEmitter,"cell.click",w,S.worldX,S.worldY,S,k)},this))};const az=Phaser.Utils.Objects.GetValue;var oz=function(e,t){var s=az(t,"tap",void 0);s!==!1&&(e._tap=new zu(e,s),e._tap.on("tap",function(l,w,S){var k=`cell.${l.tapsCount}tap`;hr(this.eventEmitter,k,l.gameObject,l.worldX,l.worldY,S)},this))};const hz=Phaser.Utils.Objects.GetValue;var lz=function(e,t){var s=hz(t,"press",void 0);s!==!1&&(e._press=new Gu(e,s),e._press.on("pressstart",function(l,w,S){hr(this.eventEmitter,"cell.pressstart",e,l.worldX,l.worldY,S)},this).on("pressend",function(l,w,S){hr(this.eventEmitter,"cell.pressend",e,l.worldX,l.worldY,S)},this))};const uz=Phaser.Utils.Objects.GetValue;var cz=function(e,t){var s=uz(t,"swipe",void 0);s!==!1&&(s===void 0&&(s={}),s.dir="4dir",e._swipe=new kh(e,s),e._swipe.on("swipe",function(l,w,S){var k=l.left?"left":l.right?"right":l.up?"up":"down";hr(this.eventEmitter,`cell.swipe${k}`,e,l.worldX,l.worldY,S)},this))},dz=function(e,t){e.setInteractive(),ez.call(this,e,t),iz.call(this,e,t),nz.call(this,e,t),oz.call(this,e,t),lz.call(this,e,t),cz.call(this,e,t)},pz=function(e,t){e===void 0?this.items=[]:this.items=e,t===void 0&&(t=!0);var s=this.childrenMap.child;return s.setCellsCount(this.items.length),t&&(s.updateTable(!0),this.resizeController()),this},fz={scrollToRow(e){var t=this.childrenMap.child;return t.scrollToRow(e),this},scrollToNextRow(e){var t=this.childrenMap.child;return t.scrollToNextRow(e),this}};const Ns=Phaser.Utils.Objects.GetValue;class ov extends zh{constructor(t,s){s===void 0&&(s={});var l=Bg(s),w=Ns(s,"table",void 0);w===void 0&&(w={}),w.scrollMode=l===2?0:l,w.clampTableOXY=Ns(s,"clampChildOY",!1);var S=Ns(w,"width",void 0),k=Ns(w,"height",void 0),D=new Qw(t,0,0,S,k,w);t.add.existing(D);var V,G;w.scrollMode===0?(V=S===void 0,G=k===void 0):(V=k===void 0,G=S===void 0),ZV(D),D._minWidth=S===void 0?0:void 0,D._minHeight=k===void 0?0:void 0,s.type="rexGridTable",s.child={gameObject:D,expandWidth:V,expandHeight:G};var j=Ns(s,"space",void 0);j&&(j.child=Ns(j,"table",0)),super(t,s),this.addChildrenMap("table",D),this.addChildrenMap("tableLayer",D.maskLayer),this.eventEmitter=Ns(s,"eventEmitter",this);var tt=Ns(s,"createCellContainerCallback",n),st=Ns(s,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(tt,st),tz.call(this,D),this.resizeControllerFlag=!1;var rt=l===0?"cellheightchange":"cellwidthchange";D.on(rt,function(){this.resizeControllerFlag=!0},this),Ns(w,"interactive",!0)&&dz.call(this,D,w),this.setItems(Ns(s,"items",[]),!1),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,s){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=s,this}refresh(){return this.setItems(this.items),this}getCell(t){var s=this.childrenMap.child;return s.getCell(t)}getCellContainer(t){var s=this.childrenMap.child;return s.getCellContainer(t)}updateVisibleCell(t){var s=this.childrenMap.child;return s.updateVisibleCell(t)}resetAllCellsSize(t,s){var l=this.childrenMap.child;return l.resetAllCellsSize(t,s),this}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){var t=this.childrenMap.child;return t.startRowIndex}}var gz={setItems:pz};Object.assign(ov.prototype,fz,gz),T.register("gridTable",function(e){var t=new ov(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.GridTable",ov);var hv=function(e,t){return e.sameOrientation?e.orientation=t.orientation:e.orientation=t.orientation===0?1:0,e},vz=function(e,t){e.popUp(hv(e.root.easeIn,e))},mz=function(e,t){e.scaleDown(hv(e.root.easeOut,e))},yz={setTransitInCallback(e){return e===void 0&&(e=vz),this.transitInCallback=e,this},setTransitOutCallback(e){return e===void 0&&(e=mz),this.transitOutCallback=e,this}},xz=function(e,t,s,l,w){var S=Da(e),k=S.time.delayedCall(t,function(){S.sys.events.once("postupdate",function(){s.call(l,w)})});return k},bz={delayCall(e,t,s){return this.timer=xz(this,e,t,s),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}},wz=function(e,t){var l=this.childrenMap.subMenu;if(l&&l.parentButton===e)return this;this.collapseSubMenu();var s;this.root.toggleOrientation?s=this.orientation===0?1:0:s=this.orientation;var l=new this.constructor(this.scene,{items:t,orientation:s,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:e});return this.pin(l),this.childrenMap.subMenu=l,this.root.emit("expand",l,e,this),this},Sz=function(){var e=this.root;e.emit("collapse",this,this.parentButton,e);var t=e.easeOut.duration;return e.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},Tz=function(){var e=this.childrenMap.subMenu;return e===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(e),e.collapse(),this)},Zw={expandSubMenu:wz,collapse:Sz,collapseSubMenu:Tz};Object.assign(Zw,yz,bz);var Cz=function(e,t,s,l){var w;return s&&(t.scene=e,l?w=s.call(l,t):w=s(t),t.scene=void 0),w},Pz=function(e,t,s,l){var w,S=[],k;if(t&&s)for(var D=0,V=t.length;D<V;D++)w=t[D],w.scene=e,l?k=s.call(l,w,D,t):k=s(w,D,t),w.scene=void 0,S.push(k);return S},Mz=function(e){e.on(e.root.expandEventName,function(t,s){if(!this._isPassedEvent){var l=this.root.childrenKey,w=this.items[s][l];w&&this.expandSubMenu(t,w)}},e).on("button.click",function(t,s,l,w){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,s,l,w),this.root._isPassedEvent=!1)},e).on("button.over",function(t,s,l,w){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,s,l,w),this.root._isPassedEvent=!1)},e).on("button.out",function(t,s,l,w){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,s,l,w),this.root._isPassedEvent=!1)},e)},tS=function(e,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=Wn(t.orientation)===e.orientation:t.sameOrientation=!0,t.destroy=!1,t},_z=function(){var e=this.root,t=e.easeIn.duration;e.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const Di=Phaser.Utils.Objects.GetValue;class lv extends ui{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1);var l=s._rootMenu,w=s._parentMenu,S=s._parentButton,k=Di(s,"popup",!0),D=Di(s,"items",void 0),V=Di(s,"createBackgroundCallback",void 0),G=Di(s,"createBackgroundCallbackScope",void 0);s.background=Cz(t,D,V,G);var j=Di(s,"createButtonCallback",void 0),tt=Di(s,"createButtonCallbackScope",void 0);if(s.buttons=Pz(t,D,j,tt),super(t,s),this.type="rexMenu",this.items=D,this.root=l===void 0?this:l,this.isRoot=this.root===this,this.parentMenu=w,this.parentButton=S,this.timer=void 0,this.isRoot){this.isPopUpMode=k;var st=s.bounds;st===void 0&&(st=Aa(t)),this.bounds=st,this.subMenuSide=[this.y<st.centerY?cv:Yc,this.x<st.centerX?uv:Nc];var rt=Di(s,"subMenuSide",void 0);rt!==void 0&&(typeof rt=="string"&&(rt=kz[rt]),this.subMenuSide[this.orientation]=rt),this.toggleOrientation=Di(s,"toggleOrientation",!1),this.expandEventName=Di(s,"expandEvent","button.click"),this.easeIn=tS(this,Di(s,"easeIn",0)),this.easeOut=tS(this,Di(s,"easeOut",0)),this.setTransitInCallback(Di(s,"transitIn")),this.setTransitOutCallback(Di(s,"transitOut")),this.createBackgroundCallback=V,this.createBackgroundCallbackScope=G,this.createButtonCallback=j,this.createButtonCallbackScope=tt,this.childrenKey=Di(s,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=Di(s,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var ot=0,ut=0;if(!this.root.easeIn.sameOrientation){var ct=hv(this.root.easeIn,this).orientation,pt=w?w.orientation:this.orientation,rt=this.root.subMenuSide[pt];ct===0&&rt===Nc&&(ot=1),ct===1&&rt===Yc&&(ut=1)}if(k&&this.setOrigin(ot,ut).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var rt=this.root.subMenuSide[w.orientation];switch(rt){case Nc:this.alignTop(S.top).alignRight(S.left);break;case uv:this.alignTop(S.top).alignLeft(S.right);break;case Yc:this.alignLeft(S.left).alignBottom(S.top);break;case cv:this.alignLeft(S.left).alignTop(S.bottom);break}}Mz(this),k&&(this.pushIntoBounds(this.root.bounds),_z.call(this))}destroy(t){!this.scene||this.ignoreDestroy||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const Nc=2,uv=0,Yc=3,cv=1,kz={up:Yc,down:cv,left:Nc,right:uv};Object.assign(lv.prototype,Zw),T.register("menu",function(e){var t=new lv(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Menu",lv);var Oz={setWrapEnable(e){return e===void 0&&(e=!0),this.listWrapEnable=e,this},setCreateButtonCallback(e){return this.listCreateButtonCallback=e,this},setCreateListBackgroundCallback(e){return this.listCreateBackgroundCallback=e,this},setCreateListSliderTrackCallback(e){return this.listCreateSliderTrackCallback=e,this},setCreateListSliderThumbCallback(e){return this.listCreateSliderThumbCallback=e,this},setListSliderAdaptThumbSizeEnable(e){return e===void 0&&(e=!0),this.listSliderAdaptThumbSizeEnable=e,this},setListScrollerConfig(e){return e===void 0&&(e={}),this.listScrollerConfig=e,this},setListMouseWheelScrollerConfig(e){return this.listMouseWheelScrollerConfig=e,this},setButtonClickCallback(e){return this.listOnButtonClick=e,this},setButtonOverCallback(e){return this.listOnButtonOver=e,this},setButtonOutCallback(e){return this.listOnButtonOut=e,this},setListExpandDirection(e){return typeof e=="string"&&(e=Ez[e]),this.listExpandDirection=e,this},setListEaseInDuration(e){return e===void 0&&(e=0),this.listEaseInDuration=e,this},setListEaseOutDuration(e){return e===void 0&&(e=0),this.listEaseOutDuration=e,this},setListTransitInCallback(e){return this.listTransitInCallback=e,this},settListTransitOutCallback(e){return this.listTransitOutCallback=e,this},setListBounds(e){return this.listBounds=e,this},setListWidth(e){return this.listWidth=e,this},setListHeight(e){return this.listHeight=e,this},setListSize(e,t){return this.setListWidth(e).setListHeight(t),this},setListMaxHeight(e){return this.listMaxHeight=e,this},setListAlignmentMode(e){return this.listAlignMode=e,this},setListAlignmentSide(e){return e===void 0&&(e=""),this.listAlignSide=e,this},setListSpace(e){return e===void 0&&(e={}),this.listSpace=e,this},setListDraggable(e){return e===void 0&&(e=!0),this.listDraggable=e,this}};const Ez={down:0,up:1};var Az=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,s=t.rexSizer,l=!1;if(s.hidden)e=0;else switch(this.scrollMode){case 0:e=this.getChildWidth(t),e===void 0&&(l=!0);break;case 1:e=0;break;default:e=0;break}if(!l)return e},Rz=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,s=t.rexSizer,l=!1;if(s.hidden)e=0;else switch(this.scrollMode){case 0:e=0;break;case 1:e=this.getChildHeight(t),e===void 0&&(l=!0);break;default:e=0;break}if(!l)return e},Dz=function(e){return e===void 0&&(e=[]),this.child&&this.child.isRexSizer&&e.push(this.child),e},Iz=function(){var e=this.left,t=this.top;switch(this.scrollMode){case 0:t+=this.childOY;break;case 1:e+=this.childOY;break;default:t+=this.childOY,e+=this.childOX;break}this.child.setPosition(e,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},Lz=function(){var e=this.child,t,s;if(!e.rexSizer.hidden){switch(this.scrollMode){case 0:t=this.width*this.scaleX;break;case 1:s=this.height*this.scaleY;break}e.isRexSizer?e.runLayout(this,t,s):Si(e,t,s),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren()}},Fz=function(e,t){t||e.clearMask&&e.clearMask(!1)},eS={getChildrenWidth:Az,getChildrenHeight:Rz,getChildrenSizers:Dz,resetChildPosition:Iz,layoutChildren:Lz,removeChildCallback:Fz};Object.assign(eS,Ww);const iS=Phaser.Utils.Objects.IsPlainObject,xs=Phaser.Utils.Objects.GetValue,Bz=Phaser.Display.Align.TOP_LEFT;class sS extends Zn{constructor(t,s,l,w,S,k){iS(s)?(k=s,s=xs(k,"x",0),l=xs(k,"y",0),w=xs(k,"width",void 0),S=xs(k,"height",void 0)):iS(w)&&(k=w,w=xs(k,"width",void 0),S=xs(k,"height",void 0)),super(t,s,l,w,S,k),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this._childOX=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,this.setScrollMode(xs(k,"scrollMode",0));var D=xs(k,"clampChildOY",!0),V=xs(k,"clampChildOX",D);this.setClampMode(D,V);var G=xs(k,"child",void 0),j=xs(k,"expand",!0);G.setOrigin&&G.setOrigin(0),this.add(G),this.sizerChildren=[G];var tt=this.getSizerConfig(G);tt.align=Bz,tt.expand=j,this.child=G;var st=xs(k,"mask");this.setupChildrenMask(st),this.childrenMask&&(this.maskGameObject=nv(this.childrenMask))}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=dw[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t,s){return this.clampChildOY=t,this.clampChildOX=s,this}get instHeight(){return this.scrollMode===0||this.scrollMode===2?this.displayHeight:this.displayWidth}get instWidth(){return this.scrollMode===0||this.scrollMode===2?this.displayWidth:this.displayHeight}get childHeight(){return this.scrollMode===0||this.scrollMode===2?ue(this.child):le(this.child)}get childWidth(){return this.scrollMode===0||this.scrollMode===2?le(this.child):ue(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get leftChildOX(){return 0}get rightChildOX(){return-this.visibleWidth}get childVisibleHeight(){return this.instHeight}get childVisibleWidth(){return this.instWidth}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}get visibleWidth(){var t=this.childWidth-this.childVisibleWidth;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}childOXExceedLeft(t){return t===void 0&&(t=this.childOX),t>this.leftChildOX}childOXExeceedRight(t){return t===void 0&&(t=this.childOX),t<this.rightChildOX}get childOY(){return this._childOY}set childOY(t){var s=this.topChildOY,l=this.bottomChildOY,w=this.childOYExceedTop(t),S=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:w?t=s:S&&(t=l)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),w&&(this.execeedTopState||this.emit("execeedtop",this,t,s)),this.execeedTopState=w,S&&(this.execeedBottomState||this.emit("execeedbottom",this,t,l)),this.execeedBottomState=S}get childOX(){return this._childOX}set childOX(t){var s=this.leftChildOX,l=this.rightChildOX,w=this.childOXExceedLeft(t),S=this.childOXExeceedRight(t);this.clampChildOX&&(this.childVisibleWidth>this.childWidth?t=0:w?t=s:S&&(t=l)),this._childOX!==t&&(this._childOX=t,this.resetChildPosition()),w&&(this.execeedLeftState||this.emit("execeedleft",this,t,s)),this.execeedLeftState=w,S&&(this.execeedRightState||this.emit("execeedright",this,t,l)),this.execeedRightState=S}setChildOY(t){return this.childOY=t,this}setChildOX(t){return this.childOX=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}set s(t){this.childOX=-this.visibleWidth*t}get s(){var t=this.visibleWidth;return t===0?0:this.childOX/-t}setChildOYByPercentage(t){return this.t=t,this}setChildOXByPercentage(t){return this.s=t,this}}Object.assign(sS.prototype,eS);var Nz=function(e,t,s,l){if(!this.hasChild(e))return this;var w,S;switch(this.scrollMode){case 0:w=this.childOY+Vc.call(this,e,"y",t);break;case 1:w=this.childOY+Vc.call(this,e,"x",t);break;default:w=this.childOY+Vc.call(this,e,"y",t),S=this.childOX+Vc.call(this,e,"x",t);break}return s===void 0||s<=0?(this.childOY=w,this.scrollMode===2&&(this.childOX=S)):(this._easeScrollChildOY===void 0&&(this._easeScrollChildOY=new _s(this)),this._easeScrollChildOY.restart({key:"childOY",to:w,duration:s,ease:l}),this.scrollMode===2&&(this._easeScrollChildOX===void 0&&(this._easeScrollChildOX=new _s(this)),this._easeScrollChildOX.restart({key:"childOX",to:S,duration:s,ease:l}))),this};const rS=["top","bottom","centerY","center"],nS=["left","right","centerX","center"];var Vc=function(e,t,s){t=t.toUpperCase();var l=t==="Y",w=this.childrenMap.child,S;if(l){if(s)for(var k=0,D=rS.length;k<D;k++){var V=rS[k];if(s.indexOf(V)!==-1){s=V;break}}switch(s){case"top":S=w.top-Vn(e).y;break;case"bottom":S=w.bottom-Ko(e).y;break;case"centerY":case"center":S=w.centerY-J0(e).y;break;default:var G=w.top-Vn(e).y,j=w.bottom-Ko(e).y;G<=0&&j>=0?S=0:S=Math.abs(G)<=Math.abs(j)?G:j;break}}else{if(s)for(var k=0,D=nS.length;k<D;k++){var V=nS[k];if(s.indexOf(V)!==-1){s=V;break}}switch(s){case"left":S=w.left-Vn(e).x;break;case"right":S=w.right-qo(e).x;break;case"centerX":case"center":S=w.centerX-J0(e).x;break;default:var tt=w.left-Vn(e).x,st=w.right-qo(e).x;tt<=0&&st>=0?S=0:S=Math.abs(tt)<=Math.abs(st)?tt:st;break}}return S};const xn=Phaser.Utils.Objects.GetValue;class qh extends zh{constructor(t,s){s===void 0&&(s={});var l=Bg(s),w=xn(s,"panel",void 0);w===void 0&&(w={}),w.scrollMode=l,w.clampChildOY=xn(s,"clampChildOY",!1),w.clampChildOX=xn(s,"clampChildOX",!1);var S=new sS(t,w);t.add.existing(S);var k,D;switch(l){case 0:k=xn(s,"expand.panel",!0),D=!0;break;case 1:k=!0,D=xn(s,"expand.panel",!0);break;default:k=!0,D=!0}s.type="rexScrollablePanel",s.child={gameObject:S,expandWidth:k,expandHeight:D,align:xn(s,"align.panel","center")};var V=xn(s,"space",void 0);V&&(V.child=xn(V,"panel",0)),super(t,s),this.addChildrenMap("panel",S.child),this.addChildrenMap("panelLayer",S.maskLayer),this.addChildrenMap("mask",S.maskGameObject),this.addChildrenMap("scrollableBlock",S)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),qu(this.childrenMap.child,t),this}}var Yz={scrollToChild:Nz};Object.assign(qh.prototype,Yz);const Vz=Phaser.Utils.Objects.GetValue;var zz=function(){var e=this.scene,t,s=this.listCreateBackgroundCallback;s&&(t=s.call(this,e),e.add.existing(t));var tt=[],l=this.listCreateButtonCallback;if(l)for(var w=this.options,S=0,k=w.length;S<k;S++){var D=l.call(this,e,w[S],S,w);D&&(e.add.existing(D),tt.push(D))}var V=this.listWidth;V===void 0&&(this.listAlignMode==="text"?V=this.getElement("text").width:V=this.width);var G=this.listHeight,j={width:V,buttons:tt,space:this.listSpace},tt,st,rt;if(this.listCreateSliderThumbCallback?rt=G>0||this.listMaxHeight>0:rt=!1,!rt)j.height=G,tt=aS(e,j,this.listWrapEnable),st=tt;else{var tt=aS(e,j,this.listWrapEnable);if(this.listMaxHeight>0&&(tt.layout(),tt.height<=this.listMaxHeight&&(st=tt)),!st){G===0&&(G=this.listMaxHeight);var ot=oS(e,this.listCreateSliderTrackCallback),ut=oS(e,this.listCreateSliderThumbCallback);st=new qh(e,{height:G,scrollMode:0,panel:{child:tt,mask:{padding:1}},slider:{track:ot,thumb:ut,adaptThumbSize:this.listSliderAdaptThumbSizeEnable},scrollDetectionMode:1,scroller:this.listScrollerConfig,mouseWheelScroller:this.listMouseWheelScrollerConfig,space:{panel:Vz(this.listSpace,"panel",0)}}),e.add.existing(st)}}return t&&st.addBackground(t,"background"),this.listDraggable&&st.setDraggable(!0),st!==tt&&tt.on("button.over",function(ct,pt,mt,yt){st.emit("button.over",ct,pt,mt,yt)}).on("button.out",function(ct,pt,mt,yt){st.emit("button.out",ct,pt,mt,yt)}).on("button.click",function(ct,pt,mt,yt){st.emit("button.click",ct,pt,mt,yt)}),st},aS=function(e,t,s){var l;return s?(t.orientation="x",l=new mn(e,t)):(t.orientation="y",l=new ui(e,t)),e.add.existing(l),l},oS=function(e,t,s){var l;return t&&(l=t.call(s,e),e.add.existing(l)),l},Gz=function(e,t,s,l,w){var S={};switch(S.mode=0,s){case 0:case"x":S.end={x:0};break;case 1:case"y":S.end={y:0};break;default:S.end=0;break}return S.duration=t,S.ease=l,w===void 0?w=new Th(e,S):w.resetFromJSON(S),w.restart(),w},Uz=function(e,t,s,l,w){return Tr(e,t)?Vt(e,t):Tr(e,s)?Vt(e,s):w};const ao=Phaser.Utils.Objects.GetValue;var Wz=function(e,t){var s=ao(t,"expandDirection",void 0);typeof s=="string"&&(s=Xz[s]);var l=Uz(t,"alignTarget","alignTargetX"),w=ao(t,"alignTargetY",l),S=ao(t,"alignOffsetX",0),k=ao(t,"alignOffsetY",0),D=ao(t,"alignSide",""),V=D.includes("right"),G=ao(t,"bounds"),j=s===0,tt=s===1,st=!j&&!tt,rt=V?1:0,ot=j||st?0:1;e.setOrigin(rt,ot);var ut,ct;V?ut=l.getTopRight().x:ut=l.getTopLeft().x,ct=w.getBottomLeft().y,e.setPosition(ut+S,ct+k);var pt=G;pt||(pt=Aa(e.scene)),st&&e.getBottomLeft().y>pt.bottom&&(ct=w.getTopLeft().y,e.setOrigin(0,1).setPosition(ut+S,ct+k))};const Xz={down:0,up:1},hS=Phaser.Utils.Objects.GetValue;class lS extends Iu{constructor(t,s){s===void 0&&(s={}),s.transitIn==null&&(s.transitIn=function(S,k){_f(S,k,"y","Cubic")}),s.transitOut==null&&(s.transitOut=function(S,k){Gz(S,k,"y","Linear")}),s.manualClose=!0,s.clickOutsideClose=!0,s.destroy=!0,super(t,s),Wz(t,s),t.isRexSizer&&t.layout();var l=hS(s,"touchOutsideClose",!1),w=hS(s,"anyTouchClose",!1);w&&(l=!1),w?this.once("open",this.anyTouchClose,this):l&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Bu(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var jz=function(){if(this.listPanel)return this;if(this.options.length===0)return this;var e=zz.call(this);e.on("button.over",function(l,w,S,k){this.currentOverIndex=w,this.listOnButtonOver&&this.listOnButtonOver.call(this,l,w,S,k),this.emit("button.over",this,e,l,w,S,k)},this).on("button.out",function(l,w,S,k){this.currentOverIndex===w&&(this.currentOverIndex=void 0),this.listOnButtonOut&&this.listOnButtonOut.call(this,l,w,S,k),this.emit("button.out",this,e,l,w,S,k)},this);var t;!this.listAlignMode||this.listAlignMode==="label"?t=this:t=this.getElement(this.listAlignMode);var s=new lS(e,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:t,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds}).on("open",function(){e.on("button.click",function(l,w,S,k){this.listOnButtonClick&&this.listOnButtonClick.call(this,l,w,S,k),this.emit("button.click",this,e,l,w,S,k),this.dropDownBehavior.requestClose()},this),this.emit("list.open",this,e)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0,this.emit("list.close",this)},this);return e.onClickOutside(function(){s.requestClose()}),this.listPanel=e,this.dropDownBehavior=s,this.pin(e),this},Hz=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this.currentOverIndex=void 0,this):this},$z=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},qz=function(e){if(e===void 0&&(e=this.currentOverIndex),e===void 0)return this;var t=this.listPanel,s=t?t.getButton(e):this.options[e];return this.listOnButtonClick&&this.listOnButtonClick.call(this,s,e),this.emit("button.click",this,t,s,e),this},Kz=function(e){var t=this.listPanel;return t?(t.emitButtonOver(e),this):this},Qz={focusNextButton(){if(!this.isOpened)return this;var e=this.currentOverIndex,t;if(e===void 0)t=0;else{var s=this.listPanel.getButtons().length;t=(e+1)%s}return this.emitButtonOver(t),this},focusPrevButton(){if(!this.isOpened)return this;var e=this.currentOverIndex,t;if(e===void 0)t=0;else{var s=this.listPanel.getButtons().length;t=(e-1+s)%s}return this.emitButtonOver(t),this}},uS={openListPanel:jz,closeListPanel:Hz,toggleListPanel:$z,emitButtonClick:qz,emitButtonOver:Kz};Object.assign(uS,Oz,Qz);const pe=Phaser.Utils.Objects.GetValue;class Kh extends Lr{constructor(t,s){super(t,s),this.type="rexDropDownList",this.timer=void 0,this.listPanel=void 0,this.currentOverIndex=void 0,this.setOptions(pe(s,"options"));var l=pe(s,"list");this.setWrapEnable(pe(l,"wrap",!1)),this.setCreateButtonCallback(pe(l,"createButtonCallback")),this.setCreateListBackgroundCallback(pe(l,"createBackgroundCallback")),this.setCreateListSliderTrackCallback(pe(l,"createTrackCallback")),this.setCreateListSliderThumbCallback(pe(l,"createThumbCallback")),this.setListSliderAdaptThumbSizeEnable(pe(l,"sliderAdaptThumbSize",!1)),this.setListScrollerConfig(pe(l,"scroller")),this.setListMouseWheelScrollerConfig(pe(l,"mouseWheelScroller")),this.setButtonClickCallback(pe(l,"onButtonClick")),this.setButtonOverCallback(pe(l,"onButtonOver")),this.setButtonOutCallback(pe(l,"onButtonOut")),this.setListExpandDirection(pe(l,"expandDirection")),this.setListEaseInDuration(pe(l,"easeIn",500)),this.setListEaseOutDuration(pe(l,"easeOut",100)),this.setListTransitInCallback(pe(l,"transitIn")),this.settListTransitOutCallback(pe(l,"transitOut")),this.setListMaxHeight(pe(l,"maxHeight",0)),this.setListSize(pe(l,"width"),pe(l,"height",0)),this.setListAlignmentMode(pe(l,"alignParent","text")),this.setListAlignmentSide(pe(l,"alignSide","")),this.setListBounds(pe(l,"bounds")),this.setListSpace(pe(l,"space")),this.setListDraggable(pe(l,"draggable",!1)),this.setValueChangeCallback(pe(s,"setValueCallback"),pe(s,"setValueCallbackScope")),this.setValue(pe(s,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}get isOpened(){return!!this.listPanel}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,s){return this.valueChangeCallback=t,this.valueChangeCallbackScope=s,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var s=this._value;this._value=t;var l=this.valueChangeCallback,w=this.valueChangeCallbackScope;l&&(w?l.call(w,this,t,s):l(this,t,s)),this.emit("valuechange",this,t,s)}}}Object.assign(Kh.prototype,uS),T.register("dropDownList",function(e){var t=new Kh(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.DropDownList",Kh);var cS=function(e,t,s){t=t?B(t):{},s===void 0&&(s={});var l=t.label||t.button,w=t.button||t.label;delete t.label,delete t.button;var S=s.label||s.button||s,k=s.button||s.label||s,D=Tc(e,l,S);D.list=t.list||{},D.list.createButtonCallback=function(j,tt){var st=ci(j,w,k).resetDisplayContent(tt);return tt.hasOwnProperty("value")&&(st.value=tt.value),st};var V=t.track;V&&(D.list.createTrackCallback=function(j){return ri(j,V)},delete t.track);var G=t.thumb;return G&&(D.list.createThumbCallback=function(j){return ri(j,G)},delete t.thumb),D.list.onButtonOver=function(j,tt,st,rt){j.setHoverState&&j.setHoverState(!0)},D.list.onButtonOut=function(j,tt,st,rt){j.setHoverState&&j.setHoverState(!1)},D};class dS extends Kh{constructor(t,s,l){s=cS(t,s,l),super(t,s),this.type="rexSimpleDropDownList"}setOptions(t){t===void 0&&(t=[]);for(var s=0,l=t.length;s<l;s++){var w=t[s];typeof w=="string"&&(t[s]={text:w,value:w})}return super.setOptions(t),this}}T.register("simpleDropDownList",function(e,t){var s=new dS(this.scene,e,t);return this.scene.add.existing(s),s}),K(window,"RexPlugins.UI.SimpleDropDownList",dS);var Jz=function(e){var t=dn(e),s,l,w;switch(t){case Ti:case Ci:s=e.height-e.padding.top-e.padding.bottom,l=e.lineSpacing,w=e.style.metrics.fontSize+e.style.strokeThickness;break;case es:s=e.height,l=0;var S=e.fontSize/e.fontData.size;w=e.fontData.lineHeight*S;break}return(s-l)/(w+l)},Zz=function(e,t){if(e===void 0&&(e=this.startLineIndex),t===void 0){var s=this.pageLinesCount;s>0?t=e+s:t=this.totalLinesCount}t>this.totalLinesCount&&(t=this.totalLinesCount);var l;switch(this.textObjectType){case Ti:case es:l=this.lines.slice(e,t).join(`
`);break;case Ci:var w=this.lines.getLineStartIndex(e),S=this.lines.getLineEndIndex(t-1);l=this.lines.getSliceTagText(w,S,!0);var k=(l.match(/\n/g)||[]).length;k>t-e-1&&(l=l.substring(0,l.length-1));break}return l},tG={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(s){var t=this.totalLinesCount;this.sections.push(Sa(s));var s=this.sections.join(`
`);this.lines=Gg(this.parent,s,this.lines);var l=this.totalLinesCount-t,w=this.pageLinesCount,S;w>0?S=Math.ceil(l/this.pageLinesCount):S=1;for(var k=0;k<S;k++)this.pageStartIndexes.push(t+k*this.pageLinesCount);return this},setText(e,t){t===void 0&&(t=!0),t&&this.resetIndex(),this.clearText();for(var s=Sa(e).split(this.pageBreak),l=0,w=s.length;l<w;l++)this.appendPage(s[l]);return this},appendText(e){var t=this.content+Sa(e);return this.setText(t,!1),this}};const pS=Phaser.Math.Clamp;var eG={resetIndex(){return this.pageIndex=-1,this.startLineIndex=-1,this.endLineIndex=void 0,this},setPageIndex(e){return e=pS(e,0,this.lastPageIndex),this.pageIndex=e,this.startLineIndex=this.pageStartIndexes[e],this.endLineIndex=this.pageStartIndexes[e+1],this},getPage(e){return e===void 0&&(e=this.pageIndex),this.setPageIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},getFirstPage(){return this.getPage(0)},getLastPage(){return this.getPage(this.lastPageIndex)},setStartLineIndex(e){var t=Math.max(this.totalLinesCount-this.pageLinesCount,0);return e=pS(e,0,t),this.startLineIndex=e,this.endLineIndex=e+this.pageLinesCount,this},getPageByLineIndex(e){return this.setStartLineIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getPageOfNextLine(){return this.getPageByLineIndex(this.startLineIndex+1)},getPageOfPreviousLine(){return this.getPageByLineIndex(this.startLineIndex-1)},getPageOfFirstLine(){return this.getPageByLineIndex(0)},getPageOfLastLine(){return this.getPageByLineIndex(this.totalLinesCount)}},iG={showPage(e){return this.displayText(this.getPage(e)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},showFirstPage(){return this.displayText(this.getFirstPage()),this},showLastPage(){return this.displayText(this.getLastPage()),this},show(){return this.displayText(this.getLines()),this},showPageByLineIndex(e){return this.displayText(this.getPageByLineIndex(e)),this},showNextLine(){return this.displayText(this.getPageOfNextLine()),this},showPreviousLine(){return this.displayText(this.getPageOfPreviousLine()),this},showFirstLine(){return this.displayText(this.getPageOfFirstLine()),this},showLastLine(){return this.displayText(this.getPageOfLastLine()),this},displayText(e){bc(this.parent,e)}},fS={getLines:Zz};Object.assign(fS,tG,eG,iG);const oo=Phaser.Utils.Objects.GetValue;Phaser.Math.Clamp;class zc extends Oe{constructor(t,s){super(t,{eventEmitter:!1}),this.textObjectType=dn(this.parent),this.pageStartIndexes=[],this.lines=Gg(this.parent,""),this.sections=[],this.resetFromJSON(s)}resetFromJSON(t){this.setMaxLines(oo(t,"maxLines",void 0)),this.setPageBreak(oo(t,"pageBreak",`\f
`)),this.setText(oo(t,"text","")),this.startLineIndex=oo(t,"start",-1),this.endLineIndex=oo(t,"end",void 0);var s=oo(t,"page");return s===void 0?this.resetIndex():this.setPageIndex(s),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,end:this.endLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case Ti:this.lines.length=0;break;case Ci:this.lines.destroy();break;case es:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get lastPageIndex(){return this.pageCount-1}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case Ti:case Ci:var s=this.parent.style.maxLines;s>0?t=s:t=Math.floor(Jz(this.parent));break;case es:t=this.totalLinesCount;break}return t}get isFirstLine(){return this.startLineIndex<=0}get isLastLine(){return this.endLineIndex===this.totalLinesCount}get content(){return this.sections.join(this.pageBreak)}}Object.assign(zc.prototype,fS);var sG={setText(e){this.setTextCallback&&(this.setTextCallbackScope?e=this.setTextCallback.call(this.setTextCallbackScope,e,this.isLastChar,this.insertIndex):e=this.setTextCallback(e,this.isLastChar,this.insertIndex)),this.textWrapEnable?bc(this.parent,e):this.parent.setText(e)},appendText(e){var t=this.text.concat(Sa(e));return this.isTyping?this.setTypingContent(t):this.start(t,void 0,this.textLength),this}},rG=function(e,t,s,l){return e!==void 0&&this.setTypingContent(e),t!==void 0&&(this.speed=t),s===void 0&&(s=0),this.typingIndex=s+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(l)),this},gS=function(e,t){return e.getPlainText&&(t=e.getPlainText(t)),t},nG=function(e,t,s,l,w){var S;if(t>0){l===void 0&&(l=0);var k=gS(this.parent,e);S=aG(k,t)+l}return this.start(e,s,S,w)},aG=function(e,t){for(var s=void 0,l=0;l<t&&(s=e.indexOf(`
`,s+1),s!==-1);l++);return s},Qh=function(e,t,s,l){var w;return e.getSubString?w=e.getSubString(t,s,l):w=t.slice(s,l),w},vS=function(e,t,s,l){var w=this.parent,S;if(l===0){var k=0,D=t;this.insertIndex=D,S=Qh(w,e,k,D)}else if(l===1){var D=s,k=D-t;this.insertIndex=0,S=Qh(w,e,k,D)}else if(l===2){var V=s/2,k=Math.floor(V-t/2),D=k+t;this.insertIndex=t%2?t:0,S=Qh(w,e,k,D)}else if(l===3){var G=Math.floor(t/2),j;if(G>0){var D=s,k=D-G;j=Qh(w,e,k,D)}else j="";var tt=t-G,st;if(tt>0){var k=0,D=k+tt;this.insertIndex=D,st=Qh(w,e,k,D)}else st="",this.insertIndex=0;S=st+j}return this.insertChar=S.charAt(this.insertIndex-1),S},oG=function(e){var t=this.getTimer();if(t&&this.freeTimer(),e){for(;!this.isLastChar;)vS.call(this,this.text,this.typingIndex,this.textLength,this.typeMode),this.emit("typechar",this.insertChar),this.typingIndex++;this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)}return this},hG=function(){var e=this.getTimer();return e&&(e.paused=!0),this},lG=function(){var e=this.getTimer();return e&&(e.paused=!1),this},mS={start:rG,startFromLine:nG,stop:oG,pause:hG,resumeTyping:lG};Object.assign(mS,sG);var uG=function(e,t){var s=dn(e);switch(s){case Ti:e.style.syncFont(e.canvas,e.context),t=e.runWordWrap(t);break;case Ci:t=e.getText(t,void 0,void 0,!0);break;case es:t=e.setText(t).getTextBounds().wrappedText;break}return t};const Jh=Phaser.Utils.Objects.GetFastValue,dv=Phaser.Utils.Objects.GetValue;class Gc extends Oe{constructor(t,s){super(t,s),this.timer=null,this.resetFromJSON(s)}resetFromJSON(t){this.setTextWrapEnable(dv(t,"wrap",!1)),this.setTypeMode(dv(t,"typeMode",0)),this.setTypingSpeed(dv(t,"speed",333)),this.setTextCallback=Jh(t,"setTextCallback",null),this.setTextCallbackScope=Jh(t,"setTextCallbackScope",null),this.setTypingContent(Jh(t,"text","")),this.typingIndex=Jh(t,"typingIndex",0),this.insertIndex=null,this.insertChar=null;var s=Jh(t,"elapsed",null);return s!==null&&this.start(void 0,void 0,this.typingIndex,s),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=cG[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTypingSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var s=Sa(t);this.textWrapEnable&&(s=uG(this.parent,s)),this._text=s}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIndex===this.textLength}setTypingContent(t){return this.text=t,this.textLength=gS(this.parent,this.text).length,this}onTyping(){var t=vS.call(this,this.text,this.typingIndex,this.textLength,this.typeMode);this.setText(t),this.emit("typechar",this.insertChar),this.emit("type"),this.isLastChar?(this.freeTimer(),this.scene.sys.events.once("preupdate",function(){this.emit("complete",this,this.parent)},this)):(this.timer.delay=this.speed,this.typingIndex++)}startTimer(t){this.timer&&this.freeTimer();var s;return t===void 0?s=0:(this.speed,s=t),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:s,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIndex):t=this.setTextCallback(t,this.isLastChar,this.insertIndex)),this.textWrapEnable?bc(this.parent,t):this.parent.setText(t)}}const cG={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3};Object.assign(Gc.prototype,mS);const Zh=Phaser.Utils.Objects.GetValue;var dG=function(e,t){t===void 0&&(t="rexTextBox");class s extends e{constructor(w,S){super(w,S),this.type=t,this.isRunning=!1,this._isPageEnd=!1;var k=this.childrenMap.text,D=Zh(S,"expandTextWidth",!1),V=Zh(S,"expandTextHeight",!1);if(D||V){var G=dn(k);switch(G){case Ti:case Ci:if(k.resize=function(tt,st){var rt=D?tt:0,ot=V?st:0;k.setFixedSize(rt,ot),rt>0&&k.setWordWrapWidth(rt)},G===Ci){var j=k.style;j.wrapMode===0&&(j.wrapMode=1)}break}D&&(k._minWidth=0),V&&(k._minHeight=0)}this.setTypingMode(Zh(S,"typingMode","page")),this.page=new zc(k,Zh(S,"page",void 0)),this.typing=new Gc(k,Zh(S,"typing",S.type)),this.typing.on("complete",this.onTypingComplete,this).on("type",this.onType,this).on("typechar",this.onTypeChar,this),this.textWidthSave=k.width,this.textHeightSave=k.height}setTypingMode(w){return typeof w=="string"&&(w=pG[w]),this.typingMode=w,this}start(w,S){return S!==void 0&&this.setTypingSpeed(S),this.isRunning=!0,this.page.setText(w),this.emit("start"),this.typingMode===0?this.typeNextPage():this.typeNextLine(),this}more(w,S){if(S!==void 0&&this.setTypingSpeed(S),this.isRunning)this.page.appendText(w),this.typing.appendText(w);else{if(this.isRunning=!0,this.page.appendText(w),this.emit("start"),this.typingMode===0){this._isPageEnd=!1;var k=this.page.getPage(),D=this.typing.textLength;this.typing.start(k,void 0,D)}return this}}typeNextPage(){if(!this.isRunning)return this;if(this.isLastPage)this.emit("complete");else{this._isPageEnd=!1;var w=this.page.getNextPage();this.typing.start(w)}return this}typeNextLine(){if(!this.isRunning)return this;if(this.isLastLine)this.isRunning=!1,this.emit("pageend"),this.emit("complete");else{var w=this.page.getPageOfNextLine(),S;this.isFirstLine?S=0:S=this.page.pageLinesCount-1,this.typing.startFromLine(w,S)}}pause(){return this.isRunning?(this.isTyping&&(this.typing.pause(),this.emit("pause")),this):this}resume(){return this.isRunning?(this.isTyping||(this.emit("resume"),this.typing.resume()),this):this}stop(w){return this.isRunning?(this.typing.stop(w),this):this}showLastPage(){return this.isRunning?(this.typing.stop(),this.typingMode===0?this.page.showLastPage():this.page.showLastLine(),this.emit("type"),this.onTypingComplete(),this):this}setTypeSpeed(w){return this.typing.setTypingSpeed(w),this}setTypingSpeed(w){return this.typing.setTypingSpeed(w),this}get isTyping(){return this.typing.isTyping}get isPageEnd(){return this._isPageEnd}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}get isLastLine(){return this.page.isLastLine}get isFirstLine(){return this.page.isFirstLine}get lineCound(){return this.page.totalLinesCount}get startLineIndex(){return this.page.startLineIndex}get endLineIndex(){return this.page.endLineIndex}get typingSpeed(){return this.typing.speed}onType(){var w=this.childrenMap.text;(this.textWidthSave!==w.width||this.textHeightSave!==w.height)&&(this.textWidthSave=w.width,this.textHeightSave=w.height,this.getTopmostSizer().layout()),this.emit("type")}onTypeChar(w){this.emit("typechar",w)}onTypingComplete(){if(this.typingMode===0){this._isPageEnd=!0;var w=this.isLastPage;this.isRunning=!w,this.emit("pageend"),w&&this.emit("complete")}else this.typeNextLine()}}return s};const pG={page:0,line:1};class pv extends dG(Cc){constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("layoutMode")||(s.layoutMode=1),super(t,s)}}T.register("textBox",function(e){var t=new pv(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.TextBox",pv);class yS extends pv{constructor(t,s,l){s=Mw(t,s,l),super(t,s)}}T.register("simpleTextBox",function(e){var t=new yS(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.SimpleTextBox",yS);const rs=Phaser.Utils.Objects.GetValue;class xS extends Zt{constructor(t,s){super(t,s),this.type="rexNumberBar";var l=rs(s,"background",void 0),w=rs(s,"icon",void 0),S=rs(s,"iconMask",void 0),k=rs(s,"slider",void 0),D=rs(s,"text",void 0),V=rs(s,"space.icon",0),G=rs(s,"space.slider",0);if(l&&this.addBackground(l),w){var j;this.orientation===0?(k||D)&&(j={right:V}):(k||D)&&(j={bottom:V}),this.add(w,{proportion:0,align:"center",padding:j}),S&&(S=Is.call(this,w,w,1))}var tt;if(k){k.orientation=this.orientation,k.eventEmitter=this,k.value=null,k.hasOwnProperty("input")||(k.input=-1),tt=new so(t,k),t.add.existing(tt);var j;this.orientation===0?D&&(j={right:G}):D&&(j={bottom:G});var st;if(this.orientation===0){var rt=rs(k,"width",void 0);st=rt===void 0?1:0}else{var ot=rs(k,"height",void 0);st=ot===void 0?1:0}this.add(tt,{proportion:st,align:"center",padding:j})}D&&this.add(D),this.addChildrenMap("background",l),this.addChildrenMap("icon",w),this.addChildrenMap("iconMask",S),this.addChildrenMap("slider",tt),this.addChildrenMap("text",D);var ut=rs(s,"valuechangeCallback",null);if(ut!==null){var ct=rs(s,"valuechangeCallbackScope",void 0);this.on("valuechange",ut,ct)}this.setEnable(rs(s,"enable",void 0)),this.setValue(rs(s,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,s,l){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,s,l),this}addValue(t,s,l){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,s,l),this}getValue(t,s){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,s):0}easeValueTo(t,s,l){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,s,l),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var s;return t.text?s=t.text:s=t.getData("text"),s}set text(t){var s=this.childrenMap.text;s!==void 0&&(s.setText?s.setText(t):s.setData("text",t))}setText(t){return this.text=t,this}}T.register("numberBar",function(e){var t=new xS(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.NumberBar",xS),T.register("scrollBar",function(e){var t=new Vg(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.ScrollBar",Vg);const fv=Phaser.Utils.Objects.GetValue,bS={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class wS extends fs{constructor(t,s){super(t,s),this.type="rexBadge";var l=fv(s,"background",void 0);l&&this.addBackground(l),this.addChildrenMap("background",l);var w=fv(s,"main",void 0);w&&this.add(w,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",w);for(var S in bS){var k=fv(s,S,void 0);k&&(this.add(k,{key:S,align:bS[S],expand:!1}),this.addChildrenMap(S,k))}}}T.register("badgeLabel",function(e){var t=new wS(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.BadgeLabel",wS);const fG=fs.prototype.add;var SS=function(e,t,s,l,w,S,k,D,V){return e.setVisible(!1),fG.call(this,e,t,s,l,w,S,k,D,V),this},gG={add:SS,addPage:SS},vG=function(e){return e===void 0?null:this.sizerChildren.hasOwnProperty(e)?this.sizerChildren[e]:null};const TS=Ji.prototype.setChildVisible;var mG=function(e,t){this._previousKey=this._currentKey;var s=this.previousPage;s&&(this.swapMode===0?(TS.call(this,s,!1),this.emit("pageinvisible",s,this._previousKey,this)):s.destroy()),e&&!this.sizerChildren.hasOwnProperty(e)&&this.emit("createpage",e,this),this._currentKey=e;var l=this.currentPage;return l&&(TS.call(this,l,!0),this.emit("pagevisible",l,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&l.setAlpha(0).fadeIn(t,1)),this},yG=function(e){return this.sizerChildren.hasOwnProperty(e)},CS={getPage:vG,swapPage:mG,hasPage:yG};Object.assign(CS,gG);const PS=Phaser.Utils.Objects.GetValue;class Uc extends fs{constructor(t,s){super(t,s),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(PS(s,"swapMode",0)),this.setFadeInDuration(PS(s,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=xG[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Uc.prototype,CS);const xG={invisible:0,destroy:1};T.register("pages",function(e){var t=new Uc(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Pages",Uc);const bG=Phaser.GameObjects.Mesh;class MS extends bG{get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}forceUpdate(){return this.dirtyCache[10]=1,this}}const _S=Phaser.Math.Vector3,wG=Phaser.Math.Matrix4;var kS=new _S,OS=new _S,ES=new wG,SG=function(e,t,s,l,w,S,k){t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=0),S===void 0&&(S=0),k===void 0&&(k=0),kS.set(t,s,l),OS.set(w,S,k),ES.fromRotationXYTranslation(OS,kS,!0);for(var D=0,V=e.vertices.length;D<V;D++)e.vertices[D].transformMat4(ES)};const TG=Phaser.Utils.Objects.IsPlainObject,na=Phaser.Utils.Objects.GetValue,CG=Phaser.Geom.Mesh.GenerateGridVerts,gv=Phaser.Math.RadToDeg,Wc=Phaser.Math.DegToRad,AS=45,PG=1+1/Math.sin(Wc(AS));let RS=class extends MS{constructor(e,t,s,l,w,S){TG(t)&&(S=t,t=na(S,"x",0),s=na(S,"y",0),l=na(S,"key",null),w=na(S,"frame",null)),super(e,t,s,l,w),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(PG),this.hideCCW=na(S,"hideCCW",!0);var k=na(S,"gridWidth",0),D=na(S,"gridHeight",k);this.resetVerts(k,D),this.prevFrame=this.frame}preUpdate(e,t){this.prevFrame!==this.frame&&(this.prevFrame=this.frame,this.syncSize()),super.preUpdate(e,t)}get originX(){return .5}get originY(){return .5}resetPerspective(){return this.setPerspective(this.width,this.height,AS),this}resetVerts(w,S){if(w!==void 0&&(this.gridWidth=w),S!==void 0&&(this.gridHeight=S),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var s=this.frame.cutWidth,l=this.frame.cutHeight,w,S;this.gridWidth===0?w=Math.max(s/8,32):S=this.gridWidth,this.gridHeight===0?S=Math.max(l/8,32):S=this.gridHeight,CG({mesh:this,width:s/this.height,height:l/this.height,widthSegments:Math.ceil(s/w),heightSegments:Math.ceil(l/S)});var k=this.transformInfo;return k&&this.transformVerts(k.x,k.y,k.z,k.rotateX,k.rotateY,k.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(e){this.modelRotation.x=e}get angleX(){return gv(this.rotationX)}set angleX(e){this.rotationX=Wc(e)}get rotationY(){return this.modelRotation.y}set rotationY(e){this.modelRotation.y=e}get angleY(){return gv(this.rotationY)}set angleY(e){this.rotationY=Wc(e)}get rotationZ(){return this.modelRotation.z}set rotationZ(e){this.modelRotation.z=e}get angleZ(){return gv(this.rotationZ)}set angleZ(e){this.rotationZ=Wc(e)}transformVerts(e,t,s,l,w,S){return e===void 0&&(e=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=0),S===void 0&&(S=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=e,this.transformInfo.y=t,this.transformInfo.rotateX=l,this.transformInfo.rotateY=w,this.transformInfo.rotateZ=S,SG(this,e,t,s,l,w,S),this}};const MG=Phaser.Textures.DynamicTexture;var DS=function(e,t,s){t===void 0&&(t=2),s===void 0&&(s=2);var l=new MG(e.sys.textures,null,t,s);return l};const _G=Phaser.Utils.Objects.IsPlainObject,Xc=Phaser.Utils.Objects.GetValue;class IS extends RS{constructor(t,s,l,w,S,k){_G(s)&&(k=s,s=Xc(k,"x",0),l=Xc(k,"y",0),w=Xc(k,"width",32),S=Xc(k,"height",32));var D=DS(t,w,S);super(t,s,l,D,null,k),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}snapshot(t,s){return s===void 0&&(s={}),s.gameObjects=t,s.renderTexture=this.rt,af(s),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var Ys=function(e,t,s,l){if(Array.isArray(e))for(var w=!1,S=0,k=e.length;S<k;S++){var D=e[S];if(!(l&&!D)&&(s?w=t.call(s,D,S,e):w=t(D,S,e),w))return}else{var w=!1;for(var V in e){var D=e[V];if(!(l&&!D)&&(s?w=t.call(s,D,V,e):w=t(D,V,e),w))return}}};const ho=Phaser.Math.RadToDeg,lo=Phaser.Math.DegToRad;class kG extends Ji{constructor(t,s,l,w,S,k){super(t,s,l,w,S),this.faces=k,Ys(k,function(D){D.setPosition(s,l),this.add(D)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return ho(this.rotationX)}set angleX(t){this.rotationX=lo(t)}get rotateX(){return ho(this.rotationX)}set rotateX(t){this.rotationX=lo(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return ho(this.rotationY)}set angleY(t){this.rotationY=lo(t)}get rotateY(){return ho(this.rotationY)}set rotateY(t){this.rotationY=lo(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return ho(this.rotationZ)}set angleZ(t){this.rotationZ=lo(t)}get rotateZ(){return ho(this.rotationZ)}set rotateZ(t){this.rotationZ=lo(t)}setDebug(t,s){return Ys(this.faces,function(l){l.setDebug(t,s)},null,!0),this}panX(t){return Ys(this.faces,function(s){s.panX(t)},null,!0),this}panY(t){return Ys(this.faces,function(s){s.panY(t)},null,!0),this}panZ(t){return Ys(this.faces,function(s){s.panZ(t)},null,!0),this}transformVerts(t,s,l,w,S,k){return Ys(this.faces,function(D){D.transformVerts(t,s,l,w,S,k)},null,!0),this}forEachFace(t,s,l){return Ys(this.faces,t,s,l),this}}const OG=Phaser.Utils.Objects.IsPlainObject,EG={key:"__WHITE"},AG={image:RS,rendertexture:IS};var LS=function(e,t){t===void 0&&(t=EG);var s;return OG(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),s=new AG[t.type](e,t),e.add.existing(s)):s=t,s},RG=function(e,t,s){var l;if(s===void 0){l=[];for(var w,S,k=0,D=t.length;k<D;k++)S=t[k],S?w=LS(e,S):w=null,l.push(w)}else{l={};for(var w,V,k=0,D=s.length;k<D;k++)V=s[k],t.hasOwnProperty(V)?w=LS(e,t[V]):w=null,l[V]=w}return l};const DG=Phaser.Math.DegToRad,FS=DG(180);var IG=function(e,t){var s=t.back;s&&(e.orientation===0?s.transformVerts(0,0,0,0,FS,0):s.transformVerts(0,0,0,FS,0,0))};const vv=Phaser.Utils.Objects.GetValue,LG=Phaser.Math.Linear;let FG=class extends zn{constructor(e,t){super(e,t),this.resetFromJSON(t),this.boot()}resetFromJSON(e){return super.resetFromJSON(e),this.setEase(vv(e,"ease","Cubic")),this.setFrontToBackDirection(vv(e,"frontToBack",0)),this.setBackToFrontDirection(vv(e,"backToFront",1)),this}setFrontToBackDirection(e){return typeof e=="string"&&(e=BS[e]),this.endAngleFB=e===0?180:-180,this}setBackToFrontDirection(e){return typeof e=="string"&&(e=BS[e]),this.endAngleBF=e===0?-180:180,this}start(e,t){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(e);var s=t+1,l=this.parent;return l.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*s):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*s),super.start(),this}flip(e,t){return this.isRunning?this:(e===void 0&&(e=this.duration),t===void 0&&(t=0),this.start(e,t),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+t+1)%2,this)}flipRight(e,t){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(e,t),this}flipLeft(e,t){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(e,t),this}updateTarget(e,t){var s=this.easeFn(t.t),l=LG(this.startAngle,this.endAngle,s);e.orientation===0?e.angleY=l:e.angleX=l}};const BS={right:0,"left-to-right":0,left:1,"right-to-left":1},BG=Phaser.Utils.Objects.IsPlainObject,aa=Phaser.Utils.Objects.GetValue,NG=["back","front"];class YG extends kG{constructor(t,s,l,w){BG(s)&&(w=s,s=aa(w,"x",0),l=aa(w,"y",0));var S=RG(t,w,NG),k=S.back,D=S.front,V=aa(w,"width"),G=aa(w,"height");if(V===void 0||G===void 0){if(V===void 0){var j=D?D.width:0,tt=k?k.width:0;V=Math.max(j,tt)}if(G===void 0){var st=D?D.height:0,rt=k?k.height:0;G=Math.max(st,rt)}}super(t,s,l,V,G,S),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,Ys(S,function(ut,ct){this[`${ct}Face`]=ut},this);var ot=aa(w,"flip",void 0);ot!==!1&&(this.flip=new FG(this,ot)),this.setOrientation(aa(w,"orientation",0)),IG(this,S),this.setFace(aa(w,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,Ys(this.faces,function(s){s.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,Ys(this.faces,function(s){s.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,Ys(this.faces,function(s){s.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=VG[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=zG[t]),this.currentFaceIndex=t;var s=t===1,l=s?180:0;this.orientation===0?this.angleY=l:this.angleX=l}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const VG={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},zG={front:0,back:1};Phaser.Utils.Objects.GetValue,Phaser.Math.RadToDeg,Phaser.Math.DegToRad,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Angle.ShortestBetween,Phaser.Math.Wrap,Phaser.Math.Linear,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.DegToRad,Phaser.Math.RadToDeg,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Linear,Phaser.Math.Wrap,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.Wrap;const GG=Phaser.Utils.Objects.GetValue;var UG=function(e,t,s){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=GG(s,"useParentBounds",!1),t.setPosition(e.x,e.y).setVisible(!1),e.pin(t)},NS=function(e,t){if(!e)return!1;for(var s=t.visibleSibling,l=0,w=s.length;l<w;l++)e.setChildVisible(s[l],!0);return s.length=0,e.setChildVisible(t,!1),t.isRunning=!1,!0},WG=function(e,t){if(!e)return!1;NS(e,t);var s=t.useParentBounds;af({gameObjects:e.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:s?e.displayWidth:void 0,height:s?e.displayHeighth:void 0,originX:s?e.originX:void 0,originY:s?e.originY:void 0}),e.setChildVisible(t,!0);for(var l=t.visibleSibling,w=e.children,S=0,k=w.length;S<k;S++){var D=w[S];D.visible&&D!==t&&(e.setChildVisible(D,!1),l.push(D))}return t.isRunning=!0,!0},YS=function(e){return class extends e{constructor(t,s){var l=t.scene;super(l,0,0,1,1,s),l.add.existing(this),UG(t,this,s)}destroy(t){!this.scene||this.ignoreDestroy||(this.exit(),super.destroy(t))}enter(){var t=WG(this.rexContainer.parent,this);return t&&this.syncSize(),this}exit(){return NS(this.rexContainer.parent,this),this}}};class VS extends YS(IS){get perspectiveState(){return this.isRunning}}const XG=Phaser.Utils.Objects.GetValue;var jG=function(e){var t=this.scene;this.setSnapshotPadding(XG(e,"snapshotPadding",0)),e=Ms(e),delete e.width,delete e.height,e.front={width:1,height:1},e.back={width:1,height:1};var s=new YG(t,e);t.add.existing(s);var l=s.flip;if(l){var w=this;l.on("start",function(){w.enterPerspectiveMode()}).on("complete",function(){w.exitPerspectiveMode()})}return s};const HG=["front","back"];var $G={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var e=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,e),this.setChildVisible(this.childrenMap.back,!e),this},setSnapshotPadding(e){return this.snapshotPadding=e,this},snapshotFace(e){typeof e=="number"&&(e=HG[e]);var t=this.perspectiveCard.faces[e],s=this.childrenMap[e];t.rt.clear();var l=s.visible;s.visible=!0;var w=s.isRexContainerLite?s.getAllVisibleChildren():s;return t.snapshot(w,{padding:this.snapshotPadding}),s.visible=l,this}};const zS=Phaser.Utils.Objects.GetValue;class mv extends fs{constructor(t,s){super(t,s),this.type="rexPerspectiveCard";var l=s.back,w=zS(s,"expand.back",!0);this.add(l,{key:"back",expand:w});var S=s.front,k=zS(s,"expand.front",!0);this.add(S,{key:"front",expand:k}),this.perspectiveCard=jG.call(this,s),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var s=t===0,l=this.childrenMap.front,w=this.childrenMap.back;this.setChildVisible(l,s),this.setChildVisible(w,!s)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,s,l,w,S,k){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,s,l,w,S,k),this}forEachFace(t,s,l){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,s,l),this}}Object.assign(mv.prototype,$G),T.register("perspectiveCard",function(e){var t=new mv(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.PerspectiveCard",mv);var qG=function(e){var t=this.getElement("tabs.buttons");if(!(e>=t.length))return t[e].name},KG=function(e){for(var t=this.getElement("tabs.buttons"),s=0,l=t.length;s<l;s++)if(t[s].name===e)return s};const QG=Phaser.Utils.Objects.IsPlainObject,yv=Phaser.Utils.Objects.GetValue,JG=Phaser.Utils.String.UUID;var ZG=function(e,t,s){if(QG(e)){var l=e;e=yv(l,"key"),t=yv(l,"tab"),s=yv(l,"page")}return e||(e=JG()),t.name=e,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(s,{key:e}),this},tU=function(e,t){var s;if(typeof e=="number"?s=e:s=this.getPageIndex(e),s!=null){var l;t!==void 0&&(l=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(s),l!==void 0&&(this.childrenMap.pages.fadeInDuration=l)}return this},eU=function(e){return this.swapPage(0,e),this},iU=function(e){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,e),this},sU={swapPage:tU,swapFirstPage:eU,swapLastPage:iU},rU={removePage(e,t){typeof e=="number"&&(e=this.getPageKey(e));var s=this.childrenMap.tabs,l=s.getByName(e),w=this.childrenMap.pages,S=w.getElement(e);return!l||!S?this:(w.removeChildrenMap(e),s.removeButton(l,t),w.remove(S,t),this)},removeAllPages(e){for(var t=this.getElement("tabs.buttons"),s=t.length-1;s>=0;s--)this.removePage(t[s].name,e);return this}},nU=function(e){return typeof e=="number"&&(e=this.getPageKey(e)),this.childrenMap.pages.getPage(e)},aU=function(e){var t;return typeof e=="number"?t=e:t=this.getPageIndex(e),this.getElement("tabs.buttons")[t]},oU={top:1,left:3,right:5,bottom:7},GS={top:"bottom",left:"right",right:"left",bottom:"top"},hU=function(e){var t=oU[e];if(t===void 0)return this;var s=this.childrenMap.tabs,l=this.sizerChildren.indexOf(s);if(l===t)return this;this.sizerChildren[l]=null,this.sizerChildren[t]=s;var w=this.getSizerConfig(s).padding,S=GS[this.tabsPosition],k=GS[e];return w[k]=w[S],w[S]=0,this.tabsPosition=e,this},lU={setTabsPadding(e,t){var s=this.childrenMap.tabs;return s.setOuterPadding(e,t),this},getTabsPadding(e){var t=this.childrenMap.tabs;return t.getOuterPadding(e)}},US={getPageKey:qG,getPageIndex:KG,addPage:ZG,getPage:nU,getTab:aU,setTabPosition:hU};Object.assign(US,sU,rU,lU);const Vs=Phaser.Utils.Objects.GetValue,WS=Fs.prototype.add;let jc=class extends Fs{constructor(e,t){t===void 0&&(t={}),t.column=3,t.row=3,t.columnProportions=[0,0,0],t.rowProportions=[0,0,0];var s=Vs(t,"expand.pages",!0);s&&(t.columnProportions[1]=1,t.rowProportions[1]=1),super(e,t),this.type="rexTabPages";var l=Vs(t,"background",void 0);l&&this.addBackground(l);var w=Vs(t,"pages"),S=new Uc(e,w);e.add.existing(S);var k=Vs(t,"tabsPosition",void 0);k===void 0&&(k=Vs(t,"tabPosition","top"));var D=Vs(t,"wrapTabs",!1),V=D?mn:ui,G=Vs(t,"tabs",void 0);G===void 0&&(G={}),G.orientation=k==="top"||k==="bottom"?"x":"y",G.buttonsType="radio",!D&&!G.hasOwnProperty("expand")&&(G.expand=Vs(t,"expand.tabs",!1));var j=new V(e,G);e.add.existing(j),WS.call(this,S,{column:1,row:1,expand:s});var tt,st,rt=Vs(t,"space.item",0);switch(k){case"top":tt=1,st=0,rt={bottom:rt};break;case"bottom":tt=1,st=2,rt={top:rt};break;case"left":tt=0,st=1,rt={right:rt};break;case"right":tt=2,st=1,rt={left:rt};break}WS.call(this,j,{column:tt,row:st,padding:rt,expand:D?!0:Vs(t,"expand.tabs",!1),align:Vs(t,"align.tabs","left")}),this.addChildrenMap("background",l),this.addChildrenMap("tabs",j),this.addChildrenMap("pages",S),this.tabsPosition=k,j.on("button.click",function(ot){var ut=ot.name;S.hasPage(ut)&&S.swapPage(ut)}),j.on("button.statechange",function(ot,ut,ct,pt){var mt=ct?"tab.focus":"tab.blur";this.emit(mt,ot,ot.name)},this),S.on("pagevisible",function(ot,ut,ct){this.emit("page.focus",ot,ut)}),S.on("pageinvisible",function(ot,ut,ct){this.emit("page.blur",ot,ut)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(e){this.showPage(e)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(jc.prototype,US),T.register("tabPages",function(e){var t=new jc(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.TabPages",jc);class uU extends Iu{constructor(t,s){s===void 0&&(s={}),s.destroy=!1,super(t,s)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var cU={expand(e){if(this.expanded===!0)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,s=this.childrenMap.child;if(this.show(s),this.reLayoutEnable){var l=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();l.layout()}return t.emit("folder.expand",e,this),s.emit("folder.expand",e,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,e),this},collapse(e){if(this.expanded===!1)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,s=this.childrenMap.child;return t.emit("folder.collapse",e,this),s.emit("folder.collapse",e,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){if(this.setChildScale(s,1,1).hide(s),this.reLayoutEnable){var l=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();l.layout()}this.emit("collapse.complete",this)},this).requestClose(null,e),this},toggle(e){return this.expanded?this.collapse(e):this.expand(e),this},setExpandedState(e){return this.reLayoutEnable=!1,e===void 0?this.expanded=void 0:e?this.expand(0):this.collapse(0),this.reLayoutEnable=!0,this}},dU=function(e,t){kr.popUp.call(e,t,this.expandDirection)},pU=function(e,t){kr.scaleDown.call(e,t,this.expandDirection)},fU={setTransitionDuration(e){return this.transitionDuration=e,this.childTransition.setTransitInTime(e).setTransitOutTime(e),this},setExpandCallback(e){return e===void 0&&(e=dU.bind(this)),this.childTransition.setTransitInCallback(e),this},setCollapseCallback(e){return e===void 0&&(e=pU.bind(this)),this.childTransition.setTransitOutCallback(e),this}};const $e=Phaser.Utils.Objects.GetValue;let tl=class extends Zt{constructor(e,t){t===void 0&&(t={}),t.hasOwnProperty("orientation")||(t.orientation=1),super(e,t),this.type="rexFolder",this.reLayoutEnable=!0,this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var s=t.background,l=t.title,w=t.child;s&&this.addBackground(s);var S=$e(t,"space"),k=this.orientation===1?"left":"top",tt=$e(t,"align.title",k),st=$e(t,"expand.title",!0);this.add(l,{proportion:0,align:tt,expand:st,padding:{left:$e(S,"titleLeft",0),right:$e(S,"titleRight",0),top:$e(S,"titleTop",0),bottom:$e(S,"titleBottom",0)}});var D=$e(t,"toggleByTarget",void 0),V=$e(t,"toggleClickConfig");D===void 0&&(D=l),D&&Bf.onClick.call(D,function(){this.toggle()},this,V),this.childTransition=new uU(w);var G=$e(t,"customChildOrigin",!1);if(!G){var j=this.rtl?1:0;w.setOrigin(j)}var tt=$e(t,"align.child","left"),st=$e(t,"expand.child",!0),rt=st?1:0;this.add(w,{proportion:rt,align:tt,expand:st,padding:{left:$e(S,"childLeft",0),right:$e(S,"childRight",0),top:$e(S,"childTop",0),bottom:$e(S,"childBottom",0)}}),this.addChildrenMap("title",l),this.addChildrenMap("child",w),this.addChildrenMap("background",s);var ot=t.transition;this.setTransitionDuration($e(ot,"duration",200)),this.setExpandCallback($e(ot,"expandCallback",void 0)),this.setCollapseCallback($e(ot,"collapseCallback",void 0)),this.reLayoutTarget=$e(t,"reLayoutTarget",void 0);var ut=t.onExpandStart;ut&&this.on("expand.start",ut);var ct=t.onExpandComplete;ct&&this.on("expand.complete",ct);var pt=t.onCollapseStart;pt&&this.on("collapse.start",pt);var mt=t.onCollapseComplete;mt&&this.on("collapse.complete",mt);var yt=$e(t,"expanded",void 0);yt!==void 0&&this.setExpandedState(yt)}};Object.assign(tl.prototype,cU,fU),T.register("folder",function(e){var t=new tl(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Folder",tl);var gU=function(e,t,s,l){for(var w in this.treesMap){var S=this.treesMap[w];if(Kn(S.nodeBody,e,t,s,l))return S;var k=S.pointToChild(e,t,s,l);if(k)return k}return null},vU=function(e){return e===void 0&&(e={}),e.targetMode="parent",e.targetSizers=[this],qu(this,e),this},XS=function(e){return class extends e{get isTree(){return!1}get isNode(){return!1}setText(t){return this.text=t,this}get text(){var t=this.nodeBody;return t.text}set text(t){var s=this.nodeBody;s.setText&&s.setText(t)}setTexture(t,s){var l=this.nodeBody;return l.setTexture&&l.setTexture(t,s),this}get texture(){var t=this.nodeBody;if(t)return t.texture}get frame(){var t=this.nodeBody;if(t)return t.frame}}},mU=function(e,t,s,l){for(var w in this.nodesMap){var S=this.nodesMap[w];if(this.isTreeObject(S)){var k=S;if(Kn(k.nodeBody,e,t,s,l))return k;var D=k.pointToChild(e,t,s,l);if(D)return D}else if(Kn(S,e,t,s,l))return S}return null},yU={getTreePatent(e){if(e===void 0&&(e=this),!!e.rexSizer)return e.rexSizer.treeParent},getTreeRoot(e){e===void 0&&(e=this);for(var t;;){if(!e.rexSizer)return;if(t=e.rexSizer.treeParent,t===null)return e;e=t}},getTreesSizer(e){var t=this.getTreeRoot(e);return t?t.getParentSizer():null},isGrandsonNode(e){if(e===void 0||!e.rexSizer)return!1;for(var t;;){if(!e.rexSizer)return!1;if(t=e.rexSizer.treeParent,t===this)return!0;if(t===null)return!1;e=t}return!1}},el=function(e,t,s,l,w=!1){var S;if(Ui(t))S=t,delete t[key];else if(Os(t)){var k=t;S=k(e,s),S&&e.add.existing(S)}else(w||t)&&l&&(S=l(e,t,s));return S},xv=function(e,t,s){var l=ri(e,t);return l},xU=function(e,t,s){var l=new Uh(e,t);return e.add.existing(l),l.resetDisplayContent(""),l};const uo=Phaser.Utils.Objects.GetValue;class jS extends XS(Zt){constructor(t,s,l){var w=s.space;super(t,{orientation:"x",space:{left:uo(w,"nodeLeft",0),right:uo(w,"nodeRight",0),top:uo(w,"nodeTop",0),bottom:uo(w,"nodeBottom",0)}}),this.type="rexTreeNode";var S=el(t,uo(s,"nodeBackground"),l,xv,!1),k=el(t,uo(s,"nodeBody"),l,xU,!0);S&&this.addBackground(S),this.add(k,{proportion:1}),this.nodeBody=k,this.addChildrenMap("background",S),this.addChildrenMap("nodeBody",k)}get isNode(){return!0}getTreePatent(){return this.rexSizer.treeParent}getTreeRoot(){var t=this.rexSizer.treeParent;return t?t.getTreeRoot():null}getTreesSizer(){var t=this.getTreeRoot();return t?t.getParentSizer():null}}var HS=function(e,t){var s=e.parentContainer;if(s){t.isRexContainerLite?t.addToContainer(s):s.add(t);return}var l=e.displayList;if(Zo(l)){t.isRexContainerLite?t.addToLayer(l):l.add(t);return}e.scene.add.existing(t)};const $S=Phaser.Utils.String.UUID;var bU={addTree(e,t){if(Ui(e)){var s=e;e={nodeBody:s,nodeKey:t}}return this.insertTree(void 0,e)},insertTree(e,t){var s;typeof t=="string"?(s=t,t=void 0):t&&(s=t.nodeKey,delete t.nodeKey),s===void 0&&(s=$S());var l=this.createTree(t);return HS(this,l),this.insertNode(e,l,{expand:!0}),l._postAddCallback(),l},addNode(e,t){return this.insertNode(void 0,e,t)},insertNode(e,t,s){var l;Ui(t)||(s=t,t=new jS(this.scene,this.configSave,{isLeaf:!0})),typeof s=="string"?(l=s,s=void 0):s&&(l=s.nodeKey,delete s.nodeKey),l===void 0&&(l=$S()),s===void 0&&(s={}),s.hasOwnProperty("expand")||(s.expand=!0),this.removeNode(t,!1),t.rexSizer.treeParent=this,this.nodesMap.hasOwnProperty(l)&&(console.error(`[Trees] Duplicate nodeKey '${l}'`),this.removeNode(this.nodesMap[l],!0)),t.nodeKey=l,this.nodesMap[l]=t;var w=this.childrenMap.child;return w.insert(e,t,s),t}},wU={removeNode(e,t){if(typeof e=="string"&&(e=this.getTree(e)),!e)return this;var s=this.getTreePatent(e);if(!s)return this;delete s.nodesMap[e.nodeKey],e.nodeKey=null,e.rexSizer.treeParent=null;var l=s.childrenMap.child;return l.remove(e,t),this},removeAllNodes(e){var t=this.nodesMap;for(var s in t)this.removeNode(t[s],e);return this}},SU={getNode(e){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){var t=e.shift(),s=this.nodesMap[t];return e.length===0?s:s&&this.isTreeObject(s)?s.getNode(e):null}},getNodes(e){var t=this.nodesMap;if(!e)e=nodes;else for(var s in t)e.push(t[s]);return e},getAllNodes(e){}},qS={pointToChild:mU};Object.assign(qS,yU,bU,wU,SU);var TU=function(e,t,s){var l=new vh(e,t);return e.add.existing(l),l.on("expand.start",function(w){w.setDirection("down")}).on("collapse.complete",function(w){w.setDirection("right")}),l};const KS=Phaser.Utils.Objects.GetValue;var CU=function(e,t){var s=new jS(e,t,{isLeaf:!1});e.add.existing(s);var l=el(e,KS(t,"toggleButton"),{isLeaf:!1},TU,!0);return s.insert(0,l,{padding:{right:KS(t,"space.toggleButton",0)},fitRatio:1}),s.addChildrenMap("toggleButton",l),s};const QS=Phaser.Utils.Objects.GetValue;var PU=function(e,t){var s=new Zt(e,{orientation:QS(t,"childrenOrientation","y")});e.add.existing(s);var l=el(e,QS(t,"childrenBackground"),{isLeaf:!1},xv,!1);return l&&s.addBackground(l),s};const MU=Phaser.Utils.Objects.Clone;var _U=function(e,t){var s=e?MU(e):{};if(!t)return s;for(var l in t)s[l]=t[l];return s};const bn=Phaser.Utils.Objects.GetValue;class oa extends XS(tl){constructor(t,s){s===void 0&&(s={});var l=el(t,bn(s,"background"),{isLeaf:!1},xv,!1),w=PU(t,s),S=w.childrenMap.items,k=CU(t,s),D=k.childrenMap.toggleButton,V=k.childrenMap.nodeBody,G=Wn(bn(s,"orientation","y")),j=s.space;if(j){var tt=bn(j,"indent",0);j.childLeft=bn(j,"indentLeft",G===1?tt:0),j.childRight=bn(j,"indentRight",0),j.childTop=bn(j,"indentTop",G===0?tt:0),j.childBottom=bn(j,"indentBottom",0)}var st={background:l,title:k,child:w,toggleByTarget:D,transition:s.transition,orientation:G,space:j,align:s.align,expand:s.expand};super(t,st),this.type="rexTree",this.rexSizer.treeParent=null,this.nodesMap={},this.configSave=s,this.nodeBody=V,this.addChildrenMap("toggleButton",D),this.addChildrenMap("nodeBody",V),this.addChildrenMap("childrenNodes",S),this.on("expand.start",function(){D.emit("expand.start",D),Hc(this,"expand.start")},this).on("expand.complete",function(){D.emit("expand.complete",D),Hc(this,"expand.complete")}).on("collapse.start",function(){D.emit("collapse.start",D),Hc(this,"collapse.start")}).on("collapse.complete",function(){D.emit("collapse.complete",D),Hc(this,"collapse.complete")});var rt=this;rt._postAddCallback=function(){var ot=bn(s,"expanded",!0);ot!==void 0&&rt.setExpandedState(ot),delete rt._postAddCallback}}destroy(t){!this.scene||this.ignoreDestroy||(this.configSave=void 0,Clear(this.nodesMap),this.nodesMap=void 0,super.destroy(t))}get isTree(){return!0}createTree(t){return oa.CreateTree(this.scene,this.configSave,t)}isTreeObject(t){return t&&t instanceof oa}}oa.CreateTree=function(e,t,s){return new oa(e,_U(t,s))};var Hc=function(e,t){var s=e.getTreesSizer();s&&s.emit(t,e)};Object.assign(oa.prototype,qS);const kU=Phaser.Utils.String.UUID;var OU={addTree(e){if(Ui(e)){var t=e;e={nodeBody:t,nodeKey}}return this.insertTree(void 0,e)},insertTree(e,t){var s;typeof t=="string"?(s=t,t=void 0):t&&(s=t.nodeKey,delete t.nodeKey),s===void 0&&(s=kU());var l=oa.CreateTree(this.scene,this.treeConfig,t);return HS(this,l),l.nodeKey=s,this.treesMap[s]=l,this.insert(e,l,{expand:!0}),l._postAddCallback(),l}},EU={removeTree(e,t){return typeof e=="string"&&(e=this.getTree(e)),e?(delete this.treesMap[e.nodeKey],e.nodeKey=null,this.remove(e,t),this):this},removeAllNodes(e){var t=this.treesMap;for(var s in t)this.removeTree(t[s],e);return this}},AU={getTree(e){return this.treesMap[e]},getTrees(e){e===void 0&&(e=[]);for(var t in this.treesMap)e.push(this.treesMap[t]);return e},getNode(e){var t=e.indexOf(".");if(t===-1)return this.getTree(e);var s=this.getTree(e.substring(0,t));if(s)return s.getNode(e.substring(t+1))}},JS={pointToChild:gU,setChildrenInteractive:vU};Object.assign(JS,OU,EU,AU);const RU=Phaser.Utils.Objects.GetValue;class bv extends Zt{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation="y"),super(t,s),this.type="rexTrees",this.treesMap={},this.treeConfig=RU(s,"tree")}destroy(t){!this.scene||this.ignoreDestroy||(this.treeConfig=void 0,Clear(this.treesMap),this.treesMap=void 0,super.destroy(t))}}Object.assign(bv.prototype,JS),T.register("trees",function(e){var t=new bv(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Trees",bv),T.register("textArea",function(e){var t=new Gh(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.TextArea",Gh);var DU=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textVisibleHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.contentHeight}})},IU={setText(e){var t=this.childrenMap.child;return t.setText(e),this},appendText(e){return this.setText(this.text+e),this}},LU={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}};const $c=Phaser.Utils.Objects.GetValue;class qc extends zh{constructor(t,s){s===void 0&&(s={});var l=$c(s,"text"),w;Ui(l)?w=l:(l===void 0&&(l={}),l.textArea=!0,w=new oh(t,l),t.add.existing(w)),DU(w);var S=l.width===void 0,k=l.height===void 0;S&&(w.minWidth=0),k&&(w.minHeight=0),s.scrollMode=0,s.type="rexTextAreaInput",s.child={gameObject:w,expandWidth:S,expandHeight:k};var D=$c(s,"space",void 0);D&&(D.child=$c(D,"text",0)),s.scroller=!1,super(t,s),this.addChildrenMap("text",w);var V,G;w.on("cursorin",function(){var tt=w.textOY,st=w.contentHeight,rt=V!==tt,ot=G!==st;V=tt,G=st,ot&&this.resizeController(),(rt||ot)&&(this.t=w.t)},this),w.on("textchange",function(tt){this.emit("textchange",tt,this)},this).on("close",function(){this.emit("close",this.text,this)},this);var j=$c(s,"content",void 0);j&&this.setText(j)}get text(){return this.childrenMap.child.text}set text(t){t==null?t="":t=t.toString(),this.childrenMap.child.text!==t&&this.setText(t)}get lineHeight(){var t=this.childrenMap.child;return t.lineHeight}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.contentHeight}get readOnly(){var t=this.childrenMap.child;return t.readOnly}set readOnly(t){var s=this.childrenMap.child;s.readOnly=t}setReadOnly(t){var s=this.childrenMap.child;return s.setReadOnly(t),this}get value(){return this.text}set value(t){this.text=t}}Object.assign(qc.prototype,IU,LU),T.register("textAreaInput",function(e){var t=new qc(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.TextAreaInput",qc),T.register("scrollablePanel",function(e){var t=new qh(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.ScrollablePanel",qh);var Kc={popUp:function(e,t){e.popUp(t)},scaleDown:function(e,t){e.scaleDown(t)},fadeIn:function(e,t){e.fadeIn(t)},fadeOut:function(e,t){e.fadeOut(t)}};const wn={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var FU={setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){switch(typeof e=="string"&&(e=wn[e]),e){case wn.popUp:e=Kc.popUp;break;case wn.fadeIn:e=Kc.fadeIn;break}return e||(e=n),this.transitInCallback=e,this},setTransitOutCallback(e){switch(typeof e=="string"&&(e=wn[e]),e){case wn.scaleDown:e=Kc.scaleDown;break;case wn.fadeOut:e=Kc.fadeOut;break}return e||(e=n),this.transitOutCallback=e,this}},BU={showMessage(e){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),e===void 0){if(this.messages.length===0)return this;e=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(e),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof e=="string"?this.setText(e):e(this),this.layout();var t=[[0,[this.transitInCallback,this,this.transitInTime]],[0,[this.emit,"transitin",this,this.transitInTime]],[this.transitInTime,[n]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[0,[this.emit,"transitout",this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[n]]];return this.player.load(t,this).once("complete",function(){this.showMessage()},this).start(),this},removeAllMessages(){return this.messages.length=0,this}};const il=Phaser.Utils.Objects.GetValue;class wv extends Lr{constructor(t,s){s===void 0&&(s={text:createDefaultTextObject(t)}),super(t,s),this.type="rexToast",this.setTransitInTime(il(s,"duration.in",200)),this.setDisplayTime(il(s,"duration.hold",1200)),this.setTransitOutTime(il(s,"duration.out",200)),this.setTransitInCallback(il(s,"transitIn",wn.popUp)),this.setTransitOutCallback(il(s,"transitOut",wn.scaleDown)),this.player=new kw(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||this.ignoreDestroy||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setScale(t,s){return s===void 0&&(s=t),this.scaleX0=t,this.scaleY0=s,super.setScale(t,s),this}get isShowingMessage(){return this.player.isPlaying}}Object.assign(wv.prototype,FU,BU),T.register("toast",function(e){var t=new wv(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Toast",wv);var NU={"bottom-to-top":1,"top-to-bottom":0,"right-to-left":1,"left-to-right":0},YU={setQueueDirection(e){return typeof e=="string"&&(e=NU[e]),this.rtl=e===0,this.orientation===1?e?this.queueDirection=0:this.queueDirection=1:e?this.queueDirection=2:this.queueDirection=3,this},setCreateMessageLabelCallback(e){return this.createMessageLabelCallback=e,this},setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){return e||(e=n),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=n),this.transitOutCallback=e,this}};const VU=Bf.onClick,ZS=w1.delayCall,zU=Du.moveTo;var GU=function(e,t,s){var l=t(e.scene,s,e);if(VU.call(l,function(){e.removeMessage(l)}),e.displayTime){var w=e.transitInTime+e.displayTime+10;ZS.call(l,w,function(){e.removeMessage(l)})}return l},tT=function(e){for(var t=e.childrenMap.items,s,l=[],w=0,S=t.length;w<S;w++)s=t[w],l.push({x:s.x,y:s.y});return l},UU=function(e){for(var t=e.childrenMap.items,s,l=[],w=0,S=t.length;w<S;w++)s=t[w],l.push({x:s.scaleX,y:s.scaleY}),s.setScale(1);e.layout();for(var k=tT(e),w=0,S=t.length;w<S;w++){var D=l[w];t[w].setScale(D.x,D.y)}return k},WU=function(e,t,s,l){for(var w=e.childrenMap.items,S=Math.min(t.length,s.length,w.length),k,D,V,G=e.queueDirection,j=0;j<S;j++){switch(k=w[j],D=t[j],V=s[j],k.setPosition(D.x,D.y),G){case 0:if(D.y<=V.y)continue;break;case 1:if(D.y>=V.y)continue;break;case 2:if(D.x<=V.x)continue;break;case 3:if(D.x>=V.x)continue;break}zU.call(k,l,V.x,V.y)}},XU=function(e,t,s){var l=tT(e);e.add(t);var w=UU(e);WU(e,l,w,s),e.transitInCallback(t,s,e)},jU={showMessage(e){var t=GU(this,this.createMessageLabelCallback,e);return XU(this,t,this.transitInTime),this},removeMessage(e){if(this.getParentSizer(e)!==this)return this;if(!e.__isDestroying){e.__isDestroying=!0;var t=this.transitOutTime;return this.transitOutCallback(e,t,this),ZS.call(e,t+10,function(){delete e.__isDestroying,e.destroy()}),this}},removeAllMessages(){for(var e=this.childrenMap.items,t=0,s=e.length;t<s;t++)this.removeMessage(e[t]);return this}},eT={};Object.assign(eT,YU,jU);var iT={transitIn(e,t,s){switch(s.queueDirection){case 0:e.setOrigin(.5,1),kr.popUp.call(e,t,"y");break;case 1:e.setOrigin(.5,0),kr.popUp.call(e,t,"y");break;case 2:e.setOrigin(1,.5),kr.popUp.call(e,t,"x");break;case 3:e.setOrigin(0,.5),kr.popUp.call(e,t,"x");break}Ch.fadeIn.call(e,t)},transitOut(e,t,s){Ch.fadeOut.call(e,t)}};const ha=Phaser.Utils.Objects.GetValue;class Sv extends Zt{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1),super(t,s),this.type="rexToastQueue",this.setCreateMessageLabelCallback(ha(s,"createMessageLabelCallback")),this.setQueueDirection(ha(s,"queueDirection",1)),this.setTransitInTime(ha(s,"duration.in",200)),this.setDisplayTime(ha(s,"duration.hold",2e3)),this.setTransitOutTime(ha(s,"duration.out",200)),this.setTransitInCallback(ha(s,"transitIn",iT.transitIn)),this.setTransitOutCallback(ha(s,"transitOut",iT.transitOut))}}Object.assign(Sv.prototype,eT),T.register("toastQueue",function(e){var t=new Sv(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.ToastQueue",Sv);var HU=function(e,t){if(t===!1)return null;if(Ui(t))return t;var s=new Dn(e,t);return e.add.existing(s),s};const $U=Phaser.Utils.String.Pad;var sT=function(e,t){t===void 0&&(t="0x");var s=e.toString(16).toUpperCase();return s=$U(s,6,0,1),s=t+s,s},qU=function(e,t){e&&(e.setTint?e.setTint(t):e.setFillStyle&&e.setFillStyle(t))};const bs=Phaser.Utils.Objects.GetValue,KU=Phaser.Utils.Objects.IsPlainObject,QU=Phaser.Math.Clamp;let Tv=class extends Zt{constructor(e,t){t===void 0&&(t={}),t.orientation=0,super(e,t),this.type="rexColorInputLite";var s=bs(t,"background",void 0),l=bs(t,"swatch"),w;KU(l)&&(w=bs(l,"size"));var S=HU(e,bs(t,"swatch")),k=bs(t,"inputText",{}),D;if(k&&(D=yn(e,k)),s&&this.addBackground(s),S){w=bs(t,"swatchSize",w);var V;w!==void 0?(Si(S,w,w),V=!1):V=bs(t,"squareExpandSwatch",!0);var G=V?1:0;this.add(S,{proportion:0,expand:!0,fitRatio:G})}if(D){var j=bs(k,"width")===void 0?1:0,tt=bs(k,"height")===void 0;this.add(D,{proportion:j,expand:tt})}this.addChildrenMap("background",s),this.addChildrenMap("swatch",S),this.addChildrenMap("inputText",D),D&&D.on("close",function(){this.setValue(D.value)},this);var st=bs(t,"valuechangeCallback",null);if(st!==null){var rt=bs(t,"valuechangeCallbackScope",void 0);this.on("valuechange",st,rt)}this.setValue(bs(t,"value",0))}get value(){return this._value}set value(e){if(typeof e=="string"){if(e=Wp(e),e==null){var t=this.childrenMap.inputText;t&&t.setText(sT(this._value));return}}else e=QU(Math.floor(e),0,16777215);if(this._value!==e){this._value=e;var s=this.childrenMap.swatch;s&&qU(s,e);var t=this.childrenMap.inputText;t&&t.setText(sT(e)),this.emit("valuechange",this._value)}}setValue(e){return this.value=e,this}get color(){return this._value}set color(e){this.value=e}setColor(e){return this.color=e,this}};var JU={setCreateColorPickerBackgroundCallback(e){return this.colorPickerCreateBackgroundCallback=e,this},setColorPickerHPalettePosition(e){return this.colorPickerHPalettePosition=e,this},setColorPickerExpandDirection(e){return typeof e=="string"&&(e=ZU[e]),this.colorPickerExpandDirection=e,this},setColorPickerEaseInDuration(e){return e===void 0&&(e=0),this.colorPickerEaseInDuration=e,this},setColorPickerEaseOutDuration(e){return e===void 0&&(e=0),this.colorPickerEaseOutDuration=e,this},setColorPickerTransitInCallback(e){return this.colorPickerTransitInCallback=e,this},setColorPickerTransitOutCallback(e){return this.colorPickerTransitOutCallback=e,this},setColorPickerBounds(e){return this.colorPickerBounds=e,this},setColorPickerWidth(e){return this.colorPickerWidth=e,this},setColorPickerHeight(e){return this.colorPickerHeight=e,this},setColorPickerSize(e,t){return this.setColorPickerWidth(e).setColorPickerHeight(t),this},setColorPickerSpace(e){return e===void 0&&(e={}),this.colorPickerSpace=e,this},setColorComponentsHeight(e){return this.colorComponentsHeight=e,this},setColorComponentsFormatLabelConfig(e){return this.colorComponentsFormatLabelConfig=e,this},setColorComponentsInputTextConfig(e){return this.colorComponentsInputTextConfig=e,this},setColorComponentsSpace(e){return e===void 0&&(e={}),this.colorComponentsSpace=e,this}};const ZU={down:0,up:1},rT=Phaser.Display.Color,Qc=Phaser.Math.Percent;var tW=function(e,t,s){s===void 0&&(s=!1);var l=e.width,w=e.height,S=new rT;if(s)for(var k=0;k<w;k++){var D=Qc(k,0,w);S.setFromHSV(D,1,1),t.fillStyle=S.rgba,t.fillRect(0,k,l,1)}else for(var V=0;V<l;V++){var D=Qc(V,0,l);S.setFromHSV(D,1,1),t.fillStyle=S.rgba,t.fillRect(V,0,1,w)}},eW=function(e,t,s){for(var l=e.width,w=e.height,S=t.getImageData(0,0,l,w),k=S.data,D=new rT,V=0;V<w;V++)for(var G=0;G<l;G++){var j=Qc(G,0,l),tt=1-Qc(V,0,w);D.setFromHSV(s,j,tt);var st=(V*l+G)*4;k[st]=D.red,k[st+1]=D.green,k[st+2]=D.blue,k[st+3]=255}t.putImageData(S,0,0)};const iW=Phaser.Display.Color,nT=Phaser.Math.Percent,sW=Phaser.Display.Color.ColorToRGBA,rW=Phaser.Display.Color.HSVToRGB;class nW extends Un{constructor(t,s,l,w,S,k){s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=2),S===void 0&&(S=2),super(t,s,l,w,S),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new iW,this.setOrientation(k),this.setSize(w,S)}setOrientation(t){return this.orientation=Wn(t),this}updateTexture(){return tW(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,s){return t===void 0?this.hue:(this.orientation===0?this.hue=nT(t,0,this.width):this.hue=nT(s,0,this.height),this.hue)}getColor(t,s){if(t===void 0)return this.color;var l=this.getHue(t,s);return this.colorObject.setFromRGB(rW(l,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,s){return s===void 0?s={}:s===!0&&(Cv===void 0&&(Cv={}),s=Cv),this.colorObject.setFromRGB(sW(t)),this.orientation===0?(s.x=this.width*this.colorObject.h,s.y=this.height/2):(s.x=this.width/2,s.y=this.height*this.colorObject.h),s}}var Cv=void 0,aW=Phaser.Math.RotateAround,aT=function(e,t,s,l){l===void 0?l={}:l===!0&&(Pv===void 0&&(Pv={}),l=Pv),t-=e.width*e.originX,s-=e.height*e.originY;var w={x:t*e.scaleX,y:s*e.scaleY};return aW(w,0,0,-e.rotation),l.x=e.x+t,l.y=e.y+s,l},Pv;class oW extends fs{constructor(t,s){s===void 0&&(s={}),super(t,s);var l=s.width!=null?1:0,w=new nW(t).setOrientation(l);t.add.existing(w),this.type="rexColorPicker.HPalette",w.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var S=new Dn(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(S),this.add(w,{key:"paletteCanvas",expand:!0}).add(S,{key:"marker",expand:!1})}resize(t,s){if(this.width===t&&this.height===s)return this;super.resize(t,s);var l=Math.min(t,s);return this.childrenMap.marker.setSize(l,l),this}onPaletteCanvasPointerDown(t,s,l,w){if(t.isDown){var S=this.childrenMap.paletteCanvas,k=S.getColor(s,l);this.setMarkerPosition(k),this.emit("input",k)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var s=this.childrenMap.paletteCanvas;return s.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var s=this.childrenMap.paletteCanvas,l=this.childrenMap.marker,w=s.colorToLocalPosition(t,!0);return aT(s,w.x,w.y,l),this.resetChildPositionState(l),this}getHue(t,s){var l=this.childrenMap.paletteCanvas;return l.getHue(t,s)}}const hW=Phaser.Display.Color,oT=Phaser.Math.Percent,hT=Phaser.Display.Color.ColorToRGBA,lW=Phaser.Display.Color.HSVToRGB;class uW extends Un{constructor(t,s,l,w,S,k){s===void 0&&(s=0),l===void 0&&(l=0),w===void 0&&(w=2),S===void 0&&(S=2),super(t,s,l,w,S),this.type="rexColorPicker.SVPaletteCanvas",k===void 0&&(k=1),this.colorObject=new hW,this.setHue(k),this.setSize(w,S)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return eW(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,s){if(t===void 0)return this.colorObject.color;var l=oT(t,0,this.width),w=1-oT(s,0,this.height);return this.colorObject.setFromRGB(lW(this.hue,l,w)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(hT(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,s){return s===void 0?s={}:s===!0&&(Mv===void 0&&(Mv={}),s=Mv),this.colorObject.setFromRGB(hT(t)),s.x=this.width*this.colorObject.s,s.y=this.height*(1-this.colorObject.v),s}}var Mv=void 0;class cW extends fs{constructor(t,s){super(t,s);var l=new uW(t);t.add.existing(l),this.type="rexColorPicker.SVPalette",l.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var w=new Dn(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(w),this.add(l,{key:"paletteCanvas",expand:!0}).add(w,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,s,l,w){if(t.isDown){var S=this.childrenMap.paletteCanvas,k=S.getColor(s,l);this.setMarkerPosition(k),this.emit("input",k)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var s=this.childrenMap.paletteCanvas;return s.setHue(t),this}setColor(t){if(this.color===t)return this;var s=this.childrenMap.paletteCanvas;return s.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var s=this.childrenMap.paletteCanvas,l=this.childrenMap.marker,w=s.colorToLocalPosition(t,!0);return aT(s,w.x,w.y,l),this.resetChildPositionState(l),this}}const zs=Phaser.Utils.Objects.GetValue;class _v extends Zt{constructor(t,s){super(t,s),this.type="rexColorPicker",this.freezePalettes=!1;var l=zs(s,"hPalette.position",0);typeof l=="string"&&(l=dW[l]);var w=l===0||l===2?1:0;this.setOrientation(w);var S=zs(s,"background",void 0),k,D;if(this.orientation===0){var k=zs(s,"hPalette.width",void 0);k===void 0&&(k=zs(s,"hPalette.size",10))}else D=zs(s,"hPalette.height",void 0),D===void 0&&(D=zs(s,"hPalette.size",10));var V=new oW(t,{width:k,height:D});t.add.existing(V);var G=zs(s,"svPalette.width",void 0),j=zs(s,"svPalette.height",void 0),tt=new cW(t,{width:G,height:j});t.add.existing(tt),S&&this.addBackground(S);var st={proportion:0,expand:!0},rt,ot;this.orientation===0?(rt=G===void 0?1:0,ot=j===void 0):(rt=j===void 0?1:0,ot=G===void 0);var ut={proportion:rt,expand:ot};l===0||l===3?this.add(tt,ut).add(V,st):this.add(V,st).add(tt,ut),V.on("input",function(){tt.setHue(V.getHue()),this.setValue(tt.color,!0)},this),tt.on("input",function(){this.setValue(tt.color,!0)},this),this.addChildrenMap("background",S),this.addChildrenMap("hPalette",V),this.addChildrenMap("svPalette",tt);var ct=zs(s,"valuechangeCallback",null);if(ct!==null){var pt=zs(s,"valuechangeCallbackScope",void 0);this.on("valuechange",ct,pt)}this.setValue(zs(s,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var s=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,s,this)}}setValue(t,s){return this.freezePalettes=!!s,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}postLayout(t,s,l){return this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),super.postLayout(t,s,l),this}}var dW={bottom:0,left:1,top:2,right:3};const lr=Phaser.Utils.Objects.GetValue,pW=Phaser.Display.Color,fW=Phaser.Display.Color.ColorToRGBA,gW=Phaser.Display.Color.HSVToRGB,la=Phaser.Math.Clamp;class kv extends Zt{constructor(t,s){s===void 0&&(s={}),s.orientation=0,super(t,s),this.type="rexColorComponents",this.colorObject=new pW;var l=lr(s,"background",void 0),w=lr(s,"formatLabel",void 0);Ui(w)||(w=ci(t,w).resetDisplayContent());var S=[];if(s.inputText0&&s.inputText1&&s.inputText2)S.push(s.inputText0),S.push(s.inputText1),S.push(s.inputText2);else for(var k=lr(s,"inputText"),D=0;D<3;D++){var V=yn(t,k).setMaxLength(3).setNumberInput();S.push(V)}l&&this.addBackground(l);var G=lr(s,"proportion.formatLabel",0),j=!!w.isRexContainerLite,tt=lr(s,"expand.formatLabel",j);this.add(w,{proportion:G,expand:tt});for(var G=lr(k,"width")===void 0?1:0,tt=lr(k,"height")===void 0,D=0,st=S.length;D<st;D++)this.add(S[D],{proportion:G,expand:tt});this.addChildrenMap("background",l),this.addChildrenMap("formatLabel",w),this.addChildrenMap("components",S),this.onClick(w,this.toggleColorFormat,this);for(var D=0,st=S.length;D<st;D++)S[D].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var rt=lr(s,"valuechangeCallback",null);if(rt!==null){var ot=lr(s,"valuechangeCallbackScope",void 0);this.on("valuechange",rt,ot)}w.setText("RGB"),this.setValue(lr(s,"value",16777215))}get value(){return this._value}set value(t){t=la(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(fW(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,s,l,w;return this.colorFormat==="RGB"?(s=this.colorObject.red,l=this.colorObject.green,w=this.colorObject.blue):(s=Math.floor(this.colorObject.h*360),l=Math.floor(this.colorObject.s*100),w=Math.floor(this.colorObject.v*100)),t[0].setValue(s),t[1].setValue(l),t[2].setValue(w),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var s=la(t[0].value,0,255),l=la(t[1].value,0,255),w=la(t[2].value,0,255);this.colorObject.setTo(s,l,w)}else{var S=la(t[0].value,0,359)/360,k=la(t[1].value,0,100)/100,D=la(t[2].value,0,100)/100;this.colorObject.setFromRGB(gW(S,k,D))}return this}}const Ov=Phaser.Utils.Objects.GetValue;class vW extends Zt{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexColorInput.ColorPickerPanel";var l=Ov(s,"background",void 0),w=new _v(t,{hPalette:s.hPalette||{},svPalette:s.svPalette||{},space:{item:Ov(s,"space.hPalette",8)}});t.add.existing(w);var S;s.colorComponents&&(S=new kv(t,s.colorComponents),t.add.existing(S)),l&&(this.addBackground(l),new Lu(l,{stopAllLevels:!1})),this.add(w,{proportion:1,expand:!0}),S&&this.add(S,{proportion:0,expand:!0}),this.addChildrenMap("background",l),this.addChildrenMap("colorPicker",w),this.addChildrenMap("colorComponents",S),w.on("valuechange",function(k){this.setValue(k)},this),S&&S.on("valuechange",function(k){this.setValue(k)},this),this.setValue(Ov(s,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var s=this.childrenMap.colorPicker;s.setValue(t);var l=this.childrenMap.colorComponents;l&&l.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}}Phaser.Utils.Objects.GetValue;var mW=function(t){var t=this.scene,s,l=this.colorPickerCreateBackgroundCallback;l&&(s=l.call(this,t),t.add.existing(s));var w=this.colorPickerWidth;w===void 0&&(w=this.width);var S=this.colorPickerHeight;S===void 0&&(S=w);var k;this.colorComponentsHeight>0?k={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:k=!1;var D=new vW(t,{width:w,height:S,background:s,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:k,value:this.value});return t.add.existing(D),D},yW=function(){if(!this.colorPicker){var e=mW.call(this).layout(),t=new lS(e,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){e.on("valuechange",function(s){this.setValue(s)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=e,this.dropDownBehavior=t,this.pin(e),this}},lT={openColorPicker:yW};Object.assign(lT,JU);const yi=Phaser.Utils.Objects.GetValue;class Jc extends Tv{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexColorInput",s.hasOwnProperty("colorPicker")||(s.colorPicker={background:{color:0}});var l=s.colorPicker,w=l!==!1&&l!==null;if(w){this.setColorPickerSize(yi(l,"width",160),yi(l,"height",170));var S,k=yi(l,"background");k?S=function(rt){return ri(rt,k)}:S=yi(l,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(S),this.setColorPickerHPalettePosition(yi(l,"hPalettePosition",0)),this.setColorPickerExpandDirection(yi(l,"expandDirection")),this.setColorPickerEaseInDuration(yi(l,"easeIn",200)),this.setColorPickerEaseOutDuration(yi(l,"easeOut",200)),this.setColorPickerTransitInCallback(yi(l,"transitIn")),this.setColorPickerTransitOutCallback(yi(l,"transitOut")),this.setColorPickerBounds(yi(l,"bounds"));var D=yi(l,"space");D===void 0&&(D={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(D)}var V=s.colorComponents,G=V!==!1&&V!==null;if(w&&G){this.setColorComponentsHeight(yi(V,"height",30)),this.setColorComponentsFormatLabelConfig(yi(V,"formatLabel"));var j=yi(V,"inputText");j||(j=yi(s,"inputText")),this.setColorComponentsInputTextConfig(j);var tt=yi(V,"space");tt===void 0&&(tt={item:8}),this.setColorComponentsSpace(tt)}var st=this.childrenMap.swatch;st&&w&&this.onClick(st,this.openColorPicker,this)}}Object.assign(Jc.prototype,lT),T.register("colorInput",function(e){var t=new Jc(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.ColorInput",Jc),T.register("colorInputLite",function(e){var t=new Tv(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.ColorInputBase",Tv),T.register("colorPicker",function(e){var t=new _v(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.ColorPicker",_v),T.register("colorComponents",function(e){var t=new kv(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.ColorComponents",kv);var uT=function(e){for(var t=e.scene.input,s=t.manager,l=s.pointersTotal,w=s.pointers,S,k=0;k<l;k++)if(S=w[k],!(!S.primaryDown||t.getDragState(S)!==0||!kp(e,S)))return t.setDragState(S,1),t._drag[S.id]=[e],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(S,3),t.processDragStartList(S)):t.setDragState(S,2),!0;return!1};const Zc=Phaser.Utils.Objects.GetValue,cT=Phaser.Math.Distance.Between,dT=Phaser.Math.RotateAroundDistance;class Ev extends Oe{constructor(t,s){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(Zc(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(Zc(t,"enable",!0)),this.setAxisMode(Zc(t,"axis",0)),this.setAxisRotation(Zc(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=xW[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return uT(this.parent),this}dragend(){if(this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,s,l){this.isDragging||(this.pointer=t)}onDrag(t,s,l){if(this.pointer===t){var w=this.parent;if(this.axisMode===0)w.x=s,w.y=l;else if(this.axisRotation===0)this.axisMode===1?w.x=s:this.axisMode===2&&(w.y=l);else{var S,k={x:s,y:l};S=cT(k.x,k.y,w.x,w.y),k=dT(k,w.x,w.y,-this.axisRotation,S),this.axisMode===1?k.y=w.y:this.axisMode===2&&(k.x=w.x),S=cT(k.x,k.y,w.x,w.y),k=dT(k,w.x,w.y,this.axisRotation,S),w.x=k.x,w.y=k.y}}}onDragEnd(t,s,l,w){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const xW={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};var bW=function(){var e=this.sizerChildren[0],t=this.sizerChildren[1],s=this.sizerChildren[2],l=this.getSizerConfig(e).padding,w=this.getSizerConfig(t).padding,S=this.getSizerConfig(s).padding;if(this.orientation===0){var k=this.innerLeft+l.left,D=this.innerRight-S.right,V=le(t),G=t.x+V*(0-t.originX),j=t.x+V*(1-t.originX),tt=G-w.left-this.space.item-l.right,st=j+w.right+this.space.item+S.left,rt=tt-k,ot=D-st,ut=rt+ot;this.minFirstChildSize>0&&rt<this.minFirstChildSize&&(rt=this.minFirstChildSize,ot=ut-rt),this.minSecondChildSize>0&&ot<this.minSecondChildSize&&(ot=this.minSecondChildSize,rt=ut-ot),this.setSplitRatio(rt/ut)}else{var ct=this.innerTop+l.top,pt=this.innerBottom-S.bottom,mt=ue(t),yt=t.y+mt*(0-t.originY),St=t.y+mt*(1-t.originY),Ct=yt-w.top-this.space.item-l.bottom,_t=St+w.bottom+this.space.item+S.top,Rt=Ct-ct,Ft=pt-_t,It=Rt+Ft;this.minFirstChildSize>0&&Rt<this.minFirstChildSize&&(Rt=this.minFirstChildSize,Ft=It-Rt),this.minSecondChildSize>0&&Ft<this.minSecondChildSize&&(Ft=this.minSecondChildSize,Rt=It-Ft),this.setSplitRatio(Rt/It)}var Bt=this.minWidth,Wt=this.minHeight;this.setMinSize(this.width,this.height).layout().setMinSize(Bt,Wt)};const Je=Phaser.Utils.Objects.GetValue,wW=Phaser.Math.Clamp;class pT extends Zt{constructor(t,s){s.hasOwnProperty("orientation")||(s.orientation=s.hasOwnProperty("leftPanel")?0:1),super(t,s),this.type="rexSplit";var l=Je(s,"background",void 0),w,S,k,D;this.orientation===0?(w="leftPanel",S="rightPanel",k="minLeftPanelWidth",D="minRightPanelWidth"):(w="topPanel",S="bottomPanel",k="minTopPanelHeight",D="minBottomPanelHeight");var V=Je(s,w,void 0),G=Je(s,"splitter",void 0),j=Je(s,S,void 0);l&&this.addBackground(l);var tt=Je(s,"space",void 0);this.add(V,{proportion:1,expand:!0,padding:{left:Je(tt,`${w}Left`,0),right:Je(tt,`${w}Right`,0),top:Je(tt,`${w}Top`,0),bottom:Je(tt,`${w}Bottom`,0)}}),this.add(G,{proportion:0,expand:!0,padding:{left:Je(tt,"splitterLeft",0),right:Je(tt,"splitterRight",0),top:Je(tt,"splitterTop",0),bottom:Je(tt,"splitterBottom",0)}}),this.add(j,{proportion:1,expand:!0,padding:{left:Je(tt,`${S}Left`,0),right:Je(tt,`${S}Right`,0),top:Je(tt,`${S}Top`,0),bottom:Je(tt,`${S}Bottom`,0)}}),this.addChildrenMap("background",l),this.addChildrenMap(w,V),this.addChildrenMap("splitter",G),this.addChildrenMap(S,j),this.minFirstChildSize=Je(s,k,0),this.minSecondChildSize=Je(s,D,0),this.setSplitRatio(Je(s,"splitRatio",.5)),this.splitterDragBehavior=new Ev(G,{axis:this.orientation===0?1:2}),G.on("dragstart",function(){this.emit("splitter.dragstart",G,this.splitRatio)},this).on("dragend",function(){this.emit("splitter.dragend",G,this.splitRatio)},this).on("drag",function(){bW.call(this),this.emit("splitter.drag",G,this.splitRatio)},this).on("pointerover",function(){this.emit("splitter.over",G,this.splitRatio)},this).on("pointerout",function(){this.emit("splitter.out",G,this.splitRatio)},this)}get splitterEnable(){return this.splitterDragBehavior.enable}set splitterEnable(t){this.splitterDragBehavior.setEnable(t)}setSplitterEnable(t){return t===void 0&&(t=!0),this.splitterEnable=t,this}set minLeftPanelWidth(t){this.minFirstChildSize=t}get minLeftPanelWidth(){return this.minFirstChildSize}set minRightPanelWidth(t){this.minSecondChildSize=t}get minRightPanelWidth(){return this.minSecondChildSize}set minTopPanelHeight(t){this.minFirstChildSize=t}get minTopPanelHeight(){return this.minFirstChildSize}set minBottomPanelHeight(t){this.minSecondChildSize=t}get minBottomPanelHeight(){return this.minSecondChildSize}setMinLeftPanelWidth(t){return this.minLeftPanelWidth=t,this}setMinRightPanelWidth(t){return this.minRightPanelWidth=t,this}setMinTopPanelHeight(t){return this.minTopPanelHeight=t,this}setMinBottomPanelHeight(t){return this.minBottomPanelHeight=t,this}get splitRatio(){return this._splitRatio}set splitRatio(t){t=wW(t,0,1),this._splitRatio!==t&&(this._splitRatio=t,this.getSizerConfig(this.sizerChildren[0]).proportion=t,this.getSizerConfig(this.sizerChildren[2]).proportion=1-t)}setSplitRatio(t){return this.splitRatio=t,this}}T.register("splitPanels",function(e){var t=new pT(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.SplitPanels",pT);var SW=function(){return function(e,t,s,l){t!=="panel"&&s.setChildVisible(e,!0)}},TW=function(){return function(e,t,s,l){t!=="panel"&&s.setChildVisible(e,!1)}},CW={show:SW,hide:TW},PW=function(e,t){return t===void 0&&(t=1),function(s,l,w,S){l!=="panel"&&w.fadeChild(s,S?0:e,t)}},MW=function(e,t){return t===void 0&&(t=0),function(s,l,w,S){l!=="panel"&&w.fadeChild(s,S?0:e,t)}},_W={show:PW,hide:MW},fT=function(e,t){return function(s,l,w,S){l!=="panel"&&w.moveChild(s,S?0:e,t)}},kW={show:fT,hide:fT},gT=function(e,t){return function(s,l,w,S){l==="panel"&&w.moveChild(s,S?0:e,t)}},OW={show:gT,hide:gT};const Av={visible:CW,fade:_W,move:kW,"move-panel":OW};var EW=function(e){var t,s;[t,...s]=typeof e=="string"?[e]:e;var l,w;return Av.hasOwnProperty(t)?(l=Av[t].show.apply(null,s),w=Av[t].hide.apply(null,s)):(l=n,w=n),{show:l,hide:w}},AW={showChild(e,t){var s=this.sizerChildren[e];return s&&(this.emit("showchild",s,e,this,t),this.resetChildState(s)),this},hideChild(e,t){var s=this.sizerChildren[e];return s&&(this.emit("hidechild",s,e,this,t),this.resetChildState(s)),this},swapChild(e,t){return this.currentChildKey===e||(this.currentChildKey==="panel"||e==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=e,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(e,t))),this},showPanel(e){return this.swapChild("panel",e),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var e=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(e),this},toggleRightSide(){var e=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(e),this},toggleTopSide(){var e=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(e),this},toggleBottomSide(){var e=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(e),this}};const RW=Ji.prototype.setChildVisible;var DW={setChildVisible(e,t){var s;if(typeof e=="string"){var s=e;e=this.sizerChildren[s]}else s=Qu(this.sizerChildren,e);return t===void 0&&(t=this.currentChildKey===s),RW.call(this,e,t),this}},IW={fadeChild(e,t,s){var l;return typeof e=="string"?(l=e,e=this.sizerChildren[l]):l=Qu(this.sizerChildren,e),t===void 0&&(t=500),s===void 0&&(s=this.currentChildKey===l?1:0),e.fadeIn(t,{start:e.alpha,end:s}),this},fadeChildPromise(e,t,s){return typeof e=="string"&&(e=this.sizerChildren[key]),this.fadeChild(e,t,s),e._fade?vi(e._fade):Promise.resolve()}},LW={moveChild(e,t,s,l){var w;typeof e=="string"?(w=e,e=this.sizerChildren[w]):w=Qu(this.sizerChildren,e),t===void 0&&(t=500);var S=this.currentChildKey===w;if(l===void 0)switch(w){case"leftSide":case"rightSide":l=le(e);break;case"topSide":case"bottomSide":l=ue(e);break;default:if(S)switch(this.previousChildKey){case"leftSide":case"rightSide":l=le(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":l=ue(this.sizerChildren[this.previousChildKey]);break;default:l=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":l=le(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":l=ue(this.sizerChildren[this.currentChildKey]);break;default:l=0;break}break}var k,D,V,G;if(S)switch(w){case"panel":switch(this.previousChildKey){case"leftSide":k=!0;break;case"rightSide":D=!0;break;case"topSide":V=!0;break;case"bottomSide":G=!0;break}break;case"leftSide":D=!0;break;case"rightSide":k=!0;break;case"topSide":G=!0;break;case"bottomSide":V=!0;break}else switch(w){case"panel":switch(this.currentChildKey){case"leftSide":D=!0;break;case"rightSide":k=!0;break;case"topSide":G=!0;break;case"bottomSide":V=!0;break}break;case"leftSide":k=!0;break;case"rightSide":D=!0;break;case"topSide":V=!0;break;case"bottomSide":G=!0;break}return k?e.moveTo(t,`-=${l}`,void 0,s):D?e.moveTo(t,`+=${l}`,void 0,s):V?e.moveTo(t,void 0,`-=${l}`,s):G?e.moveTo(t,void 0,`+=${l}`,s):e.moveTo(0),this},moveChildPromise(e,t,s,l){return typeof e=="string"&&(e=this.sizerChildren[key]),this.moveChild(e,t,s,l),e._easeMove?vi(e._easeMove):Promise.resolve()}},vT={};Object.assign(vT,DW,IW,LW);const Xi=Phaser.Utils.Objects.GetValue;class Rv extends fs{constructor(t,s){super(t,s),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var l=Xi(s,"showChildCallback",void 0);if(l)if(Os(l)){var w=Xi(s,"showChildCallbackScope",void 0);this.on("showchild",l,w);var S=Xi(s,"hideChildCallback",void 0),k=Xi(s,"hideChildCallbackScope",void 0);this.on("hidechild",S,k)}else{var D=EW(l);this.on("showchild",D.show),this.on("hidechild",D.hide)}var V=Xi(s,"background",void 0),G=Xi(s,"panel",void 0),j=Xi(s,"leftSide",void 0),tt=Xi(s,"rightSide",void 0),st=Xi(s,"topSide",void 0),rt=Xi(s,"bottomSide",void 0);if(V&&this.addBackground(V),G&&this.add(G,"panel","center",0,!0),j){var ot=Xi(s,"expand.left",!0);this.add(j,"leftSide","left-top",0,{height:ot})}if(tt){var ot=Xi(s,"expand.right",!0);this.add(tt,"rightSide","right-top",0,{height:ot})}if(st){var ot=Xi(s,"expand.top",!0);this.add(st,"topSide","left-top",0,{width:ot})}if(rt){var ot=Xi(s,"expand.bottom",!0);this.add(rt,"bottomSide","left-bottom",0,{width:ot})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Rv.prototype,AW,vT),T.register("sides",function(e){var t=new Rv(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Sides",Rv);var FW=function(e){var t=!0;return e.hasOwnProperty("accept")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'accept' callback.`)),e.hasOwnProperty("build")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'build' callback.`)),t&&this.inputHandlers.unshift(e),this};const BW=Phaser.Utils.Array.GetFirst,NW=Phaser.Utils.Array.Remove;var YW=function(e){var t=BW(this.inputHandlers,"name",e);return t&&NW(this.inputHandlers,t),this};class sl extends Lr{constructor(t,s){s=Tc(t,s),super(t,s),this.type="rexTweaker.Title"}setTitle(t){return t=t?B(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}}class VW extends sl{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexTweaker.FolderTitle";var l=new vh(t,s.expandedIcon);t.add.existing(l),this.addSpace().add(l,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",l)}setExpandedState(t){t===void 0&&(t=!0);var s=t?"down":"right",l=this.childrenMap.expandedIcon;return l.setDirection(s),this}}/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2019 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var mT=function(e,t){var s=Ms(e);for(var l in t)s.hasOwnProperty(l)||(s[l]=t[l]);return s},rl=function(e,t,s){return ri(e,mT(t,s))},zW={setBindingTarget(e){var t=this.childrenMap.child;return t.setBindingTarget(e),this}},GW={getMaxInputRowTitleWidth(){var e=this.childrenMap.child,t=e.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");var t=this.childrenMap.child;return t.setInputRowTitleWidth(e),this}};class yT extends tl{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexTweaker.Folder"}setTitle(t){var s=this.childrenMap.title;return s.setTitle(t),this}}Object.assign(yT.prototype,zW,GW);const co=Phaser.Utils.Objects.GetValue;var UW=function(e,t,s){var l=e.scene,w=co(s,"title")||{},S=new VW(l,w);l.add.existing(S),S.on("folder.expand",function(){S.setExpandedState(!0)}).on("folder.collapse",function(){S.setExpandedState(!1)});var k={root:co(s,"root"),styles:co(s,"tweaker"),space:co(s,"space")||{}},D=e.createTweaker(k),V=co(s,"background"),G=rl(l,t,V),j=new yT(l,{title:S,child:D,background:G,transition:{duration:co(s,"transition.duration",200)}});return l.add.existing(j),j};const xT=Phaser.Utils.Objects.GetValue;var WW=function(e){e===void 0&&(e={});var t=xT(this.styles,"folder")||{};t.tweaker=this.styles,t.root=this.root;var s=UW(this,e,t);delete t.tweaker,delete t.root,this.add(s,{expand:!0}),s.setTitle(e);var l=xT(e,"expanded",!0);l!==void 0&&s.setExpandedState(l);var w=s.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,w),w},XW={setBindingTarget(e){for(var t=this.childrenMap.pages.children,s=0,l=t.length;s<l;s++)t[s].setBindingTarget(e);return this}},jW={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.pages.children,s=0,l=t.length;s<l;s++)e=Math.max(e,t[s].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,s=0,l=t.length;s<l;s++)t[s].setInputRowTitleWidth(e);return this}};class bT extends jc{constructor(t,s){super(t,s),this.type="rexTweaker.TabPages"}}Object.assign(bT.prototype,XW,jW);const td=Phaser.Utils.Objects.GetValue;var HW=function(e,t,s){var l=e.scene,w=new bT(l,s);l.add.existing(w);for(var S=td(s,"tab"),k={root:td(s,"root"),styles:td(s,"tweaker")},D=td(t,"pages")||[],V=0,G=D.length;V<G;V++){var j=D[V];w.addPage({key:j.title,tab:ci(l,S).setActiveState(!1).resetDisplayContent({text:j.title}),page:e.createTweaker(k)})}return w.on("tab.focus",function(tt,st){tt.setActiveState(!0)}).on("tab.blur",function(tt,st){tt.setActiveState(!1)}),w};const wT=Phaser.Utils.Objects.GetValue;var $W=function(e){e===void 0&&(e={});var t=wT(this.styles,"tab")||{};t.tweaker=this.styles,t.root=this.root;var s=HW(this,e,t);delete t.tweaker,delete t.root,this.add(s,{expand:!0});for(var l=wT(e,"pages")||[],w=[],S=0,k=0,D=l.length;k<D;k++){var V=s.getPage(k),G=l[k].show;G&&(S=k);var j=l[k].key;j&&this.root.addChildrenMap(j,V),w.push(V)}return s.swapPage(S,0),w},qW={setBindingTarget(e){for(var t=this.childrenMap.columns,s=0,l=t.length;s<l;s++)t[s].setBindingTarget(e);return this}},KW={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.columns,s=0,l=t.length;s<l;s++)e=Math.max(e,t[s].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.columns,s=0,l=t.length;s<l;s++)t[s].setInputRowTitleWidth(e);return this}};const po=Phaser.Utils.Objects.GetValue;class ST extends Zt{constructor(t,s){s===void 0&&(s={}),s.orientation="y",super(t,s),this.type="rexTweaker.Columns";var l=po(s,"background",void 0),w=po(s,"title",void 0);l&&this.addBackground(l),w&&this.add(w,{expand:!0,space:{bottom:po(s,"space.title",0)}});var S=new Zt(t,{orientation:"x",space:{item:po(s,"space.column",0)}});t.add.existing(S);for(var k=po(s,"columns",void 0),D,V,G=0,j=k.length;G<j;G++)D=k[G],V=D.child,S.add(D.child,{proportion:V.minWidth===0?1:0,expand:po(D,"expand",!0)});this.add(S,{expand:!0}),this.addChildrenMap("title",w),this.addChildrenMap("columnsSizer",S),this.addChildrenMap("columns",S.childrenMap.items)}setTitle(t){var s=this.childrenMap.title;return t.title||t.icon?s.show().setTitle(t):s.hide(),this}getColumns(){return this.childrenMap.columns}getColumn(t){return this.childrenMap.columns[t]}}Object.assign(ST.prototype,qW,KW);const ua=Phaser.Utils.Objects.GetValue;var QW=function(e,t,s){var l=e.scene,w=ua(s,"title")||{},S=new sl(l,w);l.add.existing(S);var k={root:ua(s,"root"),styles:ua(s,"tweaker")},D=ua(s,"background");D&&!Array.isArray(D)&&(D=[D]);var V=ua(t,"columns",2);if(typeof V=="number"){var G=V;V=[];for(var j=0,tt=G;j<tt;j++)V.push({})}for(var j=0,tt=V.length;j<tt;j++){var st=V[j];D&&(k.background=D[j%D.length]),k.width=ua(st,"width",0);var rt=e.createTweaker(k);st.child=rt}var ot=new ST(l,{title:S,columns:V,space:ua(s,"space")});return l.add.existing(ot),ot};const TT=Phaser.Utils.Objects.GetValue;var JW=function(e){e===void 0&&(e={}),typeof e=="number"&&(e={columns:e});var t=TT(this.styles,"columns")||{};t.tweaker=this.styles,t.root=this.root;var s=QW(this,e,t);delete t.tweaker,delete t.root,this.add(s,{expand:!0}),s.setTitle(e);var l=TT(e,"columns",void 0);if(l&&Array.isArray(l))for(var w=0,S=l.length;w<S;w++){var k=l[w].key;k&&this.root.addChildrenMap(k,s.getColumn(w))}return s.getColumns()},ZW={setBindingTarget(e){for(var t=this.childrenMap.child,s=0,l=t.length;s<l;s++)t[s].setBindingTarget(e);return this}},tX={getMaxInputRowTitleWidth(){return 0},setInputRowTitleWidth(e){return this}};const ed=Phaser.Utils.Objects.GetValue;class CT extends Zt{constructor(t,s){s===void 0&&(s={}),s.orientation="y",super(t,s),this.type="rexTweaker.Wrap";var l=ed(s,"background",void 0),w=ed(s,"title",void 0);l&&this.addBackground(l),w&&this.add(w,{expand:!0,space:{bottom:ed(s,"space.title",0)}});var S=ed(s,"child",void 0);this.add(S,{expand:!0}),this.addChildrenMap("title",w),this.addChildrenMap("child",S)}setTitle(t){var s=this.childrenMap.title;return t.title||t.icon?s.show().setTitle(t):s.hide(),this}}Object.assign(CT.prototype,ZW,tX);const ur=Phaser.Utils.Objects.GetValue;var eX=function(e,t,s){var l=e.scene,w=ur(s,"title")||{},S=new sl(l,w);l.add.existing(S);var k=ur(s,"itemWidth",0),D=ur(s,"itemHeight",0),V={root:ur(s,"root"),styles:ur(s,"tweaker"),space:ur(s,"space"),align:ur(s,"align",5),wrap:!0,itemWidth:ur(t,"itemWidth",k),itemHeight:ur(t,"itemHeight",D)};ur(s,"background");var G=e.createTweaker(V),j=new CT(l,{title:S,child:G});return l.add.existing(j),j};const iX=Phaser.Utils.Objects.GetValue;var sX=function(e){e===void 0&&(e={});var t=iX(this.styles,"wrap")||{};t.tweaker=this.styles,t.root=this.root;var s=eX(this,e,t);delete t.tweaker,delete t.root,this.add(s,{expand:!0}),s.setTitle(e);var l=s.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,l),l},rX={setBindingTarget(e){var t=this.childrenMap.panel;return t.setBindingTarget(e),this}},nX={getMaxInputRowTitleWidth(){var e=this.childrenMap.panel,t=e.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");var t=this.childrenMap.panel;return t.setInputRowTitleWidth(e),this}};class PT extends qh{constructor(t,s){super(t,s),this.type="rexTweaker.Scrollable"}setTitle(t){var s=this.childrenMap.header;return t.title||t.icon?s.show().setTitle(t):s.hide(),this}}Object.assign(PT.prototype,rX,nX);const Sn=Phaser.Utils.Objects.GetValue;var aX=function(e,t,s){var l=e.scene,w=Sn(s,"title")||{},S=new sl(l,w);l.add.existing(S);var k={root:Sn(s,"root"),styles:Sn(s,"tweaker"),space:Sn(s,"space")||{}},D=e.createTweaker(k),V=Sn(s,"slider");if(V){V=B(V);var G=V.track;G&&(V.track=rl(l,t,G));var j=V.thumb;j&&(V.thumb=rl(l,t,j))}var tt=Sn(s,"background"),st=rl(l,t,tt),rt=new PT(l,{scrollMode:0,header:S,panel:{child:D,mask:{padding:1}},slider:V,background:st,height:Sn(t,"height",0),space:Sn(s,"space",void 0)});return l.add.existing(rt),rt};const oX=Phaser.Utils.Objects.GetValue;var hX=function(e){e===void 0&&(e={});var t=oX(this.styles,"scrollable")||{};t.tweaker=this.styles,t.root=this.root;var s=aX(this,e,t);delete t.tweaker,delete t.root,this.add(s,{proportion:s.minWidth===0?1:0,expand:!0}),s.setTitle(e);var l=s.childrenMap.panel;return e.key&&this.root.addChildrenMap(e.key,l),l};const MT=Phaser.Utils.Objects.GetValue;var lX={setupBinding(){var e=this.childrenMap.inputField;return e.on("valuechange",function(t){this.autoUpdateEnable&&this.setTargetValue(t)},this),this},setAutoUpdateEnable(e){return e===void 0&&(e=!0),this.autoUpdateEnable=e,this},setBindingTarget(e,t){this.bindingTarget=e,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue();var s=this.childrenMap.inputField;return s.onBindTarget&&s.onBindTarget(e,t),this},setBindingTargetKey(e){return this.bindTargetKey=e,this},setValueCallbacks(e){return this.onGetValue=MT(e,"onGetValue"),this.onSetValue=MT(e,"onSetValue"),this},getTargetValue(){if(this.bindingTarget){if(this.bindTargetKey!=null)return this.bindingTarget[this.bindTargetKey];if(this.onGetValue)return this.onGetValue(this.bindingTarget)}},setTargetValue(e){return this.bindingTarget?this.bindTargetKey!=null?(this.bindingTarget[this.bindTargetKey]=e,this):(this.onSetValue&&this.onSetValue(this.bindingTarget,e),this):this},syncTargetValue(){if(!this.bindingTarget)return this;var e=this.childrenMap.inputField;return e.syncValue&&e.syncValue(this.getTargetValue()),this}},uX={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(this.bindingTarget){var e=this.getTargetValue(),t=this.childrenMap.inputField;t.value!==e&&t.syncValue(e)}}},cX={getMinTitleWidth(){var e=this.childrenMap.title;if(!e||e.orientation!==0)return 0;var t=e.rexSizer.padding,s=this.getChildWidth(this.childrenMap.title)+(t.left+t.right)*e.scaleX;return s+this.getInnerPadding("left")},setMinTitleWidth(e){var t=this.childrenMap.title;if(!t||t.orientation!==0)return this;var s=t.rexSizer.padding;return e-=(s.left+s.right)*t.scaleX,t.minWidth=e,this}};const Dv=Phaser.Utils.Objects.GetValue;class Iv extends Zt{constructor(t,s){super(t,s),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var l=s.inputTitle,w=s.inputField,S=s.background,G=Dv(s,"proportion.title",0),k=Dv(s,"space.title",0),D;this.orientation===0?D={right:k}:D={bottom:k},this.add(l,{proportion:G,expand:!0,padding:D});var V=w.defaultProportion;V===void 0&&(V=s.defaultExpandWidth?1:0);var G=Dv(s,"proportion.inputField",V);this.add(w,{proportion:G,expand:!0}),S&&this.addBackground(S),this.addChildrenMap("title",l),this.addChildrenMap("inputField",w),this.addChildrenMap("background",S),this.setupBinding()}destroy(t){!this.scene||this.ignoreDestroy||(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var s=this.childrenMap.title;return s.setTitle(t),this}preLayout(){var t=this.childrenMap.title;t&&(t.minWidth=0),super.preLayout()}}Object.assign(Iv.prototype,lX,uX,cX);var _T=function(e,t,s){var l=new sl(e,s);return e.add.existing(l),l},dX=function(e){e===void 0&&(e=Zt);class t extends e{get bindingTarget(){var l=this.getParentSizer();return l.bindingTarget}get bindingKey(){var l=this.getParentSizer();return l.bindTargetKey}get value(){return this._value}get root(){var l=this.getParentSizer(),w=l.getParentSizer();return w.root}onBindTarget(l,w){this.onBindTargetCallback&&this.onBindTargetCallback(this,l,w)}validate(l){return this.syncValueFlag||!this.validateCallback?!0:this.validateCallback(l,this._value,this.bindingTarget,this.bindingKey)}getFotmatText(l){return this.textFormatCallback?l=this.textFormatCallback(l):l=l.toString(),l}set value(l){if(this._value!==l&&(this.validate(l)||(l=this._value),this.filterValueCallback&&(l=this.filterValueCallback(this,l)),this.displayValueCallback&&this.displayValueCallback(this,l),this._value!==l)){var w=this._value;if(this._value=l,!this.syncValueFlag){var S=this.bindingTarget,k=this.bindingKey;this.emit("valuechange",l,w,S,k),this.root.emit("valuechange",l,w,S,k)}}}getValue(){return this.value}setValue(l){return this.value=l,this}syncValue(l){return this.syncValueFlag=!0,this.value=l,this.syncValueFlag=!1,this}setup(l,w){return w===void 0&&(w=!1),(w||l.hasOwnProperty("format"))&&this.setTextFormatCallback(l.format),(w||l.hasOwnProperty("onValidate"))&&this.setValidateCallback(l.onValidate),this.setupCallback&&this.setupCallback(this,l,w),this}setSetupCallback(l){return this.setupCallback=l,this}setFilterValueCallback(l){return this.filterValueCallback=l,this}setDisplayValueCallback(l){return this.displayValueCallback=l,this}setOnBindTargetCallback(l){return this.onBindTargetCallback=l,this}setTextFormatCallback(l){return this.textFormatCallback=l,this}setValidateCallback(l){return this.validateCallback=l,this}}return t},pX=function(e,t,s){for(var l,w=this.inputHandlers,S=0,k=w.length;S<k;S++){var D=w[S];if(D.accept(t)){var V=dX(D.baseClass);l=new V(e),e.add.existing(l),l.setSetupCallback(D.setup).setFilterValueCallback(D.filterValue).setDisplayValueCallback(D.displayValue).setOnBindTargetCallback(D.onBindTarget),D.build(l,s);break}}return l&&l.setup(t,!0),l};const kT=Phaser.Utils.Objects.GetValue;var fX=function(e,t,s){var l=pX.call(this,e,t,s);if(!l)return null;var w=kT(s,"title")||{},S=_T(e,t,w),k=kT(s,"background")||{},D=ri(e,k),V=new Iv(e,{...s,...t,inputTitle:S,inputField:l,background:D});return e.add.existing(V),V.setTitle(t),V.setValueCallbacks(t),V},gX=function(e,t,s){arguments.length===1?(s=e,e=s.bindingTarget,t=s.bindingKey):(s===void 0&&(s={}),s.bindingTarget=e,s.bindingKey=t),s.title||(s.title=t),s.bindingTarget&&s.bindingKey?s.value=s.bindingTarget[s.bindingKey]:s.value=void 0;var l=this.styles.inputRow||{};this.isWrapMode?l.defaultExpandWidth=!0:l.defaultExpandWidth=this.styles.orientation===1;var w=fX.call(this,this.scene,s,l);if(!w)return console.error(`[Tweaker] Can't add Input
    title: ${s.title}
    view: ${s.view}
`),this;if(this.isWrapMode)w.setMinWidth(this.itemWidth),w.setMinHeight(this.itemHeight),this.add(w);else{var S;this.orientation===1?S=0:(S=this.itemWidth>0?0:1,w.minWidth===0&&w.setMinWidth(this.itemWidth)),w.minHeight===0&&w.setMinHeight(this.itemHeight),this.add(w,{proportion:S,expand:!0})}if(s.onValueChange){var k=w.childrenMap.inputField;k.on("valuechange",s.onValueChange)}return w.setAutoUpdateEnable(s.autoUpdate),w.setBindingTarget(e,t),s.monitor&&w.startMonitorTarget(),s.key&&this.root.addChildrenMap(s.key,w),this},vX=function(e,t){var s=new Dn(e,t);return e.add.existing(s),s};const mX=Phaser.Utils.Objects.GetValue;var yX=function(e,t){var s=mX(t,"wrap",!1),l=s?mn:ui,w=new l(e,t);return e.add.existing(w),w};const id=Phaser.Utils.Objects.GetValue;var xX=function(e,t,s){for(var l=id(s,"title")||{},w=_T(e,t,l),S=t.buttons,k=id(s,"button")||{},D=[],V=0,G=S.length;V<G;V++){var j=ci(e,k);D.push(j);var tt=S[V];j.resetDisplayContent(tt.label),j.callback=tt.callback}var st=yX(e,{buttons:D,expand:!0,wrap:id(t,"wrap",!1)});st.defaultProportion=1;var rt=id(s,"background")||{},ot=vX(e,rt),ut=new Iv(e,{...s,inputTitle:w,inputField:st,background:ot});return e.add.existing(ut),ut.setTitle(t),st.on("button.click",function(ct){ct.callback(ut.bindingTarget)}),ut};const bX=Phaser.Utils.Objects.GetValue;var wX=function(e){e===void 0&&(e={});var t=this.scene,s=e.bindingTarget;delete e.bindingTarget;var l=bX(this.styles,"inputRow")||{},w=xX(t,e,l);return this.add(w,{expand:!0}),s&&w.setBindingTarget(s),e.key&&this.root.addChildrenMap(e.key,w),this},SX=function(e){return e===void 0&&(e={}),e.buttons=[{label:e.label,callback:e.callback}],delete e.label,delete e.callback,this.addButtons(e),this},TX=function(e,t,s){return ri(e,mT(t,s))};const CX=Phaser.Utils.Objects.GetValue;var PX=function(e){e===void 0&&(e={});var t=this.scene,s=CX(this.styles,"separator"),l=TX(t,e,s);return this.add(l,{expand:!0}),this},MX=function(e,t,s){return typeof t=="boolean"&&(s=t,t=void 0),s===void 0&&(s=!0),nl(this,B(e),t,s),this},nl=function(e,t,s,l){if(t)for(var w=0,S=t.length;w<S;w++){var k=t[w];k.hasOwnProperty("$target")&&(s=k.$target,delete k.$target);var D=k.$type;switch(delete k.$type,D){case"folder":var V=e.addFolder(k);nl(V,k.$properties,s,l);break;case"tab":for(var G=e.addTab(k),j=0,tt=G.length;j<tt;j++)nl(G[j],k.pages[j].$properties,s,l);break;case"columns":for(var st=e.addColumns(k),j=0,tt=st.length;j<tt;j++)nl(st[j],k.columns[j].$properties,s,l);break;case"scrollable":var rt=e.addScrollable(k);nl(rt,k.$properties,s,l);break;case"separator":e.addSeparator();break;case"button":k.bindingTarget=s,e.addButton(k);break;case"buttons":k.bindingTarget=s,e.addButtons(k);break;default:var ot=k.$key;if(delete k.$key,ot.indexOf(".")===-1)k.bindingTarget=s,k.bindingKey=ot;else{var ut=ot.split(".");k.bindingKey=ut.pop();for(var ct=s,pt=0,mt=ut.length;pt<mt;pt++)if(ct=ct[ut[pt]],!s){console.warn(`[Monitor] Key path '${ot}' is invalid`);continue}k.bindingTarget=ct}k.hasOwnProperty("monitor")||(k.monitor=l),e.addInput(k);break}}},_X=function(e){for(var t=this.sizerChildren,s=0,l=t.length;s<l;s++){var w=t[s];w.setBindingTarget&&w.setBindingTarget(e)}return this},kX=function(){for(var e=0,t=this.sizerChildren,s=0,l=t.length;s<l;s++){var w=t[s];w.rexSizer.hidden||(w.getMinTitleWidth?e=Math.max(e,w.getMinTitleWidth()):w.getMaxInputRowTitleWidth&&(e=Math.max(e,w.getMaxInputRowTitleWidth())))}return e+this.getInnerPadding("left")},OX=function(e){this.isWrapMode||(e-=this.getInnerPadding("left"));for(var t=this.sizerChildren,s=0,l=t.length;s<l;s++){var w=t[s];w.rexSizer.hidden||(w.setMinTitleWidth?w.setMinTitleWidth(e):w.setInputRowTitleWidth&&w.setInputRowTitleWidth(e))}return this},EX={registerInputHandler:FW,removeInputHandler:YW,addFolder:WW,addTab:$W,addColumns:JW,addWrap:sX,addScrollable:hX,addInput:gX,addButtons:wX,addButton:SX,addSeparator:PX,addRows:MX,setBindingTarget:_X,getMaxInputRowTitleWidth:kX,setInputRowTitleWidth:OX};const Tn=Phaser.Utils.Objects.GetValue;var OT=function(e){var t=Tn(e,"wrap",!1),s=t?fn:Zt;class l extends s{constructor(S,k){k===void 0&&(k={}),k.orientation===void 0&&(k.orientation=t?0:1),super(S,k),this.type="rexTweakerShell",this.isWrapMode=t,k.root?(this.root=k.root,this.inputHandlers=this.root.inputHandlers):(this.root=this,this.inputHandlers=[]),this.styles=Tn(k,"styles")||{},this.styles.orientation=this.orientation;var D=Tn(k,"itemWidth");D===void 0&&(D=Tn(this.styles,"itemWidth",0)),this.itemWidth=D;var V=Tn(k,"itemHeight");if(V===void 0&&(V=Tn(this.styles,"itemHeight",0)),this.itemHeight=V,t||this.root===this&&this.orientation===1){var G=Tn(k,"inputRow.alignTitle");if(G===void 0){var j=Tn(this.styles,"inputRow.proportion.title");G=!j}else G&&K(this.styles,"inputRow.proportion.title",0);this.alignInputRowTitleStartFlag=G}else this.alignInputRowTitleStartFlag=!1;var tt=rl(S,void 0,k.background);tt&&this.addBackground(tt)}preLayout(){super.preLayout(),this.alignInputRowTitleStartFlag&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}createTweaker(S,k){k===void 0&&(k=!0);var D=OT(S),V=new D(this.scene,S);return k&&this.scene.add.existing(V),V}}return Object.assign(l.prototype,EX),l},AX=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)},RX={name:"TextInput",accept(e){return e.hasOwnProperty("view")?e.view==="string":typeof e.value=="string"},build(e,t){var s=e.scene;e.type="rexTweaker.TextInput";var l=t.inputText,w=yn(s,l);e.add(w,{proportion:1,expand:!0,key:"inputText"}),w.on("close",function(){e.setValue(w.value)})},setup(e,t,s){(s||t.hasOwnProperty("inputTextReadOnly"))&&AX(e,!!t.inputTextReadOnly)},displayValue(e,t){var s=e.childrenMap.inputText;s.setText(e.getFotmatText(t))}},DX=function(e,t,s){s===void 0&&(s=!0),s?t=t?B(t):{}:t||(t={});var l=new qc(e,t);return e.add.existing(l),l},IX=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)},LX={name:"TextAreaInput",accept(e){return e.hasOwnProperty("view")?e.view==="textarea":!1},build(e,t){var s=e.scene;this.type="rexTweaker.TextAreaInput";var l=t.inputTextArea;l===void 0&&(l={}),l.hasOwnProperty("text")||(l.text=t.inputText),l.hasOwnProperty("slider")||(l.slider=t.slider);var w=DX(s,l);e.add(w,{proportion:1,expand:!0,key:"inputText"}),w.on("close",function(){e.setValue(w.value)})},setup(e,t,s){(s||t.hasOwnProperty("inputTextReadOnly"))&&IX(e,!!t.inputTextReadOnly)},displayValue(e,t){var s=e.childrenMap.inputText;s.setText(e.getFotmatText(t))},onBindTarget(e){var t=e.childrenMap.inputText;t.scrollToTop()}},FX=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)},BX={name:"NumberInput",accept(e){return e.hasOwnProperty("view")?e.view==="number":typeof e.value=="number"},build(e,t){var s=e.scene;e.type="rexTweaker.NumberInput";var l=t.inputNumber||t.inputText,w=yn(s,l).setNumberInput();e.add(w,{proportion:1,expand:!0,key:"inputText"}),w.on("close",function(){e.setValue(w.value)})},setup(e,t,s){(s||t.hasOwnProperty("inputTextReadOnly"))&&FX(e,!!t.inputTextReadOnly),e.isFloatType=!t.int},filterValue(e,t){return e.isFloatType?t:Math.floor(t)},displayValue(e,t){var s=e.childrenMap.inputText;s.setText(e.getFotmatText(t))}},NX=function(e,t){var s=new so(e,t);return e.add.existing(s),s};const Lv=Phaser.Utils.Objects.GetValue,YX=Phaser.Math.Linear,VX=Phaser.Math.Snap.Floor;var zX=function(e,t,s,l){e.minValue=t,e.maxValue=s,e.step=l;var w=e.childrenMap.slider;w.setGap(l,t,s)},GX=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)},UX={name:"RangeInput",accept(e){return e.hasOwnProperty("view")?e.view==="range":typeof e.value=="number"&&e.hasOwnProperty("min")&&e.hasOwnProperty("max")},build(e,t){var s=e.scene;e.type="rexTweaker.RangeInput";var l=t.slider,w=e.orientation===0?"track.height":"track.width",S=Lv(l,w),k=NX(s,l),j=t.defaultExpandWidth?2:0,tt=Lv(t,"proportion.range.slider",j),D=S===void 0;e.add(k,{proportion:tt,expand:D,key:"slider"});var V=t.inputNumber||t.inputText,G=yn(s,V).setNumberInput(),j=t.defaultExpandWidth?1:0,tt=Lv(t,"proportion.range.inputText",j);e.add(G,{proportion:tt,expand:!0,key:"inputText"}),G.on("close",function(){e.setValue(G.value)}),k.on("valuechange",function(){var st=YX(e.minValue,e.maxValue,k.value);e.step&&(st=VX(st,e.step,e.minValue)),e.setValue(st)})},setup(e,t,s){(s||t.hasOwnProperty("max"))&&zX(e,t.min,t.max,t.step),(s||t.hasOwnProperty("inputTextReadOnly"))&&GX(e,!!t.inputTextReadOnly)},displayValue(e,t){var s=e.childrenMap.slider;s.setValue(t,e.minValue,e.maxValue);var l=e.childrenMap.inputText;l.setText("").setText(e.getFotmatText(t))}},ET=function(e,t){var s=new ui(e,t);return e.add.existing(s),s};const WX=Phaser.Utils.Objects.GetValue;var XX=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)},jX={name:"RangeInput",accept(e){return e.hasOwnProperty("view")?e.view==="incdec":!1},build(e,t){var s=e.scene;e.type="rexTweaker.IncDecInput";var l=WX(t,"incDec")||{},w={text:null,action:null},S=ET(s,{expand:!1}),k=t.defaultExpandWidth?1:0;e.add(S,{proportion:k,expand:!0});var D=t.inputNumber||t.inputText,V=yn(s,D).setNumberInput();V.on("close",function(){e.setValue(V.value)});var G=Object.assign(B(w),l.incButton||{}),j=ci(s,G),tt=Object.assign(B(w),l.decButton||{}),st=ci(s,tt);S.addButton(j),S.addButton(st);var rt=l.inputTextIndex||0;S.insert(rt,V,{proportion:1,expand:!0}),e.step=1,e.minValue=void 0,e.maxValue=void 0,S.on("button.click",function(ot,ut,ct,pt){var mt=e.value;ut===0?mt+=e.step:mt-=e.step,e.maxValue!==void 0&&mt>e.maxValue&&(mt=e.maxValue),e.minValue!==void 0&&mt<e.minValue&&(mt=e.minValue),e.setValue(mt)}),e.addChildrenMap("incButton",j),e.addChildrenMap("decButton",st),e.addChildrenMap("inputText",V)},setup(e,t,s){(s||t.hasOwnProperty("inputTextReadOnly"))&&XX(e,!!t.inputTextReadOnly),(s||t.hasOwnProperty("step"))&&(e.step=t.hasOwnProperty("step")?t.step:1),(s||t.hasOwnProperty("min"))&&(e.minValue=t.min),(s||t.hasOwnProperty("max"))&&(e.maxValue=t.max)},displayValue(e,t){var s=e.childrenMap.inputText;s.setText("").setText(e.getFotmatText(t))}},HX=function(e,t,s){s===void 0&&(s=!0),s?t=t?B(t):{}:t||(t={});var l=new Jc(e,t);return e.add.existing(l),l},$X={name:"ColorInput",accept(e){return e.hasOwnProperty("view")?e.view==="color":!1},build(e,t){var s=e.scene;e.type="rexTweaker.ColorInput";var l=t.colorInput;l===void 0&&(l={}),l.hasOwnProperty("inputText")||(l.inputText=t.inputText);var w=HX(s,l);e.add(w,{proportion:1,expand:!0,key:"colorInput"}),w.on("valuechange",function(S){e.setValue(S)})},displayValue(e,t){var s=e.childrenMap.colorInput;s.setValue(t)}},qX=function(e,t){var s=new Bp(e,t);return e.add.existing(s),s},KX={name:"CheckboxInput",accept(e){return e.hasOwnProperty("view")?e.view==="boolean":typeof e.value=="boolean"},build(e,t){var s=e.scene;e.type="rexTweaker.CheckboxInput";var l=t.checkbox,w=qX(s,l),S=l.size;S!==void 0&&w.setSize(S,S);var k=S!==void 0?0:1;e.add(w,{proportion:0,expand:!1,fitRatio:k,key:"checkbox"}),w.on("valuechange",function(D){e.setValue(D)})},displayValue(e,t){var s=e.childrenMap.checkbox;s.setValue(t)}},QX=function(e,t){var s=new Vp(e,t);return e.add.existing(s),s},JX={name:"ToggleSwitchInput",accept(e){return e.hasOwnProperty("view")?e.view==="toggleSwitch":!1},build(e,t){var s=e.scene;e.type="rexTweaker.ToggleSwitchInput";var l=t.toggleSwitch,w=QX(s,l),S=l.size;S!==void 0&&w.setSize(S,S);var k=S!==void 0?0:1;e.addSpace().add(w,{proportion:0,expand:!1,fitRatio:k,key:"toggleSwitch"}),w.on("valuechange",function(D){e.setValue(D)})},displayValue(e,t){var s=e.childrenMap.toggleSwitch;s.setValue(t)}},ZX=function(e,t){t=cS(e,t);var s=new Kh(e,t);return e.add.existing(s),s},AT=function(e,t){for(var s=0,l=e.length;s<l;s++){var w=e[s];if(w.value===t)return s}},tj=function(e,t){var s=AT(e,t);if(s!=null)return e[s]},ej=function(e,t){var s=e.childrenMap.list;s.setOptions(t)},ij={name:"ListInput",accept(e){return e.hasOwnProperty("view")?e.view==="list":e.hasOwnProperty("options")},build(e,t){var s=e.scene;e.type="rexTweaker.ListInput";var l=ZX(s,t.list);e.add(l,{proportion:1,expand:!0,key:"list"}),l.on("button.click",function(w,S,k,D,V,G){e.setValue(k.value)})},setup(e,t,s){(s||t.hasOwnProperty("options"))&&ej(e,t.options)},displayValue(e,t){var s=e.childrenMap.list,l=tj(s.options,t);s.resetDisplayContent(l).setMinSize(s.width,s.height).layout().setMinSize(0,0)}},sj=function(e,t){for(var s=0,l=e.length;s<l;s++){var w=e[s];w&&w.setActiveState(s===t)}};const rj=Phaser.Utils.Objects.GetValue;var nj=function(e,t){var s=e.childrenMap.list;s.options=t;var l=e.scene,w=s.buttonConfig;s.clearButtons(!0);for(var S=0,k=t.length;S<k;S++){var D=t[S],V=ci(l,w).setActiveState(!1).resetDisplayContent({text:D.text});s.addButton(V)}},aj={name:"ButtonsInput",accept(e){return e.hasOwnProperty("view")?e.view==="buttons":!1},build(e,t){var s=e.scene;e.type="rexTweaker.ButtonsInput";var l=t.button?B(t.button):{},w=rj(l,"expand",!0);w&&(l.align="center"),delete l.expand;var S=ET(s,{expand:w});S.buttonConfig=l,e.add(S,{proportion:1,expand:!0,key:"list"}),S.on("button.click",function(k,D,V,G){var j=S.options[D];j&&(e._selectedIndex=D,e.setValue(j.value),e._selectedIndex=void 0)})},setup(e,t,s){(s||t.hasOwnProperty("options"))&&nj(e,t.options)},displayValue(e,t){var s=e.childrenMap.list,l=e._selectedIndex;l===void 0&&(l=AT(s.options,t)),sj(s.childrenMap.buttons,l)}},oj=function(){this.registerInputHandler(RX).registerInputHandler(LX).registerInputHandler(BX).registerInputHandler(UX).registerInputHandler(jX).registerInputHandler($X).registerInputHandler(KX).registerInputHandler(JX).registerInputHandler(ij).registerInputHandler(aj)};class RT extends OT(){constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("style")&&(s.styles=s.style),s.styles===void 0&&(s.styles={}),s.background=s.styles.background||{},s.space=s.styles.space||{},super(t,s),this.type="rexTweaker",oj.call(this)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.inputHandlers=void 0)}}T.register("tweaker",function(e){var t=new RT(this.scene,e);return this.scene.add.existing(t),t}),K(window,"RexPlugins.UI.Tweaker",RT),T.register("click",function(e,t){return new Mr(e,t)}),K(window,"RexPlugins.UI.Click",Mr),T.register("clickOutside",function(e,t){return new Nf(e,t)}),K(window,"RexPlugins.UI.ClickOutside",Nf),T.register("inTouching",function(e,t){return new Qa(e,t)}),K(window,"RexPlugins.UI.InTouching",Qa),T.register("tap",function(e,t){return Ui(e)||(t=e,e=this.scene),new zu(e,t)}),K(window,"RexPlugins.UI.Tap",zu),T.register("press",function(e,t){return Ui(e)||(t=e,e=this.scene),new Gu(e,t)}),K(window,"RexPlugins.UI.Press",Gu),T.register("swipe",function(e,t){return Ui(e)||(t=e,e=this.scene),new kh(e,t)}),K(window,"RexPlugins.UI.Swipe",kh),T.register("pan",function(e,t){return Ui(e)||(t=e,e=this.scene),new I1(e,t)}),K(window,"RexPlugins.UI.Pan",I1),T.register("drag",function(e,t){return new Ev(e,t)}),K(window,"RexPlugins.UI.Drag",Ev),T.register("pinch",function(e){return new N1(this.scene,e)}),K(window,"RexPlugins.UI.Pinch",N1),T.register("rotate",function(e){return new qf(this.scene,e)}),K(window,"RexPlugins.UI.Rotate",qf);const hj=Phaser.Utils.Objects.IsPlainObject,DT=Phaser.Utils.Objects.GetValue;var IT=function(e,t,s){var l;if(e===void 0)e=s.texture.key,t=s.frame.name;else if(hj(e)){var w=e;e=DT(w,"key",s.texture.key),t=DT(w,"frame",s.frame.name)}else typeof e=="string"||(l=e);return l===void 0&&(l=function(S){S.setTexture(e,t)}),l};const al=Phaser.Utils.Objects.GetValue,lj=Phaser.Utils.Objects.GetAdvancedValue,uj=Phaser.Math.Linear;class LT extends zn{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(lj(t,"duration",500)),this.setEase(al(t,"ease","Sine")),this.setOrientation(al(t,"orientation",0)),this.setFrontFace(al(t,"front",void 0)),this.setBackFace(al(t,"back",void 0)),this.setFace(al(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=cj[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=dj[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,s){return this.frontFaceCallback=IT(t,s,this.parent),this}setBackFace(t,s){return this.backFaceCallback=IT(t,s,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateTarget(t,s){s.justRestart&&this.toggleFace();var l=s.t;s.isOddIteration&&(l=1-l),l=this.easeFn(l);var w=uj(this.scale0,0,l);this.orientation===0?t.scaleX=w:t.scaleY=w}}const cj={x:0,horizontal:0,y:1,vertical:1},dj={front:0,back:1};T.register("flip",function(e,t){return new LT(e,t)}),K(window,"RexPlugins.UI.Flip",LT),T.register("shake",function(e,t){return new Ef(e,t)}),K(window,"RexPlugins.UI.Shake",Ef),T.register("touchEventStop",function(e,t){return new Lu(e,t)}),K(window,"RexPlugins.UI.TouchEventStop",Lu),T.register("perspective",function(e,t){return new VS(e,t)}),K(window,"RexPlugins.UI.Perspective",VS);const FT=Phaser.Math.RotateAround;var Fv=function(e,t,s){var l=e.width/2,w=e.height/2;return Mi.x=t-l,Mi.y=s-w,FT(Mi,0,0,e.rotation),Mi.x*=e.scaleX,Mi.y*=e.scaleY,Mi.x+=e.x,Mi.y+=e.y,Mi},pj=function(e,t,s){var l=e.width/2,w=e.height/2;return Mi.x=t-e.x,Mi.y=s-e.y,Mi.x/=e.scaleX,Mi.y/=e.scaleY,FT(Mi,0,0,-e.rotation),Mi.x+=l,Mi.y+=w,Mi},Mi={x:0,y:0};class fj{constructor(t,s){this.parent=t,this.vertex=s,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,s){var l=this.parent,w=l.height,S=l.frame.cutWidth/w/2,k=l.frame.cutHeight/w/2,D=t/w-S,V=s/w-k,G=this.vertex;return G.x=D,G.y=-V,l.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,s){return this._localXOrigin=t,this._localYOrigin=s,this._localX=t,this._localY=s,this}setLocalXY(t,s,l){return this._localX===t&&this._localY===s?this:(this._localX=t,this._localY=s,l||this.updateVertexPosition(t,s),this)}setWorldXY(t,s){if(this._worldX===t&&this._worldY===s)return this;var l=pj(this.parent,t,s);return this.setLocalXY(l.x,l.y),this}setPosition(t,s){return this.setWorldXY(t,s),this}getWorldXY(){return Fv(this.parent,this._localX,this._localY)}get x(){var t=Fv(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=Fv(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}}const gj=Phaser.Geom.Mesh.Vertex,vj=Phaser.Geom.Mesh.Face;var mj=function(e){for(var t=e.isNinePointMode,s=t?9:4,l=e.vertices,w=e.faces,S=e.controlPoints,k=0;k<s;k++){var D=new gj;l.push(D),S.push(new fj(e,D))}var V;t?V=bj:e.fourPointsModeRTL?V=xj:V=yj;for(var k=0,G=V.length;k<G;k+=3){var j=l[V[k+0]],tt=l[V[k+1]],st=l[V[k+2]];w.push(new vj(j,tt,st))}t?(e.topLeft=S[0],e.topCenter=S[1],e.topRight=S[2],e.centerLeft=S[3],e.center=S[4],e.centerRight=S[5],e.bottomLeft=S[6],e.bottomCenter=S[7],e.bottomRight=S[8]):(e.topLeft=S[0],e.topRight=S[1],e.bottomLeft=S[2],e.bottomRight=S[3])};const yj=[0,2,3,0,3,1],xj=[1,3,2,1,2,0],bj=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var wj=function(e){var t,s=0,l=e.height,w=0,S=e.width;if(e.isNinePointMode){var k=(w+S)/2,D=(s+l)/2;t=[w,s,k,s,S,s,w,D,k,D,S,D,w,l,k,l,S,l]}else t=[w,s,S,s,w,l,S,l];return t};const Sj=Phaser.Utils.Objects.IsPlainObject,fo=Phaser.Utils.Objects.GetValue;let Tj=class extends MS{constructor(e,t,s,l,w,S){Sj(t)&&(S=t,t=fo(S,"x",0),s=fo(S,"y",0),l=fo(S,"key",null),w=fo(S,"frame",null)),super(e,t,s,l,w),this.type="rexQuadImage",this.isNinePointMode=fo(S,"ninePointMode",!1),this.fourPointsModeRTL=fo(S,"rtl",!1),this.controlPoints=[],mj(this),this.hideCCW=!1,this.syncSize()}destroy(e){if(!(!this.scene||this.ignoreDestroy)){super.destroy(e);for(var t=0,s=this.controlPoints.length;t<s;t++)this.controlPoints[t].destroy();this.controlPoints=void 0}}resetVerts(){this.dirtyCache[9]=-1;for(var e=wj(this),t=this.width,s=this.height,l=this.frame.cutWidth/s/2,w=this.frame.cutHeight/s/2,S=this.frame.u0,k=this.frame.u1,D=this.frame.v0,V=this.frame.v1,G=k-S,j=V-D,tt=this.controlPoints,st=0,rt=e.length;st<rt;st+=2){var ot=e[st+0],ut=e[st+1],ct=st/2,pt=ot/s-l,mt=ut/s-w,yt=S+G*(ot/t),St=D+j*(ut/s);this.vertices[ct].set(pt,-mt,0).setUVs(yt,St),tt[ct].resetLocalXY(ot,ut)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}};Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var BT=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=0);for(var l=e.width,w=e.height,S=l*.5,k=w*.5,D=Math.tan(t)*k,V=Math.tan(s)*S,G=e.controlPoints,j=0,tt=G.length;j<tt;j++){var st=G[j],rt=st.localXOrigin,ot=st.localYOrigin;st.localX=rt+(ot>k?D:-D),st.localY=ot+(rt>S?V:-V)}};const Cj=Phaser.Utils.Objects.IsPlainObject,sd=Phaser.Utils.Objects.GetValue,NT=Phaser.Math.DegToRad,YT=Phaser.Math.RadToDeg;class Pj extends Tj{constructor(t,s,l,w,S){if(Cj(s)){var k=s;s=sd(k,"x",0),l=sd(k,"y",0),w=sd(k,"key",null),S=sd(k,"frame",null)}super(t,s,l,w,S),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,BT(this,this._skewX,this._skewY)}get skewXDeg(){return YT(this._skewX)}set skewXDeg(t){this.skewX=NT(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,BT(this,this._skewX,this._skewY)}get skewYDeg(){return YT(this._skewY)}set skewYDeg(t){this.skewY=NT(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,s){return s===void 0&&(s=t),this.skewX=t,this.skewY=s,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,s){return s===void 0&&(s=t),this.skewXDeg=t,this.skewYDeg=s,this}}const Mj=Phaser.Utils.Objects.IsPlainObject,rd=Phaser.Utils.Objects.GetValue;class _j extends Pj{constructor(t,s,l,w,S){if(Mj(s)){var k=s;s=rd(k,"x",0),l=rd(k,"y",0),w=rd(k,"width",32),S=rd(k,"height",32)}var D=DS(t,w,S);super(t,s,l,D,null),this.type="rexSkewRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}}class VT extends YS(_j){get skewState(){return this.isRunning}}T.register("skew",function(e,t){return new VT(e,t)}),K(window,"RexPlugins.UI.Skew",VT),T.register("anchor",function(e,t){return new Mf(e,t)}),K(window,"RexPlugins.UI.Anchor",Mf),T.register("textTyping",function(e,t){return new Gc(e,t)}),K(window,"RexPlugins.UI.TextTyping",Gc),T.register("textPage",function(e,t){return new zc(e,t)}),K(window,"RexPlugins.UI.TextPage",zc);var go=void 0,kj=function(e){e!==go&&(go!==void 0&&go.close(),go=e)},Oj=function(e){e===go&&(go=void 0)};const cr=Phaser.Utils.Objects.GetValue,Ej=Phaser.Utils.Objects.Clone;var Aj=function(e,t){t===void 0&&(t={}),t=Ej(t);var s=e.scene,l=e.style,w=cr(t,"backgroundColor",l.backgroundColor);w===null&&(w="transparent"),t.text=cr(t,"text",e.text),t.fontFamily=cr(t,"fontFamily",l.fontFamily),t.fontSize=cr(t,"fontSize",l.fontSize),t.color=cr(t,"color",l.color),t.backgroundColor=w,t.direction=cr(t,"rtl",l.rtl)?"rtl":"ltr",t.align=cr(t,"align",Rj(l)),t.direction==="rtl"&&bg(e)&&(t.align="right");var S=e.padding;S.left>0&&(t.paddingLeft=`${S.left}px`),S.right>0&&(t.paddingRight=`${S.right}px`),l.backgroundCornerRadius&&(t.borderRadius=cr(t,"borderRadius",`${l.backgroundCornerRadius}px`));var k=new ac(s,e.x,e.y,cr(t,"width",e.width),cr(t,"height",e.height),t);k.setScale(e.scaleX,e.scaleY).setOrigin(e.originX,e.originY).setScrollFactor(e.scrollFactorX,e.scrollFactorY);var D=e.parentContainer;return D?D.add(k):s.add.existing(k),k},Rj=function(e){return e.hasOwnProperty("align")?e.align:e.hasOwnProperty("halign")?e.halign:"left"},Dj=function(e,t,s){return e.time.delayedCall(0,t,[],s)};const ca=Phaser.Utils.Objects.GetValue,Ij=Phaser.Utils.Objects.Merge;var Lj=function(e,t){e===void 0&&(e={}),e=Ij(e,this.openConfig),kj(this),Os(e)&&(t=e,e=void 0);var s=ca(e,"inputType",void 0);s===void 0&&(s=ca(e,"type","text")),t===void 0&&(t=ca(e,"onClose",void 0));var l=ca(e,"onCreate",void 0),w=ca(e,"onOpen",void 0),S=ca(e,"onTextChanged",void 0);return this.inputText=Aj(this.parent,e),l&&l(this.parent,this.inputText),this.inputText.on("textchange",function(k){var D=k.text;S?S(this.parent,D):this.parent.text=D},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,ca(e,"enterClose",s!=="textarea")&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=Dj(this.scene,function(){this.scene.input.once("pointerdown",this.close,this),w&&w(this.parent,this.inputText),this.emit("open",this.parent,this.inputText)},this),this},Fj=function(){return Oj(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},Bj={open:Lj,close:Fj};const Nj=Phaser.Utils.Objects.GetValue;class nd extends Oe{constructor(t,s){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(s);var l=Nj(s,"clickEnable",!0);l&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}Object.assign(nd.prototype,Bj);var Yj=function(e,t,s){return e._edit||(e._edit=new nd(e,{clickEnable:!1})),e._edit.open(t,s),e._edit};T.register("textEdit",function(e,t){return new nd(e,t)}),K(window,"RexPlugins.UI.TextEdit",nd),T.register("layerManager",function(e){return new Ql(this.scene,e)}),K(window,"RexPlugins.UI.LayerManager",Ql);class zT extends Phaser.Plugins.ScenePlugin{constructor(t,s){super(t,s),this.add=new T(t)}boot(){var t=this.scene.events;t.on("destroy",this.destroy,this)}destroy(){this.add.destroy(),super.destroy()}isInTouching(t,s,l,w){return t.visible?Zs(t,s,l,w):!1}get viewport(){return Aa(this.scene,this.scene.cameras.main,!0)}}var Vj={getParentSizer:Qi,getTopmostSizer:Vx,removeFromParent:ra,hide:ln,show:hn,isShown:Af,confirmAction:Yw,edit:Yj,wrapExpandText:hc,fontSizeExpandText:uc,fontSizeResize:lc,setFontSizeToFitWidth:lc,waitEvent:nu,waitComplete:vi,delayPromise:Ab,setChildrenInteractive:qu,fadeIn:Ou,fadeOutDestroy:Eu,easeMoveTo:g1,easeMoveFrom:v1,modal:Ff,modalPromise:h4,modalClose:M1,requestDrag:uT,openFileChooser:Db};return Object.assign(zT.prototype,Vj),zT})})(RC);var Gj=RC.exports;const Uj=EC(Gj);class Wj extends lt.Scene{constructor(){super({key:"PreloadScene"})}preload(){const m=this.cameras.main.width,T=this.cameras.main.height,O=m/2,I=T/2,B=this.add.graphics(),y=this.add.graphics();y.fillStyle(2236962,.8),y.fillRect(O-160,I-25,320,50);const P=this.make.text({x:O,y:I-50,text:"LOADING SCENE",style:{font:"24px monospace",color:"#ffffff",fontStyle:"bold"}});P.setOrigin(.5,.5);const i=this.make.text({x:O,y:I-5,text:"0%",style:{font:"14px monospace",color:"#ffffff"}});i.setOrigin(.5,.5);const u=this.make.text({x:O,y:I+50,text:"Loading assets...",style:{font:"12px monospace",color:"#cccccc"}});u.setOrigin(.5,.5),this.load.on("progress",x=>{B.clear(),B.fillStyle(16777215,1),B.fillRect(O-150,I-15,300*x,30),i.setText(Math.floor(x*100)+"%")}),this.load.on("fileprogress",x=>{u.setText("Loading asset: "+x.key)}),this.load.on("complete",()=>{B.destroy(),y.destroy(),P.destroy(),i.destroy(),u.destroy()}),this.load.json("shops","assets/json/shops.json"),this.load.image("steering-wheel","assets/image/steering-wheel.svg"),this.load.image("key-white","assets/image/key-white.svg"),this.load.image("key-hole","assets/image/key-hole.svg"),this.load.image("hot-dog","assets/image/hot-dog.svg"),this.load.image("face-smile","assets/image/face-smile.svg"),this.load.image("face-neutral","assets/image/face-neutral.svg"),this.load.image("face-frown","assets/image/face-frown.svg"),this.load.image("x","assets/image/x.png"),this.load.image("sound-off","assets/image/sound-off-svgrepo-com.svg"),this.load.image("sound-mute","assets/image/sound-mute-svgrepo-com.svg"),this.load.image("sound-loud","assets/image/sound-loud-svgrepo-com.svg"),this.load.image("pause-1010-svgrepo-com","assets/image/pause-1010-svgrepo-com.svg"),this.load.image("play-1001-svgrepo-com","assets/image/play-1001-svgrepo-com.svg"),this.load.image("save-svgrepo-com","assets/image/save-svgrepo-com.svg"),this.time.delayedCall(2e3,()=>{this.scene.start("AppScene")})}create(){}}class Xj extends lt.Scene{tilesprite;constructor(){super({key:"BackgroundScene"})}create(){const m=this.cameras.main.width,T=this.cameras.main.height;this.tilesprite=this.add.tileSprite(0,0,m,T,"x"),this.tilesprite.setOrigin(0,0),this.tilesprite.setScrollFactor(0),this.tilesprite.setDepth(0),this.cameras.main.setVisible(!1),this.events.on("postupdate",()=>{this.tilesprite.tilePositionX-=.5,this.tilesprite.tilePositionY+=.3})}}const DC="15.1.22",aC=(W,m,T)=>({endTime:m,insertTime:T,type:"exponentialRampToValue",value:W}),oC=(W,m,T)=>({endTime:m,insertTime:T,type:"linearRampToValue",value:W}),Yv=(W,m)=>({startTime:m,type:"setValue",value:W}),IC=(W,m,T)=>({duration:T,startTime:m,type:"setValueCurve",values:W}),LC=(W,m,{startTime:T,target:O,timeConstant:I})=>O+(m-O)*Math.exp((T-W)/I),mo=W=>W.type==="exponentialRampToValue",fd=W=>W.type==="linearRampToValue",Pn=W=>mo(W)||fd(W),Zv=W=>W.type==="setValue",Vr=W=>W.type==="setValueCurve",gd=(W,m,T,O)=>{const I=W[m];return I===void 0?O:Pn(I)||Zv(I)?I.value:Vr(I)?I.values[I.values.length-1]:LC(T,gd(W,m-1,I.startTime,O),I)},hC=(W,m,T,O,I)=>T===void 0?[O.insertTime,I]:Pn(T)?[T.endTime,T.value]:Zv(T)?[T.startTime,T.value]:Vr(T)?[T.startTime+T.duration,T.values[T.values.length-1]]:[T.startTime,gd(W,m-1,T.startTime,I)],Vv=W=>W.type==="cancelAndHold",zv=W=>W.type==="cancelScheduledValues",Cn=W=>Vv(W)||zv(W)?W.cancelTime:mo(W)||fd(W)?W.endTime:W.startTime,lC=(W,m,T,{endTime:O,value:I})=>T===I?I:0<T&&0<I||T<0&&I<0?T*(I/T)**((W-m)/(O-m)):0,uC=(W,m,T,{endTime:O,value:I})=>T+(W-m)/(O-m)*(I-T),jj=(W,m)=>{const T=Math.floor(m),O=Math.ceil(m);return T===O?W[T]:(1-(m-T))*W[T]+(1-(O-m))*W[O]},Hj=(W,{duration:m,startTime:T,values:O})=>{const I=(W-T)/m*(O.length-1);return jj(O,I)},hd=W=>W.type==="setTarget";class $j{constructor(m){this._automationEvents=[],this._currenTime=0,this._defaultValue=m}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(m){const T=Cn(m);if(Vv(m)||zv(m)){const O=this._automationEvents.findIndex(B=>zv(m)&&Vr(B)?B.startTime+B.duration>=T:Cn(B)>=T),I=this._automationEvents[O];if(O!==-1&&(this._automationEvents=this._automationEvents.slice(0,O)),Vv(m)){const B=this._automationEvents[this._automationEvents.length-1];if(I!==void 0&&Pn(I)){if(B!==void 0&&hd(B))throw new Error("The internal list is malformed.");const y=B===void 0?I.insertTime:Vr(B)?B.startTime+B.duration:Cn(B),P=B===void 0?this._defaultValue:Vr(B)?B.values[B.values.length-1]:B.value,i=mo(I)?lC(T,y,P,I):uC(T,y,P,I),u=mo(I)?aC(i,T,this._currenTime):oC(i,T,this._currenTime);this._automationEvents.push(u)}if(B!==void 0&&hd(B)&&this._automationEvents.push(Yv(this.getValue(T),T)),B!==void 0&&Vr(B)&&B.startTime+B.duration>T){const y=T-B.startTime,P=(B.values.length-1)/B.duration,i=Math.max(2,1+Math.ceil(y*P)),u=y/(i-1)*P,x=B.values.slice(0,i);if(u<1)for(let c=1;c<i;c+=1){const h=u*c%1;x[c]=B.values[c-1]*(1-h)+B.values[c]*h}this._automationEvents[this._automationEvents.length-1]=IC(x,B.startTime,y)}}}else{const O=this._automationEvents.findIndex(y=>Cn(y)>T),I=O===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[O-1];if(I!==void 0&&Vr(I)&&Cn(I)+I.duration>T)return!1;const B=mo(m)?aC(m.value,m.endTime,this._currenTime):fd(m)?oC(m.value,T,this._currenTime):m;if(O===-1)this._automationEvents.push(B);else{if(Vr(m)&&T+m.duration>Cn(this._automationEvents[O]))return!1;this._automationEvents.splice(O,0,B)}}return!0}flush(m){const T=this._automationEvents.findIndex(O=>Cn(O)>m);if(T>1){const O=this._automationEvents.slice(T-1),I=O[0];hd(I)&&O.unshift(Yv(gd(this._automationEvents,T-2,I.startTime,this._defaultValue),I.startTime)),this._automationEvents=O}}getValue(m){if(this._automationEvents.length===0)return this._defaultValue;const T=this._automationEvents.findIndex(y=>Cn(y)>m),O=this._automationEvents[T],I=(T===-1?this._automationEvents.length:T)-1,B=this._automationEvents[I];if(B!==void 0&&hd(B)&&(O===void 0||!Pn(O)||O.insertTime>m))return LC(m,gd(this._automationEvents,I-1,B.startTime,this._defaultValue),B);if(B!==void 0&&Zv(B)&&(O===void 0||!Pn(O)))return B.value;if(B!==void 0&&Vr(B)&&(O===void 0||!Pn(O)||B.startTime+B.duration>m))return m<B.startTime+B.duration?Hj(m,B):B.values[B.values.length-1];if(B!==void 0&&Pn(B)&&(O===void 0||!Pn(O)))return B.value;if(O!==void 0&&mo(O)){const[y,P]=hC(this._automationEvents,I,B,O,this._defaultValue);return lC(m,y,P,O)}if(O!==void 0&&fd(O)){const[y,P]=hC(this._automationEvents,I,B,O,this._defaultValue);return uC(m,y,P,O)}return this._defaultValue}}const qj=W=>({cancelTime:W,type:"cancelAndHold"}),Kj=W=>({cancelTime:W,type:"cancelScheduledValues"}),Qj=(W,m)=>({endTime:m,type:"exponentialRampToValue",value:W}),Jj=(W,m)=>({endTime:m,type:"linearRampToValue",value:W}),Zj=(W,m,T)=>({startTime:m,target:W,timeConstant:T,type:"setTarget"}),tH=()=>new DOMException("","AbortError"),eH=W=>(m,T,[O,I,B],y)=>{W(m[I],[T,O,B],P=>P[0]===T&&P[1]===O,y)},iH=W=>(m,T,O)=>{const I=[];for(let B=0;B<O.numberOfInputs;B+=1)I.push(new Set);W.set(m,{activeInputs:I,outputs:new Set,passiveInputs:new WeakMap,renderer:T})},sH=W=>(m,T)=>{W.set(m,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:T})},To=new WeakSet,FC=new WeakMap,tm=new WeakMap,BC=new WeakMap,em=new WeakMap,Md=new WeakMap,NC=new WeakMap,Gv=new WeakMap,Uv=new WeakMap,Wv=new WeakMap,YC={construct(){return YC}},rH=W=>{try{const m=new Proxy(W,YC);new m}catch{return!1}return!0},cC=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,dC=(W,m)=>{const T=[];let O=W.replace(/^[\s]+/,""),I=O.match(cC);for(;I!==null;){const B=I[1].slice(1,-1),y=I[0].replace(/([\s]+)?;?$/,"").replace(B,new URL(B,m).toString());T.push(y),O=O.slice(I[0].length).replace(/^[\s]+/,""),I=O.match(cC)}return[T.join(";"),O]},pC=W=>{if(W!==void 0&&!Array.isArray(W))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},fC=W=>{if(!rH(W))throw new TypeError("The given value for processorCtor should be a constructor.");if(W.prototype===null||typeof W.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},nH=(W,m,T,O,I,B,y,P,i,u,x,c,h)=>{let o=0;return(r,a,d={credentials:"omit"})=>{const n=x.get(r);if(n!==void 0&&n.has(a))return Promise.resolve();const p=u.get(r);if(p!==void 0){const f=p.get(a);if(f!==void 0)return f}const g=B(r),v=g.audioWorklet===void 0?I(a).then(([f,b])=>{const[C,_]=dC(f,b),M=`${C};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${_}
})})(window,'_AWGS')`;return T(M)}).then(()=>{const f=h._AWGS.pop();if(f===void 0)throw new SyntaxError;O(g.currentTime,g.sampleRate,()=>f(class{},void 0,(b,C)=>{if(b.trim()==="")throw m();const _=Uv.get(g);if(_!==void 0){if(_.has(b))throw m();fC(C),pC(C.parameterDescriptors),_.set(b,C)}else fC(C),pC(C.parameterDescriptors),Uv.set(g,new Map([[b,C]]))},g.sampleRate,void 0,void 0))}):Promise.all([I(a),Promise.resolve(W(c,c))]).then(([[f,b],C])=>{const _=o+1;o=_;const[M,E]=dC(f,b),A=`${M};((AudioWorkletProcessor,registerProcessor)=>{${E}
})(${C?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${C?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${C?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${_}',class extends AudioWorkletProcessor{process(){return !1}})`,R=new Blob([A],{type:"application/javascript; charset=utf-8"}),L=URL.createObjectURL(R);return g.audioWorklet.addModule(L,d).then(()=>{if(P(g))return g;const Y=y(g);return Y.audioWorklet.addModule(L,d).then(()=>Y)}).then(Y=>{if(i===null)throw new SyntaxError;try{new i(Y,`__sac${_}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(L))});return p===void 0?u.set(r,new Map([[a,v]])):p.set(a,v),v.then(()=>{const f=x.get(r);f===void 0?x.set(r,new Set([a])):f.add(a)}).finally(()=>{const f=u.get(r);f!==void 0&&f.delete(a)}),v}},Xs=(W,m)=>{const T=W.get(m);if(T===void 0)throw new Error("A value with the given key could not be found.");return T},_d=(W,m)=>{const T=Array.from(W).filter(m);if(T.length>1)throw Error("More than one element was found.");if(T.length===0)throw Error("No element was found.");const[O]=T;return W.delete(O),O},VC=(W,m,T,O)=>{const I=Xs(W,m),B=_d(I,y=>y[0]===T&&y[1]===O);return I.size===0&&W.delete(m),B},ml=W=>Xs(NC,W),Co=W=>{if(To.has(W))throw new Error("The AudioNode is already stored.");To.add(W),ml(W).forEach(m=>m(!0))},zC=W=>"port"in W,yl=W=>{if(!To.has(W))throw new Error("The AudioNode is not stored.");To.delete(W),ml(W).forEach(m=>m(!1))},Xv=(W,m)=>{!zC(W)&&m.every(T=>T.size===0)&&yl(W)},aH=(W,m,T,O,I,B,y,P,i,u,x,c,h)=>{const o=new WeakMap;return(r,a,d,n,p)=>{const{activeInputs:g,passiveInputs:v}=B(a),{outputs:f}=B(r),b=P(r),C=_=>{const M=i(a),E=i(r);if(_){const A=VC(v,r,d,n);W(g,r,A,!1),!p&&!c(r)&&T(E,M,d,n),h(a)&&Co(a)}else{const A=O(g,r,d,n);m(v,n,A,!1),!p&&!c(r)&&I(E,M,d,n);const R=y(a);if(R===0)x(a)&&Xv(a,g);else{const L=o.get(a);L!==void 0&&clearTimeout(L),o.set(a,setTimeout(()=>{x(a)&&Xv(a,g)},R*1e3))}}};return u(f,[a,d,n],_=>_[0]===a&&_[1]===d&&_[2]===n,!0)?(b.add(C),x(r)?W(g,r,[d,n,C],!0):m(v,n,[r,d,C],!0),!0):!1}},oH=W=>(m,T,[O,I,B],y)=>{const P=m.get(O);P===void 0?m.set(O,new Set([[I,T,B]])):W(P,[I,T,B],i=>i[0]===I&&i[1]===T,y)},hH=W=>(m,T)=>{const O=W(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});T.connect(O).connect(m.destination);const I=()=>{T.removeEventListener("ended",I),T.disconnect(O),O.disconnect()};T.addEventListener("ended",I)},lH=W=>(m,T)=>{W(m).add(T)},uH={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},cH=(W,m,T,O,I,B)=>class extends W{constructor(y,P){const i=I(y),u={...uH,...P},x=O(i,u),c=B(i)?m():null;super(y,!1,x,c),this._nativeAnalyserNode=x}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(y){this._nativeAnalyserNode.fftSize=y}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(y){const P=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=y,!(y>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=P,T()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(y){const P=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=y,!(this._nativeAnalyserNode.maxDecibels>y))throw this._nativeAnalyserNode.minDecibels=P,T()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(y){this._nativeAnalyserNode.smoothingTimeConstant=y}getByteFrequencyData(y){this._nativeAnalyserNode.getByteFrequencyData(y)}getByteTimeDomainData(y){this._nativeAnalyserNode.getByteTimeDomainData(y)}getFloatFrequencyData(y){this._nativeAnalyserNode.getFloatFrequencyData(y)}getFloatTimeDomainData(y){this._nativeAnalyserNode.getFloatTimeDomainData(y)}},Oi=(W,m)=>W.context===m,dH=(W,m,T)=>()=>{const O=new WeakMap,I=async(B,y)=>{let P=m(B);if(!Oi(P,y)){const i={channelCount:P.channelCount,channelCountMode:P.channelCountMode,channelInterpretation:P.channelInterpretation,fftSize:P.fftSize,maxDecibels:P.maxDecibels,minDecibels:P.minDecibels,smoothingTimeConstant:P.smoothingTimeConstant};P=W(y,i)}return O.set(y,P),await T(B,y,P),P};return{render(B,y){const P=O.get(y);return P!==void 0?Promise.resolve(P):I(B,y)}}},vd=W=>{try{W.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},gr=()=>new DOMException("","IndexSizeError"),im=W=>{W.getChannelData=(m=>T=>{try{return m.call(W,T)}catch(O){throw O.code===12?gr():O}})(W.getChannelData)},pH={numberOfChannels:1},fH=(W,m,T,O,I,B,y,P)=>{let i=null;return class GC{constructor(x){if(I===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:c,numberOfChannels:h,sampleRate:o}={...pH,...x};i===null&&(i=new I(1,1,44100));const r=O!==null&&m(B,B)?new O({length:c,numberOfChannels:h,sampleRate:o}):i.createBuffer(h,c,o);if(r.numberOfChannels===0)throw T();return typeof r.copyFromChannel!="function"?(y(r),im(r)):m(vd,()=>vd(r))||P(r),W.add(r),r}static[Symbol.hasInstance](x){return x!==null&&typeof x=="object"&&Object.getPrototypeOf(x)===GC.prototype||W.has(x)}}},ji=-34028234663852886e22,Fi=-ji,zr=W=>To.has(W),gH={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},vH=(W,m,T,O,I,B,y,P)=>class extends W{constructor(i,u){const x=B(i),c={...gH,...u},h=I(x,c),o=y(x),r=o?m():null;super(i,!1,h,r),this._audioBufferSourceNodeRenderer=r,this._isBufferNullified=!1,this._isBufferSet=c.buffer!==null,this._nativeAudioBufferSourceNode=h,this._onended=null,this._playbackRate=T(this,o,h.playbackRate,Fi,ji)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(i){if(this._nativeAudioBufferSourceNode.buffer=i,i!==null){if(this._isBufferSet)throw O();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(i){this._nativeAudioBufferSourceNode.loop=i}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(i){this._nativeAudioBufferSourceNode.loopEnd=i}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(i){this._nativeAudioBufferSourceNode.loopStart=i}get onended(){return this._onended}set onended(i){const u=typeof i=="function"?P(this,i):null;this._nativeAudioBufferSourceNode.onended=u;const x=this._nativeAudioBufferSourceNode.onended;this._onended=x!==null&&x===u?i:x}get playbackRate(){return this._playbackRate}start(i=0,u=0,x){if(this._nativeAudioBufferSourceNode.start(i,u,x),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=x===void 0?[i,u]:[i,u,x]),this.context.state!=="closed"){Co(this);const c=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",c),zr(this)&&yl(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",c)}}stop(i=0){this._nativeAudioBufferSourceNode.stop(i),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=i)}},mH=(W,m,T,O,I)=>()=>{const B=new WeakMap;let y=null,P=null;const i=async(u,x)=>{let c=T(u);const h=Oi(c,x);if(!h){const o={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,loop:c.loop,loopEnd:c.loopEnd,loopStart:c.loopStart,playbackRate:c.playbackRate.value};c=m(x,o),y!==null&&c.start(...y),P!==null&&c.stop(P)}return B.set(x,c),h?await W(x,u.playbackRate,c.playbackRate):await O(x,u.playbackRate,c.playbackRate),await I(u,x,c),c};return{set start(u){y=u},set stop(u){P=u},render(u,x){const c=B.get(x);return c!==void 0?Promise.resolve(c):i(u,x)}}},yH=W=>"playbackRate"in W,xH=W=>"frequency"in W&&"gain"in W,bH=W=>"offset"in W,wH=W=>!("frequency"in W)&&"gain"in W,SH=W=>"detune"in W&&"frequency"in W&&!("gain"in W),TH=W=>"pan"in W,Bi=W=>Xs(FC,W),xl=W=>Xs(BC,W),jv=(W,m)=>{const{activeInputs:T}=Bi(W);T.forEach(I=>I.forEach(([B])=>{m.includes(W)||jv(B,[...m,W])}));const O=yH(W)?[W.playbackRate]:zC(W)?Array.from(W.parameters.values()):xH(W)?[W.Q,W.detune,W.frequency,W.gain]:bH(W)?[W.offset]:wH(W)?[W.gain]:SH(W)?[W.detune,W.frequency]:TH(W)?[W.pan]:[];for(const I of O){const B=xl(I);B!==void 0&&B.activeInputs.forEach(([y])=>jv(y,m))}zr(W)&&yl(W)},UC=W=>{jv(W.destination,[])},CH=W=>W===void 0||typeof W=="number"||typeof W=="string"&&(W==="balanced"||W==="interactive"||W==="playback"),PH=(W,m,T,O,I,B,y,P,i)=>class extends W{constructor(u={}){if(i===null)throw new Error("Missing the native AudioContext constructor.");let x;try{x=new i(u)}catch(o){throw o.code===12&&o.message==="sampleRate is not in range"?T():o}if(x===null)throw O();if(!CH(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&x.sampleRate!==u.sampleRate)throw T();super(x,2);const{latencyHint:c}=u,{sampleRate:h}=x;if(this._baseLatency=typeof x.baseLatency=="number"?x.baseLatency:c==="balanced"?512/h:c==="interactive"||c===void 0?256/h:c==="playback"?1024/h:Math.max(2,Math.min(128,Math.round(c*h/128)))*128/h,this._nativeAudioContext=x,i.name==="webkitAudioContext"?(this._nativeGainNode=x.createGain(),this._nativeOscillatorNode=x.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(x.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,x.state==="running"){this._state="suspended";const o=()=>{this._state==="suspended"&&(this._state=null),x.removeEventListener("statechange",o)};x.addEventListener("statechange",o)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw m()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),UC(this)}))}createMediaElementSource(u){return new I(this,{mediaElement:u})}createMediaStreamDestination(){return new B(this)}createMediaStreamSource(u){return new y(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new P(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,x)=>{const c=()=>{this._nativeAudioContext.removeEventListener("statechange",c),this._nativeAudioContext.state==="running"?u():this.resume().then(u,x)};this._nativeAudioContext.addEventListener("statechange",c)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?m():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?m():u})}},MH=(W,m,T,O,I,B,y,P)=>class extends W{constructor(i,u){const x=B(i),c=y(x),h=I(x,u,c),o=c?m(P):null;super(i,!1,h,o),this._isNodeOfNativeOfflineAudioContext=c,this._nativeAudioDestinationNode=h}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(i){if(this._isNodeOfNativeOfflineAudioContext)throw O();if(i>this._nativeAudioDestinationNode.maxChannelCount)throw T();this._nativeAudioDestinationNode.channelCount=i}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(i){if(this._isNodeOfNativeOfflineAudioContext)throw O();this._nativeAudioDestinationNode.channelCountMode=i}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},_H=W=>{const m=new WeakMap,T=async(O,I)=>{const B=I.destination;return m.set(I,B),await W(O,I,B),B};return{render(O,I){const B=m.get(I);return B!==void 0?Promise.resolve(B):T(O,I)}}},kH=(W,m,T,O,I,B,y,P)=>(i,u)=>{const x=u.listener,c=()=>{const f=new Float32Array(1),b=m(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),C=y(u);let _=!1,M=[0,0,-1,0,1,0],E=[0,0,0];const A=()=>{if(_)return;_=!0;const F=O(u,256,9,0);F.onaudioprocess=({inputBuffer:N})=>{const z=[B(N,f,0),B(N,f,1),B(N,f,2),B(N,f,3),B(N,f,4),B(N,f,5)];z.some((q,Q)=>q!==M[Q])&&(x.setOrientation(...z),M=z);const U=[B(N,f,6),B(N,f,7),B(N,f,8)];U.some((q,Q)=>q!==E[Q])&&(x.setPosition(...U),E=U)},b.connect(F)},R=F=>N=>{N!==M[F]&&(M[F]=N,x.setOrientation(...M))},L=F=>N=>{N!==E[F]&&(E[F]=N,x.setPosition(...E))},Y=(F,N,z)=>{const U=T(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:N});U.connect(b,0,F),U.start(),Object.defineProperty(U.offset,"defaultValue",{get(){return N}});const q=W({context:i},C,U.offset,Fi,ji);return P(q,"value",Q=>()=>Q.call(q),Q=>K=>{try{Q.call(q,K)}catch(et){if(et.code!==9)throw et}A(),C&&z(K)}),q.cancelAndHoldAtTime=(Q=>C?()=>{throw I()}:(...K)=>{const et=Q.apply(q,K);return A(),et})(q.cancelAndHoldAtTime),q.cancelScheduledValues=(Q=>C?()=>{throw I()}:(...K)=>{const et=Q.apply(q,K);return A(),et})(q.cancelScheduledValues),q.exponentialRampToValueAtTime=(Q=>C?()=>{throw I()}:(...K)=>{const et=Q.apply(q,K);return A(),et})(q.exponentialRampToValueAtTime),q.linearRampToValueAtTime=(Q=>C?()=>{throw I()}:(...K)=>{const et=Q.apply(q,K);return A(),et})(q.linearRampToValueAtTime),q.setTargetAtTime=(Q=>C?()=>{throw I()}:(...K)=>{const et=Q.apply(q,K);return A(),et})(q.setTargetAtTime),q.setValueAtTime=(Q=>C?()=>{throw I()}:(...K)=>{const et=Q.apply(q,K);return A(),et})(q.setValueAtTime),q.setValueCurveAtTime=(Q=>C?()=>{throw I()}:(...K)=>{const et=Q.apply(q,K);return A(),et})(q.setValueCurveAtTime),q};return{forwardX:Y(0,0,R(0)),forwardY:Y(1,0,R(1)),forwardZ:Y(2,-1,R(2)),positionX:Y(6,0,L(0)),positionY:Y(7,0,L(1)),positionZ:Y(8,0,L(2)),upX:Y(3,0,R(3)),upY:Y(4,1,R(4)),upZ:Y(5,0,R(5))}},{forwardX:h,forwardY:o,forwardZ:r,positionX:a,positionY:d,positionZ:n,upX:p,upY:g,upZ:v}=x.forwardX===void 0?c():x;return{get forwardX(){return h},get forwardY(){return o},get forwardZ(){return r},get positionX(){return a},get positionY(){return d},get positionZ(){return n},get upX(){return p},get upY(){return g},get upZ(){return v}}},md=W=>"context"in W,bl=W=>md(W[0]),xa=(W,m,T,O)=>{for(const I of W)if(T(I)){if(O)return!1;throw Error("The set contains at least one similar element.")}return W.add(m),!0},gC=(W,m,[T,O],I)=>{xa(W,[m,T,O],B=>B[0]===m&&B[1]===T,I)},vC=(W,[m,T,O],I)=>{const B=W.get(m);B===void 0?W.set(m,new Set([[T,O]])):xa(B,[T,O],y=>y[0]===T,I)},Ro=W=>"inputs"in W,yd=(W,m,T,O)=>{if(Ro(m)){const I=m.inputs[O];return W.connect(I,T,0),[I,T,0]}return W.connect(m,T,O),[m,T,O]},WC=(W,m,T)=>{for(const O of W)if(O[0]===m&&O[1]===T)return W.delete(O),O;return null},OH=(W,m,T)=>_d(W,O=>O[0]===m&&O[1]===T),XC=(W,m)=>{if(!ml(W).delete(m))throw new Error("Missing the expected event listener.")},jC=(W,m,T)=>{const O=Xs(W,m),I=_d(O,B=>B[0]===T);return O.size===0&&W.delete(m),I},xd=(W,m,T,O)=>{Ro(m)?W.disconnect(m.inputs[O],T,0):W.disconnect(m,T,O)},Me=W=>Xs(tm,W),pl=W=>Xs(em,W),va=W=>Gv.has(W),dd=W=>!To.has(W),mC=(W,m)=>new Promise(T=>{if(m!==null)T(!0);else{const O=W.createScriptProcessor(256,1,1),I=W.createGain(),B=W.createBuffer(1,2,44100),y=B.getChannelData(0);y[0]=1,y[1]=1;const P=W.createBufferSource();P.buffer=B,P.loop=!0,P.connect(O).connect(W.destination),P.connect(I),P.disconnect(I),O.onaudioprocess=i=>{const u=i.inputBuffer.getChannelData(0);Array.prototype.some.call(u,x=>x===1)?T(!0):T(!1),P.stop(),O.onaudioprocess=null,P.disconnect(O),O.disconnect(W.destination)},P.start()}}),Bv=(W,m)=>{const T=new Map;for(const O of W)for(const I of O){const B=T.get(I);T.set(I,B===void 0?1:B+1)}T.forEach((O,I)=>m(I,O))},bd=W=>"context"in W,EH=W=>{const m=new Map;W.connect=(T=>(O,I=0,B=0)=>{const y=bd(O)?T(O,I,B):T(O,I),P=m.get(O);return P===void 0?m.set(O,[{input:B,output:I}]):P.every(i=>i.input!==B||i.output!==I)&&P.push({input:B,output:I}),y})(W.connect.bind(W)),W.disconnect=(T=>(O,I,B)=>{if(T.apply(W),O===void 0)m.clear();else if(typeof O=="number")for(const[y,P]of m){const i=P.filter(u=>u.output!==O);i.length===0?m.delete(y):m.set(y,i)}else if(m.has(O))if(I===void 0)m.delete(O);else{const y=m.get(O);if(y!==void 0){const P=y.filter(i=>i.output!==I&&(i.input!==B||B===void 0));P.length===0?m.delete(O):m.set(O,P)}}for(const[y,P]of m)P.forEach(i=>{bd(y)?W.connect(y,i.output,i.input):W.connect(y,i.output)})})(W.disconnect)},AH=(W,m,T,O)=>{const{activeInputs:I,passiveInputs:B}=xl(m),{outputs:y}=Bi(W),P=ml(W),i=u=>{const x=Me(W),c=pl(m);if(u){const h=jC(B,W,T);gC(I,W,h,!1),!O&&!va(W)&&x.connect(c,T)}else{const h=OH(I,W,T);vC(B,h,!1),!O&&!va(W)&&x.disconnect(c,T)}};return xa(y,[m,T],u=>u[0]===m&&u[1]===T,!0)?(P.add(i),zr(W)?gC(I,W,[T,i],!0):vC(B,[W,T,i],!0),!0):!1},RH=(W,m,T,O)=>{const{activeInputs:I,passiveInputs:B}=Bi(m),y=WC(I[O],W,T);return y===null?[VC(B,W,T,O)[2],!1]:[y[2],!0]},DH=(W,m,T)=>{const{activeInputs:O,passiveInputs:I}=xl(m),B=WC(O,W,T);return B===null?[jC(I,W,T)[1],!1]:[B[2],!0]},sm=(W,m,T,O,I)=>{const[B,y]=RH(W,T,O,I);if(B!==null&&(XC(W,B),y&&!m&&!va(W)&&xd(Me(W),Me(T),O,I)),zr(T)){const{activeInputs:P}=Bi(T);Xv(T,P)}},rm=(W,m,T,O)=>{const[I,B]=DH(W,T,O);I!==null&&(XC(W,I),B&&!m&&!va(W)&&Me(W).disconnect(pl(T),O))},IH=(W,m)=>{const T=Bi(W),O=[];for(const I of T.outputs)bl(I)?sm(W,m,...I):rm(W,m,...I),O.push(I[0]);return T.outputs.clear(),O},LH=(W,m,T)=>{const O=Bi(W),I=[];for(const B of O.outputs)B[1]===T&&(bl(B)?sm(W,m,...B):rm(W,m,...B),I.push(B[0]),O.outputs.delete(B));return I},FH=(W,m,T,O,I)=>{const B=Bi(W);return Array.from(B.outputs).filter(y=>y[0]===T&&(O===void 0||y[1]===O)&&(I===void 0||y[2]===I)).map(y=>(bl(y)?sm(W,m,...y):rm(W,m,...y),B.outputs.delete(y),y[0]))},BH=(W,m,T,O,I,B,y,P,i,u,x,c,h,o,r,a)=>class extends u{constructor(d,n,p,g){super(p),this._context=d,this._nativeAudioNode=p;const v=x(d);c(v)&&T(mC,()=>mC(v,a))!==!0&&EH(p),tm.set(this,p),NC.set(this,new Set),d.state!=="closed"&&n&&Co(this),W(this,g,p)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(d){this._nativeAudioNode.channelCount=d}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(d){this._nativeAudioNode.channelCountMode=d}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(d){this._nativeAudioNode.channelInterpretation=d}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(d,n=0,p=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw I();const g=x(this._context),v=r(g);if(h(d)||o(d))throw B();if(md(d)){const b=Me(d);try{const C=yd(this._nativeAudioNode,b,n,p),_=dd(this);(v||_)&&this._nativeAudioNode.disconnect(...C),this.context.state!=="closed"&&!_&&dd(d)&&Co(d)}catch(C){throw C.code===12?B():C}if(m(this,d,n,p,v)){const C=i([this],d);Bv(C,O(v))}return d}const f=pl(d);if(f.name==="playbackRate"&&f.maxValue===1024)throw y();try{this._nativeAudioNode.connect(f,n),(v||dd(this))&&this._nativeAudioNode.disconnect(f,n)}catch(b){throw b.code===12?B():b}if(AH(this,d,n,v)){const b=i([this],d);Bv(b,O(v))}}disconnect(d,n,p){let g;const v=x(this._context),f=r(v);if(d===void 0)g=IH(this,f);else if(typeof d=="number"){if(d<0||d>=this.numberOfOutputs)throw I();g=LH(this,f,d)}else{if(n!==void 0&&(n<0||n>=this.numberOfOutputs)||md(d)&&p!==void 0&&(p<0||p>=d.numberOfInputs))throw I();if(g=FH(this,f,d,n,p),g.length===0)throw B()}for(const b of g){const C=i([this],b);Bv(C,P)}}},NH=(W,m,T,O,I,B,y,P,i,u,x,c,h)=>(o,r,a,d=null,n=null)=>{const p=a.value,g=new $j(p),v=r?O(g):null,f={get defaultValue(){return p},get maxValue(){return d===null?a.maxValue:d},get minValue(){return n===null?a.minValue:n},get value(){return a.value},set value(b){a.value=b,f.setValueAtTime(b,o.context.currentTime)},cancelAndHoldAtTime(b){if(typeof a.cancelAndHoldAtTime=="function")v===null&&g.flush(o.context.currentTime),g.add(I(b)),a.cancelAndHoldAtTime(b);else{const C=Array.from(g).pop();v===null&&g.flush(o.context.currentTime),g.add(I(b));const _=Array.from(g).pop();a.cancelScheduledValues(b),C!==_&&_!==void 0&&(_.type==="exponentialRampToValue"?a.exponentialRampToValueAtTime(_.value,_.endTime):_.type==="linearRampToValue"?a.linearRampToValueAtTime(_.value,_.endTime):_.type==="setValue"?a.setValueAtTime(_.value,_.startTime):_.type==="setValueCurve"&&a.setValueCurveAtTime(_.values,_.startTime,_.duration))}return f},cancelScheduledValues(b){return v===null&&g.flush(o.context.currentTime),g.add(B(b)),a.cancelScheduledValues(b),f},exponentialRampToValueAtTime(b,C){if(b===0)throw new RangeError;if(!Number.isFinite(C)||C<0)throw new RangeError;const _=o.context.currentTime;return v===null&&g.flush(_),Array.from(g).length===0&&(g.add(u(p,_)),a.setValueAtTime(p,_)),g.add(y(b,C)),a.exponentialRampToValueAtTime(b,C),f},linearRampToValueAtTime(b,C){const _=o.context.currentTime;return v===null&&g.flush(_),Array.from(g).length===0&&(g.add(u(p,_)),a.setValueAtTime(p,_)),g.add(P(b,C)),a.linearRampToValueAtTime(b,C),f},setTargetAtTime(b,C,_){return v===null&&g.flush(o.context.currentTime),g.add(i(b,C,_)),a.setTargetAtTime(b,C,_),f},setValueAtTime(b,C){return v===null&&g.flush(o.context.currentTime),g.add(u(b,C)),a.setValueAtTime(b,C),f},setValueCurveAtTime(b,C,_){const M=b instanceof Float32Array?b:new Float32Array(b);if(c!==null&&c.name==="webkitAudioContext"){const E=C+_,A=o.context.sampleRate,R=Math.ceil(C*A),L=Math.floor(E*A),Y=L-R,F=new Float32Array(Y);for(let z=0;z<Y;z+=1){const U=(M.length-1)/_*((R+z)/A-C),q=Math.floor(U),Q=Math.ceil(U);F[z]=q===Q?M[q]:(1-(U-q))*M[q]+(1-(Q-U))*M[Q]}v===null&&g.flush(o.context.currentTime),g.add(x(F,C,_)),a.setValueCurveAtTime(F,C,_);const N=L/A;N<E&&h(f,F[F.length-1],N),h(f,M[M.length-1],E)}else v===null&&g.flush(o.context.currentTime),g.add(x(M,C,_)),a.setValueCurveAtTime(M,C,_);return f}};return T.set(f,a),m.set(f,o),W(f,v),f},YH=W=>({replay(m){for(const T of W)if(T.type==="exponentialRampToValue"){const{endTime:O,value:I}=T;m.exponentialRampToValueAtTime(I,O)}else if(T.type==="linearRampToValue"){const{endTime:O,value:I}=T;m.linearRampToValueAtTime(I,O)}else if(T.type==="setTarget"){const{startTime:O,target:I,timeConstant:B}=T;m.setTargetAtTime(I,O,B)}else if(T.type==="setValue"){const{startTime:O,value:I}=T;m.setValueAtTime(I,O)}else if(T.type==="setValueCurve"){const{duration:O,startTime:I,values:B}=T;m.setValueCurveAtTime(B,I,O)}else throw new Error("Can't apply an unknown automation.")}});class HC{constructor(m){this._map=new Map(m)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(m,T=null){return this._map.forEach((O,I)=>m.call(T,O,I,this))}get(m){return this._map.get(m)}has(m){return this._map.has(m)}keys(){return this._map.keys()}values(){return this._map.values()}}const VH={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},zH=(W,m,T,O,I,B,y,P,i,u,x,c,h,o)=>class extends m{constructor(r,a,d){var n;const p=P(r),g=i(p),v=x({...VH,...d});h(v);const f=Uv.get(p),b=f?.get(a),C=g||p.state!=="closed"?p:(n=y(p))!==null&&n!==void 0?n:p,_=I(C,g?null:r.baseLatency,u,a,b,v),M=g?O(a,v,b):null;super(r,!0,_,M);const E=[];_.parameters.forEach((R,L)=>{const Y=T(this,g,R);E.push([L,Y])}),this._nativeAudioWorkletNode=_,this._onprocessorerror=null,this._parameters=new HC(E),g&&W(p,this);const{activeInputs:A}=B(this);c(_,A)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(r){const a=typeof r=="function"?o(this,r):null;this._nativeAudioWorkletNode.onprocessorerror=a;const d=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=d!==null&&d===a?r:d}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function wd(W,m,T,O,I){if(typeof W.copyFromChannel=="function")m[T].byteLength===0&&(m[T]=new Float32Array(128)),W.copyFromChannel(m[T],O,I);else{const B=W.getChannelData(O);if(m[T].byteLength===0)m[T]=B.slice(I,I+128);else{const y=new Float32Array(B.buffer,I*Float32Array.BYTES_PER_ELEMENT,128);m[T].set(y)}}}const $C=(W,m,T,O,I)=>{typeof W.copyToChannel=="function"?m[T].byteLength!==0&&W.copyToChannel(m[T],O,I):m[T].byteLength!==0&&W.getChannelData(O).set(m[T],I)},Sd=(W,m)=>{const T=[];for(let O=0;O<W;O+=1){const I=[],B=typeof m=="number"?m:m[O];for(let y=0;y<B;y+=1)I.push(new Float32Array(128));T.push(I)}return T},GH=(W,m)=>{const T=Xs(Wv,W),O=Me(m);return Xs(T,O)},UH=async(W,m,T,O,I,B,y)=>{const P=m===null?Math.ceil(W.context.length/128)*128:m.length,i=O.channelCount*O.numberOfInputs,u=I.reduce((d,n)=>d+n,0),x=u===0?null:T.createBuffer(u,P,T.sampleRate);if(B===void 0)throw new Error("Missing the processor constructor.");const c=Bi(W),h=await GH(T,W),o=Sd(O.numberOfInputs,O.channelCount),r=Sd(O.numberOfOutputs,I),a=Array.from(W.parameters.keys()).reduce((d,n)=>({...d,[n]:new Float32Array(128)}),{});for(let d=0;d<P;d+=128){if(O.numberOfInputs>0&&m!==null)for(let n=0;n<O.numberOfInputs;n+=1)for(let p=0;p<O.channelCount;p+=1)wd(m,o[n],p,p,d);B.parameterDescriptors!==void 0&&m!==null&&B.parameterDescriptors.forEach(({name:n},p)=>{wd(m,a,n,i+p,d)});for(let n=0;n<O.numberOfInputs;n+=1)for(let p=0;p<I[n];p+=1)r[n][p].byteLength===0&&(r[n][p]=new Float32Array(128));try{const n=o.map((g,v)=>c.activeInputs[v].size===0?[]:g),p=y(d/T.sampleRate,T.sampleRate,()=>h.process(n,r,a));if(x!==null)for(let g=0,v=0;g<O.numberOfOutputs;g+=1){for(let f=0;f<I[g];f+=1)$C(x,r[g],f,v+f,d);v+=I[g]}if(!p)break}catch(n){W.dispatchEvent(new ErrorEvent("processorerror",{colno:n.colno,filename:n.filename,lineno:n.lineno,message:n.message}));break}}return x},WH=(W,m,T,O,I,B,y,P,i,u,x,c,h,o,r,a)=>(d,n,p)=>{const g=new WeakMap;let v=null;const f=async(b,C)=>{let _=x(b),M=null;const E=Oi(_,C),A=Array.isArray(n.outputChannelCount)?n.outputChannelCount:Array.from(n.outputChannelCount);if(c===null){const R=A.reduce((N,z)=>N+z,0),L=I(C,{channelCount:Math.max(1,R),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,R)}),Y=[];for(let N=0;N<b.numberOfOutputs;N+=1)Y.push(O(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[N]}));const F=y(C,{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,gain:1});F.connect=m.bind(null,Y),F.disconnect=i.bind(null,Y),M=[L,Y,F]}else E||(_=new c(C,d));if(g.set(C,M===null?_:M[2]),M!==null){if(v===null){if(p===void 0)throw new Error("Missing the processor constructor.");if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const z=b.channelCount*b.numberOfInputs,U=p.parameterDescriptors===void 0?0:p.parameterDescriptors.length,q=z+U;v=UH(b,q===0?null:await(async()=>{const Q=new h(q,Math.ceil(b.context.length/128)*128,C.sampleRate),K=[],et=[];for(let X=0;X<n.numberOfInputs;X+=1)K.push(y(Q,{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,gain:1})),et.push(I(Q,{channelCount:n.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:n.channelCount}));const H=await Promise.all(Array.from(b.parameters.values()).map(async X=>{const Z=B(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:X.value});return await o(Q,X,Z.offset),Z})),J=O(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,z+U)});for(let X=0;X<n.numberOfInputs;X+=1){K[X].connect(et[X]);for(let Z=0;Z<n.channelCount;Z+=1)et[X].connect(J,Z,X*n.channelCount+Z)}for(const[X,Z]of H.entries())Z.connect(J,0,z+X),Z.start(0);return J.connect(Q.destination),await Promise.all(K.map(X=>r(b,Q,X))),a(Q)})(),C,n,A,p,u)}const R=await v,L=T(C,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[Y,F,N]=M;R!==null&&(L.buffer=R,L.start(0)),L.connect(Y);for(let z=0,U=0;z<b.numberOfOutputs;z+=1){const q=F[z];for(let Q=0;Q<A[z];Q+=1)Y.connect(q,U+Q,Q);U+=A[z]}return N}if(E)for(const[R,L]of b.parameters.entries())await W(C,L,_.parameters.get(R));else for(const[R,L]of b.parameters.entries())await o(C,L,_.parameters.get(R));return await r(b,C,_),_};return{render(b,C){P(C,b);const _=g.get(C);return _!==void 0?Promise.resolve(_):f(b,C)}}},XH=(W,m,T,O,I,B,y,P,i,u,x,c,h,o,r,a,d,n,p,g)=>class extends r{constructor(v,f){super(v,f),this._nativeContext=v,this._audioWorklet=W===void 0?void 0:{addModule:(b,C)=>W(this,b,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new m(this)}createBiquadFilter(){return new I(this)}createBuffer(v,f,b){return new T({length:f,numberOfChannels:v,sampleRate:b})}createBufferSource(){return new O(this)}createChannelMerger(v=6){return new B(this,{numberOfInputs:v})}createChannelSplitter(v=6){return new y(this,{numberOfOutputs:v})}createConstantSource(){return new P(this)}createConvolver(){return new i(this)}createDelay(v=1){return new x(this,{maxDelayTime:v})}createDynamicsCompressor(){return new c(this)}createGain(){return new h(this)}createIIRFilter(v,f){return new o(this,{feedback:f,feedforward:v})}createOscillator(){return new a(this)}createPanner(){return new d(this)}createPeriodicWave(v,f,b={disableNormalization:!1}){return new n(this,{...b,imag:f,real:v})}createStereoPanner(){return new p(this)}createWaveShaper(){return new g(this)}decodeAudioData(v,f,b){return u(this._nativeContext,v).then(C=>(typeof f=="function"&&f(C),C),C=>{throw typeof b=="function"&&b(C),C})}},jH={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},HH=(W,m,T,O,I,B,y,P)=>class extends W{constructor(i,u){const x=B(i),c={...jH,...u},h=I(x,c),o=y(x),r=o?T():null;super(i,!1,h,r),this._Q=m(this,o,h.Q,Fi,ji),this._detune=m(this,o,h.detune,1200*Math.log2(Fi),-1200*Math.log2(Fi)),this._frequency=m(this,o,h.frequency,i.sampleRate/2,0),this._gain=m(this,o,h.gain,40*Math.log10(Fi),ji),this._nativeBiquadFilterNode=h,P(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(i){this._nativeBiquadFilterNode.type=i}getFrequencyResponse(i,u,x){try{this._nativeBiquadFilterNode.getFrequencyResponse(i,u,x)}catch(c){throw c.code===11?O():c}if(i.length!==u.length||u.length!==x.length)throw O()}},$H=(W,m,T,O,I)=>()=>{const B=new WeakMap,y=async(P,i)=>{let u=T(P);const x=Oi(u,i);if(!x){const c={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=m(i,c)}return B.set(i,u),x?(await W(i,P.Q,u.Q),await W(i,P.detune,u.detune),await W(i,P.frequency,u.frequency),await W(i,P.gain,u.gain)):(await O(i,P.Q,u.Q),await O(i,P.detune,u.detune),await O(i,P.frequency,u.frequency),await O(i,P.gain,u.gain)),await I(P,i,u),u};return{render(P,i){const u=B.get(i);return u!==void 0?Promise.resolve(u):y(P,i)}}},qH=(W,m)=>(T,O)=>{const I=m.get(T);if(I!==void 0)return I;const B=W.get(T);if(B!==void 0)return B;try{const y=O();return y instanceof Promise?(W.set(T,y),y.catch(()=>!1).then(P=>(W.delete(T),m.set(T,P),P))):(m.set(T,y),y)}catch{return m.set(T,!1),!1}},KH={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},QH=(W,m,T,O,I)=>class extends W{constructor(B,y){const P=O(B),i={...KH,...y},u=T(P,i),x=I(P)?m():null;super(B,!1,u,x)}},JH=(W,m,T)=>()=>{const O=new WeakMap,I=async(B,y)=>{let P=m(B);if(!Oi(P,y)){const i={channelCount:P.channelCount,channelCountMode:P.channelCountMode,channelInterpretation:P.channelInterpretation,numberOfInputs:P.numberOfInputs};P=W(y,i)}return O.set(y,P),await T(B,y,P),P};return{render(B,y){const P=O.get(y);return P!==void 0?Promise.resolve(P):I(B,y)}}},ZH={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},t$=(W,m,T,O,I,B)=>class extends W{constructor(y,P){const i=O(y),u=B({...ZH,...P}),x=T(i,u),c=I(i)?m():null;super(y,!1,x,c)}},e$=(W,m,T)=>()=>{const O=new WeakMap,I=async(B,y)=>{let P=m(B);if(!Oi(P,y)){const i={channelCount:P.channelCount,channelCountMode:P.channelCountMode,channelInterpretation:P.channelInterpretation,numberOfOutputs:P.numberOfOutputs};P=W(y,i)}return O.set(y,P),await T(B,y,P),P};return{render(B,y){const P=O.get(y);return P!==void 0?Promise.resolve(P):I(B,y)}}},i$=W=>(m,T,O)=>W(T,m,O),s$=W=>(m,T,O=0,I=0)=>{const B=m[O];if(B===void 0)throw W();return bd(T)?B.connect(T,0,I):B.connect(T,0)},r$=W=>(m,T)=>{const O=W(m,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),I=m.createBuffer(1,2,44100);return O.buffer=I,O.loop=!0,O.connect(T),O.start(),()=>{O.stop(),O.disconnect(T)}},n$={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},a$=(W,m,T,O,I,B,y)=>class extends W{constructor(P,i){const u=I(P),x={...n$,...i},c=O(u,x),h=B(u),o=h?T():null;super(P,!1,c,o),this._constantSourceNodeRenderer=o,this._nativeConstantSourceNode=c,this._offset=m(this,h,c.offset,Fi,ji),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(P){const i=typeof P=="function"?y(this,P):null;this._nativeConstantSourceNode.onended=i;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===i?P:u}start(P=0){if(this._nativeConstantSourceNode.start(P),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=P),this.context.state!=="closed"){Co(this);const i=()=>{this._nativeConstantSourceNode.removeEventListener("ended",i),zr(this)&&yl(this)};this._nativeConstantSourceNode.addEventListener("ended",i)}}stop(P=0){this._nativeConstantSourceNode.stop(P),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=P)}},o$=(W,m,T,O,I)=>()=>{const B=new WeakMap;let y=null,P=null;const i=async(u,x)=>{let c=T(u);const h=Oi(c,x);if(!h){const o={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,offset:c.offset.value};c=m(x,o),y!==null&&c.start(y),P!==null&&c.stop(P)}return B.set(x,c),h?await W(x,u.offset,c.offset):await O(x,u.offset,c.offset),await I(u,x,c),c};return{set start(u){y=u},set stop(u){P=u},render(u,x){const c=B.get(x);return c!==void 0?Promise.resolve(c):i(u,x)}}},h$=W=>m=>(W[0]=m,W[0]),l$={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},u$=(W,m,T,O,I,B)=>class extends W{constructor(y,P){const i=O(y),u={...l$,...P},x=T(i,u),c=I(i)?m():null;super(y,!1,x,c),this._isBufferNullified=!1,this._nativeConvolverNode=x,u.buffer!==null&&B(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(y){if(this._nativeConvolverNode.buffer=y,y===null&&this._nativeConvolverNode.buffer!==null){const P=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=P.createBuffer(1,1,P.sampleRate),this._isBufferNullified=!0,B(this,0)}else this._isBufferNullified=!1,B(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(y){this._nativeConvolverNode.normalize=y}},c$=(W,m,T)=>()=>{const O=new WeakMap,I=async(B,y)=>{let P=m(B);if(!Oi(P,y)){const i={buffer:P.buffer,channelCount:P.channelCount,channelCountMode:P.channelCountMode,channelInterpretation:P.channelInterpretation,disableNormalization:!P.normalize};P=W(y,i)}return O.set(y,P),Ro(P)?await T(B,y,P.inputs[0]):await T(B,y,P),P};return{render(B,y){const P=O.get(y);return P!==void 0?Promise.resolve(P):I(B,y)}}},d$=(W,m)=>(T,O,I)=>{if(m===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new m(T,O,I)}catch(B){throw B.name==="SyntaxError"?W():B}},p$=()=>new DOMException("","DataCloneError"),yC=W=>{const{port1:m,port2:T}=new MessageChannel;return new Promise(O=>{const I=()=>{T.onmessage=null,m.close(),T.close(),O()};T.onmessage=()=>I();try{m.postMessage(W,[W])}catch{}finally{I()}})},f$=(W,m,T,O,I,B,y,P,i,u,x)=>(c,h)=>{const o=y(c)?c:B(c);if(I.has(h)){const r=T();return Promise.reject(r)}try{I.add(h)}catch{}return m(i,()=>i(o))?o.decodeAudioData(h).then(r=>(yC(h).catch(()=>{}),m(P,()=>P(r))||x(r),W.add(r),r)):new Promise((r,a)=>{const d=async()=>{try{await yC(h)}catch{}},n=p=>{a(p),d()};try{o.decodeAudioData(h,p=>{typeof p.copyFromChannel!="function"&&(u(p),im(p)),W.add(p),d().then(()=>r(p))},p=>{n(p===null?O():p)})}catch(p){n(p)}})},g$=(W,m,T,O,I,B,y,P)=>(i,u)=>{const x=m.get(i);if(x===void 0)throw new Error("Missing the expected cycle count.");const c=B(i.context),h=P(c);if(x===u){if(m.delete(i),!h&&y(i)){const o=O(i),{outputs:r}=T(i);for(const a of r)if(bl(a)){const d=O(a[0]);W(o,d,a[1],a[2])}else{const d=I(a[0]);o.connect(d,a[1])}}}else m.set(i,x-u)},v$={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},m$=(W,m,T,O,I,B,y)=>class extends W{constructor(P,i){const u=I(P),x={...v$,...i},c=O(u,x),h=B(u),o=h?T(x.maxDelayTime):null;super(P,!1,c,o),this._delayTime=m(this,h,c.delayTime),y(this,x.maxDelayTime)}get delayTime(){return this._delayTime}},y$=(W,m,T,O,I)=>B=>{const y=new WeakMap,P=async(i,u)=>{let x=T(i);const c=Oi(x,u);if(!c){const h={channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,delayTime:x.delayTime.value,maxDelayTime:B};x=m(u,h)}return y.set(u,x),c?await W(u,i.delayTime,x.delayTime):await O(u,i.delayTime,x.delayTime),await I(i,u,x),x};return{render(i,u){const x=y.get(u);return x!==void 0?Promise.resolve(x):P(i,u)}}},x$=W=>(m,T,O,I)=>W(m[I],B=>B[0]===T&&B[1]===O),b$=W=>(m,T)=>{W(m).delete(T)},w$=W=>"delayTime"in W,S$=(W,m,T)=>function O(I,B){const y=md(B)?B:T(W,B);if(w$(y))return[];if(I[0]===y)return[I];if(I.includes(y))return[];const{outputs:P}=m(y);return Array.from(P).map(i=>O([...I,y],i[0])).reduce((i,u)=>i.concat(u),[])},ld=(W,m,T)=>{const O=m[T];if(O===void 0)throw W();return O},T$=W=>(m,T=void 0,O=void 0,I=0)=>T===void 0?m.forEach(B=>B.disconnect()):typeof T=="number"?ld(W,m,T).disconnect():bd(T)?O===void 0?m.forEach(B=>B.disconnect(T)):I===void 0?ld(W,m,O).disconnect(T,0):ld(W,m,O).disconnect(T,0,I):O===void 0?m.forEach(B=>B.disconnect(T)):ld(W,m,O).disconnect(T,0),C$={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},P$=(W,m,T,O,I,B,y,P)=>class extends W{constructor(i,u){const x=B(i),c={...C$,...u},h=O(x,c),o=y(x),r=o?T():null;super(i,!1,h,r),this._attack=m(this,o,h.attack),this._knee=m(this,o,h.knee),this._nativeDynamicsCompressorNode=h,this._ratio=m(this,o,h.ratio),this._release=m(this,o,h.release),this._threshold=m(this,o,h.threshold),P(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(i){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=i,i>2)throw this._nativeDynamicsCompressorNode.channelCount=u,I()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(i){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=i,i==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,I()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},M$=(W,m,T,O,I)=>()=>{const B=new WeakMap,y=async(P,i)=>{let u=T(P);const x=Oi(u,i);if(!x){const c={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=m(i,c)}return B.set(i,u),x?(await W(i,P.attack,u.attack),await W(i,P.knee,u.knee),await W(i,P.ratio,u.ratio),await W(i,P.release,u.release),await W(i,P.threshold,u.threshold)):(await O(i,P.attack,u.attack),await O(i,P.knee,u.knee),await O(i,P.ratio,u.ratio),await O(i,P.release,u.release),await O(i,P.threshold,u.threshold)),await I(P,i,u),u};return{render(P,i){const u=B.get(i);return u!==void 0?Promise.resolve(u):y(P,i)}}},_$=()=>new DOMException("","EncodingError"),k$=W=>m=>new Promise((T,O)=>{if(W===null){O(new SyntaxError);return}const I=W.document.head;if(I===null)O(new SyntaxError);else{const B=W.document.createElement("script"),y=new Blob([m],{type:"application/javascript"}),P=URL.createObjectURL(y),i=W.onerror,u=()=>{W.onerror=i,URL.revokeObjectURL(P)};W.onerror=(x,c,h,o,r)=>{if(c===P||c===W.location.href&&h===1&&o===1)return u(),O(r),!1;if(i!==null)return i(x,c,h,o,r)},B.onerror=()=>{u(),O(new SyntaxError)},B.onload=()=>{u(),T()},B.src=P,B.type="module",I.appendChild(B)}}),O$=W=>class{constructor(m){this._nativeEventTarget=m,this._listeners=new WeakMap}addEventListener(m,T,O){if(T!==null){let I=this._listeners.get(T);I===void 0&&(I=W(this,T),typeof T=="function"&&this._listeners.set(T,I)),this._nativeEventTarget.addEventListener(m,I,O)}}dispatchEvent(m){return this._nativeEventTarget.dispatchEvent(m)}removeEventListener(m,T,O){const I=T===null?void 0:this._listeners.get(T);this._nativeEventTarget.removeEventListener(m,I===void 0?null:I,O)}},E$=W=>(m,T,O)=>{Object.defineProperties(W,{currentFrame:{configurable:!0,get(){return Math.round(m*T)}},currentTime:{configurable:!0,get(){return m}}});try{return O()}finally{W!==null&&(delete W.currentFrame,delete W.currentTime)}},A$=W=>async m=>{try{const T=await fetch(m);if(T.ok)return[await T.text(),T.url]}catch{}throw W()},R$={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},D$=(W,m,T,O,I,B)=>class extends W{constructor(y,P){const i=I(y),u={...R$,...P},x=O(i,u),c=B(i),h=c?T():null;super(y,!1,x,h),this._gain=m(this,c,x.gain,Fi,ji)}get gain(){return this._gain}},I$=(W,m,T,O,I)=>()=>{const B=new WeakMap,y=async(P,i)=>{let u=T(P);const x=Oi(u,i);if(!x){const c={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=m(i,c)}return B.set(i,u),x?await W(i,P.gain,u.gain):await O(i,P.gain,u.gain),await I(P,i,u),u};return{render(P,i){const u=B.get(i);return u!==void 0?Promise.resolve(u):y(P,i)}}},L$=(W,m)=>T=>m(W,T),F$=W=>m=>{const T=W(m);if(T.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return T.renderer},B$=W=>m=>{var T;return(T=W.get(m))!==null&&T!==void 0?T:0},N$=W=>m=>{const T=W(m);if(T.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return T.renderer},Y$=W=>m=>W.get(m),di=()=>new DOMException("","InvalidStateError"),V$=W=>m=>{const T=W.get(m);if(T===void 0)throw di();return T},z$=(W,m)=>T=>{let O=W.get(T);if(O!==void 0)return O;if(m===null)throw new Error("Missing the native OfflineAudioContext constructor.");return O=new m(1,1,44100),W.set(T,O),O},G$=W=>m=>{const T=W.get(m);if(T===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return T},kd=()=>new DOMException("","InvalidAccessError"),U$=W=>{W.getFrequencyResponse=(m=>(T,O,I)=>{if(T.length!==O.length||O.length!==I.length)throw kd();return m.call(W,T,O,I)})(W.getFrequencyResponse)},W$={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},X$=(W,m,T,O,I,B)=>class extends W{constructor(y,P){const i=O(y),u=I(i),x={...W$,...P},c=m(i,u?null:y.baseLatency,x),h=u?T(x.feedback,x.feedforward):null;super(y,!1,c,h),U$(c),this._nativeIIRFilterNode=c,B(this,1)}getFrequencyResponse(y,P,i){return this._nativeIIRFilterNode.getFrequencyResponse(y,P,i)}},qC=(W,m,T,O,I,B,y,P,i,u,x)=>{const c=u.length;let h=P;for(let o=0;o<c;o+=1){let r=T[0]*u[o];for(let a=1;a<I;a+=1){const d=h-a&i-1;r+=T[a]*B[d],r-=W[a]*y[d]}for(let a=I;a<O;a+=1)r+=T[a]*B[h-a&i-1];for(let a=I;a<m;a+=1)r-=W[a]*y[h-a&i-1];B[h]=u[o],y[h]=r,h=h+1&i-1,x[o]=r}return h},j$=(W,m,T,O)=>{const I=T instanceof Float64Array?T:new Float64Array(T),B=O instanceof Float64Array?O:new Float64Array(O),y=I.length,P=B.length,i=Math.min(y,P);if(I[0]!==1){for(let r=0;r<y;r+=1)B[r]/=I[0];for(let r=1;r<P;r+=1)I[r]/=I[0]}const u=32,x=new Float32Array(u),c=new Float32Array(u),h=m.createBuffer(W.numberOfChannels,W.length,W.sampleRate),o=W.numberOfChannels;for(let r=0;r<o;r+=1){const a=W.getChannelData(r),d=h.getChannelData(r);x.fill(0),c.fill(0),qC(I,y,B,P,i,x,c,0,u,a,d)}return h},H$=(W,m,T,O,I)=>(B,y)=>{const P=new WeakMap;let i=null;const u=async(x,c)=>{let h=null,o=m(x);const r=Oi(o,c);if(c.createIIRFilter===void 0?h=W(c,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):r||(o=c.createIIRFilter(y,B)),P.set(c,h===null?o:h),h!==null){if(i===null){if(T===null)throw new Error("Missing the native OfflineAudioContext constructor.");const d=new T(x.context.destination.channelCount,x.context.length,c.sampleRate);i=(async()=>{await O(x,d,d.destination);const n=await I(d);return j$(n,c,B,y)})()}const a=await i;return h.buffer=a,h.start(0),h}return await O(x,c,o),o};return{render(x,c){const h=P.get(c);return h!==void 0?Promise.resolve(h):u(x,c)}}},$$=(W,m,T,O,I,B)=>y=>(P,i)=>{const u=W.get(P);if(u===void 0){if(!y&&B(P)){const x=O(P),{outputs:c}=T(P);for(const h of c)if(bl(h)){const o=O(h[0]);m(x,o,h[1],h[2])}else{const o=I(h[0]);x.disconnect(o,h[1])}}W.set(P,i)}else W.set(P,u+i)},q$=(W,m)=>T=>{const O=W.get(T);return m(O)||m(T)},K$=(W,m)=>T=>W.has(T)||m(T),Q$=(W,m)=>T=>W.has(T)||m(T),J$=(W,m)=>T=>{const O=W.get(T);return m(O)||m(T)},Z$=W=>m=>W!==null&&m instanceof W,tq=W=>m=>W!==null&&typeof W.AudioNode=="function"&&m instanceof W.AudioNode,eq=W=>m=>W!==null&&typeof W.AudioParam=="function"&&m instanceof W.AudioParam,iq=(W,m)=>T=>W(T)||m(T),sq=W=>m=>W!==null&&m instanceof W,rq=W=>W!==null&&W.isSecureContext,nq=(W,m,T,O)=>class extends W{constructor(I,B){const y=T(I),P=m(y,B);if(O(y))throw TypeError();super(I,!0,P,null),this._nativeMediaElementAudioSourceNode=P}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},aq={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},oq=(W,m,T,O)=>class extends W{constructor(I,B){const y=T(I);if(O(y))throw new TypeError;const P={...aq,...B},i=m(y,P);super(I,!1,i,null),this._nativeMediaStreamAudioDestinationNode=i}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},hq=(W,m,T,O)=>class extends W{constructor(I,B){const y=T(I),P=m(y,B);if(O(y))throw new TypeError;super(I,!0,P,null),this._nativeMediaStreamAudioSourceNode=P}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},lq=(W,m,T)=>class extends W{constructor(O,I){const B=T(O),y=m(B,I);super(O,!0,y,null)}},uq=(W,m,T,O,I,B)=>class extends T{constructor(y,P){super(y),this._nativeContext=y,Md.set(this,y),O(y)&&I.set(y,new Set),this._destination=new W(this,P),this._listener=m(this,y),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(y){const P=typeof y=="function"?B(this,y):null;this._nativeContext.onstatechange=P;const i=this._nativeContext.onstatechange;this._onstatechange=i!==null&&i===P?y:i}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},fl=W=>{const m=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const T=W.decodeAudioData(m.buffer,()=>{});return T===void 0?!1:(T.catch(()=>{}),!0)}catch{}return!1},cq=(W,m)=>(T,O,I)=>{const B=new Set;return T.connect=(y=>(P,i=0,u=0)=>{const x=B.size===0;if(m(P))return y.call(T,P,i,u),W(B,[P,i,u],c=>c[0]===P&&c[1]===i&&c[2]===u,!0),x&&O(),P;y.call(T,P,i),W(B,[P,i],c=>c[0]===P&&c[1]===i,!0),x&&O()})(T.connect),T.disconnect=(y=>(P,i,u)=>{const x=B.size>0;if(P===void 0)y.apply(T),B.clear();else if(typeof P=="number"){y.call(T,P);for(const h of B)h[1]===P&&B.delete(h)}else{m(P)?y.call(T,P,i,u):y.call(T,P,i);for(const h of B)h[0]===P&&(i===void 0||h[1]===i)&&(u===void 0||h[2]===u)&&B.delete(h)}const c=B.size===0;x&&c&&I()})(T.disconnect),T},Ae=(W,m,T)=>{const O=m[T];O!==void 0&&O!==W[T]&&(W[T]=O)},ai=(W,m)=>{Ae(W,m,"channelCount"),Ae(W,m,"channelCountMode"),Ae(W,m,"channelInterpretation")},xC=W=>typeof W.getFloatTimeDomainData=="function",dq=W=>{W.getFloatTimeDomainData=m=>{const T=new Uint8Array(m.length);W.getByteTimeDomainData(T);const O=Math.max(T.length,W.fftSize);for(let I=0;I<O;I+=1)m[I]=(T[I]-128)*.0078125;return m}},pq=(W,m)=>(T,O)=>{const I=T.createAnalyser();if(ai(I,O),!(O.maxDecibels>O.minDecibels))throw m();return Ae(I,O,"fftSize"),Ae(I,O,"maxDecibels"),Ae(I,O,"minDecibels"),Ae(I,O,"smoothingTimeConstant"),W(xC,()=>xC(I))||dq(I),I},fq=W=>W===null?null:W.hasOwnProperty("AudioBuffer")?W.AudioBuffer:null,Ge=(W,m,T)=>{const O=m[T];O!==void 0&&O!==W[T].value&&(W[T].value=O)},gq=W=>{W.start=(m=>{let T=!1;return(O=0,I=0,B)=>{if(T)throw di();m.call(W,O,I,B),T=!0}})(W.start)},nm=W=>{W.start=(m=>(T=0,O=0,I)=>{if(typeof I=="number"&&I<0||O<0||T<0)throw new RangeError("The parameters can't be negative.");m.call(W,T,O,I)})(W.start)},am=W=>{W.stop=(m=>(T=0)=>{if(T<0)throw new RangeError("The parameter can't be negative.");m.call(W,T)})(W.stop)},vq=(W,m,T,O,I,B,y,P,i,u,x)=>(c,h)=>{const o=c.createBufferSource();return ai(o,h),Ge(o,h,"playbackRate"),Ae(o,h,"buffer"),Ae(o,h,"loop"),Ae(o,h,"loopEnd"),Ae(o,h,"loopStart"),m(T,()=>T(c))||gq(o),m(O,()=>O(c))||i(o),m(I,()=>I(c))||u(o,c),m(B,()=>B(c))||nm(o),m(y,()=>y(c))||x(o,c),m(P,()=>P(c))||am(o),W(c,o),o},mq=W=>W===null?null:W.hasOwnProperty("AudioContext")?W.AudioContext:W.hasOwnProperty("webkitAudioContext")?W.webkitAudioContext:null,yq=(W,m)=>(T,O,I)=>{const B=T.destination;if(B.channelCount!==O)try{B.channelCount=O}catch{}I&&B.channelCountMode!=="explicit"&&(B.channelCountMode="explicit"),B.maxChannelCount===0&&Object.defineProperty(B,"maxChannelCount",{value:O});const y=W(T,{channelCount:O,channelCountMode:B.channelCountMode,channelInterpretation:B.channelInterpretation,gain:1});return m(y,"channelCount",P=>()=>P.call(y),P=>i=>{P.call(y,i);try{B.channelCount=i}catch(u){if(i>B.maxChannelCount)throw u}}),m(y,"channelCountMode",P=>()=>P.call(y),P=>i=>{P.call(y,i),B.channelCountMode=i}),m(y,"channelInterpretation",P=>()=>P.call(y),P=>i=>{P.call(y,i),B.channelInterpretation=i}),Object.defineProperty(y,"maxChannelCount",{get:()=>B.maxChannelCount}),y.connect(B),y},xq=W=>W===null?null:W.hasOwnProperty("AudioWorkletNode")?W.AudioWorkletNode:null,bq=W=>{const{port1:m}=new MessageChannel;try{m.postMessage(W)}finally{m.close()}},wq=(W,m,T,O,I)=>(B,y,P,i,u,x)=>{if(P!==null)try{const c=new P(B,i,x),h=new Map;let o=null;if(Object.defineProperties(c,{channelCount:{get:()=>x.channelCount,set:()=>{throw W()}},channelCountMode:{get:()=>"explicit",set:()=>{throw W()}},onprocessorerror:{get:()=>o,set:r=>{typeof o=="function"&&c.removeEventListener("processorerror",o),o=typeof r=="function"?r:null,typeof o=="function"&&c.addEventListener("processorerror",o)}}}),c.addEventListener=(r=>(...a)=>{if(a[0]==="processorerror"){const d=typeof a[1]=="function"?a[1]:typeof a[1]=="object"&&a[1]!==null&&typeof a[1].handleEvent=="function"?a[1].handleEvent:null;if(d!==null){const n=h.get(a[1]);n!==void 0?a[1]=n:(a[1]=p=>{p.type==="error"?(Object.defineProperties(p,{type:{value:"processorerror"}}),d(p)):d(new ErrorEvent(a[0],{...p}))},h.set(d,a[1]))}}return r.call(c,"error",a[1],a[2]),r.call(c,...a)})(c.addEventListener),c.removeEventListener=(r=>(...a)=>{if(a[0]==="processorerror"){const d=h.get(a[1]);d!==void 0&&(h.delete(a[1]),a[1]=d)}return r.call(c,"error",a[1],a[2]),r.call(c,a[0],a[1],a[2])})(c.removeEventListener),x.numberOfOutputs!==0){const r=T(B,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return c.connect(r).connect(B.destination),I(c,()=>r.disconnect(),()=>r.connect(B.destination))}return c}catch(c){throw c.code===11?O():c}if(u===void 0)throw O();return bq(x),m(B,y,u,x)},KC=(W,m)=>W===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(W*m))))),Sq=W=>new Promise((m,T)=>{const{port1:O,port2:I}=new MessageChannel;O.onmessage=({data:B})=>{O.close(),I.close(),m(B)},O.onmessageerror=({data:B})=>{O.close(),I.close(),T(B)},I.postMessage(W)}),Tq=async(W,m)=>{const T=await Sq(m);return new W(T)},Cq=(W,m,T,O)=>{let I=Wv.get(W);I===void 0&&(I=new WeakMap,Wv.set(W,I));const B=Tq(T,O);return I.set(m,B),B},Pq=(W,m,T,O,I,B,y,P,i,u,x,c,h)=>(o,r,a,d)=>{if(d.numberOfInputs===0&&d.numberOfOutputs===0)throw i();const n=Array.isArray(d.outputChannelCount)?d.outputChannelCount:Array.from(d.outputChannelCount);if(n.some(ft=>ft<1))throw i();if(n.length!==d.numberOfOutputs)throw m();if(d.channelCountMode!=="explicit")throw i();const p=d.channelCount*d.numberOfInputs,g=n.reduce((ft,gt)=>ft+gt,0),v=a.parameterDescriptors===void 0?0:a.parameterDescriptors.length;if(p+v>6||g>6)throw i();const f=new MessageChannel,b=[],C=[];for(let ft=0;ft<d.numberOfInputs;ft+=1)b.push(y(o,{channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,gain:1})),C.push(I(o,{channelCount:d.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:d.channelCount}));const _=[];if(a.parameterDescriptors!==void 0)for(const{defaultValue:ft,maxValue:gt,minValue:wt,name:bt}of a.parameterDescriptors){const xt=B(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:d.parameterData[bt]!==void 0?d.parameterData[bt]:ft===void 0?0:ft});Object.defineProperties(xt.offset,{defaultValue:{get:()=>ft===void 0?0:ft},maxValue:{get:()=>gt===void 0?Fi:gt},minValue:{get:()=>wt===void 0?ji:wt}}),_.push(xt)}const M=O(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,p+v)}),E=KC(r,o.sampleRate),A=P(o,E,p+v,Math.max(1,g)),R=I(o,{channelCount:Math.max(1,g),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,g)}),L=[];for(let ft=0;ft<d.numberOfOutputs;ft+=1)L.push(O(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:n[ft]}));for(let ft=0;ft<d.numberOfInputs;ft+=1){b[ft].connect(C[ft]);for(let gt=0;gt<d.channelCount;gt+=1)C[ft].connect(M,gt,ft*d.channelCount+gt)}const Y=new HC(a.parameterDescriptors===void 0?[]:a.parameterDescriptors.map(({name:ft},gt)=>{const wt=_[gt];return wt.connect(M,0,p+gt),wt.start(0),[ft,wt.offset]}));M.connect(A);let F=d.channelInterpretation,N=null;const z=d.numberOfOutputs===0?[A]:L,U={get bufferSize(){return E},get channelCount(){return d.channelCount},set channelCount(ft){throw T()},get channelCountMode(){return d.channelCountMode},set channelCountMode(ft){throw T()},get channelInterpretation(){return F},set channelInterpretation(ft){for(const gt of b)gt.channelInterpretation=ft;F=ft},get context(){return A.context},get inputs(){return b},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get onprocessorerror(){return N},set onprocessorerror(ft){typeof N=="function"&&U.removeEventListener("processorerror",N),N=typeof ft=="function"?ft:null,typeof N=="function"&&U.addEventListener("processorerror",N)},get parameters(){return Y},get port(){return f.port2},addEventListener(...ft){return A.addEventListener(ft[0],ft[1],ft[2])},connect:W.bind(null,z),disconnect:u.bind(null,z),dispatchEvent(...ft){return A.dispatchEvent(ft[0])},removeEventListener(...ft){return A.removeEventListener(ft[0],ft[1],ft[2])}},q=new Map;f.port1.addEventListener=(ft=>(...gt)=>{if(gt[0]==="message"){const wt=typeof gt[1]=="function"?gt[1]:typeof gt[1]=="object"&&gt[1]!==null&&typeof gt[1].handleEvent=="function"?gt[1].handleEvent:null;if(wt!==null){const bt=q.get(gt[1]);bt!==void 0?gt[1]=bt:(gt[1]=xt=>{x(o.currentTime,o.sampleRate,()=>wt(xt))},q.set(wt,gt[1]))}}return ft.call(f.port1,gt[0],gt[1],gt[2])})(f.port1.addEventListener),f.port1.removeEventListener=(ft=>(...gt)=>{if(gt[0]==="message"){const wt=q.get(gt[1]);wt!==void 0&&(q.delete(gt[1]),gt[1]=wt)}return ft.call(f.port1,gt[0],gt[1],gt[2])})(f.port1.removeEventListener);let Q=null;Object.defineProperty(f.port1,"onmessage",{get:()=>Q,set:ft=>{typeof Q=="function"&&f.port1.removeEventListener("message",Q),Q=typeof ft=="function"?ft:null,typeof Q=="function"&&(f.port1.addEventListener("message",Q),f.port1.start())}}),a.prototype.port=f.port1;let K=null;Cq(o,U,a,d).then(ft=>K=ft);const et=Sd(d.numberOfInputs,d.channelCount),H=Sd(d.numberOfOutputs,n),J=a.parameterDescriptors===void 0?[]:a.parameterDescriptors.reduce((ft,{name:gt})=>({...ft,[gt]:new Float32Array(128)}),{});let X=!0;const Z=()=>{d.numberOfOutputs>0&&A.disconnect(R);for(let ft=0,gt=0;ft<d.numberOfOutputs;ft+=1){const wt=L[ft];for(let bt=0;bt<n[ft];bt+=1)R.disconnect(wt,gt+bt,bt);gt+=n[ft]}},$=new Map;A.onaudioprocess=({inputBuffer:ft,outputBuffer:gt})=>{if(K!==null){const wt=c(U);for(let bt=0;bt<E;bt+=128){for(let xt=0;xt<d.numberOfInputs;xt+=1)for(let Pt=0;Pt<d.channelCount;Pt+=1)wd(ft,et[xt],Pt,Pt,bt);a.parameterDescriptors!==void 0&&a.parameterDescriptors.forEach(({name:xt},Pt)=>{wd(ft,J,xt,p+Pt,bt)});for(let xt=0;xt<d.numberOfInputs;xt+=1)for(let Pt=0;Pt<n[xt];Pt+=1)H[xt][Pt].byteLength===0&&(H[xt][Pt]=new Float32Array(128));try{const xt=et.map((Pt,Ot)=>{if(wt[Ot].size>0)return $.set(Ot,E/128),Pt;const Et=$.get(Ot);return Et===void 0?[]:(Pt.every(Tt=>Tt.every(Mt=>Mt===0))&&(Et===1?$.delete(Ot):$.set(Ot,Et-1)),Pt)});X=x(o.currentTime+bt/o.sampleRate,o.sampleRate,()=>K.process(xt,H,J));for(let Pt=0,Ot=0;Pt<d.numberOfOutputs;Pt+=1){for(let Et=0;Et<n[Pt];Et+=1)$C(gt,H[Pt],Et,Ot+Et,bt);Ot+=n[Pt]}}catch(xt){X=!1,U.dispatchEvent(new ErrorEvent("processorerror",{colno:xt.colno,filename:xt.filename,lineno:xt.lineno,message:xt.message}))}if(!X){for(let xt=0;xt<d.numberOfInputs;xt+=1){b[xt].disconnect(C[xt]);for(let Pt=0;Pt<d.channelCount;Pt+=1)C[bt].disconnect(M,Pt,xt*d.channelCount+Pt)}if(a.parameterDescriptors!==void 0){const xt=a.parameterDescriptors.length;for(let Pt=0;Pt<xt;Pt+=1){const Ot=_[Pt];Ot.disconnect(M,0,p+Pt),Ot.stop()}}M.disconnect(A),A.onaudioprocess=null,it?Z():ht();break}}}};let it=!1;const nt=y(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),at=()=>A.connect(nt).connect(o.destination),ht=()=>{A.disconnect(nt),nt.disconnect()},dt=()=>{if(X){ht(),d.numberOfOutputs>0&&A.connect(R);for(let ft=0,gt=0;ft<d.numberOfOutputs;ft+=1){const wt=L[ft];for(let bt=0;bt<n[ft];bt+=1)R.connect(wt,gt+bt,bt);gt+=n[ft]}}it=!0},vt=()=>{X&&(at(),Z()),it=!1};return at(),h(U,dt,vt)},QC=(W,m)=>{const T=W.createBiquadFilter();return ai(T,m),Ge(T,m,"Q"),Ge(T,m,"detune"),Ge(T,m,"frequency"),Ge(T,m,"gain"),Ae(T,m,"type"),T},Mq=(W,m)=>(T,O)=>{const I=T.createChannelMerger(O.numberOfInputs);return W!==null&&W.name==="webkitAudioContext"&&m(T,I),ai(I,O),I},_q=W=>{const m=W.numberOfOutputs;Object.defineProperty(W,"channelCount",{get:()=>m,set:T=>{if(T!==m)throw di()}}),Object.defineProperty(W,"channelCountMode",{get:()=>"explicit",set:T=>{if(T!=="explicit")throw di()}}),Object.defineProperty(W,"channelInterpretation",{get:()=>"discrete",set:T=>{if(T!=="discrete")throw di()}})},wl=(W,m)=>{const T=W.createChannelSplitter(m.numberOfOutputs);return ai(T,m),_q(T),T},kq=(W,m,T,O,I)=>(B,y)=>{if(B.createConstantSource===void 0)return T(B,y);const P=B.createConstantSource();return ai(P,y),Ge(P,y,"offset"),m(O,()=>O(B))||nm(P),m(I,()=>I(B))||am(P),W(B,P),P},Do=(W,m)=>(W.connect=m.connect.bind(m),W.disconnect=m.disconnect.bind(m),W),Oq=(W,m,T,O)=>(I,{offset:B,...y})=>{const P=I.createBuffer(1,2,44100),i=m(I,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=T(I,{...y,gain:B}),x=P.getChannelData(0);x[0]=1,x[1]=1,i.buffer=P,i.loop=!0;const c={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(r){u.channelCount=r},get channelCountMode(){return u.channelCountMode},set channelCountMode(r){u.channelCountMode=r},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(r){u.channelInterpretation=r},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return i.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return i.onended},set onended(r){i.onended=r},addEventListener(...r){return i.addEventListener(r[0],r[1],r[2])},dispatchEvent(...r){return i.dispatchEvent(r[0])},removeEventListener(...r){return i.removeEventListener(r[0],r[1],r[2])},start(r=0){i.start.call(i,r)},stop(r=0){i.stop.call(i,r)}},h=()=>i.connect(u),o=()=>i.disconnect(u);return W(I,i),O(Do(c,u),h,o)},Eq=(W,m)=>(T,O)=>{const I=T.createConvolver();if(ai(I,O),O.disableNormalization===I.normalize&&(I.normalize=!O.disableNormalization),Ae(I,O,"buffer"),O.channelCount>2||(m(I,"channelCount",B=>()=>B.call(I),B=>y=>{if(y>2)throw W();return B.call(I,y)}),O.channelCountMode==="max"))throw W();return m(I,"channelCountMode",B=>()=>B.call(I),B=>y=>{if(y==="max")throw W();return B.call(I,y)}),I},JC=(W,m)=>{const T=W.createDelay(m.maxDelayTime);return ai(T,m),Ge(T,m,"delayTime"),T},Aq=W=>(m,T)=>{const O=m.createDynamicsCompressor();if(ai(O,T),T.channelCount>2||T.channelCountMode==="max")throw W();return Ge(O,T,"attack"),Ge(O,T,"knee"),Ge(O,T,"ratio"),Ge(O,T,"release"),Ge(O,T,"threshold"),O},$i=(W,m)=>{const T=W.createGain();return ai(T,m),Ge(T,m,"gain"),T},Rq=W=>(m,T,O)=>{if(m.createIIRFilter===void 0)return W(m,T,O);const I=m.createIIRFilter(O.feedforward,O.feedback);return ai(I,O),I};function Dq(W,m){const T=m[0]*m[0]+m[1]*m[1];return[(W[0]*m[0]+W[1]*m[1])/T,(W[1]*m[0]-W[0]*m[1])/T]}function Iq(W,m){return[W[0]*m[0]-W[1]*m[1],W[0]*m[1]+W[1]*m[0]]}function bC(W,m){let T=[0,0];for(let O=W.length-1;O>=0;O-=1)T=Iq(T,m),T[0]+=W[O];return T}const Lq=(W,m,T,O)=>(I,B,{channelCount:y,channelCountMode:P,channelInterpretation:i,feedback:u,feedforward:x})=>{const c=KC(B,I.sampleRate),h=u instanceof Float64Array?u:new Float64Array(u),o=x instanceof Float64Array?x:new Float64Array(x),r=h.length,a=o.length,d=Math.min(r,a);if(r===0||r>20)throw O();if(h[0]===0)throw m();if(a===0||a>20)throw O();if(o[0]===0)throw m();if(h[0]!==1){for(let C=0;C<a;C+=1)o[C]/=h[0];for(let C=1;C<r;C+=1)h[C]/=h[0]}const n=T(I,c,y,y);n.channelCount=y,n.channelCountMode=P,n.channelInterpretation=i;const p=32,g=[],v=[],f=[];for(let C=0;C<y;C+=1){g.push(0);const _=new Float32Array(p),M=new Float32Array(p);_.fill(0),M.fill(0),v.push(_),f.push(M)}n.onaudioprocess=C=>{const _=C.inputBuffer,M=C.outputBuffer,E=_.numberOfChannels;for(let A=0;A<E;A+=1){const R=_.getChannelData(A),L=M.getChannelData(A);g[A]=qC(h,r,o,a,d,v[A],f[A],g[A],p,R,L)}};const b=I.sampleRate/2;return Do({get bufferSize(){return c},get channelCount(){return n.channelCount},set channelCount(C){n.channelCount=C},get channelCountMode(){return n.channelCountMode},set channelCountMode(C){n.channelCountMode=C},get channelInterpretation(){return n.channelInterpretation},set channelInterpretation(C){n.channelInterpretation=C},get context(){return n.context},get inputs(){return[n]},get numberOfInputs(){return n.numberOfInputs},get numberOfOutputs(){return n.numberOfOutputs},addEventListener(...C){return n.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return n.dispatchEvent(C[0])},getFrequencyResponse(C,_,M){if(C.length!==_.length||_.length!==M.length)throw W();const E=C.length;for(let A=0;A<E;A+=1){const R=-Math.PI*(C[A]/b),L=[Math.cos(R),Math.sin(R)],Y=bC(o,L),F=bC(h,L),N=Dq(Y,F);_[A]=Math.sqrt(N[0]*N[0]+N[1]*N[1]),M[A]=Math.atan2(N[1],N[0])}},removeEventListener(...C){return n.removeEventListener(C[0],C[1],C[2])}},n)},Fq=(W,m)=>W.createMediaElementSource(m.mediaElement),Bq=(W,m)=>{const T=W.createMediaStreamDestination();return ai(T,m),T.numberOfOutputs===1&&Object.defineProperty(T,"numberOfOutputs",{get:()=>0}),T},Nq=(W,{mediaStream:m})=>{const T=m.getAudioTracks();T.sort((B,y)=>B.id<y.id?-1:B.id>y.id?1:0);const O=T.slice(0,1),I=W.createMediaStreamSource(new MediaStream(O));return Object.defineProperty(I,"mediaStream",{value:m}),I},Yq=(W,m)=>(T,{mediaStreamTrack:O})=>{if(typeof T.createMediaStreamTrackSource=="function")return T.createMediaStreamTrackSource(O);const I=new MediaStream([O]),B=T.createMediaStreamSource(I);if(O.kind!=="audio")throw W();if(m(T))throw new TypeError;return B},Vq=W=>W===null?null:W.hasOwnProperty("OfflineAudioContext")?W.OfflineAudioContext:W.hasOwnProperty("webkitOfflineAudioContext")?W.webkitOfflineAudioContext:null,zq=(W,m,T,O,I,B)=>(y,P)=>{const i=y.createOscillator();return ai(i,P),Ge(i,P,"detune"),Ge(i,P,"frequency"),P.periodicWave!==void 0?i.setPeriodicWave(P.periodicWave):Ae(i,P,"type"),m(T,()=>T(y))||nm(i),m(O,()=>O(y))||B(i,y),m(I,()=>I(y))||am(i),W(y,i),i},Gq=W=>(m,T)=>{const O=m.createPanner();return O.orientationX===void 0?W(m,T):(ai(O,T),Ge(O,T,"orientationX"),Ge(O,T,"orientationY"),Ge(O,T,"orientationZ"),Ge(O,T,"positionX"),Ge(O,T,"positionY"),Ge(O,T,"positionZ"),Ae(O,T,"coneInnerAngle"),Ae(O,T,"coneOuterAngle"),Ae(O,T,"coneOuterGain"),Ae(O,T,"distanceModel"),Ae(O,T,"maxDistance"),Ae(O,T,"panningModel"),Ae(O,T,"refDistance"),Ae(O,T,"rolloffFactor"),O)},Uq=(W,m,T,O,I,B,y,P,i,u)=>(x,{coneInnerAngle:c,coneOuterAngle:h,coneOuterGain:o,distanceModel:r,maxDistance:a,orientationX:d,orientationY:n,orientationZ:p,panningModel:g,positionX:v,positionY:f,positionZ:b,refDistance:C,rolloffFactor:_,...M})=>{const E=x.createPanner();if(M.channelCount>2||M.channelCountMode==="max")throw y();ai(E,M);const A={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},R=T(x,{...A,channelInterpretation:"speakers",numberOfInputs:6}),L=O(x,{...M,gain:1}),Y=O(x,{...A,gain:1}),F=O(x,{...A,gain:0}),N=O(x,{...A,gain:0}),z=O(x,{...A,gain:0}),U=O(x,{...A,gain:0}),q=O(x,{...A,gain:0}),Q=I(x,256,6,1),K=B(x,{...A,curve:new Float32Array([1,1]),oversample:"none"});let et=[d,n,p],H=[v,f,b];const J=new Float32Array(1);Q.onaudioprocess=({inputBuffer:it})=>{const nt=[i(it,J,0),i(it,J,1),i(it,J,2)];nt.some((ht,dt)=>ht!==et[dt])&&(E.setOrientation(...nt),et=nt);const at=[i(it,J,3),i(it,J,4),i(it,J,5)];at.some((ht,dt)=>ht!==H[dt])&&(E.setPosition(...at),H=at)},Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0});const X={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(it){if(it>2)throw y();L.channelCount=it,E.channelCount=it},get channelCountMode(){return E.channelCountMode},set channelCountMode(it){if(it==="max")throw y();L.channelCountMode=it,E.channelCountMode=it},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(it){L.channelInterpretation=it,E.channelInterpretation=it},get coneInnerAngle(){return E.coneInnerAngle},set coneInnerAngle(it){E.coneInnerAngle=it},get coneOuterAngle(){return E.coneOuterAngle},set coneOuterAngle(it){E.coneOuterAngle=it},get coneOuterGain(){return E.coneOuterGain},set coneOuterGain(it){if(it<0||it>1)throw m();E.coneOuterGain=it},get context(){return E.context},get distanceModel(){return E.distanceModel},set distanceModel(it){E.distanceModel=it},get inputs(){return[L]},get maxDistance(){return E.maxDistance},set maxDistance(it){if(it<0)throw new RangeError;E.maxDistance=it},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get orientationX(){return Y.gain},get orientationY(){return F.gain},get orientationZ(){return N.gain},get panningModel(){return E.panningModel},set panningModel(it){E.panningModel=it},get positionX(){return z.gain},get positionY(){return U.gain},get positionZ(){return q.gain},get refDistance(){return E.refDistance},set refDistance(it){if(it<0)throw new RangeError;E.refDistance=it},get rolloffFactor(){return E.rolloffFactor},set rolloffFactor(it){if(it<0)throw new RangeError;E.rolloffFactor=it},addEventListener(...it){return L.addEventListener(it[0],it[1],it[2])},dispatchEvent(...it){return L.dispatchEvent(it[0])},removeEventListener(...it){return L.removeEventListener(it[0],it[1],it[2])}};c!==X.coneInnerAngle&&(X.coneInnerAngle=c),h!==X.coneOuterAngle&&(X.coneOuterAngle=h),o!==X.coneOuterGain&&(X.coneOuterGain=o),r!==X.distanceModel&&(X.distanceModel=r),a!==X.maxDistance&&(X.maxDistance=a),d!==X.orientationX.value&&(X.orientationX.value=d),n!==X.orientationY.value&&(X.orientationY.value=n),p!==X.orientationZ.value&&(X.orientationZ.value=p),g!==X.panningModel&&(X.panningModel=g),v!==X.positionX.value&&(X.positionX.value=v),f!==X.positionY.value&&(X.positionY.value=f),b!==X.positionZ.value&&(X.positionZ.value=b),C!==X.refDistance&&(X.refDistance=C),_!==X.rolloffFactor&&(X.rolloffFactor=_),(et[0]!==1||et[1]!==0||et[2]!==0)&&E.setOrientation(...et),(H[0]!==0||H[1]!==0||H[2]!==0)&&E.setPosition(...H);const Z=()=>{L.connect(E),W(L,K,0,0),K.connect(Y).connect(R,0,0),K.connect(F).connect(R,0,1),K.connect(N).connect(R,0,2),K.connect(z).connect(R,0,3),K.connect(U).connect(R,0,4),K.connect(q).connect(R,0,5),R.connect(Q).connect(x.destination)},$=()=>{L.disconnect(E),P(L,K,0,0),K.disconnect(Y),Y.disconnect(R),K.disconnect(F),F.disconnect(R),K.disconnect(N),N.disconnect(R),K.disconnect(z),z.disconnect(R),K.disconnect(U),U.disconnect(R),K.disconnect(q),q.disconnect(R),R.disconnect(Q),Q.disconnect(x.destination)};return u(Do(X,E),Z,$)},Wq=W=>(m,{disableNormalization:T,imag:O,real:I})=>{const B=O instanceof Float32Array?O:new Float32Array(O),y=I instanceof Float32Array?I:new Float32Array(I),P=m.createPeriodicWave(y,B,{disableNormalization:T});if(Array.from(O).length<2)throw W();return P},Sl=(W,m,T,O)=>W.createScriptProcessor(m,T,O),Xq=(W,m)=>(T,O)=>{const I=O.channelCountMode;if(I==="clamped-max")throw m();if(T.createStereoPanner===void 0)return W(T,O);const B=T.createStereoPanner();return ai(B,O),Ge(B,O,"pan"),Object.defineProperty(B,"channelCountMode",{get:()=>I,set:y=>{if(y!==I)throw m()}}),B},jq=(W,m,T,O,I,B)=>{const y=new Float32Array([1,1]),P=Math.PI/2,i={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...i,oversample:"none"},x=(o,r,a,d)=>{const n=new Float32Array(16385),p=new Float32Array(16385);for(let _=0;_<16385;_+=1){const M=_/16384*P;n[_]=Math.cos(M),p[_]=Math.sin(M)}const g=T(o,{...i,gain:0}),v=O(o,{...u,curve:n}),f=O(o,{...u,curve:y}),b=T(o,{...i,gain:0}),C=O(o,{...u,curve:p});return{connectGraph(){r.connect(g),r.connect(f.inputs===void 0?f:f.inputs[0]),r.connect(b),f.connect(a),a.connect(v.inputs===void 0?v:v.inputs[0]),a.connect(C.inputs===void 0?C:C.inputs[0]),v.connect(g.gain),C.connect(b.gain),g.connect(d,0,0),b.connect(d,0,1)},disconnectGraph(){r.disconnect(g),r.disconnect(f.inputs===void 0?f:f.inputs[0]),r.disconnect(b),f.disconnect(a),a.disconnect(v.inputs===void 0?v:v.inputs[0]),a.disconnect(C.inputs===void 0?C:C.inputs[0]),v.disconnect(g.gain),C.disconnect(b.gain),g.disconnect(d,0,0),b.disconnect(d,0,1)}}},c=(o,r,a,d)=>{const n=new Float32Array(16385),p=new Float32Array(16385),g=new Float32Array(16385),v=new Float32Array(16385),f=Math.floor(16385/2);for(let N=0;N<16385;N+=1)if(N>f){const z=(N-f)/(16384-f)*P;n[N]=Math.cos(z),p[N]=Math.sin(z),g[N]=0,v[N]=1}else{const z=N/(16384-f)*P;n[N]=1,p[N]=0,g[N]=Math.cos(z),v[N]=Math.sin(z)}const b=m(o,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=T(o,{...i,gain:0}),_=O(o,{...u,curve:n}),M=T(o,{...i,gain:0}),E=O(o,{...u,curve:p}),A=O(o,{...u,curve:y}),R=T(o,{...i,gain:0}),L=O(o,{...u,curve:g}),Y=T(o,{...i,gain:0}),F=O(o,{...u,curve:v});return{connectGraph(){r.connect(b),r.connect(A.inputs===void 0?A:A.inputs[0]),b.connect(C,0),b.connect(M,0),b.connect(R,1),b.connect(Y,1),A.connect(a),a.connect(_.inputs===void 0?_:_.inputs[0]),a.connect(E.inputs===void 0?E:E.inputs[0]),a.connect(L.inputs===void 0?L:L.inputs[0]),a.connect(F.inputs===void 0?F:F.inputs[0]),_.connect(C.gain),E.connect(M.gain),L.connect(R.gain),F.connect(Y.gain),C.connect(d,0,0),R.connect(d,0,0),M.connect(d,0,1),Y.connect(d,0,1)},disconnectGraph(){r.disconnect(b),r.disconnect(A.inputs===void 0?A:A.inputs[0]),b.disconnect(C,0),b.disconnect(M,0),b.disconnect(R,1),b.disconnect(Y,1),A.disconnect(a),a.disconnect(_.inputs===void 0?_:_.inputs[0]),a.disconnect(E.inputs===void 0?E:E.inputs[0]),a.disconnect(L.inputs===void 0?L:L.inputs[0]),a.disconnect(F.inputs===void 0?F:F.inputs[0]),_.disconnect(C.gain),E.disconnect(M.gain),L.disconnect(R.gain),F.disconnect(Y.gain),C.disconnect(d,0,0),R.disconnect(d,0,0),M.disconnect(d,0,1),Y.disconnect(d,0,1)}}},h=(o,r,a,d,n)=>{if(r===1)return x(o,a,d,n);if(r===2)return c(o,a,d,n);throw I()};return(o,{channelCount:r,channelCountMode:a,pan:d,...n})=>{if(a==="max")throw I();const p=W(o,{...n,channelCount:1,channelCountMode:a,numberOfInputs:2}),g=T(o,{...n,channelCount:r,channelCountMode:a,gain:1}),v=T(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:d});let{connectGraph:f,disconnectGraph:b}=h(o,r,g,v,p);Object.defineProperty(v.gain,"defaultValue",{get:()=>0}),Object.defineProperty(v.gain,"maxValue",{get:()=>1}),Object.defineProperty(v.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return g.channelCount},set channelCount(A){g.channelCount!==A&&(_&&b(),{connectGraph:f,disconnectGraph:b}=h(o,A,g,v,p),_&&f()),g.channelCount=A},get channelCountMode(){return g.channelCountMode},set channelCountMode(A){if(A==="clamped-max"||A==="max")throw I();g.channelCountMode=A},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(A){g.channelInterpretation=A},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get pan(){return v.gain},addEventListener(...A){return g.addEventListener(A[0],A[1],A[2])},dispatchEvent(...A){return g.dispatchEvent(A[0])},removeEventListener(...A){return g.removeEventListener(A[0],A[1],A[2])}};let _=!1;const M=()=>{f(),_=!0},E=()=>{b(),_=!1};return B(Do(C,p),M,E)}},Hq=(W,m,T,O,I,B,y)=>(P,i)=>{const u=P.createWaveShaper();if(B!==null&&B.name==="webkitAudioContext"&&P.createGain().gain.automationRate===void 0)return T(P,i);ai(u,i);const x=i.curve===null||i.curve instanceof Float32Array?i.curve:new Float32Array(i.curve);if(x!==null&&x.length<2)throw m();Ae(u,{curve:x},"curve"),Ae(u,i,"oversample");let c=null,h=!1;return y(u,"curve",o=>()=>o.call(u),o=>r=>(o.call(u,r),h&&(O(r)&&c===null?c=W(P,u):!O(r)&&c!==null&&(c(),c=null)),r)),I(u,()=>{h=!0,O(u.curve)&&(c=W(P,u))},()=>{h=!1,c!==null&&(c(),c=null)})},$q=(W,m,T,O,I)=>(B,{curve:y,oversample:P,...i})=>{const u=B.createWaveShaper(),x=B.createWaveShaper();ai(u,i),ai(x,i);const c=T(B,{...i,gain:1}),h=T(B,{...i,gain:-1}),o=T(B,{...i,gain:1}),r=T(B,{...i,gain:-1});let a=null,d=!1,n=null;const p={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(f){c.channelCount=f,h.channelCount=f,u.channelCount=f,o.channelCount=f,x.channelCount=f,r.channelCount=f},get channelCountMode(){return u.channelCountMode},set channelCountMode(f){c.channelCountMode=f,h.channelCountMode=f,u.channelCountMode=f,o.channelCountMode=f,x.channelCountMode=f,r.channelCountMode=f},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(f){c.channelInterpretation=f,h.channelInterpretation=f,u.channelInterpretation=f,o.channelInterpretation=f,x.channelInterpretation=f,r.channelInterpretation=f},get context(){return u.context},get curve(){return n},set curve(f){if(f!==null&&f.length<2)throw m();if(f===null)u.curve=f,x.curve=f;else{const b=f.length,C=new Float32Array(b+2-b%2),_=new Float32Array(b+2-b%2);C[0]=f[0],_[0]=-f[b-1];const M=Math.ceil((b+1)/2),E=(b+1)/2-1;for(let A=1;A<M;A+=1){const R=A/M*E,L=Math.floor(R),Y=Math.ceil(R);C[A]=L===Y?f[L]:(1-(R-L))*f[L]+(1-(Y-R))*f[Y],_[A]=L===Y?-f[b-1-L]:-((1-(R-L))*f[b-1-L])-(1-(Y-R))*f[b-1-Y]}C[M]=b%2===1?f[M-1]:(f[M-2]+f[M-1])/2,u.curve=C,x.curve=_}n=f,d&&(O(n)&&a===null?a=W(B,c):a!==null&&(a(),a=null))},get inputs(){return[c]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(f){u.oversample=f,x.oversample=f},addEventListener(...f){return c.addEventListener(f[0],f[1],f[2])},dispatchEvent(...f){return c.dispatchEvent(f[0])},removeEventListener(...f){return c.removeEventListener(f[0],f[1],f[2])}};y!==null&&(p.curve=y instanceof Float32Array?y:new Float32Array(y)),P!==p.oversample&&(p.oversample=P);const g=()=>{c.connect(u).connect(o),c.connect(h).connect(x).connect(r).connect(o),d=!0,O(n)&&(a=W(B,c))},v=()=>{c.disconnect(u),u.disconnect(o),c.disconnect(h),h.disconnect(x),x.disconnect(r),r.disconnect(o),d=!1,a!==null&&(a(),a=null)};return I(Do(p,o),g,v)},Ni=()=>new DOMException("","NotSupportedError"),qq={numberOfChannels:1},Kq=(W,m,T,O,I)=>class extends W{constructor(B,y,P){let i;if(typeof B=="number"&&y!==void 0&&P!==void 0)i={length:y,numberOfChannels:B,sampleRate:P};else if(typeof B=="object")i=B;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:x,sampleRate:c}={...qq,...i},h=O(x,u,c);m(fl,()=>fl(h))||h.addEventListener("statechange",(()=>{let o=0;const r=a=>{this._state==="running"&&(o>0?(h.removeEventListener("statechange",r),a.stopImmediatePropagation(),this._waitForThePromiseToSettle(a)):o+=1)};return r})()),super(h,x),this._length=u,this._nativeOfflineAudioContext=h,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(T()):(this._state="running",I(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,UC(this)}))}_waitForThePromiseToSettle(B){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(B):setTimeout(()=>this._waitForThePromiseToSettle(B))}},Qq={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Jq=(W,m,T,O,I,B,y)=>class extends W{constructor(P,i){const u=I(P),x={...Qq,...i},c=T(u,x),h=B(u),o=h?O():null,r=P.sampleRate/2;super(P,!1,c,o),this._detune=m(this,h,c.detune,153600,-153600),this._frequency=m(this,h,c.frequency,r,-r),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=o,this._oscillatorNodeRenderer!==null&&x.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=x.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(P){const i=typeof P=="function"?y(this,P):null;this._nativeOscillatorNode.onended=i;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===i?P:u}get type(){return this._nativeOscillatorNode.type}set type(P){this._nativeOscillatorNode.type=P,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(P){this._nativeOscillatorNode.setPeriodicWave(P),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=P)}start(P=0){if(this._nativeOscillatorNode.start(P),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=P),this.context.state!=="closed"){Co(this);const i=()=>{this._nativeOscillatorNode.removeEventListener("ended",i),zr(this)&&yl(this)};this._nativeOscillatorNode.addEventListener("ended",i)}}stop(P=0){this._nativeOscillatorNode.stop(P),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=P)}},Zq=(W,m,T,O,I)=>()=>{const B=new WeakMap;let y=null,P=null,i=null;const u=async(x,c)=>{let h=T(x);const o=Oi(h,c);if(!o){const r={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:y===null?void 0:y,type:h.type};h=m(c,r),P!==null&&h.start(P),i!==null&&h.stop(i)}return B.set(c,h),o?(await W(c,x.detune,h.detune),await W(c,x.frequency,h.frequency)):(await O(c,x.detune,h.detune),await O(c,x.frequency,h.frequency)),await I(x,c,h),h};return{set periodicWave(x){y=x},set start(x){P=x},set stop(x){i=x},render(x,c){const h=B.get(c);return h!==void 0?Promise.resolve(h):u(x,c)}}},tK={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},eK=(W,m,T,O,I,B,y)=>class extends W{constructor(P,i){const u=I(P),x={...tK,...i},c=T(u,x),h=B(u),o=h?O():null;super(P,!1,c,o),this._nativePannerNode=c,this._orientationX=m(this,h,c.orientationX,Fi,ji),this._orientationY=m(this,h,c.orientationY,Fi,ji),this._orientationZ=m(this,h,c.orientationZ,Fi,ji),this._positionX=m(this,h,c.positionX,Fi,ji),this._positionY=m(this,h,c.positionY,Fi,ji),this._positionZ=m(this,h,c.positionZ,Fi,ji),y(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(P){this._nativePannerNode.coneInnerAngle=P}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(P){this._nativePannerNode.coneOuterAngle=P}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(P){this._nativePannerNode.coneOuterGain=P}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(P){this._nativePannerNode.distanceModel=P}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(P){this._nativePannerNode.maxDistance=P}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(P){this._nativePannerNode.panningModel=P}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(P){this._nativePannerNode.refDistance=P}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(P){this._nativePannerNode.rolloffFactor=P}},iK=(W,m,T,O,I,B,y,P,i,u)=>()=>{const x=new WeakMap;let c=null;const h=async(o,r)=>{let a=null,d=B(o);const n={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation},p={...n,coneInnerAngle:d.coneInnerAngle,coneOuterAngle:d.coneOuterAngle,coneOuterGain:d.coneOuterGain,distanceModel:d.distanceModel,maxDistance:d.maxDistance,panningModel:d.panningModel,refDistance:d.refDistance,rolloffFactor:d.rolloffFactor},g=Oi(d,r);if("bufferSize"in d)a=O(r,{...n,gain:1});else if(!g){const v={...p,orientationX:d.orientationX.value,orientationY:d.orientationY.value,orientationZ:d.orientationZ.value,positionX:d.positionX.value,positionY:d.positionY.value,positionZ:d.positionZ.value};d=I(r,v)}if(x.set(r,a===null?d:a),a!==null){if(c===null){if(y===null)throw new Error("Missing the native OfflineAudioContext constructor.");const A=new y(6,o.context.length,r.sampleRate),R=m(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});R.connect(A.destination),c=(async()=>{const L=await Promise.all([o.orientationX,o.orientationY,o.orientationZ,o.positionX,o.positionY,o.positionZ].map(async(Y,F)=>{const N=T(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:F===0?1:0});return await P(A,Y,N.offset),N}));for(let Y=0;Y<6;Y+=1)L[Y].connect(R,0,Y),L[Y].start(0);return u(A)})()}const v=await c,f=O(r,{...n,gain:1});await i(o,r,f);const b=[];for(let A=0;A<v.numberOfChannels;A+=1)b.push(v.getChannelData(A));let C=[b[0][0],b[1][0],b[2][0]],_=[b[3][0],b[4][0],b[5][0]],M=O(r,{...n,gain:1}),E=I(r,{...p,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:_[0],positionY:_[1],positionZ:_[2]});f.connect(M).connect(E.inputs[0]),E.connect(a);for(let A=128;A<v.length;A+=128){const R=[b[0][A],b[1][A],b[2][A]],L=[b[3][A],b[4][A],b[5][A]];if(R.some((Y,F)=>Y!==C[F])||L.some((Y,F)=>Y!==_[F])){C=R,_=L;const Y=A/r.sampleRate;M.gain.setValueAtTime(0,Y),M=O(r,{...n,gain:0}),E=I(r,{...p,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:_[0],positionY:_[1],positionZ:_[2]}),M.gain.setValueAtTime(1,Y),f.connect(M).connect(E.inputs[0]),E.connect(a)}}return a}return g?(await W(r,o.orientationX,d.orientationX),await W(r,o.orientationY,d.orientationY),await W(r,o.orientationZ,d.orientationZ),await W(r,o.positionX,d.positionX),await W(r,o.positionY,d.positionY),await W(r,o.positionZ,d.positionZ)):(await P(r,o.orientationX,d.orientationX),await P(r,o.orientationY,d.orientationY),await P(r,o.orientationZ,d.orientationZ),await P(r,o.positionX,d.positionX),await P(r,o.positionY,d.positionY),await P(r,o.positionZ,d.positionZ)),Ro(d)?await i(o,r,d.inputs[0]):await i(o,r,d),d};return{render(o,r){const a=x.get(r);return a!==void 0?Promise.resolve(a):h(o,r)}}},sK={disableNormalization:!1},rK=(W,m,T,O)=>class ZC{constructor(B,y){const P=m(B),i=O({...sK,...y}),u=W(P,i);return T.add(u),u}static[Symbol.hasInstance](B){return B!==null&&typeof B=="object"&&Object.getPrototypeOf(B)===ZC.prototype||T.has(B)}},nK=(W,m)=>(T,O,I)=>(W(O).replay(I),m(O,T,I)),aK=(W,m,T)=>async(O,I,B)=>{const y=W(O);await Promise.all(y.activeInputs.map((P,i)=>Array.from(P).map(async([u,x])=>{const c=await m(u).render(u,I),h=O.context.destination;!T(u)&&(O!==h||!T(O))&&c.connect(B,x,i)})).reduce((P,i)=>[...P,...i],[]))},oK=(W,m,T)=>async(O,I,B)=>{const y=m(O);await Promise.all(Array.from(y.activeInputs).map(async([P,i])=>{const u=await W(P).render(P,I);T(P)||u.connect(B,i)}))},hK=(W,m,T,O)=>I=>W(fl,()=>fl(I))?Promise.resolve(W(O,O)).then(B=>{if(!B){const y=T(I,512,0,1);I.oncomplete=()=>{y.onaudioprocess=null,y.disconnect()},y.onaudioprocess=()=>I.currentTime,y.connect(I.destination)}return I.startRendering()}):new Promise(B=>{const y=m(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});I.oncomplete=P=>{y.disconnect(),B(P.renderedBuffer)},y.connect(I.destination),I.startRendering()}),lK=W=>(m,T)=>{W.set(m,T)},uK=W=>(m,T)=>W.set(m,T),cK=(W,m,T,O,I,B,y,P)=>(i,u)=>T(i).render(i,u).then(()=>Promise.all(Array.from(O(u)).map(x=>T(x).render(x,u)))).then(()=>I(u)).then(x=>(typeof x.copyFromChannel!="function"?(y(x),im(x)):m(B,()=>B(x))||P(x),W.add(x),x)),dK={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},pK=(W,m,T,O,I,B)=>class extends W{constructor(y,P){const i=I(y),u={...dK,...P},x=T(i,u),c=B(i),h=c?O():null;super(y,!1,x,h),this._pan=m(this,c,x.pan)}get pan(){return this._pan}},fK=(W,m,T,O,I)=>()=>{const B=new WeakMap,y=async(P,i)=>{let u=T(P);const x=Oi(u,i);if(!x){const c={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=m(i,c)}return B.set(i,u),x?await W(i,P.pan,u.pan):await O(i,P.pan,u.pan),Ro(u)?await I(P,i,u.inputs[0]):await I(P,i,u),u};return{render(P,i){const u=B.get(i);return u!==void 0?Promise.resolve(u):y(P,i)}}},gK=W=>()=>{if(W===null)return!1;try{new W({length:1,sampleRate:44100})}catch{return!1}return!0},vK=(W,m)=>async()=>{if(W===null)return!0;if(m===null)return!1;const T=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),O=new m(1,128,44100),I=URL.createObjectURL(T);let B=!1,y=!1;try{await O.audioWorklet.addModule(I);const P=new W(O,"a",{numberOfOutputs:0}),i=O.createOscillator();P.port.onmessage=()=>B=!0,P.onprocessorerror=()=>y=!0,i.connect(P),i.start(0),await O.startRendering(),await new Promise(u=>setTimeout(u))}catch{}finally{URL.revokeObjectURL(I)}return B&&!y},mK=(W,m)=>()=>{if(m===null)return Promise.resolve(!1);const T=new m(1,1,44100),O=W(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(I=>{T.oncomplete=()=>{O.disconnect(),I(T.currentTime!==0)},T.startRendering()})},yK=()=>new DOMException("","UnknownError"),xK={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},bK=(W,m,T,O,I,B,y)=>class extends W{constructor(P,i){const u=I(P),x={...xK,...i},c=T(u,x),h=B(u)?O():null;super(P,!0,c,h),this._isCurveNullified=!1,this._nativeWaveShaperNode=c,y(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(P){if(P===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(P.length<2)throw m();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=P}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(P){this._nativeWaveShaperNode.oversample=P}},wK=(W,m,T)=>()=>{const O=new WeakMap,I=async(B,y)=>{let P=m(B);if(!Oi(P,y)){const i={channelCount:P.channelCount,channelCountMode:P.channelCountMode,channelInterpretation:P.channelInterpretation,curve:P.curve,oversample:P.oversample};P=W(y,i)}return O.set(y,P),Ro(P)?await T(B,y,P.inputs[0]):await T(B,y,P),P};return{render(B,y){const P=O.get(y);return P!==void 0?Promise.resolve(P):I(B,y)}}},SK=()=>typeof window>"u"?null:window,TK=(W,m)=>T=>{T.copyFromChannel=(O,I,B=0)=>{const y=W(B),P=W(I);if(P>=T.numberOfChannels)throw m();const i=T.length,u=T.getChannelData(P),x=O.length;for(let c=y<0?-y:0;c+y<i&&c<x;c+=1)O[c]=u[c+y]},T.copyToChannel=(O,I,B=0)=>{const y=W(B),P=W(I);if(P>=T.numberOfChannels)throw m();const i=T.length,u=T.getChannelData(P),x=O.length;for(let c=y<0?-y:0;c+y<i&&c<x;c+=1)u[c+y]=O[c]}},CK=W=>m=>{m.copyFromChannel=(T=>(O,I,B=0)=>{const y=W(B),P=W(I);if(y<m.length)return T.call(m,O,P,y)})(m.copyFromChannel),m.copyToChannel=(T=>(O,I,B=0)=>{const y=W(B),P=W(I);if(y<m.length)return T.call(m,O,P,y)})(m.copyToChannel)},PK=W=>(m,T)=>{const O=T.createBuffer(1,1,44100);m.buffer===null&&(m.buffer=O),W(m,"buffer",I=>()=>{const B=I.call(m);return B===O?null:B},I=>B=>I.call(m,B===null?O:B))},MK=(W,m)=>(T,O)=>{O.channelCount=1,O.channelCountMode="explicit",Object.defineProperty(O,"channelCount",{get:()=>1,set:()=>{throw W()}}),Object.defineProperty(O,"channelCountMode",{get:()=>"explicit",set:()=>{throw W()}});const I=T.createBufferSource();m(O,()=>{const B=O.numberOfInputs;for(let y=0;y<B;y+=1)I.connect(O,0,y)},()=>I.disconnect(O))},tP=(W,m,T)=>W.copyFromChannel===void 0?W.getChannelData(T)[0]:(W.copyFromChannel(m,T),m[0]),eP=W=>{if(W===null)return!1;const m=W.length;return m%2!==0?W[Math.floor(m/2)]!==0:W[m/2-1]+W[m/2]!==0},Tl=(W,m,T,O)=>{let I=W;for(;!I.hasOwnProperty(m);)I=Object.getPrototypeOf(I);const{get:B,set:y}=Object.getOwnPropertyDescriptor(I,m);Object.defineProperty(W,m,{get:T(B),set:O(y)})},_K=W=>({...W,outputChannelCount:W.outputChannelCount!==void 0?W.outputChannelCount:W.numberOfInputs===1&&W.numberOfOutputs===1?[W.channelCount]:Array.from({length:W.numberOfOutputs},()=>1)}),kK=W=>({...W,channelCount:W.numberOfOutputs}),OK=W=>{const{imag:m,real:T}=W;return m===void 0?T===void 0?{...W,imag:[0,0],real:[0,0]}:{...W,imag:Array.from(T,()=>0),real:T}:T===void 0?{...W,imag:m,real:Array.from(m,()=>0)}:{...W,imag:m,real:T}},iP=(W,m,T)=>{try{W.setValueAtTime(m,T)}catch(O){if(O.code!==9)throw O;iP(W,m,T+1e-7)}},EK=W=>{const m=W.createBufferSource();m.start();try{m.start()}catch{return!0}return!1},AK=W=>{const m=W.createBufferSource(),T=W.createBuffer(1,1,44100);m.buffer=T;try{m.start(0,1)}catch{return!1}return!0},RK=W=>{const m=W.createBufferSource();m.start();try{m.stop()}catch{return!1}return!0},om=W=>{const m=W.createOscillator();try{m.start(-1)}catch(T){return T instanceof RangeError}return!1},sP=W=>{const m=W.createBuffer(1,1,44100),T=W.createBufferSource();T.buffer=m,T.start(),T.stop();try{return T.stop(),!0}catch{return!1}},hm=W=>{const m=W.createOscillator();try{m.stop(-1)}catch(T){return T instanceof RangeError}return!1},DK=W=>{const{port1:m,port2:T}=new MessageChannel;try{m.postMessage(W)}finally{m.close(),T.close()}},IK=W=>{W.start=(m=>(T=0,O=0,I)=>{const B=W.buffer,y=B===null?O:Math.min(B.duration,O);B!==null&&y>B.duration-.5/W.context.sampleRate?m.call(W,T,0,0):m.call(W,T,y,I)})(W.start)},rP=(W,m)=>{const T=m.createGain();W.connect(T);const O=(I=>()=>{I.call(W,T),W.removeEventListener("ended",O)})(W.disconnect);W.addEventListener("ended",O),Do(W,T),W.stop=(I=>{let B=!1;return(y=0)=>{if(B)try{I.call(W,y)}catch{T.gain.setValueAtTime(0,y)}else I.call(W,y),B=!0}})(W.stop)},Io=(W,m)=>T=>{const O={value:W};return Object.defineProperties(T,{currentTarget:O,target:O}),typeof m=="function"?m.call(W,T):m.handleEvent.call(W,T)},LK=eH(xa),FK=oH(xa),BK=x$(_d),nP=new WeakMap,NK=B$(nP),js=qH(new Map,new WeakMap),fr=SK(),aP=pq(js,gr),lm=F$(Bi),bi=aK(Bi,lm,va),YK=dH(aP,Me,bi),Te=V$(Md),Wr=Vq(fr),ve=sq(Wr),oP=new WeakMap,hP=O$(Io),Cl=mq(fr),um=Z$(Cl),cm=tq(fr),lP=eq(fr),gl=xq(fr),Ke=BH(iH(FC),aH(LK,FK,yd,BK,xd,Bi,NK,ml,Me,xa,zr,va,dd),js,$$(Gv,xd,Bi,Me,pl,zr),gr,kd,Ni,g$(yd,Gv,Bi,Me,pl,Te,zr,ve),S$(oP,Bi,Xs),hP,Te,um,cm,lP,ve,gl),VK=cH(Ke,YK,gr,aP,Te,ve),dm=new WeakSet,wC=fq(fr),uP=h$(new Uint32Array(1)),pm=TK(uP,gr),fm=CK(uP),cP=fH(dm,js,Ni,wC,Wr,gK(wC),pm,fm),Od=hH($i),dP=oK(lm,xl,va),vr=i$(dP),Lo=vq(Od,js,EK,AK,RK,om,sP,hm,IK,PK(Tl),rP),mr=nK(N$(xl),dP),zK=mH(vr,Lo,Me,mr,bi),Hs=NH(sH(BC),oP,em,YH,qj,Kj,Qj,Jj,Zj,Yv,IC,Cl,iP),GK=vH(Ke,zK,Hs,di,Lo,Te,ve,Io),UK=MH(Ke,_H,gr,di,yq($i,Tl),Te,ve,bi),WK=$H(vr,QC,Me,mr,bi),ba=uK(nP),XK=HH(Ke,Hs,WK,kd,QC,Te,ve,ba),En=cq(xa,cm),jK=MK(di,En),An=Mq(Cl,jK),HK=JH(An,Me,bi),$K=QH(Ke,HK,An,Te,ve),qK=e$(wl,Me,bi),KK=t$(Ke,qK,wl,Te,ve,kK),QK=Oq(Od,Lo,$i,En),Fo=kq(Od,js,QK,om,hm),JK=o$(vr,Fo,Me,mr,bi),ZK=a$(Ke,Hs,JK,Fo,Te,ve,Io),pP=Eq(Ni,Tl),tQ=c$(pP,Me,bi),eQ=u$(Ke,tQ,pP,Te,ve,ba),iQ=y$(vr,JC,Me,mr,bi),sQ=m$(Ke,Hs,iQ,JC,Te,ve,ba),fP=Aq(Ni),rQ=M$(vr,fP,Me,mr,bi),nQ=P$(Ke,Hs,rQ,fP,Ni,Te,ve,ba),aQ=I$(vr,$i,Me,mr,bi),oQ=D$(Ke,Hs,aQ,$i,Te,ve),hQ=Lq(kd,di,Sl,Ni),Ed=hK(js,$i,Sl,mK($i,Wr)),lQ=H$(Lo,Me,Wr,bi,Ed),uQ=Rq(hQ),cQ=X$(Ke,uQ,lQ,Te,ve,ba),dQ=kH(Hs,An,Fo,Sl,Ni,tP,ve,Tl),gP=new WeakMap,pQ=uq(UK,dQ,hP,ve,gP,Io),vP=zq(Od,js,om,sP,hm,rP),fQ=Zq(vr,vP,Me,mr,bi),gQ=Jq(Ke,Hs,vP,fQ,Te,ve,Io),mP=r$(Lo),vQ=$q(mP,di,$i,eP,En),Ad=Hq(mP,di,vQ,eP,En,Cl,Tl),mQ=Uq(yd,di,An,$i,Sl,Ad,Ni,xd,tP,En),yP=Gq(mQ),yQ=iK(vr,An,Fo,$i,yP,Me,Wr,mr,bi,Ed),xQ=eK(Ke,Hs,yP,yQ,Te,ve,ba),bQ=Wq(gr),wQ=rK(bQ,Te,new WeakSet,OK),SQ=jq(An,wl,$i,Ad,Ni,En),xP=Xq(SQ,Ni),TQ=fK(vr,xP,Me,mr,bi),CQ=pK(Ke,Hs,xP,TQ,Te,ve),PQ=wK(Ad,Me,bi),MQ=bK(Ke,di,Ad,PQ,Te,ve,ba),bP=rq(fr),gm=E$(fr),wP=new WeakMap,_Q=z$(wP,Wr),kQ=bP?nH(js,Ni,k$(fr),gm,A$(tH),Te,_Q,ve,gl,new WeakMap,new WeakMap,vK(gl,Wr),fr):void 0,OQ=iq(um,ve),EQ=f$(dm,js,p$,_$,new WeakSet,Te,OQ,vd,fl,pm,fm),SP=XH(kQ,VK,cP,GK,XK,$K,KK,ZK,eQ,EQ,sQ,nQ,oQ,cQ,pQ,gQ,xQ,wQ,CQ,MQ),AQ=nq(Ke,Fq,Te,ve),RQ=oq(Ke,Bq,Te,ve),DQ=hq(Ke,Nq,Te,ve),IQ=Yq(di,ve),LQ=lq(Ke,IQ,Te),FQ=PH(SP,di,Ni,yK,AQ,RQ,DQ,LQ,Cl),vm=G$(gP),BQ=lH(vm),TP=s$(gr),NQ=b$(vm),CP=T$(gr),PP=new WeakMap,YQ=L$(PP,Xs),VQ=Pq(TP,gr,di,An,wl,Fo,$i,Sl,Ni,CP,gm,YQ,En),zQ=wq(di,VQ,$i,Ni,En),GQ=WH(vr,TP,Lo,An,wl,Fo,$i,NQ,CP,gm,Me,gl,Wr,mr,bi,Ed),UQ=Y$(wP),WQ=lK(PP),SC=bP?zH(BQ,Ke,Hs,GQ,zQ,Bi,UQ,Te,ve,gl,_K,WQ,DK,Io):void 0,XQ=d$(Ni,Wr),jQ=cK(dm,js,lm,vm,Ed,vd,pm,fm),HQ=Kq(SP,js,di,XQ,jQ),$Q=q$(Md,um),qQ=K$(tm,cm),KQ=Q$(em,lP),QQ=J$(Md,ve);function Cs(W){return W===void 0}function re(W){return W!==void 0}function JQ(W){return typeof W=="function"}function ma(W){return typeof W=="number"}function ga(W){return Object.prototype.toString.call(W)==="[object Object]"&&W.constructor===Object}function ZQ(W){return typeof W=="boolean"}function Ws(W){return Array.isArray(W)}function Ur(W){return typeof W=="string"}function ud(W){return Ur(W)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(W)}function ee(W,m){if(!W)throw new Error(m)}function kn(W,m,T=1/0){if(!(m<=W&&W<=T))throw new RangeError(`Value must be within [${m}, ${T}], got: ${W}`)}function MP(W){!W.isOffline&&W.state!=="running"&&mm('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let _P=!1,TC=!1;function CC(W){_P=W}function tJ(W){Cs(W)&&_P&&!TC&&(TC=!0,mm("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let kP=console;function eJ(...W){kP.log(...W)}function mm(...W){kP.warn(...W)}function iJ(W){return new FQ(W)}function sJ(W,m,T){return new HQ(W,m,T)}const Gr=typeof self=="object"?self:null,rJ=Gr&&(Gr.hasOwnProperty("AudioContext")||Gr.hasOwnProperty("webkitAudioContext"));function nJ(W,m,T){return ee(re(SC),"AudioWorkletNode only works in a secure context (https or localhost)"),new(W instanceof Gr?.BaseAudioContext?Gr?.AudioWorkletNode:SC)(W,m,T)}function $s(W,m,T,O){var I=arguments.length,B=I<3?m:O,y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(W,m,T,O);else for(var P=W.length-1;P>=0;P--)(y=W[P])&&(B=(I<3?y(B):I>3?y(m,T,B):y(m,T))||B);return I>3&&B&&Object.defineProperty(m,T,B),B}function ei(W,m,T,O){function I(B){return B instanceof T?B:new T(function(y){y(B)})}return new(T||(T=Promise))(function(B,y){function P(x){try{u(O.next(x))}catch(c){y(c)}}function i(x){try{u(O.throw(x))}catch(c){y(c)}}function u(x){x.done?B(x.value):I(x.value).then(P,i)}u((O=O.apply(W,m||[])).next())})}class aJ{constructor(m,T,O,I){this._callback=m,this._type=T,this._minimumUpdateInterval=Math.max(128/(I||44100),.001),this.updateInterval=O,this._createClock()}_createWorker(){const m=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),T=URL.createObjectURL(m),O=new Worker(T);O.onmessage=this._callback.bind(this),this._worker=O}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(m){var T;this._updateInterval=Math.max(m,this._minimumUpdateInterval),this._type==="worker"&&((T=this._worker)===null||T===void 0||T.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(m){this._disposeClock(),this._type=m,this._createClock()}dispose(){this._disposeClock()}}function ya(W){return KQ(W)}function _n(W){return qQ(W)}function pd(W){return QQ(W)}function vo(W){return $Q(W)}function oJ(W){return W instanceof cP}function hJ(W,m){return W==="value"||ya(m)||_n(m)||oJ(m)}function wo(W,...m){if(!m.length)return W;const T=m.shift();if(ga(W)&&ga(T))for(const O in T)hJ(O,T[O])?W[O]=T[O]:ga(T[O])?(W[O]||Object.assign(W,{[O]:{}}),wo(W[O],T[O])):Object.assign(W,{[O]:T[O]});return wo(W,...m)}function lJ(W,m){return W.length===m.length&&W.every((T,O)=>m[O]===T)}function te(W,m,T=[],O){const I={},B=Array.from(m);if(ga(B[0])&&O&&!Reflect.has(B[0],O)&&(Object.keys(B[0]).some(y=>Reflect.has(W,y))||(wo(I,{[O]:B[0]}),T.splice(T.indexOf(O),1),B.shift())),B.length===1&&ga(B[0]))wo(I,B[0]);else for(let y=0;y<T.length;y++)re(B[y])&&(I[T[y]]=B[y]);return wo(W,I)}function uJ(W){return W.constructor.getDefaults()}function So(W,m){return Cs(W)?m:W}function PC(W,m){return m.forEach(T=>{Reflect.has(W,T)&&delete W[T]}),W}/**
* Tone.js
* @author Yotam Mann
* @license http://opensource.org/licenses/MIT MIT License
* @copyright 2014-2024 Yotam Mann
*/class Xr{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...m){(this.debug||Gr&&this.toString()===Gr.TONE_DEBUG_CLASS)&&eJ(this,...m)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Xr.version=DC;const ym=1e-6;function Po(W,m){return W>m+ym}function Hv(W,m){return Po(W,m)||Gs(W,m)}function Td(W,m){return W+ym<m}function Gs(W,m){return Math.abs(W-m)<ym}function cJ(W,m,T){return Math.max(Math.min(W,T),m)}class Ps extends Xr{constructor(){super(),this.name="Timeline",this._timeline=[];const m=te(Ps.getDefaults(),arguments,["memory"]);this.memory=m.memory,this.increasing=m.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(m){if(ee(Reflect.has(m,"time"),"Timeline: events must have a time attribute"),m.time=m.time.valueOf(),this.increasing&&this.length){const T=this._timeline[this.length-1];ee(Hv(m.time,T.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(m)}else{const T=this._search(m.time);this._timeline.splice(T+1,0,m)}if(this.length>this.memory){const T=this.length-this.memory;this._timeline.splice(0,T)}return this}remove(m){const T=this._timeline.indexOf(m);return T!==-1&&this._timeline.splice(T,1),this}get(m,T="time"){const O=this._search(m,T);return O!==-1?this._timeline[O]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(m,T="time"){const O=this._search(m,T);return O+1<this._timeline.length?this._timeline[O+1]:null}getBefore(m){const T=this._timeline.length;if(T>0&&this._timeline[T-1].time<m)return this._timeline[T-1];const O=this._search(m);return O-1>=0?this._timeline[O-1]:null}cancel(m){if(this._timeline.length>1){let T=this._search(m);if(T>=0)if(Gs(this._timeline[T].time,m)){for(let O=T;O>=0&&Gs(this._timeline[O].time,m);O--)T=O;this._timeline=this._timeline.slice(0,T)}else this._timeline=this._timeline.slice(0,T+1);else this._timeline=[]}else this._timeline.length===1&&Hv(this._timeline[0].time,m)&&(this._timeline=[]);return this}cancelBefore(m){const T=this._search(m);return T>=0&&(this._timeline=this._timeline.slice(T+1)),this}previousEvent(m){const T=this._timeline.indexOf(m);return T>0?this._timeline[T-1]:null}_search(m,T="time"){if(this._timeline.length===0)return-1;let O=0;const I=this._timeline.length;let B=I;if(I>0&&this._timeline[I-1][T]<=m)return I-1;for(;O<B;){let y=Math.floor(O+(B-O)/2);const P=this._timeline[y],i=this._timeline[y+1];if(Gs(P[T],m)){for(let u=y;u<this._timeline.length;u++){const x=this._timeline[u];if(Gs(x[T],m))y=u;else break}return y}else{if(Td(P[T],m)&&Po(i[T],m))return y;Po(P[T],m)?B=y:O=y+1}}return-1}_iterate(m,T=0,O=this._timeline.length-1){this._timeline.slice(T,O+1).forEach(m)}forEach(m){return this._iterate(m),this}forEachBefore(m,T){const O=this._search(m);return O!==-1&&this._iterate(T,0,O),this}forEachAfter(m,T){const O=this._search(m);return this._iterate(T,O+1),this}forEachBetween(m,T,O){let I=this._search(m),B=this._search(T);return I!==-1&&B!==-1?(this._timeline[I].time!==m&&(I+=1),this._timeline[B].time===T&&(B-=1),this._iterate(O,I,B)):I===-1&&this._iterate(O,0,B),this}forEachFrom(m,T){let O=this._search(m);for(;O>=0&&this._timeline[O].time>=m;)O--;return this._iterate(T,O+1),this}forEachAtTime(m,T){const O=this._search(m);if(O!==-1&&Gs(this._timeline[O].time,m)){let I=O;for(let B=O;B>=0&&Gs(this._timeline[B].time,m);B--)I=B;this._iterate(B=>{T(B)},I,O)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const OP=[];function Rd(W){OP.push(W)}function dJ(W){OP.forEach(m=>m(W))}const EP=[];function Dd(W){EP.push(W)}function pJ(W){EP.forEach(m=>m(W))}class Pl extends Xr{constructor(){super(...arguments),this.name="Emitter"}on(m,T){return m.split(/\W+/).forEach(O=>{Cs(this._events)&&(this._events={}),this._events.hasOwnProperty(O)||(this._events[O]=[]),this._events[O].push(T)}),this}once(m,T){const O=(...I)=>{T(...I),this.off(m,O)};return this.on(m,O),this}off(m,T){return m.split(/\W+/).forEach(O=>{if(Cs(this._events)&&(this._events={}),this._events.hasOwnProperty(O))if(Cs(T))this._events[O]=[];else{const I=this._events[O];for(let B=I.length-1;B>=0;B--)I[B]===T&&I.splice(B,1)}}),this}emit(m,...T){if(this._events&&this._events.hasOwnProperty(m)){const O=this._events[m].slice(0);for(let I=0,B=O.length;I<B;I++)O[I].apply(this,T)}return this}static mixin(m){["on","once","off","emit"].forEach(T=>{const O=Object.getOwnPropertyDescriptor(Pl.prototype,T);Object.defineProperty(m.prototype,T,O)})}dispose(){return super.dispose(),this._events=void 0,this}}class AP extends Pl{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Ml extends AP{constructor(){var m,T;super(),this.name="Context",this._constants=new Map,this._timeouts=new Ps,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const O=te(Ml.getDefaults(),arguments,["context"]);O.context?(this._context=O.context,this._latencyHint=((m=arguments[0])===null||m===void 0?void 0:m.latencyHint)||""):(this._context=iJ({latencyHint:O.latencyHint}),this._latencyHint=O.latencyHint),this._ticker=new aJ(this.emit.bind(this,"tick"),O.clockSource,O.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((T=arguments[0])===null||T===void 0)&&T.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=O.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(dJ(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(m,T,O){return this._context.createBuffer(m,T,O)}createChannelMerger(m){return this._context.createChannelMerger(m)}createChannelSplitter(m){return this._context.createChannelSplitter(m)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(m){return this._context.createDelay(m)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(m,T){return this._context.createIIRFilter(m,T)}createPanner(){return this._context.createPanner()}createPeriodicWave(m,T,O){return this._context.createPeriodicWave(m,T,O)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(m){return ee(vo(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(m)}createMediaElementSource(m){return ee(vo(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(m)}createMediaStreamDestination(){return ee(vo(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(m){return this._context.decodeAudioData(m)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(m){ee(!this._initialized,"The listener cannot be set after initialization."),this._listener=m}get transport(){return this.initialize(),this._transport}set transport(m){ee(!this._initialized,"The transport cannot be set after initialization."),this._transport=m}get draw(){return this.initialize(),this._draw}set draw(m){ee(!this._initialized,"Draw cannot be set after initialization."),this._draw=m}get destination(){return this.initialize(),this._destination}set destination(m){ee(!this._initialized,"The destination cannot be set after initialization."),this._destination=m}createAudioWorkletNode(m,T){return nJ(this.rawContext,m,T)}addAudioWorkletModule(m){return ei(this,void 0,void 0,function*(){ee(re(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(m)),yield this._workletPromise})}workletsAreReady(){return ei(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(m){this._ticker.updateInterval=m}get clockSource(){return this._ticker.type}set clockSource(m){this._ticker.type=m}get lookAhead(){return this._lookAhead}set lookAhead(m){this._lookAhead=m,this.updateInterval=m?m/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return vo(this._context)?this._context.resume():Promise.resolve()}close(){return ei(this,void 0,void 0,function*(){vo(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&pJ(this)})}getConstant(m){if(this._constants.has(m))return this._constants.get(m);{const T=this._context.createBuffer(1,128,this._context.sampleRate),O=T.getChannelData(0);for(let B=0;B<O.length;B++)O[B]=m;const I=this._context.createBufferSource();return I.channelCount=1,I.channelCountMode="explicit",I.buffer=T,I.loop=!0,I.start(0),this._constants.set(m,I),I}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(m=>this._constants[m].disconnect()),this.close(),this}_timeoutLoop(){const m=this.now();this._timeouts.forEachBefore(m,T=>{T.callback(),this._timeouts.remove(T)})}setTimeout(m,T){this._timeoutIds++;const O=this.now();return this._timeouts.add({callback:m,id:this._timeoutIds,time:O+T}),this._timeoutIds}clearTimeout(m){return this._timeouts.forEach(T=>{T.id===m&&this._timeouts.remove(T)}),this}clearInterval(m){return this.clearTimeout(m)}setInterval(m,T){const O=++this._timeoutIds,I=()=>{const B=this.now();this._timeouts.add({callback:()=>{m(),I()},id:O,time:B+T})};return I(),O}}class fJ extends AP{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(m,T,O){return{}}createChannelMerger(m){return{}}createChannelSplitter(m){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(m){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(m,T){return{}}createPanner(){return{}}createPeriodicWave(m,T,O){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(m){return{}}createMediaElementSource(m){return{}}createMediaStreamDestination(){return{}}decodeAudioData(m){return Promise.resolve({})}createAudioWorkletNode(m,T){return{}}get rawContext(){return{}}addAudioWorkletModule(m){return ei(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(m,T){return 0}clearTimeout(m){return this}setInterval(m,T){return 0}clearInterval(m){return this}getConstant(m){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(m){}get destination(){return{}}set destination(m){}now(){return 0}immediate(){return 0}}function Ue(W,m){Ws(m)?m.forEach(T=>Ue(W,T)):Object.defineProperty(W,m,{enumerable:!0,writable:!1})}function RP(W,m){Ws(m)?m.forEach(T=>RP(W,T)):Object.defineProperty(W,m,{writable:!0})}const ge=()=>{};class Ee extends Xr{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ge;const m=te(Ee.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=m.reverse,this.onload=m.onload,Ur(m.url)?this.load(m.url).catch(m.onerror):m.url&&this.set(m.url)}static getDefaults(){return{onerror:ge,onload:ge,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ns().sampleRate}set(m){return m instanceof Ee?m.loaded?this._buffer=m.get():m.onload=()=>{this.set(m),this.onload(this)}:this._buffer=m,this._reversed&&this._reverse(),this}get(){return this._buffer}load(m){return ei(this,void 0,void 0,function*(){const T=Ee.load(m).then(O=>{this.set(O),this.onload(this)});Ee.downloads.push(T);try{yield T}finally{const O=Ee.downloads.indexOf(T);Ee.downloads.splice(O,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(m){const T=Ws(m)&&m[0].length>0,O=T?m.length:1,I=T?m[0].length:m.length,B=ns(),y=B.createBuffer(O,I,B.sampleRate),P=!T&&O===1?[m]:m;for(let i=0;i<O;i++)y.copyToChannel(P[i],i);return this._buffer=y,this}toMono(m){if(ma(m))this.fromArray(this.toArray(m));else{let T=new Float32Array(this.length);const O=this.numberOfChannels;for(let I=0;I<O;I++){const B=this.toArray(I);for(let y=0;y<B.length;y++)T[y]+=B[y]}T=T.map(I=>I/O),this.fromArray(T)}return this}toArray(m){if(ma(m))return this.getChannelData(m);if(this.numberOfChannels===1)return this.toArray(0);{const T=[];for(let O=0;O<this.numberOfChannels;O++)T[O]=this.getChannelData(O);return T}}getChannelData(m){return this._buffer?this._buffer.getChannelData(m):new Float32Array(0)}slice(m,T=this.duration){ee(this.loaded,"Buffer is not loaded");const O=Math.floor(m*this.sampleRate),I=Math.floor(T*this.sampleRate);ee(O<I,"The start time must be less than the end time");const B=I-O,y=ns().createBuffer(this.numberOfChannels,B,this.sampleRate);for(let P=0;P<this.numberOfChannels;P++)y.copyToChannel(this.getChannelData(P).subarray(O,I),P);return new Ee(y)}_reverse(){if(this.loaded)for(let m=0;m<this.numberOfChannels;m++)this.getChannelData(m).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(m){this._reversed!==m&&(this._reversed=m,this._reverse())}static fromArray(m){return new Ee().fromArray(m)}static fromUrl(m){return ei(this,void 0,void 0,function*(){return yield new Ee().load(m)})}static load(m){return ei(this,void 0,void 0,function*(){const T=Ee.baseUrl===""||Ee.baseUrl.endsWith("/")?Ee.baseUrl:Ee.baseUrl+"/",O=yield fetch(T+m);if(!O.ok)throw new Error(`could not load url: ${m}`);const I=yield O.arrayBuffer();return yield ns().decodeAudioData(I)})}static supportsType(m){const T=m.split("."),O=T[T.length-1];return document.createElement("audio").canPlayType("audio/"+O)!==""}static loaded(){return ei(this,void 0,void 0,function*(){for(yield Promise.resolve();Ee.downloads.length;)yield Ee.downloads[0]})}}Ee.baseUrl="";Ee.downloads=[];class xm extends Ml{constructor(){super({clockSource:"offline",context:pd(arguments[0])?arguments[0]:sJ(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:pd(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=pd(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(m){return ei(this,void 0,void 0,function*(){let T=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,T++;const O=Math.floor(this.sampleRate/128);m&&T%O===0&&(yield new Promise(I=>setTimeout(I,1)))}})}render(){return ei(this,arguments,void 0,function*(m=!0){yield this.workletsAreReady(),yield this._renderClock(m);const T=yield this._context.startRendering();return new Ee(T)})}close(){return Promise.resolve()}}const DP=new fJ;let fa=DP;function ns(){return fa===DP&&rJ&&$v(new Ml),fa}function $v(W,m=!1){m&&fa.dispose(),vo(W)?fa=new Ml(W):pd(W)?fa=new xm(W):fa=W}function MC(){return fa.resume()}if(Gr&&!Gr.TONE_SILENCE_LOGGING){const W=` * Tone.js v${DC} * `;console.log(`%c${W}`,"background: #000; color: #fff")}function gJ(W){return Math.pow(10,W/20)}function pa(W){return 20*(Math.log(W)/Math.LN10)}function IP(W){return Math.pow(2,W/12)}let Id=440;function vJ(){return Id}function mJ(W){Id=W}function qv(W){return Math.round(LP(W))}function LP(W){return 69+12*Math.log2(W/Id)}function yJ(W){return Id*Math.pow(2,(W-69)/12)}class bm extends Xr{constructor(m,T,O){super(),this.defaultUnits="s",this._val=T,this._units=O,this.context=m,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:m=>this._frequencyToUnits(parseFloat(m)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:m=>this._ticksToUnits(parseInt(m,10)),regexp:/^(\d+)i$/i},m:{method:m=>this._beatsToUnits(parseInt(m,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(m,T)=>{const O=parseInt(m,10),I=T==="."?1.5:1;return O===1?this._beatsToUnits(this._getTimeSignature())*I:this._beatsToUnits(4/O)*I},regexp:/^(\d+)n(\.?)$/i},number:{method:m=>this._expressions[this.defaultUnits].method.call(this,m),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:m=>this._secondsToUnits(parseFloat(m)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:m=>parseInt(m,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:m=>{const T=parseInt(m,10);return this._beatsToUnits(8/(Math.floor(T)*3))},regexp:/^(\d+)t$/i},tr:{method:(m,T,O)=>{let I=0;return m&&m!=="0"&&(I+=this._beatsToUnits(this._getTimeSignature()*parseFloat(m))),T&&T!=="0"&&(I+=this._beatsToUnits(parseFloat(T))),O&&O!=="0"&&(I+=this._beatsToUnits(parseFloat(O)/4)),I},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof bm&&this.fromType(this._val),Cs(this._val))return this._noArg();if(Ur(this._val)&&Cs(this._units)){for(const m in this._expressions)if(this._expressions[m].regexp.test(this._val.trim())){this._units=m;break}}else if(ga(this._val)){let m=0;for(const T in this._val)if(re(this._val[T])){const O=this._val[T],I=new this.constructor(this.context,T).valueOf()*O;m+=I}return m}if(re(this._units)){const m=this._expressions[this._units],T=this._val.toString().trim().match(m.regexp);return T?m.method.apply(this,T.slice(1)):m.method.call(this,this._val)}else return Ur(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(m){return 1/m}_beatsToUnits(m){return 60/this._getBpm()*m}_secondsToUnits(m){return m}_ticksToUnits(m){return m*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(m){switch(this._units=void 0,this.defaultUnits){case"s":this._val=m.toSeconds();break;case"i":this._val=m.toTicks();break;case"hz":this._val=m.toFrequency();break;case"midi":this._val=m.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Us extends bm{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:m=>this._now()+new this.constructor(this.context,m).valueOf(),regexp:/^\+(.+)/},quantize:{method:m=>{const T=new Us(this.context,m).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(T))},regexp:/^@(.+)/}})}quantize(m,T=1){const O=new this.constructor(this.context,m).valueOf(),I=this.valueOf(),B=Math.round(I/O)*O-I;return I+B*T}toNotation(){const m=this.toSeconds(),T=["1m"];for(let B=1;B<9;B++){const y=Math.pow(2,B);T.push(y+"n."),T.push(y+"n"),T.push(y+"t")}T.push("0");let O=T[0],I=new Us(this.context,T[0]).toSeconds();return T.forEach(B=>{const y=new Us(this.context,B).toSeconds();Math.abs(y-m)<Math.abs(I-m)&&(O=B,I=y)}),O}toBarsBeatsSixteenths(){const m=this._beatsToUnits(1);let T=this.valueOf()/m;T=parseFloat(T.toFixed(4));const O=Math.floor(T/this._getTimeSignature());let I=T%1*4;T=Math.floor(T)%this._getTimeSignature();const B=I.toString();return B.length>3&&(I=parseFloat(parseFloat(B).toFixed(3))),[O,T,I].join(":")}toTicks(){const m=this._beatsToUnits(1);return this.valueOf()/m*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return qv(this.toFrequency())}_now(){return this.context.now()}}class Ts extends Us{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return vJ()}static set A4(m){mJ(m)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(m){return this.defaultUnits==="midi"?m:Ts.mtof(m)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(m,T){const O=xJ[m.toLowerCase()]+(parseInt(T,10)+1)*12;return this.defaultUnits==="midi"?O:Ts.mtof(O)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(m,T,O){let I=1;return m&&m!=="0"&&(I*=this._beatsToUnits(this._getTimeSignature()*parseFloat(m))),T&&T!=="0"&&(I*=this._beatsToUnits(parseFloat(T))),O&&O!=="0"&&(I*=this._beatsToUnits(parseFloat(O)/4)),I}}})}transpose(m){return new Ts(this.context,this.valueOf()*IP(m))}harmonize(m){return m.map(T=>this.transpose(T))}toMidi(){return qv(this.valueOf())}toNote(){const m=this.toFrequency(),T=Math.log2(m/Ts.A4);let O=Math.round(12*T)+57;const I=Math.floor(O/12);return I<0&&(O+=-12*I),bJ[O%12]+I.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const m=this._beatsToUnits(1),T=this.valueOf()/m;return Math.floor(T*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(m){return m}_ticksToUnits(m){return 1/(m*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(m){return 1/super._beatsToUnits(m)}_secondsToUnits(m){return 1/m}static mtof(m){return yJ(m)}static ftom(m){return qv(m)}}const xJ={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},bJ=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class cl extends Us{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Hi extends Xr{constructor(){super();const m=te(Hi.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=m.context}static getDefaults(){return{context:ns()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(m){return tJ(m),new Us(this.context,m).toSeconds()}toFrequency(m){return new Ts(this.context,m).toFrequency()}toTicks(m){return new cl(this.context,m).toTicks()}_getPartialProperties(m){const T=this.get();return Object.keys(T).forEach(O=>{Cs(m[O])&&delete T[O]}),T}get(){const m=uJ(this);return Object.keys(m).forEach(T=>{if(Reflect.has(this,T)){const O=this[T];re(O)&&re(O.value)&&re(O.setValueAtTime)?m[T]=O.value:O instanceof Hi?m[T]=O._getPartialProperties(m[T]):Ws(O)||ma(O)||Ur(O)||ZQ(O)?m[T]=O:delete m[T]}}),m}set(m){return Object.keys(m).forEach(T=>{Reflect.has(this,T)&&re(this[T])&&(this[T]&&re(this[T].value)&&re(this[T].setValueAtTime)?this[T].value!==m[T]&&(this[T].value=m[T]):this[T]instanceof Hi?this[T].set(m[T]):this[T]=m[T])}),this}}class wm extends Ps{constructor(m="stopped"){super(),this.name="StateTimeline",this._initial=m,this.setStateAtTime(this._initial,0)}getValueAtTime(m){const T=this.get(m);return T!==null?T.state:this._initial}setStateAtTime(m,T,O){return kn(T,0),this.add(Object.assign({},O,{state:m,time:T})),this}getLastState(m,T){const O=this._search(T);for(let I=O;I>=0;I--){const B=this._timeline[I];if(B.state===m)return B}}getNextState(m,T){const O=this._search(T);if(O!==-1)for(let I=O;I<this._timeline.length;I++){const B=this._timeline[I];if(B.state===m)return B}}}class Le extends Hi{constructor(){const m=te(Le.getDefaults(),arguments,["param","units","convert"]);for(super(m),this.name="Param",this.overridden=!1,this._minOutput=1e-7,ee(re(m.param)&&(ya(m.param)||m.param instanceof Le),"param must be an AudioParam");!ya(m.param);)m.param=m.param._param;this._swappable=re(m.swappable)?m.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=m.param,this.input.connect(this._param)):this._param=this.input=m.param,this._events=new Ps(1e3),this._initialValue=this._param.defaultValue,this.units=m.units,this.convert=m.convert,this._minValue=m.minValue,this._maxValue=m.maxValue,re(m.value)&&m.value!==this._toType(this._initialValue)&&this.setValueAtTime(m.value,0)}static getDefaults(){return Object.assign(Hi.getDefaults(),{convert:!0,units:"number"})}get value(){const m=this.now();return this.getValueAtTime(m)}set value(m){this.cancelScheduledValues(this.now()),this.setValueAtTime(m,this.now())}get minValue(){return re(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return re(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(m,T){return this.units===T}_assertRange(m){return re(this.maxValue)&&re(this.minValue)&&kn(m,this._fromType(this.minValue),this._fromType(this.maxValue)),m}_fromType(m){return this.convert&&!this.overridden?this._is(m,"time")?this.toSeconds(m):this._is(m,"decibels")?gJ(m):this._is(m,"frequency")?this.toFrequency(m):m:this.overridden?0:m}_toType(m){return this.convert&&this.units==="decibels"?pa(m):m}setValueAtTime(m,T){const O=this.toSeconds(T),I=this._fromType(m);return ee(isFinite(I)&&isFinite(O),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(m)}, ${JSON.stringify(T)}`),this._assertRange(I),this.log(this.units,"setValueAtTime",m,O),this._events.add({time:O,type:"setValueAtTime",value:I}),this._param.setValueAtTime(I,O),this}getValueAtTime(m){const T=Math.max(this.toSeconds(m),0),O=this._events.getAfter(T),I=this._events.get(T);let B=this._initialValue;if(I===null)B=this._initialValue;else if(I.type==="setTargetAtTime"&&(O===null||O.type==="setValueAtTime")){const y=this._events.getBefore(I.time);let P;y===null?P=this._initialValue:P=y.value,I.type==="setTargetAtTime"&&(B=this._exponentialApproach(I.time,P,I.value,I.constant,T))}else if(O===null)B=I.value;else if(O.type==="linearRampToValueAtTime"||O.type==="exponentialRampToValueAtTime"){let y=I.value;if(I.type==="setTargetAtTime"){const P=this._events.getBefore(I.time);P===null?y=this._initialValue:y=P.value}O.type==="linearRampToValueAtTime"?B=this._linearInterpolate(I.time,y,O.time,O.value,T):B=this._exponentialInterpolate(I.time,y,O.time,O.value,T)}else B=I.value;return this._toType(B)}setRampPoint(m){m=this.toSeconds(m);let T=this.getValueAtTime(m);return this.cancelAndHoldAtTime(m),this._fromType(T)===0&&(T=this._toType(this._minOutput)),this.setValueAtTime(T,m),this}linearRampToValueAtTime(m,T){const O=this._fromType(m),I=this.toSeconds(T);return ee(isFinite(O)&&isFinite(I),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(m)}, ${JSON.stringify(T)}`),this._assertRange(O),this._events.add({time:I,type:"linearRampToValueAtTime",value:O}),this.log(this.units,"linearRampToValueAtTime",m,I),this._param.linearRampToValueAtTime(O,I),this}exponentialRampToValueAtTime(m,T){let O=this._fromType(m);O=Gs(O,0)?this._minOutput:O,this._assertRange(O);const I=this.toSeconds(T);return ee(isFinite(O)&&isFinite(I),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(m)}, ${JSON.stringify(T)}`),this._events.add({time:I,type:"exponentialRampToValueAtTime",value:O}),this.log(this.units,"exponentialRampToValueAtTime",m,I),this._param.exponentialRampToValueAtTime(O,I),this}exponentialRampTo(m,T,O){return O=this.toSeconds(O),this.setRampPoint(O),this.exponentialRampToValueAtTime(m,O+this.toSeconds(T)),this}linearRampTo(m,T,O){return O=this.toSeconds(O),this.setRampPoint(O),this.linearRampToValueAtTime(m,O+this.toSeconds(T)),this}targetRampTo(m,T,O){return O=this.toSeconds(O),this.setRampPoint(O),this.exponentialApproachValueAtTime(m,O,T),this}exponentialApproachValueAtTime(m,T,O){T=this.toSeconds(T),O=this.toSeconds(O);const I=Math.log(O+1)/Math.log(200);return this.setTargetAtTime(m,T,I),this.cancelAndHoldAtTime(T+O*.9),this.linearRampToValueAtTime(m,T+O),this}setTargetAtTime(m,T,O){const I=this._fromType(m);ee(isFinite(O)&&O>0,"timeConstant must be a number greater than 0");const B=this.toSeconds(T);return this._assertRange(I),ee(isFinite(I)&&isFinite(B),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(m)}, ${JSON.stringify(T)}`),this._events.add({constant:O,time:B,type:"setTargetAtTime",value:I}),this.log(this.units,"setTargetAtTime",m,B,O),this._param.setTargetAtTime(I,B,O),this}setValueCurveAtTime(m,T,O,I=1){O=this.toSeconds(O),T=this.toSeconds(T);const B=this._fromType(m[0])*I;this.setValueAtTime(this._toType(B),T);const y=O/(m.length-1);for(let P=1;P<m.length;P++){const i=this._fromType(m[P])*I;this.linearRampToValueAtTime(this._toType(i),T+P*y)}return this}cancelScheduledValues(m){const T=this.toSeconds(m);return ee(isFinite(T),`Invalid argument to cancelScheduledValues: ${JSON.stringify(m)}`),this._events.cancel(T),this._param.cancelScheduledValues(T),this.log(this.units,"cancelScheduledValues",T),this}cancelAndHoldAtTime(m){const T=this.toSeconds(m),O=this._fromType(this.getValueAtTime(T));ee(isFinite(T),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(m)}`),this.log(this.units,"cancelAndHoldAtTime",T,"value="+O);const I=this._events.get(T),B=this._events.getAfter(T);return I&&Gs(I.time,T)?B?(this._param.cancelScheduledValues(B.time),this._events.cancel(B.time)):(this._param.cancelAndHoldAtTime(T),this._events.cancel(T+this.sampleTime)):B&&(this._param.cancelScheduledValues(B.time),this._events.cancel(B.time),B.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(O),T):B.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(O),T)),this._events.add({time:T,type:"setValueAtTime",value:O}),this._param.setValueAtTime(O,T),this}rampTo(m,T=.1,O){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(m,T,O):this.linearRampTo(m,T,O),this}apply(m){const T=this.context.currentTime;m.setValueAtTime(this.getValueAtTime(T),T);const O=this._events.get(T);if(O&&O.type==="setTargetAtTime"){const I=this._events.getAfter(O.time),B=I?I.time:T+2,y=(B-T)/10;for(let P=T;P<B;P+=y)m.linearRampToValueAtTime(this.getValueAtTime(P),P)}return this._events.forEachAfter(this.context.currentTime,I=>{I.type==="cancelScheduledValues"?m.cancelScheduledValues(I.time):I.type==="setTargetAtTime"?m.setTargetAtTime(I.value,I.time,I.constant):m[I.type](I.value,I.time)}),this}setParam(m){ee(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const T=this.input;return T.disconnect(this._param),this.apply(m),this._param=m,T.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(m,T,O,I,B){return O+(T-O)*Math.exp(-(B-m)/I)}_linearInterpolate(m,T,O,I,B){return T+(I-T)*((B-m)/(O-m))}_exponentialInterpolate(m,T,O,I,B){return T*Math.pow(I/T,(B-m)/(O-m))}}class ie extends Hi{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return re(this.input)?ya(this.input)||this.input instanceof Le?1:this.input.numberOfInputs:0}get numberOfOutputs(){return re(this.output)?this.output.numberOfOutputs:0}_isAudioNode(m){return re(m)&&(m instanceof ie||_n(m))}_getInternalNodes(){const m=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&m.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&m.push(this.output),m}_setChannelProperties(m){this._getInternalNodes().forEach(T=>{T.channelCount=m.channelCount,T.channelCountMode=m.channelCountMode,T.channelInterpretation=m.channelInterpretation})}_getChannelProperties(){const m=this._getInternalNodes();ee(m.length>0,"ToneAudioNode does not have any internal nodes");const T=m[0];return{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(m){const T=this._getChannelProperties();this._setChannelProperties(Object.assign(T,{channelCount:m}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(m){const T=this._getChannelProperties();this._setChannelProperties(Object.assign(T,{channelCountMode:m}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(m){const T=this._getChannelProperties();this._setChannelProperties(Object.assign(T,{channelInterpretation:m}))}connect(m,T=0,O=0){return Bo(this,m,T,O),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return mm("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(m,T=0,O=0){return wJ(this,m,T,O),this}chain(...m){return Kv(this,...m),this}fan(...m){return m.forEach(T=>this.connect(T)),this}dispose(){return super.dispose(),re(this.input)&&(this.input instanceof ie?this.input.dispose():_n(this.input)&&this.input.disconnect()),re(this.output)&&(this.output instanceof ie?this.output.dispose():_n(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Kv(...W){const m=W.shift();W.reduce((T,O)=>(T instanceof ie?T.connect(O):_n(T)&&Bo(T,O),O),m)}function Bo(W,m,T=0,O=0){for(ee(re(W),"Cannot connect from undefined node"),ee(re(m),"Cannot connect to undefined node"),(m instanceof ie||_n(m))&&ee(m.numberOfInputs>0,"Cannot connect to node with no inputs"),ee(W.numberOfOutputs>0,"Cannot connect from node with no outputs");m instanceof ie||m instanceof Le;)re(m.input)&&(m=m.input);for(;W instanceof ie;)re(W.output)&&(W=W.output);ya(m)?W.connect(m,T):W.connect(m,T,O)}function wJ(W,m,T=0,O=0){if(re(m))for(;m instanceof ie;)m=m.input;for(;!_n(W);)re(W.output)&&(W=W.output);ya(m)?W.disconnect(m,T):_n(m)?W.disconnect(m,T,O):W.disconnect()}class ki extends ie{constructor(){const m=te(ki.getDefaults(),arguments,["gain","units"]);super(m),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Le({context:this.context,convert:m.convert,param:this._gainNode.gain,units:m.units,value:m.gain,minValue:m.minValue,maxValue:m.maxValue}),Ue(this,"gain")}static getDefaults(){return Object.assign(ie.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Mo extends ie{constructor(m){super(m),this.onended=ge,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ki({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(T){const O=this.toSeconds(T);return this._startTime!==-1&&O>=this._startTime&&(this._stopTime===-1||O<=this._stopTime)?"started":"stopped"},this._fadeIn=m.fadeIn,this._fadeOut=m.fadeOut,this._curve=m.curve,this.onended=m.onended}static getDefaults(){return Object.assign(ie.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ge})}_startGain(m,T=1){ee(this._startTime===-1,"Source cannot be started more than once");const O=this.toSeconds(this._fadeIn);return this._startTime=m+O,this._startTime=Math.max(this._startTime,this.context.currentTime),O>0?(this._gainNode.gain.setValueAtTime(0,m),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(T,m+O):this._gainNode.gain.exponentialApproachValueAtTime(T,m,O)):this._gainNode.gain.setValueAtTime(T,m),this}stop(m){return this.log("stop",m),this._stopGain(this.toSeconds(m)),this}_stopGain(m){ee(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const T=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(m)+T,this._stopTime=Math.max(this._stopTime,this.now()),T>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,T,m):this._gainNode.gain.targetRampTo(0,T,m):(this._gainNode.gain.cancelAndHoldAtTime(m),this._gainNode.gain.setValueAtTime(0,m)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const O=this._curve==="exponential"?T*2:0;this._stopSource(this.now()+O),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ge&&(this.onended(this),this.onended=ge,!this.context.isOffline)){const m=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(m):setTimeout(m,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ee(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=ge,this}}class Sm extends Mo{constructor(){const m=te(Sm.getDefaults(),arguments,["offset"]);super(m),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Bo(this._source,this._gainNode),this.offset=new Le({context:this.context,convert:m.convert,param:this._source.offset,units:m.units,value:m.offset,minValue:m.minValue,maxValue:m.maxValue})}static getDefaults(){return Object.assign(Mo.getDefaults(),{convert:!0,offset:1,units:"number"})}start(m){const T=this.toSeconds(m);return this.log("start",T),this._startGain(T),this._source.start(T),this}_stopSource(m){this._source.stop(m)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class pi extends ie{constructor(){const m=te(pi.getDefaults(),arguments,["value","units"]);super(m),this.name="Signal",this.override=!0,this.output=this._constantSource=new Sm({context:this.context,convert:m.convert,offset:m.value,units:m.units,minValue:m.minValue,maxValue:m.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ie.getDefaults(),{convert:!0,units:"number",value:0})}connect(m,T=0,O=0){return Tm(this,m,T,O),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(m,T){return this._param.setValueAtTime(m,T),this}getValueAtTime(m){return this._param.getValueAtTime(m)}setRampPoint(m){return this._param.setRampPoint(m),this}linearRampToValueAtTime(m,T){return this._param.linearRampToValueAtTime(m,T),this}exponentialRampToValueAtTime(m,T){return this._param.exponentialRampToValueAtTime(m,T),this}exponentialRampTo(m,T,O){return this._param.exponentialRampTo(m,T,O),this}linearRampTo(m,T,O){return this._param.linearRampTo(m,T,O),this}targetRampTo(m,T,O){return this._param.targetRampTo(m,T,O),this}exponentialApproachValueAtTime(m,T,O){return this._param.exponentialApproachValueAtTime(m,T,O),this}setTargetAtTime(m,T,O){return this._param.setTargetAtTime(m,T,O),this}setValueCurveAtTime(m,T,O,I){return this._param.setValueCurveAtTime(m,T,O,I),this}cancelScheduledValues(m){return this._param.cancelScheduledValues(m),this}cancelAndHoldAtTime(m){return this._param.cancelAndHoldAtTime(m),this}rampTo(m,T,O){return this._param.rampTo(m,T,O),this}get value(){return this._param.value}set value(m){this._param.value=m}get convert(){return this._param.convert}set convert(m){this._param.convert=m}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(m){this._param.overridden=m}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(m){return this._param.apply(m),this}}function Tm(W,m,T,O){(m instanceof Le||ya(m)||m instanceof pi&&m.override)&&(m.cancelScheduledValues(0),m.setValueAtTime(0,0),m instanceof pi&&(m.overridden=!0)),Bo(W,m,T,O)}class Cm extends Le{constructor(){const m=te(Cm.getDefaults(),arguments,["value"]);super(m),this.name="TickParam",this._events=new Ps(1/0),this._multiplier=1,this._multiplier=m.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(m.value)}),this.setValueAtTime(m.value,0)}static getDefaults(){return Object.assign(Le.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(m,T,O){T=this.toSeconds(T),this.setRampPoint(T);const I=this._fromType(m),B=this._events.get(T),y=Math.round(Math.max(1/O,1));for(let P=0;P<=y;P++){const i=O*P+T,u=this._exponentialApproach(B.time,B.value,I,O,i);this.linearRampToValueAtTime(this._toType(u),i)}return this}setValueAtTime(m,T){const O=this.toSeconds(T);super.setValueAtTime(m,T);const I=this._events.get(O),B=this._events.previousEvent(I),y=this._getTicksUntilEvent(B,O);return I.ticks=Math.max(y,0),this}linearRampToValueAtTime(m,T){const O=this.toSeconds(T);super.linearRampToValueAtTime(m,T);const I=this._events.get(O),B=this._events.previousEvent(I),y=this._getTicksUntilEvent(B,O);return I.ticks=Math.max(y,0),this}exponentialRampToValueAtTime(m,T){T=this.toSeconds(T);const O=this._fromType(m),I=this._events.get(T),B=Math.round(Math.max((T-I.time)*10,1)),y=(T-I.time)/B;for(let P=0;P<=B;P++){const i=y*P+I.time,u=this._exponentialInterpolate(I.time,I.value,T,O,i);this.linearRampToValueAtTime(this._toType(u),i)}return this}_getTicksUntilEvent(m,T){if(m===null)m={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Cs(m.ticks)){const y=this._events.previousEvent(m);m.ticks=this._getTicksUntilEvent(y,m.time)}const O=this._fromType(this.getValueAtTime(m.time));let I=this._fromType(this.getValueAtTime(T));const B=this._events.get(T);return B&&B.time===T&&B.type==="setValueAtTime"&&(I=this._fromType(this.getValueAtTime(T-this.sampleTime))),.5*(T-m.time)*(O+I)+m.ticks}getTicksAtTime(m){const T=this.toSeconds(m),O=this._events.get(T);return Math.max(this._getTicksUntilEvent(O,T),0)}getDurationOfTicks(m,T){const O=this.toSeconds(T),I=this.getTicksAtTime(T);return this.getTimeOfTick(I+m)-O}getTimeOfTick(m){const T=this._events.get(m,"ticks"),O=this._events.getAfter(m,"ticks");if(T&&T.ticks===m)return T.time;if(T&&O&&O.type==="linearRampToValueAtTime"&&T.value!==O.value){const I=this._fromType(this.getValueAtTime(T.time)),B=(this._fromType(this.getValueAtTime(O.time))-I)/(O.time-T.time),y=Math.sqrt(Math.pow(I,2)-2*B*(T.ticks-m)),P=(-I+y)/B,i=(-I-y)/B;return(P>0?P:i)+T.time}else return T?T.value===0?1/0:T.time+(m-T.ticks)/T.value:m/this._initialValue}ticksToTime(m,T){return this.getDurationOfTicks(m,T)}timeToTicks(m,T){const O=this.toSeconds(T),I=this.toSeconds(m),B=this.getTicksAtTime(O);return this.getTicksAtTime(O+I)-B}_fromType(m){return this.units==="bpm"&&this.multiplier?1/(60/m/this.multiplier):super._fromType(m)}_toType(m){return this.units==="bpm"&&this.multiplier?m/this.multiplier*60:super._toType(m)}get multiplier(){return this._multiplier}set multiplier(m){const T=this.value;this._multiplier=m,this.cancelScheduledValues(0),this.setValueAtTime(T,0)}}class Pm extends pi{constructor(){const m=te(Pm.getDefaults(),arguments,["value"]);super(m),this.name="TickSignal",this.input=this._param=new Cm({context:this.context,convert:m.convert,multiplier:m.multiplier,param:this._constantSource.offset,units:m.units,value:m.value})}static getDefaults(){return Object.assign(pi.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(m,T){return this._param.ticksToTime(m,T)}timeToTicks(m,T){return this._param.timeToTicks(m,T)}getTimeOfTick(m){return this._param.getTimeOfTick(m)}getDurationOfTicks(m,T){return this._param.getDurationOfTicks(m,T)}getTicksAtTime(m){return this._param.getTicksAtTime(m)}get multiplier(){return this._param.multiplier}set multiplier(m){this._param.multiplier=m}dispose(){return super.dispose(),this._param.dispose(),this}}class Mm extends Hi{constructor(){const m=te(Mm.getDefaults(),arguments,["frequency"]);super(m),this.name="TickSource",this._state=new wm,this._tickOffset=new Ps,this._ticksAtTime=new Ps,this._secondsAtTime=new Ps,this.frequency=new Pm({context:this.context,units:m.units,value:m.frequency}),Ue(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Hi.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(m,T){const O=this.toSeconds(m);return this._state.getValueAtTime(O)!=="started"&&(this._state.setStateAtTime("started",O),re(T)&&this.setTicksAtTime(T,O),this._ticksAtTime.cancel(O),this._secondsAtTime.cancel(O)),this}stop(m){const T=this.toSeconds(m);if(this._state.getValueAtTime(T)==="stopped"){const O=this._state.get(T);O&&O.time>0&&(this._tickOffset.cancel(O.time),this._state.cancel(O.time))}return this._state.cancel(T),this._state.setStateAtTime("stopped",T),this.setTicksAtTime(0,T),this._ticksAtTime.cancel(T),this._secondsAtTime.cancel(T),this}pause(m){const T=this.toSeconds(m);return this._state.getValueAtTime(T)==="started"&&(this._state.setStateAtTime("paused",T),this._ticksAtTime.cancel(T),this._secondsAtTime.cancel(T)),this}cancel(m){return m=this.toSeconds(m),this._state.cancel(m),this._tickOffset.cancel(m),this._ticksAtTime.cancel(m),this._secondsAtTime.cancel(m),this}getTicksAtTime(m){const T=this.toSeconds(m),O=this._state.getLastState("stopped",T),I=this._ticksAtTime.get(T),B={state:"paused",time:T};this._state.add(B);let y=I||O,P=I?I.ticks:0,i=null;return this._state.forEachBetween(y.time,T+this.sampleTime,u=>{let x=y.time;const c=this._tickOffset.get(u.time);c&&c.time>=y.time&&(P=c.ticks,x=c.time),y.state==="started"&&u.state!=="started"&&(P+=this.frequency.getTicksAtTime(u.time)-this.frequency.getTicksAtTime(x),u.time!==B.time&&(i={state:u.state,time:u.time,ticks:P})),y=u}),this._state.remove(B),i&&this._ticksAtTime.add(i),P}get ticks(){return this.getTicksAtTime(this.now())}set ticks(m){this.setTicksAtTime(m,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(m){const T=this.now(),O=this.frequency.timeToTicks(m,T);this.setTicksAtTime(O,T)}getSecondsAtTime(m){m=this.toSeconds(m);const T=this._state.getLastState("stopped",m),O={state:"paused",time:m};this._state.add(O);const I=this._secondsAtTime.get(m);let B=I||T,y=I?I.seconds:0,P=null;return this._state.forEachBetween(B.time,m+this.sampleTime,i=>{let u=B.time;const x=this._tickOffset.get(i.time);x&&x.time>=B.time&&(y=x.seconds,u=x.time),B.state==="started"&&i.state!=="started"&&(y+=i.time-u,i.time!==O.time&&(P={state:i.state,time:i.time,seconds:y})),B=i}),this._state.remove(O),P&&this._secondsAtTime.add(P),y}setTicksAtTime(m,T){return T=this.toSeconds(T),this._tickOffset.cancel(T),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(m,T),ticks:m,time:T}),this._ticksAtTime.cancel(T),this._secondsAtTime.cancel(T),this}getStateAtTime(m){return m=this.toSeconds(m),this._state.getValueAtTime(m)}getTimeOfTick(m,T=this.now()){const O=this._tickOffset.get(T),I=this._state.get(T),B=Math.max(O.time,I.time),y=this.frequency.getTicksAtTime(B)+m-O.ticks;return this.frequency.getTimeOfTick(y)}forEachTickBetween(m,T,O){let I=this._state.get(m);this._state.forEachBetween(m,T,y=>{I&&I.state==="started"&&y.state!=="started"&&this.forEachTickBetween(Math.max(I.time,m),y.time-this.sampleTime,O),I=y});let B=null;if(I&&I.state==="started"){const y=Math.max(I.time,m),P=this.frequency.getTicksAtTime(y),i=this.frequency.getTicksAtTime(I.time),u=P-i;let x=Math.ceil(u)-u;x=Gs(x,1)?0:x;let c=this.frequency.getTimeOfTick(P+x);for(;c<T;){try{O(c,Math.round(this.getTicksAtTime(c)))}catch(h){B=h;break}c+=this.frequency.getDurationOfTicks(1,c)}}if(B)throw B;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Ld extends Hi{constructor(){const m=te(Ld.getDefaults(),arguments,["callback","frequency"]);super(m),this.name="Clock",this.callback=ge,this._lastUpdate=0,this._state=new wm("stopped"),this._boundLoop=this._loop.bind(this),this.callback=m.callback,this._tickSource=new Mm({context:this.context,frequency:m.frequency,units:m.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ue(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Hi.getDefaults(),{callback:ge,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(m,T){MP(this.context);const O=this.toSeconds(m);return this.log("start",O),this._state.getValueAtTime(O)!=="started"&&(this._state.setStateAtTime("started",O),this._tickSource.start(O,T),O<this._lastUpdate&&this.emit("start",O,T)),this}stop(m){const T=this.toSeconds(m);return this.log("stop",T),this._state.cancel(T),this._state.setStateAtTime("stopped",T),this._tickSource.stop(T),T<this._lastUpdate&&this.emit("stop",T),this}pause(m){const T=this.toSeconds(m);return this._state.getValueAtTime(T)==="started"&&(this._state.setStateAtTime("paused",T),this._tickSource.pause(T),T<this._lastUpdate&&this.emit("pause",T)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(m){this._tickSource.ticks=m}get seconds(){return this._tickSource.seconds}set seconds(m){this._tickSource.seconds=m}getSecondsAtTime(m){return this._tickSource.getSecondsAtTime(m)}setTicksAtTime(m,T){return this._tickSource.setTicksAtTime(m,T),this}getTimeOfTick(m,T=this.now()){return this._tickSource.getTimeOfTick(m,T)}getTicksAtTime(m){return this._tickSource.getTicksAtTime(m)}nextTickTime(m,T){const O=this.toSeconds(T),I=this.getTicksAtTime(O);return this._tickSource.getTimeOfTick(I+m,O)}_loop(){const m=this._lastUpdate,T=this.now();this._lastUpdate=T,this.log("loop",m,T),m!==T&&(this._state.forEachBetween(m,T,O=>{switch(O.state){case"started":const I=this._tickSource.getTicksAtTime(O.time);this.emit("start",O.time,I);break;case"stopped":O.time!==0&&this.emit("stop",O.time);break;case"paused":this.emit("pause",O.time);break}}),this._tickSource.forEachTickBetween(m,T,(O,I)=>{this.callback(O,I)}))}getStateAtTime(m){const T=this.toSeconds(m);return this._state.getValueAtTime(T)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Pl.mixin(Ld);class No extends ie{constructor(){const m=te(No.getDefaults(),arguments,["volume"]);super(m),this.name="Volume",this.input=this.output=new ki({context:this.context,gain:m.volume,units:"decibels"}),this.volume=this.output.gain,Ue(this,"volume"),this._unmutedVolume=m.volume,this.mute=m.mute}static getDefaults(){return Object.assign(ie.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(m){!this.mute&&m?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!m&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class _m extends ie{constructor(){const m=te(_m.getDefaults(),arguments);super(m),this.name="Destination",this.input=new No({context:this.context}),this.output=new ki({context:this.context}),this.volume=this.input.volume,Kv(this.input,this.output,this.context.rawContext.destination),this.mute=m.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ie.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(m){this.input.mute=m}chain(...m){return this.input.disconnect(),m.unshift(this.input),m.push(this.output),Kv(...m),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Rd(W=>{W.destination=new _m({context:W})});Dd(W=>{W.destination.dispose()});class SJ extends ie{constructor(){super(...arguments),this.name="Listener",this.positionX=new Le({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Le({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Le({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Le({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Le({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Le({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Le({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Le({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Le({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ie.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Rd(W=>{W.listener=new SJ({context:W})});Dd(W=>{W.listener.dispose()});class km extends Xr{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const m=te(km.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=m.baseUrl,Object.keys(m.urls).forEach(T=>{this._loadingCount++;const O=m.urls[T];this.add(T,O,this._bufferLoaded.bind(this,m.onload),m.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ge,onload:ge,urls:{}}}has(m){return this._buffers.has(m.toString())}get(m){return ee(this.has(m),`ToneAudioBuffers has no buffer named: ${m}`),this._buffers.get(m.toString())}_bufferLoaded(m){this._loadingCount--,this._loadingCount===0&&m&&m()}get loaded(){return Array.from(this._buffers).every(([m,T])=>T.loaded)}add(m,T,O=ge,I=ge){return Ur(T)?(this.baseUrl&&T.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(m.toString(),new Ee(this.baseUrl+T,O,I))):this._buffers.set(m.toString(),new Ee(T,O,I)),this}dispose(){return super.dispose(),this._buffers.forEach(m=>m.dispose()),this._buffers.clear(),this}}class yo extends cl{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(m){return this._getPPQ()*m}_secondsToUnits(m){return Math.floor(m/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(m){return m}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class TJ extends Hi{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ps,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(m,T){return this._events.add({callback:m,time:this.toSeconds(T)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(m){return this._events.cancel(this.toSeconds(m)),this}_drawLoop(){const m=this.context.currentTime;this._events.forEachBefore(m+this.anticipation,T=>{m-T.time<=this.expiration&&T.callback(),this._events.remove(T)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Rd(W=>{W.draw=new TJ({context:W})});Dd(W=>{W.draw.dispose()});class CJ extends Xr{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(m){ee(re(m.time),"Events must have a time property"),ee(re(m.duration),"Events must have a duration parameter"),m.time=m.time.valueOf();let T=new PJ(m.time,m.time+m.duration,m);for(this._root===null?this._root=T:this._root.insert(T),this._length++;T!==null;)T.updateHeight(),T.updateMax(),this._rebalance(T),T=T.parent;return this}remove(m){if(this._root!==null){const T=[];this._root.search(m.time,T);for(const O of T)if(O.event===m){this._removeNode(O),this._length--;break}}return this}get length(){return this._length}cancel(m){return this.forEachFrom(m,T=>this.remove(T)),this}_setRoot(m){this._root=m,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(m,T){m.parent!==null?(m.isLeftChild()?m.parent.left=T:m.parent.right=T,this._rebalance(m.parent)):this._setRoot(T)}_removeNode(m){if(m.left===null&&m.right===null)this._replaceNodeInParent(m,null);else if(m.right===null)this._replaceNodeInParent(m,m.left);else if(m.left===null)this._replaceNodeInParent(m,m.right);else{const T=m.getBalance();let O,I=null;if(T>0)if(m.left.right===null)O=m.left,O.right=m.right,I=O;else{for(O=m.left.right;O.right!==null;)O=O.right;O.parent&&(O.parent.right=O.left,I=O.parent,O.left=m.left,O.right=m.right)}else if(m.right.left===null)O=m.right,O.left=m.left,I=O;else{for(O=m.right.left;O.left!==null;)O=O.left;O.parent&&(O.parent.left=O.right,I=O.parent,O.left=m.left,O.right=m.right)}m.parent!==null?m.isLeftChild()?m.parent.left=O:m.parent.right=O:this._setRoot(O),I&&this._rebalance(I)}m.dispose()}_rotateLeft(m){const T=m.parent,O=m.isLeftChild(),I=m.right;I&&(m.right=I.left,I.left=m),T!==null?O?T.left=I:T.right=I:this._setRoot(I)}_rotateRight(m){const T=m.parent,O=m.isLeftChild(),I=m.left;I&&(m.left=I.right,I.right=m),T!==null?O?T.left=I:T.right=I:this._setRoot(I)}_rebalance(m){const T=m.getBalance();T>1&&m.left?m.left.getBalance()<0?this._rotateLeft(m.left):this._rotateRight(m):T<-1&&m.right&&(m.right.getBalance()>0?this._rotateRight(m.right):this._rotateLeft(m))}get(m){if(this._root!==null){const T=[];if(this._root.search(m,T),T.length>0){let O=T[0];for(let I=1;I<T.length;I++)T[I].low>O.low&&(O=T[I]);return O.event}}return null}forEach(m){if(this._root!==null){const T=[];this._root.traverse(O=>T.push(O)),T.forEach(O=>{O.event&&m(O.event)})}return this}forEachAtTime(m,T){if(this._root!==null){const O=[];this._root.search(m,O),O.forEach(I=>{I.event&&T(I.event)})}return this}forEachFrom(m,T){if(this._root!==null){const O=[];this._root.searchAfter(m,O),O.forEach(I=>{I.event&&T(I.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(m=>m.dispose()),this._root=null,this}}class PJ{constructor(m,T,O){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=O,this.low=m,this.high=T,this.max=this.high}insert(m){m.low<=this.low?this.left===null?this.left=m:this.left.insert(m):this.right===null?this.right=m:this.right.insert(m)}search(m,T){m>this.max||(this.left!==null&&this.left.search(m,T),this.low<=m&&this.high>m&&T.push(this),!(this.low>m)&&this.right!==null&&this.right.search(m,T))}searchAfter(m,T){this.low>=m&&(T.push(this),this.left!==null&&this.left.searchAfter(m,T)),this.right!==null&&this.right.searchAfter(m,T)}traverse(m){m(this),this.left!==null&&this.left.traverse(m),this.right!==null&&this.right.traverse(m)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let m=0;return this.left!==null&&this.right!==null?m=this.left.height-this.right.height:this.left!==null?m=this.left.height+1:this.right!==null&&(m=-(this.right.height+1)),m}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(m){this._left=m,m!==null&&(m.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(m){this._right=m,m!==null&&(m.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class MJ extends Xr{constructor(m){super(),this.name="TimelineValue",this._timeline=new Ps({memory:10}),this._initialValue=m}set(m,T){return this._timeline.add({value:m,time:T}),this}get(m){const T=this._timeline.get(m);return T?T.value:this._initialValue}}class _o extends ie{constructor(){super(te(_o.getDefaults(),arguments,["context"]))}connect(m,T=0,O=0){return Tm(this,m,T,O),this}}class _l extends _o{constructor(){const m=te(_l.getDefaults(),arguments,["mapping","length"]);super(m),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Ws(m.mapping)||m.mapping instanceof Float32Array?this.curve=Float32Array.from(m.mapping):JQ(m.mapping)&&this.setMap(m.mapping,m.length)}static getDefaults(){return Object.assign(pi.getDefaults(),{length:1024})}setMap(m,T=1024){const O=new Float32Array(T);for(let I=0,B=T;I<B;I++){const y=I/(B-1)*2-1;O[I]=m(y,I)}return this.curve=O,this}get curve(){return this._shaper.curve}set curve(m){this._shaper.curve=m}get oversample(){return this._shaper.oversample}set oversample(m){const T=["none","2x","4x"].some(O=>O.includes(m));ee(T,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=m}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Om extends _o{constructor(){const m=te(Om.getDefaults(),arguments,["value"]);super(m),this.name="Pow",this._exponentScaler=this.input=this.output=new _l({context:this.context,mapping:this._expFunc(m.value),length:8192}),this._exponent=m.value}static getDefaults(){return Object.assign(_o.getDefaults(),{value:1})}_expFunc(m){return T=>Math.pow(Math.abs(T),m)}get value(){return this._exponent}set value(m){this._exponent=m,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class On{constructor(m,T){this.id=On._eventId++,this._remainderTime=0;const O=Object.assign(On.getDefaults(),T);this.transport=m,this.callback=O.callback,this._once=O.once,this.time=Math.floor(O.time),this._remainderTime=O.time-this.time}static getDefaults(){return{callback:ge,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(m){if(this.callback){const T=this.transport.bpm.getDurationOfTicks(1,m);this.callback(m+this._remainderTime*T),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}On._eventId=0;class Em extends On{constructor(m,T){super(m,T),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const O=Object.assign(Em.getDefaults(),T);this.duration=O.duration,this._interval=O.interval,this._nextTick=O.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},On.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(m){this._createEvents(m),super.invoke(m)}_createEvent(){return Td(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new yo(this.context,this._nextTick).toSeconds()):-1}_createEvents(m){Td(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new yo(this.context,this._nextTick).toSeconds()))}_restart(m){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const T=this.transport.getTicksAtTime(m);Po(T,this.time)&&(this._nextTick=this.floatTime+Math.ceil((T-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Fd extends Hi{constructor(){const m=te(Fd.getDefaults(),arguments);super(m),this.name="Transport",this._loop=new MJ(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ps,this._repeatedEvents=new CJ,this._syncedSignals=[],this._swingAmount=0,this._ppq=m.ppq,this._clock=new Ld({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=m.ppq,this.bpm.setValueAtTime(m.bpm,0),Ue(this,"bpm"),this._timeSignature=m.timeSignature,this._swingTicks=m.ppq/2}static getDefaults(){return Object.assign(Hi.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(m,T){if(this._loop.get(m)&&T>=this._loopEnd&&(this.emit("loopEnd",m),this._clock.setTicksAtTime(this._loopStart,m),T=this._loopStart,this.emit("loopStart",m,this._clock.getSecondsAtTime(m)),this.emit("loop",m)),this._swingAmount>0&&T%this._ppq!==0&&T%(this._swingTicks*2)!==0){const O=T%(this._swingTicks*2)/(this._swingTicks*2),I=Math.sin(O*Math.PI)*this._swingAmount;m+=new yo(this.context,this._swingTicks*2/3).toSeconds()*I}CC(!0),this._timeline.forEachAtTime(T,O=>O.invoke(m)),CC(!1)}schedule(m,T){const O=new On(this,{callback:m,time:new cl(this.context,T).toTicks()});return this._addEvent(O,this._timeline)}scheduleRepeat(m,T,O,I=1/0){const B=new Em(this,{callback:m,duration:new Us(this.context,I).toTicks(),interval:new Us(this.context,T).toTicks(),time:new cl(this.context,O).toTicks()});return this._addEvent(B,this._repeatedEvents)}scheduleOnce(m,T){const O=new On(this,{callback:m,once:!0,time:new cl(this.context,T).toTicks()});return this._addEvent(O,this._timeline)}clear(m){if(this._scheduledEvents.hasOwnProperty(m)){const T=this._scheduledEvents[m.toString()];T.timeline.remove(T.event),T.event.dispose(),delete this._scheduledEvents[m.toString()]}return this}_addEvent(m,T){return this._scheduledEvents[m.id.toString()]={event:m,timeline:T},T.add(m),m.id}cancel(m=0){const T=this.toTicks(m);return this._timeline.forEachFrom(T,O=>this.clear(O.id)),this._repeatedEvents.forEachFrom(T,O=>this.clear(O.id)),this}_bindClockEvents(){this._clock.on("start",(m,T)=>{T=new yo(this.context,T).toSeconds(),this.emit("start",m,T)}),this._clock.on("stop",m=>{this.emit("stop",m)}),this._clock.on("pause",m=>{this.emit("pause",m)})}get state(){return this._clock.getStateAtTime(this.now())}start(m,T){this.context.resume();let O;return re(T)&&(O=this.toTicks(T)),this._clock.start(m,O),this}stop(m){return this._clock.stop(m),this}pause(m){return this._clock.pause(m),this}toggle(m){return m=this.toSeconds(m),this._clock.getStateAtTime(m)!=="started"?this.start(m):this.stop(m),this}get timeSignature(){return this._timeSignature}set timeSignature(m){Ws(m)&&(m=m[0]/m[1]*4),this._timeSignature=m}get loopStart(){return new Us(this.context,this._loopStart,"i").toSeconds()}set loopStart(m){this._loopStart=this.toTicks(m)}get loopEnd(){return new Us(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(m){this._loopEnd=this.toTicks(m)}get loop(){return this._loop.get(this.now())}set loop(m){this._loop.set(m,this.now())}setLoopPoints(m,T){return this.loopStart=m,this.loopEnd=T,this}get swing(){return this._swingAmount}set swing(m){this._swingAmount=m}get swingSubdivision(){return new yo(this.context,this._swingTicks).toNotation()}set swingSubdivision(m){this._swingTicks=this.toTicks(m)}get position(){const m=this.now(),T=this._clock.getTicksAtTime(m);return new yo(this.context,T).toBarsBeatsSixteenths()}set position(m){const T=this.toTicks(m);this.ticks=T}get seconds(){return this._clock.seconds}set seconds(m){const T=this.now(),O=this._clock.frequency.timeToTicks(m,T);this.ticks=O}get progress(){if(this.loop){const m=this.now();return(this._clock.getTicksAtTime(m)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(m){if(this._clock.ticks!==m){const T=this.now();if(this.state==="started"){const O=this._clock.getTicksAtTime(T),I=this._clock.frequency.getDurationOfTicks(Math.ceil(O)-O,T),B=T+I;this.emit("stop",B),this._clock.setTicksAtTime(m,B),this.emit("start",B,this._clock.getSecondsAtTime(B))}else this.emit("ticks",T),this._clock.setTicksAtTime(m,T)}}getTicksAtTime(m){return this._clock.getTicksAtTime(m)}getSecondsAtTime(m){return this._clock.getSecondsAtTime(m)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(m){this._clock.frequency.multiplier=m}nextSubdivision(m){if(m=this.toTicks(m),this.state!=="started")return 0;{const T=this.now(),O=this.getTicksAtTime(T),I=m-O%m;return this._clock.nextTickTime(I,T)}}syncSignal(m,T){const O=this.now();let I=this.bpm,B=1/(60/I.getValueAtTime(O)/this.PPQ),y=[];if(m.units==="time"){const i=.015625/B,u=new ki(i),x=new Om(-1),c=new ki(i);I.chain(u,x,c),I=c,B=1/B,y=[u,x,c]}T||(m.getValueAtTime(O)!==0?T=m.getValueAtTime(O)/B:T=0);const P=new ki(T);return I.connect(P),P.connect(m._param),y.push(P),this._syncedSignals.push({initial:m.value,nodes:y,signal:m}),m.value=0,this}unsyncSignal(m){for(let T=this._syncedSignals.length-1;T>=0;T--){const O=this._syncedSignals[T];O.signal===m&&(O.nodes.forEach(I=>I.dispose()),O.signal.value=O.initial,this._syncedSignals.splice(T,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),RP(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Pl.mixin(Fd);Rd(W=>{W.transport=new Fd({context:W})});Dd(W=>{W.transport.dispose()});class as extends ie{constructor(m){super(m),this.input=void 0,this._state=new wm("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ge,this._syncedStop=ge,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new No({context:this.context,mute:m.mute,volume:m.volume}),this.volume=this._volume.volume,Ue(this,"volume"),this.onstop=m.onstop}static getDefaults(){return Object.assign(ie.getDefaults(),{mute:!1,onstop:ge,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(m){this._volume.mute=m}_clampToCurrentTime(m){return this._synced?m:Math.max(m,this.context.currentTime)}start(m,T,O){let I=Cs(m)&&this._synced?this.context.transport.seconds:this.toSeconds(m);if(I=this._clampToCurrentTime(I),!this._synced&&this._state.getValueAtTime(I)==="started")ee(Po(I,this._state.get(I).time),"Start time must be strictly greater than previous start time"),this._state.cancel(I),this._state.setStateAtTime("started",I),this.log("restart",I),this.restart(I,T,O);else if(this.log("start",I),this._state.setStateAtTime("started",I),this._synced){const B=this._state.get(I);B&&(B.offset=this.toSeconds(So(T,0)),B.duration=O?this.toSeconds(O):void 0);const y=this.context.transport.schedule(P=>{this._start(P,T,O)},I);this._scheduled.push(y),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>I&&this._syncedStart(this.now(),this.context.transport.seconds)}else MP(this.context),this._start(I,T,O);return this}stop(m){let T=Cs(m)&&this._synced?this.context.transport.seconds:this.toSeconds(m);if(T=this._clampToCurrentTime(T),this._state.getValueAtTime(T)==="started"||re(this._state.getNextState("started",T))){if(this.log("stop",T),!this._synced)this._stop(T);else{const O=this.context.transport.schedule(this._stop.bind(this),T);this._scheduled.push(O)}this._state.cancel(T),this._state.setStateAtTime("stopped",T)}return this}restart(m,T,O){return m=this.toSeconds(m),this._state.getValueAtTime(m)==="started"&&(this._state.cancel(m),this._restart(m,T,O)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(m,T)=>{if(Po(T,0)){const O=this._state.get(T);if(O&&O.state==="started"&&O.time!==T){const I=T-this.toSeconds(O.time);let B;O.duration&&(B=this.toSeconds(O.duration)-I),this._start(m,this.toSeconds(O.offset)+I,B)}}},this._syncedStop=m=>{const T=this.context.transport.getSecondsAtTime(Math.max(m-this.sampleTime,0));this._state.getValueAtTime(T)==="started"&&this._stop(m)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(m=>this.context.transport.clear(m)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ge,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Bd extends Mo{constructor(){const m=te(Bd.getDefaults(),arguments,["url","onload"]);super(m),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Bo(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Le({context:this.context,param:this._source.playbackRate,units:"positive",value:m.playbackRate}),this.loop=m.loop,this.loopStart=m.loopStart,this.loopEnd=m.loopEnd,this._buffer=new Ee(m.url,m.onload,m.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Mo.getDefaults(),{url:new Ee,loop:!1,loopEnd:0,loopStart:0,onload:ge,onerror:ge,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(m){this._fadeIn=m}get fadeOut(){return this._fadeOut}set fadeOut(m){this._fadeOut=m}get curve(){return this._curve}set curve(m){this._curve=m}start(m,T,O,I=1){ee(this.buffer.loaded,"buffer is either not set or not loaded");const B=this.toSeconds(m);this._startGain(B,I),this.loop?T=So(T,this.loopStart):T=So(T,0);let y=Math.max(this.toSeconds(T),0);if(this.loop){const P=this.toSeconds(this.loopEnd)||this.buffer.duration,i=this.toSeconds(this.loopStart),u=P-i;Hv(y,P)&&(y=(y-i)%u+i),Gs(y,this.buffer.duration)&&(y=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Td(y,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(B,y)),re(O)){let P=this.toSeconds(O);P=Math.max(P,0),this.stop(B+P)}return this}_stopSource(m){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(m)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(m){this._source.loopStart=this.toSeconds(m)}get loopEnd(){return this._source.loopEnd}set loopEnd(m){this._source.loopEnd=this.toSeconds(m)}get buffer(){return this._buffer}set buffer(m){this._buffer.set(m)}get loop(){return this._source.loop}set loop(m){this._source.loop=m,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function wa(W,m){return ei(this,void 0,void 0,function*(){const T=m/W.context.sampleRate,O=new xm(1,T,W.context.sampleRate);return new W.constructor(Object.assign(W.get(),{frequency:2/T,detune:0,context:O})).toDestination().start(0),(yield O.render()).getChannelData(0)})}class Am extends Mo{constructor(){const m=te(Am.getDefaults(),arguments,["frequency","type"]);super(m),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Bo(this._oscillator,this._gainNode),this.type=m.type,this.frequency=new Le({context:this.context,param:this._oscillator.frequency,units:"frequency",value:m.frequency}),this.detune=new Le({context:this.context,param:this._oscillator.detune,units:"cents",value:m.detune}),Ue(this,["frequency","detune"])}static getDefaults(){return Object.assign(Mo.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(m){const T=this.toSeconds(m);return this.log("start",T),this._startGain(T),this._oscillator.start(T),this}_stopSource(m){this._oscillator.stop(m)}setPeriodicWave(m){return this._oscillator.setPeriodicWave(m),this}get type(){return this._oscillator.type}set type(m){this._oscillator.type=m}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class qe extends as{constructor(){const m=te(qe.getDefaults(),arguments,["frequency","type"]);super(m),this.name="Oscillator",this._oscillator=null,this.frequency=new pi({context:this.context,units:"frequency",value:m.frequency}),Ue(this,"frequency"),this.detune=new pi({context:this.context,units:"cents",value:m.detune}),Ue(this,"detune"),this._partials=m.partials,this._partialCount=m.partialCount,this._type=m.type,m.partialCount&&m.type!=="custom"&&(this._type=this.baseType+m.partialCount.toString()),this.phase=m.phase}static getDefaults(){return Object.assign(as.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(m){const T=this.toSeconds(m),O=new Am({context:this.context,onended:()=>this.onstop(this)});this._oscillator=O,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(T)}_stop(m){const T=this.toSeconds(m);this._oscillator&&this._oscillator.stop(T)}_restart(m){const T=this.toSeconds(m);return this.log("restart",T),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(T),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return qe._periodicWaveCache.find(m=>m.phase===this._phase&&lJ(m.partials,this._partials));{const m=qe._periodicWaveCache.find(T=>T.type===this._type&&T.phase===this._phase);return this._partialCount=m?m.partialCount:this._partialCount,m}}get type(){return this._type}set type(m){this._type=m;const T=["sine","square","sawtooth","triangle"].indexOf(m)!==-1;if(this._phase===0&&T)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=m);else{const O=this._getCachedPeriodicWave();if(re(O)){const{partials:I,wave:B}=O;this._wave=B,this._partials=I,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[I,B]=this._getRealImaginary(m,this._phase),y=this.context.createPeriodicWave(I,B);this._wave=y,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),qe._periodicWaveCache.push({imag:B,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:I,type:this._type,wave:this._wave}),qe._periodicWaveCache.length>100&&qe._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(m){this.partialCount&&this._type!=="custom"&&m!=="custom"?this.type=m+this.partialCount:this.type=m}get partialCount(){return this._partialCount}set partialCount(m){kn(m,0);let T=this._type;const O=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(O&&(T=O[1]),this._type!=="custom")m===0?this.type=T:this.type=T+m.toString();else{const I=new Float32Array(m);this._partials.forEach((B,y)=>I[y]=B),this._partials=Array.from(I),this.type=this._type}}_getRealImaginary(m,T){let O=2048;const I=new Float32Array(O),B=new Float32Array(O);let y=1;if(m==="custom"){if(y=this._partials.length+1,this._partialCount=this._partials.length,O=y,this._partials.length===0)return[I,B]}else{const P=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(m);P?(y=parseInt(P[2],10)+1,this._partialCount=parseInt(P[2],10),m=P[1],y=Math.max(y,2),O=y):this._partialCount=0,this._partials=[]}for(let P=1;P<O;++P){const i=2/(P*Math.PI);let u;switch(m){case"sine":u=P<=y?1:0,this._partials[P-1]=u;break;case"square":u=P&1?2*i:0,this._partials[P-1]=u;break;case"sawtooth":u=i*(P&1?1:-1),this._partials[P-1]=u;break;case"triangle":P&1?u=2*(i*i)*(P-1>>1&1?-1:1):u=0,this._partials[P-1]=u;break;case"custom":u=this._partials[P-1];break;default:throw new TypeError("Oscillator: invalid type: "+m)}u!==0?(I[P]=-u*Math.sin(T*P),B[P]=u*Math.cos(T*P)):(I[P]=0,B[P]=0)}return[I,B]}_inverseFFT(m,T,O){let I=0;const B=m.length;for(let y=0;y<B;y++)I+=m[y]*Math.cos(y*O)+T[y]*Math.sin(y*O);return I}getInitialValue(){const[m,T]=this._getRealImaginary(this._type,0);let O=0;const I=Math.PI*2,B=32;for(let y=0;y<B;y++)O=Math.max(this._inverseFFT(m,T,y/B*I),O);return cJ(-this._inverseFFT(m,T,this._phase)/O,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(m){this._partials=m,this._partialCount=this._partials.length,m.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(m){this._phase=m*Math.PI/180,this.type=this._type}asArray(){return ei(this,arguments,void 0,function*(m=1024){return wa(this,m)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}qe._periodicWaveCache=[];class _J extends _o{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new _l({context:this.context,mapping:m=>(m+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ko extends pi{constructor(){const m=te(ko.getDefaults(),arguments,["value"]);super(m),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new ki({context:this.context,minValue:m.minValue,maxValue:m.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(m.value,0)}static getDefaults(){return Object.assign(pi.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Nd extends as{constructor(){const m=te(Nd.getDefaults(),arguments,["frequency","type","modulationType"]);super(m),this.name="AMOscillator",this._modulationScale=new _J({context:this.context}),this._modulationNode=new ki({context:this.context}),this._carrier=new qe({context:this.context,detune:m.detune,frequency:m.frequency,onstop:()=>this.onstop(this),phase:m.phase,type:m.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new qe({context:this.context,phase:m.phase,type:m.modulationType}),this.harmonicity=new ko({context:this.context,units:"positive",value:m.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ue(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(qe.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(m){this._modulator.start(m),this._carrier.start(m)}_stop(m){this._modulator.stop(m),this._carrier.stop(m)}_restart(m){this._modulator.restart(m),this._carrier.restart(m)}get type(){return this._carrier.type}set type(m){this._carrier.type=m}get baseType(){return this._carrier.baseType}set baseType(m){this._carrier.baseType=m}get partialCount(){return this._carrier.partialCount}set partialCount(m){this._carrier.partialCount=m}get modulationType(){return this._modulator.type}set modulationType(m){this._modulator.type=m}get phase(){return this._carrier.phase}set phase(m){this._carrier.phase=m,this._modulator.phase=m}get partials(){return this._carrier.partials}set partials(m){this._carrier.partials=m}asArray(){return ei(this,arguments,void 0,function*(m=1024){return wa(this,m)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Yd extends as{constructor(){const m=te(Yd.getDefaults(),arguments,["frequency","type","modulationType"]);super(m),this.name="FMOscillator",this._modulationNode=new ki({context:this.context,gain:0}),this._carrier=new qe({context:this.context,detune:m.detune,frequency:0,onstop:()=>this.onstop(this),phase:m.phase,type:m.type}),this.detune=this._carrier.detune,this.frequency=new pi({context:this.context,units:"frequency",value:m.frequency}),this._modulator=new qe({context:this.context,phase:m.phase,type:m.modulationType}),this.harmonicity=new ko({context:this.context,units:"positive",value:m.harmonicity}),this.modulationIndex=new ko({context:this.context,units:"positive",value:m.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ue(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(qe.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(m){this._modulator.start(m),this._carrier.start(m)}_stop(m){this._modulator.stop(m),this._carrier.stop(m)}_restart(m){return this._modulator.restart(m),this._carrier.restart(m),this}get type(){return this._carrier.type}set type(m){this._carrier.type=m}get baseType(){return this._carrier.baseType}set baseType(m){this._carrier.baseType=m}get partialCount(){return this._carrier.partialCount}set partialCount(m){this._carrier.partialCount=m}get modulationType(){return this._modulator.type}set modulationType(m){this._modulator.type=m}get phase(){return this._carrier.phase}set phase(m){this._carrier.phase=m,this._modulator.phase=m}get partials(){return this._carrier.partials}set partials(m){this._carrier.partials=m}asArray(){return ei(this,arguments,void 0,function*(m=1024){return wa(this,m)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class kl extends as{constructor(){const m=te(kl.getDefaults(),arguments,["frequency","width"]);super(m),this.name="PulseOscillator",this._widthGate=new ki({context:this.context,gain:0}),this._thresh=new _l({context:this.context,mapping:T=>T<=0?-1:1}),this.width=new pi({context:this.context,units:"audioRange",value:m.width}),this._triangle=new qe({context:this.context,detune:m.detune,frequency:m.frequency,onstop:()=>this.onstop(this),phase:m.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ue(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(as.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(m){m=this.toSeconds(m),this._triangle.start(m),this._widthGate.gain.setValueAtTime(1,m)}_stop(m){m=this.toSeconds(m),this._triangle.stop(m),this._widthGate.gain.cancelScheduledValues(m),this._widthGate.gain.setValueAtTime(0,m)}_restart(m){this._triangle.restart(m),this._widthGate.gain.cancelScheduledValues(m),this._widthGate.gain.setValueAtTime(1,m)}get phase(){return this._triangle.phase}set phase(m){this._triangle.phase=m}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(m){this._triangle.type=m}asArray(){return ei(this,arguments,void 0,function*(m=1024){return wa(this,m)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Vd extends as{constructor(){const m=te(Vd.getDefaults(),arguments,["frequency","type","spread"]);super(m),this.name="FatOscillator",this._oscillators=[],this.frequency=new pi({context:this.context,units:"frequency",value:m.frequency}),this.detune=new pi({context:this.context,units:"cents",value:m.detune}),this._spread=m.spread,this._type=m.type,this._phase=m.phase,this._partials=m.partials,this._partialCount=m.partialCount,this.count=m.count,Ue(this,["frequency","detune"])}static getDefaults(){return Object.assign(qe.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(m){m=this.toSeconds(m),this._forEach(T=>T.start(m))}_stop(m){m=this.toSeconds(m),this._forEach(T=>T.stop(m))}_restart(m){this._forEach(T=>T.restart(m))}_forEach(m){for(let T=0;T<this._oscillators.length;T++)m(this._oscillators[T],T)}get type(){return this._type}set type(m){this._type=m,this._forEach(T=>T.type=m)}get spread(){return this._spread}set spread(m){if(this._spread=m,this._oscillators.length>1){const T=-m/2,O=m/(this._oscillators.length-1);this._forEach((I,B)=>I.detune.value=T+O*B)}}get count(){return this._oscillators.length}set count(m){if(kn(m,1),this._oscillators.length!==m){this._forEach(T=>T.dispose()),this._oscillators=[];for(let T=0;T<m;T++){const O=new qe({context:this.context,volume:-6-m*1.1,type:this._type,phase:this._phase+T/m*360,partialCount:this._partialCount,onstop:T===0?()=>this.onstop(this):ge});this.type==="custom"&&(O.partials=this._partials),this.frequency.connect(O.frequency),this.detune.connect(O.detune),O.detune.overridden=!1,O.connect(this.output),this._oscillators[T]=O}this.spread=this._spread,this.state==="started"&&this._forEach(T=>T.start())}}get phase(){return this._phase}set phase(m){this._phase=m,this._forEach((T,O)=>T.phase=this._phase+O/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(m){this._forEach(T=>T.baseType=m),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(m){this._partials=m,this._partialCount=this._partials.length,m.length&&(this._type="custom",this._forEach(T=>T.partials=m))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(m){this._partialCount=m,this._forEach(T=>T.partialCount=m),this._type=this._oscillators[0].type}asArray(){return ei(this,arguments,void 0,function*(m=1024){return wa(this,m)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(m=>m.dispose()),this}}class zd extends as{constructor(){const m=te(zd.getDefaults(),arguments,["frequency","modulationFrequency"]);super(m),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ko({context:this.context,value:2}),this._pulse=new kl({context:this.context,frequency:m.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new qe({context:this.context,detune:m.detune,frequency:m.frequency,onstop:()=>this.onstop(this),phase:m.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ue(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(as.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(m){m=this.toSeconds(m),this._modulator.start(m),this._pulse.start(m)}_stop(m){m=this.toSeconds(m),this._modulator.stop(m),this._pulse.stop(m)}_restart(m){this._modulator.restart(m),this._pulse.restart(m)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(m){this._modulator.phase=m}asArray(){return ei(this,arguments,void 0,function*(m=1024){return wa(this,m)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const _C={am:Nd,fat:Vd,fm:Yd,oscillator:qe,pulse:kl,pwm:zd};class Cd extends as{constructor(){const m=te(Cd.getDefaults(),arguments,["frequency","type"]);super(m),this.name="OmniOscillator",this.frequency=new pi({context:this.context,units:"frequency",value:m.frequency}),this.detune=new pi({context:this.context,units:"cents",value:m.detune}),Ue(this,["frequency","detune"]),this.set(m)}static getDefaults(){return Object.assign(qe.getDefaults(),Yd.getDefaults(),Nd.getDefaults(),Vd.getDefaults(),kl.getDefaults(),zd.getDefaults())}_start(m){this._oscillator.start(m)}_stop(m){this._oscillator.stop(m)}_restart(m){return this._oscillator.restart(m),this}get type(){let m="";return["am","fm","fat"].some(T=>this._sourceType===T)&&(m=this._sourceType),m+this._oscillator.type}set type(m){m.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=m.substr(2)):m.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=m.substr(2)):m.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=m.substr(3)):m==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):m==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=m)}get partials(){return this._oscillator.partials}set partials(m){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=m)}get partialCount(){return this._oscillator.partialCount}set partialCount(m){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=m)}set(m){return Reflect.has(m,"type")&&m.type&&(this.type=m.type),super.set(m),this}_createNewOscillator(m){if(m!==this._sourceType){this._sourceType=m;const T=_C[m],O=this.now();if(this._oscillator){const I=this._oscillator;I.stop(O),this.context.setTimeout(()=>I.dispose(),this.blockTime)}this._oscillator=new T({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(O)}}get phase(){return this._oscillator.phase}set phase(m){this._oscillator.phase=m}get sourceType(){return this._sourceType}set sourceType(m){let T="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(T=this._oscillator.type),m==="fm"?this.type="fm"+T:m==="am"?this.type="am"+T:m==="fat"?this.type="fat"+T:m==="oscillator"?this.type=T:m==="pulse"?this.type="pulse":m==="pwm"&&(this.type="pwm")}_getOscType(m,T){return m instanceof _C[T]}get baseType(){return this._oscillator.baseType}set baseType(m){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&m!=="pulse"&&m!=="pwm"&&(this._oscillator.baseType=m)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(m){this._getOscType(this._oscillator,"fat")&&ma(m)&&(this._oscillator.count=m)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(m){this._getOscType(this._oscillator,"fat")&&ma(m)&&(this._oscillator.spread=m)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(m){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Ur(m)&&(this._oscillator.modulationType=m)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return ei(this,arguments,void 0,function*(m=1024){return wa(this,m)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function FP(W,m=1/0){const T=new WeakMap;return function(O,I){Reflect.defineProperty(O,I,{configurable:!0,enumerable:!0,get:function(){return T.get(this)},set:function(B){kn(B,W,m),T.set(this,B)}})}}function jr(W,m=1/0){const T=new WeakMap;return function(O,I){Reflect.defineProperty(O,I,{configurable:!0,enumerable:!0,get:function(){return T.get(this)},set:function(B){kn(this.toSeconds(B),W,m),T.set(this,B)}})}}class Ol extends as{constructor(){const m=te(Ol.getDefaults(),arguments,["url","onload"]);super(m),this.name="Player",this._activeSources=new Set,this._buffer=new Ee({onload:this._onload.bind(this,m.onload),onerror:m.onerror,reverse:m.reverse,url:m.url}),this.autostart=m.autostart,this._loop=m.loop,this._loopStart=m.loopStart,this._loopEnd=m.loopEnd,this._playbackRate=m.playbackRate,this.fadeIn=m.fadeIn,this.fadeOut=m.fadeOut}static getDefaults(){return Object.assign(as.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ge,onerror:ge,playbackRate:1,reverse:!1})}load(m){return ei(this,void 0,void 0,function*(){return yield this._buffer.load(m),this._onload(),this})}_onload(m=ge){m(),this.autostart&&this.start()}_onSourceEnd(m){this.onstop(this),this._activeSources.delete(m),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(m,T,O){return super.start(m,T,O),this}_start(m,T,O){this._loop?T=So(T,this._loopStart):T=So(T,0);const I=this.toSeconds(T),B=O;O=So(O,Math.max(this._buffer.duration-I,0));let y=this.toSeconds(O);y=y/this._playbackRate,m=this.toSeconds(m);const P=new Bd({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(m+y),this._state.setStateAtTime("stopped",m+y,{implicitEnd:!0})),this._activeSources.add(P),this._loop&&Cs(B)?P.start(m,I):P.start(m,I,y-this.toSeconds(this.fadeOut))}_stop(m){const T=this.toSeconds(m);this._activeSources.forEach(O=>O.stop(T))}restart(m,T,O){return super.restart(m,T,O),this}_restart(m,T,O){var I;(I=[...this._activeSources].pop())===null||I===void 0||I.stop(m),this._start(m,T,O)}seek(m,T){const O=this.toSeconds(T);if(this._state.getValueAtTime(O)==="started"){const I=this.toSeconds(m);this._stop(O),this._start(O,I)}return this}setLoopPoints(m,T){return this.loopStart=m,this.loopEnd=T,this}get loopStart(){return this._loopStart}set loopStart(m){this._loopStart=m,this.buffer.loaded&&kn(this.toSeconds(m),0,this.buffer.duration),this._activeSources.forEach(T=>{T.loopStart=m})}get loopEnd(){return this._loopEnd}set loopEnd(m){this._loopEnd=m,this.buffer.loaded&&kn(this.toSeconds(m),0,this.buffer.duration),this._activeSources.forEach(T=>{T.loopEnd=m})}get buffer(){return this._buffer}set buffer(m){this._buffer.set(m)}get loop(){return this._loop}set loop(m){if(this._loop!==m&&(this._loop=m,this._activeSources.forEach(T=>{T.loop=m}),m)){const T=this._state.getNextState("stopped",this.now());T&&this._state.cancel(T.time)}}get playbackRate(){return this._playbackRate}set playbackRate(m){this._playbackRate=m;const T=this.now(),O=this._state.getNextState("stopped",T);O&&O.implicitEnd&&(this._state.cancel(O.time),this._activeSources.forEach(I=>I.cancelStop())),this._activeSources.forEach(I=>{I.playbackRate.setValueAtTime(m,T)})}get reverse(){return this._buffer.reverse}set reverse(m){this._buffer.reverse=m}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(m=>m.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}$s([jr(0)],Ol.prototype,"fadeIn",void 0);$s([jr(0)],Ol.prototype,"fadeOut",void 0);class Rn extends ie{constructor(){const m=te(Rn.getDefaults(),arguments,["attack","decay","sustain","release"]);super(m),this.name="Envelope",this._sig=new pi({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=m.attack,this.decay=m.decay,this.sustain=m.sustain,this.release=m.release,this.attackCurve=m.attackCurve,this.releaseCurve=m.releaseCurve,this.decayCurve=m.decayCurve}static getDefaults(){return Object.assign(ie.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(m,T){if(Ur(m))return m;{let O;for(O in cd)if(cd[O][T]===m)return O;return m}}_setCurve(m,T,O){if(Ur(O)&&Reflect.has(cd,O)){const I=cd[O];ga(I)?m!=="_decayCurve"&&(this[m]=I[T]):this[m]=I}else if(Ws(O)&&m!=="_decayCurve")this[m]=O;else throw new Error("Envelope: invalid curve: "+O)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(m){this._setCurve("_attackCurve","In",m)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(m){this._setCurve("_releaseCurve","Out",m)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(m){this._setCurve("_decayCurve","Out",m)}triggerAttack(m,T=1){this.log("triggerAttack",m,T),m=this.toSeconds(m);let O=this.toSeconds(this.attack);const I=this.toSeconds(this.decay),B=this.getValueAtTime(m);if(B>0){const y=1/O;O=(1-B)/y}if(O<this.sampleTime)this._sig.cancelScheduledValues(m),this._sig.setValueAtTime(T,m);else if(this._attackCurve==="linear")this._sig.linearRampTo(T,O,m);else if(this._attackCurve==="exponential")this._sig.targetRampTo(T,O,m);else{this._sig.cancelAndHoldAtTime(m);let y=this._attackCurve;for(let P=1;P<y.length;P++)if(y[P-1]<=B&&B<=y[P]){y=this._attackCurve.slice(P),y[0]=B;break}this._sig.setValueCurveAtTime(y,m,O,T)}if(I&&this.sustain<1){const y=T*this.sustain,P=m+O;this.log("decay",P),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(y,I+P):this._sig.exponentialApproachValueAtTime(y,P,I)}return this}triggerRelease(m){this.log("triggerRelease",m),m=this.toSeconds(m);const T=this.getValueAtTime(m);if(T>0){const O=this.toSeconds(this.release);O<this.sampleTime?this._sig.setValueAtTime(0,m):this._releaseCurve==="linear"?this._sig.linearRampTo(0,O,m):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,O,m):(ee(Ws(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(m),this._sig.setValueCurveAtTime(this._releaseCurve,m,O,T))}return this}getValueAtTime(m){return this._sig.getValueAtTime(m)}triggerAttackRelease(m,T,O=1){return T=this.toSeconds(T),this.triggerAttack(T,O),this.triggerRelease(T+this.toSeconds(m)),this}cancel(m){return this._sig.cancelScheduledValues(this.toSeconds(m)),this}connect(m,T=0,O=0){return Tm(this,m,T,O),this}asArray(){return ei(this,arguments,void 0,function*(m=1024){const T=m/this.context.sampleRate,O=new xm(1,T,this.context.sampleRate),I=this.toSeconds(this.attack)+this.toSeconds(this.decay),B=I+this.toSeconds(this.release),y=B*.1,P=B+y,i=new this.constructor(Object.assign(this.get(),{attack:T*this.toSeconds(this.attack)/P,decay:T*this.toSeconds(this.decay)/P,release:T*this.toSeconds(this.release)/P,context:O}));return i._sig.toDestination(),i.triggerAttackRelease(T*(I+y)/P,0),(yield O.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}$s([jr(0)],Rn.prototype,"attack",void 0);$s([jr(0)],Rn.prototype,"decay",void 0);$s([FP(0,1)],Rn.prototype,"sustain",void 0);$s([jr(0)],Rn.prototype,"release",void 0);const cd=(()=>{let W,m;const T=[];for(W=0;W<128;W++)T[W]=Math.sin(W/127*(Math.PI/2));const O=[],I=6.4;for(W=0;W<127;W++){m=W/127;const c=Math.sin(m*(Math.PI*2)*I-Math.PI/2)+1;O[W]=c/10+m*.83}O[127]=1;const B=[],y=5;for(W=0;W<128;W++)B[W]=Math.ceil(W/127*y)/y;const P=[];for(W=0;W<128;W++)m=W/127,P[W]=.5*(1-Math.cos(Math.PI*m));const i=[];for(W=0;W<128;W++){m=W/127;const c=Math.pow(m,3)*4+.2,h=Math.cos(c*Math.PI*2*m);i[W]=Math.abs(h*(1-m))}function u(c){const h=new Array(c.length);for(let o=0;o<c.length;o++)h[o]=1-c[o];return h}function x(c){return c.slice(0).reverse()}return{bounce:{In:u(i),Out:i},cosine:{In:T,Out:x(T)},exponential:"exponential",linear:"linear",ripple:{In:O,Out:u(O)},sine:{In:P,Out:u(P)},step:{In:B,Out:u(B)}}})();class Oo extends ie{constructor(){const m=te(Oo.getDefaults(),arguments);super(m),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=T=>this._original_triggerRelease(T),this._volume=this.output=new No({context:this.context,volume:m.volume}),this.volume=this._volume.volume,Ue(this,"volume")}static getDefaults(){return Object.assign(ie.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let m=!1;return this._synced||(this._synced=!0,m=!0),m}_syncMethod(m,T){const O=this["_original_"+m]=this[m];this[m]=(...I)=>{const B=I[T],y=this.context.transport.schedule(P=>{I[T]=P,O.apply(this,I)},B);this._scheduledEvents.push(y)}}unsync(){return this._scheduledEvents.forEach(m=>this.context.transport.clear(m)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(m,T,O,I){const B=this.toSeconds(O),y=this.toSeconds(T);return this.triggerAttack(m,B,I),this.triggerRelease(B+y),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Eo extends Oo{constructor(){const m=te(Eo.getDefaults(),arguments);super(m),this.portamento=m.portamento,this.onsilence=m.onsilence}static getDefaults(){return Object.assign(Oo.getDefaults(),{detune:0,onsilence:ge,portamento:0})}triggerAttack(m,T,O=1){this.log("triggerAttack",m,T,O);const I=this.toSeconds(T);return this._triggerEnvelopeAttack(I,O),this.setNote(m,I),this}triggerRelease(m){this.log("triggerRelease",m);const T=this.toSeconds(m);return this._triggerEnvelopeRelease(T),this}setNote(m,T){const O=this.toSeconds(T),I=m instanceof Ts?m.toFrequency():m;if(this.portamento>0&&this.getLevelAtTime(O)>.05){const B=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(I,B,O)}else this.frequency.setValueAtTime(I,O);return this}}$s([jr(0)],Eo.prototype,"portamento",void 0);class Rm extends Rn{constructor(){super(te(Rm.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ki({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Pd extends Eo{constructor(){const m=te(Pd.getDefaults(),arguments);super(m),this.name="Synth",this.oscillator=new Cd(Object.assign({context:this.context,detune:m.detune,onstop:()=>this.onsilence(this)},m.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Rm(Object.assign({context:this.context},m.envelope)),this.oscillator.chain(this.envelope,this.output),Ue(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Eo.getDefaults(),{envelope:Object.assign(PC(Rn.getDefaults(),Object.keys(ie.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(PC(Cd.getDefaults(),[...Object.keys(as.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(m,T){if(this.envelope.triggerAttack(m,T),this.oscillator.start(m),this.envelope.sustain===0){const O=this.toSeconds(this.envelope.attack),I=this.toSeconds(this.envelope.decay);this.oscillator.stop(m+O+I)}}_triggerEnvelopeRelease(m){this.envelope.triggerRelease(m),this.oscillator.stop(m+this.toSeconds(this.envelope.release))}getLevelAtTime(m){return m=this.toSeconds(m),this.envelope.getValueAtTime(m)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Ao extends Pd{constructor(){const m=te(Ao.getDefaults(),arguments);super(m),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=m.pitchDecay,this.octaves=m.octaves,Ue(this,["oscillator","envelope"])}static getDefaults(){return wo(Eo.getDefaults(),Pd.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(m,T){const O=this.toSeconds(T),I=this.toFrequency(m instanceof Ts?m.toFrequency():m),B=I*this.octaves;return this.oscillator.frequency.setValueAtTime(B,O),this.oscillator.frequency.exponentialRampToValueAtTime(I,O+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}$s([FP(0)],Ao.prototype,"octaves",void 0);$s([jr(0)],Ao.prototype,"pitchDecay",void 0);const BP=new Set;function Dm(W){BP.add(W)}function NP(W,m){const T=`registerProcessor("${W}", ${m})`;BP.add(T)}const kJ=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Dm(kJ);const OJ=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Dm(OJ);const EJ=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Dm(EJ);const AJ="feedback-comb-filter",RJ=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;NP(AJ,RJ);class Gd extends Oo{constructor(){const m=te(Gd.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(m),this.name="Sampler",this._activeSources=new Map;const T={};Object.keys(m.urls).forEach(O=>{const I=parseInt(O,10);if(ee(ud(O)||ma(I)&&isFinite(I),`url key is neither a note or midi pitch: ${O}`),ud(O)){const B=new Ts(this.context,O).toMidi();T[B]=m.urls[O]}else ma(I)&&isFinite(I)&&(T[I]=m.urls[I])}),this._buffers=new km({urls:T,onload:m.onload,baseUrl:m.baseUrl,onerror:m.onerror}),this.attack=m.attack,this.release=m.release,this.curve=m.curve,this._buffers.loaded&&Promise.resolve().then(m.onload)}static getDefaults(){return Object.assign(Oo.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ge,onerror:ge,release:.1,urls:{}})}_findClosest(m){let T=0;for(;T<96;){if(this._buffers.has(m+T))return-T;if(this._buffers.has(m-T))return T;T++}throw new Error(`No available buffers for note: ${m}`)}triggerAttack(m,T,O=1){return this.log("triggerAttack",m,T,O),Array.isArray(m)||(m=[m]),m.forEach(I=>{const B=LP(new Ts(this.context,I).toFrequency()),y=Math.round(B),P=B-y,i=this._findClosest(y),u=y-i,x=this._buffers.get(u),c=IP(i+P),h=new Bd({url:x,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:c}).connect(this.output);h.start(T,0,x.duration/c,O),Ws(this._activeSources.get(y))||this._activeSources.set(y,[]),this._activeSources.get(y).push(h),h.onended=()=>{if(this._activeSources&&this._activeSources.has(y)){const o=this._activeSources.get(y),r=o.indexOf(h);r!==-1&&o.splice(r,1)}}}),this}triggerRelease(m,T){return this.log("triggerRelease",m,T),Array.isArray(m)||(m=[m]),m.forEach(O=>{const I=new Ts(this.context,O).toMidi();if(this._activeSources.has(I)&&this._activeSources.get(I).length){const B=this._activeSources.get(I);T=this.toSeconds(T),B.forEach(y=>{y.stop(T)}),this._activeSources.set(I,[])}}),this}releaseAll(m){const T=this.toSeconds(m);return this._activeSources.forEach(O=>{for(;O.length;)O.shift().stop(T)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(m,T,O,I=1){const B=this.toSeconds(O);return this.triggerAttack(m,B,I),Ws(T)?(ee(Ws(m),"notes must be an array when duration is array"),m.forEach((y,P)=>{const i=T[Math.min(P,T.length-1)];this.triggerRelease(y,B+this.toSeconds(i))})):this.triggerRelease(m,B+this.toSeconds(T)),this}add(m,T,O){if(ee(ud(m)||isFinite(m),`note must be a pitch or midi: ${m}`),ud(m)){const I=new Ts(this.context,m).toMidi();this._buffers.add(I,T,O)}else this._buffers.add(m,T,O);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(m=>{m.forEach(T=>T.dispose())}),this._activeSources.clear(),this}}$s([jr(0)],Gd.prototype,"attack",void 0);$s([jr(0)],Gd.prototype,"release",void 0);class Im extends ie{constructor(){const m=te(Im.getDefaults(),arguments,["pan"]);super(m),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Le({context:this.context,param:this._panner.pan,value:m.pan,minValue:-1,maxValue:1}),this._panner.channelCount=m.channelCount,this._panner.channelCountMode="explicit",Ue(this,"pan")}static getDefaults(){return Object.assign(ie.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const DJ="bit-crusher",IJ=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;NP(DJ,IJ);class ti extends ie{constructor(){const m=te(ti.getDefaults(),arguments,["solo"]);super(m),this.name="Solo",this.input=this.output=new ki({context:this.context}),ti._allSolos.has(this.context)||ti._allSolos.set(this.context,new Set),ti._allSolos.get(this.context).add(this),this.solo=m.solo}static getDefaults(){return Object.assign(ie.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(m){m?this._addSolo():this._removeSolo(),ti._allSolos.get(this.context).forEach(T=>T._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){ti._soloed.has(this.context)||ti._soloed.set(this.context,new Set),ti._soloed.get(this.context).add(this)}_removeSolo(){ti._soloed.has(this.context)&&ti._soloed.get(this.context).delete(this)}_isSoloed(){return ti._soloed.has(this.context)&&ti._soloed.get(this.context).has(this)}_noSolos(){return!ti._soloed.has(this.context)||ti._soloed.has(this.context)&&ti._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),ti._allSolos.get(this.context).delete(this),this._removeSolo(),this}}ti._allSolos=new Map;ti._soloed=new Map;class Lm extends ie{constructor(){const m=te(Lm.getDefaults(),arguments,["pan","volume"]);super(m),this.name="PanVol",this._panner=this.input=new Im({context:this.context,pan:m.pan,channelCount:m.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new No({context:this.context,volume:m.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=m.mute,Ue(this,["pan","volume"])}static getDefaults(){return Object.assign(ie.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(m){this._volume.mute=m}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class xo extends ie{constructor(){const m=te(xo.getDefaults(),arguments,["volume","pan"]);super(m),this.name="Channel",this._solo=this.input=new ti({solo:m.solo,context:this.context}),this._panVol=this.output=new Lm({context:this.context,pan:m.pan,volume:m.volume,mute:m.mute,channelCount:m.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ue(this,["pan","volume"])}static getDefaults(){return Object.assign(ie.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(m){this._solo.solo=m}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(m){this._panVol.mute=m}_getBus(m){return xo.buses.has(m)||xo.buses.set(m,new ki({context:this.context})),xo.buses.get(m)}send(m,T=0){const O=this._getBus(m),I=new ki({context:this.context,units:"decibels",gain:T});return this.connect(I),I.connect(O),I}receive(m){return this._getBus(m).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}xo.buses=new Map;function pr(){return ns().now()}ns().transport;ns().destination;ns().destination;function ll(){return ns().destination}ns().listener;ns().draw;const _i=ns();class Mn{static instance=null;isInitialized=!1;initializationPromise=null;muted=!1;contextLost=!1;recoveryTimeout=5e3;stateChangeCallbacks=[];bpm=166;beatsPerMeasure=4;beatCount=0;measureCount=0;intervalId;nextBeatTime=0;_isMetronomeRunning=!1;audioSynth;audioDownbeatSynth;metronomeVolume=.1;lastSoundTime=0;metronomeEnabled=!0;appBpm=166;appBeatCount=0;appMeasureCount=0;appIntervalId;appNextBeatTime=0;_isAppMetronomeRunning=!1;stepCallbacks=[];halfStepCallbacks=[];musicPlayers=new Map;currentLoop="No Loop";availableLoops=["No Loop"];crossfadeDuration=1.33;allLoopsStarted=!1;musicVolume=.7;transitionSpeed=.3;transitionType="downbeat";pendingLoopSelection;loopsStartedOnDownbeat=!1;startedLoops=new Set;constructor(){}static getInstance(){return Mn.instance||(Mn.instance=new Mn),Mn.instance}async initializeAudioContext(){if(!this.isInitialized)return this.initializationPromise?this.initializationPromise:typeof document<"u"&&document.visibilityState==="hidden"?(this.initializationPromise=new Promise(m=>{const T=()=>{document.removeEventListener("visibilitychange",T),setTimeout(()=>{this.initializeAudioContext().then(()=>m())},0)};document.addEventListener("visibilitychange",T)}),this.initializationPromise):(this.initializationPromise=this._doInitialize(),this.initializationPromise)}async forceInitializeAudioContext(){try{if(_i.state==="running")return this.isInitialized=!0,this.contextLost=!1,this.setupAudioDefaults(),this.setupContextMonitoring(),this.notifyStateChange(),!0;typeof document<"u"&&document.visibilityState==="hidden"&&await new Promise(m=>{const T=()=>{document.removeEventListener("visibilitychange",T),m()};document.addEventListener("visibilitychange",T)});try{_i.state==="suspended"&&await _i.resume()}catch{}if(_i.state!=="running")try{const m=window.AudioContext||window.webkitAudioContext;if(m){const T=new m;$v?.(T)}}catch{}return await MC(),this.isInitialized=!0,this.contextLost=!1,this.setupAudioDefaults(),this.setupMetronome(),this.setupAppMetronome(),this.setupContextMonitoring(),this.notifyStateChange(),!0}catch(m){return console.error("🎵 AudioManager: Failed to force initialize audio context:",m),this.isInitialized=!1,this.contextLost=!0,!1}}async _doInitialize(){try{if(_i.state==="running"){this.isInitialized=!0,this.contextLost=!1,this.setupAudioDefaults(),this.setupContextMonitoring(),this.notifyStateChange();return}typeof document<"u"&&document.visibilityState==="hidden"&&await new Promise(O=>{const I=()=>{document.removeEventListener("visibilitychange",I),O()};document.addEventListener("visibilitychange",I)});try{_i.state==="suspended"&&await _i.resume()}catch{}if(_i.state!=="running")try{const O=window.AudioContext||window.webkitAudioContext;if(O){const I=new O;$v?.(I)}}catch{}const m=MC(),T=new Promise((O,I)=>{setTimeout(()=>I(new Error("Tone.start() timeout after 2 seconds")),2e3)});await Promise.race([m,T]),this.isInitialized=!0,this.contextLost=!1,this.setupAudioDefaults(),this.setupMetronome(),this.setupAppMetronome(),this.setupContextMonitoring(),this.notifyStateChange()}catch(m){console.error("🎵 AudioManager: Failed to initialize audio context:",m),this.isInitialized=!1,this.contextLost=!0,this.initializationPromise=null}}setupAudioDefaults(){ll().volume.value=-6,ll().mute=this.muted}setupContextMonitoring(){const m=_i;m.addEventListener&&m.addEventListener("statechange",()=>{_i.state==="suspended"||_i.state==="closed"?this.contextLost=!0:_i.state==="running"&&(this.contextLost=!1),this.notifyStateChange()})}onStateChange(m){this.stateChangeCallbacks.push(m)}offStateChange(m){const T=this.stateChangeCallbacks.indexOf(m);T>-1&&this.stateChangeCallbacks.splice(T,1)}notifyStateChange(){const m=this.getAudioState();this.stateChangeCallbacks.forEach(T=>{try{T(m)}catch(O){console.error("🎵 AudioManager: Error in state change callback:",O)}})}isAudioInitialized(){return this.isInitialized}getContext(){return this.isInitialized?_i:(console.warn("🎵 AudioManager: Audio context not initialized yet"),null)}getDestination(){return this.isInitialized?ll():(console.warn("🎵 AudioManager: Audio context not initialized yet"),null)}setMasterVolume(m){if(!this.isInitialized){console.warn("🎵 AudioManager: Audio context not initialized yet");return}ll().volume.value=m}setMute(m){if(!this.isInitialized){console.warn("🎵 AudioManager: Audio context not initialized yet");return}this.muted=m,ll().mute=m,this.notifyStateChange()}isMuted(){return this.muted}isContextLost(){return this.contextLost}async attemptRecovery(){if(!this.contextLost)return!0;try{return _i.state==="suspended"&&await _i.resume(),_i.state!=="running"&&(this.isInitialized=!1,this.initializationPromise=null,await this.initializeAudioContext()),this.notifyStateChange(),!0}catch(m){return console.error("🎵 AudioManager: Audio context recovery failed:",m),!1}}getAudioState(){return!this.isInitialized||this.contextLost?"off":this.muted?"muted":"on"}dispose(){this.isInitialized,this.isInitialized=!1,this.initializationPromise=null}async playTestSound(){if(!this.isInitialized){console.warn("🎵 AudioManager: Audio context not initialized yet");return}try{const m=new qe(440,"sine").toDestination();m.start(),m.stop("+0.1")}catch(m){console.error("🎵 AudioManager: Error playing test sound:",m)}}setupMetronome(){try{this.audioSynth=new Ao().toDestination(),this.audioDownbeatSynth=new Ao().toDestination(),this.audioSynth.volume.value=pa(this.metronomeVolume),this.audioDownbeatSynth.volume.value=pa(this.metronomeVolume)}catch(m){console.error("🎵 AudioManager: Failed to setup metronome:",m)}}startMetronome(){if(this._isMetronomeRunning||!this.metronomeEnabled)return;console.log("🎵 AudioManager: Starting game metronome at",this.bpm,"BPM");const m=this.getAppBeatInMeasure(),T=(4-m)%4,O=T*60/this.appBpm;console.log("🎵 AudioManager: Syncing game metronome - app beat in measure:",m,"beats until next:",T,"time until next:",O),this._isMetronomeRunning=!0,this.nextBeatTime=Date.now()+O*1e3,60/this.bpm*1e3,this.intervalId=window.setTimeout(()=>{this.playBeat(),this.scheduleNextBeat()},O*1e3)}stopMetronome(){this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=void 0),this._isMetronomeRunning=!1}pauseMetronome(){this.stopMetronome()}resumeMetronome(){if(this.metronomeEnabled&&!this._isMetronomeRunning){const m=(4-this.getAppBeatInMeasure())%4*60/this.appBpm;this._isMetronomeRunning=!0,this.nextBeatTime=Date.now()+m*1e3;const T=m*1e3;T>0?this.intervalId=window.setTimeout(()=>{this.playBeat(),this.scheduleNextBeat()},T):(this.playBeat(),this.scheduleNextBeat())}}scheduleNextBeat(){if(!this._isMetronomeRunning)return;const m=60/this.bpm*1e3;this.nextBeatTime+=m;const T=this.nextBeatTime-Date.now();T>0?this.intervalId=window.setTimeout(()=>{this.playBeat(),this.scheduleNextBeat()},T):(this.playBeat(),this.scheduleNextBeat())}playBeat(){const m=this.beatCount%this.beatsPerMeasure;if(this.metronomeEnabled&&!this.muted){const T=m===0;this.playBeatSound(T)}m===3&&this.measureCount++,this.beatCount++}playBeatSound(m){try{const T=pr();if(T-this.lastSoundTime<.05)return;this.lastSoundTime=T,m&&this.audioDownbeatSynth?this.audioDownbeatSynth.triggerAttackRelease("C4","8n",T):!m&&this.audioSynth&&this.audioSynth.triggerAttackRelease("C2","8n",T)}catch(T){console.warn("🎵 AudioManager: Failed to play beat sound:",T)}}setBpm(m){this.bpm=m,this.appBpm=m,this._isMetronomeRunning&&(this.stopMetronome(),this.startMetronome()),this._isAppMetronomeRunning&&(this.stopAppMetronome(),this.startAppMetronome()),this.scaleMusicPlayersToBpm(m)}setMetronomeVolume(m){this.metronomeVolume=m,this.audioSynth&&(this.audioSynth.volume.value=pa(m)),this.audioDownbeatSynth&&(this.audioDownbeatSynth.volume.value=pa(m))}setMetronomeEnabled(m){this.metronomeEnabled=m,m?this.isInitialized&&this.startMetronome():this.stopMetronome()}async loadMusicFiles(m){if(!this.isInitialized){console.warn("🎵 AudioManager: Audio context not initialized yet");return}this.availableLoops=["No Loop",...m];for(const T of m)try{const O=new Ol({url:`/assets/music/${T}.m4a`,loop:!0,volume:-1/0}).toDestination(),I=this.bpm/166,B=Math.max(.25,Math.min(4,I));O.playbackRate=B,this.musicPlayers.set(T,O)}catch(O){console.error(`🎵 AudioManager: Failed to load music file: ${T}`,O)}}setLoop(m){if(!this.isInitialized){this.pendingLoopSelection=m;return}if(!this.allLoopsStarted&&m!=="No Loop"){this.startAllLoopsImmediately(),this.currentLoop=m,this.performCrossfade(m);return}this.performCrossfade(m)}startAllLoopsImmediately(){if(this.allLoopsStarted)return;const m=(4-this.getBeatInMeasure())%4*60/this.bpm;this.musicPlayers.forEach((T,O)=>{this.startedLoops.has(O)||(T.start(pr()+m),this.startedLoops.add(O))}),this.allLoopsStarted=!0,this.loopsStartedOnDownbeat=!0}performCrossfade(m){const T=pa(this.musicVolume),O=this.currentLoop,I=O==="No Loop",B=m==="No Loop";this.transitionType==="downbeat"?this.performDownbeatTransition(m,T,I,B,O):this.performTimeBasedTransition(m,T,I,B,O),this.currentLoop=m}performTimeBasedTransition(m,T,O,I,B){const y=this.crossfadeDuration/this.transitionSpeed;this.musicPlayers.forEach((P,i)=>{i===m&&!I?(P.volume.setValueAtTime(P.volume.value,pr()),P.volume.linearRampToValueAtTime(T,pr()+y)):i===B&&!O&&i!==m?(P.volume.setValueAtTime(P.volume.value,pr()),P.volume.linearRampToValueAtTime(-1/0,pr()+y)):i!==m&&i!==B&&(P.volume.value=-1/0)})}performDownbeatTransition(m,T,O,I,B){const y=(4-this.getBeatInMeasure())%4*60/this.bpm;this.musicPlayers.forEach((P,i)=>{i===m&&!I?(P.volume.setValueAtTime(-1/0,pr()),P.volume.setValueAtTime(T,pr()+y)):i===B&&!O&&i!==m?(P.volume.setValueAtTime(P.volume.value,pr()),P.volume.setValueAtTime(-1/0,pr()+y)):i!==m&&i!==B&&(P.volume.value=-1/0)})}scaleMusicPlayersToBpm(m){const T=m/166,O=Math.max(.25,Math.min(4,T));this.musicPlayers.forEach((I,B)=>{try{I.playbackRate=O}catch(y){console.error(`🎵 AudioManager: Failed to scale ${B} playback rate:`,y)}})}setMusicVolume(m){if(this.musicVolume=m,this.currentLoop!=="No Loop"&&this.musicPlayers.has(this.currentLoop)){const T=this.musicPlayers.get(this.currentLoop);T.volume.value=pa(m)}}getBpm(){return this.bpm}getBeatCount(){return this.beatCount}getMeasureCount(){return this.measureCount}getBeatInMeasure(){return this.beatCount%this.beatsPerMeasure}getCurrentLoop(){return this.currentLoop}getAvailableLoops(){return this.availableLoops}isMetronomeRunning(){return this._isMetronomeRunning}getMetronomeVolume(){return this.metronomeVolume}getMusicVolume(){return this.musicVolume}setupAppMetronome(){}startAppMetronome(){if(this._isAppMetronomeRunning)return;console.log("🎵 AudioManager: Starting app metronome at",this.appBpm,"BPM"),this._isAppMetronomeRunning=!0,this.appNextBeatTime=Date.now();const m=60/this.appBpm*1e3;this.appIntervalId=window.setTimeout(()=>{this.playAppBeat(),this.scheduleNextAppBeat()},m)}stopAppMetronome(){this.appIntervalId&&(clearTimeout(this.appIntervalId),this.appIntervalId=void 0),this._isAppMetronomeRunning=!1}scheduleNextAppBeat(){if(!this._isAppMetronomeRunning)return;const m=60/this.appBpm*1e3;this.appNextBeatTime+=m;const T=this.appNextBeatTime-Date.now();T>0?this.appIntervalId=window.setTimeout(()=>{this.playAppBeat(),this.scheduleNextAppBeat()},T):(this.playAppBeat(),this.scheduleNextAppBeat())}playAppBeat(){const m=this.appBeatCount%this.beatsPerMeasure;m===3&&this.appMeasureCount++,this.appBeatCount++,console.log("🎵 AudioManager: App beat",this.appBeatCount,"measure",this.appMeasureCount,"beat in measure",m),this.stepCallbacks.forEach(O=>{try{O(this.appBeatCount)}catch(I){console.error("🎵 AudioManager: Error in step callback:",I)}});const T=this.appBeatCount*2;this.halfStepCallbacks.forEach(O=>{try{O(T)}catch(I){console.error("🎵 AudioManager: Error in half-step callback:",I)}})}setAppBpm(m){this.appBpm=m,this._isAppMetronomeRunning&&(this.stopAppMetronome(),this.startAppMetronome())}onStep(m){this.stepCallbacks.push(m)}offStep(m){const T=this.stepCallbacks.indexOf(m);T>-1&&this.stepCallbacks.splice(T,1)}onHalfStep(m){this.halfStepCallbacks.push(m)}offHalfStep(m){const T=this.halfStepCallbacks.indexOf(m);T>-1&&this.halfStepCallbacks.splice(T,1)}getAppBpm(){return this.appBpm}getAppBeatCount(){return this.appBeatCount}getAppMeasureCount(){return this.appMeasureCount}getAppBeatInMeasure(){return this.appBeatCount%this.beatsPerMeasure}isAppMetronomeRunning(){return this._isAppMetronomeRunning}}class LJ extends lt.Scene{step=0;halfStep=0;uiHalfStep=0;stepText;gameStarted=!1;isPaused=!1;focusOverlay;focusPausedWithoutMenu=!1;pauseButton;saveButton;muteButton;pauseButtonWhite;pauseButtonBG;saveButtonWhite;saveButtonBG;audioManager;audioInitialized=!1;muteButtonIcon;muteButtonWhite;muteButtonBG;pauseButtonIcon;saveButtonIcon;constructor(){super({key:"AppScene"}),this.audioManager=Mn.getInstance(),this.audioManager.onStateChange(m=>{this.updateMuteButtonIcon()})}create(){this.setupOverlayCamera(),this.scene.launch("BackgroundScene"),this.scene.launch("GameScene"),this.scene.launch("MenuScene"),this.scene.bringToTop("MenuScene"),this.time.delayedCall(50,()=>{this.scene.bringToTop("MenuScene"),this.scene.bringToTop("GameScene"),this.scene.bringToTop("AppScene")}),this.time.delayedCall(100,()=>{const m=this.scene.get("MenuScene");m&&(m.events.emit("showStartMenu"),this.scene.bringToTop("MenuScene"))}),this.time.delayedCall(200,()=>{const m=this.scene.get("MenuScene");m&&m.menuManager&&m.menuManager.currentDialog||this.scene.bringToTop("AppScene"),this.scene.bringToTop("MenuScene")}),this.input.keyboard?.on("keydown",m=>{switch(console.log("AppScene: Key pressed:",m.code),this.initializeAudioOnUserInteraction(),m.code){case"KeyS":this.scene.launch("StoryScene"),this.scene.bringToTop("StoryScene");break}}),this.setupGlobalInteractionListeners(),this.time.addEvent({delay:2e3,loop:!0,callback:()=>{this.monitorAudioState()}}),this.time.delayedCall(200,()=>{this.createAppButtons()});try{const m=this.scene.get("GameScene");m&&m.events.on("tutorialOverlayVisible",O=>{m.gameState?.getState?.()?.tutorialPhase==="normal"?this.showAppButtons():(this.pauseButtonWhite&&this.pauseButtonWhite.setVisible(!1),this.pauseButtonBG&&this.pauseButtonBG.setVisible(!1),this.pauseButtonIcon&&this.pauseButtonIcon.setVisible(!1),this.saveButtonWhite&&this.saveButtonWhite.setVisible(!1),this.saveButtonBG&&this.saveButtonBG.setVisible(!1),this.saveButtonIcon&&this.saveButtonIcon.setVisible(!1),this.muteButtonWhite&&this.muteButtonWhite.setVisible(!1),this.muteButtonBG&&this.muteButtonBG.setVisible(!1),this.muteButtonIcon&&this.muteButtonIcon.setVisible(!1))});const T=this.scene.get("MenuScene");T&&(T.events.on("menuOpened",()=>{this.pauseButtonIcon&&(this.pauseButtonIcon.disableInteractive(),this.pauseButtonIcon.setVisible(!1)),this.pauseButtonWhite&&this.pauseButtonWhite.setVisible(!1),this.pauseButtonBG&&this.pauseButtonBG.setVisible(!1),this.saveButtonIcon&&(this.saveButtonIcon.disableInteractive(),this.saveButtonIcon.setVisible(!1)),this.saveButtonWhite&&this.saveButtonWhite.setVisible(!1),this.saveButtonBG&&this.saveButtonBG.setVisible(!1),this.muteButtonIcon&&(this.muteButtonIcon.disableInteractive(),this.muteButtonIcon.setVisible(!1)),this.muteButtonWhite&&this.muteButtonWhite.setVisible(!1),this.muteButtonBG&&this.muteButtonBG.setVisible(!1),this.scene.bringToTop("MenuScene")}),T.events.on("menuClosed",()=>{this.pauseButtonIcon&&(this.pauseButtonIcon.setInteractive(),this.pauseButtonIcon.setVisible(!0)),this.pauseButtonWhite&&this.pauseButtonWhite.setVisible(!0),this.pauseButtonBG&&this.pauseButtonBG.setVisible(!0),this.saveButtonIcon&&(this.saveButtonIcon.setInteractive(),this.saveButtonIcon.setVisible(!0)),this.saveButtonWhite&&this.saveButtonWhite.setVisible(!0),this.saveButtonBG&&this.saveButtonBG.setVisible(!0),this.muteButtonIcon&&(this.muteButtonIcon.setInteractive(),this.muteButtonIcon.setVisible(!0)),this.muteButtonWhite&&this.muteButtonWhite.setVisible(!0),this.muteButtonBG&&this.muteButtonBG.setVisible(!0)})),this.time.addEvent({delay:300,loop:!0,callback:()=>{const O=this.scene.get("MenuScene"),I=O?O.menuManager:null;I&&I.currentDialog?this.pauseButtonIcon&&(!this.pauseButtonIcon.input||this.pauseButtonIcon.input&&this.pauseButtonIcon.input.enabled)&&(this.pauseButtonIcon&&this.pauseButtonIcon.disableInteractive(),this.saveButtonIcon&&this.saveButtonIcon.disableInteractive(),this.muteButton&&this.muteButton.disableInteractive(),this.pauseButtonIcon&&this.pauseButtonIcon.setVisible(!1),this.saveButtonIcon&&this.saveButtonIcon.setVisible(!1),this.scene.bringToTop("MenuScene")):this.pauseButtonIcon&&(!this.pauseButtonIcon.input||!this.pauseButtonIcon.input.enabled)&&(this.pauseButtonIcon&&this.pauseButtonIcon.setInteractive(),this.saveButtonIcon&&this.saveButtonIcon.setInteractive(),this.muteButton&&this.muteButton.setInteractive(),this.pauseButtonIcon&&this.pauseButtonIcon.setAlpha(1),this.saveButtonIcon&&this.saveButtonIcon.setAlpha(1),this.muteButton&&this.muteButton.setAlpha(1),this.pauseButtonIcon&&this.pauseButtonIcon.setVisible(!0),this.saveButtonIcon&&this.saveButtonIcon.setVisible(!0))}})}catch{}this.setupMetronomeSteps(),this.events.on("gameResumed",this.onGameResumed,this);try{window.addEventListener("blur",()=>{console.log("🔄 Window blur event detected"),this.handleWindowFocusChange(!1),this.checkAudioContextOnFocusLoss()}),window.addEventListener("focus",()=>{console.log("🔄 Window focus event detected"),this.handleWindowFocusChange(!0),this.checkAudioContextOnFocusGain()}),document.addEventListener("visibilitychange",()=>{const m=document.visibilityState==="visible";console.log(`🔄 Document visibility change: ${m?"visible":"hidden"}`),this.handleWindowFocusChange(m),m?this.checkAudioContextOnFocusGain():this.checkAudioContextOnFocusLoss()})}catch{}}createAppButtons(){const m=this.cameras.main.width-5-32,T=5,O=this.scene.get("GameScene"),I=O?O.windowShapes:null,B=24,y=8,P=B+y,i=B+y;if(I&&I.createCollageRect){this.pauseButtonWhite=I.createCollageRect({x:11,y:6,width:P,height:i,fillColor:16777215},!1,"button"),this.pauseButtonWhite&&this.pauseButtonWhite.setVisible(!1);const n=P+20,p=i+20,g=1,v=-4;if(this.pauseButtonBG=this.add.tileSprite(g,v,n,p,"hypercard_ltgray"),this.pauseButtonBG.setOrigin(0,0),this.pauseButtonBG.setScrollFactor(0),this.pauseButtonBG.setDepth(70009),this.pauseButtonBG.setVisible(!1),this.pauseButtonWhite){const f=this.pauseButtonWhite.createGeometryMask();this.pauseButtonBG.setMask(f)}}else this.pauseButtonWhite=this.add.rectangle(10+P/2,5+i/2,P,i,16777215),this.pauseButtonWhite.setScrollFactor(0),this.pauseButtonWhite.setDepth(-1e3),this.pauseButtonWhite.setVisible(!1),this.pauseButtonBG=this.add.tileSprite(10,5,P,i,"hypercard_ltgray"),this.pauseButtonBG.setOrigin(0,0),this.pauseButtonBG.setScrollFactor(0),this.pauseButtonBG.setDepth(-1e3),this.pauseButtonBG.setVisible(!1);this.pauseButtonIcon=this.add.image(10+P/2,5+i/2,"pause-1010-svgrepo-com"),this.pauseButtonIcon.setScrollFactor(0),this.pauseButtonIcon.setDepth(50001),this.pauseButtonIcon.setDisplaySize(B,B),this.pauseButtonIcon.setVisible(!1),this.pauseButtonIcon.setInteractive(),this.pauseButtonIcon.on("pointerdown",()=>{this.pauseButtonBG?.setTexture("hypercard_dkgray")}),this.pauseButtonIcon.on("pointerup",()=>{this.pauseButtonBG?.setTexture("hypercard_ltgray"),this.togglePauseMenu()}),this.pauseButtonIcon.on("pointerout",()=>{this.pauseButtonBG?.setTexture("hypercard_ltgray")});const u=24,x=8,c=u+x,h=u+x;if(I&&I.createCollageRect){this.saveButtonWhite=I.createCollageRect({x:11,y:51,width:c,height:h,fillColor:16777215},!1,"button"),this.saveButtonWhite&&this.saveButtonWhite.setVisible(!1);const n=c+20,p=h+20,g=1,v=41;if(this.saveButtonBG=this.add.tileSprite(g,v,n,p,"hypercard_ltgray"),this.saveButtonBG.setOrigin(0,0),this.saveButtonBG.setScrollFactor(0),this.saveButtonBG.setDepth(70009),this.saveButtonBG.setVisible(!1),this.saveButtonWhite){const f=this.saveButtonWhite.createGeometryMask();this.saveButtonBG.setMask(f)}}else this.saveButtonWhite=this.add.rectangle(10+c/2,50+h/2,c,h,16777215),this.saveButtonWhite.setScrollFactor(0),this.saveButtonWhite.setDepth(-1e3),this.saveButtonWhite.setVisible(!1),this.saveButtonBG=this.add.tileSprite(10,50,c,h,"hypercard_ltgray"),this.saveButtonBG.setOrigin(0,0),this.saveButtonBG.setScrollFactor(0),this.saveButtonBG.setDepth(-1e3),this.saveButtonBG.setVisible(!1);this.saveButtonIcon=this.add.image(10+c/2,50+h/2,"save-svgrepo-com"),this.saveButtonIcon.setScrollFactor(0),this.saveButtonIcon.setDepth(50001),this.saveButtonIcon.setDisplaySize(u,u),this.saveButtonIcon.setVisible(!1),this.saveButtonIcon.setInteractive(),this.saveButtonIcon.on("pointerdown",()=>{const n=this.scene.get("MenuScene"),p=n?n.menuManager:null;p&&p.currentDialog||this.saveButtonBG?.setTexture("hypercard_dkgray")}),this.saveButtonIcon.on("pointerup",()=>{this.saveButtonBG?.setTexture("hypercard_ltgray"),this.showSaveMenu()}),this.saveButtonIcon.on("pointerout",()=>{this.saveButtonBG?.setTexture("hypercard_ltgray")});const o=24,r=8,a=o+r,d=o+r;if(I&&I.createCollageRect){this.muteButtonWhite=I.createCollageRect({x:m+1,y:T+1,width:a,height:d,fillColor:16777215},!1,"button"),this.muteButtonWhite&&this.muteButtonWhite.setVisible(!1);const n=a+20,p=d+20,g=m-9,v=T-9;if(this.muteButtonBG=this.add.tileSprite(g,v,n,p,"hypercard_ltgray"),this.muteButtonBG.setOrigin(0,0),this.muteButtonBG.setScrollFactor(0),this.muteButtonBG.setDepth(15e3),this.muteButtonBG.setVisible(!1),this.muteButtonWhite){const f=this.muteButtonWhite.createGeometryMask();this.muteButtonBG.setMask(f)}}else this.muteButtonWhite=this.add.rectangle(m+a/2,T+d/2,a,d,16777215),this.muteButtonWhite.setScrollFactor(0),this.muteButtonWhite.setDepth(-1e3),this.muteButtonWhite.setVisible(!1),this.muteButtonBG=this.add.tileSprite(m,T,a,d,"hypercard_ltgray"),this.muteButtonBG.setOrigin(0,0),this.muteButtonBG.setScrollFactor(0),this.muteButtonBG.setDepth(-1e3),this.muteButtonBG.setVisible(!1);this.muteButtonWhite&&(this.muteButtonWhite.setScrollFactor(0),this.muteButtonWhite.setDepth(15e3),this.muteButtonWhite.setVisible(!1)),this.muteButtonIcon=this.add.image(m+a/2,T+d/2,"sound-off"),this.muteButtonIcon.setScrollFactor(0),this.muteButtonIcon.setDepth(15001),this.muteButtonIcon.setDisplaySize(o,o),this.muteButtonIcon.setVisible(!1),this.muteButtonIcon.setInteractive(),this.muteButtonIcon.on("pointerdown",()=>{this.muteButtonBG?.setTexture("hypercard_dkgray")}),this.muteButtonIcon.on("pointerup",()=>{this.muteButtonBG?.setTexture("hypercard_ltgray"),this.handleMuteButtonClick()}),this.muteButtonIcon.on("pointerout",()=>{this.muteButtonBG?.setTexture("hypercard_ltgray")})}setupOverlayCamera(){const m=this.cameras.add(0,0,this.cameras.main.width,this.cameras.main.height);m.setName("appOverlayCamera"),m.setScroll(0,0),this.cameras.main=m}setupMetronomeSteps(){this.audioManager.onStep(m=>{if(!this.gameStarted||this.isPaused)return;this.step=m;const T=this.scene.get("GameScene");T&&T.events.emit("step",this.step);const O=this.scene.get("MenuScene");O&&O.events.emit("step",this.step)}),this.audioManager.onHalfStep(m=>{this.halfStep=m,this.uiHalfStep=m;const T=this.scene.get("GameScene");T&&T.events.emit("halfStep",this.halfStep)})}pause(){}resume(){}onGameResumed(){console.log("AppScene: Received gameResumed event"),this.isPaused=!1,this.updatePauseButtonIcon()}getStep(){return this.step}setStep(m){this.step=m}togglePauseMenu(){if(this.isPaused){this.isPaused=!1,this.updatePauseButtonIcon();const m=this.scene.get("GameScene");m&&m.events.emit("gameResumed")}else{const m=this.scene.get("MenuScene"),T=m?m.menuManager:null;if(!(T&&typeof T.canPauseNow=="function"&&T.canPauseNow())){console.log("AppScene: Pause ignored due to active pausing menu");return}this.isPaused=!0,this.updatePauseButtonIcon(),m&&this.time.delayedCall(50,()=>{m.events.emit("showPauseMenu"),this.scene.bringToTop("MenuScene")});const O=this.scene.get("GameScene");O&&O.events.emit("gamePaused")}}handleWindowFocusChange(m){console.log(`🔄 Window focus change: ${m?"GAINED":"LOST"}`);const T=this.scene.get("MenuScene"),O=T?T.menuManager:null,I=!!(O&&O.currentDialog),B=this.scene.get("GameScene"),y=B?B.windowShapes:null;if(!m){if(!this.focusOverlay&&y&&y.overlayManager)try{console.log("🔄 Creating focus blur overlay");const P=y.overlayManager.createDitherOverlay("focus_blur_overlay",9e4,.3),i=P.container.list?.find(u=>u instanceof lt.GameObjects.TileSprite);i&&this.textures.exists("hypercard_dkgray")&&i.setTexture("hypercard_dkgray"),this.focusOverlay=P.container,console.log("🔄 Focus blur overlay created")}catch(P){console.error("🔄 Error creating focus blur overlay:",P)}else console.log("🔄 Focus blur overlay already exists or windowShapes not available");this.isPaused||(this.isPaused=!0),B&&B.events.emit("gamePaused"),this.focusPausedWithoutMenu=!I;return}try{console.log("🔄 Removing focus blur overlay"),this.focusOverlay&&this.focusOverlay.scene&&(console.log("🔄 Destroying focus overlay container"),this.focusOverlay.destroy()),this.focusOverlay=void 0,y&&y.overlayManager&&(console.log("🔄 Removing focus overlay from OverlayManager"),y.overlayManager.removeOverlay("focus_blur_overlay")),console.log("🔄 Focus blur overlay removed")}catch(P){console.error("🔄 Error removing focus blur overlay:",P)}this.focusPausedWithoutMenu?(console.log("🔄 Auto-resuming game after focus regained"),this.focusPausedWithoutMenu=!1,this.isPaused=!1,this.updatePauseButtonIcon(),B&&(B.events.emit("gameResumed"),console.log("🔄 Game resumed event emitted"))):(console.log("🔄 Not auto-resuming - focusPausedWithoutMenu was false"),this.isPaused&&!I&&(console.log("🔄 Game was paused but no menu is open - resuming"),this.isPaused=!1,this.updatePauseButtonIcon(),B&&B.events.emit("gameResumed")))}startGame(){this.gameStarted=!0;const m=this.scene.get("GameScene");m&&m.startGame()}showSaveMenu(){const m=this.scene.get("MenuScene");m&&this.time.delayedCall(50,()=>{m.events.emit("showSaveMenu"),this.scene.bringToTop("MenuScene")})}showAppButtons(){this.pauseButtonWhite&&this.pauseButtonWhite.setVisible(!0),this.pauseButtonBG&&this.pauseButtonBG.setVisible(!0),this.pauseButtonIcon&&this.pauseButtonIcon.setVisible(!0),this.saveButtonWhite&&this.saveButtonWhite.setVisible(!0),this.saveButtonBG&&this.saveButtonBG.setVisible(!0),this.saveButtonIcon&&this.saveButtonIcon.setVisible(!0),this.muteButtonWhite&&this.muteButtonWhite.setVisible(!0),this.muteButtonBG&&this.muteButtonBG.setVisible(!0),this.muteButtonIcon&&this.muteButtonIcon.setVisible(!0)}stopStepEvents(){this.gameStarted=!1,this.step=0}async initializeAudioOnUserInteraction(){if(this.audioManager.isAudioInitialized()){this.audioInitialized=!0;return}if(!this.audioInitialized){this.audioInitialized=!0;try{await this.audioManager.initializeAudioContext(),this.updateMuteButtonIcon(),await this.audioManager.playTestSound()}catch(m){console.error("🎵 AppScene: Failed to initialize audio context:",m),this.audioInitialized=!1}}}async handleMuteButtonClick(){if(this.audioManager.getAudioState()==="off")await this.audioManager.attemptRecovery()&&(this.audioInitialized=!0,this.updateMuteButtonIcon());else{if(this.audioManager.isAudioInitialized()){const T=this.audioManager.getContext();if(T&&T.suspend){await T.suspend(),this.updateMuteButtonIcon();return}}const m=!this.audioManager.isMuted();this.audioManager.setMute(m),this.updateMuteButtonIcon()}}updateMuteButtonIcon(){if(!this.muteButtonIcon)return;const m=this.audioManager.getAudioState();let T;switch(m){case"off":T="sound-off";break;case"muted":T="sound-mute";break;case"on":T="sound-loud";break;default:T="sound-off"}this.muteButtonIcon.setTexture(T)}updatePauseButtonIcon(){if(!this.pauseButtonIcon)return;const m=this.isPaused?"play-1001-svgrepo-com":"pause-1010-svgrepo-com";this.pauseButtonIcon.setTexture(m)}setupGlobalInteractionListeners(){this.input.on("pointerdown",()=>{this.initializeAudioOnUserInteraction()}),this.input.on("pointerup",()=>{this.initializeAudioOnUserInteraction()}),this.input.on("pointermove",()=>{this.initializeAudioOnUserInteraction()}),this.input.keyboard?.on("keydown",()=>{this.initializeAudioOnUserInteraction()}),this.input.keyboard?.on("keyup",()=>{this.initializeAudioOnUserInteraction()});try{document.addEventListener("mousedown",()=>{this.initializeAudioOnUserInteraction()},{once:!1,passive:!0}),document.addEventListener("mouseup",()=>{this.initializeAudioOnUserInteraction()},{once:!1,passive:!0}),document.addEventListener("mousemove",()=>{this.initializeAudioOnUserInteraction()},{once:!1,passive:!0}),document.addEventListener("touchstart",()=>{this.initializeAudioOnUserInteraction()},{once:!1,passive:!0}),document.addEventListener("touchend",()=>{this.initializeAudioOnUserInteraction()},{once:!1,passive:!0}),document.addEventListener("touchmove",()=>{this.initializeAudioOnUserInteraction()},{once:!1,passive:!0}),document.addEventListener("keydown",()=>{this.initializeAudioOnUserInteraction()},{once:!1,passive:!0}),document.addEventListener("keyup",()=>{this.initializeAudioOnUserInteraction()},{once:!1,passive:!0}),document.addEventListener("gamepadconnected",()=>{this.initializeAudioOnUserInteraction()},{once:!1,passive:!0})}catch(m){console.warn("🎵 AppScene: Could not set up all global listeners:",m)}}checkAudioContextOnFocusLoss(){if(!this.audioInitialized)return;const m=this.audioManager.getContext();m&&m.state==="suspended"&&this.updateMuteButtonIcon()}checkAudioContextOnFocusGain(){if(!this.audioInitialized)return;const m=this.audioManager.getContext();m&&m.state==="suspended"&&this.audioManager.attemptRecovery().then(T=>{})}monitorAudioState(){const m=this.audioManager.getAudioState(),T=this.muteButtonIcon?.texture.key;m==="off"&&T!=="sound-off"?this.updateMuteButtonIcon():m==="muted"&&T!=="sound-mute"?this.updateMuteButtonIcon():m==="on"&&T!=="sound-loud"&&this.updateMuteButtonIcon()}getAudioManager(){return this.audioManager}isAudioInitialized(){return this.audioInitialized}}class Fm{scene;activeOverlays=new Map;hypercardPatterns=[{key:"hypercard_solid",name:"Solid",description:"Solid fill"},{key:"hypercard_white",name:"White",description:"White/transparent"},{key:"hypercard_black",name:"Black",description:"Black fill"},{key:"hypercard_gray",name:"Gray",description:"50% gray"},{key:"hypercard_ltgray",name:"Light Gray",description:"25% gray"},{key:"hypercard_dkgray",name:"Dark Gray",description:"75% gray"},{key:"hypercard_horizontal",name:"Horizontal",description:"Horizontal lines"},{key:"hypercard_vertical",name:"Vertical",description:"Vertical lines"},{key:"hypercard_diagonal",name:"Diagonal",description:"Diagonal lines"},{key:"hypercard_reverse_diagonal",name:"Reverse Diagonal",description:"Reverse diagonal lines"},{key:"hypercard_cross",name:"Cross",description:"Crosshatch"},{key:"hypercard_diagonal_cross",name:"Diagonal Cross",description:"Diagonal crosshatch"},{key:"hypercard_dots",name:"Dots",description:"Dotted pattern"},{key:"hypercard_bricks",name:"Bricks",description:"Brick pattern"},{key:"hypercard_weave",name:"Weave",description:"Woven pattern"},{key:"hypercard_scales",name:"Scales",description:"Scale pattern"},{key:"hypercard_circles",name:"Circles",description:"Circular pattern"},{key:"hypercard_squares",name:"Squares",description:"Square pattern"},{key:"hypercard_diamonds",name:"Diamonds",description:"Diamond pattern"},{key:"hypercard_triangles",name:"Triangles",description:"Triangle pattern"},{key:"hypercard_hexagons",name:"Hexagons",description:"Hexagon pattern"},{key:"hypercard_stars",name:"Stars",description:"Star pattern"},{key:"hypercard_zigzag",name:"Zigzag",description:"Zigzag pattern"},{key:"hypercard_waves",name:"Waves",description:"Wave pattern"},{key:"hypercard_spiral",name:"Spiral",description:"Spiral pattern"},{key:"hypercard_maze",name:"Maze",description:"Maze pattern"},{key:"hypercard_honeycomb",name:"Honeycomb",description:"Honeycomb pattern"},{key:"hypercard_chain",name:"Chain",description:"Chain pattern"},{key:"hypercard_fish",name:"Fish",description:"Fish scale pattern"},{key:"hypercard_wood",name:"Wood",description:"Wood grain pattern"},{key:"hypercard_marble",name:"Marble",description:"Marble pattern"},{key:"hypercard_granite",name:"Granite",description:"Granite pattern"}];currentPatternIndex=0;constructor(m){this.scene=m,this.configureSmoothRendering(),typeof this.createHypercardPatterns=="function"?(console.log("🎨 HyperCard patterns method found, creating patterns..."),this.createHypercardPatterns()):(console.log("🎨 HyperCard patterns method not found, falling back to dither textures..."),this.createDitherTextures()),this.scene.time.delayedCall(100,()=>{console.log("🎨 OverlayManager: Textures ready for use"),console.log(`🎨 Available textures: ${Object.keys(this.scene.textures.list).filter(T=>T.includes("dither")||T.includes("hypercard")).join(", ")}`)})}configureSmoothRendering(){if(this.scene.renderer&&"gl"in this.scene.renderer&&this.scene.renderer.gl){const m=this.scene.renderer.gl;m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),console.log("🎨 Configured smooth rendering with LINEAR filtering")}this.scene.cameras&&this.scene.cameras.main&&(this.scene.cameras.main.roundPixels=!1,console.log("🎨 Disabled roundPixels for smooth camera positioning"))}createOverlay(m,T={}){this.removeOverlay(m);const{width:O=this.scene.cameras.main.width,height:I=this.scene.cameras.main.height,depth:B=1,opacity:y=.3,color:P=0,type:i="dither",cutouts:u=[]}=T,x=this.scene.add.container(0,0);x.setScrollFactor(0),x.setDepth(B);let c,h;if(i==="dither"){const r=this.selectPattern(y);if(console.log(`🎨 Creating TileSprite with texture: ${r}`),!this.scene.textures.exists(r))console.error(`🎨 ERROR: Texture ${r} does not exist!`),c=this.scene.add.graphics(),c.fillStyle(P,y),c.fillRect(0,0,O,I);else{const a=Math.floor(O),d=Math.floor(I);c=this.scene.add.tileSprite(0,0,a,d,r),c.setOrigin(0,0),c.setTint(P),c.setAlpha(y),c.setScale(1,1),c.setDisplaySize(a,d),console.log(`🎨 TileSprite created with bulletproof scaling: ${a}x${d} texture: ${c.texture.key}`)}}else c=this.scene.add.graphics(),c.fillStyle(P,y),c.fillRect(0,0,O,I);if(x.add(c),B>=12e4&&x.disableInteractive(),u.length>0){const r=this.scene.make.graphics();u.forEach(a=>{r.fillStyle(16777215),r.fillRect(a.x,a.y,a.width,a.height)}),h=new lt.Display.Masks.BitmapMask(this.scene,r),h.invertAlpha=!0,c.setMask(h)}const o={container:x,background:c,mask:h,destroy:()=>{console.log(`🎨 Destroying overlay: ${m} (total before: ${this.activeOverlays.size})`),h&&h.destroy(),x.destroy(),this.activeOverlays.delete(m),console.log(`🎨 Overlay destroyed: ${m} (total after: ${this.activeOverlays.size})`)},setVisible:r=>{x.setVisible(r)},setDepth:r=>{x.setDepth(r)},setOpacity:r=>{c instanceof lt.GameObjects.TileSprite?c.setAlpha(r):(c.clear(),c.fillStyle(P,r),c.fillRect(0,0,O,I))}};return x.on("destroy",()=>{console.log(`🎨 Reactive cleanup: Container destroyed for overlay ${m}`),this.activeOverlays.delete(m)}),this.activeOverlays.set(m,o),console.log(`🎨 Added overlay to activeOverlays: ${m} (total: ${this.activeOverlays.size})`),o}getOverlay(m){return this.activeOverlays.get(m)}removeOverlay(m){console.log(`🎨 removeOverlay called for: ${m} (total before: ${this.activeOverlays.size})`);const T=this.activeOverlays.get(m);T?(console.log(`🎨 Found overlay to remove: ${m}`),T.destroy()):console.log(`🎨 No overlay found to remove: ${m}`)}removeAllOverlays(){console.log(`🎨 removeAllOverlays called (total: ${this.activeOverlays.size})`),this.activeOverlays.forEach(m=>m.destroy()),this.activeOverlays.clear(),console.log(`🎨 All overlays removed (total after: ${this.activeOverlays.size})`)}selectPattern(m){return this.scene.textures.exists("hypercard_ltgray")?this.selectHypercardPattern(m):this.selectDitherPattern(m)}selectHypercardPattern(m){let T,O;return m<=.3?(T="hypercard_ltgray",O=4):m<=.6?(T="hypercard_gray",O=3):(T="hypercard_dkgray",O=5),this.currentPatternIndex=O,console.log(`🎨 selectHypercardPattern: opacity=${m} -> ${T} (index: ${O})`),console.log(`🎨 Texture exists: ${this.scene.textures.exists(T)}`),T}selectDitherPattern(m){let T,O;return m<=.3?(T="ditherPattern25",O=0):m<=.6?(T="ditherPattern50",O=1):(T="ditherPattern75",O=2),this.currentPatternIndex=O,console.log(`🎨 selectDitherPattern: opacity=${m} -> ${T} (index: ${O})`),console.log(`🎨 Texture exists: ${this.scene.textures.exists(T)}`),T}cycleDitherPattern(m){this.scene.textures.exists("hypercard_ltgray")?this.cycleHypercardPatterns(m):this.cycleDitherPatterns(m)}cycleHypercardPatterns(m){console.log(`🎨 Cycling HyperCard patterns (${m}) - Found ${this.activeOverlays.size} active overlays`),console.log("🎨 Active overlay IDs:",Array.from(this.activeOverlays.keys())),console.log(`🎨 Current pattern index: ${this.currentPatternIndex} (${this.hypercardPatterns[this.currentPatternIndex].name})`);let T;m==="next"?T=(this.currentPatternIndex+1)%this.hypercardPatterns.length:T=(this.currentPatternIndex-1+this.hypercardPatterns.length)%this.hypercardPatterns.length,this.currentPatternIndex=T;const O=this.hypercardPatterns[T];console.info(`🎨 Switching to: ${O.name} (${O.description})`),this.activeOverlays.forEach((I,B)=>{if(I.background&&I.background instanceof lt.GameObjects.TileSprite){console.log(`🎨 Updating overlay ${B} to ${O.key}`);const y=I.background.displayWidth,P=I.background.displayHeight;I.background.setTexture(O.key),I.background.setDisplaySize(Math.floor(y),Math.floor(P)),I.background.setScale(1,1),console.log(`🎨 Maintained pixel-perfect scaling: ${Math.floor(y)}x${Math.floor(P)}`)}else console.log(`🎨 Overlay ${B} background is not TileSprite:`,I.background?.constructor.name)})}cycleDitherPatterns(m){const T=[{key:"ditherPattern25",percentage:25,name:"Light"},{key:"ditherPattern50",percentage:50,name:"Medium"},{key:"ditherPattern75",percentage:75,name:"Dark"},{key:"dither_diamonds",percentage:50,name:"Diamonds"}];console.log(`🎨 Cycling dither patterns (${m}) - Found ${this.activeOverlays.size} active overlays`),console.log("🎨 Active overlay IDs:",Array.from(this.activeOverlays.keys())),console.log(`🎨 Current pattern index: ${this.currentPatternIndex} (${T[this.currentPatternIndex].name})`);let O;m==="next"?O=(this.currentPatternIndex+1)%T.length:O=(this.currentPatternIndex-1+T.length)%T.length,this.currentPatternIndex=O;const I=T[O];console.info(`🎨 Switching to: ${I.name} (${I.percentage}%)`),this.activeOverlays.forEach((B,y)=>{if(B.background&&B.background instanceof lt.GameObjects.TileSprite){console.log(`🎨 Updating overlay ${y} to ${I.key}`);const P=B.background.displayWidth,i=B.background.displayHeight;B.background.setTexture(I.key),B.background.setDisplaySize(Math.floor(P),Math.floor(i)),B.background.setScale(1,1),console.log(`🎨 Maintained pixel-perfect scaling: ${Math.floor(P)}x${Math.floor(i)}`)}else console.log(`🎨 Overlay ${y} background is not TileSprite:`,B.background?.constructor.name)})}createDitherTextures(){console.log("🎨 Creating dither textures..."),this.createDitherPattern("ditherPattern25",8,25),this.createDitherPattern("ditherPattern50",8,50),this.createDitherPattern("ditherPattern75",8,75),this.createDitherDiamondsPattern("dither_diamonds",8),console.log("🎨 Texture verification:"),console.log(`🎨 ditherPattern25 exists: ${this.scene.textures.exists("ditherPattern25")}`),console.log(`🎨 ditherPattern50 exists: ${this.scene.textures.exists("ditherPattern50")}`),console.log(`🎨 ditherPattern75 exists: ${this.scene.textures.exists("ditherPattern75")}`),console.log(`🎨 dither_diamonds exists: ${this.scene.textures.exists("dither_diamonds")}`)}createHypercardPatterns(){console.log("🎨 Creating classic Mac OS HyperCard patterns..."),this.hypercardPatterns.forEach((m,T)=>{this.createHypercardPattern(m.key,8,T)}),console.log(`🎨 Created ${this.hypercardPatterns.length} classic HyperCard patterns`)}createDitherPattern(m,T,O){if(this.scene.textures.exists(m))return;const I=Math.floor(T),B=this.scene.textures.createCanvas(m,I,I);if(!B)return;const y=B.getContext();y.imageSmoothingEnabled=!1,y.fillStyle="#000000";let P;O<=25?P=[[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]:O<=50?P=[[1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0],[0,0,1,0,0,0,1,0],[0,0,0,1,0,0,0,1],[1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0],[0,0,1,0,0,0,1,0],[0,0,0,1,0,0,0,1]]:P=[[1,1,1,1,0,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]];for(let u=0;u<T;u++)for(let x=0;x<T;x++)P[u][x]===1&&y.fillRect(x,u,1,1);B.refresh(),console.log(`🎨 Created ${O}% Mac OS dither texture: ${m}`),console.log(`🎨 Texture verification after creation: ${this.scene.textures.exists(m)}`);const i=this.scene.add.sprite(0,0,m);console.log(`🎨 Test sprite texture key: ${i.texture.key}`),i.destroy()}createDitherDiamondsPattern(m,T){if(this.scene.textures.exists(m))return;const O=Math.floor(T),I=this.scene.textures.createCanvas(m,O,O);if(!I)return;const B=I.getContext();B.imageSmoothingEnabled=!1,B.fillStyle="#000000";const y=[[0,0,1,0,0,0,1,0],[0,1,1,1,0,1,1,1],[1,1,1,1,1,1,1,1],[0,1,1,1,0,1,1,1],[0,0,1,0,0,0,1,0],[0,1,1,1,0,1,1,1],[1,1,1,1,1,1,1,1],[0,1,1,1,0,1,1,1]];for(let P=0;P<T;P++)for(let i=0;i<T;i++)y[P][i]===1&&B.fillRect(i,P,1,1);I.refresh(),console.log(`🎨 Created diamond dither texture: ${m}`)}createHypercardPattern(m,T,O){if(this.scene.textures.exists(m))return;const I=Math.floor(T),B=this.scene.textures.createCanvas(m,I,I);if(!B)return;const y=B.getContext();y.imageSmoothingEnabled=!1,y.fillStyle="#000000";let P;switch(O){case 0:P=[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]];break;case 1:P=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]];break;case 2:P=[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]];break;case 3:P=[[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1]];break;case 4:P=[[1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0],[1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0]];break;case 5:P=[[1,1,1,0,1,1,1,0],[1,0,1,1,1,0,1,1],[1,1,0,1,1,1,0,1],[0,1,1,1,0,1,1,1],[1,1,1,0,1,1,1,0],[1,0,1,1,1,0,1,1],[1,1,0,1,1,1,0,1],[0,1,1,1,0,1,1,1]];break;case 6:P=[[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]];break;case 7:P=[[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0]];break;case 8:P=[[1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1]];break;case 9:P=[[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0],[0,0,0,0,0,1,0,0],[0,0,0,0,1,0,0,0],[0,0,0,1,0,0,0,0],[0,0,1,0,0,0,0,0],[0,1,0,0,0,0,0,0],[1,0,0,0,0,0,0,0]];break;case 10:P=[[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1]];break;case 11:P=[[1,0,0,1,1,0,0,1],[0,1,1,0,0,1,1,0],[0,1,1,0,0,1,1,0],[1,0,0,1,1,0,0,1],[1,0,0,1,1,0,0,1],[0,1,1,0,0,1,1,0],[0,1,1,0,0,1,1,0],[1,0,0,1,1,0,0,1]];break;case 12:P=[[0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0]];break;case 13:P=[[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1],[0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1],[0,0,0,0,1,1,1,1]];break;case 14:P=[[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0]];break;case 15:P=[[0,1,1,1,1,1,1,0],[1,0,0,0,0,0,0,1],[0,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,0],[1,0,0,0,0,0,0,1],[0,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0]];break;case 16:P=[[0,1,1,1,1,1,1,0],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,1,1,1,1,1,1,0]];break;case 17:P=[[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1],[0,0,0,0,1,1,1,1],[0,0,0,0,1,1,1,1],[0,0,0,0,1,1,1,1]];break;case 18:P=[[0,0,1,0,0,0,1,0],[0,1,0,1,0,1,0,1],[1,0,0,0,1,0,0,0],[0,1,0,1,0,1,0,1],[0,0,1,0,0,0,1,0],[0,1,0,1,0,1,0,1],[1,0,0,0,1,0,0,0],[0,1,0,1,0,1,0,1]];break;case 19:P=[[1,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0],[1,1,1,0,0,0,0,0],[1,1,1,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,1,0,0],[0,0,0,0,1,1,1,0],[0,0,0,0,1,1,1,1]];break;case 20:P=[[0,1,1,1,1,1,0,0],[1,0,0,0,0,0,1,0],[1,0,0,0,0,0,1,0],[0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0],[0,1,0,0,0,0,0,1],[0,1,0,0,0,0,0,1],[0,0,1,1,1,1,1,0]];break;case 21:P=[[1,0,0,1,0,0,0,1],[0,1,0,0,1,0,1,0],[0,0,1,0,0,1,0,0],[1,0,0,1,0,0,0,1],[0,1,0,0,1,0,1,0],[0,0,1,0,0,1,0,0],[1,0,0,1,0,0,0,1],[0,1,0,0,1,0,1,0]];break;case 22:P=[[1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0],[0,0,1,0,0,0,1,0],[0,0,0,1,0,0,0,1],[1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0],[0,0,1,0,0,0,1,0],[0,0,0,1,0,0,0,1]];break;case 23:P=[[0,1,1,0,0,1,1,0],[1,0,0,1,1,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,1,0,0,1,1,0],[1,0,0,1,1,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]];break;case 24:P=[[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,1],[1,1,1,1,1,1,0,1],[1,0,0,0,0,1,0,1],[1,0,1,1,0,1,0,1],[1,0,1,0,0,1,0,1],[1,0,1,1,1,1,0,1],[1,0,0,0,0,0,0,1]];break;case 25:P=[[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,1,1,1,1,0,1],[1,0,0,0,0,1,0,1],[1,1,1,0,0,1,0,1],[1,0,0,0,1,1,0,1],[1,0,1,1,1,0,0,1],[1,1,1,1,1,1,1,1]];break;case 26:P=[[0,1,1,0,1,1,0,0],[1,0,0,1,0,0,1,0],[1,0,0,1,0,0,1,0],[0,1,1,0,1,1,0,0],[0,0,1,1,0,1,1,0],[0,1,0,0,1,0,0,1],[0,1,0,0,1,0,0,1],[0,0,1,1,0,1,1,0]];break;case 27:P=[[0,1,1,1,1,1,0,0],[1,0,0,0,0,0,1,0],[1,0,0,0,0,0,1,0],[0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0],[0,1,0,0,0,0,0,1],[0,1,0,0,0,0,0,1],[0,0,1,1,1,1,1,0]];break;case 28:P=[[0,1,1,1,1,1,0,0],[1,0,0,0,0,0,1,0],[0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,0],[0,1,0,0,0,0,0,1],[0,0,1,1,1,1,1,0],[0,0,0,0,0,0,0,0]];break;case 29:P=[[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0]];break;case 30:P=[[1,1,0,1,0,1,1,0],[0,1,1,0,1,0,1,1],[1,0,1,1,0,1,0,1],[0,1,0,1,1,0,1,0],[1,0,1,0,1,1,0,1],[0,1,0,1,0,1,1,0],[1,0,1,0,1,0,1,1],[0,1,0,1,0,1,0,1]];break;case 31:P=[[1,0,1,1,0,1,0,1],[0,1,0,1,1,0,1,0],[1,1,0,0,1,1,0,1],[0,1,1,1,0,1,1,0],[1,0,1,0,1,0,1,1],[0,1,0,1,0,1,0,1],[1,0,1,1,0,1,0,0],[0,1,0,1,1,0,1,1]];break;default:P=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}for(let i=0;i<T;i++)for(let u=0;u<T;u++)P[i][u]===1&&y.fillRect(u,i,1,1);B.refresh(),console.log(`🎨 Created HyperCard pattern: ${this.hypercardPatterns[O].name}`)}createMenuOverlay(m,T,O=.3){return this.createOverlay(m,{type:"dither",color:8421504,opacity:O,cutouts:T,depth:49999})}createDitherOverlay(m,T=9e4,O=.3){return this.createOverlay(m,{type:"dither",color:8421504,opacity:O,depth:T})}createReactiveOverlay(m,T,O={}){const I=this.createOverlay(m,O);return T.on("destroy",()=>{console.log(`🎨 Reactive cleanup: Target object destroyed for overlay ${m}`)}),I}createTutorialOverlay(m,T){return this.createOverlay(m,{type:"dither",color:8421504,opacity:.3,cutouts:T,depth:120001})}}class FJ{scene;container;config;windowShapes;constructor(m,T,O){this.scene=m,this.windowShapes=T,this.config=O,this.container=this.createContainer()}createContainer(){const m=this.scene.add.container(this.config.x,this.config.y);return m.setDepth(2e3),m}getContainer(){return this.container}addInvisibleClickArea(){const m=this.scene.add.rectangle(this.config.width/2,this.config.height/2,this.config.width,this.config.height,0,0);return m.setDepth(10),m.setName("invisibleClickArea"),this.container.add(m),m}createTextBackground(m,T,O,I){const B={x:m,y:T,width:O,height:I};return this.windowShapes.createCollageRect(B,!0,"narrativeBackground")}}class BJ extends FJ{currentTextIndex=0;textElements=[];textBackgrounds=[];isComplete=!1;invisibleOverlay;autoAdvanceTimer;createBackground(){const m=this.config.width/2,T=this.config.height/2,O=this.windowShapes.createCollageRect({x:-m,y:-T,width:this.config.width,height:this.config.height,fillColor:16777215,shapeType:"window"},!1,"window");O.setAlpha(1),O.setScale(.01),O.setDepth(10),O.setPosition(m,T),this.container.add(O),this.createDitheredOverlay(),this.createChoppyExpansionAnimation(O,()=>{console.log("🎬 CYOA window opening animation complete"),this.startTextSequence()});const I=`cyoa_window_${Date.now()}`;this.windowShapes.registerAnimatedShape(I,O,"window",-m,-T,this.config.width,this.config.height),console.log(`🎬 CYOA main window registered for animation at OFFSET (${-m}, ${-T})`),O.cyoaAnimationId=I,O.on("destroy",()=>{this.windowShapes.unregisterAnimatedShape(I)})}createTextElements(){this.setupClickToAdvance()}startTextSequence(){this.revealNextText()}createChoppyExpansionAnimation(m,T){this.scene.tweens.add({targets:m,scaleX:1,scaleY:1,duration:200,ease:"Back.easeOut",onComplete:()=>{T()}})}createChoppyClosingAnimation(m,T){this.scene.tweens.add({targets:m,scaleX:.01,scaleY:.01,duration:200,ease:"Back.easeIn",onComplete:()=>{T()}})}regenerateCollageShape(m,T,O){m.clear();const I={x:-T/2,y:-O/2,width:T,height:O,fillColor:16777215,strokeColor:0,strokeWidth:2,shapeType:"window"};this.windowShapes.createCollageRectShape(m,I)}regenerateCollageShapeForExpansion(m,T,O){m.clear();const I={x:-T/2,y:-O/2,width:T,height:O,fillColor:16777215,strokeColor:0,strokeWidth:2,shapeType:"window"};this.windowShapes.createCollageRectShapeForExpansion(m,I)}createButtons(){if(!this.config.buttons)return;if(!this.container||!this.container.scene){console.log("⚠️ Cannot create buttons - container is destroyed");return}if(!this.isComplete)return;console.log("🔘 CYOA: Creating buttons with H menu style");const m=80,T=30,O=35,I=15,B=this.container.x,y=this.container.y,P=this.container.containerWidth||this.config.width,i=this.container.containerHeight||this.config.height;Math.min(this.config.buttons.length,3);const u=["Yes","Maybe","No"],x=P-m-I,c=i-T-I;this.config.buttons.forEach((h,o)=>{if(o>=3)return;const r=c-o*(T+O),a=B+x,d=y+r,n=this.windowShapes.createCollageButton(0,0,m,T);n.setPosition(a,d),n.setVisible(!0),n.setDepth(120001);const p=h.text||u[o]||`Option ${o+1}`,g=this.windowShapes.generateUniqueRotation()*.67,v=this.scene.add.text(a+m/2,d+T/2,p,{fontSize:"14px",color:"#000000",fontFamily:"Arial, sans-serif"});v.setOrigin(.5,.5),v.setDepth(120002),v.setRotation(g);const f=new lt.Geom.Rectangle(0,0,m,T);n.setInteractive(f,lt.Geom.Rectangle.Contains),console.log(`🔘 Button "${p}" created at ABSOLUTE (${a}, ${d}), depth 40000`),n.on("pointerover",()=>console.log(`🖱️ Hovering over ${p} button`)),n.on("pointerout",()=>console.log(`🖱️ Left ${p} button`)),n.buttonIndex=o,v.buttonIndex=o,this.container.storyButtons||(this.container.storyButtons=[]),this.container.storyButtons.push(n,v),n.on("pointerup",()=>{console.log(`🔘 User selected: ${p}`),this.cleanupStoryButtons(),this.hideTextElementsExceptOverlay();const b=this.container.getAt(0);this.createChoppyClosingAnimation(b,()=>{console.log("🎬 CYOA window closing animation complete"),h.callback?(console.log(`🔘 Calling callback for ${p}`),h.callback()):(console.log("🔘 No callback - ending story and destroying container"),this.container&&this.container.scene&&this.container.destroy())})})}),console.log("🔘 CYOA buttons created with H menu styling and interaction")}revealNextText(){if(this.currentTextIndex>=this.config.texts.length){this.completeDialog();return}const m=this.config.texts[this.currentTextIndex],T=this.config.texts.length,O=30,I=(this.config.height-O-120)/T,B=O+this.currentTextIndex*I;try{const y=this.windowShapes.createNarrativeText(20,B,m,this.config.width-40,this.container);y.background&&y.background.updateAnimationCoords&&y.background.updateAnimationCoords(this.config.x,this.config.y),y.textElement&&this.textElements.push(y.textElement),y.background&&this.textBackgrounds.push(y.background)}catch(y){console.warn("Could not create narrative text element:",y);return}this.currentTextIndex++,this.autoAdvanceTimer=this.scene.time.delayedCall(2e3,()=>{!this.isComplete&&this.scene&&this.revealNextText()})}setupClickToAdvance(){this.invisibleOverlay=this.scene.add.rectangle(this.config.width/2,this.config.height/2,this.config.width,this.config.height,0,0),this.invisibleOverlay.setDepth(10),this.invisibleOverlay.setName("invisibleClickArea"),this.container.add(this.invisibleOverlay),this.invisibleOverlay.setInteractive(),this.invisibleOverlay.on("pointerup",()=>{this.isComplete||(this.autoAdvanceTimer&&(this.autoAdvanceTimer.remove(),this.autoAdvanceTimer=void 0),this.revealNextText())})}completeDialog(){this.isComplete=!0,this.autoAdvanceTimer&&(this.autoAdvanceTimer.remove(),this.autoAdvanceTimer=void 0),this.invisibleOverlay&&this.invisibleOverlay.scene&&(this.invisibleOverlay.removeInteractive(),this.invisibleOverlay.setVisible(!1)),this.createButtons()}cleanupStoryButtons(){this.container.storyButtons&&Array.isArray(this.container.storyButtons)&&(console.log("🧹 Cleaning up standalone CYOA buttons before callback"),this.container.storyButtons.forEach(m=>{if(m&&m.destroy&&m.scene){if(m.type==="Graphics"){const T=m.animationId;T&&this.windowShapes&&this.windowShapes.unregisterAnimatedShape&&this.windowShapes.unregisterAnimatedShape(T)}m.destroy()}}),this.container.storyButtons=[])}hideTextElementsExceptOverlay(){console.log("👻 Hiding text elements before closing animation (keeping overlay)"),this.textElements.forEach(m=>{m&&m.setVisible&&m.setVisible(!1)}),this.textBackgrounds.forEach(m=>{m&&m.setVisible&&m.setVisible(!1)}),this.invisibleOverlay&&this.invisibleOverlay.setVisible&&this.invisibleOverlay.setVisible(!1)}hideTextElements(){console.log("👻 Hiding text elements before closing animation"),this.textElements.forEach(T=>{T&&T.setVisible&&T.setVisible(!1)}),this.textBackgrounds.forEach(T=>{T&&T.setVisible&&T.setVisible(!1)}),this.invisibleOverlay&&this.invisibleOverlay.setVisible&&this.invisibleOverlay.setVisible(!1);const m=this.windowShapes&&this.windowShapes.narrativeWindowQueue&&this.windowShapes.narrativeWindowQueue.length>0;this.container.ditheredOverlay&&this.container.ditheredOverlay.setVisible&&!m?(console.log("🎨 Hiding dithered overlay (no more queued windows)"),this.container.ditheredOverlay.setVisible(!1)):m&&console.log("🎨 Keeping dithered overlay (more windows queued)")}createDitheredOverlay(m){const T=m||this.container,O=`cyoa_dither_${T.name||"default"}`,I=this.windowShapes.overlayManager.createDitherOverlay(O,6e4,.3);try{const B=T.__overlayPattern;if(B&&I&&I.container){const y=I.container.list?.find(P=>P instanceof lt.GameObjects.TileSprite);y&&this.scene.textures.exists(B)&&y.setTexture(B)}}catch{}T.ditheredOverlay=I,console.log("🎨 Created unified CYOA dither overlay:",{overlayId:O,overlayDepth:I.container.depth,containerName:T.name})}}class Qv{scene;currentWindowRotations=[];activeShapes=new Map;overlayManager;activeSpeechBubbles=new Map;activeAnimatedShapes=new Map;activeSteeringWheels=new Map;activeSubtitleAnimations=new Map;activeAnimatedSVGs=new Map;activeNarrativeWindow=null;narrativeWindowQueue=[];constructor(m){this.scene=m,this.overlayManager=new Fm(m)}createChoppyExpansionAnimation(m,T,O,I){this.scene.tweens.add({targets:m,scaleX:1,scaleY:1,duration:200,ease:"Back.easeOut",onComplete:()=>{I()}})}regenerateCollageShapeForAnimation(m,T,O){m.clear();const I={x:-T/2,y:-O/2,width:T,height:O,fillColor:16777215,strokeColor:0,strokeWidth:2,shapeType:"window"};this.createCollageRectShape(m,I)}regenerateCollageShapeForExpansion(m,T,O){m.clear();const I={x:-T/2,y:-O/2,width:T,height:O,fillColor:16777215,strokeColor:0,strokeWidth:2,shapeType:"window"};this.createCollageRectShapeForExpansion(m,I)}createCollageRectShapeForExpansion(m,T){const O=T.strokeWidth||2,I=T.strokeColor||0,B=T.fillColor||13684944,y=T.fillAlpha!==void 0?T.fillAlpha:1,P=8,i=[],u=lt.Math.Between(4,8),x=[],c=[],h=[],o=[];x.push({x:T.x-P+lt.Math.Between(-12,-5),y:T.y-P+lt.Math.Between(-12,-5)}),c.push({x:T.x+T.width+P+lt.Math.Between(5,12),y:T.y-P+lt.Math.Between(-12,-5)}),h.push({x:T.x+T.width+P+lt.Math.Between(5,12),y:T.y+T.height+P+lt.Math.Between(5,12)}),o.push({x:T.x-P+lt.Math.Between(-12,-5),y:T.y+T.height+P+lt.Math.Between(5,12)});for(let r=0;r<u;r++)x.push({x:T.x+T.width*(r+1)/(u+1)+lt.Math.Between(-8,8),y:T.y-P+lt.Math.Between(-15,-3)}),c.push({x:T.x+T.width+P+lt.Math.Between(3,15),y:T.y+T.height*(r+1)/(u+1)+lt.Math.Between(-8,8)}),h.push({x:T.x+T.width*(r+1)/(u+1)+lt.Math.Between(-8,8),y:T.y+T.height+P+lt.Math.Between(3,15)}),o.push({x:T.x-P+lt.Math.Between(-15,-3),y:T.y+T.height*(r+1)/(u+1)+lt.Math.Between(-8,8)});i.push(...x),i.push(...c),i.push(...h),i.push(...o),m.fillStyle(B,y),m.fillPoints(i),T.shapeType!=="window"&&(m.lineStyle(O,I,1),m.strokePoints(i,!0))}createCollageRectShape(m,T){const O=T.strokeWidth||2,I=T.strokeColor||0,B=T.fillColor||13684944,y=T.fillAlpha!==void 0?T.fillAlpha:1,P=8,i=[],u=lt.Math.Between(4,8),x=[],c=[],h=[],o=[];x.push({x:T.x-P+lt.Math.Between(-12,-5),y:T.y-P+lt.Math.Between(-12,-5)}),c.push({x:T.x+T.width+P+lt.Math.Between(5,12),y:T.y-P+lt.Math.Between(-12,-5)}),h.push({x:T.x+T.width+P+lt.Math.Between(5,12),y:T.y+T.height+P+lt.Math.Between(5,12)}),o.push({x:T.x-P+lt.Math.Between(-12,-5),y:T.y+T.height+P+lt.Math.Between(5,12)});for(let r=0;r<u;r++)x.push({x:T.x+T.width*(r+1)/(u+1)+lt.Math.Between(-8,8),y:T.y-P+lt.Math.Between(-15,-3)}),c.push({x:T.x+T.width+P+lt.Math.Between(3,15),y:T.y+T.height*(r+1)/(u+1)+lt.Math.Between(-8,8)}),h.push({x:T.x+T.width*(r+1)/(u+1)+lt.Math.Between(-8,8),y:T.y+T.height+P+lt.Math.Between(3,15)}),o.push({x:T.x-P+lt.Math.Between(-15,-3),y:T.y+T.height*(r+1)/(u+1)+lt.Math.Between(-8,8)});i.push(...x),i.push(...c),i.push(...h),i.push(...o),m.fillStyle(B,y),m.fillPoints(i),T.shapeType!=="window"&&(m.lineStyle(O,I,1),m.strokePoints(i,!0))}createCollageRect(m,T=!1,O="rectangle"){const I=this.scene.add.graphics(),B=m.strokeWidth||2,y=m.strokeColor||0,P=m.fillColor||13684944,i=m.fillAlpha!==void 0?m.fillAlpha:1,u=O==="button"?1:5,x=[],c=O==="button"?lt.Math.Between(1,3):lt.Math.Between(4,8),h=[],o=[],r=[],a=[],d=O==="button"?2:8,n=O==="button"?1:3;h.push({x:m.x-u+lt.Math.Between(-d,-n),y:m.y-u+lt.Math.Between(-d,-n)}),o.push({x:m.x+m.width+u+lt.Math.Between(n,d),y:m.y-u+lt.Math.Between(-d,-n)}),r.push({x:m.x+m.width+u+lt.Math.Between(n,d),y:m.y+m.height+u+lt.Math.Between(n,d)}),a.push({x:m.x-u+lt.Math.Between(-d,-n),y:m.y+m.height+u+lt.Math.Between(n,d)});for(let p=0;p<c;p++)switch(lt.Math.Between(0,3)){case 0:h.push({x:lt.Math.Between(m.x-u+10,m.x+m.width+u-10)+lt.Math.Between(-6,6),y:m.y-u+lt.Math.Between(-10,-3)});break;case 1:o.push({x:m.x+m.width+u+lt.Math.Between(3,10),y:lt.Math.Between(m.y-u+10,m.y+m.height+u-10)+lt.Math.Between(-6,6)});break;case 2:r.push({x:lt.Math.Between(m.x-u+10,m.x+m.width+u-10)+lt.Math.Between(-6,6),y:m.y+m.height+u+lt.Math.Between(3,10)});break;case 3:a.push({x:m.x-u+lt.Math.Between(-10,-3),y:lt.Math.Between(m.y-u+10,m.y+m.height+u-10)+lt.Math.Between(-6,6)});break}if(h.sort((p,g)=>p.x-g.x),o.sort((p,g)=>p.y-g.y),r.sort((p,g)=>g.x-p.x),a.sort((p,g)=>g.y-p.y),x.push(...h),x.push(...o),x.push(...r),x.push(...a),O!=="button"){I.fillStyle(2236962,1),I.beginPath(),I.moveTo(x[0].x+6,x[0].y+6);for(let p=1;p<x.length;p++)I.lineTo(x[p].x+6,x[p].y+6);I.closePath(),I.fillPath()}O==="window"?I.lineStyle(0,y,0):I.lineStyle(B,y),I.fillStyle(P,i),I.beginPath(),I.moveTo(x[0].x,x[0].y);for(let p=1;p<x.length;p++)I.lineTo(x[p].x,x[p].y);if(I.closePath(),I.fillPath(),O!=="window"&&I.strokePath(),I.fillStyle(P,i),I.fillRect(m.x,m.y,m.width,m.height),T){const p=`animated_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;let g=m.x,v=m.y;I.updateAnimationCoords=(f,b)=>{g=f+m.x,v=b+m.y,console.log(`🎬 Updated animation coords: ${O} now at world (${g}, ${v})`),this.unregisterAnimatedShape(p),this.registerAnimatedShape(p,I,O,g,v,m.width,m.height)},this.registerAnimatedShape(p,I,O,g,v,m.width,m.height),console.log(`🎬 Registered shape for animation: ${O} at (${g}, ${v})`),I.animationId=p,I.on("destroy",()=>{this.unregisterAnimatedShape(p)})}return I}createNarrativeBackground(m,T=!1){const O=this.scene.add.graphics(),I=0,B=0,y=0,P=1,i=[],u={x:Math.round(m.x+lt.Math.Between(0,5)),y:Math.round(m.y+lt.Math.Between(0,3))},x={x:Math.round(m.x+m.width+lt.Math.Between(-5,0)),y:Math.round(m.y+lt.Math.Between(0,3))},c={x:Math.round(m.x+m.width+lt.Math.Between(-5,0)),y:Math.round(m.y+m.height+lt.Math.Between(-3,0))},h={x:Math.round(m.x+lt.Math.Between(0,5)),y:Math.round(m.y+m.height+lt.Math.Between(-3,0))};i.push(u),i.push(x),i.push(c),i.push(h),O.lineStyle(I,B,1),O.fillStyle(y,P),O.setDefaultStyles({lineStyle:{width:I,color:B,alpha:1},fillStyle:{color:y,alpha:P}}),O.beginPath(),O.moveTo(i[0].x,i[0].y);for(let o=1;o<i.length;o++)O.lineTo(i[o].x,i[o].y);if(O.closePath(),O.fillPath(),O.strokePath(),T){const o=`animated_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;this.registerAnimatedShape(o,O,"narrativeBackground",m.x,m.y,m.width,m.height),O.animationId=o,O.on("destroy",()=>{this.unregisterAnimatedShape(o)})}return O.setDepth(12),O}createCollageSpeechBubble(m,T,O,I){const B=this.scene.add.graphics(),y=2,P=0,i=16777215,u=1,x=[];x.push({x:m+20+lt.Math.Between(-5,5),y:T+I+lt.Math.Between(-3,3)}),x.push({x:m+O*.5+lt.Math.Between(-8,8),y:T+I+lt.Math.Between(2,5)}),x.push({x:m+O-20+lt.Math.Between(-5,5),y:T+I+lt.Math.Between(-3,3)}),x.push({x:m+O+lt.Math.Between(-3,3),y:T+I*.7+lt.Math.Between(-8,8)}),x.push({x:m+O+lt.Math.Between(-5,2),y:T+I*.3+lt.Math.Between(-8,8)}),x.push({x:m+O*.8+lt.Math.Between(-5,5),y:T+lt.Math.Between(-3,3)}),x.push({x:m+O*.7+lt.Math.Between(-8,8),y:T-15+lt.Math.Between(-5,5)}),x.push({x:m+O*.6+lt.Math.Between(-5,5),y:T-25+lt.Math.Between(-7,-3)}),x.push({x:m+O*.65+lt.Math.Between(-8,8),y:T+lt.Math.Between(-2,2)}),x.push({x:m+O*.3+lt.Math.Between(-5,5),y:T+lt.Math.Between(-3,3)}),x.push({x:m+20+lt.Math.Between(-5,5),y:T+lt.Math.Between(-3,3)}),x.push({x:m+lt.Math.Between(-3,3),y:T+I*.3+lt.Math.Between(-8,8)}),x.push({x:m+lt.Math.Between(-5,2),y:T+I*.7+lt.Math.Between(-8,8)}),x.push({x:m+lt.Math.Between(-3,3),y:T+I-20+lt.Math.Between(-5,5)});const c=6;B.fillStyle(2236962,1),B.beginPath(),B.moveTo(x[0].x+c,x[0].y+c);for(let h=1;h<x.length;h++)B.lineTo(x[h].x+c,x[h].y+c);B.closePath(),B.fillPath(),B.lineStyle(y,P),B.fillStyle(i,u),B.beginPath(),B.moveTo(x[0].x,x[0].y);for(let h=1;h<x.length;h++)B.lineTo(x[h].x,x[h].y);return B.closePath(),B.fillPath(),B.strokePath(),B}createRandomTestWindow(){const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height,O=lt.Math.Between(200,350),I=lt.Math.Between(150,250),B=lt.Math.Between(50,m-O-50),y=lt.Math.Between(50,T-I-50),P=["dialog","confirmDialog","menu","panel","messageBox","speechBubble","storyDialog"];switch(lt.Utils.Array.GetRandom(P)){case"dialog":return this.createDialogComposition(B,y,O,I);case"confirmDialog":return this.createConfirmDialogComposition(B,y,O,I);case"menu":const i=lt.Math.Between(2,5),u=Math.max(I,120+i*45);return this.createMenuComposition(B,y,O,u);case"panel":return this.createPanelComposition(B,y,O,I);case"messageBox":return this.createMessageBoxComposition(B,y,O,I);case"speechBubble":return this.createSpeechBubbleComposition(B,y,O,I);case"storyDialog":const x=Math.max(I,400),c=Math.max(O,300),h=this.createStoryDialogComposition(B,y,c,x);if(!h){console.log("Story dialog queued - creating placeholder");const o=this.scene.add.container(B,y);return o.setSize(c,x),o}return h;default:return this.createDialogComposition(B,y,O,I)}}createCollageButton(m,T,O=80,I=30){return this.createCollageRect({x:m,y:T,width:O,height:I,fillColor:16777215},!0,"button")}createCollagePanel(m,T,O,I){return this.createCollageRect({x:m,y:T,width:O,height:I,fillColor:13684944})}generateUniqueRotation(){for(let T=0;T<20;T++){const O=(Math.random()-.5)*.08;let I=!0;for(const B of this.currentWindowRotations)if(Math.abs(O-B)<.03){I=!1;break}if(I)return this.currentWindowRotations.push(O),O}const m=(Math.random()-.5)*.08;return this.currentWindowRotations.push(m),m}resetRotationTracking(){this.currentWindowRotations=[]}createNarrativeText(m,T,O,I,B,y="left"){const P=this.generateUniqueRotation(),i=(Math.random()-.5)*10,u={fontSize:"20px",color:"#ffffff",align:y,fontFamily:"Arial",padding:{x:8,y:6},wordWrap:{width:I,useAdvancedWrap:!0}},x=this.scene.add.text(m+i,T,O,u);if(y==="right"?x.setOrigin(1,.5):x.setOrigin(0,.5),x.setWordWrapWidth(I),x.setAlign(y),x.setDepth(11),x.setRotation(P),x.setStyle({...u,smoothed:!0}),x.canvas){const a=x.canvas.getContext("2d");a&&(a.textBaseline="top",a.imageSmoothingEnabled=!0)}const c=x.getBounds(),h=8,o={x:c.x-h,y:c.y-h,width:c.width+h*2,height:c.height+h*2,fillColor:0,fillAlpha:1,strokeColor:0,strokeWidth:0},r=this.createNarrativeBackground(o,!0);return r.setRotation(P),B&&(B.add(r),B.add(x)),{textElement:x,background:r}}createMaskedWindow(m,T,O=!1){const I=this.createCollageRect({...m,fillColor:16777215,fillAlpha:1},O,"maskedWindow"),B=this.scene.add.container(m.x+m.width/2,m.y+m.height/2);B.setDepth(I.depth-1);const y=I.createGeometryMask();return B.setMask(y),T&&B.add(T),{window:I,mask:y,contentContainer:B}}addImageToMaskedWindow(m,T,O=0,I=0,B=1){const y=this.scene.add.image(O,I,T);return y.setScale(B),m.add(y),y}addTiledScrollingBackground(m,T,O=0,I=0,B=0,y=0){const P=this.scene.add.tileSprite(O,I,400,300,T);return P.setOrigin(.5,.5),m.add(P),this.scene.events.on("postupdate",()=>{P.tilePositionX+=B,P.tilePositionY+=y}),P}addCameraViewToMaskedWindow(m,T,O=0,I=0,B=1){const y=this.scene.add.renderTexture(O,I,T.width,T.height);return y.setScale(B),m.add(y),this.scene.events.on("postupdate",()=>{y.draw(T)}),y}createCollageDialog(m,T,O,I,B=24){const y=this.createCollageRect({x:m,y:T,width:O,height:I,fillColor:13684944});return y.lineStyle(1,0),y.lineBetween(m,T+B,m+O,T+B),y}regeneratePolygonShape(m,T){m.clear();const O=T.strokeWidth||2,I=T.strokeColor||0,B=T.fillColor||13684944,y=T.fillAlpha!==void 0?T.fillAlpha:1,P=5,i=[],u=lt.Math.Between(4,8),x=[],c=[],h=[],o=[];x.push({x:T.x-P+lt.Math.Between(-5,-2),y:T.y-P+lt.Math.Between(-5,-2)}),c.push({x:T.x+T.width+P+lt.Math.Between(2,5),y:T.y-P+lt.Math.Between(-5,-2)}),h.push({x:T.x+T.width+P+lt.Math.Between(2,5),y:T.y+T.height+P+lt.Math.Between(2,5)}),o.push({x:T.x-P+lt.Math.Between(-5,-2),y:T.y+T.height+P+lt.Math.Between(2,5)});for(let a=0;a<u;a++)switch(lt.Math.Between(0,3)){case 0:x.push({x:lt.Math.Between(T.x-P+10,T.x+T.width+P-10)+lt.Math.Between(-6,6),y:T.y-P+lt.Math.Between(-10,-3)});break;case 1:c.push({x:T.x+T.width+P+lt.Math.Between(3,10),y:lt.Math.Between(T.y-P+10,T.y+T.height+P-10)+lt.Math.Between(-6,6)});break;case 2:h.push({x:lt.Math.Between(T.x-P+10,T.x+T.width+P-10)+lt.Math.Between(-6,6),y:T.y+T.height+P+lt.Math.Between(3,10)});break;case 3:o.push({x:T.x-P+lt.Math.Between(-10,-3),y:lt.Math.Between(T.y-P+10,T.y+T.height+P-10)+lt.Math.Between(-6,6)});break}x.sort((a,d)=>a.x-d.x),c.sort((a,d)=>a.y-d.y),h.sort((a,d)=>d.x-a.x),o.sort((a,d)=>d.y-a.y),i.push(...x),i.push(...c),i.push(...h),i.push(...o);const r=6;m.fillStyle(2236962,1),m.beginPath(),m.moveTo(i[0].x+r,i[0].y+r);for(let a=1;a<i.length;a++)m.lineTo(i[a].x+r,i[a].y+r);m.closePath(),m.fillPath(),m.lineStyle(O,I),m.fillStyle(B,y),m.beginPath(),m.moveTo(i[0].x,i[0].y);for(let a=1;a<i.length;a++)m.lineTo(i[a].x,i[a].y);m.closePath(),m.fillPath(),m.strokePath(),m.fillStyle(B,y),m.fillRect(T.x,T.y,T.width,T.height)}registerShape(m,T,O){this.activeShapes.set(m,{graphics:T,config:O})}unregisterShape(m){this.activeShapes.delete(m)}onFourthBeat(){this.activeShapes.forEach(({graphics:m,config:T})=>{this.regeneratePolygonShape(m,T)})}getActiveShapeCount(){return this.activeShapes.size}registerSpeechBubble(m,T,O,I,B,y){this.activeSpeechBubbles.set(m,{graphics:T,x:O,y:I,width:B,height:y})}unregisterSpeechBubble(m){this.activeSpeechBubbles.delete(m)}onStep(){this.activeSpeechBubbles.forEach(({graphics:m,x:T,y:O,width:I,height:B})=>{this.regenerateSpeechBubbleShape(m,T,O,I,B)})}onHalfStep(m){try{this.activeAnimatedShapes.forEach((T,O)=>{const I=T.graphics;(!I||!I.scene)&&this.activeAnimatedShapes.delete(O)}),this.activeSpeechBubbles.forEach((T,O)=>{const I=T.graphics;(!I||!I.scene)&&this.activeSpeechBubbles.delete(O)}),this.activeSteeringWheels.forEach((T,O)=>{const I=T.graphics;(!I||!I.scene)&&this.activeSteeringWheels.delete(O)})}catch{}this.activeSpeechBubbles.forEach(({graphics:T,x:O,y:I,width:B,height:y})=>{this.regenerateSpeechBubbleShape(T,O,I,B,y)}),this.activeAnimatedShapes.forEach(({graphics:T,shapeType:O,x:I,y:B,width:y,height:P})=>{T&&T.scene&&this.regenerateShapeWithSubtleAnimation(T,O,I,B,y,P)}),this.activeSteeringWheels.forEach(({graphics:T,x:O,y:I,radius:B,currentRotation:y})=>{T&&T.scene&&this.regenerateSteeringWheel(T,O,I,B,y)}),this.activeSubtitleAnimations.forEach(({element:T,animationData:O})=>{T&&T.scene&&O&&this.updateSubtitleAnimation(T,O)}),this.activeAnimatedSVGs.forEach(({graphics:T,originalPoints:O,x:I,y:B,fillColor:y,strokeColor:P,strokeWidth:i})=>{T&&T.scene&&this.regenerateSVGWithJitter(T,O,I,B,y,P,i)}),this.activeAnimatedShapes.size>0||this.activeAnimatedSVGs.size>0?console.log(`🎬 Animating ${this.activeAnimatedShapes.size} shapes and ${this.activeAnimatedSVGs.size} SVGs on half-step ${m}`):m%10===0&&console.log("🎬 No animated shapes registered")}registerAnimatedShape(m,T,O,I,B,y,P){if(O==="subtitle_pulse"){const i=T,u=i.__subtitleAnimation;u&&(this.activeSubtitleAnimations.set(m,{element:i,animationData:u}),console.log(`🎵 Registered subtitle animation: ${m}`))}else this.activeAnimatedShapes.set(m,{graphics:T,shapeType:O,x:I,y:B,width:y,height:P})}unregisterAnimatedShape(m){this.activeAnimatedShapes.delete(m),this.activeSubtitleAnimations.delete(m)}updateSubtitleAnimation(m,T){const{steps:O,elements:I,position:B}=T;let{currentStep:y,stepDirection:P}=T;const i=O[y];I.forEach(u=>{u&&u.scene&&u.setScale(i)}),I.forEach(u=>{u&&u.scene&&u!==m&&u.setPosition(B.x,B.y)}),y=y===0?1:0,T.currentStep=y}regenerateSpeechBubbleShape(m,T,O,I,B){m.clear();const y=2,P=0,i=16777215,u=1,x=[];x.push({x:T+20+lt.Math.Between(-5,5),y:O+B+lt.Math.Between(-3,3)}),x.push({x:T+I*.5+lt.Math.Between(-8,8),y:O+B+lt.Math.Between(2,5)}),x.push({x:T+I-20+lt.Math.Between(-5,5),y:O+B+lt.Math.Between(-3,3)}),x.push({x:T+I+lt.Math.Between(-3,3),y:O+B*.7+lt.Math.Between(-8,8)}),x.push({x:T+I+lt.Math.Between(-5,2),y:O+B*.3+lt.Math.Between(-8,8)}),x.push({x:T+I*.8+lt.Math.Between(-5,5),y:O+lt.Math.Between(-3,3)}),x.push({x:T+I*.7+lt.Math.Between(-8,8),y:O-15+lt.Math.Between(-5,5)}),x.push({x:T+I*.6+lt.Math.Between(-5,5),y:O-25+lt.Math.Between(-7,-3)}),x.push({x:T+I*.65+lt.Math.Between(-8,8),y:O+lt.Math.Between(-2,2)}),x.push({x:T+I*.3+lt.Math.Between(-5,5),y:O+lt.Math.Between(-3,3)}),x.push({x:T+20+lt.Math.Between(-5,5),y:O+lt.Math.Between(-3,3)}),x.push({x:T+lt.Math.Between(-3,3),y:O+B*.3+lt.Math.Between(-8,8)}),x.push({x:T+lt.Math.Between(-5,2),y:O+B*.7+lt.Math.Between(-8,8)}),x.push({x:T+lt.Math.Between(-3,3),y:O+B-20+lt.Math.Between(-5,5)});const c=6;m.fillStyle(2236962,1),m.beginPath(),m.moveTo(x[0].x+c,x[0].y+c);for(let h=1;h<x.length;h++)m.lineTo(x[h].x+c,x[h].y+c);m.closePath(),m.fillPath(),m.lineStyle(y,P),m.fillStyle(i,u),m.beginPath(),m.moveTo(x[0].x,x[0].y);for(let h=1;h<x.length;h++)m.lineTo(x[h].x,x[h].y);m.closePath(),m.fillPath(),m.strokePath()}regenerateShapeWithSubtleAnimation(m,T,O,I,B,y){m.clear();const P=2,i=0;let u=16777215,x=1,c=!1;if(T==="window"){let p=m.parentContainer;p&&p.isComplete?(u=13421772,x=.85):u=16777215}else T==="button"?u=16777215:T==="narrativeBackground"&&(u=0,c=!0);const h=[],o=T==="button"?lt.Math.Between(1,3):lt.Math.Between(4,8),r=[],a=[],d=[],n=[];if(T==="narrativeBackground"){const p={x:Math.round(O+lt.Math.Between(0,5)),y:Math.round(I+lt.Math.Between(0,3))},g={x:Math.round(O+B+lt.Math.Between(-5,0)),y:Math.round(I+lt.Math.Between(0,3))},v={x:Math.round(O+B+lt.Math.Between(-5,0)),y:Math.round(I+y+lt.Math.Between(-3,0))},f={x:Math.round(O+lt.Math.Between(0,5)),y:Math.round(I+y+lt.Math.Between(-3,0))};h.push(p),h.push(g),h.push(v),h.push(f)}else{const p=T==="button"?1:5,g=T==="button"?2:8,v=T==="button"?1:3;r.push({x:O-p+lt.Math.Between(-g,-v),y:I-p+lt.Math.Between(-g,-v)}),a.push({x:O+B+p+lt.Math.Between(v,g),y:I-p+lt.Math.Between(-g,-v)}),d.push({x:O+B+p+lt.Math.Between(v,g),y:I+y+p+lt.Math.Between(v,g)}),n.push({x:O-p+lt.Math.Between(-g,-v),y:I+y+p+lt.Math.Between(v,g)});for(let f=0;f<o;f++)switch(lt.Math.Between(0,3)){case 0:r.push({x:lt.Math.Between(O-p+10,O+B+p-10)+lt.Math.Between(-4,4),y:I-p+lt.Math.Between(-8,-2)});break;case 1:a.push({x:O+B+p+lt.Math.Between(2,8),y:lt.Math.Between(I-p+10,I+y+p-10)+lt.Math.Between(-4,4)});break;case 2:d.push({x:lt.Math.Between(O-p+10,O+B+p-10)+lt.Math.Between(-4,4),y:I+y+p+lt.Math.Between(2,8)});break;case 3:n.push({x:O-p+lt.Math.Between(-8,-2),y:lt.Math.Between(I-p+10,I+y+p-10)+lt.Math.Between(-4,4)});break}}if(r.sort((p,g)=>p.x-g.x),a.sort((p,g)=>p.y-g.y),d.sort((p,g)=>g.x-p.x),n.sort((p,g)=>g.y-p.y),h.push(...r),h.push(...a),h.push(...d),h.push(...n),!c){m.fillStyle(2236962,1),m.beginPath(),m.moveTo(h[0].x+6,h[0].y+6);for(let p=1;p<h.length;p++)m.lineTo(h[p].x+6,h[p].y+6);m.closePath(),m.fillPath()}T==="narrativeBackground"?(m.lineStyle(P,i,1),m.setDefaultStyles({lineStyle:{width:P,color:i,alpha:1},fillStyle:{color:u,alpha:x}})):T==="window"?m.lineStyle(0,i,0):m.lineStyle(P,i),m.fillStyle(u,x),m.beginPath(),m.moveTo(h[0].x,h[0].y);for(let p=1;p<h.length;p++)m.lineTo(h[p].x,h[p].y);m.closePath(),m.fillPath(),T!=="window"&&m.strokePath(),T!=="narrativeBackground"&&(m.fillStyle(u,x),m.fillRect(O,I,B,y))}getActiveSpeechBubbleCount(){return this.activeSpeechBubbles.size}createAnimatedSteeringWheel(m,T,O){const I=this.scene.add.graphics(),B=`steeringwheel_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return this.registerSteeringWheel(B,I,m,T,O,0),I.wheelId=B,I.on("destroy",()=>{this.unregisterSteeringWheel(B)}),this.regenerateSteeringWheel(I,m,T,O,0),I}registerSteeringWheel(m,T,O,I,B,y){this.activeSteeringWheels.set(m,{graphics:T,x:O,y:I,radius:B,currentRotation:y})}unregisterSteeringWheel(m){this.activeSteeringWheels.delete(m)}updateSteeringWheelRotation(m,T){for(const[O,I]of this.activeSteeringWheels)if(I.graphics===m){I.currentRotation=T,this.regenerateSteeringWheel(m,I.x,I.y,I.radius,T);break}}regenerateSteeringWheel(m,T,O,I,B){m.clear();const y=3,P=0,i=16777215,u=1,x=this.createSimplifiedSteeringWheelGeometry(T,O,I,B),c=2;m.fillStyle(2236962,.3),this.drawPolygonFromPoints(m,x,c,c),m.lineStyle(y,P),m.fillStyle(i,u),this.drawPolygonFromPoints(m,x,0,0),m.fillPath(),m.strokePath()}createSimplifiedSteeringWheelGeometry(m,T,O,I){return[{angle:-Math.PI/2-.6,r:O*.9},{angle:-Math.PI/2-.3,r:O*.7},{angle:-Math.PI/2,r:O*.65},{angle:-Math.PI/2+.3,r:O*.7},{angle:-Math.PI/2+.6,r:O*.9},{angle:.2,r:O},{angle:.6,r:O*.8},{angle:1,r:O*.6},{angle:Math.PI/2-.2,r:O*.5},{angle:Math.PI/2,r:O*.45},{angle:Math.PI/2+.2,r:O*.5},{angle:Math.PI-1,r:O*.6},{angle:Math.PI-.6,r:O*.8},{angle:Math.PI-.2,r:O},{angle:-Math.PI+.4,r:O*.95}].map(B=>{const y=B.r+lt.Math.Between(-.3,.3),P=B.angle+I;return{x:m+Math.cos(P)*y,y:T+Math.sin(P)*y}})}drawPolygonFromPoints(m,T,O,I){if(T.length!==0){m.beginPath(),m.moveTo(T[0].x+O,T[0].y+I);for(let B=1;B<T.length;B++)m.lineTo(T[B].x+O,T[B].y+I);m.closePath()}}createDialogComposition(m,T,O,I){const B=this.scene.add.container(m,T),y=this.createCollageRect({x:0,y:0,width:O,height:I,fillColor:13684944},!0,"window");B.add(y);const P=this.createCollageButton(O-35,5,25,25);return B.add(P),B}createConfirmDialogComposition(m,T,O,I){const B=this.scene.add.container(m,T),y=this.createCollageRect({x:0,y:0,width:O,height:I,fillColor:13684944},!0,"window");B.add(y);const P=this.createCollageButton(O-35,5,25,25);B.add(P);const i=(O-30)/2,u=I-40,x=this.createCollageButton(10,u,i,30),c=this.createCollageButton(O-i-10,u,i,30);return B.add(x),B.add(c),B}createMenuComposition(m,T,O,I,B=3){const y=this.scene.add.container(m,T),P=this.createCollageRect({x:0,y:0,width:O,height:I,fillColor:13684944},!0,"window");y.add(P);const i=this.createCollageButton(5,5,25,25);y.add(i);const u=35,x=10,c=40,h=O-20;for(let o=0;o<B;o++){const r=c+o*(u+x),a=this.createCollageButton(10,r,h,u);y.add(a)}return y}createPanelComposition(m,T,O,I){const B=this.scene.add.container(m,T),y=this.createCollageRect({x:0,y:0,width:O,height:I,fillColor:13684944},!0,"window");B.add(y);const P=30,i=5,u=this.createCollageButton(i,i,P,P);B.add(u);const x=this.createCollageButton(O-P-i,i,P,P);B.add(x);const c=this.createCollageButton(i,I-P-i,P,P);B.add(c);const h=this.createCollageButton(O-P-i,I-P-i,P,P);return B.add(h),B}createMessageBoxComposition(m,T,O,I){const B=this.scene.add.container(m,T),y=this.createCollageRect({x:0,y:0,width:O,height:I,fillColor:13684944},!0,"window");B.add(y);const P=80,i=this.createCollageButton((O-P)/2,I-40,P,30);return B.add(i),B}createSpeechBubbleComposition(m,T,O,I){const B=this.scene.add.container(m,T),y=I-40,P=this.createCollageSpeechBubble(0,40,O,y);B.add(P);const i=`speechbubble_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return this.registerSpeechBubble(i,P,0,40,O,y),B.speechBubbleId=i,B.on("destroy",()=>{this.unregisterSpeechBubble(i)}),B}createStoryDialogComposition(m,T,O,I,B="default-bg"){if(this.activeNarrativeWindow&&(!this.activeNarrativeWindow.scene||this.activeNarrativeWindow.scene!==this.scene)&&(console.log("🔧 Clearing stale activeNarrativeWindow reference"),this.activeNarrativeWindow=null),this.activeNarrativeWindow&&this.activeNarrativeWindow.scene)return console.log("Narrative window already active, queuing new request..."),console.log("📊 Active window:",this.activeNarrativeWindow),this.narrativeWindowQueue.push({x:m,y:T,width:O,height:I,backgroundImageKey:B}),null;console.log("✅ Creating new narrative window immediately");const y=this.scene.add.container(m,T);y.setDepth(2e3),console.log(`📦 Container created at position: ${m}, ${T} with depth 2000`);const P=O/2,i=I/2,u=this.createCollageRect({x:-P,y:-i,width:O,height:I,fillColor:16777215},!1,"window");console.log(`🏠 Main window created: ${O}x${I} with center offset`),u.setAlpha(1),u.setScale(.01),u.setDepth(12e4),u.setPosition(P,i),y.add(u),console.log("✅ Main window added to container"),console.log("📦 Main window depth set to 120000"),this.createDitheredOverlay(y),this.createChoppyExpansionAnimation(u,O,I,()=>{console.log("🎬 H menu window opening animation complete"),this.revealNextStoryText(y)});const x=`h_menu_window_${Date.now()}`;this.registerAnimatedShape(x,u,"window",-P,-i,O,I),console.log(`🎬 H menu main window registered for animation at OFFSET (${-P}, ${-i})`),u.hMenuAnimationId=x,u.on("destroy",()=>{this.unregisterAnimatedShape(x)}),u.setInteractive(),console.log(`🖱️ Main window made interactive: ${O}x${I}`),u.on("pointerdown",()=>{console.log("🖱️ Main window (polygon) clicked!"),y.isComplete?console.log("⏹️ Dialog already complete, not advancing"):(console.log("➡️ Advancing story dialog"),this.advanceStoryDialog(y))}),u.on("pointerover",()=>console.log("🖱️ Mouse over polygon")),u.on("pointerout",()=>console.log("🖱️ Mouse left polygon"));const c=["The ancient door creaks open...","Strange shadows dance in the flickering light.","Do you dare to enter the mysterious chamber?"];y.storyTexts=c,y.currentTextIndex=0,y.textElements=[],y.textBackgrounds=[],y.containerWidth=O,y.containerHeight=I,y.isComplete=!1,y.on("destroy",()=>{console.log("🗑️ Container destroy event triggered"),y.autoAdvanceTimer&&(y.autoAdvanceTimer.remove(),y.autoAdvanceTimer=null);const o=this.narrativeWindowQueue&&this.narrativeWindowQueue.length>0;y.ditheredOverlay&&y.ditheredOverlay.destroy&&!o?(console.log("🧹 Cleaning up dithered overlay (no more queued windows)"),y.ditheredOverlay.destroy(),y.ditheredOverlay=null):o&&console.log("🎨 Keeping dithered overlay (more windows queued)"),y.storyButtons&&Array.isArray(y.storyButtons)&&(console.log("🧹 Cleaning up standalone story buttons"),y.storyButtons.forEach(r=>{r&&r.destroy&&r.scene&&r.destroy()}),y.storyButtons=null),this.activeNarrativeWindow===y&&(console.log("🔄 Clearing active narrative window and processing queue"),this.activeNarrativeWindow=null,this.processNarrativeQueue())}),this.activeNarrativeWindow=y;const h=this.scene.add.rectangle(O/2,I/2,O,I,0,0);return h.setDepth(10),h.setName("invisibleClickArea"),y.add(h),console.log(`👻 Invisible click area added: ${O}x${I}`),h.setInteractive(),h.on("pointerup",()=>{console.log("🎯 Invisible overlay clicked - checking if should advance story"),y.isComplete?console.log("⏹️ Dialog already complete, buttons should handle interactions"):(console.log("➡️ Advancing story dialog from invisible overlay click"),this.advanceStoryDialog(y))}),y}createCYOADialog(m,T,O,I,B,y){if(this.activeNarrativeWindow&&this.activeNarrativeWindow.scene)return console.log("CYOA dialog queued because another narrative window is active."),null;this.resetRotationTracking();const P={x:m,y:T,width:O,height:I,type:"cyoa",texts:B,buttons:y},i=new BJ(this.scene,this,P);i.createBackground(),i.createTextElements();const u=i.getContainer();return u.__overlayPattern="hypercard_waves",this.activeNarrativeWindow=u,u.on("destroy",()=>{console.log("🗑️ CYOA Container destroy event triggered");const x=this.narrativeWindowQueue&&this.narrativeWindowQueue.length>0;u.ditheredOverlay&&u.ditheredOverlay.destroy&&!x?(console.log("🧹 Cleaning up dithered overlay (no more queued windows)"),u.ditheredOverlay.destroy(),u.ditheredOverlay=null):x&&console.log("🎨 Keeping dithered overlay (more windows queued)"),u.storyButtons&&Array.isArray(u.storyButtons)&&(console.log("🧹 Cleaning up standalone CYOA buttons"),u.storyButtons.forEach(c=>{if(c&&c.destroy&&c.scene){if(c.type==="Graphics"){const h=c.animationId;h&&this.unregisterAnimatedShape&&this.unregisterAnimatedShape(h)}c.destroy()}}),u.storyButtons=[]),this.activeNarrativeWindow===u&&(this.activeNarrativeWindow=null,this.processNarrativeQueue())}),console.log("✅ CYOA dialog created with H menu styling"),u}revealNextStoryText(m){if(!m||!m.scene)return;if(m.currentTextIndex>=m.storyTexts.length){this.showStoryButtons(m);return}const T=m.storyTexts[m.currentTextIndex],O=m.storyTexts.length,I=m.containerWidth,B=m.containerHeight,y=30,P=B-y-120;let i;const u=8,x=I-20,c=I-40;if(O===1)i=y+P/2;else if(O===2){const h=y+P/2;i=m.currentTextIndex===0?h-40:h+40}else{const h=P/O;i=y+m.currentTextIndex*h}try{const h=O===2&&m.currentTextIndex===1?x-c:u,o=this.createNarrativeText(h,i,T,c,m);m.textElements.push(o.textElement),m.textBackgrounds.push(o.background)}catch(h){console.warn("Could not create narrative text element:",h);return}m.currentTextIndex++,m.autoAdvanceTimer=this.scene.time.delayedCall(2e3,()=>{this.advanceStoryDialog(m)})}advanceStoryDialog(m){!m||!m.scene||m.isComplete||(m.autoAdvanceTimer&&(m.autoAdvanceTimer.remove(),m.autoAdvanceTimer=null),m.currentTextIndex<m.storyTexts.length?this.revealNextStoryText(m):this.showStoryButtons(m))}showStoryButtons(m){if(console.log("🔘 showStoryButtons called - creating buttons"),!m||!m.scene){console.log("❌ Container check failed in showStoryButtons");return}m.isComplete=!0,console.log("✅ Container marked as complete, creating buttons");const T=m.getByName("debugOverlay");T?(T.setVisible(!1),T.setInteractive(!1),console.log("🔍 Debug overlay hidden AND disabled - buttons should be fully interactive now")):console.log("❌ Could not find debug overlay to hide");const O=m.getFirst();if(O){O.clear();const M={x:0,y:0,width:m.containerWidth,height:m.containerHeight,fillColor:13421772,fillAlpha:.85},E=O,A=2,R=0,L=5,Y=[],F=lt.Math.Between(4,8),N=[],z=[],U=[],q=[];N.push({x:M.x-L+lt.Math.Between(-5,-2),y:M.y-L+lt.Math.Between(-5,-2)}),z.push({x:M.x+M.width+L+lt.Math.Between(2,5),y:M.y-L+lt.Math.Between(-5,-2)}),U.push({x:M.x+M.width+L+lt.Math.Between(2,5),y:M.y+M.height+L+lt.Math.Between(2,5)}),q.push({x:M.x-L+lt.Math.Between(-5,-2),y:M.y+M.height+L+lt.Math.Between(2,5)});for(let K=0;K<F;K++)switch(lt.Math.Between(0,3)){case 0:N.push({x:lt.Math.Between(M.x-L+10,M.x+M.width+L-10)+lt.Math.Between(-4,4),y:M.y-L+lt.Math.Between(-8,-2)});break;case 1:z.push({x:M.x+M.width+L+lt.Math.Between(2,8),y:lt.Math.Between(M.y-L+10,M.y+M.height+L-10)+lt.Math.Between(-4,4)});break;case 2:U.push({x:lt.Math.Between(M.x-L+10,M.x+M.width+L-10)+lt.Math.Between(-4,4),y:M.y+M.height+L+lt.Math.Between(2,8)});break;case 3:q.push({x:M.x-L+lt.Math.Between(-8,-2),y:lt.Math.Between(M.y-L+10,M.y+M.height+L-10)+lt.Math.Between(-4,4)});break}N.sort((K,et)=>K.x-et.x),z.sort((K,et)=>K.y-et.y),U.sort((K,et)=>et.x-K.x),q.sort((K,et)=>et.y-K.y),Y.push(...N),Y.push(...z),Y.push(...U),Y.push(...q);const Q=6;E.fillStyle(2236962,1),E.beginPath(),E.moveTo(Y[0].x+Q,Y[0].y+Q);for(let K=1;K<Y.length;K++)E.lineTo(Y[K].x+Q,Y[K].y+Q);E.closePath(),E.fillPath(),E.lineStyle(A,R),E.fillStyle(M.fillColor,M.fillAlpha),E.beginPath(),E.moveTo(Y[0].x,Y[0].y);for(let K=1;K<Y.length;K++)E.lineTo(Y[K].x,Y[K].y);E.closePath(),E.fillPath(),E.strokePath(),E.fillStyle(M.fillColor,M.fillAlpha),E.fillRect(M.x,M.y,M.width,M.height)}const I=m.containerWidth,B=m.containerHeight,y=m.x,P=m.y,i=80,u=30,x=35,c=15,h=y+I-i-c,o=P+B-u-c,r=o-u-x,a=r-u-x,d=this.createCollageButton(0,0,i,u),n=this.createCollageButton(0,0,i,u),p=this.createCollageButton(0,0,i,u);d.setPosition(h,a),n.setPosition(h,r),p.setPosition(h,o),d.setVisible(!0),n.setVisible(!0),p.setVisible(!0),d.setDepth(120001),n.setDepth(120001),p.setDepth(120001),console.log(`🎨 Scene name: ${this.scene.scene.key}`),console.log(`🎨 Yes button visible: ${d.visible}, depth: ${d.depth}`),console.log(`🔘 Buttons created at absolute positions: Yes(${h},${a}), Maybe(${h},${r}), No(${h},${o})`);const g=this.scene.add.text(h+i/2,a+u/2,"Yes",{fontSize:"14px",color:"#000000"});g.setOrigin(.5,.5),g.setDepth(120002);const v=this.scene.add.text(h+i/2,r+u/2,"Maybe",{fontSize:"14px",color:"#000000"});v.setOrigin(.5,.5),v.setDepth(120002);const f=this.scene.add.text(h+i/2,o+u/2,"No",{fontSize:"14px",color:"#000000"});f.setOrigin(.5,.5),f.setDepth(120002),m.storyButtons=[d,n,p,g,v,f],console.log("🔘 Buttons created at absolute world positions (not in container)");const b=new lt.Geom.Rectangle(0,0,i,u),C=new lt.Geom.Rectangle(0,0,i,u),_=new lt.Geom.Rectangle(0,0,i,u);d.setInteractive(b,lt.Geom.Rectangle.Contains),n.setInteractive(C,lt.Geom.Rectangle.Contains),p.setInteractive(_,lt.Geom.Rectangle.Contains),console.log("🖱️ Buttons made interactive with explicit hit areas and depths set to 200+"),d.on("pointerover",()=>console.log("🖱️ Hovering over Yes button")),d.on("pointerout",()=>console.log("🖱️ Left Yes button")),n.on("pointerover",()=>console.log("🖱️ Hovering over Maybe button")),n.on("pointerout",()=>console.log("🖱️ Left Maybe button")),p.on("pointerover",()=>console.log("🖱️ Hovering over No button")),p.on("pointerout",()=>console.log("🖱️ Left No button")),d.on("pointerdown",()=>{console.log("User selected: Yes - destroying container..."),m.destroy()}),n.on("pointerdown",()=>{console.log("User selected: Maybe - destroying container..."),m.destroy()}),p.on("pointerdown",()=>{console.log("User selected: No - destroying container..."),m.destroy()})}processNarrativeQueue(){if(console.log(`📋 Processing queue - ${this.narrativeWindowQueue.length} items waiting`),this.narrativeWindowQueue.length>0){const m=this.narrativeWindowQueue.shift();m&&(console.log("🎭 Processing queued narrative window..."),this.scene.time.delayedCall(100,()=>{this.createStoryDialogComposition(m.x,m.y,m.width,m.height,m.backgroundImageKey)}))}else console.log("📋 Queue is empty - no more narrative windows to process")}closeActiveNarrativeWindow(){this.activeNarrativeWindow&&this.activeNarrativeWindow.scene&&this.activeNarrativeWindow.destroy()}getQueuedNarrativeCount(){return this.narrativeWindowQueue.length}hasActiveNarrativeWindow(){return this.activeNarrativeWindow!==null&&this.activeNarrativeWindow.scene!==null}waitForActiveWindowClear(m){if(!this.hasActiveNarrativeWindow()){m();return}const T=()=>{this.hasActiveNarrativeWindow()?this.scene.time.delayedCall(50,T):(console.log("📋 Active narrative window cleared - executing callback"),m())};this.scene.time.delayedCall(50,T)}clearNarrativeQueue(){this.narrativeWindowQueue.length=0}forceResetNarrativeSystem(){console.log("🔧 Force resetting narrative system..."),this.activeNarrativeWindow&&(console.log("🗑️ Destroying active narrative window"),this.activeNarrativeWindow.destroy()),this.activeNarrativeWindow=null,this.narrativeWindowQueue.length=0,console.log("✅ Narrative system reset complete")}createDitheredOverlay(m){const T=`dither_${m.name||"default"}`,O=this.overlayManager.createDitherOverlay(T,6e4,.3);try{const I=m.__overlayPattern;if(I&&O&&O.container){console.log(`🎨 WindowShapes: Applying pattern override: ${I}`);const B=O.container.list?.find(y=>y instanceof lt.GameObjects.TileSprite);B&&this.scene.textures.exists(I)?(B.setTexture(I),console.log(`🎨 WindowShapes: Successfully applied pattern ${I}`)):console.log(`🎨 WindowShapes: Pattern ${I} not found or TileSprite not found`)}}catch(I){console.error("🎨 WindowShapes: Error applying pattern override:",I)}m.ditheredOverlay=O,console.log("🎨 Created unified dither overlay:",{overlayId:T,overlayDepth:O.container.depth,containerName:m.name})}createAnimatedSVG(m,T,O,I=16777215,B=0,y=2){const P=this.scene.add.graphics(),i=this.parseSVGPathToPoints(m),u=`svg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return this.registerAnimatedSVG(u,P,i,T,O,I,B,y),this.regenerateSVGWithJitter(P,i,T,O,I,B,y),P.svgAnimationId=u,P.on("destroy",()=>{this.unregisterAnimatedSVG(u)}),console.log(`🎨 Created animated SVG with ${i.length} points, ID: ${u}`),P}parseSVGPathToPoints(m){const T=[],O=m.match(/[MLZ][^MLZ]*/g)||[];for(const I of O){const B=I[0],y=I.slice(1).trim().split(/[\s,]+/).filter(P=>P).map(Number);B==="M"&&y.length>=2?T.push({x:y[0],y:y[1]}):B==="L"&&y.length>=2?T.push({x:y[0],y:y[1]}):B==="Z"&&T.length>0&&T.push({x:T[0].x,y:T[0].y})}return T}registerAnimatedSVG(m,T,O,I,B,y,P,i){this.activeAnimatedSVGs.set(m,{graphics:T,originalPoints:O,x:I,y:B,fillColor:y,strokeColor:P,strokeWidth:i}),console.log(`🎬 Registered animated SVG: ${m} with ${O.length} points`)}unregisterAnimatedSVG(m){this.activeAnimatedSVGs.delete(m),console.log(`🎬 Unregistered animated SVG: ${m}`)}regenerateSVGWithJitter(m,T,O,I,B,y,P){if(m.clear(),T.length===0)return;const i=T.map(u=>({x:u.x+lt.Math.Between(-3,3),y:u.y+lt.Math.Between(-3,3)}));this.drawPolygonFromPoints(m,i,O,I),P>0&&m.lineStyle(P,y),m.fillStyle(B),m.fill(),P>0&&m.strokePath()}createTestAnimatedSVG(m,T){return this.createAnimatedSVG("M 0 0 L 20 0 L 25 5 L 20 10 L 0 10 L -5 5 Z",m,T,16739125,0,2)}}class NJ{audioManager;isVisible=!1;menuContainer;scene;updateTimer;bpmSlider;metronomeVolumeSlider;musicVolumeSlider;loopSelector;metronomeToggle;statusText;constructor(m){this.scene=m,this.audioManager=Mn.getInstance(),this.createMenu()}createMenu(){if(!this.scene)return;this.menuContainer=this.scene.add.container(0,0),this.menuContainer.setVisible(!1);const m=this.scene.add.rectangle(0,0,300,400,0,.8);m.setOrigin(0,0),this.menuContainer.add(m);const T=this.scene.add.text(10,10,"Audio Debug Menu",{fontSize:"16px",color:"#ffffff",fontFamily:"Arial"});this.menuContainer.add(T),this.statusText=this.scene.add.text(10,40,"",{fontSize:"12px",color:"#cccccc",fontFamily:"Arial"}),this.menuContainer.add(this.statusText);const O=this.scene.add.text(10,70,"BPM:",{fontSize:"14px",color:"#ffffff",fontFamily:"Arial"});if(this.menuContainer.add(O),this.scene.rexUI){this.bpmSlider=this.scene.rexUI.add.slider({x:150,y:85,width:120,height:20,orientation:"horizontal",value:this.audioManager.getBpm(),valuechangeCallback:h=>{this.audioManager.setBpm(Math.round(h))}}),this.bpmSlider.setValue(166,40,240),this.menuContainer.add(this.bpmSlider);const c=this.scene.add.text(280,70,"166",{fontSize:"14px",color:"#ffff00",fontFamily:"Arial"});this.menuContainer.add(c),this.bpmSlider.on("valuechange",h=>{c.setText(Math.round(h).toString())})}const I=this.scene.add.text(10,110,"Metronome Volume:",{fontSize:"14px",color:"#ffffff",fontFamily:"Arial"});if(this.menuContainer.add(I),this.scene.rexUI){this.metronomeVolumeSlider=this.scene.rexUI.add.slider({x:150,y:125,width:120,height:20,orientation:"horizontal",value:this.audioManager.getMetronomeVolume(),valuechangeCallback:h=>{this.audioManager.setMetronomeVolume(h)}}),this.metronomeVolumeSlider.setValue(.1,0,1),this.menuContainer.add(this.metronomeVolumeSlider);const c=this.scene.add.text(280,110,"0.1",{fontSize:"14px",color:"#ffff00",fontFamily:"Arial"});this.menuContainer.add(c),this.metronomeVolumeSlider.on("valuechange",h=>{c.setText(h.toFixed(2))})}const B=this.scene.add.text(10,150,"Music Volume:",{fontSize:"14px",color:"#ffffff",fontFamily:"Arial"});if(this.menuContainer.add(B),this.scene.rexUI){this.musicVolumeSlider=this.scene.rexUI.add.slider({x:150,y:165,width:120,height:20,orientation:"horizontal",value:this.audioManager.getMusicVolume(),valuechangeCallback:h=>{this.audioManager.setMusicVolume(h)}}),this.musicVolumeSlider.setValue(.7,0,1),this.menuContainer.add(this.musicVolumeSlider);const c=this.scene.add.text(280,150,"0.7",{fontSize:"14px",color:"#ffff00",fontFamily:"Arial"});this.menuContainer.add(c),this.musicVolumeSlider.on("valuechange",h=>{c.setText(h.toFixed(2))})}const y=this.scene.add.rectangle(150,200,100,30,3355443);this.menuContainer.add(y),this.metronomeToggle=this.scene.add.text(150,200,"Start Metronome",{fontSize:"14px",color:"#ffffff",fontFamily:"Arial"}).setOrigin(.5,.5),this.menuContainer.add(this.metronomeToggle),y.setInteractive(),y.on("pointerdown",()=>{this.toggleMetronome()});const P=this.scene.add.text(10,240,"Current Loop:",{fontSize:"14px",color:"#ffffff",fontFamily:"Arial"});this.menuContainer.add(P);const i=this.scene.add.text(10,260,"No Loop",{fontSize:"12px",color:"#ffff00",fontFamily:"Arial"});this.menuContainer.add(i),this.audioManager.getAvailableLoops().forEach((c,h)=>{const o=this.scene.add.rectangle(10+h*60,290,50,25,4473924);this.menuContainer.add(o);const r=this.scene.add.text(10+h*60,290,c,{fontSize:"10px",color:"#ffffff",fontFamily:"Arial"}).setOrigin(.5,.5);this.menuContainer.add(r),o.setInteractive(),o.on("pointerdown",()=>{this.audioManager.setLoop(c),i.setText(c)})});const u=this.scene.add.rectangle(280,20,20,20,16711680);this.menuContainer.add(u);const x=this.scene.add.text(280,20,"X",{fontSize:"14px",color:"#ffffff",fontFamily:"Arial"}).setOrigin(.5,.5);this.menuContainer.add(x),u.setInteractive(),u.on("pointerdown",()=>{this.hide()}),this.startUpdateTimer()}startUpdateTimer(){this.scene&&(this.updateTimer=this.scene.time.addEvent({delay:100,callback:this.updateStatus,callbackScope:this,loop:!0}))}updateStatus(){if(!this.statusText)return;const m={bpm:this.audioManager.getBpm(),beatCount:this.audioManager.getBeatCount(),measureCount:this.audioManager.getMeasureCount(),beatInMeasure:this.audioManager.getBeatInMeasure(),currentLoop:this.audioManager.getCurrentLoop(),metronomeRunning:this.audioManager.isMetronomeRunning()},T=`BPM: ${m.bpm}
Beat: ${m.beatCount} (${m.beatInMeasure+1}/4)
Measure: ${m.measureCount}
Loop: ${m.currentLoop}
Metronome: ${m.metronomeRunning?"ON":"OFF"}`;this.statusText.setText(T),this.metronomeToggle&&this.metronomeToggle.setText(m.metronomeRunning?"Stop Metronome":"Start Metronome")}toggleMetronome(){this.audioManager.isMetronomeRunning()?this.audioManager.stopMetronome():this.audioManager.startMetronome()}show(){this.menuContainer&&(this.menuContainer.setVisible(!0),this.isVisible=!0)}hide(){this.menuContainer&&(this.menuContainer.setVisible(!1),this.isVisible=!1)}toggle(){this.isVisible?this.hide():this.show()}destroy(){this.updateTimer&&this.updateTimer.destroy(),this.menuContainer&&this.menuContainer.destroy()}}class bo{static instance;SAVE_KEY="game-fast-save";SAVE_VERSION="1.0.0";constructor(){}static getInstance(){return bo.instance||(bo.instance=new bo),bo.instance}save(m){try{const T={steps:m,timestamp:new Date().toISOString(),version:this.SAVE_VERSION},O=JSON.stringify(T,null,2);return localStorage.setItem(this.SAVE_KEY,O),console.log("Game saved successfully:",T),!0}catch(T){return console.error("Failed to save game:",T),!1}}load(){try{const m=localStorage.getItem(this.SAVE_KEY);if(!m)return console.log("No save data found"),null;const T=JSON.parse(m);return T.version!==this.SAVE_VERSION&&console.warn("Save version mismatch. Expected:",this.SAVE_VERSION,"Found:",T.version),console.log("Game loaded successfully:",T),T}catch(m){return console.error("Failed to load game:",m),null}}clearSave(){try{return localStorage.removeItem(this.SAVE_KEY),console.log("Save data cleared successfully"),!0}catch(m){return console.error("Failed to clear save data:",m),!1}}hasSave(){return localStorage.getItem(this.SAVE_KEY)!==null}getSaveInfo(){const m=this.load();return m?{exists:!0,timestamp:m.timestamp,steps:m.steps}:{exists:!1}}}const Nv={ui:{rearviewMirror:{position:{x:.55,y:-.03},size:{width:.92,height:.4}},steeringWheel:{position:{x:.25,y:.8},scale:1},magneticTarget:{position:{x:213,y:550},radius:25}},virtualPets:{positions:[{x:.15,y:.73,scale:.8},{x:.35,y:.68,scale:.8},{x:.55,y:.78,scale:.8},{x:.75,y:.7,scale:.8},{x:.95,y:.65,scale:.8}]},itemSizes:{small:{width:20,height:20,scale:1,description:"Keys, small items"},medium:{width:30,height:30,scale:1.5,description:"Food, medium items"},large:{width:40,height:40,scale:2,description:"Large items"}},physics:{gravity:{baseY:.5,maxLateralGx:.8},magnetic:{attractionWindowMs:900}}};class YJ{config=Nv;loaded=!1;async loadConfig(){try{const m=await fetch("/GameElements.json");m.ok?(this.config=await m.json(),this.loaded=!0,console.log("✅ Game elements config loaded successfully")):(console.warn("⚠️ Failed to load GameElements.json, using defaults"),this.config=Nv)}catch(m){console.warn("⚠️ Error loading GameElements.json:",m),this.config=Nv}}getConfig(){return this.config}isLoaded(){return this.loaded}getRearviewMirror(){return this.config.ui.rearviewMirror}getSteeringWheel(){return this.config.ui.steeringWheel}getMagneticTarget(){return this.config.ui.magneticTarget}getVirtualPetPositions(){return this.config.virtualPets.positions}getItemSize(m){return this.config.itemSizes[m]}getPhysics(){return this.config.physics}toPixelPosition(m,T,O){return{x:m.x*T,y:m.y*O}}toPixelSize(m,T,O){return{width:m.width*T,height:m.height*O}}}const Se=new YJ,Dt={white:16777215,lightGray:13421772,mediumLightGray:10066329,mediumGray:6710886,mediumDarkGray:4473924,darkGray:3355443,black:0},VJ={carMaxSpeed:5,minCrankForSteering:.4,minSpeedForSteering:.01,steeringSensitivity:1,maxTurn:1.5,turnResetMultiplier:.1,centrifugal:2,baseTurnGain:.3,maxTurnGain:2,turnGainPower:.5,turnDecayRate:.01,centerReturnForce:0,lateralFriction:.99,skyColor:Dt.black,roadColor:Dt.mediumGray,boundaryPadding:50,roadDepth:-1e3,lineWidth:4,lineHeight:30,lineGap:40,centerLineYOffset:50,lineDepth:-1e3,obstacleMinDelayMs:9e3,obstacleMaxDelayMs:18e3,potholeProbability:.5,potholeWidth:.3,potholeHeight:.08,potholeMinPos:.45,potholeMaxPos:.55,potholeSpawnY:.2,potholeColor:Dt.black,potholeSpeed:1.2,exitWidth:30,exitHeight:60,exitPosition:.9,exitSpawnY:.1,exitColor:Dt.white,exitSpeed:1,radarEnabled:!1,radarX:0,radarY:10,radarWidth:33,radarHeight:163,radarAlpha:.75,roadBendStrength:200,lensStrength:1.5,useLowRes:!1,lowResScale:.5},zJ={overlayColor:Dt.black,overlayAlpha:.2,overlayDepth:9e4,maskColor:Dt.white,keysHoleRadius:30,targetHoleMultiplier:1.5,magneticTargetX:Se.getMagneticTarget().position.x,magneticTargetY:Se.getMagneticTarget().position.y,magneticTargetRadius:Se.getMagneticTarget().radius},At={gameLayerX:.02,gameLayerY:.02,moneyX:.02,moneyY:.98,healthX:.02,healthY:.12,countdownX:.5,countdownY:.2,progressX:.02,progressY:.92,rearviewX:Se.getRearviewMirror().position.x,rearviewY:Se.getRearviewMirror().position.y,rearviewWidth:Se.getRearviewMirror().size.width,rearviewHeight:Se.getRearviewMirror().size.height,gameLayerFontSize:"14px",moneyHealthFontSize:"18px",countdownFontSize:"36px",progressFontSize:"18px",managerValuesFontSize:"12px",gameLayerDepth:1e3,managerValuesPadding:{x:10,y:5},gameLayerColor:Dt.white,moneyColor:Dt.lightGray,healthColor:Dt.mediumGray,countdownColor:Dt.white,progressColor:Dt.white,gameLayerBackgroundColor:Dt.black,managerValuesBackgroundColor:Dt.black,rearviewBackgroundColor:Dt.white,rearviewBackgroundAlpha:1,rearviewStrokeColor:Dt.black,managerValuesSkillColor:Dt.lightGray,managerValuesDifficultyColor:Dt.mediumGray,managerValuesMomentumColor:Dt.mediumLightGray,managerValuesPlotAColor:Dt.mediumGray,managerValuesPlotBColor:Dt.mediumLightGray,managerValuesPlotCColor:Dt.mediumDarkGray,managerValuesStopsColor:Dt.white,managerValuesOpacity:.8,gameLayerText:"(game)",frontseatText:"look up",backseatText:"look down",buttonPadding:10,buttonCornerRadius:5,buttonBackgroundColor:Dt.darkGray,buttonHoverColor:Dt.mediumDarkGray,frontseatFontSize:"18px",backseatFontSize:"18px",frontseatColor:Dt.white,backseatColor:Dt.white,speedCrankOffsetX:120,speedCrankOffsetY:-20,speedCrankWidth:40,speedCrankHeight:150,speedCrankTrackColor:Dt.darkGray,speedCrankTrackAlpha:.8,speedCrankTrackStrokeColor:Dt.white,speedCrankTrackStrokeWidth:2,speedCrankTrackCornerRadius:5,speedCrankHandleColor:Dt.mediumLightGray,speedCrankHandleAlpha:.9,speedCrankHandleStrokeColor:Dt.white,speedCrankHandleStrokeWidth:1,speedCrankHandleCornerRadius:3,speedCrankHandleMargin:4,speedCrankHandleHeight:20,speedCrankIndicatorColor:Dt.white,speedCrankIndicatorStrokeColor:Dt.black,speedCrankIndicatorRadius:3,speedCrankTextOffsetX:10,speedCrankTextFontSize:"16px",speedCrankTextColor:Dt.white,speedCrankSnapPositions:[0,.2,.4,.6,.8,1],speedCrankDepthTrack:1e3,speedCrankDepthHandle:1001,speedCrankDepthIndicator:1002,speedCrankDepthText:1003,speedCrankDepthArea:1004},kC={gameLayerText:At.gameLayerText,gameLayerPositionX:At.gameLayerX,gameLayerPositionY:At.gameLayerY,gameLayerFontSize:At.gameLayerFontSize,gameLayerColor:At.gameLayerColor,gameLayerBackgroundColor:At.gameLayerBackgroundColor,gameLayerDepth:At.gameLayerDepth,textDisplayDelayMs:100,countdownPositionX:At.countdownX,countdownPositionY:At.countdownY,countdownFontSize:At.countdownFontSize,countdownColor:At.countdownColor,moneyPositionX:At.moneyX,moneyPositionY:At.moneyY,healthPositionX:At.healthX,healthPositionY:At.healthY,moneyHealthFontSize:At.moneyHealthFontSize,moneyColor:At.moneyColor,healthColor:At.healthColor,progressPositionX:At.progressX,progressPositionY:At.progressY,progressFontSize:At.progressFontSize,progressColor:At.progressColor,managerValuesFontSize:At.managerValuesFontSize,managerValuesBackgroundColor:At.managerValuesBackgroundColor,managerValuesPadding:At.managerValuesPadding,managerValuesOpacity:At.managerValuesOpacity,managerValuesSkillColor:At.managerValuesSkillColor,managerValuesDifficultyColor:At.managerValuesDifficultyColor,managerValuesMomentumColor:At.managerValuesMomentumColor,managerValuesPlotAColor:At.managerValuesPlotAColor,managerValuesPlotBColor:At.managerValuesPlotBColor,managerValuesPlotCColor:At.managerValuesPlotCColor,managerValuesStopsColor:At.managerValuesStopsColor,frontseatText:At.frontseatText,frontseatPositionX:0,frontseatPositionY:0,frontseatFontSize:At.frontseatFontSize,frontseatColor:At.frontseatColor,backseatText:At.backseatText,backseatPositionX:0,backseatPositionY:0,backseatFontSize:At.backseatFontSize,backseatColor:At.backseatColor,buttonPadding:At.buttonPadding,buttonCornerRadius:At.buttonCornerRadius,buttonBackgroundColor:At.buttonBackgroundColor,buttonHoverColor:At.buttonHoverColor,speedCrankOffsetX:At.speedCrankOffsetX,speedCrankOffsetY:At.speedCrankOffsetY,speedCrankWidth:At.speedCrankWidth,speedCrankHeight:At.speedCrankHeight,speedCrankTrackColor:At.speedCrankTrackColor,speedCrankTrackAlpha:At.speedCrankTrackAlpha,speedCrankTrackStrokeColor:At.speedCrankTrackStrokeColor,speedCrankTrackStrokeWidth:At.speedCrankTrackStrokeWidth,speedCrankTrackCornerRadius:At.speedCrankTrackCornerRadius,speedCrankHandleColor:At.speedCrankHandleColor,speedCrankHandleAlpha:At.speedCrankHandleAlpha,speedCrankHandleStrokeColor:At.speedCrankHandleStrokeColor,speedCrankHandleStrokeWidth:At.speedCrankHandleStrokeWidth,speedCrankHandleCornerRadius:At.speedCrankHandleCornerRadius,speedCrankHandleMargin:At.speedCrankHandleMargin,speedCrankHandleHeight:At.speedCrankHandleHeight,speedCrankIndicatorColor:At.speedCrankIndicatorColor,speedCrankIndicatorStrokeColor:At.speedCrankIndicatorStrokeColor,speedCrankIndicatorRadius:At.speedCrankIndicatorRadius,speedCrankTextOffsetX:At.speedCrankTextOffsetX,speedCrankTextFontSize:At.speedCrankTextFontSize,speedCrankTextColor:At.speedCrankTextColor,speedCrankSnapPositions:At.speedCrankSnapPositions,speedCrankDepthTrack:At.speedCrankDepthTrack,speedCrankDepthHandle:At.speedCrankDepthHandle,speedCrankDepthIndicator:At.speedCrankDepthIndicator,speedCrankDepthText:At.speedCrankDepthText,speedCrankDepthArea:At.speedCrankDepthArea},de={sliderWidth:200,sliderHeight:20,sliderYOffset:50,sliderTrackColor:3355443,sliderCornerRadius:10,sliderHandleWidth:20,sliderHandleHeight:20,sliderHandleColor:6710886,sliderHandleCornerRadius:10,sliderTrackDepth:1e3,sliderHandleDepth:1001,labelsDepth:1002,meterDepth:1003,startLabelOffset:30,turnKeyLabelOffset:-30,labelsFontSize:"16px",labelsColor:"#ffffff",meterWidth:150,meterHeight:10,meterYOffset:80,meterBackgroundColor:2236962,meterCornerRadius:5,meterFillColor:65280,meterTextOffset:20,momentumDecay:.95,maxVelocity:15,gravity:.3,sensitivity:.5,startThreshold:.9,startIncrement:.5},Jv={petColor:16764006,petDecayRates:[{food:.3,bathroom:.53,boredom:.23},{food:.48,bathroom:.38,boredom:.59},{food:.2,bathroom:.43,boredom:.35},{food:.62,bathroom:.16,boredom:.47},{food:.4,bathroom:.57,boredom:.29}]},GJ={initialGameTime:8,initialMoney:20,initialHealth:100,initialPlayerSkill:50,initialDifficulty:50,initialMomentum:50,initialPlotA:0,initialPlotB:0,initialPlotC:0,initialKnobValue:0,initialPosition:0,initialRegion:"midwest",initialMonthlyListeners:2e3,initialBuzz:1,minBuzz:-3,maxBuzz:3,minMonthlyListeners:0,maxMonthlyListeners:1e5,minMoney:0,maxMoney:9999,minHealth:0,maxHealth:100,minSkill:0,maxSkill:100,minDifficulty:0,maxDifficulty:100,minMomentum:0,maxMomentum:100,minPlot:0,maxPlot:100,minKnobValue:0,maxKnobValue:100},Yr={gravityX:0,gravityY:.5,magneticStrength:.005,magneticRadius:50,magneticTargetColor:Dt.mediumGray,magneticTargetInactiveColor:Dt.mediumDarkGray,magneticSnapThreshold:15,magneticConstraintStiffness:1,magneticConstraintDamping:.1},vl={regions:{west:{name:"West",displayName:"West",color:Dt.mediumGray,description:"The vast western frontier"},southwest:{name:"Southwest",displayName:"Southwest",color:Dt.mediumLightGray,description:"Desert landscapes and canyons"},south:{name:"South",displayName:"South",color:Dt.lightGray,description:"Southern hospitality and warmth"},midwest:{name:"Midwest",displayName:"Midwest",color:Dt.mediumDarkGray,description:"Heartland of America"},northeast:{name:"Northeast",displayName:"Northeast",color:Dt.darkGray,description:"Historic cities and coastlines"}},connections:{west:["southwest","south","midwest"],southwest:["west","south"],south:["midwest","west","southwest"],midwest:["west","south","northeast"],northeast:["midwest","south"]},showsPerRegion:3,startingRegion:"midwest",regionChoiceUI:{leftRegionOffset:-150,rightRegionOffset:150,regionChoiceY:.6,regionChoiceDepth:5e4,regionChoiceFontSize:"24px",regionChoiceColor:Dt.white,regionChoiceBackgroundColor:Dt.black,regionChoiceBackgroundAlpha:.8,regionChoicePadding:20,regionChoiceCornerRadius:10,regionChoiceStrokeColor:Dt.white,regionChoiceStrokeWidth:2}};class UJ{textDisplayCallbacks=[];menuAutoCompleteStepCount=0;menuAutoCompleteTimer=null;menuCountdownText=null;menuCountdownTimer=null;currentMenuAutoCompleteType=null;postShopSequenceActive=!1;postShopSequenceStage="idle";destinationSequenceInProgress=!1;destinationSelectedName=null;destinationTransitioning=!1;suppressPostCloseProcessingOnce=!1;lastMenuOpenedType=null;lastMenuOpenTime=0;lastClosedMenuType=null;lastMenuCloseTime=0;SLIDER_WIDTH=de.sliderWidth;SLIDER_HEIGHT=de.sliderHeight;SLIDER_Y_OFFSET=de.sliderYOffset;SLIDER_TRACK_COLOR=de.sliderTrackColor;SLIDER_CORNER_RADIUS=de.sliderCornerRadius;SLIDER_HANDLE_WIDTH=de.sliderHandleWidth;SLIDER_HANDLE_HEIGHT=de.sliderHandleHeight;SLIDER_HANDLE_COLOR=de.sliderHandleColor;SLIDER_HANDLE_CORNER_RADIUS=de.sliderHandleCornerRadius;SLIDER_TRACK_DEPTH=de.sliderTrackDepth;SLIDER_HANDLE_DEPTH=de.sliderHandleDepth;LABELS_DEPTH=de.labelsDepth;METER_DEPTH=de.meterDepth;START_LABEL_OFFSET=de.startLabelOffset;TURN_KEY_LABEL_OFFSET=de.turnKeyLabelOffset;LABELS_FONT_SIZE=de.labelsFontSize;LABELS_COLOR=de.labelsColor;METER_WIDTH=de.meterWidth;METER_HEIGHT=de.meterHeight;METER_Y_OFFSET=de.meterYOffset;METER_BACKGROUND_COLOR=de.meterBackgroundColor;METER_CORNER_RADIUS=de.meterCornerRadius;METER_FILL_COLOR=de.meterFillColor;METER_TEXT_OFFSET=de.meterTextOffset;MOMENTUM_DECAY=de.momentumDecay;MAX_VELOCITY=de.maxVelocity;virtualPetMenuStepCount=0;GRAVITY=de.gravity;SENSITIVITY=de.sensitivity;START_THRESHOLD=de.startThreshold;START_INCREMENT=de.startIncrement;MENU_PRIORITIES={TURN_KEY:110,START:100,TUTORIAL_INTERRUPT:95,PAUSE:90,SAVE:85,REGION_CHOICE:80,GAME_OVER:75,STORY:74,NOVEL_STORY:74,STORY_OUTCOME:74,EXIT:73,CYOA:70,DESTINATION:65,DESTINATION_INFO:66,SHOW:66,BAND_SLIDE:66,OBSTACLE:60,POTHOLE:55,SHOP:73,VIRTUAL_PET:45,MORAL_DECISION:45,PET_STORY:40,TUTORIAL:20};MENU_CATEGORIES={PERSISTENT:["START","PAUSE","GAME_OVER","TURN_KEY"],TEMPORARY:["OBSTACLE","EXIT","SHOP","SAVE"],ONE_TIME:["CYOA","STORY","NOVEL_STORY","STORY_OUTCOME","DESTINATION","DESTINATION_INFO","SHOW","BAND_SLIDE","MORAL_DECISION","REGION_CHOICE"],OVERLAY:["TUTORIAL","PET_STORY"]};scene;saveManager;currentDialog=null;audioDebugMenu;audioManager;menuStack=[];currentDisplayedMenuType=null;queuedMenus=[];storySequenceInProgress=!1;isExitOrShopOpen(){return this.currentDisplayedMenuType==="EXIT"||this.currentDisplayedMenuType==="SHOP"?!0:this.menuStack.some(m=>m.type==="EXIT"||m.type==="SHOP")}canPauseNow(){const m=this.menuStack[this.menuStack.length-1],T=this.currentDisplayedMenuType||m?.type||null;return!(T&&["EXIT","SHOP","CYOA","DESTINATION","REGION_CHOICE","STORY","NOVEL_STORY","STORY_OUTCOME","VIRTUAL_PET"].includes(T))}toggleAudioDebugMenu(){this.audioDebugMenu&&this.audioDebugMenu.toggle()}showAudioDebugMenu(){this.audioDebugMenu&&this.audioDebugMenu.show()}hideAudioDebugMenu(){this.audioDebugMenu&&this.audioDebugMenu.hide()}async initializeAudioSystem(){try{await this.audioManager.initializeAudioContext(),this.audioManager.isInitialized?(this.audioManager.setBpm(166),this.audioManager.startAppMetronome(),this.audioManager.startMetronome()):(console.log("🎵 MenuManager: Audio context not initialized, will retry on user interaction"),this.setupUserInteractionHandler())}catch(m){console.error("🎵 MenuManager: Failed to initialize audio system:",m),this.setupUserInteractionHandler()}}setupFocusHandlers(){window.addEventListener("focus",()=>{this.audioManager.resumeMetronome()}),window.addEventListener("blur",()=>{this.audioManager.pauseMetronome()}),this.setupUserInteractionHandler(),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?this.audioManager.resumeMetronome():this.audioManager.pauseMetronome()}),window.addEventListener("pageshow",()=>{this.audioManager.resumeMetronome()}),window.addEventListener("pagehide",()=>{this.audioManager.pauseMetronome()})}setupUserInteractionHandler(){const m=async()=>{if(!this.audioManager.isInitialized)try{console.log("🎵 MenuManager: User interaction detected, attempting to initialize audio..."),await this.audioManager.forceInitializeAudioContext()?(this.audioManager.setBpm(166),this.audioManager.startAppMetronome(),this.audioManager.startMetronome(),console.log("🎵 MenuManager: Audio system initialized on user interaction"),document.removeEventListener("click",m),document.removeEventListener("keydown",m),document.removeEventListener("touchstart",m)):(console.log("🎵 MenuManager: Audio context still not initialized after user interaction"),this.setupUserInteractionHandler())}catch(T){console.error("🎵 MenuManager: Failed to initialize audio on user interaction:",T),this.setupUserInteractionHandler()}};document.removeEventListener("click",m),document.removeEventListener("keydown",m),document.removeEventListener("touchstart",m),document.addEventListener("click",m),document.addEventListener("keydown",m),document.addEventListener("touchstart",m),console.log("🎵 MenuManager: User interaction handlers set up for audio initialization")}enqueueMenu(m,T){if(this.queuedMenus.some(O=>O.type===m)){console.log(`⏳ Menu '${m}' already queued, skipping duplicate`);return}console.log(`⏳ Queueing menu '${m}' until EXIT/SHOP closes`),this.queuedMenus.push({type:m,payload:T})}processQueuedMenus(){if(this.__dialogTransitioning){this.scene.time.delayedCall(30,()=>this.processQueuedMenus());return}if(this.isExitOrShopOpen())return;if(this.currentDialog){this.scene.time.delayedCall(60,()=>this.processQueuedMenus());return}if(this.storySequenceInProgress){console.log("⏳ Story sequence in progress - waiting for completion before processing queue"),console.log("⏳ Current displayed menu type:",this.currentDisplayedMenuType),this.scene.time.delayedCall(100,()=>this.processQueuedMenus());return}if(this.destinationSequenceInProgress){const T=this.queuedMenus[0];if(T&&!["DESTINATION_INFO","SHOW","STORY_OVERLAY","TURN_KEY"].includes(T.type)){console.log("⏳ Destination sequence in progress - waiting for completion before processing non-destination queue"),this.scene.time.delayedCall(100,()=>this.processQueuedMenus());return}}if(this.queuedMenus.length===0)return;const m=this.queuedMenus.shift();m&&this.scene.time.delayedCall(50,()=>{try{switch(m.type){case"CYOA":this.showCyoaMenu(m.payload);break;case"DESTINATION_INFO":m.payload&&this.showDestinationInfoMenu(m.payload.name);break;case"SHOW":this.showShowMenu();break;case"EXIT":m.payload?m.payload.shopCount!==void 0?this.showExitMenu(m.payload.shopCount,m.payload.exitNumber):this.showExitStoresCatalog(m.payload.exitNumber):this.showExitMenu();break;case"TUTORIAL_INTERRUPT":this.showTutorialInterrupt();break;case"STORY":this.showStoryMenu(m.payload);break;case"NOVEL_STORY":this.showNovelStory(m.payload);break;case"STORY_OVERLAY":m.payload&&typeof m.payload.title=="string"&&typeof m.payload.content=="string"&&this.showStoryOverlay(m.payload.title,m.payload.content);break;case"DESTINATION_INFO":m.payload&&this.showDestinationInfoMenu(m.payload.name);break;case"SHOW":this.showShowMenu();break;case"DESTINATION":this.showDestinationMenu(m.payload?.includeFinalShowStep);break;case"REGION_CHOICE":this.showRegionChoiceMenu(m.payload);break;case"OBSTACLE":this.showObstacleMenu(m.payload.obstacleType,m.payload.damage,m.payload.exitNumber);break;case"VIRTUAL_PET":this.showVirtualPetMenu(m.payload?.petIndex);break;case"MORAL_DECISION":this.showMoralDecisionMenu(m.payload);break;case"SAVE":this.showSaveMenu();break;case"POTHOLE":this.showPotholeMenu();break;case"SHOP":this.showShopMenu(m.payload);break;case"TURN_KEY":this.showTurnKeyMenu();break;case"GAME_OVER":this.showGameOverMenu();break;case"PAUSE":this.showPauseMenu();break;default:console.log("⚠️ Unknown queued menu type:",m.type)}}catch(T){console.warn("Failed to process queued menu",m,T)}this.scene.time.delayedCall(50,()=>this.processQueuedMenus())})}userDismissedMenuType=null;overlayManager;windowShapes;getWindowShapes(){try{const m=this.scene.scene.get("GameScene"),T=m&&m.windowShapes||this.windowShapes;return T&&(this.windowShapes=T),T||null}catch{return this.windowShapes||null}}isPausingMenuActive(){return!!(this.currentDialog||this.currentDisplayedMenuType||this.menuStack.length>0)}constructor(m){this.scene=m,this.saveManager=bo.getInstance(),this.overlayManager=new Fm(m),this.audioManager=Mn.getInstance(),this.scene.events.on("step",this.onGlobalStep,this),this.scene.events.on("showCyoaMenu",this.showCyoaMenu,this),this.scene.events.on("step",this.onStepEvent,this),this.audioDebugMenu=new NJ(m),this.scene.input.keyboard?.on("keydown-F12",()=>{this.toggleAudioDebugMenu()}),this.setupFocusHandlers(),this.scene.events.on("step",this.handleVirtualPetMenuStep,this);try{const T=this.scene.scene.get("GameScene"),O=T&&T.windowShapes;this.windowShapes=O||new Qv(this.scene)}catch{this.windowShapes=new Qv(this.scene)}this.scene.events.on("halfStep",T=>{try{this.windowShapes?.onHalfStep?.(T)}catch{}try{this.tickPotholeDialogsHalfStep()}catch{}}),this.scene.events.on("uiHalfStep",T=>{try{const O=this.scene.scene.get("AppScene");if(O&&O.gameStarted)return;this.windowShapes?.onHalfStep?.(T)}catch{}})}startMenuAutoComplete(m){if(m==="START"||m==="CYOA"||m==="DESTINATION"||m==="EXIT"||m==="SHOP")return;this.currentMenuAutoCompleteType=m,this.menuAutoCompleteStepCount=0;const T=this.scene.scene.get("AppScene");T&&!T.isPaused&&T.gameStarted?this.addMenuCountdown(m,"steps"):this.startMenuCountdownTimer(m)}stopMenuAutoComplete(){this.currentMenuAutoCompleteType=null,this.menuAutoCompleteStepCount=0,this.menuCountdownTimer&&(this.menuCountdownTimer.destroy(),this.menuCountdownTimer=null),this.menuCountdownText&&(this.menuCountdownText.destroy(),this.menuCountdownText=null)}onStepEvent(m){if(this.currentMenuAutoCompleteType&&this.currentMenuAutoCompleteType!=="START"){this.menuAutoCompleteStepCount++;const T=12-this.menuAutoCompleteStepCount;if(this.menuCountdownText&&this.menuCountdownText.scene&&this.menuCountdownText.active)this.menuCountdownText.setText(`Auto-complete in: ${T} steps`);else if(this.menuCountdownText=null,this.menuCountdownTimer){try{this.menuCountdownTimer.remove(!1)}catch{}this.menuCountdownTimer=null}this.menuAutoCompleteStepCount>=12&&this.autoCompleteCurrentMenu()}}startMenuCountdownTimer(m){let T=12;this.addMenuCountdown(m,"step-lengths"),this.menuCountdownTimer=this.scene.time.addEvent({delay:1e3,callback:()=>{if(T--,this.menuCountdownText&&this.menuCountdownText.scene&&this.menuCountdownText.active)this.menuCountdownText.setText(`Auto-complete in: ${T} step-lengths`);else{if(this.menuCountdownTimer){try{this.menuCountdownTimer.remove(!1)}catch{}this.menuCountdownTimer=null}this.menuCountdownText=null;return}T<=0&&this.autoCompleteCurrentMenu()},loop:!0,repeat:11})}addMenuCountdown(m,T){this.scene.time.delayedCall(100,()=>{const O=this.scene.cameras.main.width,I=this.scene.cameras.main.height,B=O/2,y=I/2;this.menuCountdownText=this.scene.add.text(B,y-100,`Auto-complete in: 12 ${T}`,{fontSize:"16px",color:"#ff6b6b",fontStyle:"bold",backgroundColor:"#000000",padding:{x:8,y:4}}),this.menuCountdownText.setOrigin(.5),this.menuCountdownText.setScrollFactor(0),this.menuCountdownText.setDepth(1e3),this.currentDialog&&(this.currentDialog.countdownText=this.menuCountdownText)})}autoCompleteCurrentMenu(){if(!this.currentMenuAutoCompleteType)return;const m=this.currentMenuAutoCompleteType;switch(this.stopMenuAutoComplete(),m){case"TURN_KEY":this.scene.time.delayedCall(500,()=>{this.closeDialog();const O=this.scene.scene.get("GameScene");O&&O.events.emit("turnKey")});break;case"CYOA":this.closeDialog();const T=this.scene.scene.get("GameScene");T&&T.resumeAfterCyoa(),this.scene.time.delayedCall(100,()=>this.processQueuedMenus());break;case"EXIT":case"SHOP":this.closeDialog();break;case"PAUSE":this.closeDialog();break;default:this.closeDialog();break}}canShowMenu(m){const T=this.MENU_PRIORITIES[m];if(!T)return!0;const O=this.menuStack[this.menuStack.length-1];if(m==="PAUSE"&&this.isPausingMenuActive()){const I=this.currentDisplayedMenuType||O?.type||"unknown";return console.log(`🚫 MenuManager: Ignoring PAUSE because a menu is active/on stack: '${I}'`),!1}if(O&&O.priority>T)return m==="EXIT"&&O.type==="CYOA"?(console.log("⚠️ Forcing EXIT to preempt CYOA"),this.clearCurrentDialog(),this.popSpecificMenu(O.type),!0):(console.log(`🚫 MenuManager: Cannot show ${m} menu (priority ${T}) - blocked by ${O.type} menu (priority ${O.priority})`),console.log("🚫 MenuManager: Current menu stack:",this.menuStack.map(I=>`${I.type}:${I.priority}`)),!1);if(this.isExitOrShopOpen()&&["CYOA","TUTORIAL_INTERRUPT","NOVEL_STORY","STORY","STORY_OUTCOME","DESTINATION","SAVE"].includes(m)){let I;try{I=this.menuStack[this.menuStack.length-1]?.config}catch{}return this.enqueueMenu(m,I),console.log(`⏳ MenuManager: Queued '${m}' until EXIT/SHOP closes`),!1}if(O&&O.priority<T){console.log(`⚠️ MenuManager: Preempting lower-priority menus for ${m} (priority ${T})`);const I=!!(this.currentDisplayedMenuType&&(this.currentDisplayedMenuType==="EXIT"||this.currentDisplayedMenuType==="SHOP"))||this.menuStack.some(B=>B.type==="EXIT"||B.type==="SHOP");this.menuStack=this.menuStack.filter(B=>B.priority>=T);try{this.clearCurrentDialog()}catch{}I&&(this._resumeOnNextClose=!0)}return console.log(`✅ MenuManager: Can show ${m} menu (priority ${T})`),!0}pushMenu(m,T){const O=this.MENU_PRIORITIES[m];O?(this.menuStack.push({type:m,priority:O,config:T}),console.log(`📚 MenuManager: Pushed ${m} menu (priority ${O}) to stack. Stack now:`,this.menuStack.map(I=>`${I.type}:${I.priority}`))):console.log(`⚠️ MenuManager: No priority found for menu type: ${m}`)}popMenu(){return this.menuStack.pop()||null}popSpecificMenu(m){const T=this.menuStack.findIndex(O=>O.type===m);if(T!==-1){const O=this.menuStack.splice(T,1)[0];return console.log(`🗑️ MenuManager: Popped ${m} menu from stack. Remaining stack:`,this.menuStack.map(I=>`${I.type}:${I.priority}`)),O}return console.log(`⚠️ MenuManager: Could not find ${m} menu in stack to pop. Current stack:`,this.menuStack.map(O=>`${O.type}:${O.priority}`)),null}clearMenusFromStack(m){const T=this.menuStack.length;this.menuStack=this.menuStack.filter(I=>I.type!==m);const O=T-this.menuStack.length;O>0&&console.log(`MenuManager: Cleared ${O} ${m} menu(s) from stack. Stack now:`,this.menuStack.map(I=>`${I.type}(${I.priority})`))}resumeGame(){const m=this.scene.scene.get("AppScene"),T=this.scene.scene.get("GameScene");m&&(m.isPaused=!1,console.log("MenuManager: Game resumed")),T&&T.carStarted&&T.carMechanics&&(T.carMechanics.resumeDriving(),console.log("MenuManager: Resumed CarMechanics driving")),T&&T.events.emit("gameResumed")}createWindowBackground(){const m=this.currentDialog.collageBackground,T=this.currentDialog.dialogWidth,O=this.currentDialog.dialogHeight;if(!m||!T||!O){console.error("❌ Missing references for window background creation");return}console.log("🎨 Creating window background with x texture");const I=this.scene.add.tileSprite(0,0,T,O,"x");I.setOrigin(0,0),I.setDepth(-2);const B=m.createGeometryMask();I.setMask(B),this.currentDialog.add(I),this.scene.events.on("postupdate",()=>{I&&I.active&&(I.tilePositionX-=.5,I.tilePositionY+=.3)}),this.currentDialog.backgroundSprite=I,this.currentDialog.geometryMask=B,console.log("✅ Window background created successfully")}pauseGame(){const m=this.scene.scene.get("AppScene"),T=this.scene.scene.get("GameScene");m&&(m.isPaused=!0,console.log("MenuManager: Game paused")),T&&T.carStarted&&T.carMechanics&&(T.carMechanics.pauseDriving(),console.log("MenuManager: Paused CarMechanics driving")),T&&T.events.emit("gamePaused")}showStoryOverlay(m,T){if(this.clearAllPotholeDialogs(!0),this.isExitOrShopOpen()){this.enqueueMenu("STORY_OVERLAY",{title:m,content:T});return}this.clearCurrentDialog();const O=this.scene.scene.get("GameScene");if(!O||!O.windowShapes){console.warn("Cannot create story overlay: GameScene or WindowShapes not available");return}const I=this.scene.cameras.main.width,B=this.scene.cameras.main.height,y=Math.floor(I*.85),P=Math.floor(B*.9),i=Math.floor((I-y)/2),u=Math.floor((B-P)/2),x=[m,T],c=[{text:"Continue",callback:()=>{console.log("Story overlay dismissed by user"),this.closeDialog()}}],h=O.windowShapes.createCYOADialog(i,u,y,P,x,c);h?(h.setDepth(12e4),this.pushMenu("STORY_OVERLAY"),this.currentDialog=h,this.currentDisplayedMenuType="STORY_OVERLAY",this.currentDialog.isStory=!0,this.currentDialog.stepsRemaining=10,console.log(`✨ Story overlay created with H menu styling: "${m}"`)):console.warn("Story overlay was queued (another narrative window is active)")}onGlobalStep(){if(this.currentDialog&&this.currentDialog.isStory&&(this.currentDialog.stepsRemaining-=1,this.currentDialog.stepsRemaining<=0))if(this.currentDialog.showContinueAfterSteps)try{const O=this.currentDialog;if(!O.__continueShown){O.__continueShown=!0;const I=O.containerHeight/2-50,B=this.scene.add.graphics();B.fillStyle(3355443,1),B.fillRoundedRect(-60,I-18,120,36,8),B.setInteractive(new lt.Geom.Rectangle(-60,I-18,120,36),lt.Geom.Rectangle.Contains);const y=this.scene.add.text(0,I,"Continue",{fontSize:"16px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5);B.on("pointerup",()=>{this.currentDialog.isStory=!1,this.closeDialog()}),this.currentDialog.add(B),this.currentDialog.add(y)}}catch{}else this.closeDialog();const m=this.potholeCreationCountdown;if(m&&m.remaining>0)if(this.getCurrentStep()!==m.lastStep)this.potholeCreationCountdown=null;else{const O={title:"",content:"YOU HIT A POTHOLE!!!!1",buttons:[],width:90,height:60},I=this.createIndependentPotholeDialog(O);if(I){I.isPothole=!0,I.stepsRemaining=4,I.isIndependent=!0;try{const B=this.scene.cameras.main.width,y=this.scene.cameras.main.height,P=lt.Math.FloatBetween(.2,.8)*B,i=lt.Math.FloatBetween(.2,.8)*y;I.setPosition(P,i)}catch{}this.independentPotholeDialogs||(this.independentPotholeDialogs=[]),this.independentPotholeDialogs.push(I)}m.remaining-=1,m.remaining<=0&&(this.potholeCreationCountdown=null)}const T=this.independentPotholeDialogs||[];for(let O=T.length-1;O>=0;O--){const I=T[O];if(I&&!I.destroyed&&I.isPothole){if(I.stepsRemaining-=1,I.stepsRemaining<=0){const B=I.collageWindow;if(B&&B.scene)this.scene.tweens.add({targets:B,scaleX:.01,scaleY:.01,duration:160,ease:"Back.easeIn",onComplete:()=>{try{I.destroy()}catch{}}});else try{I.destroy()}catch{}T.splice(O,1)}}else I&&I.destroyed&&T.splice(O,1)}this.currentDialog&&this.currentDialog.isPetMenu&&this.updatePetMenuValues()}tickPotholeDialogsHalfStep(){const m=this.independentPotholeDialogs||[];if(!(!m||m.length===0))for(let T=m.length-1;T>=0;T--){const O=m[T];if(!(!O||O.destroyed||!O.isPothole)&&(typeof O.stepsRemaining!="number"&&(O.stepsRemaining=4),O.stepsRemaining-=.5,O.stepsRemaining<=0)){const I=O.collageWindow;if(I&&I.scene)this.scene.tweens.add({targets:I,scaleX:.01,scaleY:.01,duration:140,ease:"Back.easeIn",onComplete:()=>{try{O.destroy()}catch{}}});else try{O.destroy()}catch{}m.splice(T,1)}}}clearAllPotholeDialogs(m=!0){this.potholeCreationCountdown=null;const T=this.potholeCreationListener;if(T&&typeof this.scene.events.off=="function"){try{this.scene.events.off("postupdate",T)}catch{}this.potholeCreationListener=null}const O=this.independentPotholeDialogs||[];for(let I=O.length-1;I>=0;I--){const B=O[I];if(!B||B.destroyed||!B.isPothole){O.splice(I,1);continue}if(m&&B.collageWindow&&B.collageWindow.scene)this.scene.tweens.add({targets:B.collageWindow,scaleX:.01,scaleY:.01,duration:120,ease:"Back.easeIn",onComplete:()=>{try{B.destroy()}catch{}}});else try{B.destroy()}catch{}O.splice(I,1)}this.independentPotholeDialogs=O}updatePetMenuValues(){if(!this.currentDialog||!this.currentDialog.isPetMenu)return;const m=this.scene.scene.get("GameScene");if(!m||!m.getVirtualPet)return;const T=this.currentDialog.petIndex,O=m.getVirtualPet(T);if(!O)return;const I=this.currentDialog.foodBarFill,B=this.currentDialog.bathroomBarFill,y=this.currentDialog.boredBarFill,P=this.currentDialog.foodBarWidth;if(I){const i=O.getFoodValue?.()||0,u=Math.floor(P*(i/10));I.setDisplaySize(u,I.displayHeight)}if(B){const i=O.getBathroomValue?.()||0,u=Math.floor(P*(i/10));B.setDisplaySize(u,B.displayHeight)}if(y){const i=O.getBoredValue?.()||0,u=Math.floor(P*(i/10));y.setDisplaySize(u,y.displayHeight)}}showPetStoryUI(m){this.clearCurrentDialog();const T=this.scene.scene.get("GameScene");if(!T||!T.virtualPet)return;const O=T.virtualPet.getPetScreenXY?.();if(!O)return;const I=this.scene.cameras.main,B=90,y=50;let P=lt.Math.Clamp(O.x,B,I.width-B),i=O.y-80,u=i<y?O.y+90:i;u=lt.Math.Clamp(u,y,I.height-y);const x=P,c=u;try{this.scene.scene.bringToTop("MenuScene")}catch{}this.currentDialog=this.scene.add.container(x,c),this.currentDialog.setScrollFactor(0),this.currentDialog.setDepth(80010),this.currentDisplayedMenuType="PET_STORY";const h=this.scene.add.graphics();h.fillStyle(1973790,.9),h.fillRoundedRect(-80,-40,160,80,8),h.lineStyle(2,16777215,1),h.strokeRoundedRect(-80,-40,160,80,8),h.setScrollFactor(0),this.currentDialog.add(h);const o=T.virtualPet.getFoodValue?.()||0,r=120,a=12,d=0,n=this.scene.add.rectangle(0,d,r,a,0,.65);n.setStrokeStyle(1,16777215,.9),n.setScrollFactor(0);const p=Math.floor(r*(o/10)),g=this.scene.add.rectangle(-r/2,d,p,a-3,3066993,1).setOrigin(0,.5);g.setScrollFactor(0);const v=this.scene.add.text(0,-18,"FOOD",{fontSize:"12px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5);v.setScrollFactor(0),this.currentDialog.add([v,n,g]),this.currentDialog.stepsRemaining=3,this.currentDialog.isStory=!0,console.log("Pet story UI created at position:",x,c,"petXY:",O,"with depth:",this.currentDialog.depth)}showPetStoryUIForPet(m){this.clearCurrentDialog();const T=this.scene.scene.get("GameScene");if(!T||!T.getVirtualPet)return;const O=T.getVirtualPet(m);if(!O)return;const I=O.getPetScreenXY?.();if(!I)return;const B=this.scene.cameras.main,y=160,P=120;let i=lt.Math.Clamp(I.x,y/2,B.width-y/2),u=I.y-100;u-P/2<0&&(u=I.y+100);try{this.scene.scene.bringToTop("MenuScene")}catch{}this.currentDialog=this.scene.add.container(i,u),this.currentDialog.setScrollFactor(0),this.currentDialog.setDepth(80010),this.currentDisplayedMenuType="PET_STORY";const x=this.scene.add.graphics();x.fillStyle(1973790,.9),x.fillRoundedRect(-y/2,-P/2,y,P,8),x.lineStyle(2,16777215,1),x.strokeRoundedRect(-y/2,-P/2,y,P,8),x.setScrollFactor(0),this.currentDialog.add(x);const c=this.scene.add.text(0,-40,"FOOD",{fontSize:"12px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5);c.setScrollFactor(0);const h=100,o=10,r=this.scene.add.rectangle(0,-25,h,o,0,.6);r.setStrokeStyle(1,16777215,.8),r.setScrollFactor(0);const a=O.getFoodValue?.()||0,d=Math.floor(h*(a/10)),n=this.scene.add.rectangle(-h/2,-25,d,o-2,3066993,1);n.setOrigin(0,.5),n.setScrollFactor(0);const p=this.scene.add.text(0,-5,"BATH",{fontSize:"12px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5);p.setScrollFactor(0);const g=this.scene.add.rectangle(0,10,h,o,0,.6);g.setStrokeStyle(1,16777215,.8),g.setScrollFactor(0);const v=O.getBathroomValue?.()||0,f=Math.floor(h*(v/10)),b=this.scene.add.rectangle(-h/2,10,f,o-2,3447003,1);b.setOrigin(0,.5),b.setScrollFactor(0);const C=this.scene.add.text(0,30,"BORED",{fontSize:"12px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5);C.setScrollFactor(0);const _=this.scene.add.rectangle(0,45,h,o,0,.6);_.setStrokeStyle(1,16777215,.8),_.setScrollFactor(0);const M=O.getBoredValue?.()||0,E=Math.floor(h*(M/10)),A=this.scene.add.rectangle(-h/2,45,E,o-2,10181046,1);A.setOrigin(0,.5),A.setScrollFactor(0),this.currentDialog.add([c,r,n,p,g,b,C,_,A]),this.currentDialog.isPetMenu=!0,this.currentDialog.petIndex=m,this.currentDialog.foodBarFill=n,this.currentDialog.bathroomBarFill=b,this.currentDialog.boredBarFill=A,this.currentDialog.foodBarWidth=h}getCurrentMenuType(){const m=this.menuStack[this.menuStack.length-1];return m?m.type:null}getStackState(){return this.menuStack.length===0?"Empty stack":this.menuStack.map(m=>`${m.type}(${m.priority})`).join(" → ")}shouldRestorePreviousMenu(){if(this.menuStack.length===0||this.currentDialog)return!1;const m=this.menuStack[this.menuStack.length-1];if(m.type==="CYOA")return console.log("MenuManager: CYOA is one-time event, not restoring"),!1;if(m.type==="PAUSE")return console.log("MenuManager: PAUSE menu should not be restored"),!1;const T=this.MENU_CATEGORIES.PERSISTENT.includes(m.type),O=m.type==="EXIT"&&this.userDismissedMenuType==="SHOP";return!T&&!O?(console.log(`MenuManager: ${m.type} is not persistent, not restoring`),!1):m.type===this.userDismissedMenuType?(console.log(`MenuManager: User dismissed ${m.type}, not restoring`),!1):(console.log(O?`MenuManager: Restoring ${m.type} (parent menu after SHOP close)`:`MenuManager: Restoring ${m.type} (persistent menu)`),!0)}restorePreviousMenu(){if(this.menuStack.length===0)return;const m=this.menuStack[this.menuStack.length-1];switch(console.log(`MenuManager: Restoring previous menu: ${m.type}`),this.popMenu(),m.type){case"START":this.showStartMenu();break;case"PAUSE":this.showPauseMenu();break;case"TURN_KEY":const T=this.scene.scene.get("GameScene");T&&T.keysInIgnition?this.showTurnKeyMenu():console.log("MenuManager: Not restoring ignition menu - keys not in ignition");break;case"SAVE":this.showSaveMenu();break;case"OBSTACLE":m.config&&this.showObstacleMenu(m.config.type,m.config.damage);break;case"GAME_OVER":this.showGameOverMenu();break;case"EXIT":m.config?m.config.shopCount!==void 0?this.showExitMenu(m.config.shopCount,m.config.exitNumber):this.showExitStoresCatalog(m.config.exitNumber):this.showExitMenu();break;default:console.log(`MenuManager: No restoration logic for ${m.type}`);break}}showStartMenu(){if(!this.canShowMenu("START"))return;this.clearCurrentDialog(),this.pushMenu("START");const m=this.saveManager.load(),T=m&&m.steps>0;let O;if(T){const I=new Date(m.timestamp).toLocaleString();O={title:"INFINITY DRIVES",subtitle:"the official game that is an ad for Infinity Guise the new fake emo album by Summerbruise",content:`Welcome back! You have a saved game with ${m.steps} steps.
Saved: ${I}`,buttons:[{text:"Resume Game",onClick:()=>{this.closeDialog();const B=this.scene.scene.get("AppScene"),y=this.scene.scene.get("GameScene");B&&B.startGame(),y&&m&&y.loadGame(m.steps)},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}},{text:"Start Fresh",onClick:()=>{this.saveManager.clearSave(),this.closeDialog();const B=this.scene.scene.get("AppScene");B&&B.startGame()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]}}else O={title:"INFINITY DRIVES",subtitle:"the official game that is an ad for Infinity Guise the new fake emo album by Summerbruise",content:`you awake in a 2007 honda odyssey
you remember: you took a job as a tour manager for fake emo band summerbruise
its time to start`,texts:["you awake in a 2007 honda odyssey","you remember: you took a job as a tour manager for fake emo band summerbruise","its time to start"],buttons:[{text:"start",onClick:()=>{this.closeDialog();const I=this.scene.scene.get("AppScene");I&&I.startGame()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};try{const I=this.scene.cameras.main.width,B=this.scene.cameras.main.height;O.width=Math.floor(I*.85),O.height=Math.floor(B*.9)}catch{}this.createDialog(O,"START")}showPauseMenu(){if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing PAUSE until CYOA closes"),this.enqueueMenu("PAUSE");return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing PAUSE until STORY closes"),this.enqueueMenu("PAUSE");return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing PAUSE until DESTINATION closes"),this.enqueueMenu("PAUSE");return}if(this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing PAUSE until REGION_CHOICE closes"),this.enqueueMenu("PAUSE");return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing PAUSE until VIRTUAL_PET closes"),this.enqueueMenu("PAUSE");return}if(!this.canShowMenu("PAUSE")){try{const T=this.scene.scene.get("AppScene"),O=this.scene.scene.get("GameScene");T&&T.isPaused&&(T.isPaused=!1,O&&O.events.emit("gameResumed"),console.log("MenuManager: Ignored pause and reverted paused state due to active pausing menu"))}catch{}return}this.clearCurrentDialog(),this.pushMenu("PAUSE");const m={title:"PAUSE MENU",content:"Game is paused. Choose an option:",buttons:[{text:"Resume",onClick:()=>{this.closeDialog();const T=this.scene.scene.get("AppScene");if(T){T.isPaused=!1,console.log("Game resumed from pause menu"),typeof T.updatePauseButtonIcon=="function"&&T.updatePauseButtonIcon();const O=this.scene.scene.get("GameScene");O&&O.events.emit("gameResumed")}},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}},{text:"Restart",onClick:()=>{this.closeDialog(),window.location.reload()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};this.createDialog(m,"PAUSE"),this.startMenuAutoComplete("PAUSE")}showSaveMenu(){if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing SAVE until CYOA closes"),this.enqueueMenu("SAVE");return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing SAVE until DESTINATION closes"),this.enqueueMenu("SAVE");return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing SAVE until STORY closes"),this.enqueueMenu("SAVE");return}if(!this.canShowMenu("SAVE"))return;this.clearCurrentDialog(),this.pushMenu("SAVE"),this.pauseGame();const m=this.saveManager.load(),T={title:"SAVE MENU",content:m&&m.steps>0?`Current save: ${m.steps} steps (${m.timestamp})`:"No save data found",buttons:[{text:"Save Game",onClick:()=>{const O=this.scene.scene.get("AppScene");if(O){const I=O.getStep();this.saveManager.save(I),this.closeDialog()}},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}},{text:"Load Game",onClick:()=>{const O=this.saveManager.load();if(O&&O.steps>0){const I=this.scene.scene.get("GameScene");I&&I.loadGame(O.steps)}this.closeDialog()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}},{text:"Clear Save",onClick:()=>{this.saveManager.clearSave(),this.closeDialog()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}},{text:"Close",onClick:()=>{this.closeDialog()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};this.createDialog(T,"SAVE")}showPotholeMenu(){if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing POTHOLE until CYOA closes"),this.enqueueMenu("POTHOLE");return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing POTHOLE until STORY closes"),this.enqueueMenu("POTHOLE");return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing POTHOLE until DESTINATION closes"),this.enqueueMenu("POTHOLE");return}if(this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing POTHOLE until REGION_CHOICE closes"),this.enqueueMenu("POTHOLE");return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing POTHOLE until VIRTUAL_PET closes"),this.enqueueMenu("POTHOLE");return}try{this.scene.scene.get("GameScene")?.events.emit("potholeMenuShake")}catch{}const m=this.getCurrentSpeedPercentage(),T=Math.max(3,Math.min(20,Math.floor(m*.2)));this.potholeCreationCountdown?this.potholeCreationCountdown.remaining+=T:this.potholeCreationCountdown={remaining:T,lastStep:this.getCurrentStep()},this.potholeCreationListener||(this.potholeCreationListener=this.scene.events.on("postupdate",()=>{this.processPotholeCreationCountdown()}))}getCurrentSpeedPercentage(){try{const m=this.scene.scene.get("GameScene");if(m&&m.gameState)return m.gameState.getState().speedPercentage||0}catch{}return 0}getCurrentStep(){try{const m=this.scene.scene.get("GameScene");if(m&&m.gameState)return m.gameState.getState().step||0}catch{}return 0}processPotholeCreationCountdown(){const m=this.potholeCreationCountdown;if(m&&m.remaining>0){if(this.getCurrentStep()!==m.lastStep){this.potholeCreationCountdown=null;return}const T={title:"",content:"YOU HIT A POTHOLE!!!!1",buttons:[],width:90,height:60},O=this.createIndependentPotholeDialog(T);if(O){try{this.scene.scene.get("GameScene")?.events.emit("potholeMenuShake")}catch{}O.isPothole=!0,O.stepsRemaining=4,O.isIndependent=!0;try{const I=this.scene.cameras.main.width,B=this.scene.cameras.main.height,y=lt.Math.FloatBetween(.2,.8)*I,P=lt.Math.FloatBetween(.2,.8)*B;O.setPosition(y,P)}catch{}this.independentPotholeDialogs||(this.independentPotholeDialogs=[]),this.independentPotholeDialogs.push(O)}m.remaining-=1,m.remaining<=0&&(this.potholeCreationCountdown=null)}}createIndependentPotholeDialog(m){const T=this.scene.cameras.main.width,O=this.scene.cameras.main.height,I=m.width||90,B=m.height||60,y=this.scene.add.container(T/2,O/2);y.setScrollFactor(0),y.setDepth(5e4);const P=I/2,i=B/2;try{const u=this.getWindowShapes();if(u&&u.createCollageRect){const x=u.createCollageRect({x:-P,y:-i,width:I,height:B,fillColor:16777215,fillAlpha:1},!1,"window");if(x){x.setDepth(-1),x.setPosition(0,0),y.add(x);const c=`pothole_window_${Date.now()}_${Math.random().toString(36).slice(2,7)}`;try{u.registerAnimatedShape(c,x,"window",-P,-i,I,B)}catch(h){console.error("❌ Failed to register pothole window animation:",h)}x.__shapeId=c,x.setScale(.01),this.scene.tweens.add({targets:x,scaleX:1,scaleY:1,duration:200,ease:"Back.easeOut"}),y.collageWindow=x}}}catch(u){console.error("❌ Error creating pothole background:",u)}if(m.content){const u=I-12,x=String(m.content||"").trim(),c=this.scene.add.text(0,0,x,{fontSize:"12px",color:"#000000",wordWrap:{width:u,useAdvancedWrap:!0},align:"center"}).setOrigin(.5);c.setPosition(0,0),y.add(c)}return y}showTutorialInterrupt(){if(this.isExitOrShopOpen()){this.enqueueMenu("TUTORIAL_INTERRUPT");return}if(!this.canShowMenu("TUTORIAL_INTERRUPT"))return;this.clearCurrentDialog(),this.pushMenu("TUTORIAL_INTERRUPT");let m=8;const T={title:"TUTORIAL",content:"You have to take care of these little guys.",buttons:[{text:`Continue (${m})`,onClick:()=>{console.log("🎓 Tutorial interrupt manually closed"),this.closeDialog(),console.log("🎓 Emitting tutorialInterruptClosed event (manual)"),this.scene.scene.get("GameScene")?.events.emit("tutorialInterruptClosed")},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#27ae60",padding:{x:10,y:5}}}]};this.createDialog(T,"TUTORIAL_INTERRUPT"),this.currentDialog.tutorialCountdown=m;let O=this.currentDialog.buttonText;if(!O){const I=B=>{if(!(!B||!B.list))for(const y of B.list){if(y instanceof lt.GameObjects.Text&&typeof y.text=="string"&&y.text.includes("Continue"))return y;if(y.list){const P=I(y);if(P)return P}}};O=I(this.currentDialog)}O?(this.currentDialog.buttonText=O,console.log("🎓 Tutorial interrupt: Button text found and stored")):console.warn("🎓 Tutorial interrupt: Could not find button text object")}updateTutorialInterruptCountdown(){if(!this.currentDialog||this.currentDisplayedMenuType!=="TUTORIAL_INTERRUPT")return;const m=this.currentDialog.tutorialCountdown,T=this.currentDialog.buttonText;if(console.log(`🎓 Tutorial interrupt countdown update: current=${m}`),m!==void 0&&m>0){this.currentDialog.tutorialCountdown=m-1;const O=m-1;if(T){const I=O>0?`Continue (${O})`:"Continue";T.setText(I),console.log(`🎓 Tutorial interrupt countdown: ${O}`)}O<=0&&(console.log("🎓 Tutorial interrupt countdown reached 0 - auto-closing menu"),this.closeDialog(),console.log("🎓 Emitting tutorialInterruptClosed event"),this.scene.scene.get("GameScene")?.events.emit("tutorialInterruptClosed"))}}showExitMenu(m=3,T){if(console.log(`🚪 MenuManager: showExitMenu called with shopCount=${m}, exitNumber=${T}`),console.log("🚪 MenuManager: Current menu stack length:",this.menuStack.length),this.currentDisplayedMenuType==="VIRTUAL_PET")try{this.closeCurrentDialog()}catch{}if(this._lastExitNumber=T??this._lastExitNumber,this._lastShopCount=m??this._lastShopCount,this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing EXIT until CYOA closes"),this.enqueueMenu("EXIT",{shopCount:m,exitNumber:T});return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing EXIT until STORY closes"),this.enqueueMenu("EXIT",{shopCount:m,exitNumber:T});return}if(this.currentDisplayedMenuType==="EXIT"){console.log("⏳ Queueing EXIT until current EXIT closes"),this.enqueueMenu("EXIT",{shopCount:m,exitNumber:T});return}if(this.currentDisplayedMenuType==="SHOP"||this.menuStack.some(i=>i.type==="SHOP")){console.log("⏳ Queueing EXIT until SHOP closes"),this.enqueueMenu("EXIT",{shopCount:m,exitNumber:T});return}if(!this.canShowMenu("EXIT")){console.log("🚫 MenuManager: showExitMenu blocked by canShowMenu check");return}console.log("✅ MenuManager: showExitMenu proceeding after canShowMenu check"),this.clearCurrentDialog();let O=T??this._lastExitNumber,I=m??this._lastShopCount??3;if(O==null)for(let i=this.menuStack.length-1;i>=0;i--){const u=this.menuStack[i];if(u.type==="EXIT"&&u.config&&u.config.exitNumber!=null){O=u.config.exitNumber,I=u.config.shopCount??I;break}}if(O==null)try{this.scene.scene.get("GameScene")?.gameState?.getState()?.showsInCurrentRegion===0&&(O=1)}catch{}this.pushMenu("EXIT",{exitNumber:O,shopCount:I});let B;this._lastShopNames&&this._lastShopNames.length===I?(B=this._lastShopNames,console.log("🚪 MenuManager: Using persisted shop names:",B)):(B=this.generateShopNames(I),this._lastShopNames=B,console.log("🚪 MenuManager: Generated new shop names:",B));const y=B.map((i,u)=>{const x=this.getWeightedPrice(),c=this.formatPriceParts(x),h={text:i,onClick:()=>{this.handleExitShopChoiceWithPrice(i,x)}};return h.__priceFilled=c.filled,h.__priceEmpty=c.empty,h});y.push({text:"Close",onClick:()=>{this.closeDialog()}});const P={title:"EXIT",content:`Choose a shop to visit. (${m} shops available)`,buttons:y};this.createDialog(P,"EXIT");try{this.currentDialog.exitNumber=O,console.log("showExitMenu: attached dialog exitNumber=",O)}catch{}}showExitStoresCatalog(m){if(console.log(`🚪 MenuManager: showExitStoresCatalog called with exitNumber=${m}`),this.currentDisplayedMenuType==="VIRTUAL_PET")try{this.closeCurrentDialog()}catch{}if(this._lastExitNumber=m??this._lastExitNumber,this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing EXIT until CYOA closes"),this.enqueueMenu("EXIT",{exitNumber:m});return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing EXIT until STORY closes"),this.enqueueMenu("EXIT",{exitNumber:m});return}if(this.currentDisplayedMenuType==="EXIT"){console.log("⏳ Queueing EXIT until current EXIT closes"),this.enqueueMenu("EXIT",{exitNumber:m});return}if(!this.canShowMenu("EXIT")){console.log("🚫 MenuManager: showExitStoresCatalog blocked by canShowMenu check");return}this.clearCurrentDialog();let T=m??this._lastExitNumber;if(T==null)for(let y=this.menuStack.length-1;y>=0;y--){const P=this.menuStack[y];if(P.type==="EXIT"&&P.config&&P.config.exitNumber!=null){T=P.config.exitNumber;break}}this.pushMenu("EXIT",{exitNumber:T});const O=["regional gas station","gas station","motel","restaurant","weed store","car store","car doctor","psychic"],I=O.map(y=>{const P=this.getWeightedPrice(),i=this.formatPriceParts(P),u={text:y,onClick:()=>{this.handleExitShopChoiceWithPrice(y,P)}};return u.__priceFilled=i.filled,u.__priceEmpty=i.empty,u});I.push({text:"Close",onClick:()=>{this.closeDialog()}});const B={title:"EXIT (All Stores)",content:`Choose a store to test. (${O.length} total)`,buttons:I};this.createDialog(B,"EXIT");try{this.currentDialog.exitNumber=T}catch{}}showRegionChoiceMenu(m){if(this.isExitOrShopOpen()){this.enqueueMenu("REGION_CHOICE",m);return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing REGION_CHOICE until CYOA closes"),this.enqueueMenu("REGION_CHOICE",m);return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing REGION_CHOICE until VIRTUAL_PET closes"),this.enqueueMenu("REGION_CHOICE",m);return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing REGION_CHOICE until STORY closes"),this.enqueueMenu("REGION_CHOICE",m);return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing REGION_CHOICE until DESTINATION closes"),this.enqueueMenu("REGION_CHOICE",m);return}if(this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing REGION_CHOICE until current REGION_CHOICE closes"),this.enqueueMenu("REGION_CHOICE",m);return}if(!this.canShowMenu("REGION_CHOICE"))return;this.clearCurrentDialog(),this.pushMenu("REGION_CHOICE");const T=(m?.connectedRegions||[]).map(I=>({text:I,onClick:()=>{const B=this.scene.scene.get("GameScene");B&&B.selectRegion(I),this.closeDialog()}})),O={title:"Choose Next Region",content:`Current: ${m?.currentRegion||"unknown"}`,buttons:T};this.createDialog(O,"REGION_CHOICE")}getCurrentDifficulty(){try{const m=this.scene.scene.get("GameScene")?.gameState?.getState?.();if(!m)return 1;const T=m.currentRegion||vl.startingRegion,O=m.showsInCurrentRegion||0,I=vl.showsPerRegion||3,B=this.getRegionBaseDifficulty(T),y=Math.max(0,Math.min(1,O/Math.max(1,I)));return Math.min(5,B+y)}catch{return 1}}getRegionBaseDifficulty(m){return{midwest:1,south:2,southwest:3,west:4,northeast:5}[m]??1}getWeightedPrice(){const m=this.getCurrentDifficulty(),T={1:.2,2:.5,3:.25,4:.05},O={1:.25,2:.25,3:.25,4:.25},I=Math.max(0,Math.min(1,(m-1)/4)),B=[1,2,3,4].map(x=>T[x]*(1-I)+O[x]*I),y=B.reduce((x,c)=>x+c,0),P=B.map(x=>x<=0?0:x/(y||1)),i=Math.random();let u=0;for(let x=0;x<P.length;x++)if(u+=P[x],i<=u)return x+1;return 4}formatPriceParts(m){const T=Math.max(1,Math.min(4,Math.floor(m))),O="$".repeat(T),I="$".repeat(4-T);return{filled:O,empty:I}}generateShopNames(m){const T=["regional gas station","gas station","motel","restaurant","weed store","car store","car doctor","psychic"],O=[],I=new Set;for(let B=0;B<m;B++){let y,P=0;do y=T[Math.floor(Math.random()*T.length)],P++;while(I.has(y)&&P<20);I.add(y),O.push(y)}return O}handleExitShopChoice(m){this.handleExitShopChoiceWithPrice(m,this.getWeightedPrice())}handleExitShopChoiceWithPrice(m,T){try{console.log("Exit menu choice:",m,"priceTier",T)}catch{}this.showShopMenu({shopType:(m||"").toLowerCase(),priceTier:T});try{this.scene.events.emit("exitShopChosen",m)}catch{}}backToExitFromShop(){this.destroyCurrentDialogOnly(),this.popSpecificMenu("SHOP"),this.currentDisplayedMenuType=null;try{const m=this.menuStack[this.menuStack.length-1];m&&m.type==="EXIT"&&this.popSpecificMenu("EXIT")}catch{}this.showExitMenu(this._lastShopCount,this._lastExitNumber)}showShopMenu(m){if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing SHOP until CYOA closes"),this.enqueueMenu("SHOP",m);return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing SHOP until STORY closes"),this.enqueueMenu("SHOP",m);return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing SHOP until DESTINATION closes"),this.enqueueMenu("SHOP",m);return}if(this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing SHOP until REGION_CHOICE closes"),this.enqueueMenu("SHOP",m);return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing SHOP until VIRTUAL_PET closes"),this.enqueueMenu("SHOP",m);return}if(!this.canShowMenu("SHOP"))return;if(this.currentDialog){if(this.currentDialog.background){const o=this.currentDialog.background;o.overlayInstance?(console.log("MenuManager: Cleaning up overlay instance in showShopMenu"),o.overlayInstance.destroy()):o.destroy()}this.currentDialog.destroy(),this.currentDialog=null}this.pushMenu("SHOP");const T=this.scene.scene.get("GameScene"),O=T&&T.gameState?.getState()?.money||0,I=T&&T.getEncumbranceCount?.()||0,B=T&&T.getEncumbranceCapacity?.()||10,y=I>=B,P=this.scene.cache.json.get("shops")||{},i=(m?.shopType||"").toLowerCase(),u=m?.priceTier||this.getWeightedPrice();this._lastPriceTier=u;const x=P[i]||{};let c=[];if(x.type==="retail"&&x.items&&(c=(x.items[String(u)]||[]).slice().sort(()=>Math.random()-.5).slice(0,3).map(o=>({name:String(o.name),cost:Number(o.cost),effect:o.effect}))),x.type==="service"){if(i==="car doctor"){const o=x.pricing?.base||[30,60,100,150],r=o[Math.max(0,Math.min(o.length-1,u-1))],a={title:"car doctor",content:`they fixed this and this and that, $${r}`,buttons:[{text:"pay and heal",onClick:()=>this.handleServiceCharge("car doctor",r)},{text:"Back",onClick:()=>{this.backToExitFromShop()}},{text:"Close",onClick:()=>this.closeDialog()}]};this.createDialog(a,"SHOP");return}if(i==="psychic"){const o=x.pricing?.base||[20,35,55,80],r=o[Math.max(0,Math.min(o.length-1,u-1))],a={title:"psychic",content:"here's a rumor i heard",buttons:[{text:`pay $${r}`,onClick:()=>this.handleServiceCharge("psychic",r,!0)},{text:"Back",onClick:()=>{this.backToExitFromShop()}},{text:"Close",onClick:()=>this.closeDialog()}]};this.createDialog(a,"SHOP");return}if(i==="regional gas station"){const o=x.pricing?.base||[15,25,40,60],r=o[Math.max(0,Math.min(o.length-1,u-1))],a={title:"regional gas station",content:`they topped you off and wiped the windshield, $${r}`,buttons:[{text:`pay $${r}`,onClick:()=>this.handleServiceCharge("regional gas station",r)},{text:"Back",onClick:()=>{this.backToExitFromShop()}},{text:"Close",onClick:()=>this.closeDialog()}]};this.createDialog(a,"SHOP");return}}const h={title:i||"shop",content:`money: $${O}`,buttons:c.map(o=>{const r=O>=o.cost&&!y;return{text:`${String(o.name).toLowerCase()} - $${o.cost}`+(y?" (encumbrance full)":""),onClick:()=>{r&&this.handleShopPurchase(o.name,o.cost)},style:{fontSize:"16px",color:r?"#ffffff":"#666666",backgroundColor:r?"#34495e":"#222222",padding:{x:15,y:8}}}}).concat([{text:"Back",onClick:()=>{this.backToExitFromShop()},style:{fontSize:"16px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:6}}},{text:"Close",onClick:()=>this.closeDialog(),style:{fontSize:"16px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:6}}}])};this.createDialog(h,"SHOP")}handleShopPurchase(m,T){const O=this.scene.scene.get("GameScene");if(!O)return;const I=O.gameState;if(!I)return;try{const P=O.getEncumbranceCount?.()||0,i=O.getEncumbranceCapacity?.()||10;if(P>=i){console.log("Cannot purchase: encumbrance full");return}}catch{}const B=I.getState().money||0;if(B<T){console.log(`Cannot afford ${m} - need $${T}, have $${B}`);return}const y=B-T;I.updateState({money:y}),console.log(`Purchased ${m} for $${T}. Remaining money: $${y}`),this.refreshCurrentShopMenu();try{this.scene.events.emit("shopPurchase",{item:m,cost:T})}catch{}}refreshCurrentShopMenu(){if(this.currentDisplayedMenuType!=="SHOP"||!this.currentDialog)return;const m=this.scene.scene.get("GameScene"),T=m&&m.gameState?.getState()?.money||0,O=this._lastPriceTier||1,I=this.menuStack.find(u=>u.type==="SHOP")?.config?.shopType||"",B=this.scene.cache.json.get("shops")||{},y=I.toLowerCase(),P=B[y]||{};let i=[];if(P.type==="retail"&&P.items&&(i=(P.items[String(O)]||[]).slice().sort(()=>Math.random()-.5).slice(0,3).map(u=>({name:String(u.name),cost:Number(u.cost),effect:u.effect}))),P.type==="service"&&y==="car doctor"){const u=P.pricing?.base||[30,60,100,150],x=u[Math.max(0,Math.min(u.length-1,O-1))];this.updateCurrentDialogContent(`they fixed this and this and that, $${x}`,`Money: $${T}`);return}if(i.length>0){const u=i.map(x=>`${x.name}: $${x.cost}`).join(`
`);this.updateCurrentDialogContent(u,`Money: $${T}`)}}updateCurrentDialogContent(m,T){if(!this.currentDialog)return;const O=this.currentDialog.getByName("contentText");if(O&&O.setText(m),T){const I=this.currentDialog.getByName("titleText");I&&I.setText(T)}}handleServiceCharge(m,T,O){const I=this.scene.scene.get("GameScene");if(!I)return;const B=I.gameState;if(!B)return;const y=B.getState().money||0;y<T||(B.updateState({money:y-T}),m==="car doctor"&&B.updateState({health:10}),O&&console.log("psychic rumor: here's a rumor i heard"),this.refreshCurrentShopMenu())}destroyCurrentDialogOnly(){if(this.currentDialog){try{const I=this.currentDialog.collageWindow;if(I&&I.off&&(I.off("destroy"),I.removeAllListeners))try{I.removeAllListeners("destroy")}catch{}}catch{}try{const I=this.windowShapes||this.scene.scene.get("GameScene")?.windowShapes;if(I&&I.unregisterAnimatedShape){["hMenuAnimationId","cyoaAnimationId","animationId"].forEach(P=>{const i=this.currentDialog[P];i&&I.unregisterAnimatedShape(i)});const B=this.currentDialog.collageWindow;B&&B.__shapeId&&I.unregisterAnimatedShape(B.__shapeId);const y=P=>{try{(P&&P.list?P.list:[]).forEach(i=>{if(i&&i.type==="Graphics"){const u=i.animationId,x=i.cyoaAnimationId;u&&I.unregisterAnimatedShape(u),x&&I.unregisterAnimatedShape(x)}i&&i.list&&Array.isArray(i.list)&&y(i)})}catch{}};y(this.currentDialog)}}catch{}if(this.currentDialog.background){const I=this.currentDialog.background;I.overlayInstance?I.overlayInstance.destroy():I.destroy()}const m=this.currentDialog.backgroundSprite;m&&m.destroy&&m.destroy();const T=this.currentDialog.geometryMask;T&&T.destroy&&T.destroy();const O=this.currentDialog.subtitleElement;if(O&&O.pulseTween&&(O.pulseTween.stop(),O.pulseTween.destroy()),this.currentDialog.turnKeyDial){const I=this.currentDialog.turnKeyDial;I.sliderTrack&&I.sliderTrack.destroy(),I.handle&&I.handle.destroy()}if(this.currentDialog.dialLabel){const I=this.currentDialog.dialLabel;I.startLabel&&I.startLabel.destroy(),I.turnKeyLabel&&I.turnKeyLabel.destroy()}if(this.currentDialog.startMeter){const I=this.currentDialog.startMeter;I.meterBackground&&I.meterBackground.destroy(),I.meterFill&&I.meterFill.destroy(),I.meterText&&I.meterText.destroy()}this.currentDialog.pointerDownHandler&&this.scene.input.off("pointerdown",this.currentDialog.pointerDownHandler),this.currentDialog.pointerMoveHandler&&this.scene.input.off("pointermove",this.currentDialog.pointerMoveHandler),this.currentDialog.pointerUpHandler&&this.scene.input.off("pointerup",this.currentDialog.pointerUpHandler),this.currentDialog.momentumTimer&&this.currentDialog.momentumTimer.destroy(),this.currentDialog.countdownText&&(this.currentDialog.countdownText.destroy(),this.currentDialog.countdownText=null),this.textDisplayCallbacks.forEach(I=>{I&&I.destroy&&I.destroy()}),this.textDisplayCallbacks=[],this.currentDialog.destroy(),this.currentDialog=null}}showTurnKeyMenu(){if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing TURN_KEY until CYOA closes"),this.enqueueMenu("TURN_KEY");return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing TURN_KEY until STORY closes"),this.enqueueMenu("TURN_KEY");return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing TURN_KEY until DESTINATION closes"),this.enqueueMenu("TURN_KEY");return}if(this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing TURN_KEY until REGION_CHOICE closes"),this.enqueueMenu("TURN_KEY");return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing TURN_KEY until VIRTUAL_PET closes"),this.enqueueMenu("TURN_KEY");return}if(console.log("MenuManager: showTurnKeyMenu called"),console.log("MenuManager: Current stack before showTurnKeyMenu:",this.menuStack.map(O=>`${O.type}(${O.priority})`)),console.log("MenuManager: Current dialog exists:",!!this.currentDialog),console.log("MenuManager: Current displayed menu type:",this.currentDisplayedMenuType),console.log("MenuManager: Showing ignition menu"),!this.canShowMenu("TURN_KEY")){console.log("MenuManager: Cannot show TURN_KEY menu - blocked by higher priority");return}this.queuedMenus.length>0&&(console.log(`MenuManager: Clearing ${this.queuedMenus.length} queued menus for ignition priority`),this.queuedMenus=[]),this.clearCurrentDialog(),this.pushMenu("TURN_KEY"),console.log("MenuManager: Pushed TURN_KEY to stack. Stack now:",this.menuStack.map(O=>`${O.type}(${O.priority})`));const m={title:"IGNITION",content:"swipe up to turn keys, swipe down to remove",buttons:[]};this.createDialog(m,"TURN_KEY"),this.addTurnKeyDial(),console.log("MenuManager: Emitting ignitionMenuShown event"),this.scene.events.emit("ignitionMenuShown");const T=this.scene.scene.get("GameScene");T&&(console.log("MenuManager: Emitting ignitionMenuShown event on GameScene"),T.events.emit("ignitionMenuShown"))}addTurnKeyDial(){const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height,O=m/2,I=T/2,B=this.SLIDER_WIDTH,y=this.SLIDER_HEIGHT,P=O,i=I+this.SLIDER_Y_OFFSET,u=this.scene.add.graphics();u.fillStyle(this.SLIDER_TRACK_COLOR),u.fillRoundedRect(P-B/2,i-y/2,B,y,this.SLIDER_CORNER_RADIUS),u.setScrollFactor(0),u.setDepth(this.SLIDER_TRACK_DEPTH);const x=this.SLIDER_HANDLE_WIDTH,c=this.SLIDER_HANDLE_HEIGHT,h=this.scene.add.graphics();h.fillStyle(this.SLIDER_HANDLE_COLOR),h.fillRoundedRect(P-x/2,i+y/2-c,x,c,this.SLIDER_HANDLE_CORNER_RADIUS),h.setScrollFactor(0),h.setDepth(this.SLIDER_HANDLE_DEPTH);const o=this.scene.add.text(O,I+y/2+this.START_LABEL_OFFSET,"START",{fontSize:this.LABELS_FONT_SIZE,color:this.LABELS_COLOR,fontStyle:"bold"});o.setOrigin(.5),o.setScrollFactor(0),o.setDepth(this.LABELS_DEPTH);const r=this.scene.add.text(O,I-y/2+this.TURN_KEY_LABEL_OFFSET,"Turn Key",{fontSize:this.LABELS_FONT_SIZE,color:this.LABELS_COLOR,fontStyle:"bold"});r.setOrigin(.5),r.setScrollFactor(0),r.setDepth(this.LABELS_DEPTH);const a=this.METER_WIDTH,d=this.METER_HEIGHT,n=O,p=I+y/2+this.METER_Y_OFFSET,g=this.scene.add.graphics();g.fillStyle(this.METER_BACKGROUND_COLOR),g.fillRoundedRect(n-a/2,p-d/2,a,d,this.METER_CORNER_RADIUS),g.setScrollFactor(0),g.setDepth(this.METER_DEPTH);const v=this.scene.add.graphics();v.fillStyle(this.METER_FILL_COLOR),v.setScrollFactor(0),v.setDepth(this.METER_DEPTH);const f=this.scene.add.text(O,p+this.METER_TEXT_OFFSET,"START: 0%",{fontSize:this.LABELS_FONT_SIZE,color:this.LABELS_COLOR,fontStyle:"bold"});f.setOrigin(.5),f.setScrollFactor(0),f.setDepth(this.METER_DEPTH);let b=!1,C=0,_=0,M=0,E=0,A=0;const R=this.MOMENTUM_DECAY,L=this.MAX_VELOCITY,Y=this.GRAVITY,F=this.SENSITIVITY;let N=0;const z=this.START_THRESHOLD,U=this.START_INCREMENT,q=20;let Q=!1;const K=ht=>{b=!0,_=ht.y,M=ht.x,E=Date.now(),A=0},et=ht=>{if(!b)return;const dt=Date.now();if(dt-E>0){const vt=_-ht.y,ft=vt/y,gt=ht.x-M,wt=100,bt=Math.abs(vt)>Math.abs(gt)*2;if(vt>wt&&bt&&Math.abs(vt)>150){this.closeDialog();const xt=this.scene.scene.get("GameScene");xt&&xt.events.emit("removeKeys");return}if(Q)return;A=ft*F,A=lt.Math.Clamp(A,-L,L),C+=A,A=0,C=lt.Math.Clamp(C,0,1),J()}_=ht.y,M=ht.x,E=dt},H=()=>{b=!1,A=0},J=()=>{const ht=i+y/2-C*y-c/2;h.clear(),h.fillStyle(this.SLIDER_HANDLE_COLOR),h.fillRoundedRect(P-x/2,ht,x,c,this.SLIDER_HANDLE_CORNER_RADIUS)},X=()=>{const ht=N/q*a;v.clear(),v.fillStyle(this.METER_FILL_COLOR),v.fillRoundedRect(n-a/2,p-d/2,ht,d,this.METER_CORNER_RADIUS),f.setText(`START: ${Math.floor(N)}%`)},Z=()=>{Q?(C=1,J()):b||(A-=Y,Math.abs(A)>.001?(C+=A,C=lt.Math.Clamp(C,0,1),A*=R,J()):(C+=A,C=lt.Math.Clamp(C,0,1),J())),C>=z?(N+=U,N=Math.min(N,q),X(),N>=q&&!Q&&(console.log("Car started!"),Q=!0,console.log("Manual completion: Scheduling turnKey event in 500ms"),this.scene.time.delayedCall(500,()=>{console.log("Manual completion: Executing delayed turnKey event"),this.closeDialog();const ht=this.scene.scene.get("GameScene");ht?(console.log("Manual completion: Emitting turnKey event to GameScene"),ht.events.emit("turnKey")):console.error("Manual completion: GameScene not found for turnKey event")}))):N>0&&(N-=U*2,N=Math.max(N,0),X())},$=this.scene.time.addEvent({delay:16,callback:Z,loop:!0});this.scene.input.on("pointerdown",K);const it=ht=>et(ht),nt=()=>H();this.scene.input.on("pointermove",it),this.scene.input.on("pointerup",nt),this.currentDialog.pointerDownHandler=K,this.currentDialog.pointerMoveHandler=it,this.currentDialog.pointerUpHandler=nt;const at=this.scene.scene.get("GameScene");at&&at.input&&(at.input.enabled=!0,at.input.enabled=!1,this.currentDialog.__restoreInput=()=>{try{at.input.enabled=!0}catch{}}),this.currentDialog.momentumTimer=$,this.currentDialog.turnKeyDial={sliderTrack:u,handle:h},this.currentDialog.dialLabel={startLabel:o,turnKeyLabel:r},this.currentDialog.startMeter={meterBackground:g,meterFill:v,meterText:f}}showObstacleMenu(m,T,O){if(this.isExitOrShopOpen()){this.enqueueMenu("OBSTACLE",{obstacleType:m,damage:T,exitNumber:O});return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing OBSTACLE until CYOA closes"),this.enqueueMenu("OBSTACLE",{obstacleType:m,damage:T,exitNumber:O});return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing OBSTACLE until VIRTUAL_PET closes"),this.enqueueMenu("OBSTACLE",{obstacleType:m,damage:T,exitNumber:O});return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing OBSTACLE until STORY closes"),this.enqueueMenu("OBSTACLE",{obstacleType:m,damage:T,exitNumber:O});return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing OBSTACLE until DESTINATION closes"),this.enqueueMenu("OBSTACLE",{obstacleType:m,damage:T,exitNumber:O});return}if(this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing OBSTACLE until REGION_CHOICE closes"),this.enqueueMenu("OBSTACLE",{obstacleType:m,damage:T,exitNumber:O});return}if(!this.canShowMenu("OBSTACLE"))return;if(m==="exit"){console.log("🎭 showObstacleMenu(exit): incoming exitNumber=",O,"_lastExitNumber=",this._lastExitNumber);let B=O??this._lastExitNumber;if(console.log("🎭 showObstacleMenu(exit): after ?? operator, resolvedExitNumber=",B),B==null)try{const y=this.scene.scene.get("GameScene")?.carMechanics?.getPlannedCyoa?.();if(Array.isArray(y)){const P=y.find(i=>i.isExitRelated&&i.exitNumber!=null);P&&(B=P.exitNumber)}}catch{}console.log("🎭 showObstacleMenu(exit): after fallback logic, resolvedExitNumber=",B),this._lastExitNumber=B??this._lastExitNumber,console.log("🎭 showObstacleMenu(exit): resolved exitNumber=",B,"updated _lastExitNumber=",this._lastExitNumber),console.log("🎭 showObstacleMenu(exit): calling showExitMenu with damage=",T,"exitNumber=",B),this.showExitMenu(T,B);return}this.clearCurrentDialog(),this.pushMenu("OBSTACLE",{type:m,damage:T});const I={title:"COLLISION!",content:`You hit a ${m}! Damage: ${T}%`,buttons:[{text:"Continue",onClick:()=>{this.closeDialog();const B=this.scene.scene.get("GameScene");B&&B.resumeAfterCollision()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};this.createDialog(I,"OBSTACLE")}showCyoaMenu(m){if(this.isExitOrShopOpen()){this.enqueueMenu("CYOA",m);return}if(this.currentDisplayedMenuType==="SAVE"){console.log("⏳ Queueing CYOA until SAVE closes"),this.enqueueMenu("CYOA",m);return}if(this.currentDisplayedMenuType==="DESTINATION"||this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing CYOA until DESTINATION/REGION_CHOICE closes"),this.enqueueMenu("CYOA",m);return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing CYOA until VIRTUAL_PET closes"),this.enqueueMenu("CYOA",m);return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing CYOA until STORY closes"),this.enqueueMenu("CYOA",m);return}if(console.log(`🎭 CYOA (H-style): Creating CYOA ${m.cyoaId}`),console.log("MenuManager: Current menu stack before CYOA:",this.menuStack.map(O=>`${O.type}(${O.priority})`)),console.log("MenuManager: Current displayed menu type:",this.currentDisplayedMenuType),this.currentDisplayedMenuType==="CYOA"){console.log("🎭 CYOA already displayed, ignoring duplicate request");return}if(this.menuStack.some(O=>O.type==="CYOA")){console.log("🎭 CYOA already on stack, ignoring duplicate request");return}if(!this.canShowMenu("CYOA")){console.log("MenuManager: Cannot show CYOA menu - blocked by higher priority");return}this.clearCurrentDialog(),this.pushMenu("CYOA",m),this.pauseGame();const T={title:"CYOA",content:"choose your path",buttons:[{text:"ok",onClick:()=>{this.closeDialog(),this.resumeGame(),this.popSpecificMenu("CYOA")}},{text:"no",onClick:()=>{this.closeDialog(),this.resumeGame(),this.popSpecificMenu("CYOA")}}]};this.createDialog(T,"CYOA")}showStoryMenu(m){if(this.clearAllPotholeDialogs(!0),this.isExitOrShopOpen()){this.enqueueMenu("STORY",m);return}if(this.currentDisplayedMenuType==="SAVE"){console.log("⏳ Queueing STORY until SAVE closes"),this.enqueueMenu("STORY",m);return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing STORY until CYOA closes"),this.enqueueMenu("STORY",m);return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing STORY until VIRTUAL_PET closes"),this.enqueueMenu("STORY",m);return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing STORY until current story closes"),this.enqueueMenu("STORY",m);return}if(!this.canShowMenu("STORY"))return;this.clearCurrentDialog(),this.pushMenu("STORY",m),this.storySequenceInProgress=!0;const T=this.scene.scene.get("AppScene");T&&(T.isPaused=!0,console.log("MenuManager: Game paused for story menu"));const O={title:"STORY",content:m.isExitRelated?`A story unfolds near Exit ${m.exitNumber}...`:"A story unfolds on the road...",buttons:[{text:"Continue",onClick:()=>{this.closeDialog();const I=this.scene.scene.get("GameScene");I&&I.resumeAfterCyoa()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};this.createDialog(O,"STORY"),this.startMenuAutoComplete("STORY")}showNovelStory(m){if(this.clearAllPotholeDialogs(!0),this.isExitOrShopOpen()){this.enqueueMenu("NOVEL_STORY",m);return}if(this.currentDisplayedMenuType==="SAVE"){console.log("⏳ Queueing NOVEL_STORY until SAVE closes"),this.enqueueMenu("NOVEL_STORY",m);return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing NOVEL_STORY until CYOA closes"),this.enqueueMenu("NOVEL_STORY",m);return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing NOVEL_STORY until VIRTUAL_PET closes"),this.enqueueMenu("NOVEL_STORY",m);return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing NOVEL_STORY until current story closes"),this.enqueueMenu("NOVEL_STORY",m);return}if(console.log("MenuManager: showNovelStory called with:",m),console.log("MenuManager: canShowMenu check:",this.canShowMenu("NOVEL_STORY")),!this.canShowMenu("NOVEL_STORY")){console.log("MenuManager: Cannot show novel story menu - blocked");return}this.clearCurrentDialog(),this.pushMenu("NOVEL_STORY",m),this.storySequenceInProgress=!0;const T=this.scene.scene.get("AppScene");T&&(T.isPaused=!0,console.log("MenuManager: Game paused for novel story menu"));const O=this.scene.scene.get("GameScene");if(!O||!O.windowShapes){console.warn("Cannot create novel story: GameScene or WindowShapes not available");return}const I=this.scene.cameras.main.width,B=this.scene.cameras.main.height,y=Math.floor(I*.85),P=Math.floor(B*.9),i=Math.floor((I-y)/2),u=Math.floor((B-P)/2),x=`${m.storyline}-${m.event}`,c=m.eventData.text,h=[x,c],o=m.eventData.choices.map((a,d)=>({text:a.text,callback:()=>{this.scene.time.delayedCall(500,()=>{this.showStoryOutcome(m.storylineData,a.outcome,()=>{const n=this.scene.scene.get("GameScene");if(n&&n.storyManager){const p=n.storyManager;p.isDebugStoryActive()?(console.log(`Debug Story: Choice made - ${a.outcome}`),this.closeDialog()):(console.log(`Real Story: Making choice - ${a.outcome}`),p.makeChoice(a.outcome))}else this.closeDialog()})})}})),r=O.windowShapes.createCYOADialog(i,u,y,P,h,o);r?(r.setDepth(12e4),this.currentDialog=r,this.currentDisplayedMenuType="NOVEL_STORY",console.log(`✨ Novel story dialog created with H menu styling: "${x}"`)):console.warn("Novel story dialog was queued (another narrative window is active)")}showStoryOutcome(m,T,O){if(!this.canShowMenu("STORY_OUTCOME"))return;this.clearMenusFromStack("NOVEL_STORY"),this.clearCurrentDialog(),this.pushMenu("STORY_OUTCOME"),this.pauseGame();const I=m.outcomes[T]||m.outcomes.a,B="Outcome",y=this.scene.scene.get("GameScene");if(y&&y.windowShapes){const P=this.scene.cameras.main.width,i=this.scene.cameras.main.height,u=Math.floor(P*.85),x=Math.floor(i*.9),c=Math.floor((P-u)/2),h=Math.floor((i-x)/2),o=y.windowShapes.createCYOADialog(c,h,u,x,[B,I],[{text:"Continue",callback:()=>{if(o&&o.scene){console.log("🗑️ Destroying story outcome WindowShapes container");const a=this.scene.scene.get("GameScene");a&&a.windowShapes&&a.windowShapes.activeNarrativeWindow===o&&(console.log("🔄 Clearing activeNarrativeWindow reference for story outcome"),a.windowShapes.activeNarrativeWindow=null),o.destroy()}this.clearMenusFromStack("STORY_OUTCOME"),this.currentDisplayedMenuType=null;const r=this.scene.scene.get("GameScene");r&&r.windowShapes?r.windowShapes.waitForActiveWindowClear(()=>{r&&r.storyManager&&(console.log("📖 Completing story after outcome window cleared"),r.storyManager.completeStoryAfterOutcome()),this.resumeGame(),this.storySequenceInProgress=!1,console.log("📖 Story sequence completed - processing queued menus"),this.scene.time.delayedCall(100,()=>this.processQueuedMenus()),O()}):this.scene.time.delayedCall(500,()=>{r&&r.storyManager&&(console.log("📖 Completing story after outcome window closed (fallback)"),r.storyManager.completeStoryAfterOutcome()),this.resumeGame(),this.storySequenceInProgress=!1,console.log("📖 Story sequence completed - processing queued menus (fallback)"),this.scene.time.delayedCall(100,()=>this.processQueuedMenus()),O()})}}]);o&&o.setDepth(12e4)}else{const P={title:B,content:I,buttons:[{text:"Continue",onClick:()=>{this.scene.time.delayedCall(500,()=>{const i=this.scene.scene.get("GameScene");i&&i.storyManager&&(console.log("📖 Completing story after outcome window closed (fallback)"),i.storyManager.completeStoryAfterOutcome()),O()})},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};this.createDialog(P,"STORY_OUTCOME")}}showGameOverMenu(){if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing GAME_OVER until CYOA closes"),this.enqueueMenu("GAME_OVER");return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing GAME_OVER until STORY closes"),this.enqueueMenu("GAME_OVER");return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing GAME_OVER until DESTINATION closes"),this.enqueueMenu("GAME_OVER");return}if(this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing GAME_OVER until REGION_CHOICE closes"),this.enqueueMenu("GAME_OVER");return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing GAME_OVER until VIRTUAL_PET closes"),this.enqueueMenu("GAME_OVER");return}if(!this.canShowMenu("GAME_OVER"))return;this.clearCurrentDialog(),this.pushMenu("GAME_OVER");const m={title:"GAME OVER",content:"Time's up! You lost. Better luck next time!",buttons:[{text:"Restart Game",onClick:()=>{this.closeDialog(),window.location.reload()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};this.createDialog(m,"GAME_OVER")}showCYOAMenu(m){if(!this.canShowMenu("CYOA"))return;this.clearCurrentDialog(),this.pushMenu("CYOA");const T={title:"CYOA",content:m?.text||"Choose your path.",buttons:[{text:m?.optionA||"Option A",onClick:()=>{}},{text:m?.optionB||"Option B",onClick:()=>{}}]};if(this.createDialog(T,"CYOA"),m?.imageKey)try{const O=this.scene.add.image(0,-110,m.imageKey);O.setOrigin(.5),O.setScrollFactor(0);const I=Math.min(280/(O.width||280),120/(O.height||120));O.setScale(I),this.currentDialog.add(O)}catch{}else{const O=this.scene.add.graphics();O.lineStyle(1,16777215,.5),O.strokeRoundedRect(-140,-170,280,100,6),this.currentDialog.add(O)}this.currentDialog.list.filter(O=>O instanceof lt.GameObjects.Text).filter(O=>O.text===(m?.optionA||"Option A")||O.text===(m?.optionB||"Option B")).forEach(O=>{O.removeAllListeners("pointerdown"),O.on("pointerdown",()=>{const I=O.text===(m?.optionA||"Option A")?m?.followA||"You chose A":m?.followB||"You chose B";this.clearCurrentDialog();const B={title:"Result",content:I,buttons:[{text:"Close",onClick:()=>this.closeDialog()}]};this.createDialog(B,"CYOA")})})}showMoralDecisionMenu(m){if(this.isExitOrShopOpen()){this.enqueueMenu("MORAL_DECISION",m);return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing MORAL_DECISION until CYOA closes"),this.enqueueMenu("MORAL_DECISION",m);return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing MORAL_DECISION until VIRTUAL_PET closes"),this.enqueueMenu("MORAL_DECISION",m);return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing MORAL_DECISION until STORY closes"),this.enqueueMenu("MORAL_DECISION",m);return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing MORAL_DECISION until DESTINATION closes"),this.enqueueMenu("MORAL_DECISION",m);return}if(this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing MORAL_DECISION until REGION_CHOICE closes"),this.enqueueMenu("MORAL_DECISION",m);return}if(!this.canShowMenu("MORAL_DECISION"))return;this.clearCurrentDialog(),this.pushMenu("MORAL_DECISION");const T={title:"MORAL DECISION",content:m?.text||"What would you do?",buttons:[{text:m?.optionA||"Option A",onClick:()=>{}},{text:m?.optionB||"Option B",onClick:()=>{}}]};this.createDialog(T,"MORAL_DECISION");try{const O=this.scene.scene.get("GameScene");if(O){const I=m?.petIndex??0;if(O.getVirtualPet?.(I)){const B=this.scene.add.ellipse(0,-110,60,60,16764006,1);B.setStrokeStyle(2,0,1),B.setScrollFactor(0),this.currentDialog.add(B),this.scene.tweens.add({targets:B,y:B.y-3,duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"});const y=this.scene.add.text(0,-140,`Pet ${I+1}`,{fontSize:"14px",color:"#ffffff",fontStyle:"bold",stroke:"#000000",strokeThickness:1}).setOrigin(.5);y.setScrollFactor(0),this.currentDialog.add(y)}}}catch{}this.currentDialog.list.filter(O=>O instanceof lt.GameObjects.Text).filter(O=>O.text===(m?.optionA||"Option A")||O.text===(m?.optionB||"Option B")).forEach(O=>{O.removeAllListeners("pointerdown"),O.on("pointerdown",()=>{const I=O.text===(m?.optionA||"Option A")?m?.followA||"You chose A":m?.followB||"You chose B";this.clearCurrentDialog();const B={title:"Result",content:I,buttons:[{text:"Close",onClick:()=>this.closeDialog()}]};this.createDialog(B,"MORAL_DECISION")})})}showVirtualPetMenu(m){if(console.log("MenuManager: showVirtualPetMenu called with petIndex:",m),console.log("MenuManager: Current menu stack before VIRTUAL_PET:",this.menuStack.map(h=>`${h.type}(${h.priority})`)),console.log("MenuManager: Current displayed menu type:",this.currentDisplayedMenuType),this.isExitOrShopOpen()){this.enqueueMenu("VIRTUAL_PET",{petIndex:m});return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing VIRTUAL_PET until CYOA closes"),this.enqueueMenu("VIRTUAL_PET",{petIndex:m});return}if(this.currentDisplayedMenuType==="STORY_OUTCOME"&&(console.log("🧹 Clearing lingering STORY_OUTCOME from stack to allow VIRTUAL_PET"),this.clearMenusFromStack("STORY_OUTCOME"),this.currentDisplayedMenuType=null,this.clearCurrentDialog(),this.resumeGame()),this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"){console.log("⏳ Queueing VIRTUAL_PET until STORY closes"),this.enqueueMenu("VIRTUAL_PET",{petIndex:m});return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing VIRTUAL_PET until DESTINATION closes"),this.enqueueMenu("VIRTUAL_PET",{petIndex:m});return}if(this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing VIRTUAL_PET until REGION_CHOICE closes"),this.enqueueMenu("VIRTUAL_PET",{petIndex:m});return}if(!this.canShowMenu("VIRTUAL_PET")){console.log("MenuManager: Cannot show VIRTUAL_PET menu - blocked by higher priority");return}this.clearCurrentDialog(),this.pushMenu("VIRTUAL_PET"),this.scene.events.emit("gamePaused");let T=null,O=[];try{O=this.scene.scene.get("GameScene")?.virtualPets,O&&O.length&&m!==void 0&&m>=0&&m<O.length&&(T=O[m]?.getBandMember?.())}catch(h){console.warn("Failed to get band member data:",h)}const I=T?.name||"Band Member",B=T?.role||"Unknown Role";T?.description;const y=T&&m!==void 0&&m>=0&&O[m]?.getCurrentMood?.()||"content",P=T?.storyProgression?`${T.storyProgression.current}/${T.storyProgression.max}`:"1/3";let i="";if(T?.preferences){const h=T.preferences,o=Object.entries(h.food).filter(([d,n])=>n!==1),r=Object.entries(h.weed).filter(([d,n])=>n!==1),a=Object.entries(h.phone).filter(([d,n])=>n!==1);o.length>0&&(i+=`Food: ${o.map(([d,n])=>`${d} (${n}x)`).join(", ")}`),r.length>0&&(i+=`${i?" | ":""}Weed: ${r.map(([d,n])=>`${d} (${n}x)`).join(", ")}`),a.length>0&&(i+=`${i?" | ":""}Phone: ${a.map(([d,n])=>`${d} (${n}x)`).join(", ")}`)}let u="";if(T?.specialTraits){const h=T.specialTraits,o=[];h.boredomDecayRate&&h.boredomDecayRate!==1&&o.push(`Boredom -${((1-h.boredomDecayRate)*100).toFixed(0)}% decay rate`),h.bathroomDecayRate&&h.bathroomDecayRate!==1&&o.push(`Bathroom -${((1-h.bathroomDecayRate)*100).toFixed(0)}% decay rate`),h.canCallWife&&o.push("Wife calls available"),h.phoneEffect&&h.phoneEffect!=="normal"&&o.push(`Phone: ${h.phoneEffect} effect`),h.sleepProbability&&h.sleepProbability>0&&o.push(`${Math.round(h.sleepProbability*100)}% sleep chance`),h.awakeReactionFrequency&&h.awakeReactionFrequency!==1&&o.push(`+${((h.awakeReactionFrequency-1)*100).toFixed(0)}% awake reactions`),h.lovesAllSnacks&&o.push("All snacks +50% value"),u=o.join(" | ")}const x=`${B}

Mood: ${y} | Story: ${P}

${i?`${i}
`:""}${u?`${u}`:""}`,c={title:I,content:x,buttons:[{text:"Close",onClick:()=>{this.closeDialog();const h=this.scene.scene.get("GameScene");h&&h.events.emit("gameResumed")}}]};if(this.createDialog(c,"VIRTUAL_PET"),this.setupVirtualPetMenuAutoClose(),m!==void 0&&m>=0)try{const h=this.scene.scene.get("GameScene"),o=h?.virtualPets;if(o&&o[m]){const r=o[m].getPetSprite?.();if(r){const a=this.scene.add.ellipse(0,-50,r.width,r.height,r.fillColor,r.fillAlpha);a.setStrokeStyle(r.lineWidth,r.strokeColor,r.strokeAlpha),a.setScrollFactor(0),this.currentDialog.add(a);const d=String(m+1),n=this.scene.add.text(0,-50,d,{fontSize:"16px",color:"#ffffff",fontStyle:"bold",stroke:"#000000",strokeThickness:2}).setOrigin(.5);n.setScrollFactor(0),this.currentDialog.add(n)}}if(h){let r;try{m!==void 0&&m>=0&&h.getVirtualPet&&(r=h.getVirtualPet(m))}catch{}if(!r)return;const a=r.getFoodMeterElements(),d=r.getBathroomMeterElements?.(),n=r.getBoredMeterElements?.(),p=this.scene.add.text(0,20,"FOOD",{fontSize:"16px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5);p.setScrollFactor(0);const g=120,v=15,f=this.scene.add.rectangle(0,45,g,v,0,.6);f.setStrokeStyle(2,16777215,.8),f.setScrollFactor(0);const b=r.getFoodValue?.()||0,C=Math.floor(g*(b/10)),_=this.scene.add.rectangle(-g/2,45,C,v-4,3066993,1);_.setOrigin(0,.5),_.setScrollFactor(0);const M=this.scene.add.text(0,70,"BATH",{fontSize:"16px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5);M.setScrollFactor(0);const E=this.scene.add.rectangle(0,95,g,v,0,.6);E.setStrokeStyle(2,16777215,.8),E.setScrollFactor(0);const A=lt.Math.Clamp(r?.bathroomValue??0,0,10),R=this.scene.add.rectangle(-g/2,95,Math.floor(g*(A/10)),v-4,3447003,1).setOrigin(0,.5);R.setScrollFactor(0);const L=this.scene.add.text(0,120,"BORED",{fontSize:"16px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5);L.setScrollFactor(0);const Y=this.scene.add.rectangle(0,145,g,v,0,.6);Y.setStrokeStyle(2,16777215,.8),Y.setScrollFactor(0);const F=lt.Math.Clamp(r?.boredValue??0,0,10),N=this.scene.add.rectangle(-g/2,145,Math.floor(g*(F/10)),v-4,10181046,1).setOrigin(0,.5);N.setScrollFactor(0),this.currentDialog.add([p,f,_,M,E,R,L,Y,N])}}catch(h){console.log("Could not create pet copy in menu:",h)}}showDestinationMenu(m=!1){if(this.__dialogTransitioning){this.enqueueMenu("DESTINATION",{includeFinalShowStep:m});return}const T=this.scene.time.now||Date.now();if(this.lastClosedMenuType&&(this.lastClosedMenuType==="CYOA"||this.lastClosedMenuType==="STORY"||this.lastClosedMenuType==="NOVEL_STORY")&&T-this.lastMenuCloseTime<150){this.enqueueMenu("DESTINATION",{includeFinalShowStep:m});return}if(this.isExitOrShopOpen()){this.enqueueMenu("DESTINATION",{includeFinalShowStep:m});return}if(this.currentDisplayedMenuType==="SAVE"){console.log("⏳ Queueing DESTINATION until SAVE closes"),this.enqueueMenu("DESTINATION",{includeFinalShowStep:m});return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing DESTINATION until CYOA closes"),this.enqueueMenu("DESTINATION",{includeFinalShowStep:m});return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing DESTINATION until VIRTUAL_PET closes"),this.enqueueMenu("DESTINATION",{includeFinalShowStep:m});return}if(this.currentDisplayedMenuType==="STORY_OUTCOME"&&(console.log("🧹 Clearing lingering STORY_OUTCOME from stack to allow DESTINATION"),this.clearMenusFromStack("STORY_OUTCOME"),this.currentDisplayedMenuType=null,this.clearCurrentDialog(),this.resumeGame()),this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"){console.log("⏳ Queueing DESTINATION until STORY closes"),this.enqueueMenu("DESTINATION",{includeFinalShowStep:m});return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing DESTINATION until current DESTINATION closes"),this.enqueueMenu("DESTINATION",{includeFinalShowStep:m});return}if(!this.canShowMenu("DESTINATION"))return;try{const I=this.scene.scene.get("AppScene"),B=this.scene.scene.get("GameScene");I&&(I.isPaused=!0),B&&B.events.emit("gamePaused")}catch{}this.clearCurrentDialog(),this.pushMenu("DESTINATION"),this.currentDisplayedMenuType="DESTINATION";const O={title:"DESTINATION",content:"Choose a destination.",buttons:[{text:"Gas Station",onClick:()=>{this.destinationTransitioning||this.startDestinationFlow("gas station")}},{text:"Motel",onClick:()=>{this.destinationTransitioning||this.startDestinationFlow("motel")}},{text:"Restaurant",onClick:()=>{this.destinationTransitioning||this.startDestinationFlow("restaurant")}}]};this.createDialog(O,"DESTINATION")}startDestinationFlow(m){if(this.destinationTransitioning)return;this.destinationTransitioning=!0,this.destinationSequenceInProgress=!0,this.destinationSelectedName=m;const T=this.scene.scene.get("GameScene");T&&(T.carStarted=!1,T.gameState.updateState({carStarted:!1}),console.log("MenuManager: Car state reset for new driving sequence"));const O=this.scene.scene.get("AppScene");O&&(O.isPaused=!0,console.log("MenuManager: Game paused for destination sequence")),this.closeDialog(),this.processDestinationSequenceStep(m,0)}processDestinationSequenceStep(m,T){const O=[{menuType:"DESTINATION_INFO",payload:{name:m},delay:0},{menuType:"SHOW",delay:0},{menuType:"STORY_OVERLAY",payload:{title:"the next day",content:""},delay:0},{menuType:"TURN_KEY",delay:0}];if(T>=O.length){this.destinationSequenceInProgress=!1,this.destinationSelectedName=null,this.destinationTransitioning=!1,console.log("🎬 Destination sequence completed");return}const I=O[T];this.enqueueMenu(I.menuType,I.payload),this.scene.time.delayedCall(10,()=>this.processQueuedMenus())}advanceDestinationSequence(m){if(!this.destinationSequenceInProgress||!this.destinationSelectedName)return;const T=[{menuType:"DESTINATION_INFO"},{menuType:"SHOW"},{menuType:"STORY_OVERLAY"},{menuType:"TURN_KEY"}],O=T.findIndex(I=>I.menuType===m);O>=0&&O<T.length-1?this.scene.time.delayedCall(100,()=>{this.processDestinationSequenceStep(this.destinationSelectedName,O+1)}):O===T.length-1&&(this.destinationSequenceInProgress=!1,this.destinationSelectedName=null,this.destinationTransitioning=!1,console.log("🎬 Destination sequence completed"))}showDestinationInfoMenu(m){if(!this.canShowMenu("DESTINATION_INFO"))return;this.clearCurrentDialog(),this.pushMenu("DESTINATION_INFO",{name:m});const T={title:`you went to the ${m}`,content:"",buttons:[{text:"Continue",onClick:()=>{this.closeDialog()}}]};this.createDialog(T,"DESTINATION_INFO")}showLaterOnTransition(){try{this.showStoryOverlay("later on…","")}catch{}}showNextDayTransition(){console.log("🎬 showNextDayTransition called");try{this.showStoryOverlay("the next day","")}catch(m){console.error("🎬 Error in showNextDayTransition:",m)}}showShowMenu(){if(!this.canShowMenu("SHOW"))return;this.clearCurrentDialog(),this.pushMenu("SHOW");const m={title:"SHOW",content:"the band plays a show",buttons:[{text:"Continue",onClick:()=>{this.closeDialog()}}]};this.createDialog(m,"SHOW")}showBandMembersSlowSlide(){this.clearCurrentDialog(),this.pushMenu("BAND_SLIDE");const m={title:"THE BAND",content:"",buttons:[]};this.createDialog(m,"BAND_SLIDE");const T=this.currentDialog;if(!T)return;const O=["mike","stanli","john","cora","mitch"].slice(0,5);T.storyTexts=O,T.currentTextIndex=0;const I=T.containerWidth||this.scene.cameras.main.width*.85,B=T.containerHeight||this.scene.cameras.main.height*.9,y=130,P=120,i=-B/2+y,u=B/2-P-i,x=Math.min(I*.6,220),c=()=>{if(!this.currentDialog||this.currentDialog!==T)return;if(T.currentTextIndex>=T.storyTexts.length){T.isStory=!0,T.stepsRemaining=4,T.showContinueAfterSteps=!0;return}const h=T.storyTexts.length,o=h>1?u/(h-1):0,r=T.currentTextIndex,a=i+r*o,d=r%2===0,n=Math.max(2,Math.floor(I*.02)),p=Math.max(12,Math.floor(I*.06)),g=d?-I/2+n:I/2-n,v=lt.Math.Between(0,p),f=d?g+v+x/2:g-v-x/2;try{const b=this.getWindowShapes(),C=f,_=a;if(b&&b.createNarrativeText){const M=b.createNarrativeText(C-x/2,_,String(T.storyTexts[r]),x,T);M&&M.background&&M.background.updateAnimationCoords&&M.background.updateAnimationCoords(T.x||0,T.y||0)}else{const M=this.scene.add.text(C,_,String(T.storyTexts[r]),{fontSize:"14px",color:"#ffffff"});M.setOrigin(.5,0),T.add(M)}}catch{}T.currentTextIndex++,this.scene.time.delayedCall(1600,c)};c()}createDialog(m,T){const O=this.scene.cameras.main.width,I=this.scene.cameras.main.height,B=m.width||300,y=m.height||350;this.currentDialog=this.scene.add.container(O/2,I/2),this.currentDialog.setScrollFactor(0),this.currentDialog.setDepth(8e4),this.currentDialog.setSize(B,y),this.currentDialog.containerWidth=B,this.currentDialog.containerHeight=y,this.currentDisplayedMenuType=T||null,this.__dialogTransitioning=!0;try{this.scene.events.emit("menuOpened",this.currentDisplayedMenuType)}catch{}const P=this.scene.scene.get("GameScene");P&&P.gameState&&P.gameState.updateState({hasOpenMenu:!0});try{const o=this.getWindowShapes();if(o&&o.createDitheredOverlay){const r={START:"hypercard_diamonds",TUTORIAL_INTERRUPT:"hypercard_diamonds",IGNITION:"hypercard_diamonds",CYOA:"hypercard_waves",EXIT:"hypercard_waves",SHOP:"hypercard_waves",STORY:"hypercard_wood",DESTINATION:"hypercard_wood"}[T||""];r&&(this.currentDialog.__overlayPattern=r,console.log(`🎨 MenuManager: Set overlay pattern for ${T} to ${r}`)),o.createDitheredOverlay(this.currentDialog),this.currentDialog.background=this.currentDialog.ditheredOverlay||null;try{const a=this.currentDialog.ditheredOverlay;a&&(a.setDepth(this.currentDialog.depth-1),a.disableInteractive?.())}catch{}}}catch{}const i=B/2,u=y/2;let x=null;try{const o=this.getWindowShapes();if(console.log("🔍 WindowShapes check:",{windowShapes:!!o,createCollageRect:!!(o&&o.createCollageRect)}),o&&o.createCollageRect&&(console.log("🏗️ Creating collage background..."),x=o.createCollageRect({x:-i,y:-u,width:B,height:y,fillColor:16777215,fillAlpha:1},!1,"window"),console.log("🏗️ Collage background created:",!!x),x)){x.setDepth(-1),x.setPosition(0,0);const r=!!this.scene.textures.get("x")?.key;!r&&!this.scene.textures.exists("fallback_gray")&&this.scene.textures.generate("fallback_gray",{data:["#888888"],pixelWidth:1,pixelHeight:1});const a=r?"x":"fallback_gray",d=this.scene.add.tileSprite(0,0,B,y,a);d.setOrigin(0,0),d.setDepth(-2),d.setPosition(-i,-u),console.log("🎨 Background sprite positioned at:",d.x,d.y),this.currentDialog.add(d),this.scene.events.on("postupdate",()=>{d&&d.active&&(d.tilePositionX-=.5,d.tilePositionY+=.3)}),this.currentDialog.backgroundSprite=d,console.log("🎨 Window background created with texture:",a),console.log("🔍 Dialog container info:",{x:this.currentDialog.x,y:this.currentDialog.y,width:this.currentDialog.width,height:this.currentDialog.height,childrenCount:this.currentDialog.list.length,dialogWidth:B,dialogHeight:y}),this.currentDialog.add(x),this.currentDialog.collageWindow=x;const n=`menu_window_${Date.now()}_${Math.random().toString(36).slice(2,7)}`;try{o.registerAnimatedShape(n,x,"window",-i,-u,B,y),console.log("🎬 Registered window animation:",n)}catch(p){console.error("❌ Failed to register window animation:",p)}x.__shapeId=n;try{x.setScale(.01),this.scene.tweens.add({targets:x,scaleX:1,scaleY:1,duration:200,ease:"Back.easeOut"})}catch{}}}catch(o){console.error("❌ Error creating collage background:",o)}if(!x){const o=this.scene.add.graphics();o.fillStyle(3355443,.9),o.fillRoundedRect(-i,-u,B,y,10),o.lineStyle(2,16777215,1),o.strokeRoundedRect(-i,-u,B,y,10),o.setDepth(-1),this.currentDialog.add(o)}const c=`<< ${String(m.title||"")} >>`;if(m.title&&m.title.trim())try{const o=this.windowShapes||this.scene.scene.get("GameScene")?.windowShapes;if(o&&o.createNarrativeText){let r=-i-20;const a=y<120?-u+5:-u-12;let d=B-80;const n=this.scene.add.text(r,a,c,{fontSize:"20px",color:"#ffffff",align:"left",fontFamily:"Arial",padding:{x:8,y:6},wordWrap:{width:d,useAdvancedWrap:!0}});n.setOrigin(0,.5),n.setWordWrapWidth(d),n.setAlign("left"),n.setDepth(11);const p=n.getBounds(),g=o.createNarrativeBackground({x:p.x-8,y:p.y-8,width:p.width+16,height:p.height+16,fillColor:0,shapeType:"narrativeBackground"},!0);if(g.setDepth(10),this.currentDialog.add(g),this.currentDialog.add(n),m.subtitle){let v=i-2-80;const f=a+40+20;let b=d-20;const C=m.subtitle,_=this.scene.add.text(v,f,C,{fontSize:"12px",color:"#ffffff",align:"right",fontFamily:"Arial",fontStyle:"italic",padding:{x:8,y:6},wordWrap:{width:b,useAdvancedWrap:!0}});_.setOrigin(.5,.5),_.setWordWrapWidth(b),_.setAlign("right"),_.setDepth(10);const M=o.generateUniqueRotation?o.generateUniqueRotation():0;_.setRotation(M);const E=_.getBounds(),A=8,R=E.width+A*2,L=E.height+A*2,Y=this.scene.add.rectangle(v,f,R,L,0,0);Y.setDepth(12),Y.setRotation(M),Y.setInteractive({useHandCursor:!0}),console.log("🎵 Creating subtitle background manually with size:",R,"x",L);const F=this.scene.add.graphics();F.fillStyle(0,1);const N=3,z={x:-R/2+lt.Math.Between(0,N),y:-L/2+lt.Math.Between(0,N)},U={x:R/2+lt.Math.Between(-N,0),y:-L/2+lt.Math.Between(0,N)},q={x:R/2+lt.Math.Between(-N,0),y:L/2+lt.Math.Between(-N,0)},Q={x:-R/2+lt.Math.Between(0,N),y:L/2+lt.Math.Between(-N,0)};F.beginPath(),F.moveTo(z.x,z.y),F.lineTo(U.x,U.y),F.lineTo(q.x,q.y),F.lineTo(Q.x,Q.y),F.closePath(),F.fillPath(),F.setPosition(v,f),F&&F.setRotation&&F.setRotation(M),F.setDepth(8);const K=[1,1.15];let et=1,H=0;if(_.__subtitleAnimation={steps:K,currentStep:H,stepDirection:et,elements:[_,F,Y],position:{x:v,y:f}},o.registerAnimatedShape){const J=`subtitle_pulse_${Date.now()}`;o.registerAnimatedShape(J,_,"subtitle_pulse",0,0,0,0),_.subtitleAnimationId=J}Y.on("pointerdown",J=>{J.event.stopPropagation(),console.log("🎵 Subtitle pointerdown")}),Y.on("pointerup",J=>{J.event.stopPropagation(),console.log("🎵 Subtitle clicked - opening Bandcamp"),window.open("https://summerbruise.bandcamp.com/album/infinity-guise","_blank")}),Y.on("pointerover",()=>{console.log("🎵 Subtitle hover")}),Y.on("pointerout",()=>{console.log("🎵 Subtitle hover out")}),this.currentDialog.add(F),this.currentDialog.add(Y),this.currentDialog.add(_),this.currentDialog.subtitleElement=_,this.currentDialog.subtitleBackground=F,this.currentDialog.subtitleClickArea=Y}}else{const r=this.scene.add.text(-i-3,-u-3,c,{fontSize:"20px",color:"#000000",fontStyle:"bold"}).setOrigin(0,0);if(this.currentDialog.add(r),m.subtitle){const a=this.scene.add.text(i-2,-u+28,m.subtitle,{fontSize:"12px",color:"#000000",fontStyle:"italic"}).setOrigin(1,0);this.currentDialog.add(a)}}}catch{const o=this.scene.add.text(-i-3,-u-3,c,{fontSize:"20px",color:"#000000",fontStyle:"bold"}).setOrigin(0,0);if(this.currentDialog.add(o),m.subtitle){const r=this.scene.add.text(i-2,-u+28,m.subtitle,{fontSize:"12px",color:"#000000",fontStyle:"italic"}).setOrigin(1,0);this.currentDialog.add(r)}}if(m.content){const o=this.windowShapes||this.scene.scene.get("GameScene")?.windowShapes;if(T==="START"&&m.texts&&Array.isArray(m.texts))this.currentDialog.storyTexts=m.texts,this.currentDialog.currentTextIndex=0,this.currentDialog.containerWidth=B,this.currentDialog.containerHeight=y,this.startTextSequence(this.currentDialog);else if(T==="POTHOLE"){const r=B-12,a=String(m.content||"").trim(),d=this.scene.add.text(0,0,a,{fontSize:"12px",color:"#000000",wordWrap:{width:r,useAdvancedWrap:!0},align:"center"}).setOrigin(.5);d.setPosition(0,0),this.currentDialog.add(d)}else{const r=String(m.content||"").split(`
`).map(b=>b.trim()).filter(Boolean),a=Math.max(1,r.length),d=40,n=y-d-110,p=-i+10,g=i-10,v=B-20,f=b=>{if(a===1)return-u+d+n/2;const C=n/(a-1);return-u+d+b*C};for(let b=0;b<a;b++){const C=r[b]||r[0],_=f(b),M=a===2&&b===1,E=M?g-v:p;try{if(o&&o.createNarrativeText)o.createNarrativeText(E,_,C,v,this.currentDialog);else{const A=T==="VIRTUAL_PET"?"10px":"16px",R=this.scene.add.text(0,0,C,{fontSize:A,color:"#000000",wordWrap:{width:v},align:M?"right":"left"}).setOrigin(M?1:0,.5);R.setPosition(M?g:p,_),this.currentDialog.add(R)}}catch{}}}}if(T!=="START"){const o=m.content?u-70:u-90,r=50;m.buttons.forEach((a,d)=>{const n=o-(m.buttons.length-1-d)*r,p=this.scene.add.container(0,n);p.setDepth((this.currentDialog.depth||0)+2),p.setScrollFactor(0),this.currentDialog.add(p);try{this.currentDialog.bringToTop?.(p)}catch{}const g=/Close/i.test(a.text),v=g?120:160,f=g?30:34,b=v/2,C=f/2;let _=null;try{const Y=this.scene.scene.get("GameScene"),F=Y&&Y.windowShapes||this.windowShapes;if(F&&(this.windowShapes=F),F&&F.createCollageButton&&(_=F.createCollageButton(-b,-C,v,f),_)){p.add(_);const N=`menu_btn_${Date.now()}_${Math.random().toString(36).slice(2,5)}`;try{F.registerAnimatedShape(N,_,"button",-b,-C,v,f)}catch{}_.__shapeId=N}}catch{}try{g&&p.setPosition(i-6-b,u-6-C)}catch{}const M=/regional gas station/i.test(a.text),E=M||a.text.length>16,A=M?`regional
gas station`:a.text,R=this.scene.add.text(0,0,A,{fontSize:M?"11px":E?"12px":"14px",color:"#000000",fontStyle:"bold"}).setOrigin(.5);p.add(R);try{const Y=a.__priceFilled,F=a.__priceEmpty;if(!/Close/i.test(a.text)&&(Y||F)){R.setOrigin(0,.5),R.x=-b+8,R.y=0;const N=this.scene.add.text(0,0,Y||"",{fontSize:"14px",color:"#000000",fontStyle:"bold"}).setOrigin(1,.5),z=this.scene.add.text(0,0,F||"",{fontSize:"14px",color:"#888888",fontStyle:"bold"}).setOrigin(1,.5),U=b-8;z.x=U,z.y=0,N.x=U-z.width,N.y=0,p.add(N),p.add(z)}}catch{}try{T==="TUTORIAL_INTERRUPT"&&/Continue/i.test(a.text)&&(this.currentDialog.buttonText=R)}catch{}const L=this.scene.add.rectangle(0,0,v,f,0,0);if(L.setOrigin(.5),L.setScrollFactor(0),L.setDepth((p.depth||1)+1),p.add(L),L.setInteractive({useHandCursor:!0}).on("pointerdown",Y=>{console.log("🔴 button pointerdown (hitTarget)",{x:Y.worldX,y:Y.worldY,depth:L.depth})}).on("pointerup",Y=>{console.log("🟢 button pointerup (hitTarget)",{x:Y.worldX,y:Y.worldY,depth:L.depth});try{this.scene.input.setDefaultCursor("default")}catch{}try{a.onClick()}catch(F){console.warn("button onClick error",F)}}),!_){const Y=this.scene.add.graphics();Y.fillStyle(3426654,1),Y.fillRoundedRect(-b,-C,v,f,6),Y.lineStyle(2,16777215,1),Y.strokeRoundedRect(-b,-C,v,f,6),p.addAt(Y,0),R.setColor("#ffffff")}try{const Y=this.scene.add.graphics();Y.lineStyle(1,16711680,1),Y.strokeRect(-b,-C,v,f),p.addAt(Y,0),Y.setAlpha(.9),Y.setDepth((p.depth||1)+1),this.scene.tweens.add({targets:Y,alpha:.2,yoyo:!0,repeat:5,duration:150}),this.scene.time.delayedCall(2e3,()=>{try{Y.destroy()}catch{}})}catch{}L.on("pointerover",()=>{try{this.scene.input.setDefaultCursor("pointer")}catch{}}),L.on("pointerout",()=>{try{this.scene.input.setDefaultCursor("default")}catch{}})})}this.__dialogTransitioning=!1;const h=this.scene.scene.get("GameScene");h&&h.updateAllTutorialOverlays&&h.updateAllTutorialOverlays()}createActionButtons(m){return m.map(T=>{const O=this.scene.add.text(0,0,T.text,{fontSize:"18px",color:T.style?.color||"#ffffff",backgroundColor:T.style?.backgroundColor||"#34495e",padding:{x:15,y:8}});return O.setInteractive().on("pointerdown",()=>{T.onClick()}).on("pointerover",()=>{this.scene.tweens.add({targets:O,scaleX:1.05,scaleY:1.05,duration:100})}).on("pointerout",()=>{this.scene.tweens.add({targets:O,scaleX:1,scaleY:1,duration:100})}),O})}createOverlayBackground(m,T,O,I=.3){const B=`menu_overlay_${Date.now()}`,y=this.overlayManager.createMenuOverlay(B,O,I);return y.container.overlayInstance=y,y.container}clearCurrentDialog(){if(this.currentDialog){this.__dialogTransitioning=!0;try{const m=this.currentDialog.collageWindow;if(m&&m.scene){m.once("destroy",()=>{this.finishDialogCleanup()}),this.scene.tweens.add({targets:m,scaleX:.01,scaleY:.01,duration:160,ease:"Back.easeIn",onComplete:()=>{try{m.destroy()}catch{}}});return}}catch{}this.finishDialogCleanup()}}finishDialogCleanup(){if(!this.currentDialog){this.__dialogTransitioning=!1,this.scene.time.delayedCall(10,()=>this.processQueuedMenus());return}try{const O=this.windowShapes||this.scene.scene.get("GameScene")?.windowShapes;if(O&&O.unregisterAnimatedShape){["hMenuAnimationId","cyoaAnimationId","animationId"].forEach(i=>{const u=this.currentDialog[i];u&&O.unregisterAnimatedShape(u)});const I=this.currentDialog.collageWindow;I&&I.__shapeId&&O.unregisterAnimatedShape(I.__shapeId);const B=this.currentDialog.backgroundSprite;B&&B.destroy&&B.destroy();const y=this.currentDialog.geometryMask;y&&y.destroy&&y.destroy();const P=i=>{try{(i&&i.list?i.list:[]).forEach(u=>{if(u&&u.type==="Graphics"){const x=u.animationId,c=u.cyoaAnimationId;x&&O.unregisterAnimatedShape(x),c&&O.unregisterAnimatedShape(c)}u&&u.list&&Array.isArray(u.list)&&P(u)})}catch{}};P(this.currentDialog)}}catch{}if(this.currentDialog.background){const O=this.currentDialog.background;O.overlayInstance?O.overlayInstance.destroy():O.destroy()}const m=this.currentDialog.subtitleElement;if(m&&m.pulseTween&&(m.pulseTween.stop(),m.pulseTween.destroy()),this.currentDialog.turnKeyDial){const O=this.currentDialog.turnKeyDial;O.sliderTrack&&O.sliderTrack.destroy(),O.handle&&O.handle.destroy()}if(this.currentDialog.dialLabel){const O=this.currentDialog.dialLabel;O.startLabel&&O.startLabel.destroy(),O.turnKeyLabel&&O.turnKeyLabel.destroy()}if(this.currentDialog.startMeter){const O=this.currentDialog.startMeter;O.meterBackground&&O.meterBackground.destroy(),O.meterFill&&O.meterFill.destroy(),O.meterText&&O.meterText.destroy()}if(this.currentDialog.pointerDownHandler&&this.scene.input.off("pointerdown",this.currentDialog.pointerDownHandler),this.currentDialog.pointerMoveHandler&&this.scene.input.off("pointermove",this.currentDialog.pointerMoveHandler),this.currentDialog.pointerUpHandler&&this.scene.input.off("pointerup",this.currentDialog.pointerUpHandler),this.currentDialog.momentumTimer&&this.currentDialog.momentumTimer.destroy(),this.currentDialog.countdownText&&(this.currentDialog.countdownText.destroy(),this.currentDialog.countdownText=null),this.textDisplayCallbacks.forEach(O=>{O&&O.destroy&&O.destroy()}),this.textDisplayCallbacks=[],this.currentDialog.destroy(),this.currentDialog=null,this._resumeOnNextClose){this._resumeOnNextClose=!1;try{const O=this.scene.scene.get("AppScene");O&&(O.isPaused=!1);const I=this.scene.scene.get("GameScene");I&&(I.carMechanics?.resumeDriving?.(),I.events.emit("gameResumed"))}catch{}}this.currentDisplayedMenuType==="EXIT"?this.resumeGameAfterDestinationMenu(!1):this.currentDisplayedMenuType==="SHOP"&&(this.shouldRestorePreviousMenu()||this.resumeGameAfterDestinationMenu(!1));const T=this.currentDisplayedMenuType||(this.menuStack[this.menuStack.length-1]?.type??null);if((!this.destinationSequenceInProgress||T==="STORY")&&(this.currentDisplayedMenuType=null),!this.suppressPostCloseProcessingOnce){const O=this.scene.scene.get("GameScene");O&&O.gameState&&O.gameState.updateState({hasOpenMenu:!1})}try{this.scene.events.emit("menuClosed")}catch{}if(this.suppressPostCloseProcessingOnce?this.userDismissedMenuType=null:this.shouldRestorePreviousMenu()?this.scene.time.delayedCall(100,()=>{this.restorePreviousMenu(),this.userDismissedMenuType=null}):this.userDismissedMenuType=null,!this.suppressPostCloseProcessingOnce){const O=this.scene.scene.get("GameScene");O&&O.updateAllTutorialOverlays&&O.updateAllTutorialOverlays()}this.__dialogTransitioning=!1,this.suppressPostCloseProcessingOnce||this.scene.time.delayedCall(50,()=>this.processQueuedMenus())}closeDialog(){console.log(`🚪 MenuManager: closeDialog() called. Current menu type: ${this.currentDisplayedMenuType}`),console.log("🚪 MenuManager: Menu stack before closeDialog:",this.menuStack.map(O=>`${O.type}:${O.priority}`));const m=this.currentDisplayedMenuType||(this.menuStack[this.menuStack.length-1]?.type??null);if(this.lastMenuOpenedType&&this.lastMenuOpenTime){const O=(this.scene.time.now||Date.now())-this.lastMenuOpenTime;if(O<350&&(this.lastMenuOpenedType==="SHOW"||this.lastMenuOpenedType==="DESTINATION_INFO")){console.log(`⏱️ Debounced close for recently opened ${this.lastMenuOpenedType} (${O}ms)`);return}}if((m==="STORY"||m==="STORY_OUTCOME"||m==="NOVEL_STORY")&&(this.storySequenceInProgress=!1,console.log("📖 Story sequence flag cleared due to manual close")),m==="EXIT"&&this.storySequenceInProgress&&(this.storySequenceInProgress=!1,console.log("📖 Story sequence flag cleared due to exit menu close")),(m==="DESTINATION_INFO"||m==="SHOW"||m==="STORY_OVERLAY")&&this.destinationSequenceInProgress&&this.advanceDestinationSequence(m),this.stopMenuAutoComplete(),this.userDismissedMenuType=m,m==="SHOP"&&(console.log("🛒 Closing SHOP menu - also closing parent EXIT menu"),this.menuStack.findIndex(O=>O.type==="EXIT")!==-1&&(console.log("🚪 Found parent EXIT menu, closing it as well"),this.popSpecificMenu("EXIT"),this.userDismissedMenuType="EXIT"),this.postShopSequenceActive&&this.postShopSequenceStage==="idle"&&(this.postShopSequenceStage="afterShop",this.scene.time.delayedCall(50,()=>this.showLaterOnTransition()))),m){const O=m;this.MENU_CATEGORIES.ONE_TIME.includes(O)?this.clearMenusFromStack(O):this.popSpecificMenu(O),["STORY","NOVEL_STORY","STORY_OUTCOME","PET_STORY","DESTINATION","DESTINATION_INFO","SHOW","STORY_OVERLAY","TURN_KEY"].includes(O)||this.resumeGame()}if(m==="TURN_KEY"){this.scene.events.emit("ignitionMenuHidden");const O=this.scene.scene.get("GameScene");O&&O.events.emit("ignitionMenuHidden")}else if(m==="CYOA"){const O=this.scene.scene.get("AppScene");O&&(O.isPaused=!1);const I=this.scene.scene.get("GameScene");I&&I.events.emit("gameResumed")}else if(m==="NOVEL_STORY"){const O=this.scene.scene.get("AppScene");O&&(O.isPaused=!1);const I=this.scene.scene.get("GameScene");I&&I.events.emit("gameResumed")}this.postShopSequenceActive&&(m==="STORY"&&this.postShopSequenceStage==="afterShop"?(this.postShopSequenceStage="afterLaterOn",this.scene.time.delayedCall(50,()=>this.showBandMembersSlowSlide())):m==="BAND_SLIDE"&&this.postShopSequenceStage==="afterLaterOn"?(this.postShopSequenceStage="afterBandSlide",this.scene.time.delayedCall(50,()=>this.showNextDayTransition())):m==="STORY"&&this.postShopSequenceStage==="afterBandSlide"&&(this.postShopSequenceActive=!1,this.postShopSequenceStage="idle",this.scene.time.delayedCall(50,()=>this.showTurnKeyMenu()))),this.destinationSequenceInProgress&&m==="TURN_KEY"&&(this.destinationSequenceInProgress=!1,this.destinationSelectedName=null,this.destinationTransitioning=!1,console.log("🎬 Destination sequence completed"),this.resumeGame()),this.clearCurrentDialog();const T=this.suppressPostCloseProcessingOnce;if(this.suppressPostCloseProcessingOnce&&(this.suppressPostCloseProcessingOnce=!1),this.lastClosedMenuType=m||null,this.lastMenuCloseTime=this.scene.time.now||Date.now(),this.menuStack.length>0){const O=this.menuStack[this.menuStack.length-1];this.currentDisplayedMenuType=O.type,console.log(`🔄 Updated currentDisplayedMenuType to: ${this.currentDisplayedMenuType}`)}else this.currentDisplayedMenuType=null,console.log("🔄 Cleared currentDisplayedMenuType (no menus on stack)");if(this._resumeOnNextClose){try{this.scene.scene.get("GameScene")?.resumeAfterCollision?.()}catch{}this._resumeOnNextClose=!1}T||this.scene.time.delayedCall(50,()=>this.processQueuedMenus()),console.log("🚪 MenuManager: Menu stack after closeDialog:",this.menuStack.map(O=>`${O.type}:${O.priority}`))}closeCurrentDialog(){console.log("MenuManager: closeCurrentDialog called"),this.userDismissedMenuType=this.currentDisplayedMenuType,this.currentDisplayedMenuType&&this.popSpecificMenu(this.currentDisplayedMenuType),this.clearCurrentDialog()}resumeGameAfterDestinationMenu(m){const T=this.scene.scene.get("AppScene");T&&(T.isPaused=!1)}setupVirtualPetMenuAutoClose(){this.virtualPetMenuStepCount=0,console.log("Virtual pet menu auto-close timer started (8 steps)")}handleVirtualPetMenuStep(m){if(this.currentDisplayedMenuType==="VIRTUAL_PET"&&(this.virtualPetMenuStepCount++,console.log(`Virtual pet menu step count: ${this.virtualPetMenuStepCount}/8`),this.virtualPetMenuStepCount>=8)){console.log("Virtual pet menu auto-closing after 8 steps"),this.closeDialog();const T=this.scene.scene.get("GameScene");T&&T.events.emit("gameResumed")}}startTextSequence(m){if(!m||!m.scene)return;const T=this.scene.add.rectangle(0,0,m.containerWidth,m.containerHeight,0,0);T.setInteractive(),T.on("pointerup",()=>{this.revealNextText(m)}),m.add(T),m.clickArea=T,this.revealNextText(m)}revealNextText(m){if(!m||!m.scene)return;if(m.currentTextIndex>=m.storyTexts.length){this.showStartButtons(m);return}const T=m.storyTexts[m.currentTextIndex],O=m.storyTexts.length,I=130,B=120,y=-m.containerHeight/2+I,P=m.containerHeight/2-B-y;let i;if(O===1)i=y+P/2;else{const g=P/(O-1);i=y+m.currentTextIndex*g}console.log(`📏 Positioning text ${m.currentTextIndex}: totalTexts=${O}, availableHeight=${P}, spacing=${O>1?P/(O-1):"N/A"}, textY=${i}`);const u=m.currentTextIndex%2===0,x=m.containerWidth||this.currentDialog?.containerWidth||this.scene.cameras.main.width*.85,c=Math.max(2,Math.floor(x*.02)),h=Math.max(12,Math.floor(x*.06)),o=Math.min(x*.6,220),r=Math.random(),a=(Math.random()-.5)*4,d=Math.floor(x*.03);let n;u?(n=-x/2+c+r*(h-2),n-=Math.random()*d):(n=x/2-c-r*(h-2),n+=Math.random()*d),n+=a,(this.currentDisplayedMenuType==="TUTORIAL_INTERRUPT"||this.currentDisplayedMenuType==="IGNITION")&&(n+=50),m.isPothole&&(n+=50);const p=Math.max(-x/2-d,Math.min(x/2+d,n));try{const g=this.windowShapes||this.scene.scene.get("GameScene")?.windowShapes;if(g&&g.createNarrativeText){console.log(`📝 Creating text ${m.currentTextIndex}: "${T}" at (${p}, ${i}), width: ${o}, side: ${u?"left":"right"}, ${u?"left":"right"}-justified`);const v=g.createNarrativeText(p,i,T,o,m,u?"left":"right");if(v&&v.textElement&&v.textElement.getBounds){const f=v.textElement.getBounds();console.log(`📏 Text ${m.currentTextIndex} bounds: top=${f.top}, bottom=${f.bottom}, height=${f.height}`)}}}catch{}m.currentTextIndex++}showStartButtons(m){if(!m||!m.scene)return;if(m.buttonsCreated){console.log("🔘 Buttons already created, skipping");return}m.buttonsCreated=!0;const T=m.clickArea;T&&T.scene&&(T.destroy(),m.clickArea=null);const O=m.containerHeight/2-60,I=m.containerWidth/2-53,B=this.scene.add.container(I,O);B.setDepth((m.depth||0)+2),B.setScrollFactor(0),m.add(B);const y=120,P=34,i=y/2,u=P/2;let x=null;try{const o=this.getWindowShapes();if(o&&o.createCollageButton&&(x=o.createCollageButton(-i,-u,y,P),x)){B.add(x);const r=`start_btn_${Date.now()}_${Math.random().toString(36).slice(2,5)}`;try{o.registerAnimatedShape(r,x,"button",-i,-u,y,P)}catch{}x.__shapeId=r}}catch{}const c=this.scene.add.text(0,0,"start game",{fontSize:"18px",color:"#000000",fontStyle:"bold"}).setOrigin(.5);B.add(c);const h=this.scene.add.rectangle(0,0,y,P,0,0);if(h.setOrigin(.5),h.setScrollFactor(0),h.setDepth((B.depth||1)+1),B.add(h),h.setInteractive({useHandCursor:!0}).on("pointerup",()=>{console.log("🟢 Start button clicked"),this.closeDialog();const o=this.scene.scene.get("AppScene");o&&o.startGame()}),!x){const o=this.scene.add.graphics();o.fillStyle(3426654,1),o.fillRoundedRect(-i,-u,y,P,6),o.lineStyle(2,16777215,1),o.strokeRoundedRect(-i,-u,y,P,6),B.addAt(o,0),c.setColor("#ffffff")}h.on("pointerover",()=>{try{this.scene.input.setDefaultCursor("pointer")}catch{}}),h.on("pointerout",()=>{try{this.scene.input.setDefaultCursor("default")}catch{}}),console.log(`🔘 Start button created with collage styling at (${I}, ${O})`)}}class WJ extends lt.Scene{menuManager;constructor(){super({key:"MenuScene"})}async create(){console.log("MenuScene create() called"),this.setupOverlayCamera(),this.menuManager=new UJ(this),this.menuManager.initializeAudioSystem(),this.events.on("showObstacleMenu",this.showObstacleMenu,this),this.events.on("showPauseMenu",this.showPauseMenu,this),this.events.on("showSaveMenu",this.showSaveMenu,this),this.events.on("showGameOverMenu",this.showGameOverMenu,this),this.events.on("showStartMenu",this.showStartMenu,this),this.events.on("showTurnKeyMenu",this.showTurnKeyMenu,this),this.events.on("showTutorialInterrupt",this.showTutorialInterrupt,this),this.events.on("showDestinationMenu",this.showDestinationMenu,this),this.events.on("showRegionChoiceMenu",this.showRegionChoiceMenu,this),this.events.on("showCyoaMenu",this.showCyoaMenu,this),this.events.on("showStoryMenu",this.showStoryMenu,this),this.events.on("showNovelStory",this.showNovelStory,this),this.events.on("showVirtualPetMenu",this.showVirtualPetMenu,this),this.events.on("showMoralDecision",this.showMoralDecision,this),this.events.on("showPetStoryUI",this.showPetStoryUI,this),this.events.on("showPotholeMenu",this.showPotholeMenu,this),this.events.on("showStoryOverlay",(m,T)=>{this.menuManager.showStoryOverlay(m,T)}),this.events.on("closeCurrentMenu",this.closeCurrentMenu,this),this.events.on("showExitStoresCatalog",this.showExitStoresCatalog,this),console.log("MenuScene ready - waiting for menu events");try{this.scene.get("GameScene")?.events.on("step",()=>{this.menuManager?.onGlobalStep?.()})}catch{}}setupOverlayCamera(){const m=this.cameras.add(0,0,this.cameras.main.width,this.cameras.main.height);m.setName("menuOverlayCamera"),m.setScroll(0,0),this.cameras.main=m,console.log("MenuScene: Overlay camera set up")}showStartMenu(){console.log("MenuScene: showStartMenu called"),this.menuManager.showStartMenu()}showPauseMenu(){console.log("MenuScene: showPauseMenu called - received event!"),this.menuManager.showPauseMenu()}showSaveMenu(){console.log("MenuScene: showSaveMenu called - received event!"),this.menuManager.showSaveMenu()}showGameOverMenu(){this.menuManager.showGameOverMenu()}showObstacleMenu(m,T,O){m==="pothole"?this.menuManager.showPotholeMenu():m==="exit"&&this.menuManager.showExitMenu(T||3,O)}showExitStoresCatalog(m){this.menuManager.showExitStoresCatalog(m)}showTurnKeyMenu(){this.menuManager.showTurnKeyMenu()}showTutorialInterrupt(){this.menuManager.showTutorialInterrupt()}showDestinationMenu(m){this.menuManager.showDestinationMenu(!!m)}showRegionChoiceMenu(m){this.menuManager.showRegionChoiceMenu(m)}showCYOA(m){this.menuManager.showCYOAMenu(m)}showCyoaMenu(m){this.menuManager.showCyoaMenu(m)}showStoryMenu(m){this.menuManager.showStoryMenu(m)}showNovelStory(m){console.log("MenuScene: showNovelStory called with data:",m),console.log("MenuScene: Calling menuManager.showNovelStory"),this.menuManager.showNovelStory(m),console.log("MenuScene: showNovelStory completed")}showVirtualPetMenu(m){console.log("MenuScene: showVirtualPetMenu called with petIndex:",m),this.menuManager.showVirtualPetMenu(m)}showMoralDecision(m){console.log("MenuScene: showMoralDecision called with config:",m),this.menuManager.showMoralDecisionMenu(m)}showPetStoryUI(m){if(typeof m=="string"){console.log("MenuScene: showPetStoryUI called (legacy) with content:",m),this.menuManager.showPetStoryUI(m);return}const T=m&&typeof m.petIndex=="number"?m.petIndex:0;console.log("MenuScene: showPetStoryUI called with petIndex:",T),this.menuManager.showPetStoryUIForPet(T)}showPotholeMenu(){console.log("MenuScene: showPotholeMenu called"),this.menuManager.showPotholeMenu()}closeCurrentMenu(){console.log("MenuScene: Received closeCurrentMenu event"),this.menuManager.closeCurrentDialog()}}class XJ extends lt.Scene{constructor(){super({key:"StoryScene"})}create(){this.setupOverlayCamera()}setupOverlayCamera(){const m=this.cameras.add(0,0,this.cameras.main.width,this.cameras.main.height);m.setName("storyOverlayCamera"),m.setScroll(0,0),this.cameras.main=m}}class jJ{gameObject;scene;constructor(m){this.scene=m,this.createGameObject(),this.setupPhysics(),this.setupDragInteraction()}createGameObject(){const m=Se.getItemSize("medium").width/2;this.gameObject=this.scene.add.circle(100,200,m,16711680),this.gameObject.setDepth(6e4)}setupPhysics(){this.scene.matter.add.gameObject(this.gameObject,{shape:"circle",restitution:.15,friction:.2,density:.01}),this.gameObject.body&&(this.gameObject.body.frictionAir=.03)}setupDragInteraction(){let m=!1,T=0,O=0,I=0,B=0,y=null,P=null;this.gameObject.on("pointerdown",x=>{m=!0,T=x.x,O=x.y,this.gameObject.setFillStyle(16724787),this.scene.isDraggingObject=!0,this.scene.draggingItem=this.gameObject,this.gameObject._hasFedWhileOver=!1;const c=this.scene.scene.get("GameScene");if(this.gameObject._originalDepth=this.gameObject.depth,this.gameObject._originalParent=this.gameObject.parentContainer||null,c&&c.dragOverlay){const a=this.gameObject.parentContainer;a&&a.remove(this.gameObject),c.dragOverlay.add(this.gameObject)}else this.gameObject.setDepth(11e4),this.scene.children.bringToTop(this.gameObject);this.gameObject.body&&!y&&(y=this.scene.matter.add.circle(x.x,x.y,1,{isStatic:!0,isSensor:!0,collisionFilter:{group:0,category:1,mask:0}}),P=this.scene.matter.add.constraint(y,this.gameObject.body,0,.02,{damping:.15}));const h=a=>{m&&(I=a.x-T,B=a.y-O,T=a.x,O=a.y,y&&this.scene.matter.body.setPosition(y,{x:a.x,y:a.y}))},o=()=>{if(!m)return;if(m=!1,this.gameObject.setFillStyle(16711680),this.scene.isDraggingObject=!1,!this.gameObject.scene){r();return}const a=this.gameObject._originalParent;if(a){const n=this.gameObject.parentContainer;n&&n.remove(this.gameObject),a.add(this.gameObject),this.gameObject._originalParent=null}const d=this.gameObject._originalDepth;typeof d=="number"&&this.gameObject.setDepth(d),P&&(this.scene.matter.world.removeConstraint(P),P=null),y&&(this.scene.matter.world.remove(y),y=null),this.gameObject.body&&this.scene.matter.body.setVelocity(this.gameObject.body,{x:I*.1,y:B*.1}),r()},r=()=>{this.scene.input.off("pointermove",h,void 0,!1),this.scene.input.off("pointerup",o,void 0,!1)};this.scene.input.on("pointermove",h),this.scene.input.once("pointerup",o)});let i=0;const u=100;this.gameObject.on("pointerover",()=>{const x=Date.now();x-i>u&&!m&&(this.gameObject.setFillStyle(16737894),i=x)}),this.gameObject.on("pointerout",()=>{const x=Date.now();x-i>u&&!m&&(this.gameObject.setFillStyle(16711680),i=x)}),this.gameObject.setInteractive({useHandCursor:!0}),this.gameObject.originalColor=16711680}}class HJ{gameObject;scene;feedingTimer;constructor(m){this.scene=m,this.createGameObject(),this.setupPhysics(),this.setupDragInteraction()}createGameObject(){const m=Se.getItemSize("medium").width/2;this.gameObject=this.scene.add.circle(150,320,m,65280),this.gameObject.setDepth(6e4)}setupPhysics(){this.scene.matter.add.gameObject(this.gameObject,{shape:"circle",restitution:.15,friction:.2,density:.01}),this.gameObject.body&&(this.gameObject.body.frictionAir=.03)}setupDragInteraction(){let m=!1,T=0,O=0,I=0,B=0,y=null,P=null;this.gameObject.on("pointerdown",i=>{m=!0,T=i.x,O=i.y,this.gameObject.setFillStyle(3407667),this.scene.isDraggingObject=!0;const u=this.scene.scene.get("GameScene");if(this.gameObject._originalDepth=this.gameObject.depth,this.gameObject._originalParent=this.gameObject.parentContainer||null,u&&u.dragOverlay){const x=this.gameObject.parentContainer;x&&x.remove(this.gameObject),u.dragOverlay.add(this.gameObject)}else this.gameObject.setDepth(11e4),this.scene.children.bringToTop(this.gameObject);this.gameObject.body&&!y&&(y=this.scene.matter.add.circle(i.x,i.y,1,{isStatic:!0,isSensor:!0,collisionFilter:{group:0,category:1,mask:0}}),P=this.scene.matter.add.constraint(y,this.gameObject.body,0,.02,{damping:.15}))}),this.scene.input.on("pointermove",i=>{if(m){I=i.x-T,B=i.y-O,T=i.x,O=i.y,y&&this.scene.matter.body.setPosition(y,{x:i.x,y:i.y});const u=this.scene.scene.get("GameScene"),x=u&&u.getVirtualPet?.();if(x){const c=x.getScreenBounds?.();if(c){const h=this.gameObject.getBounds();lt.Geom.Rectangle.Inflate(c,24,24),lt.Geom.Intersects.RectangleToRectangle(h,c);const o=this.gameObject.radius??this.gameObject.displayWidth/2,r=new lt.Geom.Circle(this.gameObject.x,this.gameObject.y,o);lt.Geom.Intersects.CircleToRectangle(r,c),x.setDebugBoundsVisible?.(!0);const a=i.x,d=i.y,n=x.isPointerOver?.(a,d)??!1;x.setHover?.(n)}}}}),this.scene.input.on("pointerup",()=>{if(m){if(m=!1,this.gameObject&&this.gameObject.scene&&this.gameObject.setFillStyle(65280),this.scene.isDraggingObject=!1,this.scene.draggingItem===this.gameObject&&(this.scene.draggingItem=null),this.gameObject._hasFedWhileOver=!1,this.gameObject&&this.gameObject.scene){const i=this.gameObject._originalDepth;this.gameObject.setDepth(11e4),this.scene.time.delayedCall(100,()=>{this.gameObject&&this.gameObject.scene&&typeof i=="number"&&this.gameObject.setDepth(i)});const u=this.gameObject._originalParent;if(u){const x=this.gameObject.parentContainer;x&&x.remove(this.gameObject),u.add(this.gameObject),this.gameObject._originalParent=null}}P&&(this.scene.matter.world.removeConstraint(P),P=null),y&&(this.scene.matter.world.remove(y),y=null),this.gameObject&&this.gameObject.scene&&this.gameObject.body&&this.scene.matter.body.setVelocity(this.gameObject.body,{x:I*.1,y:B*.1})}}),this.gameObject.on("pointerover",()=>{m||this.gameObject.setFillStyle(6750054)}),this.gameObject.on("pointerout",()=>{m||this.gameObject.setFillStyle(65280)}),this.gameObject.setInteractive({useHandCursor:!0}),this.gameObject.originalColor=65280}}class $J{gameObject;scene;constructor(m){this.scene=m,this.createGameObject(),this.setupPhysics(),this.setupDragInteraction()}createGameObject(){const m=Se.getItemSize("small").width/2,T=this.scene.cameras.main.width*.8;this.gameObject=this.scene.add.circle(T,300,m,255),this.gameObject.setDepth(6e4)}setupPhysics(){this.scene.matter.add.gameObject(this.gameObject,{shape:"circle",restitution:.15,friction:.2,density:.01}),this.gameObject.body&&(this.gameObject.body.frictionAir=.03)}setupDragInteraction(){let m=!1,T=0,O=0,I=0,B=0,y=null,P=null;this.gameObject.on("pointerdown",i=>{m=!0,this.gameObject.isDragging=!0,T=i.x,O=i.y,this.gameObject.setFillStyle(3355647),this.scene.isDraggingObject=!0;const u=this.scene.scene.get("GameScene");if(this.gameObject._originalDepth=this.gameObject.depth,this.gameObject._originalParent=this.gameObject.parentContainer||null,u&&u.dragOverlay){const x=this.gameObject.parentContainer;x&&x.remove(this.gameObject),u.dragOverlay.add(this.gameObject)}else this.gameObject.setDepth(11e4),this.scene.children.bringToTop(this.gameObject);if(this.scene.keysConstraint)if(this.scene.removeKeysFromIgnition)this.scene.removeKeysFromIgnition();else{if(this.scene.matter.world.removeConstraint(this.scene.keysConstraint),this.scene.keysConstraint=null,this.gameObject.body){const x=this.gameObject.body;x.isStatic=!1,x._originalCollisionFilter?x.collisionFilter={...x._originalCollisionFilter}:x.collisionFilter={group:0,category:1,mask:65535},x.isSensor=!!x._originalIsSensor}this.scene.keysInIgnition=!1,this.scene.gameState?.updateState&&this.scene.gameState.updateState({keysInIgnition:!1}),this.scene.closeCurrentMenu&&this.scene.closeCurrentMenu(),this.scene.scheduleTutorialUpdate?this.scene.scheduleTutorialUpdate(50):this.scene.updateTutorialSystem&&this.scene.time?.delayedCall(50,()=>this.scene.updateTutorialSystem())}this.gameObject.body&&!y&&(y=this.scene.matter.add.circle(i.x,i.y,1,{isStatic:!0,isSensor:!0,collisionFilter:{group:0,category:1,mask:0}}),P=this.scene.matter.add.constraint(y,this.gameObject.body,0,.02,{damping:.15}))}),this.scene.input.on("pointermove",i=>{if(m){I=i.x-T,B=i.y-O,T=i.x,O=i.y,y&&this.scene.matter.body.setPosition(y,{x:i.x,y:i.y});const u=this.scene.scene.get("GameScene");u&&u.tutorialSystem&&u.tutorialSystem.updateTutorialMaskRealTime()}}),this.scene.input.on("pointerup",()=>{if(m){m=!1,this.gameObject.isDragging=!1,this.gameObject._justReleasedAt=Date.now(),this.gameObject.setFillStyle(255),this.scene.isDraggingObject=!1;const i=this.gameObject._originalParent;if(i){const u=this.gameObject.parentContainer;u&&u.remove(this.gameObject),i.add(this.gameObject),this.gameObject._originalParent=null}else{const u=this.gameObject._originalDepth;typeof u=="number"&&this.gameObject.setDepth(u)}P&&(this.scene.matter.world.removeConstraint(P),P=null),y&&(this.scene.matter.world.remove(y),y=null),this.gameObject.body&&(this.gameObject.body.isStatic=!1,this.scene.matter.body.setVelocity(this.gameObject.body,{x:I*.1,y:B*.1}))}}),this.gameObject.on("pointerover",()=>{m||this.gameObject.setFillStyle(6711039)}),this.gameObject.on("pointerout",()=>{m||this.gameObject.setFillStyle(255)}),this.gameObject.setInteractive({useHandCursor:!0}),this.gameObject.originalColor=255}}class qJ{gameObject;scene;constructor(m){this.scene=m,this.createGameObject(),this.setupPhysics(),this.setupDragInteraction()}createGameObject(){const m=Se.getItemSize("small").width/2,T=this.scene.cameras.main.width*.2;this.gameObject=this.scene.add.circle(T,250,m,43775),this.gameObject.setDepth(6e4)}setupPhysics(){this.scene.matter.add.gameObject(this.gameObject,{shape:"circle",restitution:.15,friction:.2,density:.01}),this.gameObject.body&&(this.gameObject.body.frictionAir=.03)}setupDragInteraction(){let m=!1,T=0,O=0,I=0,B=0,y=null,P=null;this.gameObject.on("pointerdown",i=>{m=!0,this.gameObject.isDragging=!0,T=i.x,O=i.y,this.gameObject.setFillStyle(3377407),this.scene.isDraggingObject=!0,this.scene.draggingItem=this.gameObject,this.gameObject._hasFedWhileOver=!1;const u=this.scene.scene.get("GameScene");if(this.gameObject._originalDepth=this.gameObject.depth,this.gameObject._originalParent=this.gameObject.parentContainer||null,u&&u.dragOverlay){const h=this.gameObject.parentContainer;h&&h.remove(this.gameObject),u.dragOverlay.add(this.gameObject)}else this.gameObject.setDepth(11e4),this.scene.children.bringToTop(this.gameObject);this.gameObject.body&&!y&&(y=this.scene.matter.add.circle(i.x,i.y,1,{isStatic:!0,isSensor:!0,collisionFilter:{group:0,category:1,mask:0}}),P=this.scene.matter.add.constraint(y,this.gameObject.body,0,.02,{damping:.15}));const x=h=>{if(m&&y){this.scene.matter.body.setPosition(y,{x:h.x,y:h.y});const o=h.x-T,r=h.y-O;I=o,B=r,T=h.x,O=h.y}},c=()=>{if(m){if(m=!1,this.gameObject.isDragging=!1,this.gameObject.setFillStyle(43775),this.scene.isDraggingObject=!1,this.scene.draggingItem===this.gameObject&&(this.scene.draggingItem=null),this.gameObject._hasFedWhileOver=!1,this.gameObject&&this.gameObject.scene){const h=this.gameObject._originalDepth;this.gameObject.setDepth(11e4),this.scene.time.delayedCall(100,()=>{this.gameObject&&this.gameObject.scene&&typeof h=="number"&&this.gameObject.setDepth(h)});const o=this.gameObject._originalParent;if(o){const r=this.gameObject.parentContainer;r&&r.remove(this.gameObject),o.add(this.gameObject),this.gameObject._originalParent=null}}P&&(this.scene.matter.world.removeConstraint(P),P=null),y&&(this.scene.matter.world.remove(y),y=null),this.gameObject.body&&this.scene.matter.body.setVelocity(this.gameObject.body,{x:I*5,y:B*5})}this.scene.input.off("pointermove",x),this.scene.input.off("pointerup",c)};this.scene.input.on("pointermove",x),this.scene.input.on("pointerup",c)}),this.gameObject.on("pointerover",()=>{m||this.gameObject.setFillStyle(6728447)}),this.gameObject.on("pointerout",()=>{m||this.gameObject.setFillStyle(43775)}),this.gameObject.setInteractive({useHandCursor:!0}),this.gameObject.originalColor=43775}}class KJ{scene;config;drivingMode=!1;drivingPaused=!1;tutorialMode=!1;carSpeed=0;carX=0;currentSteeringValue=0;turn=0;baseSpeed=0;speedProgressionStartStep=0;speedProgressionDurationSteps=1200;maxSpeedMultiplier=1;drivingContainer;drivingBackground;drivingCar;roadLines=[];obstacles=[];roadLineGraphics;roadOffset=0;horizontalLinePhase=0;laneIndices=[-2,-.7,.7,2];laneSpacingBottom=100;horizontalSpacing=28;getLensStrength(){return this.config.lensStrength??60}activeExits=[];plannedExits=[];exitPreviewMinSpacing=150;plannedCyoa=[];plannedStory=null;pendingDestinationMenu=null;nightModeEnabled=!1;currentSequenceProgress=0;lastPotholeSpawnStep=0;minPotholeSpawnDelay=3;radarContainer;radarBG;radarGrid;radarGraphics;radarPlayer;forwardMovementTimer=null;neutralReturnTimer=null;obstacleSpawnTimer=null;collisionTimer=null;cameraAngle=0;currentCurve=0;worldLateralOffset=0;lastSteeringValueForVisual=0;constructor(m,T){this.scene=m,this.config=T}initialize(){this.drivingContainer=this.scene.add.container(0,0),this.drivingContainer.setDepth(this.config.roadDepth),this.drivingContainer.setScale(1,.5),this.drivingContainer.y=Math.floor(this.scene.cameras.main.height*.1),this.createDrivingBackground(),this.createDrivingCar(),this.carX=this.scene.cameras.main.width/2,this.roadLineGraphics=this.scene.add.graphics(),this.roadLineGraphics.setDepth(this.config.lineDepth),this.drivingContainer.add(this.roadLineGraphics),this.config.radarEnabled&&this.createRadar(),this.scene.events.on("countdownChanged",this.onCountdownChanged,this),this.scene.events.on("step",this.onStepChanged,this)}generateSpacedThresholds(m,T){const O=this.scene.scene.get("GameScene")?.gameState?.getState(),I=O?.showsInCurrentRegion===0&&O?.regionHistory?.length<=1;let B,y;I?(B={min:15,max:25},y={min:35,max:90},console.log("First sequence: Exit range 15-25% for testing")):(B={min:30,max:85},y={min:20,max:90});const P=[];for(let o=0;o<m;o++)P.push({value:lt.Math.Between(B.min,B.max),type:"exit",index:o});const i=T===3?T-1:T;for(let o=0;o<i;o++)P.push({value:lt.Math.Between(y.min,y.max),type:"cyoa",index:o});P.sort((o,r)=>o.value-r.value);let u=0;const x=50;for(;u<x;){let o=!1;for(let r=0;r<P.length-1;r++){const a=P[r],d=P[r+1],n=d.value-a.value;if(n<12){o=!0;const p=(12-n)/2;a.value=Math.max(0,a.value-p),d.value=Math.min(100,d.value+p),a.type==="exit"?a.value=lt.Math.Clamp(a.value,B.min,B.max):a.value=lt.Math.Clamp(a.value,y.min,y.max),d.type==="exit"?d.value=lt.Math.Clamp(d.value,B.min,B.max):d.value=lt.Math.Clamp(d.value,y.min,y.max)}}if(!o)break;P.sort((r,a)=>r.value-a.value),u++}let c=P.filter(o=>o.type==="exit").map(o=>o.value).sort((o,r)=>o-r);if(c.length>1)for(let o=1;o<c.length;o++)c[o]===c[o-1]&&(c[o]=c[o]+1,console.log(`Forced exit ${o+1} threshold to ${c[o]}% to avoid collision`));const h=P.filter(o=>o.type==="cyoa").map(o=>o.value).sort((o,r)=>o-r);return T===3&&h.push(0),{exits:c,cyoa:h}}ensureCyoaSpacing(){let m=0;const T=50;for(;m<T;){let O=!1;this.plannedCyoa.sort((I,B)=>I.cyoaThreshold-B.cyoaThreshold);for(let I=0;I<this.plannedCyoa.length-1;I++){const B=this.plannedCyoa[I],y=this.plannedCyoa[I+1],P=y.cyoaThreshold-B.cyoaThreshold;if(P<12){O=!0;const i=(12-P)/2;B.cyoaThreshold=Math.max(20,B.cyoaThreshold-i),y.cyoaThreshold=Math.min(90,y.cyoaThreshold+i)}}if(!O)break;m++}m>=T&&console.warn("Could not achieve proper CYOA spacing after maximum attempts")}generateShopCount(){const m=Math.random();return m<.4?2:m<.8?3:4}generateShopNames(m){const T=["regional gas station","gas station","motel","restaurant","weed store","car store","car doctor","psychic"],O=[],I=new Set;for(let B=0;B<m;B++){let y,P=0;do y=T[Math.floor(Math.random()*T.length)],P++;while(I.has(y)&&P<20);I.add(y),O.push(y)}return O}generateExitNames(m){const T=[],O=new Set;for(let I=0;I<m;I++){let B,y=0;do{if(lt.Math.Between(1,2)===1)B=`Exit ${lt.Math.Between(1,99)}`;else{const P=lt.Math.Between(1,98),i=lt.Math.Between(P+1,99);B=`Exit ${P}-${i}`}y++}while(O.has(B)&&y<50);O.has(B)&&(B=`Exit ${I+1}`),T.push(B),O.add(B)}return T}enableTutorialMode(){this.tutorialMode=!0}disableTutorialMode(){this.tutorialMode=!1}isInTutorialMode(){return this.tutorialMode}startDriving(m=0){this.drivingMode=!0,this.carSpeed=0,this.resetDrivingCamera(),this.planExitsForSequence(),this.startAutomaticSpeedProgression(m),this.startForwardMovementTimer(),this.startNeutralReturnTimer(),this.startObstacleSpawning()}isDriving(){return this.drivingMode}planExitsForSequence(){this.plannedExits=[],this.plannedCyoa=[],this.plannedStory=null,this.currentSequenceProgress=0;const m=this.scene.scene.get("GameScene"),T=m?.gameState?.getState(),O=T?.showsInCurrentRegion===0&&T?.regionHistory?.length<=1;T?.showsInCurrentRegion;let I;O?(I=2,console.log("First driving sequence - deterministic: 2 exits")):I=lt.Math.Between(2,3);const B=this.scene.cameras.main.width,y=Math.floor(B*.3),P=B-Math.floor(y/2)-1,i=40,u=15;let x;const c=m?.gameState?.getState()?.showsInCurrentRegion||0;c===0?(x=2,console.log("First driving sequence - deterministic: 2 CYOAs (1 random + 1 at end)")):c===1?(x=2,console.log("Second driving sequence - deterministic: 2 CYOAs (1 at start + 1 random)")):(x=lt.Math.Between(1,3),console.log(`Sequence ${c+1} - random: ${x} CYOAs`));const h=this.generateSpacedThresholds(I,x),o=h.exits;h.cyoa;const r=this.generateExitNames(o.length);if(o.map((a,d)=>({threshold:a,name:r[d],originalIndex:d})).sort((a,d)=>a.threshold-d.threshold).forEach((a,d)=>{const n=d+1,p=a.threshold,g=a.name;let v,f=0;do{const _=lt.Math.Between(20,45);v=Math.max(1,p-_),f++}while(f<10&&(o.some(_=>Math.abs(_-v)<8)||this.plannedExits.some(_=>Math.abs(_.previewThreshold-v)<8)));const b=this.generateShopCount(),C=this.generateShopNames(b);this.plannedExits.push({number:n,exitName:g,shopCount:b,shopNames:C,previewThreshold:v,exitThreshold:p,laneIndex:this.laneIndices[this.laneIndices.length-1],exitBaseX:P-i,previewBaseX:P+u,width:y,height:this.config.exitHeight,previewSpawned:!1,exitSpawned:!1,previewWaiting:!1})}),console.log("Planned exits:",this.plannedExits.map(a=>`Exit ${a.number}`)),console.log("Total planned exits:",this.plannedExits.length),this.plannedCyoa=[],c===0){const a=lt.Math.Between(20,80);this.plannedCyoa.push({id:1,cyoaThreshold:a,triggered:!1}),this.plannedCyoa.push({id:2,cyoaThreshold:98,triggered:!1}),console.log(`🎭 First sequence CYOAs: Random CYOA at ${a}% + End CYOA at 98%`)}else if(c===1){const a=lt.Math.Between(20,80);this.plannedCyoa.push({id:1,cyoaThreshold:2,triggered:!1}),this.plannedCyoa.push({id:2,cyoaThreshold:a,triggered:!1}),console.log(`🎭 Second sequence CYOAs: Start CYOA at 2% + Random CYOA at ${a}%`)}else if(x===1){const a=lt.Math.Between(20,80);this.plannedCyoa.push({id:1,cyoaThreshold:a,triggered:!1})}else if(x===2){const a=lt.Math.Between(20,80),d=Math.random()<.5;this.plannedCyoa.push({id:1,cyoaThreshold:a,triggered:!1}),this.plannedCyoa.push({id:2,cyoaThreshold:d?2:98,triggered:!1}),this.plannedCyoa.sort((n,p)=>n.cyoaThreshold-p.cyoaThreshold)}else if(x===3){const a=lt.Math.Between(20,80),d=lt.Math.Between(20,80),n=Math.random()<.5;this.plannedCyoa.push({id:1,cyoaThreshold:a,triggered:!1}),this.plannedCyoa.push({id:2,cyoaThreshold:d,triggered:!1}),this.plannedCyoa.push({id:3,cyoaThreshold:n?2:98,triggered:!1}),this.plannedCyoa.sort((p,g)=>p.cyoaThreshold-g.cyoaThreshold)}console.log("Planned CYOA:",this.plannedCyoa.map(a=>`CYOA ${a.id}: ${a.cyoaThreshold}% (${a.cyoaThreshold===2?"start":a.cyoaThreshold===98?"end":"random"})`)),console.log("Total planned CYOA:",this.plannedCyoa.length),this.planStoryForSequence(I)}planStoryForSequence(m){const T=this.scene.scene.get("GameScene")?.gameState?.getState(),O=T?.showsInCurrentRegion===0&&T?.regionHistory?.length<=1,I=T?.showsInCurrentRegion===0;let B,y=!1,P;if(O)B=10,y=!1,console.log("First sequence: Story scheduled at 10% (fauxchella-1)");else if(I)B=lt.Math.Between(15,85),y=!1,console.log(`First sequence in new region: Story scheduled at ${B}%`);else{if(y=Math.random()<.3,y&&m>0){P=lt.Math.Between(1,m);const c=this.plannedExits.find(h=>h.number===P);if(c){const h=lt.Math.Between(8,20);B=Math.min(100,c.exitThreshold+h),console.log(`Story scheduled after Exit ${P} at ${B}% (exit was at ${c.exitThreshold}%)`)}else B=lt.Math.Between(20,80),console.log(`Story scheduled at random threshold ${B}% (exit-related fallback)`)}else B=lt.Math.Between(15,85),console.log(`Story scheduled at independent threshold ${B}%`);const i=10;let u=0;const x=20;for(;u<x;){let c=!1;for(const h of this.plannedCyoa)if(Math.abs(h.cyoaThreshold-B)<i){c=!0;break}if(!c){for(const h of this.plannedExits)if(Math.abs(h.previewThreshold-B)<i||Math.abs(h.exitThreshold-B)<i){c=!0;break}}if(c)B=lt.Math.Between(15,85),u++;else break}}this.plannedStory={storyThreshold:B,isExitRelated:y,exitNumber:P,triggered:!1},console.log(`Planned story: ${B}%${y?" (exit-related)":""}`)}updateProgress(m){if(!this.tutorialMode){if(this.currentSequenceProgress=m,m%25===0&&console.log(`Progress: ${m}%, Planned exits: ${this.plannedExits.length}`),this.plannedExits.forEach(T=>{!T.previewSpawned&&m>=T.previewThreshold&&(console.log(`Spawning preview for Exit ${T.number} at progress ${m}%`),this.spawnPlannedExitPreview(T),T.previewSpawned=!0),!T.exitSpawned&&m>=T.exitThreshold&&(console.log(`Spawning Exit ${T.number} at progress ${m}%`),this.spawnPlannedExit(T),T.exitSpawned=!0)}),this.plannedStory&&!this.plannedStory.triggered&&m>=this.plannedStory.storyThreshold){console.log(`Triggering story at progress ${m}%${this.plannedStory.isExitRelated?" (exit-related)":""}`),this.triggerStory(this.plannedStory),this.plannedStory.triggered=!0;return}this.plannedCyoa.forEach(T=>{!T.triggered&&m>=T.cyoaThreshold&&(console.log(`updateProgress: Triggering CYOA ${T.id} at progress ${m.toFixed(1)}%`),this.triggerCyoa(T),T.triggered=!0)})}}checkExitPreviewCollisions(){const m=this.plannedExits.filter(O=>O.previewSpawned&&!O.exitSpawned);if(m.length<2)return;const T=m.map(O=>O.previewObstacle).filter(Boolean);for(let O=0;O<T.length;O++)for(let I=O+1;I<T.length;I++){const B=T[O],y=T[I];if(!B||!y)continue;const P=B.getData("visual"),i=y.getData("visual");if(!P||!i)continue;const u=lt.Math.Distance.Between(P.x,P.y,i.x,i.y);if(u<this.exitPreviewMinSpacing){const x=this.plannedExits.find(d=>d.previewObstacle===B),c=this.plannedExits.find(d=>d.previewObstacle===y);if(!x||!c)continue;const h=x.number>c.number?x:c,o=x.number>c.number?c:x;h.previewWaiting=!0,o.previewWaiting=!1;const r=h.previewVisual;r&&r.setAlpha(.1);const a=o.previewVisual;a&&a.setAlpha(.3),console.log(`🚦 Exit ${h.number} waiting for Exit ${o.number} (distance: ${u.toFixed(1)}px)`)}else{const x=this.plannedExits.find(h=>h.previewObstacle===B),c=this.plannedExits.find(h=>h.previewObstacle===y);if(x&&x.previewWaiting){x.previewWaiting=!1;const h=x.previewVisual;h&&h.setAlpha(.2)}if(c&&c.previewWaiting){c.previewWaiting=!1;const h=c.previewVisual;h&&h.setAlpha(.2)}}}}spawnPlannedExitPreview(m){console.log(`Spawning preview for Exit ${m.number} at ${m.previewThreshold}%`);const T=this.scene.cameras.main.width,O=this.scene.cameras.main.height*.3,I=this.scene.add.rectangle(m.previewBaseX,O+2,m.width,m.height,this.config.exitColor,.2);I.setVisible(!1),I.setData("isExitPreview",!0),I.setData("exitNumber",m.number);const B=this.scene.add.rectangle(I.x,I.y,I.width,I.height,this.config.exitColor,.2);B.setDepth(this.config.roadDepth+.5);const y=m.shopNames.join(`
`),P=this.scene.add.text(I.x,I.y,`${m.exitName}
${y}`,{fontSize:"10px",color:"#ffffff",fontStyle:"bold",stroke:"#000000",strokeThickness:2,backgroundColor:"#000000",padding:{x:4,y:2},align:"center"});P.setOrigin(.5,.5),P.setDepth(this.config.roadDepth+1),this.drivingContainer.add(I),this.drivingContainer.add(B),this.drivingContainer.add(P),I.setData("baseX",m.previewBaseX),I.setData("laneOffset",(m.previewBaseX-T/2)/this.laneSpacingBottom),I.setData("baseW",m.width),I.setData("baseH",m.height),I.setData("visual",B),I.setData("text",P),I.setData("laneIndex",m.laneIndex),this.obstacles.push(I),m.previewObstacle=I,m.previewVisual=B,m.previewText=P}spawnPlannedExit(m){console.log(`Spawning Exit ${m.number} at ${m.exitThreshold}%`);const T=this.scene.cameras.main.width,O=this.scene.cameras.main.height*.3;if(m.previewObstacle){const u=this.obstacles.indexOf(m.previewObstacle);u>-1&&this.obstacles.splice(u,1),m.previewObstacle.destroy(),m.previewVisual.destroy(),m.previewText&&m.previewText.destroy(),m.previewObstacle=null,m.previewVisual=null,m.previewText=null}const I=m.width+80,B=m.exitBaseX-40,y=this.scene.add.rectangle(B,O+2,I,m.height,this.config.exitColor,.8);y.setVisible(!1),y.setData("isExit",!0),y.setData("exitNumber",m.number);const P=this.scene.add.rectangle(m.exitBaseX,O+2,m.width,m.height,this.config.exitColor,.6);P.setDepth(this.config.roadDepth+.5);const i=this.scene.add.text(m.exitBaseX,O+2,m.exitName,{fontSize:"14px",color:"#ffffff",fontStyle:"bold",stroke:"#000000",strokeThickness:2,backgroundColor:"#000000",padding:{x:4,y:2}});i.setOrigin(.5,.5),i.setDepth(this.config.roadDepth+1),this.drivingContainer.add(y),this.drivingContainer.add(P),this.drivingContainer.add(i),y.setData("baseX",B),y.setData("laneOffset",(B-T/2)/this.laneSpacingBottom),y.setData("baseW",I),y.setData("baseH",m.height),y.setData("visual",P),y.setData("text",i),y.setData("laneIndex",m.laneIndex),y.setData("shopCount",m.shopCount),y.setData("exitNumber",m.number),this.obstacles.push(y),this.activeExits.push({obstacle:y,visual:P,exitText:i,exitNumber:m.number})}triggerCyoa(m){if(console.log(`🎭 triggerCyoa called for CYOA ${m.id}`),m.triggered){console.warn(`🎭 Guard: CYOA ${m.id} already triggered, preventing double-trigger`);return}console.log(`Triggering CYOA ${m.id}`),m.triggered=!0,this.pauseDriving();const T=this.scene.scene.get("MenuScene");T&&(T.events.emit("showCyoaMenu",{cyoaId:m.id,isExitRelated:!1,exitNumber:void 0,exitTiming:void 0}),this.scene.scene.bringToTop("MenuScene"))}triggerStory(m){console.log(`📖 Triggering story${m.isExitRelated?` (related to exit ${m.exitNumber})`:""}`),this.pauseDriving();const T=this.scene.scene.get("GameScene");if(T&&T.storyManager){const O=T.storyManager,I=T.gameState,B=I&&I.getState().stops===0,y=this.shouldTriggerFauxchellaStory(I);let P;if(B)P="fauxchella",console.log("📖 First story: Starting fauxchella-1");else if(y)P="fauxchella",console.log("📖 Monthly listener threshold: Starting next fauxchella story");else{const i=O.getAvailableStorylines().filter(u=>u!=="fauxchella");P=i[Math.floor(Math.random()*i.length)],console.log(`📖 Starting storyline: ${P}`)}O.startStory(P,1),this.scene.scene.get("MenuScene")&&this.scene.scene.bringToTop("MenuScene")}else{const O=this.scene.scene.get("MenuScene");O&&(O.events.emit("showStoryMenu",{isExitRelated:m.isExitRelated,exitNumber:m.exitNumber}),this.scene.scene.bringToTop("MenuScene"))}}shouldTriggerFauxchellaStory(m){if(!m)return!1;const T=m.getState(),O=T.monthlyListeners||0,I=[5e3,1e4,2e4];for(const B of I)if(O>=B){const y=`fauxchella_${B}`;if(!T[y])return m.updateState({[y]:!0}),console.log(`📖 Fauxchella threshold reached: ${O} listeners (threshold: ${B})`),!0}return!1}hasSkippedStory(){return!!(this.plannedStory&&!this.plannedStory.triggered)}triggerSkippedStory(){!this.plannedStory||this.plannedStory.triggered||(console.log(`📖 CarMechanics: Triggering skipped story at ${this.plannedStory.storyThreshold}%`),this.plannedStory.triggered=!0,this.triggerStory(this.plannedStory))}hasPendingDestinationMenu(){return this.pendingDestinationMenu!==null}showPendingDestinationMenu(){if(!this.pendingDestinationMenu)return;const{shopCount:m,exitNumber:T}=this.pendingDestinationMenu;console.log(`🎭 CarMechanics: Showing pending destination menu for exit ${T}`);const O=this.scene.scene.get("MenuScene");O&&T!=null&&(O.events.emit("showObstacleMenu","exit",m,T),this.scene.scene.bringToTop("MenuScene")),this.pendingDestinationMenu=null}getPlannedExits(){return this.plannedExits.filter(m=>!m.exitSpawned).map(m=>({progressThreshold:m.exitThreshold,spawned:m.exitSpawned,number:m.number}))}getPlannedCyoa(){return this.plannedCyoa.filter(m=>!m.triggered).map(m=>({progressThreshold:m.cyoaThreshold,triggered:m.triggered}))}setNightTimeMode(m){if(m&&!this.nightModeEnabled){this.config.skyColor=2105376,this.nightModeEnabled=!0;const T=this.scene.scene.get("MenuScene");T&&T.menuManager&&T.menuManager.currentDialog||console.log("🌙 CarMechanics: Night time mode enabled")}else!m&&this.nightModeEnabled&&(this.config.skyColor=0,this.nightModeEnabled=!1)}getPlannedStory(){return!this.plannedStory||this.plannedStory.triggered?null:{progressThreshold:this.plannedStory.storyThreshold,triggered:this.plannedStory.triggered,isExitRelated:this.plannedStory.isExitRelated,exitNumber:this.plannedStory.exitNumber}}isDrivingPaused(){return this.drivingPaused}stopDriving(){this.drivingMode=!1,this.carSpeed=0,this.baseSpeed=0,this.speedProgressionStartStep=-1,this.stopObstacleSpawning()}pauseDriving(){this.drivingPaused=!0}resumeDriving(){this.drivingPaused=!1,this.startObstacleSpawning()}handleSteering(m){!this.drivingMode&&!this.tutorialMode||(this.currentSteeringValue=lt.Math.Clamp(m,-150,150))}startAutomaticSpeedProgression(m){this.speedProgressionStartStep<=0&&(this.speedProgressionStartStep=m,this.baseSpeed=this.config.carMaxSpeed,console.log(`Starting automatic speed progression at step ${m}`))}onStepEvent(m){!this.drivingMode||this.drivingPaused||this.updateCarSpeedWithProgression(m)}updateCarSpeedWithProgression(m){if(this.baseSpeed===0){this.carSpeed=0,this.speedProgressionStartStep=0;return}if(this.tutorialMode){this.carSpeed=this.baseSpeed*.1;return}if(this.speedProgressionStartStep<=0){this.carSpeed=this.baseSpeed*.01,this.speedProgressionStartStep=m;return}const T=m-this.speedProgressionStartStep,O=1,I=this.carSpeed/this.baseSpeed,B=O-I;if(B<.01){this.carSpeed=this.baseSpeed*O;return}const y=.04*(Math.log(B+1)/Math.log(2)),P=this.baseSpeed*y;if(this.carSpeed+=P,this.carSpeed=Math.min(this.carSpeed,this.baseSpeed*O),T>0&&T%30===0){const i=Math.round(this.carSpeed/this.baseSpeed*100),u=Math.round(y*100*100)/100;console.log(`Speed progression: ${i}% (+${u}% this step) at step ${m}`)}}resetSpeedProgression(){console.log("🔄 Resetting speed progression due to pothole hit"),this.carSpeed=this.baseSpeed*.01,this.speedProgressionStartStep=-1}updateGravityBasedOnSpeed(m){if(!this.scene.matter?.world)return;const T=.5,O=1.8,I=1,B=m/100,y=I+B*(O-I),P=T*y;this.scene.matter.world.setGravity(0,P),this.scene.time.now%500<16&&console.log(`Gravity: ${m}% speed -> ${y.toFixed(2)}x multiplier -> Y: ${P.toFixed(2)}`)}getSpeedMultiplier(){return this.baseSpeed===0?0:this.carSpeed/this.baseSpeed}getCarSpeed(){return this.carSpeed}spawnDebugPothole(){if(!this.drivingMode||this.drivingPaused){console.log("🐛 DEBUG: Cannot spawn pothole - not in driving mode");return}console.log("🐛 DEBUG: Creating debug pothole");const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height,O=T*.3,I=m*this.config.potholeWidth,B=T*this.config.potholeHeight,y=this.scene.add.rectangle(0,0,I,B,this.config.potholeColor);y.setData("isPothole",!0),y.setData("isExit",!1),y.setData("isExitPreview",!1);const P=O+lt.Math.Between(12,90),i=Math.floor(Math.random()*this.laneIndices.length),u=this.laneIndices[i],x=lt.Math.Clamp((P-O)/(T-O),0,1),c=this.config.roadBendStrength??140,h=this.currentCurve*c,o=h*.6,r=_=>(1-_)*(1-_)*0+2*(1-_)*_*o+_*_*h,a=this.getLensStrength(),d=1-lt.Math.Clamp(Math.abs(this.currentCurve),0,1),n=(u>=0?1:-1)*a*(x*x)*d,p=m/2,g=p+r(x)+u*(this.laneSpacingBottom*x)+n,v=lt.Math.Between(-6,6),f=g+v,b=P;y.setPosition(f,b),y.setData("laneIndex",u),y.setData("baseX",f),y.setData("laneOffset",(f-p)/this.laneSpacingBottom),y.setData("baseW",I),y.setData("baseH",B),y.y=b,y.setDepth(this.config.roadDepth+.5),y.setVisible(!1);const C=this.scene.add.rectangle(y.x,y.y,y.width,y.height,y.fillColor??16711680);C.setDepth(this.config.roadDepth+.5),this.drivingContainer.add(y),this.drivingContainer.add(C),y.setData("visual",C),this.obstacles.push(y),console.log(`🐛 DEBUG: Pothole spawned at (${f}, ${b}) with size ${I}x${B} and color 0x${this.config.potholeColor.toString(16)}`),console.log(`🐛 DEBUG: Total obstacles now: ${this.obstacles.length}`)}getCarX(){return this.carX}update(m=0){if(!this.drivingMode||this.drivingPaused)return;const T=this.scene.scene.get("MenuScene"),O=T?T.menuManager:null;O&&O.currentDisplayedMenuType==="CYOA"||(this.updateForwardMovement(m),this.updateCarPosition(),this.updateRoadLines(),this.updateObstacles(),this.updateRadar())}createDrivingBackground(){this.drivingBackground=this.scene.add.graphics(),this.drivingBackground.setDepth(this.config.roadDepth),this.drivingContainer.add(this.drivingBackground),this.drawRoad()}createDrivingCar(){const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height;this.carX=m/2,this.drivingCar=this.scene.add.rectangle(this.carX,Math.floor(T*.9),60,60,16711680),this.drivingCar.setAlpha(.7),this.drivingCar.setDepth(this.config.roadDepth+1),this.drivingCar.setScrollFactor(0,0),this.drivingContainer.add(this.drivingCar)}drawRoad(){const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height;this.drivingBackground.clear();const O=T*.3,I=m*3,B=(m-I)/2;this.drivingBackground.fillStyle(this.config.roadColor),this.drivingBackground.fillRect(B,O,I,T-O),this.drivingBackground.fillStyle(0,.15),this.drivingBackground.fillRect(B,O-2,I,2)}startForwardMovementTimer(){this.stopForwardMovementTimer(),this.forwardMovementTimer=this.scene.time.addEvent({delay:16,callback:this.updateForwardMovement,callbackScope:this,loop:!0})}stopForwardMovementTimer(){this.forwardMovementTimer&&(this.forwardMovementTimer.remove(),this.forwardMovementTimer=null)}startNeutralReturnTimer(){this.stopNeutralReturnTimer(),this.neutralReturnTimer=this.scene.time.addEvent({delay:16,callback:this.updateNeutralReturn,callbackScope:this,loop:!0})}stopNeutralReturnTimer(){this.neutralReturnTimer&&(this.neutralReturnTimer.remove(),this.neutralReturnTimer=null)}startObstacleSpawning(){this.stopObstacleSpawning();const m=lt.Math.Between(this.config.obstacleMinDelayMs,this.config.obstacleMaxDelayMs);console.log("Starting obstacle spawning timer with delay:",m,"ms"),console.log("Current drivingMode:",this.drivingMode,"drivingPaused:",this.drivingPaused),console.log("Current potholeProbability:",this.config.potholeProbability),this.obstacleSpawnTimer=this.scene.time.delayedCall(m,this.spawnObstacle,[],this)}stopObstacleSpawning(){this.obstacleSpawnTimer&&(this.obstacleSpawnTimer.remove(),this.obstacleSpawnTimer=null)}updateForwardMovement(m=0){if(!this.drivingMode||this.drivingPaused)return;const T=Math.round(this.carSpeed/this.config.carMaxSpeed*100);this.scene.events.emit("speedUpdate",T),this.roadOffset-=this.carSpeed*.75}updateNeutralReturn(){!this.drivingMode||this.drivingPaused}updateCarPosition(){if(!this.drivingMode||this.drivingPaused)return;const m=this.tutorialMode?0:this.config.minSpeedForSteering;if(this.carSpeed<m){this.currentSteeringValue=0,this.turn=Math.abs(this.turn)<.01?0:lt.Math.Linear(this.turn,0,this.config.turnResetMultiplier);return}const T=this.currentSteeringValue/150;this.carSpeed/this.config.carMaxSpeed;const O=(this.scene.game.loop.delta||16)*.01,I=this.scene.cameras.main.width/2,B=I-this.config.boundaryPadding,y=I+T*B,P=.15;if(this.carX=lt.Math.Linear(this.carX,y,P),this.drivingCar){const c=this.scene.cameras.main.width;this.drivingCar.x=c/2}const i=lt.Math.Clamp(-T*.8,-1,1);if(this.currentCurve=lt.Math.Linear(this.currentCurve,i,.08),this.turn=lt.Math.Clamp(T*this.config.maxTurn,-this.config.maxTurn,this.config.maxTurn),this.config.centerReturnForce>0){const c=this.scene.cameras.main.width/2-this.carX;this.carX+=c*this.config.centerReturnForce*O}const u=this.scene.cameras.main.width/2,x=u-this.config.boundaryPadding;this.carX=lt.Math.Clamp(this.carX,u-x,u+x),this.updateDrivingCamera()}updateDrivingCamera(){if(!this.drivingMode||this.drivingPaused)return;const m=this.scene.cameras.main.width/2,T=-(this.carX-m)*1;this.drivingContainer.x=T;const O=this.carSpeed/Math.max(1,this.config.carMaxSpeed),I=lt.Math.Clamp((this.turn+this.currentCurve*.6)*6*O,-6,6);this.cameraAngle=lt.Math.Linear(this.cameraAngle,I,.15),this.scene.events.emit("cameraAngleChanged",this.cameraAngle)}resetDrivingCamera(){this.drivingContainer.x=0}updateRoadLines(){const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height,O=T*.3+10,I=T*.3,B=m/2;this.roadLineGraphics.clear(),this.roadLineGraphics.lineStyle(2,0,1);const y=this.config.roadBendStrength??140,P=this.currentCurve*y,i=P*.6,u=a=>(1-a)*(1-a)*0+2*(1-a)*a*i+a*a*P,x=this.getLensStrength(),c=1-lt.Math.Clamp(Math.abs(this.currentCurve),0,1);for(const a of this.laneIndices){let d=!1;this.roadLineGraphics.beginPath();for(let n=O;n<=T;n+=6){const p=lt.Math.Clamp((n-I)/(T-I),0,1),g=(a>=0?1:-1)*x*(p*p)*c,v=B+u(p)+a*(this.laneSpacingBottom*p)+g;d?this.roadLineGraphics.lineTo(v,n):(this.roadLineGraphics.moveTo(v,n),d=!0)}this.roadLineGraphics.strokePath()}this.roadLineGraphics.lineStyle(1,0,1);const h=T-I,o=Math.max(1,Math.floor(h/this.horizontalSpacing)),r=this.horizontalLinePhase%this.horizontalSpacing/this.horizontalSpacing;for(let a=0;a<=o;a+=1){const d=(a+r)/o;if(d>1)continue;const n=lt.Math.Clamp(d*d,0,1),p=I+h*n,g=-x*(n*n)*c,v=x*(n*n)*c,f=B+u(n)+this.laneIndices[0]*(this.laneSpacingBottom*n)+g,b=B+u(n)+this.laneIndices[this.laneIndices.length-1]*(this.laneSpacingBottom*n)+v;this.roadLineGraphics.beginPath(),this.roadLineGraphics.moveTo(f,p),this.roadLineGraphics.lineTo(b,p),this.roadLineGraphics.strokePath()}}updateObstacles(){this.obstacles.forEach(x=>{const c=x.getData("isExit"),h=x.getData("isExitPreview"),o=x.getData("visual"),r=o?o.y:x.y,a=this.scene.cameras.main.height,d=a+300;if(!c&&!h&&r>d){x.getData("isPothole")&&console.log(`🗑️ Removing pothole - Visual Y: ${r.toFixed(1)}, Threshold: ${d}, Screen Height: ${a}`);const n=x.getData("visual"),p=x.getData("text");n&&n.destroy(),p&&p.destroy(),x.destroy();const g=this.obstacles.indexOf(x);g>-1&&this.obstacles.splice(g,1)}});const m=this.scene.cameras.main.height,T=this.scene.cameras.main.width,O=m*.3,I=T/2,B=this.config.roadBendStrength??140,y=this.currentCurve*B,P=y*.6,i=x=>(1-x)*(1-x)*0+2*(1-x)*x*P+x*x*y;this.obstacles.forEach(x=>{const c=x.getData("visual"),h=x.getData("text");if(!c)return;const o=lt.Math.Clamp((x.y-O)/(m-O),0,1);let r=x.getData("laneIndex");const a=-this.worldLateralOffset;x.getData("isExit")&&(r=this.laneIndices[this.laneIndices.length-1]);const d=(r??0)*(this.laneSpacingBottom*o),n=I+i(o)+d+a;c.x=n,h&&(h.x=n,h.y=c.y);const p=x.getData("baseW")??x.width,g=x.getData("baseH")??x.height,v=.2+.8*o,f=.4+.6*o;c.displayWidth=p*v,c.displayHeight=g*f});let u;if(this.drivingCar)u=this.drivingCar.getBounds();else{const x=T/2,c=Math.floor(m*.85);u=new lt.Geom.Rectangle(x-30,c-30,60,60)}this.obstacles.forEach(x=>{if(x.getData("isExitPreview"))return;const c=x.getData("visual");if(c){const h=c.getBounds();if(x.getData("isPothole")&&this.scene.time.now%500<16&&(console.log(`🔍 Collision Check - Car: (${u.left.toFixed(1)}, ${u.top.toFixed(1)}) to (${u.right.toFixed(1)}, ${u.bottom.toFixed(1)})`),console.log(`🔍 Pothole: (${h.left.toFixed(1)}, ${h.top.toFixed(1)}) to (${h.right.toFixed(1)}, ${h.bottom.toFixed(1)})`),console.log(`🔍 Car Visual Position: X=${u.centerX.toFixed(1)}, Y=${u.centerY.toFixed(1)}`),console.log(`🔍 Pothole logical Y: ${x.y.toFixed(1)}, Visual Y: ${c.y.toFixed(1)}`)),!(u.right<h.left||u.left>h.right||u.bottom<h.top||u.top>h.bottom)){console.log(`COLLISION DETECTED! Car: (${u.left.toFixed(1)}, ${u.top.toFixed(1)}) to (${u.right.toFixed(1)}, ${u.bottom.toFixed(1)})`),console.log(`Obstacle: (${h.left.toFixed(1)}, ${h.top.toFixed(1)}) to (${h.right.toFixed(1)}, ${h.bottom.toFixed(1)})`),console.log(`Car Visual Position: X=${u.centerX.toFixed(1)}, Y=${u.centerY.toFixed(1)}`);const o=x.getData("visual");o&&o.destroy(),this.handleCollisionWithObstacle(x)}}}),this.checkExitPreviewCollisions(),this.lastSteeringValueForVisual=this.currentSteeringValue}handleCollisionWithObstacle(m){const T=!!m.getData("isExit"),O=!!m.getData("isPothole");if(T){const B=this.scene.scene.get("MenuScene"),y=B?B.menuManager:null;if(y&&y.currentDisplayedMenuType==="CYOA"){console.log("🎭 Exit collision detected but CYOA is open - movement should stop and exit will queue");return}}if(console.log("handleCollisionWithObstacle: pausing driving. isExit=",T,"isPothole=",O),this.pauseDriving(),this.scene.events.emit("carCollision"),O&&(this.resetSpeedProgression(),this.scene.events.emit("potholeHit"),this.scene.time.delayedCall(500,()=>{const B=this.scene.scene.get("GameScene");if(B&&B.windowShapes&&B.windowShapes.getQueuedNarrativeCount()>0){console.log("🚗 Pothole auto-resume blocked: story windows still in queue");return}this.resumeDriving()},[],this)),T){const B=m.getData("text");B&&(B.destroy(),console.log("🗑️ Destroyed exit text after collision"));const y=this.scene.scene.get("AppScene");if(y){y.isPaused=!0;const i=this.scene.scene.get("GameScene");i&&i.events.emit("gamePaused")}const P=this.scene.scene.get("MenuScene");if(P){const i=m.getData("shopCount")||3;let u=m.getData("exitNumber");if(u==null)try{const c=this.activeExits.find(h=>h.obstacle===m);c&&(u=c.exitNumber)}catch{}u==null&&this.activeExits.length>0&&(u=this.activeExits[this.activeExits.length-1].exitNumber),console.log("🎭 handleCollisionWithObstacle(exit): resolved exitNumber =",u);const x=P.menuManager;x&&(console.log("🎭 CarMechanics: Current menu stack before exit menu:",x.menuStack?.map(c=>`${c.type}:${c.priority}`)),console.log("🎭 CarMechanics: Current displayed menu type:",x.currentDisplayedMenuType)),u!=null&&(console.log("🎭 CarMechanics: emitting showObstacleMenu with exitNumber=",u),console.log("🎭 CarMechanics: menuScene exists:",!!P),console.log("🎭 CarMechanics: menuScene.events exists:",!!P?.events),P.events.emit("showObstacleMenu","exit",i,u),console.log("🎭 CarMechanics: showObstacleMenu event emitted"),this.scene.scene.bringToTop("MenuScene"),setTimeout(()=>{if(x&&(console.log("🎭 CarMechanics: Menu stack after exit menu attempt:",x.menuStack?.map(c=>`${c.type}:${c.priority}`)),console.log("🎭 CarMechanics: Current displayed menu type after attempt:",x.currentDisplayedMenuType),!x.currentDisplayedMenuType)){console.log("🚨 CarMechanics: EXIT MENU FAILED TO SHOW - RESUMING GAME TO PREVENT STUCK STATE");const c=this.scene.scene.get("AppScene");c&&(c.isPaused=!1),this.resumeDriving()}},100))}}m.destroy();const I=this.obstacles.indexOf(m);I>-1&&this.obstacles.splice(I,1)}spawnObstacle(){if(!this.drivingMode||this.drivingPaused){console.log("SpawnObstacle blocked - drivingMode:",this.drivingMode,"drivingPaused:",this.drivingPaused);return}if(this.scene.time.now/1e3-this.lastPotholeSpawnStep<this.minPotholeSpawnDelay){console.log("Pothole spawn blocked - too soon after last spawn"),this.startObstacleSpawning();return}console.log("SpawnObstacle called - spawning pothole only");const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height,O=T*.3,I=Math.random()<this.config.potholeProbability;if(console.log("Spawning obstacle - isPothole:",I,"potholeProbability:",this.config.potholeProbability),!I){console.log("Not spawning pothole, scheduling next obstacle"),this.startObstacleSpawning();return}let B;const y=m*this.config.potholeWidth,P=T*this.config.potholeHeight;B=this.scene.add.rectangle(0,0,y,P,this.config.potholeColor),B.setData("isPothole",!0);const i=Math.floor(Math.random()*this.laneIndices.length),u=this.laneIndices[i],x=O+lt.Math.Between(12,90),c=lt.Math.Clamp((x-O)/(T-O),0,1),h=this.config.roadBendStrength??140,o=this.currentCurve*h,r=o*.6,a=J=>(1-J)*(1-J)*0+2*(1-J)*J*r+J*J*o,d=this.getLensStrength(),n=1-lt.Math.Clamp(Math.abs(this.currentCurve),0,1),p=(u>=0?1:-1)*d*(c*c)*n,g=m/2+a(c)+u*(this.laneSpacingBottom*c)+p,v=lt.Math.Between(-6,6);B.setPosition(g+v,x),B.setData("laneIndex",u),this.lastPotholeSpawnStep=this.scene.time.now/1e3,B.setDepth(this.config.roadDepth+.5),B.setVisible(!1);const f=this.scene.add.rectangle(B.x,B.y,B.width,B.height,B.fillColor??16711680);f.setDepth(this.config.roadDepth+.5),this.drivingContainer.add(B),this.drivingContainer.add(f),B.setData("baseX",B.x);const b=m/2;if(B.setData("laneOffset",(B.x-b)/130),B.setData("baseW",B.width),B.setData("baseH",B.height),B.setData("visual",f),typeof B.getData("laneIndex")!="number"){const J=this.laneIndices.reduce((X,Z)=>Math.abs(Z-B.getData("laneOffset"))<Math.abs(X-B.getData("laneOffset"))?Z:X,this.laneIndices[0]);B.setData("laneIndex",J)}const C=this.horizontalLinePhase%this.horizontalSpacing,_=O+Math.max(0,Math.floor((B.y-O+C)/this.horizontalSpacing))*this.horizontalSpacing,M=lt.Math.Clamp((_-O)/(T-O),0,1),E=this.config.roadBendStrength??140,A=this.currentCurve*E,R=A*.6,L=J=>(1-J)*(1-J)*0+2*(1-J)*J*R+J*J*A,Y=this.getLensStrength(),F=1-lt.Math.Clamp(Math.abs(this.currentCurve),0,1),N=Number(B.getData("laneIndex"))||0,z=(N>=0?1:-1)*Y*(M*M)*F,U=b+L(M)+N*(this.laneSpacingBottom*M)+z;f.setPosition(U,_);const q=B.getData("baseW")??B.width,Q=B.getData("baseH")??B.height,K=.2+.8*M,et=.4+.6*M;f.displayWidth=q*K,f.displayHeight=Q*et;const H=100;if(this.obstacles.some(J=>J.getData("isExit")?lt.Math.Distance.Between(B.x,B.y,J.x,J.y)<H:!1)){console.log("Pothole too close to exit, deleting itself"),B.destroy(),f.destroy(),this.startObstacleSpawning();return}this.obstacles.push(B),this.startObstacleSpawning()}spawnTestExitPreview(){console.log("Spawning test exit preview");const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height,O=T*.3,I=Math.floor(m*.3),B=m-Math.floor(I/2)-1,y=this.scene.add.rectangle(B,O+2,I,this.config.exitHeight,this.config.exitColor,.5);y.setVisible(!1);const P=this.generateBellCurvedDelay(5,20),i=`timer_${Date.now()}_${Math.random()}`;this.config.exitHeight,this.laneIndices[this.laneIndices.length-1],(B-m/2)/this.laneSpacingBottom,console.log("Created independent exit timer:",i,"with",P,"steps");const u=this.scene.add.rectangle(y.x,y.y,y.width,y.height,this.config.exitColor,.3);u.setDepth(this.config.roadDepth+.5),y.setData("isExitPreview",!0),y.setData("exitWidthPx",I),y.setData("stepsUntilActivation",P),this.drivingContainer.add(y),this.drivingContainer.add(u),y.setData("baseX",B),y.setData("laneOffset",(B-m/2)/this.laneSpacingBottom),y.setData("baseW",I),y.setData("baseH",this.config.exitHeight),y.setData("visual",u),y.setData("laneIndex",this.laneIndices[this.laneIndices.length-1]);const x=this.horizontalLinePhase%this.horizontalSpacing,c=O+Math.max(0,Math.floor((y.y-O+x)/this.horizontalSpacing))*this.horizontalSpacing,h=lt.Math.Clamp((c-O)/(T-O),0,1),o=this.config.roadBendStrength??140,r=this.currentCurve*o,a=r*.6,d=_=>(1-_)*(1-_)*0+2*(1-_)*_*a+_*_*r,n=this.getLensStrength(),p=1-lt.Math.Clamp(Math.abs(this.currentCurve),0,1),g=this.laneIndices[this.laneIndices.length-1],v=(g>=0?1:-1)*n*(h*h)*p,f=m/2+d(h)+g*(this.laneSpacingBottom*h)+v;u.setPosition(f,c);const b=.2+.8*h,C=.4+.6*h;u.displayWidth=I*b,u.displayHeight=this.config.exitHeight*C,console.log("Test exit preview created with",P,"steps until activation"),console.log("Preview starting position:",y.x,y.y),console.log("Screen height:",this.scene.cameras.main.height),console.log("Pothole speed:",this.config.potholeSpeed)}destroy(){this.stopForwardMovementTimer(),this.stopNeutralReturnTimer(),this.stopObstacleSpawning(),this.collisionTimer&&(this.collisionTimer.remove(),this.collisionTimer=null),this.drivingBackground&&this.drivingBackground.destroy(),this.drivingCar&&this.drivingCar.destroy(),this.roadLines.forEach(m=>m.destroy()),this.obstacles.forEach(m=>m.destroy()),this.radarContainer?.destroy(),this.radarBG=void 0,this.radarGrid=void 0,this.radarGraphics=void 0,this.radarPlayer=void 0,this.scene.events.off("countdownChanged",this.onCountdownChanged,this),this.scene.events.off("step",this.onStepChanged,this)}createRadar(){const m=this.scene.cameras.main.width,T=this.config.radarX??m-40,O=this.config.radarY??10,I=this.config.radarWidth??33,B=this.config.radarHeight??163,y=this.config.radarAlpha??.75;this.radarContainer=this.scene.add.container(T,O),this.radarContainer.setDepth(1e4),this.radarBG=this.scene.add.rectangle(0,0,I,B,16777215,y).setOrigin(0,0),this.radarGrid=this.scene.add.grid(2,2,I-3,B-3,(I-3)/3,(B-3)/5,3355443,.8).setOrigin(0,0),this.radarGraphics=this.scene.add.graphics(),this.radarPlayer=this.scene.add.rectangle(Math.floor(I/2),B-10,3,5,16776960),this.radarContainer.add([this.radarBG,this.radarGrid,this.radarPlayer,this.radarGraphics])}onCountdownChanged(m){}onStepChanged(m){if(console.log("Step changed to:",m),this.drivingPaused){console.log("Step changed but driving is paused - skipping visual updates");return}const T=this.scene.cameras.main.height;this.scene.cameras.main.width;const O=T*.3,I=T*.3+10,B=10;this.horizontalLinePhase=(this.horizontalLinePhase+B)%1e6;const y=this.horizontalLinePhase%this.horizontalSpacing,P=this.config.roadBendStrength??140;this.currentCurve*P,this.obstacles.forEach(i=>{const u=.5+.5*lt.Math.Clamp((i.y-O)/(T-O),0,1),x=this.config.potholeSpeed*60*u;i.y+=x;const c=i.getData("visual");if(!c)return;const h=I+Math.max(0,Math.floor((i.y-I+y)/this.horizontalSpacing))*this.horizontalSpacing;c.y=h})}generateBellCurvedDelay(m,T){const O=Math.random(),I=Math.random(),B=(Math.sqrt(-2*Math.log(O))*Math.cos(2*Math.PI*I)+3)/6,y=Math.max(0,Math.min(1,B));return Math.floor(m+y*(T-m))}spawnExitFromPreview(m){const{preview:T,originalData:O}=m;this.scene.cameras.main.width;const I=this.scene.cameras.main.height*.3;console.log("Spawning new exit at origin position:",O.baseX,I+2),console.log("Exit dimensions:",O.baseW,"x",O.baseH),console.log("Exit color:",this.config.exitColor);const B=this.scene.add.rectangle(O.baseX,I+2,O.baseW,O.baseH,this.config.exitColor,1);console.log("Created exit rectangle:",B),console.log("Exit visible:",B.visible),console.log("Exit alpha:",B.alpha),B.setData("isExit",!0),B.setData("exitWidthPx",O.baseW),B.setData("baseX",O.baseX),B.setData("laneOffset",O.laneOffset),B.setData("baseW",O.baseW),B.setData("baseH",O.baseH),B.setData("laneIndex",O.laneIndex);const y=this.scene.add.rectangle(B.x,B.y,B.width,B.height,this.config.exitColor,1);y.setDepth(this.config.roadDepth+.5),B.setData("visual",y),console.log("Created exit visual:",y),console.log("Visual visible:",y.visible),console.log("Visual alpha:",y.alpha),console.log("Visual depth:",y.depth),this.drivingContainer.add(B),this.drivingContainer.add(y),this.obstacles.push(B),console.log("Exit position after creation:",B.x,B.y),console.log("Exit visual position:",y.x,y.y)}updateRadar(){if(!this.config.radarEnabled||!this.radarGraphics||!this.radarPlayer)return;const m=this.radarBG.width,T=this.radarBG.height;this.radarGraphics.clear();const O=this.scene.cameras.main.width,I=lt.Math.Clamp(this.carX/O,0,1),B=lt.Math.Clamp(2+I*(m-4),4,m-3),y=lt.Math.Clamp((this.currentSteeringValue+100)/200,0,1),P=lt.Math.Clamp(2+y*(m-4),4,m-3),i=lt.Math.Clamp(this.carSpeed/Math.max(1,this.config.carMaxSpeed),0,1),u=lt.Math.Linear(P,B,i);this.radarPlayer.setX(u),this.obstacles.forEach(x=>{const c=lt.Math.Clamp(x.x/O,0,1),h=lt.Math.Clamp(2+c*(m-4),4,m-3),o=this.scene.cameras.main.height,r=lt.Math.Clamp(x.y/o,0,1),a=lt.Math.Clamp(2+r*(T-7),2,T-7);this.radarGraphics.fillStyle(16711680).fillRect(h,a,3,5)})}}const QJ={mike:{name:"Mike",role:"Lead Singer, Guitar",index:0,sprite:"x.png",description:"Gets bored quickly and loses bathroom quickly. Loves to call his wife.",mood:{current:"content",priority:["bathroom","food","bored"],thresholds:{bathroom:.3,food:.5,bored:.5}},storyProgression:{current:1,max:3,unlockThresholds:[1,5,10]},preferences:{food:{hotDog:1,salty:1,sweet:1,spicy:1,mixed:1},weed:{joint:1,blunt:1,bowl:1,bong:1,vape:1,edible:1,dab:1,pipe:1},energyDrink:{basic:1,premium:1,sugarFree:1,natural:1,vitamin:1,herbal:1,protein:1,focus:1,recovery:1,thermogenic:1,electrolyte:1,organic:1,keto:1,coldBrew:1,ultra:1},phone:{basic:1,smartphone:1,cracked:1,vintage:1,broken:1,gaming:1},decoration:{banner:1,lighting:1,atmosphere:1,celebration:1,fireworks:1,visual:1}},specialTraits:{boredomDecayRate:1.5,bathroomDecayRate:1.5,canCallWife:!0,phoneEffect:"relieveBoredom"}},stanli:{name:"Stanli",role:"Drums",index:1,sprite:"x.png",description:"Viral sensation who adds buzz when using phone. Plays Fortnite with John.",mood:{current:"content",priority:["bathroom","food","bored"],thresholds:{bathroom:.3,food:.5,bored:.5}},storyProgression:{current:1,max:3,unlockThresholds:[2,7,12]},preferences:{food:{hotDog:1,salty:1,sweet:1,spicy:1,mixed:1},weed:{joint:1,blunt:1,bowl:1,bong:1,vape:1,edible:1,dab:1,pipe:1},energyDrink:{basic:1,premium:1,sugarFree:1,natural:1,vitamin:1,herbal:1,protein:1,focus:1,recovery:1,thermogenic:1,electrolyte:1,organic:1,keto:1,coldBrew:1,ultra:1},phone:{basic:1,smartphone:1,cracked:1,vintage:1,broken:1,gaming:1},decoration:{banner:1,lighting:1,atmosphere:1,celebration:1,fireworks:1,visual:1}},specialTraits:{canCallWife:!1,phoneEffect:"addBuzz"}},john:{name:"John",role:"Bass",index:2,sprite:"x.png",description:"Can call wife or play Fortnite with Stanli. Uses phone to call wife.",mood:{current:"content",priority:["bathroom","food","bored"],thresholds:{bathroom:.3,food:.5,bored:.5}},storyProgression:{current:1,max:3,unlockThresholds:[3,8,13]},preferences:{food:{hotDog:1,salty:1,sweet:1,spicy:1,mixed:1},weed:{joint:1,blunt:1,bowl:1,bong:1,vape:1,edible:1,dab:1,pipe:1},energyDrink:{basic:1,premium:1,sugarFree:1,natural:1,vitamin:1,herbal:1,protein:1,focus:1,recovery:1,thermogenic:1,electrolyte:1,organic:1,keto:1,coldBrew:1,ultra:1},phone:{basic:1,smartphone:1,cracked:1,vintage:1,broken:1,gaming:1},decoration:{banner:1,lighting:1,atmosphere:1,celebration:1,fireworks:1,visual:1}},specialTraits:{canCallWife:!0,phoneEffect:"callWife"}},cora:{name:"Cora",role:"Guitar",index:3,sprite:"x.png",description:"Sleeps through 75% of driving. When awake, reacts more frequently. Loves to nap.",mood:{current:"content",priority:["bathroom","food","bored"],thresholds:{bathroom:.3,food:.5,bored:.5}},storyProgression:{current:1,max:3,unlockThresholds:[4,9,14]},preferences:{food:{hotDog:1,salty:1,sweet:1,spicy:1,mixed:1},weed:{joint:1,blunt:1,bowl:1,bong:1,vape:1,edible:1,dab:1,pipe:1},energyDrink:{basic:1,premium:1,sugarFree:1,natural:1,vitamin:1,herbal:1,protein:1,focus:1,recovery:1,thermogenic:1,electrolyte:1,organic:1,keto:1,coldBrew:1,ultra:1},phone:{basic:1,smartphone:1,cracked:1,vintage:1,broken:1,gaming:1},decoration:{banner:1,lighting:1,atmosphere:1,celebration:1,fireworks:1,visual:1}},specialTraits:{canCallWife:!1,sleepProbability:.75,awakeReactionFrequency:2}},mitch:{name:"Mitch",role:"Guitar",index:4,sprite:"x.png",description:"Loves all snacks (1.5x food value). Prefers solo activities - gets less payoff with others.",mood:{current:"content",priority:["bathroom","food","bored"],thresholds:{bathroom:.3,food:.5,bored:.5}},storyProgression:{current:1,max:3,unlockThresholds:[5,11,15]},preferences:{food:{hotDog:1.5,salty:1.5,sweet:1.5,spicy:1.5,mixed:1.5},weed:{joint:1,blunt:1,bowl:1,bong:1,vape:1,edible:1,dab:1,pipe:1},energyDrink:{basic:1,premium:1,sugarFree:1,natural:1,vitamin:1,herbal:1,protein:1,focus:1,recovery:1,thermogenic:1,electrolyte:1,organic:1,keto:1,coldBrew:1,ultra:1},phone:{basic:1,smartphone:1,cracked:1,vintage:1,broken:1,gaming:1},decoration:{banner:1,lighting:1,atmosphere:1,celebration:1,fireworks:1,visual:1}},specialTraits:{canCallWife:!1,lovesAllSnacks:!0}}},JJ={bandMembers:QJ},ZJ={bandMembers:JJ.bandMembers};function tZ(W){return Object.values(ZJ.bandMembers).find(m=>m.index===W)}function eZ(W,m,T,O){const{priority:I,thresholds:B}=W.mood;for(const y of I){const P=B[y];if((y==="bathroom"?T:y==="food"?m:y==="bored"?O:1)<P)return y}return"content"}class iZ{scene;config;bandMember;container;baseRect;pet;faceSVG;foodValue=0;bathroomValue=10;boredValue=0;currentMood="content";foodBarBG;foodBarFill;foodLabel;bathroomBarBG;bathroomBarFill;bathroomLabel;boredBarBG;boredBarFill;boredLabel;lastCamWidth=0;debugGraphics;isHovering=!1;petBaseColor=Jv.petColor;messageSprite;messageText;hasActiveMessage=!1;messageThresholds=[3,2,1.5,1,.5,.3,.2];lastMessageThreshold=10;messageStepsRemaining=0;messageStepTimer;messageStartX=0;messageStartY=0;messageType="";petBody;anchorBody;swayConstraint;anchorX=0;anchorY=0;steeringListenerBound;constructor(m,T={}){console.log("🔍 VirtualPet constructor called with config:",T),this.scene=m,this.config=T,T.petIndex!==void 0&&(this.bandMember=tZ(T.petIndex)),this.foodValue=10,this.bathroomValue=10,this.boredValue=10,this.foodValue=Math.max(0,this.foodValue-lt.Math.FloatBetween(.1,.5)),this.bathroomValue=Math.max(0,this.bathroomValue-lt.Math.FloatBetween(.1,.5)),this.boredValue=Math.max(0,this.boredValue-lt.Math.FloatBetween(.1,.5)),T.petIndex!==void 0&&this.applySpecialPetValues(T.petIndex)}applySpecialPetValues(m){switch(m){case 0:this.boredValue=6;break;case 2:this.bathroomValue=6;break;case 4:this.foodValue=6;break}}initialize(){console.log("🔍 VirtualPet initialize() called");const m=this.scene.cameras.main,T=this.config.width??Math.floor(m.width*.85),O=this.config.height??Math.floor(m.height*.2),I=Math.floor((this.config.xPercent??.5)*m.width),B=Math.max(0,this.config.yOffset??6)+Math.floor(O/2),y=Math.floor((this.config.xPercent??.5)*m.width),P=Math.max(0,this.config.yOffset??6)+Math.floor(O/2);this.container=this.scene.add.container(y,P),this.config.depth!==void 0&&this.container.setDepth(this.config.depth),this.container.setScrollFactor(0);const i=T>0?T:Math.floor(this.scene.cameras.main.width*.5),u=O>0?O:Math.floor(this.scene.cameras.main.height*.25);this.container.setSize(i,u),this.container.setInteractive(new lt.Geom.Rectangle(-i/2,-u/2,i,u),lt.Geom.Rectangle.Contains),T>0&&O>0&&(this.baseRect=this.scene.add.rectangle(I,B,T,O,this.config.backgroundColor??2236962,.9),this.baseRect.setStrokeStyle(2,16777215,1),this.baseRect.setScrollFactor(0));const x=T>0?Math.floor(O*.27):25;this.petBaseColor=this.config.petColor??16764006;const c=-(T>0?Math.floor(this.baseRect?.width*.3):0)-15,h=-Math.floor(O*.35)+15;this.pet=this.scene.add.ellipse(c,h,x*2,x*2,this.petBaseColor,1),this.pet.setStrokeStyle(2,0,1),this.pet.setScrollFactor(0),this.container.add(this.pet),console.log("🔍 VirtualPet: Pet ellipse added to container, pet properties:",{visible:this.pet.visible,alpha:this.pet.alpha,x:this.pet.x,y:this.pet.y,width:this.pet.width,height:this.pet.height}),this.faceSVG=this.scene.add.sprite(c,h,"face-neutral"),this.faceSVG.setScale(.075),this.faceSVG.setOrigin(.5,.5),this.faceSVG.setAlpha(.9),this.faceSVG.setScrollFactor(0),this.faceSVG.setDepth(this.pet.depth+1),this.faceSVG.setTint(16777215),this.container.add(this.faceSVG),console.log("🔍 VirtualPet: Face SVG added to container, face properties:",{visible:this.faceSVG.visible,alpha:this.faceSVG.alpha,x:this.faceSVG.x,y:this.faceSVG.y,scaleX:this.faceSVG.scaleX,scaleY:this.faceSVG.scaleY}),this.updateFaceEmotion(),this.pet.setInteractive(),this.pet.setInteractive(new lt.Geom.Circle(0,0,x),lt.Geom.Circle.Contains),this.pet.on("pointerdown",()=>{console.log("Virtual pet pointerdown detected!")}),this.pet.on("click",()=>{console.log("🐾 Virtual pet click detected for pet",this.config.petIndex),this.scene.scene.get("MenuScene")?.events.emit("showVirtualPetMenu",this.config.petIndex)}),this.pet.on("pointerover",()=>{console.log("🐾 Virtual pet pointerover detected for pet",this.config.petIndex)});const o=this.baseRect?[this.baseRect,this.pet]:[this.pet];this.container.add(o),this.container.add(this.faceSVG);const r=this.scene.add.circle(c,h,x,0,0);r.setName("Pet"),r.setInteractive(),r.setScrollFactor(0),r.setDepth(70001),this.container.add(r);let a=0,d=0,n=0,p=!1;const g=8,v=600;r.on("pointerdown",R=>{p=!0,a=R.x,d=R.y,n=performance.now(),console.log("🐾 Click area pointerdown detected for pet",this.config.petIndex)}),r.on("pointerup",R=>{if(console.log("🐾 Click area pointerup detected for pet",this.config.petIndex),!p)return;p=!1;const L=R.x-a,Y=R.y-d,F=Math.hypot(L,Y),N=performance.now()-n;if(F<=g&&N<=v){const z=this.scene.scene.get("GameScene");if(!(z&&z.carStarted)){console.log("🐾 Pet click ignored (car not started) for pet",this.config.petIndex);return}console.log("🐾 Pet click accepted for pet",this.config.petIndex),this.scene.scene.get("MenuScene")?.events.emit("showVirtualPetMenu",this.config.petIndex)}}),r.on("pointerout",()=>{p=!1}),r.on("pointerover",()=>{console.log("🐾 Click area pointerover detected for pet",this.config.petIndex)}),this.container.on("pointerdown",()=>{console.log("🐾 Container pointerdown detected for pet",this.config.petIndex)}),this.container.on("pointerup",()=>{}),this.container.on("pointerover",()=>{console.log("🐾 Container pointerover detected for pet",this.config.petIndex)});const f=m.width;this.lastCamWidth=f;const b=10,C=Math.max(6,Math.floor(f*.03)),_=c+x+12,M=h;this.foodLabel=this.scene.add.text(_-46,M-9,"FOOD",{fontSize:"12px",color:"#ffffff",fontStyle:"bold"}),this.foodLabel.setScrollFactor(0),this.foodLabel.setVisible(!1),this.foodBarBG=this.scene.add.rectangle(_+Math.floor(C/2),M,C,b,0,.6),this.foodBarBG.setStrokeStyle(1,16777215,.8),this.foodBarBG.setScrollFactor(0),this.foodBarBG.setVisible(!1),this.foodBarFill=this.scene.add.rectangle(_-Math.floor(C/2),M,Math.floor(C*(this.foodValue/10)),b-2,3066993,1).setOrigin(0,.5),this.foodBarFill.setScrollFactor(0),this.foodBarFill.setVisible(!1);const E=M+14;this.bathroomLabel=this.scene.add.text(_-46,E-9,"BATH",{fontSize:"12px",color:"#ffffff",fontStyle:"bold"}),this.bathroomLabel.setScrollFactor(0),this.bathroomLabel.setVisible(!1),this.bathroomBarBG=this.scene.add.rectangle(_+Math.floor(C/2),E,C,b,0,.6),this.bathroomBarBG.setStrokeStyle(1,16777215,.8),this.bathroomBarBG.setScrollFactor(0),this.bathroomBarBG.setVisible(!1),this.bathroomBarFill=this.scene.add.rectangle(_-Math.floor(C/2),E,Math.floor(C*(this.bathroomValue/10)),b-2,3447003,1).setOrigin(0,.5),this.bathroomBarFill.setScrollFactor(0),this.bathroomBarFill.setVisible(!1);const A=E+14;this.boredLabel=this.scene.add.text(_-46,A-9,"BORED",{fontSize:"12px",color:"#ffffff",fontStyle:"bold"}),this.boredLabel.setScrollFactor(0),this.boredLabel.setVisible(!1),this.boredBarBG=this.scene.add.rectangle(_+Math.floor(C/2),A,C,b,0,.6),this.boredBarBG.setStrokeStyle(1,16777215,.8),this.boredBarBG.setScrollFactor(0),this.boredBarBG.setVisible(!1),this.boredBarFill=this.scene.add.rectangle(_-Math.floor(C/2),A,Math.floor(C*(this.boredValue/10)),b-2,10181046,1).setOrigin(0,.5),this.boredBarFill.setScrollFactor(0),this.boredBarFill.setVisible(!1),this.container.add([this.foodLabel,this.foodBarBG,this.foodBarFill,this.bathroomLabel,this.bathroomBarBG,this.bathroomBarFill,this.boredLabel,this.boredBarBG,this.boredBarFill]),this.debugGraphics=this.scene.add.graphics(),this.debugGraphics.setScrollFactor(0),this.container.add(this.debugGraphics),this.setupMatterSway(c,h,x),this.steeringListenerBound=R=>this.applySteeringSway(R),this.scene.events.on("steeringInput",this.steeringListenerBound,this),this.scene.events.on("countdownChanged",()=>{this.processCountdownDecay()})}processCountdownDecay(){const m=this.config.petIndex||0,T=Jv.petDecayRates[m];if(!T){console.warn(`VirtualPet: No decay rates found for pet index ${m}, using defaults`),this.setFood(this.foodValue-.05),this.setBathroom(this.bathroomValue-.04),this.setBored(this.boredValue-.045);return}this.setFood(this.foodValue-T.food),this.setBathroom(this.bathroomValue-T.bathroom),this.setBored(this.boredValue-T.boredom)}destroy(){this.steeringListenerBound&&(this.scene.events.off("steeringInput",this.steeringListenerBound,this),this.steeringListenerBound=void 0),this.scene.matter&&(this.swayConstraint&&this.scene.matter.world.removeConstraint(this.swayConstraint),this.petBody&&this.scene.matter.world.remove(this.petBody),this.anchorBody&&this.scene.matter.world.remove(this.anchorBody)),this.removeMessageSprite(),this.container?.destroy()}getRoot(){return this.container}getBounds(){if(this.baseRect)return this.baseRect.getBounds()}getScreenBounds(){if(!this.baseRect)return;const m=this.baseRect.width,T=this.baseRect.height;return new lt.Geom.Rectangle(this.baseRect.x-m/2,this.baseRect.y-T/2,m,T)}isPointerOver(m,T){const O=this.getFeedAnchor();if(!O)return!1;const I=m-O.x,B=T-O.y;return Math.sqrt(I*I+B*B)<=O.r+12}setHover(m){this.pet&&m!==this.isHovering&&(this.isHovering=m,m?(this.scene.tweens.add({targets:this.pet,scaleX:1.08,scaleY:1.08,duration:120,ease:"Sine.easeOut"}),this.pet.fillColor=16769162):(this.scene.tweens.add({targets:this.pet,scaleX:1,scaleY:1,duration:120,ease:"Sine.easeOut"}),this.pet.fillColor=this.petBaseColor))}setDebugBoundsVisible(m){if(!this.debugGraphics||!this.baseRect||(this.debugGraphics.clear(),!m))return;const T=this.baseRect.width,O=this.baseRect.height;this.debugGraphics.lineStyle(2,16711680,.9),this.debugGraphics.strokeRect(this.baseRect.x-T/2,this.baseRect.y-O/2,T,O)}getFeedAnchor(){if(!this.pet)return;const m=this.baseRect?.height||80,T=Math.floor(m*.3);return{x:this.pet.x,y:this.pet.y,r:T}}update(){if(!this.container)return;const m=this.scene.cameras.main.angle??0;if(this.container.setAngle?.(-m),this.petBody){const O=this.petBody.position.x,I=this.petBody.position.y;this.pet.setPosition(O,I),this.faceSVG.setPosition(O,I)}const T=this.scene.cameras.main;if(this.foodBarBG&&this.foodBarFill&&this.pet){const O=this.baseRect?.height||80,I=Math.floor(O*.3);if(this.foodBarBG.height,this.lastCamWidth!==T.width){this.lastCamWidth=T.width;const u=Math.max(6,Math.floor(T.width*.03));this.foodBarBG.width=u;const x=lt.Math.Clamp(this.foodValue,0,10);if(this.foodBarFill.width=Math.max(0,Math.floor(u*(x/10))-2),this.bathroomBarBG&&this.bathroomBarFill){this.bathroomBarBG.width=u;const c=lt.Math.Clamp(this.bathroomValue,0,10);this.bathroomBarFill.width=Math.max(0,Math.floor(u*(c/10))-2)}if(this.boredBarBG&&this.boredBarFill){this.boredBarBG.width=u;const c=lt.Math.Clamp(this.boredValue,0,10);this.boredBarFill.width=Math.max(0,Math.floor(u*(c/10))-2)}}const B=I+12,y=0;this.foodBarBG.setPosition(B,y),this.foodBarFill.setPosition(B-Math.floor(this.foodBarBG.width/2),y),this.foodLabel.setPosition(B-46,y-9);const P=y+14;this.bathroomBarBG?.setPosition(B,P),this.bathroomBarFill?.setPosition(B-Math.floor(this.bathroomBarBG?.width/2),P),this.bathroomLabel?.setPosition(B-46,P-9);const i=P+14;this.boredBarBG?.setPosition(B,i),this.boredBarFill?.setPosition(B-Math.floor(this.boredBarBG?.width/2),i),this.boredLabel?.setPosition(B-46,i-9)}}setupMatterSway(m,T,O){const I=this.scene.matter;if(!I)return;const B=.7+Math.random()*.6,y=.5+Math.random()*.4,P=.02+Math.random()*.03,i=.03+Math.random()*.06;this.anchorX=m,this.anchorY=T,this.anchorBody=I.add.circle(m,T,Math.max(1,Math.floor(O*.2)),{isStatic:!0,isSensor:!0,collisionFilter:{group:-2,category:0,mask:0}}),this.petBody=I.add.circle(m,T,Math.max(6,Math.floor(O*.5)),{frictionAir:i,friction:0,restitution:.2,isSensor:!0,collisionFilter:{group:-2,category:0,mask:0},mass:10,inertia:1e3}),this.petBody.ignoreGravity=!1,this.petBody.gravityScale=.1;const u=Math.max(1,Math.floor(O*.1*B));this.swayConstraint=I.add.constraint(this.anchorBody,this.petBody,u,P,{damping:y,stiffness:P})}applySteeringSway(m){if(!this.petBody)return;const T=-8e-4*lt.Math.Clamp(m/150,-1,1),O=0,I=this.scene.matter;I&&I.body&&this.petBody&&I.body.applyForce(this.petBody,this.petBody.position,{x:T,y:O})}refreshFoodBar(){if(!this.foodBarBG||!this.foodBarFill)return;const m=this.foodBarBG.width,T=lt.Math.Clamp(this.foodValue,0,10);this.foodBarFill.width=Math.max(0,Math.floor(m*(T/10))-2);const O=T>6?3066993:T>3?15844367:15158332;this.foodBarFill.fillColor=O}refreshBathroomBar(){if(!this.bathroomBarBG||!this.bathroomBarFill)return;const m=this.bathroomBarBG.width,T=lt.Math.Clamp(this.bathroomValue,0,10);this.bathroomBarFill.width=Math.max(0,Math.floor(m*(T/10))-2);const O=T>6?3447003:T>3?6139362:2056589;this.bathroomBarFill.fillColor=O}refreshBoredBar(){if(!this.boredBarBG||!this.boredBarFill)return;const m=this.boredBarBG.width,T=lt.Math.Clamp(this.boredValue,0,10);this.boredBarFill.width=Math.max(0,Math.floor(m*(T/10))-2);const O=T>6?10181046:T>3?12292046:7091331;this.boredBarFill.fillColor=O}createMessageSprite(){this.hasActiveMessage||!this.pet||(this.messageStartX=this.pet.x,this.messageStartY=this.pet.y+40,this.messageSprite=this.scene.add.circle(this.messageStartX,this.messageStartY,8,16711680,.8),this.messageSprite.setScrollFactor(0),this.messageSprite.setDepth(this.config.depth?this.config.depth+1e3:8e4),this.messageText=this.scene.add.text(this.messageStartX,this.messageStartY,this.messageType.toUpperCase(),{fontSize:"12px",color:"#ffffff",fontStyle:"bold",align:"center"}),this.messageText.setOrigin(.5,.5),this.messageText.setScrollFactor(0),this.messageText.setDepth(this.config.depth?this.config.depth+1001:80001),this.container&&(this.container.add(this.messageSprite),this.container.add(this.messageText)),this.hasActiveMessage=!0,this.messageStepsRemaining=8,console.log(`Pet ${this.config.petIndex}: Created ${this.messageType} message at threshold ${this.lastMessageThreshold}`),this.messageStepTimer=this.scene.time.addEvent({delay:1e3,loop:!0,callback:()=>{this.messageStepsRemaining--,this.updateMessageAnimation(),this.messageStepsRemaining<=0&&this.removeMessageSprite()}}))}updateMessageAnimation(){if(!this.messageSprite||!this.messageText)return;const m=8,T=(m-this.messageStepsRemaining)/m,O=30,I=this.messageStartX,B=this.messageStartY+O*T,y=.8,P=y-(y-0)*T;this.messageSprite.setPosition(I,B),this.messageSprite.setAlpha(P),this.messageText.setPosition(I,B),this.messageText.setAlpha(P)}removeMessageSprite(){console.log(`Pet ${this.config.petIndex}: Removing ${this.messageType} message (cleanup verification)`),this.messageSprite&&(this.messageSprite.destroy(),this.messageSprite=void 0,console.log("  -> Message sprite destroyed")),this.messageText&&(this.messageText.destroy(),this.messageText=void 0,console.log("  -> Message text destroyed")),this.messageStepTimer&&(this.messageStepTimer.remove(),this.messageStepTimer=void 0,console.log("  -> Message timer removed")),this.hasActiveMessage=!1,this.messageStepsRemaining=0,this.messageType="",console.log(`  -> Message cleanup completed for pet ${this.config.petIndex}`)}checkAndShowMessage(){if(this.isSleeping()&&Math.random()<.75)return;const m=Math.min(this.foodValue,this.bathroomValue,this.boredValue);let T="";this.foodValue===m?T="food":this.bathroomValue===m?T="bath":this.boredValue===m&&(T="bored");let O=-1;for(let I=0;I<this.messageThresholds.length;I++){const B=this.messageThresholds[I];if(m<B&&B<this.lastMessageThreshold){O=B;break}}O>0&&!this.hasActiveMessage&&(this.lastMessageThreshold=O,this.messageType=T,this.createMessageSprite()),m>=3&&this.lastMessageThreshold<10&&(this.lastMessageThreshold=10)}triggerDebugMessage(){console.log(`Pet ${this.config.petIndex}: Triggering debug message`),this.messageType="debug",this.createMessageSprite()}setFood(m){this.foodValue=lt.Math.Clamp(m,0,10),this.refreshFoodBar(),this.updateFaceEmotion(),this.updateMood(),this.checkAndShowMessage()}setBathroom(m){this.bathroomValue=lt.Math.Clamp(m,0,10),this.refreshBathroomBar(),this.updateFaceEmotion(),this.updateMood(),this.checkAndShowMessage()}setBored(m){this.boredValue=lt.Math.Clamp(m,0,10),this.refreshBoredBar(),this.updateFaceEmotion(),this.updateMood(),this.checkAndShowMessage()}feedOverTime(m,T,O,I,B){const y=O?this.applyFoodPreference(O,m):m,P=this.foodValue,i=lt.Math.Clamp(P+y,0,10),u=Math.max(50,T),x=this.scene.time.now,c=this.scene.time.addEvent({delay:16,loop:!0,callback:()=>{const h=lt.Math.Clamp((this.scene.time.now-x)/u,0,1),o=lt.Math.Easing.Quadratic.Out(h),r=lt.Math.Linear(P,i,o);this.setFood(r);const a=y*.5,d=this.bathroomValue,n=lt.Math.Clamp(d-a,0,10),p=lt.Math.Linear(d,n,o);this.setBathroom(p),I&&I(o),h>=1&&(c.remove(!1),B&&B())}})}getFoodMeterElements(){return{label:this.foodLabel,background:this.foodBarBG,fill:this.foodBarFill}}getBathroomMeterElements(){return{label:this.bathroomLabel,background:this.bathroomBarBG,fill:this.bathroomBarFill}}getBoredMeterElements(){return{label:this.boredLabel,background:this.boredBarBG,fill:this.boredBarFill}}getFoodValue(){return this.foodValue}getBandMember(){return this.bandMember}applyFoodPreference(m,T){if(!this.bandMember)return T;const O=this.bandMember.preferences.food[m];return T*(O||1)}applyWeedPreference(m,T){if(!this.bandMember)return T;const O=this.bandMember.preferences.weed[m];return T*(O||1)}applyEnergyDrinkPreference(m,T){if(!this.bandMember)return T;const O=this.bandMember.preferences.energyDrink[m];return T*(O||1)}applyPhonePreference(m,T){if(!this.bandMember)return T;const O=this.bandMember.preferences.phone[m];return T*(O||1)}applyDecorationPreference(m,T){if(!this.bandMember)return T;const O=this.bandMember.preferences.decoration[m];return T*(O||1)}isSleeping(){return!this.bandMember||!this.bandMember.specialTraits.sleepProbability?!1:Math.random()<this.bandMember.specialTraits.sleepProbability}getReactionFrequency(){return!this.bandMember||!this.bandMember.specialTraits.awakeReactionFrequency?1:this.isSleeping()?0:this.bandMember.specialTraits.awakeReactionFrequency}updateMood(){if(!this.bandMember)return;const m=eZ(this.bandMember,this.foodValue,this.bathroomValue,this.boredValue);m!==this.currentMood&&(this.currentMood=m,console.log(`${this.bandMember.name} mood changed to: ${m}`))}getCurrentMood(){return this.currentMood}applyWeedEffect(m,T){const O=T?this.applyWeedPreference(T,m):m;return this.setBored(Math.min(10,this.boredValue+O)),O}applyEnergyDrinkEffect(m,T){const O=T?this.applyEnergyDrinkPreference(T,m):m;return this.setBored(Math.min(10,this.boredValue+O)),O}applyPhoneEffect(m,T){const O=T?this.applyPhonePreference(T,m):m;if(!this.bandMember)return{adjustedAmount:O,effect:"normal"};switch(this.bandMember.specialTraits.phoneEffect){case"relieveBoredom":return this.setBored(Math.min(10,this.boredValue+O)),{adjustedAmount:O,effect:"relieveBoredom"};case"addBuzz":return{adjustedAmount:O,effect:"addBuzz"};case"callWife":return this.setBored(Math.min(10,this.boredValue+O)),{adjustedAmount:O,effect:"callWife"};default:return{adjustedAmount:O,effect:"normal"}}}applyDecorationEffect(m,T){const O=T?this.applyDecorationPreference(T,m):m;return this.setBored(Math.min(10,this.boredValue+O)),O}getBathroomValue(){return this.bathroomValue}getBoredValue(){return this.boredValue}getPetScreenXY(){if(this.pet)return{x:this.pet.x,y:this.pet.y};if(this.baseRect)return{x:this.baseRect.x,y:this.baseRect.y-this.baseRect.height*.35};const m=this.scene.cameras.main;return{x:m.width/2,y:Math.floor(m.height*.15)}}getPetSprite(){return this.pet}updateFaceEmotion(){if(!this.faceSVG)return;const m=Math.min(this.foodValue,this.bathroomValue,this.boredValue);let T;m<=3?T="face-frown":m<=6?T="face-neutral":T="face-smile",this.faceSVG.setTexture(T)}}class sZ{scene;config;overlayManager;tutorialOverlay;tutorialMaskGraphics;blinkText;blinkIntervalSteps=.5;lastTutorialState="";stepCounter=0;pulseTimer=0;flashTimer=0;frontseatKeys=null;gameUI=null;constructor(m,T,O){this.scene=m,this.config=T,this.overlayManager=O||new Fm(m)}initialize(){this.createTutorialOverlay();const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height;this.blinkText=this.scene.add.text(m/2,T*.3,"tutorial",{fontSize:"28px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5),this.blinkText.setScrollFactor(0),this.blinkText.setDepth(120001);try{this.blinkText.setStroke?.()}catch{}try{this.blinkText.setShadow?.(2,2,"#000000",6,!0,!0)}catch{}this.blinkText.setVisible(!1),this.tutorialOverlay.add(this.blinkText)}setPhysicsObjects(m){this.frontseatKeys=m}setGameUI(m){this.gameUI=m}updateTutorialMaskRealTime(){if(this.tutorialOverlay&&this.lastTutorialState==="keys-and-ignition"){const m=this.getKeysAndIgnitionCutouts(this.pulseTimer),T=this.tutorialOverlay.overlayInstance;if(T){T.mask&&T.mask.destroy();const O=this.scene.make.graphics();m.forEach(I=>{O.fillStyle(16777215);const B=I.x+I.width/2,y=I.y+I.height/2,P=Math.min(I.width,I.height)/2;O.fillCircle(B,y,P)}),T.mask=this.scene.add.bitmapMask(O),T.mask.invertAlpha=!0,T.background.setMask(T.mask)}}}updateTutorialOverlay(m){let T="none";if(!m.keysInIgnition&&!m.carStarted&&(T="keys-and-ignition"),this.tutorialOverlay){const O=T!=="none";this.tutorialOverlay.setVisible(O);try{this.scene.events?.emit?.("tutorialOverlayVisible",O)}catch{}}this.blinkText&&(T==="keys-and-ignition"?(this.blinkText.setText("PUT KEY IN IGNITION"),this.blinkText.setVisible(!0)):this.blinkText.setVisible(!1)),T!=="none"&&this.lastTutorialState!==T&&this.updateTutorialMask(T),this.lastTutorialState!==T&&(this.lastTutorialState=T)}createTutorialOverlay(){if(this.tutorialOverlay){window?.__ENABLE_TUTORIAL_DEBUG&&console.log("Tutorial overlay already exists, skipping creation");return}this.scene.cameras.main.width,this.scene.cameras.main.height;const m=this.overlayManager.createTutorialOverlay("tutorial_overlay",[]);this.tutorialOverlay=m.container,this.tutorialMaskGraphics=this.scene.make.graphics(),this.tutorialOverlay.overlayInstance=m,this.tutorialOverlay.setVisible(!1)}updateTutorialMask(m){if(!this.tutorialOverlay)return;let T=[];switch(m){case"keys-and-ignition":T=this.getKeysAndIgnitionCutouts(this.pulseTimer);break;case"steering":T=this.getSteeringCutouts();break;case"exit-warning":T=this.getExitWarningCutouts();break}const O=this.tutorialOverlay.overlayInstance;if(O){O.mask&&O.mask.destroy();const I=this.scene.make.graphics();T.forEach(B=>{I.fillStyle(16777215);const y=B.x+B.width/2,P=B.y+B.height/2,i=Math.min(B.width,B.height)/2;I.fillCircle(y,P,i)}),O.mask=this.scene.add.bitmapMask(I),O.mask.invertAlpha=!0,O.background.setMask(O.mask)}}getKeysAndIgnitionCutouts(m=0){const T=[],O=m%2===0?1:1.3;if(this.frontseatKeys?.gameObject){const P=this.frontseatKeys.gameObject.body;let i=P?P.position.x:this.frontseatKeys.gameObject.x,u=P?P.position.y:this.frontseatKeys.gameObject.y;window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🔑 Keys live position:",{x:i,y:u,hasBody:!!P});const x=this.config.keysHoleRadius*1.2*O;T.push({x:i-x,y:u-x,width:x*2,height:x*2}),window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🔑 Keys cutout:",{keysPos:{x:i,y:u},screenPos:{x:i,y:u},radius:x,cutout:T[T.length-1]})}else window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🔑 No frontseat keys found for cutout");let I=200,B=550;try{const P=Se.getMagneticTarget();I=P.position.x,B=P.position.y;const i=this.scene.magneticTarget,u=i&&i.magneticBody;u&&u.position&&(I=u.position.x,B=u.position.y)}catch{}const y=this.config.magneticTargetRadius*this.config.targetHoleMultiplier*1.2*O;return T.push({x:I-y,y:B-y,width:y*2,height:y*2}),window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🚗 Ignition cutout:",{ignitionPos:{x:I,y:B},radius:y,cutout:T[T.length-1]}),T}getSteeringCutouts(){const m=[],T=this.scene.cameras.main.width,O=this.scene.cameras.main.height,I=Se.getSteeringWheel(),B=T*I.position.x,y=O*I.position.y,P=96;return m.push({x:B-P,y:y-P,width:P*2,height:P*2}),m}showTutorial(){this.tutorialOverlay&&this.tutorialOverlay.setVisible(!0)}hideTutorial(){this.tutorialOverlay?(window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🎓 TutorialSystem: Hiding tutorial overlay"),this.tutorialOverlay.setVisible(!1)):window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🎓 TutorialSystem: No tutorial overlay to hide")}isTutorialVisible(){return this.tutorialOverlay?this.tutorialOverlay.visible:!1}getOverlayObjects(){const m=[];return this.tutorialOverlay&&m.push(this.tutorialOverlay),m}setBlinkText(m){this.blinkText&&this.blinkText.setText(m||"")}handleHalfStep(m){try{this.flashTimer=m*.5;const T=this.isTutorialVisible();if(T&&this.lastTutorialState==="keys-and-ignition"&&this.updateTutorialMaskWithPulse(),!this.blinkText)return;if(!T||!this.blinkText.text){this.blinkText.setAlpha(0);return}const O=Math.floor(m/4)%2===0?0:1;this.blinkText.setAlpha(O)}catch(T){console.error("💓 Error in handleHalfStep:",T)}}handleStep(m){try{this.stepCounter=m,this.pulseTimer+=1,this.isTutorialVisible()&&this.lastTutorialState==="keys-and-ignition"&&this.updateTutorialMaskWithPulse()}catch(T){console.error("💓 Error in handleStep:",T)}}updateTutorialMaskWithPulse(){if(!this.tutorialOverlay)return;const m=this.getKeysAndIgnitionCutouts(this.pulseTimer),T=this.tutorialOverlay.overlayInstance;if(T){T.mask&&T.mask.destroy();const O=this.scene.make.graphics();m.forEach(I=>{O.fillStyle(16777215);const B=I.x+I.width/2,y=I.y+I.height/2,P=Math.min(I.width,I.height)/2;O.fillCircle(B,y,P)}),T.mask=this.scene.add.bitmapMask(O),T.mask.invertAlpha=!0,T.background.setMask(T.mask)}}getCurrentTutorialState(){return this.lastTutorialState}debugForceShowTutorial(){this.tutorialOverlay&&(this.tutorialOverlay.setVisible(!0),this.updateTutorialMask("keys-and-ignition"),this.blinkText&&(this.blinkText.setText("DEBUG: Place keys in ignition"),this.blinkText.setVisible(!0),this.blinkText.setAlpha(1)),this.stepCounter=0,this.handleStep(999))}getExitWarningCutouts(){return[]}destroy(){this.tutorialOverlay&&this.tutorialOverlay.destroy(),this.tutorialMaskGraphics&&this.tutorialMaskGraphics.destroy()}}const xi={steering:{dialXPercent:.3,dialYPercent:.7,knobRadius:80,svgScale:.2,svgAlpha:.8,svgDepth:998,indicatorLength:50,indicatorMaxAngleDeg:60,angleTextOffset:18,horizontalSensitivity:1.5,verticalSensitivity:1,returnToCenterSpeed:.02},crank:{xPercent:.7,yPercent:.6,svgScale:.1,svgAlpha:.8,triangleSize:8,triangleOffsetY:-25}};class rZ{scene;config;gameLayerText;countdownText;minutesText;moneyText;healthText;progressText;progressBarBG;progressBarFill;progressThresholdIndicators=[];regionalUIFadedIn=!1;managerValuesText;frontseatButton;backseatButton;difficultyDebugText;regionText;stopsCounterText;monthlyListenersText;buzzText;encumbranceText;dashBackground;speedCrankTrack;speedCrankHandle;speedCrankValueIndicator;speedCrankArea;speedPercentageText;speedMeterBG;speedMeterFill;frontseatDragDial;steeringDialIndicator;steeringAngleText;steeringWheelSVG;speedCrankSVG;speedCrankTriangle;currentSteeringPosition=0;isDragging=!1;currentSpeedCrankPercentage=0;lookUpActive=!1;lookUpOriginalY=0;lookUpLabel;lookDownActive=!1;lookDownOriginalY=0;lookDownLabel;constructor(m,T){this.scene=m,this.config=T}initialize(){this.createDashBackground(),this.createGameLayerText(),this.createCountdownTimer(),this.createProgressText(),this.createMoneyAndHealthText(),this.createNavigationButtons(),this.createSpeedDisplay(),this.createFrontseatDragDial(),this.createMonthlyListenersDisplay()}updateUI(m){this.updateCountdown(m.gameTime,m.countdownStepCounter),this.updateDifficulty(m),this.updateMoney(m.money),this.updateProgress(m.progress),this.updateManagerValues(m),this.updateMonthlyListeners(m.monthlyListeners),this.updateBuzz(m.buzz)}updateDifficulty(m){if(!this.difficultyDebugText)return;const T=this.computeDifficulty(m);this.difficultyDebugText.setText(`Diff: ${T.toFixed(2)}`);try{this.difficultyDebugText.setAlpha(this.countdownText.alpha)}catch{}}computeDifficulty(m){const T=m.currentRegion||vl.startingRegion,O=this.getRegionBaseDifficulty(T),I=m.showsInCurrentRegion||0,B=vl.showsPerRegion,y=Math.max(0,Math.min(1,I/Math.max(1,B)));return Math.min(5,O+y)}getRegionBaseDifficulty(m){return{midwest:1,south:2,southwest:3,west:4,northeast:5}[m]??1}updateThresholdIndicators(m,T,O){this.progressThresholdIndicators.forEach(P=>P.destroy()),this.progressThresholdIndicators=[];const I=this.progressBarWidth,B=this.progressBarX,y=this.progressBarY;if(!(!I||!B||!y)){if(m.filter(P=>!P.spawned).forEach(P=>{const i=B+P.progressThreshold/100*I,u=y-8,x=this.scene.add.graphics();x.fillStyle(Dt.mediumGray,.8),x.beginPath(),x.moveTo(i,u),x.lineTo(i-4,u+8),x.lineTo(i+4,u+8),x.closePath(),x.fillPath(),x.setScrollFactor(0),x.setDepth(10002),x.setAlpha(0),this.progressThresholdIndicators.push(x)}),T&&T.forEach(P=>{if(P.isExitRelated&&P.exitNumber){if(!P.triggered){let i=P.progressThreshold;if(P.exitTiming==="before"&&P.exitNumber!=null){const o=m.find(r=>r.number===P.exitNumber);o&&(i=o.progressThreshold)}const u=B+i/100*I,x=y-16,c=this.scene.add.graphics();c.fillStyle(Dt.white,.8),c.beginPath(),c.moveTo(u,x),c.lineTo(u-4,x+8),c.lineTo(u+4,x+8),c.closePath(),c.fillPath(),c.setScrollFactor(0),c.setDepth(10002),c.setAlpha(0);const h=P.exitTiming==="before"||P.exitTiming==="after"?P.exitTiming==="before"?"B":"A":"";if(h){const o=this.scene.add.text(u,x-8,h,{fontSize:"10px",color:"#ffffff",fontStyle:"bold",stroke:"#000000",strokeThickness:2}).setOrigin(.5);o.setScrollFactor(0),o.setDepth(10003),o.setAlpha(0),this.progressThresholdIndicators.push(o)}this.progressThresholdIndicators.push(c)}return}if(!P.triggered){const i=B+P.progressThreshold/100*I,u=y-16,x=this.scene.add.graphics();x.fillStyle(Dt.lightGray,.8),x.beginPath(),x.moveTo(i,u),x.lineTo(i-4,u+8),x.lineTo(i+4,u+8),x.closePath(),x.fillPath(),x.setScrollFactor(0),x.setDepth(10002),x.setAlpha(0),this.progressThresholdIndicators.push(x)}}),O&&!O.triggered){const P=B+O.progressThreshold/100*I,i=y-24,u=this.scene.add.graphics();u.fillStyle(Dt.white,.8),u.beginPath(),u.moveTo(P,i),u.lineTo(P-4,i+8),u.lineTo(P+4,i+8),u.closePath(),u.fillPath(),u.setScrollFactor(0),u.setDepth(10002),u.setAlpha(0),this.progressThresholdIndicators.push(u)}this.progressThresholdIndicators.length>0&&this.fadeInTriangles()}}createDashBackground(){const m=this.scene.cameras.main,T=Math.floor(m.width*.95),O=Math.floor(m.height*.15),I=Math.floor(m.width*.5),B=Math.floor(m.height*.85),y=this.scene.add.rectangle(I,B,T,O,Dt.white,1);y.setStrokeStyle(2,Dt.black,1),y.setScrollFactor(0),y.setDepth(15e3),this.dashBackground=y}createGameLayerText(){}createCountdownTimer(){const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height,O=m*this.config.countdownPositionX,I=T*this.config.countdownPositionY+92;this.countdownText=this.scene.add.text(O,I,"0",{fontSize:this.config.countdownFontSize,color:`#${this.config.countdownColor.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:"#000000",padding:{x:4,y:2}}).setOrigin(.5),this.countdownText.setScrollFactor(0),this.countdownText.setDepth(1e4),this.countdownText.setAlpha(0);const B=this.countdownText.width||40,y=O+B/2+10,P=I;this.minutesText=this.scene.add.text(y,P,"0",{fontSize:"12px",color:`#${this.config.countdownColor.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:"#000000",padding:{x:4,y:2}}).setOrigin(.5),this.minutesText.setScrollFactor(0),this.minutesText.setDepth(1e4),this.minutesText.setAlpha(0);const i=I+20;this.difficultyDebugText=this.scene.add.text(O,i,"Diff: -",{fontSize:"12px",color:`#${this.config.countdownColor.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:"#000000",padding:{x:4,y:2}}).setOrigin(.5),this.difficultyDebugText.setScrollFactor(0),this.difficultyDebugText.setDepth(1e4),this.difficultyDebugText.setAlpha(0)}createProgressText(){this.scene.cameras.main.width,this.scene.cameras.main.height;const m=160,T=6,O=this.scene.cameras.main.width,I=this.scene.cameras.main.height,B=O*this.config.countdownPositionX,y=I*this.config.countdownPositionY,P=B-m/2,i=y-16+72,u=P,x=i-20;this.regionText=this.scene.add.text(u,x,"Midwest-1",{fontSize:"14px",color:"#ffffff",fontStyle:"bold",backgroundColor:"#000000",padding:{x:4,y:2}}).setOrigin(0,.5),this.regionText.setScrollFactor(0),this.regionText.setDepth(1e4),this.regionText.setAlpha(0);const c=u+120,h=x;this.stopsCounterText=this.scene.add.text(c,h,"0/3",{fontSize:"14px",color:"#ffffff",fontStyle:"bold",backgroundColor:"#000000",padding:{x:4,y:2}}).setOrigin(0,.5),this.stopsCounterText.setScrollFactor(0),this.stopsCounterText.setDepth(1e4),this.stopsCounterText.setAlpha(0),this.progressBarBG=this.scene.add.rectangle(P,i,m,T,0,.4).setOrigin(0,.5),this.progressBarFill=this.scene.add.rectangle(P,i,0,T,65280,.9).setOrigin(0,.5),this.progressBarBG.setScrollFactor(0),this.progressBarBG.setDepth(1e4),this.progressBarBG.setAlpha(0),this.progressBarFill.setScrollFactor(0),this.progressBarFill.setDepth(10001),this.progressBarFill.setAlpha(0),this.progressBarWidth=m,this.progressBarX=P,this.progressBarY=i}createMoneyAndHealthText(){const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height,O=Se.getSteeringWheel(),I=m*O.position.x+250,B=T*.7-28;this.moneyText=this.scene.add.text(I,B,"$20",{fontSize:this.config.moneyHealthFontSize,color:`#${Dt.white.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:"#000000",padding:{x:8,y:4}}).setOrigin(1,.5),this.moneyText.setScrollFactor(0),this.moneyText.setDepth(1e4),this.moneyText.setAlpha(0)}createManagerValuesText(){const m=this.scene.cameras.main.width;this.managerValuesText=this.scene.add.text(m-10,10,"",{fontSize:this.config.managerValuesFontSize,color:"#ffffff",backgroundColor:`#${this.config.managerValuesBackgroundColor.toString(16).padStart(6,"0")}`,padding:this.config.managerValuesPadding}).setOrigin(1,0),this.managerValuesText.setScrollFactor(0),this.managerValuesText.setDepth(1e4),this.managerValuesText.setAlpha(this.config.managerValuesOpacity)}createNavigationButtons(){this.scene.cameras.main.width,this.scene.cameras.main.height}createSpeedCrank(){const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height,O=m*xi.crank.xPercent,I=T*xi.crank.yPercent;this.speedCrankTrack=this.scene.add.graphics(),this.speedCrankTrack.fillStyle(this.config.speedCrankTrackColor,this.config.speedCrankTrackAlpha),this.speedCrankTrack.fillRoundedRect(O-this.config.speedCrankWidth/2,I-this.config.speedCrankHeight/2,this.config.speedCrankWidth,this.config.speedCrankHeight,this.config.speedCrankTrackCornerRadius),this.speedCrankTrack.lineStyle(this.config.speedCrankTrackStrokeWidth,this.config.speedCrankTrackStrokeColor,1),this.speedCrankTrack.strokeRoundedRect(O-this.config.speedCrankWidth/2,I-this.config.speedCrankHeight/2,this.config.speedCrankWidth,this.config.speedCrankHeight,this.config.speedCrankTrackCornerRadius),this.speedCrankTrack.setDepth(this.config.speedCrankDepthTrack),this.speedCrankHandle=this.scene.add.graphics(),this.updateSpeedCrankHandle(0),this.speedCrankHandle.setDepth(this.config.speedCrankDepthHandle),this.speedCrankArea=this.scene.add.rectangle(O,I,this.config.speedCrankWidth+20,this.config.speedCrankHeight+20,0,0),this.speedCrankArea.setDepth(this.config.speedCrankDepthArea),this.speedCrankArea.setInteractive();try{const B=this.scene.textures.exists("steering-wheel")?"steering-wheel":this.scene.textures.getTextureKeys?.()[0]||"";B&&(this.speedCrankSVG=this.scene.add.sprite(O,I,B),this.speedCrankSVG.setScale(xi.crank.svgScale),this.speedCrankSVG.setOrigin(.5,.5),this.speedCrankSVG.setAlpha(xi.crank.svgAlpha),this.speedCrankSVG.setDepth(this.config.speedCrankDepthHandle+1))}catch{}this.speedCrankSVG.setTint(Dt.white),this.speedCrankTriangle=this.scene.add.graphics(),this.speedCrankTriangle.setDepth(this.config.speedCrankDepthHandle+2),this.updateSpeedCrankTriangle(0),this.setupSpeedCrankInteraction(O,I)}setupSpeedCrankInteraction(m,T){let O=!1;this.speedCrankArea.on("pointerdown",y=>{O=!0;const P=T-this.config.speedCrankHeight/2,i=T+this.config.speedCrankHeight/2,u=(lt.Math.Clamp(y.y,P,i)-P)/this.config.speedCrankHeight*100,x=this.snapToNearestPosition(u);this.updateSpeedCrank(x),this.scene.events.emit("speedCrankInput",x)});const I=y=>{if(!y.isDown){O=!1;return}if(!O)return;const P=T-this.config.speedCrankHeight/2,i=T+this.config.speedCrankHeight/2,u=(lt.Math.Clamp(y.y,P,i)-P)/this.config.speedCrankHeight*100,x=this.snapToNearestPosition(u);this.updateSpeedCrank(x),this.scene.events.emit("speedCrankInput",x)};this._speedCrankMoveAttached||(this.scene.input.on("pointermove",I),this._speedCrankMoveAttached=!0,this._speedCrankMoveHandler=I);const B=()=>{O=!1};this.scene.input.once("pointerup",B),this.scene.input.once("gameout",B),this.speedCrankArea.once("pointerup",B),this.speedCrankArea.once("pointerupoutside",B),this.speedCrankArea.once("pointerout",B),this.speedCrankArea.once("pointercancel",B),this.scene.game.events.once("hidden",B),this.scene.game.events.once("blur",B)}snapToNearestPosition(m){const T=(this.config.speedCrankSnapPositions||[0,.4,.7,1]).map(B=>B*100);let O=T[0],I=Math.abs(m-O);for(const B of T){const y=Math.abs(m-B);y<I&&(I=y,O=B)}return O}createSpeedDisplay(){const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height,O=m*xi.steering.dialXPercent,I=T*xi.steering.dialYPercent,B=O+12,y=I-42,P=25,i=6;this.speedMeterBG=this.scene.add.graphics(),this.speedMeterBG.lineStyle(i,Dt.darkGray,.8),this.speedMeterBG.strokeCircle(0,0,P),this.speedMeterBG.setPosition(B,y),this.speedMeterBG.setScrollFactor(0),this.speedMeterBG.setDepth(10004),this.speedMeterFill=this.scene.add.graphics(),this.speedMeterFill.setPosition(B,y),this.speedMeterFill.setScrollFactor(0),this.speedMeterFill.setDepth(10005),this.speedPercentageText=this.scene.add.text(B,y,"0%",{fontSize:"12px",color:"#ffffff",fontFamily:"Arial",stroke:"#000000",strokeThickness:2}),this.speedPercentageText.setOrigin(.5,.5),this.speedPercentageText.setScrollFactor(0),this.speedPercentageText.setDepth(10006),this.speedPercentageText.setVisible(!0)}updateSpeedDisplay(m){if(this.speedPercentageText&&this.speedPercentageText.setText(`${Math.round(m)}%`),this.speedMeterFill){this.speedMeterFill.clear();const T=25,O=6,I=-Math.PI/2,B=I+m/100*2*Math.PI;let y=65280;m>50&&(y=16776960),m>80&&(y=16711680),this.speedMeterFill.lineStyle(O,y,.9),this.speedMeterFill.arc(0,0,T,I,B,!1),this.speedMeterFill.strokePath()}}createFrontseatDragDial(){const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height,O=Se.getSteeringWheel(),I=m*O.position.x,B=T*O.position.y,y=xi.steering.knobRadius,P=this.scene.add.graphics();P.fillStyle(Dt.mediumDarkGray),P.fillCircle(0,0,y),P.lineStyle(2,Dt.white,1),P.strokeCircle(0,0,y),P.setPosition(I,B),P.setDepth(6e4),P.setInteractive(new lt.Geom.Circle(0,0,y),lt.Geom.Circle.Contains),this.steeringWheelSVG=this.scene.add.sprite(I,B,"steering-wheel"),this.steeringWheelSVG.setScale(xi.steering.svgScale*O.scale),this.steeringWheelSVG.setOrigin(.5,.5),this.steeringWheelSVG.setAlpha(xi.steering.svgAlpha),this.steeringWheelSVG.setDepth(60001),this.steeringWheelSVG.setTint(Dt.white),this.frontseatDragDial=P,this.steeringDialIndicator=this.scene.add.graphics(),this.steeringDialIndicator.setDepth(60002),this.steeringAngleText=this.scene.add.text(I,B+y+xi.steering.angleTextOffset,"0%",{fontSize:"14px",color:"#ffffff"}).setOrigin(.5).setDepth(60003);let i=!1,u=0,x=0;P.on("pointerdown",r=>{this.isDragging=!0,i=!0,u=r.x,x=r.y,P.setDepth(99999),this.steeringWheelSVG&&this.steeringWheelSVG.setDepth(1e5),P.clear(),P.fillStyle(Dt.mediumGray),P.fillCircle(0,0,y),P.lineStyle(2,Dt.white,1),P.strokeCircle(0,0,y)});const c=r=>{if(i){const a=r.x-u,d=r.y-x,n=a*xi.steering.horizontalSensitivity,p=d*xi.steering.verticalSensitivity,g=r.x-I>0?1:-1,v=n+p*g;this.currentSteeringPosition+=v,this.currentSteeringPosition=lt.Math.Clamp(this.currentSteeringPosition,-150,150);const f=Math.abs(this.currentSteeringPosition),b=.7+f/150*.3+Math.pow(f/150,2)*.3;this.currentSteeringPosition*b,this.scene.events.emit("steeringInput",this.currentSteeringPosition),this.updateSteeringIndicator(this.currentSteeringPosition),u=r.x,x=r.y}};this._dialMoveAttached||(this.scene.input.on("pointermove",c),this._dialMoveAttached=!0,this._dialMoveHandler=c);const h=()=>{o()},o=()=>{i&&(i=!1,this.isDragging=!1,P.setDepth(6e4),this.steeringWheelSVG&&this.steeringWheelSVG.setDepth(60001),P.clear(),P.fillStyle(Dt.mediumDarkGray),P.fillCircle(0,0,y),P.lineStyle(2,Dt.white,1),P.strokeCircle(0,0,y))};P.on("pointerup",o),P.on("pointerupoutside",o),P.on("pointerout",o),P.on("pointercancel",o),this.scene.input.once("pointerup",h),this.scene.input.once("gameout",o),this.scene.game.events.once("hidden",o),this.scene.game.events.once("blur",o)}update(m){if(!this.isDragging&&this.currentSteeringPosition!==0){const T=xi.steering.returnToCenterSpeed;this.currentSteeringPosition>0?this.currentSteeringPosition=Math.max(0,this.currentSteeringPosition-T*m):this.currentSteeringPosition=Math.min(0,this.currentSteeringPosition+T*m),this.scene.events.emit("steeringInput",this.currentSteeringPosition,{isReturnToCenter:!0}),this.updateSteeringIndicator(this.currentSteeringPosition)}}updateSteeringIndicator(m){if(this.steeringDialIndicator&&this.steeringDialIndicator.clear(),this.steeringAngleText){const T=Math.round((m+100)/2);this.steeringAngleText.setText(`${T}%`)}if(this.steeringWheelSVG){const T=lt.Math.Clamp(m/150*xi.steering.indicatorMaxAngleDeg,-60,xi.steering.indicatorMaxAngleDeg);this.steeringWheelSVG.setRotation(lt.Math.DegToRad(T))}}updateCountdown(m,T){if(this.countdownText&&this.countdownText.setText(m.toString()),this.minutesText){const O=Math.max(0,Math.floor((16-(T||0))/.26666666666666666)),I=O===60?"00":O.toString();this.minutesText.setText(I)}}updateMoney(m){this.moneyText&&this.moneyText.setText(`$${m}`)}updateHealth(m){this.healthText&&this.healthText.setText(`Health: ${Math.round(m*10)}%`)}updateProgress(m){if(this.progressBarFill&&this.progressBarBG){const T=lt.Math.Clamp(m,0,100)/100;this.progressBarFill.width=this.progressBarBG.width*T}}updateManagerValues(m){if(this.managerValuesText){const T=[`Skill: ${m.playerSkill}%`,`Difficulty: ${m.difficulty}%`,`Momentum: ${m.momentum}%`,`Plot A (${m.plotAEnum}): ${m.plotA}%`,`Plot B (${m.plotBEnum}): ${m.plotB}%`,`Plot C (${m.plotCEnum}): ${m.plotC}%`,`Stops: ${m.stops}`].join(`
`);this.managerValuesText.setText(T)}}updateSpeedCrank(m){this.currentSpeedCrankPercentage=m,this.updateSpeedCrankHandle(m),this.updateSpeedCrankTriangle(m)}updateSpeedCrankTriangle(m){if(!this.speedCrankTriangle)return;const T=this.scene.cameras.main.width,O=this.scene.cameras.main.height,I=T*this.config.countdownPositionX,B=O*this.config.countdownPositionY,y=160,P=I-y/2,i=B-16,u=P+m/100*y,x=i;this.speedCrankTriangle.clear(),this.speedCrankTriangle.fillStyle(Dt.white,1),this.speedCrankTriangle.lineStyle(1,Dt.black,1);const c=xi.crank.triangleSize,h=xi.crank.triangleOffsetY;this.speedCrankTriangle.beginPath(),this.speedCrankTriangle.moveTo(u,x+h),this.speedCrankTriangle.lineTo(u-c/2,x+h+c),this.speedCrankTriangle.lineTo(u+c/2,x+h+c),this.speedCrankTriangle.closePath(),this.speedCrankTriangle.fillPath(),this.speedCrankTriangle.strokePath()}updateSpeedCrankHandle(m){if(!this.speedCrankHandle)return;const T=this.scene.cameras.main.width,O=this.scene.cameras.main.height,I=T*.7,B=O*.6-this.config.speedCrankHeight/2+this.config.speedCrankHeight*m/100;this.speedCrankHandle.clear(),this.speedCrankHandle.fillStyle(this.config.speedCrankHandleColor,this.config.speedCrankHandleAlpha),this.speedCrankHandle.fillRoundedRect(I-this.config.speedCrankHandleHeight/2,B-this.config.speedCrankHandleHeight/2,this.config.speedCrankHandleHeight,this.config.speedCrankHandleHeight,this.config.speedCrankHandleCornerRadius),this.speedCrankHandle.lineStyle(this.config.speedCrankHandleStrokeWidth,this.config.speedCrankHandleStrokeColor,1),this.speedCrankHandle.strokeRoundedRect(I-this.config.speedCrankHandleHeight/2,B-this.config.speedCrankHandleHeight/2,this.config.speedCrankHandleHeight,this.config.speedCrankHandleHeight,this.config.speedCrankHandleCornerRadius)}getSpeedCrankPercentage(){return this.currentSpeedCrankPercentage}getSpeedCrankPosition(){const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height,O=m*.7,I=T*.6;return{x:O,y:I,width:this.config.speedCrankWidth,height:this.config.speedCrankHeight}}getControlObjects(){const m=[];return this.speedCrankTrack&&m.push(this.speedCrankTrack),this.speedCrankHandle&&m.push(this.speedCrankHandle),this.speedCrankSVG&&m.push(this.speedCrankSVG),this.speedCrankArea&&m.push(this.speedCrankArea),this.frontseatDragDial&&m.push(this.frontseatDragDial),this.steeringWheelSVG&&m.push(this.steeringWheelSVG),this.steeringDialIndicator&&m.push(this.steeringDialIndicator),this.steeringAngleText&&m.push(this.steeringAngleText),this.lookUpLabel&&m.push(this.lookUpLabel),this.lookDownLabel&&m.push(this.lookDownLabel),this.frontseatButton&&m.push(this.frontseatButton),this.backseatButton&&m.push(this.backseatButton),m}fadeInRegionalUI(){if(console.log("🔺 fadeInRegionalUI called - regionalUIFadedIn:",this.regionalUIFadedIn),this.regionalUIFadedIn){console.log("🔺 fadeInRegionalUI: Already faded in, returning early");return}this.regionalUIFadedIn=!0,[this.regionText,this.stopsCounterText,this.countdownText,this.minutesText,this.progressBarBG,this.progressBarFill,this.moneyText,this.buzzText,this.monthlyListenersText,this.encumbranceText].forEach((m,T)=>{m&&(console.log(`🔺 Fading in regional element ${T} from alpha ${m.alpha} to 1`),this.scene.tweens.add({targets:m,alpha:1,duration:600,ease:"Cubic.easeOut",delay:T*50}))}),console.log("🔺 fadeInRegionalUI calling fadeInTriangles - commented out for now")}fadeOutRegionalUI(){console.log("🔺 fadeOutRegionalUI called - commented out for now")}fadeInRegionalUIOnMenuClose(){console.log("🔺 fadeInRegionalUIOnMenuClose called - commented out for now")}fadeInTriangles(){this.progressThresholdIndicators.forEach((m,T)=>{m&&m.alpha===0&&this.scene.tweens.add({targets:m,alpha:1,duration:600,ease:"Cubic.easeOut",delay:T*50})})}fadeOutTriangles(){this.progressThresholdIndicators.forEach((m,T)=>{m&&m.alpha>0&&this.scene.tweens.add({targets:m,alpha:.3,duration:300,ease:"Cubic.easeIn",delay:T*20})})}fadeInTrianglesOnMenuClose(){const m=this.scene.scene.get("GameScene");if(!(m&&m.carStarted)){console.log("🔺 Not fading in triangles - car not started yet");return}this.progressThresholdIndicators.forEach((T,O)=>{T&&T.alpha<1&&this.scene.tweens.add({targets:T,alpha:1,duration:400,ease:"Cubic.easeOut",delay:O*30})})}ensureTrianglesFadeIn(){}updateRegionInfo(m,T){if(this.regionText){const O=this.getRegionVisitCount(m,T);this.regionText.setText(`${m}-${O}`)}}getRegionVisitCount(m,T){const O=this.scene.scene.get("GameScene");return O&&O.gameState?O.gameState.getRegionVisitCount(m):T+1}updateRegionInfoWithTotal(m,T,O){this.updateRegionInfo(m,T),this.updateSequenceFraction(T,O)}createMonthlyListenersDisplay(){const m=this.scene.cameras.main.width,T=this.scene.cameras.main.height,O=Se.getSteeringWheel(),I=m*O.position.x+250,B=T*.75;this.buzzText=this.scene.add.text(I-80,B,`BUZZ
1`,{fontSize:"12px",color:`#${Dt.white.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:`#${Dt.black.toString(16).padStart(6,"0")}`,padding:{x:8,y:4},align:"right"}).setOrigin(1,.5),this.buzzText.setScrollFactor(0),this.buzzText.setDepth(1e4),this.buzzText.setAlpha(0),this.monthlyListenersText=this.scene.add.text(I,B,`LISTENERS
2,000`,{fontSize:"12px",color:`#${Dt.white.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:`#${Dt.black.toString(16).padStart(6,"0")}`,padding:{x:8,y:4},align:"right"}).setOrigin(1,.5),this.monthlyListenersText.setScrollFactor(0),this.monthlyListenersText.setDepth(1e4),this.monthlyListenersText.setAlpha(0);const y=B+40;this.encumbranceText=this.scene.add.text(I,y,`ENCUMBRANCE
2/10`,{fontSize:"12px",color:`#${Dt.white.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:`#${Dt.black.toString(16).padStart(6,"0")}`,padding:{x:8,y:4},align:"right"}).setOrigin(1,.5),this.encumbranceText.setScrollFactor(0),this.encumbranceText.setDepth(1e4),this.encumbranceText.setAlpha(0)}updateMonthlyListeners(m){if(this.monthlyListenersText){const T=m.toLocaleString();this.monthlyListenersText.setText(`LISTENERS
${T}`)}}updateBuzz(m){this.buzzText&&this.buzzText.setText(`BUZZ
${m}`)}updateEncumbrance(m){this.encumbranceText&&this.encumbranceText.setText(`ENCUMBRANCE
${m}/10`)}setEncumbrance(m,T){this.encumbranceText&&this.encumbranceText.setText(`ENCUMBRANCE
${m}/${T}`)}updateSequenceFraction(m,T){if(this.stopsCounterText){const O=m+1;this.stopsCounterText.setText(`${O}/${T}`)}}getTotalSequencesForRegion(m){return 3}updateStopsCounter(m){this.stopsCounterText&&this.stopsCounterText.setText(`${m}/3`)}destroy(){[this.gameLayerText,this.countdownText,this.minutesText,this.moneyText,this.regionText,this.stopsCounterText,this.managerValuesText,this.frontseatButton,this.backseatButton,this.speedCrankTrack,this.speedCrankHandle,this.speedCrankValueIndicator,this.speedCrankArea,this.speedCrankSVG,this.speedCrankTriangle,this.frontseatDragDial,this.speedMeterBG,this.speedMeterFill].forEach(m=>{m&&m.destroy()});try{this._speedCrankMoveAttached&&this._speedCrankMoveHandler&&(this.scene.input.off("pointermove",this._speedCrankMoveHandler),this._speedCrankMoveAttached=!1,this._speedCrankMoveHandler=void 0),this._dialMoveAttached&&this._dialMoveHandler&&(this.scene.input.off("pointermove",this._dialMoveHandler),this._dialMoveAttached=!1,this._dialMoveHandler=void 0)}catch{}}}const nZ={swipe:{requireInteractiveBypassNames:["Button","Crank","Dial","Pet"]}};class aZ{scene;config;swipeStartX=0;swipeStartY=0;swipeStartTime=0;isDraggingObject=!1;isKnobActive=!1;onSteeringInput;onSwipeLeft;onSwipeRight;onToggleDriving;onSwitchToFrontseat;onSwitchToBackseat;constructor(m,T){this.scene=m,this.config=T}initialize(){this.config.enableKeyboardControls&&this.setupKeyboardControls(),this.config.enableSwipeControls&&this.setupSwipeControls()}setInputState(m){this.isDraggingObject=m.isDraggingObject,this.isKnobActive=m.isKnobActive}setEventCallbacks(m){this.onSteeringInput=m.onSteeringInput,this.onSwipeLeft=m.onSwipeLeft,this.onSwipeRight=m.onSwipeRight,this.onToggleDriving=m.onToggleDriving,this.onSwitchToFrontseat=m.onSwitchToFrontseat,this.onSwitchToBackseat=m.onSwitchToBackseat}setupKeyboardControls(){this.scene.input.keyboard?.on("keydown-SPACE",()=>{this.onToggleDriving&&this.onToggleDriving()}),this.scene.input.keyboard?.on("keydown-LEFT",()=>{this.onSteeringInput&&this.onSteeringInput(-50)}),this.scene.input.keyboard?.on("keydown-RIGHT",()=>{this.onSteeringInput&&this.onSteeringInput(50)}),this.scene.input.keyboard?.on("keyup-LEFT",()=>{this.onSteeringInput&&this.onSteeringInput(0)}),this.scene.input.keyboard?.on("keyup-RIGHT",()=>{this.onSteeringInput&&this.onSteeringInput(0)})}setupSwipeControls(){this.scene.input.on("pointerdown",m=>{if(this.isKnobActive||this.isDraggingObject)return;const T=this.scene.input.hitTestPointer(m);if(T.length>0&&T.some(I=>I.input?.enabled||I.body||nZ.swipe.requireInteractiveBypassNames.some(B=>I.name?.includes(B))))return;const O=this.scene.scene.get("MenuScene");if(O&&O.scene.isActive()){const I=O.menuManager;if(I&&I.currentDialog)return}this.swipeStartX=m.x,this.swipeStartY=m.y,this.swipeStartTime=Date.now()}),this.scene.input.on("pointerup",m=>{if(this.swipeStartTime===0)return;const T=m.x,O=m.y,I=Date.now(),B=T-this.swipeStartX,y=O-this.swipeStartY,P=I-this.swipeStartTime,i=Math.sqrt(B*B+y*y),u=Math.abs(B)>Math.abs(y);i>=this.config.swipeMinDistance&&P<=this.config.swipeMaxTime&&u&&(B>this.config.swipeThreshold?this.onSwipeRight&&this.onSwipeRight():B<-this.config.swipeThreshold&&this.onSwipeLeft&&this.onSwipeLeft()),this.swipeStartTime=0})}handleDragStart(m,T){this.isDraggingObject=!0,m.body&&(m.body.isStatic=!0),m.isDragging=!0}handleDragMove(m,T,O,I){if(!this.isDraggingObject)return;const B=T.x-O,y=T.y-I;return m.x=T.x,m.y=T.y,{velocityX:B,velocityY:y}}handleDragEnd(m,T,O){this.isDraggingObject=!1,m.isDragging=!1,m.body&&(m.body.isStatic=!1,this.scene.matter.body.setVelocity(m.body,{x:T*this.config.momentumMultiplier,y:O*this.config.momentumMultiplier}))}handleKnobStart(){this.isKnobActive=!0}handleKnobEnd(){this.isKnobActive=!1}isInputBlocked(){return this.isDraggingObject||this.isKnobActive}isSwipeTracking(){return this.swipeStartTime>0}isDragging(){return this.isDraggingObject}getKnobActive(){return this.isKnobActive}resetInputState(){this.isDraggingObject=!1,this.isKnobActive=!1,this.swipeStartTime=0}destroy(){this.scene.input.keyboard?.off("keydown-SPACE"),this.scene.input.keyboard?.off("keydown-LEFT"),this.scene.input.keyboard?.off("keydown-RIGHT"),this.scene.input.keyboard?.off("keyup-LEFT"),this.scene.input.keyboard?.off("keyup-RIGHT"),this.scene.input.keyboard?.off("keydown-ONE"),this.scene.input.keyboard?.off("keydown-TWO"),this.scene.input.keyboard?.off("keydown-THREE"),this.scene.input.keyboard?.off("keydown-FOUR"),this.scene.input.off("pointerdown"),this.scene.input.off("pointerup"),this.resetInputState()}}class oZ{scene;config;state;onStateChange;onSaveComplete;onLoadComplete;constructor(m,T){this.scene=m,this.config=T,this.state=this.createInitialState()}initialize(){this.state=this.createInitialState(),this.notifyStateChange()}setEventCallbacks(m){this.onStateChange=m.onStateChange,this.onSaveComplete=m.onSaveComplete,this.onLoadComplete=m.onLoadComplete}getState(){return{...this.state}}isGameStarted(){return this.state.gameStarted}updateState(m){const T={...this.state};Object.keys(m).forEach(O=>{const I=m[O];I!==void 0&&(this.state[O]=this.validateValue(O,I))}),this.state.lastSaveTime=new Date().toISOString(),JSON.stringify(T)!==JSON.stringify(this.state)&&this.notifyStateChange()}startTutorial(){this.updateState({tutorialPhase:"keys_placement",tutorialStep:0}),console.log("Tutorial started: keys placement phase")}advanceTutorial(){const m=this.state.tutorialPhase;let T,O=this.state.tutorialStep+1;switch(m){case"keys_placement":this.state.keysInIgnition?(T="initial_driving",O=0):T="keys_placement";break;case"initial_driving":O>=4?(T="countdown",O=0):T="initial_driving";break;case"countdown":T="interrupt",O=0;break;case"interrupt":T="normal",O=0;break;default:T="normal",O=0}this.updateState({tutorialPhase:T,tutorialStep:O}),console.log(`Tutorial advanced: ${m} -> ${T} (step: ${O})`)}isInTutorial(){return this.state.tutorialPhase!=="none"&&this.state.tutorialPhase!=="normal"}getTutorialPhase(){return this.state.tutorialPhase}getTutorialStep(){return this.state.tutorialStep}startGame(){this.updateState({gameStarted:!0,sessionStartTime:new Date().toISOString()}),console.log("Game started")}stopGame(){this.updateState({gameStarted:!1}),console.log("Game stopped")}loadGame(m){console.log(`Loading game from step ${m}`);try{this.loadSteps(m),this.state.gameStarted||this.startGame(),console.log("Game loaded successfully"),this.onLoadComplete&&this.onLoadComplete(!0,this.state)}catch(T){console.error("Failed to load game:",T),this.onLoadComplete&&this.onLoadComplete(!1)}}saveGame(){try{this.updateState({lastSaveTime:new Date().toISOString()});const m=this.scene.scene.get("AppScene"),T=m?m.getStep():0,O={...this.state,step:T,saveTime:new Date().toISOString(),version:"1.0.0"};return localStorage.setItem("game-fast-save",JSON.stringify(O)),console.log("Game saved successfully"),this.onSaveComplete&&this.onSaveComplete(!0),!0}catch(m){return console.error("Failed to save game:",m),this.onSaveComplete&&this.onSaveComplete(!1),!1}}loadFromStorage(){try{const m=localStorage.getItem("game-fast-save");if(!m)return console.log("No save data found"),null;const T=JSON.parse(m);return this.validateSaveData(T)?(this.state={...this.state,...T},console.log("Game loaded from storage successfully"),this.onLoadComplete&&this.onLoadComplete(!0,this.state),this.state):(console.warn("Invalid save data found"),null)}catch(m){return console.error("Failed to load from storage:",m),this.onLoadComplete&&this.onLoadComplete(!1),null}}hasSaveData(){return localStorage.getItem("game-fast-save")!==null}clearSaveData(){try{return localStorage.removeItem("game-fast-save"),console.log("Save data cleared successfully"),!0}catch(m){return console.error("Failed to clear save data:",m),!1}}getSaveInfo(){try{const m=localStorage.getItem("game-fast-save");if(!m)return{exists:!1};const T=JSON.parse(m);return{exists:!0,timestamp:T.saveTime||T.lastSaveTime,steps:T.step}}catch(m){return console.error("Failed to get save info:",m),{exists:!1}}}loadSteps(m){const T=this.scene.scene.get("AppScene");T&&T.setStep(m)}createInitialState(){return{gameStarted:!1,gameTime:this.config.initialGameTime,step:0,countdownStepCounter:0,tutorialPhase:"none",tutorialStep:0,money:this.config.initialMoney,health:this.config.initialHealth,playerSkill:this.config.initialPlayerSkill,difficulty:this.config.initialDifficulty,momentum:this.config.initialMomentum,monthlyListeners:this.config.initialMonthlyListeners,buzz:this.config.initialBuzz,plotA:this.config.initialPlotA,plotB:this.config.initialPlotB,plotC:this.config.initialPlotC,plotAEnum:"none",plotBEnum:"none",plotCEnum:"none",stops:0,progress:0,position:this.config.initialPosition,currentRegion:this.config.initialRegion,showsInCurrentRegion:0,regionHistory:[this.config.initialRegion],sequencesInCurrentRegion:this.calculateSequencesForRegion(this.config.initialRegion,1),carStarted:!1,keysInIgnition:!1,hasOpenMenu:!1,speedCrankPercentage:0,knobValue:this.config.initialKnobValue,currentPosition:"frontseat",currentView:"main",lastSaveTime:new Date().toISOString(),sessionStartTime:new Date().toISOString()}}validateValue(m,T){switch(m){case"money":return lt.Math.Clamp(T,this.config.minMoney,this.config.maxMoney);case"health":return lt.Math.Clamp(T,this.config.minHealth,this.config.maxHealth);case"playerSkill":return lt.Math.Clamp(T,this.config.minSkill,this.config.maxSkill);case"difficulty":return lt.Math.Clamp(T,this.config.minDifficulty,this.config.maxDifficulty);case"momentum":return lt.Math.Clamp(T,this.config.minMomentum,this.config.maxMomentum);case"plotA":case"plotB":case"plotC":return lt.Math.Clamp(T,this.config.minPlot,this.config.maxPlot);case"knobValue":return lt.Math.Clamp(T,this.config.minKnobValue,this.config.maxKnobValue);case"monthlyListeners":return lt.Math.Clamp(T,this.config.minMonthlyListeners,this.config.maxMonthlyListeners);case"buzz":return lt.Math.Clamp(T,this.config.minBuzz,this.config.maxBuzz);case"currentPosition":return["frontseat","backseat"].includes(T)?T:"frontseat";case"currentView":return["main","overlay"].includes(T)?T:"main";default:return T}}validateSaveData(m){const T=["gameStarted","money","health","step"];for(const O of T)if(m[O]===void 0)return!1;return!(typeof m.gameStarted!="boolean"||typeof m.money!="number"||typeof m.health!="number"||typeof m.step!="number")}notifyStateChange(){this.onStateChange&&this.onStateChange(this.state)}resetState(){this.state=this.createInitialState(),this.notifyStateChange(),console.log("Game state reset to initial values")}getStateSummary(){return`Game: ${this.state.gameStarted?"Started":"Stopped"} | Step: ${this.state.step} | Money: $${this.state.money} | Health: ${this.state.health} | Position: ${this.state.currentPosition} | Region: ${this.state.currentRegion} | Shows: ${this.state.showsInCurrentRegion}`}getCurrentRegion(){return this.state.currentRegion}getShowsInCurrentRegion(){return this.state.showsInCurrentRegion}incrementShowsInCurrentRegion(){this.updateState({showsInCurrentRegion:this.state.showsInCurrentRegion+1})}changeRegion(m){const T=this.state.currentRegion,O=this.getRegionVisitCount(m)+1,I=this.calculateSequencesForRegion(m,O);this.updateState({currentRegion:m,showsInCurrentRegion:0,regionHistory:[...this.state.regionHistory,m],sequencesInCurrentRegion:I}),console.log(`Region changed from ${T} to ${m} - sequence count reset to 0, total sequences: ${I}`)}getRegionHistory(){return[...this.state.regionHistory]}calculateSequencesForRegion(m,T){return this.hashString(`${m}-${T}`)%2+2}hashString(m){let T=0;for(let O=0;O<m.length;O++){const I=m.charCodeAt(O);T=(T<<5)-T+I,T=T&T}return Math.abs(T)}getSequencesForCurrentRegion(){return this.state.sequencesInCurrentRegion}getRegionVisitCount(m){return this.state.regionHistory.filter(T=>T===m).length}isFinalSequenceForRegion(){const m=this.getSequencesForCurrentRegion();return this.state.showsInCurrentRegion>=m-1}updateBuzz(m){const T=this.state.buzz+m;this.updateState({buzz:T})}updateListenersOnCountdown(){const m=this.state.buzz,T=Math.floor(m*10),O=this.state.monthlyListeners+T;this.updateState({monthlyListeners:O}),console.log(`Buzz: ${this.state.buzz}, Listener change: ${T}, New total: ${O}`)}getMonthlyListeners(){return this.state.monthlyListeners}getBuzz(){return this.state.buzz}shouldChooseNextRegion(){const m=this.getSequencesForCurrentRegion();return this.state.showsInCurrentRegion>=m}}const hZ={fauxchella:{name:"Fauxchella",description:"A music festival adventure",events:{1:{title:"fauxchella-1",text:"fauxchella-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"fauxchella-2",text:"fauxchella-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"fauxchella-3",text:"fauxchella-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"fauxchella-4",text:"fauxchella-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"fauxchella outcome a",b:"fauxchella outcome b"}},marge:{name:"Marge",description:"A suburban adventure",events:{1:{title:"marge-1",text:"marge-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"marge-2",text:"marge-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"marge-3",text:"marge-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"marge-4",text:"marge-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"marge outcome a",b:"marge outcome b"}},carpool:{name:"Carpool",description:"A commuting adventure",events:{1:{title:"carpool-1",text:"carpool-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"carpool-2",text:"carpool-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"carpool-3",text:"carpool-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"carpool-4",text:"carpool-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"carpool outcome a",b:"carpool outcome b"}},trapt:{name:"Trapt",description:"A mysterious adventure",events:{1:{title:"trapt-1",text:"trapt-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"trapt-2",text:"trapt-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"trapt-3",text:"trapt-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"trapt-4",text:"trapt-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"trapt outcome a",b:"trapt outcome b"}},grink:{name:"Grink",description:"A quirky adventure",events:{1:{title:"grink-1",text:"grink-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"grink-2",text:"grink-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"grink-3",text:"grink-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"grink-4",text:"grink-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"grink outcome a",b:"grink outcome b"}},agent:{name:"Agent",description:"A professional adventure",events:{1:{title:"agent-1",text:"agent-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"agent-2",text:"agent-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"agent-3",text:"agent-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"agent-4",text:"agent-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"agent outcome a",b:"agent outcome b"}},label:{name:"Label",description:"A creative adventure",events:{1:{title:"label-1",text:"label-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"label-2",text:"label-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"label-3",text:"label-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"label-4",text:"label-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"label outcome a",b:"label outcome b"}}},lZ={storylines:hZ};class uZ{scene;config;currentProgress=null;novelElement=null;isStoryActive=!1;pendingCompletion=!1;debugStoryActive=!1;currentDebugStoryline="fauxchella";currentDebugEvent=1;storylines=[];constructor(m){this.scene=m,this.config=lZ}setupDebugControls(){this.scene.input.keyboard?.on("keydown-UP",()=>{this.debugStoryActive&&this.changeDebugStoryline(-1)}),this.scene.input.keyboard?.on("keydown-DOWN",()=>{this.debugStoryActive&&this.changeDebugStoryline(1)}),this.scene.input.keyboard?.on("keydown-LEFT",()=>{this.debugStoryActive&&this.changeDebugEvent(-1)}),this.scene.input.keyboard?.on("keydown-RIGHT",()=>{this.debugStoryActive&&this.changeDebugEvent(1)})}initialize(){console.log("StoryManager: Initializing story system"),this.setupNovelElement(),this.setupDebugControls(),this.storylines=Object.keys(this.config.storylines),console.log("StoryManager: Available storylines:",this.storylines),console.log("StoryManager: Story config loaded:",Object.keys(this.config.storylines).length,"storylines")}setupNovelElement(){this.novelElement=document.createElement("div"),this.novelElement.style.display="none",this.novelElement.style.position="absolute",this.novelElement.style.top="-9999px",document.body.appendChild(this.novelElement)}toggleDebugStory(){this.debugStoryActive?this.closeDebugStory():this.openDebugStory()}openDebugStory(){this.debugStoryActive=!0,this.showDebugStory(),console.log(`Debug Story: ${this.currentDebugStoryline}-${this.currentDebugEvent}`)}closeDebugStory(){this.debugStoryActive=!1;const m=this.scene.scene.get("MenuScene");m&&m.menuManager.closeCurrentDialog()}showDebugStory(){const m=this.config.storylines[this.currentDebugStoryline],T=m.events[this.currentDebugEvent.toString()];if(!m){console.error(`Debug Story: Storyline '${this.currentDebugStoryline}' not found in config`);return}if(!T){console.error(`Debug Story: Event ${this.currentDebugEvent} not found in storyline '${this.currentDebugStoryline}'`);return}console.log(`Debug Story: Showing ${this.currentDebugStoryline}-${this.currentDebugEvent}`),console.log(`Debug Story: Text: "${T.text}"`),console.log(`Debug Story: Choices: ${T.choices.length} choices`);const O=this.scene.scene.get("MenuScene");O&&(O.events.emit("showNovelStory",{storyline:this.currentDebugStoryline,event:this.currentDebugEvent,eventData:T,storylineData:m}),this.scene.scene.bringToTop("MenuScene"))}changeDebugStoryline(m){let T=this.storylines.indexOf(this.currentDebugStoryline)+m;T<0&&(T=this.storylines.length-1),T>=this.storylines.length&&(T=0),this.currentDebugStoryline=this.storylines[T],this.showDebugStory(),console.log(`Debug Story: ${this.currentDebugStoryline}-${this.currentDebugEvent}`)}changeDebugEvent(m){let T=this.currentDebugEvent+m;T=Math.max(1,Math.min(4,T)),this.currentDebugEvent=T,this.showDebugStory(),console.log(`Debug Story: ${this.currentDebugStoryline}-${this.currentDebugEvent}`)}startStory(m,T=1){if(!this.config.storylines[m]){console.error(`StoryManager: Unknown storyline: ${m}`);return}let O=T;m==="fauxchella"&&(O=this.getNextFauxchellaEvent());const I=this.config.storylines[m],B=O.toString();if(!I.events[B]){console.error(`StoryManager: Event ${O} not found in storyline ${m}`);return}this.currentProgress={currentStoryline:m,currentEvent:O,choices:[],completed:!1},this.isStoryActive=!0,console.log(`StoryManager: Starting story ${m}-${O}`);const y={storyline:m,event:O,eventData:I.events[B],storylineData:I};console.log("StoryManager: Emitting showNovelStory event with data:",y);const P=this.scene.scene.get("MenuScene");P?(P.events.emit("showNovelStory",y),console.log("StoryManager: showNovelStory event emitted to MenuScene")):console.error("StoryManager: MenuScene not found")}getNextFauxchellaEvent(){const m=this.scene.scene.get("GameScene");if(!m||!m.gameState)return 1;const T=m.gameState.getState(),O=[{listeners:0,event:1},{listeners:5e3,event:2},{listeners:1e4,event:3},{listeners:2e4,event:4}],I=T.monthlyListeners||0;let B=1;for(const y of O)I>=y.listeners&&(B=y.event);return console.log(`StoryManager: Next fauxchella event: ${B} (${I} listeners)`),B}makeChoice(m){if(!this.currentProgress||!this.isStoryActive){console.warn("StoryManager: No active story to make choice for");return}this.currentProgress.choices.push(m),this.config.storylines[this.currentProgress.currentStoryline].events[this.currentProgress.currentEvent.toString()],console.log(`StoryManager: Made choice ${m} in ${this.currentProgress.currentStoryline}-${this.currentProgress.currentEvent}`),this.currentProgress.currentEvent>=4?(console.log("StoryManager: Last event completed, waiting for outcome window to close before completing story"),this.pendingCompletion=!0):(this.currentProgress.currentEvent++,this.continueStory())}completeStoryAfterOutcome(){this.pendingCompletion&&(this.pendingCompletion=!1,this.completeStory())}continueStory(){if(!this.currentProgress)return;const m=this.config.storylines[this.currentProgress.currentStoryline],T=m.events[this.currentProgress.currentEvent.toString()];console.log(`StoryManager: Continuing to ${this.currentProgress.currentStoryline}-${this.currentProgress.currentEvent}`),this.scene.events.emit("showNovelStory",{storyline:this.currentProgress.currentStoryline,event:this.currentProgress.currentEvent,eventData:T,storylineData:m})}completeStory(){if(!this.currentProgress)return;this.currentProgress.completed=!0,this.isStoryActive=!1;const m=this.config.storylines[this.currentProgress.currentStoryline],T=this.currentProgress.choices[this.currentProgress.choices.length-1],O=m.outcomes[T]||m.outcomes.a;console.log(`StoryManager: Completed story ${this.currentProgress.currentStoryline}`),this.scene.events.emit("storyCompleted",{storyline:this.currentProgress.currentStoryline,outcome:O,choices:this.currentProgress.choices}),this.currentProgress=null}getAvailableStorylines(){return Object.keys(this.config.storylines)}getStoryline(m){return this.config.storylines[m]||null}isStoryRunning(){return this.isStoryActive}isDebugStoryActive(){return this.debugStoryActive}getCurrentProgress(){return this.currentProgress}destroy(){this.novelElement&&(document.body.removeChild(this.novelElement),this.novelElement=null),this.currentProgress=null,this.isStoryActive=!1}}const ul={gravity:{baseY:.5,maxLateralGx:.8},tutorial:{scheduleDelayMs:50},magnetic:{attractionWindowMs:900},performance:{uiUpdateDeltaMs:16}};class dl extends lt.Scene{carMechanics;lastPlannedData="";tutorialSystem;gameUI;inputHandlers;gameState;windowShapes;storyManager;virtualPets=[];petLabels=[];rearviewRect;dragOverlay;controlsCamera;itemsCamera;dragOverlayCamera;feedingDebug;hotdogOverlays=[];debugItemMenu;debugMenuVisible=!1;static ITEM_TYPES={Food:{color:16733525,effect:{hunger:3}},Phone:{color:43775,effect:{focus:-1}},Weed:{color:3394662,effect:{chill:2}},Drink:{color:11163135,effect:{energy:2}},Decoration:{color:16738740,effect:{spectacle:5}}};magneticVisualState="default";keysAttractionUntil=0;lastMagneticAttractionLog=0;physicsSafetyTimer;debugWindows=[];frontseatTrash;backseatItem;frontseatKeys;frontseatPhone;gameContentContainer;magneticTarget;keySVG;hotdogSVG;phoneSVG;itemSVG;nightTimeOverlay;nightModeEnabled=!1;keysConstraint=null;encumbranceCapacity=10;keysInIgnition=!1;carStarted=!1;steeringUsed=!1;firstCarStart=!0;rearviewAnimationCompleted=!1;drivingMode=!1;shouldAutoRestartDriving=!1;exitDetectionLogCounter=0;currentPosition="frontseat";storyOverlayScheduledStep=null;chapter1Shown=!1;firstSteeringLoggedStep=null;hasShownCrankTutorial=!1;hasClearedCrankTutorial=!1;hasShownSteeringTutorial=!1;hasClearedSteeringTutorial=!1;stopMenuOpen=!1;countdownStepCounter=0;tutorialInterruptStep=null;tutorialInterruptCompleted=!1;gravityBaseY=ul.gravity.baseY;gravityXCurrent=0;gravityXTarget=0;tutorialUpdateScheduled=!1;tutorialUpdateCounter=0;constructor(){super({key:"GameScene"})}async create(){try{await Se.loadConfig(),this.input.topOnly=!0,this.input.keyboard?.on("keydown-P",()=>{this.carMechanics&&this.carMechanics.isDriving()&&this.carMechanics.spawnDebugPothole()}),this.initializeGameState(),this.initializeSystems()}catch(a){console.error("ERROR in GameScene.create():",a)}this.createPhysicsObjects(),this.initializePhysicsSafetySystem(),this.addDebugDropButton(),this.createDebugItemMenu(),this.createGameContentContainer(),this.createMagneticTarget(),this.setupPhysicsWorlds();try{this.gameUI.initialize()}catch(a){console.error("ERROR calling gameUI.initialize():",a)}this.tutorialSystem.initialize(),this.carMechanics.initialize(),this.inputHandlers.initialize();try{this.scene.get("MenuScene")?.events.on("shopPurchase",a=>{try{console.log("GameScene: shopPurchase received -> spawning hot-dog",a)}catch{}const d=String(a?.item||"").toLowerCase();let n="Food";if(d.includes("phone")){console.log("Cannot purchase phone - you already have one");return}else d.includes("weed")||d.includes("pre-roll")||d.includes("edibles")?n="Weed":d.includes("drink")||d.includes("soda")||d.includes("coffee")||d.includes("energy")?n="Drink":d.includes("decoration")||d.includes("banner")||d.includes("lights")||d.includes("pyro")?n="Decoration":(d.includes("meal")||d.includes("food")||d.includes("sandwich")||d.includes("feast")||d.includes("snack"))&&(n="Food");this.spawnHotDogFromTop(n)})}catch{}try{this.updateEncumbranceUI()}catch{}try{this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.D,!0,!1)?.on("down",()=>{const d=this.scene.get("MenuScene");d&&(d.events.emit("showDestinationMenu",!0),this.scene.bringToTop("MenuScene"))}),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.P,!0,!1)?.on("down",()=>{console.log("Debug: Setting progress to 99%"),this.gameState.updateState({progress:99})}),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.R,!0,!1)?.on("down",()=>{this.createDebugWindow()}),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.S,!0,!1)?.on("down",()=>{console.log("🎭 Toggling debug story system"),this.storyManager&&this.storyManager.toggleDebugStory()}),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.U,!0,!1)?.on("down",()=>{console.log("Debug: Forcing tutorial overlay to show"),this.tutorialSystem.debugForceShowTutorial()}),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.K,!0,!1)?.on("down",()=>{console.log("Debug: Testing handleStep directly");try{this.tutorialSystem.handleStep(999),console.log("Debug: handleStep test successful")}catch(d){console.error("Debug: handleStep test failed:",d)}}),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.T,!0,!1)?.on("down",()=>{this.createDebugSpeechBubble()}),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.X,!0,!1)?.on("down",()=>{console.log("🔧 Force resetting narrative system..."),this.windowShapes.forceResetNarrativeSystem()}),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.OPEN_BRACKET,!0,!1)?.on("down",()=>{console.log("🎨 Cycling to previous dither pattern..."),this.windowShapes.overlayManager.cycleDitherPattern("prev")}),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.CLOSED_BRACKET,!0,!1)?.on("down",()=>{console.log("🎨 Cycling to next dither pattern..."),this.windowShapes.overlayManager.cycleDitherPattern("next")}),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.E,!0,!1)?.on("down",()=>{console.log("🚪 Debug: Opening Exit Stores Catalog"),this.carMechanics&&this.carMechanics.pauseDriving();const d=this.scene.get("MenuScene");d&&(d.events.emit("showExitStoresCatalog"),this.scene.bringToTop("MenuScene"))});const a=d=>{const n=this.scene.get("MenuScene");n&&(n.events.emit("showPetStoryUI",{petIndex:d}),this.scene.bringToTop("MenuScene"))};this.input.keyboard?.on("keydown-ONE",()=>a(0)),this.input.keyboard?.on("keydown-TWO",()=>a(1)),this.input.keyboard?.on("keydown-THREE",()=>a(2)),this.input.keyboard?.on("keydown-FOUR",()=>a(3)),this.input.keyboard?.on("keydown-FIVE",()=>a(4)),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.C,!0,!1)?.on("down",()=>{const d=this.scene.get("MenuScene");d&&(d.events.emit("showCyoaMenu",{cyoaId:1,isExitRelated:!1}),this.scene.bringToTop("MenuScene"))})}catch{}const m=this.cameras.main,T=Se.getRearviewMirror(),O=Math.floor(m.width*T.size.width),I=Math.floor(m.height*T.size.height),B=Math.floor(m.width*T.position.x),y=Math.floor(m.height*T.position.y),P=this.add.rectangle(B,y,O,I,At.rearviewBackgroundColor,At.rearviewBackgroundAlpha);P.setStrokeStyle(2,At.rearviewStrokeColor,1),P.setScrollFactor(0),P.setDepth(15e3);const i=-m.height;P.setPosition(B,i),this.rearviewRect=P,console.log("🔍 Rearview rectangle created at:",B,i,"size:",O,"x",I);const u=Se.getVirtualPetPositions();for(let a=0;a<5;a++){const d=u[a],n=Math.floor((d.x-.5)*O),p=Math.floor((d.y-.5)*I),g=B+n,v=y+p+20,f=new iZ(this,{depth:70001+a,xPercent:g/m.width,yOffset:v,petColor:Jv.petColor,width:0,height:0,scale:d.scale||.8,petIndex:a});f.initialize();const b=f.getRoot?.();b&&(b.setAlpha(0),b.setVisible(!0),console.log("🔍 Pet",a,"initial container state:",{visible:b.visible,alpha:b.alpha,x:b.x,y:b.y,depth:b.depth})),this.virtualPets.push(f),b&&(console.log("🔍 Pet container created for pet",a,"at position:",b.x,b.y),b.setDepth(70001+a),console.log("🔍 Pet container added to scene with depth:",b.depth));const C=f.getPetSprite?.(),_=f.getFeedAnchor?.();if(C&&_&&b){const M=`<<${f.getBandMember?.()?.name?.toLowerCase()||`pet ${a+1}`}>>`,E=0,A=_.r+20,R=this.add.text(0,0,M,{fontSize:"12px",fontStyle:"bold"}),L=R.width+16,Y=R.height+8;R.destroy();const F=this.windowShapes.createCollageRect({x:-L/2,y:-Y/2,width:L,height:Y},!0,"narrativeBackground");F.setScrollFactor(0),F.setDepth(70049+a);const N=this.add.text(E,A,M,{fontSize:"12px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5);N.setScrollFactor(0),N.setDepth(70050+a),F.setAlpha(0),N.setAlpha(0),b.add(F),b.add(N),this.petLabels[a]=N,this.petLabels[`bg_${a}`]=F}}const x=this.gameUI.getControlObjects?.(),c=this.tutorialSystem.getOverlayObjects?.();if(x&&x.length>0){this.cameras.main.ignore(x),this.controlsCamera=this.cameras.add(0,0,this.cameras.main.width,this.cameras.main.height),this.controlsCamera.setScroll(0,0),this.controlsCamera.setName("controlsCamera");const a=this.children.list||[],d=this.gameUI.dashBackground,n=new Set([...x,...c||[],...d?[d]:[]]),p=a.filter(g=>!n.has(g));p.length>0&&this.controlsCamera.ignore(p)}try{const a=this.tutorialSystem.getOverlayObjects?.();if(a&&a.length&&this.controlsCamera){const d=this.controlsCamera.ignoreList;if(d){const n=d.filter(p=>!a.includes(p));this.controlsCamera.ignore(n)}}}catch{}this.itemsCamera=this.cameras.add(0,0,this.cameras.main.width,this.cameras.main.height),this.itemsCamera.setScroll(0,0),this.itemsCamera.setName("itemsCamera");try{this.itemsCamera?.setName("itemsCamera")}catch{}this.children.list;const h=this.gameUI.getControlObjects?.(),o=this.gameUI.dashBackground,r=[...h||[],...o?[o]:[]];r.length>0&&this.itemsCamera.ignore(r),this.dragOverlay=this.add.container(0,0),this.dragOverlay.setDepth(110001),this.dragOverlay.setScrollFactor(0),this.cameras.main.ignore(this.dragOverlay);try{if(this.dragOverlayCamera){this.dragOverlayCamera.setVisible(!1);const a=this.children.list||[];this.dragOverlayCamera.ignore(a)}}catch{}this.feedingDebug=this.add.graphics(),this.feedingDebug.setScrollFactor(0),this.dragOverlay.add(this.feedingDebug),this.input.on("pointermove",a=>{const d=this.getVirtualPet?.();if(!d)return;if(this.isDraggingObject!==!0){d.setHover?.(!1);return}const n=d.isPointerOver?.(a.x,a.y)??!1;if(d.setHover?.(n),n){const p=this.draggingItem;if(p){const g=this.time.now,v=1400;p._overSince||(p._overSince=g);const f=g-p._overSince,b=p._lastFeedTime??0,C={speed:{min:100,max:200},angle:{min:0,max:360},scale:{start:.5,end:0},lifespan:600},_={...C,alpha:{start:1,end:.2},quantity:2,frequency:100};if(!p._dwellEmitter)try{const M=this.add.particles(p.x,p.y,"x",_);try{this.dragOverlay&&this.dragOverlay.add(M)}catch{}try{M.setScrollFactor?.(0),M.setDepth?.(60050)}catch{}p._dwellEmitter=M}catch{}try{p._dwellEmitter?.setPosition?.(p.x,p.y)}catch{}if(f>=v&&g-b>=v){p._lastFeedTime=g,p._overSince=g,p._feedCount=(p._feedCount??0)+1,d.setFood?.(10);const M=p.scaleX??1;p.setScale(Math.max(.1,M*.8));try{const E=this.dragOverlay?.getLocalPoint?this.dragOverlay.getLocalPoint(a.x,a.y,this.dragOverlayCamera):{x:a.x,y:a.y},A=this.add.particles(E.x,E.y,"x",{...C,quantity:0,frequency:-1});try{this.dragOverlay&&this.dragOverlay.add(A)}catch{}try{A.setScrollFactor?.(0),A.setDepth?.(60060)}catch{}A.explode?.(14,E.x,E.y),this.time.delayedCall(700,()=>A.destroy?.())}catch{}if(p._feedCount>=3&&p&&p.scene){try{p.disableInteractive?.()}catch{}this.isDraggingObject=!1,this.draggingItem=null;try{p._dwellEmitter?.stop?.(),p._dwellEmitter?.destroy?.(),p._dwellEmitter=null}catch{}this.time.delayedCall(0,()=>{p&&p.scene&&p.destroy()})}}}}else{const p=this.draggingItem;if(p){p._overSince=void 0;try{p._dwellEmitter?.stop?.(),p._dwellEmitter?.destroy?.(),p._dwellEmitter=null}catch{}}}}),this.input.on("pointerout",()=>{this.getVirtualPet?.()?.setHover?.(!1)}),this.input.on("pointerup",()=>{const a=this.draggingItem;if(a){try{a._dwellEmitter?.stop?.(),a._dwellEmitter?.destroy?.(),a._dwellEmitter=null}catch{}a._overSince=void 0,this.getVirtualPet?.()?.setHover?.(!1)}}),this.setupEventListeners()}initializeGameState(){const m={...GJ,initialMoney:108,initialPosition:50,minKnobValue:-100,maxKnobValue:100};this.gameState=new oZ(this,m),this.gameState.initialize()}initializeSystems(){const m={...VJ,radarX:this.scale.gameSize.width-40};this.carMechanics=new KJ(this,m),this.windowShapes=new Qv(this),this.storyManager=new uZ(this),this.storyManager.initialize();const T=zJ;this.tutorialSystem=new sZ(this,T,this.windowShapes.overlayManager);const O={...kC,speedCrankSnapPositions:[...kC.speedCrankSnapPositions]};this.gameUI=new rZ(this,O);const I={swipeMinDistance:50,swipeMaxTime:500,swipeThreshold:30,dragSensitivity:1,momentumMultiplier:.1,enableKeyboardControls:!0,enableSwipeControls:!0};this.inputHandlers=new aZ(this,I)}createPhysicsObjects(){this.frontseatTrash=new jJ(this),this.backseatItem=new HJ(this),this.frontseatKeys=new $J(this),this.frontseatPhone=new qJ(this);const m=this.cameras.main.width;this.cameras.main.height;const T=m*.8;this.keySVG=this.add.sprite(T,300,"key-white"),this.keySVG.setScale(.08),this.keySVG.setOrigin(.5,.5),this.keySVG.setAlpha(.8),this.keySVG.setDepth(60001),this.keySVG.setTint(16777215),this.hotdogSVG=this.add.sprite(100,200,"hot-dog"),this.hotdogSVG.setScale(.1),this.hotdogSVG.setOrigin(.5,.5),this.hotdogSVG.setAlpha(.8),this.hotdogSVG.setDepth(60001),this.hotdogSVG.setTint(16777215),this.hotdogOverlays.push({body:this.frontseatTrash.gameObject,sprite:this.hotdogSVG});const O=m*.2;this.phoneSVG=this.add.sprite(O,250,"x"),this.phoneSVG.setScale(.1),this.phoneSVG.setOrigin(.5,.5),this.phoneSVG.setAlpha(.8),this.phoneSVG.setDepth(60001),this.phoneSVG.setTint(43775),this.itemSVG=this.add.sprite(150,320,"x"),this.itemSVG.setScale(.1),this.itemSVG.setOrigin(.5,.5),this.itemSVG.setAlpha(.8),this.itemSVG.setDepth(60001),this.itemSVG.setTint(65280),this.tutorialSystem.setPhysicsObjects(this.frontseatKeys),this.tutorialSystem.setGameUI(this.gameUI)}initializePhysicsSafetySystem(){this.physicsSafetyTimer=this.time.addEvent({delay:1e3,callback:this.checkPhysicsObjectSafety,callbackScope:this,loop:!0}),console.log("🛡️ Physics safety system initialized - checking every 1 second")}addDebugDropButton(){try{this.input.keyboard?.on("keydown-I",()=>{try{console.log("Debug: I key pressed -> toggle debug menu")}catch{}this.toggleDebugMenu()})}catch{}}createDebugItemMenu(){try{this.debugItemMenu=this.add.container(0,0),this.debugItemMenu.setScrollFactor(0),this.debugItemMenu.setDepth(10010),this.debugItemMenu.setVisible(!1);const m=this.add.rectangle(0,0,200,300,0,.8);m.setOrigin(0,0),m.setScrollFactor(0),this.debugItemMenu.add(m);const T=this.add.text(10,10,"DEBUG ITEMS",{fontSize:"16px",color:"#ffffff",fontStyle:"bold"});T.setScrollFactor(0),this.debugItemMenu.add(T);const O=Object.keys(dl.ITEM_TYPES);O.forEach((B,y)=>{const P=dl.ITEM_TYPES[B].color,i=this.add.text(10,40+y*30,`${B}`,{fontSize:"14px",color:"#ffffff",backgroundColor:`#${P.toString(16).padStart(6,"0")}`,padding:{x:8,y:4}});i.setScrollFactor(0),i.setInteractive({useHandCursor:!0}),i.on("pointerdown",()=>{try{console.log(`Debug: Spawning ${B}`)}catch{}this.spawnHotDogFromTop(B)}),this.debugItemMenu?.add(i)});const I=this.add.text(10,40+O.length*30+10,"CLOSE",{fontSize:"14px",color:"#ffffff",backgroundColor:"#666666",padding:{x:8,y:4}});I.setScrollFactor(0),I.setInteractive({useHandCursor:!0}),I.on("pointerdown",()=>{this.toggleDebugMenu()}),this.debugItemMenu.add(I),this.debugItemMenu.setPosition(10,10)}catch{}}toggleDebugMenu(){if(this.debugItemMenu){this.debugMenuVisible=!this.debugMenuVisible,this.debugItemMenu.setVisible(this.debugMenuVisible);try{console.log(`Debug menu ${this.debugMenuVisible?"opened":"closed"}`)}catch{}}}spawnHotDogFromTop(m="Food"){try{console.log("GameScene: spawnHotDogFromTop called")}catch{}const T=Se.getItemSize("medium"),O=Math.floor(T.width/2),I=this.cameras.main.width,B=this.cameras.main.height,y=-Math.floor(B*.2),P=lt.Math.Between(O+10,I-O-10),i=y-O-10,u=dl.ITEM_TYPES[m]?.color??16711680,x=this.add.circle(P,i,O,u);x.setDepth(6e4);try{this.gameContentContainer.add(x)}catch{}this.matter.add.gameObject(x,{shape:{type:"circle",radius:O},label:"food",isSensor:!1}),x.body.frictionAir=0,this.matter.body.setDensity(x.body,.03),x.body.restitution=.4,this.matter.body.applyForce(x.body,{x:x.x,y:x.y},{x:0,y:8e-4}),x.setInteractive({useHandCursor:!0}),this.input.setDraggable(x),x.on("dragstart",()=>{x.isDragging=!0}),x.on("drag",(h,o,r)=>{x.setPosition(o,r)}),x.on("dragend",()=>{x.isDragging=!1});const c=this.add.sprite(x.x,x.y,"hot-dog");c.setScale(.1),c.setOrigin(.5,.5),c.setAlpha(.8),c.setDepth(60001),c.setTint(16777215);try{const h=[...this.gameUI.getControlObjects?.()||[]];h&&this.itemsCamera&&this.itemsCamera.ignore(h)}catch{}try{this.children.bringToTop(c)}catch{}this.hotdogOverlays.push({body:x,sprite:c});try{console.log("GameScene: spawned hot-dog item at",{x:x.x,y:x.y},"total overlays:",this.hotdogOverlays.length)}catch{}this.updateEncumbranceUI()}getEncumbranceCount(){const m=this.frontseatKeys?1:0,T=this.hotdogOverlays?this.hotdogOverlays.length:0;return m+T}getEncumbranceCapacity(){return this.encumbranceCapacity}updateEncumbranceUI(){try{this.gameUI?.setEncumbrance?.(this.getEncumbranceCount(),this.getEncumbranceCapacity())}catch{}}checkPhysicsObjectSafety(){const m=this.cameras.main.width,T=this.cameras.main.height,O={left:-100,right:m+100,top:-100,bottom:T+100};[{name:"frontseatTrash",obj:this.frontseatTrash},{name:"backseatItem",obj:this.backseatItem},{name:"frontseatKeys",obj:this.frontseatKeys}].forEach(({name:I,obj:B})=>{if(!B||!B.gameObject||!B.gameObject.body)return;const y=B.gameObject.body,P=y.position.x,i=y.position.y;(P<O.left||P>O.right||i<O.top||i>O.bottom)&&(console.log(`🚨 ${I} fell out of bounds at (${P.toFixed(1)}, ${i.toFixed(1)}) - respawning`),this.respawnPhysicsObject(I,B))})}respawnPhysicsObject(m,T){const O=this.cameras.main.width,I=this.cameras.main.height;let B,y;switch(m){case"frontseatTrash":B=100,y=200;break;case"backseatItem":B=230,y=320;break;case"frontseatKeys":B=O*.8,y=200;break;default:B=lt.Math.Between(50,O-50),y=I*.5}if(T.gameObject&&T.gameObject.body){const P=T.gameObject.body;P.velocity={x:0,y:0},P.angularVelocity=0,P.position={x:B,y},T.gameObject.setPosition(B,y),console.log(`✅ ${m} respawned at (${B}, ${y})`)}}selectRegion(m){console.log(`Region selected: ${m}`),this.gameState.changeRegion(m),this.stopMenuOpen=!1,this.carStarted=!0,this.gameState.updateState({carStarted:!0,progress:0});const T=this.gameState.getState().step||0;this.carMechanics.startDriving(T);const O=this.scene.get("AppScene");O&&(O.isPaused=!1,this.events.emit("gameResumed")),this.gameState.isFinalSequenceForRegion()?this.enableNightTimeMode():this.disableNightTimeMode(),console.log(`✅ Region changed to ${m} - driving restarted with progress reset to 0`)}enableNightTimeMode(){if(this.nightModeEnabled)return;this.nightModeEnabled=!0;const m=this.scene.get("MenuScene");m&&m.menuManager&&m.menuManager.currentDialog||console.log("🌙 Enabling night time mode"),this.nightTimeOverlay||(this.nightTimeOverlay=this.add.rectangle(this.cameras.main.width/2,this.cameras.main.height/2,this.cameras.main.width,this.cameras.main.height,0,.3),this.nightTimeOverlay.setScrollFactor(0),this.nightTimeOverlay.setDepth(2e4)),this.nightTimeOverlay.setVisible(!0),this.carMechanics&&this.carMechanics.setNightTimeMode(!0)}disableNightTimeMode(){if(!this.nightModeEnabled)return;this.nightModeEnabled=!1;const m=this.scene.get("MenuScene");m&&m.menuManager&&m.menuManager.currentDialog||console.log("☀️ Disabling night time mode"),this.nightTimeOverlay&&this.nightTimeOverlay.setVisible(!1),this.carMechanics&&this.carMechanics.setNightTimeMode(!1)}advanceToNextSequence(){const m=this.gameState.getSequencesForCurrentRegion(),T=this.gameState.getState().showsInCurrentRegion,O=Math.min(T+1,m-1);this.gameState.updateState({showsInCurrentRegion:O}),console.log(`🔧 RIGHT: Advanced sequence to ${O+1}/${m}`)}spawnAnimatedSVG(){if(!this.windowShapes){console.warn("WindowShapes not available for SVG animation");return}const m=lt.Math.Between(50,310),T=lt.Math.Between(100,500),O=[16739125,5164484,4569041,9883316,16697943,16752627],I=O[lt.Math.Between(0,O.length-1)],B=this.windowShapes.createTestAnimatedSVG(m,T);B.setDepth(1e3),this.gameContentContainer&&this.gameContentContainer.add(B),console.log(`🎨 Spawned animated SVG at (${m}, ${T}) with color 0x${I.toString(16)}`)}generateCountdownValue(){const m=Math.random(),T=Math.random(),O=Math.sqrt(-2*Math.log(m))*Math.cos(2*Math.PI*T)*1.5+9,I=Math.max(6,Math.min(12,Math.round(O)));return console.log(`🎲 Generated countdown value: ${I} (from normal distribution)`),I}createGameContentContainer(){this.gameContentContainer=this.add.container(0,0),this.gameContentContainer.setName("gameContentContainer"),this.cameras.main.width,this.cameras.main.height,this.gameContentContainer.add(this.frontseatTrash.gameObject),this.gameContentContainer.add(this.backseatItem.gameObject),this.gameContentContainer.add(this.frontseatKeys.gameObject),this.gameContentContainer.add(this.frontseatPhone.gameObject)}createMagneticTarget(){const m=Se.getMagneticTarget(),T={x:m.position.x,y:m.position.y,radius:m.radius,inactiveColor:Yr.magneticTargetInactiveColor};this.magneticTarget=this.add.graphics(),this.magneticTarget.lineStyle(3,T.inactiveColor,1),this.magneticTarget.strokeCircle(T.x,T.y,T.radius);const O=this.matter.add.circle(T.x,T.y,T.radius,{isStatic:!0,isSensor:!0,render:{visible:!1}});this.magneticTarget.magneticBody=O,this.magneticTarget.setScrollFactor(1,1),this.magneticTarget.setDepth(10001),this.gameContentContainer.add(this.magneticTarget)}setupPhysicsWorlds(){const m=this.cameras.main.width,T=this.cameras.main.height,O=-Math.floor(T*.2);this.matter.world.setBounds(0,O,m,T-O+10),this.createRaisedFloor(),this.matter.world.setGravity(Yr.gravityX,Yr.gravityY)}createRaisedFloor(){const m=this.cameras.main.width,T=this.cameras.main.height*.9+10;this.matter.add.rectangle(m/2,T,m,20,{isStatic:!0});const O=this.add.rectangle(m/2,T,m,4,3355443);O.setDepth(999),O.setAlpha(.8)}setupEventListeners(){this.gameState.setEventCallbacks({onStateChange:m=>{this.gameUI.updateUI(m);const T=this.gameState.getSequencesForCurrentRegion();this.gameUI.updateRegionInfoWithTotal(m.currentRegion,m.showsInCurrentRegion,T),this.gameState.isFinalSequenceForRegion()?this.enableNightTimeMode():this.disableNightTimeMode();const O=this.carMechanics.getPlannedExits(),I=this.carMechanics.getPlannedCyoa(),B=this.carMechanics.getPlannedStory(),y=JSON.stringify({plannedExits:O,plannedCyoa:I,plannedStory:B});this.lastPlannedData!==y&&(this.lastPlannedData=y,this.gameUI.updateThresholdIndicators(O,I,B)),this.scheduleTutorialUpdate(0)},onSaveComplete:m=>{},onLoadComplete:(m,T)=>{m&&T&&this.gameUI.updateUI(T)}}),this.inputHandlers.setEventCallbacks({onSteeringInput:m=>{this.onSteeringInput(m)},onSwipeLeft:()=>{this.switchToBackseat()},onSwipeRight:()=>{this.switchToFrontseat()},onToggleDriving:()=>{this.toggleDrivingMode()}}),this.events.on("potholeHit",()=>{const m=this.scene.get("MenuScene");if(m){m.events.emit("showPotholeMenu");const T=m.menuManager;T?.showPotholeMenu&&T.showPotholeMenu(),this.scene.bringToTop("MenuScene")}this.applyLargeBumpEffectToAllMatterObjects(),this.applyScreenShake(.02,250)}),this.events.on("potholeMenuShake",()=>{this.applyScreenShake(.01,180)}),this.events.on("step",this.onStepEvent,this),this.events.on("halfStep",this.onHalfStepEvent,this),this.events.on("gamePaused",this.onGamePaused,this),this.events.on("gameResumed",this.onGameResumed,this),this.events.on("turnKey",this.onTurnKey,this),this.events.on("removeKeys",this.onRemoveKeys,this),this.events.on("ignitionMenuShown",this.onIgnitionMenuShown,this),this.events.on("ignitionMenuHidden",this.onIgnitionMenuHidden,this),this.events.on("tutorialInterruptClosed",this.onTutorialInterruptClosed,this),this.events.on("speedUpdate",this.onSpeedUpdate,this),this.events.on("steeringInput",this.onSteeringInput,this),this.events.on("cameraAngleChanged",this.onCameraAngleChanged,this),this.events.on("storyCompleted",this.onStoryCompleted,this),this.game.events.on("hidden",()=>{const m=this.gameState.getState();m.gameStarted&&!m.hasOpenMenu&&this.scene.get("MenuScene").events.emit("showPauseMenu")})}updateTutorialSystem(){const m=this.scene.get("MenuScene"),T=m&&m.menuManager&&m.menuManager.currentDialog,O=T?m.menuManager.currentDisplayedMenuType:null,I={keysInIgnition:this.keysInIgnition,carStarted:this.carStarted,hasOpenMenu:!!T,currentMenuType:O,steeringUsed:this.steeringUsed,inExitCollisionPath:this.isPlayerInExitCollisionPath()},B=this.hasShownCrankTutorial,y=this.hasShownSteeringTutorial;this.tutorialSystem.updateTutorialOverlay(I);const P=this.tutorialSystem.getCurrentTutorialState();P==="crank"?(this.hasShownCrankTutorial=!0,this.hasClearedCrankTutorial=!1):B&&P!=="crank"&&(this.hasClearedCrankTutorial=!0),P==="steering"?(this.hasShownSteeringTutorial=!0,this.hasClearedSteeringTutorial=!1):y&&P!=="steering"&&(this.hasClearedSteeringTutorial=!0);try{const i=this.scene.get("MenuScene"),u=!!(i&&i.menuManager&&i.menuManager.currentDialog),x=!!P&&P!=="none";u||this.gameState.updateState({hasOpenMenu:x})}catch{}}scheduleTutorialUpdate(m=0){this.tutorialUpdateScheduled||(this.tutorialUpdateScheduled=!0,this.time.delayedCall(m,()=>{this.tutorialUpdateScheduled=!1,this.updateTutorialSystem()}))}resetCrankToZero(){}pause(){this.carMechanics.pauseDriving(),this.inputHandlers.resetInputState()}resume(){this.shouldAutoRestartDriving&&this.drivingMode&&this.carMechanics.resumeDriving()}update(){if(!this.gameState)return;const m=this.gameState.getState().step||0;this.carMechanics&&this.carMechanics.update(m),this.gameUI&&this.gameUI.update(ul.performance.uiUpdateDeltaMs);for(let I=0;I<this.virtualPets.length;I++){const B=this.virtualPets[I];if(B&&B.update)try{B.update()}catch{}}this.frontseatKeys&&this.frontseatTrash&&this.backseatItem&&this.applyMagneticAttraction(),this.gravityXCurrent=lt.Math.Linear(this.gravityXCurrent,this.gravityXTarget,.1),this.matter.world.setGravity(this.gravityXCurrent,this.gravityBaseY);for(let I=0;I<this.virtualPets.length;I++){const B=this.virtualPets[I],y=this.petLabels[I],P=this.petLabels[`bg_${I}`];if(!B||!y)continue;const i=B.getFeedAnchor?.(),u=B.getPetSprite?.();if(i&&u){const x=u.y+(i.r+20);y.setPosition(u.x,x),P&&P.setPosition(u.x,x),y.setDepth(70050+I),P&&P.setDepth(70049+I)}}if(this.keySVG&&this.frontseatKeys&&this.frontseatKeys.gameObject){const I=this.gameContentContainer.getWorldTransformMatrix().transformPoint(this.frontseatKeys.gameObject.x,this.frontseatKeys.gameObject.y);this.keySVG.setPosition(I.x,I.y),this.keySVG.physicsRotation=this.frontseatKeys.gameObject.rotation,this.frontseatKeys.gameObject.isDragging?this.keySVG.setDepth(110001):this.keySVG.setDepth(60001)}if(this.phoneSVG&&this.frontseatPhone&&this.frontseatPhone.gameObject){const I=this.gameContentContainer.getWorldTransformMatrix().transformPoint(this.frontseatPhone.gameObject.x,this.frontseatPhone.gameObject.y);this.phoneSVG.setPosition(I.x,I.y),this.frontseatPhone.gameObject.isDragging?this.phoneSVG.setDepth(110001):this.phoneSVG.setDepth(60001)}if(this.itemSVG&&this.backseatItem&&this.backseatItem.gameObject){const I=this.gameContentContainer.getWorldTransformMatrix().transformPoint(this.backseatItem.gameObject.x,this.backseatItem.gameObject.y);this.itemSVG.setPosition(I.x,I.y),this.backseatItem.gameObject.isDragging?this.itemSVG.setDepth(110001):this.itemSVG.setDepth(60001)}if(this.hotdogOverlays&&this.hotdogOverlays.length>0)for(const I of this.hotdogOverlays){if(!I.body||!I.sprite)continue;const B=this.gameContentContainer.getWorldTransformMatrix().transformPoint(I.body.x,I.body.y);I.sprite.setPosition(B.x,B.y),I.sprite.setRotation(I.body.rotation);const y=I.body.isDragging;I.sprite.setDepth(y?110001:60001)}const T=this.frontseatKeys?.gameObject;T&&T._justReleasedAt&&Date.now()-T._justReleasedAt<50&&(this.keysAttractionUntil=Date.now()+ul.magnetic.attractionWindowMs,T._justReleasedAt=void 0);const O=this.scene.get("MenuScene");!(O&&O.menuManager&&O.menuManager.currentDialog)&&!this.keysInIgnition&&(this.tutorialUpdateCounter||(this.tutorialUpdateCounter=0),this.tutorialUpdateCounter++,this.tutorialUpdateCounter%5===0&&this.tutorialSystem.updateTutorialOverlay({keysInIgnition:this.keysInIgnition,carStarted:this.carStarted,hasOpenMenu:!1,currentMenuType:null,steeringUsed:this.steeringUsed}),this.tutorialSystem.updateTutorialMaskRealTime&&this.tutorialSystem.updateTutorialMaskRealTime()),this.inputHandlers&&this.inputHandlers.setInputState({isDraggingObject:!1,isKnobActive:!1,keysConstraint:this.keysConstraint,hasOpenMenu:!1,currentMenuType:null})}applyMagneticAttraction(){if(!this.gameState.isGameStarted()||!this.frontseatKeys||!this.frontseatKeys.gameObject||!this.frontseatKeys.gameObject.body||!this.magneticTarget||!this.magneticTarget.magneticBody)return;const m=Se.getMagneticTarget(),T={x:m.position.x,y:m.position.y,radius:m.radius,color:Yr.magneticTargetColor,magneticRange:Yr.magneticRadius,magneticStrength:Yr.magneticStrength,snapThreshold:Yr.magneticSnapThreshold,constraintStiffness:Yr.magneticConstraintStiffness,constraintDamping:Yr.magneticConstraintDamping},O=this.frontseatKeys.gameObject.body,I=this.magneticTarget.magneticBody,B={x:O.position.x,y:O.position.y},y={x:I.position.x,y:I.position.y},P=y.x-B.x,i=y.y-B.y,u=Math.sqrt(P*P+i*i);this.keysConstraint;const x=!!this.frontseatKeys.gameObject.isDragging,c=Date.now()<=this.keysAttractionUntil;let h="default";if(u<=T.snapThreshold?h="snap":u<=T.magneticRange&&(h="near"),h!==this.magneticVisualState&&(this.magneticVisualState=h,this.magneticTarget.clear(),h==="snap"?this.magneticTarget.lineStyle(5,65280,1):h==="near"?this.magneticTarget.lineStyle(3,16776960,1):this.magneticTarget.lineStyle(3,T.color,1),this.magneticTarget.strokeCircle(T.x,T.y,T.radius)),c&&!x&&u<=T.snapThreshold&&!this.keysConstraint){this.keysConstraint=this.matter.add.constraint(O,I,0,.1,{pointA:{x:0,y:0},pointB:{x:0,y:0},stiffness:T.constraintStiffness,damping:T.constraintDamping}),console.log("🔑 Keys constraint created successfully:",!!this.keysConstraint),this.keysInIgnition=!0,this.gameState.updateState({keysInIgnition:!0}),console.log("Keys snapped to ignition");const o=this.scene.get("AppScene");o&&(o.isPaused=!0,this.events.emit("gamePaused")),this.events.emit("showTurnKeyMenu");const r=this.scene.get("MenuScene");if(r&&r.scene.bringToTop(),console.log("✅ Turn key menu event emitted and MenuScene brought to top"),this.gameState.getTutorialPhase()==="keys_placement"&&this.gameState.advanceTutorial(),this.frontseatKeys.gameObject.body){const a=this.frontseatKeys.gameObject.body;a.isStatic=!0,a._originalCollisionFilter={group:a.collisionFilter?.group??0,category:a.collisionFilter?.category??1,mask:a.collisionFilter?.mask??65535},a._originalIsSensor=!!a.isSensor,a.isSensor=!0,a.collisionFilter={group:-1,category:1,mask:0}}this.scheduleTutorialUpdate(0),this.gameState.isInTutorial(),console.log("Checking ignition menu conditions - carStarted:",this.carStarted,"keysConstraint:",!!this.keysConstraint,"keysInIgnition:",this.keysInIgnition),!this.carStarted&&this.keysConstraint?(console.log("✅ Showing turn key menu - conditions met"),this.showTurnKeyMenu()):(console.log("❌ Not showing turn key menu - conditions not met"),this.carStarted&&console.log("  - Reason: car already started"),this.keysConstraint||console.log("  - Reason: no keys constraint")),this.frontseatKeys.gameObject.setScrollFactor(1,1),this.magneticTarget.clear(),this.magneticTarget.lineStyle(5,65280,1),this.magneticTarget.strokeCircle(T.x,T.y,T.radius)}else if(u>T.magneticRange&&this.keysConstraint)this.matter.world.removeConstraint(this.keysConstraint),this.keysConstraint=null,this.keysInIgnition=!1,this.gameState.updateState({keysInIgnition:!1}),this.turnOffCar(),this.restoreKeyPhysics(),this.frontseatKeys.gameObject.setScrollFactor(1,0),this.resetCrankToZero(),this.scheduleTutorialUpdate(ul.tutorial.scheduleDelayMs);else if(c&&!x&&u<=T.magneticRange&&u>T.snapThreshold&&!this.keysConstraint){const o=T.magneticStrength*(1-u/T.magneticRange);if(u>0){const r=P/u*o,a=i/u*o;this.matter.body.applyForce(O,B,{x:r,y:a})}}}showTurnKeyMenu(){console.log("showTurnKeyMenu() called - emitting showTurnKeyMenu event");const m=this.scene.get("MenuScene");m?(m.events.emit("showTurnKeyMenu"),this.scene.bringToTop("MenuScene"),console.log("✅ Turn key menu event emitted and MenuScene brought to top")):console.log("❌ MenuScene not found!")}closeCurrentMenu(){const m=this.scene.get("MenuScene");m&&m.events.emit("closeCurrentMenu")}onTurnKey(){if(console.log("GameScene: onTurnKey called - carStarted:",this.carStarted),this.carStarted){console.log("Turn Key ignored: car already started");return}if(console.log("GameScene: Starting car - setting carStarted to true"),this.carStarted=!0,this.gameState.updateState({carStarted:!0}),this.carMechanics.isDriving())console.log("GameScene: CarMechanics was already driving");else{const m=this.gameState.getState().step||0;console.log("GameScene: Starting driving mechanics at step:",m),this.carMechanics.startDriving(m),console.log("GameScene: Driving mechanics started");const T=this.carMechanics.getPlannedExits(),O=this.carMechanics.getPlannedCyoa(),I=this.carMechanics.getPlannedStory();console.log("🔺 GameScene: Updating threshold indicators after startDriving"),this.gameUI.updateThresholdIndicators(T,O,I)}if(this.firstCarStart&&(this.firstCarStart=!1,!this.gameState.isInTutorial())){const m=this.children.getByName("rearviewContainer");m&&this.tweens.add({targets:m,y:0,duration:1800,ease:"Cubic.easeOut",delay:500,onComplete:()=>{this.virtualPets.forEach((T,O)=>{const I=T.getRoot?.();I&&this.tweens.add({targets:I,alpha:1,duration:800,ease:"Cubic.easeOut",delay:O*100,onComplete:()=>{const B=this.petLabels[O],y=this.petLabels[`bg_${O}`];B&&this.tweens.add({targets:[B,y],alpha:1,duration:400,ease:"Cubic.easeOut"}),O===this.virtualPets.length-1&&this.gameUI.fadeInRegionalUI()}})})}})}if(this.scheduleTutorialUpdate(0),this.gameUI&&this.gameUI.frontseatButton){const m=this.gameUI;m.frontseatButton?.setVisible(!0),m.backseatButton?.setVisible(!0),m.lookUpLabel?.setVisible(!0),m.lookDownLabel?.setVisible(!0)}}onRemoveKeys(){this.removeKeysFromIgnition()}onCameraAngleChanged(m){if(this.keySVG){const T=(this.keySVG.physicsRotation||0)+m;this.keySVG.setAngle(T)}if(this.phoneSVG&&this.frontseatPhone&&this.frontseatPhone.gameObject){const T=(this.frontseatPhone.gameObject.rotation||0)+m;this.phoneSVG.setAngle(T)}if(this.itemSVG&&this.backseatItem&&this.backseatItem.gameObject){const T=(this.backseatItem.gameObject.rotation||0)+m;this.itemSVG.setAngle(T)}}onIgnitionMenuShown(){console.log("Ignition menu shown"),this.input.enabled=!1}onIgnitionMenuHidden(){console.log("Ignition menu hidden"),this.input.enabled=!0;const m=this.scene.get("AppScene");m&&(m.isPaused=!1),this.events.emit("gameResumed"),console.log("Game resumed after ignition menu closed")}removeKeysFromIgnition(){this.keysConstraint&&(this.matter.world.removeConstraint(this.keysConstraint),this.keysConstraint=null),this.keysInIgnition=!1,this.gameState.updateState({keysInIgnition:!1}),this.turnOffCar(),this.restoreKeyPhysics();const m=Se.getMagneticTarget();this.magneticTarget.clear(),this.magneticTarget.lineStyle(3,16711680,1),this.magneticTarget.strokeCircle(m.position.x,m.position.y,m.radius),this.resetCrankToZero(),this.closeCurrentMenu(),this.scheduleTutorialUpdate(100)}restoreKeyPhysics(){const m=this.frontseatKeys?.gameObject;if(!m||!m.body)return;const T=m.body;T.isStatic=!1,typeof T._originalIsSensor=="boolean"?(T.isSensor=T._originalIsSensor,delete T._originalIsSensor):T.isSensor=!1,T._originalCollisionFilter?(T.collisionFilter=T._originalCollisionFilter,delete T._originalCollisionFilter):T.collisionFilter={group:0,category:1,mask:65535};try{this.matter.body.setVelocity(T,{x:0,y:0}),this.matter.body.setAngularVelocity(T,0)}catch{}const O=this.cameras.main.width,I=this.cameras.main.height,B=15,y=lt.Math.Clamp(m.x,B,O-B),P=lt.Math.Clamp(m.y,B,I*.9-B);try{this.matter.body.setPosition(T,{x:y,y:P})}catch{m.setPosition(y,P)}m.setIgnoreGravity?.(!1),m.setScrollFactor(1,0)}startGame(){const m=this.generateCountdownValue();this.gameState.updateState({gameTime:m}),this.gameState.startGame(),this.gameState.startTutorial(),this.carMechanics.enableTutorialMode(),this.scheduleTutorialUpdate(0),this.activateMagneticTarget()}activateMagneticTarget(){if(this.magneticTarget){const m=Se.getMagneticTarget();this.magneticTarget.clear(),this.magneticTarget.lineStyle(3,16711680,1),this.magneticTarget.strokeCircle(m.position.x,m.position.y,m.radius)}}loadGame(m){this.gameState.loadGame(m)}getVirtualPet(m){return m!==void 0?this.virtualPets[m]||void 0:this.virtualPets[0]}showFeedingDebug(m,T){this.feedingDebug&&(this.feedingDebug.clear(),this.feedingDebug.lineStyle(2,16711680,.9).strokeRect(m.x,m.y,m.width,m.height),this.feedingDebug.lineStyle(2,65280,.9).strokeRect(T.x,T.y,T.width,T.height))}clearFeedingDebug(){this.feedingDebug?.clear()}resumeAfterCollision(){this.carMechanics.resumeDriving();const m=this.scene.get("AppScene");m&&(m.isPaused=!1),this.events.emit("gameResumed")}takeExit(){const m=this.scene.get("AppScene");m&&(m.isPaused=!1),this.events.emit("gameResumed"),this.carMechanics.resumeDriving(),console.log("GameScene: Exit taken")}resumeAfterCyoa(){this.carMechanics.resumeDriving();const m=this.scene.get("AppScene");m&&(m.isPaused=!1),this.events.emit("gameResumed"),console.log("GameScene: Resumed after CYOA")}toggleDrivingMode(){if(this.drivingMode)this.carMechanics.stopDriving(),this.drivingMode=!1;else{if(!this.carStarted){console.log("toggleDrivingMode ignored: car is not started");return}const m=this.gameState.getState().step||0;this.carMechanics.startDriving(m),this.drivingMode=!0}}switchToFrontseat(){this.currentPosition==="backseat"&&(this.currentPosition="frontseat",this.gameState.updateState({currentPosition:"frontseat"}),this.tweens.add({targets:this.gameContentContainer,x:0,y:0,duration:500,ease:"Power2"}))}switchToBackseat(){console.log("Backseat switching disabled - staying in frontseat view")}applyScreenShake(m=10,T=200){this.cameras.cameras.forEach(O=>{const I=O.name||"";I.includes("UI")||I.includes("Menu")||I.includes("HUD")||O.shake(T,m)})}applyLargeBumpEffectToAllMatterObjects(){const m=this.matter.world;m&&m.getAllBodies().forEach((T,O)=>{if(T.isStatic)return;const I=T.label&&T.label.includes("Circle Body")&&T.collisionFilter&&T.collisionFilter.group===-2,B=I?{x:0,y:-.1}:{x:0,y:-.06};this.matter.body.applyForce(T,T.position,B);const y={x:(Math.random()-.5)*(I?.04:.02),y:B.y};if(this.matter.body.applyForce(T,T.position,y),I){const P=this.matter.body.getVelocity(T),i={x:P.x,y:P.y*.3};this.matter.body.setVelocity(T,i)}})}applySmallBumpEffectToAllMatterObjects(){const m=this.matter.world;m&&m.getAllBodies().forEach((T,O)=>{if(T.isStatic)return;const I=T.label&&T.label.includes("Circle Body")&&T.collisionFilter&&T.collisionFilter.group===-2,B=I?{x:0,y:-.006}:{x:0,y:-.002};this.matter.body.applyForce(T,T.position,B);const y={x:(Math.random()-.5)*(I?.006:.003),y:B.y};if(this.matter.body.applyForce(T,T.position,y),I){const P=this.matter.body.getVelocity(T),i={x:P.x,y:P.y*.05};this.matter.body.setVelocity(T,i)}})}applyBumpEffectToAllMatterObjects(){const m=this.matter.world;m&&m.getAllBodies().forEach((T,O)=>{if(T.isStatic)return;const I=T.label&&T.label.includes("Circle Body")&&T.collisionFilter&&T.collisionFilter.group===-2,B=I?{x:0,y:-.08}:{x:0,y:-.02};this.matter.body.applyForce(T,T.position,B);const y={x:(Math.random()-.5)*(I?.04:.01),y:B.y};if(this.matter.body.applyForce(T,T.position,y),I){const P=this.matter.body.getVelocity(T),i={x:P.x,y:P.y*.15};this.matter.body.setVelocity(T,i)}})}handleTutorialStep(m){const T=this.gameState.getTutorialPhase(),O=this.gameState.getTutorialStep();switch(T){case"keys_placement":break;case"initial_driving":O>=4?(this.gameState.advanceTutorial(),this.showTutorialCountdown()):this.gameState.advanceTutorial();break;case"countdown":this.gameState.advanceTutorial(),this.showTutorialInterrupt();break;case"interrupt":break;default:console.warn("Unknown tutorial phase:",T)}}showTutorialCountdown(){}showTutorialInterrupt(){const m=this.scene.get("MenuScene");m?(m.events.emit("showTutorialInterrupt"),this.scene.bringToTop("MenuScene")):console.error("ERROR: MenuScene not found!"),this.tutorialInterruptStep=this.gameState.getState().step+2}onTutorialInterruptClosed(){if(console.log("🔍 onTutorialInterruptClosed called"),this.tutorialInterruptCompleted=!0,this.gameState.advanceTutorial(),!this.carMechanics.isDriving()){const m=this.gameState.getState().step||0;this.carMechanics.startDriving(m)}this.carMechanics.disableTutorialMode(),this.time.delayedCall(200,()=>{console.log("🔍 Delayed call executing - calling revealRearviewMirror"),this.revealRearviewMirror(),this.gameUI.ensureTrianglesFadeIn()}),this.tutorialInterruptStep=null}revealRearviewMirror(){if(console.log("🔍 revealRearviewMirror called - rearviewRect found:",!!this.rearviewRect),this.rearviewRect){console.log("🔍 rearviewRect position before animation:",this.rearviewRect.x,this.rearviewRect.y);const m=this.cameras.main,T=Math.floor(m.height*Se.getRearviewMirror().position.y);console.log("🔍 Starting rearview animation - targetY:",T,"currentY:",this.rearviewRect.y),console.log("🔍 Camera height:",m.height,"Rearview config y:",Se.getRearviewMirror().position.y),this.tweens.add({targets:this.rearviewRect,y:T,duration:1e3,ease:"Power2",onComplete:()=>{console.log("🔍 Rearview animation completed - final position:",this.rearviewRect?.x,this.rearviewRect?.y),this.rearviewAnimationCompleted=!0,this.virtualPets.forEach((O,I)=>{const B=O.getRoot?.();B&&(console.log("🔍 Fading in pet",I,"at position:",B.x,B.y),console.log("🔍 Pet",I,"alpha before fade-in:",B.alpha),console.log("🔍 Pet",I,"container properties:",{visible:B.visible,alpha:B.alpha,x:B.x,y:B.y,depth:B.depth,childrenCount:B.list.length}),this.tweens.add({targets:B,alpha:1,duration:800,ease:"Cubic.easeOut",delay:I*100,onComplete:()=>{console.log("🔍 Pet",I,"fade-in completed, alpha:",B.alpha);const y=this.petLabels[I],P=this.petLabels[`bg_${I}`];y&&P&&(console.log("🔍 Fading in label for pet",I),this.tweens.add({targets:[y,P],alpha:1,duration:400,ease:"Cubic.easeOut"})),I===this.virtualPets.length-1&&(console.log("🔍 All pets faded in, fading in regional UI"),this.gameUI.fadeInRegionalUI())}}))})}})}else console.error("ERROR: Rearview rectangle not found!")}endTutorialSequence(){console.log("🎓 Ending tutorial sequence - tutorial mode will be disabled when interrupt closes")}fadeOutUIElements(){console.log("🔍 Fading out UI elements due to open menu"),this.virtualPets.forEach((m,T)=>{const O=m.getRoot?.();O&&O.alpha>0&&this.tweens.add({targets:O,alpha:.3,duration:300,ease:"Cubic.easeIn",delay:T*20})}),this.petLabels.forEach((m,T)=>{const O=this.petLabels[`bg_${T}`];m&&m.alpha>0&&this.tweens.add({targets:[m,O],alpha:.3,duration:300,ease:"Cubic.easeIn",delay:T*20})}),this.gameUI.fadeOutRegionalUI()}fadeInUIElements(){console.log("🔍 Fading in UI elements due to closed menu"),this.carStarted&&this.tutorialInterruptCompleted&&this.rearviewAnimationCompleted&&(this.virtualPets.forEach((m,T)=>{const O=m.getRoot?.();O&&O.alpha<1&&this.tweens.add({targets:O,alpha:1,duration:400,ease:"Cubic.easeOut",delay:T*30})}),this.petLabels.forEach((m,T)=>{const O=this.petLabels[`bg_${T}`];m&&m.alpha<1&&this.tweens.add({targets:[m,O],alpha:1,duration:400,ease:"Cubic.easeOut",delay:T*30})})),this.gameUI.fadeInRegionalUIOnMenuClose()}updateAllTutorialOverlays(){const m=this.scene.get("MenuScene"),T=!!(m&&m.menuManager&&m.menuManager.currentDialog);if(console.log(`🎓 updateAllTutorialOverlays: hasOpenMenu=${T}`),T)console.log("🎓 Hiding tutorial overlay due to open menu"),this.tutorialSystem.hideTutorial();else{const O=this.tutorialSystem.getCurrentTutorialState();console.log(`🎓 No menu open, tutorial state: ${O}`),O&&O!=="none"&&(console.log("🎓 Showing tutorial overlay"),this.tutorialSystem.updateTutorialOverlay({keysInIgnition:this.keysInIgnition,carStarted:this.carStarted,hasOpenMenu:!1,currentMenuType:null,steeringUsed:this.steeringUsed,inExitCollisionPath:!1}))}}onStepEvent(m){this.gameState.updateState({step:m});try{this.tutorialSystem.handleStep(m)}catch(y){console.error("🎮 GameScene: Error calling handleStep:",y)}if(this.gameState.isInTutorial()){this.handleTutorialStep(m);const y=this.scene.get("MenuScene");y&&y.menuManager&&y.menuManager.updateTutorialInterruptCountdown();return}const T=!!(this.gameState.getState().carStarted&&this.carStarted),O=this.scene.get("MenuScene"),I=O&&O.menuManager&&O.menuManager.currentDisplayedMenuType&&["EXIT","SHOP","STORY_OUTCOME"].includes(O.menuManager.currentDisplayedMenuType);T&&this.carMechanics&&this.carMechanics.onStepEvent&&this.carMechanics.onStepEvent(m),T&&!I&&this.applySmallBumpEffectToAllMatterObjects(),m%4===0&&T&&!I&&this.applyBumpEffectToAllMatterObjects();const B=this.gameState.getState();if(B.gameStarted&&T&&B.gameTime>0&&(this.countdownStepCounter++,this.gameState.updateState({countdownStepCounter:this.countdownStepCounter}),this.countdownStepCounter>=16)){this.countdownStepCounter=0;const y=B.gameTime-1;this.gameState.updateState({gameTime:y,countdownStepCounter:this.countdownStepCounter}),this.events.emit("countdownChanged",{time:y,keysInIgnition:B.keysInIgnition}),this.gameState.updateListenersOnCountdown()}if(B.gameStarted&&T&&this.carMechanics.isDriving()){const y=this.scene.get("MenuScene"),P=y&&y.menuManager&&y.menuManager.currentDisplayedMenuType&&["EXIT","SHOP","STORY_OUTCOME"].includes(y.menuManager.currentDisplayedMenuType);let i=this.gameState.getState().progress||0;if(P)console.log("🎮 Progress update paused due to active menu:",y.menuManager.currentDisplayedMenuType);else{const u=this.gameState.getState().progress||0,x=this.carMechanics.getSpeedMultiplier(),c=x*100;this.carMechanics.updateGravityBasedOnSpeed(c);const h=Math.max(.3,x*2);i=u+h,this.gameState.updateState({progress:i}),B.step&&B.step%10,this.carMechanics.updateProgress(i)}if(i>=100&&!this.stopMenuOpen){this.stopMenuOpen=!0;const u=(this.gameState.getState().stops||0)+1;if(this.gameState.incrementShowsInCurrentRegion(),this.gameState.shouldChooseNextRegion()){const h=this.scene.get("MenuScene");h&&(h.events.emit("showRegionChoiceMenu",{currentRegion:this.gameState.getCurrentRegion(),connectedRegions:vl.connections[this.gameState.getCurrentRegion()]}),this.scene.bringToTop("MenuScene"))}else{const h=this.scene.get("MenuScene");h&&(console.log("Showing destination menu - pausing game"),h.events.emit("showDestinationMenu",!0),this.scene.bringToTop("MenuScene"))}const x=this.generateCountdownValue();this.gameState.updateState({stops:u,progress:0,gameTime:x,countdownStepCounter:0}),this.countdownStepCounter=0;const c=this.scene.get("AppScene");c&&(console.log("Setting app paused and emitting gamePaused"),c.isPaused=!0,this.events.emit("gamePaused"))}}if(!this.gameState.getState().hasOpenMenu&&!this.chapter1Shown&&this.storyOverlayScheduledStep===null&&this.firstSteeringLoggedStep!==null&&this.carStarted&&this.hasShownCrankTutorial&&this.hasClearedCrankTutorial&&this.hasShownSteeringTutorial&&this.hasClearedSteeringTutorial){this.storyOverlayScheduledStep=m+5;const y=this.gameUI;y?.frontseatButton?.setVisible(!0),y?.backseatButton?.setVisible(!0),y?.lookUpLabel?.setVisible(!0),y?.lookDownLabel?.setVisible(!0)}if(!this.chapter1Shown&&this.storyOverlayScheduledStep!==null&&m>=this.storyOverlayScheduledStep){if(this.gameState.getState().hasOpenMenu){this.storyOverlayScheduledStep=null;return}const y=this.scene.get("MenuScene");y&&y.menuManager&&y.menuManager.showStoryOverlay&&y.menuManager.showStoryOverlay("Chapter 1","Welcome! This story overlay will fade after 10 steps."),this.chapter1Shown=!0,this.storyOverlayScheduledStep=null,this.steeringUsed=!0,this.scheduleTutorialUpdate(0)}}onHalfStepEvent(m){this.windowShapes&&this.windowShapes.onHalfStep(m),this.tutorialSystem&&this.tutorialSystem.handleHalfStep(m)}onGamePaused(){console.log("🔄 GameScene: Game paused - calling pauseDriving()"),this.carMechanics.pauseDriving(),console.log("🔄 GameScene: Driving paused:",this.carMechanics.isDrivingPaused())}onGameResumed(){console.log("🔄 GameScene: Game resumed - calling resumeDriving()");const m=this.gameState.getState();if(m.progress===0&&m.carStarted){console.log("🔄 Starting new driving segment - calling startDriving()");const T=m.step||0;this.carMechanics.startDriving(T)}else console.log("🔄 Resuming existing driving segment - calling resumeDriving()"),this.carMechanics.resumeDriving();this.stopMenuOpen=!1,console.log("🔄 GameScene: Driving resumed:",!this.carMechanics.isDrivingPaused())}onSpeedUpdate(m){this.gameUI&&typeof this.gameUI.updateSpeedDisplay=="function"&&this.gameUI.updateSpeedDisplay(m)}onSteeringInput(m,T){if(Math.abs(m)>.1&&(this.steeringUsed=!0,this.scheduleTutorialUpdate(0),this.firstSteeringLoggedStep===null&&(this.firstSteeringLoggedStep=this.gameState.getState().step||0)),!this.carStarted){this.gravityXTarget=0;return}const O=ul.gravity.maxLateralGx;this.gravityXTarget=-(lt.Math.Clamp(m,-150,150)/150)*O,T?.isReturnToCenter||this.carMechanics.handleSteering(m)}onStoryCompleted(m){console.log(`📖 Story completed: ${m.storyline} with outcome: ${m.outcome}`);const T=this.windowShapes.getQueuedNarrativeCount(),O=this.windowShapes.hasActiveNarrativeWindow();if(T>0||O){console.log(`📖 Story completed but ${T} narrative windows in queue and active window: ${O} - waiting for all to clear`),this.setupStoryQueueCompletionListener();return}this.carMechanics.hasPendingDestinationMenu()?(console.log("📖 Story completed, now showing pending destination menu"),this.carMechanics.showPendingDestinationMenu()):this.resumeAfterCyoa()}setupStoryQueueCompletionListener(){const m=()=>{const T=this.windowShapes.getQueuedNarrativeCount(),O=this.windowShapes.hasActiveNarrativeWindow();T===0&&!O?(console.log("📖 Narrative queue and active window are now clear - resuming story completion"),this.carMechanics.hasPendingDestinationMenu()?(console.log("📖 Story completed, now showing pending destination menu"),this.carMechanics.showPendingDestinationMenu()):this.resumeAfterCyoa()):(console.log(`📖 Still waiting: ${T} queued, active window: ${O}`),this.time.delayedCall(100,m))};this.time.delayedCall(100,m)}isPlayerInExitCollisionPath(){if(this.exitDetectionLogCounter||(this.exitDetectionLogCounter=0),this.exitDetectionLogCounter++,!this.carMechanics)return!1;const m=(this.carMechanics.obstacles||[]).filter(I=>{const B=I.getData("isExit"),y=I.getData("isExitPreview");return B&&!y});if(m.length===0)return!1;const T=this.carMechanics.drivingCar?.getBounds();if(!T)return!1;const O=m.some(I=>{const B=I.getData("visual");if(!B)return!1;const y=B.getBounds(),P=y.bottom>this.cameras.main.height*.3;T.bottom,y.top;const i=this.carMechanics.carX,u=this.cameras.main.width*.8,x=i>=u,c=T.width,h=i-c/2,o=i+c/2,r=y.left,a=y.right,d=h<a&&o>r;return P&&x&&d});return m.length>0,O}destroy(){this.physicsSafetyTimer&&(this.physicsSafetyTimer.destroy(),this.physicsSafetyTimer=void 0),this.carMechanics.destroy(),this.tutorialSystem.destroy(),this.gameUI.destroy(),this.inputHandlers.destroy(),this.events.off("step",this.onStepEvent,this),this.events.off("halfStep",this.onHalfStepEvent,this),this.events.off("gamePaused",this.onGamePaused,this),this.events.off("gameResumed",this.onGameResumed,this),this.events.off("turnKey",this.onTurnKey,this),this.events.off("removeKeys",this.onRemoveKeys,this),this.events.off("ignitionMenuShown",this.onIgnitionMenuShown,this),this.events.off("ignitionMenuHidden",this.onIgnitionMenuHidden,this),this.events.off("speedUpdate",this.onSpeedUpdate,this),this.events.off("steeringInput",this.onSteeringInput,this)}turnOffCar(){if(this.carStarted){console.log("Turning off car - carStarted was:",this.carStarted),this.carStarted=!1,this.gameState.updateState({carStarted:!1});try{this.carMechanics.stopDriving()}catch(m){console.log("Error calling stopDriving:",m)}this.gravityXTarget=0,console.log("Car turned off - carStarted is now:",this.carStarted)}}createDebugWindow(){this.debugWindows.forEach(T=>T.destroy()),this.debugWindows=[];const m=this.windowShapes.createRandomTestWindow();this.debugWindows.push(m),m.setDepth(2e3),this.time.delayedCall(3e3,()=>{if(m&&!m.scene)return;m.destroy();const T=this.debugWindows.indexOf(m);T>-1&&this.debugWindows.splice(T,1)}),console.log("Debug window created! Press R again to generate a new one.")}createDebugSpeechBubble(){this.debugWindows.forEach(m=>m.destroy()),this.debugWindows=[],console.log("✨ Story overlay system delegated to StoryManager")}createDebugStoryDialog(){this.debugWindows.forEach(i=>i.destroy()),this.debugWindows=[];const m=this.cameras.main.width,T=this.cameras.main.height,O=Math.floor(m*.85),I=Math.floor(T*.9),B=Math.floor((m-O)/2),y=Math.floor((T-I)/2),P=this.windowShapes.createStoryDialogComposition(B,y,O,I);P?(this.debugWindows.push(P),P.setDepth(2e3),this.time.delayedCall(1e4,()=>{if(P&&!P.scene)return;P.destroy();const i=this.debugWindows.indexOf(P);i>-1&&this.debugWindows.splice(i,1)}),console.log("Debug story dialog created! Click to advance the story, or press H again to generate a new one.")):console.log("Story dialog was queued because another narrative window is active.")}createStoryDialogWithQueue(){const m=this.cameras.main.width,T=this.cameras.main.height,O=Math.floor(m*.95),I=Math.floor(T*.8),B=Math.floor((m-O)/2),y=Math.floor((T-I)/2),P=this.windowShapes.createStoryDialogComposition(B,y,O,I);P?(P.setDepth(12e4),console.log("Story dialog created and displayed immediately")):(console.log("Story dialog queued (another dialog is active)"),console.log(`Queue length: ${this.windowShapes.getQueuedNarrativeCount()}`))}createCYOADialog(){const m=this.cameras.main.width,T=this.cameras.main.height,O=Math.floor(m*.95),I=Math.floor(T*.8),B=Math.floor((m-O)/2),y=Math.floor((T-I)/2),P=["You stand before an ancient crossroads...","Three paths stretch out before you, each shrouded in mystery.","Which path will you choose?"],i=[{text:"Left Path",callback:()=>{console.log("Player chose the Left Path - leads to the forest!")}},{text:"Center Path",callback:()=>{console.log("Player chose the Center Path - leads to the mountain!")}},{text:"Right Path",callback:()=>{console.log("Player chose the Right Path - leads to the sea!")}}],u=this.windowShapes.createCYOADialog(B,y,O,I,P,i);u?(u.setDepth(5e3),console.log("✅ CYOA dialog created with H menu styling")):console.log("CYOA dialog was queued (another narrative is active)")}triggerNextExitMenu(){console.log("🚪 Debug: Triggering next exit menu for testing"),this.carMechanics&&(console.log("🚪 Debug: Pausing driving for exit menu test"),this.carMechanics.pauseDriving());const m=this.scene.get("MenuScene");m?(console.log("🚪 Debug: Emitting showObstacleMenu event with shopCount=3, exitNumber=1"),m.events.emit("showObstacleMenu","exit",3,1),this.scene.bringToTop("MenuScene")):console.warn("🚪 Debug: MenuScene not found - cannot trigger exit menu")}}const cZ={type:lt.AUTO,width:360,height:640,parent:"game",backgroundColor:"#facade",scene:[Wj,Xj,LJ,WJ,XJ,dl],render:{antialias:!0,pixelArt:!1,roundPixels:!1,antialiasGL:!0},scale:{mode:lt.Scale.FIT,autoCenter:lt.Scale.CENTER_BOTH,width:360,height:640,min:{width:180,height:320},max:{width:720,height:1280}},physics:{default:"matter",matter:{gravity:{x:0,y:0},debug:!1}},plugins:{scene:[{key:"rexUI",plugin:Uj,mapping:"rexUI"}]},fps:{target:60,forceSetTimeOut:!0,limit:60,deltaHistory:10},disableContextMenu:!0,powerPreference:"high-performance"};window.__phaserGame||(window.__phaserGame=new lt.Game(cZ));typeof window<"u"&&(window.__ENABLE_TUTORIAL_DEBUG=!0,document.addEventListener("keydown",W=>{if(W.key==="F12"){W.preventDefault();const m=window.__phaserGame;if(m){const T=m.scene.getScene("MenuScene");T&&T.menuManager&&T.menuManager.toggleAudioDebugMenu()}}}));
