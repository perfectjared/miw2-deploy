(function(){const L=document.createElement("link").relList;if(L&&L.supports&&L.supports("modulepreload"))return;for(const K of document.querySelectorAll('link[rel="modulepreload"]'))W(K);new MutationObserver(K=>{for(const j of K)if(j.type==="childList")for(const S of j.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&W(S)}).observe(document,{childList:!0,subtree:!0});function k(K){const j={};return K.integrity&&(j.integrity=K.integrity),K.referrerPolicy&&(j.referrerPolicy=K.referrerPolicy),K.crossOrigin==="use-credentials"?j.credentials="include":K.crossOrigin==="anonymous"?j.credentials="omit":j.credentials="same-origin",j}function W(K){if(K.ep)return;K.ep=!0;const j=k(K);fetch(K.href,j)}})();var EC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wC(ae){return ae&&ae.__esModule&&Object.prototype.hasOwnProperty.call(ae,"default")?ae.default:ae}var bC={exports:{}};(function(ae,L){(function(W,K){ae.exports=K()})(EC,()=>(()=>{var k={50792:S=>{var w=Object.prototype.hasOwnProperty,s="~";function c(){}Object.create&&(c.prototype=Object.create(null),new c().__proto__||(s=!1));function y(n,o,f){this.fn=n,this.context=o,this.once=f||!1}function u(n,o,f,r,d){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new y(f,r||n,d),v=s?s+o:o;return n._events[v]?n._events[v].fn?n._events[v]=[n._events[v],p]:n._events[v].push(p):(n._events[v]=p,n._eventsCount++),n}function h(n,o){--n._eventsCount===0?n._events=new c:delete n._events[o]}function l(){this._events=new c,this._eventsCount=0}l.prototype.eventNames=function(){var o=[],f,r;if(this._eventsCount===0)return o;for(r in f=this._events)w.call(f,r)&&o.push(s?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(f)):o},l.prototype.listeners=function(o){var f=s?s+o:o,r=this._events[f];if(!r)return[];if(r.fn)return[r.fn];for(var d=0,p=r.length,v=new Array(p);d<p;d++)v[d]=r[d].fn;return v},l.prototype.listenerCount=function(o){var f=s?s+o:o,r=this._events[f];return r?r.fn?1:r.length:0},l.prototype.emit=function(o,f,r,d,p,v){var g=s?s+o:o;if(!this._events[g])return!1;var m=this._events[g],T=arguments.length,P,M;if(m.fn){switch(m.once&&this.removeListener(o,m.fn,void 0,!0),T){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,f),!0;case 3:return m.fn.call(m.context,f,r),!0;case 4:return m.fn.call(m.context,f,r,d),!0;case 5:return m.fn.call(m.context,f,r,d,p),!0;case 6:return m.fn.call(m.context,f,r,d,p,v),!0}for(M=1,P=new Array(T-1);M<T;M++)P[M-1]=arguments[M];m.fn.apply(m.context,P)}else{var b=m.length,R;for(M=0;M<b;M++)switch(m[M].once&&this.removeListener(o,m[M].fn,void 0,!0),T){case 1:m[M].fn.call(m[M].context);break;case 2:m[M].fn.call(m[M].context,f);break;case 3:m[M].fn.call(m[M].context,f,r);break;case 4:m[M].fn.call(m[M].context,f,r,d);break;default:if(!P)for(R=1,P=new Array(T-1);R<T;R++)P[R-1]=arguments[R];m[M].fn.apply(m[M].context,P)}}return!0},l.prototype.on=function(o,f,r){return u(this,o,f,r,!1)},l.prototype.once=function(o,f,r){return u(this,o,f,r,!0)},l.prototype.removeListener=function(o,f,r,d){var p=s?s+o:o;if(!this._events[p])return this;if(!f)return h(this,p),this;var v=this._events[p];if(v.fn)v.fn===f&&(!d||v.once)&&(!r||v.context===r)&&h(this,p);else{for(var g=0,m=[],T=v.length;g<T;g++)(v[g].fn!==f||d&&!v[g].once||r&&v[g].context!==r)&&m.push(v[g]);m.length?this._events[p]=m.length===1?m[0]:m:h(this,p)}return this},l.prototype.removeAllListeners=function(o){var f;return o?(f=s?s+o:o,this._events[f]&&h(this,f)):(this._events=new c,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=s,l.EventEmitter=l,S.exports=l},11517:(S,w,s)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(38829),y=function(u,h,l,n){for(var o=u[0],f=1;f<u.length;f++){var r=u[f];c(r,o,h,l,n),o=r}return u};S.exports=y},80318:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66979),y=function(u,h,l,n,o){return c(u,"angle",h,l,n,o)};S.exports=y},60757:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){for(var u=0;u<s.length;u++){var h=s[u];c.call(y,h)}return s};S.exports=w},69927:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){y===void 0&&(y=0);for(var u=y;u<s.length;u++){var h=s[u],l=!0;for(var n in c)h[n]!==c[n]&&(l=!1);if(l)return h}return null};S.exports=w},32265:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){y===void 0&&(y=0);for(var u=s.length-1;u>=y;u--){var h=s[u],l=!0;for(var n in c)h[n]!==c[n]&&(l=!1);if(l)return h}return null};S.exports=w},94420:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(11879),y=s(60461),u=s(95540),h=s(29747),l=s(41481),n=new l({sys:{queueDepthSort:h,events:{once:h}}},0,0,1,1).setOrigin(0,0),o=function(f,r){r===void 0&&(r={});var d=r.hasOwnProperty("width"),p=r.hasOwnProperty("height"),v=u(r,"width",-1),g=u(r,"height",-1),m=u(r,"cellWidth",1),T=u(r,"cellHeight",m),P=u(r,"position",y.TOP_LEFT),M=u(r,"x",0),b=u(r,"y",0),R=0,A=0,D=v*m,G=g*T;n.setPosition(M,b),n.setSize(m,T);for(var F=0;F<f.length;F++)if(c(f[F],n,P),d&&v===-1)n.x+=m;else if(p&&g===-1)n.y+=T;else if(p&&!d){if(A+=T,n.y+=T,A===G&&(A=0,R+=m,n.y=b,n.x+=m,R===D))break}else if(R+=m,n.x+=m,R===D&&(R=0,A+=T,n.x=M,n.y+=T,A===G))break;return f};S.exports=o},41721:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66979),y=function(u,h,l,n,o){return c(u,"alpha",h,l,n,o)};S.exports=y},67285:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66979),y=function(u,h,l,n,o){return c(u,"x",h,l,n,o)};S.exports=y},9074:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66979),y=function(u,h,l,n,o,f,r){return l==null&&(l=h),c(u,"x",h,n,f,r),c(u,"y",l,o,f,r)};S.exports=y},75222:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66979),y=function(u,h,l,n,o){return c(u,"y",h,l,n,o)};S.exports=y},22983:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){y===void 0&&(y=0),u===void 0&&(u=6.28);for(var h=y,l=(u-y)/s.length,n=c.x,o=c.y,f=c.radius,r=0;r<s.length;r++)s[r].x=n+f*Math.cos(h),s[r].y=o+f*Math.sin(h),h+=l;return s};S.exports=w},95253:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){y===void 0&&(y=0),u===void 0&&(u=6.28);for(var h=y,l=(u-y)/s.length,n=c.width/2,o=c.height/2,f=0;f<s.length;f++)s[f].x=c.x+n*Math.cos(h),s[f].y=c.y+o*Math.sin(h),h+=l;return s};S.exports=w},88505:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(15258),y=s(26708),u=function(h,l,n){var o;n?o=y(l,n,h.length):o=c(l,h.length);for(var f=0;f<h.length;f++){var r=h[f],d=o[f];r.x=d.x,r.y=d.y}return h};S.exports=u},41346:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(14649),y=s(86003),u=s(49498),h=function(l,n,o){o===void 0&&(o=0);var f=c(n,!1,l.length);o>0?y(f,o):o<0&&u(f,Math.abs(o));for(var r=0;r<l.length;r++)l[r].x=f[r].x,l[r].y=f[r].y;return l};S.exports=h},11575:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(84993),y=function(u,h,l){var n=c({x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2},l),o=c({x1:h.x2,y1:h.y2,x2:h.x3,y2:h.y3},l),f=c({x1:h.x3,y1:h.y3,x2:h.x1,y2:h.y1},l);n.pop(),o.pop(),f.pop(),n=n.concat(o,f);for(var r=n.length/u.length,d=0,p=0;p<u.length;p++){var v=u[p],g=n[Math.floor(d)];v.x=g.x,v.y=g.y,d+=r}return u};S.exports=y},29953:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){for(var u=0;u<s.length;u++){var h=s[u];h.anims&&h.anims.play(c,y)}return s};S.exports=w},66979:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h,l){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=1);var n,o=0,f=s.length;if(l===1)for(n=h;n<f;n++)s[n][c]+=y+o*u,o++;else for(n=h;n>=0;n--)s[n][c]+=y+o*u,o++;return s};S.exports=w},43967:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h,l){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=1);var n,o=0,f=s.length;if(l===1)for(n=h;n<f;n++)s[n][c]=y+o*u,o++;else for(n=h;n>=0;n--)s[n][c]=y+o*u,o++;return s};S.exports=w},88926:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(28176),y=function(u,h){for(var l=0;l<u.length;l++)c(h,u[l]);return u};S.exports=y},33286:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(24820),y=function(u,h){for(var l=0;l<u.length;l++)c(h,u[l]);return u};S.exports=y},96e3:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(65822),y=function(u,h){for(var l=0;l<u.length;l++)c(h,u[l]);return u};S.exports=y},28789:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26597),y=function(u,h){for(var l=0;l<u.length;l++)c(h,u[l]);return u};S.exports=y},97154:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(90260),y=function(u,h){for(var l=0;l<u.length;l++)c(h,u[l]);return u};S.exports=y},20510:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66979),y=function(u,h,l,n,o){return c(u,"rotation",h,l,n,o)};S.exports=y},91051:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(1163),y=s(20339),u=function(h,l,n){for(var o=l.x,f=l.y,r=0;r<h.length;r++){var d=h[r];c(d,o,f,n,Math.max(1,y(d.x,d.y,o,f)))}return h};S.exports=u},76332:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(1163),y=function(u,h,l,n){var o=h.x,f=h.y;if(n===0)return u;for(var r=0;r<u.length;r++)c(u[r],o,f,l,n);return u};S.exports=y},61619:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66979),y=function(u,h,l,n,o){return c(u,"scaleX",h,l,n,o)};S.exports=y},94868:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66979),y=function(u,h,l,n,o,f,r){return l==null&&(l=h),c(u,"scaleX",h,n,f,r),c(u,"scaleY",l,o,f,r)};S.exports=y},95532:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66979),y=function(u,h,l,n,o){return c(u,"scaleY",h,l,n,o)};S.exports=y},8689:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n,o){return c(u,"alpha",h,l,n,o)};S.exports=y},2645:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n){return c(u,"blendMode",h,0,l,n)};S.exports=y},32372:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n,o){return c(u,"depth",h,l,n,o)};S.exports=y},85373:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){for(var u=0;u<s.length;u++)s[u].setInteractive(c,y);return s};S.exports=w},81583:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n,o,f,r){return l==null&&(l=h),c(u,"originX",h,n,f,r),c(u,"originY",l,o,f,r),u.forEach(function(d){d.updateDisplayOrigin()}),u};S.exports=y},79939:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n,o){return c(u,"rotation",h,l,n,o)};S.exports=y},2699:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n,o,f,r){return l==null&&(l=h),c(u,"scaleX",h,n,f,r),c(u,"scaleY",l,o,f,r)};S.exports=y},98739:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n,o){return c(u,"scaleX",h,l,n,o)};S.exports=y},98476:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n,o){return c(u,"scaleY",h,l,n,o)};S.exports=y},6207:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n,o,f,r){return l==null&&(l=h),c(u,"scrollFactorX",h,n,f,r),c(u,"scrollFactorY",l,o,f,r)};S.exports=y},6607:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n,o){return c(u,"scrollFactorX",h,l,n,o)};S.exports=y},72248:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n,o){return c(u,"scrollFactorY",h,l,n,o)};S.exports=y},14036:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h){for(var l=0;l<s.length;l++)s[l].setTint(c,y,u,h);return s};S.exports=w},50159:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n){return c(u,"visible",h,0,l,n)};S.exports=y},77597:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n,o){return c(u,"x",h,l,n,o)};S.exports=y},83194:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n,o,f,r){return l==null&&(l=h),c(u,"x",h,n,f,r),c(u,"y",l,o,f,r)};S.exports=y},67678:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43967),y=function(u,h,l,n,o){return c(u,"y",h,l,n,o)};S.exports=y},35850:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26099),y=function(u,h,l,n,o){n===void 0&&(n=0),o===void 0&&(o=new c);var f,r,d=u.length;if(d===1)f=u[0].x,r=u[0].y,u[0].x=h,u[0].y=l;else{var p=1,v=0;n===0&&(v=d-1,p=d-2),f=u[v].x,r=u[v].y,u[v].x=h,u[v].y=l;for(var g=0;g<d;g++)if(!(p>=d||p===-1)){var m=u[p],T=m.x,P=m.y;m.x=f,m.y=r,f=T,r=P,n===0?p--:p++}}return o.x=f,o.y=r,o};S.exports=y},8628:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(33680),y=function(u){return c(u)};S.exports=y},21837:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7602),y=function(u,h,l,n,o){o===void 0&&(o=!1);var f=Math.abs(n-l)/u.length,r;if(o)for(r=0;r<u.length;r++)u[r][h]+=c(r*f,l,n);else for(r=0;r<u.length;r++)u[r][h]=c(r*f,l,n);return u};S.exports=y},21910:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(54261),y=function(u,h,l,n,o){o===void 0&&(o=!1);var f=Math.abs(n-l)/u.length,r;if(o)for(r=0;r<u.length;r++)u[r][h]+=c(r*f,l,n);else for(r=0;r<u.length;r++)u[r][h]=c(r*f,l,n);return u};S.exports=y},62054:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h){if(h===void 0&&(h=!1),s.length===0)return s;if(s.length===1)return h?s[0][c]+=(u+y)/2:s[0][c]=(u+y)/2,s;var l=Math.abs(u-y)/(s.length-1),n;if(h)for(n=0;n<s.length;n++)s[n][c]+=n*l+y;else for(n=0;n<s.length;n++)s[n][c]=n*l+y;return s};S.exports=w},79815:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){for(var c=0;c<s.length;c++)s[c].visible=!s[c].visible;return s};S.exports=w},39665:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(15994),y=function(u,h,l){l===void 0&&(l=0);for(var n=0;n<u.length;n++){var o=u[n];o.x=c(o.x,h.left-l,h.right+l),o.y=c(o.y,h.top-l,h.bottom+l)}return u};S.exports=y},61061:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={AlignTo:s(11517),Angle:s(80318),Call:s(60757),GetFirst:s(69927),GetLast:s(32265),GridAlign:s(94420),IncAlpha:s(41721),IncX:s(67285),IncXY:s(9074),IncY:s(75222),PlaceOnCircle:s(22983),PlaceOnEllipse:s(95253),PlaceOnLine:s(88505),PlaceOnRectangle:s(41346),PlaceOnTriangle:s(11575),PlayAnimation:s(29953),PropertyValueInc:s(66979),PropertyValueSet:s(43967),RandomCircle:s(88926),RandomEllipse:s(33286),RandomLine:s(96e3),RandomRectangle:s(28789),RandomTriangle:s(97154),Rotate:s(20510),RotateAround:s(91051),RotateAroundDistance:s(76332),ScaleX:s(61619),ScaleXY:s(94868),ScaleY:s(95532),SetAlpha:s(8689),SetBlendMode:s(2645),SetDepth:s(32372),SetHitArea:s(85373),SetOrigin:s(81583),SetRotation:s(79939),SetScale:s(2699),SetScaleX:s(98739),SetScaleY:s(98476),SetScrollFactor:s(6207),SetScrollFactorX:s(6607),SetScrollFactorY:s(72248),SetTint:s(14036),SetVisible:s(50159),SetX:s(77597),SetXY:s(83194),SetY:s(67678),ShiftPosition:s(35850),Shuffle:s(8628),SmootherStep:s(21910),SmoothStep:s(21837),Spread:s(62054),ToggleVisible:s(79815),WrapInRectangle:s(39665)}},42099:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45319),y=s(83419),u=s(74943),h=s(81957),l=s(41138),n=s(35154),o=s(90126),f=new y({initialize:function(d,p,v){this.manager=d,this.key=p,this.type="frame",this.frames=this.getFrames(d.textureManager,n(v,"frames",[]),n(v,"defaultTextureKey",null),n(v,"sortFrames",!0)),this.frameRate=n(v,"frameRate",null),this.duration=n(v,"duration",null),this.msPerFrame,this.skipMissedFrames=n(v,"skipMissedFrames",!0),this.delay=n(v,"delay",0),this.repeat=n(v,"repeat",0),this.repeatDelay=n(v,"repeatDelay",0),this.yoyo=n(v,"yoyo",!1),this.showBeforeDelay=n(v,"showBeforeDelay",!1),this.showOnStart=n(v,"showOnStart",!1),this.hideOnComplete=n(v,"hideOnComplete",!1),this.randomFrame=n(v,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(u.PAUSE_ALL,this.pause,this),this.manager.on(u.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(r,d,p,v){p===null&&v===null?(r.frameRate=24,r.duration=24/d*1e3):p&&v===null?(r.duration=p,r.frameRate=d/(p/1e3)):(r.frameRate=v,r.duration=d/v*1e3),r.msPerFrame=1e3/r.frameRate},addFrame:function(r){return this.addFrameAt(this.frames.length,r)},addFrameAt:function(r,d){var p=this.getFrames(this.manager.textureManager,d);if(p.length>0){if(r===0)this.frames=p.concat(this.frames);else if(r===this.frames.length)this.frames=this.frames.concat(p);else{var v=this.frames.slice(0,r),g=this.frames.slice(r);this.frames=v.concat(p,g)}this.updateFrameSequence()}return this},checkFrame:function(r){return r>=0&&r<this.frames.length},getFirstTick:function(r){r.accumulator=0,r.nextTick=r.frameRate===r.currentAnim.frameRate&&r.currentFrame.duration||r.msPerFrame},getFrameAt:function(r){return this.frames[r]},getFrames:function(r,d,p,v){v===void 0&&(v=!0);var g=[],m,T,P=1,M,b;if(typeof d=="string"){if(b=d,!r.exists(b))return console.warn('Texture "%s" not found',b),g;var R=r.get(b),A=R.getFrameNames();v&&o(A),d=[],A.forEach(function(z){d.push({key:b,frame:z})})}if(!Array.isArray(d)||d.length===0)return g;for(M=0;M<d.length;M++){var D=d[M],G=n(D,"key",p);if(G){var F=n(D,"frame",0),B=r.getFrame(G,F);if(!B){console.warn('Texture "%s" not found',G);continue}T=new l(G,F,P,B),T.duration=n(D,"duration",0),T.isFirst=!m,m&&(m.nextFrame=T,T.prevFrame=m),g.push(T),m=T,P++}}if(g.length>0){T.isLast=!0,T.nextFrame=g[0],g[0].prevFrame=T;var N=1/(g.length-1);for(M=0;M<g.length;M++)g[M].progress=M*N}return g},getNextTick:function(r){r.accumulator-=r.nextTick,r.nextTick=r.frameRate===r.currentAnim.frameRate&&r.currentFrame.duration||r.msPerFrame},getFrameByProgress:function(r){return r=c(r,0,1),h(r,this.frames,"progress")},nextFrame:function(r){var d=r.currentFrame;d.isLast?r.yoyo?this.handleYoyoFrame(r,!1):r.repeatCounter>0?r.inReverse&&r.forward?r.forward=!1:this.repeatAnimation(r):r.complete():this.updateAndGetNextTick(r,d.nextFrame)},handleYoyoFrame:function(r,d){if(d||(d=!1),r.inReverse===!d&&r.repeatCounter>0){(r.repeatDelay===0||r.pendingRepeat)&&(r.forward=d),this.repeatAnimation(r);return}if(r.inReverse!==d&&r.repeatCounter===0){r.complete();return}r.forward=d;var p=d?r.currentFrame.nextFrame:r.currentFrame.prevFrame;this.updateAndGetNextTick(r,p)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(r){var d=r.currentFrame;d.isFirst?r.yoyo?this.handleYoyoFrame(r,!0):r.repeatCounter>0?r.inReverse&&!r.forward?this.repeatAnimation(r):(r.forward=!0,this.repeatAnimation(r)):r.complete():this.updateAndGetNextTick(r,d.prevFrame)},updateAndGetNextTick:function(r,d){r.setCurrentFrame(d),this.getNextTick(r)},removeFrame:function(r){var d=this.frames.indexOf(r);return d!==-1&&this.removeFrameAt(d),this},removeFrameAt:function(r){return this.frames.splice(r,1),this.updateFrameSequence(),this},repeatAnimation:function(r){if(r._pendingStop===2){if(r._pendingStopValue===0)return r.stop();r._pendingStopValue--}r.repeatDelay>0&&!r.pendingRepeat?(r.pendingRepeat=!0,r.accumulator-=r.nextTick,r.nextTick+=r.repeatDelay):(r.repeatCounter--,r.forward?r.setCurrentFrame(r.currentFrame.nextFrame):r.setCurrentFrame(r.currentFrame.prevFrame),r.isPlaying&&(this.getNextTick(r),r.handleRepeat()))},toJSON:function(){var r={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(d){r.frames.push(d.toJSON())}),r},updateFrameSequence:function(){for(var r=this.frames.length,d=1/(r-1),p,v=0;v<r;v++)p=this.frames[v],p.index=v+1,p.isFirst=!1,p.isLast=!1,p.progress=v*d,v===0?(p.isFirst=!0,r===1?(p.isLast=!0,p.nextFrame=p,p.prevFrame=p):(p.isLast=!1,p.prevFrame=this.frames[r-1],p.nextFrame=this.frames[v+1])):v===r-1&&r>1?(p.isLast=!0,p.prevFrame=this.frames[r-2],p.nextFrame=this.frames[0]):r>1&&(p.prevFrame=this.frames[v-1],p.nextFrame=this.frames[v+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(u.PAUSE_ALL,this.pause,this),this.manager.off(u.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var r=0;r<this.frames.length;r++)this.frames[r].destroy();this.frames=[],this.manager=null}});S.exports=f},41138:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l,n,o,f){f===void 0&&(f=!1),this.textureKey=h,this.textureFrame=l,this.index=n,this.frame=o,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=f},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});S.exports=y},60848:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(42099),y=s(83419),u=s(90330),h=s(50792),l=s(74943),n=s(8443),o=s(95540),f=s(35154),r=s(36383),d=s(20283),p=s(41836),v=new y({Extends:h,initialize:function(m){h.call(this),this.game=m,this.textureManager=null,this.globalTimeScale=1,this.anims=new u,this.mixes=new u,this.paused=!1,this.name="AnimationManager",m.events.once(n.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(n.DESTROY,this.destroy,this)},addMix:function(g,m,T){var P=this.anims,M=this.mixes,b=typeof g=="string"?g:g.key,R=typeof m=="string"?m:m.key;if(P.has(b)&&P.has(R)){var A=M.get(b);A||(A={}),A[R]=T,M.set(b,A)}return this},removeMix:function(g,m){var T=this.mixes,P=typeof g=="string"?g:g.key,M=T.get(P);if(M)if(m){var b=typeof m=="string"?m:m.key;M.hasOwnProperty(b)&&delete M[b]}else m||T.delete(P);return this},getMix:function(g,m){var T=this.mixes,P=typeof g=="string"?g:g.key,M=typeof m=="string"?m:m.key,b=T.get(P);return b&&b.hasOwnProperty(M)?b[M]:0},add:function(g,m){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(m.key=g,this.anims.set(g,m),this.emit(l.ADD_ANIMATION,g,m),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,m,T){var P=[],M=this.game.cache.json.get(g);if(!M)return console.warn("No Aseprite data found for: "+g),P;var b=this,R=f(M,"meta",null),A=f(M,"frames",null);if(R&&A){var D=f(R,"frameTags",[]);D.forEach(function(G){var F=[],B=o(G,"name",null),N=o(G,"from",0),z=o(G,"to",0),$=o(G,"direction","forward");if(B&&(!m||m&&m.indexOf(B)>-1)){for(var Q=0,Z=N;Z<=z;Z++){var tt=Z.toString(),H=A[tt];if(H){var J=o(H,"duration",r.MAX_SAFE_INTEGER);F.push({key:g,frame:tt,duration:J}),Q+=J}}$==="reverse"&&(F=F.reverse());var Y={key:B,frames:F,duration:Q,yoyo:$==="pingpong"},_;T?T.anims&&(_=T.anims.create(Y)):_=b.create(Y),_&&P.push(_)}})}return P},create:function(g){var m=g.key,T=!1;return m&&(T=this.get(m),T?console.warn("AnimationManager key already exists: "+m):(T=new c(this,m,g),this.anims.set(m,T),this.emit(l.ADD_ANIMATION,m,T))),T},fromJSON:function(g,m){m===void 0&&(m=!1),m&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var T=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var P=0;P<g.anims.length;P++)T.push(this.create(g.anims[P]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&T.push(this.create(g));return T},generateFrameNames:function(g,m){var T=f(m,"prefix",""),P=f(m,"start",0),M=f(m,"end",0),b=f(m,"suffix",""),R=f(m,"zeroPad",0),A=f(m,"outputArray",[]),D=f(m,"frames",!1);if(!this.textureManager.exists(g))return console.warn('Texture "%s" not found',g),A;var G=this.textureManager.get(g);if(!G)return A;var F;if(m)for(D||(D=d(P,M)),F=0;F<D.length;F++){var B=T+p(D[F],R,"0",1)+b;G.has(B)?A.push({key:g,frame:B}):console.warn('Frame "%s" not found in texture "%s"',B,g)}else for(D=G.getFrameNames(),F=0;F<D.length;F++)A.push({key:g,frame:D[F]});return A},generateFrameNumbers:function(g,m){var T=f(m,"start",0),P=f(m,"end",-1),M=f(m,"first",!1),b=f(m,"outputArray",[]),R=f(m,"frames",!1);if(!this.textureManager.exists(g))return console.warn('Texture "%s" not found',g),b;var A=this.textureManager.get(g);if(!A)return b;M&&A.has(M)&&b.push({key:g,frame:M}),R||(P===-1&&(P=A.frameTotal-2),R=d(T,P));for(var D=0;D<R.length;D++){var G=R[D];A.has(G)?b.push({key:g,frame:G}):console.warn('Frame "%s" not found in texture "%s"',G,g)}return b},get:function(g){return this.anims.get(g)},getAnimsFromTexture:function(g){for(var m=this.textureManager.get(g),T=m.key,P=this.anims.getArray(),M=[],b=0;b<P.length;b++)for(var R=P[b],A=R.frames,D=0;D<A.length;D++)if(A[D].textureKey===T){M.push(R.key);break}return M},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(l.PAUSE_ALL)),this},play:function(g,m){Array.isArray(m)||(m=[m]);for(var T=0;T<m.length;T++)m[T].anims.play(g);return this},staggerPlay:function(g,m,T,P){T===void 0&&(T=0),P===void 0&&(P=!0),Array.isArray(m)||(m=[m]);var M=m.length;P||M--;for(var b=0;b<m.length;b++){var R=T<0?Math.abs(T)*(M-b):T*b;m[b].anims.playAfterDelay(g,R)}return this},remove:function(g){var m=this.get(g);return m&&(this.emit(l.REMOVE_ANIMATION,g,m),this.anims.delete(g),this.removeMix(g)),m},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(l.RESUME_ALL)),this},toJSON:function(g){var m={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?m.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(T,P){m.anims.push(P.toJSON())}),m},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});S.exports=v},9674:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(42099),y=s(30976),u=s(83419),h=s(90330),l=s(74943),n=s(95540),o=new u({initialize:function(r){this.parent=r,this.animationManager=r.scene.sys.anims,this.animationManager.on(l.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(f){var r=this.parent;if(f===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,r;Array.isArray(f)||(f=[f]);for(var d=0;d<f.length;d++){var p=f[d];this.nextAnim?this.nextAnimsQueue.push(p):this.nextAnim=p}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(f){this.isPlaying&&this.stop();var r=this.animationManager,d=typeof f=="string"?f:n(f,"key",null),p=this.exists(d)?this.get(d):r.get(d);if(!p)console.warn("Missing animation: "+d);else{this.currentAnim=p;var v=p.getTotalFrames(),g=n(f,"frameRate",p.frameRate),m=n(f,"duration",p.duration);p.calculateDuration(this,v,m,g),this.delay=n(f,"delay",p.delay),this.repeat=n(f,"repeat",p.repeat),this.repeatDelay=n(f,"repeatDelay",p.repeatDelay),this.yoyo=n(f,"yoyo",p.yoyo),this.showBeforeDelay=n(f,"showBeforeDelay",p.showBeforeDelay),this.showOnStart=n(f,"showOnStart",p.showOnStart),this.hideOnComplete=n(f,"hideOnComplete",p.hideOnComplete),this.skipMissedFrames=n(f,"skipMissedFrames",p.skipMissedFrames),this.randomFrame=n(f,"randomFrame",p.randomFrame),this.timeScale=n(f,"timeScale",this.timeScale);var T=n(f,"startFrame",0);T>v&&(T=0),this.randomFrame&&(T=y(0,v-1));var P=p.frames[T];T===0&&!this.forward&&(P=p.getLastFrame()),this.currentFrame=P}return this.parent},pause:function(f){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),f!==void 0&&this.setCurrentFrame(f),this.parent},resume:function(f){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),f!==void 0&&this.setCurrentFrame(f),this.parent},playAfterDelay:function(f,r){if(!this.isPlaying)this.delayCounter=r,this.play(f,!0);else{var d=this.nextAnim,p=this.nextAnimsQueue;d&&p.unshift(d),this.nextAnim=f,this._pendingStop=1,this._pendingStopValue=r}return this.parent},playAfterRepeat:function(f,r){if(r===void 0&&(r=1),!this.isPlaying)this.play(f);else{var d=this.nextAnim,p=this.nextAnimsQueue;d&&p.unshift(d),this.repeatCounter!==-1&&r>this.repeatCounter&&(r=this.repeatCounter),this.nextAnim=f,this._pendingStop=2,this._pendingStopValue=r}return this.parent},play:function(f,r){r===void 0&&(r=!1);var d=this.currentAnim,p=this.parent,v=typeof f=="string"?f:f.key;if(r&&this.isPlaying&&d.key===v)return p;if(d&&this.isPlaying){var g=this.animationManager.getMix(d.key,f);if(g>0)return this.playAfterDelay(f,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(f)},playReverse:function(f,r){r===void 0&&(r=!1);var d=typeof f=="string"?f:f.key;return r&&this.isPlaying&&this.currentAnim.key===d?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(f))},startAnimation:function(f){this.load(f);var r=this.currentAnim,d=this.parent;return r&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,r.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),d},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(l.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(l.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(l.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(l.ANIMATION_COMPLETE,l.ANIMATION_COMPLETE_KEY)},emitEvents:function(f,r){var d=this.currentAnim;if(d){var p=this.currentFrame,v=this.parent,g=p.textureFrame;v.emit(f,d,p,v,g),r&&v.emit(r+d.key,d,p,v,g)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var f=this.currentFrame;if(!f)return 0;var r=f.progress;return this.inReverse&&(r*=-1),r},setProgress:function(f){return this.forward||(f=1-f),this.setCurrentFrame(this.currentAnim.getFrameByProgress(f)),this.parent},setRepeat:function(f){return this.repeatCounter=f===-1?Number.MAX_VALUE:f,this.parent},globalRemove:function(f,r){r===void 0&&(r=this.currentAnim),this.isPlaying&&r.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(f,r){f===void 0&&(f=!1),r===void 0&&(r=!1);var d=this.currentAnim,p=this.parent;return d?(r&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),d.getFirstTick(this),this.emitEvents(l.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!f,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(d.frames[0]),this.parent):p},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var f=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(f)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var f=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(f)}return this.parent},stopAfterDelay:function(f){return this._pendingStop=1,this._pendingStopValue=f,this.parent},stopAfterRepeat:function(f){return f===void 0&&(f=1),this.repeatCounter!==-1&&f>this.repeatCounter&&(f=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=f,this.parent},stopOnFrame:function(f){return this._pendingStop=3,this._pendingStopValue=f,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(f,r){var d=this.currentAnim;if(!(!this.isPlaying||!d||d.paused)){if(this.accumulator+=r*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=r,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?d.nextFrame(this):d.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var p=0;do this.forward?d.nextFrame(this):d.previousFrame(this),p++;while(this.isPlaying&&this.accumulator>this.nextTick&&p<60)}}},setCurrentFrame:function(f){var r=this.parent;return this.currentFrame=f,r.texture=f.frame.texture,r.frame=f.frame,r.isCropped&&r.frame.updateCropUVs(r._crop,r.flipX,r.flipY),f.setAlpha&&(r.alpha=f.alpha),r.setSizeToFrame(),r._originComponent&&(f.frame.customPivot?r.setOrigin(f.frame.pivotX,f.frame.pivotY):r.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(l.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===f&&this.stop()),r},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(f){return this.anims?this.anims.get(f):null},exists:function(f){return this.anims?this.anims.has(f):!1},create:function(f){var r=f.key,d=!1;return r&&(d=this.get(r),d?console.warn("Animation key already exists: "+r):(d=new c(this,r,f),this.anims||(this.anims=new h),this.anims.set(r,d))),d},createFromAseprite:function(f,r){return this.animationManager.createFromAseprite(f,r,this.parent)},generateFrameNames:function(f,r){return this.animationManager.generateFrameNames(f,r)},generateFrameNumbers:function(f,r){return this.animationManager.generateFrameNumbers(f,r)},remove:function(f){var r=this.get(f);return r&&(this.currentAnim===r&&this.stop(),this.anims.delete(f)),r},destroy:function(){this.animationManager.off(l.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});S.exports=o},57090:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="add"},25312:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="animationcomplete"},89580:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="animationcomplete-"},52860:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="animationrepeat"},63850:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="animationrestart"},99085:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="animationstart"},28087:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="animationstop"},1794:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="animationupdate"},52562:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pauseall"},57953:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="remove"},68339:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="resumeall"},74943:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={ADD_ANIMATION:s(57090),ANIMATION_COMPLETE:s(25312),ANIMATION_COMPLETE_KEY:s(89580),ANIMATION_REPEAT:s(52860),ANIMATION_RESTART:s(63850),ANIMATION_START:s(99085),ANIMATION_STOP:s(28087),ANIMATION_UPDATE:s(1794),PAUSE_ALL:s(52562),REMOVE_ANIMATION:s(57953),RESUME_ALL:s(68339)}},60421:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Animation:s(42099),AnimationFrame:s(41138),AnimationManager:s(60848),AnimationState:s(9674),Events:s(74943)}},2161:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(90330),u=s(50792),h=s(24736),l=new c({initialize:function(){this.entries=new y,this.events=new u},add:function(n,o){return this.entries.set(n,o),this.events.emit(h.ADD,this,n,o),this},has:function(n){return this.entries.has(n)},exists:function(n){return this.entries.has(n)},get:function(n){return this.entries.get(n)},remove:function(n){var o=this.get(n);return o&&(this.entries.delete(n),this.events.emit(h.REMOVE,this,n,o.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});S.exports=l},24047:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2161),y=s(83419),u=s(8443),h=new y({initialize:function(n){this.game=n,this.binary=new c,this.bitmapFont=new c,this.json=new c,this.physics=new c,this.shader=new c,this.audio=new c,this.video=new c,this.text=new c,this.html=new c,this.obj=new c,this.tilemap=new c,this.xml=new c,this.custom={},this.game.events.once(u.DESTROY,this.destroy,this)},addCustom:function(l){return this.custom.hasOwnProperty(l)||(this.custom[l]=new c),this.custom[l]},destroy:function(){for(var l=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],n=0;n<l.length;n++)this[l[n]].destroy(),this[l[n]]=null;for(var o in this.custom)this.custom[o].destroy();this.custom=null,this.game=null}});S.exports=h},51464:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="add"},59261:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="remove"},24736:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={ADD:s(51464),REMOVE:s(59261)}},83388:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={BaseCache:s(2161),CacheManager:s(24047),Events:s(24736)}},71911:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(31401),u=s(39506),h=s(50792),l=s(19715),n=s(87841),o=s(61340),f=s(80333),r=s(26099),d=new c({Extends:h,Mixins:[y.AlphaSingle,y.Visible],initialize:function(v,g,m,T){v===void 0&&(v=0),g===void 0&&(g=0),m===void 0&&(m=0),T===void 0&&(T=0),h.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new n,this.dirty=!0,this._x=v,this._y=g,this._width=m,this._height=T,this._bounds=new n,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new o,this.transparent=!0,this.backgroundColor=f("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new r(m/2,T/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(p){this.renderList.push(p)},setOrigin:function(p,v){return p===void 0&&(p=.5),v===void 0&&(v=p),this.originX=p,this.originY=v,this},getScroll:function(p,v,g){g===void 0&&(g=new r);var m=this.width*.5,T=this.height*.5;return g.x=p-m,g.y=v-T,this.useBounds&&(g.x=this.clampX(g.x),g.y=this.clampY(g.y)),g},centerOnX:function(p){var v=this.width*.5;return this.midPoint.x=p,this.scrollX=p-v,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(p){var v=this.height*.5;return this.midPoint.y=p,this.scrollY=p-v,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(p,v){return this.centerOnX(p),this.centerOnY(v),this},centerToBounds:function(){if(this.useBounds){var p=this._bounds,v=this.width*.5,g=this.height*.5;this.midPoint.set(p.centerX,p.centerY),this.scrollX=p.centerX-v,this.scrollY=p.centerY-g}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(p){if(this.disableCull)return p;var v=this.matrix.matrix,g=v[0],m=v[1],T=v[2],P=v[3],M=g*P-m*T;if(!M)return p;var b=v[4],R=v[5],A=this.scrollX,D=this.scrollY,G=this.width,F=this.height,B=this.y,N=B+F,z=this.x,$=z+G,Q=this.culledObjects,Z=p.length;M=1/M,Q.length=0;for(var tt=0;tt<Z;++tt){var H=p[tt];if(!H.hasOwnProperty("width")||H.parentContainer){Q.push(H);continue}var J=H.width,Y=H.height,_=H.x-A*H.scrollFactorX-J*H.originX,U=H.y-D*H.scrollFactorY-Y*H.originY,et=_*g+U*T+b,nt=_*m+U*P+R,rt=(_+J)*g+(U+Y)*T+b,ot=(_+J)*m+(U+Y)*P+R;rt>z&&et<$&&ot>B&&nt<N&&Q.push(H)}return Q},getWorldPoint:function(p,v,g){g===void 0&&(g=new r);var m=this.matrix.matrix,T=m[0],P=m[1],M=m[2],b=m[3],R=m[4],A=m[5],D=T*b-P*M;if(!D)return g.x=p,g.y=v,g;D=1/D;var G=b*D,F=-P*D,B=-M*D,N=T*D,z=(M*A-b*R)*D,$=(P*R-T*A)*D,Q=Math.cos(this.rotation),Z=Math.sin(this.rotation),tt=this.zoomX,H=this.zoomY,J=this.scrollX,Y=this.scrollY,_=p+(J*Q-Y*Z)*tt,U=v+(J*Z+Y*Q)*H;return g.x=_*G+U*B+z,g.y=_*F+U*N+$,g},ignore:function(p){var v=this.id;Array.isArray(p)||(p=[p]);for(var g=0;g<p.length;g++){var m=p[g];Array.isArray(m)?this.ignore(m):m.isParent?this.ignore(m.getChildren()):m.cameraFilter|=v}return this},clampX:function(p){var v=this._bounds,g=this.displayWidth,m=v.x+(g-this.width)/2,T=Math.max(m,m+v.width-g);return p<m?p=m:p>T&&(p=T),p},clampY:function(p){var v=this._bounds,g=this.displayHeight,m=v.y+(g-this.height)/2,T=Math.max(m,m+v.height-g);return p<m?p=m:p>T&&(p=T),p},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(p){return p===void 0&&(p=0),this.rotation=u(p),this},setBackgroundColor:function(p){return p===void 0&&(p="rgba(0,0,0,0)"),this.backgroundColor=f(p),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(p,v,g,m,T){return T===void 0&&(T=!1),this._bounds.setTo(p,v,g,m),this.dirty=!0,this.useBounds=!0,T?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(p){p===void 0&&(p=new n);var v=this._bounds;return p.setTo(v.x,v.y,v.width,v.height),p},setName:function(p){return p===void 0&&(p=""),this.name=p,this},setPosition:function(p,v){return v===void 0&&(v=p),this.x=p,this.y=v,this},setRotation:function(p){return p===void 0&&(p=0),this.rotation=p,this},setRoundPixels:function(p){return this.roundPixels=p,this},setScene:function(p,v){v===void 0&&(v=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=p,this.isSceneCamera=v;var g=p.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(p,v){return v===void 0&&(v=p),this.scrollX=p,this.scrollY=v,this},setSize:function(p,v){return v===void 0&&(v=p),this.width=p,this.height=v,this},setViewport:function(p,v,g,m){return this.x=p,this.y=v,this.width=g,this.height=m,this},setZoom:function(p,v){return p===void 0&&(p=1),v===void 0&&(v=p),p===0&&(p=.001),v===0&&(v=.001),this.zoomX=p,this.zoomY=v,this},setMask:function(p,v){return v===void 0&&(v=!0),this.mask=p,this._maskCamera=v?this.cameraManager.default:this,this},clearMask:function(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var p={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(p.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),p},update:function(){},setIsSceneCamera:function(p){return this.isSceneCamera=p,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var p=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,v=this.sceneManager;p&&!this._customViewport?v.customViewports++:!p&&this._customViewport&&v.customViewports--,this.dirty=!0,this._customViewport=p}},destroy:function(){this.emit(l.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(p){this._x=p,this.updateSystem()}},y:{get:function(){return this._y},set:function(p){this._y=p,this.updateSystem()}},width:{get:function(){return this._width},set:function(p){this._width=p,this.updateSystem()}},height:{get:function(){return this._height},set:function(p){this._height=p,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(p){p!==this._scrollX&&(this._scrollX=p,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(p){p!==this._scrollY&&(this._scrollY=p,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(p){this._zoomX=p,this._zoomY=p,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(p){this._zoomX=p,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(p){this._zoomY=p,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});S.exports=d},38058:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(71911),y=s(67502),u=s(45319),h=s(83419),l=s(31401),n=s(20052),o=s(19715),f=s(28915),r=s(87841),d=s(26099),p=new h({Extends:c,Mixins:[l.PostPipeline],initialize:function(g,m,T,P){c.call(this,g,m,T,P),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new n.Fade(this),this.flashEffect=new n.Flash(this),this.shakeEffect=new n.Shake(this),this.panEffect=new n.Pan(this),this.rotateToEffect=new n.RotateTo(this),this.zoomEffect=new n.Zoom(this),this.lerp=new d(1,1),this.followOffset=new d,this.deadzone=null,this._follow=null},setDeadzone:function(v,g){if(v===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=v,this.deadzone.height=g):this.deadzone=new r(0,0,v,g),this._follow){var m=this.width/2,T=this.height/2,P=this._follow.x-this.followOffset.x,M=this._follow.y-this.followOffset.y;this.midPoint.set(P,M),this.scrollX=P-m,this.scrollY=M-T}y(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(v,g,m,T,P,M){return this.fadeEffect.start(!1,v,g,m,T,!0,P,M)},fadeOut:function(v,g,m,T,P,M){return this.fadeEffect.start(!0,v,g,m,T,!0,P,M)},fadeFrom:function(v,g,m,T,P,M,b){return this.fadeEffect.start(!1,v,g,m,T,P,M,b)},fade:function(v,g,m,T,P,M,b){return this.fadeEffect.start(!0,v,g,m,T,P,M,b)},flash:function(v,g,m,T,P,M,b){return this.flashEffect.start(v,g,m,T,P,M,b)},shake:function(v,g,m,T,P){return this.shakeEffect.start(v,g,m,T,P)},pan:function(v,g,m,T,P,M,b){return this.panEffect.start(v,g,m,T,P,M,b)},rotateTo:function(v,g,m,T,P,M,b){return this.rotateToEffect.start(v,g,m,T,P,M,b)},zoomTo:function(v,g,m,T,P,M){return this.zoomEffect.start(v,g,m,T,P,M)},preRender:function(){this.renderList.length=0;var v=this.width,g=this.height,m=v*.5,T=g*.5,P=this.zoomX,M=this.zoomY,b=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(P)&&Number.isInteger(M);var R=v*this.originX,A=g*this.originY,D=this._follow,G=this.deadzone,F=this.scrollX,B=this.scrollY;G&&y(G,this.midPoint.x,this.midPoint.y);var N=!1;if(D&&!this.panEffect.isRunning){var z=this.lerp,$=D.x-this.followOffset.x,Q=D.y-this.followOffset.y;G?($<G.x?F=f(F,F-(G.x-$),z.x):$>G.right&&(F=f(F,F+($-G.right),z.x)),Q<G.y?B=f(B,B-(G.y-Q),z.y):Q>G.bottom&&(B=f(B,B+(Q-G.bottom),z.y))):(F=f(F,$-R,z.x),B=f(B,Q-A,z.y)),N=!0}this.roundPixels&&(F=Math.floor(F),B=Math.floor(B)),this.useBounds&&(F=this.clampX(F),B=this.clampY(B)),this.scrollX=F,this.scrollY=B;var Z=F+m,tt=B+T;this.midPoint.set(Z,tt);var H=Math.floor(v/P+.5),J=Math.floor(g/M+.5),Y=Math.floor(Z-H/2+.5),_=Math.floor(tt-J/2+.5);this.worldView.setTo(Y,_,H,J),b.applyITRS(Math.floor(this.x+R+.5),Math.floor(this.y+A+.5),this.rotation,P,M),b.translate(-R,-A),this.shakeEffect.preRender(),N&&this.emit(o.FOLLOW_UPDATE,this,D)},setLerp:function(v,g){return v===void 0&&(v=1),g===void 0&&(g=v),this.lerp.set(v,g),this},setFollowOffset:function(v,g){return v===void 0&&(v=0),g===void 0&&(g=0),this.followOffset.set(v,g),this},startFollow:function(v,g,m,T,P,M){g===void 0&&(g=!1),m===void 0&&(m=1),T===void 0&&(T=m),P===void 0&&(P=0),M===void 0&&(M=P),this._follow=v,this.roundPixels=g,m=u(m,0,1),T=u(T,0,1),this.lerp.set(m,T),this.followOffset.set(P,M);var b=this.width/2,R=this.height/2,A=v.x-P,D=v.y-M;return this.midPoint.set(A,D),this.scrollX=A-b,this.scrollY=D-R,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(v,g){this.visible&&(this.rotateToEffect.update(v,g),this.panEffect.update(v,g),this.zoomEffect.update(v,g),this.shakeEffect.update(v,g),this.flashEffect.update(v,g),this.fadeEffect.update(v,g))},destroy:function(){this.resetFX(),c.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});S.exports=p},32743:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(38058),y=s(83419),u=s(95540),h=s(37277),l=s(37303),n=s(97480),o=s(44594),f=new y({initialize:function(d){this.scene=d,this.systems=d.sys,this.roundPixels=d.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,d.sys.events.once(o.BOOT,this.boot,this),d.sys.events.on(o.START,this.start,this)},boot:function(){var r=this.systems;r.settings.cameras?this.fromJSON(r.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new c(0,0,r.scale.width,r.scale.height).setScene(this.scene),r.game.scale.on(n.RESIZE,this.onResize,this),this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){if(!this.main){var r=this.systems;r.settings.cameras?this.fromJSON(r.settings.cameras):this.add(),this.main=this.cameras[0]}var d=this.systems.events;d.on(o.UPDATE,this.update,this),d.once(o.SHUTDOWN,this.shutdown,this)},add:function(r,d,p,v,g,m){r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),g===void 0&&(g=!1),m===void 0&&(m="");var T=new c(r,d,p,v);return T.setName(m),T.setScene(this.scene),T.setRoundPixels(this.roundPixels),T.id=this.getNextID(),this.cameras.push(T),g&&(this.main=T),T},addExisting:function(r,d){d===void 0&&(d=!1);var p=this.cameras.indexOf(r);return p===-1?(r.id=this.getNextID(),r.setRoundPixels(this.roundPixels),this.cameras.push(r),d&&(this.main=r),r):null},getNextID:function(){for(var r=this.cameras,d=1,p=0;p<32;p++){for(var v=!1,g=0;g<r.length;g++){var m=r[g];if(m&&m.id===d){v=!0;continue}}if(v)d=d<<1;else return d}return 0},getTotal:function(r){r===void 0&&(r=!1);for(var d=0,p=this.cameras,v=0;v<p.length;v++){var g=p[v];(!r||r&&g.visible)&&d++}return d},fromJSON:function(r){Array.isArray(r)||(r=[r]);for(var d=this.scene.sys.scale.width,p=this.scene.sys.scale.height,v=0;v<r.length;v++){var g=r[v],m=u(g,"x",0),T=u(g,"y",0),P=u(g,"width",d),M=u(g,"height",p),b=this.add(m,T,P,M);b.name=u(g,"name",""),b.zoom=u(g,"zoom",1),b.rotation=u(g,"rotation",0),b.scrollX=u(g,"scrollX",0),b.scrollY=u(g,"scrollY",0),b.roundPixels=u(g,"roundPixels",!1),b.visible=u(g,"visible",!0);var R=u(g,"backgroundColor",!1);R&&b.setBackgroundColor(R);var A=u(g,"bounds",null);if(A){var D=u(A,"x",0),G=u(A,"y",0),F=u(A,"width",d),B=u(A,"height",p);b.setBounds(D,G,F,B)}}return this},getCamera:function(r){for(var d=this.cameras,p=0;p<d.length;p++)if(d[p].name===r)return d[p];return null},getCamerasBelowPointer:function(r){for(var d=this.cameras,p=r.x,v=r.y,g=[],m=0;m<d.length;m++){var T=d[m];T.visible&&T.inputEnabled&&l(T,p,v)&&g.unshift(T)}return g},remove:function(r,d){d===void 0&&(d=!0),Array.isArray(r)||(r=[r]);for(var p=0,v=this.cameras,g=0;g<r.length;g++){var m=v.indexOf(r[g]);m!==-1&&(d?v[m].destroy():v[m].renderList=[],v.splice(m,1),p++)}return!this.main&&v[0]&&(this.main=v[0]),p},render:function(r,d){for(var p=this.scene,v=this.cameras,g=0;g<v.length;g++){var m=v[g];if(m.visible&&m.alpha>0){m.preRender();var T=this.getVisibleChildren(d.getChildren(),m);r.render(p,T,m)}}},getVisibleChildren:function(r,d){return r.filter(function(p){return p.willRender(d)})},resetAll:function(){for(var r=0;r<this.cameras.length;r++)this.cameras[r].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(r,d){for(var p=0;p<this.cameras.length;p++)this.cameras[p].update(r,d)},onResize:function(r,d,p,v,g){for(var m=0;m<this.cameras.length;m++){var T=this.cameras[m];T._x===0&&T._y===0&&T._width===v&&T._height===g&&T.setSize(d.width,d.height)}},resize:function(r,d){for(var p=0;p<this.cameras.length;p++)this.cameras[p].setSize(r,d)},shutdown:function(){this.main=void 0;for(var r=0;r<this.cameras.length;r++)this.cameras[r].destroy();this.cameras=[];var d=this.systems.events;d.off(o.UPDATE,this.update,this),d.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(o.START,this.start,this),this.systems.events.off(o.DESTROY,this.destroy,this),this.systems.game.scale.off(n.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});h.register("CameraManager",f,"cameras"),S.exports=f},5020:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45319),y=s(83419),u=s(19715),h=new y({initialize:function(n){this.camera=n,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,n,o,f,r,d,p,v){if(l===void 0&&(l=!0),n===void 0&&(n=1e3),o===void 0&&(o=0),f===void 0&&(f=0),r===void 0&&(r=0),d===void 0&&(d=!1),p===void 0&&(p=null),v===void 0&&(v=this.camera.scene),!d&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=n,this.direction=l,this.progress=0,this.red=o,this.green=f,this.blue=r,this.alpha=l?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=v;var g=l?u.FADE_OUT_START:u.FADE_IN_START;return this.camera.emit(g,this.camera,this,n,o,f,r),this.camera},update:function(l,n){this.isRunning&&(this._elapsed+=n,this.progress=c(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(l){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(l,n){if(!this.isRunning&&!this.isComplete)return!1;var o=this.camera,f=this.red/255,r=this.green/255,d=this.blue/255;return l.drawFillRect(o.x,o.y,o.width,o.height,n(d,r,f,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var l=this.direction?u.FADE_OUT_COMPLETE:u.FADE_IN_COMPLETE;this.camera.emit(l,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});S.exports=h},10662:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45319),y=s(83419),u=s(19715),h=new y({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(l,n,o,f,r,d,p){return l===void 0&&(l=250),n===void 0&&(n=255),o===void 0&&(o=255),f===void 0&&(f=255),r===void 0&&(r=!1),d===void 0&&(d=null),p===void 0&&(p=this.camera.scene),!r&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=l,this.progress=0,this.red=n,this.green=o,this.blue=f,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=d,this._onUpdateScope=p,this.camera.emit(u.FLASH_START,this.camera,this,l,n,o,f),this.camera)},update:function(l,n){this.isRunning&&(this._elapsed+=n,this.progress=c(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(l){if(!this.isRunning)return!1;var n=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(l,n){if(!this.isRunning)return!1;var o=this.camera,f=this.red/255,r=this.green/255,d=this.blue/255;return l.drawFillRect(o.x,o.y,o.width,o.height,n(d,r,f,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});S.exports=h},20359:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45319),y=s(83419),u=s(62640),h=s(19715),l=s(26099),n=new y({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.source=new l,this.current=new l,this.destination=new l,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,f,r,d,p,v,g){r===void 0&&(r=1e3),d===void 0&&(d=u.Linear),p===void 0&&(p=!1),v===void 0&&(v=null),g===void 0&&(g=this.camera.scene);var m=this.camera;return!p&&this.isRunning||(this.isRunning=!0,this.duration=r,this.progress=0,this.source.set(m.scrollX,m.scrollY),this.destination.set(o,f),m.getScroll(o,f,this.current),typeof d=="string"&&u.hasOwnProperty(d)?this.ease=u[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=g,this.camera.emit(h.PAN_START,this.camera,this,r,o,f)),m},update:function(o,f){if(this.isRunning){this._elapsed+=f;var r=c(this._elapsed/this.duration,0,1);this.progress=r;var d=this.camera;if(this._elapsed<this.duration){var p=this.ease(r);d.getScroll(this.destination.x,this.destination.y,this.current);var v=this.source.x+(this.current.x-this.source.x)*p,g=this.source.y+(this.current.y-this.source.y)*p;d.setScroll(v,g),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,r,v,g)}else d.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,r,d.scrollX,d.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});S.exports=n},34208:(S,w,s)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var c=s(45319),y=s(83419),u=s(19715),h=s(62640),l=new y({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(n,o,f,r,d,p,v){f===void 0&&(f=1e3),r===void 0&&(r=h.Linear),d===void 0&&(d=!1),p===void 0&&(p=null),v===void 0&&(v=this.camera.scene),o===void 0&&(o=!1),this.shortestPath=o;var g=n;n<0?(g=-1*n,this.clockwise=!1):this.clockwise=!0;var m=360*Math.PI/180;g=g-Math.floor(g/m)*m;var T=this.camera;if(!d&&this.isRunning)return T;if(this.isRunning=!0,this.duration=f,this.progress=0,this.source=T.rotation,this.destination=g,typeof r=="string"&&h.hasOwnProperty(r)?this.ease=h[r]:typeof r=="function"&&(this.ease=r),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=v,this.shortestPath){var P=0,M=0;this.destination>this.source?P=Math.abs(this.destination-this.source):P=Math.abs(this.destination+m)-this.source,this.source>this.destination?M=Math.abs(this.source-this.destination):M=Math.abs(this.source+m)-this.destination,P<M?this.clockwise=!0:P>M&&(this.clockwise=!1)}return this.camera.emit(u.ROTATE_START,this.camera,this,f,g),T},update:function(n,o){if(this.isRunning){this._elapsed+=o;var f=c(this._elapsed/this.duration,0,1);this.progress=f;var r=this.camera;if(this._elapsed<this.duration){var d=this.ease(f);this.current=r.rotation;var p=0,v=360*Math.PI/180,g=this.destination,m=this.current;this.clockwise===!1&&(g=this.current,m=this.destination),g>=m?p=Math.abs(g-m):p=Math.abs(g+v)-m;var T=0;this.clockwise?T=r.rotation+p*d:T=r.rotation-p*d,r.rotation=T,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,f,T)}else r.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,r,f,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});S.exports=l},30330:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45319),y=s(83419),u=s(19715),h=s(26099),l=new y({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.intensity=new h,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(n,o,f,r,d){return n===void 0&&(n=100),o===void 0&&(o=.05),f===void 0&&(f=!1),r===void 0&&(r=null),d===void 0&&(d=this.camera.scene),!f&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=n,this.progress=0,typeof o=="number"?this.intensity.set(o):this.intensity.set(o.x,o.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=r,this._onUpdateScope=d,this.camera.emit(u.SHAKE_START,this.camera,this,n,o),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(n,o){if(this.isRunning)if(this._elapsed+=o,this.progress=c(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var f=this.intensity,r=this.camera.width,d=this.camera.height,p=this.camera.zoom;this._offsetX=(Math.random()*f.x*r*2-f.x*r)*p,this._offsetY=(Math.random()*f.y*d*2-f.y*d)*p,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});S.exports=l},45641:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45319),y=s(83419),u=s(62640),h=s(19715),l=new y({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,o,f,r,d,p){o===void 0&&(o=1e3),f===void 0&&(f=u.Linear),r===void 0&&(r=!1),d===void 0&&(d=null),p===void 0&&(p=this.camera.scene);var v=this.camera;return!r&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source=v.zoom,this.destination=n,typeof f=="string"&&u.hasOwnProperty(f)?this.ease=u[f]:typeof f=="function"&&(this.ease=f),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=p,this.camera.emit(h.ZOOM_START,this.camera,this,o,n)),v},update:function(n,o){this.isRunning&&(this._elapsed+=o,this.progress=c(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});S.exports=l},20052:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Fade:s(5020),Flash:s(10662),Pan:s(20359),Shake:s(30330),RotateTo:s(34208),Zoom:s(45641)}},16438:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="cameradestroy"},32726:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="camerafadeincomplete"},87807:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="camerafadeinstart"},45917:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="camerafadeoutcomplete"},95666:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="camerafadeoutstart"},47056:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="cameraflashcomplete"},91261:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="cameraflashstart"},45047:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="followupdate"},81927:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="camerapancomplete"},74264:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="camerapanstart"},54419:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="postrender"},79330:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="prerender"},93183:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="camerarotatecomplete"},80112:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="camerarotatestart"},62252:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="camerashakecomplete"},86017:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="camerashakestart"},539:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="camerazoomcomplete"},51892:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="camerazoomstart"},19715:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={DESTROY:s(16438),FADE_IN_COMPLETE:s(32726),FADE_IN_START:s(87807),FADE_OUT_COMPLETE:s(45917),FADE_OUT_START:s(95666),FLASH_COMPLETE:s(47056),FLASH_START:s(91261),FOLLOW_UPDATE:s(45047),PAN_COMPLETE:s(81927),PAN_START:s(74264),POST_RENDER:s(54419),PRE_RENDER:s(79330),ROTATE_COMPLETE:s(93183),ROTATE_START:s(80112),SHAKE_COMPLETE:s(62252),SHAKE_START:s(86017),ZOOM_COMPLETE:s(539),ZOOM_START:s(51892)}},87969:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Camera:s(38058),BaseCamera:s(71911),CameraManager:s(32743),Effects:s(20052),Events:s(19715)}},63091:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(35154),u=new c({initialize:function(l){this.camera=y(l,"camera",null),this.left=y(l,"left",null),this.right=y(l,"right",null),this.up=y(l,"up",null),this.down=y(l,"down",null),this.zoomIn=y(l,"zoomIn",null),this.zoomOut=y(l,"zoomOut",null),this.zoomSpeed=y(l,"zoomSpeed",.01),this.minZoom=y(l,"minZoom",.001),this.maxZoom=y(l,"maxZoom",1e3),this.speedX=0,this.speedY=0;var n=y(l,"speed",null);typeof n=="number"?(this.speedX=n,this.speedY=n):(this.speedX=y(l,"speed.x",0),this.speedY=y(l,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(this.active){h===void 0&&(h=1);var l=this.camera;this.up&&this.up.isDown?l.scrollY-=this.speedY*h|0:this.down&&this.down.isDown&&(l.scrollY+=this.speedY*h|0),this.left&&this.left.isDown?l.scrollX-=this.speedX*h|0:this.right&&this.right.isDown&&(l.scrollX+=this.speedX*h|0),this.zoomIn&&this.zoomIn.isDown?(l.zoom-=this.zoomSpeed,l.zoom<this.minZoom&&(l.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(l.zoom+=this.zoomSpeed,l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});S.exports=u},58818:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(35154),u=new c({initialize:function(l){this.camera=y(l,"camera",null),this.left=y(l,"left",null),this.right=y(l,"right",null),this.up=y(l,"up",null),this.down=y(l,"down",null),this.zoomIn=y(l,"zoomIn",null),this.zoomOut=y(l,"zoomOut",null),this.zoomSpeed=y(l,"zoomSpeed",.01),this.minZoom=y(l,"minZoom",.001),this.maxZoom=y(l,"maxZoom",1e3),this.accelX=0,this.accelY=0;var n=y(l,"acceleration",null);typeof n=="number"?(this.accelX=n,this.accelY=n):(this.accelX=y(l,"acceleration.x",0),this.accelY=y(l,"acceleration.y",0)),this.dragX=0,this.dragY=0;var o=y(l,"drag",null);typeof o=="number"?(this.dragX=o,this.dragY=o):(this.dragX=y(l,"drag.x",0),this.dragY=y(l,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var f=y(l,"maxSpeed",null);typeof f=="number"?(this.maxSpeedX=f,this.maxSpeedY=f):(this.maxSpeedX=y(l,"maxSpeed.x",0),this.maxSpeedY=y(l,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(this.active){h===void 0&&(h=1);var l=this.camera;this._speedX>0?(this._speedX-=this.dragX*h,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*h,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*h,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*h,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(l.scrollX-=this._speedX*h|0),this._speedY!==0&&(l.scrollY-=this._speedY*h|0),this._zoom!==0&&(l.zoom+=this._zoom,l.zoom<this.minZoom?l.zoom=this.minZoom:l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});S.exports=u},38865:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={FixedKeyControl:s(63091),SmoothedKeyControl:s(58818)}},26638:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Controls:s(38865),Scene2D:s(87969)}},8054:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c={VERSION:"3.90.0",LOG_VERSION:"v390",BlendModes:s(10312),ScaleModes:s(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};S.exports=c},69547:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(8054),u=s(42363),h=s(82264),l=s(95540),n=s(35154),o=s(41212),f=s(29747),r=s(75508),d=s(36060),p=s(80333),v=new c({initialize:function(m){m===void 0&&(m={});var T=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],P="#ffffff",M=n(m,"scale",null);this.width=n(M,"width",1024,m),this.height=n(M,"height",768,m),this.zoom=n(M,"zoom",1,m),this.parent=n(M,"parent",void 0,m),this.scaleMode=n(M,M?"mode":"scaleMode",0,m),this.expandParent=n(M,"expandParent",!0,m),this.autoRound=n(M,"autoRound",!1,m),this.autoCenter=n(M,"autoCenter",0,m),this.resizeInterval=n(M,"resizeInterval",500,m),this.fullscreenTarget=n(M,"fullscreenTarget",null,m),this.minWidth=n(M,"min.width",0,m),this.maxWidth=n(M,"max.width",0,m),this.minHeight=n(M,"min.height",0,m),this.maxHeight=n(M,"max.height",0,m),this.snapWidth=n(M,"snap.width",0,m),this.snapHeight=n(M,"snap.height",0,m),this.renderType=n(m,"type",y.AUTO),this.canvas=n(m,"canvas",null),this.context=n(m,"context",null),this.canvasStyle=n(m,"canvasStyle",null),this.customEnvironment=n(m,"customEnvironment",!1),this.sceneConfig=n(m,"scene",null),this.seed=n(m,"seed",[(Date.now()*Math.random()).toString()]),r.RND=new r.RandomDataGenerator(this.seed),this.gameTitle=n(m,"title",""),this.gameURL=n(m,"url","https://phaser.io/"+y.LOG_VERSION),this.gameVersion=n(m,"version",""),this.autoFocus=n(m,"autoFocus",!0),this.stableSort=n(m,"stableSort",-1),this.stableSort===-1&&(this.stableSort=h.browser.es2019?1:0),h.features.stableSort=this.stableSort,this.domCreateContainer=n(m,"dom.createContainer",!1),this.domPointerEvents=n(m,"dom.pointerEvents","none"),this.inputKeyboard=n(m,"input.keyboard",!0),this.inputKeyboardEventTarget=n(m,"input.keyboard.target",window),this.inputKeyboardCapture=n(m,"input.keyboard.capture",[]),this.inputMouse=n(m,"input.mouse",!0),this.inputMouseEventTarget=n(m,"input.mouse.target",null),this.inputMousePreventDefaultDown=n(m,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=n(m,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=n(m,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=n(m,"input.mouse.preventDefaultWheel",!0),this.inputTouch=n(m,"input.touch",h.input.touch),this.inputTouchEventTarget=n(m,"input.touch.target",null),this.inputTouchCapture=n(m,"input.touch.capture",!0),this.inputActivePointers=n(m,"input.activePointers",1),this.inputSmoothFactor=n(m,"input.smoothFactor",0),this.inputWindowEvents=n(m,"input.windowEvents",!0),this.inputGamepad=n(m,"input.gamepad",!1),this.inputGamepadEventTarget=n(m,"input.gamepad.target",window),this.disableContextMenu=n(m,"disableContextMenu",!1),this.audio=n(m,"audio",{}),this.hideBanner=n(m,"banner",null)===!1,this.hidePhaser=n(m,"banner.hidePhaser",!1),this.bannerTextColor=n(m,"banner.text",P),this.bannerBackgroundColor=n(m,"banner.background",T),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=n(m,"fps",null),this.disablePreFX=n(m,"disablePreFX",!1),this.disablePostFX=n(m,"disablePostFX",!1);var b=n(m,"render",null);this.pipeline=n(b,"pipeline",null,m),this.autoMobilePipeline=n(b,"autoMobilePipeline",!0,m),this.defaultPipeline=n(b,"defaultPipeline",d.MULTI_PIPELINE,m),this.antialias=n(b,"antialias",!0,m),this.antialiasGL=n(b,"antialiasGL",!0,m),this.mipmapFilter=n(b,"mipmapFilter","",m),this.desynchronized=n(b,"desynchronized",!1,m),this.roundPixels=n(b,"roundPixels",!1,m),this.pixelArt=n(b,"pixelArt",this.zoom!==1,m),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=n(b,"transparent",!1,m),this.clearBeforeRender=n(b,"clearBeforeRender",!0,m),this.preserveDrawingBuffer=n(b,"preserveDrawingBuffer",!1,m),this.premultipliedAlpha=n(b,"premultipliedAlpha",!0,m),this.failIfMajorPerformanceCaveat=n(b,"failIfMajorPerformanceCaveat",!1,m),this.powerPreference=n(b,"powerPreference","default",m),this.batchSize=n(b,"batchSize",4096,m),this.maxTextures=n(b,"maxTextures",-1,m),this.maxLights=n(b,"maxLights",10,m);var R=n(m,"backgroundColor",0);this.backgroundColor=p(R),this.transparent&&(this.backgroundColor=p(0),this.backgroundColor.alpha=0),this.preBoot=n(m,"callbacks.preBoot",f),this.postBoot=n(m,"callbacks.postBoot",f),this.physics=n(m,"physics",{}),this.defaultPhysicsSystem=n(this.physics,"default",!1),this.loaderBaseURL=n(m,"loader.baseURL",""),this.loaderPath=n(m,"loader.path",""),this.loaderMaxParallelDownloads=n(m,"loader.maxParallelDownloads",h.os.android?6:32),this.loaderCrossOrigin=n(m,"loader.crossOrigin",void 0),this.loaderResponseType=n(m,"loader.responseType",""),this.loaderAsync=n(m,"loader.async",!0),this.loaderUser=n(m,"loader.user",""),this.loaderPassword=n(m,"loader.password",""),this.loaderTimeout=n(m,"loader.timeout",0),this.loaderMaxRetries=n(m,"loader.maxRetries",2),this.loaderWithCredentials=n(m,"loader.withCredentials",!1),this.loaderImageLoadType=n(m,"loader.imageLoadType","XHR"),this.loaderLocalScheme=n(m,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=n(m,"fx.glow.quality",.1),this.glowFXDistance=n(m,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var A=n(m,"plugins",null),D=u.DefaultScene;A&&(Array.isArray(A)?this.defaultPlugins=A:o(A)&&(this.installGlobalPlugins=l(A,"global",[]),this.installScenePlugins=l(A,"scene",[]),Array.isArray(A.default)?D=A.default:Array.isArray(A.defaultMerge)&&(D=D.concat(A.defaultMerge)))),this.defaultPlugins=D;var G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=n(m,"images.default",G+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=n(m,"images.missing",G+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=n(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=y.WEBGL:window.FORCE_CANVAS&&(this.renderType=y.CANVAS))}});S.exports=v},86054:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(20623),y=s(27919),u=s(8054),h=s(89357),l=function(n){var o=n.config;if((o.customEnvironment||o.canvas)&&o.renderType===u.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!o.customEnvironment&&!o.canvas&&o.renderType!==u.HEADLESS)if(o.renderType===u.AUTO&&(o.renderType=h.webGL?u.WEBGL:u.CANVAS),o.renderType===u.WEBGL){if(!h.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(o.renderType===u.CANVAS){if(!h.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+o.renderType);o.antialias||y.disableSmoothing();var f=n.scale.baseSize,r=f.width,d=f.height;if(o.canvas?(n.canvas=o.canvas,n.canvas.width=r,n.canvas.height=d):n.canvas=y.create(n,r,d,o.renderType),o.canvasStyle&&(n.canvas.style=o.canvasStyle),o.antialias||c.setCrisp(n.canvas),o.renderType!==u.HEADLESS){var p,v;p=s(68627),v=s(74797),o.renderType===u.WEBGL?n.renderer=new v(n):(n.renderer=new p(n),n.context=n.renderer.gameContext)}};S.exports=l},96391:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(8054),y=function(u){var h=u.config;if(!h.hideBanner){var l="WebGL";h.renderType===c.CANVAS?l="Canvas":h.renderType===c.HEADLESS&&(l="Headless");var n=h.audio,o=u.device.audio,f;if(o.webAudio&&!n.disableWebAudio?f="Web Audio":n.noAudio||!o.webAudio&&!o.audioData?f="No Audio":f="HTML5 Audio",u.device.browser.ie)window.console&&console.log("Phaser v"+c.VERSION+" / https://phaser.io");else{var r="",d=[r];if(Array.isArray(h.bannerBackgroundColor)){var p;h.bannerBackgroundColor.forEach(function(g){r=r.concat("%c "),d.push("background: "+g),p=g}),d[d.length-1]="color: "+h.bannerTextColor+"; background: "+p}else r=r.concat("%c "),d.push("color: "+h.bannerTextColor+"; background: "+h.bannerBackgroundColor);d.push("background: transparent"),h.gameTitle&&(r=r.concat(h.gameTitle),h.gameVersion&&(r=r.concat(" v"+h.gameVersion)),h.hidePhaser||(r=r.concat(" / ")));var v="";h.hidePhaser||(r=r.concat("Phaser v"+c.VERSION+v+" ("+l+" | "+f+")")),r=r.concat(" %c "+h.gameURL),d[0]=r,console.log.apply(console,d)}}};S.exports=y},50127:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(40366),y=s(60848),u=s(24047),h=s(27919),l=s(83419),n=s(69547),o=s(83719),f=s(86054),r=s(45893),d=s(96391),p=s(82264),v=s(57264),g=s(50792),m=s(8443),T=s(7003),P=s(37277),M=s(77332),b=s(76531),R=s(60903),A=s(69442),D=s(17130),G=s(65898),F=s(51085),B=s(14747),N=new l({initialize:function($){this.config=new n($),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new g,this.anims=new y(this),this.textures=new D(this),this.cache=new u(this),this.registry=new r(this,new g),this.input=new T(this,this.config),this.scene=new R(this,this.config.sceneConfig),this.device=p,this.scale=new b(this,this.config),this.sound=null,this.sound=B.create(this),this.loop=new G(this,this.config.fps),this.plugins=new M(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,v(this.boot.bind(this))},boot:function(){if(!P.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),f(this),o(this),d(this),c(this.canvas,this.config.parent),this.textures.once(A.READY,this.texturesReady,this),this.events.emit(m.BOOT)},texturesReady:function(){this.events.emit(m.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),F(this);var z=this.events;z.on(m.HIDDEN,this.onHidden,this),z.on(m.VISIBLE,this.onVisible,this),z.on(m.BLUR,this.onBlur,this),z.on(m.FOCUS,this.onFocus,this)},step:function(z,$){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Q=this.events;Q.emit(m.PRE_STEP,z,$),Q.emit(m.STEP,z,$),this.scene.update(z,$),Q.emit(m.POST_STEP,z,$);var Z=this.renderer;Z.preRender(),Q.emit(m.PRE_RENDER,Z,z,$),this.scene.render(Z),Z.postRender(),Q.emit(m.POST_RENDER,Z,z,$)}},headlessStep:function(z,$){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Q=this.events;Q.emit(m.PRE_STEP,z,$),Q.emit(m.STEP,z,$),this.scene.update(z,$),Q.emit(m.POST_STEP,z,$),this.scene.isProcessing=!1,Q.emit(m.PRE_RENDER,null,z,$),Q.emit(m.POST_RENDER,null,z,$)}},onHidden:function(){this.loop.pause(),this.events.emit(m.PAUSE)},pause:function(){var z=this.isPaused;this.isPaused=!0,z||this.events.emit(m.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(m.RESUME,this.loop.pauseDuration)},resume:function(){var z=this.isPaused;this.isPaused=!1,z&&this.events.emit(m.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(z,$){$===void 0&&($=!1),this.pendingDestroy=!0,this.removeCanvas=z,this.noReturn=$},runDestroy:function(){this.scene.destroy(),this.events.emit(m.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(h.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});S.exports=N},65898:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(35154),u=s(29747),h=s(43092),l=new c({initialize:function(o,f){this.game=o,this.raf=new h,this.started=!1,this.running=!1,this.minFps=y(f,"min",5),this.targetFps=y(f,"target",60),this.fpsLimit=y(f,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=u,this.forceSetTimeOut=y(f,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=y(f,"deltaHistory",10),this.panicMax=y(f,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=y(f,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var n=window.performance.now();this.time=n,this.lastTime=n,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=Math.min(this._target,this.deltaHistory[o]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(n){if(this.started)return this;this.started=!0,this.running=!0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=n;var f=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(f,this.forceSetTimeOut,this._target)},smoothDelta:function(n){var o=this.deltaIndex,f=this.deltaHistory,r=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,n=Math.min(n,this._target)),n>this._min&&(n=f[o],n=Math.min(n,this._min)),f[o]=n,this.deltaIndex++,this.deltaIndex>=r&&(this.deltaIndex=0);for(var d=0,p=0;p<r;p++)d+=f[p];return d/=r,d},updateFPS:function(n){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0},stepLimitFPS:function(n){this.now=n;var o=Math.max(0,n-this.lastTime);this.rawDelta=o,this.time+=this.rawDelta,this.smoothStep&&(o=this.smoothDelta(o)),this.delta+=o,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(n,this.delta),this.delta=0),this.lastTime=n,this.frame++},step:function(n){this.now=n;var o=Math.max(0,n-this.lastTime);this.rawDelta=o,this.time+=this.rawDelta,this.smoothStep&&(o=this.smoothDelta(o)),this.delta=o,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.callback(n,o),this.lastTime=n,this.frame++},tick:function(){var n=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(n):this.step(n)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(n){n===void 0&&(n=!1);var o=window.performance.now();if(!this.running){n&&(this.startTime+=-this.lastTime+(this.lastTime+o));var f=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(f,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=o+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});S.exports=l},51085:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(8443),y=function(u){var h,l=u.events;if(document.hidden!==void 0)h="visibilitychange";else{var n=["webkit","moz","ms"];n.forEach(function(f){document[f+"Hidden"]!==void 0&&(document.hidden=function(){return document[f+"Hidden"]},h=f+"visibilitychange")})}var o=function(f){document.hidden||f.type==="pause"?l.emit(c.HIDDEN):l.emit(c.VISIBLE)};h&&document.addEventListener(h,o,!1),window.onblur=function(){l.emit(c.BLUR)},window.onfocus=function(){l.emit(c.FOCUS)},window.focus&&u.config.autoFocus&&window.focus()};S.exports=y},97217:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="blur"},47548:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="boot"},19814:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="contextlost"},68446:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="destroy"},41700:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="focus"},25432:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="hidden"},65942:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pause"},59211:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="postrender"},47789:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="poststep"},39066:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="prerender"},460:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="prestep"},16175:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="ready"},42331:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="resume"},11966:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="step"},32969:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="systemready"},94830:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="visible"},8443:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={BLUR:s(97217),BOOT:s(47548),CONTEXT_LOST:s(19814),DESTROY:s(68446),FOCUS:s(41700),HIDDEN:s(25432),PAUSE:s(65942),POST_RENDER:s(59211),POST_STEP:s(47789),PRE_RENDER:s(39066),PRE_STEP:s(460),READY:s(16175),RESUME:s(42331),STEP:s(11966),SYSTEM_READY:s(32969),VISIBLE:s(94830)}},42857:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Config:s(69547),CreateRenderer:s(86054),DebugHeader:s(96391),Events:s(8443),TimeStep:s(65898),VisibilityHandler:s(51085)}},99584:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(5290),y=s(27919),u=s(35154),h=function(l){var n=u(l,"data",[]),o=u(l,"canvas",null),f=u(l,"palette",c),r=u(l,"pixelWidth",1),d=u(l,"pixelHeight",r),p=u(l,"resizeCanvas",!0),v=u(l,"clearCanvas",!0),g=u(l,"preRender",null),m=u(l,"postRender",null),T=Math.floor(Math.abs(n[0].length*r)),P=Math.floor(Math.abs(n.length*d));o||(o=y.create2D(this,T,P),p=!1,v=!1),p&&(o.width=T,o.height=P);var M=o.getContext("2d",{willReadFrequently:!0});v&&M.clearRect(0,0,T,P),g&&g(o,M);for(var b=0;b<n.length;b++)for(var R=n[b],A=0;A<R.length;A++){var D=R[A];D!=="."&&D!==" "&&(M.fillStyle=f[D],M.fillRect(A*r,b*d,r,d))}return m&&m(o,M),o};S.exports=h},15822:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={GenerateTexture:s(99584),Palettes:s(57763)}},5290:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},23816:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},9866:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},77552:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},92259:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},57763:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={ARNE16:s(5290),C64:s(23816),CGA:s(9866),JMP:s(77552),MSX:s(92259)}},46728:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(36316),u=s(80021),h=s(26099),l=new c({Extends:u,initialize:function(o,f,r,d){u.call(this,"CubicBezierCurve"),Array.isArray(o)&&(d=new h(o[6],o[7]),r=new h(o[4],o[5]),f=new h(o[2],o[3]),o=new h(o[0],o[1])),this.p0=o,this.p1=f,this.p2=r,this.p3=d},getStartPoint:function(n){return n===void 0&&(n=new h),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,o){o===void 0&&(o=new h);var f=this.p0,r=this.p1,d=this.p2,p=this.p3;return o.set(y(n,f.x,r.x,d.x,p.x),y(n,f.y,r.y,d.y,p.y))},draw:function(n,o){o===void 0&&(o=32);var f=this.getPoints(o);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var r=1;r<f.length;r++)n.lineTo(f[r].x,f[r].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});l.fromJSON=function(n){var o=n.points,f=new h(o[0],o[1]),r=new h(o[2],o[3]),d=new h(o[4],o[5]),p=new h(o[6],o[7]);return new l(f,r,d,p)},S.exports=l},80021:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(19217),u=s(87841),h=s(26099),l=new c({initialize:function(o){this.type=o,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new h,this._tmpVec2B=new h},draw:function(n,o){return o===void 0&&(o=32),n.strokePoints(this.getPoints(o))},getBounds:function(n,o){n||(n=new u),o===void 0&&(o=16);var f=this.getLength();o>f&&(o=f/2);var r=Math.max(1,Math.round(f/o));return y(this.getSpacedPoints(r),n)},getDistancePoints:function(n){var o=this.getLength(),f=Math.max(1,o/n);return this.getSpacedPoints(f)},getEndPoint:function(n){return n===void 0&&(n=new h),this.getPointAt(1,n)},getLength:function(){var n=this.getLengths();return n[n.length-1]},getLengths:function(n){if(n===void 0&&(n=this.arcLengthDivisions),this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var o=[],f,r=this.getPoint(0,this._tmpVec2A),d=0;o.push(0);for(var p=1;p<=n;p++)f=this.getPoint(p/n,this._tmpVec2B),d+=f.distance(r),o.push(d),r.copy(f);return this.cacheArcLengths=o,o},getPointAt:function(n,o){var f=this.getUtoTmapping(n);return this.getPoint(f,o)},getPoints:function(n,o,f){f===void 0&&(f=[]),n||(o?n=this.getLength()/o:n=this.defaultDivisions);for(var r=0;r<=n;r++)f.push(this.getPoint(r/n));return f},getRandomPoint:function(n){return n===void 0&&(n=new h),this.getPoint(Math.random(),n)},getSpacedPoints:function(n,o,f){f===void 0&&(f=[]),n||(o?n=this.getLength()/o:n=this.defaultDivisions);for(var r=0;r<=n;r++){var d=this.getUtoTmapping(r/n,null,n);f.push(this.getPoint(d))}return f},getStartPoint:function(n){return n===void 0&&(n=new h),this.getPointAt(0,n)},getTangent:function(n,o){o===void 0&&(o=new h);var f=1e-4,r=n-f,d=n+f;return r<0&&(r=0),d>1&&(d=1),this.getPoint(r,this._tmpVec2A),this.getPoint(d,o),o.subtract(this._tmpVec2A).normalize()},getTangentAt:function(n,o){var f=this.getUtoTmapping(n);return this.getTangent(f,o)},getTFromDistance:function(n,o){return n<=0?0:this.getUtoTmapping(0,n,o)},getUtoTmapping:function(n,o,f){var r=this.getLengths(f),d=0,p=r.length,v;o?v=Math.min(o,r[p-1]):v=n*r[p-1];for(var g=0,m=p-1,T;g<=m;)if(d=Math.floor(g+(m-g)/2),T=r[d]-v,T<0)g=d+1;else if(T>0)m=d-1;else{m=d;break}if(d=m,r[d]===v)return d/(p-1);var P=r[d],M=r[d+1],b=M-P,R=(v-P)/b;return(d+R)/(p-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});S.exports=l},73825:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(80021),u=s(39506),h=s(35154),l=s(43396),n=s(26099),o=new c({Extends:y,initialize:function(r,d,p,v,g,m,T,P){if(typeof r=="object"){var M=r;r=h(M,"x",0),d=h(M,"y",0),p=h(M,"xRadius",0),v=h(M,"yRadius",p),g=h(M,"startAngle",0),m=h(M,"endAngle",360),T=h(M,"clockwise",!1),P=h(M,"rotation",0)}else v===void 0&&(v=p),g===void 0&&(g=0),m===void 0&&(m=360),T===void 0&&(T=!1),P===void 0&&(P=0);y.call(this,"EllipseCurve"),this.p0=new n(r,d),this._xRadius=p,this._yRadius=v,this._startAngle=u(g),this._endAngle=u(m),this._clockwise=T,this._rotation=u(P)},getStartPoint:function(f){return f===void 0&&(f=new n),this.getPoint(0,f)},getResolution:function(f){return f*2},getPoint:function(f,r){r===void 0&&(r=new n);for(var d=Math.PI*2,p=this._endAngle-this._startAngle,v=Math.abs(p)<Number.EPSILON;p<0;)p+=d;for(;p>d;)p-=d;p<Number.EPSILON&&(v?p=0:p=d),this._clockwise&&!v&&(p===d?p=-d:p=p-d);var g=this._startAngle+f*p,m=this.p0.x+this._xRadius*Math.cos(g),T=this.p0.y+this._yRadius*Math.sin(g);if(this._rotation!==0){var P=Math.cos(this._rotation),M=Math.sin(this._rotation),b=m-this.p0.x,R=T-this.p0.y;m=b*P-R*M+this.p0.x,T=b*M+R*P+this.p0.y}return r.set(m,T)},setXRadius:function(f){return this.xRadius=f,this},setYRadius:function(f){return this.yRadius=f,this},setWidth:function(f){return this.xRadius=f/2,this},setHeight:function(f){return this.yRadius=f/2,this},setStartAngle:function(f){return this.startAngle=f,this},setEndAngle:function(f){return this.endAngle=f,this},setClockwise:function(f){return this.clockwise=f,this},setRotation:function(f){return this.rotation=f,this},x:{get:function(){return this.p0.x},set:function(f){this.p0.x=f}},y:{get:function(){return this.p0.y},set:function(f){this.p0.y=f}},xRadius:{get:function(){return this._xRadius},set:function(f){this._xRadius=f}},yRadius:{get:function(){return this._yRadius},set:function(f){this._yRadius=f}},startAngle:{get:function(){return l(this._startAngle)},set:function(f){this._startAngle=u(f)}},endAngle:{get:function(){return l(this._endAngle)},set:function(f){this._endAngle=u(f)}},clockwise:{get:function(){return this._clockwise},set:function(f){this._clockwise=f}},angle:{get:function(){return l(this._rotation)},set:function(f){this._rotation=u(f)}},rotation:{get:function(){return this._rotation},set:function(f){this._rotation=f}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:l(this._startAngle),endAngle:l(this._endAngle),clockwise:this._clockwise,rotation:l(this._rotation)}}});o.fromJSON=function(f){return new o(f)},S.exports=o},33951:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(80021),u=s(19217),h=s(87841),l=s(26099),n=new c({Extends:y,initialize:function(f,r){y.call(this,"LineCurve"),Array.isArray(f)&&(r=new l(f[2],f[3]),f=new l(f[0],f[1])),this.p0=f,this.p1=r,this.arcLengthDivisions=1},getBounds:function(o){return o===void 0&&(o=new h),u([this.p0,this.p1],o)},getStartPoint:function(o){return o===void 0&&(o=new l),o.copy(this.p0)},getResolution:function(o){return o===void 0&&(o=1),o},getPoint:function(o,f){return f===void 0&&(f=new l),o===1?f.copy(this.p1):(f.copy(this.p1).subtract(this.p0).scale(o).add(this.p0),f)},getPointAt:function(o,f){return this.getPoint(o,f)},getTangent:function(o,f){return f===void 0&&(f=new l),f.copy(this.p1).subtract(this.p0).normalize(),f},getUtoTmapping:function(o,f,r){var d;if(f){var p=this.getLengths(r),v=p[p.length-1],g=Math.min(f,v);d=g/v}else d=o;return d},draw:function(o){return o.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),o},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});n.fromJSON=function(o){var f=o.points,r=new l(f[0],f[1]),d=new l(f[2],f[3]);return new n(r,d)},S.exports=n},14744:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(80021),u=s(32112),h=s(26099),l=new c({Extends:y,initialize:function(o,f,r){y.call(this,"QuadraticBezierCurve"),Array.isArray(o)&&(r=new h(o[4],o[5]),f=new h(o[2],o[3]),o=new h(o[0],o[1])),this.p0=o,this.p1=f,this.p2=r},getStartPoint:function(n){return n===void 0&&(n=new h),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,o){o===void 0&&(o=new h);var f=this.p0,r=this.p1,d=this.p2;return o.set(u(n,f.x,r.x,d.x),u(n,f.y,r.y,d.y))},draw:function(n,o){o===void 0&&(o=32);var f=this.getPoints(o);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var r=1;r<f.length;r++)n.lineTo(f[r].x,f[r].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});l.fromJSON=function(n){var o=n.points,f=new h(o[0],o[1]),r=new h(o[2],o[3]),d=new h(o[4],o[5]);return new l(f,r,d)},S.exports=l},42534:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87842),y=s(83419),u=s(80021),h=s(26099),l=new y({Extends:u,initialize:function(o){o===void 0&&(o=[]),u.call(this,"SplineCurve"),this.points=[],this.addPoints(o)},addPoints:function(n){for(var o=0;o<n.length;o++){var f=new h;typeof n[o]=="number"?(f.x=n[o],f.y=n[o+1],o++):Array.isArray(n[o])?(f.x=n[o][0],f.y=n[o][1]):(f.x=n[o].x,f.y=n[o].y),this.points.push(f)}return this},addPoint:function(n,o){var f=new h(n,o);return this.points.push(f),f},getStartPoint:function(n){return n===void 0&&(n=new h),n.copy(this.points[0])},getResolution:function(n){return n*this.points.length},getPoint:function(n,o){o===void 0&&(o=new h);var f=this.points,r=(f.length-1)*n,d=Math.floor(r),p=r-d,v=f[d===0?d:d-1],g=f[d],m=f[d>f.length-2?f.length-1:d+1],T=f[d>f.length-3?f.length-1:d+2];return o.set(c(p,v.x,g.x,m.x,T.x),c(p,v.y,g.y,m.y,T.y))},toJSON:function(){for(var n=[],o=0;o<this.points.length;o++)n.push(this.points[o].x),n.push(this.points[o].y);return{type:this.type,points:n}}});l.fromJSON=function(n){return new l(n.points)},S.exports=l},25410:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Path:s(46669),MoveTo:s(68618),CubicBezier:s(46728),Curve:s(80021),Ellipse:s(73825),Line:s(33951),QuadraticBezier:s(14744),Spline:s(42534)}},68618:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(26099),u=new c({initialize:function(l,n){this.active=!1,this.p0=new y(l,n)},getPoint:function(h,l){return l===void 0&&(l=new y),l.copy(this.p0)},getPointAt:function(h,l){return this.getPoint(h,l)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});S.exports=u},46669:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(46728),u=s(73825),h=s(39429),l=s(33951),n=s(68618),o=s(14744),f=s(87841),r=s(42534),d=s(26099),p=s(36383),v=new c({initialize:function(m,T){m===void 0&&(m=0),T===void 0&&(T=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new d,this._tmpVec2A=new d,this._tmpVec2B=new d,typeof m=="object"?this.fromJSON(m):this.startPoint.set(m,T)},add:function(g){return this.curves.push(g),this},circleTo:function(g,m,T){return m===void 0&&(m=!1),this.ellipseTo(g,g,0,360,m,T)},closePath:function(){var g=this.curves[0].getPoint(0),m=this.curves[this.curves.length-1].getPoint(1);return g.equals(m)||this.curves.push(new l(m,g)),this},cubicBezierTo:function(g,m,T,P,M,b){var R=this.getEndPoint(),A,D,G;return g instanceof d?(A=g,D=m,G=T):(A=new d(T,P),D=new d(M,b),G=new d(g,m)),this.add(new y(R,A,D,G))},quadraticBezierTo:function(g,m,T,P){var M=this.getEndPoint(),b,R;return g instanceof d?(b=g,R=m):(b=new d(T,P),R=new d(g,m)),this.add(new o(M,b,R))},draw:function(g,m){for(var T=0;T<this.curves.length;T++){var P=this.curves[T];P.active&&P.draw(g,m)}return g},ellipseTo:function(g,m,T,P,M,b){var R=new u(0,0,g,m,T,P,M,b),A=this.getEndPoint(this._tmpVec2A),D=R.getStartPoint(this._tmpVec2B);return A.subtract(D),R.x=A.x,R.y=A.y,this.add(R)},fromJSON:function(g){this.curves=[],this.cacheLengths=[],this.startPoint.set(g.x,g.y),this.autoClose=g.autoClose;for(var m=0;m<g.curves.length;m++){var T=g.curves[m];switch(T.type){case"LineCurve":this.add(l.fromJSON(T));break;case"EllipseCurve":this.add(u.fromJSON(T));break;case"SplineCurve":this.add(r.fromJSON(T));break;case"CubicBezierCurve":this.add(y.fromJSON(T));break;case"QuadraticBezierCurve":this.add(o.fromJSON(T));break}}return this},getBounds:function(g,m){g===void 0&&(g=new f),m===void 0&&(m=16),g.x=Number.MAX_VALUE,g.y=Number.MAX_VALUE;for(var T=new f,P=p.MIN_SAFE_INTEGER,M=p.MIN_SAFE_INTEGER,b=0;b<this.curves.length;b++){var R=this.curves[b];R.active&&(R.getBounds(T,m),g.x=Math.min(g.x,T.x),g.y=Math.min(g.y,T.y),P=Math.max(P,T.right),M=Math.max(M,T.bottom))}return g.right=P,g.bottom=M,g},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var g=[],m=0,T=0;T<this.curves.length;T++)m+=this.curves[T].getLength(),g.push(m);return this.cacheLengths=g,g},getCurveAt:function(g){for(var m=g*this.getLength(),T=this.getCurveLengths(),P=0;P<T.length;){if(T[P]>=m)return this.curves[P];P++}return null},getEndPoint:function(g){return g===void 0&&(g=new d),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,g):g.copy(this.startPoint),g},getLength:function(){var g=this.getCurveLengths();return g[g.length-1]},getPoint:function(g,m){m===void 0&&(m=new d);for(var T=g*this.getLength(),P=this.getCurveLengths(),M=0;M<P.length;){if(P[M]>=T){var b=P[M]-T,R=this.curves[M],A=R.getLength(),D=A===0?0:1-b/A;return R.getPointAt(D,m)}M++}return null},getPoints:function(g,m){!g&&!m&&(g=this.defaultDivisions);for(var T=[],P,M=0;M<this.curves.length;M++){var b=this.curves[M];if(b.active)for(var R=b.getResolution(g),A=b.getPoints(R,m),D=0;D<A.length;D++){var G=A[D];P&&P.equals(G)||(T.push(G),P=G)}}return this.autoClose&&T.length>1&&!T[T.length-1].equals(T[0])&&T.push(T[0]),T},getRandomPoint:function(g){return g===void 0&&(g=new d),this.getPoint(Math.random(),g)},getSpacedPoints:function(g){g===void 0&&(g=40);for(var m=[],T=0;T<=g;T++)m.push(this.getPoint(T/g));return this.autoClose&&m.push(m[0]),m},getStartPoint:function(g){return g===void 0&&(g=new d),g.copy(this.startPoint)},getTangent:function(g,m){m===void 0&&(m=new d);for(var T=g*this.getLength(),P=this.getCurveLengths(),M=0;M<P.length;){if(P[M]>=T){var b=P[M]-T,R=this.curves[M],A=R.getLength(),D=A===0?0:1-b/A;return R.getTangentAt(D,m)}M++}return null},lineTo:function(g,m){g instanceof d?this._tmpVec2B.copy(g):typeof g=="object"?this._tmpVec2B.setFromObject(g):this._tmpVec2B.set(g,m);var T=this.getEndPoint(this._tmpVec2A);return this.add(new l([T.x,T.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(g){return g.unshift(this.getEndPoint()),this.add(new r(g))},moveTo:function(g,m){return g instanceof d?this.add(new n(g.x,g.y)):this.add(new n(g,m))},toJSON:function(){for(var g=[],m=0;m<this.curves.length;m++)g.push(this.curves[m].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:g}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});h.register("path",function(g,m){return new v(g,m)}),S.exports=v},45893:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(24882),u=new c({initialize:function(l,n){this.parent=l,this.events=n,n||(this.events=l.events?l.events:l),this.list={},this.values={},this._frozen=!1,!l.hasOwnProperty("sys")&&this.events&&this.events.once(y.DESTROY,this.destroy,this)},get:function(h){var l=this.list;if(Array.isArray(h)){for(var n=[],o=0;o<h.length;o++)n.push(l[h[o]]);return n}else return l[h]},getAll:function(){var h={};for(var l in this.list)this.list.hasOwnProperty(l)&&(h[l]=this.list[l]);return h},query:function(h){var l={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(h)&&(l[n]=this.list[n]);return l},set:function(h,l){if(this._frozen)return this;if(typeof h=="string")return this.setValue(h,l);for(var n in h)this.setValue(n,h[n]);return this},inc:function(h,l){if(this._frozen)return this;l===void 0&&(l=1);var n=this.get(h);return n===void 0&&(n=0),this.set(h,n+l),this},toggle:function(h){return this._frozen?this:(this.set(h,!this.get(h)),this)},setValue:function(h,l){if(this._frozen)return this;if(this.has(h))this.values[h]=l;else{var n=this,o=this.list,f=this.events,r=this.parent;Object.defineProperty(this.values,h,{enumerable:!0,configurable:!0,get:function(){return o[h]},set:function(d){if(!n._frozen){var p=o[h];o[h]=d,f.emit(y.CHANGE_DATA,r,h,d,p),f.emit(y.CHANGE_DATA_KEY+h,r,d,p)}}}),o[h]=l,f.emit(y.SET_DATA,r,h,l)}return this},each:function(h,l){for(var n=[this.parent,null,void 0],o=1;o<arguments.length;o++)n.push(arguments[o]);for(var f in this.list)n[1]=f,n[2]=this.list[f],h.apply(l,n);return this},merge:function(h,l){l===void 0&&(l=!0);for(var n in h)h.hasOwnProperty(n)&&(l||!l&&!this.has(n))&&this.setValue(n,h[n]);return this},remove:function(h){if(this._frozen)return this;if(Array.isArray(h))for(var l=0;l<h.length;l++)this.removeValue(h[l]);else return this.removeValue(h);return this},removeValue:function(h){if(this.has(h)){var l=this.list[h];delete this.list[h],delete this.values[h],this.events.emit(y.REMOVE_DATA,this.parent,h,l)}return this},pop:function(h){var l=void 0;return!this._frozen&&this.has(h)&&(l=this.list[h],delete this.list[h],delete this.values[h],this.events.emit(y.REMOVE_DATA,this.parent,h,l)),l},has:function(h){return this.list.hasOwnProperty(h)},setFreeze:function(h){return this._frozen=h,this},reset:function(){for(var h in this.list)delete this.list[h],delete this.values[h];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(y.CHANGE_DATA),this.events.off(y.SET_DATA),this.events.off(y.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(h){this._frozen=!!h}},count:{get:function(){var h=0;for(var l in this.list)this.list[l]!==void 0&&h++;return h}}});S.exports=u},63646:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(45893),u=s(37277),h=s(44594),l=new c({Extends:y,initialize:function(o){y.call(this,o,o.sys.events),this.scene=o,this.systems=o.sys,o.sys.events.once(h.BOOT,this.boot,this),o.sys.events.on(h.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){y.prototype.destroy.call(this),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});u.register("DataManagerPlugin",l,"data"),S.exports=l},10700:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="changedata"},93608:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="changedata-"},60883:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="destroy"},69780:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="removedata"},22166:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="setdata"},24882:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={CHANGE_DATA:s(10700),CHANGE_DATA_KEY:s(93608),DESTROY:s(60883),REMOVE_DATA:s(69780),SET_DATA:s(22166)}},44965:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={DataManager:s(45893),DataManagerPlugin:s(63646),Events:s(24882)}},7098:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(84148),y={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function u(){if(typeof importScripts=="function")return y;y.audioData=!!window.Audio,y.webAudio=!!(window.AudioContext||window.webkitAudioContext);var h=document.createElement("audio"),l=!!h.canPlayType;try{if(l){var n=function(r,d){var p=h.canPlayType("audio/"+r).replace(/^no$/,"");return d?!!(p||h.canPlayType("audio/"+d).replace(/^no$/,"")):!!p};if(y.ogg=n('ogg; codecs="vorbis"'),y.opus=n('ogg; codecs="opus"',"opus"),y.mp3=n("mpeg"),y.wav=n("wav"),y.m4a=n("x-m4a"),y.aac=n("aac"),y.flac=n("flac","x-flac"),y.webm=n('webm; codecs="vorbis"'),h.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(c.edge)y.dolby=!0;else if(c.safari&&c.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var o=parseInt(RegExp.$1,10),f=parseInt(RegExp.$2,10);(o===10&&f>=11||o>10)&&(y.dolby=!0)}}}}catch{}return y}S.exports=u()},84148:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25892),y={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function u(){var h=navigator.userAgent;return/Edg\/\d+/.test(h)?(y.edge=!0,y.es2019=!0):/OPR/.test(h)?(y.opera=!0,y.es2019=!0):/Chrome\/(\d+)/.test(h)&&!c.windowsPhone?(y.chrome=!0,y.chromeVersion=parseInt(RegExp.$1,10),y.es2019=y.chromeVersion>69):/Firefox\D+(\d+)/.test(h)?(y.firefox=!0,y.firefoxVersion=parseInt(RegExp.$1,10),y.es2019=y.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(h)&&c.iOS?(y.mobileSafari=!0,y.es2019=!0):/MSIE (\d+\.\d+);/.test(h)?(y.ie=!0,y.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(h)&&!c.windowsPhone?(y.safari=!0,y.safariVersion=parseInt(RegExp.$1,10),y.es2019=y.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(h)&&(y.ie=!0,y.trident=!0,y.tridentVersion=parseInt(RegExp.$1,10),y.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(h)&&(y.silk=!0),y}S.exports=u()},89289:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(27919),y={supportInverseAlpha:!1,supportNewBlendModes:!1};function u(){var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",o="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",f=new Image;return f.onload=function(){var r=new Image;r.onload=function(){var d=c.create2D(r,6),p=d.getContext("2d",{willReadFrequently:!0});if(p.globalCompositeOperation="multiply",p.drawImage(f,0,0),p.drawImage(r,2,0),!p.getImageData(2,0,1,1))return!1;var v=p.getImageData(2,0,1,1).data;c.remove(r),y.supportNewBlendModes=v[0]===255&&v[1]===0&&v[2]===0},r.src=n+"/wCKxvRF"+o},f.src=n+"AP804Oa6"+o,!1}function h(){var n=c.create2D(this,2),o=n.getContext("2d",{willReadFrequently:!0});o.fillStyle="rgba(10, 20, 30, 0.5)",o.fillRect(0,0,1,1);var f=o.getImageData(0,0,1,1);if(f===null)return!1;o.putImageData(f,1,0);var r=o.getImageData(1,0,1,1),d=r.data[0]===f.data[0]&&r.data[1]===f.data[1]&&r.data[2]===f.data[2]&&r.data[3]===f.data[3];return c.remove(this),d}function l(){return typeof importScripts!="function"&&document!==void 0&&(y.supportNewBlendModes=u(),y.supportInverseAlpha=h()),y}S.exports=l()},89357:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25892),y=s(84148),u=s(27919),h={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function l(){var o=new ArrayBuffer(4),f=new Uint8Array(o),r=new Uint32Array(o);return f[0]=161,f[1]=178,f[2]=195,f[3]=212,r[0]===3569595041?!0:r[0]===2712847316?!1:null}function n(){if(typeof importScripts=="function")return h;h.canvas=!!window.CanvasRenderingContext2D;try{h.localStorage=!!localStorage.getItem}catch{h.localStorage=!1}h.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,h.fileSystem=!!window.requestFileSystem;var o=!1,f=function(){if(window.WebGLRenderingContext)try{var r=u.createWebGL(this),d=r.getContext("webgl")||r.getContext("experimental-webgl"),p=u.create2D(this),v=p.getContext("2d",{willReadFrequently:!0}),g=v.createImageData(1,1);return o=g.data instanceof Uint8ClampedArray,u.remove(r),u.remove(p),!!d}catch{return!1}return!1};return h.webGL=f(),h.worker=!!window.Worker,h.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,h.getUserMedia=h.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,y.firefox&&y.firefoxVersion<21&&(h.getUserMedia=!1),!c.iOS&&(y.ie||y.firefox||y.chrome)&&(h.canvasBitBltShift=!0),(y.safari||y.mobileSafari)&&(h.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(h.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(h.littleEndian=l()),h.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&h.littleEndian!==null&&o,h}S.exports=n()},91639:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={available:!1,cancel:"",keyboard:!1,request:""};function s(){if(typeof importScripts=="function")return w;var c,y="Fullscreen",u="FullScreen",h=["request"+y,"request"+u,"webkitRequest"+y,"webkitRequest"+u,"msRequest"+y,"msRequest"+u,"mozRequest"+u,"mozRequest"+y];for(c=0;c<h.length;c++)if(document.documentElement[h[c]]){w.available=!0,w.request=h[c];break}var l=["cancel"+u,"exit"+y,"webkitCancel"+u,"webkitExit"+y,"msCancel"+u,"msExit"+y,"mozCancel"+u,"mozExit"+y];if(w.available){for(c=0;c<l.length;c++)if(document[l[c]]){w.cancel=l[c];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(w.keyboard=!0),Object.defineProperty(w,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),w}S.exports=s()},31784:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(84148),y={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function u(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(y.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(y.mspointer=!0),navigator.getGamepads&&(y.gamepads=!0),"onwheel"in window||c.ie&&"WheelEvent"in window?y.wheelEvent="wheel":"onmousewheel"in window?y.wheelEvent="mousewheel":c.firefox&&"MouseScrollEvent"in window&&(y.wheelEvent="DOMMouseScroll")),y}S.exports=u()},25892:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function s(){if(typeof importScripts=="function")return w;var c=navigator.userAgent;/Windows/.test(c)?w.windows=!0:/Mac OS/.test(c)&&!/like Mac OS/.test(c)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(w.iOS=!0,w.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),w.iOSVersion=parseInt(RegExp.$1,10)):w.macOS=!0:/Android/.test(c)?w.android=!0:/Linux/.test(c)?w.linux=!0:/iP[ao]d|iPhone/i.test(c)?(w.iOS=!0,navigator.appVersion.match(/OS (\d+)/),w.iOSVersion=parseInt(RegExp.$1,10),w.iPhone=c.toLowerCase().indexOf("iphone")!==-1,w.iPad=c.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(c)||/\bKF[A-Z][A-Z]+/.test(c)||/Silk.*Mobile Safari/.test(c)?w.kindle=!0:/CrOS/.test(c)&&(w.chromeOS=!0),(/Windows Phone/i.test(c)||/IEMobile/i.test(c))&&(w.android=!1,w.iOS=!1,w.macOS=!1,w.windows=!0,w.windowsPhone=!0);var y=/Silk/.test(c);return(w.windows||w.macOS||w.linux&&!y||w.chromeOS)&&(w.desktop=!0),(w.windowsPhone||/Windows NT/i.test(c)&&/Touch/i.test(c))&&(w.desktop=!1),navigator.standalone&&(w.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(w.cordova=!0),window.ejecta!==void 0&&(w.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(w.node=!0),w.node&&typeof process.versions=="object"&&(w.nodeWebkit=!!process.versions["node-webkit"],w.electron=!!process.versions.electron),/Crosswalk/.test(c)&&(w.crosswalk=!0),w.pixelRatio=window.devicePixelRatio||1,w}S.exports=s()},43267:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(95540),y={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function u(){if(typeof importScripts=="function")return y;var h=document.createElement("video"),l=!!h.canPlayType,n=/^no$/;try{l&&(h.canPlayType('video/ogg; codecs="theora"').replace(n,"")&&(y.ogg=!0),h.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(n,"")&&(y.h264=!0,y.mp4=!0),h.canPlayType("video/x-m4v").replace(n,"")&&(y.m4v=!0),h.canPlayType('video/webm; codecs="vp8, vorbis"').replace(n,"")&&(y.webm=!0),h.canPlayType('video/webm; codecs="vp9"').replace(n,"")&&(y.vp9=!0),h.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(n,"")&&(y.hls=!0))}catch{}return h.parentNode&&h.parentNode.removeChild(h),y.getVideoURL=function(o){Array.isArray(o)||(o=[o]);for(var f=0;f<o.length;f++){var r=c(o[f],"url",o[f]);if(r.indexOf("blob:")===0)return{url:r,type:""};var d;if(r.indexOf("data:")===0?d=r.split(",")[0].match(/\/(.*?);/):d=r.match(/\.([a-zA-Z0-9]+)($|\?)/),d=c(o[f],"type",d?d[1]:"").toLowerCase(),y[d])return{url:r,type:d}}return null},y}S.exports=u()},82264:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={os:s(25892),browser:s(84148),features:s(89357),input:s(31784),audio:s(7098),video:s(43267),fullscreen:s(91639),canvasFeatures:s(89289)}},89422:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new Float32Array(20),u=new c({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(h){return this._matrix.set(h),this._dirty=!0,this},reset:function(){var h=this._matrix;return h.fill(0),h[0]=1,h[6]=1,h[12]=1,h[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var h=this._data;return this._dirty&&(h.set(this._matrix),h[4]/=255,h[9]/=255,h[14]/=255,h[19]/=255,this._dirty=!1),h},brightness:function(h,l){h===void 0&&(h=0),l===void 0&&(l=!1);var n=h;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],l)},saturate:function(h,l){h===void 0&&(h=0),l===void 0&&(l=!1);var n=h*2/3+1,o=(n-1)*-.5;return this.multiply([n,o,o,0,0,o,n,o,0,0,o,o,n,0,0,0,0,0,1,0],l)},desaturate:function(h){return h===void 0&&(h=!1),this.saturate(-1,h)},hue:function(h,l){h===void 0&&(h=0),l===void 0&&(l=!1),h=h/180*Math.PI;var n=Math.cos(h),o=Math.sin(h),f=.213,r=.715,d=.072;return this.multiply([f+n*(1-f)+o*-f,r+n*-r+o*-r,d+n*-d+o*(1-d),0,0,f+n*-f+o*.143,r+n*(1-r)+o*.14,d+n*-d+o*-.283,0,0,f+n*-f+o*-.787,r+n*-r+o*r,d+n*(1-d)+o*d,0,0,0,0,0,1,0],l)},grayscale:function(h,l){return h===void 0&&(h=1),l===void 0&&(l=!1),this.saturate(-h,l)},blackWhite:function(h){return h===void 0&&(h=!1),this.multiply(u.BLACK_WHITE,h)},contrast:function(h,l){h===void 0&&(h=0),l===void 0&&(l=!1);var n=h+1,o=-.5*(n-1);return this.multiply([n,0,0,0,o,0,n,0,0,o,0,0,n,0,o,0,0,0,1,0],l)},negative:function(h){return h===void 0&&(h=!1),this.multiply(u.NEGATIVE,h)},desaturateLuminance:function(h){return h===void 0&&(h=!1),this.multiply(u.DESATURATE_LUMINANCE,h)},sepia:function(h){return h===void 0&&(h=!1),this.multiply(u.SEPIA,h)},night:function(h,l){return h===void 0&&(h=.1),l===void 0&&(l=!1),this.multiply([h*-2,-h,0,0,0,-h,0,h,0,0,0,h,h*2,0,0,0,0,0,1,0],l)},lsd:function(h){return h===void 0&&(h=!1),this.multiply(u.LSD,h)},brown:function(h){return h===void 0&&(h=!1),this.multiply(u.BROWN,h)},vintagePinhole:function(h){return h===void 0&&(h=!1),this.multiply(u.VINTAGE,h)},kodachrome:function(h){return h===void 0&&(h=!1),this.multiply(u.KODACHROME,h)},technicolor:function(h){return h===void 0&&(h=!1),this.multiply(u.TECHNICOLOR,h)},polaroid:function(h){return h===void 0&&(h=!1),this.multiply(u.POLAROID,h)},shiftToBGR:function(h){return h===void 0&&(h=!1),this.multiply(u.SHIFT_BGR,h)},multiply:function(h,l){l===void 0&&(l=!1),l||this.reset();var n=this._matrix,o=y;return o.set(n),n.set([o[0]*h[0]+o[1]*h[5]+o[2]*h[10]+o[3]*h[15],o[0]*h[1]+o[1]*h[6]+o[2]*h[11]+o[3]*h[16],o[0]*h[2]+o[1]*h[7]+o[2]*h[12]+o[3]*h[17],o[0]*h[3]+o[1]*h[8]+o[2]*h[13]+o[3]*h[18],o[0]*h[4]+o[1]*h[9]+o[2]*h[14]+o[3]*h[19]+o[4],o[5]*h[0]+o[6]*h[5]+o[7]*h[10]+o[8]*h[15],o[5]*h[1]+o[6]*h[6]+o[7]*h[11]+o[8]*h[16],o[5]*h[2]+o[6]*h[7]+o[7]*h[12]+o[8]*h[17],o[5]*h[3]+o[6]*h[8]+o[7]*h[13]+o[8]*h[18],o[5]*h[4]+o[6]*h[9]+o[7]*h[14]+o[8]*h[19]+o[9],o[10]*h[0]+o[11]*h[5]+o[12]*h[10]+o[13]*h[15],o[10]*h[1]+o[11]*h[6]+o[12]*h[11]+o[13]*h[16],o[10]*h[2]+o[11]*h[7]+o[12]*h[12]+o[13]*h[17],o[10]*h[3]+o[11]*h[8]+o[12]*h[13]+o[13]*h[18],o[10]*h[4]+o[11]*h[9]+o[12]*h[14]+o[13]*h[19]+o[14],o[15]*h[0]+o[16]*h[5]+o[17]*h[10]+o[18]*h[15],o[15]*h[1]+o[16]*h[6]+o[17]*h[11]+o[18]*h[16],o[15]*h[2]+o[16]*h[7]+o[17]*h[12]+o[18]*h[17],o[15]*h[3]+o[16]*h[8]+o[17]*h[13]+o[18]*h[18],o[15]*h[4]+o[16]*h[9]+o[17]*h[14]+o[18]*h[19]+o[19]]),this._dirty=!0,this}});u.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],u.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],u.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],u.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],u.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],u.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],u.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],u.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],u.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],u.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],u.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],S.exports=u},51767:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(29747),u=new c({initialize:function(l,n,o){this._rgb=[0,0,0],this.onChangeCallback=y,this.dirty=!1,this.set(l,n,o)},set:function(h,l,n){return h===void 0&&(h=0),l===void 0&&(l=0),n===void 0&&(n=0),this._rgb=[h,l,n],this.onChange(),this},equals:function(h,l,n){var o=this._rgb;return o[0]===h&&o[1]===l&&o[2]===n},onChange:function(){this.dirty=!0;var h=this._rgb;this.onChangeCallback.call(this,h[0],h[1],h[2])},r:{get:function(){return this._rgb[0]},set:function(h){this._rgb[0]=h,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(h){this._rgb[1]=h,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(h){this._rgb[2]=h,this.onChange()}},destroy:function(){this.onChangeCallback=null}});S.exports=u},60461:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};S.exports=w},54312:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62235),y=s(35893),u=s(86327),h=s(88417),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),h(n,y(o)+f),u(n,c(o)+r),n};S.exports=l},46768:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62235),y=s(26541),u=s(86327),h=s(385),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),h(n,y(o)-f),u(n,c(o)+r),n};S.exports=l},35827:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62235),y=s(54380),u=s(86327),h=s(40136),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),h(n,y(o)+f),u(n,c(o)+r),n};S.exports=l},46871:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66786),y=s(35893),u=s(7702),h=function(l,n,o,f){return o===void 0&&(o=0),f===void 0&&(f=0),c(l,y(n)+o,u(n)+f),l};S.exports=h},5198:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7702),y=s(26541),u=s(20786),h=s(385),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),h(n,y(o)-f),u(n,c(o)+r),n};S.exports=l},11879:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(60461),y=[];y[c.BOTTOM_CENTER]=s(54312),y[c.BOTTOM_LEFT]=s(46768),y[c.BOTTOM_RIGHT]=s(35827),y[c.CENTER]=s(46871),y[c.LEFT_CENTER]=s(5198),y[c.RIGHT_CENTER]=s(80503),y[c.TOP_CENTER]=s(89698),y[c.TOP_LEFT]=s(922),y[c.TOP_RIGHT]=s(21373),y[c.LEFT_BOTTOM]=y[c.BOTTOM_LEFT],y[c.LEFT_TOP]=y[c.TOP_LEFT],y[c.RIGHT_BOTTOM]=y[c.BOTTOM_RIGHT],y[c.RIGHT_TOP]=y[c.TOP_RIGHT];var u=function(h,l,n,o,f){return y[n](h,l,o,f)};S.exports=u},80503:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7702),y=s(54380),u=s(20786),h=s(40136),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),h(n,y(o)+f),u(n,c(o)+r),n};S.exports=l},89698:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35893),y=s(17717),u=s(88417),h=s(66737),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),u(n,c(o)+f),h(n,y(o)-r),n};S.exports=l},922:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26541),y=s(17717),u=s(385),h=s(66737),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),u(n,c(o)-f),h(n,y(o)-r),n};S.exports=l},21373:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(54380),y=s(17717),u=s(40136),h=s(66737),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),u(n,c(o)+f),h(n,y(o)-r),n};S.exports=l},91660:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={BottomCenter:s(54312),BottomLeft:s(46768),BottomRight:s(35827),Center:s(46871),LeftCenter:s(5198),QuickSet:s(11879),RightCenter:s(80503),TopCenter:s(89698),TopLeft:s(922),TopRight:s(21373)}},71926:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(60461),y=s(79291),u={In:s(91660),To:s(16694)};u=y(!1,u,c),S.exports=u},21578:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62235),y=s(35893),u=s(88417),h=s(66737),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),u(n,y(o)+f),h(n,c(o)+r),n};S.exports=l},10210:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62235),y=s(26541),u=s(385),h=s(66737),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),u(n,y(o)-f),h(n,c(o)+r),n};S.exports=l},82341:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62235),y=s(54380),u=s(40136),h=s(66737),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),u(n,y(o)+f),h(n,c(o)+r),n};S.exports=l},87958:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62235),y=s(26541),u=s(86327),h=s(40136),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),h(n,y(o)-f),u(n,c(o)+r),n};S.exports=l},40080:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7702),y=s(26541),u=s(20786),h=s(40136),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),h(n,y(o)-f),u(n,c(o)+r),n};S.exports=l},88466:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26541),y=s(17717),u=s(40136),h=s(66737),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),u(n,c(o)-f),h(n,y(o)-r),n};S.exports=l},38829:(S,w,s)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(60461),y=[];y[c.BOTTOM_CENTER]=s(21578),y[c.BOTTOM_LEFT]=s(10210),y[c.BOTTOM_RIGHT]=s(82341),y[c.LEFT_BOTTOM]=s(87958),y[c.LEFT_CENTER]=s(40080),y[c.LEFT_TOP]=s(88466),y[c.RIGHT_BOTTOM]=s(19211),y[c.RIGHT_CENTER]=s(34609),y[c.RIGHT_TOP]=s(48741),y[c.TOP_CENTER]=s(49440),y[c.TOP_LEFT]=s(81288),y[c.TOP_RIGHT]=s(61323);var u=function(h,l,n,o,f){return y[n](h,l,o,f)};S.exports=u},19211:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62235),y=s(54380),u=s(86327),h=s(385),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),h(n,y(o)+f),u(n,c(o)+r),n};S.exports=l},34609:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7702),y=s(54380),u=s(20786),h=s(385),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),h(n,y(o)+f),u(n,c(o)+r),n};S.exports=l},48741:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(54380),y=s(17717),u=s(385),h=s(66737),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),u(n,c(o)+f),h(n,y(o)-r),n};S.exports=l},49440:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35893),y=s(17717),u=s(86327),h=s(88417),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),h(n,c(o)+f),u(n,y(o)-r),n};S.exports=l},81288:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26541),y=s(17717),u=s(86327),h=s(385),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),h(n,c(o)-f),u(n,y(o)-r),n};S.exports=l},61323:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(54380),y=s(17717),u=s(86327),h=s(40136),l=function(n,o,f,r){return f===void 0&&(f=0),r===void 0&&(r=0),h(n,c(o)+f),u(n,y(o)-r),n};S.exports=l},16694:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={BottomCenter:s(21578),BottomLeft:s(10210),BottomRight:s(82341),LeftBottom:s(87958),LeftCenter:s(40080),LeftTop:s(88466),QuickSet:s(38829),RightBottom:s(19211),RightCenter:s(34609),RightTop:s(48741),TopCenter:s(49440),TopLeft:s(81288),TopRight:s(61323)}},66786:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(88417),y=s(20786),u=function(h,l,n){return c(h,l),y(h,n)};S.exports=u},62235:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.y+s.height-s.height*s.originY};S.exports=w},72873:(S,w,s)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62235),y=s(26541),u=s(54380),h=s(17717),l=s(87841),n=function(o,f){f===void 0&&(f=new l);var r=y(o),d=h(o);return f.x=r,f.y=d,f.width=u(o)-r,f.height=c(o)-d,f};S.exports=n},35893:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.x-s.width*s.originX+s.width*.5};S.exports=w},7702:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.y-s.height*s.originY+s.height*.5};S.exports=w},26541:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.x-s.width*s.originX};S.exports=w},87431:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.width*s.originX};S.exports=w},46928:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.height*s.originY};S.exports=w},54380:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.x+s.width-s.width*s.originX};S.exports=w},17717:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.y-s.height*s.originY};S.exports=w},86327:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.y=c-s.height+s.height*s.originY,s};S.exports=w},88417:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=s.width*s.originX;return s.x=c+y-s.width*.5,s};S.exports=w},20786:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=s.height*s.originY;return s.y=c+y-s.height*.5,s};S.exports=w},385:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.x=c+s.width*s.originX,s};S.exports=w},40136:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.x=c-s.width+s.width*s.originX,s};S.exports=w},66737:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.y=c+s.height*s.originY,s};S.exports=w},58724:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={CenterOn:s(66786),GetBottom:s(62235),GetBounds:s(72873),GetCenterX:s(35893),GetCenterY:s(7702),GetLeft:s(26541),GetOffsetX:s(87431),GetOffsetY:s(46928),GetRight:s(54380),GetTop:s(17717),SetBottom:s(86327),SetCenterX:s(88417),SetCenterY:s(20786),SetLeft:s(385),SetRight:s(40136),SetTop:s(66737)}},20623:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setCrisp:function(s){var c=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return c.forEach(function(y){s.style["image-rendering"]=y}),s.style.msInterpolationMode="nearest-neighbor",s},setBicubic:function(s){return s.style["image-rendering"]="auto",s.style.msInterpolationMode="bicubic",s}};S.exports=w},27919:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(8054),y=s(68703),u=[],h=!1,l=function(){var n=function(T,P,M,b,R){P===void 0&&(P=1),M===void 0&&(M=1),b===void 0&&(b=c.CANVAS),R===void 0&&(R=!1);var A,D=r(b);return D===null?(D={parent:T,canvas:document.createElement("canvas"),type:b},b===c.CANVAS&&u.push(D),A=D.canvas):(D.parent=T,A=D.canvas),R&&(D.parent=A),A.width=P,A.height=M,h&&b===c.CANVAS&&y.disable(A.getContext("2d",{willReadFrequently:!1})),A},o=function(T,P,M){return n(T,P,M,c.CANVAS)},f=function(T,P,M){return n(T,P,M,c.WEBGL)},r=function(T){if(T===void 0&&(T=c.CANVAS),T===c.WEBGL)return null;for(var P=0;P<u.length;P++){var M=u[P];if(!M.parent&&M.type===T)return M}return null},d=function(T){var P=T instanceof HTMLCanvasElement;u.forEach(function(M){(P&&M.canvas===T||!P&&M.parent===T)&&(M.parent=null,M.canvas.width=1,M.canvas.height=1)})},p=function(){var T=0;return u.forEach(function(P){P.parent&&T++}),T},v=function(){return u.length-p()},g=function(){h=!0},m=function(){h=!1};return{create2D:o,create:n,createWebGL:f,disableSmoothing:g,enableSmoothing:m,first:r,free:v,pool:u,remove:d,total:p}};S.exports=l()},68703:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w="",s=function(){var c=function(l){for(var n=["i","webkitI","msI","mozI","oI"],o=0;o<n.length;o++){var f=n[o]+"mageSmoothingEnabled";if(f in l)return f}return null},y=function(l){return w===""&&(w=c(l)),w&&(l[w]=!0),l},u=function(l){return w===""&&(w=c(l)),w&&(l[w]=!1),l},h=function(l){return w!==null?l[w]:null};return{disable:u,enable:y,getPrefix:c,isEnabled:h}};S.exports=s()},65208:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c===void 0&&(c="none"),s.style.msTouchAction=c,s.style["ms-touch-action"]=c,s.style["touch-action"]=c,s};S.exports=w},91610:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){c===void 0&&(c="none");var y=["-webkit-","-khtml-","-moz-","-ms-",""];return y.forEach(function(u){s.style[u+"user-select"]=c}),s.style["-webkit-touch-callout"]=c,s.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",s};S.exports=w},26253:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={CanvasInterpolation:s(20623),CanvasPool:s(27919),Smoothing:s(68703),TouchAction:s(65208),UserSelect:s(91610)}},40987:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(37589),u=s(1e3),h=s(7537),l=s(87837),n=new c({initialize:function(f,r,d,p){f===void 0&&(f=0),r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(f,r,d,p)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(o,f,r,d,p){return d===void 0&&(d=255),p===void 0&&(p=!0),this._locked=!0,this.red=o,this.green=f,this.blue=r,this.alpha=d,this._locked=!1,this.update(p)},setGLTo:function(o,f,r,d){return d===void 0&&(d=1),this._locked=!0,this.redGL=o,this.greenGL=f,this.blueGL=r,this.alphaGL=d,this._locked=!1,this.update(!0)},setFromRGB:function(o){return this._locked=!0,this.red=o.r,this.green=o.g,this.blue=o.b,o.hasOwnProperty("a")&&(this.alpha=o.a),this._locked=!1,this.update(!0)},setFromHSV:function(o,f,r){return h(o,f,r,this)},update:function(o){if(o===void 0&&(o=!1),this._locked)return this;var f=this.r,r=this.g,d=this.b,p=this.a;return this._color=y(f,r,d),this._color32=u(f,r,d,p),this._rgba="rgba("+f+","+r+","+d+","+p/255+")",o&&l(f,r,d,this),this},updateHSV:function(){var o=this.r,f=this.g,r=this.b;return l(o,f,r,this),this},clone:function(){return new n(this.r,this.g,this.b,this.a)},gray:function(o){return this.setTo(o,o,o)},random:function(o,f){o===void 0&&(o=0),f===void 0&&(f=255);var r=Math.floor(o+Math.random()*(f-o)),d=Math.floor(o+Math.random()*(f-o)),p=Math.floor(o+Math.random()*(f-o));return this.setTo(r,d,p)},randomGray:function(o,f){o===void 0&&(o=0),f===void 0&&(f=255);var r=Math.floor(o+Math.random()*(f-o));return this.setTo(r,r,r)},saturate:function(o){return this.s+=o/100,this},desaturate:function(o){return this.s-=o/100,this},lighten:function(o){return this.v+=o/100,this},darken:function(o){return this.v-=o/100,this},brighten:function(o){var f=this.r,r=this.g,d=this.b;return f=Math.max(0,Math.min(255,f-Math.round(255*-(o/100)))),r=Math.max(0,Math.min(255,r-Math.round(255*-(o/100)))),d=Math.max(0,Math.min(255,d-Math.round(255*-(o/100)))),this.setTo(f,r,d)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(o){this.gl[0]=Math.min(Math.abs(o),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(o){this.gl[1]=Math.min(Math.abs(o),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(o){this.gl[2]=Math.min(Math.abs(o),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(o){this.gl[3]=Math.min(Math.abs(o),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(o){o=Math.floor(Math.abs(o)),this.r=Math.min(o,255),this.gl[0]=o/255,this.update(!0)}},green:{get:function(){return this.g},set:function(o){o=Math.floor(Math.abs(o)),this.g=Math.min(o,255),this.gl[1]=o/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(o){o=Math.floor(Math.abs(o)),this.b=Math.min(o,255),this.gl[2]=o/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(o){o=Math.floor(Math.abs(o)),this.a=Math.min(o,255),this.gl[3]=o/255,this.update()}},h:{get:function(){return this._h},set:function(o){this._h=o,h(o,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(o){this._s=o,h(this._h,o,this._v,this)}},v:{get:function(){return this._v},set:function(o){this._v=o,h(this._h,this._s,o,this)}}});S.exports=n},92728:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(37589),y=function(u){u===void 0&&(u=1024);var h=[],l=255,n,o=255,f=0,r=0;for(n=0;n<=l;n++)h.push({r:o,g:n,b:r,color:c(o,n,r)});for(f=255,n=l;n>=0;n--)h.push({r:n,g:f,b:r,color:c(n,f,r)});for(o=0,n=0;n<=l;n++,f--)h.push({r:o,g:f,b:n,color:c(o,f,n)});for(f=0,r=255,n=0;n<=l;n++,r--,o++)h.push({r:o,g:f,b:r,color:c(o,f,r)});if(u===1024)return h;var d=[],p=0,v=1024/u;for(n=0;n<u;n++)d.push(h[Math.floor(p)]),p+=v;return d};S.exports=y},91588:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c={r:s>>16&255,g:s>>8&255,b:s&255,a:255};return s>16777215&&(c.a=s>>>24),c};S.exports=w},62957:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c=s.toString(16);return c.length===1?"0"+c:c};S.exports=w},37589:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return s<<16|c<<8|y};S.exports=w},1e3:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){return u<<24|s<<16|c<<8|y};S.exports=w},62183:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(40987),y=s(89528),u=function(h,l,n){var o=n,f=n,r=n;if(l!==0){var d=n<.5?n*(1+l):n+l-n*l,p=2*n-d;o=y(p,d,h+1/3),f=y(p,d,h),r=y(p,d,h-1/3)}var v=new c;return v.setGLTo(o,f,r,1)};S.exports=u},27939:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7537),y=function(u,h){u===void 0&&(u=1),h===void 0&&(h=1);for(var l=[],n=0;n<=359;n++)l.push(c(n/359,u,h));return l};S.exports=y},7537:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(37589);function y(h,l,n,o){var f=(h+l*6)%6,r=Math.min(f,4-f,1);return Math.round(255*(o-o*n*Math.max(0,r)))}var u=function(h,l,n,o){l===void 0&&(l=1),n===void 0&&(n=1);var f=y(5,h,l,n),r=y(3,h,l,n),d=y(1,h,l,n);return o?o.setTo?o.setTo(f,r,d,o.alpha,!0):(o.r=f,o.g=r,o.b=d,o.color=c(f,r,d),o):{r:f,g:r,b:d,color:c(f,r,d)}};S.exports=u},70238:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(40987),y=function(u){var h=new c;u=u.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(r,d,p,v){return d+d+p+p+v+v});var l=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);if(l){var n=parseInt(l[1],16),o=parseInt(l[2],16),f=parseInt(l[3],16);h.setTo(n,o,f)}return h};S.exports=y},89528:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return y<0&&(y+=1),y>1&&(y-=1),y<.16666666666666666?s+(c-s)*6*y:y<.5?c:y<.6666666666666666?s+(c-s)*(.6666666666666666-y)*6:s};S.exports=w},30100:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(40987),y=s(90664),u=function(h){var l=y(h);return new c(l.r,l.g,l.b,l.a)};S.exports=u},90664:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s>16777215?{a:s>>>24,r:s>>16&255,g:s>>8&255,b:s&255}:{a:255,r:s>>16&255,g:s>>8&255,b:s&255}};S.exports=w},13699:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(28915),y=s(37589),u=function(n,o,f,r,d,p,v,g){v===void 0&&(v=100),g===void 0&&(g=0);var m=g/v,T=c(n,r,m),P=c(o,d,m),M=c(f,p,m);return{r:T,g:P,b:M,a:255,color:y(T,P,M)}},h=function(n,o,f,r){return f===void 0&&(f=100),r===void 0&&(r=0),u(n.r,n.g,n.b,o.r,o.g,o.b,f,r)},l=function(n,o,f,r,d,p){return d===void 0&&(d=100),p===void 0&&(p=0),u(n.r,n.g,n.b,o,f,r,d,p)};S.exports={RGBWithRGB:u,ColorWithRGB:l,ColorWithColor:h}},68957:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(40987),y=function(u){return new c(u.r,u.g,u.b,u.a)};S.exports=y},87388:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(40987),y=function(u){var h=new c,l=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(u.toLowerCase());if(l){var n=parseInt(l[1],10),o=parseInt(l[2],10),f=parseInt(l[3],10),r=l[4]!==void 0?parseFloat(l[4]):1;h.setTo(n,o,f,r*255)}return h};S.exports=y},87837:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){u===void 0&&(u={h:0,s:0,v:0}),s/=255,c/=255,y/=255;var h=Math.min(s,c,y),l=Math.max(s,c,y),n=l-h,o=0,f=l===0?0:n/l,r=l;return l!==h&&(l===s?o=(c-y)/n+(c<y?6:0):l===c?o=(y-s)/n+2:l===y&&(o=(s-c)/n+4),o/=6),u.hasOwnProperty("_h")?(u._h=o,u._s=f,u._v=r):(u.h=o,u.s=f,u.v=r),u};S.exports=w},75723:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62957),y=function(u,h,l,n,o){return n===void 0&&(n=255),o===void 0&&(o="#"),o==="#"?"#"+((1<<24)+(u<<16)+(h<<8)+l).toString(16).slice(1,7):"0x"+c(n)+c(u)+c(h)+c(l)};S.exports=y},85386:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(30976),y=s(40987),u=function(h,l){return h===void 0&&(h=0),l===void 0&&(l=255),new y(c(h,l),c(h,l),c(h,l))};S.exports=u},80333:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(70238),y=s(30100),u=s(68957),h=s(87388),l=function(n){var o=typeof n;switch(o){case"string":return n.substr(0,3).toLowerCase()==="rgb"?h(n):c(n);case"number":return y(n);case"object":return u(n)}};S.exports=l},3956:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(40987);c.ColorSpectrum=s(92728),c.ColorToRGBA=s(91588),c.ComponentToHex=s(62957),c.GetColor=s(37589),c.GetColor32=s(1e3),c.HexStringToColor=s(70238),c.HSLToColor=s(62183),c.HSVColorWheel=s(27939),c.HSVToRGB=s(7537),c.HueToComponent=s(89528),c.IntegerToColor=s(30100),c.IntegerToRGB=s(90664),c.Interpolate=s(13699),c.ObjectToColor=s(68957),c.RandomRGB=s(85386),c.RGBStringToColor=s(87388),c.RGBToHSV=s(87837),c.RGBToString=s(75723),c.ValueToColor=s(80333),S.exports=c},27460:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Align:s(71926),BaseShader:s(73894),Bounds:s(58724),Canvas:s(26253),Color:s(3956),ColorMatrix:s(89422),Masks:s(69781),RGB:s(51767)}},6858:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(39429),u=new c({initialize:function(l,n,o,f,r,d){n||(n=l.sys.make.image({x:o,y:f,key:r,frame:d,add:!1})),this.bitmapMask=n,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(h){this.bitmapMask=h},preRenderWebGL:function(h,l,n){h.pipelines.BITMAPMASK_PIPELINE.beginMask(this,l,n)},postRenderWebGL:function(h,l,n){h.pipelines.BITMAPMASK_PIPELINE.endMask(this,l,n)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});y.register("bitmapMask",function(h,l,n,o,f){return new u(this.scene,h,l,n,o,f)}),S.exports=u},80661:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l){this.geometryMask=l,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(u){return this.geometryMask=u,this},setInvertAlpha:function(u){return u===void 0&&(u=!0),this.invertAlpha=u,this},preRenderWebGL:function(u,h,l){var n=u.gl;u.flush(),u.maskStack.length===0&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),u.maskCount=0),u.currentCameraMask.mask!==this&&(u.currentMask.mask=this),u.maskStack.push({mask:this,camera:l}),this.applyStencil(u,l,!0),u.maskCount++},applyStencil:function(u,h,l){var n=u.gl,o=this.geometryMask,f=u.maskCount,r=255;n.colorMask(!1,!1,!1,!1),l?(n.stencilFunc(n.EQUAL,f,r),n.stencilOp(n.KEEP,n.KEEP,n.INCR),f++):(n.stencilFunc(n.EQUAL,f+1,r),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),this.level=f,o.renderWebGL(u,o,h),u.flush(),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.invertAlpha?n.stencilFunc(n.NOTEQUAL,f,r):n.stencilFunc(n.EQUAL,f,r)},postRenderWebGL:function(u){var h=u.gl;u.maskStack.pop(),u.maskCount--,u.flush();var l=u.currentMask;if(u.maskStack.length===0)l.mask=null,h.disable(h.STENCIL_TEST);else{var n=u.maskStack[u.maskStack.length-1];n.mask.applyStencil(u,n.camera,!1),u.currentCameraMask.mask!==n.mask?(l.mask=n.mask,l.camera=n.camera):l.mask=null}},preRenderCanvas:function(u,h,l){var n=this.geometryMask;u.currentContext.save(),n.renderCanvas(u,n,l,null,null,!0),u.currentContext.clip()},postRenderCanvas:function(u){u.currentContext.restore()},destroy:function(){this.geometryMask=null}});S.exports=y},69781:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={BitmapMask:s(6858),GeometryMask:s(80661)}},73894:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l,n,o){(!l||l==="")&&(l=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!n||n==="")&&(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),o===void 0&&(o=null),this.key=h,this.fragmentSrc=l,this.vertexSrc=n,this.uniforms=o}});S.exports=y},40366:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y;if(c)typeof c=="string"?y=document.getElementById(c):typeof c=="object"&&c.nodeType===1&&(y=c);else if(s.parentElement||c===null)return s;return y||(y=document.body),y.appendChild(s),s};S.exports=w},83719:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(40366),y=function(u){var h=u.config;if(!(!h.parent||!h.domCreateContainer)){var l=document.createElement("div");l.style.cssText=["display: block;","width: "+u.scale.width+"px;","height: "+u.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+h.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),u.domContainer=l,c(l,h.parent)}};S.exports=y},57264:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25892),y=function(u){if(document.readyState==="complete"||document.readyState==="interactive"){u();return}var h=function(){document.removeEventListener("deviceready",h,!0),document.removeEventListener("DOMContentLoaded",h,!0),window.removeEventListener("load",h,!0),u()};document.body?c.cordova?document.addEventListener("deviceready",h,!1):(document.addEventListener("DOMContentLoaded",h,!0),window.addEventListener("load",h,!0)):window.setTimeout(h,20)};S.exports=y},57811:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){if(!s)return window.innerHeight;var c=Math.abs(window.orientation),y={w:0,h:0},u=document.createElement("div");return u.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(u),y.w=c===90?u.offsetHeight:window.innerWidth,y.h=c===90?window.innerWidth:u.offsetHeight,document.documentElement.removeChild(u),u=null,Math.abs(window.orientation)!==90?y.h:y.w};S.exports=w},45818:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(13560),y=function(u,h){var l=window.screen,n=l?l.orientation||l.mozOrientation||l.msOrientation:!1;if(n&&typeof n.type=="string")return n.type;if(typeof n=="string")return n;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?c.ORIENTATION.PORTRAIT:c.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return c.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return c.ORIENTATION.LANDSCAPE}else return h>u?c.ORIENTATION.PORTRAIT:c.ORIENTATION.LANDSCAPE};S.exports=y},74403:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c;return s!==""&&(typeof s=="string"?c=document.getElementById(s):s&&s.nodeType===1&&(c=s)),c||(c=document.body),c};S.exports=w},56836:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c="";try{if(window.DOMParser){var y=new DOMParser;c=y.parseFromString(s,"text/xml")}else c=new ActiveXObject("Microsoft.XMLDOM"),c.loadXML(s)}catch{c=null}return!c||!c.documentElement||c.getElementsByTagName("parsererror").length?null:c};S.exports=w},35846:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){s.parentNode&&s.parentNode.removeChild(s)};S.exports=w},43092:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(29747),u=new c({initialize:function(){this.isRunning=!1,this.callback=y,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var l=this;this.step=function n(o){l.callback(o),l.isRunning&&(l.timeOutID=window.requestAnimationFrame(n))},this.stepTimeout=function n(){l.isRunning&&(l.timeOutID=window.setTimeout(n,l.delay)),l.callback(window.performance.now())}},start:function(h,l,n){this.isRunning||(this.callback=h,this.isSetTimeOut=l,this.delay=n,this.isRunning=!0,this.timeOutID=l?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=y}});S.exports=u},84902:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c={AddToDOM:s(40366),DOMContentLoaded:s(57264),GetInnerHeight:s(57811),GetScreenOrientation:s(45818),GetTarget:s(74403),ParseXML:s(56836),RemoveFromDOM:s(35846),RequestAnimationFrame:s(43092)};S.exports=c},47565:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(50792),u=s(37277),h=new c({Extends:y,initialize:function(){y.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});u.register("EventEmitter",h,"events"),S.exports=h},93055:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={EventEmitter:s(47565)}},20122:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72898),u=s(14811),h=new c({Extends:y,initialize:function(n,o){o===void 0&&(o=1),y.call(this,u.BARREL,n),this.amount=o}});S.exports=h},32251:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72898),u=s(14811),h=new c({Extends:y,initialize:function(n,o,f,r,d,p,v){f===void 0&&(f=1),r===void 0&&(r=1),d===void 0&&(d=1),p===void 0&&(p=1),v===void 0&&(v=4),y.call(this,u.BLOOM,n),this.steps=v,this.offsetX=f,this.offsetY=r,this.blurStrength=d,this.strength=p,this.glcolor=[1,1,1],o!=null&&(this.color=o)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var n=this.glcolor;n[0]=(l>>16&255)/255,n[1]=(l>>8&255)/255,n[2]=(l&255)/255}}});S.exports=h},9047:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72898),u=s(14811),h=new c({Extends:y,initialize:function(n,o,f,r,d,p,v){o===void 0&&(o=0),f===void 0&&(f=2),r===void 0&&(r=2),d===void 0&&(d=1),v===void 0&&(v=4),y.call(this,u.BLUR,n),this.quality=o,this.x=f,this.y=r,this.steps=v,this.strength=d,this.glcolor=[1,1,1],p!=null&&(this.color=p)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var n=this.glcolor;n[0]=(l>>16&255)/255,n[1]=(l>>8&255)/255,n[2]=(l&255)/255}}});S.exports=h},27885:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72898),u=s(14811),h=new c({Extends:y,initialize:function(n,o,f,r,d,p,v,g){o===void 0&&(o=.5),f===void 0&&(f=1),r===void 0&&(r=.2),d===void 0&&(d=!1),p===void 0&&(p=1),v===void 0&&(v=1),g===void 0&&(g=1),y.call(this,u.BOKEH,n),this.radius=o,this.amount=f,this.contrast=r,this.isTiltShift=d,this.strength=g,this.blurX=p,this.blurY=v}});S.exports=h},12578:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72898),u=s(14811),h=new c({Extends:y,initialize:function(n,o,f,r,d,p){o===void 0&&(o=8),d===void 0&&(d=1),p===void 0&&(p=.005),y.call(this,u.CIRCLE,n),this.scale=d,this.feather=p,this.thickness=o,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],f!=null&&(this.color=f),r!=null&&(this.backgroundColor=r)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var n=this.glcolor;n[0]=(l>>16&255)/255,n[1]=(l>>8&255)/255,n[2]=(l&255)/255}},backgroundColor:{get:function(){var l=this.glcolor2;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var n=this.glcolor2;n[0]=(l>>16&255)/255,n[1]=(l>>8&255)/255,n[2]=(l&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(l){this.glcolor2[3]=l}}});S.exports=h},15802:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(89422),u=s(14811),h=new c({Extends:y,initialize:function(n){y.call(this),this.type=u.COLOR_MATRIX,this.gameObject=n,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});S.exports=h},72898:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l){this.type=h,this.gameObject=l,this.active=!0},setActive:function(u){return this.active=u,this},destroy:function(){this.gameObject=null,this.active=!1}});S.exports=y},44553:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72898),u=s(14811),h=new c({Extends:y,initialize:function(n,o,f,r){o===void 0&&(o="__WHITE"),f===void 0&&(f=.005),r===void 0&&(r=.005),y.call(this,u.DISPLACEMENT,n),this.x=f,this.y=r,this.glTexture,this.setTexture(o)},setTexture:function(l){var n=this.gameObject.scene.sys.textures.getFrame(l);return n&&(this.glTexture=n.glTexture),this}});S.exports=h},68531:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72898),u=s(14811),h=new c({Extends:y,initialize:function(n,o,f,r,d){f===void 0&&(f=4),r===void 0&&(r=0),d===void 0&&(d=!1),y.call(this,u.GLOW,n),this.outerStrength=f,this.innerStrength=r,this.knockout=d,this.glcolor=[1,1,1,1],o!==void 0&&(this.color=o)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var n=this.glcolor;n[0]=(l>>16&255)/255,n[1]=(l>>8&255)/255,n[2]=(l&255)/255}}});S.exports=h},37102:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72898),u=s(14811),h=new c({Extends:y,initialize:function(n,o,f,r,d,p,v,g,m){r===void 0&&(r=.2),d===void 0&&(d=0),p===void 0&&(p=0),v===void 0&&(v=0),g===void 0&&(g=1),m===void 0&&(m=0),y.call(this,u.GRADIENT,n),this.alpha=r,this.size=m,this.fromX=d,this.fromY=p,this.toX=v,this.toY=g,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],o!=null&&(this.color1=o),f!=null&&(this.color2=f)},color1:{get:function(){var l=this.glcolor1;return(l[0]<<16)+(l[1]<<8)+(l[2]|0)},set:function(l){var n=this.glcolor1;n[0]=l>>16&255,n[1]=l>>8&255,n[2]=l&255}},color2:{get:function(){var l=this.glcolor2;return(l[0]<<16)+(l[1]<<8)+(l[2]|0)},set:function(l){var n=this.glcolor2;n[0]=l>>16&255,n[1]=l>>8&255,n[2]=l&255}}});S.exports=h},86886:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72898),u=s(14811),h=new c({Extends:y,initialize:function(n,o){o===void 0&&(o=1),y.call(this,u.PIXELATE,n),this.amount=o}});S.exports=h},92322:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72898),u=s(14811),h=new c({Extends:y,initialize:function(n,o,f,r,d,p,v,g){o===void 0&&(o=0),f===void 0&&(f=0),r===void 0&&(r=.1),d===void 0&&(d=1),v===void 0&&(v=6),g===void 0&&(g=1),y.call(this,u.SHADOW,n),this.x=o,this.y=f,this.decay=r,this.power=d,this.glcolor=[0,0,0,1],this.samples=v,this.intensity=g,p!==void 0&&(this.color=p)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var n=this.glcolor;n[0]=(l>>16&255)/255,n[1]=(l>>8&255)/255,n[2]=(l&255)/255}}});S.exports=h},39563:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72898),u=s(14811),h=new c({Extends:y,initialize:function(n,o,f,r,d){o===void 0&&(o=.5),f===void 0&&(f=.5),r===void 0&&(r=3),d===void 0&&(d=!1),y.call(this,u.SHINE,n),this.speed=o,this.lineWidth=f,this.gradient=r,this.reveal=d}});S.exports=h},56448:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72898),u=s(14811),h=new c({Extends:y,initialize:function(n,o,f,r,d){o===void 0&&(o=.5),f===void 0&&(f=.5),r===void 0&&(r=.5),d===void 0&&(d=.5),y.call(this,u.VIGNETTE,n),this.x=o,this.y=f,this.radius=r,this.strength=d}});S.exports=h},38433:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72898),u=s(14811),h=new c({Extends:y,initialize:function(n,o,f,r,d){o===void 0&&(o=.1),f===void 0&&(f=0),r===void 0&&(r=0),d===void 0&&(d=!1),y.call(this,u.WIPE,n),this.progress=0,this.wipeWidth=o,this.direction=f,this.axis=r,this.reveal=d}});S.exports=h},14811:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};S.exports=w},66064:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(79291),y=s(14811),u={Barrel:s(20122),Controller:s(72898),Bloom:s(32251),Blur:s(9047),Bokeh:s(27885),Circle:s(12578),ColorMatrix:s(15802),Displacement:s(44553),Glow:s(68531),Gradient:s(37102),Pixelate:s(86886),Shadow:s(92322),Shine:s(39563),Vignette:s(56448),Wipe:s(38433)};u=c(!1,u,y),S.exports=u},25305:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(10312),y=s(23568),u=function(h,l,n){l.x=y(n,"x",0),l.y=y(n,"y",0),l.depth=y(n,"depth",0),l.flipX=y(n,"flipX",!1),l.flipY=y(n,"flipY",!1);var o=y(n,"scale",null);typeof o=="number"?l.setScale(o):o!==null&&(l.scaleX=y(o,"x",1),l.scaleY=y(o,"y",1));var f=y(n,"scrollFactor",null);typeof f=="number"?l.setScrollFactor(f):f!==null&&(l.scrollFactorX=y(f,"x",1),l.scrollFactorY=y(f,"y",1)),l.rotation=y(n,"rotation",0);var r=y(n,"angle",null);r!==null&&(l.angle=r),l.alpha=y(n,"alpha",1);var d=y(n,"origin",null);if(typeof d=="number")l.setOrigin(d);else if(d!==null){var p=y(d,"x",.5),v=y(d,"y",.5);l.setOrigin(p,v)}l.blendMode=y(n,"blendMode",c.NORMAL),l.visible=y(n,"visible",!0);var g=y(n,"add",!0);return g&&h.sys.displayList.add(l),l.preUpdate&&h.sys.updateList.add(l),l};S.exports=u},13059:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(23568),y=function(u,h){var l=c(h,"anims",null);if(l===null)return u;if(typeof l=="string")u.anims.play(l);else if(typeof l=="object"){var n=u.anims,o=c(l,"key",void 0);if(o){var f=c(l,"startFrame",void 0),r=c(l,"delay",0),d=c(l,"repeat",0),p=c(l,"repeatDelay",0),v=c(l,"yoyo",!1),g=c(l,"play",!1),m=c(l,"delayedPlay",0),T={key:o,delay:r,repeat:d,repeatDelay:p,yoyo:v,startFrame:f};g?n.play(T):m>0?n.playAfterDelay(T,m):n.load(T)}}return u};S.exports=y},8050:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(73162),u=s(37277),h=s(51708),l=s(44594),n=s(19186),o=new c({Extends:y,initialize:function(r){y.call(this,r),this.sortChildrenFlag=!1,this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.events.once(l.DESTROY,this.destroy,this)},addChildCallback:function(f){f.displayList&&f.displayList!==this&&f.removeFromDisplayList(),f.parentContainer&&f.parentContainer.remove(f),f.displayList||(this.queueDepthSort(),f.displayList=this,f.emit(h.ADDED_TO_SCENE,f,this.scene),this.events.emit(l.ADDED_TO_SCENE,f,this.scene))},removeChildCallback:function(f){this.queueDepthSort(),f.displayList=null,f.emit(h.REMOVED_FROM_SCENE,f,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,f,this.scene)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(n(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(f,r){return f._depth-r._depth},getChildren:function(){return this.list},shutdown:function(){for(var f=this.list,r=f.length;r--;)f[r]&&f[r].destroy(!0);f.length=0,this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});u.register("DisplayList",o,"displayList"),S.exports=o},95643:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(53774),u=s(45893),h=s(50792),l=s(51708),n=s(44594),o=new c({Extends:h,initialize:function(r,d){h.call(this),this.scene=r,this.displayList=null,this.type=d,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(l.ADDED_TO_SCENE,this.addedToScene,this),this.on(l.REMOVED_FROM_SCENE,this.removedFromScene,this),r.sys.queueDepthSort()},setActive:function(f){return this.active=f,this},setName:function(f){return this.name=f,this},setState:function(f){return this.state=f,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(f,r){return this.data||(this.data=new u(this)),this.data.set(f,r),this},incData:function(f,r){return this.data||(this.data=new u(this)),this.data.inc(f,r),this},toggleData:function(f){return this.data||(this.data=new u(this)),this.data.toggle(f),this},getData:function(f){return this.data||(this.data=new u(this)),this.data.get(f)},setInteractive:function(f,r,d){return this.scene.sys.input.enable(this,f,r,d),this},disableInteractive:function(f){return f===void 0&&(f=!1),this.scene.sys.input.disable(this,f),this},removeInteractive:function(f){return f===void 0&&(f=!1),this.scene.sys.input.clear(this),f&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return y(this)},willRender:function(f){var r=this.displayList&&this.displayList.active?this.displayList.willRender(f):!0;return!(!r||o.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&f.id)},getIndexList:function(){for(var f=this,r=this.parentContainer,d=[];r&&(d.unshift(r.getIndex(f)),f=r,r.parentContainer);)r=r.parentContainer;return this.displayList?d.unshift(this.displayList.getIndex(f)):d.unshift(this.scene.sys.displayList.getIndex(f)),d},addToDisplayList:function(f){return f===void 0&&(f=this.scene.sys.displayList),this.displayList&&this.displayList!==f&&this.removeFromDisplayList(),f.exists(this)||(this.displayList=f,f.add(this,!0),f.queueDepthSort(),this.emit(l.ADDED_TO_SCENE,this,this.scene),f.events.emit(n.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var f=this.displayList||this.scene.sys.displayList;return f&&f.exists(this)&&(f.remove(this,!0),f.queueDepthSort(),this.displayList=null,this.emit(l.REMOVED_FROM_SCENE,this,this.scene),f.events.emit(n.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var f=null;return this.parentContainer?f=this.parentContainer.list:this.displayList&&(f=this.displayList.list),f},destroy:function(f){!this.scene||this.ignoreDestroy||(f===void 0&&(f=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(l.DESTROY,this,f),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});o.RENDER_MASK=15,S.exports=o},44603:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(37277),u=s(44594),h=new c({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(l,n){h.prototype.hasOwnProperty(l)||(h.prototype[l]=n)},h.remove=function(l){h.prototype.hasOwnProperty(l)&&delete h.prototype[l]},y.register("GameObjectCreator",h,"make"),S.exports=h},39429:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(37277),u=s(44594),h=new c({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},existing:function(l){return(l.renderCanvas||l.renderWebGL)&&this.displayList.add(l),l.preUpdate&&this.updateList.add(l),l},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(l,n){h.prototype.hasOwnProperty(l)||(h.prototype[l]=n)},h.remove=function(l){h.prototype.hasOwnProperty(l)&&delete h.prototype[l]},y.register("GameObjectFactory",h,"add"),S.exports=h},91296:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(61340),y=new c,u=new c,h=new c,l={camera:y,sprite:u,calc:h},n=function(o,f,r){var d=y,p=u,v=h;return p.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),d.copyFrom(f.matrix),r?(d.multiplyWithOffset(r,-f.scrollX*o.scrollFactorX,-f.scrollY*o.scrollFactorY),p.e=o.x,p.f=o.y):(p.e-=f.scrollX*o.scrollFactorX,p.f-=f.scrollY*o.scrollFactorY),d.multiply(p,v),l};S.exports=n},45027:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(25774),u=s(37277),h=s(44594),l=new c({Extends:y,initialize:function(o){y.call(this),this.checkQueue=!0,this.scene=o,this.systems=o.sys,o.sys.events.once(h.BOOT,this.boot,this),o.sys.events.on(h.START,this.start,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){var n=this.systems.events;n.on(h.PRE_UPDATE,this.update,this),n.on(h.UPDATE,this.sceneUpdate,this),n.once(h.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(n,o){for(var f=this._active,r=f.length,d=0;d<r;d++){var p=f[d];p.active&&p.preUpdate.call(p,n,o)}},shutdown:function(){for(var n=this._active.length;n--;)this._active[n].destroy(!0);for(n=this._pending.length;n--;)this._pending[n].destroy(!0);for(n=this._destroy.length;n--;)this._destroy[n].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var o=this.systems.events;o.off(h.PRE_UPDATE,this.update,this),o.off(h.UPDATE,this.sceneUpdate,this),o.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});u.register("UpdateList",l,"updateList"),S.exports=l},3217:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h,l,n,o,f,r,d,p,v,g,m){var T=y.x-c.displayOriginX+h,P=y.y-c.displayOriginY+l,M=T+y.w,b=P+y.h,R=n.a,A=n.b,D=n.c,G=n.d,F=n.e,B=n.f,N=T*R+P*D+F,z=T*A+P*G+B,$=T*R+b*D+F,Q=T*A+b*G+B,Z=M*R+b*D+F,tt=M*A+b*G+B,H=M*R+P*D+F,J=M*A+P*G+B;o&&(N=Math.round(N),z=Math.round(z),$=Math.round($),Q=Math.round(Q),Z=Math.round(Z),tt=Math.round(tt),H=Math.round(H),J=Math.round(J)),s.batchQuad(c,N,z,$,Q,Z,tt,H,J,u.u0,u.v0,u.u1,u.v1,f,r,d,p,v,g,m)};S.exports=w},53048:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){if(y===void 0&&(y=!1),u===void 0)return u={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},u;var h=s.text,l=h.length,n=s.maxWidth,o=s.wordWrapCharCode,f=Number.MAX_VALUE,r=Number.MAX_VALUE,d=0,p=0,v=s.fontData.chars,g=s.fontData.lineHeight,m=s.letterSpacing,T=s.lineSpacing,P=0,M=0,b=0,R=null,A=s._align,D=0,G=0,F=s.fontSize/s.fontData.size,B=F*s.scaleX,N=F*s.scaleY,z=null,$=0,Q=[],Z=Number.MAX_VALUE,tt=0,H=0,J=0,Y,_,U,et=[],nt=[],rt=null,ot=function(ve,Le){for(var Kt=0,de=0;de<ve.length;de++){var Nt=ve.charCodeAt(de),ge=Le.chars[Nt];ge&&(Kt+=ge.xAdvance)}return Kt*B};if(n>0){U=h.split(`
`);var dt=[];for(Y=0;Y<U.length;Y++){var vt=U[Y],mt="",gt="",yt="",St="";for(_=0;_<vt.length;_++)if(b=vt.charCodeAt(_),mt+=vt[_],b===o||_===vt.length-1){St=yt+mt;var Ct=ot(St,s.fontData);Ct<=n?yt=St:(gt=gt.slice(0,-1),gt+=(gt?`
`:"")+yt,yt=mt),mt=""}gt=gt.slice(0,-1),gt+=(gt?`
`:"")+yt,dt.push(gt)}h=dt.join(`
`),u.wrappedText=h,l=h.length}var bt=0;for(Y=0;Y<l;Y++){if(b=h.charCodeAt(Y),b===10){rt!==null&&(et.push({word:rt.word,i:rt.i,x:rt.x*B,y:rt.y*N,w:rt.w*B,h:rt.h*N}),rt=null),z=null,Q[H]=J,J>tt&&(tt=J),J<Z&&(Z=J),H++,J=0,P=0,M=(g+T)*H;continue}if(R=v[b],!!R){if(D=P,G=M,z!==null){var At=R.kerning[$];D+=At!==void 0?At:0}f>D&&(f=D),r>G&&(r=G);var Lt=D+R.xAdvance,Tt=G+g;d<Lt&&(d=Lt),p<Tt&&(p=Tt);var Et=R.xOffset+R.xAdvance+(At!==void 0?At:0);b===o?rt!==null&&(et.push({word:rt.word,i:rt.i,x:rt.x*B,y:rt.y*N,w:rt.w*B,h:rt.h*N}),rt=null):(rt===null&&(rt={word:"",i:bt,x:P,y:M,w:0,h:g}),rt.word=rt.word.concat(h[Y]),rt.w+=Et),nt.push({i:bt,idx:Y,char:h[Y],code:b,x:(R.xOffset+D)*F,y:(R.yOffset+M)*F,w:R.width*F,h:R.height*F,t:M*F,r:Lt*F,b:g*F,line:H,glyph:R}),P+=R.xAdvance+m+(At!==void 0?At:0),z=R,$=b,J=Lt*F,bt++}}if(rt!==null&&et.push({word:rt.word,i:rt.i,x:rt.x*B,y:rt.y*N,w:rt.w*B,h:rt.h*N}),Q[H]=J,J>tt&&(tt=J),J<Z&&(Z=J),A>0)for(var wt=0;wt<nt.length;wt++){var Wt=nt[wt];if(A===1){var Zt=(tt-Q[Wt.line])/2;Wt.x+=Zt,Wt.r+=Zt}else if(A===2){var ue=tt-Q[Wt.line];Wt.x+=ue,Wt.r+=ue}}var Qt=u.local,jt=u.global;return U=u.lines,Qt.x=f*F,Qt.y=r*F,Qt.width=d*F,Qt.height=p*F,jt.x=s.x-s._displayOriginX+f*B,jt.y=s.y-s._displayOriginY+r*N,jt.width=d*B,jt.height=p*N,U.shortest=Z,U.longest=tt,U.lengths=Q,c&&(Qt.x=Math.ceil(Qt.x),Qt.y=Math.ceil(Qt.y),Qt.width=Math.ceil(Qt.width),Qt.height=Math.ceil(Qt.height),jt.x=Math.ceil(jt.x),jt.y=Math.ceil(jt.y),jt.width=Math.ceil(jt.width),jt.height=Math.ceil(jt.height),U.shortest=Math.ceil(Z),U.longest=Math.ceil(tt)),y&&(s._displayOriginX=s.originX*Qt.width,s._displayOriginY=s.originY*Qt.height,jt.x=s.x-s._displayOriginX*s.scaleX,jt.y=s.y-s._displayOriginY*s.scaleY,c&&(jt.x=Math.ceil(jt.x),jt.y=Math.ceil(jt.y))),u.words=et,u.characters=nt,u.lines.height=g,u.scale=F,u.scaleX=s.scaleX,u.scaleY=s.scaleY,u};S.exports=w},61327:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(21859),y=function(u,h,l,n,o,f,r){var d=u.sys.textures.get(l),p=d.get(n),v=u.sys.cache.xml.get(o);if(p&&v){var g=c(v,p,f,r,d);return u.sys.cache.bitmapFont.add(h,{data:g,texture:l,frame:n,fromAtlas:!0}),!0}else return!1};S.exports=y},6925:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35154),y=function(u,h){var l=h.width,n=h.height,o=Math.floor(l/2),f=Math.floor(n/2),r=c(h,"chars","");if(r!==""){var d=c(h,"image",""),p=u.sys.textures.getFrame(d),v=p.cutX,g=p.cutY,m=p.source.width,T=p.source.height,P=c(h,"offset.x",0),M=c(h,"offset.y",0),b=c(h,"spacing.x",0),R=c(h,"spacing.y",0),A=c(h,"lineSpacing",0),D=c(h,"charsPerRow",null);D===null&&(D=m/l,D>r.length&&(D=r.length));for(var G=P,F=M,B={retroFont:!0,font:d,size:l,lineHeight:n+A,chars:{}},N=0,z=0;z<r.length;z++){var $=r.charCodeAt(z),Q=(v+G)/m,Z=(g+F)/T,tt=(v+G+l)/m,H=(g+F+n)/T;B.chars[$]={x:G,y:F,width:l,height:n,centerX:o,centerY:f,xOffset:0,yOffset:0,xAdvance:l,data:{},kerning:{},u0:Q,v0:Z,u1:tt,v1:H},N++,N===D?(N=0,G=P,F+=n+R):G+=l+b}var J={data:B,frame:null,texture:d};return J}};S.exports=y},21859:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(c,y){return parseInt(c.getAttribute(y),10)}var s=function(c,y,u,h,l){u===void 0&&(u=0),h===void 0&&(h=0);var n=y.cutX,o=y.cutY,f=y.source.width,r=y.source.height,d=y.sourceIndex,p={},v=c.getElementsByTagName("info")[0],g=c.getElementsByTagName("common")[0];p.font=v.getAttribute("face"),p.size=w(v,"size"),p.lineHeight=w(g,"lineHeight")+h,p.chars={};var m=c.getElementsByTagName("char"),T=y!==void 0&&y.trimmed;if(T)var P=y.height,M=y.width;for(var b=0;b<m.length;b++){var R=m[b],A=w(R,"id"),D=String.fromCharCode(A),G=w(R,"x"),F=w(R,"y"),B=w(R,"width"),N=w(R,"height");T&&(G<M&&(M=G),F<P&&(P=F)),T&&P!==0&&M!==0&&(G-=y.x,F-=y.y);var z=(n+G)/f,$=(o+F)/r,Q=(n+G+B)/f,Z=(o+F+N)/r;if(p.chars[A]={x:G,y:F,width:B,height:N,centerX:Math.floor(B/2),centerY:Math.floor(N/2),xOffset:w(R,"xoffset"),yOffset:w(R,"yoffset"),xAdvance:w(R,"xadvance")+u,data:{},kerning:{},u0:z,v0:$,u1:Q,v1:Z},l&&B!==0&&N!==0){var tt=l.add(D,d,G,F,B,N);tt&&tt.setUVs(B,N,z,$,Q,Z)}}var H=c.getElementsByTagName("kerning");for(b=0;b<H.length;b++){var J=H[b],Y=w(J,"first"),_=w(J,"second"),U=w(J,"amount");p.chars[_].kerning[Y]=U}return p};S.exports=s},196:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87662),y=s(79291),u={Parse:s(6925)};u=y(!1,u,c),S.exports=u},87662:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};S.exports=w},2638:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(22186),y=s(83419),u=s(12310),h=new y({Extends:c,Mixins:[u],initialize:function(n,o,f,r,d,p,v){c.call(this,n,o,f,r,d,p,v),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(l,n){return this.cropWidth=l,this.cropHeight=n,this},setDisplayCallback:function(l){return this.displayCallback=l,this},setScrollX:function(l){return this.scrollX=l,this},setScrollY:function(l){return this.scrollY=l,this}});S.exports=h},86741:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(20926),y=function(u,h,l,n){var o=h._text,f=o.length,r=u.currentContext;if(!(f===0||!c(u,r,h,l,n))){l.addToRenderList(h);var d=h.fromAtlas?h.frame:h.texture.frames.__BASE,p=h.displayCallback,v=h.callbackData,g=h.fontData.chars,m=h.fontData.lineHeight,T=h._letterSpacing,P=0,M=0,b=0,R=null,A=0,D=0,G=0,F=0,B=0,N=0,z=null,$=0,Q=h.frame.source.image,Z=d.cutX,tt=d.cutY,H=0,J=0,Y=h._fontSize/h.fontData.size,_=h._align,U=0,et=0;h.getTextBounds(!1);var nt=h._bounds.lines;_===1?et=(nt.longest-nt.lengths[0])/2:_===2&&(et=nt.longest-nt.lengths[0]),r.translate(-h.displayOriginX,-h.displayOriginY);var rt=l.roundPixels;h.cropWidth>0&&h.cropHeight>0&&(r.beginPath(),r.rect(0,0,h.cropWidth,h.cropHeight),r.clip());for(var ot=0;ot<f;ot++){if(J=Y,H=0,b=o.charCodeAt(ot),b===10){U++,_===1?et=(nt.longest-nt.lengths[U])/2:_===2&&(et=nt.longest-nt.lengths[U]),P=0,M+=m,z=null;continue}if(R=g[b],!!R){if(A=Z+R.x,D=tt+R.y,G=R.width,F=R.height,B=R.xOffset+P-h.scrollX,N=R.yOffset+M-h.scrollY,z!==null){var dt=R.kerning[$];B+=dt!==void 0?dt:0}if(p){v.index=ot,v.charCode=b,v.x=B,v.y=N,v.scale=J,v.rotation=H,v.data=R.data;var vt=p(v);B=vt.x,N=vt.y,J=vt.scale,H=vt.rotation}B*=J,N*=J,B+=et,P+=R.xAdvance+T+(dt!==void 0?dt:0),z=R,$=b,!(G===0||F===0||b===32)&&(rt&&(B=Math.round(B),N=Math.round(N)),r.save(),r.translate(B,N),r.rotate(H),r.scale(J,J),r.drawImage(Q,A,D,G,F,0,0,G,F),r.restore())}}r.restore()}};S.exports=y},11164:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2638),y=s(25305),u=s(44603),h=s(23568);u.register("dynamicBitmapText",function(l,n){l===void 0&&(l={});var o=h(l,"font",""),f=h(l,"text",""),r=h(l,"size",!1),d=new c(this.scene,0,0,o,f,r);return n!==void 0&&(l.add=n),y(this.scene,d,l),d})},72566:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2638),y=s(39429);y.register("dynamicBitmapText",function(u,h,l,n,o){return this.displayList.add(new c(this.scene,u,h,l,n,o))})},12310:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(73482),u=s(86741),S.exports={renderWebGL:y,renderCanvas:u}},73482:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=s(61340),u=s(70554),h=new y,l=function(n,o,f,r){var d=o.text,p=d.length;if(p!==0){f.addToRenderList(o);var v=n.pipelines.set(o.pipeline,o),g=c(o,f,r);n.pipelines.preBatch(o);var m=g.sprite,T=g.calc,P=h,M=o.cropWidth>0||o.cropHeight>0;M&&(v.flush(),n.pushScissor(T.tx,T.ty,o.cropWidth*T.scaleX,o.cropHeight*T.scaleY));var b=o.frame,R=b.glTexture,A=o.tintFill,D=u.getTintAppendFloatAlpha(o.tintTopLeft,f.alpha*o._alphaTL),G=u.getTintAppendFloatAlpha(o.tintTopRight,f.alpha*o._alphaTR),F=u.getTintAppendFloatAlpha(o.tintBottomLeft,f.alpha*o._alphaBL),B=u.getTintAppendFloatAlpha(o.tintBottomRight,f.alpha*o._alphaBR),N=v.setGameObject(o),z=0,$=0,Q=0,Z=0,tt=o.letterSpacing,H,J=0,Y=0,_,U=o.scrollX,et=o.scrollY,nt=o.fontData,rt=nt.chars,ot=nt.lineHeight,dt=o.fontSize/nt.size,vt=0,mt=o._align,gt=0,yt=0,St=o.getTextBounds(!1);o.maxWidth>0&&(d=St.wrappedText,p=d.length);var Ct=o._bounds.lines;mt===1?yt=(Ct.longest-Ct.lengths[0])/2:mt===2&&(yt=Ct.longest-Ct.lengths[0]);for(var bt=f.roundPixels,At=o.displayCallback,Lt=o.callbackData,Tt=0;Tt<p;Tt++){if(Q=d.charCodeAt(Tt),Q===10){gt++,mt===1?yt=(Ct.longest-Ct.lengths[gt])/2:mt===2&&(yt=Ct.longest-Ct.lengths[gt]),z=0,$+=ot,_=null;continue}if(H=rt[Q],!!H){J=H.width,Y=H.height;var Et=H.xOffset+z-U,wt=H.yOffset+$-et;if(_!==null){var Wt=H.kerning[Z]||0;Et+=Wt,z+=Wt}if(z+=H.xAdvance+tt,_=H,Z=Q,!(J===0||Y===0||Q===32)){if(dt=o.fontSize/o.fontData.size,vt=0,At){Lt.color=0,Lt.tint.topLeft=D,Lt.tint.topRight=G,Lt.tint.bottomLeft=F,Lt.tint.bottomRight=B,Lt.index=Tt,Lt.charCode=Q,Lt.x=Et,Lt.y=wt,Lt.scale=dt,Lt.rotation=vt,Lt.data=H.data;var Zt=At(Lt);Et=Zt.x,wt=Zt.y,dt=Zt.scale,vt=Zt.rotation,Zt.color?(D=Zt.color,G=Zt.color,F=Zt.color,B=Zt.color):(D=Zt.tint.topLeft,G=Zt.tint.topRight,F=Zt.tint.bottomLeft,B=Zt.tint.bottomRight),D=u.getTintAppendFloatAlpha(D,f.alpha*o._alphaTL),G=u.getTintAppendFloatAlpha(G,f.alpha*o._alphaTR),F=u.getTintAppendFloatAlpha(F,f.alpha*o._alphaBL),B=u.getTintAppendFloatAlpha(B,f.alpha*o._alphaBR)}Et*=dt,wt*=dt,Et-=o.displayOriginX,wt-=o.displayOriginY,Et+=yt,P.applyITRS(Et,wt,vt,dt,dt),T.multiply(P,m);var ue=H.u0,Qt=H.v0,jt=H.u1,ve=H.v1,Le=J,Kt=Y,de=m.e,Nt=m.f,ge=Kt*m.c+m.e,Oi=Kt*m.d+m.f,os=Le*m.a+Kt*m.c+m.e,Es=Le*m.b+Kt*m.d+m.f,ws=Le*m.a+m.e,fi=Le*m.b+m.f;bt&&(de=Math.round(de),Nt=Math.round(Nt),ge=Math.round(ge),Oi=Math.round(Oi),os=Math.round(os),Es=Math.round(Es),ws=Math.round(ws),fi=Math.round(fi)),v.shouldFlush(6)&&(v.flush(),N=v.setGameObject(o)),v.batchQuad(o,de,Nt,ge,Oi,os,Es,ws,fi,ue,Qt,jt,ve,D,G,F,B,A,R,N)}}}M&&(v.flush(),n.popScissor()),n.pipelines.postBatch(o)}};S.exports=l},22186:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(45319),u=s(31401),h=s(95643),l=s(53048),n=s(61327),o=s(21859),f=s(87841),r=s(18658),d=new c({Extends:h,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Texture,u.Tint,u.Transform,u.Visible,r],initialize:function(v,g,m,T,P,M,b){P===void 0&&(P=""),b===void 0&&(b=0),h.call(this,v,"BitmapText"),this.font=T;var R=this.scene.sys.cache.bitmapFont.get(T);if(!R)throw new Error("Invalid BitmapText key: "+T);this.fontData=R.data,this._text="",this._fontSize=M||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=b,this._bounds=l(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=R.fromAtlas,this.setTexture(R.texture,R.frame),this.setPosition(g,m),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(P)},setLeftAlign:function(){return this._align=d.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=d.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=d.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(p){return this._fontSize=p,this._dirty=!0,this},setLetterSpacing:function(p){return p===void 0&&(p=0),this._letterSpacing=p,this._dirty=!0,this},setLineSpacing:function(p){return p===void 0&&(p=0),this.lineSpacing=p,this},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this.text&&(this._text=p.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(p,v,g,m){return p===void 0&&(p=0),v===void 0&&(v=0),g===void 0&&(g=0),m===void 0&&(m=.5),this.dropShadowX=p,this.dropShadowY=v,this.dropShadowColor=g,this.dropShadowAlpha=m,this},setCharacterTint:function(p,v,g,m,T,P,M){p===void 0&&(p=0),v===void 0&&(v=1),g===void 0&&(g=!1),m===void 0&&(m=-1),T===void 0&&(T=m,P=m,M=m);var b=this.text.length;v===-1&&(v=b),p<0&&(p=b+p),p=y(p,0,b-1);for(var R=y(p+v,p,b),A=this.charColors,D=p;D<R;D++){var G=A[D];if(m===-1)A[D]=null;else{var F=g?1:0;G?(G.tintEffect=F,G.tintTL=m,G.tintTR=T,G.tintBL=P,G.tintBR=M):A[D]={tintEffect:F,tintTL:m,tintTR:T,tintBL:P,tintBR:M}}}return this},setWordTint:function(p,v,g,m,T,P,M){v===void 0&&(v=1);for(var b=this.getTextBounds(),R=b.words,A=typeof p=="number",D=0,G=0;G<R.length;G++){var F=R[G];if((A&&G===p||!A&&F.word===p)&&(this.setCharacterTint(F.i,F.word.length,g,m,T,P,M),D++,D===v))return this}return this},getTextBounds:function(p){var v=this._bounds;return(this._dirty||p||this.scaleX!==v.scaleX||this.scaleY!==v.scaleY)&&(l(this,p,!0,v),this._dirty=!1),v},getCharacterAt:function(p,v,g){for(var m=this.getLocalPoint(p,v,null,g),T=this.getTextBounds(),P=T.characters,M=new f,b=0;b<P.length;b++){var R=P[b];if(M.setTo(R.x,R.t,R.r-R.x,R.b),M.contains(m.x,m.y))return R}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(p,v,g){v===void 0&&(v=this._fontSize),g===void 0&&(g=this._align);var m=this.scene.sys.cache.bitmapFont.get(p);return m&&(this.font=p,this.fontData=m.data,this._fontSize=v,this._align=g,this.fromAtlas=m.fromAtlas===!0,this.setTexture(m.texture,m.frame),l(this,!1,!0,this._bounds)),this},setMaxWidth:function(p,v){return this._maxWidth=p,this._dirty=!0,v!==void 0&&(this.wordWrapCharCode=v),this},setDisplaySize:function(p,v){this.setScale(1,1),this.getTextBounds(!1);var g=p/this.width,m=v/this.height;return this.setScale(g,m),this},align:{set:function(p){this._align=p,this._dirty=!0},get:function(){return this._align}},text:{set:function(p){this.setText(p)},get:function(){return this._text}},fontSize:{set:function(p){this._fontSize=p,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(p){this._letterSpacing=p,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(p){this._lineSpacing=p,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(p){this._maxWidth=p,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{set:function(p){this.setScaleX(1),this.getTextBounds(!1);var v=p/this.width;this.setScaleX(v)},get:function(){return this.width}},displayHeight:{set:function(p){this.setScaleY(1),this.getTextBounds(!1);var v=p/this.height;this.setScaleY(v)},get:function(){return this.height}},toJSON:function(){var p=u.ToJSON(this),v={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return p.data=v,p},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});d.ALIGN_LEFT=0,d.ALIGN_CENTER=1,d.ALIGN_RIGHT=2,d.ParseFromAtlas=n,d.ParseXMLBitmapFont=o,S.exports=d},37289:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(20926),y=function(u,h,l,n){var o=h._text,f=o.length,r=u.currentContext;if(!(f===0||!c(u,r,h,l,n))){l.addToRenderList(h);var d=h.fromAtlas?h.frame:h.texture.frames.__BASE,p=h.fontData.chars,v=h.fontData.lineHeight,g=h._letterSpacing,m=h._lineSpacing,T=0,P=0,M=0,b=null,R=0,A=0,D=0,G=0,F=0,B=0,N=null,z=0,$=d.source.image,Q=d.cutX,Z=d.cutY,tt=h._fontSize/h.fontData.size,H=h._align,J=0,Y=0,_=h.getTextBounds(!1);h.maxWidth>0&&(o=_.wrappedText,f=o.length);var U=h._bounds.lines;H===1?Y=(U.longest-U.lengths[0])/2:H===2&&(Y=U.longest-U.lengths[0]),r.translate(-h.displayOriginX,-h.displayOriginY);for(var et=l.roundPixels,nt=0;nt<f;nt++){if(M=o.charCodeAt(nt),M===10){J++,H===1?Y=(U.longest-U.lengths[J])/2:H===2&&(Y=U.longest-U.lengths[J]),T=0,P+=v+m,N=null;continue}if(b=p[M],!!b){if(R=Q+b.x,A=Z+b.y,D=b.width,G=b.height,F=b.xOffset+T,B=b.yOffset+P,N!==null){var rt=b.kerning[z];F+=rt!==void 0?rt:0}F*=tt,B*=tt,F+=Y,T+=b.xAdvance+g+(rt!==void 0?rt:0),N=b,z=M,!(D===0||G===0||M===32)&&(et&&(F=Math.round(F),B=Math.round(B)),r.save(),r.translate(F,B),r.scale(tt,tt),r.drawImage($,R,A,D,G,0,0,D,G),r.restore())}}r.restore()}};S.exports=y},57336:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(22186),y=s(25305),u=s(44603),h=s(23568),l=s(35154);u.register("bitmapText",function(n,o){n===void 0&&(n={});var f=l(n,"font",""),r=h(n,"text",""),d=h(n,"size",!1),p=l(n,"align",0),v=new c(this.scene,0,0,f,r,d,p);return o!==void 0&&(n.add=o),y(this.scene,v,n),v})},34914:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(22186),y=s(39429);y.register("bitmapText",function(u,h,l,n,o,f){return this.displayList.add(new c(this.scene,u,h,l,n,o,f))})},18658:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(33590),u=s(37289),S.exports={renderWebGL:y,renderCanvas:u}},33590:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(3217),y=s(91296),u=s(70554),h=function(l,n,o,f){var r=n._text,d=r.length;if(d!==0){o.addToRenderList(n);var p=l.pipelines.set(n.pipeline,n),v=y(n,o,f).calc;l.pipelines.preBatch(n);var g=o.roundPixels,m=o.alpha,T=n.charColors,P=n.tintFill,M=u.getTintAppendFloatAlpha,b=M(n.tintTopLeft,m*n._alphaTL),R=M(n.tintTopRight,m*n._alphaTR),A=M(n.tintBottomLeft,m*n._alphaBL),D=M(n.tintBottomRight,m*n._alphaBR),G=n.frame.glTexture,F=p.setGameObject(n),B=n.getTextBounds(!1),N,z,$,Q=B.characters,Z=n.dropShadowX,tt=n.dropShadowY,H=Z!==0||tt!==0;if(H){var J=n.dropShadowColor,Y=n.dropShadowAlpha,_=M(J,m*Y*n._alphaTL),U=M(J,m*Y*n._alphaTR),et=M(J,m*Y*n._alphaBL),nt=M(J,m*Y*n._alphaBR);for(N=0;N<Q.length;N++)z=Q[N],$=z.glyph,!(z.code===32||$.width===0||$.height===0)&&c(p,n,z,$,Z,tt,v,g,_,U,et,nt,1,G,F)}for(N=0;N<Q.length;N++)if(z=Q[N],$=z.glyph,!(z.code===32||$.width===0||$.height===0))if(p.shouldFlush(6)&&(p.flush(),F=p.setGameObject(n)),T[z.i]){var rt=T[z.i],ot=rt.tintEffect,dt=M(rt.tintTL,m*n._alphaTL),vt=M(rt.tintTR,m*n._alphaTR),mt=M(rt.tintBL,m*n._alphaBL),gt=M(rt.tintBR,m*n._alphaBR);c(p,n,z,$,0,0,v,g,dt,vt,mt,gt,ot,G,F)}else c(p,n,z,$,0,0,v,g,b,R,A,D,P,G,F);l.pipelines.postBatch(n)}};S.exports=h},6107:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(48011),y=s(46590),u=s(83419),h=s(31401),l=s(4327),n=s(95643),o=s(73162),f=new u({Extends:n,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Size,h.Texture,h.Transform,h.Visible,c],initialize:function(d,p,v,g,m){n.call(this,d,"Blitter"),this.setTexture(g,m),this.setPosition(p,v),this.initPipeline(),this.initPostPipeline(),this.children=new o,this.renderList=[],this.dirty=!1},create:function(r,d,p,v,g){v===void 0&&(v=!0),g===void 0&&(g=this.children.length),p===void 0?p=this.frame:p instanceof l||(p=this.texture.get(p));var m=new y(this,r,d,p,v);return this.children.addAt(m,g,!1),this.dirty=!0,m},createFromCallback:function(r,d,p,v){for(var g=this.createMultiple(d,p,v),m=0;m<g.length;m++){var T=g[m];r.call(this,T,m)}return g},createMultiple:function(r,d,p){d===void 0&&(d=this.frame.name),p===void 0&&(p=!0),Array.isArray(d)||(d=[d]);var v=[],g=this;return d.forEach(function(m){for(var T=0;T<r;T++)v.push(g.create(0,0,m,p))}),v},childCanRender:function(r){return r.visible&&r.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});S.exports=f},72396:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){var h=c.getRenderList();if(h.length!==0){var l=s.currentContext,n=y.alpha*c.alpha;if(n!==0){y.addToRenderList(c),l.globalCompositeOperation=s.blendModes[c.blendMode],l.imageSmoothingEnabled=!c.frame.source.scaleMode;var o=c.x-y.scrollX*c.scrollFactorX,f=c.y-y.scrollY*c.scrollFactorY;l.save(),u&&u.copyToContext(l);for(var r=y.roundPixels,d=0;d<h.length;d++){var p=h[d],v=p.flipX||p.flipY,g=p.frame,m=g.canvasData,T=g.x,P=g.y,M=1,b=1,R=p.alpha*n;R!==0&&(l.globalAlpha=R,v?(p.flipX&&(M=-1,T-=m.width),p.flipY&&(b=-1,P-=m.height),m.width>0&&m.height>0&&(l.save(),l.translate(p.x+o,p.y+f),l.scale(M,b),l.drawImage(g.source.image,m.x,m.y,m.width,m.height,T,P,m.width,m.height),l.restore())):(r&&(T=Math.round(T),P=Math.round(P)),m.width>0&&m.height>0&&l.drawImage(g.source.image,m.x,m.y,m.width,m.height,T+p.x+o,P+p.y+f,m.width,m.height)))}l.restore()}}};S.exports=w},9403:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(6107),y=s(25305),u=s(44603),h=s(23568);u.register("blitter",function(l,n){l===void 0&&(l={});var o=h(l,"key",null),f=h(l,"frame",null),r=new c(this.scene,0,0,o,f);return n!==void 0&&(l.add=n),y(this.scene,r,l),r})},12709:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(6107),y=s(39429);y.register("blitter",function(u,h,l,n){return this.displayList.add(new c(this.scene,u,h,l,n))})},48011:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(99485),u=s(72396),S.exports={renderWebGL:y,renderCanvas:u}},99485:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(61340),y=s(70554),u=new c,h=function(l,n,o,f){var r=n.getRenderList(),d=o.alpha*n.alpha;if(!(r.length===0||d===0)){o.addToRenderList(n);var p=l.pipelines.set(this.pipeline,n),v=o.scrollX*n.scrollFactorX,g=o.scrollY*n.scrollFactorY,m=u.copyFrom(o.matrix);f&&(m.multiplyWithOffset(f,-v,-g),v=0,g=0);var T=n.x-v,P=n.y-g,M=-1,b=!1,R=o.roundPixels;l.pipelines.preBatch(n);for(var A=0;A<r.length;A++){var D=r[A],G=D.frame,F=D.alpha*d;if(F!==0){var B=G.width,N=G.height,z=T+D.x+G.x,$=P+D.y+G.y;D.flipX&&(B*=-1,z+=G.width),D.flipY&&(N*=-1,$+=G.height);var Q=m.setQuad(z,$,z+B,$+N,R),Z=y.getTintAppendFloatAlpha(D.tint,F);if(G.sourceIndex!==M){var tt=p.setGameObject(n,G);M=G.sourceIndex}p.batchQuad(n,Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6],Q[7],G.u0,G.v0,G.u1,G.v1,Z,Z,Z,Z,b,G.glTexture,tt)&&(M=-1)}}l.pipelines.postBatch(n)}};S.exports=h},46590:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(4327),u=new c({initialize:function(l,n,o,f,r){this.parent=l,this.x=n,this.y=o,this.frame=f,this.data={},this.tint=16777215,this._visible=r,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(h){return h===void 0?this.frame=this.parent.frame:h instanceof y&&h.texture===this.parent.texture?this.frame=h:this.frame=this.parent.texture.get(h),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(h,l,n){return this.x=h,this.y=l,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,n&&this.setFrame(n),this},setPosition:function(h,l){return this.x=h,this.y=l,this},setFlipX:function(h){return this.flipX=h,this},setFlipY:function(h){return this.flipY=h,this},setFlip:function(h,l){return this.flipX=h,this.flipY=l,this},setVisible:function(h){return this.visible=h,this},setAlpha:function(h){return this.alpha=h,this},setTint:function(h){return this.tint=h,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(h){this.parent.dirty|=this._visible!==h,this._visible=h}},alpha:{get:function(){return this._alpha},set:function(h){this.parent.dirty|=this._alpha>0!=h>0,this._alpha=h}}});S.exports=u},16005:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45319),y=2,u={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h,l,n,o){return h===void 0&&(h=1),l===void 0?this.alpha=h:(this._alphaTL=c(h,0,1),this._alphaTR=c(l,0,1),this._alphaBL=c(n,0,1),this._alphaBR=c(o,0,1)),this},alpha:{get:function(){return this._alpha},set:function(h){var l=c(h,0,1);this._alpha=l,this._alphaTL=l,this._alphaTR=l,this._alphaBL=l,this._alphaBR=l,l===0?this.renderFlags&=~y:this.renderFlags|=y}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(h){var l=c(h,0,1);this._alphaTL=l,l!==0&&(this.renderFlags|=y)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(h){var l=c(h,0,1);this._alphaTR=l,l!==0&&(this.renderFlags|=y)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(h){var l=c(h,0,1);this._alphaBL=l,l!==0&&(this.renderFlags|=y)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(h){var l=c(h,0,1);this._alphaBR=l,l!==0&&(this.renderFlags|=y)}}};S.exports=u},88509:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45319),y=2,u={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h){return h===void 0&&(h=1),this.alpha=h,this},alpha:{get:function(){return this._alpha},set:function(h){var l=c(h,0,1);this._alpha=l,l===0?this.renderFlags&=~y:this.renderFlags|=y}}};S.exports=u},90065:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(10312),y={_blendMode:c.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(u){typeof u=="string"&&(u=c[u]),u|=0,u>=-1&&(this._blendMode=u)}},setBlendMode:function(u){return this.blendMode=u,this}};S.exports=y},94215:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}},setSize:function(s,c){return this.width=s,this.height=c,this},setDisplaySize:function(s,c){return this.displayWidth=s,this.displayHeight=c,this}};S.exports=w},61683:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={texture:null,frame:null,isCropped:!1,setCrop:function(s,c,y,u){if(s===void 0)this.isCropped=!1;else if(this.frame){if(typeof s=="number")this.frame.setCropUVs(this._crop,s,c,y,u,this.flipX,this.flipY);else{var h=s;this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};S.exports=w},89272:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(37105),y={_depth:0,depth:{get:function(){return this._depth},set:function(u){this.displayList&&this.displayList.queueDepthSort(),this._depth=u}},setDepth:function(u){return u===void 0&&(u=0),this.depth=u,this},setToTop:function(){var u=this.getDisplayList();return u&&c.BringToTop(u,this),this},setToBack:function(){var u=this.getDisplayList();return u&&c.SendToBack(u,this),this},setAbove:function(u){var h=this.getDisplayList();return h&&u&&c.MoveAbove(h,this,u),this},setBelow:function(u){var h=this.getDisplayList();return h&&u&&c.MoveBelow(h,this,u),this}};S.exports=y},47059:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(66064),u=s(19133),h=new c({initialize:function(n,o){this.gameObject=n,this.isPost=o,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(l){return l===void 0&&(l=0),this.padding=l,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(l){if(!this.isPost){var n=this.gameObject.scene.sys.renderer;n&&n.pipelines?(this.gameObject.pipeline=n.pipelines.FX_PIPELINE,l!==void 0&&(this.padding=l),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var l=this.list,n=0;n<l.length;n++)l[n].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(l){var n;if(this.isPost){var o=this.gameObject.getPostPipeline(String(l.type));for(Array.isArray(o)||(o=[o]),n=0;n<o.length;n++){var f=o[n];if(f.controller===l){this.gameObject.removePostPipeline(f),l.destroy();break}}}else{var r=this.list;for(n=0;n<r.length;n++)r[n]===l&&(u(r,n),l.destroy())}return this.gameObject},disable:function(l){return l===void 0&&(l=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,l&&this.clear(),this.gameObject},add:function(l,n){if(this.isPost){var o=String(l.type);this.gameObject.setPostPipeline(o,n);var f=this.gameObject.getPostPipeline(o);if(f)return Array.isArray(f)&&(f=f.pop()),f&&(f.controller=l),l}else return this.enabled||this.enable(),this.list.push(l),l},addGlow:function(l,n,o,f,r,d){return this.add(new y.Glow(this.gameObject,l,n,o,f),{quality:r,distance:d})},addShadow:function(l,n,o,f,r,d,p){return this.add(new y.Shadow(this.gameObject,l,n,o,f,r,d,p))},addPixelate:function(l){return this.add(new y.Pixelate(this.gameObject,l))},addVignette:function(l,n,o,f){return this.add(new y.Vignette(this.gameObject,l,n,o,f))},addShine:function(l,n,o,f){return this.add(new y.Shine(this.gameObject,l,n,o,f))},addBlur:function(l,n,o,f,r,d){return this.add(new y.Blur(this.gameObject,l,n,o,f,r,d))},addGradient:function(l,n,o,f,r,d,p,v){return this.add(new y.Gradient(this.gameObject,l,n,o,f,r,d,p,v))},addBloom:function(l,n,o,f,r,d){return this.add(new y.Bloom(this.gameObject,l,n,o,f,r,d))},addColorMatrix:function(){return this.add(new y.ColorMatrix(this.gameObject))},addCircle:function(l,n,o,f,r){return this.add(new y.Circle(this.gameObject,l,n,o,f,r))},addBarrel:function(l){return this.add(new y.Barrel(this.gameObject,l))},addDisplacement:function(l,n,o){return this.add(new y.Displacement(this.gameObject,l,n,o))},addWipe:function(l,n,o){return this.add(new y.Wipe(this.gameObject,l,n,o))},addReveal:function(l,n,o){return this.add(new y.Wipe(this.gameObject,l,n,o,!0))},addBokeh:function(l,n,o){return this.add(new y.Bokeh(this.gameObject,l,n,o))},addTiltShift:function(l,n,o,f,r,d){return this.add(new y.Bokeh(this.gameObject,l,n,o,!0,f,r,d))},destroy:function(){this.clear(),this.gameObject=null}});S.exports=h},54434:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(s){return this.flipX=s,this},setFlipY:function(s){return this.flipY=s,this},setFlip:function(s,c){return this.flipX=s,this.flipY=c,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};S.exports=w},8004:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87841),y=s(11520),u=s(26099),h={prepareBoundsOutput:function(l,n){if(n===void 0&&(n=!1),this.rotation!==0&&y(l,this.x,this.y,this.rotation),n&&this.parentContainer){var o=this.parentContainer.getBoundsTransformMatrix();o.transformPoint(l.x,l.y,l)}return l},getCenter:function(l,n){return l===void 0&&(l=new u),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,n)},getTopLeft:function(l,n){return l||(l=new u),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,n)},getTopCenter:function(l,n){return l||(l=new u),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,n)},getTopRight:function(l,n){return l||(l=new u),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,n)},getLeftCenter:function(l,n){return l||(l=new u),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,n)},getRightCenter:function(l,n){return l||(l=new u),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,n)},getBottomLeft:function(l,n){return l||(l=new u),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,n)},getBottomCenter:function(l,n){return l||(l=new u),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,n)},getBottomRight:function(l,n){return l||(l=new u),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,n)},getBounds:function(l){l===void 0&&(l=new c);var n,o,f,r,d,p,v,g;if(this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(l),m.transformPoint(l.x,l.y,l),n=l.x,o=l.y,this.getTopRight(l),m.transformPoint(l.x,l.y,l),f=l.x,r=l.y,this.getBottomLeft(l),m.transformPoint(l.x,l.y,l),d=l.x,p=l.y,this.getBottomRight(l),m.transformPoint(l.x,l.y,l),v=l.x,g=l.y}else this.getTopLeft(l),n=l.x,o=l.y,this.getTopRight(l),f=l.x,r=l.y,this.getBottomLeft(l),d=l.x,p=l.y,this.getBottomRight(l),v=l.x,g=l.y;return l.x=Math.min(n,f,d,v),l.y=Math.min(o,r,p,g),l.width=Math.max(n,f,d,v)-l.x,l.height=Math.max(o,r,p,g)-l.y,l}};S.exports=h},8573:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(6858),y=s(80661),u={mask:null,setMask:function(h){return this.mask=h,this},clearMask:function(h){return h===void 0&&(h=!1),h&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(h,l,n,o,f){return h===void 0&&(this.texture||this.shader||this.geom)&&(h=this),new c(this.scene,h,l,n,o,f)},createGeometryMask:function(h){return h===void 0&&(this.type==="Graphics"||this.geom)&&(h=this),new y(this.scene,h)}};S.exports=u},27387:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(s){this._displayOriginX=s,this.originX=s/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(s){this._displayOriginY=s,this.originY=s/this.height}},setOrigin:function(s,c){return s===void 0&&(s=.5),c===void 0&&(c=s),this.originX=s,this.originY=c,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(s,c){return s===void 0&&(s=0),c===void 0&&(c=s),this.displayOriginX=s,this.displayOriginY=c,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};S.exports=w},37640:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39506),y=s(57355),u=s(35154),h=s(86353),l=s(26099),n={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:h.PLAYING_FORWARD,setPath:function(o,f){f===void 0&&(f=this.pathConfig);var r=this.pathTween;return r&&r.isPlaying()&&r.stop(),this.path=o,f&&this.startFollow(f),this},setRotateToPath:function(o,f){return f===void 0&&(f=0),this.rotateToPath=o,this.pathRotationOffset=f,this},isFollowing:function(){var o=this.pathTween;return o&&o.isPlaying()},startFollow:function(o,f){o===void 0&&(o={}),f===void 0&&(f=0);var r=this.pathTween;r&&r.isPlaying()&&r.stop(),typeof o=="number"&&(o={duration:o}),o.from=u(o,"from",0),o.to=u(o,"to",1);var d=y(o,"positionOnPath",!1);this.rotateToPath=y(o,"rotateToPath",!1),this.pathRotationOffset=u(o,"rotationOffset",0);var p=u(o,"startAt",f);if(p&&(o.onStart=function(g){var m=g.data[0];m.progress=p,m.elapsed=m.duration*p;var T=m.ease(m.progress);m.current=m.start+(m.end-m.start)*T,m.setTargetValue()}),this.pathOffset||(this.pathOffset=new l(this.x,this.y)),this.pathVector||(this.pathVector=new l),this.pathDelta||(this.pathDelta=new l),this.pathDelta.reset(),o.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(o),this.path.getStartPoint(this.pathOffset),d&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=h.PLAYING_FORWARD,this.rotateToPath){var v=this.path.getPoint(.1);this.rotation=Math.atan2(v.y-this.y,v.x-this.x)+c(this.pathRotationOffset)}return this.pathConfig=o,this},pauseFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.pause(),this},resumeFollow:function(){var o=this.pathTween;return o&&o.isPaused()&&o.resume(),this},stopFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this},pathUpdate:function(){var o=this.pathTween;if(o&&o.data){var f=o.data[0],r=this.pathDelta,d=this.pathVector;if(r.copy(d).negate(),f.state===h.COMPLETE){this.path.getPoint(f.end,d),r.add(d),d.add(this.pathOffset),this.setPosition(d.x,d.y);return}else if(f.state!==h.PLAYING_FORWARD&&f.state!==h.PLAYING_BACKWARD)return;this.path.getPoint(o.getValue(),d),r.add(d),d.add(this.pathOffset);var p=this.x,v=this.y;this.setPosition(d.x,d.y);var g=this.x-p,m=this.y-v;if(g===0&&m===0)return;if(f.state!==this._prevDirection){this._prevDirection=f.state;return}this.rotateToPath&&(this.rotation=Math.atan2(m,g)+c(this.pathRotationOffset))}}};S.exports=n},72699:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62644),y={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(u){this.pipelineData={};var h=this.scene.sys.renderer;if(!h)return!1;var l=h.pipelines;if(l){u===void 0&&(u=l.default);var n=l.get(u);if(n)return this.defaultPipeline=n,this.pipeline=n,!0}return!1},setPipeline:function(u,h,l){var n=this.scene.sys.renderer;if(!n)return this;var o=n.pipelines;if(o){var f=o.get(u);f&&(this.pipeline=f),h&&(this.pipelineData=l?c(h):h)}return this},setPipelineData:function(u,h){var l=this.pipelineData;return h===void 0?delete l[u]:l[u]=h,this},resetPipeline:function(u){return u===void 0&&(u=!1),this.pipeline=this.defaultPipeline,u&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};S.exports=y},17581:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62644),y=s(47059),u=s(19133),h={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(l){this.postPipelines=[],this.postPipelineData={},this.postFX=new y(this,!0),l&&(this.preFX=new y(this,!1))},setPostPipeline:function(l,n,o){var f=this.scene.sys.renderer;if(!f)return this;var r=f.pipelines;if(r){Array.isArray(l)||(l=[l]);for(var d=0;d<l.length;d++){var p=r.getPostPipeline(l[d],this,n);p&&this.postPipelines.push(p)}n&&(this.postPipelineData=o?c(n):n)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(l,n){var o=this.postPipelineData;return n===void 0?delete o[l]:o[l]=n,this},getPostPipeline:function(l){for(var n=typeof l=="string",o=this.postPipelines,f=[],r=0;r<o.length;r++){var d=o[r];(n&&d.name===l||!n&&d instanceof l)&&f.push(d)}return f.length===1?f[0]:f},resetPostPipeline:function(l){l===void 0&&(l=!1);for(var n=this.postPipelines,o=0;o<n.length;o++)n[o].destroy();this.postPipelines=[],this.hasPostPipeline=!1,l&&(this.postPipelineData={})},removePostPipeline:function(l){for(var n=typeof l=="string",o=this.postPipelines,f=o.length-1;f>=0;f--){var r=o[f];(n&&r.name===l||!n&&r===l)&&(r.destroy(),u(o,f))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};S.exports=h},80227:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(s,c){return c===void 0&&(c=s),this.scrollFactorX=s,this.scrollFactorY=c,this}};S.exports=w},16736:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(s){this.scaleX=s/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(s){this.scaleY=s/this.frame.realHeight}},setSizeToFrame:function(s){s||(s=this.frame),this.width=s.realWidth,this.height=s.realHeight;var c=this.input;return c&&!c.customHitArea&&(c.hitArea.width=this.width,c.hitArea.height=this.height),this},setSize:function(s,c){return this.width=s,this.height=c,this},setDisplaySize:function(s,c){return this.displayWidth=s,this.displayHeight=c,this}};S.exports=w},37726:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(4327),y=8,u={texture:null,frame:null,isCropped:!1,setTexture:function(h,l,n,o){return this.texture=this.scene.sys.textures.get(h),this.setFrame(l,n,o)},setFrame:function(h,l,n){return l===void 0&&(l=!0),n===void 0&&(n=!0),h instanceof c?(this.texture=this.scene.sys.textures.get(h.texture.key),this.frame=h):this.frame=this.texture.get(h),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~y:this.renderFlags|=y,this._sizeComponent&&l&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};S.exports=u},79812:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(4327),y=8,u={texture:null,frame:null,isCropped:!1,setCrop:function(h,l,n,o){if(h===void 0)this.isCropped=!1;else if(this.frame){if(typeof h=="number")this.frame.setCropUVs(this._crop,h,l,n,o,this.flipX,this.flipY);else{var f=h;this.frame.setCropUVs(this._crop,f.x,f.y,f.width,f.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(h,l){return this.texture=this.scene.sys.textures.get(h),this.setFrame(l)},setFrame:function(h,l,n){return l===void 0&&(l=!0),n===void 0&&(n=!0),h instanceof c?(this.texture=this.scene.sys.textures.get(h.texture.key),this.frame=h):this.frame=this.texture.get(h),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~y:this.renderFlags|=y,this._sizeComponent&&l&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};S.exports=u},27472:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(s,c,y,u){return s===void 0&&(s=16777215),c===void 0&&(c=s,y=s,u=s),this.tintTopLeft=s,this.tintTopRight=c,this.tintBottomLeft=y,this.tintBottomRight=u,this.tintFill=!1,this},setTintFill:function(s,c,y,u){return this.setTint(s,c,y,u),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(s){this.setTint(s,s,s,s)}},isTinted:{get:function(){var s=16777215;return this.tintFill||this.tintTopLeft!==s||this.tintTopRight!==s||this.tintBottomLeft!==s||this.tintBottomRight!==s}}};S.exports=w},53774:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c={name:s.name,type:s.type,x:s.x,y:s.y,depth:s.depth,scale:{x:s.scaleX,y:s.scaleY},origin:{x:s.originX,y:s.originY},flipX:s.flipX,flipY:s.flipY,rotation:s.rotation,alpha:s.alpha,visible:s.visible,blendMode:s.blendMode,textureKey:"",frameKey:"",data:{}};return s.texture&&(c.textureKey=s.texture.key,c.frameKey=s.frame.name),c};S.exports=w},16901:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(36383),y=s(61340),u=s(85955),h=s(86554),l=s(30954),n=s(26099),o=4,f={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(r){this._scaleX=r,this._scaleY=r,r===0?this.renderFlags&=~o:this.renderFlags|=o}},scaleX:{get:function(){return this._scaleX},set:function(r){this._scaleX=r,r===0?this.renderFlags&=~o:this._scaleY!==0&&(this.renderFlags|=o)}},scaleY:{get:function(){return this._scaleY},set:function(r){this._scaleY=r,r===0?this.renderFlags&=~o:this._scaleX!==0&&(this.renderFlags|=o)}},angle:{get:function(){return l(this._rotation*c.RAD_TO_DEG)},set:function(r){this.rotation=l(r)*c.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(r){this._rotation=h(r)}},setPosition:function(r,d,p,v){return r===void 0&&(r=0),d===void 0&&(d=r),p===void 0&&(p=0),v===void 0&&(v=0),this.x=r,this.y=d,this.z=p,this.w=v,this},copyPosition:function(r){return r.x!==void 0&&(this.x=r.x),r.y!==void 0&&(this.y=r.y),r.z!==void 0&&(this.z=r.z),r.w!==void 0&&(this.w=r.w),this},setRandomPosition:function(r,d,p,v){return r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),this.x=r+Math.random()*p,this.y=d+Math.random()*v,this},setRotation:function(r){return r===void 0&&(r=0),this.rotation=r,this},setAngle:function(r){return r===void 0&&(r=0),this.angle=r,this},setScale:function(r,d){return r===void 0&&(r=1),d===void 0&&(d=r),this.scaleX=r,this.scaleY=d,this},setX:function(r){return r===void 0&&(r=0),this.x=r,this},setY:function(r){return r===void 0&&(r=0),this.y=r,this},setZ:function(r){return r===void 0&&(r=0),this.z=r,this},setW:function(r){return r===void 0&&(r=0),this.w=r,this},getLocalTransformMatrix:function(r){return r===void 0&&(r=new y),r.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(r,d){r===void 0&&(r=new y);var p=this.parentContainer;if(!p)return this.getLocalTransformMatrix(r);var v=!1;for(d||(d=new y,v=!0),r.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);p;)d.applyITRS(p.x,p.y,p._rotation,p._scaleX,p._scaleY),d.multiply(r,r),p=p.parentContainer;return v&&d.destroy(),r},getLocalPoint:function(r,d,p,v){p||(p=new n),v||(v=this.scene.sys.cameras.main);var g=v.scrollX,m=v.scrollY,T=r+g*this.scrollFactorX-g,P=d+m*this.scrollFactorY-m;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(T,P,p):u(T,P,this.x,this.y,this.rotation,this.scaleX,this.scaleY,p),this._originComponent&&(p.x+=this._displayOriginX,p.y+=this._displayOriginY),p},getWorldPoint:function(r,d,p){r===void 0&&(r=new n);var v=this.parentContainer;if(!v)return r.x=this.x,r.y=this.y,r;var g=this.getWorldTransformMatrix(d,p);return r.x=g.tx,r.y=g.ty,r},getParentRotation:function(){for(var r=0,d=this.parentContainer;d;)r+=d.rotation,d=d.parentContainer;return r}};S.exports=f},61340:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(36383),u=s(26099),h=new c({initialize:function(n,o,f,r,d,p){n===void 0&&(n=1),o===void 0&&(o=0),f===void 0&&(f=0),r===void 0&&(r=1),d===void 0&&(d=0),p===void 0&&(p=0),this.matrix=new Float32Array([n,o,f,r,d,p,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(l){this.matrix[0]=l}},b:{get:function(){return this.matrix[1]},set:function(l){this.matrix[1]=l}},c:{get:function(){return this.matrix[2]},set:function(l){this.matrix[2]=l}},d:{get:function(){return this.matrix[3]},set:function(l){this.matrix[3]=l}},e:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},f:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},tx:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},ty:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var l=this.matrix,n=l[0],o=l[1],f=l[2],r=l[3];return n||o?o>0?Math.acos(n/this.scaleX):-Math.acos(n/this.scaleX):f||r?y.TAU-(r>0?Math.acos(-f/this.scaleY):-Math.acos(f/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var l=this.matrix;return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=0,l[5]=0,this},translate:function(l,n){var o=this.matrix;return o[4]=o[0]*l+o[2]*n+o[4],o[5]=o[1]*l+o[3]*n+o[5],this},scale:function(l,n){var o=this.matrix;return o[0]*=l,o[1]*=l,o[2]*=n,o[3]*=n,this},rotate:function(l){var n=Math.sin(l),o=Math.cos(l),f=this.matrix,r=f[0],d=f[1],p=f[2],v=f[3];return f[0]=r*o+p*n,f[1]=d*o+v*n,f[2]=r*-n+p*o,f[3]=d*-n+v*o,this},multiply:function(l,n){var o=this.matrix,f=l.matrix,r=o[0],d=o[1],p=o[2],v=o[3],g=o[4],m=o[5],T=f[0],P=f[1],M=f[2],b=f[3],R=f[4],A=f[5],D=n===void 0?o:n.matrix;return D[0]=T*r+P*p,D[1]=T*d+P*v,D[2]=M*r+b*p,D[3]=M*d+b*v,D[4]=R*r+A*p+g,D[5]=R*d+A*v+m,D},multiplyWithOffset:function(l,n,o){var f=this.matrix,r=l.matrix,d=f[0],p=f[1],v=f[2],g=f[3],m=f[4],T=f[5],P=n*d+o*v+m,M=n*p+o*g+T,b=r[0],R=r[1],A=r[2],D=r[3],G=r[4],F=r[5];return f[0]=b*d+R*v,f[1]=b*p+R*g,f[2]=A*d+D*v,f[3]=A*p+D*g,f[4]=G*d+F*v+P,f[5]=G*p+F*g+M,this},transform:function(l,n,o,f,r,d){var p=this.matrix,v=p[0],g=p[1],m=p[2],T=p[3],P=p[4],M=p[5];return p[0]=l*v+n*m,p[1]=l*g+n*T,p[2]=o*v+f*m,p[3]=o*g+f*T,p[4]=r*v+d*m+P,p[5]=r*g+d*T+M,this},transformPoint:function(l,n,o){o===void 0&&(o={x:0,y:0});var f=this.matrix,r=f[0],d=f[1],p=f[2],v=f[3],g=f[4],m=f[5];return o.x=l*r+n*p+g,o.y=l*d+n*v+m,o},invert:function(){var l=this.matrix,n=l[0],o=l[1],f=l[2],r=l[3],d=l[4],p=l[5],v=n*r-o*f;return l[0]=r/v,l[1]=-o/v,l[2]=-f/v,l[3]=n/v,l[4]=(f*p-r*d)/v,l[5]=-(n*p-o*d)/v,this},copyFrom:function(l){var n=this.matrix;return n[0]=l.a,n[1]=l.b,n[2]=l.c,n[3]=l.d,n[4]=l.e,n[5]=l.f,this},copyFromArray:function(l){var n=this.matrix;return n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=l[3],n[4]=l[4],n[5]=l[5],this},copyToContext:function(l){var n=this.matrix;return l.transform(n[0],n[1],n[2],n[3],n[4],n[5]),l},setToContext:function(l){return l.setTransform(this.a,this.b,this.c,this.d,this.e,this.f),l},copyToArray:function(l){var n=this.matrix;return l===void 0?l=[n[0],n[1],n[2],n[3],n[4],n[5]]:(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5]),l},setTransform:function(l,n,o,f,r,d){var p=this.matrix;return p[0]=l,p[1]=n,p[2]=o,p[3]=f,p[4]=r,p[5]=d,this},decomposeMatrix:function(){var l=this.decomposedMatrix,n=this.matrix,o=n[0],f=n[1],r=n[2],d=n[3],p=o*d-f*r;if(l.translateX=n[4],l.translateY=n[5],o||f){var v=Math.sqrt(o*o+f*f);l.rotation=f>0?Math.acos(o/v):-Math.acos(o/v),l.scaleX=v,l.scaleY=p/v}else if(r||d){var g=Math.sqrt(r*r+d*d);l.rotation=Math.PI*.5-(d>0?Math.acos(-r/g):-Math.acos(r/g)),l.scaleX=p/g,l.scaleY=g}else l.rotation=0,l.scaleX=0,l.scaleY=0;return l},applyITRS:function(l,n,o,f,r){var d=this.matrix,p=Math.sin(o),v=Math.cos(o);return d[4]=l,d[5]=n,d[0]=v*f,d[1]=p*f,d[2]=-p*r,d[3]=v*r,this},applyInverse:function(l,n,o){o===void 0&&(o=new u);var f=this.matrix,r=f[0],d=f[1],p=f[2],v=f[3],g=f[4],m=f[5],T=1/(r*v+p*-d);return o.x=v*T*l+-p*T*n+(m*p-g*v)*T,o.y=r*T*n+-d*T*l+(-m*r+g*d)*T,o},setQuad:function(l,n,o,f,r,d){r===void 0&&(r=!1),d===void 0&&(d=this.quad);var p=this.matrix,v=p[0],g=p[1],m=p[2],T=p[3],P=p[4],M=p[5],b=l*v+n*m+P,R=l*g+n*T+M,A=l*v+f*m+P,D=l*g+f*T+M,G=o*v+f*m+P,F=o*g+f*T+M,B=o*v+n*m+P,N=o*g+n*T+M;if(r){var z=Math.floor(b+.5),$=Math.floor(R+.5),Q=z-b,Z=$-R;d[0]=z,d[1]=$,d[2]=A+Q,d[3]=D+Z,d[4]=G+Q,d[5]=F+Z,d[6]=B+Q,d[7]=N+Z}else d[0]=b,d[1]=R,d[2]=A,d[3]=D,d[4]=G,d[5]=F,d[6]=B,d[7]=N;return d},getX:function(l,n){return l*this.a+n*this.c+this.e},getY:function(l,n){return l*this.b+n*this.d+this.f},getXRound:function(l,n,o){var f=this.getX(l,n);return o&&(f=Math.floor(f+.5)),f},getYRound:function(l,n,o){var f=this.getY(l,n);return o&&(f=Math.floor(f+.5)),f},getCSSMatrix:function(){var l=this.matrix;return"matrix("+l[0]+","+l[1]+","+l[2]+","+l[3]+","+l[4]+","+l[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});S.exports=h},59715:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=1,s={_visible:!0,visible:{get:function(){return this._visible},set:function(c){c?(this._visible=!0,this.renderFlags|=w):(this._visible=!1,this.renderFlags&=~w)}},setVisible:function(c){return this.visible=c,this}};S.exports=s},31401:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Alpha:s(16005),AlphaSingle:s(88509),BlendMode:s(90065),ComputedSize:s(94215),Crop:s(61683),Depth:s(89272),Flip:s(54434),FX:s(47059),GetBounds:s(8004),Mask:s(8573),Origin:s(27387),PathFollower:s(37640),Pipeline:s(72699),PostPipeline:s(17581),ScrollFactor:s(80227),Size:s(16736),Texture:s(37726),TextureCrop:s(79812),Tint:s(27472),ToJSON:s(53774),Transform:s(16901),TransformMatrix:s(61340),Visible:s(59715)}},31559:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(37105),y=s(10312),u=s(83419),h=s(31401),l=s(51708),n=s(95643),o=s(87841),f=s(29959),r=s(36899),d=s(26099),p=new h.TransformMatrix,v=new u({Extends:n,Mixins:[h.AlphaSingle,h.BlendMode,h.ComputedSize,h.Depth,h.Mask,h.PostPipeline,h.Transform,h.Visible,f],initialize:function(m,T,P,M){n.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new h.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(T,P),this.setBlendMode(y.SKIP_CHECK),M&&this.add(M)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new o),g.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),T=m.transformPoint(this.x,this.y);g.setTo(T.x,T.y,0,0)}if(this.list.length>0){var P=this.list,M=new o,b=!1;g.setEmpty();for(var R=0;R<P.length;R++){var A=P[R];A.getBounds&&(A.getBounds(M),b?r(M,g,g):(g.setTo(M.x,M.y,M.width,M.height),b=!0))}}return g},addHandler:function(g){g.once(l.DESTROY,this.onChildDestroyed,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.parentContainer=this,g.removeFromDisplayList(),g.addedToScene())},removeHandler:function(g){g.off(l.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer=null,g.removedFromScene(),g.addToDisplayList())},pointToContainer:function(g,m){m===void 0&&(m=new d),this.parentContainer?this.parentContainer.pointToContainer(g,m):(m.x=g.x,m.y=g.y);var T=p;return T.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),T.invert(),T.transformPoint(g.x,g.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(p,this.localTransform)},add:function(g){return c.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,m){return c.AddAt(this.list,g,m,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,m){return g?(m===void 0&&(m=function(T,P){return T[g]-P[g]}),c.StableSort(this.list,m),this):this},getByName:function(g){return c.GetFirst(this.list,"name",g)},getRandom:function(g,m){return c.GetRandom(this.list,g,m)},getFirst:function(g,m,T,P){return c.GetFirst(this.list,g,m,T,P)},getAll:function(g,m,T,P){return c.GetAll(this.list,g,m,T,P)},count:function(g,m,T,P){return c.CountAllMatching(this.list,g,m,T,P)},swap:function(g,m){return c.Swap(this.list,g,m),this},moveTo:function(g,m){return c.MoveTo(this.list,g,m),this},moveAbove:function(g,m){return c.MoveAbove(this.list,g,m),this},moveBelow:function(g,m){return c.MoveBelow(this.list,g,m),this},remove:function(g,m){var T=c.Remove(this.list,g,this.removeHandler,this);if(m&&T){Array.isArray(T)||(T=[T]);for(var P=0;P<T.length;P++)T[P].destroy()}return this},removeAt:function(g,m){var T=c.RemoveAt(this.list,g,this.removeHandler,this);return m&&T&&T.destroy(),this},removeBetween:function(g,m,T){var P=c.RemoveBetween(this.list,g,m,this.removeHandler,this);if(T)for(var M=0;M<P.length;M++)P[M].destroy();return this},removeAll:function(g){var m=this.list;if(g){for(var T=0;T<m.length;T++)m[T]&&m[T].scene&&(m[T].off(l.DESTROY,this.onChildDestroyed,this),m[T].destroy());this.list=[]}else c.RemoveBetween(m,0,m.length,this.removeHandler,this);return this},bringToTop:function(g){return c.BringToTop(this.list,g),this},sendToBack:function(g){return c.SendToBack(this.list,g),this},moveUp:function(g){return c.MoveUp(this.list,g),this},moveDown:function(g){return c.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return c.Shuffle(this.list),this},replace:function(g,m,T){var P=c.Replace(this.list,g,m);return P&&(this.addHandler(m),this.removeHandler(g),T&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,m,T,P){return c.SetAll(this.list,g,m,T,P),this},each:function(g,m){var T=[null],P,M=this.list.slice(),b=M.length;for(P=2;P<arguments.length;P++)T.push(arguments[P]);for(P=0;P<b;P++)T[0]=M[P],g.apply(m,T);return this},iterate:function(g,m){var T=[null],P;for(P=2;P<arguments.length;P++)T.push(arguments[P]);for(P=0;P<this.list.length;P++)T[0]=this.list[P],g.apply(m,T);return this},setScrollFactor:function(g,m,T){return m===void 0&&(m=g),T===void 0&&(T=!1),this.scrollFactorX=g,this.scrollFactorY=m,T&&(c.SetAll(this.list,"scrollFactorX",g),c.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(g){c.Remove(this.list,g),this.exclusive&&(g.parentContainer=null,g.removedFromScene())}});S.exports=v},53584:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){y.addToRenderList(c);var h=c.list;if(h.length!==0){var l=c.localTransform;u?(l.loadIdentity(),l.multiply(u),l.translate(c.x,c.y),l.rotate(c.rotation),l.scale(c.scaleX,c.scaleY)):l.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY);var n=c.blendMode!==-1;n||s.setBlendMode(0);var o=c._alpha,f=c.scrollFactorX,r=c.scrollFactorY;c.mask&&c.mask.preRenderCanvas(s,null,y);for(var d=0;d<h.length;d++){var p=h[d];if(p.willRender(y)){var v=p.alpha,g=p.scrollFactorX,m=p.scrollFactorY;!n&&p.blendMode!==s.currentBlendMode&&s.setBlendMode(p.blendMode),p.setScrollFactor(g*f,m*r),p.setAlpha(v*o),p.renderCanvas(s,p,y,l),p.setAlpha(v),p.setScrollFactor(g,m)}}c.mask&&c.mask.postRenderCanvas(s)}};S.exports=w},77143:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(31559),u=s(44603),h=s(23568),l=s(95540);u.register("container",function(n,o){n===void 0&&(n={});var f=h(n,"x",0),r=h(n,"y",0),d=l(n,"children",null),p=new y(this.scene,f,r,d);return o!==void 0&&(n.add=o),c(this.scene,p,n),p})},24961:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(31559),y=s(39429);y.register("container",function(u,h,l){return this.displayList.add(new c(this.scene,u,h,l))})},29959:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(72249),u=s(53584),S.exports={renderWebGL:y,renderCanvas:u}},72249:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){y.addToRenderList(c);var h=c.list,l=h.length;if(l!==0){var n=c.localTransform;u?(n.loadIdentity(),n.multiply(u),n.translate(c.x,c.y),n.rotate(c.rotation),n.scale(c.scaleX,c.scaleY)):n.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY),s.pipelines.preBatch(c);var o=c.blendMode!==-1;o||s.setBlendMode(0);for(var f=c.alpha,r=c.scrollFactorX,d=c.scrollFactorY,p=0;p<l;p++){var v=h[p];if(v.willRender(y)){var g,m,T,P;if(v.alphaTopLeft!==void 0)g=v.alphaTopLeft,m=v.alphaTopRight,T=v.alphaBottomLeft,P=v.alphaBottomRight;else{var M=v.alpha;g=M,m=M,T=M,P=M}var b=v.scrollFactorX,R=v.scrollFactorY;!o&&v.blendMode!==s.currentBlendMode&&s.setBlendMode(v.blendMode);var A=v.mask;A&&A.preRenderWebGL(s,v,y);var D=v.type;D!==s.currentType&&(s.newType=!0,s.currentType=D),s.nextTypeMatch=p<l-1?h[p+1].type===s.currentType:!1,v.setScrollFactor(b*r,R*d),v.setAlpha(g*f,m*f,T*f,P*f),v.renderWebGL(s,v,y,n,c),v.setAlpha(g,m,T,P),v.setScrollFactor(b,R),A&&A.postRenderWebGL(s,y),s.newType=!1}}s.pipelines.postBatch(c)}};S.exports=w},47407:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},3069:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(31401),u=s(441),h=s(95643),l=s(41212),n=s(35846),o=s(44594),f=s(61369),r=new c({Extends:h,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Origin,y.ScrollFactor,y.Transform,y.Visible,u],initialize:function(p,v,g,m,T,P){if(h.call(this,p,"DOMElement"),this.parent=p.sys.game.domContainer,!this.parent)throw new Error("No DOM Container set in game config");this.cache=p.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new f,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(v,g),typeof m=="string"?m[0]==="#"?this.setElement(m.substr(1),T,P):this.createElement(m,T,P):m&&this.setElement(m,T,P),p.sys.events.on(o.SLEEP,this.handleSceneEvent,this),p.sys.events.on(o.WAKE,this.handleSceneEvent,this),p.sys.events.on(o.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(d){var p=this.node,v=p.style;p&&(v.display=d.settings.visible?"block":"none")},setSkew:function(d,p){return d===void 0&&(d=0),p===void 0&&(p=d),this.skewX=d,this.skewY=p,this},setPerspective:function(d){return this.parent.style.perspective=d+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(d){this.parent.style.perspective=d+"px"}},addListener:function(d){if(this.node){d=d.split(" ");for(var p=0;p<d.length;p++)this.node.addEventListener(d[p],this.handler,!1)}return this},removeListener:function(d){if(this.node){d=d.split(" ");for(var p=0;p<d.length;p++)this.node.removeEventListener(d[p],this.handler)}return this},dispatchNativeEvent:function(d){this.emit(d.type,d)},createElement:function(d,p,v){return this.setElement(document.createElement(d),p,v)},setElement:function(d,p,v){this.removeElement();var g;if(typeof d=="string"?(d[0]==="#"&&(d=d.substr(1)),g=document.getElementById(d)):typeof d=="object"&&d.nodeType===1&&(g=d),!g)return this;if(this.node=g,p&&l(p))for(var m in p)g.style[m]=p[m];else typeof p=="string"&&(g.style=p);return g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent.appendChild(g),v&&(g.innerText=v),this.updateSize()},createFromCache:function(d,p){var v=this.cache.get(d);return v&&this.createFromHTML(v,p),this},createFromHTML:function(d,p){p===void 0&&(p="div"),this.removeElement();var v=document.createElement(p);return this.node=v,v.style.zIndex="0",v.style.display="inline",v.style.position="absolute",v.phaser=this,this.parent.appendChild(v),v.innerHTML=d,this.updateSize()},removeElement:function(){return this.node&&(n(this.node),this.node=null),this},updateSize:function(){var d=this.node;return this.width=d.clientWidth,this.height=d.clientHeight,this.displayWidth=this.width*this.scaleX,this.displayHeight=this.height*this.scaleY,this},getChildByProperty:function(d,p){if(this.node){for(var v=this.node.querySelectorAll("*"),g=0;g<v.length;g++)if(v[g][d]===p)return v[g]}return null},getChildByID:function(d){return this.getChildByProperty("id",d)},getChildByName:function(d){return this.getChildByProperty("name",d)},setClassName:function(d){return this.node&&(this.node.className=d,this.updateSize()),this},setText:function(d){return this.node&&(this.node.innerText=d,this.updateSize()),this},setHTML:function(d){return this.node&&(this.node.innerHTML=d,this.updateSize()),this},preRender:function(){var d=this.parentContainer,p=this.node;p&&d&&!d.willRender()&&(p.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(o.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(o.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(o.PRE_RENDER,this.preRender,this)}});S.exports=r},49381:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(47407),y=s(95643),u=s(61340),h=new u,l=new u,n=new u,o=function(f,r,d,p){if(r.node){var v=r.node.style,g=r.scene.sys.settings;if(!v||!g.visible||y.RENDER_MASK!==r.renderFlags||r.cameraFilter!==0&&r.cameraFilter&d.id||r.parentContainer&&!r.parentContainer.willRender()){v.display="none";return}var m=r.parentContainer,T=d.alpha*r.alpha;m&&(T*=m.alpha);var P=h,M=l,b=n,R=0,A=0,D="0%",G="0%";p?(R=r.width*r.scaleX*r.originX,A=r.height*r.scaleY*r.originY,M.applyITRS(r.x-R,r.y-A,r.rotation,r.scaleX,r.scaleY),P.copyFrom(d.matrix),P.multiplyWithOffset(p,-d.scrollX*r.scrollFactorX,-d.scrollY*r.scrollFactorY),M.e=r.x-R,M.f=r.y-A,P.multiply(M,b)):(R=r.width*r.originX,A=r.height*r.originY,M.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),P.copyFrom(d.matrix),D=100*r.originX+"%",G=100*r.originY+"%",M.e-=d.scrollX*r.scrollFactorX,M.f-=d.scrollY*r.scrollFactorY,P.multiply(M,b),b.e-=R,b.f-=A),r.transformOnly||(v.display="block",v.opacity=T,v.zIndex=r._depth,v.pointerEvents=r.pointerEvents,v.mixBlendMode=c[r._blendMode]),v.transform=b.getCSSMatrix()+" skew("+r.skewX+"rad, "+r.skewY+"rad) rotate3d("+r.rotate3d.x+","+r.rotate3d.y+","+r.rotate3d.z+","+r.rotate3d.w+r.rotate3dAngle+")",v.transformOrigin=D+" "+G}};S.exports=o},2611:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(3069),y=s(39429);y.register("dom",function(u,h,l,n,o){var f=new c(this.scene,u,h,l,n,o);return this.displayList.add(f),f})},441:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(49381),u=s(49381),S.exports={renderWebGL:y,renderCanvas:u}},62980:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="addedtoscene"},41337:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="destroy"},44947:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="removedfromscene"},49358:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="complete"},35163:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="created"},97249:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="error"},19483:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="locked"},56059:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="loop"},26772:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="metadata"},64437:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="playing"},83411:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="play"},75780:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="seeked"},67799:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="seeking"},63500:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="stalled"},55541:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="stop"},53208:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="textureready"},4992:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="unlocked"},12:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="unsupported"},51708:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={ADDED_TO_SCENE:s(62980),DESTROY:s(41337),REMOVED_FROM_SCENE:s(44947),VIDEO_COMPLETE:s(49358),VIDEO_CREATED:s(35163),VIDEO_ERROR:s(97249),VIDEO_LOCKED:s(19483),VIDEO_LOOP:s(56059),VIDEO_METADATA:s(26772),VIDEO_PLAY:s(83411),VIDEO_PLAYING:s(64437),VIDEO_SEEKED:s(75780),VIDEO_SEEKING:s(67799),VIDEO_STALLED:s(63500),VIDEO_STOP:s(55541),VIDEO_TEXTURE:s(53208),VIDEO_UNLOCKED:s(4992),VIDEO_UNSUPPORTED:s(12)}},42421:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(31401),u=s(95643),h=s(64993),l=new c({Extends:u,Mixins:[y.Alpha,y.BlendMode,y.Depth,y.Flip,y.Origin,y.ScrollFactor,y.Size,y.Texture,y.Tint,y.Transform,y.Visible,h],initialize:function(o){u.call(this,o,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});S.exports=l},70217:()=>{},56315:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(42421),y=s(39429);y.register("extern",function(){var u=new c(this.scene);return this.displayList.add(u),u})},64993:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(80287),u=s(70217),S.exports={renderWebGL:y,renderCanvas:u}},80287:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=function(u,h,l,n){u.pipelines.clear();var o=c(h,l,n).calc;h.render.call(h,u,l,o),u.pipelines.rebind()};S.exports=y},85592:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},43831:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(71911),y=s(83419),u=s(85592),h=s(31401),l=s(8497),n=s(95643),o=s(95540),f=s(35154),r=s(36383),d=s(84503),p=new y({Extends:n,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.PostPipeline,h.Transform,h.Visible,h.ScrollFactor,d],initialize:function(g,m){var T=f(m,"x",0),P=f(m,"y",0);n.call(this,g,"Graphics"),this.setPosition(T,P),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(m)},setDefaultStyles:function(v){return f(v,"lineStyle",null)&&(this.defaultStrokeWidth=f(v,"lineStyle.width",1),this.defaultStrokeColor=f(v,"lineStyle.color",16777215),this.defaultStrokeAlpha=f(v,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),f(v,"fillStyle",null)&&(this.defaultFillColor=f(v,"fillStyle.color",16777215),this.defaultFillAlpha=f(v,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(v,g,m){return m===void 0&&(m=1),this.commandBuffer.push(u.LINE_STYLE,v,g,m),this._lineWidth=v,this},fillStyle:function(v,g){return g===void 0&&(g=1),this.commandBuffer.push(u.FILL_STYLE,v,g),this},fillGradientStyle:function(v,g,m,T,P,M,b,R){return P===void 0&&(P=1),M===void 0&&(M=P),b===void 0&&(b=P),R===void 0&&(R=P),this.commandBuffer.push(u.GRADIENT_FILL_STYLE,P,M,b,R,v,g,m,T),this},lineGradientStyle:function(v,g,m,T,P,M){return M===void 0&&(M=1),this.commandBuffer.push(u.GRADIENT_LINE_STYLE,v,M,g,m,T,P),this},beginPath:function(){return this.commandBuffer.push(u.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(u.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(u.FILL_PATH),this},fill:function(){return this.commandBuffer.push(u.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(u.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(u.STROKE_PATH),this},fillCircleShape:function(v){return this.fillCircle(v.x,v.y,v.radius)},strokeCircleShape:function(v){return this.strokeCircle(v.x,v.y,v.radius)},fillCircle:function(v,g,m){return this.beginPath(),this.arc(v,g,m,0,r.PI2),this.fillPath(),this},strokeCircle:function(v,g,m){return this.beginPath(),this.arc(v,g,m,0,r.PI2),this.strokePath(),this},fillRectShape:function(v){return this.fillRect(v.x,v.y,v.width,v.height)},strokeRectShape:function(v){return this.strokeRect(v.x,v.y,v.width,v.height)},fillRect:function(v,g,m,T){return this.commandBuffer.push(u.FILL_RECT,v,g,m,T),this},strokeRect:function(v,g,m,T){var P=this._lineWidth/2,M=v-P,b=v+P;return this.beginPath(),this.moveTo(v,g),this.lineTo(v,g+T),this.strokePath(),this.beginPath(),this.moveTo(v+m,g),this.lineTo(v+m,g+T),this.strokePath(),this.beginPath(),this.moveTo(M,g),this.lineTo(b+m,g),this.strokePath(),this.beginPath(),this.moveTo(M,g+T),this.lineTo(b+m,g+T),this.strokePath(),this},fillRoundedRect:function(v,g,m,T,P){P===void 0&&(P=20);var M=P,b=P,R=P,A=P;typeof P!="number"&&(M=o(P,"tl",20),b=o(P,"tr",20),R=o(P,"bl",20),A=o(P,"br",20));var D=M>=0,G=b>=0,F=R>=0,B=A>=0;return M=Math.abs(M),b=Math.abs(b),R=Math.abs(R),A=Math.abs(A),this.beginPath(),this.moveTo(v+M,g),this.lineTo(v+m-b,g),G?this.arc(v+m-b,g+b,b,-r.TAU,0):this.arc(v+m,g,b,Math.PI,r.TAU,!0),this.lineTo(v+m,g+T-A),B?this.arc(v+m-A,g+T-A,A,0,r.TAU):this.arc(v+m,g+T,A,-r.TAU,Math.PI,!0),this.lineTo(v+R,g+T),F?this.arc(v+R,g+T-R,R,r.TAU,Math.PI):this.arc(v,g+T,R,0,-r.TAU,!0),this.lineTo(v,g+M),D?this.arc(v+M,g+M,M,-Math.PI,-r.TAU):this.arc(v,g,M,r.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(v,g,m,T,P){P===void 0&&(P=20);var M=P,b=P,R=P,A=P,D=Math.min(m,T)/2;typeof P!="number"&&(M=o(P,"tl",20),b=o(P,"tr",20),R=o(P,"bl",20),A=o(P,"br",20));var G=M>=0,F=b>=0,B=R>=0,N=A>=0;return M=Math.min(Math.abs(M),D),b=Math.min(Math.abs(b),D),R=Math.min(Math.abs(R),D),A=Math.min(Math.abs(A),D),this.beginPath(),this.moveTo(v+M,g),this.lineTo(v+m-b,g),this.moveTo(v+m-b,g),F?this.arc(v+m-b,g+b,b,-r.TAU,0):this.arc(v+m,g,b,Math.PI,r.TAU,!0),this.lineTo(v+m,g+T-A),this.moveTo(v+m,g+T-A),N?this.arc(v+m-A,g+T-A,A,0,r.TAU):this.arc(v+m,g+T,A,-r.TAU,Math.PI,!0),this.lineTo(v+R,g+T),this.moveTo(v+R,g+T),B?this.arc(v+R,g+T-R,R,r.TAU,Math.PI):this.arc(v,g+T,R,0,-r.TAU,!0),this.lineTo(v,g+M),this.moveTo(v,g+M),G?this.arc(v+M,g+M,M,-Math.PI,-r.TAU):this.arc(v,g,M,r.TAU,0,!0),this.strokePath(),this},fillPointShape:function(v,g){return this.fillPoint(v.x,v.y,g)},fillPoint:function(v,g,m){return!m||m<1?m=1:(v-=m/2,g-=m/2),this.commandBuffer.push(u.FILL_RECT,v,g,m,m),this},fillTriangleShape:function(v){return this.fillTriangle(v.x1,v.y1,v.x2,v.y2,v.x3,v.y3)},strokeTriangleShape:function(v){return this.strokeTriangle(v.x1,v.y1,v.x2,v.y2,v.x3,v.y3)},fillTriangle:function(v,g,m,T,P,M){return this.commandBuffer.push(u.FILL_TRIANGLE,v,g,m,T,P,M),this},strokeTriangle:function(v,g,m,T,P,M){return this.commandBuffer.push(u.STROKE_TRIANGLE,v,g,m,T,P,M),this},strokeLineShape:function(v){return this.lineBetween(v.x1,v.y1,v.x2,v.y2)},lineBetween:function(v,g,m,T){return this.beginPath(),this.moveTo(v,g),this.lineTo(m,T),this.strokePath(),this},lineTo:function(v,g){return this.commandBuffer.push(u.LINE_TO,v,g),this},moveTo:function(v,g){return this.commandBuffer.push(u.MOVE_TO,v,g),this},strokePoints:function(v,g,m,T){g===void 0&&(g=!1),m===void 0&&(m=!1),T===void 0&&(T=v.length),this.beginPath(),this.moveTo(v[0].x,v[0].y);for(var P=1;P<T;P++)this.lineTo(v[P].x,v[P].y);return g&&this.lineTo(v[0].x,v[0].y),m&&this.closePath(),this.strokePath(),this},fillPoints:function(v,g,m,T){g===void 0&&(g=!1),m===void 0&&(m=!1),T===void 0&&(T=v.length),this.beginPath(),this.moveTo(v[0].x,v[0].y);for(var P=1;P<T;P++)this.lineTo(v[P].x,v[P].y);return g&&this.lineTo(v[0].x,v[0].y),m&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(v,g){g===void 0&&(g=32);var m=v.getPoints(g);return this.strokePoints(m,!0)},strokeEllipse:function(v,g,m,T,P){P===void 0&&(P=32);var M=new l(v,g,m,T),b=M.getPoints(P);return this.strokePoints(b,!0)},fillEllipseShape:function(v,g){g===void 0&&(g=32);var m=v.getPoints(g);return this.fillPoints(m,!0)},fillEllipse:function(v,g,m,T,P){P===void 0&&(P=32);var M=new l(v,g,m,T),b=M.getPoints(P);return this.fillPoints(b,!0)},arc:function(v,g,m,T,P,M,b){return M===void 0&&(M=!1),b===void 0&&(b=0),this.commandBuffer.push(u.ARC,v,g,m,T,P,M,b),this},slice:function(v,g,m,T,P,M,b){return M===void 0&&(M=!1),b===void 0&&(b=0),this.commandBuffer.push(u.BEGIN_PATH),this.commandBuffer.push(u.MOVE_TO,v,g),this.commandBuffer.push(u.ARC,v,g,m,T,P,M,b),this.commandBuffer.push(u.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(u.SAVE),this},restore:function(){return this.commandBuffer.push(u.RESTORE),this},translateCanvas:function(v,g){return this.commandBuffer.push(u.TRANSLATE,v,g),this},scaleCanvas:function(v,g){return this.commandBuffer.push(u.SCALE,v,g),this},rotateCanvas:function(v){return this.commandBuffer.push(u.ROTATE,v),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(v,g,m){var T=this.scene.sys,P=T.game.renderer;g===void 0&&(g=T.scale.width),m===void 0&&(m=T.scale.height),p.TargetCamera.setScene(this.scene),p.TargetCamera.setViewport(0,0,g,m),p.TargetCamera.scrollX=this.x,p.TargetCamera.scrollY=this.y;var M,b,R={willReadFrequently:!0};if(typeof v=="string")if(T.textures.exists(v)){M=T.textures.get(v);var A=M.getSourceImage();A instanceof HTMLCanvasElement&&(b=A.getContext("2d",R))}else M=T.textures.createCanvas(v,g,m),b=M.getSourceImage().getContext("2d",R);else v instanceof HTMLCanvasElement&&(b=v.getContext("2d",R));return b&&(this.renderCanvas(P,this,p.TargetCamera,null,b,!1),M&&M.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});p.TargetCamera=new c,S.exports=p},32768:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(85592),y=s(20926),u=function(h,l,n,o,f,r){var d=l.commandBuffer,p=d.length,v=f||h.currentContext;if(!(p===0||!y(h,v,l,n,o))){n.addToRenderList(l);var g=1,m=1,T=0,P=0,M=1,b=0,R=0,A=0;v.beginPath();for(var D=0;D<p;++D){var G=d[D];switch(G){case c.ARC:v.arc(d[D+1],d[D+2],d[D+3],d[D+4],d[D+5],d[D+6]),D+=7;break;case c.LINE_STYLE:M=d[D+1],T=d[D+2],g=d[D+3],b=(T&16711680)>>>16,R=(T&65280)>>>8,A=T&255,v.strokeStyle="rgba("+b+","+R+","+A+","+g+")",v.lineWidth=M,D+=3;break;case c.FILL_STYLE:P=d[D+1],m=d[D+2],b=(P&16711680)>>>16,R=(P&65280)>>>8,A=P&255,v.fillStyle="rgba("+b+","+R+","+A+","+m+")",D+=2;break;case c.BEGIN_PATH:v.beginPath();break;case c.CLOSE_PATH:v.closePath();break;case c.FILL_PATH:r||v.fill();break;case c.STROKE_PATH:r||v.stroke();break;case c.FILL_RECT:r?v.rect(d[D+1],d[D+2],d[D+3],d[D+4]):v.fillRect(d[D+1],d[D+2],d[D+3],d[D+4]),D+=4;break;case c.FILL_TRIANGLE:v.beginPath(),v.moveTo(d[D+1],d[D+2]),v.lineTo(d[D+3],d[D+4]),v.lineTo(d[D+5],d[D+6]),v.closePath(),r||v.fill(),D+=6;break;case c.STROKE_TRIANGLE:v.beginPath(),v.moveTo(d[D+1],d[D+2]),v.lineTo(d[D+3],d[D+4]),v.lineTo(d[D+5],d[D+6]),v.closePath(),r||v.stroke(),D+=6;break;case c.LINE_TO:v.lineTo(d[D+1],d[D+2]),D+=2;break;case c.MOVE_TO:v.moveTo(d[D+1],d[D+2]),D+=2;break;case c.LINE_FX_TO:v.lineTo(d[D+1],d[D+2]),D+=5;break;case c.MOVE_FX_TO:v.moveTo(d[D+1],d[D+2]),D+=5;break;case c.SAVE:v.save();break;case c.RESTORE:v.restore();break;case c.TRANSLATE:v.translate(d[D+1],d[D+2]),D+=2;break;case c.SCALE:v.scale(d[D+1],d[D+2]),D+=2;break;case c.ROTATE:v.rotate(d[D+1]),D+=1;break;case c.GRADIENT_FILL_STYLE:D+=5;break;case c.GRADIENT_LINE_STYLE:D+=6;break}}v.restore()}};S.exports=u},87079:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(44603),y=s(43831);c.register("graphics",function(u,h){u===void 0&&(u={}),h!==void 0&&(u.add=h);var l=new y(this.scene,u);return u.add&&this.scene.sys.displayList.add(l),l})},1201:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43831),y=s(39429);y.register("graphics",function(u){return this.displayList.add(new c(this.scene,u))})},84503:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(77545),u=s(32768),u=s(32768),S.exports={renderWebGL:y,renderCanvas:u}},77545:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(85592),y=s(91296),u=s(61340),h=s(70554),l=function(d,p,v){this.x=d,this.y=p,this.width=v},n=function(d,p,v){this.points=[],this.pointsLength=1,this.points[0]=new l(d,p,v)},o=[],f=new u,r=function(d,p,v,g){if(p.commandBuffer.length!==0){v.addToRenderList(p);var m=d.pipelines.set(p.pipeline,p);d.pipelines.preBatch(p);for(var T=y(p,v,g).calc,P=f.loadIdentity(),M=p.commandBuffer,b=v.alpha*p.alpha,R=1,A=m.fillTint,D=m.strokeTint,G=0,F=0,B=0,N=.01,z=Math.PI*2,$,Q=[],Z=0,tt=!0,H=null,J=h.getTintAppendFloatAlpha,Y=0;Y<M.length;Y++)switch($=M[Y],$){case c.BEGIN_PATH:{Q.length=0,H=null,tt=!0;break}case c.CLOSE_PATH:{tt=!1,H&&H.points.length&&H.points.push(H.points[0]);break}case c.FILL_PATH:{for(Z=0;Z<Q.length;Z++)m.batchFillPath(Q[Z].points,P,T);break}case c.STROKE_PATH:{for(Z=0;Z<Q.length;Z++)m.batchStrokePath(Q[Z].points,R,tt,P,T);break}case c.LINE_STYLE:{R=M[++Y];var _=M[++Y],U=M[++Y]*b,et=J(_,U);D.TL=et,D.TR=et,D.BL=et,D.BR=et;break}case c.FILL_STYLE:{var nt=M[++Y],rt=M[++Y]*b,ot=J(nt,rt);A.TL=ot,A.TR=ot,A.BL=ot,A.BR=ot;break}case c.GRADIENT_FILL_STYLE:{var dt=M[++Y]*b,vt=M[++Y]*b,mt=M[++Y]*b,gt=M[++Y]*b;A.TL=J(M[++Y],dt),A.TR=J(M[++Y],vt),A.BL=J(M[++Y],mt),A.BR=J(M[++Y],gt);break}case c.GRADIENT_LINE_STYLE:{R=M[++Y];var yt=M[++Y]*b;D.TL=J(M[++Y],yt),D.TR=J(M[++Y],yt),D.BL=J(M[++Y],yt),D.BR=J(M[++Y],yt);break}case c.ARC:{var St=0,Ct=M[++Y],bt=M[++Y],At=M[++Y],Lt=M[++Y],Tt=M[++Y],Et=M[++Y],wt=M[++Y];for(Tt-=Lt,Et?Tt<-z?Tt=-z:Tt>0&&(Tt=-z+Tt%z):Tt>z?Tt=z:Tt<0&&(Tt=z+Tt%z),H===null&&(H=new n(Ct+Math.cos(Lt)*At,bt+Math.sin(Lt)*At,R),Q.push(H),St+=N);St<1+wt;)B=Tt*St+Lt,G=Ct+Math.cos(B)*At,F=bt+Math.sin(B)*At,H.points.push(new l(G,F,R)),St+=N;B=Tt+Lt,G=Ct+Math.cos(B)*At,F=bt+Math.sin(B)*At,H.points.push(new l(G,F,R));break}case c.FILL_RECT:{m.batchFillRect(M[++Y],M[++Y],M[++Y],M[++Y],P,T);break}case c.FILL_TRIANGLE:{m.batchFillTriangle(M[++Y],M[++Y],M[++Y],M[++Y],M[++Y],M[++Y],P,T);break}case c.STROKE_TRIANGLE:{m.batchStrokeTriangle(M[++Y],M[++Y],M[++Y],M[++Y],M[++Y],M[++Y],R,P,T);break}case c.LINE_TO:{H!==null?H.points.push(new l(M[++Y],M[++Y],R)):(H=new n(M[++Y],M[++Y],R),Q.push(H));break}case c.MOVE_TO:{H=new n(M[++Y],M[++Y],R),Q.push(H);break}case c.SAVE:{o.push(P.copyToArray());break}case c.RESTORE:{P.copyFromArray(o.pop());break}case c.TRANSLATE:{Ct=M[++Y],bt=M[++Y],P.translate(Ct,bt);break}case c.SCALE:{Ct=M[++Y],bt=M[++Y],P.scale(Ct,bt);break}case c.ROTATE:{P.rotate(M[++Y]);break}}d.pipelines.postBatch(p)}};S.exports=r},26479:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(61061),y=s(83419),u=s(51708),h=s(50792),l=s(46710),n=s(95540),o=s(35154),f=s(97022),r=s(41212),d=s(88492),p=s(35072),v=s(68287),g=new y({Extends:h,initialize:function(T,P,M){h.call(this),M?P&&!Array.isArray(P)&&(P=[P]):Array.isArray(P)?r(P[0])&&(M=P,P=null):r(P)&&(M=P,P=null),this.scene=T,this.children=new p,this.isParent=!0,this.type="Group",this.classType=n(M,"classType",v),this.name=n(M,"name",""),this.active=n(M,"active",!0),this.maxSize=n(M,"maxSize",-1),this.defaultKey=n(M,"defaultKey",null),this.defaultFrame=n(M,"defaultFrame",null),this.runChildUpdate=n(M,"runChildUpdate",!1),this.createCallback=n(M,"createCallback",null),this.removeCallback=n(M,"removeCallback",null),this.createMultipleCallback=n(M,"createMultipleCallback",null),this.internalCreateCallback=n(M,"internalCreateCallback",null),this.internalRemoveCallback=n(M,"internalRemoveCallback",null),P&&this.addMultiple(P),M&&this.createMultiple(M),this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(m,T,P,M,b,R){if(m===void 0&&(m=0),T===void 0&&(T=0),P===void 0&&(P=this.defaultKey),M===void 0&&(M=this.defaultFrame),b===void 0&&(b=!0),R===void 0&&(R=!0),this.isFull())return null;var A=new this.classType(this.scene,m,T,P,M);return A.addToDisplayList(this.scene.sys.displayList),A.addToUpdateList(),A.visible=b,A.setActive(R),this.add(A),A},createMultiple:function(m){if(this.isFull())return[];Array.isArray(m)||(m=[m]);var T=[];if(m[0].key)for(var P=0;P<m.length;P++){var M=this.createFromConfig(m[P]);T=T.concat(M)}return T},createFromConfig:function(m){if(this.isFull())return[];this.classType=n(m,"classType",this.classType);var T=n(m,"key",void 0),P=n(m,"frame",null),M=n(m,"visible",!0),b=n(m,"active",!0),R=[];if(T===void 0)return R;Array.isArray(T)||(T=[T]),Array.isArray(P)||(P=[P]);var A=n(m,"repeat",0),D=n(m,"randomKey",!1),G=n(m,"randomFrame",!1),F=n(m,"yoyo",!1),B=n(m,"quantity",!1),N=n(m,"frameQuantity",1),z=n(m,"max",0),$=d(T,P,{max:z,qty:B||N,random:D,randomB:G,repeat:A,yoyo:F});m.createCallback&&(this.createCallback=m.createCallback),m.removeCallback&&(this.removeCallback=m.removeCallback),m.internalCreateCallback&&(this.internalCreateCallback=m.internalCreateCallback),m.internalRemoveCallback&&(this.internalRemoveCallback=m.internalRemoveCallback);for(var Q=0;Q<$.length;Q++){var Z=this.create(0,0,$[Q].a,$[Q].b,M,b);if(!Z)break;R.push(Z)}if(f(m,"setXY")){var tt=o(m,"setXY.x",0),H=o(m,"setXY.y",0),J=o(m,"setXY.stepX",0),Y=o(m,"setXY.stepY",0);c.SetXY(R,tt,H,J,Y)}if(f(m,"setRotation")){var _=o(m,"setRotation.value",0),U=o(m,"setRotation.step",0);c.SetRotation(R,_,U)}if(f(m,"setScale")){var et=o(m,"setScale.x",1),nt=o(m,"setScale.y",et),rt=o(m,"setScale.stepX",0),ot=o(m,"setScale.stepY",0);c.SetScale(R,et,nt,rt,ot)}if(f(m,"setOrigin")){var dt=o(m,"setOrigin.x",.5),vt=o(m,"setOrigin.y",dt),mt=o(m,"setOrigin.stepX",0),gt=o(m,"setOrigin.stepY",0);c.SetOrigin(R,dt,vt,mt,gt)}if(f(m,"setAlpha")){var yt=o(m,"setAlpha.value",1),St=o(m,"setAlpha.step",0);c.SetAlpha(R,yt,St)}if(f(m,"setDepth")){var Ct=o(m,"setDepth.value",0),bt=o(m,"setDepth.step",0);c.SetDepth(R,Ct,bt)}if(f(m,"setScrollFactor")){var At=o(m,"setScrollFactor.x",1),Lt=o(m,"setScrollFactor.y",At),Tt=o(m,"setScrollFactor.stepX",0),Et=o(m,"setScrollFactor.stepY",0);c.SetScrollFactor(R,At,Lt,Tt,Et)}var wt=n(m,"hitArea",null),Wt=n(m,"hitAreaCallback",null);wt&&c.SetHitArea(R,wt,Wt);var Zt=n(m,"gridAlign",!1);return Zt&&c.GridAlign(R,Zt),this.createMultipleCallback&&this.createMultipleCallback.call(this,R),R},preUpdate:function(m,T){if(!(!this.runChildUpdate||this.children.size===0))for(var P=this.children.entries.slice(),M=0;M<P.length;M++){var b=P[M];b.active&&b.update(m,T)}},add:function(m,T){return T===void 0&&(T=!1),this.isFull()?this:(this.children.set(m),this.internalCreateCallback&&this.internalCreateCallback.call(this,m),this.createCallback&&this.createCallback.call(this,m),T&&(m.addToDisplayList(this.scene.sys.displayList),m.addToUpdateList()),m.on(u.DESTROY,this.remove,this),this)},addMultiple:function(m,T){if(T===void 0&&(T=!1),Array.isArray(m))for(var P=0;P<m.length;P++)this.add(m[P],T);return this},remove:function(m,T,P){return T===void 0&&(T=!1),P===void 0&&(P=!1),this.children.contains(m)?(this.children.delete(m),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,m),this.removeCallback&&this.removeCallback.call(this,m),m.off(u.DESTROY,this.remove,this),P?m.destroy():T&&(m.removeFromDisplayList(),m.removeFromUpdateList()),this):this},clear:function(m,T){m===void 0&&(m=!1),T===void 0&&(T=!1);for(var P=this.children,M=0;M<P.size;M++){var b=P.entries[M];b.off(u.DESTROY,this.remove,this),T?b.destroy():m&&(b.removeFromDisplayList(),b.removeFromUpdateList())}return this.children.clear(),this},contains:function(m){return this.children.contains(m)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(m,T,P,M){return l(this.children.entries,m,T,P,M)},getFirst:function(m,T,P,M,b,R,A){return this.getHandler(!0,1,m,T,P,M,b,R,A)},getFirstNth:function(m,T,P,M,b,R,A,D){return this.getHandler(!0,m,T,P,M,b,R,A,D)},getLast:function(m,T,P,M,b,R,A){return this.getHandler(!1,1,m,T,P,M,b,R,A)},getLastNth:function(m,T,P,M,b,R,A,D){return this.getHandler(!1,m,T,P,M,b,R,A,D)},getHandler:function(m,T,P,M,b,R,A,D,G){P===void 0&&(P=!1),M===void 0&&(M=!1);var F,B,N=0,z=this.children.entries;if(m)for(B=0;B<z.length;B++)if(F=z[B],F.active===P){if(N++,N===T)break}else F=null;else for(B=z.length-1;B>=0;B--)if(F=z[B],F.active===P){if(N++,N===T)break}else F=null;return F?(typeof b=="number"&&(F.x=b),typeof R=="number"&&(F.y=R),F):M?this.create(b,R,A,D,G):null},get:function(m,T,P,M,b){return this.getFirst(!1,!0,m,T,P,M,b)},getFirstAlive:function(m,T,P,M,b,R){return this.getFirst(!0,m,T,P,M,b,R)},getFirstDead:function(m,T,P,M,b,R){return this.getFirst(!1,m,T,P,M,b,R)},playAnimation:function(m,T){return c.PlayAnimation(this.children.entries,m,T),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(m){m===void 0&&(m=!0);for(var T=0,P=0;P<this.children.size;P++)this.children.entries[P].active===m&&T++;return T},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var m=this.getTotalUsed(),T=this.maxSize===-1?999999999999:this.maxSize;return T-m},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},propertyValueSet:function(m,T,P,M,b){return c.PropertyValueSet(this.children.entries,m,T,P,M,b),this},propertyValueInc:function(m,T,P,M,b){return c.PropertyValueInc(this.children.entries,m,T,P,M,b),this},setX:function(m,T){return c.SetX(this.children.entries,m,T),this},setY:function(m,T){return c.SetY(this.children.entries,m,T),this},setXY:function(m,T,P,M){return c.SetXY(this.children.entries,m,T,P,M),this},incX:function(m,T){return c.IncX(this.children.entries,m,T),this},incY:function(m,T){return c.IncY(this.children.entries,m,T),this},incXY:function(m,T,P,M){return c.IncXY(this.children.entries,m,T,P,M),this},shiftPosition:function(m,T,P){return c.ShiftPosition(this.children.entries,m,T,P),this},angle:function(m,T){return c.Angle(this.children.entries,m,T),this},rotate:function(m,T){return c.Rotate(this.children.entries,m,T),this},rotateAround:function(m,T){return c.RotateAround(this.children.entries,m,T),this},rotateAroundDistance:function(m,T,P){return c.RotateAroundDistance(this.children.entries,m,T,P),this},setAlpha:function(m,T){return c.SetAlpha(this.children.entries,m,T),this},setTint:function(m,T,P,M){return c.SetTint(this.children.entries,m,T,P,M),this},setOrigin:function(m,T,P,M){return c.SetOrigin(this.children.entries,m,T,P,M),this},scaleX:function(m,T){return c.ScaleX(this.children.entries,m,T),this},scaleY:function(m,T){return c.ScaleY(this.children.entries,m,T),this},scaleXY:function(m,T,P,M){return c.ScaleXY(this.children.entries,m,T,P,M),this},setDepth:function(m,T){return c.SetDepth(this.children.entries,m,T),this},setBlendMode:function(m){return c.SetBlendMode(this.children.entries,m),this},setHitArea:function(m,T){return c.SetHitArea(this.children.entries,m,T),this},shuffle:function(){return c.Shuffle(this.children.entries),this},kill:function(m){this.children.contains(m)&&m.setActive(!1)},killAndHide:function(m){this.children.contains(m)&&(m.setActive(!1),m.setVisible(!1))},setVisible:function(m,T,P){return c.SetVisible(this.children.entries,m,T,P),this},toggleVisible:function(){return c.ToggleVisible(this.children.entries),this},destroy:function(m,T){m===void 0&&(m=!1),T===void 0&&(T=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(u.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(T,m),this.scene=void 0,this.children=void 0)}});S.exports=g},94975:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(44603),y=s(26479);c.register("group",function(u){return new y(this.scene,null,u)})},3385:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26479),y=s(39429);y.register("group",function(u,h){return this.updateList.add(new c(this.scene,u,h))})},88571:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(31401),u=s(95643),h=s(59819),l=new c({Extends:u,Mixins:[y.Alpha,y.BlendMode,y.Depth,y.Flip,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Size,y.TextureCrop,y.Tint,y.Transform,y.Visible,h],initialize:function(o,f,r,d,p){u.call(this,o,"Image"),this._crop=this.resetCropObject(),this.setTexture(d,p),this.setPosition(f,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});S.exports=l},40652:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){y.addToRenderList(c),s.batchSprite(c,c.frame,y,u)};S.exports=w},82459:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(44603),u=s(23568),h=s(88571);y.register("image",function(l,n){l===void 0&&(l={});var o=u(l,"key",null),f=u(l,"frame",null),r=new h(this.scene,0,0,o,f);return n!==void 0&&(l.add=n),c(this.scene,r,l),r})},2117:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(88571),y=s(39429);y.register("image",function(u,h,l,n){return this.displayList.add(new c(this.scene,u,h,l,n))})},59819:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(99517),u=s(40652),S.exports={renderWebGL:y,renderCanvas:u}},99517:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){y.addToRenderList(c),this.pipeline.batchSprite(c,y,u)};S.exports=w},77856:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c={Events:s(51708),DisplayList:s(8050),GameObjectCreator:s(44603),GameObjectFactory:s(39429),UpdateList:s(45027),Components:s(31401),GetCalcMatrix:s(91296),BuildGameObject:s(25305),BuildGameObjectAnimation:s(13059),GameObject:s(95643),BitmapText:s(22186),Blitter:s(6107),Bob:s(46590),Container:s(31559),DOMElement:s(3069),DynamicBitmapText:s(2638),Extern:s(42421),Graphics:s(43831),Group:s(26479),Image:s(88571),Layer:s(93595),Particles:s(18404),PathFollower:s(1159),RenderTexture:s(591),RetroFont:s(196),Rope:s(77757),Sprite:s(68287),Text:s(50171),GetTextSize:s(14220),MeasureText:s(79557),TextStyle:s(35762),TileSprite:s(20839),Zone:s(41481),Video:s(18471),Shape:s(17803),Arc:s(23629),Curve:s(89),Ellipse:s(19921),Grid:s(30479),IsoBox:s(61475),IsoTriangle:s(16933),Line:s(57847),Polygon:s(24949),Rectangle:s(74561),Star:s(55911),Triangle:s(36931),Factories:{Blitter:s(12709),Container:s(24961),DOMElement:s(2611),DynamicBitmapText:s(72566),Extern:s(56315),Graphics:s(1201),Group:s(3385),Image:s(2117),Layer:s(20005),Particles:s(676),PathFollower:s(90145),RenderTexture:s(60505),Rope:s(96819),Sprite:s(46409),StaticBitmapText:s(34914),Text:s(68005),TileSprite:s(91681),Zone:s(84175),Video:s(89025),Arc:s(42563),Curve:s(40511),Ellipse:s(1543),Grid:s(34137),IsoBox:s(3933),IsoTriangle:s(49803),Line:s(2481),Polygon:s(64827),Rectangle:s(87959),Star:s(93697),Triangle:s(45245)},Creators:{Blitter:s(9403),Container:s(77143),DynamicBitmapText:s(11164),Graphics:s(87079),Group:s(94975),Image:s(82459),Layer:s(25179),Particles:s(92730),RenderTexture:s(34495),Rope:s(26209),Sprite:s(15567),StaticBitmapText:s(57336),Text:s(71259),TileSprite:s(14167),Zone:s(95261),Video:s(11511)}};c.Shader=s(20071),c.Mesh=s(4703),c.NineSlice=s(28103),c.PointLight=s(80321),c.Plane=s(33663),c.Factories.Shader=s(74177),c.Factories.Mesh=s(9225),c.Factories.NineSlice=s(47521),c.Factories.PointLight=s(71255),c.Factories.Plane=s(30985),c.Creators.Shader=s(54935),c.Creators.Mesh=s(20527),c.Creators.NineSlice=s(28279),c.Creators.PointLight=s(39829),c.Creators.Plane=s(56015),c.Light=s(41432),c.LightsManager=s(61356),c.LightsPlugin=s(88992),S.exports=c},93595:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(10312),y=s(83419),u=s(31401),h=s(53774),l=s(45893),n=s(50792),o=s(51708),f=s(73162),r=s(33963),d=s(44594),p=s(19186),v=new y({Extends:f,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.PostPipeline,u.Visible,n,r],initialize:function(m,T){f.call(this,m),n.call(this),this.scene=m,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=m.sys,this.events=m.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(c.SKIP_CHECK),T&&this.add(T),m.sys.queueDepthSort()},setActive:function(g){return this.active=g,this},setName:function(g){return this.name=g,this},setState:function(g){return this.state=g,this},setDataEnabled:function(){return this.data||(this.data=new l(this)),this},setData:function(g,m){return this.data||(this.data=new l(this)),this.data.set(g,m),this},incData:function(g,m){return this.data||(this.data=new l(this)),this.data.inc(g,m),this},toggleData:function(g){return this.data||(this.data=new l(this)),this.data.toggle(g),this},getData:function(g){return this.data||(this.data=new l(this)),this.data.get(g)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return h(this)},willRender:function(g){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&g.id)},getIndexList:function(){for(var g=this,m=this.parentContainer,T=[];m&&(T.unshift(m.getIndex(g)),g=m,m.parentContainer);)m=m.parentContainer;return T.unshift(this.displayList.getIndex(g)),T},addChildCallback:function(g){var m=g.displayList;m&&m!==this&&g.removeFromDisplayList(),g.displayList||(this.queueDepthSort(),g.displayList=this,g.emit(o.ADDED_TO_SCENE,g,this.scene),this.events.emit(d.ADDED_TO_SCENE,g,this.scene))},removeChildCallback:function(g){this.queueDepthSort(),g.displayList=null,g.emit(o.REMOVED_FROM_SCENE,g,this.scene),this.events.emit(d.REMOVED_FROM_SCENE,g,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(g,m){return g._depth-m._depth},getChildren:function(){return this.list},addToDisplayList:function(g){return g===void 0&&(g=this.scene.sys.displayList),this.displayList&&this.displayList!==g&&this.removeFromDisplayList(),g.exists(this)||(this.displayList=g,g.add(this,!0),g.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),g.events.emit(d.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var g=this.displayList||this.scene.sys.displayList;return g.exists(this)&&(g.remove(this,!0),g.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),g.events.emit(d.REMOVED_FROM_SCENE,this,this.scene)),this},getDisplayList:function(){var g=null;return this.parentContainer?g=this.parentContainer.list:this.displayList&&(g=this.displayList.list),g},destroy:function(g){if(!(!this.scene||this.ignoreDestroy)){this.emit(o.DESTROY,this);for(var m=this.list;m.length;)m[0].destroy(g);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});S.exports=v},2956:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=c.list;if(u.length!==0){c.depthSort();var h=c.blendMode!==-1;h||s.setBlendMode(0);var l=c._alpha;c.mask&&c.mask.preRenderCanvas(s,null,y);for(var n=0;n<u.length;n++){var o=u[n];if(o.willRender(y)){var f=o.alpha;!h&&o.blendMode!==s.currentBlendMode&&s.setBlendMode(o.blendMode),o.setAlpha(f*l),o.renderCanvas(s,o,y),o.setAlpha(f)}}c.mask&&c.mask.postRenderCanvas(s)}};S.exports=w},25179:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(93595),u=s(44603),h=s(23568);u.register("layer",function(l,n){l===void 0&&(l={});var o=h(l,"children",null),f=new y(this.scene,o);return n!==void 0&&(l.add=n),c(this.scene,f,l),f})},20005:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(93595),y=s(39429);y.register("layer",function(u){return this.displayList.add(new c(this.scene,u))})},33963:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(15869),u=s(2956),S.exports={renderWebGL:y,renderCanvas:u}},15869:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=c.list,h=u.length;if(h!==0){c.depthSort(),s.pipelines.preBatch(c);var l=c.blendMode!==-1;l||s.setBlendMode(0);for(var n=c.alpha,o=0;o<h;o++){var f=u[o];if(f.willRender(y)){var r,d,p,v;if(f.alphaTopLeft!==void 0)r=f.alphaTopLeft,d=f.alphaTopRight,p=f.alphaBottomLeft,v=f.alphaBottomRight;else{var g=f.alpha;r=g,d=g,p=g,v=g}!l&&f.blendMode!==s.currentBlendMode&&s.setBlendMode(f.blendMode);var m=f.mask;m&&m.preRenderWebGL(s,f,y);var T=f.type;T!==s.currentType&&(s.newType=!0,s.currentType=T),s.nextTypeMatch=o<h-1?u[o+1].type===s.currentType:!1,f.setAlpha(r*n,d*n,p*n,v*n),f.renderWebGL(s,f,y),f.setAlpha(r,d,p,v),m&&m.postRenderWebGL(s,y),s.newType=!1}}s.pipelines.postBatch(c)}};S.exports=w},41432:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(96503),y=s(83419),u=s(31401),h=s(51767),l=s(70554),n=new y({Extends:c,Mixins:[u.Origin,u.ScrollFactor,u.Visible],initialize:function(f,r,d,p,v,g,m){c.call(this,f,r,d),this.color=new h(p,v,g),this.intensity=m,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(d)},displayWidth:{get:function(){return this.diameter},set:function(o){this.diameter=o}},displayHeight:{get:function(){return this.diameter},set:function(o){this.diameter=o}},width:{get:function(){return this.diameter},set:function(o){this.diameter=o}},height:{get:function(){return this.diameter},set:function(o){this.diameter=o}},willRender:function(o){return!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&o.id)},setColor:function(o){var f=l.getFloatsFromUintRGB(o);return this.color.set(f[0],f[1],f[2]),this},setIntensity:function(o){return this.intensity=o,this},setRadius:function(o){return this.radius=o,this}});n.RENDER_MASK=15,S.exports=n},61356:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(81491),y=s(83419),u=s(20339),h=s(41432),l=s(80321),n=s(51767),o=s(19133),f=s(19186),r=s(70554),d=new y({initialize:function(){this.lights=[],this.ambientColor=new n(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(p,v,g,m,T,P){return this.systems.displayList.add(new l(this.scene,p,v,g,m,T,P))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(p){for(var v=this.lights,g=p.worldView,m=[],T=0;T<v.length;T++){var P=v[T];P.willRender(p)&&c(P,g)&&m.push({light:P,distance:u(P.x,P.y,g.centerX,g.centerY)})}return m.length>this.maxLights&&(f(m,this.sortByDistance),m=m.slice(0,this.maxLights)),this.visibleLights=m.length,m},sortByDistance:function(p,v){return p.distance>=v.distance},setAmbientColor:function(p){var v=r.getFloatsFromUintRGB(p);return this.ambientColor.set(v[0],v[1],v[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(p,v,g,m,T){p===void 0&&(p=0),v===void 0&&(v=0),g===void 0&&(g=128),m===void 0&&(m=16777215),T===void 0&&(T=1);var P=r.getFloatsFromUintRGB(m),M=new h(p,v,g,P[0],P[1],P[2],T);return this.lights.push(M),M},removeLight:function(p){var v=this.lights.indexOf(p);return v>=0&&o(this.lights,v),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});S.exports=d},88992:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(61356),u=s(37277),h=s(44594),l=new c({Extends:y,initialize:function(o){this.scene=o,this.systems=o.sys,o.sys.settings.isBooted||o.sys.events.once(h.BOOT,this.boot,this),y.call(this)},boot:function(){var n=this.systems.events;n.on(h.SHUTDOWN,this.shutdown,this),n.on(h.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});u.register("LightsPlugin",l,"lights"),S.exports=l},4703:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(31401),u=s(39506),h=s(83997),l=s(95643),n=s(34684),o=s(92515),f=s(91296),r=s(37867),d=s(29807),p=s(43396),v=s(19186),g=s(25836),m=s(39318),T=new c({Extends:l,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Mask,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Size,y.Texture,y.Transform,y.Visible,d],initialize:function(M,b,R,A,D,G,F,B,N,z,$,Q){b===void 0&&(b=0),R===void 0&&(R=0),A===void 0&&(A="__WHITE"),l.call(this,M,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new r,this.viewPosition=new g,this.viewMatrix=new r,this.projectionMatrix=new r,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var Z=M.sys.renderer;this.setPosition(b,R),this.setTexture(A,D),this.setSize(Z.width,Z.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(Z.width,Z.height),G&&this.addVertices(G,F,B,N,z,$,Q)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(P){return this.viewPosition.addScale(g.LEFT,P),this.dirtyCache[10]=1,this},panY:function(P){return this.viewPosition.y+=g.DOWN.y*P,this.dirtyCache[10]=1,this},panZ:function(P){return this.viewPosition.z+=P,this.dirtyCache[10]=1,this},setPerspective:function(P,M,b,R,A){return b===void 0&&(b=45),R===void 0&&(R=.01),A===void 0&&(A=1e3),this.fov=b,this.projectionMatrix.perspective(u(b),P/M,R,A),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(P,M,b,R){return P===void 0&&(P=this.scene.sys.renderer.getAspectRatio()),M===void 0&&(M=1),b===void 0&&(b=-1e3),R===void 0&&(R=1e3),this.fov=0,this.projectionMatrix.ortho(-P,P,-M,M,b,R),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(P){P.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(P,M,b,R,A,D,G,F,B){var N=this.scene.sys.cache.obj.get(P),z;return N&&(z=n(N,this,M,b,R,A,D,G,F,B)),(!z||z.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",P),this},sortByDepth:function(P,M){return P.depth-M.depth},depthSort:function(){return v(this.faces,this.sortByDepth),this},addVertex:function(P,M,b,R,A,D,G){var F=new m(P,M,b,R,A,D,G);return this.vertices.push(F),F},addFace:function(P,M,b){var R=new h(P,M,b);return this.faces.push(R),this.dirtyCache[9]=-1,R},addVertices:function(P,M,b,R,A,D,G){var F=o(P,M,b,R,A,D,G);return F?(this.faces=this.faces.concat(F.faces),this.vertices=this.vertices.concat(F.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(P){return this.faces[P]},hasFaceAt:function(P,M,b){b===void 0&&(b=this.scene.sys.cameras.main);for(var R=f(this,b).calc,A=this.faces,D=0;D<A.length;D++){var G=A[D];if(G.contains(P,M,R))return!0}return!1},getFaceAt:function(P,M,b){b===void 0&&(b=this.scene.sys.cameras.main);for(var R=f(this,b).calc,A=this.faces,D=[],G=0;G<A.length;G++){var F=A[G];F.contains(P,M,R)&&D.push(F)}return v(D,this.sortByDepth)},setDebug:function(P,M){return this.debugGraphic=P,!P&&!M?this.debugCallback=null:M?this.debugCallback=M:this.debugCallback=this.renderDebug,this},isDirty:function(){var P=this.modelPosition,M=this.modelRotation,b=this.modelScale,R=this.dirtyCache,A=P.x,D=P.y,G=P.z,F=M.x,B=M.y,N=M.z,z=b.x,$=b.y,Q=b.z,Z=this.getFaceCount(),tt=R[0],H=R[1],J=R[2],Y=R[3],_=R[4],U=R[5],et=R[6],nt=R[7],rt=R[8],ot=R[9];return R[0]=A,R[1]=D,R[2]=G,R[3]=F,R[4]=B,R[5]=N,R[6]=z,R[7]=$,R[8]=Q,R[9]=Z,tt!==A||H!==D||J!==G||Y!==F||_!==B||U!==N||et!==z||nt!==$||rt!==Q||ot!==Z},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var P=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!P[10]&&!this.isDirty())){var M=this.width,b=this.height,R=this.viewMatrix,A=this.viewPosition;P[10]&&(R.identity(),R.translate(A),R.invert(),P[10]=0);var D=this.transformMatrix;D.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var G=A.z,F=this.faces,B=0;B<F.length;B++)F[B].transformCoordinatesLocal(D,M,b,G);this.depthSort()}},renderDebug:function(P,M){for(var b=P.debugGraphic,R=0;R<M.length;R++){var A=M[R],D=A.vertex1.tx,G=A.vertex1.ty,F=A.vertex2.tx,B=A.vertex2.ty,N=A.vertex3.tx,z=A.vertex3.ty;b.strokeTriangle(D,G,F,B,N,z)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(P){P===void 0&&(P={});var M=function(b,R,A){for(var D=this.faces,G=0;G<D.length;G++){var F=D[G];if(F.contains(R,A))return!0}return!1}.bind(this);return this.scene.sys.input.enable(this,P,M),this},setTint:function(P){P===void 0&&(P=16777215);for(var M=this.vertices,b=0;b<M.length;b++)M[b].color=P;return this},uvScroll:function(P,M){for(var b=this.faces,R=0;R<b.length;R++)b[R].scrollUV(P,M);return this},uvScale:function(P,M){for(var b=this.faces,R=0;R<b.length;R++)b[R].scaleUV(P,M);return this},tint:{set:function(P){this.setTint(P)}},rotateX:{get:function(){return p(this.modelRotation.x)},set:function(P){this.modelRotation.x=u(P)}},rotateY:{get:function(){return p(this.modelRotation.y)},set:function(P){this.modelRotation.y=u(P)}},rotateZ:{get:function(){return p(this.modelRotation.z)},set:function(P){this.modelRotation.z=u(P)}}});S.exports=T},36488:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(){};S.exports=w},20527:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(44603),u=s(23568),h=s(35154),l=s(4703);y.register("mesh",function(n,o){n===void 0&&(n={});var f=u(n,"key",null),r=u(n,"frame",null),d=h(n,"vertices",[]),p=h(n,"uvs",[]),v=h(n,"indicies",[]),g=h(n,"containsZ",!1),m=h(n,"normals",[]),T=h(n,"colors",16777215),P=h(n,"alphas",1),M=new l(this.scene,0,0,f,r,d,p,v,g,m,T,P);return o!==void 0&&(n.add=o),c(this.scene,M,n),M})},9225:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(4703),y=s(39429);y.register("mesh",function(u,h,l,n,o,f,r,d,p,v,g){return this.displayList.add(new c(this.scene,u,h,l,n,o,f,r,d,p,v,g))})},29807:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(48833),u=s(36488),S.exports={renderWebGL:y,renderCanvas:u}},48833:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=function(u,h,l,n){var o=h.faces,f=o.length;if(f!==0){l.addToRenderList(h);var r=u.pipelines.set(h.pipeline,h),d=c(h,l,n).calc;u.pipelines.preBatch(h);for(var p=r.setGameObject(h),v=r.vertexViewF32,g=r.vertexViewU32,m=r.vertexCount*r.currentShader.vertexComponentCount-1,T=h.tintFill,P=[],M=h.debugCallback,b=d.a,R=d.b,A=d.c,D=d.d,G=d.e,F=d.f,B=h.viewPosition.z,N=h.hideCCW,z=l.roundPixels,$=l.alpha*h.alpha,Q=0,Z=0;Z<f;Z++){var tt=o[Z];tt.isInView(l,N,B,$,b,R,A,D,G,F,z)&&(r.shouldFlush(3)&&(r.flush(),p=r.setGameObject(h),m=r.vertexCount*r.currentShader.vertexComponentCount-1),m=tt.load(v,g,m,p,T),Q++,r.vertexCount+=3,r.currentBatch.count=r.vertexCount-r.currentBatch.start,M&&P.push(tt))}h.totalFrame+=Q,M&&M.call(h,h,P),u.pipelines.postBatch(h)}};S.exports=y},28103:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(31401),u=s(95643),h=s(78023),l=s(39318),n=new c({Extends:u,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Texture,y.Transform,y.Visible,h],initialize:function(f,r,d,p,v,g,m,T,P,M,b){u.call(this,f,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var R=f.textures.getFrame(p,v);this.is3Slice=!M&&!b,R&&R.scale9&&(this.is3Slice=R.is3Slice);for(var A=this.is3Slice?18:54,D=0;D<A;D++)this.vertices.push(new l);this.setPosition(r,d),this.setTexture(p,v),this.setSlices(g,m,T,P,M,b,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(o,f,r,d,p,v,g){r===void 0&&(r=10),d===void 0&&(d=10),p===void 0&&(p=0),v===void 0&&(v=0),g===void 0&&(g=!1);var m=this.frame,T=!1;if(this.is3Slice&&g&&p!==0&&v!==0&&(T=!0),T)console.warn("Cannot change 9 slice to 3 slice");else{if(m&&m.scale9&&!g){var P=m.data.scale9Borders,M=P.x,b=P.y;r=M,d=m.width-P.w-M,p=b,v=m.height-P.h-b,o===void 0&&(o=m.width),f===void 0&&(f=m.height)}else o===void 0&&(o=256),f===void 0&&(f=256);this._width=o,this._height=f,this.leftWidth=r,this.rightWidth=d,this.topHeight=p,this.bottomHeight=v,this.is3Slice&&(f=m.height,this._height=f,this.topHeight=f,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var o=this.leftWidth,f=this.rightWidth,r=this.topHeight,d=this.bottomHeight,p=this.frame.width,v=this.frame.height;this.updateQuadUVs(0,0,0,o/p,r/v),this.updateQuadUVs(6,o/p,0,1-f/p,r/v),this.updateQuadUVs(12,1-f/p,0,1,r/v),this.is3Slice||(this.updateQuadUVs(18,0,r/v,o/p,1-d/v),this.updateQuadUVs(24,o/p,r/v,1-f/p,1-d/v),this.updateQuadUVs(30,1-f/p,r/v,1,1-d/v),this.updateQuadUVs(36,0,1-d/v,o/p,1),this.updateQuadUVs(42,o/p,1-d/v,1-f/p,1),this.updateQuadUVs(48,1-f/p,1-d/v,1,1))},updateVertices:function(){var o=this.leftWidth,f=this.rightWidth,r=this.topHeight,d=this.bottomHeight,p=this.width,v=this.height;this.updateQuad(0,-.5,.5,-.5+o/p,.5-r/v),this.updateQuad(6,-.5+o/p,.5,.5-f/p,.5-r/v),this.updateQuad(12,.5-f/p,.5,.5,.5-r/v),this.is3Slice||(this.updateQuad(18,-.5,.5-r/v,-.5+o/p,-.5+d/v),this.updateQuad(24,-.5+o/p,.5-r/v,.5-f/p,-.5+d/v),this.updateQuad(30,.5-f/p,.5-r/v,.5,-.5+d/v),this.updateQuad(36,-.5,-.5+d/v,-.5+o/p,-.5),this.updateQuad(42,-.5+o/p,-.5+d/v,.5-f/p,-.5),this.updateQuad(48,.5-f/p,-.5+d/v,.5,-.5))},updateQuad:function(o,f,r,d,p){var v=this.width,g=this.height,m=this.originX,T=this.originY,P=this.vertices;P[o+0].resize(f,r,v,g,m,T),P[o+1].resize(f,p,v,g,m,T),P[o+2].resize(d,r,v,g,m,T),P[o+3].resize(f,p,v,g,m,T),P[o+4].resize(d,p,v,g,m,T),P[o+5].resize(d,r,v,g,m,T)},updateQuadUVs:function(o,f,r,d,p){var v=this.vertices,g=this.frame,m=g.u0,T=g.v0,P=g.u1,M=g.v1;if(m!==0||P!==1){var b=P-m;f=m+f*b,d=m+d*b}if(T!==0||M!==1){var R=M-T;r=T+r*R,p=T+p*R}v[o+0].setUVs(f,r),v[o+1].setUVs(f,p),v[o+2].setUVs(d,r),v[o+3].setUVs(f,p),v[o+4].setUVs(d,p),v[o+5].setUVs(d,r)},clearTint:function(){return this.setTint(16777215),this},setTint:function(o){return o===void 0&&(o=16777215),this.tint=o,this.tintFill=!1,this},setTintFill:function(o){return this.setTint(o),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(o){this._width=Math.max(o,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(o){this.is3Slice||(this._height=Math.max(o,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(o){this.scaleX=o/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(o){this.scaleY=o/this.height}},setSize:function(o,f){this.width=o,this.height=f,this.updateDisplayOrigin();var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=this.width,r.hitArea.height=this.height),this},setDisplaySize:function(o,f){return this.displayWidth=o,this.displayHeight=f,this},originX:{get:function(){return this._originX},set:function(o){this._originX=o,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(o){this._originY=o,this.updateVertices()}},setOrigin:function(o,f){return o===void 0&&(o=.5),f===void 0&&(f=o),this._originX=o,this._originY=f,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var o=this.frame.height;this._height=o,this.topHeight=o,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});S.exports=n},28279:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(44603),u=s(23568),h=s(35154),l=s(28103);y.register("nineslice",function(n,o){n===void 0&&(n={});var f=u(n,"key",null),r=u(n,"frame",null),d=h(n,"width",256),p=h(n,"height",256),v=h(n,"leftWidth",10),g=h(n,"rightWidth",10),m=h(n,"topHeight",0),T=h(n,"bottomHeight",0),P=new l(this.scene,0,0,f,r,d,p,v,g,m,T);return o!==void 0&&(n.add=o),c(this.scene,P,n),P})},47521:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(28103),y=s(39429);y.register("nineslice",function(u,h,l,n,o,f,r,d,p,v){return this.displayList.add(new c(this.scene,u,h,l,n,o,f,r,d,p,v))})},78023:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(52230),S.exports={renderWebGL:y,renderCanvas:u}},52230:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=s(70554),u=function(h,l,n,o){var f=l.vertices,r=f.length;if(r!==0){n.addToRenderList(l);var d=h.pipelines.set(l.pipeline,l),p=c(l,n,o,!1).calc;h.pipelines.preBatch(l);var v=d.setGameObject(l),g=d.vertexViewF32,m=d.vertexViewU32,T=d.vertexCount*d.currentShader.vertexComponentCount-1,P=n.roundPixels,M=l.tintFill,b=n.alpha*l.alpha,R=y.getTintAppendFloatAlpha(l.tint,b),A=d.vertexAvailable(),D=-1;A<r&&(D=A);for(var G=0;G<r;G++){var F=f[G];G===D&&(d.flush(),v=d.setGameObject(l),T=0),g[++T]=p.getXRound(F.vx,F.vy,P),g[++T]=p.getYRound(F.vx,F.vy,P),g[++T]=F.u,g[++T]=F.v,g[++T]=v,g[++T]=M,m[++T]=R,d.vertexCount++,d.currentBatch.count=d.vertexCount-d.currentBatch.start}h.pipelines.postBatch(l)}};S.exports=u},76472:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(44777),u=s(37589),h=s(6113),l=s(91389),n=s(90664),o=new c({Extends:y,initialize:function(r){y.call(this,r,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var f=this.propertyValue,r=f,d=this.defaultEmit,p=this.defaultUpdate;if(this.method===9){this.start=f[0],this.ease=h("Linear"),this.interpolation=l("linear"),d=this.easedValueEmit,p=this.easeValueUpdate,r=f[0],this.active=!0,this.r.length=0,this.g.length=0,this.b.length=0;for(var v=0;v<f.length;v++){var g=n(f[v]);this.r.push(g.r),this.g.push(g.g),this.b.push(g.b)}}return this.onEmit=d,this.onUpdate=p,this.current=r,this},setEase:function(f){this.easeName=f,this.ease=h(f)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(f,r,d){var p=this.ease(d),v=this.interpolation(this.r,p),g=this.interpolation(this.g,p),m=this.interpolation(this.b,p),T=u(v,g,m);return this.current=T,T}});S.exports=o},44777:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(30976),y=s(45319),u=s(83419),h=s(99472),l=s(6113),n=s(95540),o=s(91389),f=s(77720),r=s(15994),d=new u({initialize:function(v,g,m){m===void 0&&(m=!1),this.propertyKey=v,this.propertyValue=g,this.defaultValue=g,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=m,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(p,v){p===void 0&&(p={}),v&&(this.propertyKey=v),this.propertyValue=n(p,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(p){var v;switch(this.method){case 1:case 3:case 8:v=p;break;case 2:this.propertyValue.indexOf(p)>=0&&(v=p);break;case 4:var g=(this.end-this.start)/this.steps;v=f(p,g),this.counter=v;break;case 5:case 6:case 7:v=y(p,this.start,this.end);break;case 9:v=this.start[0];break}return this.current=v,this},getMethod:function(){var p=this.propertyValue;if(p===null)return 0;var v=typeof p;if(v==="number")return 1;if(Array.isArray(p))return 2;if(v==="function")return 3;if(v==="object"){if(this.hasBoth(p,"start","end"))return this.has(p,"steps")?4:5;if(this.hasBoth(p,"min","max"))return 6;if(this.has(p,"random"))return 7;if(this.hasEither(p,"onEmit","onUpdate"))return 8;if(this.hasEither(p,"values","interpolation"))return 9}return 0},setMethods:function(){var p=this.propertyValue,v=p,g=this.defaultEmit,m=this.defaultUpdate;switch(this.method){case 1:g=this.staticValueEmit;break;case 2:g=this.randomStaticValueEmit,v=p[0];break;case 3:this._onEmit=p,g=this.proxyEmit,v=this.defaultValue;break;case 4:this.start=p.start,this.end=p.end,this.steps=p.steps,this.counter=this.start,this.yoyo=this.has(p,"yoyo")?p.yoyo:!1,this.direction=0,g=this.steppedEmit,v=this.start;break;case 5:this.start=p.start,this.end=p.end;var T=this.has(p,"ease")?p.ease:"Linear";this.ease=l(T,p.easeParams),g=this.has(p,"random")&&p.random?this.randomRangedValueEmit:this.easedValueEmit,m=this.easeValueUpdate,v=this.start;break;case 6:this.start=p.min,this.end=p.max,g=this.has(p,"int")&&p.int?this.randomRangedIntEmit:this.randomRangedValueEmit,v=this.start;break;case 7:var P=p.random;Array.isArray(P)&&(this.start=P[0],this.end=P[1]),g=this.randomRangedIntEmit,v=this.start;break;case 8:this._onEmit=this.has(p,"onEmit")?p.onEmit:this.defaultEmit,this._onUpdate=this.has(p,"onUpdate")?p.onUpdate:this.defaultUpdate,g=this.proxyEmit,m=this.proxyUpdate,v=this.defaultValue;break;case 9:this.start=p.values;var M=this.has(p,"ease")?p.ease:"Linear";this.ease=l(M,p.easeParams),this.interpolation=o(p.interpolation),g=this.easedValueEmit,m=this.easeValueUpdate,v=this.start[0];break}return this.onEmit=g,this.onUpdate=m,this.current=v,this},has:function(p,v){return p.hasOwnProperty(v)},hasBoth:function(p,v,g){return p.hasOwnProperty(v)&&p.hasOwnProperty(g)},hasEither:function(p,v,g){return p.hasOwnProperty(v)||p.hasOwnProperty(g)},defaultEmit:function(){return this.defaultValue},defaultUpdate:function(p,v,g,m){return m},proxyEmit:function(p,v,g){var m=this._onEmit(p,v,g);return this.current=m,m},proxyUpdate:function(p,v,g,m){var T=this._onUpdate(p,v,g,m);return this.current=T,T},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var p=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[p],this.current},randomRangedValueEmit:function(p,v){var g=h(this.start,this.end);return p&&p.data[v]&&(p.data[v].min=g,p.data[v].max=this.end),this.current=g,g},randomRangedIntEmit:function(p,v){var g=c(this.start,this.end);return p&&p.data[v]&&(p.data[v].min=g,p.data[v].max=this.end),this.current=g,g},steppedEmit:function(){var p=this.counter,v=p,g=(this.end-this.start)/this.steps;if(this.yoyo){var m;this.direction===0?(v+=g,v>=this.end&&(m=v-this.end,v=this.end-m,this.direction=1)):(v-=g,v<=this.start&&(m=this.start-v,v=this.start+m,this.direction=0)),this.counter=v}else this.counter=r(v+g,this.start,this.end);return this.current=p,p},easedValueEmit:function(p,v){if(p&&p.data[v]){var g=p.data[v];g.min=this.start,g.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(p,v,g){var m=p.data[v],T,P=this.ease(g);return this.interpolation?T=this.interpolation(this.start,P):T=(m.max-m.min)*P+m.min,this.current=T,T},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});S.exports=d},24502:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(95540),u=s(20286),h=new c({Extends:u,initialize:function(n,o,f,r,d){if(typeof n=="object"){var p=n;n=y(p,"x",0),o=y(p,"y",0),f=y(p,"power",0),r=y(p,"epsilon",100),d=y(p,"gravity",50)}else n===void 0&&(n=0),o===void 0&&(o=0),f===void 0&&(f=0),r===void 0&&(r=100),d===void 0&&(d=50);u.call(this,n,o,!0),this._gravity=d,this._power=f*d,this._epsilon=r*r},update:function(l,n){var o=this.x-l.x,f=this.y-l.y,r=o*o+f*f;if(r!==0){var d=Math.sqrt(r);r<this._epsilon&&(r=this._epsilon);var p=this._power*n/(r*d)*100;l.velocityX+=o*p,l.velocityY+=f*p}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(l){this._epsilon=l*l}},power:{get:function(){return this._power/this._gravity},set:function(l){this._power=l*this._gravity}},gravity:{get:function(){return this._gravity},set:function(l){var n=this.power;this._gravity=l,this.power=n}}});S.exports=h},56480:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(9674),y=s(45319),u=s(83419),h=s(39506),l=s(87841),n=s(11520),o=s(26099),f=new u({initialize:function(d){this.emitter=d,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new o,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=d.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new c(this)),this.bounds=new l},emit:function(r,d,p,v,g,m){return this.emitter.emit(r,d,p,v,g,m)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(r,d){r===void 0&&(r=0),d===void 0&&(d=0),this.x=r,this.y=d},fire:function(r,d){var p=this.emitter,v=p.ops,g=p.getAnim();if(g?this.anims.play(g):(this.frame=p.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(p.getEmitZone(this),r===void 0?this.x+=v.x.onEmit(this,"x"):v.x.steps>0?this.x+=r+v.x.onEmit(this,"x"):this.x+=r,d===void 0?this.y+=v.y.onEmit(this,"y"):v.y.steps>0?this.y+=d+v.y.onEmit(this,"y"):this.y+=d,this.life=v.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=v.delay.onEmit(this,"delay"),this.holdCurrent=v.hold.onEmit(this,"hold"),this.scaleX=v.scaleX.onEmit(this,"scaleX"),this.scaleY=v.scaleY.active?v.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=v.rotate.onEmit(this,"rotate"),this.rotation=h(this.angle),p.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&p.getDeathZone(this))return this.lifeCurrent=0,!1;var m=v.speedX.onEmit(this,"speedX"),T=v.speedY.active?v.speedY.onEmit(this,"speedY"):m;if(p.radial){var P=h(v.angle.onEmit(this,"angle"));this.velocityX=Math.cos(P)*Math.abs(m),this.velocityY=Math.sin(P)*Math.abs(T)}else if(p.moveTo){var M=v.moveToX.onEmit(this,"moveToX"),b=v.moveToY.onEmit(this,"moveToY"),R=this.life/1e3;this.velocityX=(M-this.x)/R,this.velocityY=(b-this.y)/R}else this.velocityX=m,this.velocityY=T;return p.acceleration&&(this.accelerationX=v.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=v.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=v.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=v.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=v.bounce.onEmit(this,"bounce"),this.alpha=v.alpha.onEmit(this,"alpha"),v.color.active?this.tint=v.color.onEmit(this,"tint"):this.tint=v.tint.onEmit(this,"tint"),!0},update:function(r,d,p){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=r,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=r,!1;this.anims&&this.anims.update(0,r);var v=this.emitter,g=v.ops,m=1-this.lifeCurrent/this.life;if(this.lifeT=m,this.x=g.x.onUpdate(this,"x",m,this.x),this.y=g.y.onUpdate(this,"y",m,this.y),v.moveTo){var T=g.moveToX.onUpdate(this,"moveToX",m,v.moveToX),P=g.moveToY.onUpdate(this,"moveToY",m,v.moveToY),M=this.lifeCurrent/1e3;this.velocityX=(T-this.x)/M,this.velocityY=(P-this.y)/M}return this.computeVelocity(v,r,d,p,m),this.scaleX=g.scaleX.onUpdate(this,"scaleX",m,this.scaleX),g.scaleY.active?this.scaleY=g.scaleY.onUpdate(this,"scaleY",m,this.scaleY):this.scaleY=this.scaleX,this.angle=g.rotate.onUpdate(this,"rotate",m,this.angle),this.rotation=h(this.angle),v.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=y(g.alpha.onUpdate(this,"alpha",m,this.alpha),0,1),g.color.active?this.tint=g.color.onUpdate(this,"color",m,this.tint):this.tint=g.tint.onUpdate(this,"tint",m,this.tint),this.lifeCurrent-=r,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(r,d,p,v,g){var m=r.ops,T=this.velocityX,P=this.velocityY,M=m.accelerationX.onUpdate(this,"accelerationX",g,this.accelerationX),b=m.accelerationY.onUpdate(this,"accelerationY",g,this.accelerationY),R=m.maxVelocityX.onUpdate(this,"maxVelocityX",g,this.maxVelocityX),A=m.maxVelocityY.onUpdate(this,"maxVelocityY",g,this.maxVelocityY);this.bounce=m.bounce.onUpdate(this,"bounce",g,this.bounce),T+=r.gravityX*p+M*p,P+=r.gravityY*p+b*p,T=y(T,-R,R),P=y(P,-A,A),this.velocityX=T,this.velocityY=P,this.x+=T*p,this.y+=P*p,r.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var D=0;D<v.length;D++){var G=v[D];G.active&&G.update(this,d,p,g)}},setSizeToFrame:function(){},getBounds:function(r){r===void 0&&(r=this.emitter.getWorldTransformMatrix());var d=Math.abs(r.scaleX)*this.scaleX,p=Math.abs(r.scaleY)*this.scaleY,v=this.x,g=this.y,m=this.rotation,T=this.frame.width*d/2,P=this.frame.height*p/2,M=this.bounds,b=new o(v-T,g-P),R=new o(v+T,g-P),A=new o(v-T,g+P),D=new o(v+T,g+P);return m!==0&&(n(b,v,g,m),n(R,v,g,m),n(A,v,g,m),n(D,v,g,m)),r.transformPoint(b.x,b.y,b),r.transformPoint(R.x,R.y,R),r.transformPoint(A.x,A.y,A),r.transformPoint(D.x,D.y,D),M.x=Math.min(b.x,R.x,A.x,D.x),M.y=Math.min(b.y,R.y,A.y,D.y),M.width=Math.max(b.x,R.x,A.x,D.x)-M.x,M.height=Math.max(b.y,R.y,A.y,D.y)-M.y,M},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});S.exports=f},69601:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(20286),u=s(87841),h=new c({Extends:y,initialize:function(n,o,f,r,d,p,v,g){d===void 0&&(d=!0),p===void 0&&(p=!0),v===void 0&&(v=!0),g===void 0&&(g=!0),y.call(this,n,o,!0),this.bounds=new u(n,o,f,r),this.collideLeft=d,this.collideRight=p,this.collideTop=v,this.collideBottom=g},update:function(l){var n=this.bounds,o=-l.bounce,f=l.worldPosition;f.x<n.x&&this.collideLeft?(l.x+=n.x-f.x,l.velocityX*=o):f.x>n.right&&this.collideRight&&(l.x-=f.x-n.right,l.velocityX*=o),f.y<n.y&&this.collideTop?(l.y+=n.y-f.y,l.velocityY*=o):f.y>n.bottom&&this.collideBottom&&(l.y-=f.y-n.bottom,l.velocityY*=o)}});S.exports=h},31600:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(31401),u=s(53774),h=s(43459),l=s(26388),n=s(19909),o=s(76472),f=s(44777),r=s(20696),d=s(95643),p=s(95540),v=s(26546),g=s(24502),m=s(69036),T=s(1985),P=s(97022),M=s(86091),b=s(73162),R=s(20074),A=s(269),D=s(56480),G=s(69601),F=s(68875),B=s(87841),N=s(59996),z=s(72905),$=s(90668),Q=s(19186),Z=s(61340),tt=s(26099),H=s(15994),J=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],Y=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],_=new c({Extends:d,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Mask,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Texture,y.Transform,y.Visible,$],initialize:function(et,nt,rt,ot,dt){d.call(this,et,"ParticleEmitter"),this.particleClass=D,this.config=null,this.ops={accelerationX:new f("accelerationX",0),accelerationY:new f("accelerationY",0),alpha:new f("alpha",1),angle:new f("angle",{min:0,max:360},!0),bounce:new f("bounce",0),color:new o("color"),delay:new f("delay",0,!0),hold:new f("hold",0,!0),lifespan:new f("lifespan",1e3,!0),maxVelocityX:new f("maxVelocityX",1e4),maxVelocityY:new f("maxVelocityY",1e4),moveToX:new f("moveToX",0),moveToY:new f("moveToY",0),quantity:new f("quantity",1,!0),rotate:new f("rotate",0),scaleX:new f("scaleX",1),scaleY:new f("scaleY",1),speedX:new f("speedX",0,!0),speedY:new f("speedY",0,!0),tint:new f("tint",16777215),x:new f("x",0),y:new f("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new tt,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new Z,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new b(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(nt,rt),this.setTexture(ot),dt&&this.setConfig(dt)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(U){if(!U)return this;this.config=U;var et=0,nt="",rt=this.ops;for(et=0;et<Y.length;et++)nt=Y[et],rt[nt].loadConfig(U);for(et=0;et<J.length;et++)nt=J[et],P(U,nt)&&(this[nt]=p(U,nt));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=m(U,["moveToX","moveToY"]),P(U,"speed")&&(rt.speedX.loadConfig(U,"speed"),rt.speedY.active=!1),(T(U,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),P(U,"scale")&&(rt.scaleX.loadConfig(U,"scale"),rt.scaleY.active=!1),P(U,"callbackScope")){var ot=p(U,"callbackScope",null);this.emitCallbackScope=ot,this.deathCallbackScope=ot}if(P(U,"emitZone")&&this.addEmitZone(U.emitZone),P(U,"deathZone")&&this.addDeathZone(U.deathZone),P(U,"bounds")){var dt=this.addParticleBounds(U.bounds);dt.collideLeft=p(U,"collideLeft",!0),dt.collideRight=p(U,"collideRight",!0),dt.collideTop=p(U,"collideTop",!0),dt.collideBottom=p(U,"collideBottom",!0)}return P(U,"followOffset")&&this.followOffset.setFromObject(p(U,"followOffset",0)),P(U,"texture")&&this.setTexture(U.texture),P(U,"frame")?this.setEmitterFrame(U.frame):P(U,"anim")&&this.setAnim(U.anim),P(U,"reserve")&&this.reserve(U.reserve),P(U,"advance")&&this.fastForward(U.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(r.START,this),this},updateConfig:function(U){return U&&(this.config?this.setConfig(A(this.config,U)):this.setConfig(U)),this},toJSON:function(){var U=u(this),et=0,nt="";for(et=0;et<J.length;et++)nt=J[et],U[nt]=this[nt];var rt=this.ops;for(et=0;et<Y.length;et++)nt=Y[et],rt[nt]&&(U[nt]=rt[nt].toJSON());return rt.speedY.active||(delete U.speedX,U.speed=rt.speedX.toJSON()),this.scaleX===this.scaleY&&(delete U.scaleX,delete U.scaleY,U.scale=rt.scaleX.toJSON()),U},resetCounters:function(U,et){var nt=this.counters;nt.fill(0),nt[0]=U,et&&(nt[5]=1)},startFollow:function(U,et,nt,rt){return et===void 0&&(et=0),nt===void 0&&(nt=0),rt===void 0&&(rt=!1),this.follow=U,this.followOffset.set(et,nt),this.trackVisible=rt,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var U=this.frames,et=U.length,nt;return et===1?nt=U[0]:this.randomFrame?nt=v(U):(nt=U[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===et&&(this.currentFrame=0))),this.texture.get(nt)},setEmitterFrame:function(U,et,nt){et===void 0&&(et=!0),nt===void 0&&(nt=1),this.randomFrame=et,this.frameQuantity=nt,this.currentFrame=0;var rt=typeof U;if(this.frames.length=0,Array.isArray(U))this.frames=this.frames.concat(U);else if(rt==="string"||rt==="number")this.frames.push(U);else if(rt==="object"){var ot=U;U=p(ot,"frames",null),U&&(this.frames=this.frames.concat(U));var dt=p(ot,"cycle",!1);this.randomFrame=!dt,this.frameQuantity=p(ot,"quantity",nt)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var U=this.anims,et=U.length;if(et===0)return null;if(et===1)return U[0];if(this.randomAnim)return v(U);var nt=U[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=H(this.currentAnim+1,0,et)),nt},setAnim:function(U,et,nt){et===void 0&&(et=!0),nt===void 0&&(nt=1),this.randomAnim=et,this.animQuantity=nt,this.currentAnim=0;var rt=typeof U;if(this.anims.length=0,Array.isArray(U))this.anims=this.anims.concat(U);else if(rt==="string")this.anims.push(U);else if(rt==="object"){var ot=U;U=p(ot,"anims",null),U&&(this.anims=this.anims.concat(U));var dt=p(ot,"cycle",!1);this.randomAnim=!dt,this.animQuantity=p(ot,"quantity",nt)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(U){return U===void 0&&(U=!0),this.radial=U,this},addParticleBounds:function(U,et,nt,rt,ot,dt,vt,mt){if(typeof U=="object"){var gt=U;U=gt.x,et=gt.y,nt=P(gt,"w")?gt.w:gt.width,rt=P(gt,"h")?gt.h:gt.height}return this.addParticleProcessor(new G(U,et,nt,rt,ot,dt,vt,mt))},setParticleSpeed:function(U,et){return et===void 0&&(et=U),this.ops.speedX.onChange(U),U===et?this.ops.speedY.active=!1:this.ops.speedY.onChange(et),this.radial=!0,this},setParticleScale:function(U,et){return U===void 0&&(U=1),et===void 0&&(et=U),this.ops.scaleX.onChange(U),this.ops.scaleY.onChange(et),this},setParticleGravity:function(U,et){return this.gravityX=U,this.gravityY=et,this},setParticleAlpha:function(U){return this.ops.alpha.onChange(U),this},setParticleTint:function(U){return this.ops.tint.onChange(U),this},setEmitterAngle:function(U){return this.ops.angle.onChange(U),this},setParticleLifespan:function(U){return this.ops.lifespan.onChange(U),this},setQuantity:function(U){return this.quantity=U,this},setFrequency:function(U,et){return this.frequency=U,this.flowCounter=U>0?U:0,et&&(this.quantity=et),this},addDeathZone:function(U){Array.isArray(U)||(U=[U]);for(var et,nt=[],rt=0;rt<U.length;rt++)if(et=U[rt],et instanceof l)nt.push(et);else if(typeof et.contains=="function")et=new l(et,!0),nt.push(et);else{var ot=p(et,"type","onEnter"),dt=p(et,"source",null);if(dt&&typeof dt.contains=="function"){var vt=ot==="onEnter";et=new l(dt,vt),nt.push(et)}}return this.deathZones=this.deathZones.concat(nt),nt},removeDeathZone:function(U){return z(this.deathZones,U),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(U){Array.isArray(U)||(U=[U]);for(var et,nt=[],rt=0;rt<U.length;rt++)if(et=U[rt],et instanceof F||et instanceof n)nt.push(et);else{var ot=p(et,"source",null);if(ot){var dt=p(et,"type","random");if(dt==="random"&&typeof ot.getRandomPoint=="function")et=new F(ot),nt.push(et);else if(dt==="edge"&&typeof ot.getPoints=="function"){var vt=p(et,"quantity",1),mt=p(et,"stepRate",0),gt=p(et,"yoyo",!1),yt=p(et,"seamless",!0),St=p(et,"total",-1);et=new n(ot,vt,mt,gt,yt,St),nt.push(et)}}}return this.emitZones=this.emitZones.concat(nt),nt},removeEmitZone:function(U){return z(this.emitZones,U),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(U){var et=this.emitZones,nt=et.length;if(nt!==0){var rt=et[this.zoneIndex];rt.getPoint(U),rt.total>-1&&(this.zoneTotal++,this.zoneTotal===rt.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===nt&&(this.zoneIndex=0)))}},getDeathZone:function(U){for(var et=this.deathZones,nt=0;nt<et.length;nt++){var rt=et[nt];if(rt.willKill(U))return this.emit(r.DEATH_ZONE,this,U,rt),!0}return!1},setEmitZone:function(U){var et;return isFinite(U)?et=U:et=this.emitZones.indexOf(U),et>=0&&(this.zoneIndex=et),this},addParticleProcessor:function(U){return this.processors.exists(U)||(U.emitter&&U.emitter.removeParticleProcessor(U),this.processors.add(U),U.emitter=this),U},removeParticleProcessor:function(U){return this.processors.exists(U)&&(this.processors.remove(U,!0),U.emitter=null),U},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(U){return this.addParticleProcessor(new g(U))},reserve:function(U){var et=this.dead;if(this.maxParticles>0){var nt=this.getParticleCount();nt+U>this.maxParticles&&(U=this.maxParticles-(nt+U))}for(var rt=0;rt<U;rt++)et.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(U,et){return U===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof U=="function"&&(this.emitCallback=U,et&&(this.emitCallbackScope=et)),this},onParticleDeath:function(U,et){return U===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof U=="function"&&(this.deathCallback=U,et&&(this.deathCallbackScope=et)),this},killAll:function(){for(var U=this.dead,et=this.alive;et.length>0;)U.push(et.pop());return this},forEachAlive:function(U,et){for(var nt=this.alive,rt=nt.length,ot=0;ot<rt;ot++)U.call(et,nt[ot],this);return this},forEachDead:function(U,et){for(var nt=this.dead,rt=nt.length,ot=0;ot<rt;ot++)U.call(et,nt[ot],this);return this},start:function(U,et){return U===void 0&&(U=0),this.emitting||(U>0&&this.fastForward(U),this.emitting=!0,this.resetCounters(this.frequency,!0),et!==void 0&&(this.duration=Math.abs(et)),this.emit(r.START,this)),this},stop:function(U){return U===void 0&&(U=!1),this.emitting&&(this.emitting=!1,U&&this.killAll(),this.emit(r.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(U,et){return U===void 0&&(U=""),et===void 0&&(et=this.true),this.sortProperty=U,this.sortOrderAsc=et,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(U){return this.sortProperty!==""?U=this.depthSortCallback:U=null,this.sortCallback=U,this},depthSort:function(){return Q(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(U,et){var nt=this.sortProperty;return this.sortOrderAsc?U[nt]-et[nt]:et[nt]-U[nt]},flow:function(U,et,nt){return et===void 0&&(et=1),this.emitting=!1,this.frequency=U,this.quantity=et,nt!==void 0&&(this.stopAfter=nt),this.start()},explode:function(U,et,nt){this.frequency=-1,this.resetCounters(-1,!0);var rt=this.emitParticle(U,et,nt);return this.emit(r.EXPLODE,this,rt),rt},emitParticleAt:function(U,et,nt){return this.emitParticle(nt,U,et)},emitParticle:function(U,et,nt){if(!this.atLimit()){U===void 0&&(U=this.ops.quantity.onEmit());for(var rt=this.dead,ot=this.stopAfter,dt=this.follow?this.follow.x+this.followOffset.x:et,vt=this.follow?this.follow.y+this.followOffset.y:nt,mt=0;mt<U;mt++){var gt=rt.pop();if(gt||(gt=new this.particleClass(this)),gt.fire(dt,vt)?(this.particleBringToTop?this.alive.push(gt):this.alive.unshift(gt),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,gt,this)):this.dead.push(gt),ot>0&&(this.stopCounter++,this.stopCounter>=ot)||this.atLimit())break}return gt}},fastForward:function(U,et){et===void 0&&(et=1e3/60);var nt=0;for(this.skipping=!0;nt<Math.abs(U);)this.preUpdate(0,et),nt+=et;return this.skipping=!1,this},preUpdate:function(U,et){et*=this.timeScale;var nt=et/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var rt=this.getProcessors(),ot=this.alive,dt=this.dead,vt=0,mt=[],gt=ot.length;for(vt=0;vt<gt;vt++){var yt=ot[vt];yt.update(et,nt,rt)&&mt.push({index:vt,particle:yt})}if(gt=mt.length,gt>0){var St=this.deathCallback,Ct=this.deathCallbackScope;for(vt=gt-1;vt>=0;vt--){var bt=mt[vt];ot.splice(bt.index,1),dt.push(bt.particle),St&&St.call(Ct,bt.particle),bt.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&ot.length===0&&(this.completeFlag=0,this.emit(r.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=et;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=et,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(U){for(var et=this.getWorldTransformMatrix(),nt=this.alive,rt=nt.length,ot=[],dt=0;dt<rt;dt++){var vt=nt[dt];N(U,vt.getBounds(et))&&ot.push(vt)}return ot},getBounds:function(U,et,nt,rt){U===void 0&&(U=0),et===void 0&&(et=0),nt===void 0&&(nt=1e3/60),rt===void 0&&(rt=new B);var ot=this.getWorldTransformMatrix(),dt,vt,mt=this.alive,gt=!1;if(rt.setTo(0,0,0,0),et>0){var yt=0;for(this.skipping=!0;yt<Math.abs(et);){for(this.preUpdate(0,nt),dt=0;dt<mt.length;dt++)vt=mt[dt].getBounds(ot),gt?R(rt,vt):(gt=!0,h(vt,rt));yt+=nt}this.skipping=!1}else for(dt=0;dt<mt.length;dt++)vt=mt[dt].getBounds(ot),gt?R(rt,vt):(gt=!0,h(vt,rt));return U>0&&M(rt,U,U),rt},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(U){this.ops.x.onChange(U)}},particleY:{get:function(){return this.ops.y.current},set:function(U){this.ops.y.onChange(U)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(U){this.ops.accelerationX.onChange(U)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(U){this.ops.accelerationY.onChange(U)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(U){this.ops.maxVelocityX.onChange(U)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(U){this.ops.maxVelocityY.onChange(U)}},speed:{get:function(){return this.ops.speedX.current},set:function(U){this.ops.speedX.onChange(U),this.ops.speedY.onChange(U)}},speedX:{get:function(){return this.ops.speedX.current},set:function(U){this.ops.speedX.onChange(U)}},speedY:{get:function(){return this.ops.speedY.current},set:function(U){this.ops.speedY.onChange(U)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(U){this.ops.moveToX.onChange(U)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(U){this.ops.moveToY.onChange(U)}},bounce:{get:function(){return this.ops.bounce.current},set:function(U){this.ops.bounce.onChange(U)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(U){this.ops.scaleX.onChange(U)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(U){this.ops.scaleY.onChange(U)}},particleColor:{get:function(){return this.ops.color.current},set:function(U){this.ops.color.onChange(U)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(U){this.ops.color.setEase(U)}},particleTint:{get:function(){return this.ops.tint.current},set:function(U){this.ops.tint.onChange(U)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(U){this.ops.alpha.onChange(U)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(U){this.ops.lifespan.onChange(U)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(U){this.ops.angle.onChange(U)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(U){this.ops.rotate.onChange(U)}},quantity:{get:function(){return this.ops.quantity.current},set:function(U){this.ops.quantity.onChange(U)}},delay:{get:function(){return this.ops.delay.current},set:function(U){this.ops.delay.onChange(U)}},hold:{get:function(){return this.ops.hold.current},set:function(U){this.ops.hold.onChange(U)}},flowCounter:{get:function(){return this.counters[0]},set:function(U){this.counters[0]=U}},frameCounter:{get:function(){return this.counters[1]},set:function(U){this.counters[1]=U}},animCounter:{get:function(){return this.counters[2]},set:function(U){this.counters[2]=U}},elapsed:{get:function(){return this.counters[3]},set:function(U){this.counters[3]=U}},stopCounter:{get:function(){return this.counters[4]},set:function(U){this.counters[4]=U}},completeFlag:{get:function(){return this.counters[5]},set:function(U){this.counters[5]=U}},zoneIndex:{get:function(){return this.counters[6]},set:function(U){this.counters[6]=U}},zoneTotal:{get:function(){return this.counters[7]},set:function(U){this.counters[7]=U}},currentFrame:{get:function(){return this.counters[8]},set:function(U){this.counters[8]=U}},currentAnim:{get:function(){return this.counters[9]},set:function(U){this.counters[9]=U}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var U,et=this.ops;for(U=0;U<Y.length;U++){var nt=Y[U];et[nt].destroy()}for(U=0;U<this.alive.length;U++)this.alive[U].destroy();for(U=0;U<this.dead.length;U++)this.dead[U].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});S.exports=_},9871:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(59996),y=s(61340),u=new y,h=new y,l=new y,n=new y,o=function(f,r,d,p){var v=u,g=h,m=l,T=n;p?(T.loadIdentity(),T.multiply(p),T.translate(r.x,r.y),T.rotate(r.rotation),T.scale(r.scaleX,r.scaleY)):T.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY);var P=f.currentContext,M=d.roundPixels,b=d.alpha,R=r.alpha,A=r.alive,D=A.length,G=r.viewBounds;if(!(!r.visible||D===0||G&&!c(G,d.worldView))){r.sortCallback&&r.depthSort(),d.addToRenderList(r);var F=r.scrollFactorX,B=r.scrollFactorY;P.save(),P.globalCompositeOperation=f.blendModes[r.blendMode];for(var N=0;N<D;N++){var z=A[N],$=z.alpha*R*b;if(!($<=0||z.scaleX===0||z.scaleY===0)){m.applyITRS(z.x,z.y,z.rotation,z.scaleX,z.scaleY),v.copyFrom(d.matrix),v.multiplyWithOffset(T,-d.scrollX*F,-d.scrollY*B),m.e=z.x,m.f=z.y,v.multiply(m,g);var Q=z.frame,Z=Q.canvasData;if(Z.width>0&&Z.height>0){var tt=-Q.halfWidth,H=-Q.halfHeight;P.globalAlpha=$,P.save(),g.setToContext(P),M&&(tt=Math.round(tt),H=Math.round(H)),P.imageSmoothingEnabled=!Q.source.scaleMode,P.drawImage(Q.source.image,Z.x,Z.y,Z.width,Z.height,tt,H,Z.width,Z.height),P.restore()}}}P.restore()}};S.exports=o},92730:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(44603),u=s(23568),h=s(95540),l=s(31600);y.register("particles",function(n,o){n===void 0&&(n={});var f=u(n,"key",null),r=h(n,"config",null),d=new l(this.scene,0,0,f);return o!==void 0&&(n.add=o),c(this.scene,d,n),r&&d.setConfig(r),d})},676:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(31600);c.register("particles",function(u,h,l,n){return u!==void 0&&typeof u=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new y(this.scene,u,h,l,n))})},90668:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(21188),u=s(9871),S.exports={renderWebGL:y,renderCanvas:u}},21188:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(59996),y=s(61340),u=s(70554),h=new y,l=new y,n=new y,o=new y,f=function(r,d,p,v){var g=r.pipelines.set(d.pipeline),m=h,T=l,P=n,M=o;v?(M.loadIdentity(),M.multiply(v),M.translate(d.x,d.y),M.rotate(d.rotation),M.scale(d.scaleX,d.scaleY)):M.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var b=u.getTintAppendFloatAlpha,R=p.alpha,A=d.alpha;r.pipelines.preBatch(d);var D=d.alive,G=D.length,F=d.viewBounds;if(!(G===0||F&&!c(F,p.worldView))){d.sortCallback&&d.depthSort(),p.addToRenderList(d),m.copyFrom(p.matrix),m.multiplyWithOffset(M,-p.scrollX*d.scrollFactorX,-p.scrollY*d.scrollFactorY),r.setBlendMode(d.blendMode),d.mask&&(d.mask.preRenderWebGL(r,d,p),r.pipelines.set(d.pipeline));for(var B=d.tintFill,N,z,$=0;$<G;$++){var Q=D[$],Z=Q.alpha*A*R;if(!(Z<=0||Q.scaleX===0||Q.scaleY===0)){P.applyITRS(Q.x,Q.y,Q.rotation,Q.scaleX,Q.scaleY),P.e=Q.x,P.f=Q.y,m.multiply(P,T);var tt=Q.frame;tt.glTexture!==z&&(z=tt.glTexture,N=g.setGameObject(d,tt));var H=-tt.halfWidth,J=-tt.halfHeight,Y=T.setQuad(H,J,H+tt.width,J+tt.height),_=b(Q.tint,Z);g.shouldFlush(6)&&(g.flush(),N=g.setGameObject(d,tt)),g.batchQuad(d,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],tt.u0,tt.v0,tt.u1,tt.v1,_,_,_,_,B,z,N)}}d.mask&&d.mask.postRenderWebGL(r,p),r.pipelines.postBatch(d)}};S.exports=f},20286:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l,n){h===void 0&&(h=0),l===void 0&&(l=0),n===void 0&&(n=!0),this.emitter,this.x=h,this.y=l,this.active=n},update:function(){},destroy:function(){this.emitter=null}});S.exports=y},9774:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="complete"},812:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="deathzone"},30522:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="explode"},96695:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="start"},18677:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="stop"},20696:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={COMPLETE:s(9774),DEATH_ZONE:s(812),EXPLODE:s(30522),START:s(96695),STOP:s(18677)}},18404:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={EmitterColorOp:s(76472),EmitterOp:s(44777),Events:s(20696),GravityWell:s(24502),Particle:s(56480),ParticleBounds:s(69601),ParticleEmitter:s(31600),ParticleProcessor:s(20286),Zones:s(21024)}},26388:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l){this.source=h,this.killOnEnter=l},willKill:function(u){var h=u.worldPosition,l=this.source.contains(h.x,h.y);return l&&this.killOnEnter||!l&&!this.killOnEnter}});S.exports=y},19909:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l,n,o,f,r){o===void 0&&(o=!1),f===void 0&&(f=!0),r===void 0&&(r=-1),this.source=h,this.points=[],this.quantity=l,this.stepRate=n,this.yoyo=o,this.counter=-1,this.seamless=f,this._length=0,this._direction=0,this.total=r,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var u=this.points[0],h=this.points[this.points.length-1];u.x===h.x&&u.y===h.y&&this.points.pop()}var l=this._length;return this._length=this.points.length,this._length<l&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(u){return this.source=u,this.updateSource()},getPoint:function(u){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var h=this.points[this.counter];h&&(u.x=h.x,u.y=h.y)}});S.exports=y},68875:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(26099),u=new c({initialize:function(l){this.source=l,this._tempVec=new y,this.total=-1},getPoint:function(h){var l=this._tempVec;this.source.getRandomPoint(l),h.x=l.x,h.y=l.y}});S.exports=u},21024:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={DeathZone:s(26388),EdgeZone:s(19909),RandomZone:s(68875)}},1159:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(31401),u=s(68287),h=new c({Extends:u,Mixins:[y.PathFollower],initialize:function(n,o,f,r,d,p){u.call(this,n,f,r,d,p),this.path=o},preUpdate:function(l,n){this.anims.update(l,n),this.pathUpdate(l)}});S.exports=h},90145:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(1159);c.register("follower",function(u,h,l,n,o){var f=new y(this.scene,u,h,l,n,o);return this.displayList.add(f),this.updateList.add(f),f})},33663:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(9674),y=s(83419),u=s(48803),h=s(90664),l=s(4703),n=s(45650),o=new y({Extends:l,initialize:function(r,d,p,v,g,m,T,P){v||(v="__DEFAULT"),l.call(this,r,d,p,v,g),this.type="Plane",this.anims=new c(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(m,T,P),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(f,r,d){f===void 0&&(f=8),r===void 0&&(r=8),d===void 0&&(d=!1);var p=!1;return d&&(p=!0),this.gridWidth=f,this.gridHeight=r,this.isTiled=d,this.clear(),u({mesh:this,widthSegments:f,heightSegments:r,isOrtho:!1,tile:d,flipY:p}),this},setSizeToFrame:function(f){f===void 0&&(f=!0);var r=this.frame;if(this.setPerspective(this.width/r.width,this.height/r.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!f)return this;var d=this.gridWidth,p=this.gridHeight,v=this.vertices,g=r.u0,m=r.u1,T=r.v0,P=r.v1,M,b,R=0;if(this.isTiled)for(T=r.v1,P=r.v0,b=0;b<p;b++)for(M=0;M<d;M++)v[R++].setUVs(g,P),v[R++].setUVs(g,T),v[R++].setUVs(m,P),v[R++].setUVs(g,T),v[R++].setUVs(m,T),v[R++].setUVs(m,P);else{var A=d+1,D=p+1,G=m-g,F=P-T,B=[];for(b=0;b<D;b++)for(M=0;M<A;M++){var N=g+G*(M/d),z=T+F*(b/p);B.push(N,z)}for(b=0;b<p;b++)for(M=0;M<d;M++){var $=(M+A*b)*2,Q=(M+A*(b+1))*2,Z=(M+1+A*(b+1))*2,tt=(M+1+A*b)*2;v[R++].setUVs(B[$],B[$+1]),v[R++].setUVs(B[Q],B[Q+1]),v[R++].setUVs(B[tt],B[tt+1]),v[R++].setUVs(B[Q],B[Q+1]),v[R++].setUVs(B[Z],B[Z+1]),v[R++].setUVs(B[tt],B[tt+1])}}return this},setViewHeight:function(f){f===void 0&&(f=this.frame.height);var r=this.fov*(Math.PI/180);this.viewPosition.z=this.height/f/Math.tan(r/2),this.dirtyCache[10]=1},createCheckerboard:function(f,r,d,p,v){f===void 0&&(f=16777215),r===void 0&&(r=255),d===void 0&&(d=255),p===void 0&&(p=255),v===void 0&&(v=128);for(var g=h(f),m=h(r),T=[],P=0;P<16;P++)for(var M=0;M<16;M++)P<8&&M<8||P>7&&M>7?T.push(g.r,g.g,g.b,d):T.push(m.r,m.g,m.b,p);var b=this.scene.sys.textures.addUint8Array(n(),new Uint8Array(T),16,16);return this.removeCheckerboard(),this.setTexture(b),this.setSizeToFrame(),this.setViewHeight(v),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(f,r){return this.anims.play(f,r)},playReverse:function(f,r){return this.anims.playReverse(f,r)},playAfterDelay:function(f,r){return this.anims.playAfterDelay(f,r)},playAfterRepeat:function(f,r){return this.anims.playAfterRepeat(f,r)},stop:function(){return this.anims.stop()},stopAfterDelay:function(f){return this.anims.stopAfterDelay(f)},stopAfterRepeat:function(f){return this.anims.stopAfterRepeat(f)},stopOnFrame:function(f){return this.anims.stopOnFrame(f)},preUpdate:function(f,r){l.prototype.preUpdate.call(this,f,r),this.anims.update(f,r)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});S.exports=o},56015:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(13059),u=s(44603),h=s(23568),l=s(35154),n=s(33663);u.register("plane",function(o,f){o===void 0&&(o={});var r=h(o,"key",null),d=h(o,"frame",null),p=l(o,"width",8),v=l(o,"height",8),g=l(o,"tile",!1),m=new n(this.scene,0,0,r,d,p,v,g);f!==void 0&&(o.add=f);var T=l(o,"checkerboard",null);if(T){var P=l(T,"color1",16777215),M=l(T,"color2",255),b=l(T,"alpha1",255),R=l(T,"alpha2",255),A=l(T,"height",128);m.createCheckerboard(P,M,b,R,A)}return c(this.scene,m,o),y(m,o),m})},30985:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(33663),y=s(39429);y.register("plane",function(u,h,l,n,o,f,r){return this.displayList.add(new c(this.scene,u,h,l,n,o,f,r))})},80321:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(31401),u=s(95643),h=s(30100),l=s(36060),n=s(67277),o=new c({Extends:u,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Mask,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Transform,y.Visible,n],initialize:function(r,d,p,v,g,m,T){v===void 0&&(v=16777215),g===void 0&&(g=128),m===void 0&&(m=1),T===void 0&&(T=.1),u.call(this,r,"PointLight"),this.initPipeline(l.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(d,p),this.color=h(v),this.intensity=m,this.attenuation=T,this.width=g*2,this.height=g*2,this._radius=g},radius:{get:function(){return this._radius},set:function(f){this._radius=f,this.width=f*2,this.height=f*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});S.exports=o},39829:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(44603),u=s(23568),h=s(80321);y.register("pointlight",function(l,n){l===void 0&&(l={});var o=u(l,"color",16777215),f=u(l,"radius",128),r=u(l,"intensity",1),d=u(l,"attenuation",.1),p=new h(this.scene,0,0,o,f,r,d);return n!==void 0&&(l.add=n),c(this.scene,p,l),p})},71255:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(80321);c.register("pointlight",function(u,h,l,n,o,f){return this.displayList.add(new y(this.scene,u,h,l,n,o,f))})},67277:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(57787),S.exports={renderWebGL:y,renderCanvas:u}},57787:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=function(u,h,l,n){l.addToRenderList(h);var o=u.pipelines.set(h.pipeline),f=c(h,l,n).calc,r=h.width,d=h.height,p=-h._radius,v=-h._radius,g=p+r,m=v+d,T=f.getX(0,0),P=f.getY(0,0),M=f.getX(p,v),b=f.getY(p,v),R=f.getX(p,m),A=f.getY(p,m),D=f.getX(g,m),G=f.getY(g,m),F=f.getX(g,v),B=f.getY(g,v);u.pipelines.preBatch(h),o.batchPointLight(h,l,M,b,R,A,D,G,F,B,T,P),u.pipelines.postBatch(h)};S.exports=y},591:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(81320),u=s(88571),h=new c({Extends:u,initialize:function(n,o,f,r,d,p){o===void 0&&(o=0),f===void 0&&(f=0),r===void 0&&(r=32),d===void 0&&(d=32),p===void 0&&(p=!0);var v=new y(n.sys.textures,"",r,d,p);u.call(this,n,o,f,v),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(l,n){this.width=l,this.height=n,this.updateDisplayOrigin();var o=this.input;return o&&!o.customHitArea&&(o.hitArea.width=l,o.hitArea.height=n),this},resize:function(l,n,o){return this.texture.setSize(l,n,o),this.setSize(this.texture.width,this.texture.height),this},saveTexture:function(l){var n=this.texture;return n.key=l,n.manager.addDynamicTexture(n)&&(this._saved=!0),n},fill:function(l,n,o,f,r,d){return this.texture.fill(l,n,o,f,r,d),this},clear:function(){return this.texture.clear(),this},stamp:function(l,n,o,f,r){return this.texture.stamp(l,n,o,f,r),this},erase:function(l,n,o){return this.texture.erase(l,n,o),this},draw:function(l,n,o,f,r){return this.texture.draw(l,n,o,f,r),this},drawFrame:function(l,n,o,f,r,d){return this.texture.drawFrame(l,n,o,f,r,d),this},repeat:function(l,n,o,f,r,d,p,v,g){return this.texture.repeat(l,n,o,f,r,d,p,v,g),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(l,n,o,f,r){return this.texture.batchDraw(l,n,o,f,r),this},batchDrawFrame:function(l,n,o,f,r,d){return this.texture.batchDrawFrame(l,n,o,f,r,d),this},endDraw:function(l){return this.texture.endDraw(l),this},snapshotArea:function(l,n,o,f,r,d,p){return this.texture.snapshotArea(l,n,o,f,r,d,p),this},snapshot:function(l,n,o){return this.snapshotArea(0,0,this.width,this.height,l,n,o)},snapshotPixel:function(l,n,o){return this.snapshotArea(l,n,1,1,o,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});S.exports=h},34495:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(44603),u=s(23568),h=s(591);y.register("renderTexture",function(l,n){l===void 0&&(l={});var o=u(l,"x",0),f=u(l,"y",0),r=u(l,"width",32),d=u(l,"height",32),p=new h(this.scene,o,f,r,d);return n!==void 0&&(l.add=n),c(this.scene,p,l),p})},60505:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(591);c.register("renderTexture",function(u,h,l,n){return this.displayList.add(new y(this.scene,u,h,l,n))})},77757:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(9674),y=s(83419),u=s(31401),h=s(95643),l=s(36060),n=s(38745),o=s(26099),f=new y({Extends:h,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Flip,u.Mask,u.Pipeline,u.PostPipeline,u.Size,u.Texture,u.Transform,u.Visible,u.ScrollFactor,n],initialize:function(d,p,v,g,m,T,P,M,b){g===void 0&&(g="__DEFAULT"),T===void 0&&(T=2),P===void 0&&(P=!0),h.call(this,d,"Rope"),this.anims=new c(this),this.points=T,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=g==="__DEFAULT",this.dirty=!1,this.horizontal=P,this._flipX=!1,this._flipY=!1,this._perp=new o,this.debugCallback=null,this.debugGraphic=null,this.setTexture(g,m),this.setPosition(p,v),this.setSizeToFrame(),this.initPipeline(l.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(T)&&this.resizeArrays(T.length),this.setPoints(T,M,b),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(r,d){var p=this.anims.currentFrame;this.anims.update(r,d),this.anims.currentFrame!==p&&(this.updateUVs(),this.updateVertices())},play:function(r,d,p){return this.anims.play(r,d,p),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(r,d,p){return r===void 0&&(r=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(r,d,p))},setVertical:function(r,d,p){return r===void 0&&(r=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(r,d,p)):this},setTintFill:function(r){return r===void 0&&(r=!1),this.tintFill=r,this},setAlphas:function(r,d){var p=this.points.length;if(p<1)return this;var v=this.alphas;r===void 0?r=[1]:!Array.isArray(r)&&d===void 0&&(r=[r]);var g,m=0;if(d!==void 0)for(g=0;g<p;g++)m=g*2,v[m]=r,v[m+1]=d;else if(r.length===p)for(g=0;g<p;g++)m=g*2,v[m]=r[g],v[m+1]=r[g];else{var T=r[0];for(g=0;g<p;g++)m=g*2,r.length>m&&(T=r[m]),v[m]=T,r.length>m+1&&(T=r[m+1]),v[m+1]=T}return this},setColors:function(r){var d=this.points.length;if(d<1)return this;var p=this.colors;r===void 0?r=[16777215]:Array.isArray(r)||(r=[r]);var v,g=0;if(r.length===d)for(v=0;v<d;v++)g=v*2,p[g]=r[v],p[g+1]=r[v];else{var m=r[0];for(v=0;v<d;v++)g=v*2,r.length>g&&(m=r[g]),p[g]=m,r.length>g+1&&(m=r[g+1]),p[g+1]=m}return this},setPoints:function(r,d,p){if(r===void 0&&(r=2),typeof r=="number"){var v=r;v<2&&(v=2),r=[];var g,m,T;if(this.horizontal)for(T=-this.frame.halfWidth,m=this.frame.width/(v-1),g=0;g<v;g++)r.push({x:T+g*m,y:0});else for(T=-this.frame.halfHeight,m=this.frame.height/(v-1),g=0;g<v;g++)r.push({x:0,y:T+g*m})}var P=r.length,M=this.points.length;return P<1?(console.warn("Rope: Not enough points given"),this):(P===1&&(r.unshift({x:0,y:0}),P++),M!==P&&this.resizeArrays(P),this.dirty=!0,this.points=r,this.updateUVs(),d!=null&&this.setColors(d),p!=null&&this.setAlphas(p),this)},updateUVs:function(){for(var r=this.uv,d=this.points.length,p=this.frame.u0,v=this.frame.v0,g=this.frame.u1,m=this.frame.v1,T=(g-p)/(d-1),P=(m-v)/(d-1),M=0;M<d;M++){var b=M*4,R,A,D,G;this.horizontal?(this._flipX?(R=g-M*T,D=g-M*T):(R=p+M*T,D=p+M*T),this._flipY?(A=m,G=v):(A=v,G=m)):(this._flipX?(R=p,D=g):(R=g,D=p),this._flipY?(A=m-M*P,G=m-M*P):(A=v+M*P,G=v+M*P)),r[b+0]=R,r[b+1]=A,r[b+2]=D,r[b+3]=G}return this},resizeArrays:function(r){var d=this.colors,p=this.alphas;this.vertices=new Float32Array(r*4),this.uv=new Float32Array(r*4),d=new Uint32Array(r*2),p=new Float32Array(r*2);for(var v=0;v<r*2;v++)d[v]=16777215,p[v]=1;return this.colors=d,this.alphas=p,this.dirty=!0,this},updateVertices:function(){var r=this._perp,d=this.points,p=this.vertices,v=d.length;if(this.dirty=!1,!(v<1)){for(var g,m=d[0],T=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,P=0;P<v;P++){var M=d[P],b=P*4;P<v-1?g=d[P+1]:g=M,r.x=g.y-m.y,r.y=-(g.x-m.x);var R=r.length();r.x/=R,r.y/=R,r.x*=T,r.y*=T,p[b]=M.x+r.x,p[b+1]=M.y+r.y,p[b+2]=M.x-r.x,p[b+3]=M.y-r.y,m=M}return this}},setDebug:function(r,d){return this.debugGraphic=r,!r&&!d?this.debugCallback=null:d?this.debugCallback=d:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(r,d,p){var v=r.debugGraphic,g=p[0],m=p[1],T=p[2],P=p[3];v.lineBetween(g,m,T,P);for(var M=4;M<d;M+=4){var b=p[M+0],R=p[M+1],A=p[M+2],D=p[M+3];v.lineBetween(g,m,b,R),v.lineBetween(T,P,A,D),v.lineBetween(T,P,b,R),v.lineBetween(b,R,A,D),g=b,m=R,T=A,P=D}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(r){return this._flipX=r,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(r){return this._flipY=r,this.updateUVs()}}});S.exports=f},95262:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(){};S.exports=w},26209:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(44603),u=s(23568),h=s(35154),l=s(77757);y.register("rope",function(n,o){n===void 0&&(n={});var f=u(n,"key",null),r=u(n,"frame",null),d=u(n,"horizontal",!0),p=h(n,"points",void 0),v=h(n,"colors",void 0),g=h(n,"alphas",void 0),m=new l(this.scene,0,0,f,r,p,d,v,g);return o!==void 0&&(n.add=o),c(this.scene,m,n),m})},96819:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(77757),y=s(39429);y.register("rope",function(u,h,l,n,o,f,r,d){return this.displayList.add(new c(this.scene,u,h,l,n,o,f,r,d))})},38745:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(20439),u=s(95262),S.exports={renderWebGL:y,renderCanvas:u}},20439:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=s(70554),u=function(h,l,n,o){n.addToRenderList(l);var f=h.pipelines.set(l.pipeline,l),r=c(l,n,o).calc,d=l.vertices,p=l.uv,v=l.colors,g=l.alphas,m=l.alpha,T=y.getTintAppendFloatAlpha,P=n.roundPixels,M=d.length,b=Math.floor(M*.5);f.flush(),h.pipelines.preBatch(l);var R=f.setGameObject(l),A=f.vertexViewF32,D=f.vertexViewU32,G=f.vertexCount*f.currentShader.vertexComponentCount-1,F=0,B=l.tintFill;l.dirty&&l.updateVertices();for(var N=l.debugCallback,z=[],$=0;$<M;$+=2){var Q=d[$+0],Z=d[$+1],tt=Q*r.a+Z*r.c+r.e,H=Q*r.b+Z*r.d+r.f;P&&(tt=Math.round(tt),H=Math.round(H)),A[++G]=tt,A[++G]=H,A[++G]=p[$+0],A[++G]=p[$+1],A[++G]=R,A[++G]=B,D[++G]=T(v[F],n.alpha*(g[F]*m)),F++,N&&(z[$+0]=tt,z[$+1]=H)}N&&N.call(l,l,M,z),f.vertexCount+=b,f.currentBatch.count=f.vertexCount-f.currentBatch.start,h.pipelines.postBatch(l)};S.exports=u},20071:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(31401),u=s(95643),h=s(95540),l=s(79291),n=s(61622),o=s(25479),f=s(61340),r=s(95428),d=s(92503),p=new c({Extends:u,Mixins:[y.ComputedSize,y.Depth,y.GetBounds,y.Mask,y.Origin,y.ScrollFactor,y.Transform,y.Visible,o],initialize:function(g,m,T,P,M,b,R,A){T===void 0&&(T=0),P===void 0&&(P=0),M===void 0&&(M=128),b===void 0&&(b=128),u.call(this,g,"Shader"),this.blendMode=-1,this.shader;var D=g.sys.renderer;this.renderer=D,this.gl=D.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=D.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=D.width,this._rendererHeight=D.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(T,P),this.setSize(M,b),this.setOrigin(.5,.5),this.setShader(m,R,A),this.renderer.on(d.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(v){return this.renderToTexture?!0:!(u.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},setRenderToTexture:function(v,g){if(!this.renderToTexture){var m=this.width,T=this.height,P=this.renderer;this.glTexture=P.createTextureFromSource(null,m,T,0),this.framebuffer=P.createFramebuffer(m,T,this.glTexture,!1),this._rendererWidth=m,this._rendererHeight=T,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),v&&(this.texture=this.scene.sys.textures.addGLTexture(v,this.glTexture))}return this.shader&&(P.pipelines.clear(),this.load(),this.flush(),P.pipelines.rebind()),this},setShader:function(v,g,m){if(this.renderer.contextLost)return this._deferSetShader={key:v,textures:g,textureData:m},this;if(g===void 0&&(g=[]),typeof v=="string"){var T=this.scene.sys.cache.shader;if(!T.has(v))return console.warn("Shader missing: "+v),this;this.shader=T.get(v)}else this.shader=v;var P=this.gl,M=this.renderer;this.program&&M.deleteProgram(this.program);var b=M.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);P.uniformMatrix4fv(P.getUniformLocation(b.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),P.uniformMatrix4fv(P.getUniformLocation(b.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),P.uniform2f(P.getUniformLocation(b.webGLProgram,"uResolution"),this.width,this.height),this.program=b;var R=new Date,A={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[R.getFullYear(),R.getMonth(),R.getDate(),R.getHours()*60*60+R.getMinutes()*60+R.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=l(!0,{},this.shader.uniforms,A):this.uniforms=A;for(var D=0;D<4;D++)g[D]&&this.setSampler2D("iChannel"+D,g[D],D,m);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(v){return this.pointer=v,this},projOrtho:function(v,g,m,T){if(this.renderer.contextLost){this._deferProjOrtho={left:v,right:g,bottom:m,top:T};return}var P=-1e3,M=1e3,b=1/(v-g),R=1/(m-T),A=1/(P-M),D=this.projectionMatrix;D[0]=-2*b,D[5]=-2*R,D[10]=2*A,D[12]=(v+g)*b,D[13]=(T+m)*R,D[14]=(M+P)*A;var G=this.program,F=this.gl,B=this.renderer;B.setProgram(G),F.uniformMatrix4fv(F.getUniformLocation(G.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=g,this._rendererHeight=m},initUniforms:function(){var v=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var m in this.uniforms){var T=this.uniforms[m],P=T.type,M=v[P];T.uniformLocation=this.renderer.createUniformLocation(g,m),P!=="sampler2D"&&(T.glMatrix=M.matrix,T.glValueLength=M.length,T.glFunc=M.func)}},setSampler2DBuffer:function(v,g,m,T,P,M){P===void 0&&(P=0),M===void 0&&(M={});var b=this.uniforms[v];return b.value=g,M.width=m,M.height=T,b.textureData=M,this._textureCount=P,this.initSampler2D(b),this},setSampler2D:function(v,g,m,T){m===void 0&&(m=0);var P=this.scene.sys.textures;if(P.exists(g)){var M=P.getFrame(g);if(M.glTexture&&M.glTexture.isRenderTexture)return this.setSampler2DBuffer(v,M.glTexture,M.width,M.height,m,T);var b=this.uniforms[v],R=M.source;b.textureKey=g,b.source=R.image,b.value=M.glTexture,R.isGLTexture&&(T||(T={}),T.width=R.width,T.height=R.height),T&&(b.textureData=T),this._textureCount=m,this.initSampler2D(b)}return this},setUniform:function(v,g){return n(this.uniforms,v,g),this},getUniform:function(v){return h(this.uniforms,v,null)},setChannel0:function(v,g){return this.setSampler2D("iChannel0",v,0,g)},setChannel1:function(v,g){return this.setSampler2D("iChannel1",v,1,g)},setChannel2:function(v,g){return this.setSampler2D("iChannel2",v,2,g)},setChannel3:function(v,g){return this.setSampler2D("iChannel3",v,3,g)},initSampler2D:function(v){if(v.value){var g=v.textureData;if(g&&!v.value.isRenderTexture){var m=this.gl,T=v.value,P=m[h(g,"magFilter","linear").toUpperCase()],M=m[h(g,"minFilter","linear").toUpperCase()],b=m[h(g,"wrapS","repeat").toUpperCase()],R=m[h(g,"wrapT","repeat").toUpperCase()],A=m[h(g,"format","rgba").toUpperCase()],D=h(g,"flipY",!1),G=h(g,"width",T.width),F=h(g,"height",T.height),B=h(g,"source",T.pixels);g.repeat&&(b=m.REPEAT,R=m.REPEAT),g.width&&(B=null),T.update(B,G,F,D,b,R,M,P,A)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var v=this.gl,g=this.uniforms,m,T,P,M,b,R=0;for(var A in g)m=g[A],P=m.glFunc,T=m.glValueLength,M=m.uniformLocation,b=m.value,b!==null&&(T===1?m.glMatrix?P.call(v,M.webGLUniformLocation,m.transpose,b):P.call(v,M.webGLUniformLocation,b):T===2?P.call(v,M.webGLUniformLocation,b.x,b.y):T===3?P.call(v,M.webGLUniformLocation,b.x,b.y,b.z):T===4?P.call(v,M.webGLUniformLocation,b.x,b.y,b.z,b.w):m.type==="sampler2D"&&(v.activeTexture(v.TEXTURE0+R),v.bindTexture(v.TEXTURE_2D,b.webGLTexture),v.uniform1i(M.webGLUniformLocation,R),R++))},load:function(v){var g=this.gl,m=this.width,T=this.height,P=this.renderer,M=this.program,b=this.viewMatrix;if(!this.renderToTexture){var R=-this._displayOriginX,A=-this._displayOriginY;b[0]=v[0],b[1]=v[1],b[4]=v[2],b[5]=v[3],b[8]=v[4],b[9]=v[5],b[12]=b[0]*R+b[4]*A,b[13]=b[1]*R+b[5]*A}g.useProgram(M.webGLProgram),g.uniformMatrix4fv(g.getUniformLocation(M.webGLProgram,"uViewMatrix"),!1,b),g.uniformMatrix4fv(g.getUniformLocation(M.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),g.uniform2f(g.getUniformLocation(M.webGLProgram,"uResolution"),this.width,this.height);var D=this.uniforms,G=D.resolution;G.value.x=m,G.value.y=T,D.time.value=P.game.loop.getDuration();var F=this.pointer;if(F){var B=D.mouse,N=F.x/m,z=1-F.y/T;B.value.x=N.toFixed(2),B.value.y=z.toFixed(2)}this.syncUniforms()},flush:function(){var v=this.width,g=this.height,m=this.program,T=this.gl,P=this.vertexBuffer,M=this.renderer,b=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(M.setFramebuffer(this.framebuffer),T.clearColor(0,0,0,0),T.clear(T.COLOR_BUFFER_BIT)),T.bindBuffer(T.ARRAY_BUFFER,P.webGLBuffer);var R=T.getAttribLocation(m.webGLProgram,"inPosition");R!==-1&&(T.enableVertexAttribArray(R),T.vertexAttribPointer(R,2,T.FLOAT,!1,b,0));var A=this.vertexViewF32;A[3]=g,A[4]=v,A[5]=g,A[8]=v,A[9]=g,A[10]=v;var D=6;T.bufferSubData(T.ARRAY_BUFFER,0,this.bytes.subarray(0,D*b)),T.drawArrays(T.TRIANGLES,0,D),this.renderToTexture&&M.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var v=this._deferSetShader.key,g=this._deferSetShader.textures,m=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(v,g,m)}if(this._deferProjOrtho!==null){var T=this._deferProjOrtho.left,P=this._deferProjOrtho.right,M=this._deferProjOrtho.bottom,b=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(T,P,M,b)}},preDestroy:function(){var v=this.renderer;v.off(d.RESTORE_WEBGL,this.onContextRestored,this),v.deleteProgram(this.program),v.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(v.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),r(this.uniforms,function(g){v.deleteUniformLocation(g.uniformLocation),g.uniformLocation=null})}});S.exports=p},80464:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(){};S.exports=w},54935:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(44603),u=s(23568),h=s(20071);y.register("shader",function(l,n){l===void 0&&(l={});var o=u(l,"key",null),f=u(l,"x",0),r=u(l,"y",0),d=u(l,"width",128),p=u(l,"height",128),v=new h(this.scene,o,f,r,d,p);return n!==void 0&&(l.add=n),c(this.scene,v,l),v})},74177:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(20071),y=s(39429);y.register("shader",function(u,h,l,n,o,f,r){return this.displayList.add(new c(this.scene,u,h,l,n,o,f,r))})},25479:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(19257),u=s(80464),S.exports={renderWebGL:y,renderCanvas:u}},19257:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=function(u,h,l,n){if(h.shader){if(l.addToRenderList(h),u.pipelines.clear(),h.renderToTexture)h.load(),h.flush();else{var o=c(h,l,n).calc;(u.width!==h._rendererWidth||u.height!==h._rendererHeight)&&h.projOrtho(0,u.width,u.height,0),h.load(o.matrix),h.flush()}u.pipelines.rebind()}};S.exports=y},10441:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(70554),y=function(u,h,l,n,o,f){for(var r=c.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*n),d=l.pathData,p=l.pathIndexes,v=0;v<p.length;v+=3){var g=p[v]*2,m=p[v+1]*2,T=p[v+2]*2,P=d[g+0]-o,M=d[g+1]-f,b=d[m+0]-o,R=d[m+1]-f,A=d[T+0]-o,D=d[T+1]-f,G=h.getX(P,M),F=h.getY(P,M),B=h.getX(b,R),N=h.getY(b,R),z=h.getX(A,D),$=h.getY(A,D);u.batchTri(l,G,F,B,N,z,$,0,0,1,1,r,r,r,2)}};S.exports=y},65960:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){var h=y||c.fillColor,l=u||c.fillAlpha,n=(h&16711680)>>>16,o=(h&65280)>>>8,f=h&255;s.fillStyle="rgba("+n+","+o+","+f+","+l+")"};S.exports=w},75177:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){var h=y||c.strokeColor,l=u||c.strokeAlpha,n=(h&16711680)>>>16,o=(h&65280)>>>8,f=h&255;s.strokeStyle="rgba("+n+","+o+","+f+","+l+")",s.lineWidth=c.lineWidth};S.exports=w},17803:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(31401),u=s(95643),h=s(23031),l=new c({Extends:u,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Transform,y.Visible],initialize:function(o,f,r){f===void 0&&(f="Shape"),u.call(this,o,f),this.geom=r,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new h,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(n,o){return o===void 0&&(o=1),n===void 0?this.isFilled=!1:(this.fillColor=n,this.fillAlpha=o,this.isFilled=!0),this},setStrokeStyle:function(n,o,f){return f===void 0&&(f=1),n===void 0?this.isStroked=!1:(this.lineWidth=n,this.strokeColor=o,this.strokeAlpha=f,this.isStroked=!0),this},setClosePath:function(n){return this.closePath=n,this},setSize:function(n,o){return this.width=n,this.height=o,this},setDisplaySize:function(n,o){return this.displayWidth=n,this.displayHeight=o,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}}});S.exports=l},34682:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(70554),y=function(u,h,l,n,o){var f=u.strokeTint,r=c.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*l);f.TL=r,f.TR=r,f.BL=r,f.BR=r;var d=h.pathData,p=d.length-1,v=h.lineWidth,g=v/2,m=d[0]-n,T=d[1]-o;h.closePath||(p-=2);for(var P=2;P<p;P+=2){var M=d[P]-n,b=d[P+1]-o;u.batchLine(m,T,M,b,g,g,v,P-2,h.closePath?P===p-1:!1),m=M,T=b}};S.exports=y},23629:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(13609),y=s(83419),u=s(39506),h=s(94811),l=s(96503),n=s(36383),o=s(17803),f=new y({Extends:o,Mixins:[c],initialize:function(d,p,v,g,m,T,P,M,b){p===void 0&&(p=0),v===void 0&&(v=0),g===void 0&&(g=128),m===void 0&&(m=0),T===void 0&&(T=360),P===void 0&&(P=!1),o.call(this,d,"Arc",new l(0,0,g)),this._startAngle=m,this._endAngle=T,this._anticlockwise=P,this._iterations=.01,this.setPosition(p,v);var R=this.geom.radius*2;this.setSize(R,R),M!==void 0&&this.setFillStyle(M,b),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(r){this._iterations=r,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(r){this.geom.radius=r;var d=r*2;this.setSize(d,d),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(r){this._startAngle=r,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(r){this._endAngle=r,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(r){this._anticlockwise=r,this.updateData()}},setRadius:function(r){return this.radius=r,this},setIterations:function(r){return r===void 0&&(r=.01),this.iterations=r,this},setStartAngle:function(r,d){return this._startAngle=r,d!==void 0&&(this._anticlockwise=d),this.updateData()},setEndAngle:function(r,d){return this._endAngle=r,d!==void 0&&(this._anticlockwise=d),this.updateData()},updateData:function(){var r=this._iterations,d=r,p=this.geom.radius,v=u(this._startAngle),g=u(this._endAngle),m=this._anticlockwise,T=p,P=p;g-=v,m?g<-n.PI2?g=-n.PI2:g>0&&(g=-n.PI2+g%n.PI2):g>n.PI2?g=n.PI2:g<0&&(g=n.PI2+g%n.PI2);for(var M=[T+Math.cos(v)*p,P+Math.sin(v)*p],b;d<1;)b=g*d+v,M.push(T+Math.cos(b)*p,P+Math.sin(b)*p),d+=r;return b=g+v,M.push(T+Math.cos(b)*p,P+Math.sin(b)*p),M.push(T+Math.cos(v)*p,P+Math.sin(v)*p),this.pathIndexes=h(M),this.pathData=M,this}});S.exports=f},42542:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39506),y=s(65960),u=s(75177),h=s(20926),l=function(n,o,f,r){f.addToRenderList(o);var d=n.currentContext;if(h(n,d,o,f,r)){var p=o.radius;d.beginPath(),d.arc(p-o.originX*(p*2),p-o.originY*(p*2),p,c(o._startAngle),c(o._endAngle),o.anticlockwise),o.closePath&&d.closePath(),o.isFilled&&(y(d,o),d.fill()),o.isStroked&&(u(d,o),d.stroke()),d.restore()}};S.exports=l},42563:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(23629),y=s(39429);y.register("arc",function(u,h,l,n,o,f,r,d){return this.displayList.add(new c(this.scene,u,h,l,n,o,f,r,d))}),y.register("circle",function(u,h,l,n,o){return this.displayList.add(new c(this.scene,u,h,l,0,360,!1,n,o))})},13609:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(41447),u=s(42542),S.exports={renderWebGL:y,renderCanvas:u}},41447:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=s(10441),u=s(34682),h=function(l,n,o,f){o.addToRenderList(n);var r=l.pipelines.set(n.pipeline),d=c(n,o,f),p=r.calcMatrix.copyFrom(d.calc),v=n._displayOriginX,g=n._displayOriginY,m=o.alpha*n.alpha;l.pipelines.preBatch(n),n.isFilled&&y(r,p,n,m,v,g),n.isStroked&&u(r,n,m,v,g),l.pipelines.postBatch(n)};S.exports=h},89:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(33141),u=s(94811),h=s(87841),l=s(17803),n=new c({Extends:l,Mixins:[y],initialize:function(f,r,d,p,v,g){r===void 0&&(r=0),d===void 0&&(d=0),l.call(this,f,"Curve",p),this._smoothness=32,this._curveBounds=new h,this.closePath=!1,this.setPosition(r,d),v!==void 0&&this.setFillStyle(v,g),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){var o=this._curveBounds,f=this._smoothness;this.geom.getBounds(o,f),this.setSize(o.width,o.height),this.updateDisplayOrigin();for(var r=[],d=this.geom.getPoints(f),p=0;p<d.length;p++)r.push(d[p].x,d[p].y);return r.push(d[0].x,d[0].y),this.pathIndexes=u(r),this.pathData=r,this}});S.exports=n},3170:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(65960),y=s(75177),u=s(20926),h=function(l,n,o,f){o.addToRenderList(n);var r=l.currentContext;if(u(l,r,n,o,f)){var d=n._displayOriginX+n._curveBounds.x,p=n._displayOriginY+n._curveBounds.y,v=n.pathData,g=v.length-1,m=v[0]-d,T=v[1]-p;r.beginPath(),r.moveTo(m,T),n.closePath||(g-=2);for(var P=2;P<g;P+=2){var M=v[P]-d,b=v[P+1]-p;r.lineTo(M,b)}n.closePath&&r.closePath(),n.isFilled&&(c(r,n),r.fill()),n.isStroked&&(y(r,n),r.stroke()),r.restore()}};S.exports=h},40511:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(89);c.register("curve",function(u,h,l,n,o){return this.displayList.add(new y(this.scene,u,h,l,n,o))})},33141:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(53987),u=s(3170),S.exports={renderWebGL:y,renderCanvas:u}},53987:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(10441),y=s(91296),u=s(34682),h=function(l,n,o,f){o.addToRenderList(n);var r=l.pipelines.set(n.pipeline),d=y(n,o,f),p=r.calcMatrix.copyFrom(d.calc),v=n._displayOriginX+n._curveBounds.x,g=n._displayOriginY+n._curveBounds.y,m=o.alpha*n.alpha;l.pipelines.preBatch(n),n.isFilled&&c(r,p,n,m,v,g),n.isStroked&&u(r,n,m,v,g),l.pipelines.postBatch(n)};S.exports=h},19921:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(94811),u=s(54205),h=s(8497),l=s(17803),n=new c({Extends:l,Mixins:[u],initialize:function(f,r,d,p,v,g,m){r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p=128),v===void 0&&(v=128),l.call(this,f,"Ellipse",new h(p/2,v/2,p,v)),this._smoothness=64,this.setPosition(r,d),this.width=p,this.height=v,g!==void 0&&this.setFillStyle(g,m),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSize:function(o,f){return this.width=o,this.height=f,this.geom.setPosition(o/2,f/2),this.geom.setSize(o,f),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){for(var o=[],f=this.geom.getPoints(this._smoothness),r=0;r<f.length;r++)o.push(f[r].x,f[r].y);return o.push(f[0].x,f[0].y),this.pathIndexes=y(o),this.pathData=o,this}});S.exports=n},7930:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(65960),y=s(75177),u=s(20926),h=function(l,n,o,f){o.addToRenderList(n);var r=l.currentContext;if(u(l,r,n,o,f)){var d=n._displayOriginX,p=n._displayOriginY,v=n.pathData,g=v.length-1,m=v[0]-d,T=v[1]-p;r.beginPath(),r.moveTo(m,T),n.closePath||(g-=2);for(var P=2;P<g;P+=2){var M=v[P]-d,b=v[P+1]-p;r.lineTo(M,b)}r.closePath(),n.isFilled&&(c(r,n),r.fill()),n.isStroked&&(y(r,n),r.stroke()),r.restore()}};S.exports=h},1543:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(19921),y=s(39429);y.register("ellipse",function(u,h,l,n,o,f){return this.displayList.add(new c(this.scene,u,h,l,n,o,f))})},54205:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(19467),u=s(7930),S.exports={renderWebGL:y,renderCanvas:u}},19467:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(10441),y=s(91296),u=s(34682),h=function(l,n,o,f){o.addToRenderList(n);var r=l.pipelines.set(n.pipeline),d=y(n,o,f),p=r.calcMatrix.copyFrom(d.calc),v=n._displayOriginX,g=n._displayOriginY,m=o.alpha*n.alpha;l.pipelines.preBatch(n),n.isFilled&&c(r,p,n,m,v,g),n.isStroked&&u(r,n,m,v,g),l.pipelines.postBatch(n)};S.exports=h},30479:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(17803),u=s(26015),h=new c({Extends:y,Mixins:[u],initialize:function(n,o,f,r,d,p,v,g,m,T,P){o===void 0&&(o=0),f===void 0&&(f=0),r===void 0&&(r=128),d===void 0&&(d=128),p===void 0&&(p=32),v===void 0&&(v=32),y.call(this,n,"Grid",null),this.cellWidth=p,this.cellHeight=v,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(o,f),this.setSize(r,d),this.setFillStyle(g,m),T!==void 0&&this.setOutlineStyle(T,P),this.updateDisplayOrigin()},setFillStyle:function(l,n){return n===void 0&&(n=1),l===void 0?this.showCells=!1:(this.fillColor=l,this.fillAlpha=n,this.showCells=!0),this},setAltFillStyle:function(l,n){return n===void 0&&(n=1),l===void 0?this.showAltCells=!1:(this.altFillColor=l,this.altFillAlpha=n,this.showAltCells=!0),this},setOutlineStyle:function(l,n){return n===void 0&&(n=1),l===void 0?this.showOutline=!1:(this.outlineFillColor=l,this.outlineFillAlpha=n,this.showOutline=!0),this}});S.exports=h},49912:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(65960),y=s(75177),u=s(20926),h=function(l,n,o,f){o.addToRenderList(n);var r=l.currentContext;if(u(l,r,n,o,f)){var d=-n._displayOriginX,p=-n._displayOriginY,v=o.alpha*n.alpha,g=n.width,m=n.height,T=n.cellWidth,P=n.cellHeight,M=Math.ceil(g/T),b=Math.ceil(m/P),R=T,A=P,D=T-(M*T-g),G=P-(b*P-m),F=n.showCells,B=n.showAltCells,N=n.showOutline,z=0,$=0,Q=0,Z=0,tt=0;if(N&&(R--,A--,D===T&&D--,G===P&&G--),F&&n.fillAlpha>0)for(c(r,n),$=0;$<b;$++)for(B&&(Q=$%2),z=0;z<M;z++){if(B&&Q){Q=0;continue}Q++,Z=z<M-1?R:D,tt=$<b-1?A:G,r.fillRect(d+z*T,p+$*P,Z,tt)}if(B&&n.altFillAlpha>0)for(c(r,n,n.altFillColor,n.altFillAlpha*v),$=0;$<b;$++)for(B&&(Q=$%2),z=0;z<M;z++){if(B&&!Q){Q=1;continue}Q=0,Z=z<M-1?R:D,tt=$<b-1?A:G,r.fillRect(d+z*T,p+$*P,Z,tt)}if(N&&n.outlineFillAlpha>0){for(y(r,n,n.outlineFillColor,n.outlineFillAlpha*v),z=1;z<M;z++){var H=z*T;r.beginPath(),r.moveTo(H+d,p),r.lineTo(H+d,m+p),r.stroke()}for($=1;$<b;$++){var J=$*P;r.beginPath(),r.moveTo(d,J+p),r.lineTo(d+g,J+p),r.stroke()}}r.restore()}};S.exports=h},34137:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(30479);c.register("grid",function(u,h,l,n,o,f,r,d,p,v){return this.displayList.add(new y(this.scene,u,h,l,n,o,f,r,d,p,v))})},26015:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(46161),u=s(49912),S.exports={renderWebGL:y,renderCanvas:u}},46161:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=s(70554),u=function(h,l,n,o){n.addToRenderList(l);var f=h.pipelines.set(l.pipeline),r=c(l,n,o),d=f.calcMatrix.copyFrom(r.calc);d.translate(-l._displayOriginX,-l._displayOriginY);var p=n.alpha*l.alpha,v=l.width,g=l.height,m=l.cellWidth,T=l.cellHeight,P=Math.ceil(v/m),M=Math.ceil(g/T),b=m,R=T,A=m-(P*m-v),D=T-(M*T-g),G,F,B=l.showCells,N=l.showAltCells,z=l.showOutline,$=0,Q=0,Z=0,tt=0,H=0;if(z&&(b--,R--,A===m&&A--,D===T&&D--),h.pipelines.preBatch(l),B&&l.fillAlpha>0)for(G=f.fillTint,F=y.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*p),G.TL=F,G.TR=F,G.BL=F,G.BR=F,Q=0;Q<M;Q++)for(N&&(Z=Q%2),$=0;$<P;$++){if(N&&Z){Z=0;continue}Z++,tt=$<P-1?b:A,H=Q<M-1?R:D,f.batchFillRect($*m,Q*T,tt,H)}if(N&&l.altFillAlpha>0)for(G=f.fillTint,F=y.getTintAppendFloatAlpha(l.altFillColor,l.altFillAlpha*p),G.TL=F,G.TR=F,G.BL=F,G.BR=F,Q=0;Q<M;Q++)for(N&&(Z=Q%2),$=0;$<P;$++){if(N&&!Z){Z=1;continue}Z=0,tt=$<P-1?b:A,H=Q<M-1?R:D,f.batchFillRect($*m,Q*T,tt,H)}if(z&&l.outlineFillAlpha>0){var J=f.strokeTint,Y=y.getTintAppendFloatAlpha(l.outlineFillColor,l.outlineFillAlpha*p);for(J.TL=Y,J.TR=Y,J.BL=Y,J.BR=Y,$=1;$<P;$++){var _=$*m;f.batchLine(_,0,_,g,l.lineWidth,l.lineWidth,1,0,!1)}for(Q=1;Q<M;Q++){var U=Q*T;f.batchLine(0,U,v,U,l.lineWidth,l.lineWidth,1,0,!1)}}h.pipelines.postBatch(l)};S.exports=u},61475:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(99651),y=s(83419),u=s(17803),h=new y({Extends:u,Mixins:[c],initialize:function(n,o,f,r,d,p,v,g){o===void 0&&(o=0),f===void 0&&(f=0),r===void 0&&(r=48),d===void 0&&(d=32),p===void 0&&(p=15658734),v===void 0&&(v=10066329),g===void 0&&(g=13421772),u.call(this,n,"IsoBox",null),this.projection=4,this.fillTop=p,this.fillLeft=v,this.fillRight=g,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(o,f),this.setSize(r,d),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setFaces:function(l,n,o){return l===void 0&&(l=!0),n===void 0&&(n=!0),o===void 0&&(o=!0),this.showTop=l,this.showLeft=n,this.showRight=o,this},setFillStyle:function(l,n,o){return this.fillTop=l,this.fillLeft=n,this.fillRight=o,this.isFilled=!0,this}});S.exports=h},11508:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(65960),y=s(20926),u=function(h,l,n,o){n.addToRenderList(l);var f=h.currentContext;if(y(h,f,l,n,o)&&l.isFilled){var r=l.width,d=l.height,p=r/2,v=r/l.projection;l.showTop&&(c(f,l,l.fillTop),f.beginPath(),f.moveTo(-p,-d),f.lineTo(0,-v-d),f.lineTo(p,-d),f.lineTo(p,-1),f.lineTo(0,v-1),f.lineTo(-p,-1),f.lineTo(-p,-d),f.fill()),l.showLeft&&(c(f,l,l.fillLeft),f.beginPath(),f.moveTo(-p,0),f.lineTo(0,v),f.lineTo(0,v-d),f.lineTo(-p,-d),f.lineTo(-p,0),f.fill()),l.showRight&&(c(f,l,l.fillRight),f.beginPath(),f.moveTo(p,0),f.lineTo(0,v),f.lineTo(0,v-d),f.lineTo(p,-d),f.lineTo(p,0),f.fill()),f.restore()}};S.exports=u},3933:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(61475);c.register("isobox",function(u,h,l,n,o,f,r){return this.displayList.add(new y(this.scene,u,h,l,n,o,f,r))})},99651:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(68149),u=s(11508),S.exports={renderWebGL:y,renderCanvas:u}},68149:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=s(70554),u=function(h,l,n,o){n.addToRenderList(l);var f=h.pipelines.set(l.pipeline),r=c(l,n,o),d=f.calcMatrix.copyFrom(r.calc),p=l.width,v=l.height,g=p/2,m=p/l.projection,T=n.alpha*l.alpha;if(l.isFilled){var P,M,b,R,A,D,G,F,B;h.pipelines.preBatch(l),l.showTop&&(P=y.getTintAppendFloatAlpha(l.fillTop,T),M=d.getX(-g,-v),b=d.getY(-g,-v),R=d.getX(0,-m-v),A=d.getY(0,-m-v),D=d.getX(g,-v),G=d.getY(g,-v),F=d.getX(0,m-v),B=d.getY(0,m-v),f.batchQuad(l,M,b,R,A,D,G,F,B,0,0,1,1,P,P,P,P,2)),l.showLeft&&(P=y.getTintAppendFloatAlpha(l.fillLeft,T),M=d.getX(-g,0),b=d.getY(-g,0),R=d.getX(0,m),A=d.getY(0,m),D=d.getX(0,m-v),G=d.getY(0,m-v),F=d.getX(-g,-v),B=d.getY(-g,-v),f.batchQuad(l,M,b,R,A,D,G,F,B,0,0,1,1,P,P,P,P,2)),l.showRight&&(P=y.getTintAppendFloatAlpha(l.fillRight,T),M=d.getX(g,0),b=d.getY(g,0),R=d.getX(0,m),A=d.getY(0,m),D=d.getX(0,m-v),G=d.getY(0,m-v),F=d.getX(g,-v),B=d.getY(g,-v),f.batchQuad(l,M,b,R,A,D,G,F,B,0,0,1,1,P,P,P,P,2)),h.pipelines.postBatch(l)}};S.exports=u},16933:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(60561),u=s(17803),h=new c({Extends:u,Mixins:[y],initialize:function(n,o,f,r,d,p,v,g,m){o===void 0&&(o=0),f===void 0&&(f=0),r===void 0&&(r=48),d===void 0&&(d=32),p===void 0&&(p=!1),v===void 0&&(v=15658734),g===void 0&&(g=10066329),m===void 0&&(m=13421772),u.call(this,n,"IsoTriangle",null),this.projection=4,this.fillTop=v,this.fillLeft=g,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=p,this.isFilled=!0,this.setPosition(o,f),this.setSize(r,d),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setReversed:function(l){return this.isReversed=l,this},setFaces:function(l,n,o){return l===void 0&&(l=!0),n===void 0&&(n=!0),o===void 0&&(o=!0),this.showTop=l,this.showLeft=n,this.showRight=o,this},setFillStyle:function(l,n,o){return this.fillTop=l,this.fillLeft=n,this.fillRight=o,this.isFilled=!0,this}});S.exports=h},79590:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(65960),y=s(20926),u=function(h,l,n,o){n.addToRenderList(l);var f=h.currentContext;if(y(h,f,l,n,o)&&l.isFilled){var r=l.width,d=l.height,p=r/2,v=r/l.projection,g=l.isReversed;l.showTop&&g&&(c(f,l,l.fillTop),f.beginPath(),f.moveTo(-p,-d),f.lineTo(0,-v-d),f.lineTo(p,-d),f.lineTo(0,v-d),f.fill()),l.showLeft&&(c(f,l,l.fillLeft),f.beginPath(),g?(f.moveTo(-p,-d),f.lineTo(0,v),f.lineTo(0,v-d)):(f.moveTo(-p,0),f.lineTo(0,v),f.lineTo(0,v-d)),f.fill()),l.showRight&&(c(f,l,l.fillRight),f.beginPath(),g?(f.moveTo(p,-d),f.lineTo(0,v),f.lineTo(0,v-d)):(f.moveTo(p,0),f.lineTo(0,v),f.lineTo(0,v-d)),f.fill()),f.restore()}};S.exports=u},49803:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(16933);c.register("isotriangle",function(u,h,l,n,o,f,r,d){return this.displayList.add(new y(this.scene,u,h,l,n,o,f,r,d))})},60561:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(51503),u=s(79590),S.exports={renderWebGL:y,renderCanvas:u}},51503:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=s(70554),u=function(h,l,n,o){n.addToRenderList(l);var f=h.pipelines.set(l.pipeline),r=c(l,n,o),d=f.calcMatrix.copyFrom(r.calc),p=l.width,v=l.height,g=p/2,m=p/l.projection,T=l.isReversed,P=n.alpha*l.alpha;if(l.isFilled){h.pipelines.preBatch(l);var M,b,R,A,D,G,F;if(l.showTop&&T){M=y.getTintAppendFloatAlpha(l.fillTop,P),b=d.getX(-g,-v),R=d.getY(-g,-v),A=d.getX(0,-m-v),D=d.getY(0,-m-v),G=d.getX(g,-v),F=d.getY(g,-v);var B=d.getX(0,m-v),N=d.getY(0,m-v);f.batchQuad(l,b,R,A,D,G,F,B,N,0,0,1,1,M,M,M,M,2)}l.showLeft&&(M=y.getTintAppendFloatAlpha(l.fillLeft,P),T?(b=d.getX(-g,-v),R=d.getY(-g,-v),A=d.getX(0,m),D=d.getY(0,m),G=d.getX(0,m-v),F=d.getY(0,m-v)):(b=d.getX(-g,0),R=d.getY(-g,0),A=d.getX(0,m),D=d.getY(0,m),G=d.getX(0,m-v),F=d.getY(0,m-v)),f.batchTri(l,b,R,A,D,G,F,0,0,1,1,M,M,M,2)),l.showRight&&(M=y.getTintAppendFloatAlpha(l.fillRight,P),T?(b=d.getX(g,-v),R=d.getY(g,-v),A=d.getX(0,m),D=d.getY(0,m),G=d.getX(0,m-v),F=d.getY(0,m-v)):(b=d.getX(g,0),R=d.getY(g,0),A=d.getX(0,m),D=d.getY(0,m),G=d.getX(0,m-v),F=d.getY(0,m-v)),f.batchTri(l,b,R,A,D,G,F,0,0,1,1,M,M,M,2)),h.pipelines.postBatch(l)}};S.exports=u},57847:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(17803),u=s(23031),h=s(36823),l=new c({Extends:y,Mixins:[h],initialize:function(o,f,r,d,p,v,g,m,T){f===void 0&&(f=0),r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p=0),v===void 0&&(v=128),g===void 0&&(g=0),y.call(this,o,"Line",new u(d,p,v,g));var P=Math.max(1,this.geom.right-this.geom.left),M=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(f,r),this.setSize(P,M),m!==void 0&&this.setStrokeStyle(1,m,T),this.updateDisplayOrigin()},setLineWidth:function(n,o){return o===void 0&&(o=n),this._startWidth=n,this._endWidth=o,this.lineWidth=n,this},setTo:function(n,o,f,r){return this.geom.setTo(n,o,f,r),this}});S.exports=l},17440:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(75177),y=s(20926),u=function(h,l,n,o){n.addToRenderList(l);var f=h.currentContext;if(y(h,f,l,n,o)){var r=l._displayOriginX,d=l._displayOriginY;l.isStroked&&(c(f,l),f.beginPath(),f.moveTo(l.geom.x1-r,l.geom.y1-d),f.lineTo(l.geom.x2-r,l.geom.y2-d),f.stroke()),f.restore()}};S.exports=u},2481:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(57847);c.register("line",function(u,h,l,n,o,f,r,d){return this.displayList.add(new y(this.scene,u,h,l,n,o,f,r,d))})},36823:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(77385),u=s(17440),S.exports={renderWebGL:y,renderCanvas:u}},77385:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=s(70554),u=function(h,l,n,o){n.addToRenderList(l);var f=h.pipelines.set(l.pipeline),r=c(l,n,o);f.calcMatrix.copyFrom(r.calc);var d=l._displayOriginX,p=l._displayOriginY,v=n.alpha*l.alpha;if(h.pipelines.preBatch(l),l.isStroked){var g=f.strokeTint,m=y.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*v);g.TL=m,g.TR=m,g.BL=m,g.BR=m,f.batchLine(l.geom.x1-d,l.geom.y1-p,l.geom.x2-d,l.geom.y2-p,l._startWidth/2,l._endWidth/2,1,0,!1,r.sprite,r.camera)}h.pipelines.postBatch(l)};S.exports=u},24949:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(90273),y=s(83419),u=s(94811),h=s(13829),l=s(25717),n=s(17803),o=s(5469),f=new y({Extends:n,Mixins:[c],initialize:function(d,p,v,g,m,T){p===void 0&&(p=0),v===void 0&&(v=0),n.call(this,d,"Polygon",new l(g));var P=h(this.geom);this.setPosition(p,v),this.setSize(P.width,P.height),m!==void 0&&this.setFillStyle(m,T),this.updateDisplayOrigin(),this.updateData()},smooth:function(r){r===void 0&&(r=1);for(var d=0;d<r;d++)o(this.geom);return this.updateData()},setTo:function(r){this.geom.setTo(r);var d=h(this.geom);return this.setSize(d.width,d.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var r=[],d=this.geom.points,p=0;p<d.length;p++)r.push(d[p].x,d[p].y);return r.push(d[0].x,d[0].y),this.pathIndexes=u(r),this.pathData=r,this}});S.exports=f},38710:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(65960),y=s(75177),u=s(20926),h=function(l,n,o,f){o.addToRenderList(n);var r=l.currentContext;if(u(l,r,n,o,f)){var d=n._displayOriginX,p=n._displayOriginY,v=n.pathData,g=v.length-1,m=v[0]-d,T=v[1]-p;r.beginPath(),r.moveTo(m,T),n.closePath||(g-=2);for(var P=2;P<g;P+=2){var M=v[P]-d,b=v[P+1]-p;r.lineTo(M,b)}n.closePath&&r.closePath(),n.isFilled&&(c(r,n),r.fill()),n.isStroked&&(y(r,n),r.stroke()),r.restore()}};S.exports=h},64827:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(24949);c.register("polygon",function(u,h,l,n,o){return this.displayList.add(new y(this.scene,u,h,l,n,o))})},90273:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(73695),u=s(38710),S.exports={renderWebGL:y,renderCanvas:u}},73695:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(10441),y=s(91296),u=s(34682),h=function(l,n,o,f){o.addToRenderList(n);var r=l.pipelines.set(n.pipeline),d=y(n,o,f),p=r.calcMatrix.copyFrom(d.calc),v=n._displayOriginX,g=n._displayOriginY,m=o.alpha*n.alpha;l.pipelines.preBatch(n),n.isFilled&&c(r,p,n,m,v,g),n.isStroked&&u(r,n,m,v,g),l.pipelines.postBatch(n)};S.exports=h},74561:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(94811),u=s(87841),h=s(17803),l=s(95597),n=new c({Extends:h,Mixins:[l],initialize:function(f,r,d,p,v,g,m){r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p=128),v===void 0&&(v=128),h.call(this,f,"Rectangle",new u(0,0,p,v)),this.radius=20,this.isRounded=!1,this.setPosition(r,d),this.setSize(p,v),g!==void 0&&this.setFillStyle(g,m),this.updateDisplayOrigin(),this.updateData()},setRounded:function(o){return o===void 0&&(o=16),this.radius=o,this.isRounded=o>0,this.updateRoundedData()},setSize:function(o,f){this.width=o,this.height=f,this.geom.setSize(o,f),this.updateData(),this.updateDisplayOrigin();var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=o,r.hitArea.height=f),this},updateData:function(){if(this.isRounded)return this.updateRoundedData();var o=[],f=this.geom,r=this._tempLine;return f.getLineA(r),o.push(r.x1,r.y1,r.x2,r.y2),f.getLineB(r),o.push(r.x2,r.y2),f.getLineC(r),o.push(r.x2,r.y2),f.getLineD(r),o.push(r.x2,r.y2),this.pathData=o,this},updateRoundedData:function(){var o=[],f=this.width/2,r=this.height/2,d=Math.min(f,r),p=Math.min(this.radius,d),v=f,g=r,m=Math.max(1,Math.floor(p/5));return this.arcTo(o,v-f+p,g-r+p,p,Math.PI,Math.PI*1.5,m),o.push(v+f-p,g-r),this.arcTo(o,v+f-p,g-r+p,p,Math.PI*1.5,Math.PI*2,m),o.push(v+f,g+r-p),this.arcTo(o,v+f-p,g+r-p,p,0,Math.PI*.5,m),o.push(v-f+p,g+r),this.arcTo(o,v-f+p,g+r-p,p,Math.PI*.5,Math.PI,m),o.push(v-f,g-r+p),this.pathIndexes=y(o),this.pathData=o,this},arcTo:function(o,f,r,d,p,v,g){for(var m=(v-p)/g,T=0;T<=g;T++){var P=p+m*T;o.push(f+Math.cos(P)*d,r+Math.sin(P)*d)}}});S.exports=n},48682:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(65960),y=s(75177),u=s(20926),h=function(n,o,f,r,d,p){var v=Math.min(r/2,d/2),g=Math.min(p,v);if(g===0){n.rect(o,f,r,d);return}n.moveTo(o+g,f),n.lineTo(o+r-g,f),n.arcTo(o+r,f,o+r,f+g,g),n.lineTo(o+r,f+d-g),n.arcTo(o+r,f+d,o+r-g,f+d,g),n.lineTo(o+g,f+d),n.arcTo(o,f+d,o,f+d-g,g),n.lineTo(o,f+g),n.arcTo(o,f,o+g,f,g),n.closePath()},l=function(n,o,f,r){f.addToRenderList(o);var d=n.currentContext;if(u(n,d,o,f,r)){var p=o._displayOriginX,v=o._displayOriginY;o.isFilled&&(c(d,o),o.isRounded?(d.beginPath(),h(d,-p,-v,o.width,o.height,o.radius),d.fill()):d.fillRect(-p,-v,o.width,o.height)),o.isStroked&&(y(d,o),d.beginPath(),o.isRounded?h(d,-p,-v,o.width,o.height,o.radius):d.rect(-p,-v,o.width,o.height),d.stroke()),d.restore()}};S.exports=l},87959:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(74561);c.register("rectangle",function(u,h,l,n,o,f){return this.displayList.add(new y(this.scene,u,h,l,n,o,f))})},95597:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(52059),u=s(48682),S.exports={renderWebGL:y,renderCanvas:u}},52059:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(10441),y=s(91296),u=s(34682),h=s(70554),l=function(n,o,f,r){f.addToRenderList(o);var d=n.pipelines.set(o.pipeline),p=y(o,f,r);d.calcMatrix.copyFrom(p.calc);var v=o._displayOriginX,g=o._displayOriginY,m=f.alpha*o.alpha;if(n.pipelines.preBatch(o),o.isRounded&&o.isFilled)c(d,p.calc,o,m,v,g);else if(o.isFilled){var T=d.fillTint,P=h.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*m);T.TL=P,T.TR=P,T.BL=P,T.BR=P,d.batchFillRect(-v,-g,o.width,o.height)}o.isStroked&&u(d,o,m,v,g),n.pipelines.postBatch(o)};S.exports=l},55911:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(81991),y=s(83419),u=s(94811),h=s(17803),l=new y({Extends:h,Mixins:[c],initialize:function(o,f,r,d,p,v,g,m){f===void 0&&(f=0),r===void 0&&(r=0),d===void 0&&(d=5),p===void 0&&(p=32),v===void 0&&(v=64),h.call(this,o,"Star",null),this._points=d,this._innerRadius=p,this._outerRadius=v,this.setPosition(f,r),this.setSize(v*2,v*2),g!==void 0&&this.setFillStyle(g,m),this.updateDisplayOrigin(),this.updateData()},setPoints:function(n){return this._points=n,this.updateData()},setInnerRadius:function(n){return this._innerRadius=n,this.updateData()},setOuterRadius:function(n){return this._outerRadius=n,this.updateData()},points:{get:function(){return this._points},set:function(n){this._points=n,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(n){this._innerRadius=n,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(n){this._outerRadius=n,this.updateData()}},updateData:function(){var n=[],o=this._points,f=this._innerRadius,r=this._outerRadius,d=Math.PI/2*3,p=Math.PI/o,v=r,g=r;n.push(v,g+-r);for(var m=0;m<o;m++)n.push(v+Math.cos(d)*r,g+Math.sin(d)*r),d+=p,n.push(v+Math.cos(d)*f,g+Math.sin(d)*f),d+=p;return n.push(v,g+-r),this.pathIndexes=u(n),this.pathData=n,this}});S.exports=l},64272:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(65960),y=s(75177),u=s(20926),h=function(l,n,o,f){o.addToRenderList(n);var r=l.currentContext;if(u(l,r,n,o,f)){var d=n._displayOriginX,p=n._displayOriginY,v=n.pathData,g=v.length-1,m=v[0]-d,T=v[1]-p;r.beginPath(),r.moveTo(m,T),n.closePath||(g-=2);for(var P=2;P<g;P+=2){var M=v[P]-d,b=v[P+1]-p;r.lineTo(M,b)}r.closePath(),n.isFilled&&(c(r,n),r.fill()),n.isStroked&&(y(r,n),r.stroke()),r.restore()}};S.exports=h},93697:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(55911),y=s(39429);y.register("star",function(u,h,l,n,o,f,r){return this.displayList.add(new c(this.scene,u,h,l,n,o,f,r))})},81991:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(57017),u=s(64272),S.exports={renderWebGL:y,renderCanvas:u}},57017:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(10441),y=s(91296),u=s(34682),h=function(l,n,o,f){o.addToRenderList(n);var r=l.pipelines.set(n.pipeline),d=y(n,o,f),p=r.calcMatrix.copyFrom(d.calc),v=n._displayOriginX,g=n._displayOriginY,m=o.alpha*n.alpha;l.pipelines.preBatch(n),n.isFilled&&c(r,p,n,m,v,g),n.isStroked&&u(r,n,m,v,g),l.pipelines.postBatch(n)};S.exports=h},36931:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(17803),u=s(16483),h=s(96195),l=new c({Extends:y,Mixins:[h],initialize:function(o,f,r,d,p,v,g,m,T,P,M){f===void 0&&(f=0),r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p=128),v===void 0&&(v=64),g===void 0&&(g=0),m===void 0&&(m=128),T===void 0&&(T=128),y.call(this,o,"Triangle",new u(d,p,v,g,m,T));var b=this.geom.right-this.geom.left,R=this.geom.bottom-this.geom.top;this.setPosition(f,r),this.setSize(b,R),P!==void 0&&this.setFillStyle(P,M),this.updateDisplayOrigin(),this.updateData()},setTo:function(n,o,f,r,d,p){return this.geom.setTo(n,o,f,r,d,p),this.updateData()},updateData:function(){var n=[],o=this.geom,f=this._tempLine;return o.getLineA(f),n.push(f.x1,f.y1,f.x2,f.y2),o.getLineB(f),n.push(f.x2,f.y2),o.getLineC(f),n.push(f.x2,f.y2),this.pathData=n,this}});S.exports=l},85172:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(65960),y=s(75177),u=s(20926),h=function(l,n,o,f){o.addToRenderList(n);var r=l.currentContext;if(u(l,r,n,o,f)){var d=n._displayOriginX,p=n._displayOriginY,v=n.geom.x1-d,g=n.geom.y1-p,m=n.geom.x2-d,T=n.geom.y2-p,P=n.geom.x3-d,M=n.geom.y3-p;r.beginPath(),r.moveTo(v,g),r.lineTo(m,T),r.lineTo(P,M),r.closePath(),n.isFilled&&(c(r,n),r.fill()),n.isStroked&&(y(r,n),r.stroke()),r.restore()}};S.exports=h},45245:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(36931);c.register("triangle",function(u,h,l,n,o,f,r,d,p,v){return this.displayList.add(new y(this.scene,u,h,l,n,o,f,r,d,p,v))})},96195:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(83253),u=s(85172),S.exports={renderWebGL:y,renderCanvas:u}},83253:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=s(34682),u=s(70554),h=function(l,n,o,f){o.addToRenderList(n);var r=l.pipelines.set(n.pipeline),d=c(n,o,f);r.calcMatrix.copyFrom(d.calc);var p=n._displayOriginX,v=n._displayOriginY,g=o.alpha*n.alpha;if(l.pipelines.preBatch(n),n.isFilled){var m=r.fillTint,T=u.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*g);m.TL=T,m.TR=T,m.BL=T,m.BR=T;var P=n.geom.x1-p,M=n.geom.y1-v,b=n.geom.x2-p,R=n.geom.y2-v,A=n.geom.x3-p,D=n.geom.y3-v;r.batchFillTriangle(P,M,b,R,A,D,d.sprite,d.camera)}n.isStroked&&y(r,n,g,p,v),l.pipelines.postBatch(n)};S.exports=h},68287:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(9674),y=s(83419),u=s(31401),h=s(95643),l=s(92751),n=new y({Extends:h,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,l],initialize:function(f,r,d,p,v){h.call(this,f,"Sprite"),this._crop=this.resetCropObject(),this.anims=new c(this),this.setTexture(p,v),this.setPosition(r,d),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(o,f){this.anims.update(o,f)},play:function(o,f){return this.anims.play(o,f)},playReverse:function(o,f){return this.anims.playReverse(o,f)},playAfterDelay:function(o,f){return this.anims.playAfterDelay(o,f)},playAfterRepeat:function(o,f){return this.anims.playAfterRepeat(o,f)},chain:function(o){return this.anims.chain(o)},stop:function(){return this.anims.stop()},stopAfterDelay:function(o){return this.anims.stopAfterDelay(o)},stopAfterRepeat:function(o){return this.anims.stopAfterRepeat(o)},stopOnFrame:function(o){return this.anims.stopOnFrame(o)},toJSON:function(){return u.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});S.exports=n},76552:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){y.addToRenderList(c),s.batchSprite(c,c.frame,y,u)};S.exports=w},15567:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(13059),u=s(44603),h=s(23568),l=s(68287);u.register("sprite",function(n,o){n===void 0&&(n={});var f=h(n,"key",null),r=h(n,"frame",null),d=new l(this.scene,0,0,f,r);return o!==void 0&&(n.add=o),c(this.scene,d,n),y(d,n),d})},46409:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(68287);c.register("sprite",function(u,h,l,n){return this.displayList.add(new y(this.scene,u,h,l,n))})},92751:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(9409),u=s(76552),S.exports={renderWebGL:y,renderCanvas:u}},9409:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){y.addToRenderList(c),c.pipeline.batchSprite(c,y,u)};S.exports=w},14220:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=s.canvas,h=s.context,l=s.style,n=[],o=0,f=y.length;l.maxLines>0&&l.maxLines<y.length&&(f=l.maxLines),l.syncFont(u,h);for(var r=s.letterSpacing,d=0;d<f;d++){var p=l.strokeThickness;if(r===0)p+=h.measureText(y[d]).width;else{for(var v=y[d],g=0;g<v.length;g++)p+=h.measureText(v[g]).width;v.length>1&&(p+=r*(v.length-1))}l.wordWrap&&(p-=h.measureText(" ").width),n[d]=Math.ceil(p),o=Math.max(o,n[d])}var m=c.fontSize+l.strokeThickness,T=m*f,P=s.lineSpacing;return f>1&&(T+=P*(f-1)),{width:o,height:T,lines:f,lineWidths:n,lineSpacing:P,lineHeight:m}};S.exports=w},79557:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(27919),y=function(u){var h=c.create(this),l=h.getContext("2d",{willReadFrequently:!0});u.syncFont(h,l);var n=l.measureText(u.testString);if("actualBoundingBoxAscent"in n){var o=n.actualBoundingBoxAscent,f=n.actualBoundingBoxDescent;return c.remove(h),{ascent:o,descent:f,fontSize:o+f}}var r=Math.ceil(n.width*u.baselineX),d=r,p=2*d;d=d*u.baselineY|0,h.width=r,h.height=p,l.fillStyle="#f00",l.fillRect(0,0,r,p),l.font=u._font,l.textBaseline="alphabetic",l.fillStyle="#000",l.fillText(u.testString,0,d);var v={ascent:0,descent:0,fontSize:0},g=l.getImageData(0,0,r,p);if(!g)return v.ascent=d,v.descent=d+6,v.fontSize=v.ascent+v.descent,c.remove(h),v;var m=g.data,T=m.length,P=r*4,M,b,R=0,A=!1;for(M=0;M<d;M++){for(b=0;b<P;b+=4)if(m[R+b]!==255){A=!0;break}if(!A)R+=P;else break}for(v.ascent=d-M,R=T-P,A=!1,M=p;M>d;M--){for(b=0;b<P;b+=4)if(m[R+b]!==255){A=!0;break}if(!A)R-=P;else break}return v.descent=M-d,v.fontSize=v.ascent+v.descent,c.remove(h),v};S.exports=y},50171:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(40366),y=s(27919),u=s(83419),h=s(31401),l=s(95643),n=s(14220),o=s(35154),f=s(35846),r=s(61771),d=s(35762),p=s(45650),v=new u({Extends:l,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,r],initialize:function(m,T,P,M,b){T===void 0&&(T=0),P===void 0&&(P=0),l.call(this,m,"Text"),this.renderer=m.sys.renderer,this.setPosition(T,P),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=y.create(this),this.context,this.style=new d(this,b),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=p(),this.texture=m.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(M),b&&b.padding&&this.setPadding(b.padding),b&&b.lineSpacing&&this.setLineSpacing(b.lineSpacing),b&&b.letterSpacing&&this.setLetterSpacing(b.letterSpacing)},initRTL:function(){if(!this.style.rtl){this.canvas.dir="ltr",this.context.direction="ltr";return}this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",c(this.canvas,this.scene.sys.canvas),this.originX=1},runWordWrap:function(g){var m=this.style;if(m.wordWrapCallback){var T=m.wordWrapCallback.call(m.wordWrapCallbackScope,g,this);return Array.isArray(T)&&(T=T.join(`
`)),T}else return m.wordWrapWidth?m.wordWrapUseAdvanced?this.advancedWordWrap(g,this.context,this.style.wordWrapWidth):this.basicWordWrap(g,this.context,this.style.wordWrapWidth):g},advancedWordWrap:function(g,m,T){for(var P="",M=g.replace(/ +/gi," ").split(this.splitRegExp),b=M.length,R=0;R<b;R++){var A=M[R],D="";A=A.replace(/^ *|\s*$/gi,"");var G=A.length*this.letterSpacing,F=m.measureText(A).width+G;if(F<T){P+=A+`
`;continue}for(var B=T,N=A.split(" "),z=0;z<N.length;z++){var $=N[z],Q=$+" ",Z=Q.length*this.letterSpacing,tt=m.measureText(Q).width+Z;if(tt>B){if(z===0){for(var H=Q;H.length;){H=H.slice(0,-1);var J=H.length*this.letterSpacing;if(tt=m.measureText(H).width+J,tt<=B)break}if(!H.length)throw new Error("wordWrapWidth < a single character");var Y=$.substr(H.length);N[z]=Y,D+=H}var _=N[z].length?z:z+1,U=N.slice(_).join(" ").replace(/[ \n]*$/gi,"");M.splice(R+1,0,U),b=M.length;break}else D+=Q,B-=tt}P+=D.replace(/[ \n]*$/gi,"")+`
`}return P=P.replace(/[\s|\n]*$/gi,""),P},basicWordWrap:function(g,m,T){for(var P="",M=g.split(this.splitRegExp),b=M.length-1,R=m.measureText(" ").width,A=0;A<=b;A++){for(var D=T,G=M[A].split(" "),F=G.length-1,B=0;B<=F;B++){var N=G[B],z=N.length*this.letterSpacing,$=m.measureText(N).width+z,Q=$;B<F&&(Q+=R),Q>D&&B>0&&(P+=`
`,D=T),P+=N,B<F?(P+=" ",D-=Q):D-=$}A<b&&(P+=`
`)}return P},getWrappedText:function(g){g===void 0&&(g=this._text),this.style.syncFont(this.canvas,this.context);var m=this.runWordWrap(g);return m.split(this.splitRegExp)},setText:function(g){return!g&&g!==0&&(g=""),Array.isArray(g)&&(g=g.join(`
`)),g!==this._text&&(this._text=g.toString(),this.updateText()),this},appendText:function(g,m){m===void 0&&(m=!0),!g&&g!==0&&(g=""),Array.isArray(g)&&(g=g.join(`
`)),g=g.toString();var T=this._text.concat(m?`
`+g:g);return T!==this._text&&(this._text=T,this.updateText()),this},setStyle:function(g){return this.style.setStyle(g)},setFont:function(g){return this.style.setFont(g)},setFontFamily:function(g){return this.style.setFontFamily(g)},setFontSize:function(g){return this.style.setFontSize(g)},setFontStyle:function(g){return this.style.setFontStyle(g)},setFixedSize:function(g,m){return this.style.setFixedSize(g,m)},setBackgroundColor:function(g){return this.style.setBackgroundColor(g)},setFill:function(g){return this.style.setFill(g)},setColor:function(g){return this.style.setColor(g)},setStroke:function(g,m){return this.style.setStroke(g,m)},setShadow:function(g,m,T,P,M,b){return this.style.setShadow(g,m,T,P,M,b)},setShadowOffset:function(g,m){return this.style.setShadowOffset(g,m)},setShadowColor:function(g){return this.style.setShadowColor(g)},setShadowBlur:function(g){return this.style.setShadowBlur(g)},setShadowStroke:function(g){return this.style.setShadowStroke(g)},setShadowFill:function(g){return this.style.setShadowFill(g)},setWordWrapWidth:function(g,m){return this.style.setWordWrapWidth(g,m)},setWordWrapCallback:function(g,m){return this.style.setWordWrapCallback(g,m)},setAlign:function(g){return this.style.setAlign(g)},setResolution:function(g){return this.style.setResolution(g)},setLineSpacing:function(g){return this.lineSpacing=g,this.updateText()},setLetterSpacing:function(g){return this.letterSpacing=g,this.updateText()},setPadding:function(g,m,T,P){if(typeof g=="object"){var M=g,b=o(M,"x",null);b!==null?(g=b,T=b):(g=o(M,"left",0),T=o(M,"right",g));var R=o(M,"y",null);R!==null?(m=R,P=R):(m=o(M,"top",0),P=o(M,"bottom",m))}else g===void 0&&(g=0),m===void 0&&(m=g),T===void 0&&(T=g),P===void 0&&(P=m);return this.padding.left=g,this.padding.top=m,this.padding.right=T,this.padding.bottom=P,this.updateText()},setMaxLines:function(g){return this.style.setMaxLines(g)},setRTL:function(g){g===void 0&&(g=!0);var m=this.style;return m.rtl===g?this:(m.rtl=g,g?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",c(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),m.align==="left"?m.align="right":m.align==="right"&&(m.align="left"),this)},updateText:function(){var g=this.canvas,m=this.context,T=this.style,P=T.resolution,M=T.metrics;T.syncFont(g,m);var b=this._text;(T.wordWrapWidth||T.wordWrapCallback)&&(b=this.runWordWrap(this._text));var R=b.split(this.splitRegExp),A=n(this,M,R),D=this.padding,G;T.fixedWidth===0?(this.width=A.width+D.left+D.right,G=A.width):(this.width=T.fixedWidth,G=this.width-D.left-D.right,G<A.width&&(G=A.width)),T.fixedHeight===0?this.height=A.height+D.top+D.bottom:this.height=T.fixedHeight;var F=this.width,B=this.height;this.updateDisplayOrigin(),F*=P,B*=P,F=Math.max(F,1),B=Math.max(B,1),g.width!==F||g.height!==B?(g.width=F,g.height=B,this.frame.setSize(F,B),T.syncFont(g,m),T.rtl&&(m.direction="rtl")):m.clearRect(0,0,F,B),m.save(),m.scale(P,P),T.backgroundColor&&(m.fillStyle=T.backgroundColor,m.fillRect(0,0,F,B)),T.syncStyle(g,m),m.translate(D.left,D.top);for(var N,z,$=0;$<A.lines;$++){if(N=T.strokeThickness/2,z=T.strokeThickness/2+$*A.lineHeight+M.ascent,$>0&&(z+=A.lineSpacing*$),T.rtl)N=F-N-D.left-D.right;else if(T.align==="right")N+=G-A.lineWidths[$];else if(T.align==="center")N+=(G-A.lineWidths[$])/2;else if(T.align==="justify"){var Q=.85;if(A.lineWidths[$]/A.width>=Q){var Z=A.width-A.lineWidths[$],tt=m.measureText(" ").width,H=R[$].trim(),J=H.split(" ");Z+=(R[$].length-H.length)*tt;for(var Y=Math.floor(Z/tt),_=0;Y>0;)J[_]+=" ",_=(_+1)%(J.length-1||1),--Y;R[$]=J.join(" ")}}this.autoRound&&(N=Math.round(N),z=Math.round(z));var U=this.letterSpacing;if(T.strokeThickness&&U===0&&(T.syncShadow(m,T.shadowStroke),m.strokeText(R[$],N,z)),T.color)if(T.syncShadow(m,T.shadowFill),U!==0)for(var et=0,nt=R[$].split(""),rt=0;rt<nt.length;rt++)T.strokeThickness&&(T.syncShadow(m,T.shadowStroke),m.strokeText(nt[rt],N+et,z),T.syncShadow(m,T.shadowFill)),m.fillText(nt[rt],N+et,z),et+=m.measureText(nt[rt]).width+U;else m.fillText(R[$],N,z)}m.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(g,this.frame.source.glTexture,!0));var ot=this.input;return ot&&!ot.customHitArea&&(ot.hitArea.width=this.width,ot.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(g){this.setText(g)}},toJSON:function(){var g=h.ToJSON(this),m={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return g.data=m,g},preDestroy:function(){f(this.canvas),y.remove(this.canvas);var g=this.texture;g&&g.destroy()}});S.exports=v},79724:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){c.width===0||c.height===0||(y.addToRenderList(c),s.batchSprite(c,c.frame,y,u))};S.exports=w},71259:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(44603),u=s(23568),h=s(50171);y.register("text",function(l,n){l===void 0&&(l={});var o=u(l,"text",""),f=u(l,"style",null),r=u(l,"padding",null);r!==null&&(f.padding=r);var d=new h(this.scene,0,0,o,f);return n!==void 0&&(l.add=n),c(this.scene,d,l),d.autoRound=u(l,"autoRound",!0),d.resolution=u(l,"resolution",1),d})},68005:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(50171),y=s(39429);y.register("text",function(u,h,l,n){return this.displayList.add(new c(this.scene,u,h,l,n))})},61771:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(34397),u=s(79724),S.exports={renderWebGL:y,renderCanvas:u}},35762:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23568),u=s(35154),h=s(79557),l={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},n=new c({initialize:function(f,r){this.parent=f,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(r,!1,!0)},setStyle:function(o,f,r){f===void 0&&(f=!0),r===void 0&&(r=!1);for(var d in l){var p=r?l[d][1]:this[d];d==="wordWrapCallback"||d==="wordWrapCallbackScope"?this[d]=u(o,l[d][0],p):o&&d==="fontSize"&&typeof o.fontSize=="number"?this[d]=o.fontSize.toString()+"px":this[d]=y(o,l[d][0],p)}var v=u(o,"font",null);v!==null&&this.setFont(v,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var g=u(o,"fill",null);g!==null&&(this.color=g);var m=u(o,"metrics",!1);return m?this.metrics={ascent:u(m,"ascent",0),descent:u(m,"descent",0),fontSize:u(m,"fontSize",0)}:(f||!this.metrics)&&(this.metrics=h(this)),f?this.parent.updateText():this.parent},syncFont:function(o,f){f.font=this._font},syncStyle:function(o,f){f.textBaseline="alphabetic",f.fillStyle=this.color,f.strokeStyle=this.stroke,f.lineWidth=this.strokeThickness,f.lineCap="round",f.lineJoin="round"},syncShadow:function(o,f){f?(o.shadowOffsetX=this.shadowOffsetX,o.shadowOffsetY=this.shadowOffsetY,o.shadowColor=this.shadowColor,o.shadowBlur=this.shadowBlur):(o.shadowOffsetX=0,o.shadowOffsetY=0,o.shadowColor=0,o.shadowBlur=0)},update:function(o){return o&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=h(this)),this.parent.updateText()},setFont:function(o,f){f===void 0&&(f=!0);var r=o,d="",p="";if(typeof o!="string")r=u(o,"fontFamily","Courier"),d=u(o,"fontSize","16px"),p=u(o,"fontStyle","");else{var v=o.split(" "),g=0;p=v.length>2?v[g++]:"",d=v[g++]||"16px",r=v[g++]||"Courier"}return(r!==this.fontFamily||d!==this.fontSize||p!==this.fontStyle)&&(this.fontFamily=r,this.fontSize=d,this.fontStyle=p,f&&this.update(!0)),this.parent},setFontFamily:function(o){return this.fontFamily!==o&&(this.fontFamily=o,this.update(!0)),this.parent},setFontStyle:function(o){return this.fontStyle!==o&&(this.fontStyle=o,this.update(!0)),this.parent},setFontSize:function(o){return typeof o=="number"&&(o=o.toString()+"px"),this.fontSize!==o&&(this.fontSize=o,this.update(!0)),this.parent},setTestString:function(o){return this.testString=o,this.update(!0)},setFixedSize:function(o,f){return this.fixedWidth=o,this.fixedHeight=f,o&&(this.parent.width=o),f&&(this.parent.height=f),this.update(!1)},setBackgroundColor:function(o){return this.backgroundColor=o,this.update(!1)},setFill:function(o){return this.color=o,this.update(!1)},setColor:function(o){return this.color=o,this.update(!1)},setResolution:function(o){return this.resolution=o,this.update(!1)},setStroke:function(o,f){return f===void 0&&(f=this.strokeThickness),o===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==o||this.strokeThickness!==f)&&(this.stroke=o,this.strokeThickness=f,this.update(!0)),this.parent},setShadow:function(o,f,r,d,p,v){return o===void 0&&(o=0),f===void 0&&(f=0),r===void 0&&(r="#000"),d===void 0&&(d=0),p===void 0&&(p=!1),v===void 0&&(v=!0),this.shadowOffsetX=o,this.shadowOffsetY=f,this.shadowColor=r,this.shadowBlur=d,this.shadowStroke=p,this.shadowFill=v,this.update(!1)},setShadowOffset:function(o,f){return o===void 0&&(o=0),f===void 0&&(f=o),this.shadowOffsetX=o,this.shadowOffsetY=f,this.update(!1)},setShadowColor:function(o){return o===void 0&&(o="#000"),this.shadowColor=o,this.update(!1)},setShadowBlur:function(o){return o===void 0&&(o=0),this.shadowBlur=o,this.update(!1)},setShadowStroke:function(o){return this.shadowStroke=o,this.update(!1)},setShadowFill:function(o){return this.shadowFill=o,this.update(!1)},setWordWrapWidth:function(o,f){return f===void 0&&(f=!1),this.wordWrapWidth=o,this.wordWrapUseAdvanced=f,this.update(!1)},setWordWrapCallback:function(o,f){return f===void 0&&(f=null),this.wordWrapCallback=o,this.wordWrapCallbackScope=f,this.update(!1)},setAlign:function(o){return o===void 0&&(o="left"),this.align=o,this.update(!1)},setMaxLines:function(o){return o===void 0&&(o=0),this.maxLines=o,this.update(!1)},getTextMetrics:function(){var o=this.metrics;return{ascent:o.ascent,descent:o.descent,fontSize:o.fontSize}},toJSON:function(){var o={};for(var f in l)o[f]=this[f];return o.metrics=this.getTextMetrics(),o},destroy:function(){this.parent=void 0}});S.exports=n},34397:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(70554),y=function(u,h,l,n){if(!(h.width===0||h.height===0)){l.addToRenderList(h);var o=h.frame,f=o.width,r=o.height,d=c.getTintAppendFloatAlpha,p=u.pipelines.set(h.pipeline,h),v=p.setTexture2D(o.glTexture,h);p.batchTexture(h,o.glTexture,f,r,h.x,h.y,f/h.style.resolution,r/h.style.resolution,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.displayOriginX,h.displayOriginY,0,0,f,r,d(h.tintTopLeft,l.alpha*h._alphaTL),d(h.tintTopRight,l.alpha*h._alphaTR),d(h.tintBottomLeft,l.alpha*h._alphaBL),d(h.tintBottomRight,l.alpha*h._alphaBR),h.tintFill,0,0,l,n,!1,v)}};S.exports=y},20839:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(27919),y=s(83419),u=s(31401),h=s(95643),l=s(98439),n=s(68703),o=s(56295),f=s(45650),r=s(26099),d=8,p=new y({Extends:h,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,o],initialize:function(g,m,T,P,M,b,R){var A=g.sys.renderer;h.call(this,g,"TileSprite");var D=g.sys.textures.get(b),G=D.get(R);G.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),D=g.sys.textures.get("__MISSING"),G=D.get()),D.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),D=g.sys.textures.get("__MISSING"),G=D.get()),!P||!M?(P=P||G.width,M=M||G.height):(P=Math.floor(P),M=Math.floor(M)),this._tilePosition=new r,this._tileScale=new r(1,1),this.dirty=!1,this.renderer=A,this.canvas=c.create(this,P,M),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=D,this.displayFrame=G,this._crop=this.resetCropObject(),this._textureKey=f(),this.texture=g.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=l(G.width),this.potHeight=l(G.height),this.fillCanvas=c.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(m,T),this.setSize(P,M),this.setFrame(R),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(v,g){return this.displayTexture=this.scene.sys.textures.get(v),this.setFrame(g)},setFrame:function(v){var g=this.displayTexture.get(v);return this.potWidth=l(g.width),this.potHeight=l(g.height),this.canvas.width=0,!g.cutWidth||!g.cutHeight?this.renderFlags&=~d:this.renderFlags|=d,this.displayFrame=g,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(v,g){return v!==void 0&&(this.tilePositionX=v),g!==void 0&&(this.tilePositionY=g),this},setTileScale:function(v,g){return v===void 0&&(v=this.tileScaleX),g===void 0&&(g=v),this.tileScaleX=v,this.tileScaleY=g,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var v=this.displayFrame;if(v.source.isRenderTexture||v.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var g=this.fillContext,m=this.fillCanvas,T=this.potWidth,P=this.potHeight;(!this.renderer||!this.renderer.gl)&&(T=v.cutWidth,P=v.cutHeight),g.clearRect(0,0,T,P),m.width=T,m.height=P,g.drawImage(v.source.image,v.cutX,v.cutY,v.cutWidth,v.cutHeight,0,0,T,P),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(m,this.fillPattern):this.fillPattern=g.createPattern(m,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var v=this.canvas;if((v.width!==this.width||v.height!==this.height)&&(v.width=this.width,v.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var g=this.context;this.scene.sys.game.config.antialias||n.disable(g);var m=this._tileScale.x,T=this._tileScale.y,P=this._tilePosition.x,M=this._tilePosition.y;g.clearRect(0,0,this.width,this.height),g.save(),g.scale(m,T),g.translate(-P,-M),g.fillStyle=this.fillPattern,g.fillRect(P,M,this.width/m,this.height/T),g.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),c.remove(this.canvas),c.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var v=this.texture;v&&v.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(v){this._tilePosition.x=v,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(v){this._tilePosition.y=v,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(v){this._tileScale.x=v,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(v){this._tileScale.y=v,this.dirty=!0}}});S.exports=p},46992:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){c.updateCanvas(),y.addToRenderList(c),s.batchSprite(c,c.frame,y,u)};S.exports=w},14167:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(44603),u=s(23568),h=s(20839);y.register("tileSprite",function(l,n){l===void 0&&(l={});var o=u(l,"x",0),f=u(l,"y",0),r=u(l,"width",512),d=u(l,"height",512),p=u(l,"key",""),v=u(l,"frame",""),g=new h(this.scene,o,f,r,d,p,v);return n!==void 0&&(l.add=n),c(this.scene,g,l),g})},91681:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(20839),y=s(39429);y.register("tileSprite",function(u,h,l,n,o,f){return this.displayList.add(new c(this.scene,u,h,l,n,o,f))})},56295:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(18553),u=s(46992),S.exports={renderWebGL:y,renderCanvas:u}},18553:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(70554),y=function(u,h,l,n){h.updateCanvas();var o=h.width,f=h.height;if(!(o===0||f===0)){l.addToRenderList(h);var r=c.getTintAppendFloatAlpha,d=u.pipelines.set(h.pipeline,h),p=d.setTexture2D(h.fillPattern,h);d.batchTexture(h,h.fillPattern,h.displayFrame.width*h.tileScaleX,h.displayFrame.height*h.tileScaleY,h.x,h.y,o,f,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.originX*o,h.originY*f,0,0,o,f,r(h.tintTopLeft,l.alpha*h._alphaTL),r(h.tintTopRight,l.alpha*h._alphaTR),r(h.tintBottomLeft,l.alpha*h._alphaBL),r(h.tintBottomRight,l.alpha*h._alphaBR),h.tintFill,h.tilePositionX%h.displayFrame.width/h.displayFrame.width,h.tilePositionY%h.displayFrame.height/h.displayFrame.height,l,n,!1,p)}};S.exports=y},18471:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45319),y=s(83419),u=s(31401),h=s(51708),l=s(8443),n=s(95643),o=s(36383),f=s(14463),r=s(45650),d=s(10247),p=new y({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.TextureCrop,u.Tint,u.Transform,u.Visible,d],initialize:function(g,m,T,P){n.call(this,g,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=r(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var M=g.sys.game;this._device=M.device.video,this.setPosition(m,T),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),M.events.on(l.PAUSE,this.globalPause,this),M.events.on(l.RESUME,this.globalResume,this);var b=g.sys.sound;b&&b.on(f.GLOBAL_MUTE,this.globalMute,this),P&&this.load(P)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(v){var g=this.scene.sys.cache.video.get(v);return g?(this.cacheKey=v,this.loadHandler(g.url,g.noAudio,g.crossOrigin)):console.warn("No video in cache for key: "+v),this},changeSource:function(v,g,m,T,P){g===void 0&&(g=!0),m===void 0&&(m=!1),this.cacheKey!==v&&(this.load(v),g&&this.play(m,T,P))},getVideoKey:function(){return this.cacheKey},loadURL:function(v,g,m){g===void 0&&(g=!1);var T=this._device.getVideoURL(v);return T?(this.cacheKey="",this.loadHandler(T.url,g,m)):console.warn("No supported video format found for "+v),this},loadMediaStream:function(v,g,m){return this.loadHandler(null,g,m,v)},loadHandler:function(v,g,m,T){g||(g=!1);var P=this.video;if(P?(this.removeLoadEventHandlers(),this.stop()):(P=document.createElement("video"),P.controls=!1,P.setAttribute("playsinline","playsinline"),P.setAttribute("preload","auto"),P.setAttribute("disablePictureInPicture","true")),g?(P.muted=!0,P.defaultMuted=!0,P.setAttribute("autoplay","autoplay")):(P.muted=!1,P.defaultMuted=!1,P.removeAttribute("autoplay")),m?P.setAttribute("crossorigin",m):P.removeAttribute("crossorigin"),T)if("srcObject"in P)try{P.srcObject=T}catch(b){if(b.name!=="TypeError")throw b;P.src=URL.createObjectURL(T)}else P.src=URL.createObjectURL(T);else P.src=v;this.retry=0,this.video=P,this._playCalled=!1,P.load(),this.addLoadEventHandlers();var M=this.scene.sys.textures.get(this._key);return this.setTexture(M),this},requestVideoFrame:function(v,g){var m=this.video;if(m){var T=g.width,P=g.height,M=this.videoTexture,b=this.videoTextureSource,R=!M||b.source!==m;R?(this._codePaused=m.paused,this._codeMuted=m.muted,M?(b.source=m,b.width=T,b.height=P,M.get().setSize(T,P)):(M=this.scene.sys.textures.create(this._key,m,T,P),M.add("__BASE",0,0,0,T,P),this.setTexture(M),this.videoTexture=M,this.videoTextureSource=M.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(h.VIDEO_TEXTURE,this,M)),this.setSizeToFrame(),this.updateDisplayOrigin()):b.update(),this.isStalled=!1,this.metadata=g;var A=g.mediaTime;R&&(this._lastUpdate=A,this.emit(h.VIDEO_CREATED,this,T,P),this.frameReady||(this.frameReady=!0,this.emit(h.VIDEO_PLAY,this))),this._playingMarker?A>=this._markerOut&&(m.loop?(m.currentTime=this._markerIn,this.emit(h.VIDEO_LOOP,this)):(this.stop(!1),this.emit(h.VIDEO_COMPLETE,this))):A<this._lastUpdate&&this.emit(h.VIDEO_LOOP,this),this._lastUpdate=A,this._getFrame?(this.removeEventHandlers(),m.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(v,g,m){g===void 0&&(g=-1),m===void 0&&(m=o.MAX_SAFE_INTEGER);var T=this.video;return!T||this.isPlaying()?(T||console.warn("Video not loaded"),this):(v===void 0&&(v=T.loop),T.loop=v,this._markerIn=g,this._markerOut=m,this._playingMarker=g>-1&&m>g&&m<o.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=T.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var v=this.video;return!v||this.isPlaying()?(v||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=v.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var v=this.video;v&&(v.addEventListener("error",this._loadCallbackHandler),v.addEventListener("abort",this._loadCallbackHandler),v.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var v=this.video;v&&(v.removeEventListener("error",this._loadCallbackHandler),v.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var v=this.video;if(v){var g=this._callbacks;for(var m in g)v.addEventListener(m,g[m])}},removeEventHandlers:function(){var v=this.video;if(v){var g=this._callbacks;for(var m in g)v.removeEventListener(m,g[m])}},createPlayPromise:function(v){v===void 0&&(v=!0);var g=this.video,m=g.play();if(m!==void 0){var T=this.playSuccess.bind(this),P=this.playError.bind(this);if(!v){var M=this;P=function(){M.failedPlayAttempts++}}m.then(T).catch(P)}else g.addEventListener("playing",this._callbacks.legacy),v||this.failedPlayAttempts++},addMarker:function(v,g,m){return!isNaN(g)&&g>=0&&!isNaN(m)&&m>g&&(this.markers[v]=[g,m]),this},playMarker:function(v,g){var m=this.markers[v];return m&&this.play(g,m[0],m[1]),this},removeMarker:function(v){return delete this.markers[v],this},snapshot:function(v,g){return v===void 0&&(v=this.width),g===void 0&&(g=this.height),this.snapshotArea(0,0,this.width,this.height,v,g)},snapshotArea:function(v,g,m,T,P,M){v===void 0&&(v=0),g===void 0&&(g=0),m===void 0&&(m=this.width),T===void 0&&(T=this.height),P===void 0&&(P=m),M===void 0&&(M=T);var b=this.video,R=this.snapshotTexture;return R?(R.setSize(P,M),b&&R.context.drawImage(b,v,g,m,T,0,0,P,M)):(R=this.scene.sys.textures.createCanvas(r(),P,M),this.snapshotTexture=R,b&&R.context.drawImage(b,v,g,m,T,0,0,P,M)),R.update()},saveSnapshotTexture:function(v){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,v):this.snapshotTexture=this.scene.sys.textures.createCanvas(v,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(h.VIDEO_UNLOCKED,this));var v=this.scene.sys.sound;v&&v.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(v){var g=v.name;g==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(h.VIDEO_LOCKED,this)):g==="NotSupportedError"?(this.stop(!1),this.emit(h.VIDEO_UNSUPPORTED,this,v)):(this.stop(!1),this.emit(h.VIDEO_ERROR,this,v))},legacyPlayHandler:function(){var v=this.video;v&&(this.playSuccess(),v.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(h.VIDEO_PLAYING,this)},loadErrorHandler:function(v){this.stop(!1),this.emit(h.VIDEO_ERROR,this,v)},metadataHandler:function(v){this.emit(h.VIDEO_METADATA,this,v)},setSizeToFrame:function(v){v||(v=this.frame),this.width=v.realWidth,this.height=v.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var g=this.input;return g&&!g.customHitArea&&(g.hitArea.width=this.width,g.hitArea.height=this.height),this},stalledHandler:function(v){this.isStalled=!0,this.emit(h.VIDEO_STALLED,this,v)},completeHandler:function(){this._playCalled=!1,this.emit(h.VIDEO_COMPLETE,this)},preUpdate:function(v,g){var m=this.video;!m||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=g,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(v){var g=this.video;if(g){var m=g.duration;if(m!==1/0&&!isNaN(m)){var T=m*v;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(v){var g=this.video;if(g){if(typeof v=="string"){var m=v[0],T=parseFloat(v.substr(1));m==="+"?v=g.currentTime+T:m==="-"&&(v=g.currentTime-T)}g.currentTime=v}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(h.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(h.VIDEO_SEEKED,this)},getProgress:function(){var v=this.video;if(v){var g=v.duration;if(g!==1/0&&!isNaN(g))return v.currentTime/g}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(v){v===void 0&&(v=!0),this._codeMuted=v;var g=this.video;return g&&(g.muted=this._systemMuted?!0:v),this},isMuted:function(){return this._codeMuted},globalMute:function(v,g){this._systemMuted=g;var m=this.video;m&&(m.muted=this._codeMuted?!0:g)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(v){v===void 0&&(v=!0);var g=this.video;return this._codePaused=v,g&&!g.ended&&(v?g.paused||(this.removeEventHandlers(),g.pause()):v||(this._playCalled?g.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(v){return v===void 0&&(v=1),this.video&&(this.video.volume=c(v,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(v){return this.video&&(this.video.playbackRate=v),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(v){return v===void 0&&(v=!0),this.video&&(this.video.loop=v),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(v,g){return g===void 0&&(g=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,v),this.videoTextureSource.setFlipY(g)),this._key=v,this.flipY=g,!!this.videoTexture},stop:function(v){v===void 0&&(v=!0);var g=this.video;return g&&(this.removeEventHandlers(),g.cancelVideoFrameCallback(this._rfvCallbackId),g.pause()),this.retry=0,this._playCalled=!1,v&&this.emit(h.VIDEO_STOP,this),this},removeVideoElement:function(){var v=this.video;if(v){for(v.parentNode&&v.parentNode.removeChild(v);v.hasChildNodes();)v.removeChild(v.firstChild);v.removeAttribute("autoplay"),v.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var v=this.scene.sys.game.events;v.off(l.PAUSE,this.globalPause,this),v.off(l.RESUME,this.globalResume,this);var g=this.scene.sys.sound;g&&g.off(f.GLOBAL_MUTE,this.globalMute,this)}});S.exports=p},58352:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){c.videoTexture&&(y.addToRenderList(c),s.batchSprite(c,c.frame,y,u))};S.exports=w},11511:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25305),y=s(44603),u=s(23568),h=s(18471);y.register("video",function(l,n){l===void 0&&(l={});var o=u(l,"key",null),f=new h(this.scene,0,0,o);return n!==void 0&&(l.add=n),c(this.scene,f,l),f})},89025:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(18471),y=s(39429);y.register("video",function(u,h,l){return this.displayList.add(new c(this.scene,u,h,l))})},10247:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(29849),u=s(58352),S.exports={renderWebGL:y,renderCanvas:u}},29849:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){c.videoTexture&&(y.addToRenderList(c),c.pipeline.batchSprite(c,y,u))};S.exports=w},41481:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(10312),y=s(96503),u=s(87902),h=s(83419),l=s(31401),n=s(95643),o=s(87841),f=s(37303),r=new h({Extends:n,Mixins:[l.Depth,l.GetBounds,l.Origin,l.Transform,l.ScrollFactor,l.Visible],initialize:function(p,v,g,m,T){m===void 0&&(m=1),T===void 0&&(T=m),n.call(this,p,"Zone"),this.setPosition(v,g),this.width=m,this.height=T,this.blendMode=c.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(d){this.scaleX=d/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(d){this.scaleY=d/this.height}},setSize:function(d,p,v){v===void 0&&(v=!0),this.width=d,this.height=p,this.updateDisplayOrigin();var g=this.input;return v&&g&&!g.customHitArea&&(g.hitArea.width=d,g.hitArea.height=p),this},setDisplaySize:function(d,p){return this.displayWidth=d,this.displayHeight=p,this},setCircleDropZone:function(d){return this.setDropZone(new y(0,0,d),u)},setRectangleDropZone:function(d,p){return this.setDropZone(new o(0,0,d,p),f)},setDropZone:function(d,p){return this.input||this.setInteractive(d,p,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(d,p,v){v.addToRenderList(p)},renderWebGL:function(d,p,v){v.addToRenderList(p)}});S.exports=r},95261:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(44603),y=s(23568),u=s(41481);c.register("zone",function(h){var l=y(h,"x",0),n=y(h,"y",0),o=y(h,"width",1),f=y(h,"height",o);return new u(this.scene,l,n,o,f)})},84175:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(41481),y=s(39429);y.register("zone",function(u,h,l,n){return this.displayList.add(new c(this.scene,u,h,l,n))})},95166:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.radius>0?Math.PI*s.radius*s.radius:0};S.exports=w},96503:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(87902),u=s(26241),h=s(79124),l=s(23777),n=s(28176),o=new c({initialize:function(r,d,p){r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p=0),this.type=l.CIRCLE,this.x=r,this.y=d,this._radius=p,this._diameter=p*2},contains:function(f,r){return y(this,f,r)},getPoint:function(f,r){return u(this,f,r)},getPoints:function(f,r,d){return h(this,f,r,d)},getRandomPoint:function(f){return n(this,f)},setTo:function(f,r,d){return this.x=f,this.y=r,this._radius=d,this._diameter=d*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(f,r){return r===void 0&&(r=f),this.x=f,this.y=r,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(f){this._radius=f,this._diameter=f*2}},diameter:{get:function(){return this._diameter},set:function(f){this._diameter=f,this._radius=f*.5}},left:{get:function(){return this.x-this._radius},set:function(f){this.x=f+this._radius}},right:{get:function(){return this.x+this._radius},set:function(f){this.x=f-this._radius}},top:{get:function(){return this.y-this._radius},set:function(f){this.y=f+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(f){this.y=f-this._radius}}});S.exports=o},71562:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return 2*(Math.PI*s.radius)};S.exports=w},92110:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h,l){return l===void 0&&(l=new c),l.x=u.x+u.radius*Math.cos(h),l.y=u.y+u.radius*Math.sin(h),l};S.exports=y},42250:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(96503),y=function(u){return new c(u.x,u.y,u.radius)};S.exports=y},87902:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){if(s.radius>0&&c>=s.left&&c<=s.right&&y>=s.top&&y<=s.bottom){var u=(s.x-c)*(s.x-c),h=(s.y-y)*(s.y-y);return u+h<=s.radius*s.radius}else return!1};S.exports=w},5698:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87902),y=function(u,h){return c(u,h.x,h.y)};S.exports=y},70588:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87902),y=function(u,h){return c(u,h.x,h.y)&&c(u,h.right,h.y)&&c(u,h.x,h.bottom)&&c(u,h.right,h.bottom)};S.exports=y},26394:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c.setTo(s.x,s.y,s.radius)};S.exports=w},76278:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.x===c.x&&s.y===c.y&&s.radius===c.radius};S.exports=w},2074:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87841),y=function(u,h){return h===void 0&&(h=new c),h.x=u.left,h.y=u.top,h.width=u.diameter,h.height=u.diameter,h};S.exports=y},26241:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(92110),y=s(62945),u=s(36383),h=s(2141),l=function(n,o,f){f===void 0&&(f=new h);var r=y(o,0,u.PI2);return c(n,r,f)};S.exports=l},79124:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(71562),y=s(92110),u=s(62945),h=s(36383),l=function(n,o,f,r){r===void 0&&(r=[]),!o&&f>0&&(o=c(n)/f);for(var d=0;d<o;d++){var p=u(d/o,0,h.PI2);r.push(y(n,p))}return r};S.exports=l},50884:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return s.x+=c,s.y+=y,s};S.exports=w},39212:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.x+=c.x,s.y+=c.y,s};S.exports=w},28176:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h){h===void 0&&(h=new c);var l=2*Math.PI*Math.random(),n=Math.random()+Math.random(),o=n>1?2-n:n,f=o*Math.cos(l),r=o*Math.sin(l);return h.x=u.x+f*u.radius,h.y=u.y+r*u.radius,h};S.exports=y},88911:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(96503);c.Area=s(95166),c.Circumference=s(71562),c.CircumferencePoint=s(92110),c.Clone=s(42250),c.Contains=s(87902),c.ContainsPoint=s(5698),c.ContainsRect=s(70588),c.CopyFrom=s(26394),c.Equals=s(76278),c.GetBounds=s(2074),c.GetPoint=s(26241),c.GetPoints=s(79124),c.Offset=s(50884),c.OffsetPoint=s(39212),c.Random=s(28176),S.exports=c},23777:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};S.exports=w},78874:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.isEmpty()?0:s.getMajorRadius()*s.getMinorRadius()*Math.PI};S.exports=w},92990:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c=s.width/2,y=s.height/2,u=Math.pow(c-y,2)/Math.pow(c+y,2);return Math.PI*(c+y)*(1+3*u/(10+Math.sqrt(4-3*u)))};S.exports=w},79522:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h,l){l===void 0&&(l=new c);var n=u.width/2,o=u.height/2;return l.x=u.x+n*Math.cos(h),l.y=u.y+o*Math.sin(h),l};S.exports=y},58102:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(8497),y=function(u){return new c(u.x,u.y,u.width,u.height)};S.exports=y},81154:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){if(s.width<=0||s.height<=0)return!1;var u=(c-s.x)/s.width,h=(y-s.y)/s.height;return u*=u,h*=h,u+h<.25};S.exports=w},46662:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(81154),y=function(u,h){return c(u,h.x,h.y)};S.exports=y},1632:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(81154),y=function(u,h){return c(u,h.x,h.y)&&c(u,h.right,h.y)&&c(u,h.x,h.bottom)&&c(u,h.right,h.bottom)};S.exports=y},65534:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c.setTo(s.x,s.y,s.width,s.height)};S.exports=w},8497:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(81154),u=s(90549),h=s(48320),l=s(23777),n=s(24820),o=new c({initialize:function(r,d,p,v){r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p=0),v===void 0&&(v=0),this.type=l.ELLIPSE,this.x=r,this.y=d,this.width=p,this.height=v},contains:function(f,r){return y(this,f,r)},getPoint:function(f,r){return u(this,f,r)},getPoints:function(f,r,d){return h(this,f,r,d)},getRandomPoint:function(f){return n(this,f)},setTo:function(f,r,d,p){return this.x=f,this.y=r,this.width=d,this.height=p,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(f,r){return r===void 0&&(r=f),this.x=f,this.y=r,this},setSize:function(f,r){return r===void 0&&(r=f),this.width=f,this.height=r,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(f){this.x=f+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(f){this.x=f-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(f){this.y=f+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(f){this.y=f-this.height/2}}});S.exports=o},36146:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.x===c.x&&s.y===c.y&&s.width===c.width&&s.height===c.height};S.exports=w},23694:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87841),y=function(u,h){return h===void 0&&(h=new c),h.x=u.left,h.y=u.top,h.width=u.width,h.height=u.height,h};S.exports=y},90549:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(79522),y=s(62945),u=s(36383),h=s(2141),l=function(n,o,f){f===void 0&&(f=new h);var r=y(o,0,u.PI2);return c(n,r,f)};S.exports=l},48320:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(92990),y=s(79522),u=s(62945),h=s(36383),l=function(n,o,f,r){r===void 0&&(r=[]),!o&&f>0&&(o=c(n)/f);for(var d=0;d<o;d++){var p=u(d/o,0,h.PI2);r.push(y(n,p))}return r};S.exports=l},73424:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return s.x+=c,s.y+=y,s};S.exports=w},44808:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.x+=c.x,s.y+=c.y,s};S.exports=w},24820:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h){h===void 0&&(h=new c);var l=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return h.x=u.x+n*Math.cos(l)*u.width/2,h.y=u.y+n*Math.sin(l)*u.height/2,h};S.exports=y},49203:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(8497);c.Area=s(78874),c.Circumference=s(92990),c.CircumferencePoint=s(79522),c.Clone=s(58102),c.Contains=s(81154),c.ContainsPoint=s(46662),c.ContainsRect=s(1632),c.CopyFrom=s(65534),c.Equals=s(36146),c.GetBounds=s(23694),c.GetPoint=s(90549),c.GetPoints=s(48320),c.Offset=s(73424),c.OffsetPoint=s(44808),c.Random=s(24820),S.exports=c},55738:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(23777),y=s(79291),u={Circle:s(88911),Ellipse:s(49203),Intersects:s(91865),Line:s(2529),Mesh:s(73090),Point:s(43711),Polygon:s(58423),Rectangle:s(93232),Triangle:s(84435)};u=y(!1,u,c),S.exports=u},2044:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(20339),y=function(u,h){return c(u.x,u.y,h.x,h.y)<=u.radius+h.radius};S.exports=y},81491:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=c.width/2,u=c.height/2,h=Math.abs(s.x-c.x-y),l=Math.abs(s.y-c.y-u),n=y+s.radius,o=u+s.radius;if(h>n||l>o)return!1;if(h<=y||l<=u)return!0;var f=h-y,r=l-u,d=f*f,p=r*r,v=s.radius*s.radius;return d+p<=v};S.exports=w},63376:(S,w,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=s(2044),u=function(h,l,n){if(n===void 0&&(n=[]),y(h,l)){var o=h.x,f=h.y,r=h.radius,d=l.x,p=l.y,v=l.radius,g,m,T,P,M;if(f===p)M=(v*v-r*r-d*d+o*o)/(2*(o-d)),g=1,m=-2*p,T=d*d+M*M-2*d*M+p*p-v*v,P=m*m-4*g*T,P===0?n.push(new c(M,-m/(2*g))):P>0&&(n.push(new c(M,(-m+Math.sqrt(P))/(2*g))),n.push(new c(M,(-m-Math.sqrt(P))/(2*g))));else{var b=(o-d)/(f-p),R=(v*v-r*r-d*d+o*o-p*p+f*f)/(2*(f-p));g=b*b+1,m=2*f*b-2*R*b-2*o,T=o*o+f*f+R*R-r*r-2*f*R,P=m*m-4*g*T,P===0?(M=-m/(2*g),n.push(new c(M,R-M*b))):P>0&&(M=(-m+Math.sqrt(P))/(2*g),n.push(new c(M,R-M*b)),M=(-m-Math.sqrt(P))/(2*g),n.push(new c(M,R-M*b)))}}return n};S.exports=u},97439:(S,w,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(4042),y=s(81491),u=function(h,l,n){if(n===void 0&&(n=[]),y(h,l)){var o=l.getLineA(),f=l.getLineB(),r=l.getLineC(),d=l.getLineD();c(o,h,n),c(f,h,n),c(r,h,n),c(d,h,n)}return n};S.exports=u},4042:(S,w,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=s(80462),u=function(h,l,n){if(n===void 0&&(n=[]),y(h,l)){var o=h.x1,f=h.y1,r=h.x2,d=h.y2,p=l.x,v=l.y,g=l.radius,m=r-o,T=d-f,P=o-p,M=f-v,b=m*m+T*T,R=2*(m*P+T*M),A=P*P+M*M-g*g,D=R*R-4*b*A,G,F;if(D===0){var B=-R/(2*b);G=o+B*m,F=f+B*T,B>=0&&B<=1&&n.push(new c(G,F))}else if(D>0){var N=(-R-Math.sqrt(D))/(2*b);G=o+N*m,F=f+N*T,N>=0&&N<=1&&n.push(new c(G,F));var z=(-R+Math.sqrt(D))/(2*b);G=o+z*m,F=f+z*T,z>=0&&z<=1&&n.push(new c(G,F))}}return n};S.exports=u},36100:(S,w,s)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25836),y=function(u,h,l,n){l===void 0&&(l=!1);var o=u.x1,f=u.y1,r=u.x2,d=u.y2,p=h.x1,v=h.y1,g=h.x2,m=h.y2,T=r-o,P=d-f,M=g-p,b=m-v,R=T*b-P*M;if(R===0)return null;var A,D,G;if(l){if(A=(T*(v-f)+P*(o-p))/(M*P-b*T),T!==0)D=(p+M*A-o)/T;else if(P!==0)D=(v+b*A-f)/P;else return null;if(D<0||A<0||A>1)return null;G=D}else{if(A=((p-o)*b-(v-f)*M)/R,D=((f-v)*T-(o-p)*P)/R,A<0||A>1||D<0||D>1)return null;G=A}return n===void 0&&(n=new c),n.set(o+T*G,f+P*G,G)};S.exports=y},3073:(S,w,s)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(36100),y=s(23031),u=s(25836),h=new y,l=new u,n=function(o,f,r,d){r===void 0&&(r=!1),d===void 0&&(d=new u);var p=!1;d.set(),l.set();for(var v=f[f.length-1],g=0;g<f.length;g++){var m=f[g];h.setTo(v.x,v.y,m.x,m.y),v=m,c(o,h,r,l)&&(!p||l.z<d.z)&&(d.copy(l),p=!0)}return p?d:null};S.exports=n},56362:(S,w,s)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25836),y=s(61369),u=s(3073),h=new c,l=function(n,o,f,r){r===void 0&&(r=new y),Array.isArray(o)||(o=[o]);var d=!1;r.set(),h.set();for(var p=0;p<o.length;p++)u(n,o[p].points,f,h)&&(!d||h.z<r.z)&&(r.set(h.x,h.y,h.z,p),d=!0);return d?r:null};S.exports=l},60646:(S,w,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=s(76112),u=s(92773),h=function(l,n,o){if(o===void 0&&(o=[]),u(l,n))for(var f=n.getLineA(),r=n.getLineB(),d=n.getLineC(),p=n.getLineD(),v=[new c,new c,new c,new c],g=[y(f,l,v[0]),y(r,l,v[1]),y(d,l,v[2]),y(p,l,v[3])],m=0;m<4;m++)g[m]&&o.push(v[m]);return o};S.exports=h},71147:(S,w,s)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(61369),y=s(56362),u=s(23031),h=new u;function l(f,r,d,p,v){var g=Math.cos(f),m=Math.sin(f);h.setTo(r,d,r+g,d+m);var T=y(h,p,!0);T&&v.push(new c(T.x,T.y,f,T.w))}function n(f,r){return f.z-r.z}var o=function(f,r,d){Array.isArray(d)||(d=[d]);for(var p=[],v=[],g=0;g<d.length;g++)for(var m=d[g].points,T=0;T<m.length;T++){var P=Math.atan2(m[T].y-r,m[T].x-f);v.indexOf(P)===-1&&(l(P,f,r,d,p),l(P-1e-5,f,r,d,p),l(P+1e-5,f,r,d,p),v.push(P))}return p.sort(n)};S.exports=o},68389:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87841),y=s(59996),u=function(h,l,n){return n===void 0&&(n=new c),y(h,l)&&(n.x=Math.max(h.x,l.x),n.y=Math.max(h.y,l.y),n.width=Math.min(h.right,l.right)-n.x,n.height=Math.min(h.bottom,l.bottom)-n.y),n};S.exports=u},52784:(S,w,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(60646),y=s(59996),u=function(h,l,n){if(n===void 0&&(n=[]),y(h,l)){var o=h.getLineA(),f=h.getLineB(),r=h.getLineC(),d=h.getLineD();c(o,l,n),c(f,l,n),c(r,l,n),c(d,l,n)}return n};S.exports=u},26341:(S,w,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(89265),y=s(60646),u=function(h,l,n){if(n===void 0&&(n=[]),c(h,l)){var o=l.getLineA(),f=l.getLineB(),r=l.getLineC();y(o,h,n),y(f,h,n),y(r,h,n)}return n};S.exports=u},38720:(S,w,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(4042),y=s(67636),u=function(h,l,n){if(n===void 0&&(n=[]),y(h,l)){var o=h.getLineA(),f=h.getLineB(),r=h.getLineC();c(o,l,n),c(f,l,n),c(r,l,n)}return n};S.exports=u},13882:(S,w,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=s(2822),u=s(76112),h=function(l,n,o){if(o===void 0&&(o=[]),y(l,n))for(var f=l.getLineA(),r=l.getLineB(),d=l.getLineC(),p=[new c,new c,new c],v=[u(f,n,p[0]),u(r,n,p[1]),u(d,n,p[2])],g=0;g<3;g++)v[g]&&o.push(p[g]);return o};S.exports=h},75636:(S,w,s)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(82944),y=s(13882),u=function(h,l,n){if(n===void 0&&(n=[]),c(h,l)){var o=l.getLineA(),f=l.getLineB(),r=l.getLineC();y(h,o,n),y(h,f,n),y(h,r,n)}return n};S.exports=u},80462:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87902),y=s(2141),u=new y,h=function(l,n,o){if(o===void 0&&(o=u),c(n,l.x1,l.y1))return o.x=l.x1,o.y=l.y1,!0;if(c(n,l.x2,l.y2))return o.x=l.x2,o.y=l.y2,!0;var f=l.x2-l.x1,r=l.y2-l.y1,d=n.x-l.x1,p=n.y-l.y1,v=f*f+r*r,g=f,m=r;if(v>0){var T=(d*f+p*r)/v;g*=T,m*=T}o.x=l.x1+g,o.y=l.y1+m;var P=g*g+m*m;return P<=v&&g*f+m*r>=0&&c(n,o.x,o.y)};S.exports=h},76112:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=s.x1,h=s.y1,l=s.x2,n=s.y2,o=c.x1,f=c.y1,r=c.x2,d=c.y2;if(u===l&&h===n||o===r&&f===d)return!1;var p=(d-f)*(l-u)-(r-o)*(n-h);if(p===0)return!1;var v=((r-o)*(h-f)-(d-f)*(u-o))/p,g=((l-u)*(h-f)-(n-h)*(u-o))/p;return v<0||v>1||g<0||g>1?!1:(y&&(y.x=u+v*(l-u),y.y=h+v*(n-h)),!0)};S.exports=w},92773:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=s.x1,u=s.y1,h=s.x2,l=s.y2,n=c.x,o=c.y,f=c.right,r=c.bottom,d=0;if(y>=n&&y<=f&&u>=o&&u<=r||h>=n&&h<=f&&l>=o&&l<=r)return!0;if(y<n&&h>=n){if(d=u+(l-u)*(n-y)/(h-y),d>o&&d<=r)return!0}else if(y>f&&h<=f&&(d=u+(l-u)*(f-y)/(h-y),d>=o&&d<=r))return!0;if(u<o&&l>=o){if(d=y+(h-y)*(o-u)/(l-u),d>=n&&d<=f)return!0}else if(u>r&&l<=r&&(d=y+(h-y)*(r-u)/(l-u),d>=n&&d<=f))return!0;return!1};S.exports=w},16204:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){y===void 0&&(y=1);var u=c.x1,h=c.y1,l=c.x2,n=c.y2,o=s.x,f=s.y,r=(l-u)*(l-u)+(n-h)*(n-h);if(r===0)return!1;var d=((o-u)*(l-u)+(f-h)*(n-h))/r;if(d<0)return Math.sqrt((u-o)*(u-o)+(h-f)*(h-f))<=y;if(d>=0&&d<=1){var p=((h-f)*(l-u)-(u-o)*(n-h))/r;return Math.abs(p)*Math.sqrt(r)<=y}else return Math.sqrt((l-o)*(l-o)+(n-f)*(n-f))<=y};S.exports=w},14199:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(16204),y=function(u,h){if(!c(u,h))return!1;var l=Math.min(h.x1,h.x2),n=Math.max(h.x1,h.x2),o=Math.min(h.y1,h.y2),f=Math.max(h.y1,h.y2);return u.x>=l&&u.x<=n&&u.y>=o&&u.y<=f};S.exports=y},59996:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.width<=0||s.height<=0||c.width<=0||c.height<=0?!1:!(s.right<c.x||s.bottom<c.y||s.x>c.right||s.y>c.bottom)};S.exports=w},89265:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(76112),y=s(37303),u=s(48653),h=s(77493),l=function(n,o){if(o.left>n.right||o.right<n.left||o.top>n.bottom||o.bottom<n.top)return!1;var f=o.getLineA(),r=o.getLineB(),d=o.getLineC();if(y(n,f.x1,f.y1)||y(n,f.x2,f.y2)||y(n,r.x1,r.y1)||y(n,r.x2,r.y2)||y(n,d.x1,d.y1)||y(n,d.x2,d.y2))return!0;var p=n.getLineA(),v=n.getLineB(),g=n.getLineC(),m=n.getLineD();if(c(f,p)||c(f,v)||c(f,g)||c(f,m)||c(r,p)||c(r,v)||c(r,g)||c(r,m)||c(d,p)||c(d,v)||c(d,g)||c(d,m))return!0;var T=h(n),P=u(o,T,!0);return P.length>0};S.exports=l},84411:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h,l){return l===void 0&&(l=0),!(c>s.right+l||y<s.left-l||u>s.bottom+l||h<s.top-l)};S.exports=w},67636:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(80462),y=s(10690),u=function(h,l){return h.left>l.right||h.right<l.left||h.top>l.bottom||h.bottom<l.top?!1:!!(y(h,l.x,l.y)||c(h.getLineA(),l)||c(h.getLineB(),l)||c(h.getLineC(),l))};S.exports=u},2822:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(76112),y=function(u,h){return!!(u.contains(h.x1,h.y1)||u.contains(h.x2,h.y2)||c(u.getLineA(),h)||c(u.getLineB(),h)||c(u.getLineC(),h))};S.exports=y},82944:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(48653),y=s(71694),u=s(76112),h=function(l,n){if(l.left>n.right||l.right<n.left||l.top>n.bottom||l.bottom<n.top)return!1;var o=l.getLineA(),f=l.getLineB(),r=l.getLineC(),d=n.getLineA(),p=n.getLineB(),v=n.getLineC();if(u(o,d)||u(o,p)||u(o,v)||u(f,d)||u(f,p)||u(f,v)||u(r,d)||u(r,p)||u(r,v))return!0;var g=y(l),m=c(n,g,!0);return m.length>0||(g=y(n),m=c(l,g,!0),m.length>0)};S.exports=h},91865:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={CircleToCircle:s(2044),CircleToRectangle:s(81491),GetCircleToCircle:s(63376),GetCircleToRectangle:s(97439),GetLineToCircle:s(4042),GetLineToLine:s(36100),GetLineToPoints:s(3073),GetLineToPolygon:s(56362),GetLineToRectangle:s(60646),GetRaysFromPointToPolygon:s(71147),GetRectangleIntersection:s(68389),GetRectangleToRectangle:s(52784),GetRectangleToTriangle:s(26341),GetTriangleToCircle:s(38720),GetTriangleToLine:s(13882),GetTriangleToTriangle:s(75636),LineToCircle:s(80462),LineToLine:s(76112),LineToRectangle:s(92773),PointToLine:s(16204),PointToLineSegment:s(14199),RectangleToRectangle:s(59996),RectangleToTriangle:s(89265),RectangleToValues:s(84411),TriangleToCircle:s(67636),TriangleToLine:s(2822),TriangleToTriangle:s(82944)}},91938:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return Math.atan2(s.y2-s.y1,s.x2-s.x1)};S.exports=w},84993:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){c===void 0&&(c=1),y===void 0&&(y=[]);var u=Math.round(s.x1),h=Math.round(s.y1),l=Math.round(s.x2),n=Math.round(s.y2),o=Math.abs(l-u),f=Math.abs(n-h),r=u<l?1:-1,d=h<n?1:-1,p=o-f;y.push({x:u,y:h});for(var v=1;!(u===l&&h===n);){var g=p<<1;g>-f&&(p-=f,u+=r),g<o&&(p+=o,h+=d),v%c===0&&y.push({x:u,y:h}),v++}return y};S.exports=w},36469:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=c-(s.x1+s.x2)/2,h=y-(s.y1+s.y2)/2;return s.x1+=u,s.y1+=h,s.x2+=u,s.y2+=h,s};S.exports=w},31116:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(23031),y=function(u){return new c(u.x1,u.y1,u.x2,u.y2)};S.exports=y},59944:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c.setTo(s.x1,s.y1,s.x2,s.y2)};S.exports=w},59220:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.x1===c.x1&&s.y1===c.y1&&s.x2===c.x2&&s.y2===c.y2};S.exports=w},78177:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35001),y=function(u,h,l){l===void 0&&(l=h);var n=c(u),o=u.x2-u.x1,f=u.y2-u.y1;return h&&(u.x1=u.x1-o/n*h,u.y1=u.y1-f/n*h),l&&(u.x2=u.x2+o/n*l,u.y2=u.y2+f/n*l),u};S.exports=y},26708:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(52816),y=s(6113),u=s(2141),h=function(l,n,o,f,r){f===void 0&&(f=0),r===void 0&&(r=[]);var d=[],p=l.x1,v=l.y1,g=l.x2-p,m=l.y2-v,T=y(n,r),P,M,b=o-1;for(P=0;P<b;P++)M=T(P/b),d.push(new u(p+g*M,v+m*M));if(M=T(1),d.push(new u(p+g*M,v+m*M)),f>0){var R=d[0],A=[R];for(P=1;P<d.length-1;P++){var D=d[P];c(R,D)>=f&&(A.push(D),R=D)}var G=d[d.length-1];return c(R,G)<f&&A.pop(),A.push(G),A}else return d};S.exports=h},32125:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h){return h===void 0&&(h=new c),h.x=(u.x1+u.x2)/2,h.y=(u.y1+u.y2)/2,h};S.exports=y},99569:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h,l){l===void 0&&(l=new c);var n=u.x1,o=u.y1,f=u.x2,r=u.y2,d=(f-n)*(f-n)+(r-o)*(r-o);if(d===0)return l;var p=((h.x-n)*(f-n)+(h.y-o)*(r-o))/d;return l.x=n+p*(f-n),l.y=o+p*(r-o),l};S.exports=y},34638:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(36383),y=s(91938),u=s(2141),h=function(l,n){n===void 0&&(n=new u);var o=y(l)-c.TAU;return n.x=Math.cos(o),n.y=Math.sin(o),n};S.exports=h},13151:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h,l){return l===void 0&&(l=new c),l.x=u.x1+(u.x2-u.x1)*h,l.y=u.y1+(u.y2-u.y1)*h,l};S.exports=y},15258:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35001),y=s(2141),u=function(h,l,n,o){o===void 0&&(o=[]),!l&&n>0&&(l=c(h)/n);for(var f=h.x1,r=h.y1,d=h.x2,p=h.y2,v=0;v<l;v++){var g=v/l,m=f+(d-f)*g,T=r+(p-r)*g;o.push(new y(m,T))}return o};S.exports=u},26408:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=s.x1,u=s.y1,h=s.x2,l=s.y2,n=(h-y)*(h-y)+(l-u)*(l-u);if(n===0)return!1;var o=((u-c.y)*(h-y)-(y-c.x)*(l-u))/n;return Math.abs(o)*Math.sqrt(n)};S.exports=w},98770:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return Math.abs(s.y1-s.y2)};S.exports=w},35001:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return Math.sqrt((s.x2-s.x1)*(s.x2-s.x1)+(s.y2-s.y1)*(s.y2-s.y1))};S.exports=w},23031:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(13151),u=s(15258),h=s(23777),l=s(65822),n=s(26099),o=new c({initialize:function(r,d,p,v){r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p=0),v===void 0&&(v=0),this.type=h.LINE,this.x1=r,this.y1=d,this.x2=p,this.y2=v},getPoint:function(f,r){return y(this,f,r)},getPoints:function(f,r,d){return u(this,f,r,d)},getRandomPoint:function(f){return l(this,f)},setTo:function(f,r,d,p){return f===void 0&&(f=0),r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p=0),this.x1=f,this.y1=r,this.x2=d,this.y2=p,this},setFromObjects:function(f,r){return this.x1=f.x,this.y1=f.y,this.x2=r.x,this.y2=r.y,this},getPointA:function(f){return f===void 0&&(f=new n),f.set(this.x1,this.y1),f},getPointB:function(f){return f===void 0&&(f=new n),f.set(this.x2,this.y2),f},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(f){this.x1<=this.x2?this.x1=f:this.x2=f}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(f){this.x1>this.x2?this.x1=f:this.x2=f}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(f){this.y1<=this.y2?this.y1=f:this.y2=f}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(f){this.y1>this.y2?this.y1=f:this.y2=f}}});S.exports=o},64795:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(36383),y=s(15994),u=s(91938),h=function(l){var n=u(l)-c.TAU;return y(n,-Math.PI,Math.PI)};S.exports=h},52616:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(36383),y=s(91938),u=function(h){return Math.cos(y(h)-c.TAU)};S.exports=u},87231:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(36383),y=s(91938),u=function(h){return Math.sin(y(h)-c.TAU)};S.exports=u},89662:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return s.x1+=c,s.y1+=y,s.x2+=c,s.y2+=y,s};S.exports=w},71165:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return-((s.x2-s.x1)/(s.y2-s.y1))};S.exports=w},65822:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h){h===void 0&&(h=new c);var l=Math.random();return h.x=u.x1+l*(u.x2-u.x1),h.y=u.y1+l*(u.y2-u.y1),h};S.exports=y},69777:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91938),y=s(64795),u=function(h,l){return 2*y(l)-Math.PI-c(h)};S.exports=u},39706:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(64400),y=function(u,h){var l=(u.x1+u.x2)/2,n=(u.y1+u.y2)/2;return c(u,l,n,h)};S.exports=y},82585:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(64400),y=function(u,h,l){return c(u,h.x,h.y,l)};S.exports=y},64400:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){var h=Math.cos(u),l=Math.sin(u),n=s.x1-c,o=s.y1-y;return s.x1=n*h-o*l+c,s.y1=n*l+o*h+y,n=s.x2-c,o=s.y2-y,s.x2=n*h-o*l+c,s.y2=n*l+o*h+y,s};S.exports=w},62377:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h){return s.x1=c,s.y1=y,s.x2=c+Math.cos(u)*h,s.y2=y+Math.sin(u)*h,s};S.exports=w},71366:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return(s.y2-s.y1)/(s.x2-s.x1)};S.exports=w},10809:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return Math.abs(s.x1-s.x2)};S.exports=w},2529:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(23031);c.Angle=s(91938),c.BresenhamPoints=s(84993),c.CenterOn=s(36469),c.Clone=s(31116),c.CopyFrom=s(59944),c.Equals=s(59220),c.Extend=s(78177),c.GetEasedPoints=s(26708),c.GetMidPoint=s(32125),c.GetNearestPoint=s(99569),c.GetNormal=s(34638),c.GetPoint=s(13151),c.GetPoints=s(15258),c.GetShortestDistance=s(26408),c.Height=s(98770),c.Length=s(35001),c.NormalAngle=s(64795),c.NormalX=s(52616),c.NormalY=s(87231),c.Offset=s(89662),c.PerpSlope=s(71165),c.Random=s(65822),c.ReflectAngle=s(69777),c.Rotate=s(39706),c.RotateAroundPoint=s(82585),c.RotateAroundXY=s(64400),c.SetToAngle=s(62377),c.Slope=s(71366),c.Width=s(10809),S.exports=c},83997:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(87841),u=s(26099);function h(n,o,f,r){var d=n-f,p=o-r,v=d*d+p*p;return Math.sqrt(v)}var l=new c({initialize:function(o,f,r){this.vertex1=o,this.vertex2=f,this.vertex3=r,this.bounds=new y,this._inCenter=new u},getInCenter:function(n){n===void 0&&(n=!0);var o=this.vertex1,f=this.vertex2,r=this.vertex3,d,p,v,g,m,T;n?(d=o.x,p=o.y,v=f.x,g=f.y,m=r.x,T=r.y):(d=o.vx,p=o.vy,v=f.vx,g=f.vy,m=r.vx,T=r.vy);var P=h(m,T,v,g),M=h(d,p,m,T),b=h(v,g,d,p),R=P+M+b;return this._inCenter.set((d*P+v*M+m*b)/R,(p*P+g*M+T*b)/R)},contains:function(n,o,f){var r=this.vertex1,d=this.vertex2,p=this.vertex3,v=r.vx,g=r.vy,m=d.vx,T=d.vy,P=p.vx,M=p.vy;if(f){var b=f.a,R=f.b,A=f.c,D=f.d,G=f.e,F=f.f;v=r.vx*b+r.vy*A+G,g=r.vx*R+r.vy*D+F,m=d.vx*b+d.vy*A+G,T=d.vx*R+d.vy*D+F,P=p.vx*b+p.vy*A+G,M=p.vx*R+p.vy*D+F}var B=P-v,N=M-g,z=m-v,$=T-g,Q=n-v,Z=o-g,tt=B*B+N*N,H=B*z+N*$,J=B*Q+N*Z,Y=z*z+$*$,_=z*Q+$*Z,U=tt*Y-H*H,et=U===0?0:1/U,nt=(Y*J-H*_)*et,rt=(tt*_-H*J)*et;return nt>=0&&rt>=0&&nt+rt<1},isCounterClockwise:function(n){var o=this.vertex1,f=this.vertex2,r=this.vertex3,d=(f.vx-o.vx)*(r.vy-o.vy)-(f.vy-o.vy)*(r.vx-o.vx);return n<=0?d>=0:d<0},load:function(n,o,f,r,d){return f=this.vertex1.load(n,o,f,r,d),f=this.vertex2.load(n,o,f,r,d),f=this.vertex3.load(n,o,f,r,d),f},transformCoordinatesLocal:function(n,o,f,r){return this.vertex1.transformCoordinatesLocal(n,o,f,r),this.vertex2.transformCoordinatesLocal(n,o,f,r),this.vertex3.transformCoordinatesLocal(n,o,f,r),this},updateBounds:function(){var n=this.vertex1,o=this.vertex2,f=this.vertex3,r=this.bounds;return r.x=Math.min(n.vx,o.vx,f.vx),r.y=Math.min(n.vy,o.vy,f.vy),r.width=Math.max(n.vx,o.vx,f.vx)-r.x,r.height=Math.max(n.vy,o.vy,f.vy)-r.y,this},isInView:function(n,o,f,r,d,p,v,g,m,T,P){this.update(r,d,p,v,g,m,T,P);var M=this.vertex1,b=this.vertex2,R=this.vertex3;if(M.ta<=0&&b.ta<=0&&R.ta<=0||o&&!this.isCounterClockwise(f))return!1;var A=this.bounds;A.x=Math.min(M.tx,b.tx,R.tx),A.y=Math.min(M.ty,b.ty,R.ty),A.width=Math.max(M.tx,b.tx,R.tx)-A.x,A.height=Math.max(M.ty,b.ty,R.ty)-A.y;var D=n.x+n.width,G=n.y+n.height;return A.width<=0||A.height<=0||n.width<=0||n.height<=0?!1:!(A.right<n.x||A.bottom<n.y||A.x>D||A.y>G)},scrollUV:function(n,o){return this.vertex1.scrollUV(n,o),this.vertex2.scrollUV(n,o),this.vertex3.scrollUV(n,o),this},scaleUV:function(n,o){return this.vertex1.scaleUV(n,o),this.vertex2.scaleUV(n,o),this.vertex3.scaleUV(n,o),this},setColor:function(n){return this.vertex1.color=n,this.vertex2.color=n,this.vertex3.color=n,this},update:function(n,o,f,r,d,p,v,g){return this.vertex1.update(o,f,r,d,p,v,g,n),this.vertex2.update(o,f,r,d,p,v,g,n),this.vertex3.update(o,f,r,d,p,v,g,n),this},translate:function(n,o){o===void 0&&(o=0);var f=this.vertex1,r=this.vertex2,d=this.vertex3;return f.x+=n,f.y+=o,r.x+=n,r.y+=o,d.x+=n,d.y+=o,this},x:{get:function(){return this.getInCenter().x},set:function(n){var o=this.getInCenter();this.translate(n-o.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(n){var o=this.getInCenter();this.translate(0,n-o.y)}},alpha:{get:function(){var n=this.vertex1,o=this.vertex2,f=this.vertex3;return(n.alpha+o.alpha+f.alpha)/3},set:function(n){this.vertex1.alpha=n,this.vertex2.alpha=n,this.vertex3.alpha=n}},depth:{get:function(){var n=this.vertex1,o=this.vertex2,f=this.vertex3;return(n.vz+o.vz+f.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});S.exports=l},48803:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83997),y=s(95540),u=s(37867),h=s(25836),l=s(39318),n=new h,o=new h,f=new u,r=function(d){var p=y(d,"mesh"),v=y(d,"texture",null),g=y(d,"frame"),m=y(d,"width",1),T=y(d,"height",m),P=y(d,"widthSegments",1),M=y(d,"heightSegments",P),b=y(d,"x",0),R=y(d,"y",0),A=y(d,"z",0),D=y(d,"rotateX",0),G=y(d,"rotateY",0),F=y(d,"rotateZ",0),B=y(d,"zIsUp",!0),N=y(d,"isOrtho",p?p.dirtyCache[11]:!1),z=y(d,"colors",[16777215]),$=y(d,"alphas",[1]),Q=y(d,"tile",!1),Z=y(d,"flipY",!1),tt=y(d,"width",null),H={faces:[],verts:[]};n.set(b,R,A),o.set(D,G,F),f.fromRotationXYTranslation(o,n,B);var J;if(!v&&p)v=p.texture,g||(J=p.frame);else if(p&&typeof v=="string")v=p.scene.sys.textures.get(v);else if(!v)return H;J||(J=v.get(g)),!tt&&N&&v&&p&&(m=J.width/p.height,T=J.height/p.height);var Y=m/2,_=T/2,U=Math.floor(P),et=Math.floor(M),nt=U+1,rt=et+1,ot=m/U,dt=T/et,vt=[],mt=[],gt,yt,St=0,Ct=1,bt=0,At=1;J&&(St=J.u0,Ct=J.u1,Z?(bt=J.v1,At=J.v0):(bt=J.v0,At=J.v1));var Lt=Ct-St,Tt=At-bt;for(yt=0;yt<rt;yt++){var Et=yt*dt-_;for(gt=0;gt<nt;gt++){var wt=gt*ot-Y;mt.push(wt,-Et);var Wt=St+Lt*(gt/U),Zt=bt+Tt*(yt/et);vt.push(Wt,Zt)}}Array.isArray(z)||(z=[z]),Array.isArray($)||($=[$]);var ue=0,Qt=0;for(yt=0;yt<et;yt++)for(gt=0;gt<U;gt++){var jt=(gt+nt*yt)*2,ve=(gt+nt*(yt+1))*2,Le=(gt+1+nt*(yt+1))*2,Kt=(gt+1+nt*yt)*2,de=z[Qt],Nt=$[ue],ge=new l(mt[jt],mt[jt+1],0,vt[jt],vt[jt+1],de,Nt).transformMat4(f),Oi=new l(mt[ve],mt[ve+1],0,vt[ve],vt[ve+1],de,Nt).transformMat4(f),os=new l(mt[Kt],mt[Kt+1],0,vt[Kt],vt[Kt+1],de,Nt).transformMat4(f),Es=new l(mt[ve],mt[ve+1],0,vt[ve],vt[ve+1],de,Nt).transformMat4(f),ws=new l(mt[Le],mt[Le+1],0,vt[Le],vt[Le+1],de,Nt).transformMat4(f),fi=new l(mt[Kt],mt[Kt+1],0,vt[Kt],vt[Kt+1],de,Nt).transformMat4(f);Q&&(ge.setUVs(St,At),Oi.setUVs(St,bt),os.setUVs(Ct,At),Es.setUVs(St,bt),ws.setUVs(Ct,bt),fi.setUVs(Ct,At)),Qt++,Qt===z.length&&(Qt=0),ue++,ue===$.length&&(ue=0),H.verts.push(ge,Oi,os,Es,ws,fi),H.faces.push(new c(ge,Oi,os),new c(Es,ws,fi))}return p&&(p.faces=p.faces.concat(H.faces),p.vertices=p.vertices.concat(H.verts)),H};S.exports=r},34684:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83997),y=s(37867),u=s(25836),h=s(39318),l=new u,n=new u,o=new y,f=function(r,d,p,v,g,m,T,P,M,b){p===void 0&&(p=1),v===void 0&&(v=0),g===void 0&&(g=0),m===void 0&&(m=0),T===void 0&&(T=0),P===void 0&&(P=0),M===void 0&&(M=0),b===void 0&&(b=!0);var R={faces:[],verts:[]},A=r.materials;l.set(v,g,m),n.set(T,P,M),o.fromRotationXYTranslation(n,l,b);for(var D=0;D<r.models.length;D++)for(var G=r.models[D],F=G.vertices,B=G.textureCoords,N=G.faces,z=0;z<N.length;z++){var $=N[z],Q=$.vertices[0],Z=$.vertices[1],tt=$.vertices[2],H=F[Q.vertexIndex],J=F[Z.vertexIndex],Y=F[tt.vertexIndex],_=Q.textureCoordsIndex,U=Z.textureCoordsIndex,et=tt.textureCoordsIndex,nt=_===-1?{u:0,v:1}:B[_],rt=U===-1?{u:0,v:0}:B[U],ot=et===-1?{u:1,v:1}:B[et],dt=16777215;$.material!==""&&A[$.material]&&(dt=A[$.material]);var vt=new h(H.x*p,H.y*p,H.z*p,nt.u,nt.v,dt).transformMat4(o),mt=new h(J.x*p,J.y*p,J.z*p,rt.u,rt.v,dt).transformMat4(o),gt=new h(Y.x*p,Y.y*p,Y.z*p,ot.u,ot.v,dt).transformMat4(o);R.verts.push(vt,mt,gt),R.faces.push(new c(vt,mt,gt))}return d&&(d.faces=d.faces.concat(R.faces),d.vertices=d.vertices.concat(R.verts)),R};S.exports=f},92515:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83997),y=s(39318),u=function(h,l,n,o,f,r,d,p){if(o===void 0&&(o=!1),r===void 0&&(r=16777215),d===void 0&&(d=1),p===void 0&&(p=!1),h.length!==l.length&&!o){console.warn("GenerateVerts: vertices and uvs count not equal");return}var v={faces:[],vertices:[]},g,m,T,P,M,b,R,A,D,G,F,B=o?3:2,N=Array.isArray(r),z=Array.isArray(d);if(Array.isArray(n)&&n.length>0)for(g=0;g<n.length;g++){var $=n[g],Q=n[g]*2,Z=n[g]*B;m=h[Z],T=h[Z+1],P=o?h[Z+2]:0,M=l[Q],b=l[Q+1],p&&(b=1-b),R=N?r[$]:r,A=z?d[$]:d,D=0,G=0,F=0,f&&(D=f[Z],G=f[Z+1],F=o?f[Z+2]:0),v.vertices.push(new y(m,T,P,M,b,R,A,D,G,F))}else{var tt=0,H=0;for(g=0;g<h.length;g+=B)m=h[g],T=h[g+1],P=o?h[g+2]:0,M=l[tt],b=l[tt+1],R=N?r[H]:r,A=z?d[H]:d,D=0,G=0,F=0,f&&(D=f[g],G=f[g+1],F=o?f[g+2]:0),v.vertices.push(new y(m,T,P,M,b,R,A,D,G,F)),tt+=2,H++}for(g=0;g<v.vertices.length;g+=3){var J=v.vertices[g],Y=v.vertices[g+1],_=v.vertices[g+2];v.faces.push(new c(J,Y,_))}return v};S.exports=u},85048:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=!0,s="untitled",c="",y="";function u(m){var T=m.indexOf("#");return T>-1?m.substring(0,T):m}function h(m){return m.models.length===0&&m.models.push({faces:[],name:s,textureCoords:[],vertexNormals:[],vertices:[]}),c="",m.models[m.models.length-1]}function l(m,T){var P=m.length>=2?m[1]:s;T.models.push({faces:[],name:P,textureCoords:[],vertexNormals:[],vertices:[]}),c=""}function n(m){m.length===2&&(c=m[1])}function o(m,T){var P=m.length,M=P>=2?parseFloat(m[1]):0,b=P>=3?parseFloat(m[2]):0,R=P>=4?parseFloat(m[3]):0;h(T).vertices.push({x:M,y:b,z:R})}function f(m,T){var P=m.length,M=P>=2?parseFloat(m[1]):0,b=P>=3?parseFloat(m[2]):0,R=P>=4?parseFloat(m[3]):0;isNaN(M)&&(M=0),isNaN(b)&&(b=0),isNaN(R)&&(R=0),w&&(b=1-b),h(T).textureCoords.push({u:M,v:b,w:R})}function r(m,T){var P=m.length,M=P>=2?parseFloat(m[1]):0,b=P>=3?parseFloat(m[2]):0,R=P>=4?parseFloat(m[3]):0;h(T).vertexNormals.push({x:M,y:b,z:R})}function d(m,T){var P=m.length-1;if(!(P<3)){for(var M={group:c,material:y,vertices:[]},b=0;b<P;b++){var R=m[b+1],A=R.split("/"),D=A.length;if(!(D<1||D>3)){var G=0,F=0,B=0;G=parseInt(A[0],10),D>1&&A[1]!==""&&(F=parseInt(A[1],10)),D>2&&(B=parseInt(A[2],10)),G!==0&&(G<0&&(G=h(T).vertices.length+1+G),F-=1,G-=1,B-=1,M.vertices.push({textureCoordsIndex:F,vertexIndex:G,vertexNormalIndex:B}))}}h(T).faces.push(M)}}function p(m,T){m.length>=2&&T.materialLibraries.push(m[1])}function v(m){m.length>=2&&(y=m[1])}var g=function(m,T){T===void 0&&(T=!0),w=T;var P={materials:{},materialLibraries:[],models:[]};c="",y="";for(var M=m.split(`
`),b=0;b<M.length;b++){var R=u(M[b]),A=R.replace(/\s\s+/g," ").trim().split(" ");switch(A[0].toLowerCase()){case"o":l(A,P);break;case"g":n(A);break;case"v":o(A,P);break;case"vt":f(A,P);break;case"vn":r(A,P);break;case"f":d(A,P);break;case"mtllib":p(A,P);break;case"usemtl":v(A);break}}return P};S.exports=g},61485:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(37589),y=function(u){for(var h={},l=u.split(`
`),n="",o=0;o<l.length;o++){var f=l[o].trim();if(!(f.indexOf("#")===0||f==="")){var r=f.replace(/\s\s+/g," ").trim().split(" ");switch(r[0].toLowerCase()){case"newmtl":{n=r[1];break}case"kd":{var d=Math.floor(r[1]*255),p=r.length>=2?Math.floor(r[2]*255):d,v=r.length>=3?Math.floor(r[3]*255):d;h[n]=c(d,p,v);break}}}}return h};S.exports=y},92570:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){var h,l;if(y===void 0&&u===void 0){var n=s.getInCenter();h=n.x,l=n.y}var o=Math.cos(c),f=Math.sin(c),r=s.vertex1,d=s.vertex2,p=s.vertex3,v=r.x-h,g=r.y-l;r.set(v*o-g*f+h,v*f+g*o+l),v=d.x-h,g=d.y-l,d.set(v*o-g*f+h,v*f+g*o+l),v=p.x-h,g=p.y-l,p.set(v*o-g*f+h,v*f+g*o+l)};S.exports=w},39318:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(70554),u=s(25836),h=new c({Extends:u,initialize:function(n,o,f,r,d,p,v,g,m,T){p===void 0&&(p=16777215),v===void 0&&(v=1),g===void 0&&(g=0),m===void 0&&(m=0),T===void 0&&(T=0),u.call(this,n,o,f),this.vx=0,this.vy=0,this.vz=0,this.nx=g,this.ny=m,this.nz=T,this.u=r,this.v=d,this.color=p,this.alpha=v,this.tx=0,this.ty=0,this.ta=0,this.tu=r,this.tv=d},setUVs:function(l,n){return this.u=l,this.v=n,this.tu=l,this.tv=n,this},scrollUV:function(l,n){return this.tu+=l,this.tv+=n,this},scaleUV:function(l,n){return this.tu=this.u*l,this.tv=this.v*n,this},transformCoordinatesLocal:function(l,n,o,f){var r=this.x,d=this.y,p=this.z,v=l.val,g=r*v[0]+d*v[4]+p*v[8]+v[12],m=r*v[1]+d*v[5]+p*v[9]+v[13],T=r*v[2]+d*v[6]+p*v[10]+v[14],P=r*v[3]+d*v[7]+p*v[11]+v[15];this.vx=g/P*n,this.vy=-(m/P)*o,f<=0?this.vz=T/P:this.vz=-(T/P)},resize:function(l,n,o,f,r,d){return this.x=l,this.y=n,this.vx=this.x*o,this.vy=-this.y*f,this.vz=0,r<.5?this.vx+=o*(.5-r):r>.5&&(this.vx-=o*(r-.5)),d<.5?this.vy+=f*(.5-d):d>.5&&(this.vy-=f*(d-.5)),this},update:function(l,n,o,f,r,d,p,v){var g=this.vx*l+this.vy*o+r,m=this.vx*n+this.vy*f+d;return p&&(g=Math.round(g),m=Math.round(m)),this.tx=g,this.ty=m,this.ta=this.alpha*v,this},load:function(l,n,o,f,r){return l[++o]=this.tx,l[++o]=this.ty,l[++o]=this.tu,l[++o]=this.tv,l[++o]=f,l[++o]=r,n[++o]=y.getTintAppendFloatAlpha(this.color,this.ta),o}});S.exports=h},73090:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c={Face:s(83997),GenerateGridVerts:s(48803),GenerateObjVerts:s(34684),GenerateVerts:s(92515),ParseObj:s(85048),ParseObjMaterial:s(61485),RotateFace:s(92570),Vertex:s(39318)};S.exports=c},96550:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.setTo(Math.ceil(s.x),Math.ceil(s.y))};S.exports=w},99706:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u){return new c(u.x,u.y)};S.exports=y},68010:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c.setTo(s.x,s.y)};S.exports=w},27814:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.x===c.x&&s.y===c.y};S.exports=w},73565:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.setTo(Math.floor(s.x),Math.floor(s.y))};S.exports=w},87555:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h){if(h===void 0&&(h=new c),!Array.isArray(u))throw new Error("GetCentroid points argument must be an array");var l=u.length;if(l<1)throw new Error("GetCentroid points array must not be empty");if(l===1)h.x=u[0].x,h.y=u[0].y;else{for(var n=0;n<l;n++)h.x+=u[n].x,h.y+=u[n].y;h.x/=l,h.y/=l}return h};S.exports=y},28793:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)};S.exports=w},44405:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.x*s.x+s.y*s.y};S.exports=w},20873:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87841),y=function(u,h){h===void 0&&(h=new c);for(var l=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY,r=0;r<u.length;r++){var d=u[r];d.x>l&&(l=d.x),d.x<n&&(n=d.x),d.y>o&&(o=d.y),d.y<f&&(f=d.y)}return h.x=n,h.y=f,h.width=l-n,h.height=o-f,h};S.exports=y},26152:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h,l,n){return l===void 0&&(l=0),n===void 0&&(n=new c),n.x=u.x+(h.x-u.x)*l,n.y=u.y+(h.y-u.y)*l,n};S.exports=y},55767:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.setTo(s.y,s.x)};S.exports=w},79432:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h){return h===void 0&&(h=new c),h.setTo(-u.x,-u.y)};S.exports=y},2141:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23777),u=new c({initialize:function(l,n){l===void 0&&(l=0),n===void 0&&(n=l),this.type=y.POINT,this.x=l,this.y=n},setTo:function(h,l){return h===void 0&&(h=0),l===void 0&&(l=h),this.x=h,this.y=l,this}});S.exports=u},72930:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=s(44405),u=function(h,l,n){n===void 0&&(n=new c);var o=h.x*l.x+h.y*l.y,f=o/y(l);return f!==0&&(n.x=f*l.x,n.y=f*l.y),n};S.exports=u},62880:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h,l){l===void 0&&(l=new c);var n=u.x*h.x+u.y*h.y;return n!==0&&(l.x=n*h.x,l.y=n*h.y),l};S.exports=y},15093:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(28793),y=function(u,h){if(u.x!==0||u.y!==0){var l=c(u);u.x/=l,u.y/=l}return u.x*=h,u.y*=h,u};S.exports=y},43711:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141);c.Ceil=s(96550),c.Clone=s(99706),c.CopyFrom=s(68010),c.Equals=s(27814),c.Floor=s(73565),c.GetCentroid=s(87555),c.GetMagnitude=s(28793),c.GetMagnitudeSq=s(44405),c.GetRectangleFromPoints=s(20873),c.Interpolate=s(26152),c.Invert=s(55767),c.Negative=s(79432),c.Project=s(72930),c.ProjectUnit=s(62880),c.SetMagnitude=s(15093),S.exports=c},12306:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25717),y=function(u){return new c(u.points)};S.exports=y},63814:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){for(var u=!1,h=-1,l=s.points.length-1;++h<s.points.length;l=h){var n=s.points[h].x,o=s.points[h].y,f=s.points[l].x,r=s.points[l].y;(o<=y&&y<r||r<=y&&y<o)&&c<(f-n)*(y-o)/(r-o)+n&&(u=!u)}return u};S.exports=w},99338:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(63814),y=function(u,h){return c(u,h.x,h.y)};S.exports=y},94811:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(H,J,Y){Y=Y||2;var _=J&&J.length,U=_?J[0]*Y:H.length,et=s(H,0,U,Y,!0),nt=[];if(!et||et.next===et.prev)return nt;var rt,ot,dt,vt,mt,gt,yt;if(_&&(et=o(H,J,et,Y)),H.length>80*Y){rt=dt=H[0],ot=vt=H[1];for(var St=Y;St<U;St+=Y)mt=H[St],gt=H[St+1],mt<rt&&(rt=mt),gt<ot&&(ot=gt),mt>dt&&(dt=mt),gt>vt&&(vt=gt);yt=Math.max(dt-rt,vt-ot),yt=yt!==0?32767/yt:0}return y(et,nt,Y,rt,ot,yt,0),nt}function s(H,J,Y,_,U){var et,nt;if(U===tt(H,J,Y,_)>0)for(et=J;et<Y;et+=_)nt=$(et,H[et],H[et+1],nt);else for(et=Y-_;et>=J;et-=_)nt=$(et,H[et],H[et+1],nt);return nt&&R(nt,nt.next)&&(Q(nt),nt=nt.next),nt}function c(H,J){if(!H)return H;J||(J=H);var Y=H,_;do if(_=!1,!Y.steiner&&(R(Y,Y.next)||b(Y.prev,Y,Y.next)===0)){if(Q(Y),Y=J=Y.prev,Y===Y.next)break;_=!0}else Y=Y.next;while(_||Y!==J);return J}function y(H,J,Y,_,U,et,nt){if(H){!nt&&et&&v(H,_,U,et);for(var rt=H,ot,dt;H.prev!==H.next;){if(ot=H.prev,dt=H.next,et?h(H,_,U,et):u(H)){J.push(ot.i/Y|0),J.push(H.i/Y|0),J.push(dt.i/Y|0),Q(H),H=dt.next,rt=dt.next;continue}if(H=dt,H===rt){nt?nt===1?(H=l(c(H),J,Y),y(H,J,Y,_,U,et,2)):nt===2&&n(H,J,Y,_,U,et):y(c(H),J,Y,_,U,et,1);break}}}}function u(H){var J=H.prev,Y=H,_=H.next;if(b(J,Y,_)>=0)return!1;for(var U=J.x,et=Y.x,nt=_.x,rt=J.y,ot=Y.y,dt=_.y,vt=U<et?U<nt?U:nt:et<nt?et:nt,mt=rt<ot?rt<dt?rt:dt:ot<dt?ot:dt,gt=U>et?U>nt?U:nt:et>nt?et:nt,yt=rt>ot?rt>dt?rt:dt:ot>dt?ot:dt,St=_.next;St!==J;){if(St.x>=vt&&St.x<=gt&&St.y>=mt&&St.y<=yt&&P(U,rt,et,ot,nt,dt,St.x,St.y)&&b(St.prev,St,St.next)>=0)return!1;St=St.next}return!0}function h(H,J,Y,_){var U=H.prev,et=H,nt=H.next;if(b(U,et,nt)>=0)return!1;for(var rt=U.x,ot=et.x,dt=nt.x,vt=U.y,mt=et.y,gt=nt.y,yt=rt<ot?rt<dt?rt:dt:ot<dt?ot:dt,St=vt<mt?vt<gt?vt:gt:mt<gt?mt:gt,Ct=rt>ot?rt>dt?rt:dt:ot>dt?ot:dt,bt=vt>mt?vt>gt?vt:gt:mt>gt?mt:gt,At=m(yt,St,J,Y,_),Lt=m(Ct,bt,J,Y,_),Tt=H.prevZ,Et=H.nextZ;Tt&&Tt.z>=At&&Et&&Et.z<=Lt;){if(Tt.x>=yt&&Tt.x<=Ct&&Tt.y>=St&&Tt.y<=bt&&Tt!==U&&Tt!==nt&&P(rt,vt,ot,mt,dt,gt,Tt.x,Tt.y)&&b(Tt.prev,Tt,Tt.next)>=0||(Tt=Tt.prevZ,Et.x>=yt&&Et.x<=Ct&&Et.y>=St&&Et.y<=bt&&Et!==U&&Et!==nt&&P(rt,vt,ot,mt,dt,gt,Et.x,Et.y)&&b(Et.prev,Et,Et.next)>=0))return!1;Et=Et.nextZ}for(;Tt&&Tt.z>=At;){if(Tt.x>=yt&&Tt.x<=Ct&&Tt.y>=St&&Tt.y<=bt&&Tt!==U&&Tt!==nt&&P(rt,vt,ot,mt,dt,gt,Tt.x,Tt.y)&&b(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.prevZ}for(;Et&&Et.z<=Lt;){if(Et.x>=yt&&Et.x<=Ct&&Et.y>=St&&Et.y<=bt&&Et!==U&&Et!==nt&&P(rt,vt,ot,mt,dt,gt,Et.x,Et.y)&&b(Et.prev,Et,Et.next)>=0)return!1;Et=Et.nextZ}return!0}function l(H,J,Y){var _=H;do{var U=_.prev,et=_.next.next;!R(U,et)&&A(U,_,_.next,et)&&B(U,et)&&B(et,U)&&(J.push(U.i/Y|0),J.push(_.i/Y|0),J.push(et.i/Y|0),Q(_),Q(_.next),_=H=et),_=_.next}while(_!==H);return c(_)}function n(H,J,Y,_,U,et){var nt=H;do{for(var rt=nt.next.next;rt!==nt.prev;){if(nt.i!==rt.i&&M(nt,rt)){var ot=z(nt,rt);nt=c(nt,nt.next),ot=c(ot,ot.next),y(nt,J,Y,_,U,et,0),y(ot,J,Y,_,U,et,0);return}rt=rt.next}nt=nt.next}while(nt!==H)}function o(H,J,Y,_){var U=[],et,nt,rt,ot,dt;for(et=0,nt=J.length;et<nt;et++)rt=J[et]*_,ot=et<nt-1?J[et+1]*_:H.length,dt=s(H,rt,ot,_,!1),dt===dt.next&&(dt.steiner=!0),U.push(T(dt));for(U.sort(f),et=0;et<U.length;et++)Y=r(U[et],Y);return Y}function f(H,J){return H.x-J.x}function r(H,J){var Y=d(H,J);if(!Y)return J;var _=z(Y,H);return c(_,_.next),c(Y,Y.next)}function d(H,J){var Y=J,_=H.x,U=H.y,et=-1/0,nt;do{if(U<=Y.y&&U>=Y.next.y&&Y.next.y!==Y.y){var rt=Y.x+(U-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(rt<=_&&rt>et&&(et=rt,nt=Y.x<Y.next.x?Y:Y.next,rt===_))return nt}Y=Y.next}while(Y!==J);if(!nt)return null;var ot=nt,dt=nt.x,vt=nt.y,mt=1/0,gt;Y=nt;do _>=Y.x&&Y.x>=dt&&_!==Y.x&&P(U<vt?_:et,U,dt,vt,U<vt?et:_,U,Y.x,Y.y)&&(gt=Math.abs(U-Y.y)/(_-Y.x),B(Y,H)&&(gt<mt||gt===mt&&(Y.x>nt.x||Y.x===nt.x&&p(nt,Y)))&&(nt=Y,mt=gt)),Y=Y.next;while(Y!==ot);return nt}function p(H,J){return b(H.prev,H,J.prev)<0&&b(J.next,H,H.next)<0}function v(H,J,Y,_){var U=H;do U.z===0&&(U.z=m(U.x,U.y,J,Y,_)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==H);U.prevZ.nextZ=null,U.prevZ=null,g(U)}function g(H){var J,Y,_,U,et,nt,rt,ot,dt=1;do{for(Y=H,H=null,et=null,nt=0;Y;){for(nt++,_=Y,rt=0,J=0;J<dt&&(rt++,_=_.nextZ,!!_);J++);for(ot=dt;rt>0||ot>0&&_;)rt!==0&&(ot===0||!_||Y.z<=_.z)?(U=Y,Y=Y.nextZ,rt--):(U=_,_=_.nextZ,ot--),et?et.nextZ=U:H=U,U.prevZ=et,et=U;Y=_}et.nextZ=null,dt*=2}while(nt>1);return H}function m(H,J,Y,_,U){return H=(H-Y)*U|0,J=(J-_)*U|0,H=(H|H<<8)&16711935,H=(H|H<<4)&252645135,H=(H|H<<2)&858993459,H=(H|H<<1)&1431655765,J=(J|J<<8)&16711935,J=(J|J<<4)&252645135,J=(J|J<<2)&858993459,J=(J|J<<1)&1431655765,H|J<<1}function T(H){var J=H,Y=H;do(J.x<Y.x||J.x===Y.x&&J.y<Y.y)&&(Y=J),J=J.next;while(J!==H);return Y}function P(H,J,Y,_,U,et,nt,rt){return(U-nt)*(J-rt)>=(H-nt)*(et-rt)&&(H-nt)*(_-rt)>=(Y-nt)*(J-rt)&&(Y-nt)*(et-rt)>=(U-nt)*(_-rt)}function M(H,J){return H.next.i!==J.i&&H.prev.i!==J.i&&!F(H,J)&&(B(H,J)&&B(J,H)&&N(H,J)&&(b(H.prev,H,J.prev)||b(H,J.prev,J))||R(H,J)&&b(H.prev,H,H.next)>0&&b(J.prev,J,J.next)>0)}function b(H,J,Y){return(J.y-H.y)*(Y.x-J.x)-(J.x-H.x)*(Y.y-J.y)}function R(H,J){return H.x===J.x&&H.y===J.y}function A(H,J,Y,_){var U=G(b(H,J,Y)),et=G(b(H,J,_)),nt=G(b(Y,_,H)),rt=G(b(Y,_,J));return!!(U!==et&&nt!==rt||U===0&&D(H,Y,J)||et===0&&D(H,_,J)||nt===0&&D(Y,H,_)||rt===0&&D(Y,J,_))}function D(H,J,Y){return J.x<=Math.max(H.x,Y.x)&&J.x>=Math.min(H.x,Y.x)&&J.y<=Math.max(H.y,Y.y)&&J.y>=Math.min(H.y,Y.y)}function G(H){return H>0?1:H<0?-1:0}function F(H,J){var Y=H;do{if(Y.i!==H.i&&Y.next.i!==H.i&&Y.i!==J.i&&Y.next.i!==J.i&&A(Y,Y.next,H,J))return!0;Y=Y.next}while(Y!==H);return!1}function B(H,J){return b(H.prev,H,H.next)<0?b(H,J,H.next)>=0&&b(H,H.prev,J)>=0:b(H,J,H.prev)<0||b(H,H.next,J)<0}function N(H,J){var Y=H,_=!1,U=(H.x+J.x)/2,et=(H.y+J.y)/2;do Y.y>et!=Y.next.y>et&&Y.next.y!==Y.y&&U<(Y.next.x-Y.x)*(et-Y.y)/(Y.next.y-Y.y)+Y.x&&(_=!_),Y=Y.next;while(Y!==H);return _}function z(H,J){var Y=new Z(H.i,H.x,H.y),_=new Z(J.i,J.x,J.y),U=H.next,et=J.prev;return H.next=J,J.prev=H,Y.next=U,U.prev=Y,_.next=Y,Y.prev=_,et.next=_,_.prev=et,_}function $(H,J,Y,_){var U=new Z(H,J,Y);return _?(U.next=_.next,U.prev=_,_.next.prev=U,_.next=U):(U.prev=U,U.next=U),U}function Q(H){H.next.prev=H.prev,H.prev.next=H.next,H.prevZ&&(H.prevZ.nextZ=H.nextZ),H.nextZ&&(H.nextZ.prevZ=H.prevZ)}function Z(H,J,Y){this.i=H,this.x=J,this.y=Y,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}w.deviation=function(H,J,Y,_){var U=J&&J.length,et=U?J[0]*Y:H.length,nt=Math.abs(tt(H,0,et,Y));if(U)for(var rt=0,ot=J.length;rt<ot;rt++){var dt=J[rt]*Y,vt=rt<ot-1?J[rt+1]*Y:H.length;nt-=Math.abs(tt(H,dt,vt,Y))}var mt=0;for(rt=0;rt<_.length;rt+=3){var gt=_[rt]*Y,yt=_[rt+1]*Y,St=_[rt+2]*Y;mt+=Math.abs((H[gt]-H[St])*(H[yt+1]-H[gt+1])-(H[gt]-H[yt])*(H[St+1]-H[gt+1]))}return nt===0&&mt===0?0:Math.abs((mt-nt)/nt)};function tt(H,J,Y,_){for(var U=0,et=J,nt=Y-_;et<Y;et+=_)U+=(H[nt]-H[et])*(H[et+1]+H[nt+1]),nt=et;return U}w.flatten=function(H){for(var J=H[0][0].length,Y={vertices:[],holes:[],dimensions:J},_=0,U=0;U<H.length;U++){for(var et=0;et<H[U].length;et++)for(var nt=0;nt<J;nt++)Y.vertices.push(H[U][et][nt]);U>0&&(_+=H[U-1].length,Y.holes.push(_))}return Y},S.exports=w},13829:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87841),y=function(u,h){h===void 0&&(h=new c);for(var l=1/0,n=1/0,o=-l,f=-n,r,d=0;d<u.points.length;d++)r=u.points[d],l=Math.min(l,r.x),n=Math.min(n,r.y),o=Math.max(o,r.x),f=Math.max(f,r.y);return h.x=l,h.y=n,h.width=o-l,h.height=f-n,h};S.exports=y},26173:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){c===void 0&&(c=[]);for(var y=0;y<s.points.length;y++)c.push(s.points[y].x),c.push(s.points[y].y);return c};S.exports=w},9564:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35001),y=s(23031),u=s(30052),h=function(l,n,o,f){f===void 0&&(f=[]);var r=l.points,d=u(l);!n&&o>0&&(n=d/o);for(var p=0;p<n;p++)for(var v=d*(p/n),g=0,m=0;m<r.length;m++){var T=r[m],P=r[(m+1)%r.length],M=new y(T.x,T.y,P.x,P.y),b=c(M);if(v<g||v>g+b){g+=b;continue}var R=M.getPoint((v-g)/b);f.push(R);break}return f};S.exports=h},30052:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35001),y=s(23031),u=function(h){for(var l=h.points,n=0,o=0;o<l.length;o++){var f=l[o],r=l[(o+1)%l.length],d=new y(f.x,f.y,r.x,r.y);n+=c(d)}return n};S.exports=u},25717:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(63814),u=s(9564),h=s(23777),l=new c({initialize:function(o){this.type=h.POLYGON,this.area=0,this.points=[],o&&this.setTo(o)},contains:function(n,o){return y(this,n,o)},setTo:function(n){if(this.area=0,this.points=[],typeof n=="string"&&(n=n.split(" ")),!Array.isArray(n))return this;for(var o,f=0;f<n.length;f++)o={x:0,y:0},typeof n[f]=="number"||typeof n[f]=="string"?(o.x=parseFloat(n[f]),o.y=parseFloat(n[f+1]),f++):Array.isArray(n[f])?(o.x=n[f][0],o.y=n[f][1]):(o.x=n[f].x,o.y=n[f].y),this.points.push(o);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var n=0,o,f,r=0;r<this.points.length-1;r++)o=this.points[r],f=this.points[r+1],n+=(f.x-o.x)*(o.y+f.y);return o=this.points[0],f=this.points[this.points.length-1],n+=(o.x-f.x)*(f.y+o.y),this.area=-n*.5,this.area},getPoints:function(n,o,f){return u(this,n,o,f)}});S.exports=l},8133:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.points.reverse(),s};S.exports=w},29524:S=>{function w(l,n){var o=l.x-n.x,f=l.y-n.y;return o*o+f*f}function s(l,n,o){var f=n.x,r=n.y,d=o.x-f,p=o.y-r;if(d!==0||p!==0){var v=((l.x-f)*d+(l.y-r)*p)/(d*d+p*p);v>1?(f=o.x,r=o.y):v>0&&(f+=d*v,r+=p*v)}return d=l.x-f,p=l.y-r,d*d+p*p}function c(l,n){for(var o=l[0],f=[o],r,d=1,p=l.length;d<p;d++)r=l[d],w(r,o)>n&&(f.push(r),o=r);return o!==r&&f.push(r),f}function y(l,n,o,f,r){for(var d=f,p,v=n+1;v<o;v++){var g=s(l[v],l[n],l[o]);g>d&&(p=v,d=g)}d>f&&(p-n>1&&y(l,n,p,f,r),r.push(l[p]),o-p>1&&y(l,p,o,f,r))}function u(l,n){var o=l.length-1,f=[l[0]];return y(l,0,o,n,f),f.push(l[o]),f}var h=function(l,n,o){n===void 0&&(n=1),o===void 0&&(o=!1);var f=l.points;if(f.length>2){var r=n*n;o||(f=c(f,r)),l.setTo(u(f,r))}return l};S.exports=h},5469:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(c,y){return c[0]=y[0],c[1]=y[1],c},s=function(c){var y,u=[],h=c.points;for(y=0;y<h.length;y++)u.push([h[y].x,h[y].y]);var l=[];for(u.length>0&&l.push(w([0,0],u[0])),y=0;y<u.length-1;y++){var n=u[y],o=u[y+1],f=n[0],r=n[1],d=o[0],p=o[1];l.push([.85*f+.15*d,.85*r+.15*p]),l.push([.15*f+.85*d,.15*r+.85*p])}return u.length>1&&l.push(w([0,0],u[u.length-1])),c.setTo(l)};S.exports=s},24709:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){for(var u=s.points,h=0;h<u.length;h++)u[h].x+=c,u[h].y+=y;return s};S.exports=w},58423:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25717);c.Clone=s(12306),c.Contains=s(63814),c.ContainsPoint=s(99338),c.Earcut=s(94811),c.GetAABB=s(13829),c.GetNumberArray=s(26173),c.GetPoints=s(9564),c.Perimeter=s(30052),c.Reverse=s(8133),c.Simplify=s(29524),c.Smooth=s(5469),c.Translate=s(24709),S.exports=c},62224:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.width*s.height};S.exports=w},98615:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s};S.exports=w},31688:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s.width=Math.ceil(s.width),s.height=Math.ceil(s.height),s};S.exports=w},67502:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return s.x=c-s.width/2,s.y=y-s.height/2,s};S.exports=w},65085:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87841),y=function(u){return new c(u.x,u.y,u.width,u.height)};S.exports=y},37303:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return s.width<=0||s.height<=0?!1:s.x<=c&&s.x+s.width>=c&&s.y<=y&&s.y+s.height>=y};S.exports=w},96553:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(37303),y=function(u,h){return c(u,h.x,h.y)};S.exports=y},70273:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c.width*c.height>s.width*s.height?!1:c.x>s.x&&c.x<s.right&&c.right>s.x&&c.right<s.right&&c.y>s.y&&c.y<s.bottom&&c.bottom>s.y&&c.bottom<s.bottom};S.exports=w},43459:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c.setTo(s.x,s.y,s.width,s.height)};S.exports=w},77493:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c===void 0&&(c=[]),c.push({x:s.x,y:s.y}),c.push({x:s.right,y:s.y}),c.push({x:s.right,y:s.bottom}),c.push({x:s.x,y:s.bottom}),c};S.exports=w},9219:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.x===c.x&&s.y===c.y&&s.width===c.width&&s.height===c.height};S.exports=w},53751:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(8249),y=function(u,h){var l=c(u);return l<c(h)?u.setSize(h.height*l,h.height):u.setSize(h.width,h.width/l),u.setPosition(h.centerX-u.width/2,h.centerY-u.height/2)};S.exports=y},16088:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(8249),y=function(u,h){var l=c(u);return l>c(h)?u.setSize(h.height*l,h.height):u.setSize(h.width,h.width/l),u.setPosition(h.centerX-u.width/2,h.centerY-u.height/2)};S.exports=y},80774:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s};S.exports=w},83859:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s.width=Math.floor(s.width),s.height=Math.floor(s.height),s};S.exports=w},19217:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87841),y=s(36383),u=function(h,l){if(l===void 0&&(l=new c),h.length===0)return l;for(var n=Number.MAX_VALUE,o=Number.MAX_VALUE,f=y.MIN_SAFE_INTEGER,r=y.MIN_SAFE_INTEGER,d,p,v,g=0;g<h.length;g++)d=h[g],Array.isArray(d)?(p=d[0],v=d[1]):(p=d.x,v=d.y),n=Math.min(n,p),o=Math.min(o,v),f=Math.max(f,p),r=Math.max(r,v);return l.x=n,l.y=o,l.width=f-n,l.height=r-o,l};S.exports=u},9477:(S,w,s)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87841),y=function(u,h,l,n,o){return o===void 0&&(o=new c),o.setTo(Math.min(u,l),Math.min(h,n),Math.abs(u-l),Math.abs(h-n))};S.exports=y},8249:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.height===0?NaN:s.width/s.height};S.exports=w},27165:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h){return h===void 0&&(h=new c),h.x=u.centerX,h.y=u.centerY,h};S.exports=y},20812:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(13019),y=s(2141),u=function(h,l,n){if(n===void 0&&(n=new y),l<=0||l>=1)return n.x=h.x,n.y=h.y,n;var o=c(h)*l;return l>.5?(o-=h.width+h.height,o<=h.width?(n.x=h.right-o,n.y=h.bottom):(n.x=h.x,n.y=h.bottom-(o-h.width))):o<=h.width?(n.x=h.x+o,n.y=h.y):(n.x=h.right,n.y=h.y+(o-h.width)),n};S.exports=u},34819:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(20812),y=s(13019),u=function(h,l,n,o){o===void 0&&(o=[]),!l&&n>0&&(l=y(h)/n);for(var f=0;f<l;f++){var r=f/l;o.push(c(h,r))}return o};S.exports=u},51313:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h){return h===void 0&&(h=new c),h.x=u.width,h.y=u.height,h};S.exports=y},86091:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(67502),y=function(u,h,l){var n=u.centerX,o=u.centerY;return u.setSize(u.width+h*2,u.height+l*2),c(u,n,o)};S.exports=y},53951:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87841),y=s(59996),u=function(h,l,n){return n===void 0&&(n=new c),y(h,l)?(n.x=Math.max(h.x,l.x),n.y=Math.max(h.y,l.y),n.width=Math.min(h.right,l.right)-n.x,n.height=Math.min(h.bottom,l.bottom)-n.y):n.setEmpty(),n};S.exports=u},14649:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(13019),y=s(2141),u=function(h,l,n,o){if(o===void 0&&(o=[]),!l&&!n)return o;l?n=Math.round(c(h)/l):l=c(h)/n;for(var f=h.x,r=h.y,d=0,p=0;p<n;p++)switch(o.push(new y(f,r)),d){case 0:f+=l,f>=h.right&&(d=1,r+=f-h.right,f=h.right);break;case 1:r+=l,r>=h.bottom&&(d=2,f-=r-h.bottom,r=h.bottom);break;case 2:f-=l,f<=h.left&&(d=3,r-=h.left-f,f=h.left);break;case 3:r-=l,r<=h.top&&(d=0,r=h.top);break}return o};S.exports=u},33595:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){for(var y=s.x,u=s.right,h=s.y,l=s.bottom,n=0;n<c.length;n++)y=Math.min(y,c[n].x),u=Math.max(u,c[n].x),h=Math.min(h,c[n].y),l=Math.max(l,c[n].y);return s.x=y,s.y=h,s.width=u-y,s.height=l-h,s};S.exports=w},20074:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=Math.min(s.x,c.x),u=Math.max(s.right,c.right);s.x=y,s.width=u-y;var h=Math.min(s.y,c.y),l=Math.max(s.bottom,c.bottom);return s.y=h,s.height=l-h,s};S.exports=w},92171:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=Math.min(s.x,c),h=Math.max(s.right,c);s.x=u,s.width=h-u;var l=Math.min(s.y,y),n=Math.max(s.bottom,y);return s.y=l,s.height=n-l,s};S.exports=w},42981:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return s.x+=c,s.y+=y,s};S.exports=w},46907:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.x+=c.x,s.y+=c.y,s};S.exports=w},60170:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.x<c.right&&s.right>c.x&&s.y<c.bottom&&s.bottom>c.y};S.exports=w},13019:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return 2*(s.width+s.height)};S.exports=w},85133:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=s(39506),u=function(h,l,n){n===void 0&&(n=new c),l=y(l);var o=Math.sin(l),f=Math.cos(l),r=f>0?h.width/2:h.width/-2,d=o>0?h.height/2:h.height/-2;return Math.abs(r*o)<Math.abs(d*f)?d=r*o/f:r=d*f/o,n.x=r+h.centerX,n.y=d+h.centerY,n};S.exports=u},26597:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h){return h===void 0&&(h=new c),h.x=u.x+Math.random()*u.width,h.y=u.y+Math.random()*u.height,h};S.exports=y},86470:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(30976),y=s(70273),u=s(2141),h=function(l,n,o){if(o===void 0&&(o=new u),y(l,n))switch(c(0,3)){case 0:o.x=l.x+Math.random()*(n.right-l.x),o.y=l.y+Math.random()*(n.top-l.y);break;case 1:o.x=n.x+Math.random()*(l.right-n.x),o.y=n.bottom+Math.random()*(l.bottom-n.bottom);break;case 2:o.x=l.x+Math.random()*(n.x-l.x),o.y=n.y+Math.random()*(l.bottom-n.y);break;case 3:o.x=n.right+Math.random()*(l.right-n.right),o.y=l.y+Math.random()*(n.bottom-l.y);break}return o};S.exports=h},87841:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(37303),u=s(20812),h=s(34819),l=s(23777),n=s(23031),o=s(26597),f=new c({initialize:function(d,p,v,g){d===void 0&&(d=0),p===void 0&&(p=0),v===void 0&&(v=0),g===void 0&&(g=0),this.type=l.RECTANGLE,this.x=d,this.y=p,this.width=v,this.height=g},contains:function(r,d){return y(this,r,d)},getPoint:function(r,d){return u(this,r,d)},getPoints:function(r,d,p){return h(this,r,d,p)},getRandomPoint:function(r){return o(this,r)},setTo:function(r,d,p,v){return this.x=r,this.y=d,this.width=p,this.height=v,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(r,d){return d===void 0&&(d=r),this.x=r,this.y=d,this},setSize:function(r,d){return d===void 0&&(d=r),this.width=r,this.height=d,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(r){return r===void 0&&(r=new n),r.setTo(this.x,this.y,this.right,this.y),r},getLineB:function(r){return r===void 0&&(r=new n),r.setTo(this.right,this.y,this.right,this.bottom),r},getLineC:function(r){return r===void 0&&(r=new n),r.setTo(this.right,this.bottom,this.x,this.bottom),r},getLineD:function(r){return r===void 0&&(r=new n),r.setTo(this.x,this.bottom,this.x,this.y),r},left:{get:function(){return this.x},set:function(r){r>=this.right?this.width=0:this.width=this.right-r,this.x=r}},right:{get:function(){return this.x+this.width},set:function(r){r<=this.x?this.width=0:this.width=r-this.x}},top:{get:function(){return this.y},set:function(r){r>=this.bottom?this.height=0:this.height=this.bottom-r,this.y=r}},bottom:{get:function(){return this.y+this.height},set:function(r){r<=this.y?this.height=0:this.height=r-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(r){this.x=r-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(r){this.y=r-this.height/2}}});S.exports=f},94845:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.width===c.width&&s.height===c.height};S.exports=w},31730:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return y===void 0&&(y=c),s.width*=c,s.height*=y,s};S.exports=w},36899:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87841),y=function(u,h,l){l===void 0&&(l=new c);var n=Math.min(u.x,h.x),o=Math.min(u.y,h.y),f=Math.max(u.right,h.right)-n,r=Math.max(u.bottom,h.bottom)-o;return l.setTo(n,o,f,r)};S.exports=y},93232:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87841);c.Area=s(62224),c.Ceil=s(98615),c.CeilAll=s(31688),c.CenterOn=s(67502),c.Clone=s(65085),c.Contains=s(37303),c.ContainsPoint=s(96553),c.ContainsRect=s(70273),c.CopyFrom=s(43459),c.Decompose=s(77493),c.Equals=s(9219),c.FitInside=s(53751),c.FitOutside=s(16088),c.Floor=s(80774),c.FloorAll=s(83859),c.FromPoints=s(19217),c.FromXY=s(9477),c.GetAspectRatio=s(8249),c.GetCenter=s(27165),c.GetPoint=s(20812),c.GetPoints=s(34819),c.GetSize=s(51313),c.Inflate=s(86091),c.Intersection=s(53951),c.MarchingAnts=s(14649),c.MergePoints=s(33595),c.MergeRect=s(20074),c.MergeXY=s(92171),c.Offset=s(42981),c.OffsetPoint=s(46907),c.Overlaps=s(60170),c.Perimeter=s(13019),c.PerimeterPoint=s(85133),c.Random=s(26597),c.RandomOutside=s(86470),c.SameDimensions=s(94845),c.Scale=s(31730),c.Union=s(36899),S.exports=c},41658:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c=s.x1,y=s.y1,u=s.x2,h=s.y2,l=s.x3,n=s.y3;return Math.abs(((l-c)*(h-y)-(u-c)*(n-y))/2)};S.exports=w},39208:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(16483),y=function(u,h,l){var n=l*(Math.sqrt(3)/2),o=u,f=h,r=u+l/2,d=h+n,p=u-l/2,v=h+n;return new c(o,f,r,d,p,v)};S.exports=y},39545:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(94811),y=s(16483),u=function(h,l,n,o,f){l===void 0&&(l=null),n===void 0&&(n=1),o===void 0&&(o=1),f===void 0&&(f=[]);for(var r=c(h,l),d,p,v,g,m,T,P,M,b,R=0;R<r.length;R+=3)d=r[R],p=r[R+1],v=r[R+2],g=h[d*2]*n,m=h[d*2+1]*o,T=h[p*2]*n,P=h[p*2+1]*o,M=h[v*2]*n,b=h[v*2+1]*o,f.push(new y(g,m,T,P,M,b));return f};S.exports=u},90301:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(16483),y=function(u,h,l,n){n===void 0&&(n=l);var o=u,f=h,r=u,d=h-n,p=u+l,v=h;return new c(o,f,r,d,p,v)};S.exports=y},23707:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(97523),y=s(13584),u=function(h,l,n,o){o===void 0&&(o=c);var f=o(h),r=l-f.x,d=n-f.y;return y(h,r,d)};S.exports=u},97523:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h){return h===void 0&&(h=new c),h.x=(u.x1+u.x2+u.x3)/3,h.y=(u.y1+u.y2+u.y3)/3,h};S.exports=y},24951:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26099);function y(h,l,n,o){return h*o-l*n}var u=function(h,l){l===void 0&&(l=new c);var n=h.x3,o=h.y3,f=h.x1-n,r=h.y1-o,d=h.x2-n,p=h.y2-o,v=2*y(f,r,d,p),g=y(r,f*f+r*r,p,d*d+p*p),m=y(f,f*f+r*r,d,d*d+p*p);return l.x=n-g/v,l.y=o+m/v,l};S.exports=u},85614:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(96503),y=function(u,h){h===void 0&&(h=new c);var l=u.x1,n=u.y1,o=u.x2,f=u.y2,r=u.x3,d=u.y3,p=o-l,v=f-n,g=r-l,m=d-n,T=p*(l+o)+v*(n+f),P=g*(l+r)+m*(n+d),M=2*(p*(d-f)-v*(r-o)),b,R;if(Math.abs(M)<1e-6){var A=Math.min(l,o,r),D=Math.min(n,f,d);b=(Math.max(l,o,r)-A)*.5,R=(Math.max(n,f,d)-D)*.5,h.x=A+b,h.y=D+R,h.radius=Math.sqrt(b*b+R*R)}else h.x=(m*T-v*P)/M,h.y=(p*P-g*T)/M,b=h.x-l,R=h.y-n,h.radius=Math.sqrt(b*b+R*R);return h};S.exports=y},74422:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(16483),y=function(u){return new c(u.x1,u.y1,u.x2,u.y2,u.x3,u.y3)};S.exports=y},10690:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=s.x3-s.x1,h=s.y3-s.y1,l=s.x2-s.x1,n=s.y2-s.y1,o=c-s.x1,f=y-s.y1,r=u*u+h*h,d=u*l+h*n,p=u*o+h*f,v=l*l+n*n,g=l*o+n*f,m=r*v-d*d,T=m===0?0:1/m,P=(v*p-d*g)*T,M=(r*g-d*p)*T;return P>=0&&M>=0&&P+M<1};S.exports=w},48653:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){y===void 0&&(y=!1),u===void 0&&(u=[]);for(var h=s.x3-s.x1,l=s.y3-s.y1,n=s.x2-s.x1,o=s.y2-s.y1,f=h*h+l*l,r=h*n+l*o,d=n*n+o*o,p=f*d-r*r,v=p===0?0:1/p,g,m,T,P,M,b,R=s.x1,A=s.y1,D=0;D<c.length&&(T=c[D].x-R,P=c[D].y-A,M=h*T+l*P,b=n*T+o*P,g=(d*M-r*b)*v,m=(f*b-r*M)*v,!(g>=0&&m>=0&&g+m<1&&(u.push({x:c[D].x,y:c[D].y}),y)));D++);return u};S.exports=w},96006:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(10690),y=function(u,h){return c(u,h.x,h.y)};S.exports=y},71326:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c.setTo(s.x1,s.y1,s.x2,s.y2,s.x3,s.y3)};S.exports=w},71694:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c===void 0&&(c=[]),c.push({x:s.x1,y:s.y1}),c.push({x:s.x2,y:s.y2}),c.push({x:s.x3,y:s.y3}),c};S.exports=w},33522:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.x1===c.x1&&s.y1===c.y1&&s.x2===c.x2&&s.y2===c.y2&&s.x3===c.x3&&s.y3===c.y3};S.exports=w},20437:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=s(35001),u=function(h,l,n){n===void 0&&(n=new c);var o=h.getLineA(),f=h.getLineB(),r=h.getLineC();if(l<=0||l>=1)return n.x=o.x1,n.y=o.y1,n;var d=y(o),p=y(f),v=y(r),g=d+p+v,m=g*l,T=0;return m<d?(T=m/d,n.x=o.x1+(o.x2-o.x1)*T,n.y=o.y1+(o.y2-o.y1)*T):m>d+p?(m-=d+p,T=m/v,n.x=r.x1+(r.x2-r.x1)*T,n.y=r.y1+(r.y2-r.y1)*T):(m-=d,T=m/p,n.x=f.x1+(f.x2-f.x1)*T,n.y=f.y1+(f.y2-f.y1)*T),n};S.exports=u},80672:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35001),y=s(2141),u=function(h,l,n,o){o===void 0&&(o=[]);var f=h.getLineA(),r=h.getLineB(),d=h.getLineC(),p=c(f),v=c(r),g=c(d),m=p+v+g;!l&&n>0&&(l=m/n);for(var T=0;T<l;T++){var P=m*(T/l),M=0,b=new y;P<p?(M=P/p,b.x=f.x1+(f.x2-f.x1)*M,b.y=f.y1+(f.y2-f.y1)*M):P>p+v?(P-=p+v,M=P/g,b.x=d.x1+(d.x2-d.x1)*M,b.y=d.y1+(d.y2-d.y1)*M):(P-=p,M=P/v,b.x=r.x1+(r.x2-r.x1)*M,b.y=r.y1+(r.y2-r.y1)*M),o.push(b)}return o};S.exports=u},39757:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141);function y(h,l,n,o){var f=h-n,r=l-o,d=f*f+r*r;return Math.sqrt(d)}var u=function(h,l){l===void 0&&(l=new c);var n=h.x1,o=h.y1,f=h.x2,r=h.y2,d=h.x3,p=h.y3,v=y(d,p,f,r),g=y(n,o,d,p),m=y(f,r,n,o),T=v+g+m;return l.x=(n*v+f*g+d*m)/T,l.y=(o*v+r*g+p*m)/T,l};S.exports=u},13584:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return s.x1+=c,s.y1+=y,s.x2+=c,s.y2+=y,s.x3+=c,s.y3+=y,s};S.exports=w},1376:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35001),y=function(u){var h=u.getLineA(),l=u.getLineB(),n=u.getLineC();return c(h)+c(l)+c(n)};S.exports=y},90260:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2141),y=function(u,h){h===void 0&&(h=new c);var l=u.x2-u.x1,n=u.y2-u.y1,o=u.x3-u.x1,f=u.y3-u.y1,r=Math.random(),d=Math.random();return r+d>=1&&(r=1-r,d=1-d),h.x=u.x1+(l*r+o*d),h.y=u.y1+(n*r+f*d),h};S.exports=y},52172:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(99614),y=s(39757),u=function(h,l){var n=y(h);return c(h,n.x,n.y,l)};S.exports=u},49907:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(99614),y=function(u,h,l){return c(u,h.x,h.y,l)};S.exports=y},99614:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){var h=Math.cos(u),l=Math.sin(u),n=s.x1-c,o=s.y1-y;return s.x1=n*h-o*l+c,s.y1=n*l+o*h+y,n=s.x2-c,o=s.y2-y,s.x2=n*h-o*l+c,s.y2=n*l+o*h+y,n=s.x3-c,o=s.y3-y,s.x3=n*h-o*l+c,s.y3=n*l+o*h+y,s};S.exports=w},16483:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(10690),u=s(20437),h=s(80672),l=s(23777),n=s(23031),o=s(90260),f=new c({initialize:function(d,p,v,g,m,T){d===void 0&&(d=0),p===void 0&&(p=0),v===void 0&&(v=0),g===void 0&&(g=0),m===void 0&&(m=0),T===void 0&&(T=0),this.type=l.TRIANGLE,this.x1=d,this.y1=p,this.x2=v,this.y2=g,this.x3=m,this.y3=T},contains:function(r,d){return y(this,r,d)},getPoint:function(r,d){return u(this,r,d)},getPoints:function(r,d,p){return h(this,r,d,p)},getRandomPoint:function(r){return o(this,r)},setTo:function(r,d,p,v,g,m){return r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p=0),v===void 0&&(v=0),g===void 0&&(g=0),m===void 0&&(m=0),this.x1=r,this.y1=d,this.x2=p,this.y2=v,this.x3=g,this.y3=m,this},getLineA:function(r){return r===void 0&&(r=new n),r.setTo(this.x1,this.y1,this.x2,this.y2),r},getLineB:function(r){return r===void 0&&(r=new n),r.setTo(this.x2,this.y2,this.x3,this.y3),r},getLineC:function(r){return r===void 0&&(r=new n),r.setTo(this.x3,this.y3,this.x1,this.y1),r},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(r){var d=0;this.x1<=this.x2&&this.x1<=this.x3?d=this.x1-r:this.x2<=this.x1&&this.x2<=this.x3?d=this.x2-r:d=this.x3-r,this.x1-=d,this.x2-=d,this.x3-=d}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(r){var d=0;this.x1>=this.x2&&this.x1>=this.x3?d=this.x1-r:this.x2>=this.x1&&this.x2>=this.x3?d=this.x2-r:d=this.x3-r,this.x1-=d,this.x2-=d,this.x3-=d}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(r){var d=0;this.y1<=this.y2&&this.y1<=this.y3?d=this.y1-r:this.y2<=this.y1&&this.y2<=this.y3?d=this.y2-r:d=this.y3-r,this.y1-=d,this.y2-=d,this.y3-=d}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(r){var d=0;this.y1>=this.y2&&this.y1>=this.y3?d=this.y1-r:this.y2>=this.y1&&this.y2>=this.y3?d=this.y2-r:d=this.y3-r,this.y1-=d,this.y2-=d,this.y3-=d}}});S.exports=f},84435:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(16483);c.Area=s(41658),c.BuildEquilateral=s(39208),c.BuildFromPolygon=s(39545),c.BuildRight=s(90301),c.CenterOn=s(23707),c.Centroid=s(97523),c.CircumCenter=s(24951),c.CircumCircle=s(85614),c.Clone=s(74422),c.Contains=s(10690),c.ContainsArray=s(48653),c.ContainsPoint=s(96006),c.CopyFrom=s(71326),c.Decompose=s(71694),c.Equals=s(33522),c.GetPoint=s(20437),c.GetPoints=s(80672),c.InCenter=s(39757),c.Perimeter=s(1376),c.Offset=s(13584),c.Random=s(90260),c.Rotate=s(52172),c.RotateAroundPoint=s(49907),c.RotateAroundXY=s(99614),S.exports=c},74457:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return{gameObject:s,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:c,hitAreaCallback:y,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};S.exports=w},84409:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return function(y,u,h,l){var n=s.getPixelAlpha(u,h,l.texture.key,l.frame.name);return n&&n>=c}};S.exports=w},7003:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(93301),u=s(50792),h=s(8214),l=s(8443),n=s(78970),o=s(85098),f=s(42515),r=s(36210),d=s(61340),p=s(85955),v=new c({initialize:function(m,T){this.game=m,this.scaleManager,this.canvas,this.config=T,this.enabled=!0,this.events=new u,this.isOver=!0,this.defaultCursor="",this.keyboard=T.inputKeyboard?new n(this):null,this.mouse=T.inputMouse?new o(this):null,this.touch=T.inputTouch?new r(this):null,this.pointers=[],this.pointersTotal=T.inputActivePointers;for(var P=0;P<=this.pointersTotal;P++){var M=new f(this,P);M.smoothFactor=T.inputSmoothFactor,this.pointers.push(M)}this.mousePointer=T.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new d,this._tempMatrix2=new d,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],m.events.once(l.BOOT,this.boot,this)},boot:function(){var g=this.game,m=g.events;this.canvas=g.canvas,this.scaleManager=g.scale,this.events.emit(h.MANAGER_BOOT),m.on(l.PRE_RENDER,this.preRender,this),m.once(l.DESTROY,this.destroy,this)},setCanvasOver:function(g){this.isOver=!0,this.events.emit(h.GAME_OVER,g)},setCanvasOut:function(g){this.isOver=!1,this.events.emit(h.GAME_OUT,g)},preRender:function(){var g=this.game.loop.now,m=this.game.loop.delta,T=this.game.scene.getScenes(!0,!0);this.time=g,this.events.emit(h.MANAGER_UPDATE);for(var P=0;P<T.length;P++){var M=T[P];if(M.sys.input&&M.sys.input.updatePoll(g,m)&&this.globalTopOnly)return}},setDefaultCursor:function(g){this.defaultCursor=g,this.canvas.style.cursor!==g&&(this.canvas.style.cursor=g)},setCursor:function(g){g.cursor&&(this.canvas.style.cursor=g.cursor)},resetCursor:function(g,m){(m||g&&g.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(g){g===void 0&&(g=1);var m=[];this.pointersTotal+g>10&&(g=10-this.pointersTotal);for(var T=0;T<g;T++){var P=this.pointers.length,M=new f(this,P);M.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(M),this.pointersTotal++,m.push(M)}return m},updateInputPlugins:function(g,m){var T=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var P=0;P<T.length;P++){var M=T[P];if(M.sys.input){var b=M.sys.input.update(g,m);if(b&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(g){for(var m=this.pointers,T=[],P=0;P<g.changedTouches.length;P++)for(var M=g.changedTouches[P],b=1;b<m.length;b++){var R=m[b];if(!R.active){R.touchstart(M,g),this.activePointer=R,T.push(R);break}}this.updateInputPlugins(y.TOUCH_START,T)},onTouchMove:function(g){for(var m=this.pointers,T=[],P=0;P<g.changedTouches.length;P++)for(var M=g.changedTouches[P],b=1;b<m.length;b++){var R=m[b];if(R.active&&R.identifier===M.identifier){var A=document.elementFromPoint(M.clientX,M.clientY),D=A===this.canvas;!this.isOver&&D?this.setCanvasOver(g):this.isOver&&!D&&this.setCanvasOut(g),this.isOver&&(R.touchmove(M,g),this.activePointer=R,T.push(R));break}}this.updateInputPlugins(y.TOUCH_MOVE,T)},onTouchEnd:function(g){for(var m=this.pointers,T=[],P=0;P<g.changedTouches.length;P++)for(var M=g.changedTouches[P],b=1;b<m.length;b++){var R=m[b];if(R.active&&R.identifier===M.identifier){R.touchend(M,g),T.push(R);break}}this.updateInputPlugins(y.TOUCH_END,T)},onTouchCancel:function(g){for(var m=this.pointers,T=[],P=0;P<g.changedTouches.length;P++)for(var M=g.changedTouches[P],b=1;b<m.length;b++){var R=m[b];if(R.active&&R.identifier===M.identifier){R.touchcancel(M,g),T.push(R);break}}this.updateInputPlugins(y.TOUCH_CANCEL,T)},onMouseDown:function(g){var m=this.mousePointer;m.down(g),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(y.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(g){var m=this.mousePointer;m.move(g),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(y.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(g){var m=this.mousePointer;m.up(g),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(y.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(g){var m=this.mousePointer;m.wheel(g),this.activePointer=m,this.updateInputPlugins(y.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(g){var m=this.mouse.locked;this.mousePointer.locked=m,this.events.emit(h.POINTERLOCK_CHANGE,g,m)},inputCandidate:function(g,m){var T=g.input;if(!T||!T.enabled||!g.willRender(m))return!1;var P=!0,M=g.parentContainer;if(M)do{if(!M.willRender(m)){P=!1;break}M=M.parentContainer}while(M);return P},hitTest:function(g,m,T,P){P===void 0&&(P=this._tempHitTest);var M=this._tempPoint,b=T.scrollX,R=T.scrollY;P.length=0;var A=g.x,D=g.y;T.getWorldPoint(A,D,M),g.worldX=M.x,g.worldY=M.y;for(var G={x:0,y:0},F=this._tempMatrix,B=this._tempMatrix2,N=0;N<m.length;N++){var z=m[N];if(this.inputCandidate(z,T)){var $=M.x+b*z.scrollFactorX-b,Q=M.y+R*z.scrollFactorY-R;z.parentContainer?(z.getWorldTransformMatrix(F,B),F.applyInverse($,Q,G)):p($,Q,z.x,z.y,z.rotation,z.scaleX,z.scaleY,G),this.pointWithinHitArea(z,G.x,G.y)&&P.push(z)}}return P},pointWithinHitArea:function(g,m,T){m+=g.displayOriginX,T+=g.displayOriginY;var P=g.input;return P&&P.hitAreaCallback(P.hitArea,m,T,g)?(P.localX=m,P.localY=T,!0):!1},pointWithinInteractiveObject:function(g,m,T){return g.hitArea?(m+=g.gameObject.displayOriginX,T+=g.gameObject.displayOriginY,g.localX=m,g.localY=T,g.hitAreaCallback(g.hitArea,m,T,g)):!1},transformPointer:function(g,m,T,P){var M=g.position,b=g.prevPosition;b.x=M.x,b.y=M.y;var R=this.scaleManager.transformX(m),A=this.scaleManager.transformY(T),D=g.smoothFactor;!P||D===0?(M.x=R,M.y=A):(M.x=R*D+b.x*(1-D),M.y=A*D+b.y*(1-D))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(l.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var g=0;g<this.pointers.length;g++)this.pointers[g].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});S.exports=v},48205:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(96503),y=s(87902),u=s(83419),h=s(93301),l=s(74457),n=s(84409),o=s(20339),f=s(8497),r=s(81154),d=s(8214),p=s(50792),v=s(95540),g=s(23777),m=s(89639),T=s(41212),P=s(37277),M=s(87841),b=s(37303),R=s(44594),A=s(16483),D=s(10690),G=new u({Extends:p,initialize:function(B){p.call(this),this.scene=B,this.systems=B.sys,this.settings=B.sys.settings,this.manager=B.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,m.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var N={cancelled:!1};this._eventContainer={stopPropagation:function(){N.cancelled=!0}},this._eventData=N,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,B.sys.events.once(R.BOOT,this.boot,this),B.sys.events.on(R.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(R.DESTROY,this.destroy,this),this.pluginEvents.emit(d.BOOT)},start:function(){var F=this.systems.events;F.on(R.TRANSITION_START,this.transitionIn,this),F.on(R.TRANSITION_OUT,this.transitionOut,this),F.on(R.TRANSITION_COMPLETE,this.transitionComplete,this),F.on(R.PRE_UPDATE,this.preUpdate,this),F.once(R.SHUTDOWN,this.shutdown,this),this.manager.events.on(d.GAME_OUT,this.onGameOut,this),this.manager.events.on(d.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(d.START)},onGameOver:function(F){this.isActive()&&this.emit(d.GAME_OVER,F.timeStamp,F)},onGameOut:function(F){this.isActive()&&this.emit(d.GAME_OUT,F.timeStamp,F)},preUpdate:function(){this.pluginEvents.emit(d.PRE_UPDATE);var F=this._pendingRemoval,B=this._pendingInsertion,N=F.length,z=B.length;if(!(N===0&&z===0)){for(var $=this._list,Q=0;Q<N;Q++){var Z=F[Q],tt=$.indexOf(Z);tt>-1&&($.splice(tt,1),this.clear(Z,!0))}this._pendingRemoval.length=0,this._list=$.concat(B.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(F){this.manager&&this.manager.setCursor(F)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(F,B){if(!this.isActive())return!1;if(this.pluginEvents.emit(d.UPDATE,F,B),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var N,z=this.manager,$=z.pointers;for(N=0;N<$.length;N++)$[N].updateMotion();if(this._list.length===0)return!1;var Q=this.pollRate;if(Q===-1)return!1;if(Q>0)if(this._pollTimer-=B,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var Z=!1;for(N=0;N<$.length;N++){var tt=0,H=$[N];this._tempZones=[],this._temp=this.hitTestPointer(H),this.sortGameObjects(this._temp,H),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),tt+=this.processOverOutEvents(H),this.getDragState(H)===2&&this.processDragThresholdEvent(H,F),tt>0&&(Z=!0)}return Z},update:function(F,B){if(!this.isActive())return!1;for(var N=!1,z=0;z<B.length;z++){var $=0,Q=B[z];switch(this._tempZones=[],this._temp=this.hitTestPointer(Q),this.sortGameObjects(this._temp,Q),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),F){case h.MOUSE_DOWN:$+=this.processDragDownEvent(Q),$+=this.processDownEvents(Q),$+=this.processOverOutEvents(Q);break;case h.MOUSE_UP:$+=this.processDragUpEvent(Q),$+=this.processUpEvents(Q),$+=this.processOverOutEvents(Q);break;case h.TOUCH_START:$+=this.processDragDownEvent(Q),$+=this.processDownEvents(Q),$+=this.processOverEvents(Q);break;case h.TOUCH_END:case h.TOUCH_CANCEL:$+=this.processDragUpEvent(Q),$+=this.processUpEvents(Q),$+=this.processOutEvents(Q);break;case h.MOUSE_MOVE:case h.TOUCH_MOVE:$+=this.processDragMoveEvent(Q),$+=this.processMoveEvents(Q),$+=this.processOverOutEvents(Q);break;case h.MOUSE_WHEEL:$+=this.processWheelEvent(Q);break}$>0&&(N=!0)}return this._updatedThisFrame=!0,N},clear:function(F,B){B===void 0&&(B=!1),this.disable(F);var N=F.input;N&&(this.removeDebug(F),this.manager.resetCursor(N),N.gameObject=void 0,N.target=void 0,N.hitArea=void 0,N.hitAreaCallback=void 0,N.callbackContext=void 0,F.input=null),B||this.queueForRemoval(F);var z=this._draggable.indexOf(F);return z>-1&&this._draggable.splice(z,1),F},disable:function(F,B){B===void 0&&(B=!1);var N=F.input;N&&(N.enabled=!1,N.dragState=0);for(var z=this._drag,$=this._over,Q=this.manager,Z=0,tt;Z<Q.pointers.length;Z++)tt=z[Z].indexOf(F),tt>-1&&z[Z].splice(tt,1),tt=$[Z].indexOf(F),tt>-1&&$[Z].splice(tt,1);return B&&this.resetCursor(),this},enable:function(F,B,N,z){return z===void 0&&(z=!1),F.input?F.input.enabled=!0:this.setHitArea(F,B,N),F.input&&z&&!F.input.dropZone&&(F.input.dropZone=z),this},hitTestPointer:function(F){for(var B=this.cameras.getCamerasBelowPointer(F),N=0;N<B.length;N++){for(var z=B[N],$=this.manager.hitTest(F,this._list,z),Q=0;Q<$.length;Q++){var Z=$[Q];Z.input.dropZone&&this._tempZones.push(Z)}if($.length>0)return F.camera=z,$}return F.camera=B[0],[]},processDownEvents:function(F){var B=0,N=this._temp,z=this._eventData,$=this._eventContainer;z.cancelled=!1;for(var Q=0;Q<N.length;Q++){var Z=N[Q];if(!(!Z.input||!Z.input.enabled)&&(B++,Z.emit(d.GAMEOBJECT_POINTER_DOWN,F,Z.input.localX,Z.input.localY,$),z.cancelled||!this.isActive()||Z.input&&Z.input.enabled&&(this.emit(d.GAMEOBJECT_DOWN,F,Z,$),z.cancelled||!this.isActive())))break}return!z.cancelled&&this.isActive()&&(F.downElement===this.manager.game.canvas?this.emit(d.POINTER_DOWN,F,N):this.emit(d.POINTER_DOWN_OUTSIDE,F)),B},getDragState:function(F){return this._dragState[F.id]},setDragState:function(F,B){this._dragState[F.id]=B},processDragThresholdEvent:function(F,B){var N=!1,z=this.dragTimeThreshold,$=this.dragDistanceThreshold;if(($>0&&o(F.x,F.y,F.downX,F.downY)>=$||z>0&&B>=F.downTime+z)&&(N=!0),N)return this.setDragState(F,3),this.processDragStartList(F)},processDragStartList:function(F){if(this.getDragState(F)!==3)return 0;var B=this._drag[F.id];B.length>1&&(B=B.slice(0));for(var N=0;N<B.length;N++){var z=B[N],$=z.input;$.dragState=2,$.dragStartX=z.x,$.dragStartY=z.y,$.dragStartXGlobal=F.worldX,$.dragStartYGlobal=F.worldY,$.dragStartCamera=F.camera,$.dragX=$.dragStartXGlobal-$.dragStartX,$.dragY=$.dragStartYGlobal-$.dragStartY,z.emit(d.GAMEOBJECT_DRAG_START,F,$.dragX,$.dragY),this.emit(d.DRAG_START,F,z)}return this.setDragState(F,4),B.length},processDragDownEvent:function(F){var B=this._temp;if(this._draggable.length===0||B.length===0||!F.primaryDown||this.getDragState(F)!==0)return 0;this.setDragState(F,1);for(var N=[],z=0;z<B.length;z++){var $=B[z];$.input.draggable&&$.input.dragState===0&&N.push($)}return N.length===0?(this.setDragState(F,0),0):(N.length>1&&(this.sortGameObjects(N,F),this.topOnly&&N.splice(1)),this._drag[F.id]=N,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(F,3),this.processDragStartList(F)):(this.setDragState(F,2),0))},processDragMoveEvent:function(F){if(this.getDragState(F)===2&&this.processDragThresholdEvent(F,this.manager.game.loop.now),this.getDragState(F)!==4)return 0;var B=this._tempZones,N=this._drag[F.id];N.length>1&&(N=N.slice(0));for(var z=0;z<N.length;z++){var $=N[z],Q=$.input,Z=Q.target;if(Z){var tt=B.indexOf(Z);tt===0?($.emit(d.GAMEOBJECT_DRAG_OVER,F,Z),this.emit(d.DRAG_OVER,F,$,Z)):tt>0?($.emit(d.GAMEOBJECT_DRAG_LEAVE,F,Z),this.emit(d.DRAG_LEAVE,F,$,Z),Q.target=B[0],Z=Q.target,$.emit(d.GAMEOBJECT_DRAG_ENTER,F,Z),this.emit(d.DRAG_ENTER,F,$,Z)):($.emit(d.GAMEOBJECT_DRAG_LEAVE,F,Z),this.emit(d.DRAG_LEAVE,F,$,Z),B[0]?(Q.target=B[0],Z=Q.target,$.emit(d.GAMEOBJECT_DRAG_ENTER,F,Z),this.emit(d.DRAG_ENTER,F,$,Z)):Q.target=null)}else!Z&&B[0]&&(Q.target=B[0],Z=Q.target,$.emit(d.GAMEOBJECT_DRAG_ENTER,F,Z),this.emit(d.DRAG_ENTER,F,$,Z));var H,J,Y=F.positionToCamera(Q.dragStartCamera);if(!$.parentContainer)H=Y.x-Q.dragX,J=Y.y-Q.dragY;else{var _=Y.x-Q.dragStartXGlobal,U=Y.y-Q.dragStartYGlobal,et=$.getParentRotation(),nt=_*Math.cos(et)+U*Math.sin(et),rt=U*Math.cos(et)-_*Math.sin(et);nt*=1/$.parentContainer.scaleX,rt*=1/$.parentContainer.scaleY,H=nt+Q.dragStartX,J=rt+Q.dragStartY}$.emit(d.GAMEOBJECT_DRAG,F,H,J),this.emit(d.DRAG,F,$,H,J)}return N.length},processDragUpEvent:function(F){var B=this._drag[F.id];B.length>1&&(B=B.slice(0));for(var N=0;N<B.length;N++){var z=B[N],$=z.input;if($&&$.dragState===2){$.dragState=0,$.dragX=$.localX-z.displayOriginX,$.dragY=$.localY-z.displayOriginY,$.dragStartCamera=null;var Q=!1,Z=$.target;Z&&(z.emit(d.GAMEOBJECT_DROP,F,Z),this.emit(d.DROP,F,z,Z),$.target=null,Q=!0),z.input&&z.input.enabled&&(z.emit(d.GAMEOBJECT_DRAG_END,F,$.dragX,$.dragY,Q),this.emit(d.DRAG_END,F,z,Q))}}return this.setDragState(F,0),B.splice(0),0},processMoveEvents:function(F){var B=0,N=this._temp,z=this._eventData,$=this._eventContainer;z.cancelled=!1;for(var Q=0;Q<N.length;Q++){var Z=N[Q];if(!(!Z.input||!Z.input.enabled)&&(B++,Z.emit(d.GAMEOBJECT_POINTER_MOVE,F,Z.input.localX,Z.input.localY,$),z.cancelled||!this.isActive()||Z.input&&Z.input.enabled&&(this.emit(d.GAMEOBJECT_MOVE,F,Z,$),z.cancelled||!this.isActive()||this.topOnly)))break}return!z.cancelled&&this.isActive()&&this.emit(d.POINTER_MOVE,F,N),B},processWheelEvent:function(F){var B=0,N=this._temp,z=this._eventData,$=this._eventContainer;z.cancelled=!1;for(var Q=F.deltaX,Z=F.deltaY,tt=F.deltaZ,H=0;H<N.length;H++){var J=N[H];if(!(!J.input||!J.input.enabled)&&(B++,J.emit(d.GAMEOBJECT_POINTER_WHEEL,F,Q,Z,tt,$),z.cancelled||!this.isActive()||J.input&&J.input.enabled&&(this.emit(d.GAMEOBJECT_WHEEL,F,J,Q,Z,tt,$),z.cancelled||!this.isActive())))break}return!z.cancelled&&this.isActive()&&this.emit(d.POINTER_WHEEL,F,N,Q,Z,tt),B},processOverEvents:function(F){var B=this._temp,N=0,z=B.length,$=[];if(z>0){var Q=this.manager,Z=this._eventData,tt=this._eventContainer;Z.cancelled=!1;for(var H=0;H<z;H++){var J=B[H];if(!(!J.input||!J.input.enabled)&&($.push(J),Q.setCursor(J.input),J.emit(d.GAMEOBJECT_POINTER_OVER,F,J.input.localX,J.input.localY,tt),N++,Z.cancelled||!this.isActive()||J.input&&J.input.enabled&&(this.emit(d.GAMEOBJECT_OVER,F,J,tt),Z.cancelled||!this.isActive())))break}!Z.cancelled&&this.isActive()&&this.emit(d.POINTER_OVER,F,$)}return this._over[F.id]=$,N},processOutEvents:function(F){var B=this._over[F.id],N=0,z=B.length;if(z>0){var $=this.manager,Q=this._eventData,Z=this._eventContainer;Q.cancelled=!1,this.sortGameObjects(B,F);for(var tt=0;tt<z;tt++){var H=B[tt];if(H=B[tt],!(!H.input||!H.input.enabled)&&($.resetCursor(H.input),H.emit(d.GAMEOBJECT_POINTER_OUT,F,Z),N++,Q.cancelled||!this.isActive()||H.input&&H.input.enabled&&(this.emit(d.GAMEOBJECT_OUT,F,H,Z),Q.cancelled||!this.isActive())))break}!Q.cancelled&&this.isActive()&&this.emit(d.POINTER_OUT,F,B),this._over[F.id]=[]}return N},processOverOutEvents:function(F){var B=this._temp,N,z,$=[],Q=[],Z=[],tt=this._over[F.id],H=this._drag[F.id],J=this.manager;for(N=0;N<tt.length;N++)z=tt[N],B.indexOf(z)===-1&&H.indexOf(z)===-1?$.push(z):Z.push(z);for(N=0;N<B.length;N++)z=B[N],tt.indexOf(z)===-1&&Q.push(z);var Y=$.length,_=0,U=this._eventData,et=this._eventContainer;if(U.cancelled=!1,Y>0){for(this.sortGameObjects($,F),N=0;N<Y&&(z=$[N],!(!(!z.input||!z.input.enabled)&&(J.resetCursor(z.input),z.emit(d.GAMEOBJECT_POINTER_OUT,F,et),_++,U.cancelled||!this.isActive()||z.input&&z.input.enabled&&(this.emit(d.GAMEOBJECT_OUT,F,z,et),U.cancelled||!this.isActive()))));N++);(!U.cancelled||this.isActive())&&this.emit(d.POINTER_OUT,F,$)}if(Y=Q.length,U.cancelled=!1,Y>0){for(this.sortGameObjects(Q,F),N=0;N<Y&&(z=Q[N],!(!(!z.input||!z.input.enabled)&&(J.setCursor(z.input),z.emit(d.GAMEOBJECT_POINTER_OVER,F,z.input.localX,z.input.localY,et),_++,U.cancelled||!this.isActive()||z.input&&z.input.enabled&&(this.emit(d.GAMEOBJECT_OVER,F,z,et),U.cancelled||!this.isActive()))));N++);!U.cancelled&&this.isActive()&&this.emit(d.POINTER_OVER,F,Q)}return tt=Z.concat(Q),this._over[F.id]=this.sortGameObjects(tt,F),_},processUpEvents:function(F){var B=this._temp,N=this._eventData,z=this._eventContainer;N.cancelled=!1;for(var $=0;$<B.length;$++){var Q=B[$];if(!(!Q.input||!Q.input.enabled)&&(Q.emit(d.GAMEOBJECT_POINTER_UP,F,Q.input.localX,Q.input.localY,z),N.cancelled||!this.isActive()||Q.input&&Q.input.enabled&&(this.emit(d.GAMEOBJECT_UP,F,Q,z),N.cancelled||!this.isActive())))break}return!N.cancelled&&this.isActive()&&(F.upElement===this.manager.game.canvas?this.emit(d.POINTER_UP,F,B):this.emit(d.POINTER_UP_OUTSIDE,F)),B.length},forceDownState:function(F,B){this.forceState(F,B,d.GAMEOBJECT_POINTER_DOWN,d.GAMEOBJECT_DOWN,!1)},forceUpState:function(F,B){this.forceState(F,B,d.GAMEOBJECT_POINTER_UP,d.GAMEOBJECT_UP,!1)},forceOverState:function(F,B){this.forceState(F,B,d.GAMEOBJECT_POINTER_OVER,d.GAMEOBJECT_OVER,!0)},forceOutState:function(F,B){this.forceState(F,B,d.GAMEOBJECT_POINTER_OUT,d.GAMEOBJECT_OUT,!1)},forceState:function(F,B,N,z,$){var Q=this._eventData,Z=this._eventContainer;Q.cancelled=!1,B.input&&B.input.enabled&&(B.emit(N,F,B.input.localX,B.input.localY,Z),$&&this.setCursor(B.input),!Q.cancelled&&this.isActive()&&B.input&&B.input.enabled&&this.emit(z,F,B,Z))},queueForInsertion:function(F){return this._pendingInsertion.indexOf(F)===-1&&this._list.indexOf(F)===-1&&this._pendingInsertion.push(F),this},queueForRemoval:function(F){return this._pendingRemoval.push(F),this},setDraggable:function(F,B){B===void 0&&(B=!0),Array.isArray(F)||(F=[F]);for(var N=0;N<F.length;N++){var z=F[N];z.input.draggable=B;var $=this._draggable.indexOf(z);B&&$===-1?this._draggable.push(z):!B&&$>-1&&this._draggable.splice($,1)}return this},makePixelPerfect:function(F){F===void 0&&(F=1);var B=this.systems.textures;return n(B,F)},setHitArea:function(F,B,N){if(B===void 0)return this.setHitAreaFromTexture(F);Array.isArray(F)||(F=[F]);var z=!1,$=!1,Q=!1,Z=!1,tt=!1,H=!0;if(T(B)&&Object.keys(B).length){var J=B,Y=F.some(function(rt){return rt.hasOwnProperty("faces")});if(!Y){B=v(J,"hitArea",null),N=v(J,"hitAreaCallback",null),tt=v(J,"pixelPerfect",!1);var _=v(J,"alphaTolerance",1);tt&&(B={},N=this.makePixelPerfect(_))}z=v(J,"draggable",!1),$=v(J,"dropZone",!1),Q=v(J,"cursor",!1),Z=v(J,"useHandCursor",!1),(!B||!N)&&(this.setHitAreaFromTexture(F),H=!1)}else typeof B=="function"&&!N&&(N=B,B={});for(var U=0;U<F.length;U++){var et=F[U];if(tt&&et.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var nt=et.input?et.input:l(et,B,N);nt.customHitArea=H,nt.dropZone=$,nt.cursor=Z?"pointer":Q,et.input=nt,z&&this.setDraggable(et),this.queueForInsertion(et)}return this},setHitAreaCircle:function(F,B,N,z,$){$===void 0&&($=y);var Q=new c(B,N,z);return this.setHitArea(F,Q,$)},setHitAreaEllipse:function(F,B,N,z,$,Q){Q===void 0&&(Q=r);var Z=new f(B,N,z,$);return this.setHitArea(F,Z,Q)},setHitAreaFromTexture:function(F,B){B===void 0&&(B=b),Array.isArray(F)||(F=[F]);for(var N=0;N<F.length;N++){var z=F[N],$=z.frame,Q=0,Z=0;if(z.width?(Q=z.width,Z=z.height):$&&(Q=$.realWidth,Z=$.realHeight),z.type==="Container"&&(Q===0||Z===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}Q!==0&&Z!==0&&(z.input=l(z,new M(0,0,Q,Z),B),this.queueForInsertion(z))}return this},setHitAreaRectangle:function(F,B,N,z,$,Q){Q===void 0&&(Q=b);var Z=new M(B,N,z,$);return this.setHitArea(F,Z,Q)},setHitAreaTriangle:function(F,B,N,z,$,Q,Z,tt){tt===void 0&&(tt=D);var H=new A(B,N,z,$,Q,Z);return this.setHitArea(F,H,tt)},enableDebug:function(F,B){B===void 0&&(B=65280);var N=F.input;if(!N||!N.hitArea)return this;var z=N.hitArea,$=z.type,Q=N.hitAreaDebug,Z=this.systems.add,tt=this.systems.updateList;Q&&(tt.remove(Q),Q.destroy(),Q=null);var H=0,J=0;switch($){case g.CIRCLE:Q=Z.arc(0,0,z.radius),H=z.x-z.radius,J=z.y-z.radius;break;case g.ELLIPSE:Q=Z.ellipse(0,0,z.width,z.height),H=z.x-z.width/2,J=z.y-z.height/2;break;case g.LINE:Q=Z.line(0,0,z.x1,z.y1,z.x2,z.y2);break;case g.POLYGON:Q=Z.polygon(0,0,z.points);break;case g.RECTANGLE:Q=Z.rectangle(0,0,z.width,z.height),H=z.x,J=z.y;break;case g.TRIANGLE:Q=Z.triangle(0,0,z.x1,z.y1,z.x2,z.y2,z.x3,z.y3);break}return Q&&(Q.isFilled=!1,Q.strokeColor=B,Q.preUpdate=function(){Q.setVisible(F.visible),Q.setStrokeStyle(1/F.scale,Q.strokeColor),Q.setDisplayOrigin(F.displayOriginX,F.displayOriginY);var Y=F.x,_=F.y,U=F.rotation,et=F.scaleX,nt=F.scaleY;if(F.parentContainer){var rt=F.getWorldTransformMatrix();Y=rt.tx,_=rt.ty,U=rt.rotation,et=rt.scaleX,nt=rt.scaleY}Q.setRotation(U),Q.setScale(et,nt),Q.setPosition(Y+H*et,_+J*nt),Q.setScrollFactor(F.scrollFactorX,F.scrollFactorY),Q.setDepth(F.depth)},tt.add(Q),N.hitAreaDebug=Q),this},removeDebug:function(F){var B=F.input;if(B&&B.hitAreaDebug){var N=B.hitAreaDebug;N.destroy(),B.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(F){return this.pollRate=F,this._pollTimer=0,this},setGlobalTopOnly:function(F){return this.manager.globalTopOnly=F,this},setTopOnly:function(F){return this.topOnly=F,this},sortGameObjects:function(F,B){if(F.length<2||!B.camera)return F;var N=B.camera.renderList;return F.sort(function(z,$){var Q=Math.max(N.indexOf(z),0),Z=Math.max(N.indexOf($),0);return Z-Q})},sortDropZones:function(F){return F.length<2?F:(this.scene.sys.depthSort(),F.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(F,B){if(!F.parentContainer&&!B.parentContainer)return this.displayList.getIndex(B)-this.displayList.getIndex(F);if(F.parentContainer===B.parentContainer)return B.parentContainer.getIndex(B)-F.parentContainer.getIndex(F);if(F.parentContainer===B)return-1;if(B.parentContainer===F)return 1;for(var N=F.getIndexList(),z=B.getIndexList(),$=Math.min(N.length,z.length),Q=0;Q<$;Q++){var Z=N[Q],tt=z[Q];if(Z!==tt)return tt-Z}return z.length-N.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(F){return this.manager.addPointer(F)},setDefaultCursor:function(F){return this.manager.setDefaultCursor(F),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(d.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var F=0;F<10;F++)this._drag[F]=[],this._over[F]=[];this.removeAllListeners();var B=this.manager;B.canvas.style.cursor=B.defaultCursor;var N=this.systems.events;N.off(R.TRANSITION_START,this.transitionIn,this),N.off(R.TRANSITION_OUT,this.transitionOut,this),N.off(R.TRANSITION_COMPLETE,this.transitionComplete,this),N.off(R.PRE_UPDATE,this.preUpdate,this),B.events.off(d.GAME_OUT,this.onGameOut,this),B.events.off(d.GAME_OVER,this.onGameOver,this),N.off(R.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var F=this.manager.pointers,B=0;B<F.length;B++)F[B].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(d.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(R.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});P.register("InputPlugin",G,"input"),S.exports=G},89639:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35154),y={},u={};u.register=function(h,l,n,o,f){y[h]={plugin:l,mapping:n,settingsKey:o,configKey:f}},u.getPlugin=function(h){return y[h]},u.install=function(h){var l=h.scene.sys,n=l.settings.input,o=l.game.config;for(var f in y){var r=y[f].plugin,d=y[f].mapping,p=y[f].settingsKey,v=y[f].configKey;c(n,p,o[v])&&(h[d]=new r(h))}},u.remove=function(h){y.hasOwnProperty(h)&&delete y[h]},S.exports=u},42515:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(31040),y=s(83419),u=s(20339),h=s(43855),l=s(47235),n=s(26099),o=s(25892),f=new y({initialize:function(d,p){this.manager=d,this.id=p,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new n,this.prevPosition=new n,this.midPoint=new n(-1,-1),this.velocity=new n,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=p===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(r){var d=r.getWorldPoint(this.x,this.y);return this.worldX=d.x,this.worldY=d.y,this},positionToCamera:function(r,d){return r.getWorldPoint(this.x,this.y,d)},updateMotion:function(){var r=this.position.x,d=this.position.y,p=this.midPoint.x,v=this.midPoint.y;if(!(r===p&&d===v)){var g=l(this.motionFactor,p,r),m=l(this.motionFactor,v,d);h(g,r,.1)&&(g=r),h(m,d,.1)&&(m=d),this.midPoint.set(g,m);var T=r-g,P=d-m;this.velocity.set(T,P),this.angle=c(g,m,r,d),this.distance=Math.sqrt(T*T+P*P)}},up:function(r){"buttons"in r&&(this.buttons=r.buttons),this.event=r,this.button=r.button,this.upElement=r.target,this.manager.transformPointer(this,r.pageX,r.pageY,!1),r.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=r.timeStamp,this.wasTouch=!1)},down:function(r){"buttons"in r&&(this.buttons=r.buttons),this.event=r,this.button=r.button,this.downElement=r.target,this.manager.transformPointer(this,r.pageX,r.pageY,!1),r.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),o.macOS&&r.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=r.timeStamp),this.wasTouch=!1},move:function(r){"buttons"in r&&(this.buttons=r.buttons),this.event=r,this.manager.transformPointer(this,r.pageX,r.pageY,!0),this.locked&&(this.movementX=r.movementX||r.mozMovementX||r.webkitMovementX||0,this.movementY=r.movementY||r.mozMovementY||r.webkitMovementY||0),this.moveTime=r.timeStamp,this.wasTouch=!1},wheel:function(r){"buttons"in r&&(this.buttons=r.buttons),this.event=r,this.manager.transformPointer(this,r.pageX,r.pageY,!1),this.deltaX=r.deltaX,this.deltaY=r.deltaY,this.deltaZ=r.deltaZ,this.wasTouch=!1},touchstart:function(r,d){r.pointerId&&(this.pointerId=r.pointerId),this.identifier=r.identifier,this.target=r.target,this.active=!0,this.buttons=1,this.event=d,this.downElement=r.target,this.manager.transformPointer(this,r.pageX,r.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=d.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(r,d){this.event=d,this.manager.transformPointer(this,r.pageX,r.pageY,!0),this.moveTime=d.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(r,d){this.buttons=0,this.event=d,this.upElement=r.target,this.manager.transformPointer(this,r.pageX,r.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=d.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(r,d){this.buttons=0,this.event=d,this.upElement=r.target,this.manager.transformPointer(this,r.pageX,r.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=d.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?u(this.downX,this.downY,this.x,this.y):u(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?c(this.downX,this.downY,this.x,this.y):c(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(r,d){r===void 0&&(r=10),d===void 0&&(d=[]);for(var p=this.prevPosition.x,v=this.prevPosition.y,g=this.position.x,m=this.position.y,T=0;T<r;T++){var P=1/r*T;d[T]={x:l(P,p,g),y:l(P,v,m)}}return d},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(r){this.position.x=r}},y:{get:function(){return this.position.y},set:function(r){this.position.y=r}},time:{get:function(){return this.event?this.event.timeStamp:0}}});S.exports=f},93301:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};S.exports=w},7179:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="boot"},85375:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="destroy"},39843:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="dragend"},23388:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="dragenter"},16133:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="drag"},27829:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="dragleave"},53904:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="dragover"},56058:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="dragstart"},2642:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="drop"},88171:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="gameobjectdown"},36147:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="dragend"},71692:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="dragenter"},96149:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="drag"},81285:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="dragleave"},74048:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="dragover"},21322:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="dragstart"},49378:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="drop"},86754:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="gameobjectmove"},86433:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="gameobjectout"},60709:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="gameobjectover"},24081:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pointerdown"},11172:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pointermove"},18907:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pointerout"},95579:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pointerover"},35368:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pointerup"},26972:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="wheel"},47078:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="gameobjectup"},73802:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="gameobjectwheel"},56718:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="gameout"},25936:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="gameover"},27503:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="boot"},50852:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="process"},96438:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="update"},59152:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pointerlockchange"},47777:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pointerdown"},27957:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pointerdownoutside"},19444:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pointermove"},54251:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pointerout"},18667:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pointerover"},27192:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pointerup"},24652:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pointerupoutside"},45132:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="wheel"},44512:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="preupdate"},15757:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="shutdown"},41637:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="start"},93802:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="update"},8214:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={BOOT:s(7179),DESTROY:s(85375),DRAG_END:s(39843),DRAG_ENTER:s(23388),DRAG:s(16133),DRAG_LEAVE:s(27829),DRAG_OVER:s(53904),DRAG_START:s(56058),DROP:s(2642),GAME_OUT:s(56718),GAME_OVER:s(25936),GAMEOBJECT_DOWN:s(88171),GAMEOBJECT_DRAG_END:s(36147),GAMEOBJECT_DRAG_ENTER:s(71692),GAMEOBJECT_DRAG:s(96149),GAMEOBJECT_DRAG_LEAVE:s(81285),GAMEOBJECT_DRAG_OVER:s(74048),GAMEOBJECT_DRAG_START:s(21322),GAMEOBJECT_DROP:s(49378),GAMEOBJECT_MOVE:s(86754),GAMEOBJECT_OUT:s(86433),GAMEOBJECT_OVER:s(60709),GAMEOBJECT_POINTER_DOWN:s(24081),GAMEOBJECT_POINTER_MOVE:s(11172),GAMEOBJECT_POINTER_OUT:s(18907),GAMEOBJECT_POINTER_OVER:s(95579),GAMEOBJECT_POINTER_UP:s(35368),GAMEOBJECT_POINTER_WHEEL:s(26972),GAMEOBJECT_UP:s(47078),GAMEOBJECT_WHEEL:s(73802),MANAGER_BOOT:s(27503),MANAGER_PROCESS:s(50852),MANAGER_UPDATE:s(96438),POINTER_DOWN:s(47777),POINTER_DOWN_OUTSIDE:s(27957),POINTER_MOVE:s(19444),POINTER_OUT:s(54251),POINTER_OVER:s(18667),POINTER_UP:s(27192),POINTER_UP_OUTSIDE:s(24652),POINTER_WHEEL:s(45132),POINTERLOCK_CHANGE:s(59152),PRE_UPDATE:s(44512),SHUTDOWN:s(15757),START:s(41637),UPDATE:s(93802)}},97421:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l){this.pad=h,this.events=h.events,this.index=l,this.value=0,this.threshold=.1},update:function(u){this.value=u},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});S.exports=y},28884:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(92734),u=new c({initialize:function(l,n){this.pad=l,this.events=l.manager,this.index=n,this.value=0,this.threshold=1,this.pressed=!1},update:function(h){this.value=h;var l=this.pad,n=this.index;h>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(y.BUTTON_DOWN,l,this,h),this.pad.emit(y.GAMEPAD_BUTTON_DOWN,n,h,this)):this.pressed&&(this.pressed=!1,this.events.emit(y.BUTTON_UP,l,this,h),this.pad.emit(y.GAMEPAD_BUTTON_UP,n,h,this))},destroy:function(){this.pad=null,this.events=null}});S.exports=u},99125:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(97421),y=s(28884),u=s(83419),h=s(50792),l=s(26099),n=new u({Extends:h,initialize:function(f,r){h.call(this),this.manager=f,this.pad=r,this.id=r.id,this.index=r.index;for(var d=[],p=0;p<r.buttons.length;p++)d.push(new y(this,p));this.buttons=d;var v=[];for(p=0;p<r.axes.length;p++)v.push(new c(this,p));this.axes=v,this.vibration=r.vibrationActuator;var g={value:0,pressed:!1};this._LCLeft=d[14]?d[14]:g,this._LCRight=d[15]?d[15]:g,this._LCTop=d[12]?d[12]:g,this._LCBottom=d[13]?d[13]:g,this._RCLeft=d[2]?d[2]:g,this._RCRight=d[1]?d[1]:g,this._RCTop=d[3]?d[3]:g,this._RCBottom=d[0]?d[0]:g,this._FBLeftTop=d[4]?d[4]:g,this._FBLeftBottom=d[6]?d[6]:g,this._FBRightTop=d[5]?d[5]:g,this._FBRightBottom=d[7]?d[7]:g;var m={value:0};this._HAxisLeft=v[0]?v[0]:m,this._VAxisLeft=v[1]?v[1]:m,this._HAxisRight=v[2]?v[2]:m,this._VAxisRight=v[3]?v[3]:m,this.leftStick=new l,this.rightStick=new l,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(o){return this.axes[o].getValue()},setAxisThreshold:function(o){for(var f=0;f<this.axes.length;f++)this.axes[f].threshold=o},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(o){return this.buttons[o].value},isButtonDown:function(o){return this.buttons[o].pressed},update:function(o){if(!(o.timestamp<this._created)){var f,r=this.buttons,d=o.buttons,p=r.length;for(f=0;f<p;f++)r[f].update(d[f].value);var v=this.axes,g=o.axes;for(p=v.length,f=0;f<p;f++)v[f].update(g[f]);p>=2&&(this.leftStick.set(v[0].getValue(),v[1].getValue()),p>=4&&this.rightStick.set(v[2].getValue(),v[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var o;for(o=0;o<this.buttons.length;o++)this.buttons[o].destroy();for(o=0;o<this.axes.length;o++)this.axes[o].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});S.exports=n},56654:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(50792),u=s(92734),h=s(99125),l=s(35154),n=s(89639),o=s(8214),f=new c({Extends:y,initialize:function(d){y.call(this),this.scene=d.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=d,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,d.pluginEvents.once(o.BOOT,this.boot,this),d.pluginEvents.on(o.START,this.start,this)},boot:function(){var r=this.scene.sys.game,d=this.settings.input,p=r.config;this.enabled=l(d,"gamepad",p.inputGamepad)&&r.device.input.gamepads,this.target=l(d,"gamepad.target",p.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(o.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(o.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var r=this,d=this.target,p=function(v){v.defaultPrevented||!r.isActive()||(r.refreshPads(),r.queue.push(v))};this.onGamepadHandler=p,d.addEventListener("gamepadconnected",p,!1),d.addEventListener("gamepaddisconnected",p,!1),this.sceneInputPlugin.pluginEvents.on(o.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(o.UPDATE,this.update);for(var r=0;r<this.gamepads.length;r++)this.gamepads[r].removeAllListeners()},disconnectAll:function(){for(var r=0;r<this.gamepads.length;r++)this.gamepads[r].pad.connected=!1},refreshPads:function(){var r=navigator.getGamepads();if(!r)this.disconnectAll();else for(var d=this.gamepads,p=0;p<r.length;p++){var v=r[p];if(v){var g=v.id,m=v.index,T=d[m];if(T)T.id!==g?(T.destroy(),d[m]=new h(this,v)):T.update(v);else{var P=new h(this,v);d[m]=P,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=P):this._pad3=P:this._pad2=P:this._pad1=P}}}},getAll:function(){for(var r=[],d=this.gamepads,p=0;p<d.length;p++)d[p]&&r.push(d[p]);return r},getPad:function(r){for(var d=this.gamepads,p=0;p<d.length;p++)if(d[p]&&d[p].index===r)return d[p]},update:function(){if(this.enabled){this.refreshPads();var r=this.queue.length;if(r!==0)for(var d=this.queue.splice(0,r),p=0;p<r;p++){var v=d[p],g=this.getPad(v.gamepad.index);v.type==="gamepadconnected"?this.emit(u.CONNECTED,g,v):v.type==="gamepaddisconnected"&&this.emit(u.DISCONNECTED,g,v)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var r=0;r<this.gamepads.length;r++)this.gamepads[r]&&this.gamepads[r].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});n.register("GamepadPlugin",f,"gamepad","gamepad","inputGamepad"),S.exports=f},89651:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},65294:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},90089:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},64894:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={DUALSHOCK_4:s(65294),SNES_USB:s(89651),XBOX_360:s(90089)}},46008:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="down"},7629:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="up"},42206:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="connected"},86544:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="disconnected"},94784:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="down"},14325:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="up"},92734:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={BUTTON_DOWN:s(46008),BUTTON_UP:s(7629),CONNECTED:s(42206),DISCONNECTED:s(86544),GAMEPAD_BUTTON_DOWN:s(94784),GAMEPAD_BUTTON_UP:s(14325)}},48646:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Axis:s(97421),Button:s(28884),Events:s(92734),Gamepad:s(99125),GamepadPlugin:s(56654),Configs:s(64894)}},14350:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(93301),y=s(79291),u={CreatePixelPerfectHandler:s(84409),CreateInteractiveObject:s(74457),Events:s(8214),Gamepad:s(48646),InputManager:s(7003),InputPlugin:s(48205),InputPluginCache:s(89639),Keyboard:s(51442),Mouse:s(87078),Pointer:s(42515),Touch:s(95618)};u=y(!1,u,c),S.exports=u},78970:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(72905),y=s(83419),u=s(8443),h=s(8214),l=s(46032),n=s(29747),o=new y({initialize:function(r){this.manager=r,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=n,this.onKeyUp=n,r.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var f=this.manager.config;this.enabled=f.inputKeyboard,this.target=f.inputKeyboardEventTarget,this.addCapture(f.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(u.POST_STEP,this.postUpdate,this)},startListeners:function(){var f=this;this.onKeyDown=function(d){if(!(d.defaultPrevented||!f.enabled||!f.manager)){f.queue.push(d),f.manager.events.emit(h.MANAGER_PROCESS);var p=d.altKey||d.ctrlKey||d.shiftKey||d.metaKey;f.preventDefault&&!p&&f.captures.indexOf(d.keyCode)>-1&&d.preventDefault()}},this.onKeyUp=function(d){if(!(d.defaultPrevented||!f.enabled||!f.manager)){f.queue.push(d),f.manager.events.emit(h.MANAGER_PROCESS);var p=d.altKey||d.ctrlKey||d.shiftKey||d.metaKey;f.preventDefault&&!p&&f.captures.indexOf(d.keyCode)>-1&&d.preventDefault()}};var r=this.target;r&&(r.addEventListener("keydown",this.onKeyDown,!1),r.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var f=this.target;f.removeEventListener("keydown",this.onKeyDown,!1),f.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(f){typeof f=="string"&&(f=f.split(",")),Array.isArray(f)||(f=[f]);for(var r=this.captures,d=0;d<f.length;d++){var p=f[d];typeof p=="string"&&(p=l[p.trim().toUpperCase()]),r.indexOf(p)===-1&&r.push(p)}this.preventDefault=r.length>0},removeCapture:function(f){typeof f=="string"&&(f=f.split(",")),Array.isArray(f)||(f=[f]);for(var r=this.captures,d=0;d<f.length;d++){var p=f[d];typeof p=="string"&&(p=l[p.toUpperCase()]),c(r,p)}this.preventDefault=r.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(u.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});S.exports=o},28846:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(50792),u=s(95922),h=s(8443),l=s(35154),n=s(8214),o=s(89639),f=s(30472),r=s(46032),d=s(87960),p=s(74600),v=s(44594),g=s(56583),m=new c({Extends:y,initialize:function(P){y.call(this),this.game=P.systems.game,this.scene=P.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=P,this.manager=P.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,P.pluginEvents.once(n.BOOT,this.boot,this),P.pluginEvents.on(n.START,this.start,this)},boot:function(){var T=this.settings.input;this.enabled=l(T,"keyboard",!0);var P=l(T,"keyboard.capture",null);P&&this.addCaptures(P),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(n.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this),this.game.events.on(h.BLUR,this.resetKeys,this),this.scene.sys.events.on(v.PAUSE,this.resetKeys,this),this.scene.sys.events.on(v.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(T){return this.manager.addCapture(T),this},removeCapture:function(T){return this.manager.removeCapture(T),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:r.UP,down:r.DOWN,left:r.LEFT,right:r.RIGHT,space:r.SPACE,shift:r.SHIFT})},addKeys:function(T,P,M){P===void 0&&(P=!0),M===void 0&&(M=!1);var b={};if(typeof T=="string"){T=T.split(",");for(var R=0;R<T.length;R++){var A=T[R].trim();A&&(b[A]=this.addKey(A,P,M))}}else for(var D in T)b[D]=this.addKey(T[D],P,M);return b},addKey:function(T,P,M){P===void 0&&(P=!0),M===void 0&&(M=!1);var b=this.keys;if(T instanceof f){var R=b.indexOf(T);return R>-1?b[R]=T:b[T.keyCode]=T,P&&this.addCapture(T.keyCode),T.setEmitOnRepeat(M),T}return typeof T=="string"&&(T=r[T.toUpperCase()]),b[T]||(b[T]=new f(this,T),P&&this.addCapture(T),b[T].setEmitOnRepeat(M)),b[T]},removeKey:function(T,P,M){P===void 0&&(P=!1),M===void 0&&(M=!1);var b=this.keys,R;if(T instanceof f){var A=b.indexOf(T);A>-1&&(R=this.keys[A],this.keys[A]=void 0)}else typeof T=="string"&&(T=r[T.toUpperCase()]);return b[T]&&(R=b[T],b[T]=void 0),R&&(R.plugin=null,M&&this.removeCapture(R.keyCode),P&&R.destroy()),this},removeAllKeys:function(T,P){T===void 0&&(T=!1),P===void 0&&(P=!1);for(var M=this.keys,b=0;b<M.length;b++){var R=M[b];R&&(M[b]=void 0,P&&this.removeCapture(R.keyCode),T&&R.destroy())}return this},createCombo:function(T,P){return new d(this,T,P)},checkDown:function(T,P){if(P===void 0&&(P=0),this.enabled&&T.isDown){var M=g(this.time-T.timeDown,P);if(M>T._tick)return T._tick=M,!0}return!1},update:function(){var T=this.manager.queue,P=T.length;if(!(!this.isActive()||P===0))for(var M=this.keys,b=0;b<P;b++){var R=T[b],A=R.keyCode,D=M[A],G=!1;R.cancelled===void 0&&(R.cancelled=0,R.stopImmediatePropagation=function(){R.cancelled=1},R.stopPropagation=function(){R.cancelled=-1}),R.cancelled!==-1&&(A===this.prevCode&&R.timeStamp===this.prevTime&&R.type===this.prevType||(this.prevCode=A,this.prevTime=R.timeStamp,this.prevType=R.type,R.type==="keydown"?(D&&(G=D.isDown,D.onDown(R)),!R.cancelled&&(!D||!G)&&(p[A]&&this.emit(u.KEY_DOWN+p[A],R),R.cancelled||this.emit(u.ANY_KEY_DOWN,R))):(D&&D.onUp(R),R.cancelled||(p[A]&&this.emit(u.KEY_UP+p[A],R),R.cancelled||this.emit(u.ANY_KEY_UP,R))),R.cancelled===1&&(R.cancelled=0)))}},resetKeys:function(){for(var T=this.keys,P=0;P<T.length;P++)T[P]&&T[P].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(n.MANAGER_PROCESS,this.update,this),this.game.events.off(h.BLUR,this.resetKeys),this.scene.sys.events.off(v.PAUSE,this.resetKeys,this),this.scene.sys.events.off(v.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var T=this.keys,P=0;P<T.length;P++)T[P]&&T[P].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});o.register("KeyboardPlugin",m,"keyboard","keyboard","inputKeyboard"),S.exports=m},66970:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c.timeLastMatched=s.timeStamp,c.index++,c.index===c.size?!0:(c.current=c.keyCodes[c.index],!1)};S.exports=w},87960:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(95922),u=s(95540),h=s(68769),l=s(92803),n=new c({initialize:function(f,r,d){if(d===void 0&&(d={}),r.length<2)return!1;this.manager=f,this.enabled=!0,this.keyCodes=[];for(var p=0;p<r.length;p++){var v=r[p];typeof v=="string"?this.keyCodes.push(v.toUpperCase().charCodeAt(0)):typeof v=="number"?this.keyCodes.push(v):v.hasOwnProperty("keyCode")&&this.keyCodes.push(v.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=u(d,"resetOnWrongKey",!0),this.maxKeyDelay=u(d,"maxKeyDelay",0),this.resetOnMatch=u(d,"resetOnMatch",!1),this.deleteOnMatch=u(d,"deleteOnMatch",!1);var g=this,m=function(T){if(!(g.matched||!g.enabled)){var P=h(T,g);P&&(g.manager.emit(y.COMBO_MATCH,g,T),g.resetOnMatch?l(g):g.deleteOnMatch&&g.destroy())}};this.onKeyDown=m,this.manager.on(y.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(y.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});S.exports=n},68769:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66970),y=function(u,h){if(h.matched)return!0;var l=!1,n=!1;if(u.keyCode===h.current)if(h.index>0&&h.maxKeyDelay>0){var o=h.timeLastMatched+h.maxKeyDelay;u.timeStamp<=o&&(n=!0,l=c(u,h))}else n=!0,l=c(u,h);return!n&&h.resetOnWrongKey&&(h.index=0,h.current=h.keyCodes[0]),l&&(h.timeLastMatched=u.timeStamp,h.matched=!0,h.timeMatched=u.timeStamp),l};S.exports=y},92803:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.current=s.keyCodes[0],s.index=0,s.timeLastMatched=0,s.matched=!1,s.timeMatched=0,s};S.exports=w},92612:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="keydown"},23345:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="keyup"},21957:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="keycombomatch"},44743:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="down"},3771:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="keydown-"},46358:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="keyup-"},75674:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="up"},95922:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={ANY_KEY_DOWN:s(92612),ANY_KEY_UP:s(23345),COMBO_MATCH:s(21957),DOWN:s(44743),KEY_DOWN:s(3771),KEY_UP:s(46358),UP:s(75674)}},51442:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Events:s(95922),KeyboardManager:s(78970),KeyboardPlugin:s(28846),Key:s(30472),KeyCodes:s(46032),KeyCombo:s(87960),AdvanceKeyCombo:s(66970),ProcessKeyCombo:s(68769),ResetKeyCombo:s(92803),JustDown:s(90229),JustUp:s(38796),DownDuration:s(37015),UpDuration:s(41170)}},37015:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){c===void 0&&(c=50);var y=s.plugin.game.loop.time-s.timeDown;return s.isDown&&y<c};S.exports=w},90229:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s._justDown?(s._justDown=!1,!0):!1};S.exports=w},38796:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s._justUp?(s._justUp=!1,!0):!1};S.exports=w},30472:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(50792),u=s(95922),h=new c({Extends:y,initialize:function(n,o){y.call(this),this.plugin=n,this.keyCode=o,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(l){return this.emitOnRepeat=l,this},onDown:function(l){this.originalEvent=l,this.enabled&&(this.altKey=l.altKey,this.ctrlKey=l.ctrlKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.location=l.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(u.DOWN,this,l):(this.isDown=!0,this.isUp=!1,this.timeDown=l.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(u.DOWN,this,l)))},onUp:function(l){this.originalEvent=l,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=l.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(u.UP,this,l))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});S.exports=h},46032:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};S.exports=w},74600:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(46032),y={};for(var u in c)y[c[u]]=u;S.exports=y},41170:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){c===void 0&&(c=50);var y=s.plugin.game.loop.time-s.timeUp;return s.isUp&&y<c};S.exports=w},85098:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(89357),u=s(8214),h=s(29747),l=new c({initialize:function(o){this.manager=o,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=h,this.onMouseDown=h,this.onMouseUp=h,this.onMouseDownWindow=h,this.onMouseUpWindow=h,this.onMouseOver=h,this.onMouseOut=h,this.onMouseWheel=h,this.pointerLockChange=h,this.isTop=!0,o.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var n=this.manager.config;this.enabled=n.inputMouse,this.target=n.inputMouseEventTarget,this.passive=n.inputMousePassive,this.preventDefaultDown=n.inputMousePreventDefaultDown,this.preventDefaultUp=n.inputMousePreventDefaultUp,this.preventDefaultMove=n.inputMousePreventDefaultMove,this.preventDefaultWheel=n.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,n.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(n){return n.preventDefault(),!1}),this},requestPointerLock:function(){if(y.pointerLock){var n=this.target;n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,n.requestPointerLock()}},releasePointerLock:function(){y.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var n=this.target;if(n){var o=this,f=this.manager,r=f.canvas,d=window&&window.focus&&f.game.config.autoFocus;this.onMouseMove=function(v){!v.defaultPrevented&&o.enabled&&f&&f.enabled&&(f.onMouseMove(v),o.preventDefaultMove&&v.preventDefault())},this.onMouseDown=function(v){d&&window.focus(),!v.defaultPrevented&&o.enabled&&f&&f.enabled&&(f.onMouseDown(v),o.preventDefaultDown&&v.target===r&&v.preventDefault())},this.onMouseDownWindow=function(v){v.sourceCapabilities&&v.sourceCapabilities.firesTouchEvents||!v.defaultPrevented&&o.enabled&&f&&f.enabled&&v.target!==r&&f.onMouseDown(v)},this.onMouseUp=function(v){!v.defaultPrevented&&o.enabled&&f&&f.enabled&&(f.onMouseUp(v),o.preventDefaultUp&&v.target===r&&v.preventDefault())},this.onMouseUpWindow=function(v){v.sourceCapabilities&&v.sourceCapabilities.firesTouchEvents||!v.defaultPrevented&&o.enabled&&f&&f.enabled&&v.target!==r&&f.onMouseUp(v)},this.onMouseOver=function(v){!v.defaultPrevented&&o.enabled&&f&&f.enabled&&f.setCanvasOver(v)},this.onMouseOut=function(v){!v.defaultPrevented&&o.enabled&&f&&f.enabled&&f.setCanvasOut(v)},this.onMouseWheel=function(v){!v.defaultPrevented&&o.enabled&&f&&f.enabled&&f.onMouseWheel(v),o.preventDefaultWheel&&v.target===r&&v.preventDefault()};var p={passive:!0};if(n.addEventListener("mousemove",this.onMouseMove),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseup",this.onMouseUp),n.addEventListener("mouseover",this.onMouseOver,p),n.addEventListener("mouseout",this.onMouseOut,p),this.preventDefaultWheel?n.addEventListener("wheel",this.onMouseWheel,{passive:!1}):n.addEventListener("wheel",this.onMouseWheel,p),window&&f.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,p),window.top.addEventListener("mouseup",this.onMouseUpWindow,p)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,p),window.addEventListener("mouseup",this.onMouseUpWindow,p),this.isTop=!1}y.pointerLock&&(this.pointerLockChange=function(v){var g=o.target;o.locked=document.pointerLockElement===g||document.mozPointerLockElement===g||document.webkitPointerLockElement===g,f.onPointerLockChange(v)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var n=this.target;n.removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("mousedown",this.onMouseDown),n.removeEventListener("mouseup",this.onMouseUp),n.removeEventListener("mouseover",this.onMouseOver),n.removeEventListener("mouseout",this.onMouseOut),window&&(n=this.isTop?window.top:window,n.removeEventListener("mousedown",this.onMouseDownWindow),n.removeEventListener("mouseup",this.onMouseUpWindow)),y.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});S.exports=l},87078:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={MouseManager:s(85098)}},36210:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(8214),u=s(29747),h=new c({initialize:function(n){this.manager=n,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=u,this.onTouchStartWindow=u,this.onTouchMove=u,this.onTouchEnd=u,this.onTouchEndWindow=u,this.onTouchCancel=u,this.onTouchCancelWindow=u,this.isTop=!0,n.events.once(y.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputTouch,this.target=l.inputTouchEventTarget,this.capture=l.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},startListeners:function(){var l=this.target;if(l){var n=this,o=this.manager,f=o.canvas,r=window&&window.focus&&o.game.config.autoFocus;this.onTouchMove=function(g){!g.defaultPrevented&&n.enabled&&o&&o.enabled&&(o.onTouchMove(g),n.capture&&g.cancelable&&g.preventDefault())},this.onTouchStart=function(g){r&&window.focus(),!g.defaultPrevented&&n.enabled&&o&&o.enabled&&(o.onTouchStart(g),n.capture&&g.cancelable&&g.target===f&&g.preventDefault())},this.onTouchStartWindow=function(g){!g.defaultPrevented&&n.enabled&&o&&o.enabled&&g.target!==f&&o.onTouchStart(g)},this.onTouchEnd=function(g){!g.defaultPrevented&&n.enabled&&o&&o.enabled&&(o.onTouchEnd(g),n.capture&&g.cancelable&&g.target===f&&g.preventDefault())},this.onTouchEndWindow=function(g){!g.defaultPrevented&&n.enabled&&o&&o.enabled&&g.target!==f&&o.onTouchEnd(g)},this.onTouchCancel=function(g){!g.defaultPrevented&&n.enabled&&o&&o.enabled&&(o.onTouchCancel(g),n.capture&&g.preventDefault())},this.onTouchCancelWindow=function(g){!g.defaultPrevented&&n.enabled&&o&&o.enabled&&o.onTouchCancel(g)};var d=this.capture,p={passive:!0},v={passive:!1};if(l.addEventListener("touchstart",this.onTouchStart,d?v:p),l.addEventListener("touchmove",this.onTouchMove,d?v:p),l.addEventListener("touchend",this.onTouchEnd,d?v:p),l.addEventListener("touchcancel",this.onTouchCancel,d?v:p),window&&o.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,v),window.top.addEventListener("touchend",this.onTouchEndWindow,v),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,v)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,v),window.addEventListener("touchend",this.onTouchEndWindow,v),window.addEventListener("touchcancel",this.onTouchCancelWindow,v),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var l=this.target;l.removeEventListener("touchstart",this.onTouchStart),l.removeEventListener("touchmove",this.onTouchMove),l.removeEventListener("touchend",this.onTouchEnd),l.removeEventListener("touchcancel",this.onTouchCancel),window&&(l=this.isTop?window.top:window,l.removeEventListener("touchstart",this.onTouchStartWindow),l.removeEventListener("touchend",this.onTouchEndWindow),l.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});S.exports=h},95618:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={TouchManager:s(36210)}},41299:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(54899),h=s(95540),l=s(98356),n=s(3374),o=s(84376),f=s(92638),r=new c({initialize:function(p,v){if(this.loader=p,this.cache=h(v,"cache",!1),this.type=h(v,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=h(v,"key",!1);var g=this.key;if(p.prefix&&p.prefix!==""&&(this.key=p.prefix+g),!this.key)throw new Error("Invalid File key: "+this.key);var m=h(v,"url");m===void 0?m=p.path+g+"."+h(v,"extension",""):typeof m=="string"&&!m.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(m=p.path+m),this.url=m,this.src="",this.xhrSettings=f(h(v,"responseType",void 0)),h(v,"xhrSettings",!1)&&(this.xhrSettings=n(this.xhrSettings,h(v,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?y.FILE_POPULATED:y.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=h(v,"config",{}),this.multiFile,this.linkFile,this.base64=typeof m=="string"&&m.indexOf("data:")===0,this.retryAttempts=h(v,"maxRetries",p.maxRetries)},setLink:function(d){this.linkFile=d,d.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===y.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=y.FILE_LOADING,this.src=l(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=o(this,this.loader.xhr)}},onLoad:function(d,p){var v=d.responseURL&&this.loader.localSchemes.some(function(T){return d.responseURL.indexOf(T)===0}),g=v&&p.target.status===0,m=!(p.target&&p.target.status!==200)||g;d.readyState===4&&d.status>=400&&d.status<=599&&(m=!1),this.state=y.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,m)},onBase64Load:function(d){this.xhrLoader=d,this.state=y.FILE_LOADED,this.percentComplete=1,this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(d){d.lengthComputable&&(this.bytesLoaded=d.loaded,this.bytesTotal=d.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=y.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=y.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=y.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(d){if(this.state!==y.FILE_PENDING_DESTROY){d===void 0&&(d=this.data);var p=this.key,v=this.type;this.loader.emit(u.FILE_COMPLETE,p,v,d),this.loader.emit(u.FILE_KEY_COMPLETE+v+"-"+p,p,v,d),this.loader.flagForRemoval(this),this.state=y.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});r.createObjectURL=function(d,p,v){if(typeof URL=="function")d.src=URL.createObjectURL(p);else{var g=new FileReader;g.onload=function(){d.removeAttribute("crossOrigin"),d.src="data:"+(p.type||v)+";base64,"+g.result.split(",")[1]},g.onerror=d.onerror,g.readAsDataURL(p)}},r.revokeObjectURL=function(d){typeof URL=="function"&&URL.revokeObjectURL(d.src)},S.exports=r},74099:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={},s={install:function(c){for(var y in w)c[y]=w[y]},register:function(c,y){w[c]=y},destroy:function(){w={}}};S.exports=s},98356:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.url?s.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?s.url:c+s.url:!1};S.exports=w},74261:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(35072),h=s(50792),l=s(54899),n=s(74099),o=s(95540),f=s(35154),r=s(41212),d=s(37277),p=s(44594),v=s(92638),g=new c({Extends:h,initialize:function(T){h.call(this);var P=T.sys.game.config,M=T.sys.settings.loader;this.scene=T,this.systems=T.sys,this.cacheManager=T.sys.cache,this.textureManager=T.sys.textures,this.sceneManager=T.sys.game.scene,n.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(o(M,"baseURL",P.loaderBaseURL)),this.setPath(o(M,"path",P.loaderPath)),this.setPrefix(o(M,"prefix",P.loaderPrefix)),this.maxParallelDownloads=o(M,"maxParallelDownloads",P.loaderMaxParallelDownloads),this.xhr=v(o(M,"responseType",P.loaderResponseType),o(M,"async",P.loaderAsync),o(M,"user",P.loaderUser),o(M,"password",P.loaderPassword),o(M,"timeout",P.loaderTimeout),o(M,"withCredentials",P.loaderWithCredentials)),this.crossOrigin=o(M,"crossOrigin",P.loaderCrossOrigin),this.imageLoadType=o(M,"imageLoadType",P.loaderImageLoadType),this.localSchemes=o(M,"localScheme",P.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new u,this.inflight=new u,this.queue=new u,this._deleteQueue=new u,this.totalFailed=0,this.totalComplete=0,this.state=y.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=o(M,"maxRetries",P.loaderMaxRetries),T.sys.events.once(p.BOOT,this.boot,this),T.sys.events.on(p.START,this.pluginStart,this)},boot:function(){this.systems.events.once(p.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(p.SHUTDOWN,this.shutdown,this)},setBaseURL:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.baseURL=m,this},setPath:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.path=m,this},setPrefix:function(m){return m===void 0&&(m=""),this.prefix=m,this},setCORS:function(m){return this.crossOrigin=m,this},addFile:function(m){Array.isArray(m)||(m=[m]);for(var T=0;T<m.length;T++){var P=m[T];this.keyExists(P)||(this.list.set(P),this.emit(l.ADD,P.key,P.type,this,P),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(m){var T=m.hasCacheConflict();return T||this.list.iterate(function(P){if(P.type===m.type&&P.key===m.key)return T=!0,!1}),!T&&this.isLoading()&&(this.inflight.iterate(function(P){if(P.type===m.type&&P.key===m.key)return T=!0,!1}),this.queue.iterate(function(P){if(P.type===m.type&&P.key===m.key)return T=!0,!1})),T},addPack:function(m,T){if(typeof T=="string"){var P=f(m,T);P&&(m={packKey:P})}var M=0,b=this.baseURL,R=this.path,A=this.prefix;for(var D in m)if(Object.prototype.hasOwnProperty.call(m,D)){var G=m[D],F=o(G,"baseURL",b),B=o(G,"path",R),N=o(G,"prefix",A),z=o(G,"files",null),$=o(G,"defaultType","void");if(Array.isArray(z)){this.setBaseURL(F),this.setPath(B),this.setPrefix(N);for(var Q=0;Q<z.length;Q++){var Z=z[Q],tt=Z.hasOwnProperty("type")?Z.type:$;this[tt]&&(this[tt](Z),M++)}}}return this.setBaseURL(b),this.setPath(R),this.setPrefix(A),M>0},removePack:function(m,T){var P=this.systems.anims,M=this.cacheManager,b=this.textureManager,R={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},A;if(r(m))A=m;else if(A=M.json.get(m),!A){console.warn("Asset Pack not found in JSON cache:",m);return}T&&(A={_:A[T]});for(var D in A){var G=A[D],F=o(G,"prefix",""),B=o(G,"files"),N=o(G,"defaultType");if(Array.isArray(B))for(var z=0;z<B.length;z++){var $=B[z],Q=$.hasOwnProperty("type")?$.type:N;if(!Q){console.warn("No type:",$);continue}var Z=F+$.key;if(Q==="animation"&&P.remove(Z),!((Q==="aseprite"||Q==="atlas"||Q==="atlasXML"||Q==="htmlTexture"||Q==="image"||Q==="multiatlas"||Q==="spritesheet"||Q==="svg"||Q==="texture"||Q==="unityAtlas")&&(b.remove(Z),!R[Q]))){if(Q==="pack"){this.removePack(Z,$.dataKey);continue}if(Q==="spine"){var tt=M.custom.spine.get(Z);if(!tt)continue;var H=tt.prefix===void 0?"":tt.prefix;M.custom.spine.remove(Z);var J=M.custom.spineTextures.get(Z);if(!J)continue;M.custom.spineTextures.remove(Z);for(var Y=0;Y<J.pages.length;Y++){var _=J.pages[Y],U=H+_.name,et=Z+":"+U;b.exists(et)?b.remove(et):b.remove(U)}}var nt=R[Q];if(nt!==null){if(!nt){console.warn("Unknown type:",Q);continue}var rt=M[nt];rt.remove(Z)}}}}},isLoading:function(){return this.state===y.LOADER_LOADING||this.state===y.LOADER_PROCESSING},isReady:function(){return this.state===y.LOADER_IDLE||this.state===y.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(l.START,this),this.list.size===0?this.loadComplete():(this.state=y.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(p.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(l.PROGRESS,this.progress)},update:function(){this.state===y.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(m){if((m.state===y.FILE_POPULATED||m.state===y.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(m),this.list.delete(m),m.crossOrigin||(m.crossOrigin=this.crossOrigin),m.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(m,T){this.inflight&&(this.inflight.delete(m),this.updateProgress(),T?(this.totalComplete++,this.queue.set(m),this.emit(l.FILE_LOAD,m),m.onProcess()):(this.totalFailed++,this._deleteQueue.set(m),this.emit(l.FILE_LOAD_ERROR,m),this.fileProcessComplete(m)))},fileProcessComplete:function(m){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(m.state===y.FILE_ERRORED?m.multiFile&&m.multiFile.onFileFailed(m):m.state===y.FILE_COMPLETE&&(m.multiFile?m.multiFile.isReadyToProcess()&&(m.multiFile.addToCache(),m.multiFile.pendingDestroy()):(m.addToCache(),m.pendingDestroy())),this.queue.delete(m),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(l.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=y.LOADER_COMPLETE,this.systems.events.off(p.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(l.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(m){this._deleteQueue.set(m)},saveJSON:function(m,T){return this.save(JSON.stringify(m),T)},save:function(m,T,P){T===void 0&&(T="file.json"),P===void 0&&(P="application/json");var M=new Blob([m],{type:P}),b=URL.createObjectURL(M),R=document.createElement("a");return R.download=T,R.textContent="Download "+T,R.href=b,R.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var m=this.systems.game.config,T=this.systems.settings.loader;this.setBaseURL(o(T,"baseURL",m.loaderBaseURL)),this.setPath(o(T,"path",m.loaderPath)),this.setPrefix(o(T,"prefix",m.loaderPrefix)),this.state=y.LOADER_IDLE},shutdown:function(){this.reset(),this.state=y.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(p.UPDATE,this.update,this),this.systems.events.off(p.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=y.LOADER_DESTROYED,this.systems.events.off(p.UPDATE,this.update,this),this.systems.events.off(p.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});d.register("Loader",g,"load"),S.exports=g},3374:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(79291),y=s(92638),u=function(h,l){var n=h===void 0?y():c({},h);if(l)for(var o in l)l[o]!==void 0&&(n[o]=l[o]);return n};S.exports=u},26430:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(54899),h=new c({initialize:function(n,o,f,r){var d=[];r.forEach(function(g){g&&d.push(g)}),this.loader=n,this.type=o,this.key=f;var p=this.key;n.prefix&&n.prefix!==""&&(this.key=n.prefix+p),this.multiKeyIndex=n.multiKeyIndex++,this.files=d,this.state=y.FILE_PENDING,this.complete=!1,this.pending=d.length,this.failed=0,this.config={},this.baseURL=n.baseURL,this.path=n.path,this.prefix=n.prefix;for(var v=0;v<d.length;v++)d[v].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(l){return this.files.push(l),l.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(l){var n=this.files.indexOf(l);n!==-1&&this.pending--},onFileFailed:function(l){var n=this.files.indexOf(l);n!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,l.type,l.key))},pendingDestroy:function(){if(this.state!==y.FILE_PENDING_DESTROY){var l=this.key,n=this.type;this.loader.emit(u.FILE_COMPLETE,l,n),this.loader.emit(u.FILE_KEY_COMPLETE+n+"-"+l,l,n),this.loader.flagForRemoval(this);for(var o=0;o<this.files.length;o++)this.files[o].pendingDestroy();this.state=y.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});S.exports=h},84376:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(3374),y=function(u,h){var l=c(h,u.xhrSettings);if(u.base64){var n=u.url.split(";base64,").pop()||u.url.split(",").pop(),o;u.xhrSettings.responseType==="arraybuffer"?o={response:Uint8Array.from(atob(n),function(d){return d.charCodeAt(0)}).buffer}:o={responseText:atob(n)},u.onBase64Load(o);return}var f=new XMLHttpRequest;if(f.open("GET",u.src,l.async,l.user,l.password),f.responseType=u.xhrSettings.responseType,f.timeout=l.timeout,l.headers)for(var r in l.headers)f.setRequestHeader(r,l.headers[r]);return l.header&&l.headerValue&&f.setRequestHeader(l.header,l.headerValue),l.requestedWith&&f.setRequestHeader("X-Requested-With",l.requestedWith),l.overrideMimeType&&f.overrideMimeType(l.overrideMimeType),l.withCredentials&&(f.withCredentials=!0),f.onload=u.onLoad.bind(u,f),f.onerror=u.onError.bind(u,f),f.onprogress=u.onProgress.bind(u),f.ontimeout=u.onError.bind(u,f),f.send(),f};S.exports=y},92638:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h,l){return s===void 0&&(s=""),c===void 0&&(c=!0),y===void 0&&(y=""),u===void 0&&(u=""),h===void 0&&(h=0),l===void 0&&(l=!1),{responseType:s,async:c,user:y,password:u,timeout:h,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:l}};S.exports=w},23906:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};S.exports=w},42155:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="addfile"},38991:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="complete"},27540:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="filecomplete"},87464:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="filecomplete-"},94486:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="loaderror"},13035:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="load"},38144:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="fileprogress"},97520:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="postprocess"},85595:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="progress"},55680:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="start"},54899:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={ADD:s(42155),COMPLETE:s(38991),FILE_COMPLETE:s(27540),FILE_KEY_COMPLETE:s(87464),FILE_LOAD_ERROR:s(94486),FILE_LOAD:s(13035),FILE_PROGRESS:s(38144),POST_PROCESS:s(97520),PROGRESS:s(85595),START:s(55680)}},14135:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(74099),u=s(518),h=s(54899),l=new c({Extends:u,initialize:function(o,f,r,d,p){u.call(this,o,f,r,d,p),this.type="animationJSON"},onProcess:function(){this.loader.once(h.POST_PROCESS,this.onLoadComplete,this),u.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});y.register("animation",function(n,o,f,r){if(Array.isArray(n))for(var d=0;d<n.length;d++)this.addFile(new l(this,n[d]));else this.addFile(new l(this,n,o,r,f));return this}),S.exports=l},76272:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(74099),u=s(95540),h=s(19550),l=s(41212),n=s(518),o=s(26430),f=new c({Extends:o,initialize:function(d,p,v,g,m,T){var P,M;if(l(p)){var b=p;p=u(b,"key"),P=new h(d,{key:p,url:u(b,"textureURL"),extension:u(b,"textureExtension","png"),normalMap:u(b,"normalMap"),xhrSettings:u(b,"textureXhrSettings")}),M=new n(d,{key:p,url:u(b,"atlasURL"),extension:u(b,"atlasExtension","json"),xhrSettings:u(b,"atlasXhrSettings")})}else P=new h(d,p,v,m),M=new n(d,p,g,T);P.linkFile?o.call(this,d,"atlasjson",p,[P,M,P.linkFile]):o.call(this,d,"atlasjson",p,[P,M])},addToCache:function(){if(this.isReadyToProcess()){var r=this.files[0],d=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(r.key,r.data,d.data,p),d.addToCache(),this.complete=!0}}});y.register("aseprite",function(r,d,p,v,g){var m;if(Array.isArray(r))for(var T=0;T<r.length;T++)m=new f(this,r[T]),this.addFile(m.files);else m=new f(this,r,d,p,v,g),this.addFile(m.files);return this}),S.exports=f},38734:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(74099),u=s(95540),h=s(19550),l=s(41212),n=s(518),o=s(26430),f=new c({Extends:o,initialize:function(d,p,v,g,m,T){var P,M;if(l(p)){var b=p;p=u(b,"key"),P=new h(d,{key:p,url:u(b,"textureURL"),extension:u(b,"textureExtension","png"),normalMap:u(b,"normalMap"),xhrSettings:u(b,"textureXhrSettings")}),M=new n(d,{key:p,url:u(b,"atlasURL"),extension:u(b,"atlasExtension","json"),xhrSettings:u(b,"atlasXhrSettings")})}else P=new h(d,p,v,m),M=new n(d,p,g,T);P.linkFile?o.call(this,d,"atlasjson",p,[P,M,P.linkFile]):o.call(this,d,"atlasjson",p,[P,M])},addToCache:function(){if(this.isReadyToProcess()){var r=this.files[0],d=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(r.key,r.data,d.data,p),this.complete=!0}}});y.register("atlas",function(r,d,p,v,g){var m;if(Array.isArray(r))for(var T=0;T<r.length;T++)m=new f(this,r[T]),this.addFile(m.files);else m=new f(this,r,d,p,v,g),this.addFile(m.files);return this}),S.exports=f},74599:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(74099),u=s(95540),h=s(19550),l=s(41212),n=s(26430),o=s(57318),f=new c({Extends:n,initialize:function(d,p,v,g,m,T){var P,M;if(l(p)){var b=p;p=u(b,"key"),P=new h(d,{key:p,url:u(b,"textureURL"),extension:u(b,"textureExtension","png"),normalMap:u(b,"normalMap"),xhrSettings:u(b,"textureXhrSettings")}),M=new o(d,{key:p,url:u(b,"atlasURL"),extension:u(b,"atlasExtension","xml"),xhrSettings:u(b,"atlasXhrSettings")})}else P=new h(d,p,v,m),M=new o(d,p,g,T);P.linkFile?n.call(this,d,"atlasxml",p,[P,M,P.linkFile]):n.call(this,d,"atlasxml",p,[P,M])},addToCache:function(){if(this.isReadyToProcess()){var r=this.files[0],d=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(r.key,r.data,d.data,p),this.complete=!0}}});y.register("atlasXML",function(r,d,p,v,g){var m;if(Array.isArray(r))for(var T=0;T<r.length;T++)m=new f(this,r[T]),this.addFile(m.files);else m=new f(this,r,d,p,v,g),this.addFile(m.files);return this}),S.exports=f},21097:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(89749),o=s(41212),f=new c({Extends:u,initialize:function(d,p,v,g,m){if(o(p)){var T=p;p=l(T,"key"),g=l(T,"xhrSettings"),m=l(T,"context",m)}var P={type:"audio",cache:d.cacheManager.audio,extension:v.type,responseType:"arraybuffer",key:p,url:v.url,xhrSettings:g,config:{context:m}};u.call(this,d,P)},onProcess:function(){this.state=y.FILE_PROCESSING;var r=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(d){r.data=d,r.onProcessComplete()},function(d){console.error("Error decoding audio: "+r.key+" - ",d?d.message:null),r.onProcessError()}),this.config.context=null}});f.create=function(r,d,p,v,g){var m=r.systems.game,T=m.config.audio,P=m.device.audio;o(d)&&(p=l(d,"url",[]),v=l(d,"config",{}));var M=f.getAudioURL(m,p);return M?P.webAudio&&!T.disableWebAudio?new f(r,d,M,g,m.sound.context):new n(r,d,M,v):(console.warn('No audio URLs for "%s" can play on this device',d),null)},f.getAudioURL=function(r,d){Array.isArray(d)||(d=[d]);for(var p=0;p<d.length;p++){var v=l(d[p],"url",d[p]);if(v.indexOf("blob:")===0||v.indexOf("data:")===0)return{url:v,type:""};var g=v.match(/\.([a-zA-Z0-9]+)($|\?)/);if(g=l(d[p],"type",g?g[1]:"").toLowerCase(),r.device.audio[g])return{url:v,type:g}}return null},h.register("audio",function(r,d,p,v){var g=this.systems.game,m=g.config.audio,T=g.device.audio;if(m.noAudio||!T.webAudio&&!T.audioData)return this;var P;if(Array.isArray(r))for(var M=0;M<r.length;M++)P=f.create(this,r[M]),P&&this.addFile(P);else P=f.create(this,r,d,p,v),P&&this.addFile(P);return this}),S.exports=f},89524:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(21097),y=s(83419),u=s(74099),h=s(95540),l=s(41212),n=s(518),o=s(26430),f=new y({Extends:o,initialize:function(d,p,v,g,m,T,P){if(l(p)){var M=p;p=h(M,"key"),v=h(M,"jsonURL"),g=h(M,"audioURL"),m=h(M,"audioConfig"),T=h(M,"audioXhrSettings"),P=h(M,"jsonXhrSettings")}var b;if(!g)b=new n(d,p,v,P),o.call(this,d,"audiosprite",p,[b]),this.config.resourceLoad=!0,this.config.audioConfig=m,this.config.audioXhrSettings=T;else{var R=c.create(d,p,g,m,T);R&&(b=new n(d,p,v,P),o.call(this,d,"audiosprite",p,[R,b]),this.config.resourceLoad=!1)}},onFileComplete:function(r){var d=this.files.indexOf(r);if(d!==-1&&(this.pending--,this.config.resourceLoad&&r.type==="json"&&r.data.hasOwnProperty("resources"))){var p=r.data.resources,v=h(this.config,"audioConfig"),g=h(this.config,"audioXhrSettings"),m=c.create(this.loader,r.key,p,v,g);m&&(this.addToMultiFile(m),this.loader.addFile(m))}},addToCache:function(){if(this.isReadyToProcess()){var r=this.files[0],d=this.files[1];r.addToCache(),d.addToCache(),this.complete=!0}}});u.register("audioSprite",function(r,d,p,v,g,m){var T=this.systems.game,P=T.config.audio,M=T.device.audio;if(P&&P.noAudio||!M.webAudio&&!M.audioData)return this;var b;if(Array.isArray(r))for(var R=0;R<r.length;R++)b=new f(this,r[R]),b.files&&this.addFile(b.files);else b=new f(this,r,d,p,v,g,m),b.files&&this.addFile(b.files);return this})},85722:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=new c({Extends:u,initialize:function(r,d,p,v,g){var m="bin";if(n(d)){var T=d;d=l(T,"key"),p=l(T,"url"),v=l(T,"xhrSettings"),m=l(T,"extension",m),g=l(T,"dataType",g)}var P={type:"binary",cache:r.cacheManager.binary,extension:m,responseType:"arraybuffer",key:d,url:p,xhrSettings:v,config:{dataType:g}};u.call(this,r,P)},onProcess:function(){this.state=y.FILE_PROCESSING;var f=this.config.dataType;this.data=f?new f(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});h.register("binary",function(f,r,d,p){if(Array.isArray(f))for(var v=0;v<f.length;v++)this.addFile(new o(this,f[v]));else this.addFile(new o(this,f,r,p,d));return this}),S.exports=o},97025:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(74099),u=s(95540),h=s(19550),l=s(41212),n=s(26430),o=s(21859),f=s(57318),r=new c({Extends:n,initialize:function(p,v,g,m,T,P){var M,b;if(l(v)){var R=v;v=u(R,"key"),M=new h(p,{key:v,url:u(R,"textureURL"),extension:u(R,"textureExtension","png"),normalMap:u(R,"normalMap"),xhrSettings:u(R,"textureXhrSettings")}),b=new f(p,{key:v,url:u(R,"fontDataURL"),extension:u(R,"fontDataExtension","xml"),xhrSettings:u(R,"fontDataXhrSettings")})}else M=new h(p,v,g,T),b=new f(p,v,m,P);M.linkFile?n.call(this,p,"bitmapfont",v,[M,b,M.linkFile]):n.call(this,p,"bitmapfont",v,[M,b])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],p=this.files[1];d.addToCache();var v=d.cache.get(d.key),g=o(p.data,d.cache.getFrame(d.key),0,0,v);this.loader.cacheManager.bitmapFont.add(d.key,{data:g,texture:d.key,frame:null}),this.complete=!0}}});y.register("bitmapFont",function(d,p,v,g,m){var T;if(Array.isArray(d))for(var P=0;P<d.length;P++)T=new r(this,d[P]),this.addFile(T.files);else T=new r(this,d,p,v,g,m),this.addFile(T.files);return this}),S.exports=r},16024:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=new c({Extends:u,initialize:function(r,d,p,v){var g="css";if(n(d)){var m=d;d=l(m,"key"),p=l(m,"url"),v=l(m,"xhrSettings"),g=l(m,"extension",g)}var T={type:"script",cache:!1,extension:g,responseType:"text",key:d,url:p,xhrSettings:v};u.call(this,r,T)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("css",function(f,r,d){if(Array.isArray(f))for(var p=0;p<f.length;p++)this.addFile(new o(this,f[p]));else this.addFile(new o(this,f,r,d));return this}),S.exports=o},69559:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(38734),y=s(85722),u=s(83419),h=s(74099),l=s(95540),n=s(19550),o=s(41212),f=s(518),r=s(31403),d=s(46975),p=s(59327),v=s(26430),g=s(82038),m=s(55222),T=new u({Extends:v,initialize:function(M,b,R,A){if(R.multiAtlasURL){var D=new f(M,{key:b,url:R.multiAtlasURL,xhrSettings:A,config:R});v.call(this,M,"texture",b,[D])}else{var G=R.textureURL.substr(R.textureURL.length-3);R.type||(R.type=G.toLowerCase()==="ktx"?"KTX":"PVR");var F=new y(M,{key:b,url:R.textureURL,extension:G,xhrSettings:A,config:R});if(R.atlasURL){var B=new f(M,{key:b,url:R.atlasURL,xhrSettings:A,config:R});v.call(this,M,"texture",b,[F,B])}else v.call(this,M,"texture",b,[F])}this.config=R},onFileComplete:function(P){var M=this.files.indexOf(P);if(M!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(P.type==="json"&&P.data.hasOwnProperty("textures")){var b=P.data.textures,R=this.config,A=this.loader,D=A.baseURL,G=A.path,F=A.prefix,B=l(R,"multiBaseURL",this.baseURL),N=l(R,"multiPath",this.path),z=l(R,"prefix",this.prefix),$=l(R,"textureXhrSettings");B&&A.setBaseURL(B),N&&A.setPath(N),z&&A.setPrefix(z);for(var Q=0;Q<b.length;Q++){var Z=b[Q].image,tt="CMA"+this.multiKeyIndex+"_"+Z,H=new y(A,tt,Z,$);if(this.addToMultiFile(H),A.addFile(H),b[Q].normalMap){var J=new y(A,tt,b[Q].normalMap,$);J.type="normalMap",H.setLink(J),this.addToMultiFile(J),A.addFile(J)}}A.setBaseURL(D),A.setPath(G),A.setPrefix(F)}}},addToCache:function(){function P(B){console.warn('Compressed Texture Invalid: "'+D.key+'". '+B)}if(this.isReadyToProcess()){var M=this.config;if(M.multiAtlasURL)this.addMultiToCache();else{var b=this.loader.systems.renderer,R=this.loader.textureManager,A,D=this.files[0],G=this.files[1];if(M.type==="PVR"?A=g(D.data):M.type==="KTX"&&(A=r(D.data),A||P("KTX file contains unsupported format.")),A&&!m(A)&&(P("Texture dimensions failed verification. Check the texture format specifications for "+M.format+" 0x"+A.internalFormat.toString(16)+"."),A=null),A&&!b.supportsCompressedTexture(M.format,A.internalFormat)&&(P("Texture format "+M.format+" with internal format "+A.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),A=null),A){A.format=b.getCompressedTextureName(M.format,A.internalFormat);var F=G&&G.data?G.data:null;R.addCompressedTexture(D.key,A,F)}}this.complete=!0}},addMultiToCache:function(){for(var P=this.config,M=this.files[0],b=[],R=[],A=[],D=this.loader.systems.renderer,G=this.loader.textureManager,F,B=1;B<this.files.length;B++){var N=this.files[B];if(N.type!=="normalMap")for(var z=N.key.indexOf("_"),$=N.key.substr(z+1),Q=N.data,Z=0;Z<M.data.textures.length;Z++){var tt=M.data.textures[Z];if(tt.image===$){P.type==="PVR"?F=g(Q):P.type==="KTX"&&(F=r(Q)),F&&D.supportsCompressedTexture(P.format,F.internalFormat)&&(F.format=D.getCompressedTextureName(P.format,F.internalFormat),R.push(F),b.push(tt),N.linkFile&&A.push(N.linkFile.data));break}}}A.length===0&&(A=void 0),G.addAtlasJSONArray(this.key,R,b,A),this.complete=!0}});h.register("texture",function(P,M,b){var R=this.systems.renderer,A=function(G,F,B,N){var z={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(o(F)){var $=F;F=l($,"key"),B=l($,"url"),N=l($,"xhrSettings")}var Q=!1;for(var Z in B)if(R.supportsCompressedTexture(Z)){var tt=B[Z];typeof tt=="string"?z.textureURL=tt:z=d(tt,z),z.format=Z.toUpperCase(),Q=!0;break}if(!Q)console.warn("No supported compressed texture format or IMG fallback",F);else if(z.format==="IMG"){var H,J;z.multiAtlasURL?(J=new p(G,F,z.multiAtlasURL,z.multiPath,z.multiBaseURL,N),H=J.files):z.atlasURL?(J=new c(G,F,z.textureURL,z.atlasURL,N),H=J.files):H=new n(G,F,z.textureURL,N),G.addFile(H)}else{var Y=new T(G,F,z,N);G.addFile(Y.files)}};if(Array.isArray(P))for(var D=0;D<P.length;D++)A(this,P[D]);else A(this,P,M,b);return this}),S.exports=T},87674:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(98356),o=s(41212),f=new c({Extends:u,initialize:function(d,p,v,g,m,T){var P="ttf";if(o(p)){var M=p;p=l(M,"key"),v=l(M,"url"),g=l(M,"format","truetype"),m=l(M,"descriptors",null),T=l(M,"xhrSettings"),P=l(M,"extension",P)}else g===void 0&&(g="truetype");var b={type:"font",cache:!1,extension:P,responseType:"text",key:p,url:v,xhrSettings:T};u.call(this,d,b),this.data={format:g,descriptors:m},this.state=y.FILE_POPULATED},onProcess:function(){this.state=y.FILE_PROCESSING,this.src=n(this,this.loader.baseURL);var r,d=this.key,p="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?r=new FontFace(d,p,this.data.descriptors):r=new FontFace(d,p);var v=this;r.load().then(function(){document.fonts.add(r),document.body.classList.add("fonts-loaded"),v.onProcessComplete()}).catch(function(){console.warn("Font failed to load",p),v.onProcessComplete()})}});h.register("font",function(r,d,p,v,g){if(Array.isArray(r))for(var m=0;m<r.length;m++)this.addFile(new f(this,r[m]));else this.addFile(new f(this,r,d,p,v,g));return this}),S.exports=f},47931:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=s(73894),f=new c({Extends:u,initialize:function(d,p,v,g,m){var T="glsl";if(n(p)){var P=p;p=l(P,"key"),v=l(P,"url"),g=l(P,"shaderType","fragment"),m=l(P,"xhrSettings"),T=l(P,"extension",T)}else g===void 0&&(g="fragment");var M={type:"glsl",cache:d.cacheManager.shader,extension:T,responseType:"text",key:p,url:v,config:{shaderType:g},xhrSettings:m};u.call(this,d,M)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var r=this.data.split(`
`),d=this.extractBlock(r,0);if(d)for(;d;){var p=this.getShaderName(d.header),v=this.getShaderType(d.header),g=this.getShaderUniforms(d.header),m=d.shader;if(this.cache.has(p)){var T=this.cache.get(p);v==="fragment"?T.fragmentSrc=m:T.vertexSrc=m,T.uniforms||(T.uniforms=g)}else v==="fragment"?this.cache.add(p,new o(p,m,"",g)):this.cache.add(p,new o(p,"",m,g));d=this.extractBlock(r,d.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new o(this.key,this.data)):this.cache.add(this.key,new o(this.key,"",this.data))},getShaderName:function(r){for(var d=0;d<r.length;d++){var p=r[d].trim();if(p.substring(0,5)==="name:")return p.substring(5).trim()}return this.key},getShaderType:function(r){for(var d=0;d<r.length;d++){var p=r[d].trim();if(p.substring(0,5)==="type:")return p.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(r){for(var d={},p=0;p<r.length;p++){var v=r[p].trim();if(v.substring(0,8)==="uniform."){var g=v.indexOf(":");if(g){var m=v.substring(8,g);try{d[m]=JSON.parse(v.substring(g+1))}catch{console.warn("Invalid uniform JSON: "+m)}}}}return d},extractBlock:function(r,d){for(var p=-1,v=-1,g=-1,m=!1,T=!1,P=[],M=[],b=d;b<r.length;b++){var R=r[b].trim();if(R==="---")if(p===-1)p=b,m=!0;else if(m)v=b,m=!1,T=!0;else{T=!1;break}else m?P.push(R):T&&(M.push(R),g=b)}return!m&&v!==-1?{header:P,shader:M.join(`
`),offset:g}:null}});h.register("glsl",function(r,d,p,v){if(Array.isArray(r))for(var g=0;g<r.length;g++)this.addFile(new f(this,r[g]));else this.addFile(new f(this,r,d,p,v));return this}),S.exports=f},89749:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(54899),u=s(41299),h=s(95540),l=s(98356),n=s(41212),o=new c({Extends:u,initialize:function(r,d,p,v){if(n(d)){var g=d;d=h(g,"key"),v=h(g,"config",v)}var m={type:"audio",cache:r.cacheManager.audio,extension:p.type,key:d,url:p.url,config:v};u.call(this,r,m),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var f=0;f<this.data.length;f++){var r=this.data[f];r.oncanplaythrough=null,r.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(f){var r=f.target;r.oncanplaythrough=null,r.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(y.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var f=this.config&&this.config.instances||1;this.filesTotal=f,this.filesLoaded=0,this.percentComplete=0;for(var r=0;r<f;r++){var d=new Audio;d.dataset||(d.dataset={}),d.dataset.name=this.key+("0"+r).slice(-2),d.dataset.used="false",this.locked?d.dataset.locked="true":(d.dataset.locked="false",d.preload="auto",d.oncanplaythrough=this.onProgress.bind(this),d.onerror=this.onError.bind(this)),this.data.push(d)}for(r=0;r<this.data.length;r++)d=this.data[r],d.src=l(this,this.loader.baseURL),this.locked||d.load();this.locked&&setTimeout(this.onLoad.bind(this))}});S.exports=o},88470:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=new c({Extends:u,initialize:function(r,d,p,v){var g="html";if(n(d)){var m=d;d=l(m,"key"),p=l(m,"url"),v=l(m,"xhrSettings"),g=l(m,"extension",g)}var T={type:"text",cache:r.cacheManager.html,extension:g,responseType:"text",key:d,url:p,xhrSettings:v};u.call(this,r,T)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("html",function(f,r,d){if(Array.isArray(f))for(var p=0;p<f.length;p++)this.addFile(new o(this,f[p]));else this.addFile(new o(this,f,r,d));return this}),S.exports=o},14643:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=new c({Extends:u,initialize:function(r,d,p,v,g,m){v===void 0&&(v=512),g===void 0&&(g=512);var T="html";if(n(d)){var P=d;d=l(P,"key"),p=l(P,"url"),m=l(P,"xhrSettings"),T=l(P,"extension",T),v=l(P,"width",v),g=l(P,"height",g)}var M={type:"html",cache:r.textureManager,extension:T,responseType:"text",key:d,url:p,xhrSettings:m,config:{width:v,height:g}};u.call(this,r,M)},onProcess:function(){this.state=y.FILE_PROCESSING;var f=this.config.width,r=this.config.height,d=[];d.push('<svg width="'+f+'px" height="'+r+'px" viewBox="0 0 '+f+" "+r+'" xmlns="http://www.w3.org/2000/svg">'),d.push('<foreignObject width="100%" height="100%">'),d.push('<body xmlns="http://www.w3.org/1999/xhtml">'),d.push(this.xhrLoader.responseText),d.push("</body>"),d.push("</foreignObject>"),d.push("</svg>");var p=[d.join(`
`)],v=this;try{var g=new window.Blob(p,{type:"image/svg+xml;charset=utf-8"})}catch{v.state=y.FILE_ERRORED,v.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){u.revokeObjectURL(v.data),v.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(v.data),v.onProcessError()},u.createObjectURL(this.data,g,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});h.register("htmlTexture",function(f,r,d,p,v){if(Array.isArray(f))for(var g=0;g<f.length;g++)this.addFile(new o(this,f[g]));else this.addFile(new o(this,f,r,d,p,v));return this}),S.exports=o},19550:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=s(98356),f=new c({Extends:u,initialize:function r(d,p,v,g,m){var T="png",P;if(n(p)){var M=p;p=l(M,"key"),v=l(M,"url"),P=l(M,"normalMap"),g=l(M,"xhrSettings"),T=l(M,"extension",T),m=l(M,"frameConfig")}Array.isArray(v)&&(P=v[1],v=v[0]);var b={type:"image",cache:d.textureManager,extension:T,responseType:"blob",key:p,url:v,xhrSettings:g,config:m};if(u.call(this,d,b),P){var R=new r(d,this.key,P,g,m);R.type="normalMap",this.setLink(R),d.addFile(R)}this.useImageElementLoad=d.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var r=this;this.data.onload=function(){u.revokeObjectURL(r.data),r.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(r.data),r.onProcessError()},u.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var r=this.state;this.state=y.FILE_PROCESSING,r===y.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=y.FILE_LOADING,this.src=o(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var r=this;this.data.onload=function(){r.state=y.FILE_LOADED,r.loader.nextFile(r,!0)},this.data.onerror=function(){r.loader.nextFile(r,!1)},this.data.src=this.src},addToCache:function(){var r=this.linkFile;r?r.state>=y.FILE_COMPLETE&&(r.type==="spritesheet"?r.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,r.data,this.data):this.cache.addImage(this.key,this.data,r.data)):this.cache.addImage(this.key,this.data)}});h.register("image",function(r,d,p){if(Array.isArray(r))for(var v=0;v<r.length;v++)this.addFile(new f(this,r[v]));else this.addFile(new f(this,r,d,p));return this}),S.exports=f},518:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(35154),o=s(41212),f=new c({Extends:u,initialize:function(d,p,v,g,m){var T="json";if(o(p)){var P=p;p=l(P,"key"),v=l(P,"url"),g=l(P,"xhrSettings"),T=l(P,"extension",T),m=l(P,"dataKey",m)}var M={type:"json",cache:d.cacheManager.json,extension:T,responseType:"text",key:p,url:v,xhrSettings:g,config:m};u.call(this,d,M),o(v)&&(m?this.data=n(v,m):this.data=v,this.state=y.FILE_POPULATED)},onProcess:function(){if(this.state!==y.FILE_POPULATED){this.state=y.FILE_PROCESSING;try{var r=JSON.parse(this.xhrLoader.responseText)}catch(p){throw this.onProcessError(),p}var d=this.config;typeof d=="string"?this.data=n(r,d,r):this.data=r}this.onProcessComplete()}});h.register("json",function(r,d,p,v){if(Array.isArray(r))for(var g=0;g<r.length;g++)this.addFile(new f(this,r[g]));else this.addFile(new f(this,r,d,v,p));return this}),S.exports=f},59327:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(74099),u=s(95540),h=s(19550),l=s(41212),n=s(518),o=s(26430),f=new c({Extends:o,initialize:function(d,p,v,g,m,T,P){if(l(p)){var M=p;p=u(M,"key"),u(M,"url",!1)?v=u(M,"url"):v=u(M,"atlasURL"),T=u(M,"xhrSettings"),g=u(M,"path"),m=u(M,"baseURL"),P=u(M,"textureXhrSettings")}var b=new n(d,p,v,T);o.call(this,d,"multiatlas",p,[b]),this.config.path=g,this.config.baseURL=m,this.config.textureXhrSettings=P},onFileComplete:function(r){var d=this.files.indexOf(r);if(d!==-1&&(this.pending--,r.type==="json"&&r.data.hasOwnProperty("textures"))){var p=r.data.textures,v=this.config,g=this.loader,m=g.baseURL,T=g.path,P=g.prefix,M=u(v,"baseURL",this.baseURL),b=u(v,"path",this.path),R=u(v,"prefix",this.prefix),A=u(v,"textureXhrSettings");g.setBaseURL(M),g.setPath(b),g.setPrefix(R);for(var D=0;D<p.length;D++){var G=p[D].image,F="MA"+this.multiKeyIndex+"_"+G,B=new h(g,F,G,A);if(this.addToMultiFile(B),g.addFile(B),p[D].normalMap){var N=new h(g,F,p[D].normalMap,A);N.type="normalMap",B.setLink(N),this.addToMultiFile(N),g.addFile(N)}}g.setBaseURL(m),g.setPath(T),g.setPrefix(P)}},addToCache:function(){if(this.isReadyToProcess()){for(var r=this.files[0],d=[],p=[],v=[],g=1;g<this.files.length;g++){var m=this.files[g];if(m.type!=="normalMap")for(var T=m.key.indexOf("_"),P=m.key.substr(T+1),M=m.data,b=0;b<r.data.textures.length;b++){var R=r.data.textures[b];if(R.image===P){p.push(M),d.push(R),m.linkFile&&v.push(m.linkFile.data);break}}}v.length===0&&(v=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,p,d,v),this.complete=!0}}});y.register("multiatlas",function(r,d,p,v,g){var m;if(Array.isArray(r))for(var T=0;T<r.length;T++)m=new f(this,r[T]),this.addFile(m.files);else m=new f(this,r,d,p,v,g),this.addFile(m.files);return this}),S.exports=f},99297:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(74099),u=s(95540),h=s(41212),l=s(26430),n=s(34328),o=new c({Extends:l,initialize:function(r,d,p,v){var g="js",m=[];if(h(d)){var T=d;d=u(T,"key"),p=u(T,"url"),v=u(T,"xhrSettings"),g=u(T,"extension",g)}Array.isArray(p)||(p=[p]);for(var P=0;P<p.length;P++){var M=new n(r,{key:d+"_"+P.toString(),url:p[P],extension:g,xhrSettings:v});M.onProcess=function(){this.onProcessComplete()},m.push(M)}l.call(this,r,"scripts",d,m)},addToCache:function(){if(this.isReadyToProcess()){for(var f=0;f<this.files.length;f++){var r=this.files[f];r.data=document.createElement("script"),r.data.language="javascript",r.data.type="text/javascript",r.data.defer=!1,r.data.text=r.xhrLoader.responseText,document.head.appendChild(r.data)}this.complete=!0}}});y.register("scripts",function(f,r,d){var p;if(Array.isArray(f))for(var v=0;v<f.length;v++)p=new o(this,f[v]),this.addFile(p.files);else p=new o(this,f,r,d),this.addFile(p.files);return this}),S.exports=o},41846:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(74099),u=s(95540),h=s(41212),l=s(26430),n=s(85048),o=s(61485),f=s(78776),r=new c({Extends:l,initialize:function(p,v,g,m,T,P){var M,b,R=p.cacheManager.obj;if(h(v)){var A=v;v=u(A,"key"),M=new f(p,{key:v,type:"obj",cache:R,url:u(A,"url"),extension:u(A,"extension","obj"),xhrSettings:u(A,"xhrSettings"),config:{flipUV:u(A,"flipUV",T)}}),m=u(A,"matURL"),m&&(b=new f(p,{key:v,type:"mat",cache:R,url:m,extension:u(A,"matExtension","mat"),xhrSettings:u(A,"xhrSettings")}))}else M=new f(p,{key:v,url:g,type:"obj",cache:R,extension:"obj",xhrSettings:P,config:{flipUV:T}}),m&&(b=new f(p,{key:v,url:m,type:"mat",cache:R,extension:"mat",xhrSettings:P}));l.call(this,p,"obj",v,[M,b])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],p=this.files[1],v=n(d.data,d.config.flipUV);p&&(v.materials=o(p.data)),d.cache.add(d.key,v),this.complete=!0}}});y.register("obj",function(d,p,v,g,m){var T;if(Array.isArray(d))for(var P=0;P<d.length;P++)T=new r(this,d[P]),this.addFile(T.files);else T=new r(this,d,p,v,g,m),this.addFile(T.files);return this}),S.exports=r},58610:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(74099),h=s(518),l=new c({Extends:h,initialize:function(o,f,r,d,p){h.call(this,o,f,r,d,p),this.type="packfile"},onProcess:function(){if(this.state!==y.FILE_POPULATED&&(this.state=y.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var n={};n[this.config]=this.data,this.data=n}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});u.register("pack",function(n,o,f,r){if(Array.isArray(n))for(var d=0;d<n.length;d++)this.addFile(new l(this,n[d]));else this.addFile(new l(this,n,o,r,f));return this}),S.exports=l},48988:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=new c({Extends:u,initialize:function(r,d,p,v,g,m){var T="js";if(n(d)){var P=d;d=l(P,"key"),p=l(P,"url"),m=l(P,"xhrSettings"),T=l(P,"extension",T),v=l(P,"start"),g=l(P,"mapping")}var M={type:"plugin",cache:!1,extension:T,responseType:"text",key:d,url:p,xhrSettings:m,config:{start:v,mapping:g}};u.call(this,r,M),typeof p=="function"&&(this.data=p,this.state=y.FILE_POPULATED)},onProcess:function(){var f=this.loader.systems.plugins,r=this.config,d=l(r,"start",!1),p=l(r,"mapping",null);if(this.state===y.FILE_POPULATED)f.install(this.key,this.data,d,p);else{this.state=y.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var v=f.install(this.key,window[this.key],d,p);(d||p)&&(this.loader.systems[p]=v,this.loader.scene[p]=v)}this.onProcessComplete()}});h.register("plugin",function(f,r,d,p,v){if(Array.isArray(f))for(var g=0;g<f.length;g++)this.addFile(new o(this,f[g]));else this.addFile(new o(this,f,r,d,p,v));return this}),S.exports=o},67397:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=new c({Extends:u,initialize:function(r,d,p,v,g){var m="svg";if(n(d)){var T=d;d=l(T,"key"),p=l(T,"url"),v=l(T,"svgConfig",{}),g=l(T,"xhrSettings"),m=l(T,"extension",m)}var P={type:"svg",cache:r.textureManager,extension:m,responseType:"text",key:d,url:p,xhrSettings:g,config:{width:l(v,"width"),height:l(v,"height"),scale:l(v,"scale")}};u.call(this,r,P)},onProcess:function(){this.state=y.FILE_PROCESSING;var f=this.xhrLoader.responseText,r=[f],d=this.config.width,p=this.config.height,v=this.config.scale;t:if(d&&p||v){var g=null,m=new DOMParser;g=m.parseFromString(f,"text/xml");var T=g.getElementsByTagName("svg")[0],P=T.hasAttribute("viewBox"),M=parseFloat(T.getAttribute("width")),b=parseFloat(T.getAttribute("height"));if(!P&&M&&b)T.setAttribute("viewBox","0  0 "+M+" "+b);else if(P&&!M&&!b){var R=T.getAttribute("viewBox").split(/\s+|,/);M=R[2],b=R[3]}if(v)if(M&&b)d=M*v,p=b*v;else break t;T.setAttribute("width",d.toString()+"px"),T.setAttribute("height",p.toString()+"px"),r=[new XMLSerializer().serializeToString(T)]}try{var A=new window.Blob(r,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var D=this,G=!1;this.data.onload=function(){G||u.revokeObjectURL(D.data),D.onProcessComplete()},this.data.onerror=function(){G?D.onProcessError():(G=!0,u.revokeObjectURL(D.data),D.data.src="data:image/svg+xml,"+encodeURIComponent(r.join("")))},u.createObjectURL(this.data,A,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});h.register("svg",function(f,r,d,p){if(Array.isArray(f))for(var v=0;v<f.length;v++)this.addFile(new o(this,f[v]));else this.addFile(new o(this,f,r,d,p));return this}),S.exports=o},88423:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=new c({Extends:u,initialize:function(r,d,p,v){var g="js";if(n(d)){var m=d;d=l(m,"key"),p=l(m,"url"),v=l(m,"xhrSettings"),g=l(m,"extension",g)}var T={type:"text",extension:g,responseType:"text",key:d,url:p,xhrSettings:v};u.call(this,r,T)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var f=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),r=eval;this.loader.sceneManager.add(this.key,r(f)),this.complete=!0}});h.register("sceneFile",function(f,r,d){if(Array.isArray(f))for(var p=0;p<f.length;p++)this.addFile(new o(this,f[p]));else this.addFile(new o(this,f,r,d));return this}),S.exports=o},56812:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=new c({Extends:u,initialize:function(r,d,p,v,g,m){var T="js";if(n(d)){var P=d;d=l(P,"key"),p=l(P,"url"),m=l(P,"xhrSettings"),T=l(P,"extension",T),v=l(P,"systemKey"),g=l(P,"sceneKey")}var M={type:"scenePlugin",cache:!1,extension:T,responseType:"text",key:d,url:p,xhrSettings:m,config:{systemKey:v,sceneKey:g}};u.call(this,r,M),typeof p=="function"&&(this.data=p,this.state=y.FILE_POPULATED)},onProcess:function(){var f=this.loader.systems.plugins,r=this.config,d=this.key,p=l(r,"systemKey",d),v=l(r,"sceneKey",d);this.state===y.FILE_POPULATED?f.installScenePlugin(p,this.data,v,this.loader.scene,!0):(this.state=y.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),f.installScenePlugin(p,window[this.key],v,this.loader.scene,!0)),this.onProcessComplete()}});h.register("scenePlugin",function(f,r,d,p,v){if(Array.isArray(f))for(var g=0;g<f.length;g++)this.addFile(new o(this,f[g]));else this.addFile(new o(this,f,r,d,p,v));return this}),S.exports=o},34328:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=new c({Extends:u,initialize:function(r,d,p,v,g){var m="js";if(n(d)){var T=d;d=l(T,"key"),p=l(T,"url"),v=l(T,"type","script"),g=l(T,"xhrSettings"),m=l(T,"extension",m)}else v===void 0&&(v="script");var P={type:v,cache:!1,extension:m,responseType:"text",key:d,url:p,xhrSettings:g};u.call(this,r,P)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("script",function(f,r,d,p){if(Array.isArray(f))for(var v=0;v<f.length;v++)this.addFile(new o(this,f[v]));else this.addFile(new o(this,f,r,d,p));return this}),S.exports=o},85035:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(74099),h=s(19550),l=new c({Extends:h,initialize:function(o,f,r,d,p){h.call(this,o,f,r,p,d),this.type="spritesheet"},addToCache:function(){var n=this.linkFile;n?n.state>=y.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,n.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,n.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});u.register("spritesheet",function(n,o,f,r){if(Array.isArray(n))for(var d=0;d<n.length;d++)this.addFile(new l(this,n[d]));else this.addFile(new l(this,n,o,f,r));return this}),S.exports=l},78776:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=new c({Extends:u,initialize:function(r,d,p,v){var g="text",m="txt",T=r.cacheManager.text;if(n(d)){var P=d;d=l(P,"key"),p=l(P,"url"),v=l(P,"xhrSettings"),m=l(P,"extension",m),g=l(P,"type",g),T=l(P,"cache",T)}var M={type:g,cache:T,extension:m,responseType:"text",key:d,url:p,xhrSettings:v};u.call(this,r,M)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("text",function(f,r,d){if(Array.isArray(f))for(var p=0;p<f.length;p++)this.addFile(new o(this,f[p]));else this.addFile(new o(this,f,r,d));return this}),S.exports=o},49477:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=s(80341),f=new c({Extends:u,initialize:function(d,p,v,g){var m="csv";if(n(p)){var T=p;p=l(T,"key"),v=l(T,"url"),g=l(T,"xhrSettings"),m=l(T,"extension",m)}var P={type:"tilemapCSV",cache:d.cacheManager.tilemap,extension:m,responseType:"text",key:p,url:v,xhrSettings:g};u.call(this,d,P),this.tilemapFormat=o.CSV},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var r={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,r)}});h.register("tilemapCSV",function(r,d,p){if(Array.isArray(r))for(var v=0;v<r.length;v++)this.addFile(new f(this,r[v]));else this.addFile(new f(this,r,d,p));return this}),S.exports=f},40807:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(74099),u=s(518),h=s(80341),l=new c({Extends:u,initialize:function(o,f,r,d){u.call(this,o,f,r,d),this.type="tilemapJSON",this.cache=o.cacheManager.tilemap},addToCache:function(){var n={format:h.WELTMEISTER,data:this.data};this.cache.add(this.key,n)}});y.register("tilemapImpact",function(n,o,f){if(Array.isArray(n))for(var r=0;r<n.length;r++)this.addFile(new l(this,n[r]));else this.addFile(new l(this,n,o,f));return this}),S.exports=l},56775:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(74099),u=s(518),h=s(80341),l=new c({Extends:u,initialize:function(o,f,r,d){u.call(this,o,f,r,d),this.type="tilemapJSON",this.cache=o.cacheManager.tilemap},addToCache:function(){var n={format:h.TILED_JSON,data:this.data};this.cache.add(this.key,n)}});y.register("tilemapTiledJSON",function(n,o,f){if(Array.isArray(n))for(var r=0;r<n.length;r++)this.addFile(new l(this,n[r]));else this.addFile(new l(this,n,o,f));return this}),S.exports=l},25771:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(74099),u=s(95540),h=s(19550),l=s(41212),n=s(26430),o=s(78776),f=new c({Extends:n,initialize:function(d,p,v,g,m,T){var P,M;if(l(p)){var b=p;p=u(b,"key"),P=new h(d,{key:p,url:u(b,"textureURL"),extension:u(b,"textureExtension","png"),normalMap:u(b,"normalMap"),xhrSettings:u(b,"textureXhrSettings")}),M=new o(d,{key:p,url:u(b,"atlasURL"),extension:u(b,"atlasExtension","txt"),xhrSettings:u(b,"atlasXhrSettings")})}else P=new h(d,p,v,m),M=new o(d,p,g,T);P.linkFile?n.call(this,d,"unityatlas",p,[P,M,P.linkFile]):n.call(this,d,"unityatlas",p,[P,M])},addToCache:function(){if(this.isReadyToProcess()){var r=this.files[0],d=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(r.key,r.data,d.data,p),this.complete=!0}}});y.register("unityAtlas",function(r,d,p,v,g){var m;if(Array.isArray(r))for(var T=0;T<r.length;T++)m=new f(this,r[T]),this.addFile(m.files);else m=new f(this,r,d,p,v,g),this.addFile(m.files);return this}),S.exports=f},33720:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(98356),n=s(95540),o=s(41212),f=new c({Extends:u,initialize:function(d,p,v,g){if(g===void 0&&(g=!1),o(p)){var m=p;p=n(m,"key"),v=n(m,"url",[]),g=n(m,"noAudio",!1)}var T=d.systems.game.device.video.getVideoURL(v);T||console.warn("VideoFile: No supported format for "+p);var P={type:"video",cache:d.cacheManager.video,extension:T.type,key:p,url:T.url,config:{noAudio:g}};u.call(this,d,P)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=l(this,this.loader.baseURL),this.state=y.FILE_LOADED,this.loader.nextFile(this,!0)}});h.register("video",function(r,d,p){if(Array.isArray(r))for(var v=0;v<r.length;v++)this.addFile(new f(this,r[v]));else this.addFile(new f(this,r,d,p));return this}),S.exports=f},57318:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(23906),u=s(41299),h=s(74099),l=s(95540),n=s(41212),o=s(56836),f=new c({Extends:u,initialize:function(d,p,v,g){var m="xml";if(n(p)){var T=p;p=l(T,"key"),v=l(T,"url"),g=l(T,"xhrSettings"),m=l(T,"extension",m)}var P={type:"xml",cache:d.cacheManager.xml,extension:m,responseType:"text",key:p,url:v,xhrSettings:g};u.call(this,d,P)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=o(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});h.register("xml",function(r,d,p){if(Array.isArray(r))for(var v=0;v<r.length;v++)this.addFile(new f(this,r[v]));else this.addFile(new f(this,r,d,p));return this}),S.exports=f},64589:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={AnimationJSONFile:s(14135),AsepriteFile:s(76272),AtlasJSONFile:s(38734),AtlasXMLFile:s(74599),AudioFile:s(21097),AudioSpriteFile:s(89524),BinaryFile:s(85722),BitmapFontFile:s(97025),CompressedTextureFile:s(69559),CSSFile:s(16024),FontFile:s(87674),GLSLFile:s(47931),HTML5AudioFile:s(89749),HTMLFile:s(88470),HTMLTextureFile:s(14643),ImageFile:s(19550),JSONFile:s(518),MultiAtlasFile:s(59327),MultiScriptFile:s(99297),OBJFile:s(41846),PackFile:s(58610),PluginFile:s(48988),SceneFile:s(88423),ScenePluginFile:s(56812),ScriptFile:s(34328),SpriteSheetFile:s(85035),SVGFile:s(67397),TextFile:s(78776),TilemapCSVFile:s(49477),TilemapImpactFile:s(40807),TilemapJSONFile:s(56775),UnityAtlasFile:s(25771),VideoFile:s(33720),XMLFile:s(57318)}},57777:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(23906),y=s(79291),u={Events:s(54899),FileTypes:s(64589),File:s(41299),FileTypesManager:s(74099),GetURL:s(98356),LoaderPlugin:s(74261),MergeXHRSettings:s(3374),MultiFile:s(26430),XHRLoader:s(84376),XHRSettings:s(92638)};u=y(!1,u,c),S.exports=u},53307:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){for(var c=0,y=0;y<s.length;y++)c+=+s[y];return c/s.length};S.exports=w},85710:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(6411),y=function(u,h){return c(u)/c(h)/c(u-h)};S.exports=y},30976:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return Math.floor(Math.random()*(c-s+1)+s)};S.exports=w},87842:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h){var l=(u-c)*.5,n=(h-y)*.5,o=s*s,f=s*o;return(2*y-2*u+l+n)*f+(-3*y+3*u-2*l-n)*o+l*s+y};S.exports=w},26302:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){c===void 0&&(c=0),y===void 0&&(y=10);var u=Math.pow(y,-c);return Math.ceil(s*u)/u};S.exports=w},45319:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return Math.max(c,Math.min(y,s))};S.exports=w},39506:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(36383),y=function(u){return u*c.DEG_TO_RAD};S.exports=y},61241:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return Math.abs(s-c)};S.exports=w},38857:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45319),y=s(83419),u=s(37867),h=s(29747),l=new u,n=new y({initialize:function o(f,r,d,p){f===void 0&&(f=0),r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p=o.DefaultOrder),this._x=f,this._y=r,this._z=d,this._order=p,this.onChangeCallback=h},x:{get:function(){return this._x},set:function(o){this._x=o,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(o){this._y=o,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(o){this._z=o,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(o){this._order=o,this.onChangeCallback(this)}},set:function(o,f,r,d){return d===void 0&&(d=this._order),this._x=o,this._y=f,this._z=r,this._order=d,this.onChangeCallback(this),this},copy:function(o){return this.set(o.x,o.y,o.z,o.order)},setFromQuaternion:function(o,f,r){return f===void 0&&(f=this._order),r===void 0&&(r=!1),l.fromQuat(o),this.setFromRotationMatrix(l,f,r)},setFromRotationMatrix:function(o,f,r){f===void 0&&(f=this._order),r===void 0&&(r=!1);var d=o.val,p=d[0],v=d[4],g=d[8],m=d[1],T=d[5],P=d[9],M=d[2],b=d[6],R=d[10],A=0,D=0,G=0,F=.99999;switch(f){case"XYZ":{D=Math.asin(c(g,-1,1)),Math.abs(g)<F?(A=Math.atan2(-P,R),G=Math.atan2(-v,p)):A=Math.atan2(b,T);break}case"YXZ":{A=Math.asin(-c(P,-1,1)),Math.abs(P)<F?(D=Math.atan2(g,R),G=Math.atan2(m,T)):D=Math.atan2(-M,p);break}case"ZXY":{A=Math.asin(c(b,-1,1)),Math.abs(b)<F?(D=Math.atan2(-M,R),G=Math.atan2(-v,T)):G=Math.atan2(m,p);break}case"ZYX":{D=Math.asin(-c(M,-1,1)),Math.abs(M)<F?(A=Math.atan2(b,R),G=Math.atan2(m,p)):G=Math.atan2(-v,T);break}case"YZX":{G=Math.asin(c(m,-1,1)),Math.abs(m)<F?(A=Math.atan2(-P,T),D=Math.atan2(-M,p)):D=Math.atan2(g,R);break}case"XZY":{G=Math.asin(-c(v,-1,1)),Math.abs(v)<F?(A=Math.atan2(b,T),D=Math.atan2(g,p)):A=Math.atan2(-P,R);break}}return this._x=A,this._y=D,this._z=G,this._order=f,r&&this.onChangeCallback(this),this}});n.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],n.DefaultOrder="XYZ",S.exports=n},6411:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){if(s===0)return 1;for(var c=s;--s;)c*=s;return c};S.exports=w},99472:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return Math.random()*(c-s)+s};S.exports=w},77623:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){c===void 0&&(c=0),y===void 0&&(y=10);var u=Math.pow(y,-c);return Math.floor(s*u)/u};S.exports=w},62945:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45319),y=function(u,h,l){return u=c(u,0,1),(l-h)*u+h};S.exports=y},38265:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s/c/1e3};S.exports=w},78702:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s==parseFloat(s)?!(s%2):void 0};S.exports=w},94883:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s===parseFloat(s)?!(s%2):void 0};S.exports=w},28915:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return(c-s)*y+s};S.exports=w},94908:S=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return y===void 0&&(y=0),s.clone().lerp(c,y)};S.exports=w},94434:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h){this.val=new Float32Array(9),h?this.copy(h):this.identity()},clone:function(){return new y(this)},set:function(u){return this.copy(u)},copy:function(u){var h=this.val,l=u.val;return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[4]=l[4],h[5]=l[5],h[6]=l[6],h[7]=l[7],h[8]=l[8],this},fromMat4:function(u){var h=u.val,l=this.val;return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[4],l[4]=h[5],l[5]=h[6],l[6]=h[8],l[7]=h[9],l[8]=h[10],this},fromArray:function(u){var h=this.val;return h[0]=u[0],h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=u[6],h[7]=u[7],h[8]=u[8],this},identity:function(){var u=this.val;return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=1,u[5]=0,u[6]=0,u[7]=0,u[8]=1,this},transpose:function(){var u=this.val,h=u[1],l=u[2],n=u[5];return u[1]=u[3],u[2]=u[6],u[3]=h,u[5]=u[7],u[6]=l,u[7]=n,this},invert:function(){var u=this.val,h=u[0],l=u[1],n=u[2],o=u[3],f=u[4],r=u[5],d=u[6],p=u[7],v=u[8],g=v*f-r*p,m=-v*o+r*d,T=p*o-f*d,P=h*g+l*m+n*T;return P?(P=1/P,u[0]=g*P,u[1]=(-v*l+n*p)*P,u[2]=(r*l-n*f)*P,u[3]=m*P,u[4]=(v*h-n*d)*P,u[5]=(-r*h+n*o)*P,u[6]=T*P,u[7]=(-p*h+l*d)*P,u[8]=(f*h-l*o)*P,this):null},adjoint:function(){var u=this.val,h=u[0],l=u[1],n=u[2],o=u[3],f=u[4],r=u[5],d=u[6],p=u[7],v=u[8];return u[0]=f*v-r*p,u[1]=n*p-l*v,u[2]=l*r-n*f,u[3]=r*d-o*v,u[4]=h*v-n*d,u[5]=n*o-h*r,u[6]=o*p-f*d,u[7]=l*d-h*p,u[8]=h*f-l*o,this},determinant:function(){var u=this.val,h=u[0],l=u[1],n=u[2],o=u[3],f=u[4],r=u[5],d=u[6],p=u[7],v=u[8];return h*(v*f-r*p)+l*(-v*o+r*d)+n*(p*o-f*d)},multiply:function(u){var h=this.val,l=h[0],n=h[1],o=h[2],f=h[3],r=h[4],d=h[5],p=h[6],v=h[7],g=h[8],m=u.val,T=m[0],P=m[1],M=m[2],b=m[3],R=m[4],A=m[5],D=m[6],G=m[7],F=m[8];return h[0]=T*l+P*f+M*p,h[1]=T*n+P*r+M*v,h[2]=T*o+P*d+M*g,h[3]=b*l+R*f+A*p,h[4]=b*n+R*r+A*v,h[5]=b*o+R*d+A*g,h[6]=D*l+G*f+F*p,h[7]=D*n+G*r+F*v,h[8]=D*o+G*d+F*g,this},translate:function(u){var h=this.val,l=u.x,n=u.y;return h[6]=l*h[0]+n*h[3]+h[6],h[7]=l*h[1]+n*h[4]+h[7],h[8]=l*h[2]+n*h[5]+h[8],this},rotate:function(u){var h=this.val,l=h[0],n=h[1],o=h[2],f=h[3],r=h[4],d=h[5],p=Math.sin(u),v=Math.cos(u);return h[0]=v*l+p*f,h[1]=v*n+p*r,h[2]=v*o+p*d,h[3]=v*f-p*l,h[4]=v*r-p*n,h[5]=v*d-p*o,this},scale:function(u){var h=this.val,l=u.x,n=u.y;return h[0]=l*h[0],h[1]=l*h[1],h[2]=l*h[2],h[3]=n*h[3],h[4]=n*h[4],h[5]=n*h[5],this},fromQuat:function(u){var h=u.x,l=u.y,n=u.z,o=u.w,f=h+h,r=l+l,d=n+n,p=h*f,v=h*r,g=h*d,m=l*r,T=l*d,P=n*d,M=o*f,b=o*r,R=o*d,A=this.val;return A[0]=1-(m+P),A[3]=v+R,A[6]=g-b,A[1]=v-R,A[4]=1-(p+P),A[7]=T+M,A[2]=g+b,A[5]=T-M,A[8]=1-(p+m),this},normalFromMat4:function(u){var h=u.val,l=this.val,n=h[0],o=h[1],f=h[2],r=h[3],d=h[4],p=h[5],v=h[6],g=h[7],m=h[8],T=h[9],P=h[10],M=h[11],b=h[12],R=h[13],A=h[14],D=h[15],G=n*p-o*d,F=n*v-f*d,B=n*g-r*d,N=o*v-f*p,z=o*g-r*p,$=f*g-r*v,Q=m*R-T*b,Z=m*A-P*b,tt=m*D-M*b,H=T*A-P*R,J=T*D-M*R,Y=P*D-M*A,_=G*Y-F*J+B*H+N*tt-z*Z+$*Q;return _?(_=1/_,l[0]=(p*Y-v*J+g*H)*_,l[1]=(v*tt-d*Y-g*Z)*_,l[2]=(d*J-p*tt+g*Q)*_,l[3]=(f*J-o*Y-r*H)*_,l[4]=(n*Y-f*tt+r*Z)*_,l[5]=(o*tt-n*J-r*Q)*_,l[6]=(R*$-A*z+D*N)*_,l[7]=(A*B-b*$-D*F)*_,l[8]=(b*z-R*B+D*G)*_,this):null}});S.exports=y},37867:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(25836),u=1e-6,h=new c({initialize:function(p){this.val=new Float32Array(16),p?this.copy(p):this.identity()},clone:function(){return new h(this)},set:function(d){return this.copy(d)},setValues:function(d,p,v,g,m,T,P,M,b,R,A,D,G,F,B,N){var z=this.val;return z[0]=d,z[1]=p,z[2]=v,z[3]=g,z[4]=m,z[5]=T,z[6]=P,z[7]=M,z[8]=b,z[9]=R,z[10]=A,z[11]=D,z[12]=G,z[13]=F,z[14]=B,z[15]=N,this},copy:function(d){var p=d.val;return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},fromArray:function(d){return this.setValues(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(d,p,v){var g=l.fromQuat(v),m=g.val,T=p.x,P=p.y,M=p.z;return this.setValues(m[0]*T,m[1]*T,m[2]*T,0,m[4]*P,m[5]*P,m[6]*P,0,m[8]*M,m[9]*M,m[10]*M,0,d.x,d.y,d.z,1)},xyz:function(d,p,v){this.identity();var g=this.val;return g[12]=d,g[13]=p,g[14]=v,this},scaling:function(d,p,v){this.zero();var g=this.val;return g[0]=d,g[5]=p,g[10]=v,g[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var d=this.val,p=d[1],v=d[2],g=d[3],m=d[6],T=d[7],P=d[11];return d[1]=d[4],d[2]=d[8],d[3]=d[12],d[4]=p,d[6]=d[9],d[7]=d[13],d[8]=v,d[9]=m,d[11]=d[14],d[12]=g,d[13]=T,d[14]=P,this},getInverse:function(d){return this.copy(d),this.invert()},invert:function(){var d=this.val,p=d[0],v=d[1],g=d[2],m=d[3],T=d[4],P=d[5],M=d[6],b=d[7],R=d[8],A=d[9],D=d[10],G=d[11],F=d[12],B=d[13],N=d[14],z=d[15],$=p*P-v*T,Q=p*M-g*T,Z=p*b-m*T,tt=v*M-g*P,H=v*b-m*P,J=g*b-m*M,Y=R*B-A*F,_=R*N-D*F,U=R*z-G*F,et=A*N-D*B,nt=A*z-G*B,rt=D*z-G*N,ot=$*rt-Q*nt+Z*et+tt*U-H*_+J*Y;return ot?(ot=1/ot,this.setValues((P*rt-M*nt+b*et)*ot,(g*nt-v*rt-m*et)*ot,(B*J-N*H+z*tt)*ot,(D*H-A*J-G*tt)*ot,(M*U-T*rt-b*_)*ot,(p*rt-g*U+m*_)*ot,(N*Z-F*J-z*Q)*ot,(R*J-D*Z+G*Q)*ot,(T*nt-P*U+b*Y)*ot,(v*U-p*nt-m*Y)*ot,(F*H-B*Z+z*$)*ot,(A*Z-R*H-G*$)*ot,(P*_-T*et-M*Y)*ot,(p*et-v*_+g*Y)*ot,(B*Q-F*tt-N*$)*ot,(R*tt-A*Q+D*$)*ot)):this},adjoint:function(){var d=this.val,p=d[0],v=d[1],g=d[2],m=d[3],T=d[4],P=d[5],M=d[6],b=d[7],R=d[8],A=d[9],D=d[10],G=d[11],F=d[12],B=d[13],N=d[14],z=d[15];return this.setValues(P*(D*z-G*N)-A*(M*z-b*N)+B*(M*G-b*D),-(v*(D*z-G*N)-A*(g*z-m*N)+B*(g*G-m*D)),v*(M*z-b*N)-P*(g*z-m*N)+B*(g*b-m*M),-(v*(M*G-b*D)-P*(g*G-m*D)+A*(g*b-m*M)),-(T*(D*z-G*N)-R*(M*z-b*N)+F*(M*G-b*D)),p*(D*z-G*N)-R*(g*z-m*N)+F*(g*G-m*D),-(p*(M*z-b*N)-T*(g*z-m*N)+F*(g*b-m*M)),p*(M*G-b*D)-T*(g*G-m*D)+R*(g*b-m*M),T*(A*z-G*B)-R*(P*z-b*B)+F*(P*G-b*A),-(p*(A*z-G*B)-R*(v*z-m*B)+F*(v*G-m*A)),p*(P*z-b*B)-T*(v*z-m*B)+F*(v*b-m*P),-(p*(P*G-b*A)-T*(v*G-m*A)+R*(v*b-m*P)),-(T*(A*N-D*B)-R*(P*N-M*B)+F*(P*D-M*A)),p*(A*N-D*B)-R*(v*N-g*B)+F*(v*D-g*A),-(p*(P*N-M*B)-T*(v*N-g*B)+F*(v*M-g*P)),p*(P*D-M*A)-T*(v*D-g*A)+R*(v*M-g*P))},determinant:function(){var d=this.val,p=d[0],v=d[1],g=d[2],m=d[3],T=d[4],P=d[5],M=d[6],b=d[7],R=d[8],A=d[9],D=d[10],G=d[11],F=d[12],B=d[13],N=d[14],z=d[15],$=p*P-v*T,Q=p*M-g*T,Z=p*b-m*T,tt=v*M-g*P,H=v*b-m*P,J=g*b-m*M,Y=R*B-A*F,_=R*N-D*F,U=R*z-G*F,et=A*N-D*B,nt=A*z-G*B,rt=D*z-G*N;return $*rt-Q*nt+Z*et+tt*U-H*_+J*Y},multiply:function(d){var p=this.val,v=p[0],g=p[1],m=p[2],T=p[3],P=p[4],M=p[5],b=p[6],R=p[7],A=p[8],D=p[9],G=p[10],F=p[11],B=p[12],N=p[13],z=p[14],$=p[15],Q=d.val,Z=Q[0],tt=Q[1],H=Q[2],J=Q[3];return p[0]=Z*v+tt*P+H*A+J*B,p[1]=Z*g+tt*M+H*D+J*N,p[2]=Z*m+tt*b+H*G+J*z,p[3]=Z*T+tt*R+H*F+J*$,Z=Q[4],tt=Q[5],H=Q[6],J=Q[7],p[4]=Z*v+tt*P+H*A+J*B,p[5]=Z*g+tt*M+H*D+J*N,p[6]=Z*m+tt*b+H*G+J*z,p[7]=Z*T+tt*R+H*F+J*$,Z=Q[8],tt=Q[9],H=Q[10],J=Q[11],p[8]=Z*v+tt*P+H*A+J*B,p[9]=Z*g+tt*M+H*D+J*N,p[10]=Z*m+tt*b+H*G+J*z,p[11]=Z*T+tt*R+H*F+J*$,Z=Q[12],tt=Q[13],H=Q[14],J=Q[15],p[12]=Z*v+tt*P+H*A+J*B,p[13]=Z*g+tt*M+H*D+J*N,p[14]=Z*m+tt*b+H*G+J*z,p[15]=Z*T+tt*R+H*F+J*$,this},multiplyLocal:function(d){var p=this.val,v=d.val;return this.setValues(p[0]*v[0]+p[1]*v[4]+p[2]*v[8]+p[3]*v[12],p[0]*v[1]+p[1]*v[5]+p[2]*v[9]+p[3]*v[13],p[0]*v[2]+p[1]*v[6]+p[2]*v[10]+p[3]*v[14],p[0]*v[3]+p[1]*v[7]+p[2]*v[11]+p[3]*v[15],p[4]*v[0]+p[5]*v[4]+p[6]*v[8]+p[7]*v[12],p[4]*v[1]+p[5]*v[5]+p[6]*v[9]+p[7]*v[13],p[4]*v[2]+p[5]*v[6]+p[6]*v[10]+p[7]*v[14],p[4]*v[3]+p[5]*v[7]+p[6]*v[11]+p[7]*v[15],p[8]*v[0]+p[9]*v[4]+p[10]*v[8]+p[11]*v[12],p[8]*v[1]+p[9]*v[5]+p[10]*v[9]+p[11]*v[13],p[8]*v[2]+p[9]*v[6]+p[10]*v[10]+p[11]*v[14],p[8]*v[3]+p[9]*v[7]+p[10]*v[11]+p[11]*v[15],p[12]*v[0]+p[13]*v[4]+p[14]*v[8]+p[15]*v[12],p[12]*v[1]+p[13]*v[5]+p[14]*v[9]+p[15]*v[13],p[12]*v[2]+p[13]*v[6]+p[14]*v[10]+p[15]*v[14],p[12]*v[3]+p[13]*v[7]+p[14]*v[11]+p[15]*v[15])},premultiply:function(d){return this.multiplyMatrices(d,this)},multiplyMatrices:function(d,p){var v=d.val,g=p.val,m=v[0],T=v[4],P=v[8],M=v[12],b=v[1],R=v[5],A=v[9],D=v[13],G=v[2],F=v[6],B=v[10],N=v[14],z=v[3],$=v[7],Q=v[11],Z=v[15],tt=g[0],H=g[4],J=g[8],Y=g[12],_=g[1],U=g[5],et=g[9],nt=g[13],rt=g[2],ot=g[6],dt=g[10],vt=g[14],mt=g[3],gt=g[7],yt=g[11],St=g[15];return this.setValues(m*tt+T*_+P*rt+M*mt,b*tt+R*_+A*rt+D*mt,G*tt+F*_+B*rt+N*mt,z*tt+$*_+Q*rt+Z*mt,m*H+T*U+P*ot+M*gt,b*H+R*U+A*ot+D*gt,G*H+F*U+B*ot+N*gt,z*H+$*U+Q*ot+Z*gt,m*J+T*et+P*dt+M*yt,b*J+R*et+A*dt+D*yt,G*J+F*et+B*dt+N*yt,z*J+$*et+Q*dt+Z*yt,m*Y+T*nt+P*vt+M*St,b*Y+R*nt+A*vt+D*St,G*Y+F*nt+B*vt+N*St,z*Y+$*nt+Q*vt+Z*St)},translate:function(d){return this.translateXYZ(d.x,d.y,d.z)},translateXYZ:function(d,p,v){var g=this.val;return g[12]=g[0]*d+g[4]*p+g[8]*v+g[12],g[13]=g[1]*d+g[5]*p+g[9]*v+g[13],g[14]=g[2]*d+g[6]*p+g[10]*v+g[14],g[15]=g[3]*d+g[7]*p+g[11]*v+g[15],this},scale:function(d){return this.scaleXYZ(d.x,d.y,d.z)},scaleXYZ:function(d,p,v){var g=this.val;return g[0]=g[0]*d,g[1]=g[1]*d,g[2]=g[2]*d,g[3]=g[3]*d,g[4]=g[4]*p,g[5]=g[5]*p,g[6]=g[6]*p,g[7]=g[7]*p,g[8]=g[8]*v,g[9]=g[9]*v,g[10]=g[10]*v,g[11]=g[11]*v,this},makeRotationAxis:function(d,p){var v=Math.cos(p),g=Math.sin(p),m=1-v,T=d.x,P=d.y,M=d.z,b=m*T,R=m*P;return this.setValues(b*T+v,b*P-g*M,b*M+g*P,0,b*P+g*M,R*P+v,R*M-g*T,0,b*M-g*P,R*M+g*T,m*M*M+v,0,0,0,0,1)},rotate:function(d,p){var v=this.val,g=p.x,m=p.y,T=p.z,P=Math.sqrt(g*g+m*m+T*T);if(Math.abs(P)<u)return this;P=1/P,g*=P,m*=P,T*=P;var M=Math.sin(d),b=Math.cos(d),R=1-b,A=v[0],D=v[1],G=v[2],F=v[3],B=v[4],N=v[5],z=v[6],$=v[7],Q=v[8],Z=v[9],tt=v[10],H=v[11],J=v[12],Y=v[13],_=v[14],U=v[15],et=g*g*R+b,nt=m*g*R+T*M,rt=T*g*R-m*M,ot=g*m*R-T*M,dt=m*m*R+b,vt=T*m*R+g*M,mt=g*T*R+m*M,gt=m*T*R-g*M,yt=T*T*R+b;return this.setValues(A*et+B*nt+Q*rt,D*et+N*nt+Z*rt,G*et+z*nt+tt*rt,F*et+$*nt+H*rt,A*ot+B*dt+Q*vt,D*ot+N*dt+Z*vt,G*ot+z*dt+tt*vt,F*ot+$*dt+H*vt,A*mt+B*gt+Q*yt,D*mt+N*gt+Z*yt,G*mt+z*gt+tt*yt,F*mt+$*gt+H*yt,J,Y,_,U)},rotateX:function(d){var p=this.val,v=Math.sin(d),g=Math.cos(d),m=p[4],T=p[5],P=p[6],M=p[7],b=p[8],R=p[9],A=p[10],D=p[11];return p[4]=m*g+b*v,p[5]=T*g+R*v,p[6]=P*g+A*v,p[7]=M*g+D*v,p[8]=b*g-m*v,p[9]=R*g-T*v,p[10]=A*g-P*v,p[11]=D*g-M*v,this},rotateY:function(d){var p=this.val,v=Math.sin(d),g=Math.cos(d),m=p[0],T=p[1],P=p[2],M=p[3],b=p[8],R=p[9],A=p[10],D=p[11];return p[0]=m*g-b*v,p[1]=T*g-R*v,p[2]=P*g-A*v,p[3]=M*g-D*v,p[8]=m*v+b*g,p[9]=T*v+R*g,p[10]=P*v+A*g,p[11]=M*v+D*g,this},rotateZ:function(d){var p=this.val,v=Math.sin(d),g=Math.cos(d),m=p[0],T=p[1],P=p[2],M=p[3],b=p[4],R=p[5],A=p[6],D=p[7];return p[0]=m*g+b*v,p[1]=T*g+R*v,p[2]=P*g+A*v,p[3]=M*g+D*v,p[4]=b*g-m*v,p[5]=R*g-T*v,p[6]=A*g-P*v,p[7]=D*g-M*v,this},fromRotationTranslation:function(d,p){var v=d.x,g=d.y,m=d.z,T=d.w,P=v+v,M=g+g,b=m+m,R=v*P,A=v*M,D=v*b,G=g*M,F=g*b,B=m*b,N=T*P,z=T*M,$=T*b;return this.setValues(1-(G+B),A+$,D-z,0,A-$,1-(R+B),F+N,0,D+z,F-N,1-(R+G),0,p.x,p.y,p.z,1)},fromQuat:function(d){var p=d.x,v=d.y,g=d.z,m=d.w,T=p+p,P=v+v,M=g+g,b=p*T,R=p*P,A=p*M,D=v*P,G=v*M,F=g*M,B=m*T,N=m*P,z=m*M;return this.setValues(1-(D+F),R+z,A-N,0,R-z,1-(b+F),G+B,0,A+N,G-B,1-(b+D),0,0,0,0,1)},frustum:function(d,p,v,g,m,T){var P=1/(p-d),M=1/(g-v),b=1/(m-T);return this.setValues(m*2*P,0,0,0,0,m*2*M,0,0,(p+d)*P,(g+v)*M,(T+m)*b,-1,0,0,T*m*2*b,0)},perspective:function(d,p,v,g){var m=1/Math.tan(d/2),T=1/(v-g);return this.setValues(m/p,0,0,0,0,m,0,0,0,0,(g+v)*T,-1,0,0,2*g*v*T,0)},perspectiveLH:function(d,p,v,g){return this.setValues(2*v/d,0,0,0,0,2*v/p,0,0,0,0,-g/(v-g),1,0,0,v*g/(v-g),0)},ortho:function(d,p,v,g,m,T){var P=d-p,M=v-g,b=m-T;return P=P===0?P:1/P,M=M===0?M:1/M,b=b===0?b:1/b,this.setValues(-2*P,0,0,0,0,-2*M,0,0,0,0,2*b,0,(d+p)*P,(g+v)*M,(T+m)*b,1)},lookAtRH:function(d,p,v){var g=this.val;return r.subVectors(d,p),r.lengthSq()===0&&(r.z=1),r.normalize(),o.crossVectors(v,r),o.lengthSq()===0&&(Math.abs(v.z)===1?r.x+=1e-4:r.z+=1e-4,r.normalize(),o.crossVectors(v,r)),o.normalize(),f.crossVectors(r,o),g[0]=o.x,g[1]=o.y,g[2]=o.z,g[4]=f.x,g[5]=f.y,g[6]=f.z,g[8]=r.x,g[9]=r.y,g[10]=r.z,this},lookAt:function(d,p,v){var g=d.x,m=d.y,T=d.z,P=v.x,M=v.y,b=v.z,R=p.x,A=p.y,D=p.z;if(Math.abs(g-R)<u&&Math.abs(m-A)<u&&Math.abs(T-D)<u)return this.identity();var G=g-R,F=m-A,B=T-D,N=1/Math.sqrt(G*G+F*F+B*B);G*=N,F*=N,B*=N;var z=M*B-b*F,$=b*G-P*B,Q=P*F-M*G;N=Math.sqrt(z*z+$*$+Q*Q),N?(N=1/N,z*=N,$*=N,Q*=N):(z=0,$=0,Q=0);var Z=F*Q-B*$,tt=B*z-G*Q,H=G*$-F*z;return N=Math.sqrt(Z*Z+tt*tt+H*H),N?(N=1/N,Z*=N,tt*=N,H*=N):(Z=0,tt=0,H=0),this.setValues(z,Z,G,0,$,tt,F,0,Q,H,B,0,-(z*g+$*m+Q*T),-(Z*g+tt*m+H*T),-(G*g+F*m+B*T),1)},yawPitchRoll:function(d,p,v){this.zero(),l.zero(),n.zero();var g=this.val,m=l.val,T=n.val,P=Math.sin(v),M=Math.cos(v);return g[10]=1,g[15]=1,g[0]=M,g[1]=P,g[4]=-P,g[5]=M,P=Math.sin(p),M=Math.cos(p),m[0]=1,m[15]=1,m[5]=M,m[10]=M,m[9]=-P,m[6]=P,P=Math.sin(d),M=Math.cos(d),T[5]=1,T[15]=1,T[0]=M,T[2]=-P,T[8]=P,T[10]=M,this.multiplyLocal(l),this.multiplyLocal(n),this},setWorldMatrix:function(d,p,v,g,m){return this.yawPitchRoll(d.y,d.x,d.z),l.scaling(v.x,v.y,v.z),n.xyz(p.x,p.y,p.z),this.multiplyLocal(l),this.multiplyLocal(n),g&&this.multiplyLocal(g),m&&this.multiplyLocal(m),this},multiplyToMat4:function(d,p){var v=this.val,g=d.val,m=v[0],T=v[1],P=v[2],M=v[3],b=v[4],R=v[5],A=v[6],D=v[7],G=v[8],F=v[9],B=v[10],N=v[11],z=v[12],$=v[13],Q=v[14],Z=v[15],tt=g[0],H=g[1],J=g[2],Y=g[3],_=g[4],U=g[5],et=g[6],nt=g[7],rt=g[8],ot=g[9],dt=g[10],vt=g[11],mt=g[12],gt=g[13],yt=g[14],St=g[15];return p.setValues(tt*m+H*b+J*G+Y*z,H*T+H*R+J*F+Y*$,J*P+H*A+J*B+Y*Q,Y*M+H*D+J*N+Y*Z,_*m+U*b+et*G+nt*z,_*T+U*R+et*F+nt*$,_*P+U*A+et*B+nt*Q,_*M+U*D+et*N+nt*Z,rt*m+ot*b+dt*G+vt*z,rt*T+ot*R+dt*F+vt*$,rt*P+ot*A+dt*B+vt*Q,rt*M+ot*D+dt*N+vt*Z,mt*m+gt*b+yt*G+St*z,mt*T+gt*R+yt*F+St*$,mt*P+gt*A+yt*B+St*Q,mt*M+gt*D+yt*N+St*Z)},fromRotationXYTranslation:function(d,p,v){var g=p.x,m=p.y,T=p.z,P=Math.sin(d.x),M=Math.cos(d.x),b=Math.sin(d.y),R=Math.cos(d.y),A=g,D=m,G=T,F=-P,B=0-F*b,N=0-M*b,z=F*R,$=M*R;return v||(A=R*g+b*T,D=B*g+M*m+z*T,G=N*g+P*m+$*T),this.setValues(R,B,N,0,0,M,P,0,b,z,$,0,A,D,G,1)},getMaxScaleOnAxis:function(){var d=this.val,p=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],v=d[4]*d[4]+d[5]*d[5]+d[6]*d[6],g=d[8]*d[8]+d[9]*d[9]+d[10]*d[10];return Math.sqrt(Math.max(p,v,g))}}),l=new h,n=new h,o=new y,f=new y,r=new y;S.exports=h},86883:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return Math.min(s+c,y)};S.exports=w},50040:S=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c=s.length;if(c===0)return 0;s.sort(function(u,h){return u-h});var y=Math.floor(c/2);return c%2===0?(s[y]+s[y-1])/2:s[y]};S.exports=w},37204:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return Math.max(s-c,y)};S.exports=w},65201:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){y===void 0&&(y=c+1);var h=(s-c)/(y-c);return h>1?u!==void 0?(h=(u-s)/(u-y),h<0&&(h=0)):h=1:h<0&&(h=0),h};S.exports=w},15746:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(94434),u=s(29747),h=s(25836),l=1e-6,n=new Int8Array([1,2,0]),o=new Float32Array([0,0,0]),f=new h(1,0,0),r=new h(0,1,0),d=new h,p=new y,v=new c({initialize:function(m,T,P,M){this.onChangeCallback=u,this.set(m,T,P,M)},x:{get:function(){return this._x},set:function(g){this._x=g,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(g){this._y=g,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(g){this._z=g,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(g){this._w=g,this.onChangeCallback(this)}},copy:function(g){return this.set(g)},set:function(g,m,T,P,M){return M===void 0&&(M=!0),typeof g=="object"?(this._x=g.x||0,this._y=g.y||0,this._z=g.z||0,this._w=g.w||0):(this._x=g||0,this._y=m||0,this._z=T||0,this._w=P||0),M&&this.onChangeCallback(this),this},add:function(g){return this._x+=g.x,this._y+=g.y,this._z+=g.z,this._w+=g.w,this.onChangeCallback(this),this},subtract:function(g){return this._x-=g.x,this._y-=g.y,this._z-=g.z,this._w-=g.w,this.onChangeCallback(this),this},scale:function(g){return this._x*=g,this._y*=g,this._z*=g,this._w*=g,this.onChangeCallback(this),this},length:function(){var g=this.x,m=this.y,T=this.z,P=this.w;return Math.sqrt(g*g+m*m+T*T+P*P)},lengthSq:function(){var g=this.x,m=this.y,T=this.z,P=this.w;return g*g+m*m+T*T+P*P},normalize:function(){var g=this.x,m=this.y,T=this.z,P=this.w,M=g*g+m*m+T*T+P*P;return M>0&&(M=1/Math.sqrt(M),this._x=g*M,this._y=m*M,this._z=T*M,this._w=P*M),this.onChangeCallback(this),this},dot:function(g){return this.x*g.x+this.y*g.y+this.z*g.z+this.w*g.w},lerp:function(g,m){m===void 0&&(m=0);var T=this.x,P=this.y,M=this.z,b=this.w;return this.set(T+m*(g.x-T),P+m*(g.y-P),M+m*(g.z-M),b+m*(g.w-b))},rotationTo:function(g,m){var T=g.x*m.x+g.y*m.y+g.z*m.z;return T<-.999999?(d.copy(f).cross(g).length()<l&&d.copy(r).cross(g),d.normalize(),this.setAxisAngle(d,Math.PI)):T>.999999?this.set(0,0,0,1):(d.copy(g).cross(m),this._x=d.x,this._y=d.y,this._z=d.z,this._w=1+T,this.normalize())},setAxes:function(g,m,T){var P=p.val;return P[0]=m.x,P[3]=m.y,P[6]=m.z,P[1]=T.x,P[4]=T.y,P[7]=T.z,P[2]=-g.x,P[5]=-g.y,P[8]=-g.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(g,m){m=m*.5;var T=Math.sin(m);return this.set(T*g.x,T*g.y,T*g.z,Math.cos(m))},multiply:function(g){var m=this.x,T=this.y,P=this.z,M=this.w,b=g.x,R=g.y,A=g.z,D=g.w;return this.set(m*D+M*b+T*A-P*R,T*D+M*R+P*b-m*A,P*D+M*A+m*R-T*b,M*D-m*b-T*R-P*A)},slerp:function(g,m){var T=this.x,P=this.y,M=this.z,b=this.w,R=g.x,A=g.y,D=g.z,G=g.w,F=T*R+P*A+M*D+b*G;F<0&&(F=-F,R=-R,A=-A,D=-D,G=-G);var B=1-m,N=m;if(1-F>l){var z=Math.acos(F),$=Math.sin(z);B=Math.sin((1-m)*z)/$,N=Math.sin(m*z)/$}return this.set(B*T+N*R,B*P+N*A,B*M+N*D,B*b+N*G)},invert:function(){var g=this.x,m=this.y,T=this.z,P=this.w,M=g*g+m*m+T*T+P*P,b=M?1/M:0;return this.set(-g*b,-m*b,-T*b,P*b)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(g){g*=.5;var m=this.x,T=this.y,P=this.z,M=this.w,b=Math.sin(g),R=Math.cos(g);return this.set(m*R+M*b,T*R+P*b,P*R-T*b,M*R-m*b)},rotateY:function(g){g*=.5;var m=this.x,T=this.y,P=this.z,M=this.w,b=Math.sin(g),R=Math.cos(g);return this.set(m*R-P*b,T*R+M*b,P*R+m*b,M*R-T*b)},rotateZ:function(g){g*=.5;var m=this.x,T=this.y,P=this.z,M=this.w,b=Math.sin(g),R=Math.cos(g);return this.set(m*R+T*b,T*R-m*b,P*R+M*b,M*R-P*b)},calculateW:function(){var g=this.x,m=this.y,T=this.z;return this.w=-Math.sqrt(1-g*g-m*m-T*T),this},setFromEuler:function(g,m){var T=g.x/2,P=g.y/2,M=g.z/2,b=Math.cos(T),R=Math.cos(P),A=Math.cos(M),D=Math.sin(T),G=Math.sin(P),F=Math.sin(M);switch(g.order){case"XYZ":{this.set(D*R*A+b*G*F,b*G*A-D*R*F,b*R*F+D*G*A,b*R*A-D*G*F,m);break}case"YXZ":{this.set(D*R*A+b*G*F,b*G*A-D*R*F,b*R*F-D*G*A,b*R*A+D*G*F,m);break}case"ZXY":{this.set(D*R*A-b*G*F,b*G*A+D*R*F,b*R*F+D*G*A,b*R*A-D*G*F,m);break}case"ZYX":{this.set(D*R*A-b*G*F,b*G*A+D*R*F,b*R*F-D*G*A,b*R*A+D*G*F,m);break}case"YZX":{this.set(D*R*A+b*G*F,b*G*A+D*R*F,b*R*F-D*G*A,b*R*A-D*G*F,m);break}case"XZY":{this.set(D*R*A-b*G*F,b*G*A-D*R*F,b*R*F+D*G*A,b*R*A+D*G*F,m);break}}return this},setFromRotationMatrix:function(g){var m=g.val,T=m[0],P=m[4],M=m[8],b=m[1],R=m[5],A=m[9],D=m[2],G=m[6],F=m[10],B=T+R+F,N;return B>0?(N=.5/Math.sqrt(B+1),this.set((G-A)*N,(M-D)*N,(b-P)*N,.25/N)):T>R&&T>F?(N=2*Math.sqrt(1+T-R-F),this.set(.25*N,(P+b)/N,(M+D)/N,(G-A)/N)):R>F?(N=2*Math.sqrt(1+R-T-F),this.set((P+b)/N,.25*N,(A+G)/N,(M-D)/N)):(N=2*Math.sqrt(1+F-T-R),this.set((M+D)/N,(A+G)/N,.25*N,(b-P)/N)),this},fromMat3:function(g){var m=g.val,T=m[0]+m[4]+m[8],P;if(T>0)P=Math.sqrt(T+1),this.w=.5*P,P=.5/P,this._x=(m[7]-m[5])*P,this._y=(m[2]-m[6])*P,this._z=(m[3]-m[1])*P;else{var M=0;m[4]>m[0]&&(M=1),m[8]>m[M*3+M]&&(M=2);var b=n[M],R=n[b];P=Math.sqrt(m[M*3+M]-m[b*3+b]-m[R*3+R]+1),o[M]=.5*P,P=.5/P,o[b]=(m[b*3+M]+m[M*3+b])*P,o[R]=(m[R*3+M]+m[M*3+R])*P,this._x=o[0],this._y=o[1],this._z=o[2],this._w=(m[R*3+b]-m[b*3+R])*P}return this.onChangeCallback(this),this}});S.exports=v},43396:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(36383),y=function(u){return u*c.RAD_TO_DEG};S.exports=y},74362:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){c===void 0&&(c=1);var y=Math.random()*2*Math.PI;return s.x=Math.cos(y)*c,s.y=Math.sin(y)*c,s};S.exports=w},60706:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){c===void 0&&(c=1);var y=Math.random()*2*Math.PI,u=Math.random()*2-1,h=Math.sqrt(1-u*u)*c;return s.x=Math.cos(y)*h,s.y=Math.sin(y)*h,s.z=u*c,s};S.exports=w},67421:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c===void 0&&(c=1),s.x=(Math.random()*2-1)*c,s.y=(Math.random()*2-1)*c,s.z=(Math.random()*2-1)*c,s.w=(Math.random()*2-1)*c,s};S.exports=w},36305:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=s.x,u=s.y;return s.x=y*Math.cos(c)-u*Math.sin(c),s.y=y*Math.sin(c)+u*Math.cos(c),s};S.exports=w},11520:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){var h=Math.cos(u),l=Math.sin(u),n=s.x-c,o=s.y-y;return s.x=n*h-o*l+c,s.y=n*l+o*h+y,s};S.exports=w},1163:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h){var l=u+Math.atan2(s.y-y,s.x-c);return s.x=c+h*Math.cos(l),s.y=y+h*Math.sin(l),s};S.exports=w},70336:S=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h){return s.x=c+h*Math.cos(u),s.y=y+h*Math.sin(u),s};S.exports=w},72678:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(25836),y=s(37867),u=s(15746),h=new y,l=new u,n=new c,o=function(f,r,d){return l.setAxisAngle(r,d),h.fromRotationTranslation(l,n.set(0,0,0)),f.transformMat4(h)};S.exports=o},2284:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s>0?Math.ceil(s):Math.floor(s)};S.exports=w},41013:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){c===void 0&&(c=0),y===void 0&&(y=10);var u=Math.pow(y,-c);return Math.round(s*u)/u};S.exports=w},16922:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){c===void 0&&(c=1),y===void 0&&(y=1),u===void 0&&(u=1),u*=Math.PI/s;for(var h=[],l=[],n=0;n<s;n++)y-=c*u,c+=y*u,h[n]=y,l[n]=c;return{sin:l,cos:h,length:s}};S.exports=w},7602:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return s<=c?0:s>=y?1:(s=(s-c)/(y-c),s*s*(3-2*s))};S.exports=w},54261:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return s=Math.max(0,Math.min(1,(s-c)/(y-c))),s*s*s*(s*(s*6-15)+10)};S.exports=w},44408:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26099),y=function(u,h,l,n){n===void 0&&(n=new c);var o=0,f=0,r=h*l;return u>0&&u<=r&&(u>h-1?(f=Math.floor(u/h),o=u-f*h):o=u),n.set(o,f)};S.exports=y},85955:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26099),y=function(u,h,l,n,o,f,r,d){d===void 0&&(d=new c);var p=Math.sin(o),v=Math.cos(o),g=v*f,m=p*f,T=-p*r,P=v*r,M=1/(g*P+T*-m);return d.x=P*M*u+-T*M*h+(n*T-l*P)*M,d.y=g*M*h+-m*M*u+(-n*g+l*m)*M,d};S.exports=y},26099:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(43855),u=new c({initialize:function(l,n){this.x=0,this.y=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0):(n===void 0&&(n=l),this.x=l||0,this.y=n||0)},clone:function(){return new u(this.x,this.y)},copy:function(h){return this.x=h.x||0,this.y=h.y||0,this},setFromObject:function(h){return this.x=h.x||0,this.y=h.y||0,this},set:function(h,l){return l===void 0&&(l=h),this.x=h,this.y=l,this},setTo:function(h,l){return this.set(h,l)},setToPolar:function(h,l){return l==null&&(l=1),this.x=Math.cos(h)*l,this.y=Math.sin(h)*l,this},equals:function(h){return this.x===h.x&&this.y===h.y},fuzzyEquals:function(h,l){return y(this.x,h.x,l)&&y(this.y,h.y,l)},angle:function(){var h=Math.atan2(this.y,this.x);return h<0&&(h+=2*Math.PI),h},setAngle:function(h){return this.setToPolar(h,this.length())},add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this},multiply:function(h){return this.x*=h.x,this.y*=h.y,this},scale:function(h){return isFinite(h)?(this.x*=h,this.y*=h):(this.x=0,this.y=0),this},divide:function(h){return this.x/=h.x,this.y/=h.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(h){var l=h.x-this.x,n=h.y-this.y;return Math.sqrt(l*l+n*n)},distanceSq:function(h){var l=h.x-this.x,n=h.y-this.y;return l*l+n*n},length:function(){var h=this.x,l=this.y;return Math.sqrt(h*h+l*l)},setLength:function(h){return this.normalize().scale(h)},lengthSq:function(){var h=this.x,l=this.y;return h*h+l*l},normalize:function(){var h=this.x,l=this.y,n=h*h+l*l;return n>0&&(n=1/Math.sqrt(n),this.x=h*n,this.y=l*n),this},normalizeRightHand:function(){var h=this.x;return this.x=this.y*-1,this.y=h,this},normalizeLeftHand:function(){var h=this.x;return this.x=this.y,this.y=h*-1,this},dot:function(h){return this.x*h.x+this.y*h.y},cross:function(h){return this.x*h.y-this.y*h.x},lerp:function(h,l){l===void 0&&(l=0);var n=this.x,o=this.y;return this.x=n+l*(h.x-n),this.y=o+l*(h.y-o),this},transformMat3:function(h){var l=this.x,n=this.y,o=h.val;return this.x=o[0]*l+o[3]*n+o[6],this.y=o[1]*l+o[4]*n+o[7],this},transformMat4:function(h){var l=this.x,n=this.y,o=h.val;return this.x=o[0]*l+o[4]*n+o[12],this.y=o[1]*l+o[5]*n+o[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(h){var l=this.length();return l&&l>h&&this.scale(h/l),this},reflect:function(h){return h=h.clone().normalize(),this.subtract(h.scale(2*this.dot(h)))},mirror:function(h){return this.reflect(h).negate()},rotate:function(h){var l=Math.cos(h),n=Math.sin(h);return this.set(l*this.x-n*this.y,n*this.x+l*this.y)},project:function(h){var l=this.dot(h)/h.dot(h);return this.copy(h).scale(l)}});u.ZERO=new u,u.RIGHT=new u(1,0),u.LEFT=new u(-1,0),u.UP=new u(0,-1),u.DOWN=new u(0,1),u.ONE=new u(1,1),S.exports=u},25836:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l,n){this.x=0,this.y=0,this.z=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0):(this.x=h||0,this.y=l||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(u){return this.x=Math.min(this.x,u.x),this.y=Math.min(this.y,u.y),this.z=Math.min(this.z,u.z),this},max:function(u){return this.x=Math.max(this.x,u.x),this.y=Math.max(this.y,u.y),this.z=Math.max(this.z,u.z),this},clone:function(){return new y(this.x,this.y,this.z)},addVectors:function(u,h){return this.x=u.x+h.x,this.y=u.y+h.y,this.z=u.z+h.z,this},subVectors:function(u,h){return this.x=u.x-h.x,this.y=u.y-h.y,this.z=u.z-h.z,this},crossVectors:function(u,h){var l=u.x,n=u.y,o=u.z,f=h.x,r=h.y,d=h.z;return this.x=n*d-o*r,this.y=o*f-l*d,this.z=l*r-n*f,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this},set:function(u,h,l){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=h||0,this.z=l||0),this},setFromMatrixPosition:function(u){return this.fromArray(u.val,12)},setFromMatrixColumn:function(u,h){return this.fromArray(u.val,h*4)},fromArray:function(u,h){return h===void 0&&(h=0),this.x=u[h],this.y=u[h+1],this.z=u[h+2],this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this},addScalar:function(u){return this.x+=u,this.y+=u,this.z+=u,this},addScale:function(u,h){return this.x+=u.x*h,this.y+=u.y*h,this.z+=u.z*h||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u,this.z*=u):(this.x=0,this.y=0,this.z=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(u){var h=u.x-this.x,l=u.y-this.y,n=u.z-this.z||0;return Math.sqrt(h*h+l*l+n*n)},distanceSq:function(u){var h=u.x-this.x,l=u.y-this.y,n=u.z-this.z||0;return h*h+l*l+n*n},length:function(){var u=this.x,h=this.y,l=this.z;return Math.sqrt(u*u+h*h+l*l)},lengthSq:function(){var u=this.x,h=this.y,l=this.z;return u*u+h*h+l*l},normalize:function(){var u=this.x,h=this.y,l=this.z,n=u*u+h*h+l*l;return n>0&&(n=1/Math.sqrt(n),this.x=u*n,this.y=h*n,this.z=l*n),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z},cross:function(u){var h=this.x,l=this.y,n=this.z,o=u.x,f=u.y,r=u.z;return this.x=l*r-n*f,this.y=n*o-h*r,this.z=h*f-l*o,this},lerp:function(u,h){h===void 0&&(h=0);var l=this.x,n=this.y,o=this.z;return this.x=l+h*(u.x-l),this.y=n+h*(u.y-n),this.z=o+h*(u.z-o),this},applyMatrix3:function(u){var h=this.x,l=this.y,n=this.z,o=u.val;return this.x=o[0]*h+o[3]*l+o[6]*n,this.y=o[1]*h+o[4]*l+o[7]*n,this.z=o[2]*h+o[5]*l+o[8]*n,this},applyMatrix4:function(u){var h=this.x,l=this.y,n=this.z,o=u.val,f=1/(o[3]*h+o[7]*l+o[11]*n+o[15]);return this.x=(o[0]*h+o[4]*l+o[8]*n+o[12])*f,this.y=(o[1]*h+o[5]*l+o[9]*n+o[13])*f,this.z=(o[2]*h+o[6]*l+o[10]*n+o[14])*f,this},transformMat3:function(u){var h=this.x,l=this.y,n=this.z,o=u.val;return this.x=h*o[0]+l*o[3]+n*o[6],this.y=h*o[1]+l*o[4]+n*o[7],this.z=h*o[2]+l*o[5]+n*o[8],this},transformMat4:function(u){var h=this.x,l=this.y,n=this.z,o=u.val;return this.x=o[0]*h+o[4]*l+o[8]*n+o[12],this.y=o[1]*h+o[5]*l+o[9]*n+o[13],this.z=o[2]*h+o[6]*l+o[10]*n+o[14],this},transformCoordinates:function(u){var h=this.x,l=this.y,n=this.z,o=u.val,f=h*o[0]+l*o[4]+n*o[8]+o[12],r=h*o[1]+l*o[5]+n*o[9]+o[13],d=h*o[2]+l*o[6]+n*o[10]+o[14],p=h*o[3]+l*o[7]+n*o[11]+o[15];return this.x=f/p,this.y=r/p,this.z=d/p,this},transformQuat:function(u){var h=this.x,l=this.y,n=this.z,o=u.x,f=u.y,r=u.z,d=u.w,p=d*h+f*n-r*l,v=d*l+r*h-o*n,g=d*n+o*l-f*h,m=-o*h-f*l-r*n;return this.x=p*d+m*-o+v*-r-g*-f,this.y=v*d+m*-f+g*-o-p*-r,this.z=g*d+m*-r+p*-f-v*-o,this},project:function(u){var h=this.x,l=this.y,n=this.z,o=u.val,f=o[0],r=o[1],d=o[2],p=o[3],v=o[4],g=o[5],m=o[6],T=o[7],P=o[8],M=o[9],b=o[10],R=o[11],A=o[12],D=o[13],G=o[14],F=o[15],B=1/(h*p+l*T+n*R+F);return this.x=(h*f+l*v+n*P+A)*B,this.y=(h*r+l*g+n*M+D)*B,this.z=(h*d+l*m+n*b+G)*B,this},projectViewMatrix:function(u,h){return this.applyMatrix4(u).applyMatrix4(h)},unprojectViewMatrix:function(u,h){return this.applyMatrix4(u).applyMatrix4(h)},unproject:function(u,h){var l=u.x,n=u.y,o=u.z,f=u.w,r=this.x-l,d=f-this.y-1-n,p=this.z;return this.x=2*r/o-1,this.y=2*d/f-1,this.z=2*p-1,this.project(h)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});y.ZERO=new y,y.RIGHT=new y(1,0,0),y.LEFT=new y(-1,0,0),y.UP=new y(0,-1,0),y.DOWN=new y(0,1,0),y.FORWARD=new y(0,0,1),y.BACK=new y(0,0,-1),y.ONE=new y(1,1,1),S.exports=y},61369:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l,n,o){this.x=0,this.y=0,this.z=0,this.w=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0,this.w=h.w||0):(this.x=h||0,this.y=l||0,this.z=n||0,this.w=o||0)},clone:function(){return new y(this.x,this.y,this.z,this.w)},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this.w=u.w||0,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z&&this.w===u.w},set:function(u,h,l,n){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=h||0,this.z=l||0,this.w=n||0),this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this.w+=u.w||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this.w-=u.w||0,this},scale:function(u){return this.x*=u,this.y*=u,this.z*=u,this.w*=u,this},length:function(){var u=this.x,h=this.y,l=this.z,n=this.w;return Math.sqrt(u*u+h*h+l*l+n*n)},lengthSq:function(){var u=this.x,h=this.y,l=this.z,n=this.w;return u*u+h*h+l*l+n*n},normalize:function(){var u=this.x,h=this.y,l=this.z,n=this.w,o=u*u+h*h+l*l+n*n;return o>0&&(o=1/Math.sqrt(o),this.x=u*o,this.y=h*o,this.z=l*o,this.w=n*o),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z+this.w*u.w},lerp:function(u,h){h===void 0&&(h=0);var l=this.x,n=this.y,o=this.z,f=this.w;return this.x=l+h*(u.x-l),this.y=n+h*(u.y-n),this.z=o+h*(u.z-o),this.w=f+h*(u.w-f),this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this.w*=u.w||1,this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this.w/=u.w||1,this},distance:function(u){var h=u.x-this.x,l=u.y-this.y,n=u.z-this.z||0,o=u.w-this.w||0;return Math.sqrt(h*h+l*l+n*n+o*o)},distanceSq:function(u){var h=u.x-this.x,l=u.y-this.y,n=u.z-this.z||0,o=u.w-this.w||0;return h*h+l*l+n*n+o*o},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(u){var h=this.x,l=this.y,n=this.z,o=this.w,f=u.val;return this.x=f[0]*h+f[4]*l+f[8]*n+f[12]*o,this.y=f[1]*h+f[5]*l+f[9]*n+f[13]*o,this.z=f[2]*h+f[6]*l+f[10]*n+f[14]*o,this.w=f[3]*h+f[7]*l+f[11]*n+f[15]*o,this},transformQuat:function(u){var h=this.x,l=this.y,n=this.z,o=u.x,f=u.y,r=u.z,d=u.w,p=d*h+f*n-r*l,v=d*l+r*h-o*n,g=d*n+o*l-f*h,m=-o*h-f*l-r*n;return this.x=p*d+m*-o+v*-r-g*-f,this.y=v*d+m*-f+g*-o-p*-r,this.z=g*d+m*-r+p*-f-v*-o,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});y.prototype.sub=y.prototype.subtract,y.prototype.mul=y.prototype.multiply,y.prototype.div=y.prototype.divide,y.prototype.dist=y.prototype.distance,y.prototype.distSq=y.prototype.distanceSq,y.prototype.len=y.prototype.length,y.prototype.lenSq=y.prototype.lengthSq,S.exports=y},60417:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return Math.abs(s-c)<=y};S.exports=w},15994:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=y-c;return c+((s-c)%u+u)%u};S.exports=w},31040:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){return Math.atan2(u-c,y-s)};S.exports=w},55495:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return Math.atan2(c.y-s.y,c.x-s.x)};S.exports=w},128:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return Math.atan2(c.x-s.x,c.y-s.y)};S.exports=w},41273:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){return Math.atan2(y-s,u-c)};S.exports=w},1432:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(36383),y=function(u){return u>Math.PI&&(u-=c.PI2),Math.abs(((u+c.TAU)%c.PI2-c.PI2)%c.PI2)};S.exports=y},49127:(S,w,s)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(12407),y=function(u,h){return c(h-u)};S.exports=y},52285:(S,w,s)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(12407),y=2*Math.PI,u=function(h,l){var n=c(l-h);return n>0&&(n-=y),n};S.exports=u},67317:(S,w,s)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(86554),y=function(u,h){return c(h-u)};S.exports=y},12407:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s=s%(2*Math.PI),s>=0?s:s+2*Math.PI};S.exports=w},53993:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(99472),y=function(){return c(-Math.PI,Math.PI)};S.exports=y},86564:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(99472),y=function(){return c(-180,180)};S.exports=y},90154:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(12407),y=function(u){return c(u+Math.PI)};S.exports=y},48736:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(36383),y=function(u,h,l){return l===void 0&&(l=.05),u===h||(Math.abs(h-u)<=l||Math.abs(h-u)>=c.PI2-l?u=h:(Math.abs(h-u)>Math.PI&&(h<u?h+=c.PI2:h-=c.PI2),h>u?u+=l:h<u&&(u-=l))),u};S.exports=y},61430:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=c-s;if(y===0)return 0;var u=Math.floor((y- -180)/360);return y-u*360};S.exports=w},86554:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(15994),y=function(u){return c(u,-Math.PI,Math.PI)};S.exports=y},30954:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(15994),y=function(u){return c(u,-180,180)};S.exports=y},25588:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Between:s(31040),BetweenPoints:s(55495),BetweenPointsY:s(128),BetweenY:s(41273),CounterClockwise:s(1432),GetClockwiseDistance:s(49127),GetCounterClockwiseDistance:s(52285),GetShortestDistance:s(67317),Normalize:s(12407),Random:s(53993),RandomDegrees:s(86564),Reverse:s(90154),RotateTo:s(48736),ShortestBetween:s(61430),Wrap:s(86554),WrapDegrees:s(30954)}},36383:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};S.exports=w},20339:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){var h=s-y,l=c-u;return Math.sqrt(h*h+l*l)};S.exports=w},52816:S=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=s.x-c.x,u=s.y-c.y;return Math.sqrt(y*y+u*u)};S.exports=w},64559:S=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=s.x-c.x,u=s.y-c.y;return y*y+u*u};S.exports=w},82340:S=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){return Math.max(Math.abs(s-y),Math.abs(c-u))};S.exports=w},14390:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h){return h===void 0&&(h=2),Math.sqrt(Math.pow(y-s,h)+Math.pow(u-c,h))};S.exports=w},2243:S=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){return Math.abs(s-y)+Math.abs(c-u)};S.exports=w},89774:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){var h=s-y,l=c-u;return h*h+l*l};S.exports=w},50994:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Between:s(20339),BetweenPoints:s(52816),BetweenPointsSquared:s(64559),Chebyshev:s(82340),Power:s(14390),Snake:s(2243),Squared:s(89774)}},62640:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(54178),y=s(41521),u=s(79980),h=s(85433),l=s(99140),n=s(48857),o=s(81596),f=s(59133),r=s(98516),d=s(35248),p=s(82500),v=s(49752);S.exports={Power0:o,Power1:f.Out,Power2:h.Out,Power3:r.Out,Power4:d.Out,Linear:o,Quad:f.Out,Cubic:h.Out,Quart:r.Out,Quint:d.Out,Sine:p.Out,Expo:n.Out,Circ:u.Out,Elastic:l.Out,Back:c.Out,Bounce:y.Out,Stepped:v,"Quad.easeIn":f.In,"Cubic.easeIn":h.In,"Quart.easeIn":r.In,"Quint.easeIn":d.In,"Sine.easeIn":p.In,"Expo.easeIn":n.In,"Circ.easeIn":u.In,"Elastic.easeIn":l.In,"Back.easeIn":c.In,"Bounce.easeIn":y.In,"Quad.easeOut":f.Out,"Cubic.easeOut":h.Out,"Quart.easeOut":r.Out,"Quint.easeOut":d.Out,"Sine.easeOut":p.Out,"Expo.easeOut":n.Out,"Circ.easeOut":u.Out,"Elastic.easeOut":l.Out,"Back.easeOut":c.Out,"Bounce.easeOut":y.Out,"Quad.easeInOut":f.InOut,"Cubic.easeInOut":h.InOut,"Quart.easeInOut":r.InOut,"Quint.easeInOut":d.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":n.InOut,"Circ.easeInOut":u.InOut,"Elastic.easeInOut":l.InOut,"Back.easeInOut":c.InOut,"Bounce.easeInOut":y.InOut}},1639:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c===void 0&&(c=1.70158),s*s*((c+1)*s-c)};S.exports=w},50099:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){c===void 0&&(c=1.70158);var y=c*1.525;return(s*=2)<1?.5*(s*s*((y+1)*s-y)):.5*((s-=2)*s*((y+1)*s+y)+2)};S.exports=w},41286:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c===void 0&&(c=1.70158),--s*s*((c+1)*s+c)+1};S.exports=w},54178:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={In:s(1639),Out:s(41286),InOut:s(50099)}},59590:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s=1-s,s<.36363636363636365?1-7.5625*s*s:s<.7272727272727273?1-(7.5625*(s-=.5454545454545454)*s+.75):s<.9090909090909091?1-(7.5625*(s-=.8181818181818182)*s+.9375):1-(7.5625*(s-=.9545454545454546)*s+.984375)};S.exports=w},41788:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c=!1;return s<.5?(s=1-s*2,c=!0):s=s*2-1,s<.36363636363636365?s=7.5625*s*s:s<.7272727272727273?s=7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?s=7.5625*(s-=.8181818181818182)*s+.9375:s=7.5625*(s-=.9545454545454546)*s+.984375,c?(1-s)*.5:s*.5+.5};S.exports=w},69905:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s<.36363636363636365?7.5625*s*s:s<.7272727272727273?7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?7.5625*(s-=.8181818181818182)*s+.9375:7.5625*(s-=.9545454545454546)*s+.984375};S.exports=w},41521:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={In:s(59590),Out:s(69905),InOut:s(41788)}},91861:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return 1-Math.sqrt(1-s*s)};S.exports=w},4177:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)};S.exports=w},57512:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return Math.sqrt(1- --s*s)};S.exports=w},79980:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={In:s(91861),Out:s(57512),InOut:s(4177)}},51150:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s*s*s};S.exports=w},82820:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return(s*=2)<1?.5*s*s*s:.5*((s-=2)*s*s+2)};S.exports=w},35033:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return--s*s*s+1};S.exports=w},85433:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={In:s(51150),Out:s(35033),InOut:s(82820)}},69965:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){if(c===void 0&&(c=.1),y===void 0&&(y=.1),s===0)return 0;if(s===1)return 1;var u=y/4;return c<1?c=1:u=y*Math.asin(1/c)/(2*Math.PI),-(c*Math.pow(2,10*(s-=1))*Math.sin((s-u)*(2*Math.PI)/y))};S.exports=w},50665:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){if(c===void 0&&(c=.1),y===void 0&&(y=.1),s===0)return 0;if(s===1)return 1;var u=y/4;return c<1?c=1:u=y*Math.asin(1/c)/(2*Math.PI),(s*=2)<1?-.5*(c*Math.pow(2,10*(s-=1))*Math.sin((s-u)*(2*Math.PI)/y)):c*Math.pow(2,-10*(s-=1))*Math.sin((s-u)*(2*Math.PI)/y)*.5+1};S.exports=w},7744:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){if(c===void 0&&(c=.1),y===void 0&&(y=.1),s===0)return 0;if(s===1)return 1;var u=y/4;return c<1?c=1:u=y*Math.asin(1/c)/(2*Math.PI),c*Math.pow(2,-10*s)*Math.sin((s-u)*(2*Math.PI)/y)+1};S.exports=w},99140:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={In:s(69965),Out:s(7744),InOut:s(50665)}},24590:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return Math.pow(2,10*(s-1))-.001};S.exports=w},87844:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return(s*=2)<1?.5*Math.pow(2,10*(s-1)):.5*(2-Math.pow(2,-10*(s-1)))};S.exports=w},89433:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return 1-Math.pow(2,-10*s)};S.exports=w},48857:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={In:s(24590),Out:s(89433),InOut:s(87844)}},48820:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Back:s(54178),Bounce:s(41521),Circular:s(79980),Cubic:s(85433),Elastic:s(99140),Expo:s(48857),Linear:s(81596),Quadratic:s(59133),Quartic:s(98516),Quintic:s(35248),Sine:s(82500),Stepped:s(49752)}},7147:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s};S.exports=w},81596:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports=s(7147)},34826:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s*s};S.exports=w},20544:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return(s*=2)<1?.5*s*s:-.5*(--s*(s-2)-1)};S.exports=w},92029:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s*(2-s)};S.exports=w},59133:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={In:s(34826),Out:s(92029),InOut:s(20544)}},64413:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s*s*s*s};S.exports=w},78137:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return(s*=2)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2)};S.exports=w},45840:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return 1- --s*s*s*s};S.exports=w},98516:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={In:s(64413),Out:s(45840),InOut:s(78137)}},87745:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s*s*s*s*s};S.exports=w},16509:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)};S.exports=w},17868:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return--s*s*s*s*s+1};S.exports=w},35248:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={In:s(87745),Out:s(17868),InOut:s(16509)}},80461:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s===0?0:s===1?1:1-Math.cos(s*Math.PI/2)};S.exports=w},34025:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s===0?0:s===1?1:.5*(1-Math.cos(Math.PI*s))};S.exports=w},52768:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s===0?0:s===1?1:Math.sin(s*Math.PI/2)};S.exports=w},82500:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={In:s(80461),Out:s(52768),InOut:s(34025)}},72251:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c===void 0&&(c=1),s<=0?0:s>=1?1:((c*s|0)+1)*(1/c)};S.exports=w},49752:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports=s(72251)},75698:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c===void 0&&(c=1e-4),Math.ceil(s-c)};S.exports=w},43855:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return y===void 0&&(y=1e-4),Math.abs(s-c)<y};S.exports=w},25777:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c===void 0&&(c=1e-4),Math.floor(s+c)};S.exports=w},5470:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return y===void 0&&(y=1e-4),s>c-y};S.exports=w},94977:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return y===void 0&&(y=1e-4),s<c+y};S.exports=w},48379:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Ceil:s(75698),Equal:s(43855),Floor:s(25777),GreaterThan:s(5470),LessThan:s(94977)}},75508:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(36383),y=s(79291),u={Angle:s(25588),Distance:s(50994),Easing:s(48820),Fuzzy:s(48379),Interpolation:s(38289),Pow2:s(49001),Snap:s(73697),RandomDataGenerator:s(28453),Average:s(53307),Bernstein:s(85710),Between:s(30976),CatmullRom:s(87842),CeilTo:s(26302),Clamp:s(45319),DegToRad:s(39506),Difference:s(61241),Euler:s(38857),Factorial:s(6411),FloatBetween:s(99472),FloorTo:s(77623),FromPercent:s(62945),GetSpeed:s(38265),IsEven:s(78702),IsEvenStrict:s(94883),Linear:s(28915),LinearXY:s(94908),MaxAdd:s(86883),Median:s(50040),MinSub:s(37204),Percent:s(65201),RadToDeg:s(43396),RandomXY:s(74362),RandomXYZ:s(60706),RandomXYZW:s(67421),Rotate:s(36305),RotateAround:s(11520),RotateAroundDistance:s(1163),RotateTo:s(70336),RoundAwayFromZero:s(2284),RoundTo:s(41013),SinCosTableGenerator:s(16922),SmootherStep:s(54261),SmoothStep:s(7602),ToXY:s(44408),TransformXY:s(85955),Within:s(60417),Wrap:s(15994),Vector2:s(26099),Vector3:s(25836),Vector4:s(61369),Matrix3:s(94434),Matrix4:s(37867),Quaternion:s(15746),RotateVec3:s(72678)};u=y(!1,u,c),S.exports=u},89318:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(85710),y=function(u,h){for(var l=0,n=u.length-1,o=0;o<=n;o++)l+=Math.pow(1-h,n-o)*Math.pow(h,o)*u[o]*c(n,o);return l};S.exports=y},77259:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87842),y=function(u,h){var l=u.length-1,n=l*h,o=Math.floor(n);return u[0]===u[l]?(h<0&&(o=Math.floor(n=l*(1+h))),c(n-o,u[(o-1+l)%l],u[o],u[(o+1)%l],u[(o+2)%l])):h<0?u[0]-(c(-n,u[0],u[0],u[1],u[1])-u[0]):h>1?u[l]-(c(n-l,u[l],u[l],u[l-1],u[l-1])-u[l]):c(n-o,u[o?o-1:0],u[o],u[l<o+1?l:o+1],u[l<o+2?l:o+2])};S.exports=y},36316:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(h,l){var n=1-h;return n*n*n*l}function s(h,l){var n=1-h;return 3*n*n*h*l}function c(h,l){return 3*(1-h)*h*h*l}function y(h,l){return h*h*h*l}var u=function(h,l,n,o,f){return w(h,l)+s(h,n)+c(h,o)+y(h,f)};S.exports=u},28392:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(28915),y=function(u,h){var l=u.length-1,n=l*h,o=Math.floor(n);return h<0?c(u[0],u[1],n):h>1?c(u[l],u[l-1],l-n):c(u[o],u[o+1>l?l:o+1],n-o)};S.exports=y},32112:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(u,h){var l=1-u;return l*l*h}function s(u,h){return 2*(1-u)*u*h}function c(u,h){return u*u*h}var y=function(u,h,l,n){return w(u,h)+s(u,l)+c(u,n)};S.exports=y},47235:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7602),y=function(u,h,l){return h+(l-h)*c(u,0,1)};S.exports=y},50178:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(54261),y=function(u,h,l){return h+(l-h)*c(u,0,1)};S.exports=y},38289:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Bezier:s(89318),CatmullRom:s(77259),CubicBezier:s(36316),Linear:s(28392),QuadraticBezier:s(32112),SmoothStep:s(47235),SmootherStep:s(50178)}},98439:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c=Math.log(s)/.6931471805599453;return 1<<Math.ceil(c)};S.exports=w},50030:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s>0&&(s&s-1)===0&&c>0&&(c&c-1)===0};S.exports=w},81230:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s>0&&(s&s-1)===0};S.exports=w},49001:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={GetNext:s(98439),IsSize:s(50030),IsValue:s(81230)}},28453:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h){h===void 0&&(h=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],h&&this.init(h)},rnd:function(){var u=2091639*this.s0+this.c*23283064365386963e-26;return this.c=u|0,this.s0=this.s1,this.s1=this.s2,this.s2=u-this.c,this.s2},hash:function(u){var h,l=this.n;u=u.toString();for(var n=0;n<u.length;n++)l+=u.charCodeAt(n),h=.02519603282416938*l,l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296;return this.n=l,(l>>>0)*23283064365386963e-26},init:function(u){typeof u=="string"?this.state(u):this.sow(u)},sow:function(u){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!u)for(var h=0;h<u.length&&u[h]!=null;h++){var l=u[h];this.s0-=this.hash(l),this.s0+=~~(this.s0<0),this.s1-=this.hash(l),this.s1+=~~(this.s1<0),this.s2-=this.hash(l),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(u,h){return Math.floor(this.realInRange(0,h-u+1)+u)},between:function(u,h){return Math.floor(this.realInRange(0,h-u+1)+u)},realInRange:function(u,h){return this.frac()*(h-u)+u},normal:function(){return 1-2*this.frac()},uuid:function(){var u="",h="";for(h=u="";u++<36;h+=~u%5|u*3&4?(u^15?8^this.frac()*(u^20?16:4):4).toString(16):"-");return h},pick:function(u){return u[this.integerInRange(0,u.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(u){return u[~~(Math.pow(this.frac(),2)*(u.length-.5)+.5)]},timestamp:function(u,h){return this.realInRange(u||9466848e5,h||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(u){return typeof u=="string"&&u.match(/^!rnd/)&&(u=u.split(","),this.c=parseFloat(u[1]),this.s0=parseFloat(u[2]),this.s1=parseFloat(u[3]),this.s2=parseFloat(u[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(u){for(var h=u.length-1,l=h;l>0;l--){var n=Math.floor(this.frac()*(l+1)),o=u[n];u[n]=u[l],u[l]=o}return u}});S.exports=y},63448:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){return y===void 0&&(y=0),c===0?s:(s-=y,s=c*Math.ceil(s/c),u?(y+s)/c:y+s)};S.exports=w},56583:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){return y===void 0&&(y=0),c===0?s:(s-=y,s=c*Math.floor(s/c),u?(y+s)/c:y+s)};S.exports=w},77720:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){return y===void 0&&(y=0),c===0?s:(s-=y,s=c*Math.round(s/c),u?(y+s)/c:y+s)};S.exports=w},73697:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Ceil:s(63448),Floor:s(56583),To:s(77720)}},85454:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */s(63595);var c=s(8054),y=s(79291),u={Actions:s(61061),Animations:s(60421),BlendModes:s(10312),Cache:s(83388),Cameras:s(26638),Core:s(42857),Class:s(83419),Create:s(15822),Curves:s(25410),Data:s(44965),Display:s(27460),DOM:s(84902),Events:s(93055),FX:s(66064),Game:s(50127),GameObjects:s(77856),Geom:s(55738),Input:s(14350),Loader:s(57777),Math:s(75508),Physics:s(44563),Plugins:s(18922),Renderer:s(36909),Scale:s(93364),ScaleModes:s(29795),Scene:s(97482),Scenes:s(62194),Structs:s(41392),Textures:s(27458),Tilemaps:s(62501),Time:s(90291),Tweens:s(43066),Utils:s(91799)};u.Sound=s(23717),u=y(!1,u,c),S.exports=u,s.g.Phaser=u},71289:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(92209),u=s(88571),h=new c({Extends:u,Mixins:[y.Acceleration,y.Angular,y.Bounce,y.Collision,y.Debug,y.Drag,y.Enable,y.Friction,y.Gravity,y.Immovable,y.Mass,y.Pushable,y.Size,y.Velocity],initialize:function(n,o,f,r,d){u.call(this,n,o,f,r,d),this.body=null}});S.exports=h},86689:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(39506),u=s(20339),h=s(89774),l=s(66022),n=s(95540),o=s(46975),f=s(72441),r=s(47956),d=s(37277),p=s(44594),v=s(26099),g=s(82248),m=new c({initialize:function(P){this.scene=P,this.systems=P.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,P.sys.events.once(p.BOOT,this.boot,this),P.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new g(this.scene,this.config),this.add=new l(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new g(this.scene,this.config),this.add=new l(this.world));var T=this.systems.events;n(this.config,"customUpdate",!1)||T.on(p.UPDATE,this.world.update,this.world),T.on(p.POST_UPDATE,this.world.postUpdate,this.world),T.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var T=this.systems.game.config.physics,P=this.systems.settings.physics,M=o(n(P,"arcade",{}),n(T,"arcade",{}));return M},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(T,P,M,b,R){return M===void 0&&(M=null),b===void 0&&(b=null),R===void 0&&(R=M),this.world.collideObjects(T,P,M,b,R,!0)},collide:function(T,P,M,b,R){return M===void 0&&(M=null),b===void 0&&(b=null),R===void 0&&(R=M),this.world.collideObjects(T,P,M,b,R,!1)},collideTiles:function(T,P,M,b,R){return this.world.collideTiles(T,P,M,b,R)},overlapTiles:function(T,P,M,b,R){return this.world.overlapTiles(T,P,M,b,R)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(T,P,M,b,R,A){b===void 0&&(b=60);var D=Math.atan2(M-T.y,P-T.x);return T.body.acceleration.setToPolar(D,b),R!==void 0&&A!==void 0&&T.body.maxVelocity.set(R,A),D},accelerateToObject:function(T,P,M,b,R){return this.accelerateTo(T,P.x,P.y,M,b,R)},closest:function(T,P){P||(P=this.world.bodies.entries);for(var M=Number.MAX_VALUE,b=null,R=T.x,A=T.y,D=P.length,G=0;G<D;G++){var F=P[G],B=F.body||F;if(!(T===F||T===B||T===B.gameObject||T===B.center)){var N=h(R,A,B.center.x,B.center.y);N<M&&(b=F,M=N)}}return b},furthest:function(T,P){P||(P=this.world.bodies.entries);for(var M=-1,b=null,R=T.x,A=T.y,D=P.length,G=0;G<D;G++){var F=P[G],B=F.body||F;if(!(T===F||T===B||T===B.gameObject||T===B.center)){var N=h(R,A,B.center.x,B.center.y);N>M&&(b=F,M=N)}}return b},moveTo:function(T,P,M,b,R){b===void 0&&(b=60),R===void 0&&(R=0);var A=Math.atan2(M-T.y,P-T.x);return R>0&&(b=u(T.x,T.y,P,M)/(R/1e3)),T.body.velocity.setToPolar(A,b),A},moveToObject:function(T,P,M,b){return this.moveTo(T,P.x,P.y,M,b)},velocityFromAngle:function(T,P,M){return P===void 0&&(P=60),M===void 0&&(M=new v),M.setToPolar(y(T),P)},velocityFromRotation:function(T,P,M){return P===void 0&&(P=60),M===void 0&&(M=new v),M.setToPolar(T,P)},overlapRect:function(T,P,M,b,R,A){return r(this.world,T,P,M,b,R,A)},overlapCirc:function(T,P,M,b,R){return f(this.world,T,P,M,b,R)},shutdown:function(){if(this.world){var T=this.systems.events;T.off(p.UPDATE,this.world.update,this.world),T.off(p.POST_UPDATE,this.world.postUpdate,this.world),T.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});d.register("ArcadePhysics",m,"arcadePhysics"),S.exports=m},13759:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(92209),u=s(68287),h=new c({Extends:u,Mixins:[y.Acceleration,y.Angular,y.Bounce,y.Collision,y.Debug,y.Drag,y.Enable,y.Friction,y.Gravity,y.Immovable,y.Mass,y.Pushable,y.Size,y.Velocity],initialize:function(n,o,f,r,d){u.call(this,n,o,f,r,d),this.body=null}});S.exports=h},37742:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(78389),u=s(37747),h=s(63012),l=s(43396),n=s(87841),o=s(37303),f=s(95829),r=s(26099),d=new c({Mixins:[y],initialize:function(v,g){var m=64,T=64,P={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},M=g!==void 0;M&&g.displayWidth&&(m=g.displayWidth,T=g.displayHeight),M||(g=P),this.world=v,this.gameObject=M?g:void 0,this.isBody=!0,this.transform={x:g.x,y:g.y,rotation:g.angle,scaleX:g.scaleX,scaleY:g.scaleY,displayOriginX:g.displayOriginX,displayOriginY:g.displayOriginY},this.debugShowBody=v.defaults.debugShowBody,this.debugShowVelocity=v.defaults.debugShowVelocity,this.debugBodyColor=v.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new r,this.position=new r(g.x-g.scaleX*g.displayOriginX,g.y-g.scaleY*g.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=g.angle,this.preRotation=g.angle,this.width=m,this.height=T,this.sourceWidth=m,this.sourceHeight=T,g.frame&&(this.sourceWidth=g.frame.realWidth,this.sourceHeight=g.frame.realHeight),this.halfWidth=Math.abs(m/2),this.halfHeight=Math.abs(T/2),this.center=new r(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new r,this.newVelocity=new r,this.deltaMax=new r,this.acceleration=new r,this.allowDrag=!0,this.drag=new r,this.allowGravity=!0,this.gravity=new r,this.bounce=new r,this.worldBounce=null,this.customBoundsRectangle=v.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new r(1e4,1e4),this.maxSpeed=-1,this.friction=new r(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=u.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new r(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=f(!1),this.touching=f(!0),this.wasTouching=f(!0),this.blocked=f(!0),this.syncBounds=!1,this.physicsType=u.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=g.scaleX,this._sy=g.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new n,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var p=this.gameObject,v=this.transform;if(p.parentContainer){var g=p.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);v.x=g.tx,v.y=g.ty,v.rotation=l(g.rotation),v.scaleX=g.scaleX,v.scaleY=g.scaleY,v.displayOriginX=p.displayOriginX,v.displayOriginY=p.displayOriginY}else v.x=p.x,v.y=p.y,v.rotation=p.angle,v.scaleX=p.scaleX,v.scaleY=p.scaleY,v.displayOriginX=p.displayOriginX,v.displayOriginY=p.displayOriginY;var m=!1;if(this.syncBounds){var T=p.getBounds(this._bounds);this.width=T.width,this.height=T.height,m=!0}else{var P=Math.abs(v.scaleX),M=Math.abs(v.scaleY);(this._sx!==P||this._sy!==M)&&(this.width=this.sourceWidth*P,this.height=this.sourceHeight*M,this._sx=P,this._sy=M,m=!0)}m&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var p=this.transform;this.position.x=p.x+p.scaleX*(this.offset.x-p.displayOriginX),this.position.y=p.y+p.scaleY*(this.offset.y-p.displayOriginY),this.updateCenter()},resetFlags:function(p){p===void 0&&(p=!1);var v=this.wasTouching,g=this.touching,m=this.blocked;p?f(!0,v):(v.none=g.none,v.up=g.up,v.down=g.down,v.left=g.left,v.right=g.right),f(!0,g),f(!0,m),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(p,v){if(p&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var g=this.position;this.prev.x=g.x,this.prev.y=g.y,this.prevFrame.x=g.x,this.prevFrame.y=g.y}p&&this.update(v)},update:function(p){var v=this.prev,g=this.position,m=this.velocity;if(v.set(g.x,g.y),!this.moves){this._dx=g.x-v.x,this._dy=g.y-v.y;return}if(this.directControl){var T=this.autoFrame;m.set((g.x-T.x)/p,(g.y-T.y)/p),this.world.updateMotion(this,p),this._dx=g.x-T.x,this._dy=g.y-T.y}else this.world.updateMotion(this,p),this.newVelocity.set(m.x*p,m.y*p),g.add(this.newVelocity),this._dx=g.x-v.x,this._dy=g.y-v.y;var P=m.x,M=m.y;if(this.updateCenter(),this.angle=Math.atan2(M,P),this.speed=Math.sqrt(P*P+M*M),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var b=this.blocked;this.world.emit(h.WORLD_BOUNDS,this,b.up,b.down,b.left,b.right)}},postUpdate:function(){var p=this.position,v=p.x-this.prevFrame.x,g=p.y-this.prevFrame.y,m=this.gameObject;if(this.moves){var T=this.deltaMax.x,P=this.deltaMax.y;T!==0&&v!==0&&(v<0&&v<-T?v=-T:v>0&&v>T&&(v=T)),P!==0&&g!==0&&(g<0&&g<-P?g=-P:g>0&&g>P&&(g=P)),m&&(m.x+=v,m.y+=g)}v<0?this.facing=u.FACING_LEFT:v>0&&(this.facing=u.FACING_RIGHT),g<0?this.facing=u.FACING_UP:g>0&&(this.facing=u.FACING_DOWN),this.allowRotation&&m&&(m.angle+=this.deltaZ()),this._tx=v,this._ty=g,this.autoFrame.set(p.x,p.y)},setBoundsRectangle:function(p){return this.customBoundsRectangle=p||this.world.bounds,this},checkWorldBounds:function(){var p=this.position,v=this.velocity,g=this.blocked,m=this.customBoundsRectangle,T=this.world.checkCollision,P=this.worldBounce?-this.worldBounce.x:-this.bounce.x,M=this.worldBounce?-this.worldBounce.y:-this.bounce.y,b=!1;return p.x<m.x&&T.left?(p.x=m.x,v.x*=P,g.left=!0,b=!0):this.right>m.right&&T.right&&(p.x=m.right-this.width,v.x*=P,g.right=!0,b=!0),p.y<m.y&&T.up?(p.y=m.y,v.y*=M,g.up=!0,b=!0):this.bottom>m.bottom&&T.down&&(p.y=m.bottom-this.height,v.y*=M,g.down=!0,b=!0),b&&(this.blocked.none=!1,this.updateCenter()),b},setOffset:function(p,v){return v===void 0&&(v=p),this.offset.set(p,v),this},setGameObject:function(p,v){if(v===void 0&&(v=!0),!p||!p.hasTransformComponent)return this;var g=this.world;return this.gameObject&&this.gameObject.body&&(g.disable(this.gameObject),this.gameObject.body=null),p.body&&g.disable(p),this.gameObject=p,p.body=this,this.setSize(),this.enable=v,this},setSize:function(p,v,g){g===void 0&&(g=!0);var m=this.gameObject;if(m&&(!p&&m.frame&&(p=m.frame.realWidth),!v&&m.frame&&(v=m.frame.realHeight)),this.sourceWidth=p,this.sourceHeight=v,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),g&&m&&m.getCenter){var T=(m.width-p)/2,P=(m.height-v)/2;this.offset.set(T,P)}return this.isCircle=!1,this.radius=0,this},setCircle:function(p,v,g){return v===void 0&&(v=this.offset.x),g===void 0&&(g=this.offset.y),p>0?(this.isCircle=!0,this.radius=p,this.sourceWidth=p*2,this.sourceHeight=p*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,g),this.updateCenter()):this.isCircle=!1,this},reset:function(p,v){this.stop();var g=this.gameObject;g&&(g.setPosition(p,v),this.rotation=g.angle,this.preRotation=g.angle);var m=this.position;g&&g.getTopLeft?g.getTopLeft(m):m.set(p,v),this.prev.copy(m),this.prevFrame.copy(m),this.autoFrame.copy(m),g&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(p){return p.x=this.x,p.y=this.y,p.right=this.right,p.bottom=this.bottom,p},hitTest:function(p,v){if(!this.isCircle)return o(this,p,v);if(this.radius>0&&p>=this.left&&p<=this.right&&v>=this.top&&v<=this.bottom){var g=(this.center.x-p)*(this.center.x-p),m=(this.center.y-v)*(this.center.y-v);return g+m<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(p){var v=this.position,g=v.x+this.halfWidth,m=v.y+this.halfHeight;this.debugShowBody&&(p.lineStyle(p.defaultStrokeWidth,this.debugBodyColor),this.isCircle?p.strokeCircle(g,m,this.width/2):(this.checkCollision.up&&p.lineBetween(v.x,v.y,v.x+this.width,v.y),this.checkCollision.right&&p.lineBetween(v.x+this.width,v.y,v.x+this.width,v.y+this.height),this.checkCollision.down&&p.lineBetween(v.x,v.y+this.height,v.x+this.width,v.y+this.height),this.checkCollision.left&&p.lineBetween(v.x,v.y,v.x,v.y+this.height))),this.debugShowVelocity&&(p.lineStyle(p.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),p.lineBetween(g,m,g+this.velocity.x/2,m+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(p){return p===void 0&&(p=!0),this.directControl=p,this},setCollideWorldBounds:function(p,v,g,m){p===void 0&&(p=!0),this.collideWorldBounds=p;var T=v!==void 0,P=g!==void 0;return(T||P)&&(this.worldBounce||(this.worldBounce=new r),T&&(this.worldBounce.x=v),P&&(this.worldBounce.y=g)),m!==void 0&&(this.onWorldBounds=m),this},setVelocity:function(p,v){return this.velocity.set(p,v),p=this.velocity.x,v=this.velocity.y,this.speed=Math.sqrt(p*p+v*v),this},setVelocityX:function(p){return this.setVelocity(p,this.velocity.y)},setVelocityY:function(p){return this.setVelocity(this.velocity.x,p)},setMaxVelocity:function(p,v){return this.maxVelocity.set(p,v),this},setMaxVelocityX:function(p){return this.maxVelocity.x=p,this},setMaxVelocityY:function(p){return this.maxVelocity.y=p,this},setMaxSpeed:function(p){return this.maxSpeed=p,this},setSlideFactor:function(p,v){return this.slideFactor.set(p,v),this},setBounce:function(p,v){return this.bounce.set(p,v),this},setBounceX:function(p){return this.bounce.x=p,this},setBounceY:function(p){return this.bounce.y=p,this},setAcceleration:function(p,v){return this.acceleration.set(p,v),this},setAccelerationX:function(p){return this.acceleration.x=p,this},setAccelerationY:function(p){return this.acceleration.y=p,this},setAllowDrag:function(p){return p===void 0&&(p=!0),this.allowDrag=p,this},setAllowGravity:function(p){return p===void 0&&(p=!0),this.allowGravity=p,this},setAllowRotation:function(p){return p===void 0&&(p=!0),this.allowRotation=p,this},setDrag:function(p,v){return this.drag.set(p,v),this},setDamping:function(p){return this.useDamping=p,this},setDragX:function(p){return this.drag.x=p,this},setDragY:function(p){return this.drag.y=p,this},setGravity:function(p,v){return this.gravity.set(p,v),this},setGravityX:function(p){return this.gravity.x=p,this},setGravityY:function(p){return this.gravity.y=p,this},setFriction:function(p,v){return this.friction.set(p,v),this},setFrictionX:function(p){return this.friction.x=p,this},setFrictionY:function(p){return this.friction.y=p,this},setAngularVelocity:function(p){return this.angularVelocity=p,this},setAngularAcceleration:function(p){return this.angularAcceleration=p,this},setAngularDrag:function(p){return this.angularDrag=p,this},setMass:function(p){return this.mass=p,this},setImmovable:function(p){return p===void 0&&(p=!0),this.immovable=p,this},setEnable:function(p){return p===void 0&&(p=!0),this.enable=p,this},processX:function(p,v,g,m){this.x+=p,this.updateCenter(),v!==null&&(this.velocity.x=v*this.slideFactor.x);var T=this.blocked;g&&(T.left=!0,T.none=!1),m&&(T.right=!0,T.none=!1)},processY:function(p,v,g,m){this.y+=p,this.updateCenter(),v!==null&&(this.velocity.y=v*this.slideFactor.y);var T=this.blocked;g&&(T.up=!0,T.none=!1),m&&(T.down=!0,T.none=!1)},x:{get:function(){return this.position.x},set:function(p){this.position.x=p}},y:{get:function(){return this.position.y},set:function(p){this.position.y=p}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});S.exports=d},79342:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l,n,o,f,r,d){this.world=h,this.name="",this.active=!0,this.overlapOnly=l,this.object1=n,this.object2=o,this.collideCallback=f,this.processCallback=r,this.callbackContext=d},setName:function(u){return this.name=u,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});S.exports=y},66022:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(71289),y=s(13759),u=s(37742),h=s(83419),l=s(37747),n=s(60758),o=s(72624),f=s(71464),r=new h({initialize:function(p){this.world=p,this.scene=p.scene,this.sys=p.scene.sys},collider:function(d,p,v,g,m){return this.world.addCollider(d,p,v,g,m)},overlap:function(d,p,v,g,m){return this.world.addOverlap(d,p,v,g,m)},existing:function(d,p){var v=p?l.STATIC_BODY:l.DYNAMIC_BODY;return this.world.enableBody(d,v),d},staticImage:function(d,p,v,g){var m=new c(this.scene,d,p,v,g);return this.sys.displayList.add(m),this.world.enableBody(m,l.STATIC_BODY),m},image:function(d,p,v,g){var m=new c(this.scene,d,p,v,g);return this.sys.displayList.add(m),this.world.enableBody(m,l.DYNAMIC_BODY),m},staticSprite:function(d,p,v,g){var m=new y(this.scene,d,p,v,g);return this.sys.displayList.add(m),this.sys.updateList.add(m),this.world.enableBody(m,l.STATIC_BODY),m},sprite:function(d,p,v,g){var m=new y(this.scene,d,p,v,g);return this.sys.displayList.add(m),this.sys.updateList.add(m),this.world.enableBody(m,l.DYNAMIC_BODY),m},staticGroup:function(d,p){return this.sys.updateList.add(new f(this.world,this.world.scene,d,p))},group:function(d,p){return this.sys.updateList.add(new n(this.world,this.world.scene,d,p))},body:function(d,p,v,g){var m=new u(this.world);return m.position.set(d,p),v&&g&&m.setSize(v,g),this.world.add(m,l.DYNAMIC_BODY),m},staticBody:function(d,p,v,g){var m=new o(this.world);return m.position.set(d,p),v&&g&&m.setSize(v,g),this.world.add(m,l.STATIC_BODY),m},destroy:function(){this.world=null,this.scene=null,this.sys=null}});S.exports=r},79599:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c=0;if(!Array.isArray(s))c=s;else for(var y=0;y<s.length;y++)c|=s[y];return c};S.exports=w},64897:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(37747),y=function(u,h,l,n){var o=0,f=u.deltaAbsX()+h.deltaAbsX()+n;return u._dx===0&&h._dx===0?(u.embedded=!0,h.embedded=!0):u._dx>h._dx?(o=u.right-h.x,o>f&&!l||u.checkCollision.right===!1||h.checkCollision.left===!1?o=0:(u.touching.none=!1,u.touching.right=!0,h.touching.none=!1,h.touching.left=!0,h.physicsType===c.STATIC_BODY&&!l&&(u.blocked.none=!1,u.blocked.right=!0),u.physicsType===c.STATIC_BODY&&!l&&(h.blocked.none=!1,h.blocked.left=!0))):u._dx<h._dx&&(o=u.x-h.width-h.x,-o>f&&!l||u.checkCollision.left===!1||h.checkCollision.right===!1?o=0:(u.touching.none=!1,u.touching.left=!0,h.touching.none=!1,h.touching.right=!0,h.physicsType===c.STATIC_BODY&&!l&&(u.blocked.none=!1,u.blocked.left=!0),u.physicsType===c.STATIC_BODY&&!l&&(h.blocked.none=!1,h.blocked.right=!0))),u.overlapX=o,h.overlapX=o,o};S.exports=y},45170:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(37747),y=function(u,h,l,n){var o=0,f=u.deltaAbsY()+h.deltaAbsY()+n;return u._dy===0&&h._dy===0?(u.embedded=!0,h.embedded=!0):u._dy>h._dy?(o=u.bottom-h.y,o>f&&!l||u.checkCollision.down===!1||h.checkCollision.up===!1?o=0:(u.touching.none=!1,u.touching.down=!0,h.touching.none=!1,h.touching.up=!0,h.physicsType===c.STATIC_BODY&&!l&&(u.blocked.none=!1,u.blocked.down=!0),u.physicsType===c.STATIC_BODY&&!l&&(h.blocked.none=!1,h.blocked.up=!0))):u._dy<h._dy&&(o=u.y-h.bottom,-o>f&&!l||u.checkCollision.up===!1||h.checkCollision.down===!1?o=0:(u.touching.none=!1,u.touching.up=!0,h.touching.none=!1,h.touching.down=!0,h.physicsType===c.STATIC_BODY&&!l&&(u.blocked.none=!1,u.blocked.up=!0),u.physicsType===c.STATIC_BODY&&!l&&(h.blocked.none=!1,h.blocked.down=!0))),u.overlapY=o,h.overlapY=o,o};S.exports=y},60758:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(13759),y=s(83419),u=s(78389),h=s(37747),l=s(95540),n=s(26479),o=s(41212),f=new y({Extends:n,Mixins:[u],initialize:function(d,p,v,g){if(!v&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(o(v))g=v,v=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(v)&&o(v[0])){var m=this;v.forEach(function(T){T.internalCreateCallback=m.createCallbackHandler,T.internalRemoveCallback=m.removeCallbackHandler,T.classType=l(T,"classType",c)}),g=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=d,g&&(g.classType=l(g,"classType",c)),this.physicsType=h.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:l(g,"collideWorldBounds",!1),setBoundsRectangle:l(g,"customBoundsRectangle",null),setAccelerationX:l(g,"accelerationX",0),setAccelerationY:l(g,"accelerationY",0),setAllowDrag:l(g,"allowDrag",!0),setAllowGravity:l(g,"allowGravity",!0),setAllowRotation:l(g,"allowRotation",!0),setDamping:l(g,"useDamping",!1),setBounceX:l(g,"bounceX",0),setBounceY:l(g,"bounceY",0),setDragX:l(g,"dragX",0),setDragY:l(g,"dragY",0),setEnable:l(g,"enable",!0),setGravityX:l(g,"gravityX",0),setGravityY:l(g,"gravityY",0),setFrictionX:l(g,"frictionX",0),setFrictionY:l(g,"frictionY",0),setMaxSpeed:l(g,"maxSpeed",-1),setMaxVelocityX:l(g,"maxVelocityX",1e4),setMaxVelocityY:l(g,"maxVelocityY",1e4),setVelocityX:l(g,"velocityX",0),setVelocityY:l(g,"velocityY",0),setAngularVelocity:l(g,"angularVelocity",0),setAngularAcceleration:l(g,"angularAcceleration",0),setAngularDrag:l(g,"angularDrag",0),setMass:l(g,"mass",1),setImmovable:l(g,"immovable",!1)},n.call(this,p,v,g),this.type="PhysicsGroup"},createCallbackHandler:function(r){r.body||this.world.enableBody(r,h.DYNAMIC_BODY);var d=r.body;for(var p in this.defaults)d[p](this.defaults[p])},removeCallbackHandler:function(r){r.body&&this.world.disableBody(r)},setVelocity:function(r,d,p){p===void 0&&(p=0);for(var v=this.getChildren(),g=0;g<v.length;g++)v[g].body.velocity.set(r+g*p,d+g*p);return this},setVelocityX:function(r,d){d===void 0&&(d=0);for(var p=this.getChildren(),v=0;v<p.length;v++)p[v].body.velocity.x=r+v*d;return this},setVelocityY:function(r,d){d===void 0&&(d=0);for(var p=this.getChildren(),v=0;v<p.length;v++)p[v].body.velocity.y=r+v*d;return this}});S.exports=f},3017:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w,s,c,y,u,h,l,n,o,f,r,d,p,v,g,m,T,P=function(G,F,B){w=G,s=F;var N=w.velocity.x,z=s.velocity.x;return c=w.pushable,o=w._dx<0,f=w._dx>0,r=w._dx===0,g=Math.abs(w.right-s.x)<=Math.abs(s.right-w.x),l=z-N*w.bounce.x,y=s.pushable,d=s._dx<0,p=s._dx>0,v=s._dx===0,m=!g,n=N-z*s.bounce.x,T=Math.abs(B),M()},M=function(){return f&&g&&s.blocked.right?(w.processX(-T,l,!1,!0),1):o&&m&&s.blocked.left?(w.processX(T,l,!0),1):p&&m&&w.blocked.right?(s.processX(-T,n,!1,!0),2):d&&g&&w.blocked.left?(s.processX(T,n,!0),2):0},b=function(){var G=w.velocity.x,F=s.velocity.x,B=Math.sqrt(F*F*s.mass/w.mass)*(F>0?1:-1),N=Math.sqrt(G*G*w.mass/s.mass)*(G>0?1:-1),z=(B+N)*.5;return B-=z,N-=z,u=z+B*w.bounce.x,h=z+N*s.bounce.x,o&&m?R(0):d&&g?R(1):f&&g?R(2):p&&m?R(3):!1},R=function(G){if(c&&y)T*=.5,G===0||G===3?(w.processX(T,u),s.processX(-T,h)):(w.processX(-T,u),s.processX(T,h));else if(c&&!y)G===0||G===3?w.processX(T,l,!0):w.processX(-T,l,!1,!0);else if(!c&&y)G===0||G===3?s.processX(-T,n,!1,!0):s.processX(T,n,!0);else{var F=T*.5;G===0?v?(w.processX(T,0,!0),s.processX(0,null,!1,!0)):p?(w.processX(F,0,!0),s.processX(-F,0,!1,!0)):(w.processX(F,s.velocity.x,!0),s.processX(-F,null,!1,!0)):G===1?r?(w.processX(0,null,!1,!0),s.processX(T,0,!0)):f?(w.processX(-F,0,!1,!0),s.processX(F,0,!0)):(w.processX(-F,null,!1,!0),s.processX(F,w.velocity.x,!0)):G===2?v?(w.processX(-T,0,!1,!0),s.processX(0,null,!0)):d?(w.processX(-F,0,!1,!0),s.processX(F,0,!0)):(w.processX(-F,s.velocity.x,!1,!0),s.processX(F,null,!0)):G===3&&(r?(w.processX(0,null,!0),s.processX(-T,0,!1,!0)):o?(w.processX(F,0,!0),s.processX(-F,0,!1,!0)):(w.processX(F,s.velocity.y,!0),s.processX(-F,null,!1,!0)))}return!0},A=function(G){if(G===1?s.velocity.x=0:g?s.processX(T,n,!0):s.processX(-T,n,!1,!0),w.moves){var F=w.directControl?w.y-w.autoFrame.y:w.y-w.prev.y;s.y+=F*w.friction.y,s._dy=s.y-s.prev.y}},D=function(G){if(G===2?w.velocity.x=0:m?w.processX(T,l,!0):w.processX(-T,l,!1,!0),s.moves){var F=s.directControl?s.y-s.autoFrame.y:s.y-s.prev.y;w.y+=F*s.friction.y,w._dy=w.y-w.prev.y}};S.exports={BlockCheck:M,Check:b,Set:P,Run:R,RunImmovableBody1:A,RunImmovableBody2:D}},47962:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w,s,c,y,u,h,l,n,o,f,r,d,p,v,g,m,T,P=function(G,F,B){w=G,s=F;var N=w.velocity.y,z=s.velocity.y;return c=w.pushable,o=w._dy<0,f=w._dy>0,r=w._dy===0,g=Math.abs(w.bottom-s.y)<=Math.abs(s.bottom-w.y),l=z-N*w.bounce.y,y=s.pushable,d=s._dy<0,p=s._dy>0,v=s._dy===0,m=!g,n=N-z*s.bounce.y,T=Math.abs(B),M()},M=function(){return f&&g&&s.blocked.down?(w.processY(-T,l,!1,!0),1):o&&m&&s.blocked.up?(w.processY(T,l,!0),1):p&&m&&w.blocked.down?(s.processY(-T,n,!1,!0),2):d&&g&&w.blocked.up?(s.processY(T,n,!0),2):0},b=function(){var G=w.velocity.y,F=s.velocity.y,B=Math.sqrt(F*F*s.mass/w.mass)*(F>0?1:-1),N=Math.sqrt(G*G*w.mass/s.mass)*(G>0?1:-1),z=(B+N)*.5;return B-=z,N-=z,u=z+B*w.bounce.y,h=z+N*s.bounce.y,o&&m?R(0):d&&g?R(1):f&&g?R(2):p&&m?R(3):!1},R=function(G){if(c&&y)T*=.5,G===0||G===3?(w.processY(T,u),s.processY(-T,h)):(w.processY(-T,u),s.processY(T,h));else if(c&&!y)G===0||G===3?w.processY(T,l,!0):w.processY(-T,l,!1,!0);else if(!c&&y)G===0||G===3?s.processY(-T,n,!1,!0):s.processY(T,n,!0);else{var F=T*.5;G===0?v?(w.processY(T,0,!0),s.processY(0,null,!1,!0)):p?(w.processY(F,0,!0),s.processY(-F,0,!1,!0)):(w.processY(F,s.velocity.y,!0),s.processY(-F,null,!1,!0)):G===1?r?(w.processY(0,null,!1,!0),s.processY(T,0,!0)):f?(w.processY(-F,0,!1,!0),s.processY(F,0,!0)):(w.processY(-F,null,!1,!0),s.processY(F,w.velocity.y,!0)):G===2?v?(w.processY(-T,0,!1,!0),s.processY(0,null,!0)):d?(w.processY(-F,0,!1,!0),s.processY(F,0,!0)):(w.processY(-F,s.velocity.y,!1,!0),s.processY(F,null,!0)):G===3&&(r?(w.processY(0,null,!0),s.processY(-T,0,!1,!0)):o?(w.processY(F,0,!0),s.processY(-F,0,!1,!0)):(w.processY(F,s.velocity.y,!0),s.processY(-F,null,!1,!0)))}return!0},A=function(G){if(G===1?s.velocity.y=0:g?s.processY(T,n,!0):s.processY(-T,n,!1,!0),w.moves){var F=w.directControl?w.x-w.autoFrame.x:w.x-w.prev.x;s.x+=F*w.friction.x,s._dx=s.x-s.prev.x}},D=function(G){if(G===2?w.velocity.y=0:m?w.processY(T,l,!0):w.processY(-T,l,!1,!0),s.moves){var F=s.directControl?s.x-s.autoFrame.x:s.x-s.prev.x;w.x+=F*s.friction.x,w._dx=w.x-w.prev.x}};S.exports={BlockCheck:M,Check:b,Set:P,Run:R,RunImmovableBody1:A,RunImmovableBody2:D}},14087:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(64897),y=s(3017),u=function(h,l,n,o,f){f===void 0&&(f=c(h,l,n,o));var r=h.immovable,d=l.immovable;if(n||f===0||r&&d||h.customSeparateX||l.customSeparateX)return f!==0||h.embedded&&l.embedded;var p=y.Set(h,l,f);return!r&&!d?p>0?!0:y.Check():(r?y.RunImmovableBody1(p):d&&y.RunImmovableBody2(p),!0)};S.exports=u},89936:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45170),y=s(47962),u=function(h,l,n,o,f){f===void 0&&(f=c(h,l,n,o));var r=h.immovable,d=l.immovable;if(n||f===0||r&&d||h.customSeparateY||l.customSeparateY)return f!==0||h.embedded&&l.embedded;var p=y.Set(h,l,f);return!r&&!d?p>0?!0:y.Check():(r?y.RunImmovableBody1(p):d&&y.RunImmovableBody2(p),!0)};S.exports=u},95829:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c===void 0&&(c={}),c.none=s,c.up=!1,c.down=!1,c.left=!1,c.right=!1,s||(c.up=!0,c.down=!0,c.left=!0,c.right=!0),c};S.exports=w},72624:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87902),y=s(83419),u=s(78389),h=s(37747),l=s(37303),n=s(95829),o=s(26099),f=new y({Mixins:[u],initialize:function(d,p){var v=64,g=64,m={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},T=p!==void 0;T&&p.displayWidth&&(v=p.displayWidth,g=p.displayHeight),T||(p=m),this.world=d,this.gameObject=T?p:void 0,this.isBody=!0,this.debugShowBody=d.defaults.debugShowStaticBody,this.debugBodyColor=d.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(p.x-v*p.originX,p.y-g*p.originY),this.width=v,this.height=g,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=o.ZERO,this.allowGravity=!1,this.gravity=o.ZERO,this.bounce=o.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=n(!1),this.touching=n(!0),this.wasTouching=n(!0),this.blocked=n(!0),this.physicsType=h.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(r,d,p){if(d===void 0&&(d=!0),p===void 0&&(p=!0),!r||!r.hasTransformComponent)return this;var v=this.world;return this.gameObject&&this.gameObject.body&&(v.disable(this.gameObject),this.gameObject.body=null),r.body&&v.disable(r),this.gameObject=r,r.body=this,this.setSize(),d&&this.updateFromGameObject(),this.enable=p,this},updateFromGameObject:function(){this.world.staticTree.remove(this);var r=this.gameObject;return r.getTopLeft(this.position),this.width=r.displayWidth,this.height=r.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(r,d){return d===void 0&&(d=r),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(r,d),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(r,d,p){p===void 0&&(p=!0);var v=this.gameObject;if(v&&v.frame&&(r||(r=v.frame.realWidth),d||(d=v.frame.realHeight)),this.world.staticTree.remove(this),this.width=r,this.height=d,this.halfWidth=Math.floor(r/2),this.halfHeight=Math.floor(d/2),p&&v&&v.getCenter){var g=v.displayWidth/2,m=v.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(g-this.halfWidth,m-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(r,d,p){return d===void 0&&(d=this.offset.x),p===void 0&&(p=this.offset.y),r>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=r,this.width=r*2,this.height=r*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(d,p),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(r,d){var p=this.gameObject;r===void 0&&(r=p.x),d===void 0&&(d=p.y),this.world.staticTree.remove(this),p.setPosition(r,d),p.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(r){return r.x=this.x,r.y=this.y,r.right=this.right,r.bottom=this.bottom,r},hitTest:function(r,d){return this.isCircle?c(this,r,d):l(this,r,d)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(r){var d=this.position,p=d.x+this.halfWidth,v=d.y+this.halfHeight;this.debugShowBody&&(r.lineStyle(r.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?r.strokeCircle(p,v,this.width/2):r.strokeRect(d.x,d.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(r){return r<=0&&(r=.1),this.mass=r,this},x:{get:function(){return this.position.x},set:function(r){this.world.staticTree.remove(this),this.position.x=r,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(r){this.world.staticTree.remove(this),this.position.y=r,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});S.exports=f},71464:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(13759),y=s(83419),u=s(78389),h=s(37747),l=s(95540),n=s(26479),o=s(41212),f=new y({Extends:n,Mixins:[u],initialize:function(d,p,v,g){!v&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:c}:o(v)?(g=v,v=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=l(g,"classType",c)):Array.isArray(v)&&o(v[0])?(g=v,v=null,g.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=l(m,"classType",c)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=d,this.physicsType=h.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,n.call(this,p,v,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(r){r.body||this.world.enableBody(r,h.STATIC_BODY)},removeCallbackHandler:function(r){r.body&&this.world.disableBody(r)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var r=this.children.entries,d=0;d<r.length;d++)r[d].body.reset();return this}});S.exports=f},82248:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(55495),y=s(37742),u=s(45319),h=s(83419),l=s(79342),n=s(37747),o=s(20339),f=s(52816),r=s(50792),d=s(63012),p=s(43855),v=s(5470),g=s(94977),m=s(64897),T=s(45170),P=s(96523),M=s(35154),b=s(36383),R=s(25774),A=s(96602),D=s(87841),G=s(59542),F=s(40012),B=s(14087),N=s(89936),z=s(35072),$=s(72624),Q=s(2483),Z=s(61340),tt=s(26099),H=s(15994),J=new h({Extends:r,initialize:function(_,U){r.call(this),this.scene=_,this.bodies=new z,this.staticBodies=new z,this.pendingDestroy=new z,this.colliders=new R,this.gravity=new tt(M(U,"gravity.x",0),M(U,"gravity.y",0)),this.bounds=new D(M(U,"x",0),M(U,"y",0),M(U,"width",_.sys.scale.width),M(U,"height",_.sys.scale.height)),this.checkCollision={up:M(U,"checkCollision.up",!0),down:M(U,"checkCollision.down",!0),left:M(U,"checkCollision.left",!0),right:M(U,"checkCollision.right",!0)},this.fps=M(U,"fps",60),this.fixedStep=M(U,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=M(U,"timeScale",1),this.OVERLAP_BIAS=M(U,"overlapBias",4),this.TILE_BIAS=M(U,"tileBias",16),this.forceX=M(U,"forceX",!1),this.isPaused=M(U,"isPaused",!1),this._total=0,this.drawDebug=M(U,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:M(U,"debugShowBody",!0),debugShowStaticBody:M(U,"debugShowStaticBody",!0),debugShowVelocity:M(U,"debugShowVelocity",!0),bodyDebugColor:M(U,"debugBodyColor",16711935),staticBodyDebugColor:M(U,"debugStaticBodyColor",255),velocityDebugColor:M(U,"debugVelocityColor",65280)},this.maxEntries=M(U,"maxEntries",16),this.useTree=M(U,"useTree",!0),this.tree=new G(this.maxEntries),this.staticTree=new G(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new Z,this._tempMatrix2=new Z,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(Y,_){_===void 0&&(_=n.DYNAMIC_BODY),Array.isArray(Y)||(Y=[Y]);for(var U=0;U<Y.length;U++){var et=Y[U];if(et.isParent)for(var nt=et.getChildren(),rt=0;rt<nt.length;rt++){var ot=nt[rt];ot.isParent?this.enable(ot,_):this.enableBody(ot,_)}else this.enableBody(et,_)}},enableBody:function(Y,_){return _===void 0&&(_=n.DYNAMIC_BODY),Y.hasTransformComponent&&(Y.body||(_===n.DYNAMIC_BODY?Y.body=new y(this,Y):_===n.STATIC_BODY&&(Y.body=new $(this,Y))),this.add(Y.body)),Y},add:function(Y){return Y.physicsType===n.DYNAMIC_BODY?this.bodies.set(Y):Y.physicsType===n.STATIC_BODY&&(this.staticBodies.set(Y),this.staticTree.insert(Y)),Y.enable=!0,Y},disable:function(Y){Array.isArray(Y)||(Y=[Y]);for(var _=0;_<Y.length;_++){var U=Y[_];if(U.isParent)for(var et=U.getChildren(),nt=0;nt<et.length;nt++){var rt=et[nt];rt.isParent?this.disable(rt):this.disableBody(rt.body)}else this.disableBody(U.body)}},disableBody:function(Y){this.remove(Y),Y.enable=!1},remove:function(Y){Y.physicsType===n.DYNAMIC_BODY?(this.tree.remove(Y),this.bodies.delete(Y)):Y.physicsType===n.STATIC_BODY&&(this.staticBodies.delete(Y),this.staticTree.remove(Y))},createDebugGraphic:function(){var Y=this.scene.sys.add.graphics({x:0,y:0});return Y.setDepth(Number.MAX_VALUE),this.debugGraphic=Y,this.drawDebug=!0,Y},setBounds:function(Y,_,U,et,nt,rt,ot,dt){return this.bounds.setTo(Y,_,U,et),nt!==void 0&&this.setBoundsCollision(nt,rt,ot,dt),this},setBoundsCollision:function(Y,_,U,et){return Y===void 0&&(Y=!0),_===void 0&&(_=!0),U===void 0&&(U=!0),et===void 0&&(et=!0),this.checkCollision.left=Y,this.checkCollision.right=_,this.checkCollision.up=U,this.checkCollision.down=et,this},pause:function(){return this.isPaused=!0,this.emit(d.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(d.RESUME),this},addCollider:function(Y,_,U,et,nt){U===void 0&&(U=null),et===void 0&&(et=null),nt===void 0&&(nt=U);var rt=new l(this,!1,Y,_,U,et,nt);return this.colliders.add(rt),rt},addOverlap:function(Y,_,U,et,nt){U===void 0&&(U=null),et===void 0&&(et=null),nt===void 0&&(nt=U);var rt=new l(this,!0,Y,_,U,et,nt);return this.colliders.add(rt),rt},removeCollider:function(Y){return this.colliders.remove(Y),this},setFPS:function(Y){return this.fps=Y,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(Y,_){if(!(this.isPaused||this.bodies.size===0)){var U,et=this._frameTime,nt=this._frameTimeMS*this.timeScale;this._elapsed+=_;var rt,ot=this.bodies.entries,dt=this._elapsed>=nt;for(this.fixedStep||(et=_*.001,dt=!0,this._elapsed=0),U=0;U<ot.length;U++)rt=ot[U],rt.enable&&rt.preUpdate(dt,et);if(dt){this._elapsed-=nt,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(ot));var vt=this.colliders.update();for(U=0;U<vt.length;U++){var mt=vt[U];mt.active&&mt.update()}this.emit(d.WORLD_STEP,et)}for(;this._elapsed>=nt;)this._elapsed-=nt,this.step(et)}},step:function(Y){var _,U,et=this.bodies.entries,nt=et.length;for(_=0;_<nt;_++)U=et[_],U.enable&&U.update(Y);this.useTree&&(this.tree.clear(),this.tree.load(et));var rt=this.colliders.update();for(_=0;_<rt.length;_++){var ot=rt[_];ot.active&&ot.update()}this.emit(d.WORLD_STEP,Y),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var Y,_,U=this.bodies.entries,et=U.length,nt=this.bodies,rt=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,Y=0;Y<et;Y++)_=U[Y],_.enable&&_.postUpdate();if(this.drawDebug){var ot=this.debugGraphic;for(ot.clear(),Y=0;Y<et;Y++)_=U[Y],_.willDrawDebug()&&_.drawDebug(ot);for(U=rt.entries,et=U.length,Y=0;Y<et;Y++)_=U[Y],_.willDrawDebug()&&_.drawDebug(ot)}var dt=this.pendingDestroy;if(dt.size>0){var vt=this.tree,mt=this.staticTree;for(U=dt.entries,et=U.length,Y=0;Y<et;Y++)_=U[Y],_.physicsType===n.DYNAMIC_BODY?(vt.remove(_),nt.delete(_)):_.physicsType===n.STATIC_BODY&&(mt.remove(_),rt.delete(_)),_.world=void 0,_.gameObject=void 0;dt.clear()}},updateMotion:function(Y,_){Y.allowRotation&&this.computeAngularVelocity(Y,_),this.computeVelocity(Y,_)},computeAngularVelocity:function(Y,_){var U=Y.angularVelocity,et=Y.angularAcceleration,nt=Y.angularDrag,rt=Y.maxAngular;et?U+=et*_:Y.allowDrag&&nt&&(nt*=_,v(U-nt,0,.1)?U-=nt:g(U+nt,0,.1)?U+=nt:U=0),U=u(U,-rt,rt);var ot=U-Y.angularVelocity;Y.angularVelocity+=ot,Y.rotation+=Y.angularVelocity*_},computeVelocity:function(Y,_){var U=Y.velocity.x,et=Y.acceleration.x,nt=Y.drag.x,rt=Y.maxVelocity.x,ot=Y.velocity.y,dt=Y.acceleration.y,vt=Y.drag.y,mt=Y.maxVelocity.y,gt=Y.speed,yt=Y.maxSpeed,St=Y.allowDrag,Ct=Y.useDamping;Y.allowGravity&&(U+=(this.gravity.x+Y.gravity.x)*_,ot+=(this.gravity.y+Y.gravity.y)*_),et?U+=et*_:St&&nt&&(Ct?(nt=Math.pow(nt,_),U*=nt,gt=Math.sqrt(U*U+ot*ot),p(gt,0,.001)&&(U=0)):(nt*=_,v(U-nt,0,.01)?U-=nt:g(U+nt,0,.01)?U+=nt:U=0)),dt?ot+=dt*_:St&&vt&&(Ct?(vt=Math.pow(vt,_),ot*=vt,gt=Math.sqrt(U*U+ot*ot),p(gt,0,.001)&&(ot=0)):(vt*=_,v(ot-vt,0,.01)?ot-=vt:g(ot+vt,0,.01)?ot+=vt:ot=0)),U=u(U,-rt,rt),ot=u(ot,-mt,mt),Y.velocity.set(U,ot),yt>-1&&Y.velocity.length()>yt&&(Y.velocity.normalize().scale(yt),gt=yt),Y.speed=gt},separate:function(Y,_,U,et,nt){var rt,ot,dt=!1,vt=!0;if(!Y.enable||!_.enable||Y.checkCollision.none||_.checkCollision.none||!this.intersects(Y,_)||!(Y.collisionMask&_.collisionCategory)||!(_.collisionMask&Y.collisionCategory)||U&&U.call(et,Y.gameObject||Y,_.gameObject||_)===!1)return dt;if(Y.isCircle||_.isCircle){var mt=this.separateCircle(Y,_,nt);mt.result?(dt=!0,vt=!1):(rt=mt.x,ot=mt.y,vt=!0)}if(vt){var gt=!1,yt=!1,St=this.OVERLAP_BIAS;nt?(gt=B(Y,_,nt,St,rt),yt=N(Y,_,nt,St,ot)):this.forceX||Math.abs(this.gravity.y+Y.gravity.y)<Math.abs(this.gravity.x+Y.gravity.x)?(gt=B(Y,_,nt,St,rt),this.intersects(Y,_)&&(yt=N(Y,_,nt,St,ot))):(yt=N(Y,_,nt,St,ot),this.intersects(Y,_)&&(gt=B(Y,_,nt,St,rt))),dt=gt||yt}return dt&&(nt?(Y.onOverlap||_.onOverlap)&&this.emit(d.OVERLAP,Y.gameObject,_.gameObject,Y,_):(Y.onCollide||_.onCollide)&&this.emit(d.COLLIDE,Y.gameObject,_.gameObject,Y,_)),dt},separateCircle:function(Y,_,U){m(Y,_,!1,0),T(Y,_,!1,0);var et=Y.isCircle,nt=_.isCircle,rt=Y.center,ot=_.center,dt=Y.immovable,vt=_.immovable,mt=Y.velocity,gt=_.velocity,yt=0,St=!0;if(et!==nt){St=!1;var Ct=rt.x,bt=rt.y,At=Y.halfWidth,Lt=_.position.x,Tt=_.position.y,Et=_.right,wt=_.bottom;nt&&(Ct=ot.x,bt=ot.y,At=_.halfWidth,Lt=Y.position.x,Tt=Y.position.y,Et=Y.right,wt=Y.bottom),bt<Tt?Ct<Lt?yt=o(Ct,bt,Lt,Tt)-At:Ct>Et&&(yt=o(Ct,bt,Et,Tt)-At):bt>wt&&(Ct<Lt?yt=o(Ct,bt,Lt,wt)-At:Ct>Et&&(yt=o(Ct,bt,Et,wt)-At)),yt*=-1}else yt=Y.halfWidth+_.halfWidth-f(rt,ot);Y.overlapR=yt,_.overlapR=yt;var Wt=c(rt,ot),Zt=(yt+b.EPSILON)*Math.cos(Wt),ue=(yt+b.EPSILON)*Math.sin(Wt),Qt={overlap:yt,result:!1,x:Zt,y:ue};if(U&&(!St||St&&yt!==0))return Qt.result=!0,Qt;if(!St&&yt===0||dt&&vt||Y.customSeparateX||_.customSeparateX)return Qt.x=void 0,Qt.y=void 0,Qt;var jt=!Y.pushable&&!_.pushable;if(St){var ve=rt.x-ot.x,Le=rt.y-ot.y,Kt=Math.sqrt(Math.pow(ve,2)+Math.pow(Le,2)),de=(ot.x-rt.x)/Kt||0,Nt=(ot.y-rt.y)/Kt||0,ge=2*(mt.x*de+mt.y*Nt-gt.x*de-gt.y*Nt)/(Y.mass+_.mass);(dt||vt||!Y.pushable||!_.pushable)&&(ge*=2),!dt&&Y.pushable&&(mt.x=mt.x-ge/Y.mass*de,mt.y=mt.y-ge/Y.mass*Nt,mt.multiply(Y.bounce)),!vt&&_.pushable&&(gt.x=gt.x+ge/_.mass*de,gt.y=gt.y+ge/_.mass*Nt,gt.multiply(_.bounce)),!dt&&!vt&&(Zt*=.5,ue*=.5),(!dt||Y.pushable||jt)&&(Y.x-=Zt,Y.y-=ue,Y.updateCenter()),(!vt||_.pushable||jt)&&(_.x+=Zt,_.y+=ue,_.updateCenter()),Qt.result=!0}else!dt&&(Y.pushable||jt)&&(Y.x-=Zt,Y.y-=ue,Y.updateCenter()),!vt&&(_.pushable||jt)&&(_.x+=Zt,_.y+=ue,_.updateCenter()),Qt.x=void 0,Qt.y=void 0;return Qt},intersects:function(Y,_){return Y===_?!1:!Y.isCircle&&!_.isCircle?!(Y.right<=_.left||Y.bottom<=_.top||Y.left>=_.right||Y.top>=_.bottom):Y.isCircle?_.isCircle?f(Y.center,_.center)<=Y.halfWidth+_.halfWidth:this.circleBodyIntersects(Y,_):this.circleBodyIntersects(_,Y)},circleBodyIntersects:function(Y,_){var U=u(Y.center.x,_.left,_.right),et=u(Y.center.y,_.top,_.bottom),nt=(Y.center.x-U)*(Y.center.x-U),rt=(Y.center.y-et)*(Y.center.y-et);return nt+rt<=Y.halfWidth*Y.halfWidth},overlap:function(Y,_,U,et,nt){return U===void 0&&(U=null),et===void 0&&(et=null),nt===void 0&&(nt=U),this.collideObjects(Y,_,U,et,nt,!0)},collide:function(Y,_,U,et,nt){return U===void 0&&(U=null),et===void 0&&(et=null),nt===void 0&&(nt=U),this.collideObjects(Y,_,U,et,nt,!1)},collideObjects:function(Y,_,U,et,nt,rt){var ot,dt;Y.isParent&&(Y.physicsType===void 0||_===void 0||Y===_)&&(Y=Y.children.entries),_&&_.isParent&&_.physicsType===void 0&&(_=_.children.entries);var vt=Array.isArray(Y),mt=Array.isArray(_);if(this._total=0,!vt&&!mt)this.collideHandler(Y,_,U,et,nt,rt);else if(!vt&&mt)for(ot=0;ot<_.length;ot++)this.collideHandler(Y,_[ot],U,et,nt,rt);else if(vt&&!mt)if(_)for(ot=0;ot<Y.length;ot++)this.collideHandler(Y[ot],_,U,et,nt,rt);else for(ot=0;ot<Y.length;ot++){var gt=Y[ot];for(dt=ot+1;dt<Y.length;dt++)ot!==dt&&this.collideHandler(gt,Y[dt],U,et,nt,rt)}else for(ot=0;ot<Y.length;ot++)for(dt=0;dt<_.length;dt++)this.collideHandler(Y[ot],_[dt],U,et,nt,rt);return this._total>0},collideHandler:function(Y,_,U,et,nt,rt){if(_===void 0&&Y.isParent)return this.collideGroupVsGroup(Y,Y,U,et,nt,rt);if(!Y||!_)return!1;if(Y.body||Y.isBody){if(_.body||_.isBody)return this.collideSpriteVsSprite(Y,_,U,et,nt,rt);if(_.isParent)return this.collideSpriteVsGroup(Y,_,U,et,nt,rt);if(_.isTilemap)return this.collideSpriteVsTilemapLayer(Y,_,U,et,nt,rt)}else if(Y.isParent){if(_.body||_.isBody)return this.collideSpriteVsGroup(_,Y,U,et,nt,rt);if(_.isParent)return this.collideGroupVsGroup(Y,_,U,et,nt,rt);if(_.isTilemap)return this.collideGroupVsTilemapLayer(Y,_,U,et,nt,rt)}else if(Y.isTilemap){if(_.body||_.isBody)return this.collideSpriteVsTilemapLayer(_,Y,U,et,nt,rt);if(_.isParent)return this.collideGroupVsTilemapLayer(_,Y,U,et,nt,rt)}},canCollide:function(Y,_){return Y&&_&&(Y.collisionMask&_.collisionCategory)!==0&&(_.collisionMask&Y.collisionCategory)!==0},collideSpriteVsSprite:function(Y,_,U,et,nt,rt){var ot=Y.isBody?Y:Y.body,dt=_.isBody?_:_.body;return this.canCollide(ot,dt)?(this.separate(ot,dt,et,nt,rt)&&(U&&U.call(nt,Y,_),this._total++),!0):!1},collideSpriteVsGroup:function(Y,_,U,et,nt,rt){var ot=Y.isBody?Y:Y.body;if(!(_.getLength()===0||!ot||!ot.enable||ot.checkCollision.none||!this.canCollide(ot,_))){var dt,vt,mt;if(this.useTree||_.physicsType===n.STATIC_BODY){var gt=this.treeMinMax;gt.minX=ot.left,gt.minY=ot.top,gt.maxX=ot.right,gt.maxY=ot.bottom;var yt=_.physicsType===n.DYNAMIC_BODY?this.tree.search(gt):this.staticTree.search(gt);for(vt=yt.length,dt=0;dt<vt;dt++)mt=yt[dt],!(ot===mt||!mt.enable||mt.checkCollision.none||!_.contains(mt.gameObject))&&this.separate(ot,mt,et,nt,rt)&&(U&&U.call(nt,ot.gameObject,mt.gameObject),this._total++)}else{var St=_.getChildren(),Ct=_.children.entries.indexOf(Y);for(vt=St.length,dt=0;dt<vt;dt++)mt=St[dt].body,!(!mt||dt===Ct||!mt.enable)&&this.separate(ot,mt,et,nt,rt)&&(U&&U.call(nt,ot.gameObject,mt.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(Y,_,U,et,nt,rt){if(!this.canCollide(Y,_))return!1;var ot=Y.getChildren();if(ot.length===0)return!1;for(var dt=!1,vt=0;vt<ot.length;vt++)(ot[vt].body||ot[vt].isBody)&&this.collideSpriteVsTilemapLayer(ot[vt],_,U,et,nt,rt)&&(dt=!0);return dt},collideTiles:function(Y,_,U,et,nt){return _.length===0||Y.body&&!Y.body.enable||Y.isBody&&!Y.enable?!1:this.collideSpriteVsTilesHandler(Y,_,U,et,nt,!1,!1)},overlapTiles:function(Y,_,U,et,nt){return _.length===0||Y.body&&!Y.body.enable||Y.isBody&&!Y.enable?!1:this.collideSpriteVsTilesHandler(Y,_,U,et,nt,!0,!1)},collideSpriteVsTilemapLayer:function(Y,_,U,et,nt,rt){var ot=Y.isBody?Y:Y.body;if(!ot.enable||ot.checkCollision.none||!this.canCollide(ot,_))return!1;var dt=_.layer,vt=ot.x-dt.tileWidth*_.scaleX,mt=ot.y-dt.tileHeight*_.scaleY,gt=ot.width+dt.tileWidth*_.scaleX,yt=ot.height+dt.tileHeight*_.scaleY,St=rt?null:this.tileFilterOptions,Ct=P(vt,mt,gt,yt,St,_.scene.cameras.main,_.layer);return Ct.length===0?!1:this.collideSpriteVsTilesHandler(Y,Ct,U,et,nt,rt,!0)},collideSpriteVsTilesHandler:function(Y,_,U,et,nt,rt,ot){for(var dt=Y.isBody?Y:Y.body,vt,mt={left:0,right:0,top:0,bottom:0},gt,yt=!1,St=0;St<_.length;St++){vt=_[St],gt=vt.tilemapLayer;var Ct=gt.tileToWorldXY(vt.x,vt.y);mt.left=Ct.x,mt.top=Ct.y,mt.right=mt.left+vt.width*gt.scaleX,mt.bottom=mt.top+vt.height*gt.scaleY,Q(mt,dt)&&(!et||et.call(nt,Y,vt))&&A(vt,Y)&&(rt||F(St,dt,vt,mt,gt,this.TILE_BIAS,ot))&&(this._total++,yt=!0,U&&U.call(nt,Y,vt),rt&&dt.onOverlap?this.emit(d.TILE_OVERLAP,Y,vt,dt):dt.onCollide&&this.emit(d.TILE_COLLIDE,Y,vt,dt))}return yt},collideGroupVsGroup:function(Y,_,U,et,nt,rt){if(!(Y.getLength()===0||_.getLength()===0||!this.canCollide(Y,_)))for(var ot=Y.getChildren(),dt=0;dt<ot.length;dt++)this.collideSpriteVsGroup(ot[dt],_,U,et,nt,rt)},wrap:function(Y,_){Y.body?this.wrapObject(Y,_):Y.getChildren?this.wrapArray(Y.getChildren(),_):Array.isArray(Y)?this.wrapArray(Y,_):this.wrapObject(Y,_)},wrapArray:function(Y,_){for(var U=0;U<Y.length;U++)this.wrapObject(Y[U],_)},wrapObject:function(Y,_){_===void 0&&(_=0),Y.x=H(Y.x,this.bounds.left-_,this.bounds.right+_),Y.y=H(Y.y,this.bounds.top-_,this.bounds.bottom+_)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});S.exports=J},1093:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setAcceleration:function(s,c){return this.body.acceleration.set(s,c),this},setAccelerationX:function(s){return this.body.acceleration.x=s,this},setAccelerationY:function(s){return this.body.acceleration.y=s,this}};S.exports=w},59023:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setAngularVelocity:function(s){return this.body.angularVelocity=s,this},setAngularAcceleration:function(s){return this.body.angularAcceleration=s,this},setAngularDrag:function(s){return this.body.angularDrag=s,this}};S.exports=w},62069:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setBounce:function(s,c){return this.body.bounce.set(s,c),this},setBounceX:function(s){return this.body.bounce.x=s,this},setBounceY:function(s){return this.body.bounce.y=s,this},setCollideWorldBounds:function(s,c,y,u){return this.body.setCollideWorldBounds(s,c,y,u),this}};S.exports=w},78389:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(79599),y={setCollisionCategory:function(u){var h=this.body?this.body:this;return h.collisionCategory=u,this},willCollideWith:function(u){var h=this.body?this.body:this;return(h.collisionMask&u)!==0},addCollidesWith:function(u){var h=this.body?this.body:this;return h.collisionMask=h.collisionMask|u,this},removeCollidesWith:function(u){var h=this.body?this.body:this;return h.collisionMask=h.collisionMask&~u,this},setCollidesWith:function(u){var h=this.body?this.body:this;return h.collisionMask=c(u),this},resetCollisionCategory:function(){var u=this.body?this.body:this;return u.collisionCategory=1,u.collisionMask=2147483647,this}};S.exports=y},87118:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setDebug:function(s,c,y){return this.debugShowBody=s,this.debugShowVelocity=c,this.debugBodyColor=y,this},setDebugBodyColor:function(s){return this.body.debugBodyColor=s,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(s){this.body.debugShowBody=s}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(s){this.body.debugShowVelocity=s}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(s){this.body.debugBodyColor=s}}};S.exports=w},52819:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setDrag:function(s,c){return this.body.drag.set(s,c),this},setDragX:function(s){return this.body.drag.x=s,this},setDragY:function(s){return this.body.drag.y=s,this},setDamping:function(s){return this.body.useDamping=s,this}};S.exports=w},4074:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setDirectControl:function(s){return this.body.setDirectControl(s),this},enableBody:function(s,c,y,u,h){return s&&this.body.reset(c,y),u&&(this.body.gameObject.active=!0),h&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(s,c){return s===void 0&&(s=!1),c===void 0&&(c=!1),this.body.stop(),this.body.enable=!1,s&&(this.body.gameObject.active=!1),c&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};S.exports=w},40831:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setFriction:function(s,c){return this.body.friction.set(s,c),this},setFrictionX:function(s){return this.body.friction.x=s,this},setFrictionY:function(s){return this.body.friction.y=s,this}};S.exports=w},26775:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setGravity:function(s,c){return this.body.gravity.set(s,c),this},setGravityX:function(s){return this.body.gravity.x=s,this},setGravityY:function(s){return this.body.gravity.y=s,this}};S.exports=w},9437:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setImmovable:function(s){return s===void 0&&(s=!0),this.body.immovable=s,this}};S.exports=w},30621:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setMass:function(s){return this.body.mass=s,this}};S.exports=w},72441:(S,w,s)=>{var c=s(47956),y=s(96503),u=s(2044),h=s(81491),l=function(n,o,f,r,d,p){var v=c(n,o-r,f-r,2*r,2*r,d,p);if(v.length===0)return v;for(var g=new y(o,f,r),m=new y,T=[],P=0;P<v.length;P++){var M=v[P];M.isCircle?(m.setTo(M.center.x,M.center.y,M.halfWidth),u(g,m)&&T.push(M)):h(g,M)&&T.push(M)}return T};S.exports=l},47956:S=>{var w=function(s,c,y,u,h,l,n){l===void 0&&(l=!0),n===void 0&&(n=!1);var o=[],f=[],r=s.treeMinMax;if(r.minX=c,r.minY=y,r.maxX=c+u,r.maxY=y+h,n&&(f=s.staticTree.search(r)),l&&s.useTree)o=s.tree.search(r);else if(l){var d=s.bodies,p={position:{x:c,y},left:c,top:y,right:c+u,bottom:y+h,isCircle:!1},v=s.intersects;d.iterate(function(g){v(g,p)&&o.push(g)})}return f.concat(o)};S.exports=w},62121:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setPushable:function(s){return s===void 0&&(s=!0),this.body.pushable=s,this}};S.exports=w},29384:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setOffset:function(s,c){return this.body.setOffset(s,c),this},setSize:function(s,c,y){return this.body.setSize(s,c,y),this},setBodySize:function(s,c,y){return this.body.setSize(s,c,y),this},setCircle:function(s,c,y){return this.body.setCircle(s,c,y),this}};S.exports=w},15098:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setVelocity:function(s,c){return this.body.setVelocity(s,c),this},setVelocityX:function(s){return this.body.setVelocityX(s),this},setVelocityY:function(s){return this.body.setVelocityY(s),this},setMaxVelocity:function(s,c){return this.body.maxVelocity.set(s,c),this}};S.exports=w},92209:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Acceleration:s(1093),Angular:s(59023),Bounce:s(62069),Collision:s(78389),Debug:s(87118),Drag:s(52819),Enable:s(4074),Friction:s(40831),Gravity:s(26775),Immovable:s(9437),Mass:s(30621),OverlapCirc:s(72441),OverlapRect:s(47956),Pushable:s(62121),Size:s(29384),Velocity:s(15098)}},37747:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};S.exports=w},20009:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="collide"},36768:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="overlap"},60473:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pause"},89954:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="resume"},61804:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="tilecollide"},7161:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="tileoverlap"},34689:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="worldbounds"},16006:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="worldstep"},63012:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={COLLIDE:s(20009),OVERLAP:s(36768),PAUSE:s(60473),RESUME:s(89954),TILE_COLLIDE:s(61804),TILE_OVERLAP:s(7161),WORLD_BOUNDS:s(34689),WORLD_STEP:s(16006)}},27064:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(37747),y=s(79291),u={ArcadePhysics:s(86689),Body:s(37742),Collider:s(79342),Components:s(92209),Events:s(63012),Factory:s(66022),GetCollidesWith:s(79599),GetOverlapX:s(64897),GetOverlapY:s(45170),SeparateX:s(14087),SeparateY:s(89936),Group:s(60758),Image:s(71289),Sprite:s(13759),StaticBody:s(72624),StaticGroup:s(71464),Tilemap:s(55173),World:s(82248)};u=y(!1,u,c),S.exports=u},96602:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.collisionCallback?!s.collisionCallback.call(s.collisionCallbackContext,c,s):s.layer.callbacks[s.index]?!s.layer.callbacks[s.index].callback.call(s.layer.callbacks[s.index].callbackContext,c,s):!0};S.exports=w},36294:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){c<0?(s.blocked.none=!1,s.blocked.left=!0):c>0&&(s.blocked.none=!1,s.blocked.right=!0),s.position.x-=c,s.updateCenter(),s.bounce.x===0?s.velocity.x=0:s.velocity.x=-s.velocity.x*s.bounce.x};S.exports=w},67013:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){c<0?(s.blocked.none=!1,s.blocked.up=!0):c>0&&(s.blocked.none=!1,s.blocked.down=!0),s.position.y-=c,s.updateCenter(),s.bounce.y===0?s.velocity.y=0:s.velocity.y=-s.velocity.y*s.bounce.y};S.exports=w},40012:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(21329),y=s(53442),u=s(2483),h=function(l,n,o,f,r,d,p){var v=f.left,g=f.top,m=f.right,T=f.bottom,P=o.faceLeft||o.faceRight,M=o.faceTop||o.faceBottom;if(p||(P=!0,M=!0),!P&&!M)return!1;var b=0,R=0,A=0,D=1;if(n.deltaAbsX()>n.deltaAbsY()?A=-1:n.deltaAbsX()<n.deltaAbsY()&&(D=-1),n.deltaX()!==0&&n.deltaY()!==0&&P&&M&&(A=Math.min(Math.abs(n.position.x-m),Math.abs(n.right-v)),D=Math.min(Math.abs(n.position.y-T),Math.abs(n.bottom-g))),A<D){if(P&&(b=c(n,o,v,m,d,p),b!==0&&!u(f,n)))return!0;M&&(R=y(n,o,g,T,d,p))}else{if(M&&(R=y(n,o,g,T,d,p),R!==0&&!u(f,n)))return!0;P&&(b=c(n,o,v,m,d,p))}return b!==0||R!==0};S.exports=h},21329:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(36294),y=function(u,h,l,n,o,f){var r=0,d=h.faceLeft,p=h.faceRight,v=h.collideLeft,g=h.collideRight;return f||(d=!0,p=!0,v=!0,g=!0),u.deltaX()<0&&g&&u.checkCollision.left?p&&u.x<n&&(r=u.x-n,r<-o&&(r=0)):u.deltaX()>0&&v&&u.checkCollision.right&&d&&u.right>l&&(r=u.right-l,r>o&&(r=0)),r!==0&&(u.customSeparateX?u.overlapX=r:c(u,r)),r};S.exports=y},53442:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(67013),y=function(u,h,l,n,o,f){var r=0,d=h.faceTop,p=h.faceBottom,v=h.collideUp,g=h.collideDown;return f||(d=!0,p=!0,v=!0,g=!0),u.deltaY()<0&&g&&u.checkCollision.up?p&&u.y<n&&(r=u.y-n,r<-o&&(r=0)):u.deltaY()>0&&v&&u.checkCollision.down&&d&&u.bottom>l&&(r=u.bottom-l,r>o&&(r=0)),r!==0&&(u.customSeparateY?u.overlapY=r:c(u,r)),r};S.exports=y},2483:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return!(c.right<=s.left||c.bottom<=s.top||c.position.x>=s.right||c.position.y>=s.bottom)};S.exports=w},55173:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c={ProcessTileCallbacks:s(96602),ProcessTileSeparationX:s(36294),ProcessTileSeparationY:s(67013),SeparateTile:s(40012),TileCheckX:s(21329),TileCheckY:s(53442),TileIntersectsBody:s(2483)};S.exports=c},44563:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Arcade:s(27064),Matter:s(3875)}},68174:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(26099),u=new c({initialize:function(){this.boundsCenter=new y,this.centerDiff=new y},parseBody:function(h){if(h=h.hasOwnProperty("body")?h.body:h,!h.hasOwnProperty("bounds")||!h.hasOwnProperty("centerOfMass"))return!1;var l=this.boundsCenter,n=this.centerDiff,o=h.bounds.max.x-h.bounds.min.x,f=h.bounds.max.y-h.bounds.min.y,r=o*h.centerOfMass.x,d=f*h.centerOfMass.y;return l.set(o/2,f/2),n.set(r-l.x,d-l.y),!0},getTopLeft:function(h,l,n){if(l===void 0&&(l=0),n===void 0&&(n=0),this.parseBody(h)){var o=this.boundsCenter,f=this.centerDiff;return new y(l+o.x+f.x,n+o.y+f.y)}return!1},getTopCenter:function(h,l,n){if(l===void 0&&(l=0),n===void 0&&(n=0),this.parseBody(h)){var o=this.boundsCenter,f=this.centerDiff;return new y(l+f.x,n+o.y+f.y)}return!1},getTopRight:function(h,l,n){if(l===void 0&&(l=0),n===void 0&&(n=0),this.parseBody(h)){var o=this.boundsCenter,f=this.centerDiff;return new y(l-(o.x-f.x),n+o.y+f.y)}return!1},getLeftCenter:function(h,l,n){if(l===void 0&&(l=0),n===void 0&&(n=0),this.parseBody(h)){var o=this.boundsCenter,f=this.centerDiff;return new y(l+o.x+f.x,n+f.y)}return!1},getCenter:function(h,l,n){if(l===void 0&&(l=0),n===void 0&&(n=0),this.parseBody(h)){var o=this.centerDiff;return new y(l+o.x,n+o.y)}return!1},getRightCenter:function(h,l,n){if(l===void 0&&(l=0),n===void 0&&(n=0),this.parseBody(h)){var o=this.boundsCenter,f=this.centerDiff;return new y(l-(o.x-f.x),n+f.y)}return!1},getBottomLeft:function(h,l,n){if(l===void 0&&(l=0),n===void 0&&(n=0),this.parseBody(h)){var o=this.boundsCenter,f=this.centerDiff;return new y(l+o.x+f.x,n-(o.y-f.y))}return!1},getBottomCenter:function(h,l,n){if(l===void 0&&(l=0),n===void 0&&(n=0),this.parseBody(h)){var o=this.boundsCenter,f=this.centerDiff;return new y(l+f.x,n-(o.y-f.y))}return!1},getBottomRight:function(h,l,n){if(l===void 0&&(l=0),n===void 0&&(n=0),this.parseBody(h)){var o=this.boundsCenter,f=this.centerDiff;return new y(l-(o.x-f.x),n-(o.y-f.y))}return!1}});S.exports=u},19933:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(6790);c.Body=s(22562),c.Composite=s(69351),c.World=s(4372),c.Collision=s(52284),c.Detector=s(81388),c.Pairs=s(99561),c.Pair=s(4506),c.Query=s(73296),c.Resolver=s(66272),c.Constraint=s(48140),c.Common=s(53402),c.Engine=s(48413),c.Events=s(35810),c.Sleeping=s(53614),c.Plugin=s(73832),c.Bodies=s(66280),c.Composites=s(74116),c.Axes=s(66615),c.Bounds=s(15647),c.Svg=s(74058),c.Vector=s(31725),c.Vertices=s(41598),c.World.add=c.Composite.add,c.World.remove=c.Composite.remove,c.World.addComposite=c.Composite.addComposite,c.World.addBody=c.Composite.addBody,c.World.addConstraint=c.Composite.addConstraint,c.World.clear=c.Composite.clear,S.exports=c},28137:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66280),y=s(83419),u=s(74116),h=s(48140),l=s(74058),n=s(75803),o=s(23181),f=s(34803),r=s(73834),d=s(19496),p=s(85791),v=s(98713),g=s(41598),m=new y({initialize:function(P){this.world=P,this.scene=P.scene,this.sys=P.scene.sys},rectangle:function(T,P,M,b,R){var A=c.rectangle(T,P,M,b,R);return this.world.add(A),A},trapezoid:function(T,P,M,b,R,A){var D=c.trapezoid(T,P,M,b,R,A);return this.world.add(D),D},circle:function(T,P,M,b,R){var A=c.circle(T,P,M,b,R);return this.world.add(A),A},polygon:function(T,P,M,b,R){var A=c.polygon(T,P,M,b,R);return this.world.add(A),A},fromVertices:function(T,P,M,b,R,A,D){typeof M=="string"&&(M=g.fromPath(M));var G=c.fromVertices(T,P,M,b,R,A,D);return this.world.add(G),G},fromPhysicsEditor:function(T,P,M,b,R){R===void 0&&(R=!0);var A=d.parseBody(T,P,M,b);return R&&!this.world.has(A)&&this.world.add(A),A},fromSVG:function(T,P,M,b,R,A){b===void 0&&(b=1),R===void 0&&(R={}),A===void 0&&(A=!0);for(var D=M.getElementsByTagName("path"),G=[],F=0;F<D.length;F++){var B=l.pathToVertices(D[F],30);b!==1&&g.scale(B,b,b),G.push(B)}var N=c.fromVertices(T,P,G,R);return A&&this.world.add(N),N},fromJSON:function(T,P,M,b,R){b===void 0&&(b={}),R===void 0&&(R=!0);var A=p.parseBody(T,P,M,b);return A&&R&&this.world.add(A),A},imageStack:function(T,P,M,b,R,A,D,G,F){D===void 0&&(D=0),G===void 0&&(G=0),F===void 0&&(F={});var B=this.world,N=this.sys.displayList;F.addToWorld=!1;var z=u.stack(M,b,R,A,D,G,function($,Q){var Z=new o(B,$,Q,T,P,F);return N.add(Z),Z.body});return B.add(z),z},stack:function(T,P,M,b,R,A,D){var G=u.stack(T,P,M,b,R,A,D);return this.world.add(G),G},pyramid:function(T,P,M,b,R,A,D){var G=u.pyramid(T,P,M,b,R,A,D);return this.world.add(G),G},chain:function(T,P,M,b,R,A){return u.chain(T,P,M,b,R,A)},mesh:function(T,P,M,b,R){return u.mesh(T,P,M,b,R)},newtonsCradle:function(T,P,M,b,R){var A=u.newtonsCradle(T,P,M,b,R);return this.world.add(A),A},car:function(T,P,M,b,R){var A=u.car(T,P,M,b,R);return this.world.add(A),A},softBody:function(T,P,M,b,R,A,D,G,F,B){var N=u.softBody(T,P,M,b,R,A,D,G,F,B);return this.world.add(N),N},joint:function(T,P,M,b,R){return this.constraint(T,P,M,b,R)},spring:function(T,P,M,b,R){return this.constraint(T,P,M,b,R)},constraint:function(T,P,M,b,R){b===void 0&&(b=1),R===void 0&&(R={}),R.bodyA=T.type==="body"?T:T.body,R.bodyB=P.type==="body"?P:P.body,isNaN(M)||(R.length=M),R.stiffness=b;var A=h.create(R);return this.world.add(A),A},worldConstraint:function(T,P,M,b){M===void 0&&(M=1),b===void 0&&(b={}),b.bodyB=T.type==="body"?T:T.body,isNaN(P)||(b.length=P),b.stiffness=M;var R=h.create(b);return this.world.add(R),R},mouseSpring:function(T){return this.pointerConstraint(T)},pointerConstraint:function(T){T===void 0&&(T={}),T.hasOwnProperty("render")||(T.render={visible:!1});var P=new v(this.scene,this.world,T);return this.world.add(P.constraint),P},image:function(T,P,M,b,R){var A=new o(this.world,T,P,M,b,R);return this.sys.displayList.add(A),A},tileBody:function(T,P){return new r(this.world,T,P)},sprite:function(T,P,M,b,R){var A=new f(this.world,T,P,M,b,R);return this.sys.displayList.add(A),this.sys.updateList.add(A),A},gameObject:function(T,P,M){return n(this.world,T,P,M)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});S.exports=m},75803:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(31884),y=s(95540),u=s(26099);function h(n){return!!n.get&&typeof n.get=="function"||!!n.set&&typeof n.set=="function"}var l=function(n,o,f,r){f===void 0&&(f={}),r===void 0&&(r=!0);var d=o.x,p=o.y;o.body={temp:!0,position:{x:d,y:p}};var v=[c.Bounce,c.Collision,c.Force,c.Friction,c.Gravity,c.Mass,c.Sensor,c.SetBody,c.Sleep,c.Static,c.Transform,c.Velocity];if(v.forEach(function(m){for(var T in m)h(m[T])?Object.defineProperty(o,T,{get:m[T].get,set:m[T].set}):Object.defineProperty(o,T,{value:m[T]})}),o.world=n,o._tempVec2=new u(d,p),f.hasOwnProperty("type")&&f.type==="body")o.setExistingBody(f,r);else{var g=y(f,"shape",null);g||(g="rectangle"),f.addToWorld=r,o.setBody(g,f)}return o};S.exports=l},23181:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(31884),u=s(95643),h=s(95540),l=s(88571),n=s(72699),o=s(26099),f=new c({Extends:l,Mixins:[y.Bounce,y.Collision,y.Force,y.Friction,y.Gravity,y.Mass,y.Sensor,y.SetBody,y.Sleep,y.Static,y.Transform,y.Velocity,n],initialize:function(d,p,v,g,m,T){u.call(this,d.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(g,m),this.setSizeToFrame(),this.setOrigin(),this.world=d,this._tempVec2=new o(p,v);var P=h(T,"shape",null);P?this.setBody(P,T):this.setRectangle(this.width,this.height,T),this.setPosition(p,v),this.initPipeline(),this.initPostPipeline(!0)}});S.exports=f},42045:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(60461),y=s(66615),u=s(66280),h=s(22562),l=s(68174),n=s(15647),o=s(83419),f=s(52284),r=s(53402),d=s(69351),p=s(74116),v=s(48140),g=s(81388),m=s(20339),T=s(28137),P=s(95540),M=s(35154),b=s(46975),R=s(4506),A=s(99561),D=s(37277),G=s(73296),F=s(66272),B=s(44594),N=s(74058),z=s(31725),$=s(41598),Q=s(68243);r.setDecomp(s(55973));var Z=new o({initialize:function(H){this.scene=H,this.systems=H.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=h,this.composite=d,this.collision=f,this.detector=g,this.pair=R,this.pairs=A,this.query=G,this.resolver=F,this.constraint=v,this.bodies=u,this.composites=p,this.axes=y,this.bounds=n,this.svg=N,this.vector=z,this.vertices=$,this.verts=$,this._tempVec2=z.create(),F._restingThresh=M(this.config,"restingThresh",4),F._restingThreshTangent=M(this.config,"restingThreshTangent",6),F._positionDampen=M(this.config,"positionDampen",.9),F._positionWarming=M(this.config,"positionWarming",.8),F._frictionNormalMultiplier=M(this.config,"frictionNormalMultiplier",5),H.sys.events.once(B.BOOT,this.boot,this),H.sys.events.on(B.START,this.start,this)},boot:function(){this.world=new Q(this.scene,this.config),this.add=new T(this.world),this.bodyBounds=new l,this.systems.events.once(B.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new Q(this.scene,this.config),this.add=new T(this.world));var tt=this.systems.events;tt.on(B.UPDATE,this.world.update,this.world),tt.on(B.POST_UPDATE,this.world.postUpdate,this.world),tt.once(B.SHUTDOWN,this.shutdown,this)},getConfig:function(){var tt=this.systems.game.config.physics,H=this.systems.settings.physics,J=b(P(H,"matter",{}),P(tt,"matter",{}));return J},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(tt,H){this.world.step(tt,H)},containsPoint:function(tt,H,J){tt=this.getMatterBodies(tt);var Y=z.create(H,J),_=G.point(tt,Y);return _.length>0},intersectPoint:function(tt,H,J){J=this.getMatterBodies(J);var Y=z.create(tt,H),_=[],U=G.point(J,Y);return U.forEach(function(et){_.indexOf(et)===-1&&_.push(et)}),_},intersectRect:function(tt,H,J,Y,_,U){_===void 0&&(_=!1),U=this.getMatterBodies(U);var et={min:{x:tt,y:H},max:{x:tt+J,y:H+Y}},nt=[],rt=G.region(U,et,_);return rt.forEach(function(ot){nt.indexOf(ot)===-1&&nt.push(ot)}),nt},intersectRay:function(tt,H,J,Y,_,U){_===void 0&&(_=1),U=this.getMatterBodies(U);for(var et=[],nt=G.ray(U,z.create(tt,H),z.create(J,Y),_),rt=0;rt<nt.length;rt++)et.push(nt[rt].body);return et},intersectBody:function(tt,H){H=this.getMatterBodies(H);for(var J=[],Y=G.collides(tt,H),_=0;_<Y.length;_++){var U=Y[_];U.bodyA===tt?J.push(U.bodyB):J.push(U.bodyA)}return J},overlap:function(tt,H,J,Y,_){J===void 0&&(J=null),Y===void 0&&(Y=null),_===void 0&&(_=J),Array.isArray(tt)||(tt=[tt]),tt=this.getMatterBodies(tt),H=this.getMatterBodies(H);for(var U=!1,et=0;et<tt.length;et++)for(var nt=tt[et],rt=G.collides(nt,H),ot=0;ot<rt.length;ot++){var dt=rt[ot],vt=dt.bodyA.id===nt.id?dt.bodyB:dt.bodyA;if(!Y||Y.call(_,nt,vt,dt)){if(U=!0,J)J.call(_,nt,vt,dt);else if(!Y)return!0}}return U},setCollisionCategory:function(tt,H){return tt=this.getMatterBodies(tt),tt.forEach(function(J){J.collisionFilter.category=H}),this},setCollisionGroup:function(tt,H){return tt=this.getMatterBodies(tt),tt.forEach(function(J){J.collisionFilter.group=H}),this},setCollidesWith:function(tt,H){tt=this.getMatterBodies(tt);var J=0;if(!Array.isArray(H))J=H;else for(var Y=0;Y<H.length;Y++)J|=H[Y];return tt.forEach(function(_){_.collisionFilter.mask=J}),this},getMatterBodies:function(tt){if(!tt)return this.world.getAllBodies();Array.isArray(tt)||(tt=[tt]);for(var H=[],J=0;J<tt.length;J++){var Y=tt[J].hasOwnProperty("body")?tt[J].body:tt[J];H.push(Y)}return H},setVelocity:function(tt,H,J){tt=this.getMatterBodies(tt);var Y=this._tempVec2;return Y.x=H,Y.y=J,tt.forEach(function(_){h.setVelocity(_,Y)}),this},setVelocityX:function(tt,H){tt=this.getMatterBodies(tt);var J=this._tempVec2;return J.x=H,tt.forEach(function(Y){J.y=Y.velocity.y,h.setVelocity(Y,J)}),this},setVelocityY:function(tt,H){tt=this.getMatterBodies(tt);var J=this._tempVec2;return J.y=H,tt.forEach(function(Y){J.x=Y.velocity.x,h.setVelocity(Y,J)}),this},setAngularVelocity:function(tt,H){return tt=this.getMatterBodies(tt),tt.forEach(function(J){h.setAngularVelocity(J,H)}),this},applyForce:function(tt,H){tt=this.getMatterBodies(tt);var J=this._tempVec2;return tt.forEach(function(Y){J.x=Y.position.x,J.y=Y.position.y,h.applyForce(Y,J,H)}),this},applyForceFromPosition:function(tt,H,J,Y){tt=this.getMatterBodies(tt);var _=this._tempVec2;return tt.forEach(function(U){Y===void 0&&(Y=U.angle),_.x=J*Math.cos(Y),_.y=J*Math.sin(Y),h.applyForce(U,H,_)}),this},applyForceFromAngle:function(tt,H,J){tt=this.getMatterBodies(tt);var Y=this._tempVec2;return tt.forEach(function(_){J===void 0&&(J=_.angle),Y.x=H*Math.cos(J),Y.y=H*Math.sin(J),h.applyForce(_,{x:_.position.x,y:_.position.y},Y)}),this},getConstraintLength:function(tt){var H=tt.pointA.x,J=tt.pointA.y,Y=tt.pointB.x,_=tt.pointB.y;return tt.bodyA&&(H+=tt.bodyA.position.x,J+=tt.bodyA.position.y),tt.bodyB&&(Y+=tt.bodyB.position.x,_+=tt.bodyB.position.y),m(H,J,Y,_)},alignBody:function(tt,H,J,Y){tt=tt.hasOwnProperty("body")?tt.body:tt;var _;switch(Y){case c.TOP_LEFT:case c.LEFT_TOP:_=this.bodyBounds.getTopLeft(tt,H,J);break;case c.TOP_CENTER:_=this.bodyBounds.getTopCenter(tt,H,J);break;case c.TOP_RIGHT:case c.RIGHT_TOP:_=this.bodyBounds.getTopRight(tt,H,J);break;case c.LEFT_CENTER:_=this.bodyBounds.getLeftCenter(tt,H,J);break;case c.CENTER:_=this.bodyBounds.getCenter(tt,H,J);break;case c.RIGHT_CENTER:_=this.bodyBounds.getRightCenter(tt,H,J);break;case c.LEFT_BOTTOM:case c.BOTTOM_LEFT:_=this.bodyBounds.getBottomLeft(tt,H,J);break;case c.BOTTOM_CENTER:_=this.bodyBounds.getBottomCenter(tt,H,J);break;case c.BOTTOM_RIGHT:case c.RIGHT_BOTTOM:_=this.bodyBounds.getBottomRight(tt,H,J);break}return _&&h.setPosition(tt,_),this},shutdown:function(){var tt=this.systems.events;this.world&&(tt.off(B.UPDATE,this.world.update,this.world),tt.off(B.POST_UPDATE,this.world.postUpdate,this.world)),tt.off(B.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(B.START,this.start,this),this.scene=null,this.systems=null}});D.register("MatterPhysics",Z,"matterPhysics"),S.exports=Z},34803:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(9674),y=s(83419),u=s(31884),h=s(95643),l=s(95540),n=s(72699),o=s(68287),f=s(26099),r=new y({Extends:o,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,n],initialize:function(p,v,g,m,T,P){h.call(this,p.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new c(this),this.setTexture(m,T),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new f(v,g);var M=l(P,"shape",null);M?this.setBody(M,P):this.setRectangle(this.width,this.height,P),this.setPosition(v,g),this.initPipeline(),this.initPostPipeline(!0)}});S.exports=r},73834:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66280),y=s(22562),u=s(83419),h=s(31884),l=s(62644),n=s(50792),o=s(95540),f=s(97022),r=s(41598),d=new u({Extends:n,Mixins:[h.Bounce,h.Collision,h.Friction,h.Gravity,h.Mass,h.Sensor,h.Sleep,h.Static],initialize:function(v,g,m){n.call(this),this.tile=g,this.world=v,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var T=o(m,"body",null),P=o(m,"addToWorld",!0);if(T)this.setBody(T,P);else{var M=g.getCollisionGroup(),b=o(M,"objects",[]);b.length>0?this.setFromTileCollision(m):this.setFromTileRectangle(m)}if(g.flipX||g.flipY){var R={x:g.getCenterX(),y:g.getCenterY()},A=g.flipX?-1:1,D=g.flipY?-1:1;y.scale(T,A,D,R)}},setFromTileRectangle:function(p){p===void 0&&(p={}),f(p,"isStatic")||(p.isStatic=!0),f(p,"addToWorld")||(p.addToWorld=!0);var v=this.tile.getBounds(),g=v.x+v.width/2,m=v.y+v.height/2,T=c.rectangle(g,m,v.width,v.height,p);return this.setBody(T,p.addToWorld),this},setFromTileCollision:function(p){p===void 0&&(p={}),f(p,"isStatic")||(p.isStatic=!0),f(p,"addToWorld")||(p.addToWorld=!0);for(var v=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,m=this.tile.getLeft(),T=this.tile.getTop(),P=this.tile.getCollisionGroup(),M=o(P,"objects",[]),b=[],R=0;R<M.length;R++){var A=M[R],D=m+A.x*v,G=T+A.y*g,F=A.width*v,B=A.height*g,N=null;if(A.rectangle)N=c.rectangle(D+F/2,G+B/2,F,B,p);else if(A.ellipse)N=c.circle(D+F/2,G+B/2,F/2,p);else if(A.polygon||A.polyline){var z=A.polygon?A.polygon:A.polyline,$=z.map(function(H){return{x:H.x*v,y:H.y*g}}),Q=r.create($),Z=r.centre(Q);D+=Z.x,G+=Z.y,N=c.fromVertices(D,G,Q,p)}N&&b.push(N)}if(b.length===1)this.setBody(b[0],p.addToWorld);else if(b.length>1){var tt=l(p);tt.parts=b,this.setBody(y.create(tt),tt.addToWorld)}return this},setBody:function(p,v){return v===void 0&&(v=!0),this.body&&this.removeBody(),this.body=p,this.body.gameObject=this,v&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});S.exports=d},19496:(S,w,s)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66280),y=s(22562),u=s(53402),h=s(95540),l=s(41598),n={parseBody:function(o,f,r,d){d===void 0&&(d={});for(var p=h(r,"fixtures",[]),v=[],g=0;g<p.length;g++)for(var m=this.parseFixture(p[g]),T=0;T<m.length;T++)v.push(m[T]);var P=u.clone(r,!0);u.extend(P,d,!0),delete P.fixtures,delete P.type;var M=y.create(P);return y.setParts(M,v),y.setPosition(M,{x:o,y:f}),M},parseFixture:function(o){var f=u.extend({},!1,o);delete f.circle,delete f.vertices;var r;if(o.circle){var d=h(o.circle,"x"),p=h(o.circle,"y"),v=h(o.circle,"radius");r=[c.circle(d,p,v,f)]}else o.vertices&&(r=this.parseVertices(o.vertices,f));return r},parseVertices:function(o,f){f===void 0&&(f={});for(var r=[],d=0;d<o.length;d++)l.clockwiseSort(o[d]),r.push(y.create(u.extend({position:l.centre(o[d]),vertices:o[d]},f)));return c.flagCoincidentParts(r)}};S.exports=n},85791:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66280),y=s(22562),u={parseBody:function(h,l,n,o){o===void 0&&(o={});var f,r=n.vertices;if(r.length===1)o.vertices=r[0],f=y.create(o),c.flagCoincidentParts(f.parts);else{for(var d=[],p=0;p<r.length;p++){var v=y.create({vertices:r[p]});d.push(v)}c.flagCoincidentParts(d),o.parts=d,f=y.create(o)}return f.label=n.label,y.setPosition(f,{x:h,y:l}),f}};S.exports=u},98713:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(15647),y=s(83419),u=s(69351),h=s(48140),l=s(81388),n=s(1121),o=s(8214),f=s(46975),r=s(53614),d=s(26099),p=s(41598),v=new y({initialize:function(m,T,P){P===void 0&&(P={});var M={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=m,this.world=T,this.camera=null,this.pointer=null,this.active=!0,this.position=new d,this.body=null,this.part=null,this.constraint=h.create(f(P,M)),this.world.on(n.BEFORE_UPDATE,this.update,this),m.sys.input.on(o.POINTER_DOWN,this.onDown,this),m.sys.input.on(o.POINTER_UP,this.onUp,this)},onDown:function(g){this.pointer||(this.pointer=g,this.camera=g.camera)},onUp:function(g){g===this.pointer&&(this.pointer=null)},getBody:function(g){var m=this.position,T=this.constraint;this.camera.getWorldPoint(g.x,g.y,m);for(var P=u.allBodies(this.world.localWorld),M=0;M<P.length;M++){var b=P[M];if(!b.ignorePointer&&c.contains(b.bounds,m)&&l.canCollide(b.collisionFilter,T.collisionFilter)&&this.hitTestBody(b,m))return this.world.emit(n.DRAG_START,b,this.part,this),!0}return!1},hitTestBody:function(g,m){for(var T=this.constraint,P=g.parts.length,M=P>1?1:0,b=M;b<P;b++){var R=g.parts[b];if(p.contains(R.vertices,m))return T.pointA=m,T.pointB={x:m.x-g.position.x,y:m.y-g.position.y},T.bodyB=g,T.angleB=g.angle,r.set(g,!1),this.part=R,this.body=g,!0}return!1},update:function(){var g=this.pointer,m=this.body;if(!this.active||!g){m&&this.stopDrag();return}if(!g.isDown&&m){this.stopDrag();return}else if(g.isDown){if(!this.camera||!m&&!this.getBody(g))return;m=this.body;var T=this.position,P=this.constraint;this.camera.getWorldPoint(g.x,g.y,T),P.pointA.x=T.x,P.pointA.y=T.y,r.set(m,!1),this.world.emit(n.DRAG,m,this)}},stopDrag:function(){var g=this.body,m=this.constraint;m.bodyB=null,m.pointB=null,this.pointer=null,this.body=null,this.part=null,g&&this.world.emit(n.DRAG_END,g,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(n.BEFORE_UPDATE,this.update),this.scene.sys.input.off(o.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(o.POINTER_UP,this.onUp,this)}});S.exports=v},68243:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66280),y=s(22562),u=s(83419),h=s(53402),l=s(69351),n=s(48413),o=s(50792),f=s(1121),r=s(95540),d=s(35154),p=s(22562),v=s(35810),g=s(73834),m=s(4372),T=s(13037),P=s(31725),M=new u({Extends:o,initialize:function(R,A){o.call(this),this.scene=R,this.engine=n.create(A),this.localWorld=this.engine.world;var D=d(A,"gravity",null);D?this.setGravity(D.x,D.y,D.scale):D===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=d(A,"enabled",!0),this.getDelta=d(A,"getDelta",this.update60Hz);var G=r(A,"runner",{}),F=r(G,"fps",!1);F&&(G.delta=1e3/r(G,"fps",60)),this.runner=T.create(G),this.autoUpdate=d(A,"autoUpdate",!0);var B=d(A,"debug",!1);if(this.drawDebug=typeof B=="object"?!0:B,this.debugGraphic,this.debugConfig={showAxes:r(B,"showAxes",!1),showAngleIndicator:r(B,"showAngleIndicator",!1),angleColor:r(B,"angleColor",15208787),showBroadphase:r(B,"showBroadphase",!1),broadphaseColor:r(B,"broadphaseColor",16757760),showBounds:r(B,"showBounds",!1),boundsColor:r(B,"boundsColor",16777215),showVelocity:r(B,"showVelocity",!1),velocityColor:r(B,"velocityColor",44783),showCollisions:r(B,"showCollisions",!1),collisionColor:r(B,"collisionColor",16094476),showSeparations:r(B,"showSeparations",!1),separationColor:r(B,"separationColor",16753920),showBody:r(B,"showBody",!0),showStaticBody:r(B,"showStaticBody",!0),showInternalEdges:r(B,"showInternalEdges",!1),renderFill:r(B,"renderFill",!1),renderLine:r(B,"renderLine",!0),fillColor:r(B,"fillColor",1075465),fillOpacity:r(B,"fillOpacity",1),lineColor:r(B,"lineColor",2678297),lineOpacity:r(B,"lineOpacity",1),lineThickness:r(B,"lineThickness",1),staticFillColor:r(B,"staticFillColor",857979),staticLineColor:r(B,"staticLineColor",1255396),showSleeping:r(B,"showSleeping",!1),staticBodySleepOpacity:r(B,"staticBodySleepOpacity",.7),sleepFillColor:r(B,"sleepFillColor",4605510),sleepLineColor:r(B,"sleepLineColor",10066585),showSensors:r(B,"showSensors",!0),sensorFillColor:r(B,"sensorFillColor",857979),sensorLineColor:r(B,"sensorLineColor",1255396),showPositions:r(B,"showPositions",!0),positionSize:r(B,"positionSize",4),positionColor:r(B,"positionColor",14697178),showJoint:r(B,"showJoint",!0),jointColor:r(B,"jointColor",14737474),jointLineOpacity:r(B,"jointLineOpacity",1),jointLineThickness:r(B,"jointLineThickness",2),pinSize:r(B,"pinSize",4),pinColor:r(B,"pinColor",4382944),springColor:r(B,"springColor",14697184),anchorColor:r(B,"anchorColor",15724527),anchorSize:r(B,"anchorSize",4),showConvexHulls:r(B,"showConvexHulls",!1),hullColor:r(B,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),r(A,"setBounds",!1)){var N=A.setBounds;if(typeof N=="boolean")this.setBounds();else{var z=r(N,"x",0),$=r(N,"y",0),Q=r(N,"width",R.sys.scale.width),Z=r(N,"height",R.sys.scale.height),tt=r(N,"thickness",64),H=r(N,"left",!0),J=r(N,"right",!0),Y=r(N,"top",!0),_=r(N,"bottom",!0);this.setBounds(z,$,Q,Z,tt,H,J,Y,_)}}},setCompositeRenderStyle:function(b){var R=b.bodies,A=b.constraints,D=b.composites,G,F,B;for(G=0;G<R.length;G++)F=R[G],B=F.render,this.setBodyRenderStyle(F,B.lineColor,B.lineOpacity,B.lineThickness,B.fillColor,B.fillOpacity);for(G=0;G<A.length;G++)F=A[G],B=F.render,this.setConstraintRenderStyle(F,B.lineColor,B.lineOpacity,B.lineThickness,B.pinSize,B.anchorColor,B.anchorSize);for(G=0;G<D.length;G++)F=D[G],this.setCompositeRenderStyle(F);return this},setBodyRenderStyle:function(b,R,A,D,G,F){var B=b.render,N=this.debugConfig;return B?(R==null&&(R=b.isStatic?N.staticLineColor:N.lineColor),A==null&&(A=N.lineOpacity),D==null&&(D=N.lineThickness),G==null&&(G=b.isStatic?N.staticFillColor:N.fillColor),F==null&&(F=N.fillOpacity),R!==!1&&(B.lineColor=R),A!==!1&&(B.lineOpacity=A),D!==!1&&(B.lineThickness=D),G!==!1&&(B.fillColor=G),F!==!1&&(B.fillOpacity=F),this):this},setConstraintRenderStyle:function(b,R,A,D,G,F,B){var N=b.render,z=this.debugConfig;if(!N)return this;if(R==null){var $=N.type;$==="line"?R=z.jointColor:$==="pin"?R=z.pinColor:$==="spring"&&(R=z.springColor)}return A==null&&(A=z.jointLineOpacity),D==null&&(D=z.jointLineThickness),G==null&&(G=z.pinSize),F==null&&(F=z.anchorColor),B==null&&(B=z.anchorSize),R!==!1&&(N.lineColor=R),A!==!1&&(N.lineOpacity=A),D!==!1&&(N.lineThickness=D),G!==!1&&(N.pinSize=G),F!==!1&&(N.anchorColor=F),B!==!1&&(N.anchorSize=B),this},setEventsProxy:function(){var b=this,R=this.engine,A=this.localWorld;this.drawDebug&&(v.on(A,"compositeModified",function(D){b.setCompositeRenderStyle(D)}),v.on(A,"beforeAdd",function(D){for(var G=[].concat(D.object),F=0;F<G.length;F++){var B=G[F],N=B.render;B.type==="body"?b.setBodyRenderStyle(B,N.lineColor,N.lineOpacity,N.lineThickness,N.fillColor,N.fillOpacity):B.type==="composite"?b.setCompositeRenderStyle(B):B.type==="constraint"&&b.setConstraintRenderStyle(B,N.lineColor,N.lineOpacity,N.lineThickness,N.pinSize,N.anchorColor,N.anchorSize)}})),v.on(A,"beforeAdd",function(D){b.emit(f.BEFORE_ADD,D)}),v.on(A,"afterAdd",function(D){b.emit(f.AFTER_ADD,D)}),v.on(A,"beforeRemove",function(D){b.emit(f.BEFORE_REMOVE,D)}),v.on(A,"afterRemove",function(D){b.emit(f.AFTER_REMOVE,D)}),v.on(R,"beforeUpdate",function(D){b.emit(f.BEFORE_UPDATE,D)}),v.on(R,"afterUpdate",function(D){b.emit(f.AFTER_UPDATE,D)}),v.on(R,"collisionStart",function(D){var G=D.pairs,F,B;G.length>0&&G.map(function(N){F=N.bodyA,B=N.bodyB,F.gameObject&&F.gameObject.emit("collide",F,B,N),B.gameObject&&B.gameObject.emit("collide",B,F,N),v.trigger(F,"onCollide",{pair:N}),v.trigger(B,"onCollide",{pair:N}),F.onCollideCallback&&F.onCollideCallback(N),B.onCollideCallback&&B.onCollideCallback(N),F.onCollideWith[B.id]&&F.onCollideWith[B.id](B,N),B.onCollideWith[F.id]&&B.onCollideWith[F.id](F,N)}),b.emit(f.COLLISION_START,D,F,B)}),v.on(R,"collisionActive",function(D){var G=D.pairs,F,B;G.length>0&&G.map(function(N){F=N.bodyA,B=N.bodyB,F.gameObject&&F.gameObject.emit("collideActive",F,B,N),B.gameObject&&B.gameObject.emit("collideActive",B,F,N),v.trigger(F,"onCollideActive",{pair:N}),v.trigger(B,"onCollideActive",{pair:N}),F.onCollideActiveCallback&&F.onCollideActiveCallback(N),B.onCollideActiveCallback&&B.onCollideActiveCallback(N)}),b.emit(f.COLLISION_ACTIVE,D,F,B)}),v.on(R,"collisionEnd",function(D){var G=D.pairs,F,B;G.length>0&&G.map(function(N){F=N.bodyA,B=N.bodyB,F.gameObject&&F.gameObject.emit("collideEnd",F,B,N),B.gameObject&&B.gameObject.emit("collideEnd",B,F,N),v.trigger(F,"onCollideEnd",{pair:N}),v.trigger(B,"onCollideEnd",{pair:N}),F.onCollideEndCallback&&F.onCollideEndCallback(N),B.onCollideEndCallback&&B.onCollideEndCallback(N)}),b.emit(f.COLLISION_END,D,F,B)})},setBounds:function(b,R,A,D,G,F,B,N,z){return b===void 0&&(b=0),R===void 0&&(R=0),A===void 0&&(A=this.scene.sys.scale.width),D===void 0&&(D=this.scene.sys.scale.height),G===void 0&&(G=64),F===void 0&&(F=!0),B===void 0&&(B=!0),N===void 0&&(N=!0),z===void 0&&(z=!0),this.updateWall(F,"left",b-G,R-G,G,D+G*2),this.updateWall(B,"right",b+A,R-G,G,D+G*2),this.updateWall(N,"top",b,R-G,A,G),this.updateWall(z,"bottom",b,R+D,A,G),this},updateWall:function(b,R,A,D,G,F){var B=this.walls[R];b?(B&&m.remove(this.localWorld,B),A+=G/2,D+=F/2,this.walls[R]=this.create(A,D,G,F,{isStatic:!0,friction:0,frictionStatic:0})):(B&&m.remove(this.localWorld,B),this.walls[R]=null)},createDebugGraphic:function(){var b=this.scene.sys.add.graphics({x:0,y:0});return b.setDepth(Number.MAX_VALUE),this.debugGraphic=b,this.drawDebug=!0,b},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(b,R,A){return b===void 0&&(b=0),R===void 0&&(R=1),A===void 0&&(A=.001),this.localWorld.gravity.x=b,this.localWorld.gravity.y=R,this.localWorld.gravity.scale=A,this},create:function(b,R,A,D,G){var F=c.rectangle(b,R,A,D,G);return m.add(this.localWorld,F),F},add:function(b){return m.add(this.localWorld,b),this},remove:function(b,R){Array.isArray(b)||(b=[b]);for(var A=0;A<b.length;A++){var D=b[A],G=D.body?D.body:D;l.remove(this.localWorld,G,R)}return this},removeConstraint:function(b,R){return l.remove(this.localWorld,b,R),this},convertTilemapLayer:function(b,R){var A=b.layer,D=b.getTilesWithin(0,0,A.width,A.height,{isColliding:!0});return this.convertTiles(D,R),this},convertTiles:function(b,R){if(b.length===0)return this;for(var A=0;A<b.length;A++)new g(this,b[A],R);return this},nextGroup:function(b){return p.nextGroup(b)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(f.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=h.now(),this.emit(f.RESUME),this},update:function(b){if(!(!this.enabled||!this.autoUpdate)){var R=this.engine,A=this.runner,D=h.now(),G=A.delta,F=0,B=b-A.timeLastTick;if((!B||!A.timeLastTick||B>Math.max(T._maxFrameDelta,A.maxFrameTime))&&(B=A.frameDelta||T._frameDeltaFallback),A.frameDeltaSmoothing){A.frameDeltaHistory.push(B),A.frameDeltaHistory=A.frameDeltaHistory.slice(-A.frameDeltaHistorySize);var N=A.frameDeltaHistory.slice(0).sort(),z=A.frameDeltaHistory.slice(N.length*T._smoothingLowerBound,N.length*T._smoothingUpperBound),$=T._mean(z);B=$||B}A.frameDeltaSnapping&&(B=1e3/Math.round(1e3/B)),A.frameDelta=B,A.timeLastTick=b,A.timeBuffer+=A.frameDelta,A.timeBuffer=h.clamp(A.timeBuffer,0,A.frameDelta+G*T._timeBufferMargin),A.lastUpdatesDeferred=0;for(var Q=A.maxUpdates||Math.ceil(A.maxFrameTime/G),Z=h.now();G>0&&A.timeBuffer>=G*T._timeBufferMargin;){n.update(R,G),A.timeBuffer-=G,F+=1;var tt=h.now()-D,H=h.now()-Z,J=tt+T._elapsedNextEstimate*H/F;if(F>=Q||J>A.maxFrameTime){A.lastUpdatesDeferred=Math.round(Math.max(0,A.timeBuffer/G-T._timeBufferMargin));break}}}},step:function(b){n.update(this.engine,b)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(b){var R=b.hasOwnProperty("body")?b.body:b;return l.get(this.localWorld,R.id,R.type)!==null},getAllBodies:function(){return l.allBodies(this.localWorld)},getAllConstraints:function(){return l.allConstraints(this.localWorld)},getAllComposites:function(){return l.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var b=this.debugConfig,R=this.engine,A=this.debugGraphic,D=l.allBodies(this.localWorld);this.debugGraphic.clear(),b.showBroadphase&&R.broadphase.controller&&this.renderGrid(R.broadphase,A,b.broadphaseColor,.5),b.showBounds&&this.renderBodyBounds(D,A,b.boundsColor,.5),(b.showBody||b.showStaticBody)&&this.renderBodies(D),b.showJoint&&this.renderJoints(),(b.showAxes||b.showAngleIndicator)&&this.renderBodyAxes(D,A,b.showAxes,b.angleColor,.5),b.showVelocity&&this.renderBodyVelocity(D,A,b.velocityColor,1,2),b.showSeparations&&this.renderSeparations(R.pairs.list,A,b.separationColor),b.showCollisions&&this.renderCollisions(R.pairs.list,A,b.collisionColor)}},renderGrid:function(b,R,A,D){R.lineStyle(1,A,D);for(var G=h.keys(b.buckets),F=0;F<G.length;F++){var B=G[F];if(!(b.buckets[B].length<2)){var N=B.split(/C|R/);R.strokeRect(parseInt(N[1],10)*b.bucketWidth,parseInt(N[2],10)*b.bucketHeight,b.bucketWidth,b.bucketHeight)}}return this},renderSeparations:function(b,R,A){R.lineStyle(1,A,1);for(var D=0;D<b.length;D++){var G=b[D];if(G.isActive){var F=G.collision,B=F.bodyA,N=F.bodyB,z=B.position,$=N.position,Q=F.penetration,Z=!B.isStatic&&!N.isStatic?4:1;N.isStatic&&(Z=0),R.lineBetween($.x,$.y,$.x-Q.x*Z,$.y-Q.y*Z),Z=!B.isStatic&&!N.isStatic?4:1,B.isStatic&&(Z=0),R.lineBetween(z.x,z.y,z.x-Q.x*Z,z.y-Q.y*Z)}}return this},renderCollisions:function(b,R,A){R.lineStyle(1,A,.5),R.fillStyle(A,1);var D,G;for(D=0;D<b.length;D++)if(G=b[D],!!G.isActive)for(var F=0;F<G.contactCount;F++){var B=G.contacts[F],N=B.vertex;N&&R.fillRect(N.x-2,N.y-2,5,5)}for(D=0;D<b.length;D++)if(G=b[D],!!G.isActive){var z=G.collision,$=G.contacts;if(G.contactCount>0){var Q=$[0].vertex.x,Z=$[0].vertex.y;G.contactCount===2&&(Q=($[0].vertex.x+$[1].vertex.x)/2,Z=($[0].vertex.y+$[1].vertex.y)/2),z.bodyB===z.supports[0].body||z.bodyA.isStatic?R.lineBetween(Q-z.normal.x*8,Z-z.normal.y*8,Q,Z):R.lineBetween(Q+z.normal.x*8,Z+z.normal.y*8,Q,Z)}}return this},renderBodyBounds:function(b,R,A,D){R.lineStyle(1,A,D);for(var G=0;G<b.length;G++){var F=b[G];if(F.render.visible){var B=F.bounds;if(B)R.strokeRect(B.min.x,B.min.y,B.max.x-B.min.x,B.max.y-B.min.y);else for(var N=F.parts,z=N.length>1?1:0;z<N.length;z++){var $=N[z];R.strokeRect($.bounds.min.x,$.bounds.min.y,$.bounds.max.x-$.bounds.min.x,$.bounds.max.y-$.bounds.min.y)}}}return this},renderBodyAxes:function(b,R,A,D,G){R.lineStyle(1,D,G);for(var F=0;F<b.length;F++){var B=b[F],N=B.parts;if(B.render.visible){var z,$,Q;if(A)for($=N.length>1?1:0;$<N.length;$++)for(z=N[$],Q=0;Q<z.axes.length;Q++){var Z=z.axes[Q];R.lineBetween(z.position.x,z.position.y,z.position.x+Z.x*20,z.position.y+Z.y*20)}else for($=N.length>1?1:0;$<N.length;$++)for(z=N[$],Q=0;Q<z.axes.length;Q++)R.lineBetween(z.position.x,z.position.y,(z.vertices[0].x+z.vertices[z.vertices.length-1].x)/2,(z.vertices[0].y+z.vertices[z.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(b,R,A,D,G){R.lineStyle(G,A,D);for(var F=0;F<b.length;F++){var B=b[F];B.render.visible&&R.lineBetween(B.position.x,B.position.y,B.position.x+(B.position.x-B.positionPrev.x)*2,B.position.y+(B.position.y-B.positionPrev.y)*2)}return this},renderBodies:function(b){for(var R=this.debugGraphic,A=this.debugConfig,D=A.showBody,G=A.showStaticBody,F=A.showSleeping,B=A.showInternalEdges,N=A.showConvexHulls,z=A.renderFill,$=A.renderLine,Q=A.staticBodySleepOpacity,Z=A.sleepFillColor,tt=A.sleepLineColor,H=A.hullColor,J=0;J<b.length;J++){var Y=b[J];if(Y.render.visible&&!(!G&&Y.isStatic||!D&&!Y.isStatic)){var _=Y.render.lineColor,U=Y.render.lineOpacity,et=Y.render.lineThickness,nt=Y.render.fillColor,rt=Y.render.fillOpacity;F&&Y.isSleeping&&(Y.isStatic?(U*=Q,rt*=Q):(_=tt,nt=Z)),z||(nt=null),$||(_=null),this.renderBody(Y,R,B,_,U,et,nt,rt);var ot=Y.parts.length;N&&ot>1&&this.renderConvexHull(Y,R,H,et)}}},renderBody:function(b,R,A,D,G,F,B,N){D===void 0&&(D=null),G===void 0&&(G=null),F===void 0&&(F=1),B===void 0&&(B=null),N===void 0&&(N=null);for(var z=this.debugConfig,$=z.sensorFillColor,Q=z.sensorLineColor,Z=b.parts,tt=Z.length,H=tt>1?1:0;H<tt;H++){var J=Z[H],Y=J.render,_=Y.opacity;if(!(!Y.visible||_===0||J.isSensor&&!z.showSensors)){var U=J.circleRadius;if(R.beginPath(),J.isSensor?(B!==null&&R.fillStyle($,N*_),D!==null&&R.lineStyle(F,Q,G*_)):(B!==null&&R.fillStyle(B,N*_),D!==null&&R.lineStyle(F,D,G*_)),U)R.arc(J.position.x,J.position.y,U,0,2*Math.PI);else{var et=J.vertices,nt=et.length;R.moveTo(et[0].x,et[0].y);for(var rt=1;rt<nt;rt++){var ot=et[rt];if(!et[rt-1].isInternal||A?R.lineTo(ot.x,ot.y):R.moveTo(ot.x,ot.y),rt<nt&&ot.isInternal&&!A){var dt=(rt+1)%nt;R.moveTo(et[dt].x,et[dt].y)}}R.closePath()}B!==null&&R.fillPath(),D!==null&&R.strokePath()}}if(z.showPositions&&!b.isStatic){var vt=b.position.x,mt=b.position.y,gt=Math.ceil(z.positionSize/2);R.fillStyle(z.positionColor,1),R.fillRect(vt-gt,mt-gt,z.positionSize,z.positionSize)}return this},renderConvexHull:function(b,R,A,D){D===void 0&&(D=1);var G=b.parts,F=G.length;if(F>1){var B=b.vertices;R.lineStyle(D,A),R.beginPath(),R.moveTo(B[0].x,B[0].y);for(var N=1;N<B.length;N++)R.lineTo(B[N].x,B[N].y);R.lineTo(B[0].x,B[0].y),R.strokePath()}return this},renderJoints:function(){for(var b=this.debugGraphic,R=l.allConstraints(this.localWorld),A=0;A<R.length;A++){var D=R[A].render,G=D.lineColor,F=D.lineOpacity,B=D.lineThickness,N=D.pinSize,z=D.anchorColor,$=D.anchorSize;this.renderConstraint(R[A],b,G,F,B,N,z,$)}},renderConstraint:function(b,R,A,D,G,F,B,N){var z=b.render;if(!z.visible||!b.pointA||!b.pointB)return this;R.lineStyle(G,A,D);var $=b.bodyA,Q=b.bodyB,Z,tt;if($?Z=P.add($.position,b.pointA):Z=b.pointA,z.type==="pin")R.strokeCircle(Z.x,Z.y,F);else{if(Q?tt=P.add(Q.position,b.pointB):tt=b.pointB,R.beginPath(),R.moveTo(Z.x,Z.y),z.type==="spring")for(var H=P.sub(tt,Z),J=P.perp(P.normalise(H)),Y=Math.ceil(h.clamp(b.length/5,12,20)),_,U=1;U<Y;U+=1)_=U%2===0?1:-1,R.lineTo(Z.x+H.x*(U/Y)+J.x*_*4,Z.y+H.y*(U/Y)+J.y*_*4);R.lineTo(tt.x,tt.y)}return R.strokePath(),z.anchors&&N>0&&(R.fillStyle(B),R.fillCircle(Z.x,Z.y,N),R.fillCircle(tt.x,tt.y,N)),this},resetCollisionIDs:function(){return y._nextCollidingGroupId=1,y._nextNonCollidingGroupId=-1,y._nextCategory=1,this},shutdown:function(){v.off(this.engine),this.removeAllListeners(),m.clear(this.localWorld,!1),n.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});S.exports=M},70410:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setBounce:function(s){return this.body.restitution=s,this}};S.exports=w},66968:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setCollisionCategory:function(s){return this.body.collisionFilter.category=s,this},setCollisionGroup:function(s){return this.body.collisionFilter.group=s,this},setCollidesWith:function(s){var c=0;if(!Array.isArray(s))c=s;else for(var y=0;y<s.length;y++)c|=s[y];return this.body.collisionFilter.mask=c,this},setOnCollide:function(s){return this.body.onCollideCallback=s,this},setOnCollideEnd:function(s){return this.body.onCollideEndCallback=s,this},setOnCollideActive:function(s){return this.body.onCollideActiveCallback=s,this},setOnCollideWith:function(s,c){Array.isArray(s)||(s=[s]);for(var y=0;y<s.length;y++){var u=s[y].hasOwnProperty("body")?s[y].body:s[y];this.body.setOnCollideWith(u,c)}return this}};S.exports=w},51607:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(22562),y={applyForce:function(u){return this._tempVec2.set(this.body.position.x,this.body.position.y),c.applyForce(this.body,this._tempVec2,u),this},applyForceFrom:function(u,h){return c.applyForce(this.body,u,h),this},thrust:function(u){var h=this.body.angle;return this._tempVec2.set(u*Math.cos(h),u*Math.sin(h)),c.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(u){var h=this.body.angle-Math.PI/2;return this._tempVec2.set(u*Math.cos(h),u*Math.sin(h)),c.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(u){var h=this.body.angle+Math.PI/2;return this._tempVec2.set(u*Math.cos(h),u*Math.sin(h)),c.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(u){var h=this.body.angle-Math.PI;return this._tempVec2.set(u*Math.cos(h),u*Math.sin(h)),c.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};S.exports=y},5436:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setFriction:function(s,c,y){return this.body.friction=s,c!==void 0&&(this.body.frictionAir=c),y!==void 0&&(this.body.frictionStatic=y),this},setFrictionAir:function(s){return this.body.frictionAir=s,this},setFrictionStatic:function(s){return this.body.frictionStatic=s,this}};S.exports=w},39858:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setIgnoreGravity:function(s){return this.body.ignoreGravity=s,this}};S.exports=w},37302:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(22562),y=s(26099),u={setMass:function(h){return c.setMass(this.body,h),this},setDensity:function(h){return c.setDensity(this.body,h),this},centerOfMass:{get:function(){return new y(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};S.exports=u},39132:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={setSensor:function(s){return this.body.isSensor=s,this},isSensor:function(){return this.body.isSensor}};S.exports=w},57772:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(66280),y=s(22562),u=s(43855),h=s(95540),l=s(19496),n=s(85791),o=s(41598),f={setRectangle:function(r,d,p){return this.setBody({type:"rectangle",width:r,height:d},p)},setCircle:function(r,d){return this.setBody({type:"circle",radius:r},d)},setPolygon:function(r,d,p){return this.setBody({type:"polygon",sides:d,radius:r},p)},setTrapezoid:function(r,d,p,v){return this.setBody({type:"trapezoid",width:r,height:d,slope:p},v)},setExistingBody:function(r,d){d===void 0&&(d=!0),this.body&&this.world.remove(this.body,!0),this.body=r;for(var p=0;p<r.parts.length;p++)r.parts[p].gameObject=this;var v=this;if(r.destroy=function(){v.world.remove(v.body,!0),v.body.gameObject=null},d&&(this.world.has(r)&&this.world.remove(r,!0),this.world.add(r)),this._originComponent){var g=r.render.sprite.xOffset,m=r.render.sprite.yOffset,T=r.centerOfMass.x,P=r.centerOfMass.y;if(u(T,.5)&&u(P,.5))this.setOrigin(g+.5,m+.5);else{var M=r.centerOffset.x,b=r.centerOffset.y;this.setOrigin(g+M/this.displayWidth,m+b/this.displayHeight)}}return this},setBody:function(r,d){if(!r)return this;var p;typeof r=="string"&&(r={type:r});var v=h(r,"type","rectangle"),g=h(r,"x",this._tempVec2.x),m=h(r,"y",this._tempVec2.y),T=h(r,"width",this.width),P=h(r,"height",this.height);switch(v){case"rectangle":p=c.rectangle(g,m,T,P,d);break;case"circle":var M=h(r,"radius",Math.max(T,P)/2),b=h(r,"maxSides",25);p=c.circle(g,m,M,d,b);break;case"trapezoid":var R=h(r,"slope",.5);p=c.trapezoid(g,m,T,P,R,d);break;case"polygon":var A=h(r,"sides",5),D=h(r,"radius",Math.max(T,P)/2);p=c.polygon(g,m,A,D,d);break;case"fromVertices":case"fromVerts":var G=h(r,"verts",null);if(G)if(typeof G=="string"&&(G=o.fromPath(G)),this.body&&!this.body.hasOwnProperty("temp"))y.setVertices(this.body,G),p=this.body;else{var F=h(r,"flagInternal",!1),B=h(r,"removeCollinear",.01),N=h(r,"minimumArea",10);p=c.fromVertices(g,m,G,d,F,B,N)}break;case"fromPhysicsEditor":p=l.parseBody(g,m,r,d);break;case"fromPhysicsTracer":p=n.parseBody(g,m,r,d);break}return p&&this.setExistingBody(p,r.addToWorld),this}};S.exports=f},38083:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(1121),y=s(53614),u=s(35810),h={setToSleep:function(){return y.set(this.body,!0),this},setAwake:function(){return y.set(this.body,!1),this},setSleepThreshold:function(l){return l===void 0&&(l=60),this.body.sleepThreshold=l,this},setSleepEvents:function(l,n){return this.setSleepStartEvent(l),this.setSleepEndEvent(n),this},setSleepStartEvent:function(l){if(l){var n=this.world;u.on(this.body,"sleepStart",function(o){n.emit(c.SLEEP_START,o,this)})}else u.off(this.body,"sleepStart");return this},setSleepEndEvent:function(l){if(l){var n=this.world;u.on(this.body,"sleepEnd",function(o){n.emit(c.SLEEP_END,o,this)})}else u.off(this.body,"sleepEnd");return this}};S.exports=h},90556:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(22562),y={setStatic:function(u){return c.setStatic(this.body,u),this},isStatic:function(){return this.body.isStatic}};S.exports=y},85436:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(22562),y=s(36383),u=s(86554),h=s(30954),l=4,n={x:{get:function(){return this.body.position.x},set:function(o){this._tempVec2.set(o,this.y),c.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(o){this._tempVec2.set(this.x,o),c.setPosition(this.body,this._tempVec2)}},scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(o){this.setScale(o,o)}},scaleX:{get:function(){return this._scaleX},set:function(o){var f=1/this._scaleX,r=1/this._scaleY;this._scaleX=o,this._scaleX===0?this.renderFlags&=~l:this.renderFlags|=l,c.scale(this.body,f,r),c.scale(this.body,o,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(o){var f=1/this._scaleX,r=1/this._scaleY;this._scaleY=o,this._scaleY===0?this.renderFlags&=~l:this.renderFlags|=l,c.scale(this.body,f,r),c.scale(this.body,this._scaleX,o)}},angle:{get:function(){return h(this.body.angle*y.RAD_TO_DEG)},set:function(o){this.rotation=h(o)*y.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(o){this._rotation=u(o),c.setAngle(this.body,this._rotation)}},setPosition:function(o,f){return o===void 0&&(o=0),f===void 0&&(f=o),this._tempVec2.set(o,f),c.setPosition(this.body,this._tempVec2),this},setRotation:function(o){return o===void 0&&(o=0),this._rotation=u(o),c.setAngle(this.body,o),this},setFixedRotation:function(){return c.setInertia(this.body,1/0),this},setAngle:function(o){return o===void 0&&(o=0),this.angle=o,c.setAngle(this.body,this.rotation),this},setScale:function(o,f,r){o===void 0&&(o=1),f===void 0&&(f=o);var d=1/this._scaleX,p=1/this._scaleY;return this._scaleX=o,this._scaleY=f,c.scale(this.body,d,p,r),c.scale(this.body,o,f,r),this}};S.exports=n},42081:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(22562),y={setVelocityX:function(u){return this._tempVec2.set(u,this.body.velocity.y),c.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(u){return this._tempVec2.set(this.body.velocity.x,u),c.setVelocity(this.body,this._tempVec2),this},setVelocity:function(u,h){return this._tempVec2.set(u,h),c.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return c.getVelocity(this.body)},setAngularVelocity:function(u){return c.setAngularVelocity(this.body,u),this},getAngularVelocity:function(){return c.getAngularVelocity(this.body)},setAngularSpeed:function(u){return c.setAngularSpeed(this.body,u),this},getAngularSpeed:function(){return c.getAngularSpeed(this.body)}};S.exports=y},31884:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Bounce:s(70410),Collision:s(66968),Force:s(51607),Friction:s(5436),Gravity:s(39858),Mass:s(37302),Sensor:s(39132),SetBody:s(57772),Sleep:s(38083),Static:s(90556),Transform:s(85436),Velocity:s(42081)}},85608:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="afteradd"},1213:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="afterremove"},25968:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="afterupdate"},67205:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="beforeadd"},39438:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="beforeremove"},44823:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="beforeupdate"},92593:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="collisionactive"},60128:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="collisionend"},76861:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="collisionstart"},92362:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="dragend"},76408:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="drag"},93971:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="dragstart"},5656:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pause"},47861:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="resume"},79099:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="sleepend"},35906:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="sleepstart"},1121:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={AFTER_ADD:s(85608),AFTER_REMOVE:s(1213),AFTER_UPDATE:s(25968),BEFORE_ADD:s(67205),BEFORE_REMOVE:s(39438),BEFORE_UPDATE:s(44823),COLLISION_ACTIVE:s(92593),COLLISION_END:s(60128),COLLISION_START:s(76861),DRAG_END:s(92362),DRAG:s(76408),DRAG_START:s(93971),PAUSE:s(5656),RESUME:s(47861),SLEEP_END:s(79099),SLEEP_START:s(35906)}},3875:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={BodyBounds:s(68174),Components:s(31884),Events:s(1121),Factory:s(28137),MatterGameObject:s(75803),Image:s(23181),Matter:s(19933),MatterPhysics:s(42045),PolyDecomp:s(55973),Sprite:s(34803),TileBody:s(73834),PhysicsEditorParser:s(19496),PhysicsJSONParser:s(85791),PointerConstraint:s(98713),World:s(68243)}},22562:(S,w,s)=>{var c={};S.exports=c;var y=s(41598),u=s(31725),h=s(53614),l=s(53402),n=s(15647),o=s(66615);(function(){c._timeCorrection=!0,c._inertiaScale=4,c._nextCollidingGroupId=1,c._nextNonCollidingGroupId=-1,c._nextCategory=1,c._baseDelta=16.666666666666668,c.create=function(r){var d={id:l.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:r.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!r.hasOwnProperty("position")&&r.hasOwnProperty("vertices")?r.position=y.centre(r.vertices):r.hasOwnProperty("vertices")||(d.vertices=y.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var p=l.extend(d,r);return f(p,r),p.setOnCollideWith=function(v,g){return g?this.onCollideWith[v.id]=g:delete this.onCollideWith[v.id],this},p},c.nextGroup=function(r){return r?c._nextNonCollidingGroupId--:c._nextCollidingGroupId++},c.nextCategory=function(){return c._nextCategory=c._nextCategory<<1,c._nextCategory};var f=function(r,d){if(d=d||{},c.set(r,{bounds:r.bounds||n.create(r.vertices),positionPrev:r.positionPrev||u.clone(r.position),anglePrev:r.anglePrev||r.angle,vertices:r.vertices,parts:r.parts||[r],isStatic:r.isStatic,isSleeping:r.isSleeping,parent:r.parent||r}),y.rotate(r.vertices,r.angle,r.position),o.rotate(r.axes,r.angle),n.update(r.bounds,r.vertices,r.velocity),c.set(r,{axes:d.axes||r.axes,area:d.area||r.area,mass:d.mass||r.mass,inertia:d.inertia||r.inertia}),r.parts.length===1){var p=r.bounds,v=r.centerOfMass,g=r.centerOffset,m=p.max.x-p.min.x,T=p.max.y-p.min.y;v.x=-(p.min.x-r.position.x)/m,v.y=-(p.min.y-r.position.y)/T,g.x=m*v.x,g.y=T*v.y}};c.set=function(r,d,p){var v;typeof d=="string"&&(v=d,d={},d[v]=p);for(v in d)if(Object.prototype.hasOwnProperty.call(d,v))switch(p=d[v],v){case"isStatic":c.setStatic(r,p);break;case"isSleeping":h.set(r,p);break;case"mass":c.setMass(r,p);break;case"density":c.setDensity(r,p);break;case"inertia":c.setInertia(r,p);break;case"vertices":c.setVertices(r,p);break;case"position":c.setPosition(r,p);break;case"angle":c.setAngle(r,p);break;case"velocity":c.setVelocity(r,p);break;case"angularVelocity":c.setAngularVelocity(r,p);break;case"speed":c.setSpeed(r,p);break;case"angularSpeed":c.setAngularSpeed(r,p);break;case"parts":c.setParts(r,p);break;case"centre":c.setCentre(r,p);break;default:r[v]=p}},c.setStatic=function(r,d){for(var p=0;p<r.parts.length;p++){var v=r.parts[p];d?(v.isStatic||(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia}),v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null),v.isStatic=d}},c.setMass=function(r,d){var p=r.inertia/(r.mass/6);r.inertia=p*(d/6),r.inverseInertia=1/r.inertia,r.mass=d,r.inverseMass=1/r.mass,r.density=r.mass/r.area},c.setDensity=function(r,d){c.setMass(r,d*r.area),r.density=d},c.setInertia=function(r,d){r.inertia=d,r.inverseInertia=1/r.inertia},c.setVertices=function(r,d){d[0].body===r?r.vertices=d:r.vertices=y.create(d,r),r.axes=o.fromVertices(r.vertices),r.area=y.area(r.vertices),c.setMass(r,r.density*r.area);var p=y.centre(r.vertices);y.translate(r.vertices,p,-1),c.setInertia(r,c._inertiaScale*y.inertia(r.vertices,r.mass)),y.translate(r.vertices,r.position),n.update(r.bounds,r.vertices,r.velocity)},c.setParts=function(r,d,p){var v;for(d=d.slice(0),r.parts.length=0,r.parts.push(r),r.parent=r,v=0;v<d.length;v++){var g=d[v];g!==r&&(g.parent=r,r.parts.push(g))}if(r.parts.length!==1){if(p=typeof p<"u"?p:!0,p){var m=[];for(v=0;v<d.length;v++)m=m.concat(d[v].vertices);y.clockwiseSort(m);var T=y.hull(m),P=y.centre(T);c.setVertices(r,T),y.translate(r.vertices,P)}var M=c._totalProperties(r),b=M.centre.x,R=M.centre.y,A=r.bounds,D=r.centerOfMass,G=r.centerOffset;n.update(A,r.vertices,r.velocity),D.x=-(A.min.x-b)/(A.max.x-A.min.x),D.y=-(A.min.y-R)/(A.max.y-A.min.y),G.x=b,G.y=R,r.area=M.area,r.parent=r,r.position.x=b,r.position.y=R,r.positionPrev.x=b,r.positionPrev.y=R,c.setMass(r,M.mass),c.setInertia(r,M.inertia),c.setPosition(r,M.centre)}},c.setCentre=function(r,d,p){p?(r.positionPrev.x+=d.x,r.positionPrev.y+=d.y,r.position.x+=d.x,r.position.y+=d.y):(r.positionPrev.x=d.x-(r.position.x-r.positionPrev.x),r.positionPrev.y=d.y-(r.position.y-r.positionPrev.y),r.position.x=d.x,r.position.y=d.y)},c.setPosition=function(r,d,p){var v=u.sub(d,r.position);p?(r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.velocity.x=v.x,r.velocity.y=v.y,r.speed=u.magnitude(v)):(r.positionPrev.x+=v.x,r.positionPrev.y+=v.y);for(var g=0;g<r.parts.length;g++){var m=r.parts[g];m.position.x+=v.x,m.position.y+=v.y,y.translate(m.vertices,v),n.update(m.bounds,m.vertices,r.velocity)}},c.setAngle=function(r,d,p){var v=d-r.angle;p?(r.anglePrev=r.angle,r.angularVelocity=v,r.angularSpeed=Math.abs(v)):r.anglePrev+=v;for(var g=0;g<r.parts.length;g++){var m=r.parts[g];m.angle+=v,y.rotate(m.vertices,v,r.position),o.rotate(m.axes,v),n.update(m.bounds,m.vertices,r.velocity),g>0&&u.rotateAbout(m.position,v,r.position,m.position)}},c.setVelocity=function(r,d){var p=r.deltaTime/c._baseDelta;r.positionPrev.x=r.position.x-d.x*p,r.positionPrev.y=r.position.y-d.y*p,r.velocity.x=(r.position.x-r.positionPrev.x)/p,r.velocity.y=(r.position.y-r.positionPrev.y)/p,r.speed=u.magnitude(r.velocity)},c.getVelocity=function(r){var d=c._baseDelta/r.deltaTime;return{x:(r.position.x-r.positionPrev.x)*d,y:(r.position.y-r.positionPrev.y)*d}},c.getSpeed=function(r){return u.magnitude(c.getVelocity(r))},c.setSpeed=function(r,d){c.setVelocity(r,u.mult(u.normalise(c.getVelocity(r)),d))},c.setAngularVelocity=function(r,d){var p=r.deltaTime/c._baseDelta;r.anglePrev=r.angle-d*p,r.angularVelocity=(r.angle-r.anglePrev)/p,r.angularSpeed=Math.abs(r.angularVelocity)},c.getAngularVelocity=function(r){return(r.angle-r.anglePrev)*c._baseDelta/r.deltaTime},c.getAngularSpeed=function(r){return Math.abs(c.getAngularVelocity(r))},c.setAngularSpeed=function(r,d){c.setAngularVelocity(r,l.sign(c.getAngularVelocity(r))*d)},c.translate=function(r,d,p){c.setPosition(r,u.add(r.position,d),p)},c.rotate=function(r,d,p,v){if(!p)c.setAngle(r,r.angle+d,v);else{var g=Math.cos(d),m=Math.sin(d),T=r.position.x-p.x,P=r.position.y-p.y;c.setPosition(r,{x:p.x+(T*g-P*m),y:p.y+(T*m+P*g)},v),c.setAngle(r,r.angle+d,v)}},c.scale=function(r,d,p,v){var g=0,m=0;v=v||r.position;for(var T=r.inertia===1/0,P=0;P<r.parts.length;P++){var M=r.parts[P];M.scale.x=d,M.scale.y=p,y.scale(M.vertices,d,p,v),M.axes=o.fromVertices(M.vertices),M.area=y.area(M.vertices),c.setMass(M,r.density*M.area),y.translate(M.vertices,{x:-M.position.x,y:-M.position.y}),c.setInertia(M,c._inertiaScale*y.inertia(M.vertices,M.mass)),y.translate(M.vertices,{x:M.position.x,y:M.position.y}),P>0&&(g+=M.area,m+=M.inertia),M.position.x=v.x+(M.position.x-v.x)*d,M.position.y=v.y+(M.position.y-v.y)*p,n.update(M.bounds,M.vertices,r.velocity)}r.parts.length>1&&(r.area=g,r.isStatic||(c.setMass(r,r.density*g),c.setInertia(r,m))),r.circleRadius&&(d===p?r.circleRadius*=d:r.circleRadius=null),T&&c.setInertia(r,1/0)},c.update=function(r,d){d=(typeof d<"u"?d:16.666666666666668)*r.timeScale;var p=d*d,v=c._timeCorrection?d/(r.deltaTime||d):1,g=1-r.frictionAir*(d/l._baseDelta),m=(r.position.x-r.positionPrev.x)*v,T=(r.position.y-r.positionPrev.y)*v;r.velocity.x=m*g+r.force.x/r.mass*p,r.velocity.y=T*g+r.force.y/r.mass*p,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.position.x+=r.velocity.x,r.position.y+=r.velocity.y,r.deltaTime=d,r.angularVelocity=(r.angle-r.anglePrev)*g*v+r.torque/r.inertia*p,r.anglePrev=r.angle,r.angle+=r.angularVelocity,r.speed=u.magnitude(r.velocity),r.angularSpeed=Math.abs(r.angularVelocity);for(var P=0;P<r.parts.length;P++){var M=r.parts[P];y.translate(M.vertices,r.velocity),P>0&&(M.position.x+=r.velocity.x,M.position.y+=r.velocity.y),r.angularVelocity!==0&&(y.rotate(M.vertices,r.angularVelocity,r.position),o.rotate(M.axes,r.angularVelocity),P>0&&u.rotateAbout(M.position,r.angularVelocity,r.position,M.position)),n.update(M.bounds,M.vertices,r.velocity)}},c.updateVelocities=function(r){var d=c._baseDelta/r.deltaTime,p=r.velocity;p.x=(r.position.x-r.positionPrev.x)*d,p.y=(r.position.y-r.positionPrev.y)*d,r.speed=Math.sqrt(p.x*p.x+p.y*p.y),r.angularVelocity=(r.angle-r.anglePrev)*d,r.angularSpeed=Math.abs(r.angularVelocity)},c.applyForce=function(r,d,p){var v={x:d.x-r.position.x,y:d.y-r.position.y};r.force.x+=p.x,r.force.y+=p.y,r.torque+=v.x*p.y-v.y*p.x},c._totalProperties=function(r){for(var d={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=r.parts.length===1?0:1;p<r.parts.length;p++){var v=r.parts[p],g=v.mass!==1/0?v.mass:1;d.mass+=g,d.area+=v.area,d.inertia+=v.inertia,d.centre=u.add(d.centre,u.mult(v.position,g))}return d.centre=u.div(d.centre,d.mass),d},c.wrap=function(r,d){var p=n.wrap(r.bounds,d);return p&&c.translate(r,p),p}})()},69351:(S,w,s)=>{var c={};S.exports=c;var y=s(35810),u=s(53402),h=s(15647),l=s(22562);(function(){c.create=function(n){return u.extend({id:u.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},n)},c.setModified=function(n,o,f,r){if(y.trigger(n,"compositeModified",n),n.isModified=o,o&&n.cache&&(n.cache.allBodies=null,n.cache.allConstraints=null,n.cache.allComposites=null),f&&n.parent&&c.setModified(n.parent,o,f,r),r)for(var d=0;d<n.composites.length;d++){var p=n.composites[d];c.setModified(p,o,f,r)}},c.add=function(n,o){var f=[].concat(o);y.trigger(n,"beforeAdd",{object:o});for(var r=0;r<f.length;r++){var d=f[r];switch(d.type){case"body":if(d.parent!==d){u.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}c.addBody(n,d);break;case"constraint":c.addConstraint(n,d);break;case"composite":c.addComposite(n,d);break;case"mouseConstraint":c.addConstraint(n,d.constraint);break}}return y.trigger(n,"afterAdd",{object:o}),n},c.remove=function(n,o,f){var r=[].concat(o);y.trigger(n,"beforeRemove",{object:o});for(var d=0;d<r.length;d++){var p=r[d];switch(p.type){case"body":c.removeBody(n,p,f);break;case"constraint":c.removeConstraint(n,p,f);break;case"composite":c.removeComposite(n,p,f);break;case"mouseConstraint":c.removeConstraint(n,p.constraint);break}}return y.trigger(n,"afterRemove",{object:o}),n},c.addComposite=function(n,o){return n.composites.push(o),o.parent=n,c.setModified(n,!0,!0,!1),n},c.removeComposite=function(n,o,f){var r=u.indexOf(n.composites,o);if(r!==-1){var d=c.allBodies(o);c.removeCompositeAt(n,r);for(var p=0;p<d.length;p++)d[p].sleepCounter=0}if(f)for(var p=0;p<n.composites.length;p++)c.removeComposite(n.composites[p],o,!0);return n},c.removeCompositeAt=function(n,o){return n.composites.splice(o,1),c.setModified(n,!0,!0,!1),n},c.addBody=function(n,o){return n.bodies.push(o),c.setModified(n,!0,!0,!1),n},c.removeBody=function(n,o,f){var r=u.indexOf(n.bodies,o);if(r!==-1&&(c.removeBodyAt(n,r),o.sleepCounter=0),f)for(var d=0;d<n.composites.length;d++)c.removeBody(n.composites[d],o,!0);return n},c.removeBodyAt=function(n,o){return n.bodies.splice(o,1),c.setModified(n,!0,!0,!1),n},c.addConstraint=function(n,o){return n.constraints.push(o),c.setModified(n,!0,!0,!1),n},c.removeConstraint=function(n,o,f){var r=u.indexOf(n.constraints,o);if(r!==-1&&c.removeConstraintAt(n,r),f)for(var d=0;d<n.composites.length;d++)c.removeConstraint(n.composites[d],o,!0);return n},c.removeConstraintAt=function(n,o){return n.constraints.splice(o,1),c.setModified(n,!0,!0,!1),n},c.clear=function(n,o,f){if(f)for(var r=0;r<n.composites.length;r++)c.clear(n.composites[r],o,!0);return o?n.bodies=n.bodies.filter(function(d){return d.isStatic}):n.bodies.length=0,n.constraints.length=0,n.composites.length=0,c.setModified(n,!0,!0,!1),n},c.allBodies=function(n){if(n.cache&&n.cache.allBodies)return n.cache.allBodies;for(var o=[].concat(n.bodies),f=0;f<n.composites.length;f++)o=o.concat(c.allBodies(n.composites[f]));return n.cache&&(n.cache.allBodies=o),o},c.allConstraints=function(n){if(n.cache&&n.cache.allConstraints)return n.cache.allConstraints;for(var o=[].concat(n.constraints),f=0;f<n.composites.length;f++)o=o.concat(c.allConstraints(n.composites[f]));return n.cache&&(n.cache.allConstraints=o),o},c.allComposites=function(n){if(n.cache&&n.cache.allComposites)return n.cache.allComposites;for(var o=[].concat(n.composites),f=0;f<n.composites.length;f++)o=o.concat(c.allComposites(n.composites[f]));return n.cache&&(n.cache.allComposites=o),o},c.get=function(n,o,f){var r,d;switch(f){case"body":r=c.allBodies(n);break;case"constraint":r=c.allConstraints(n);break;case"composite":r=c.allComposites(n).concat(n);break}return r?(d=r.filter(function(p){return p.id.toString()===o.toString()}),d.length===0?null:d[0]):null},c.move=function(n,o,f){return c.remove(n,o),c.add(f,o),n},c.rebase=function(n){for(var o=c.allBodies(n).concat(c.allConstraints(n)).concat(c.allComposites(n)),f=0;f<o.length;f++)o[f].id=u.nextId();return n},c.translate=function(n,o,f){for(var r=f?c.allBodies(n):n.bodies,d=0;d<r.length;d++)l.translate(r[d],o);return n},c.rotate=function(n,o,f,r){for(var d=Math.cos(o),p=Math.sin(o),v=r?c.allBodies(n):n.bodies,g=0;g<v.length;g++){var m=v[g],T=m.position.x-f.x,P=m.position.y-f.y;l.setPosition(m,{x:f.x+(T*d-P*p),y:f.y+(T*p+P*d)}),l.rotate(m,o)}return n},c.scale=function(n,o,f,r,d){for(var p=d?c.allBodies(n):n.bodies,v=0;v<p.length;v++){var g=p[v],m=g.position.x-r.x,T=g.position.y-r.y;l.setPosition(g,{x:r.x+m*o,y:r.y+T*f}),l.scale(g,o,f)}return n},c.bounds=function(n){for(var o=c.allBodies(n),f=[],r=0;r<o.length;r+=1){var d=o[r];f.push(d.bounds.min,d.bounds.max)}return h.create(f)},c.wrap=function(n,o){var f=h.wrap(c.bounds(n),o);return f&&c.translate(n,f),f}})()},4372:(S,w,s)=>{var c={};S.exports=c;var y=s(69351);(function(){c.create=y.create,c.add=y.add,c.remove=y.remove,c.clear=y.clear,c.addComposite=y.addComposite,c.addBody=y.addBody,c.addConstraint=y.addConstraint})()},52284:(S,w,s)=>{var c={};S.exports=c;var y=s(41598),u=s(4506);(function(){var h=[],l={overlap:0,axis:null},n={overlap:0,axis:null};c.create=function(o,f){return{pair:null,collided:!1,bodyA:o,bodyB:f,parentA:o.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},c.collides=function(o,f,r){if(c._overlapAxes(l,o.vertices,f.vertices,o.axes),l.overlap<=0||(c._overlapAxes(n,f.vertices,o.vertices,f.axes),n.overlap<=0))return null;var d=r&&r.table[u.id(o,f)],p;d?p=d.collision:(p=c.create(o,f),p.collided=!0,p.bodyA=o.id<f.id?o:f,p.bodyB=o.id<f.id?f:o,p.parentA=p.bodyA.parent,p.parentB=p.bodyB.parent),o=p.bodyA,f=p.bodyB;var v;l.overlap<n.overlap?v=l:v=n;var g=p.normal,m=p.tangent,T=p.penetration,P=p.supports,M=v.overlap,b=v.axis,R=b.x,A=b.y,D=f.position.x-o.position.x,G=f.position.y-o.position.y;R*D+A*G>=0&&(R=-R,A=-A),g.x=R,g.y=A,m.x=-A,m.y=R,T.x=R*M,T.y=A*M,p.depth=M;var F=c._findSupports(o,f,g,1),B=0;if(y.contains(o.vertices,F[0])&&(P[B++]=F[0]),y.contains(o.vertices,F[1])&&(P[B++]=F[1]),B<2){var N=c._findSupports(f,o,g,-1);y.contains(f.vertices,N[0])&&(P[B++]=N[0]),B<2&&y.contains(f.vertices,N[1])&&(P[B++]=N[1])}return B===0&&(P[B++]=F[0]),p.supportCount=B,p},c._overlapAxes=function(o,f,r,d){var p=f.length,v=r.length,g=f[0].x,m=f[0].y,T=r[0].x,P=r[0].y,M=d.length,b=Number.MAX_VALUE,R=0,A,D,G,F,B,N;for(B=0;B<M;B++){var z=d[B],$=z.x,Q=z.y,Z=g*$+m*Q,tt=T*$+P*Q,H=Z,J=tt;for(N=1;N<p;N+=1)F=f[N].x*$+f[N].y*Q,F>H?H=F:F<Z&&(Z=F);for(N=1;N<v;N+=1)F=r[N].x*$+r[N].y*Q,F>J?J=F:F<tt&&(tt=F);if(D=H-tt,G=J-Z,A=D<G?D:G,A<b&&(b=A,R=B,A<=0))break}o.axis=d[R],o.overlap=b},c._findSupports=function(o,f,r,d){var p=f.vertices,v=p.length,g=o.position.x,m=o.position.y,T=r.x*d,P=r.y*d,M=p[0],b=M,R=T*(g-b.x)+P*(m-b.y),A,D,G;for(G=1;G<v;G+=1)b=p[G],D=T*(g-b.x)+P*(m-b.y),D<R&&(R=D,M=b);return A=p[(v+M.index-1)%v],R=T*(g-A.x)+P*(m-A.y),b=p[(M.index+1)%v],T*(g-b.x)+P*(m-b.y)<R?(h[0]=M,h[1]=b,h):(h[0]=M,h[1]=A,h)}})()},43424:S=>{var w={};S.exports=w,function(){w.create=function(s){return{vertex:s,normalImpulse:0,tangentImpulse:0}}}()},81388:(S,w,s)=>{var c={};S.exports=c;var y=s(53402),u=s(52284);(function(){c.create=function(h){var l={bodies:[],collisions:[],pairs:null};return y.extend(l,h)},c.setBodies=function(h,l){h.bodies=l.slice(0)},c.clear=function(h){h.bodies=[],h.collisions=[]},c.collisions=function(h){var l=h.pairs,n=h.bodies,o=n.length,f=c.canCollide,r=u.collides,d=h.collisions,p=0,v,g;for(n.sort(c._compareBoundsX),v=0;v<o;v++){var m=n[v],T=m.bounds,P=m.bounds.max.x,M=m.bounds.max.y,b=m.bounds.min.y,R=m.isStatic||m.isSleeping,A=m.parts.length,D=A===1;for(g=v+1;g<o;g++){var G=n[g],F=G.bounds;if(F.min.x>P)break;if(!(M<F.min.y||b>F.max.y)&&!(R&&(G.isStatic||G.isSleeping))&&f(m.collisionFilter,G.collisionFilter)){var B=G.parts.length;if(D&&B===1){var N=r(m,G,l);N&&(d[p++]=N)}else for(var z=A>1?1:0,$=B>1?1:0,Q=z;Q<A;Q++)for(var Z=m.parts[Q],T=Z.bounds,tt=$;tt<B;tt++){var H=G.parts[tt],F=H.bounds;if(!(T.min.x>F.max.x||T.max.x<F.min.x||T.max.y<F.min.y||T.min.y>F.max.y)){var N=r(Z,H,l);N&&(d[p++]=N)}}}}}return d.length!==p&&(d.length=p),d},c.canCollide=function(h,l){return h.group===l.group&&h.group!==0?h.group>0:(h.mask&l.category)!==0&&(l.mask&h.category)!==0},c._compareBoundsX=function(h,l){return h.bounds.min.x-l.bounds.min.x}})()},4506:(S,w,s)=>{var c={};S.exports=c;var y=s(43424);(function(){c.create=function(u,h){var l=u.bodyA,n=u.bodyB,o={id:c.id(l,n),bodyA:l,bodyB:n,collision:u,contacts:[y.create(),y.create()],contactCount:0,separation:0,isActive:!0,isSensor:l.isSensor||n.isSensor,timeCreated:h,timeUpdated:h,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return c.update(o,u,h),o},c.update=function(u,h,l){var n=h.supports,o=h.supportCount,f=u.contacts,r=h.parentA,d=h.parentB;u.isActive=!0,u.timeUpdated=l,u.collision=h,u.separation=h.depth,u.inverseMass=r.inverseMass+d.inverseMass,u.friction=r.friction<d.friction?r.friction:d.friction,u.frictionStatic=r.frictionStatic>d.frictionStatic?r.frictionStatic:d.frictionStatic,u.restitution=r.restitution>d.restitution?r.restitution:d.restitution,u.slop=r.slop>d.slop?r.slop:d.slop,u.contactCount=o,h.pair=u;var p=n[0],v=f[0],g=n[1],m=f[1];(m.vertex===p||v.vertex===g)&&(f[1]=v,f[0]=v=m,m=f[1]),v.vertex=p,m.vertex=g},c.setActive=function(u,h,l){h?(u.isActive=!0,u.timeUpdated=l):(u.isActive=!1,u.contactCount=0)},c.id=function(u,h){return u.id<h.id?u.id.toString(36)+":"+h.id.toString(36):h.id.toString(36)+":"+u.id.toString(36)}})()},99561:(S,w,s)=>{var c={};S.exports=c;var y=s(4506),u=s(53402);(function(){c.create=function(h){return u.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},h)},c.update=function(h,l,n){var o=y.update,f=y.create,r=y.setActive,d=h.table,p=h.list,v=p.length,g=v,m=h.collisionStart,T=h.collisionEnd,P=h.collisionActive,M=l.length,b=0,R=0,A=0,D,G,F;for(F=0;F<M;F++)D=l[F],G=D.pair,G?(G.isActive&&(P[A++]=G),o(G,D,n)):(G=f(D,n),d[G.id]=G,m[b++]=G,p[g++]=G);for(g=0,v=p.length,F=0;F<v;F++)G=p[F],G.timeUpdated>=n?p[g++]=G:(r(G,!1,n),G.collision.bodyA.sleepCounter>0&&G.collision.bodyB.sleepCounter>0?p[g++]=G:(T[R++]=G,delete d[G.id]));p.length!==g&&(p.length=g),m.length!==b&&(m.length=b),T.length!==R&&(T.length=R),P.length!==A&&(P.length=A)},c.clear=function(h){return h.table={},h.list.length=0,h.collisionStart.length=0,h.collisionActive.length=0,h.collisionEnd.length=0,h}})()},73296:(S,w,s)=>{var c={};S.exports=c;var y=s(31725),u=s(52284),h=s(15647),l=s(66280),n=s(41598);(function(){c.collides=function(o,f){for(var r=[],d=f.length,p=o.bounds,v=u.collides,g=h.overlaps,m=0;m<d;m++){var T=f[m],P=T.parts.length,M=P===1?0:1;if(o!==T&&g(T.bounds,p))for(var b=M;b<P;b++){var R=T.parts[b];if(g(R.bounds,p)){var A=v(R,o);if(A){r.push(A);break}}}}return r},c.ray=function(o,f,r,d){d=d||1e-100;for(var p=y.angle(f,r),v=y.magnitude(y.sub(f,r)),g=(r.x+f.x)*.5,m=(r.y+f.y)*.5,T=l.rectangle(g,m,v,d,{angle:p}),P=c.collides(T,o),M=0;M<P.length;M+=1){var b=P[M];b.body=b.bodyB=b.bodyA}return P},c.region=function(o,f,r){for(var d=[],p=0;p<o.length;p++){var v=o[p],g=h.overlaps(v.bounds,f);(g&&!r||!g&&r)&&d.push(v)}return d},c.point=function(o,f){for(var r=[],d=0;d<o.length;d++){var p=o[d];if(h.contains(p.bounds,f))for(var v=p.parts.length===1?0:1;v<p.parts.length;v++){var g=p.parts[v];if(h.contains(g.bounds,f)&&n.contains(g.vertices,f)){r.push(p);break}}}return r}})()},66272:(S,w,s)=>{var c={};S.exports=c;var y=s(41598),u=s(53402),h=s(15647);(function(){c._restingThresh=2,c._restingThreshTangent=Math.sqrt(6),c._positionDampen=.9,c._positionWarming=.8,c._frictionNormalMultiplier=5,c._frictionMaxStatic=Number.MAX_VALUE,c.preSolvePosition=function(l){var n,o,f,r=l.length;for(n=0;n<r;n++)o=l[n],o.isActive&&(f=o.contactCount,o.collision.parentA.totalContacts+=f,o.collision.parentB.totalContacts+=f)},c.solvePosition=function(l,n,o){var f,r,d,p,v,g,m,T,P=c._positionDampen*(o||1),M=u.clamp(n/u._baseDelta,0,1),b=l.length;for(f=0;f<b;f++)r=l[f],!(!r.isActive||r.isSensor)&&(d=r.collision,p=d.parentA,v=d.parentB,g=d.normal,r.separation=d.depth+g.x*(v.positionImpulse.x-p.positionImpulse.x)+g.y*(v.positionImpulse.y-p.positionImpulse.y));for(f=0;f<b;f++)r=l[f],!(!r.isActive||r.isSensor)&&(d=r.collision,p=d.parentA,v=d.parentB,g=d.normal,T=r.separation-r.slop*M,(p.isStatic||v.isStatic)&&(T*=2),p.isStatic||p.isSleeping||(m=P/p.totalContacts,p.positionImpulse.x+=g.x*T*m,p.positionImpulse.y+=g.y*T*m),v.isStatic||v.isSleeping||(m=P/v.totalContacts,v.positionImpulse.x-=g.x*T*m,v.positionImpulse.y-=g.y*T*m))},c.postSolvePosition=function(l){for(var n=c._positionWarming,o=l.length,f=y.translate,r=h.update,d=0;d<o;d++){var p=l[d],v=p.positionImpulse,g=v.x,m=v.y,T=p.velocity;if(p.totalContacts=0,g!==0||m!==0){for(var P=0;P<p.parts.length;P++){var M=p.parts[P];f(M.vertices,v),r(M.bounds,M.vertices,T),M.position.x+=g,M.position.y+=m}p.positionPrev.x+=g,p.positionPrev.y+=m,g*T.x+m*T.y<0?(v.x=0,v.y=0):(v.x*=n,v.y*=n)}}},c.preSolveVelocity=function(l){var n=l.length,o,f;for(o=0;o<n;o++){var r=l[o];if(!(!r.isActive||r.isSensor)){var d=r.contacts,p=r.contactCount,v=r.collision,g=v.parentA,m=v.parentB,T=v.normal,P=v.tangent;for(f=0;f<p;f++){var M=d[f],b=M.vertex,R=M.normalImpulse,A=M.tangentImpulse;if(R!==0||A!==0){var D=T.x*R+P.x*A,G=T.y*R+P.y*A;g.isStatic||g.isSleeping||(g.positionPrev.x+=D*g.inverseMass,g.positionPrev.y+=G*g.inverseMass,g.anglePrev+=g.inverseInertia*((b.x-g.position.x)*G-(b.y-g.position.y)*D)),m.isStatic||m.isSleeping||(m.positionPrev.x-=D*m.inverseMass,m.positionPrev.y-=G*m.inverseMass,m.anglePrev-=m.inverseInertia*((b.x-m.position.x)*G-(b.y-m.position.y)*D))}}}}},c.solveVelocity=function(l,n){var o=n/u._baseDelta,f=o*o,r=f*o,d=-c._restingThresh*o,p=c._restingThreshTangent,v=c._frictionNormalMultiplier*o,g=c._frictionMaxStatic,m=l.length,T,P,M,b;for(M=0;M<m;M++){var R=l[M];if(!(!R.isActive||R.isSensor)){var A=R.collision,D=A.parentA,G=A.parentB,F=A.normal.x,B=A.normal.y,N=A.tangent.x,z=A.tangent.y,$=R.inverseMass,Q=R.friction*R.frictionStatic*v,Z=R.contacts,tt=R.contactCount,H=1/tt,J=D.position.x-D.positionPrev.x,Y=D.position.y-D.positionPrev.y,_=D.angle-D.anglePrev,U=G.position.x-G.positionPrev.x,et=G.position.y-G.positionPrev.y,nt=G.angle-G.anglePrev;for(b=0;b<tt;b++){var rt=Z[b],ot=rt.vertex,dt=ot.x-D.position.x,vt=ot.y-D.position.y,mt=ot.x-G.position.x,gt=ot.y-G.position.y,yt=J-vt*_,St=Y+dt*_,Ct=U-gt*nt,bt=et+mt*nt,At=yt-Ct,Lt=St-bt,Tt=F*At+B*Lt,Et=N*At+z*Lt,wt=R.separation+Tt,Wt=Math.min(wt,1);Wt=wt<0?0:Wt;var Zt=Wt*Q;Et<-Zt||Et>Zt?(P=Et>0?Et:-Et,T=R.friction*(Et>0?1:-1)*r,T<-P?T=-P:T>P&&(T=P)):(T=Et,P=g);var ue=dt*B-vt*F,Qt=mt*B-gt*F,jt=H/($+D.inverseInertia*ue*ue+G.inverseInertia*Qt*Qt),ve=(1+R.restitution)*Tt*jt;if(T*=jt,Tt<d)rt.normalImpulse=0;else{var Le=rt.normalImpulse;rt.normalImpulse+=ve,rt.normalImpulse>0&&(rt.normalImpulse=0),ve=rt.normalImpulse-Le}if(Et<-p||Et>p)rt.tangentImpulse=0;else{var Kt=rt.tangentImpulse;rt.tangentImpulse+=T,rt.tangentImpulse<-P&&(rt.tangentImpulse=-P),rt.tangentImpulse>P&&(rt.tangentImpulse=P),T=rt.tangentImpulse-Kt}var de=F*ve+N*T,Nt=B*ve+z*T;D.isStatic||D.isSleeping||(D.positionPrev.x+=de*D.inverseMass,D.positionPrev.y+=Nt*D.inverseMass,D.anglePrev+=(dt*Nt-vt*de)*D.inverseInertia),G.isStatic||G.isSleeping||(G.positionPrev.x-=de*G.inverseMass,G.positionPrev.y-=Nt*G.inverseMass,G.anglePrev-=(mt*Nt-gt*de)*G.inverseInertia)}}}}})()},48140:(S,w,s)=>{var c={};S.exports=c;var y=s(41598),u=s(31725),h=s(53614),l=s(15647),n=s(66615),o=s(53402);(function(){c._warming=.4,c._torqueDampen=1,c._minLength=1e-6,c.create=function(f){var r=f;r.bodyA&&!r.pointA&&(r.pointA={x:0,y:0}),r.bodyB&&!r.pointB&&(r.pointB={x:0,y:0});var d=r.bodyA?u.add(r.bodyA.position,r.pointA):r.pointA,p=r.bodyB?u.add(r.bodyB.position,r.pointB):r.pointB,v=u.magnitude(u.sub(d,p));r.length=typeof r.length<"u"?r.length:v,r.id=r.id||o.nextId(),r.label=r.label||"Constraint",r.type="constraint",r.stiffness=r.stiffness||(r.length>0?1:.7),r.damping=r.damping||0,r.angularStiffness=r.angularStiffness||0,r.angleA=r.bodyA?r.bodyA.angle:r.angleA,r.angleB=r.bodyB?r.bodyB.angle:r.angleB,r.plugin={};var g={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return r.length===0&&r.stiffness>.1?(g.type="pin",g.anchors=!1):r.stiffness<.9&&(g.type="spring"),r.render=o.extend(g,r.render),r},c.preSolveAll=function(f){for(var r=0;r<f.length;r+=1){var d=f[r],p=d.constraintImpulse;d.isStatic||p.x===0&&p.y===0&&p.angle===0||(d.position.x+=p.x,d.position.y+=p.y,d.angle+=p.angle)}},c.solveAll=function(f,r){for(var d=o.clamp(r/o._baseDelta,0,1),p=0;p<f.length;p+=1){var v=f[p],g=!v.bodyA||v.bodyA&&v.bodyA.isStatic,m=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(g||m)&&c.solve(f[p],d)}for(p=0;p<f.length;p+=1)v=f[p],g=!v.bodyA||v.bodyA&&v.bodyA.isStatic,m=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!g&&!m&&c.solve(f[p],d)},c.solve=function(f,r){var d=f.bodyA,p=f.bodyB,v=f.pointA,g=f.pointB;if(!(!d&&!p)){d&&!d.isStatic&&(u.rotate(v,d.angle-f.angleA,v),f.angleA=d.angle),p&&!p.isStatic&&(u.rotate(g,p.angle-f.angleB,g),f.angleB=p.angle);var m=v,T=g;if(d&&(m=u.add(d.position,v)),p&&(T=u.add(p.position,g)),!(!m||!T)){var P=u.sub(m,T),M=u.magnitude(P);M<c._minLength&&(M=c._minLength);var b=(M-f.length)/M,R=f.stiffness>=1||f.length===0,A=R?f.stiffness*r:f.stiffness*r*r,D=f.damping*r,G=u.mult(P,b*A),F=(d?d.inverseMass:0)+(p?p.inverseMass:0),B=(d?d.inverseInertia:0)+(p?p.inverseInertia:0),N=F+B,z,$,Q,Z,tt;if(D>0){var H=u.create();Q=u.div(P,M),tt=u.sub(p&&u.sub(p.position,p.positionPrev)||H,d&&u.sub(d.position,d.positionPrev)||H),Z=u.dot(Q,tt)}d&&!d.isStatic&&($=d.inverseMass/F,d.constraintImpulse.x-=G.x*$,d.constraintImpulse.y-=G.y*$,d.position.x-=G.x*$,d.position.y-=G.y*$,D>0&&(d.positionPrev.x-=D*Q.x*Z*$,d.positionPrev.y-=D*Q.y*Z*$),z=u.cross(v,G)/N*c._torqueDampen*d.inverseInertia*(1-f.angularStiffness),d.constraintImpulse.angle-=z,d.angle-=z),p&&!p.isStatic&&($=p.inverseMass/F,p.constraintImpulse.x+=G.x*$,p.constraintImpulse.y+=G.y*$,p.position.x+=G.x*$,p.position.y+=G.y*$,D>0&&(p.positionPrev.x+=D*Q.x*Z*$,p.positionPrev.y+=D*Q.y*Z*$),z=u.cross(g,G)/N*c._torqueDampen*p.inverseInertia*(1-f.angularStiffness),p.constraintImpulse.angle+=z,p.angle+=z)}}},c.postSolveAll=function(f){for(var r=0;r<f.length;r++){var d=f[r],p=d.constraintImpulse;if(!(d.isStatic||p.x===0&&p.y===0&&p.angle===0)){h.set(d,!1);for(var v=0;v<d.parts.length;v++){var g=d.parts[v];y.translate(g.vertices,p),v>0&&(g.position.x+=p.x,g.position.y+=p.y),p.angle!==0&&(y.rotate(g.vertices,p.angle,d.position),n.rotate(g.axes,p.angle),v>0&&u.rotateAbout(g.position,p.angle,d.position,g.position)),l.update(g.bounds,g.vertices,d.velocity)}p.angle*=c._warming,p.x*=c._warming,p.y*=c._warming}}},c.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},c.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}},c.currentLength=function(f){var r=(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),d=(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0),p=(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),v=(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0),g=r-p,m=d-v;return Math.sqrt(g*g+m*m)}})()},53402:(S,w,s)=>{var c={};S.exports=c,function(){c._baseDelta=16.666666666666668,c._nextId=0,c._seed=0,c._nowStartTime=+new Date,c._warnedOnce={},c._decomp=null,c.extend=function(u,h){var l,n;typeof h=="boolean"?(l=2,n=h):(l=1,n=!0);for(var o=l;o<arguments.length;o++){var f=arguments[o];if(f)for(var r in f)n&&f[r]&&f[r].constructor===Object&&(!u[r]||u[r].constructor===Object)?(u[r]=u[r]||{},c.extend(u[r],n,f[r])):u[r]=f[r]}return u},c.clone=function(u,h){return c.extend({},h,u)},c.keys=function(u){if(Object.keys)return Object.keys(u);var h=[];for(var l in u)h.push(l);return h},c.values=function(u){var h=[];if(Object.keys){for(var l=Object.keys(u),n=0;n<l.length;n++)h.push(u[l[n]]);return h}for(var o in u)h.push(u[o]);return h},c.get=function(u,h,l,n){h=h.split(".").slice(l,n);for(var o=0;o<h.length;o+=1)u=u[h[o]];return u},c.set=function(u,h,l,n,o){var f=h.split(".").slice(n,o);return c.get(u,h,0,-1)[f[f.length-1]]=l,l},c.shuffle=function(u){for(var h=u.length-1;h>0;h--){var l=Math.floor(c.random()*(h+1)),n=u[h];u[h]=u[l],u[l]=n}return u},c.choose=function(u){return u[Math.floor(c.random()*u.length)]},c.isElement=function(u){return typeof HTMLElement<"u"?u instanceof HTMLElement:!!(u&&u.nodeType&&u.nodeName)},c.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},c.isFunction=function(u){return typeof u=="function"},c.isPlainObject=function(u){return typeof u=="object"&&u.constructor===Object},c.isString=function(u){return toString.call(u)==="[object String]"},c.clamp=function(u,h,l){return u<h?h:u>l?l:u},c.sign=function(u){return u<0?-1:1},c.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-c._nowStartTime},c.random=function(u,h){return u=typeof u<"u"?u:0,h=typeof h<"u"?h:1,u+y()*(h-u)};var y=function(){return c._seed=(c._seed*9301+49297)%233280,c._seed/233280};c.colorToNumber=function(u){return u=u.replace("#",""),u.length==3&&(u=u.charAt(0)+u.charAt(0)+u.charAt(1)+u.charAt(1)+u.charAt(2)+u.charAt(2)),parseInt(u,16)},c.logLevel=1,c.log=function(){console&&c.logLevel>0&&c.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.info=function(){console&&c.logLevel>0&&c.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.warn=function(){console&&c.logLevel>0&&c.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.warnOnce=function(){var u=Array.prototype.slice.call(arguments).join(" ");c._warnedOnce[u]||(c.warn(u),c._warnedOnce[u]=!0)},c.deprecated=function(u,h,l){u[h]=c.chain(function(){c.warnOnce("🔅 deprecated 🔅",l)},u[h])},c.nextId=function(){return c._nextId++},c.indexOf=function(u,h){if(u.indexOf)return u.indexOf(h);for(var l=0;l<u.length;l++)if(u[l]===h)return l;return-1},c.map=function(u,h){if(u.map)return u.map(h);for(var l=[],n=0;n<u.length;n+=1)l.push(h(u[n]));return l},c.topologicalSort=function(u){var h=[],l=[],n=[];for(var o in u)!l[o]&&!n[o]&&c._topologicalSort(o,l,n,u,h);return h},c._topologicalSort=function(u,h,l,n,o){var f=n[u]||[];l[u]=!0;for(var r=0;r<f.length;r+=1){var d=f[r];l[d]||h[d]||c._topologicalSort(d,h,l,n,o)}l[u]=!1,h[u]=!0,o.push(u)},c.chain=function(){for(var u=[],h=0;h<arguments.length;h+=1){var l=arguments[h];l._chained?u.push.apply(u,l._chained):u.push(l)}var n=function(){for(var o,f=new Array(arguments.length),r=0,d=arguments.length;r<d;r++)f[r]=arguments[r];for(r=0;r<u.length;r+=1){var p=u[r].apply(o,f);typeof p<"u"&&(o=p)}return o};return n._chained=u,n},c.chainPathBefore=function(u,h,l){return c.set(u,h,c.chain(l,c.get(u,h)))},c.chainPathAfter=function(u,h,l){return c.set(u,h,c.chain(c.get(u,h),l))},c.setDecomp=function(u){c._decomp=u},c.getDecomp=function(){var u=c._decomp;try{!u&&typeof window<"u"&&(u=window.decomp),!u&&typeof s.g<"u"&&(u=s.g.decomp)}catch{u=null}return u}}()},48413:(S,w,s)=>{var c={};S.exports=c;var y=s(53614),u=s(66272),h=s(81388),l=s(99561),n=s(35810),o=s(69351),f=s(48140),r=s(53402),d=s(22562);(function(){c._deltaMax=16.666666666666668,c.create=function(p){p=p||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},g=r.extend(v,p);return g.world=p.world||o.create({label:"World"}),g.pairs=p.pairs||l.create(),g.detector=p.detector||h.create(),g.detector.pairs=g.pairs,g.grid={buckets:[]},g.world.gravity=g.gravity,g.broadphase=g.grid,g.metrics={},g},c.update=function(p,v){var g=r.now(),m=p.world,T=p.detector,P=p.pairs,M=p.timing,b=M.timestamp,R;v>c._deltaMax&&r.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",c._deltaMax.toFixed(3),"ms."),v=typeof v<"u"?v:r._baseDelta,v*=M.timeScale,M.timestamp+=v,M.lastDelta=v;var A={timestamp:M.timestamp,delta:v};n.trigger(p,"beforeUpdate",A);var D=o.allBodies(m),G=o.allConstraints(m),F=o.allComposites(m);for(m.isModified&&(h.setBodies(T,D),o.setModified(m,!1,!1,!0)),p.enableSleeping&&y.update(D,v),c._bodiesApplyGravity(D,p.gravity),c.wrap(D,F),c.attractors(D),v>0&&c._bodiesUpdate(D,v),n.trigger(p,"beforeSolve",A),f.preSolveAll(D),R=0;R<p.constraintIterations;R++)f.solveAll(G,v);f.postSolveAll(D);var B=h.collisions(T);l.update(P,B,b),p.enableSleeping&&y.afterCollisions(P.list),P.collisionStart.length>0&&n.trigger(p,"collisionStart",{pairs:P.collisionStart,timestamp:M.timestamp,delta:v});var N=r.clamp(20/p.positionIterations,0,1);for(u.preSolvePosition(P.list),R=0;R<p.positionIterations;R++)u.solvePosition(P.list,v,N);for(u.postSolvePosition(D),f.preSolveAll(D),R=0;R<p.constraintIterations;R++)f.solveAll(G,v);for(f.postSolveAll(D),u.preSolveVelocity(P.list),R=0;R<p.velocityIterations;R++)u.solveVelocity(P.list,v);return c._bodiesUpdateVelocities(D),P.collisionActive.length>0&&n.trigger(p,"collisionActive",{pairs:P.collisionActive,timestamp:M.timestamp,delta:v}),P.collisionEnd.length>0&&n.trigger(p,"collisionEnd",{pairs:P.collisionEnd,timestamp:M.timestamp,delta:v}),c._bodiesClearForces(D),n.trigger(p,"afterUpdate",A),p.timing.lastElapsed=r.now()-g,p},c.merge=function(p,v){if(r.extend(p,v),v.world){p.world=v.world,c.clear(p);for(var g=o.allBodies(p.world),m=0;m<g.length;m++){var T=g[m];y.set(T,!1),T.id=r.nextId()}}},c.clear=function(p){l.clear(p.pairs),h.clear(p.detector)},c._bodiesClearForces=function(p){for(var v=p.length,g=0;g<v;g++){var m=p[g];m.force.x=0,m.force.y=0,m.torque=0}},c._bodiesApplyGravity=function(p,v){var g=typeof v.scale<"u"?v.scale:.001,m=p.length;if(!(v.x===0&&v.y===0||g===0))for(var T=0;T<m;T++){var P=p[T];P.ignoreGravity||P.isStatic||P.isSleeping||(P.force.y+=P.mass*v.y*g,P.force.x+=P.mass*v.x*g)}},c._bodiesUpdate=function(p,v){for(var g=p.length,m=0;m<g;m++){var T=p[m];T.isStatic||T.isSleeping||d.update(T,v)}},c._bodiesUpdateVelocities=function(p){for(var v=p.length,g=0;g<v;g++)d.updateVelocities(p[g])},c.wrap=function(p,v){for(var g=0;g<p.length;g+=1){var m=p[g];m.wrapBounds!==null&&d.wrap(m,m.wrapBounds)}for(g=0;g<v.length;g+=1){var T=v[g];T.wrapBounds!==null&&o.wrap(T,T.wrapBounds)}},c.attractors=function(p){for(var v=0;v<p.length;v++){var g=p[v],m=g.attractors;if(m&&m.length>0)for(var T=0;T<p.length;T++){var P=p[T];if(v!==T)for(var M=0;M<m.length;M++){var b=m[M],R=b;r.isFunction(b)&&(R=b(g,P)),R&&d.applyForce(P,P.position,R)}}}}})()},35810:(S,w,s)=>{var c={};S.exports=c;var y=s(53402);(function(){c.on=function(u,h,l){for(var n=h.split(" "),o,f=0;f<n.length;f++)o=n[f],u.events=u.events||{},u.events[o]=u.events[o]||[],u.events[o].push(l);return l},c.off=function(u,h,l){if(!h){u.events={};return}typeof h=="function"&&(l=h,h=y.keys(u.events).join(" "));for(var n=h.split(" "),o=0;o<n.length;o++){var f=u.events[n[o]],r=[];if(l&&f)for(var d=0;d<f.length;d++)f[d]!==l&&r.push(f[d]);u.events[n[o]]=r}},c.trigger=function(u,h,l){var n,o,f,r,d=u.events;if(d&&y.keys(d).length>0){l||(l={}),n=h.split(" ");for(var p=0;p<n.length;p++)if(o=n[p],f=d[o],f){r=y.clone(l,!1),r.name=o,r.source=u;for(var v=0;v<f.length;v++)f[v].apply(u,[r])}}}})()},6790:(S,w,s)=>{var c={};S.exports=c;var y=s(73832),u=s(53402);(function(){c.name="matter-js",c.version="0.20.0",c.uses=[],c.used=[],c.use=function(){y.use(c,Array.prototype.slice.call(arguments))},c.before=function(h,l){return h=h.replace(/^Matter./,""),u.chainPathBefore(c,h,l)},c.after=function(h,l){return h=h.replace(/^Matter./,""),u.chainPathAfter(c,h,l)}})()},73832:(S,w,s)=>{var c={};S.exports=c;var y=s(53402);(function(){c._registry={},c.register=function(u){if(c.isPlugin(u)||y.warn("Plugin.register:",c.toString(u),"does not implement all required fields."),u.name in c._registry){var h=c._registry[u.name],l=c.versionParse(u.version).number,n=c.versionParse(h.version).number;l>n?(y.warn("Plugin.register:",c.toString(h),"was upgraded to",c.toString(u)),c._registry[u.name]=u):l<n?y.warn("Plugin.register:",c.toString(h),"can not be downgraded to",c.toString(u)):u!==h&&y.warn("Plugin.register:",c.toString(u),"is already registered to different plugin object")}else c._registry[u.name]=u;return u},c.resolve=function(u){return c._registry[c.dependencyParse(u).name]},c.toString=function(u){return typeof u=="string"?u:(u.name||"anonymous")+"@"+(u.version||u.range||"0.0.0")},c.isPlugin=function(u){return u&&u.name&&u.version&&u.install},c.isUsed=function(u,h){return u.used.indexOf(h)>-1},c.isFor=function(u,h){var l=u.for&&c.dependencyParse(u.for);return!u.for||h.name===l.name&&c.versionSatisfies(h.version,l.range)},c.use=function(u,h){if(u.uses=(u.uses||[]).concat(h||[]),u.uses.length===0){y.warn("Plugin.use:",c.toString(u),"does not specify any dependencies to install.");return}for(var l=c.dependencies(u),n=y.topologicalSort(l),o=[],f=0;f<n.length;f+=1)if(n[f]!==u.name){var r=c.resolve(n[f]);if(!r){o.push("❌ "+n[f]);continue}c.isUsed(u,r.name)||(c.isFor(r,u)||(y.warn("Plugin.use:",c.toString(r),"is for",r.for,"but installed on",c.toString(u)+"."),r._warned=!0),r.install?r.install(u):(y.warn("Plugin.use:",c.toString(r),"does not specify an install function."),r._warned=!0),r._warned?(o.push("🔶 "+c.toString(r)),delete r._warned):o.push("✅ "+c.toString(r)),u.used.push(r.name))}o.length>0&&!r.silent&&y.info(o.join("  "))},c.dependencies=function(u,h){var l=c.dependencyParse(u),n=l.name;if(h=h||{},!(n in h)){u=c.resolve(u)||u,h[n]=y.map(u.uses||[],function(f){c.isPlugin(f)&&c.register(f);var r=c.dependencyParse(f),d=c.resolve(f);return d&&!c.versionSatisfies(d.version,r.range)?(y.warn("Plugin.dependencies:",c.toString(d),"does not satisfy",c.toString(r),"used by",c.toString(l)+"."),d._warned=!0,u._warned=!0):d||(y.warn("Plugin.dependencies:",c.toString(f),"used by",c.toString(l),"could not be resolved."),u._warned=!0),r.name});for(var o=0;o<h[n].length;o+=1)c.dependencies(h[n][o],h);return h}},c.dependencyParse=function(u){if(y.isString(u)){var h=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return h.test(u)||y.warn("Plugin.dependencyParse:",u,"is not a valid dependency string."),{name:u.split("@")[0],range:u.split("@")[1]||"*"}}return{name:u.name,range:u.range||u.version}},c.versionParse=function(u){var h=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;h.test(u)||y.warn("Plugin.versionParse:",u,"is not a valid version or range.");var l=h.exec(u),n=Number(l[4]),o=Number(l[5]),f=Number(l[6]);return{isRange:!!(l[1]||l[2]),version:l[3],range:u,operator:l[1]||l[2]||"",major:n,minor:o,patch:f,parts:[n,o,f],prerelease:l[7],number:n*1e8+o*1e4+f}},c.versionSatisfies=function(u,h){h=h||"*";var l=c.versionParse(h),n=c.versionParse(u);if(l.isRange){if(l.operator==="*"||u==="*")return!0;if(l.operator===">")return n.number>l.number;if(l.operator===">=")return n.number>=l.number;if(l.operator==="~")return n.major===l.major&&n.minor===l.minor&&n.patch>=l.patch;if(l.operator==="^")return l.major>0?n.major===l.major&&n.number>=l.number:l.minor>0?n.minor===l.minor&&n.patch>=l.patch:n.patch===l.patch}return u===h||u==="*"}})()},13037:(S,w,s)=>{var c={};S.exports=c;var y=s(35810),u=s(48413),h=s(53402);(function(){c._maxFrameDelta=66.66666666666667,c._frameDeltaFallback=16.666666666666668,c._timeBufferMargin=1.5,c._elapsedNextEstimate=1,c._smoothingLowerBound=.1,c._smoothingUpperBound=.9,c.create=function(n){var o={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},f=h.extend(o,n);return f.fps=0,f},c.run=function(n,o){return n.timeBuffer=c._frameDeltaFallback,function f(r){n.frameRequestId=c._onNextFrame(n,f),r&&n.enabled&&c.tick(n,o,r)}(),n},c.tick=function(n,o,f){var r=h.now(),d=n.delta,p=0,v=f-n.timeLastTick;if((!v||!n.timeLastTick||v>Math.max(c._maxFrameDelta,n.maxFrameTime))&&(v=n.frameDelta||c._frameDeltaFallback),n.frameDeltaSmoothing){n.frameDeltaHistory.push(v),n.frameDeltaHistory=n.frameDeltaHistory.slice(-n.frameDeltaHistorySize);var g=n.frameDeltaHistory.slice(0).sort(),m=n.frameDeltaHistory.slice(g.length*c._smoothingLowerBound,g.length*c._smoothingUpperBound),T=l(m);v=T||v}n.frameDeltaSnapping&&(v=1e3/Math.round(1e3/v)),n.frameDelta=v,n.timeLastTick=f,n.timeBuffer+=n.frameDelta,n.timeBuffer=h.clamp(n.timeBuffer,0,n.frameDelta+d*c._timeBufferMargin),n.lastUpdatesDeferred=0;var P=n.maxUpdates||Math.ceil(n.maxFrameTime/d),M={timestamp:o.timing.timestamp};y.trigger(n,"beforeTick",M),y.trigger(n,"tick",M);for(var b=h.now();d>0&&n.timeBuffer>=d*c._timeBufferMargin;){y.trigger(n,"beforeUpdate",M),u.update(o,d),y.trigger(n,"afterUpdate",M),n.timeBuffer-=d,p+=1;var R=h.now()-r,A=h.now()-b,D=R+c._elapsedNextEstimate*A/p;if(p>=P||D>n.maxFrameTime){n.lastUpdatesDeferred=Math.round(Math.max(0,n.timeBuffer/d-c._timeBufferMargin));break}}o.timing.lastUpdatesPerFrame=p,y.trigger(n,"afterTick",M),n.frameDeltaHistory.length>=100&&(n.lastUpdatesDeferred&&Math.round(n.frameDelta/d)>P?h.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):n.lastUpdatesDeferred&&h.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof n.isFixed<"u"&&h.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(n.deltaMin||n.deltaMax)&&h.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),n.fps!==0&&h.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},c.stop=function(n){c._cancelNextFrame(n)},c._onNextFrame=function(n,o){if(typeof window<"u"&&window.requestAnimationFrame)n.frameRequestId=window.requestAnimationFrame(o);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return n.frameRequestId},c._cancelNextFrame=function(n){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(n.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var l=function(n){for(var o=0,f=n.length,r=0;r<f;r+=1)o+=n[r];return o/f||0};c._mean=l})()},53614:(S,w,s)=>{var c={};S.exports=c;var y=s(22562),u=s(35810),h=s(53402);(function(){c._motionWakeThreshold=.18,c._motionSleepThreshold=.08,c._minBias=.9,c.update=function(l,n){for(var o=n/h._baseDelta,f=c._motionSleepThreshold,r=0;r<l.length;r++){var d=l[r],p=y.getSpeed(d),v=y.getAngularSpeed(d),g=p*p+v*v;if(d.force.x!==0||d.force.y!==0){c.set(d,!1);continue}var m=Math.min(d.motion,g),T=Math.max(d.motion,g);d.motion=c._minBias*m+(1-c._minBias)*T,d.sleepThreshold>0&&d.motion<f?(d.sleepCounter+=1,d.sleepCounter>=d.sleepThreshold/o&&c.set(d,!0)):d.sleepCounter>0&&(d.sleepCounter-=1)}},c.afterCollisions=function(l){for(var n=c._motionSleepThreshold,o=0;o<l.length;o++){var f=l[o];if(f.isActive){var r=f.collision,d=r.bodyA.parent,p=r.bodyB.parent;if(!(d.isSleeping&&p.isSleeping||d.isStatic||p.isStatic)&&(d.isSleeping||p.isSleeping)){var v=d.isSleeping&&!d.isStatic?d:p,g=v===d?p:d;!v.isStatic&&g.motion>n&&c.set(v,!1)}}}},c.set=function(l,n){var o=l.isSleeping;n?(l.isSleeping=!0,l.sleepCounter=l.sleepThreshold,l.positionImpulse.x=0,l.positionImpulse.y=0,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.anglePrev=l.angle,l.speed=0,l.angularSpeed=0,l.motion=0,o||u.trigger(l,"sleepStart")):(l.isSleeping=!1,l.sleepCounter=0,o&&u.trigger(l,"sleepEnd"))}})()},66280:(S,w,s)=>{var c={};S.exports=c;var y=s(41598),u=s(53402),h=s(22562),l=s(15647),n=s(31725);(function(){c.rectangle=function(o,f,r,d,p){p=p||{};var v={label:"Rectangle Body",position:{x:o,y:f},vertices:y.fromPath("L 0 0 L "+r+" 0 L "+r+" "+d+" L 0 "+d)};if(p.chamfer){var g=p.chamfer;v.vertices=y.chamfer(v.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete p.chamfer}return h.create(u.extend({},v,p))},c.trapezoid=function(o,f,r,d,p,v){v=v||{},p>=1&&u.warn("Bodies.trapezoid: slope parameter must be < 1."),p*=.5;var g=(1-p*2)*r,m=r*p,T=m+g,P=T+m,M;p<.5?M="L 0 0 L "+m+" "+-d+" L "+T+" "+-d+" L "+P+" 0":M="L 0 0 L "+T+" "+-d+" L "+P+" 0";var b={label:"Trapezoid Body",position:{x:o,y:f},vertices:y.fromPath(M)};if(v.chamfer){var R=v.chamfer;b.vertices=y.chamfer(b.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete v.chamfer}return h.create(u.extend({},b,v))},c.circle=function(o,f,r,d,p){d=d||{};var v={label:"Circle Body",circleRadius:r};p=p||25;var g=Math.ceil(Math.max(10,Math.min(p,r)));return g%2===1&&(g+=1),c.polygon(o,f,g,r,u.extend({},v,d))},c.polygon=function(o,f,r,d,p){if(p=p||{},r<3)return c.circle(o,f,d,p);for(var v=2*Math.PI/r,g="",m=v*.5,T=0;T<r;T+=1){var P=m+T*v,M=Math.cos(P)*d,b=Math.sin(P)*d;g+="L "+M.toFixed(3)+" "+b.toFixed(3)+" "}var R={label:"Polygon Body",position:{x:o,y:f},vertices:y.fromPath(g)};if(p.chamfer){var A=p.chamfer;R.vertices=y.chamfer(R.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete p.chamfer}return h.create(u.extend({},R,p))},c.fromVertices=function(o,f,r,d,p,v,g,m){var T=u.getDecomp(),P,M,b,R,A,D,G,F,B,N,z;for(P=!!(T&&T.quickDecomp),d=d||{},b=[],p=typeof p<"u"?p:!1,v=typeof v<"u"?v:.01,g=typeof g<"u"?g:10,m=typeof m<"u"?m:.01,u.isArray(r[0])||(r=[r]),N=0;N<r.length;N+=1)if(D=r[N],R=y.isConvex(D),A=!R,A&&!P&&u.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),R||!P)R?D=y.clockwiseSort(D):D=y.hull(D),b.push({position:{x:o,y:f},vertices:D});else{var $=D.map(function(rt){return[rt.x,rt.y]});T.makeCCW($),v!==!1&&T.removeCollinearPoints($,v),m!==!1&&T.removeDuplicatePoints&&T.removeDuplicatePoints($,m);var Q=T.quickDecomp($);for(G=0;G<Q.length;G++){var Z=Q[G],tt=Z.map(function(rt){return{x:rt[0],y:rt[1]}});g>0&&y.area(tt)<g||b.push({position:y.centre(tt),vertices:tt})}}for(G=0;G<b.length;G++)b[G]=h.create(u.extend(b[G],d));if(p){var H=5;for(G=0;G<b.length;G++){var J=b[G];for(F=G+1;F<b.length;F++){var Y=b[F];if(l.overlaps(J.bounds,Y.bounds)){var _=J.vertices,U=Y.vertices;for(B=0;B<J.vertices.length;B++)for(z=0;z<Y.vertices.length;z++){var et=n.magnitudeSquared(n.sub(_[(B+1)%_.length],U[z])),nt=n.magnitudeSquared(n.sub(_[B],U[(z+1)%U.length]));et<H&&nt<H&&(_[B].isInternal=!0,U[z].isInternal=!0)}}}}}return b.length>1?(M=h.create(u.extend({parts:b.slice(0)},d)),h.setPosition(M,{x:o,y:f}),M):b[0]},c.flagCoincidentParts=function(o,f){f===void 0&&(f=5);for(var r=0;r<o.length;r++)for(var d=o[r],p=r+1;p<o.length;p++){var v=o[p];if(l.overlaps(d.bounds,v.bounds))for(var g=d.vertices,m=v.vertices,T=0;T<d.vertices.length;T++)for(var P=0;P<v.vertices.length;P++){var M=n.magnitudeSquared(n.sub(g[(T+1)%g.length],m[P])),b=n.magnitudeSquared(n.sub(g[T],m[(P+1)%m.length]));M<f&&b<f&&(g[T].isInternal=!0,m[P].isInternal=!0)}}return o}})()},74116:(S,w,s)=>{var c={};S.exports=c;var y=s(69351),u=s(48140),h=s(53402),l=s(22562),n=s(66280);(function(){c.stack=function(o,f,r,d,p,v,g){for(var m=y.create({label:"Stack"}),T=o,P=f,M,b=0,R=0;R<d;R++){for(var A=0,D=0;D<r;D++){var G=g(T,P,D,R,M,b);if(G){var F=G.bounds.max.y-G.bounds.min.y,B=G.bounds.max.x-G.bounds.min.x;F>A&&(A=F),l.translate(G,{x:B*.5,y:F*.5}),T=G.bounds.max.x+p,y.addBody(m,G),M=G,b+=1}else T+=p}P+=A+v,T=o}return m},c.chain=function(o,f,r,d,p,v){for(var g=o.bodies,m=1;m<g.length;m++){var T=g[m-1],P=g[m],M=T.bounds.max.y-T.bounds.min.y,b=T.bounds.max.x-T.bounds.min.x,R=P.bounds.max.y-P.bounds.min.y,A=P.bounds.max.x-P.bounds.min.x,D={bodyA:T,pointA:{x:b*f,y:M*r},bodyB:P,pointB:{x:A*d,y:R*p}},G=h.extend(D,v);y.addConstraint(o,u.create(G))}return o.label+=" Chain",o},c.mesh=function(o,f,r,d,p){var v=o.bodies,g,m,T,P,M;for(g=0;g<r;g++){for(m=1;m<f;m++)T=v[m-1+g*f],P=v[m+g*f],y.addConstraint(o,u.create(h.extend({bodyA:T,bodyB:P},p)));if(g>0)for(m=0;m<f;m++)T=v[m+(g-1)*f],P=v[m+g*f],y.addConstraint(o,u.create(h.extend({bodyA:T,bodyB:P},p))),d&&m>0&&(M=v[m-1+(g-1)*f],y.addConstraint(o,u.create(h.extend({bodyA:M,bodyB:P},p)))),d&&m<f-1&&(M=v[m+1+(g-1)*f],y.addConstraint(o,u.create(h.extend({bodyA:M,bodyB:P},p))))}return o.label+=" Mesh",o},c.pyramid=function(o,f,r,d,p,v,g){return c.stack(o,f,r,d,p,v,function(m,T,P,M,b,R){var A=Math.min(d,Math.ceil(r/2)),D=b?b.bounds.max.x-b.bounds.min.x:0;if(!(M>A)){M=A-M;var G=M,F=r-1-M;if(!(P<G||P>F)){R===1&&l.translate(b,{x:(P+(r%2===1?1:-1))*D,y:0});var B=b?P*D:0;return g(o+B+P*p,T,P,M,b,R)}}})},c.newtonsCradle=function(o,f,r,d,p){for(var v=y.create({label:"Newtons Cradle"}),g=0;g<r;g++){var m=1.9,T=n.circle(o+g*(d*m),f+p,d,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),P=u.create({pointA:{x:o+g*(d*m),y:f},bodyB:T});y.addBody(v,T),y.addConstraint(v,P)}return v},c.car=function(o,f,r,d,p){var v=l.nextGroup(!0),g=20,m=-r*.5+g,T=r*.5-g,P=0,M=y.create({label:"Car"}),b=n.rectangle(o,f,r,d,{collisionFilter:{group:v},chamfer:{radius:d*.5},density:2e-4}),R=n.circle(o+m,f+P,p,{collisionFilter:{group:v},friction:.8}),A=n.circle(o+T,f+P,p,{collisionFilter:{group:v},friction:.8}),D=u.create({bodyB:b,pointB:{x:m,y:P},bodyA:R,stiffness:1,length:0}),G=u.create({bodyB:b,pointB:{x:T,y:P},bodyA:A,stiffness:1,length:0});return y.addBody(M,b),y.addBody(M,R),y.addBody(M,A),y.addConstraint(M,D),y.addConstraint(M,G),M},c.softBody=function(o,f,r,d,p,v,g,m,T,P){T=h.extend({inertia:1/0},T),P=h.extend({stiffness:.2,render:{type:"line",anchors:!1}},P);var M=c.stack(o,f,r,d,p,v,function(b,R){return n.circle(b,R,m,T)});return c.mesh(M,r,d,g,P),M.label="Soft Body",M}})()},66615:(S,w,s)=>{var c={};S.exports=c;var y=s(31725),u=s(53402);(function(){c.fromVertices=function(h){for(var l={},n=0;n<h.length;n++){var o=(n+1)%h.length,f=y.normalise({x:h[o].y-h[n].y,y:h[n].x-h[o].x}),r=f.y===0?1/0:f.x/f.y;r=r.toFixed(3).toString(),l[r]=f}return u.values(l)},c.rotate=function(h,l){if(l!==0)for(var n=Math.cos(l),o=Math.sin(l),f=0;f<h.length;f++){var r=h[f],d;d=r.x*n-r.y*o,r.y=r.x*o+r.y*n,r.x=d}}})()},15647:S=>{var w={};S.exports=w,function(){w.create=function(s){var c={min:{x:0,y:0},max:{x:0,y:0}};return s&&w.update(c,s),c},w.update=function(s,c,y){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var u=0;u<c.length;u++){var h=c[u];h.x>s.max.x&&(s.max.x=h.x),h.x<s.min.x&&(s.min.x=h.x),h.y>s.max.y&&(s.max.y=h.y),h.y<s.min.y&&(s.min.y=h.y)}y&&(y.x>0?s.max.x+=y.x:s.min.x+=y.x,y.y>0?s.max.y+=y.y:s.min.y+=y.y)},w.contains=function(s,c){return c.x>=s.min.x&&c.x<=s.max.x&&c.y>=s.min.y&&c.y<=s.max.y},w.overlaps=function(s,c){return s.min.x<=c.max.x&&s.max.x>=c.min.x&&s.max.y>=c.min.y&&s.min.y<=c.max.y},w.translate=function(s,c){s.min.x+=c.x,s.max.x+=c.x,s.min.y+=c.y,s.max.y+=c.y},w.shift=function(s,c){var y=s.max.x-s.min.x,u=s.max.y-s.min.y;s.min.x=c.x,s.max.x=c.x+y,s.min.y=c.y,s.max.y=c.y+u},w.wrap=function(s,c,y){var u=null,h=null;if(typeof c.min.x<"u"&&typeof c.max.x<"u"&&(s.min.x>c.max.x?u=c.min.x-s.max.x:s.max.x<c.min.x&&(u=c.max.x-s.min.x)),typeof c.min.y<"u"&&typeof c.max.y<"u"&&(s.min.y>c.max.y?h=c.min.y-s.max.y:s.max.y<c.min.y&&(h=c.max.y-s.min.y)),u!==null||h!==null)return{x:u||0,y:h||0}}}()},74058:(S,w,s)=>{var c={};S.exports=c,s(15647);var y=s(53402);(function(){c.pathToVertices=function(u,h){typeof window<"u"&&!("SVGPathSeg"in window)&&y.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var l,n,o,f,r,d,p,v,g,m,T=[],P,M,b=0,R=0,A=0;h=h||15;var D=function(F,B,N){var z=N%2===1&&N>1;if(!g||F!=g.x||B!=g.y){g&&z?(P=g.x,M=g.y):(P=0,M=0);var $={x:P+F,y:M+B};(z||!g)&&(g=$),T.push($),R=P+F,A=M+B}},G=function(F){var B=F.pathSegTypeAsLetter.toUpperCase();if(B!=="Z"){switch(B){case"M":case"L":case"T":case"C":case"S":case"Q":R=F.x,A=F.y;break;case"H":R=F.x;break;case"V":A=F.y;break}D(R,A,F.pathSegType)}};for(c._svgPathToAbsolute(u),o=u.getTotalLength(),d=[],l=0;l<u.pathSegList.numberOfItems;l+=1)d.push(u.pathSegList.getItem(l));for(p=d.concat();b<o;){if(m=u.getPathSegAtLength(b),r=d[m],r!=v){for(;p.length&&p[0]!=r;)G(p.shift());v=r}switch(r.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=u.getPointAtLength(b),D(f.x,f.y,0);break}b+=h}for(l=0,n=p.length;l<n;++l)G(p[l]);return T},c._svgPathToAbsolute=function(u){for(var h,l,n,o,f,r,d=u.pathSegList,p=0,v=0,g=d.numberOfItems,m=0;m<g;++m){var T=d.getItem(m),P=T.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(P))"x"in T&&(p=T.x),"y"in T&&(v=T.y);else switch("x1"in T&&(n=p+T.x1),"x2"in T&&(f=p+T.x2),"y1"in T&&(o=v+T.y1),"y2"in T&&(r=v+T.y2),"x"in T&&(p+=T.x),"y"in T&&(v+=T.y),P){case"m":d.replaceItem(u.createSVGPathSegMovetoAbs(p,v),m);break;case"l":d.replaceItem(u.createSVGPathSegLinetoAbs(p,v),m);break;case"h":d.replaceItem(u.createSVGPathSegLinetoHorizontalAbs(p),m);break;case"v":d.replaceItem(u.createSVGPathSegLinetoVerticalAbs(v),m);break;case"c":d.replaceItem(u.createSVGPathSegCurvetoCubicAbs(p,v,n,o,f,r),m);break;case"s":d.replaceItem(u.createSVGPathSegCurvetoCubicSmoothAbs(p,v,f,r),m);break;case"q":d.replaceItem(u.createSVGPathSegCurvetoQuadraticAbs(p,v,n,o),m);break;case"t":d.replaceItem(u.createSVGPathSegCurvetoQuadraticSmoothAbs(p,v),m);break;case"a":d.replaceItem(u.createSVGPathSegArcAbs(p,v,T.r1,T.r2,T.angle,T.largeArcFlag,T.sweepFlag),m);break;case"z":case"Z":p=h,v=l;break}(P=="M"||P=="m")&&(h=p,l=v)}}})()},31725:S=>{var w={};S.exports=w,function(){w.create=function(s,c){return{x:s||0,y:c||0}},w.clone=function(s){return{x:s.x,y:s.y}},w.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},w.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},w.rotate=function(s,c,y){var u=Math.cos(c),h=Math.sin(c);y||(y={});var l=s.x*u-s.y*h;return y.y=s.x*h+s.y*u,y.x=l,y},w.rotateAbout=function(s,c,y,u){var h=Math.cos(c),l=Math.sin(c);u||(u={});var n=y.x+((s.x-y.x)*h-(s.y-y.y)*l);return u.y=y.y+((s.x-y.x)*l+(s.y-y.y)*h),u.x=n,u},w.normalise=function(s){var c=w.magnitude(s);return c===0?{x:0,y:0}:{x:s.x/c,y:s.y/c}},w.dot=function(s,c){return s.x*c.x+s.y*c.y},w.cross=function(s,c){return s.x*c.y-s.y*c.x},w.cross3=function(s,c,y){return(c.x-s.x)*(y.y-s.y)-(c.y-s.y)*(y.x-s.x)},w.add=function(s,c,y){return y||(y={}),y.x=s.x+c.x,y.y=s.y+c.y,y},w.sub=function(s,c,y){return y||(y={}),y.x=s.x-c.x,y.y=s.y-c.y,y},w.mult=function(s,c){return{x:s.x*c,y:s.y*c}},w.div=function(s,c){return{x:s.x/c,y:s.y/c}},w.perp=function(s,c){return c=c===!0?-1:1,{x:c*-s.y,y:c*s.x}},w.neg=function(s){return{x:-s.x,y:-s.y}},w.angle=function(s,c){return Math.atan2(c.y-s.y,c.x-s.x)},w._temp=[w.create(),w.create(),w.create(),w.create(),w.create(),w.create()]}()},41598:(S,w,s)=>{var c={};S.exports=c;var y=s(31725),u=s(53402);(function(){c.create=function(h,l){for(var n=[],o=0;o<h.length;o++){var f=h[o],r={x:f.x,y:f.y,index:o,body:l,isInternal:!1};n.push(r)}return n},c.fromPath=function(h,l){var n=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,o=[];return h.replace(n,function(f,r,d){o.push({x:parseFloat(r),y:parseFloat(d)})}),c.create(o,l)},c.centre=function(h){for(var l=c.area(h,!0),n={x:0,y:0},o,f,r,d=0;d<h.length;d++)r=(d+1)%h.length,o=y.cross(h[d],h[r]),f=y.mult(y.add(h[d],h[r]),o),n=y.add(n,f);return y.div(n,6*l)},c.mean=function(h){for(var l={x:0,y:0},n=0;n<h.length;n++)l.x+=h[n].x,l.y+=h[n].y;return y.div(l,h.length)},c.area=function(h,l){for(var n=0,o=h.length-1,f=0;f<h.length;f++)n+=(h[o].x-h[f].x)*(h[o].y+h[f].y),o=f;return l?n/2:Math.abs(n)/2},c.inertia=function(h,l){for(var n=0,o=0,f=h,r,d,p=0;p<f.length;p++)d=(p+1)%f.length,r=Math.abs(y.cross(f[d],f[p])),n+=r*(y.dot(f[d],f[d])+y.dot(f[d],f[p])+y.dot(f[p],f[p])),o+=r;return l/6*(n/o)},c.translate=function(h,l,n){n=typeof n<"u"?n:1;var o=h.length,f=l.x*n,r=l.y*n,d;for(d=0;d<o;d++)h[d].x+=f,h[d].y+=r;return h},c.rotate=function(h,l,n){if(l!==0){var o=Math.cos(l),f=Math.sin(l),r=n.x,d=n.y,p=h.length,v,g,m,T;for(T=0;T<p;T++)v=h[T],g=v.x-r,m=v.y-d,v.x=r+(g*o-m*f),v.y=d+(g*f+m*o);return h}},c.contains=function(h,l){for(var n=l.x,o=l.y,f=h.length,r=h[f-1],d,p=0;p<f;p++){if(d=h[p],(n-r.x)*(d.y-r.y)+(o-r.y)*(r.x-d.x)>0)return!1;r=d}return!0},c.scale=function(h,l,n,o){if(l===1&&n===1)return h;o=o||c.centre(h);for(var f,r,d=0;d<h.length;d++)f=h[d],r=y.sub(f,o),h[d].x=o.x+r.x*l,h[d].y=o.y+r.y*n;return h},c.chamfer=function(h,l,n,o,f){typeof l=="number"?l=[l]:l=l||[8],n=typeof n<"u"?n:-1,o=o||2,f=f||14;for(var r=[],d=0;d<h.length;d++){var p=h[d-1>=0?d-1:h.length-1],v=h[d],g=h[(d+1)%h.length],m=l[d<l.length?d:l.length-1];if(m===0){r.push(v);continue}var T=y.normalise({x:v.y-p.y,y:p.x-v.x}),P=y.normalise({x:g.y-v.y,y:v.x-g.x}),M=Math.sqrt(2*Math.pow(m,2)),b=y.mult(u.clone(T),m),R=y.normalise(y.mult(y.add(T,P),.5)),A=y.sub(v,y.mult(R,M)),D=n;n===-1&&(D=Math.pow(m,.32)*1.75),D=u.clamp(D,o,f),D%2===1&&(D+=1);for(var G=Math.acos(y.dot(T,P)),F=G/D,B=0;B<D;B++)r.push(y.add(y.rotate(b,F*B),A))}return r},c.clockwiseSort=function(h){var l=c.mean(h);return h.sort(function(n,o){return y.angle(l,n)-y.angle(l,o)}),h},c.isConvex=function(h){var l=0,n=h.length,o,f,r,d;if(n<3)return null;for(o=0;o<n;o++)if(f=(o+1)%n,r=(o+2)%n,d=(h[f].x-h[o].x)*(h[r].y-h[f].y),d-=(h[f].y-h[o].y)*(h[r].x-h[f].x),d<0?l|=1:d>0&&(l|=2),l===3)return!1;return l!==0?!0:null},c.hull=function(h){var l=[],n=[],o,f;for(h=h.slice(0),h.sort(function(r,d){var p=r.x-d.x;return p!==0?p:r.y-d.y}),f=0;f<h.length;f+=1){for(o=h[f];n.length>=2&&y.cross3(n[n.length-2],n[n.length-1],o)<=0;)n.pop();n.push(o)}for(f=h.length-1;f>=0;f-=1){for(o=h[f];l.length>=2&&y.cross3(l[l.length-2],l[l.length-1],o)<=0;)l.pop();l.push(o)}return l.pop(),n.pop(),l.concat(n)}})()},55973:S=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={decomp:G,quickDecomp:z,isSimple:B,removeCollinearPoints:$,removeDuplicatePoints:Q,makeCCW:g};function w(H,J,Y){Y=Y||0;var _=[0,0],U,et,nt,rt,ot,dt,vt;return U=H[1][1]-H[0][1],et=H[0][0]-H[1][0],nt=U*H[0][0]+et*H[0][1],rt=J[1][1]-J[0][1],ot=J[0][0]-J[1][0],dt=rt*J[0][0]+ot*J[0][1],vt=U*ot-rt*et,Z(vt,0,Y)||(_[0]=(ot*nt-et*dt)/vt,_[1]=(U*dt-rt*nt)/vt),_}function s(H,J,Y,_){var U=J[0]-H[0],et=J[1]-H[1],nt=_[0]-Y[0],rt=_[1]-Y[1];if(nt*et-rt*U===0)return!1;var ot=(U*(Y[1]-H[1])+et*(H[0]-Y[0]))/(nt*et-rt*U),dt=(nt*(H[1]-Y[1])+rt*(Y[0]-H[0]))/(rt*U-nt*et);return ot>=0&&ot<=1&&dt>=0&&dt<=1}function c(H,J,Y){return(J[0]-H[0])*(Y[1]-H[1])-(Y[0]-H[0])*(J[1]-H[1])}function y(H,J,Y){return c(H,J,Y)>0}function u(H,J,Y){return c(H,J,Y)>=0}function h(H,J,Y){return c(H,J,Y)<0}function l(H,J,Y){return c(H,J,Y)<=0}var n=[],o=[];function f(H,J,Y,_){if(_){var U=n,et=o;U[0]=J[0]-H[0],U[1]=J[1]-H[1],et[0]=Y[0]-J[0],et[1]=Y[1]-J[1];var nt=U[0]*et[0]+U[1]*et[1],rt=Math.sqrt(U[0]*U[0]+U[1]*U[1]),ot=Math.sqrt(et[0]*et[0]+et[1]*et[1]),dt=Math.acos(nt/(rt*ot));return dt<_}else return c(H,J,Y)===0}function r(H,J){var Y=J[0]-H[0],_=J[1]-H[1];return Y*Y+_*_}function d(H,J){var Y=H.length;return H[J<0?J%Y+Y:J%Y]}function p(H){H.length=0}function v(H,J,Y,_){for(var U=Y;U<_;U++)H.push(J[U])}function g(H){for(var J=0,Y=H,_=1;_<H.length;++_)(Y[_][1]<Y[J][1]||Y[_][1]===Y[J][1]&&Y[_][0]>Y[J][0])&&(J=_);return y(d(H,J-1),d(H,J),d(H,J+1))?!1:(m(H),!0)}function m(H){for(var J=[],Y=H.length,_=0;_!==Y;_++)J.push(H.pop());for(var _=0;_!==Y;_++)H[_]=J[_]}function T(H,J){return h(d(H,J-1),d(H,J),d(H,J+1))}var P=[],M=[];function b(H,J,Y){var _,U,et=P,nt=M;if(u(d(H,J+1),d(H,J),d(H,Y))&&l(d(H,J-1),d(H,J),d(H,Y)))return!1;U=r(d(H,J),d(H,Y));for(var rt=0;rt!==H.length;++rt)if(!((rt+1)%H.length===J||rt===J)&&u(d(H,J),d(H,Y),d(H,rt+1))&&l(d(H,J),d(H,Y),d(H,rt))&&(et[0]=d(H,J),et[1]=d(H,Y),nt[0]=d(H,rt),nt[1]=d(H,rt+1),_=w(et,nt),r(d(H,J),_)<U))return!1;return!0}function R(H,J,Y){for(var _=0;_!==H.length;++_)if(!(_===J||_===Y||(_+1)%H.length===J||(_+1)%H.length===Y)&&s(d(H,J),d(H,Y),d(H,_),d(H,_+1)))return!1;return!0}function A(H,J,Y,_){var U=_||[];if(p(U),J<Y)for(var et=J;et<=Y;et++)U.push(H[et]);else{for(var et=0;et<=Y;et++)U.push(H[et]);for(var et=J;et<H.length;et++)U.push(H[et])}return U}function D(H){for(var J=[],Y=[],_=[],U=[],et=Number.MAX_VALUE,nt=0;nt<H.length;++nt)if(T(H,nt)){for(var rt=0;rt<H.length;++rt)if(b(H,nt,rt)){Y=D(A(H,nt,rt,U)),_=D(A(H,rt,nt,U));for(var ot=0;ot<_.length;ot++)Y.push(_[ot]);Y.length<et&&(J=Y,et=Y.length,J.push([d(H,nt),d(H,rt)]))}}return J}function G(H){var J=D(H);return J.length>0?F(H,J):[H]}function F(H,J){if(J.length===0)return[H];if(J instanceof Array&&J.length&&J[0]instanceof Array&&J[0].length===2&&J[0][0]instanceof Array){for(var Y=[H],_=0;_<J.length;_++)for(var U=J[_],et=0;et<Y.length;et++){var nt=Y[et],rt=F(nt,U);if(rt){Y.splice(et,1),Y.push(rt[0],rt[1]);break}}return Y}else{var U=J,_=H.indexOf(U[0]),et=H.indexOf(U[1]);return _!==-1&&et!==-1?[A(H,_,et),A(H,et,_)]:!1}}function B(H){var J=H,Y;for(Y=0;Y<J.length-1;Y++)for(var _=0;_<Y-1;_++)if(s(J[Y],J[Y+1],J[_],J[_+1]))return!1;for(Y=1;Y<J.length-2;Y++)if(s(J[0],J[J.length-1],J[Y],J[Y+1]))return!1;return!0}function N(H,J,Y,_,U){U=U||0;var et=J[1]-H[1],nt=H[0]-J[0],rt=et*H[0]+nt*H[1],ot=_[1]-Y[1],dt=Y[0]-_[0],vt=ot*Y[0]+dt*Y[1],mt=et*dt-ot*nt;return Z(mt,0,U)?[0,0]:[(dt*rt-nt*vt)/mt,(et*vt-ot*rt)/mt]}function z(H,J,Y,_,U,et,nt){et=et||100,nt=nt||0,U=U||25,J=typeof J<"u"?J:[],Y=Y||[],_=_||[];var rt=[0,0],ot=[0,0],dt=[0,0],vt=0,mt=0,gt=0,yt=0,St=0,Ct=0,bt=0,At=[],Lt=[],Tt=H,Et=H;if(Et.length<3)return J;if(nt++,nt>et)return console.warn("quickDecomp: max level ("+et+") reached."),J;for(var wt=0;wt<H.length;++wt)if(T(Tt,wt)){Y.push(Tt[wt]),vt=mt=Number.MAX_VALUE;for(var Wt=0;Wt<H.length;++Wt)y(d(Tt,wt-1),d(Tt,wt),d(Tt,Wt))&&l(d(Tt,wt-1),d(Tt,wt),d(Tt,Wt-1))&&(dt=N(d(Tt,wt-1),d(Tt,wt),d(Tt,Wt),d(Tt,Wt-1)),h(d(Tt,wt+1),d(Tt,wt),dt)&&(gt=r(Tt[wt],dt),gt<mt&&(mt=gt,ot=dt,Ct=Wt))),y(d(Tt,wt+1),d(Tt,wt),d(Tt,Wt+1))&&l(d(Tt,wt+1),d(Tt,wt),d(Tt,Wt))&&(dt=N(d(Tt,wt+1),d(Tt,wt),d(Tt,Wt),d(Tt,Wt+1)),y(d(Tt,wt-1),d(Tt,wt),dt)&&(gt=r(Tt[wt],dt),gt<vt&&(vt=gt,rt=dt,St=Wt)));if(Ct===(St+1)%H.length)dt[0]=(ot[0]+rt[0])/2,dt[1]=(ot[1]+rt[1])/2,_.push(dt),wt<St?(v(At,Tt,wt,St+1),At.push(dt),Lt.push(dt),Ct!==0&&v(Lt,Tt,Ct,Tt.length),v(Lt,Tt,0,wt+1)):(wt!==0&&v(At,Tt,wt,Tt.length),v(At,Tt,0,St+1),At.push(dt),Lt.push(dt),v(Lt,Tt,Ct,wt+1));else{if(Ct>St&&(St+=H.length),yt=Number.MAX_VALUE,St<Ct)return J;for(var Wt=Ct;Wt<=St;++Wt)u(d(Tt,wt-1),d(Tt,wt),d(Tt,Wt))&&l(d(Tt,wt+1),d(Tt,wt),d(Tt,Wt))&&(gt=r(d(Tt,wt),d(Tt,Wt)),gt<yt&&R(Tt,wt,Wt)&&(yt=gt,bt=Wt%H.length));wt<bt?(v(At,Tt,wt,bt+1),bt!==0&&v(Lt,Tt,bt,Et.length),v(Lt,Tt,0,wt+1)):(wt!==0&&v(At,Tt,wt,Et.length),v(At,Tt,0,bt+1),v(Lt,Tt,bt,wt+1))}return At.length<Lt.length?(z(At,J,Y,_,U,et,nt),z(Lt,J,Y,_,U,et,nt)):(z(Lt,J,Y,_,U,et,nt),z(At,J,Y,_,U,et,nt)),J}return J.push(H),J}function $(H,J){for(var Y=0,_=H.length-1;H.length>3&&_>=0;--_)f(d(H,_-1),d(H,_),d(H,_+1),J)&&(H.splice(_%H.length,1),Y++);return Y}function Q(H,J){for(var Y=H.length-1;Y>=1;--Y)for(var _=H[Y],U=Y-1;U>=0;--U)if(tt(_,H[U],J)){H.splice(Y,1);continue}}function Z(H,J,Y){return Y=Y||0,Math.abs(H-J)<=Y}function tt(H,J,Y){return Z(H[0],J[0],Y)&&Z(H[1],J[1],Y)}},52018:(S,w,s)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var c=s(83419),y=new c({initialize:function(h){this.pluginManager=h,this.game=h.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});S.exports=y},42363:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};S.exports=w},37277:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={},s={},c={};c.register=function(y,u,h,l){l===void 0&&(l=!1),w[y]={plugin:u,mapping:h,custom:l}},c.registerCustom=function(y,u,h,l){s[y]={plugin:u,mapping:h,data:l}},c.hasCore=function(y){return w.hasOwnProperty(y)},c.hasCustom=function(y){return s.hasOwnProperty(y)},c.getCore=function(y){return w[y]},c.getCustom=function(y){return s[y]},c.getCustomClass=function(y){return s.hasOwnProperty(y)?s[y].plugin:null},c.remove=function(y){w.hasOwnProperty(y)&&delete w[y]},c.removeCustom=function(y){s.hasOwnProperty(y)&&delete s[y]},c.destroyCorePlugins=function(){for(var y in w)w.hasOwnProperty(y)&&delete w[y]},c.destroyCustomPlugins=function(){for(var y in s)s.hasOwnProperty(y)&&delete s[y]},S.exports=c},77332:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(8443),u=s(50792),h=s(74099),l=s(44603),n=s(39429),o=s(95540),f=s(37277),r=s(72905),d=s(8054),p=new c({Extends:u,initialize:function(g){u.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted||g.config.renderType===d.HEADLESS?this.boot():g.events.once(y.BOOT,this.boot,this)},boot:function(){var v,g,m,T,P,M,b,R=this.game.config,A=R.installGlobalPlugins;for(A=A.concat(this._pendingGlobal),v=0;v<A.length;v++)g=A[v],m=o(g,"key",null),T=o(g,"plugin",null),P=o(g,"start",!1),M=o(g,"mapping",null),b=o(g,"data",null),m&&(T?this.install(m,T,P,M,b):console.warn("Missing `plugin` for key: "+m));for(A=R.installScenePlugins,A=A.concat(this._pendingScene),v=0;v<A.length;v++)g=A[v],m=o(g,"key",null),T=o(g,"plugin",null),M=o(g,"mapping",null),m&&(T?this.installScenePlugin(m,T,M):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(y.DESTROY,this.destroy,this)},addToScene:function(v,g,m){var T,P,M,b=this.game,R=v.scene,A=v.settings.map,D=v.settings.isBooted;for(T=0;T<g.length;T++)P=g[T],b[P]?(v[P]=b[P],A.hasOwnProperty(P)&&(R[A[P]]=v[P])):P==="game"&&A.hasOwnProperty(P)&&(R[A[P]]=b);for(var G=0;G<m.length;G++)for(M=m[G],T=0;T<M.length;T++)if(P=M[T],!!f.hasCore(P)){var F=f.getCore(P),B=F.mapping,N=new F.plugin(R,this,B);v[B]=N,F.custom?R[B]=N:A.hasOwnProperty(B)&&(R[A[B]]=N),D&&N.boot()}for(M=this.plugins,T=0;T<M.length;T++){var z=M[T];z.mapping&&(R[z.mapping]=z.plugin)}},getDefaultScenePlugins:function(){var v=this.game.config.defaultPlugins;return v=v.concat(this.scenePlugins),v},installScenePlugin:function(v,g,m,T,P){if(P===void 0&&(P=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+v);return}if(f.hasCore(v)||f.register(v,g,m,!0),this.scenePlugins.indexOf(v)===-1)this.scenePlugins.push(v);else if(!P&&f.hasCore(v)){console.warn("Scene Plugin key in use: "+v);return}if(T){var M=new g(T,this,v);T.sys[v]=M,m&&m!==""&&(T[m]=M),M.boot()}},install:function(v,g,m,T,P){if(m===void 0&&(m=!1),T===void 0&&(T=null),P===void 0&&(P=null),typeof g!="function")return console.warn("Invalid Plugin: "+v),null;if(f.hasCustom(v))return console.warn("Plugin key in use: "+v),null;if(T!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:v,plugin:g,start:m,mapping:T,data:P});else if(f.registerCustom(v,g,T,P),m)return this.start(v);return null},getIndex:function(v){for(var g=this.plugins,m=0;m<g.length;m++){var T=g[m];if(T.key===v)return m}return-1},getEntry:function(v){var g=this.getIndex(v);if(g!==-1)return this.plugins[g]},isActive:function(v){var g=this.getEntry(v);return g&&g.active},start:function(v,g){g===void 0&&(g=v);var m=this.getEntry(g);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(v,g)),m?m.plugin:null},createEntry:function(v,g){var m=f.getCustom(v);if(m){var T=new m.plugin(this);m={key:g,plugin:T,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),T.init(m.data),T.start()}return m},stop:function(v){var g=this.getEntry(v);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(v,g){g===void 0&&(g=!0);var m=this.getEntry(v);if(m)return m.plugin;var T=this.getClass(v);return T&&g?(m=this.createEntry(v,v),m?m.plugin:null):T||null},getClass:function(v){return f.getCustomClass(v)},removeGlobalPlugin:function(v){var g=this.getEntry(v);g&&r(this.plugins,g),f.removeCustom(v)},removeScenePlugin:function(v){r(this.scenePlugins,v),f.remove(v)},registerGameObject:function(v,g,m){return g&&n.register(v,g),m&&l.register(v,m),this},removeGameObject:function(v,g,m){return g===void 0&&(g=!0),m===void 0&&(m=!0),g&&n.remove(v),m&&l.remove(v),this},registerFileType:function(v,g,m){h.register(v,g),m&&m.sys.load&&(m.sys.load[v]=g)},destroy:function(){for(var v=0;v<this.plugins.length;v++)this.plugins[v].plugin.destroy();f.destroyCustomPlugins(),this.game.noReturn&&f.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});S.exports=p},45145:(S,w,s)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var c=s(52018),y=s(83419),u=s(44594),h=new y({Extends:c,initialize:function(n,o,f){c.call(this,o),this.scene=n,this.systems=n.sys,this.pluginKey=f,n.sys.events.once(u.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});S.exports=h},18922:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={BasePlugin:s(52018),DefaultPlugins:s(42363),PluginCache:s(37277),PluginManager:s(77332),ScenePlugin:s(45145)}},63595:()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(S){const w=performance.now(),s=this.getVideoPlaybackQuality(),c=this.mozPresentedFrames||this.mozPaintedFrames||s.totalVideoFrames-s.droppedVideoFrames,y=(u,h)=>{const l=this.getVideoPlaybackQuality(),n=this.mozPresentedFrames||this.mozPaintedFrames||l.totalVideoFrames-l.droppedVideoFrames;if(n>c){const o=this.mozFrameDelay||l.totalFrameDelay-s.totalFrameDelay||0,f=h-u;S(h,{presentationTime:h+o*1e3,expectedDisplayTime:h+f,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+f/1e3,presentedFrames:n,processingDuration:o}),delete this._rvfcpolyfillmap[w]}else this._rvfcpolyfillmap[w]=requestAnimationFrame(o=>y(h,o))};return this._rvfcpolyfillmap[w]=requestAnimationFrame(u=>y(w,u)),w},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(S){cancelAnimationFrame(this._rvfcpolyfillmap[S]),delete this._rvfcpolyfillmap[S]})},10312:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29795:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={DEFAULT:0,LINEAR:0,NEAREST:1};S.exports=w},68627:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(19715),y=s(32880),u=s(83419),h=s(8054),l=s(50792),n=s(92503),o=s(56373),f=s(97480),r=s(69442),d=s(8443),p=s(61340),v=new u({Extends:l,initialize:function(m){l.call(this);var T=m.config;this.config={clearBeforeRender:T.clearBeforeRender,backgroundColor:T.backgroundColor,antialias:T.antialias,roundPixels:T.roundPixels,transparent:T.transparent},this.game=m,this.type=h.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var P={alpha:T.transparent,desynchronized:T.desynchronized,willReadFrequently:!1};this.gameContext=T.context?T.context:this.gameCanvas.getContext("2d",P),this.currentContext=this.gameContext,this.antialias=T.antialias,this.blendModes=o(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new p,this._tempMatrix2=new p,this._tempMatrix3=new p,this.isBooted=!1,this.init()},init:function(){var g=this.game;g.events.once(d.BOOT,function(){var m=this.config;if(!m.transparent){var T=this.gameContext,P=this.gameCanvas;T.fillStyle=m.backgroundColor.rgba,T.fillRect(0,0,P.width,P.height)}},this),g.textures.once(r.READY,this.boot,this)},boot:function(){var g=this.game,m=g.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,g.scale.on(f.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(g,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(g,m){this.width=g,this.height=m,this.emit(n.RESIZE,g,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,m=this.config,T=this.width,P=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),this.emit(n.PRE_RENDER_CLEAR),m.clearBeforeRender&&(g.clearRect(0,0,T,P),m.transparent||(g.fillStyle=m.backgroundColor.rgba,g.fillRect(0,0,T,P))),g.save(),this.drawCount=0,this.emit(n.PRE_RENDER)},render:function(g,m,T){var P=m.length;this.emit(n.RENDER,g,T);var M=T.x,b=T.y,R=T.width,A=T.height,D=T.renderToTexture?T.context:g.sys.context;D.save(),this.game.scene.customViewports&&(D.beginPath(),D.rect(M,b,R,A),D.clip()),T.emit(c.PRE_RENDER,T),this.currentContext=D;var G=T.mask;G&&G.preRenderCanvas(this,null,T._maskCamera),T.transparent||(D.fillStyle=T.backgroundColor.rgba,D.fillRect(M,b,R,A)),D.globalAlpha=T.alpha,D.globalCompositeOperation="source-over",this.drawCount+=P,T.renderToTexture&&T.emit(c.PRE_RENDER,T),T.matrix.copyToContext(D);for(var F=0;F<P;F++){var B=m[F];B.mask&&B.mask.preRenderCanvas(this,B,T),B.renderCanvas(this,B,T),B.mask&&B.mask.postRenderCanvas(this,B,T)}D.setTransform(1,0,0,1,0,0),D.globalCompositeOperation="source-over",D.globalAlpha=1,T.flashEffect.postRenderCanvas(D),T.fadeEffect.postRenderCanvas(D),T.dirty=!1,G&&G.postRenderCanvas(this),D.restore(),T.renderToTexture&&(T.emit(c.POST_RENDER,T),T.renderToGame&&g.sys.context.drawImage(T.canvas,M,b)),T.emit(c.POST_RENDER,T)},postRender:function(){var g=this.gameContext;g.restore(),this.emit(n.POST_RENDER);var m=this.snapshotState;m.callback&&(y(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(g,m,T,P,M,b,R,A,D){T===void 0&&(T=!1),this.snapshotArea(P,M,b,R,m,A,D);var G=this.snapshotState;return G.getPixel=T,y(g,G),G.callback=null,this},snapshot:function(g,m,T){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,m,T)},snapshotArea:function(g,m,T,P,M,b,R){var A=this.snapshotState;return A.callback=M,A.type=b,A.encoder=R,A.getPixel=!1,A.x=g,A.y=m,A.width=Math.min(T,this.gameCanvas.width),A.height=Math.min(P,this.gameCanvas.height),this},snapshotPixel:function(g,m,T){return this.snapshotArea(g,m,1,1,T),this.snapshotState.getPixel=!0,this},batchSprite:function(g,m,T,P){var M=T.alpha*g.alpha;if(M!==0){var b=this.currentContext,R=this._tempMatrix1,A=this._tempMatrix2,D=m.canvasData,G=D.x,F=D.y,B=m.cutWidth,N=m.cutHeight,z=m.customPivot,$=m.source.resolution,Q=g.displayOriginX,Z=g.displayOriginY,tt=-Q+m.x,H=-Z+m.y;if(g.isCropped){var J=g._crop;(J.flipX!==g.flipX||J.flipY!==g.flipY)&&m.updateCropUVs(J,g.flipX,g.flipY),B=J.cw,N=J.ch,G=J.cx,F=J.cy,tt=-Q+J.x,H=-Z+J.y,g.flipX&&(tt>=0?tt=-(tt+B):tt<0&&(tt=Math.abs(tt)-B)),g.flipY&&(H>=0?H=-(H+N):H<0&&(H=Math.abs(H)-N))}var Y=1,_=1;g.flipX&&(z||(tt+=-m.realWidth+Q*2),Y=-1),g.flipY&&(z||(H+=-m.realHeight+Z*2),_=-1);var U=g.x,et=g.y;if(T.roundPixels&&(U=Math.floor(U),et=Math.floor(et)),A.applyITRS(U,et,g.rotation,g.scaleX*Y,g.scaleY*_),R.copyFrom(T.matrix),P?(R.multiplyWithOffset(P,-T.scrollX*g.scrollFactorX,-T.scrollY*g.scrollFactorY),A.e=U,A.f=et):(A.e-=T.scrollX*g.scrollFactorX,A.f-=T.scrollY*g.scrollFactorY),R.multiply(A),T.renderRoundPixels&&(R.e=Math.floor(R.e+.5),R.f=Math.floor(R.f+.5)),b.save(),R.setToContext(b),b.globalCompositeOperation=this.blendModes[g.blendMode],b.globalAlpha=M,b.imageSmoothingEnabled=!m.source.scaleMode,g.mask&&g.mask.preRenderCanvas(this,g,T),B>0&&N>0){var nt=B/$,rt=N/$;T.roundPixels&&(tt=Math.floor(tt+.5),H=Math.floor(H+.5),nt+=.5,rt+=.5),b.drawImage(m.source.image,G,F,B,N,tt,H,nt,rt)}g.mask&&g.mask.postRenderCanvas(this,g,T),b.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});S.exports=v},55830:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={CanvasRenderer:s(68627),GetBlendModes:s(56373),SetTransform:s(20926)}},56373:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(10312),y=s(89289),u=function(){var h=[],l=y.supportNewBlendModes,n="source-over";return h[c.NORMAL]=n,h[c.ADD]="lighter",h[c.MULTIPLY]=l?"multiply":n,h[c.SCREEN]=l?"screen":n,h[c.OVERLAY]=l?"overlay":n,h[c.DARKEN]=l?"darken":n,h[c.LIGHTEN]=l?"lighten":n,h[c.COLOR_DODGE]=l?"color-dodge":n,h[c.COLOR_BURN]=l?"color-burn":n,h[c.HARD_LIGHT]=l?"hard-light":n,h[c.SOFT_LIGHT]=l?"soft-light":n,h[c.DIFFERENCE]=l?"difference":n,h[c.EXCLUSION]=l?"exclusion":n,h[c.HUE]=l?"hue":n,h[c.SATURATION]=l?"saturation":n,h[c.COLOR]=l?"color":n,h[c.LUMINOSITY]=l?"luminosity":n,h[c.ERASE]="destination-out",h[c.SOURCE_IN]="source-in",h[c.SOURCE_OUT]="source-out",h[c.SOURCE_ATOP]="source-atop",h[c.DESTINATION_OVER]="destination-over",h[c.DESTINATION_IN]="destination-in",h[c.DESTINATION_OUT]="destination-out",h[c.DESTINATION_ATOP]="destination-atop",h[c.LIGHTER]="lighter",h[c.COPY]="copy",h[c.XOR]="xor",h};S.exports=u},20926:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91296),y=function(u,h,l,n,o){var f=n.alpha*l.alpha;if(f<=0)return!1;var r=c(l,n,o).calc;return h.globalCompositeOperation=u.blendModes[l.blendMode],h.globalAlpha=f,h.save(),r.setToContext(h),h.imageSmoothingEnabled=l.frame?!l.frame.source.scaleMode:u.antialias,!0};S.exports=y},63899:S=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="losewebgl"},6119:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="postrender"},48070:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="prerender"},15640:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="render"},8912:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="resize"},87124:S=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="restorewebgl"},92503:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={LOSE_WEBGL:s(63899),POST_RENDER:s(6119),PRE_RENDER:s(48070),RENDER:s(15640),RESIZE:s(8912),RESTORE_WEBGL:s(87124)}},36909:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Events:s(92503),Snapshot:s(89966)},S.exports.Canvas=s(55830),S.exports.WebGL=s(4159)},32880:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(27919),y=s(40987),u=s(95540),h=function(l,n){var o=u(n,"callback"),f=u(n,"type","image/png"),r=u(n,"encoder",.92),d=Math.abs(Math.round(u(n,"x",0))),p=Math.abs(Math.round(u(n,"y",0))),v=Math.floor(u(n,"width",l.width)),g=Math.floor(u(n,"height",l.height)),m=u(n,"getPixel",!1);if(m){var T=l.getContext("2d",{willReadFrequently:!1}),P=T.getImageData(d,p,1,1),M=P.data;o.call(null,new y(M[0],M[1],M[2],M[3]))}else if(d!==0||p!==0||v!==l.width||g!==l.height){var b=c.createWebGL(this,v,g),R=b.getContext("2d",{willReadFrequently:!0});v>0&&g>0&&R.drawImage(l,d,p,v,g,0,0,v,g);var A=new Image;A.onerror=function(){o.call(null),c.remove(b)},A.onload=function(){o.call(null,A),c.remove(b)},A.src=b.toDataURL(f,r)}else{var D=new Image;D.onerror=function(){o.call(null)},D.onload=function(){o.call(null,D)},D.src=l.toDataURL(f,r)}};S.exports=h},88815:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(27919),y=s(40987),u=s(95540),h=function(l,n){var o=l,f=u(n,"callback"),r=u(n,"type","image/png"),d=u(n,"encoder",.92),p=Math.abs(Math.round(u(n,"x",0))),v=Math.abs(Math.round(u(n,"y",0))),g=u(n,"getPixel",!1),m=u(n,"isFramebuffer",!1),T=m?u(n,"bufferWidth",1):o.drawingBufferWidth,P=m?u(n,"bufferHeight",1):o.drawingBufferHeight;if(g){var M=new Uint8Array(4),b=m?v:P-v;o.readPixels(p,b,1,1,o.RGBA,o.UNSIGNED_BYTE,M),f.call(null,new y(M[0],M[1],M[2],M[3]))}else{var R=Math.floor(u(n,"width",T)),A=Math.floor(u(n,"height",P)),D=R*A*4,G=new Uint8Array(D);o.readPixels(p,P-v-A,R,A,o.RGBA,o.UNSIGNED_BYTE,G);for(var F=c.createWebGL(this,R,A),B=F.getContext("2d",{willReadFrequently:!0}),N=B.getImageData(0,0,R,A),z=N.data,$=0;$<A;$++)for(var Q=0;Q<R;Q++){var Z=((A-$-1)*R+Q)*4,tt=m?D-($*R+(R-Q))*4:($*R+Q)*4;z[tt+0]=G[Z+0],z[tt+1]=G[Z+1],z[tt+2]=G[Z+2],z[tt+3]=G[Z+3]}B.putImageData(N,0,0);var H=new Image;H.onerror=function(){f.call(null),c.remove(F)},H.onload=function(){f.call(null,H),c.remove(F)},H.src=F.toDataURL(r,d)}};S.exports=h},89966:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Canvas:s(32880),WebGL:s(88815)}},7530:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(36060),u=s(90330),h=s(82264),l=s(95540),n=s(32302),o=s(63448),f=s(31302),r=s(58918),d=s(14811),p=s(92651),v=s(96569),g=s(56527),m=s(57516),T=s(43439),P=s(81041),M=s(12385),b=s(7589),R=s(95428),A=s(72905),D=new c({initialize:function(F){this.game=F.game,this.renderer=F,this.classes=new u([[y.UTILITY_PIPELINE,b],[y.MULTI_PIPELINE,m],[y.BITMAPMASK_PIPELINE,f],[y.SINGLE_PIPELINE,M],[y.ROPE_PIPELINE,P],[y.LIGHT_PIPELINE,v],[y.POINTLIGHT_PIPELINE,T],[y.MOBILE_PIPELINE,g]]),this.postPipelineClasses=new u,this.pipelines=new u,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(G,F,B){var N=this.renderer,z=this.renderTargets;this.frameInc=Math.floor(l(G,"frameInc",32));var $=N.width,Q=N.height,Z=this.game.config.disablePreFX,tt=this.game.config.disablePostFX;if(tt||this.postPipelineClasses.setAll([[String(d.BARREL),r.Barrel],[String(d.BLOOM),r.Bloom],[String(d.BLUR),r.Blur],[String(d.BOKEH),r.Bokeh],[String(d.CIRCLE),r.Circle],[String(d.COLOR_MATRIX),r.ColorMatrix],[String(d.DISPLACEMENT),r.Displacement],[String(d.GLOW),r.Glow],[String(d.GRADIENT),r.Gradient],[String(d.PIXELATE),r.Pixelate],[String(d.SHADOW),r.Shadow],[String(d.SHINE),r.Shine],[String(d.VIGNETTE),r.Vignette],[String(d.WIPE),r.Wipe]]),!Z){this.classes.set(y.FX_PIPELINE,p);for(var H=Math.min($,Q),J=Math.ceil(H/this.frameInc),Y=1;Y<J;Y++){var _=Y*this.frameInc;z.push(new n(N,_,_)),z.push(new n(N,_,_)),z.push(new n(N,_,_)),this.maxDimension=_}z.push(new n(N,$,Q,1,0,!0,!0)),z.push(new n(N,$,Q,1,0,!0,!0)),z.push(new n(N,$,Q,1,0,!0,!0))}var U,et,nt=this,rt=this.game;if(this.classes.each(function(dt,vt){U=nt.add(dt,new vt({game:rt})),dt===y.UTILITY_PIPELINE&&(nt.UTILITY_PIPELINE=U,nt.fullFrame1=U.fullFrame1,nt.fullFrame2=U.fullFrame2,nt.halfFrame1=U.halfFrame1,nt.halfFrame2=U.halfFrame2)}),this.MULTI_PIPELINE=this.get(y.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(y.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(y.MOBILE_PIPELINE),Z||(this.FX_PIPELINE=this.get(y.FX_PIPELINE)),G)for(et in G){var ot=G[et];U=new ot(rt),U.name=et,U.isPostFX?this.postPipelineClasses.set(et,ot):this.has(et)||(this.classes.set(et,ot),this.add(et,U))}this.default=this.get(F),B&&!h.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(G){var F=this.get(G);return F&&(this.default=F),F},add:function(G,F){if(F.isPostFX){console.warn(G+" is a Post Pipeline. Use `addPostPipeline` instead");return}var B=this.pipelines,N=this.renderer;return B.has(G)?console.warn("Pipeline exists: "+G):(F.name=G,F.manager=this,B.set(G,F)),F.hasBooted||F.boot(),N.width!==0&&N.height!==0&&!F.isPreFX&&F.resize(N.width,N.height),F},addPostPipeline:function(G,F){this.postPipelineClasses.has(G)||this.postPipelineClasses.set(G,F)},flush:function(){this.current&&this.current.flush()},has:function(G){var F=this.pipelines;return typeof G=="string"?F.has(G):!!F.contains(G)},get:function(G){var F=this.pipelines;if(typeof G=="string")return F.get(G);if(F.contains(G))return G},getPostPipeline:function(G,F,B){var N=this.postPipelineClasses,z,$="",Q=typeof G;if(Q==="string"||Q==="number"?(z=N.get(G),$=G):Q==="function"?(N.contains(G)&&(z=G),$=G.name):Q==="object"&&(z=N.get(G.name),$=G.name),z){var Z=new z(this.game,B);return Z.name=$,F&&(Z.gameObject=F),this.postPipelineInstances.push(Z),Z}},removePostPipeline:function(G){A(this.postPipelineInstances,G)},remove:function(G,F,B){F===void 0&&(F=!0),B===void 0&&(B=!0),this.pipelines.delete(G),F&&this.classes.delete(G),B&&this.postPipelineClasses.delete(G)},set:function(G,F,B){if(!G.isPostFX)return this.isCurrent(G,B)||(this.flush(),this.current&&this.current.unbind(),this.current=G,G.bind(B)),G.updateProjectionMatrix(),G.onBind(F),G},preBatch:function(G){if(G.hasPostPipeline){this.flush();for(var F=G.postPipelines,B=F.length-1;B>=0;B--){var N=F[B];N.active&&N.preBatch(G)}}},postBatch:function(G){if(G.hasPostPipeline){this.flush();for(var F=G.postPipelines,B=0;B<F.length;B++){var N=F[B];N.active&&N.postBatch(G)}}},preBatchCamera:function(G){if(G.hasPostPipeline){this.flush();for(var F=G.postPipelines,B=F.length-1;B>=0;B--){var N=F[B];N.active&&N.preBatch(G)}}},postBatchCamera:function(G){if(G.hasPostPipeline){this.flush();for(var F=G.postPipelines,B=0;B<F.length;B++){var N=F[B];N.active&&N.postBatch(G)}}},isCurrent:function(G,F){var B=this.renderer,N=this.current;return N&&!F&&(F=N.currentShader),!(N!==G||F.program!==B.currentProgram)},copyFrame:function(G,F,B,N,z){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(G,F,B,N,z),this},copyToGame:function(G){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(G),this},drawFrame:function(G,F,B,N){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(G,F,B,N),this},blendFrames:function(G,F,B,N,z){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(G,F,B,N,z),this},blendFramesAdditive:function(G,F,B,N,z){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(G,F,B,N,z),this},clearFrame:function(G,F){return this.UTILITY_PIPELINE.clearFrame(G,F),this},blitFrame:function(G,F,B,N,z,$){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(G,F,B,N,z,$),this},copyFrameRect:function(G,F,B,N,z,$,Q,Z){return this.UTILITY_PIPELINE.copyFrameRect(G,F,B,N,z,$,Q,Z),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(G){return this.UTILITY_PIPELINE.bind(G)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(G,F){F.restoreContext()}),R(this.postPipelineInstances,function(G){G.restoreContext()})},rebind:function(G){G===void 0&&this.previous&&(G=this.previous);var F=this.renderer,B=F.gl;B.disable(B.DEPTH_TEST),B.disable(B.CULL_FACE),F.hasActiveStencilMask()?B.clear(B.DEPTH_BUFFER_BIT):(B.disable(B.STENCIL_TEST),B.clear(B.DEPTH_BUFFER_BIT|B.STENCIL_BUFFER_BIT)),B.viewport(0,0,F.width,F.height),F.currentProgram=null,F.setBlendMode(0,!0);var N=F.vaoExtension;N&&N.bindVertexArrayOES(null);var z=this.pipelines.entries;for(var $ in z)z[$].glReset=!0;G&&(this.current=G,G.rebind())},clear:function(){var G=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,G.currentProgram=null,G.setBlendMode(0,!0);var F=G.vaoExtension;F&&F.bindVertexArrayOES(null)},getRenderTarget:function(G){var F=this.renderTargets,B=3;if(G>this.maxDimension)return this.targetIndex=F.length-B,F[this.targetIndex];var N=(o(G,this.frameInc,0,!0)-1)*B;return this.targetIndex=N,F[N]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});S.exports=D},32302:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(92503),u=new c({initialize:function(l,n,o,f,r,d,p,v,g){f===void 0&&(f=1),r===void 0&&(r=0),d===void 0&&(d=!0),p===void 0&&(p=!1),v===void 0&&(v=!0),g===void 0&&(g=!0),this.renderer=l,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=f,this.minFilter=r,this.autoClear=d,this.autoResize=!0,this.hasDepthBuffer=v,this.forceClamp=g,this.init(n,o),p?this.renderer.on(y.RESIZE,this.resize,this):this.autoResize=!1},init:function(h,l){var n=this.renderer;this.texture=n.createTextureFromSource(null,h,l,this.minFilter,this.forceClamp),this.framebuffer=n.createFramebuffer(h,l,this.texture,this.hasDepthBuffer),this.width=h,this.height=l},setAutoResize:function(h){return h&&!this.autoResize?(this.renderer.on(y.RESIZE,this.resize,this),this.autoResize=!0):!h&&this.autoResize&&(this.renderer.off(y.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(h,l){if(this.autoResize&&this.willResize(h,l)){var n=this.renderer;n.deleteFramebuffer(this.framebuffer),n.deleteTexture(this.texture),this.texture=n.createTextureFromSource(null,h,l,this.minFilter,this.forceClamp),this.framebuffer=n.createFramebuffer(h,l,this.texture,this.hasDepthBuffer),this.width=h,this.height=l}return this},willResize:function(h,l){return typeof h!="number"||typeof l!="number"?!1:(h=Math.round(h*this.scale),l=Math.round(l*this.scale),h=Math.max(h,1),l=Math.max(l,1),h!==this.width||l!==this.height)},bind:function(h,l,n){h===void 0&&(h=!1);var o=this.renderer;if(h&&o.flush(),l&&n&&this.resize(l,n),o.pushFramebuffer(this.framebuffer,!1,!1),h&&this.adjustViewport(),this.autoClear){var f=this.renderer.gl;f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT)}o.clearStencilMask()},adjustViewport:function(){var h=this.renderer.gl;h.viewport(0,0,this.width,this.height),h.disable(h.SCISSOR_TEST)},clear:function(h,l,n,o){var f=this.renderer,r=f.gl;f.pushFramebuffer(this.framebuffer),h!==void 0&&l!==void 0&&n!==void 0&&o!==void 0?(r.enable(r.SCISSOR_TEST),r.scissor(h,l,n,o)):r.disable(r.SCISSOR_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),f.popFramebuffer(),f.resetScissor()},unbind:function(h){h===void 0&&(h=!1);var l=this.renderer;return h&&l.flush(),l.popFramebuffer()},destroy:function(){var h=this.renderer;h.off(y.RESIZE,this.resize,this),h.deleteFramebuffer(this.framebuffer),h.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});S.exports=u},70554:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={getTintFromFloats:function(w,s,c,y){var u=(w*255|0)&255,h=(s*255|0)&255,l=(c*255|0)&255,n=(y*255|0)&255;return(n<<24|u<<16|h<<8|l)>>>0},getTintAppendFloatAlpha:function(w,s){var c=(s*255|0)&255;return(c<<24|w)>>>0},getTintAppendFloatAlphaAndSwap:function(w,s){var c=(w>>16|0)&255,y=(w>>8|0)&255,u=(w|0)&255,h=(s*255|0)&255;return(h<<24|u<<16|y<<8|c)>>>0},getFloatsFromUintRGB:function(w){var s=(w>>16|0)&255,c=(w>>8|0)&255,y=(w|0)&255;return[s/255,c/255,y/255]},checkShaderMax:function(w,s){var c=Math.min(16,w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS));return!s||s===-1?c:Math.min(c,s)},parseFragmentShaderMaxTextures:function(w,s){if(!w)return"";for(var c="",y=0;y<s;y++)y>0&&(c+=`
	else `),y<s-1&&(c+="if (outTexId < "+y+".5)"),c+=`
	{`,c+=`
		texture = texture2D(uMainSampler[`+y+"], outTexCoord);",c+=`
	}`;return w=w.replace(/%count%/gi,s.toString()),w.replace(/%forloop%/gi,c)},setGlowQuality:function(w,s,c,y){return c===void 0&&(c=s.config.glowFXQuality),y===void 0&&(y=s.config.glowFXDistance),w=w.replace(/__SIZE__/gi,(1/c/y).toFixed(7)),w=w.replace(/__DIST__/gi,y.toFixed(0)+".0"),w}}},29100:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(62644),u=s(50792),h=s(77085),l=s(95540),n=s(37867),o=s(92503),f=s(32302),r=s(70554),d=s(38683),p=new c({Extends:u,initialize:function(g){u.call(this);var m=g.game,T=m.renderer,P=T.gl;this.name=l(g,"name","WebGLPipeline"),this.game=m,this.renderer=T,this.manager,this.gl=P,this.view=m.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=l(g,"topology",P.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=l(g,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=g,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=l(g,"resizeUniform","")},boot:function(){var v,g=this.gl,m=this.config,T=this.renderer;this.isPostFX||(this.projectionMatrix=new n().identity());var P=this.renderTargets,M=l(m,"renderTarget",!1);typeof M=="boolean"&&M&&(M=1);var b=T.width,R=T.height;if(typeof M=="number")for(v=0;v<M;v++)P.push(new f(T,b,R,1,0,!0));else if(Array.isArray(M))for(v=0;v<M.length;v++){var A=l(M[v],"scale",1),D=l(M[v],"minFilter",0),G=l(M[v],"autoClear",1),F=l(M[v],"autoResize",!1),B=l(M[v],"width",null),N=l(M[v],"height",B);B?P.push(new f(T,B,N,1,D,G,F)):P.push(new f(T,b,R,A,D,G,F))}P.length&&(this.currentRenderTarget=P[0]),this.setShadersFromConfig(m);var z=this.shaders,$=0;for(v=0;v<z.length;v++)z[v].vertexSize>$&&($=z[v].vertexSize);var Q=l(m,"batchSize",T.config.batchSize);this.vertexCapacity=Q*6;var Z=new ArrayBuffer(this.vertexCapacity*$);this.vertexData=Z,this.bytes=new Uint8Array(Z),this.vertexViewF32=new Float32Array(Z),this.vertexViewU32=new Uint32Array(Z);var tt=l(m,"vertices",null);for(tt?(this.vertexViewF32.set(tt),this.vertexBuffer=T.createVertexBuffer(Z,g.STATIC_DRAW)):this.vertexBuffer=T.createVertexBuffer(Z.byteLength,g.DYNAMIC_DRAW),this.setVertexBuffer(),v=z.length-1;v>=0;v--)z[v].rebind();this.hasBooted=!0,T.on(o.RESIZE,this.resize,this),T.on(o.PRE_RENDER,this.onPreRender,this),T.on(o.RENDER,this.onRender,this),T.on(o.POST_RENDER,this.onPostRender,this),this.emit(h.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(v,g,m){var T=this.renderer;if(v!==this.currentShader||T.currentProgram!==this.currentShader.program){this.flush();var P=this.setVertexBuffer(m);P&&!g&&(g=!0),v.bind(g,!1),this.currentShader=v}return this},getShaderByName:function(v){for(var g=this.shaders,m=0;m<g.length;m++)if(g[m].name===v)return g[m]},setShadersFromConfig:function(v){var g,m=this.shaders,T=this.renderer;for(g=0;g<m.length;g++)m[g].destroy();var P="vertShader",M="fragShader",b="attributes",R=l(v,P,null),A=r.parseFragmentShaderMaxTextures(l(v,M,null),T.maxTextures),D=l(v,b,null),G=l(v,"shaders",[]),F=G.length;if(F===0)R&&A&&(this.shaders=[new d(this,"default",R,A,y(D))]);else{var B=[];for(g=0;g<F;g++){var N=G[g],z,$,Q,Z;if(typeof N=="string"?(z="default",$=R,Q=r.parseFragmentShaderMaxTextures(N,T.maxTextures),Z=D):(z=l(N,"name","default"),$=l(N,P,R),Q=r.parseFragmentShaderMaxTextures(l(N,M,A),T.maxTextures),Z=l(N,b,D)),z==="default"){var tt=Q.split(`
`),H=tt[0].trim();H.indexOf("#define SHADER_NAME")>-1&&(z=H.substring(20))}$&&Q&&B.push(new d(this,z,$,Q,y(Z)))}this.shaders=B}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(v){return this.currentBatch={start:this.vertexCount,count:0,texture:[v],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=v,this.batch.push(this.currentBatch),0},addTextureToBatch:function(v){var g=this.currentBatch;g&&(g.texture.push(v),g.unit++,g.maxUnit++)},pushBatch:function(v){if(!this.currentBatch||this.forceZero&&v!==this.currentTexture)return this.createBatch(v);if(v===this.currentTexture)return this.currentUnit;var g=this.currentBatch,m=g.texture.indexOf(v);return m===-1?g.texture.length===this.renderer.maxTextures?this.createBatch(v):(g.unit++,g.maxUnit++,g.texture.push(v),this.currentUnit=g.unit,this.currentTexture=v,g.unit):(this.currentUnit=m,this.currentTexture=v,m)},setGameObject:function(v,g){return g===void 0&&(g=v.frame),this.pushBatch(g.source.glTexture)},shouldFlush:function(v){return v===void 0&&(v=0),this.vertexCount+v>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(v,g){(v!==this.width||g!==this.height)&&this.flush(),this.width=v,this.height=g;for(var m=this.renderTargets,T=0;T<m.length;T++)m[T].resize(v,g);return this.setProjectionMatrix(v,g),this.resizeUniform&&this.set2f(this.resizeUniform,v,g),this.emit(h.RESIZE,v,g,this),this.onResize(v,g),this},setProjectionMatrix:function(v,g){var m=this.projectionMatrix;if(!m)return this;this.projectionWidth=v,this.projectionHeight=g,m.ortho(0,v,g,0,-1e3,1e3);for(var T=this.shaders,P="uProjectionMatrix",M=0;M<T.length;M++){var b=T[M];b.hasUniform(P)&&(b.resetUniform(P),b.setMatrix4fv(P,!1,m.val,b))}return this},flipProjectionMatrix:function(v){v===void 0&&(v=!0);var g=this.projectionMatrix;if(!g)return this;var m=this.projectionWidth,T=this.projectionHeight;v?g.ortho(0,m,0,T,-1e3,1e3):g.ortho(0,m,T,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,g.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var v=this.renderer.projectionWidth,g=this.renderer.projectionHeight;(this.projectionWidth!==v||this.projectionHeight!==g)&&this.setProjectionMatrix(v,g)}},bind:function(v){if(v===void 0&&(v=this.currentShader),this.glReset)return this.rebind(v);var g=!1,m=this.gl;return m.getParameter(m.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(m.bindBuffer(m.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,g=!0),v.bind(g),this.currentShader=v,this.activeTextures.length=0,this.emit(h.BIND,this,v),this.onActive(v),this},rebind:function(v){this.activeBuffer=null,this.setVertexBuffer();for(var g=this.shaders,m=g.length-1;m>=0;m--){var T=g[m].rebind();(!v||T===v)&&(this.currentShader=T)}return this.activeTextures.length=0,this.emit(h.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var v=this.shaders,g=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,g&&this.setVertexBuffer();for(var m=0;m<v.length;m++){var T=v[m];T.syncUniforms(),g&&T.rebind()}},setVertexBuffer:function(v){if(v===void 0&&(v=this.vertexBuffer),v!==this.activeBuffer){var g=this.gl;return this.gl.bindBuffer(g.ARRAY_BUFFER,v.webGLBuffer),this.activeBuffer=v,!0}return!1},preBatch:function(v){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(v),this},postBatch:function(v){return this.onDraw(this.currentRenderTarget),this.onPostBatch(v),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(v){if(v===void 0&&(v=!1),this.vertexCount>0){this.emit(h.BEFORE_FLUSH,this,v),this.onBeforeFlush(v);var g=this.gl,m=this.vertexCount,T=this.currentShader.vertexSize,P=this.topology;if(this.active){this.setVertexBuffer(),m===this.vertexCapacity?g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.DYNAMIC_DRAW):g.bufferSubData(g.ARRAY_BUFFER,0,this.bytes.subarray(0,m*T));var M,b,R,A=this.batch,D=this.activeTextures;if(this.forceZero)for(D[0]||g.activeTexture(g.TEXTURE0),M=0;M<A.length;M++)b=A[M],R=b.texture[0],D[0]!==R&&(g.bindTexture(g.TEXTURE_2D,R.webGLTexture),D[0]=R),g.drawArrays(P,b.start,b.count);else for(M=0;M<A.length;M++){b=A[M];for(var G=0;G<=b.maxUnit;G++)R=b.texture[G],D[G]!==R&&(g.activeTexture(g.TEXTURE0+G),g.bindTexture(g.TEXTURE_2D,R.webGLTexture),D[G]=R);g.drawArrays(P,b.start,b.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(h.AFTER_FLUSH,this,v),this.onAfterFlush(v)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(v,g,m,T,P,M,b){var R=this.vertexViewF32,A=this.vertexViewU32,D=this.vertexCount*this.currentShader.vertexComponentCount-1;R[++D]=v,R[++D]=g,R[++D]=m,R[++D]=T,R[++D]=P,R[++D]=M,A[++D]=b,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(v,g,m,T,P,M,b,R,A,D,G,F,B,N,z,$,Q,Z,tt,H){H===void 0&&(H=this.currentUnit);var J=!1;this.shouldFlush(6)&&(this.flush(),J=!0),this.currentBatch||(H=this.setTexture2D(tt));var Y=this.vertexViewF32,_=this.vertexViewU32,U=this.vertexCount*this.currentShader.vertexComponentCount-1;return Y[++U]=g,Y[++U]=m,Y[++U]=D,Y[++U]=G,Y[++U]=H,Y[++U]=Z,_[++U]=N,Y[++U]=T,Y[++U]=P,Y[++U]=D,Y[++U]=B,Y[++U]=H,Y[++U]=Z,_[++U]=$,Y[++U]=M,Y[++U]=b,Y[++U]=F,Y[++U]=B,Y[++U]=H,Y[++U]=Z,_[++U]=Q,Y[++U]=g,Y[++U]=m,Y[++U]=D,Y[++U]=G,Y[++U]=H,Y[++U]=Z,_[++U]=N,Y[++U]=M,Y[++U]=b,Y[++U]=F,Y[++U]=B,Y[++U]=H,Y[++U]=Z,_[++U]=Q,Y[++U]=R,Y[++U]=A,Y[++U]=F,Y[++U]=G,Y[++U]=H,Y[++U]=Z,_[++U]=z,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(v),J},batchTri:function(v,g,m,T,P,M,b,R,A,D,G,F,B,N,z,$,Q){Q===void 0&&(Q=this.currentUnit);var Z=!1;this.shouldFlush(3)&&(this.flush(),Z=!0),this.currentBatch||(Q=this.setTexture2D($));var tt=this.vertexViewF32,H=this.vertexViewU32,J=this.vertexCount*this.currentShader.vertexComponentCount-1;return tt[++J]=g,tt[++J]=m,tt[++J]=R,tt[++J]=A,tt[++J]=Q,tt[++J]=z,H[++J]=F,tt[++J]=T,tt[++J]=P,tt[++J]=R,tt[++J]=G,tt[++J]=Q,tt[++J]=z,H[++J]=B,tt[++J]=M,tt[++J]=b,tt[++J]=D,tt[++J]=G,tt[++J]=Q,tt[++J]=z,H[++J]=N,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(v),Z},drawFillRect:function(v,g,m,T,P,M,b,R){b===void 0&&(b=this.renderer.whiteTexture),R===void 0&&(R=!0),v=Math.floor(v),g=Math.floor(g);var A=Math.floor(v+m),D=Math.floor(g+T),G=this.setTexture2D(b),F=r.getTintAppendFloatAlphaAndSwap(P,M),B=0,N=0,z=1,$=1;R&&(N=1,$=0),this.batchQuad(null,v,g,v,D,A,D,A,g,B,N,z,$,F,F,F,F,0,b,G)},setTexture2D:function(v){return v===void 0&&(v=this.renderer.whiteTexture),this.pushBatch(v)},bindTexture:function(v,g){g===void 0&&(g=0);var m=this.gl;return m.activeTexture(m.TEXTURE0+g),m.bindTexture(m.TEXTURE_2D,v.webGLTexture),this},bindRenderTarget:function(v,g){return this.bindTexture(v.texture,g)},setTime:function(v,g){return this.set1f(v,this.game.loop.getDuration(),g),this},setBoolean:function(v,g,m){return m===void 0&&(m=this.currentShader),m.setBoolean(v,g),this},set1f:function(v,g,m){return m===void 0&&(m=this.currentShader),m.set1f(v,g),this},set2f:function(v,g,m,T){return T===void 0&&(T=this.currentShader),T.set2f(v,g,m),this},set3f:function(v,g,m,T,P){return P===void 0&&(P=this.currentShader),P.set3f(v,g,m,T),this},set4f:function(v,g,m,T,P,M){return M===void 0&&(M=this.currentShader),M.set4f(v,g,m,T,P),this},set1fv:function(v,g,m){return m===void 0&&(m=this.currentShader),m.set1fv(v,g),this},set2fv:function(v,g,m){return m===void 0&&(m=this.currentShader),m.set2fv(v,g),this},set3fv:function(v,g,m){return m===void 0&&(m=this.currentShader),m.set3fv(v,g),this},set4fv:function(v,g,m){return m===void 0&&(m=this.currentShader),m.set4fv(v,g),this},set1iv:function(v,g,m){return m===void 0&&(m=this.currentShader),m.set1iv(v,g),this},set2iv:function(v,g,m){return m===void 0&&(m=this.currentShader),m.set2iv(v,g),this},set3iv:function(v,g,m){return m===void 0&&(m=this.currentShader),m.set3iv(v,g),this},set4iv:function(v,g,m){return m===void 0&&(m=this.currentShader),m.set4iv(v,g),this},set1i:function(v,g,m){return m===void 0&&(m=this.currentShader),m.set1i(v,g),this},set2i:function(v,g,m,T){return T===void 0&&(T=this.currentShader),T.set2i(v,g,m),this},set3i:function(v,g,m,T,P){return P===void 0&&(P=this.currentShader),P.set3i(v,g,m,T),this},set4i:function(v,g,m,T,P,M){return M===void 0&&(M=this.currentShader),M.set4i(v,g,m,T,P),this},setMatrix2fv:function(v,g,m,T){return T===void 0&&(T=this.currentShader),T.setMatrix2fv(v,g,m),this},setMatrix3fv:function(v,g,m,T){return T===void 0&&(T=this.currentShader),T.setMatrix3fv(v,g,m),this},setMatrix4fv:function(v,g,m,T){return T===void 0&&(T=this.currentShader),T.setMatrix4fv(v,g,m),this},destroy:function(){this.emit(h.DESTROY,this);var v,g=this.shaders;for(v=0;v<g.length;v++)g[v].destroy();var m=this.renderTargets;for(v=0;v<m.length;v++)m[v].destroy();var T=this.renderer;return T.deleteBuffer(this.vertexBuffer),T.off(o.RESIZE,this.resize,this),T.off(o.PRE_RENDER,this.onPreRender,this),T.off(o.RENDER,this.onRender,this),T.off(o.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});S.exports=p},74797:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(95428),y=s(72905),u=s(19715),h=s(83419),l=s(8054),n=s(50792),o=s(92503),f=s(50030),r=s(37867),d=s(29747),p=s(7530),v=s(32302),g=s(97480),m=s(69442),T=s(70554),P=s(88815),M=s(26128),b=s(1482),R=s(82751),A=s(84387),D=s(93567),G=s(57183),F=new h({Extends:n,initialize:function(N){n.call(this);var z=N.config,$={alpha:z.transparent,desynchronized:z.desynchronized,depth:!0,antialias:z.antialiasGL,premultipliedAlpha:z.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:z.failIfMajorPerformanceCaveat,powerPreference:z.powerPreference,preserveDrawingBuffer:z.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:z.clearBeforeRender,antialias:z.antialias,backgroundColor:z.backgroundColor,contextCreation:$,roundPixels:z.roundPixels,maxTextures:z.maxTextures,maxTextureSize:z.maxTextureSize,batchSize:z.batchSize,maxLights:z.maxLights,mipmapFilter:z.mipmapFilter},this.game=N,this.type=l.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=N.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=d,this.contextRestoredHandler=d,this.previousContextLostHandler=d,this.previousContextRestoredHandler=d,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(B){var N,z=this.game,$=this.canvas,Q=B.backgroundColor;if(z.config.context?N=z.config.context:N=$.getContext("webgl",B.contextCreation)||$.getContext("experimental-webgl",B.contextCreation),!N||N.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=N,this.setExtensions(),this.setContextHandlers(),z.context=N;for(var Z=0;Z<=27;Z++)this.blendModes.push({func:[N.ONE,N.ONE_MINUS_SRC_ALPHA],equation:N.FUNC_ADD});this.blendModes[1].func=[N.ONE,N.DST_ALPHA],this.blendModes[2].func=[N.DST_COLOR,N.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[N.ONE,N.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[N.ZERO,N.ONE_MINUS_SRC_ALPHA],equation:N.FUNC_REVERSE_SUBTRACT},this.glFormats=[N.BYTE,N.SHORT,N.UNSIGNED_BYTE,N.UNSIGNED_SHORT,N.FLOAT],this.glFuncMap={mat2:{func:N.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:N.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:N.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:N.uniform1f,length:1},"1fv":{func:N.uniform1fv,length:1},"1i":{func:N.uniform1i,length:1},"1iv":{func:N.uniform1iv,length:1},"2f":{func:N.uniform2f,length:2},"2fv":{func:N.uniform2fv,length:1},"2i":{func:N.uniform2i,length:2},"2iv":{func:N.uniform2iv,length:1},"3f":{func:N.uniform3f,length:3},"3fv":{func:N.uniform3fv,length:1},"3i":{func:N.uniform3i,length:3},"3iv":{func:N.uniform3iv,length:1},"4f":{func:N.uniform4f,length:4},"4fv":{func:N.uniform4fv,length:1},"4i":{func:N.uniform4i,length:4},"4iv":{func:N.uniform4iv,length:1}},(!B.maxTextures||B.maxTextures===-1)&&(B.maxTextures=N.getParameter(N.MAX_TEXTURE_IMAGE_UNITS)),B.maxTextureSize||(B.maxTextureSize=N.getParameter(N.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),N.disable(N.DEPTH_TEST),N.disable(N.CULL_FACE),N.enable(N.BLEND),N.clearColor(Q.redGL,Q.greenGL,Q.blueGL,Q.alphaGL),N.clear(N.COLOR_BUFFER_BIT);var tt=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return tt.indexOf(B.mipmapFilter)!==-1&&(this.mipmapFilter=N[B.mipmapFilter]),this.maxTextures=T.checkShaderMax(N,B.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new p(this),this.setBlendMode(l.BlendModes.NORMAL),this.projectionMatrix=new r().identity(),z.textures.once(m.READY,this.boot,this),this},boot:function(){var B=this.game,N=this.pipelines,z=B.scale.baseSize,$=z.width,Q=z.height;this.width=$,this.height=Q,this.isBooted=!0,this.renderTarget=new v(this,$,Q,1,0,!0,!0),this.maskTarget=new v(this,$,Q,1,0,!0,!0),this.maskSource=new v(this,$,Q,1,0,!0,!0);var Z=B.config;N.boot(Z.pipeline,Z.defaultPipeline,Z.autoMobilePipeline),this.blankTexture=B.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=B.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=B.textures.getFrame("__WHITE").glTexture;var tt=this.gl;tt.bindFramebuffer(tt.FRAMEBUFFER,null),tt.enable(tt.SCISSOR_TEST),B.scale.on(g.RESIZE,this.onResize,this),this.resize($,Q)},setExtensions:function(){var B=this.gl,N=B.getSupportedExtensions();this.supportedExtensions=N;var z="ANGLE_instanced_arrays";this.instancedArraysExtension=N.indexOf(z)>-1?B.getExtension(z):null;var $="OES_vertex_array_object";this.vaoExtension=N.indexOf($)>-1?B.getExtension($):null},setContextHandlers:function(B,N){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof B=="function"?this.contextLostHandler=B.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof N=="function"?this.contextRestoredHandler=N.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(B){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(o.LOSE_WEBGL,this),B.preventDefault()},dispatchContextRestored:function(B){var N=this.gl;if(N.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(l.BlendModes.NORMAL),N.disable(N.BLEND),N.disable(N.DEPTH_TEST),N.enable(N.CULL_FACE),this.compression=this.getCompressedTextures();var z=function($){$.createResource()};c(this.glTextureWrappers,z),c(this.glBufferWrappers,z),c(this.glFramebufferWrappers,z),c(this.glProgramWrappers,z),c(this.glAttribLocationWrappers,z),c(this.glUniformLocationWrappers,z),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(o.RESTORE_WEBGL,this),B.preventDefault()},createTemporaryTextures:function(){for(var B=this.gl,N=0;N<this.maxTextures;N++){var z=B.createTexture();B.activeTexture(B.TEXTURE0+N),B.bindTexture(B.TEXTURE_2D,z),B.texImage2D(B.TEXTURE_2D,0,B.RGBA,1,1,0,B.RGBA,B.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(N)}},captureFrame:function(B,N){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(B,N,z){},stopCapture:function(){},onCapture:function(B){},onResize:function(B,N){(N.width!==this.width||N.height!==this.height)&&this.resize(N.width,N.height)},beginCapture:function(B,N){B===void 0&&(B=this.width),N===void 0&&(N=this.height),this.renderTarget.bind(!0,B,N),this.setProjectionMatrix(B,N)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(B,N){var z=this.gl;return this.width=B,this.height=N,this.setProjectionMatrix(B,N),z.viewport(0,0,B,N),this.drawingBufferHeight=z.drawingBufferHeight,z.scissor(0,z.drawingBufferHeight-N,B,N),this.defaultScissor[2]=B,this.defaultScissor[3]=N,this.emit(o.RESIZE,B,N),this},getCompressedTextures:function(){var B="WEBGL_compressed_texture_",N="WEBKIT_"+B,z="EXT_texture_compression_",$=function(Z,tt){var H=Z.getExtension(B+tt)||Z.getExtension(N+tt)||Z.getExtension(z+tt);if(H){var J={};for(var Y in H)J[H[Y]]=Y;return J}},Q=this.gl;return{ETC:$(Q,"etc"),ETC1:$(Q,"etc1"),ATC:$(Q,"atc"),ASTC:$(Q,"astc"),BPTC:$(Q,"bptc"),RGTC:$(Q,"rgtc"),PVRTC:$(Q,"pvrtc"),S3TC:$(Q,"s3tc"),S3TCSRGB:$(Q,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(B,N){var z=this.compression[B.toUpperCase()];if(N in z)return z[N]},supportsCompressedTexture:function(B,N){var z=this.compression[B.toUpperCase()];return z?N?N in z:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(B,N){return(B!==this.projectionWidth||N!==this.projectionHeight)&&(this.projectionWidth=B,this.projectionHeight=N,this.projectionMatrix.ortho(0,B,N,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(B){return this.supportedExtensions?this.supportedExtensions.indexOf(B):!1},getExtension:function(B){return this.hasExtension(B)?(B in this.extensions||(this.extensions[B]=this.gl.getExtension(B)),this.extensions[B]):null},flush:function(){this.pipelines.flush()},pushScissor:function(B,N,z,$,Q){Q===void 0&&(Q=this.drawingBufferHeight);var Z=this.scissorStack,tt=[B,N,z,$];return Z.push(tt),this.setScissor(B,N,z,$,Q),this.currentScissor=tt,tt},setScissor:function(B,N,z,$,Q){Q===void 0&&(Q=this.drawingBufferHeight);var Z=this.gl,tt=this.currentScissor,H=z>0&&$>0;if(tt&&H){var J=tt[0],Y=tt[1],_=tt[2],U=tt[3];H=J!==B||Y!==N||_!==z||U!==$}H&&(this.flush(),Z.scissor(B,Q-N-$,z,$))},resetScissor:function(){var B=this.gl;B.enable(B.SCISSOR_TEST);var N=this.currentScissor;if(N){var z=N[0],$=N[1],Q=N[2],Z=N[3];Q>0&&Z>0&&B.scissor(z,this.drawingBufferHeight-$-Z,Q,Z)}},popScissor:function(){var B=this.scissorStack;B.pop();var N=B[B.length-1];N&&this.setScissor(N[0],N[1],N[2],N[3]),this.currentScissor=N},hasActiveStencilMask:function(){var B=this.currentMask.mask,N=this.currentCameraMask.mask;return B&&B.isStencil||N&&N.isStencil},resetViewport:function(){var B=this.gl;B.viewport(0,0,this.width,this.height),this.drawingBufferHeight=B.drawingBufferHeight},setBlendMode:function(B,N){N===void 0&&(N=!1);var z=this.gl,$=this.blendModes[B];return N||B!==l.BlendModes.SKIP_CHECK&&this.currentBlendMode!==B?(this.flush(),z.enable(z.BLEND),z.blendEquation($.equation),$.func.length>2?z.blendFuncSeparate($.func[0],$.func[1],$.func[2],$.func[3]):z.blendFunc($.func[0],$.func[1]),this.currentBlendMode=B,!0):!1},addBlendMode:function(B,N){var z=this.blendModes.push({func:B,equation:N});return z-1},updateBlendMode:function(B,N,z){return this.blendModes[B]&&(this.blendModes[B].func=N,z&&(this.blendModes[B].equation=z)),this},removeBlendMode:function(B){return B>17&&this.blendModes[B]&&this.blendModes.splice(B,1),this},pushFramebuffer:function(B,N,z,$,Q){return B===this.currentFramebuffer?this:(this.fboStack.push(B),this.setFramebuffer(B,N,z,$,Q))},setFramebuffer:function(B,N,z,$,Q){if(N===void 0&&(N=!1),z===void 0&&(z=!0),$===void 0&&($=null),Q===void 0&&(Q=!1),B===this.currentFramebuffer)return this;var Z=this.gl,tt=this.width,H=this.height;return B&&B.renderTexture&&z?(tt=B.renderTexture.width,H=B.renderTexture.height):this.flush(),B?Z.bindFramebuffer(Z.FRAMEBUFFER,B.webGLFramebuffer):Z.bindFramebuffer(Z.FRAMEBUFFER,null),z&&Z.viewport(0,0,tt,H),$&&Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,$.webGLTexture,0),Q&&(Z.clearColor(0,0,0,0),Z.clear(Z.COLOR_BUFFER_BIT)),N&&(B?(this.drawingBufferHeight=H,this.pushScissor(0,0,tt,H)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=B,this},popFramebuffer:function(B,N){B===void 0&&(B=!1),N===void 0&&(N=!0);var z=this.fboStack;z.pop();var $=z[z.length-1];return $||($=null),this.setFramebuffer($,B,N),$},restoreFramebuffer:function(B,N){B===void 0&&(B=!1),N===void 0&&(N=!0);var z=this.fboStack,$=z[z.length-1];$||($=null),this.currentFramebuffer=null,this.setFramebuffer($,B,N)},setProgram:function(B){return B!==this.currentProgram?(this.flush(),this.gl.useProgram(B.webGLProgram),this.currentProgram=B,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(B,N,z,$,Q){Q===void 0&&(Q=!1);var Z=this.gl,tt=Z.NEAREST,H=Z.NEAREST,J=Z.CLAMP_TO_EDGE,Y=null;N=B?B.width:N,z=B?B.height:z;var _=f(N,z);if(_&&!Q&&(J=Z.REPEAT),$===l.ScaleModes.LINEAR&&this.config.antialias){var U=B&&B.compressed,et=!U&&_||U&&B.mipmaps.length>1;tt=this.mipmapFilter&&et?this.mipmapFilter:Z.LINEAR,H=Z.LINEAR}return!B&&typeof N=="number"&&typeof z=="number"?Y=this.createTexture2D(0,tt,H,J,J,Z.RGBA,null,N,z):Y=this.createTexture2D(0,tt,H,J,J,Z.RGBA,B),Y},createTexture2D:function(B,N,z,$,Q,Z,tt,H,J,Y,_,U){typeof H!="number"&&(H=tt?tt.width:1),typeof J!="number"&&(J=tt?tt.height:1);var et=new R(this.gl,B,N,z,$,Q,Z,tt,H,J,Y,_,U);return this.glTextureWrappers.push(et),et},createFramebuffer:function(B,N,z,$){this.currentFramebuffer=null;var Q=new A(this.gl,B,N,z,$);return this.glFramebufferWrappers.push(Q),Q},beginBitmapMask:function(B,N){var z=this.gl;z&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==B&&(this.currentMask.mask=B,this.currentMask.camera=N))},drawBitmapMask:function(B,N,z){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),B.renderWebGL(this,B,N),this.maskSource.unbind(!0),this.maskTarget.unbind();var $=this.gl,Q=this.getCurrentStencilMask();Q?($.enable($.STENCIL_TEST),Q.mask.applyStencil(this,Q.camera,!0)):this.currentMask.mask=null,this.pipelines.set(z),$.activeTexture($.TEXTURE0),$.bindTexture($.TEXTURE_2D,this.maskTarget.texture.webGLTexture),$.activeTexture($.TEXTURE1),$.bindTexture($.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(B,N){var z=new b(this.gl,B,N);return this.glProgramWrappers.push(z),z},createVertexBuffer:function(B,N){var z=this.gl,$=new M(z,B,z.ARRAY_BUFFER,N);return this.glBufferWrappers.push($),$},createAttribLocation:function(B,N){var z=new D(this.gl,B,N);return this.glAttribLocationWrappers.push(z),z},createUniformLocation:function(B,N){var z=new G(this.gl,B,N);return this.glUniformLocationWrappers.push(z),z},createIndexBuffer:function(B,N){var z=this.gl,$=new M(z,B,z.ELEMENT_ARRAY_BUFFER,N);return this.glBufferWrappers.push($),$},deleteTexture:function(B){if(B)return y(this.glTextureWrappers,B),B.destroy(),this},deleteFramebuffer:function(B){return B?(y(this.fboStack,B),y(this.glFramebufferWrappers,B),B.destroy(),this):this},deleteProgram:function(B){return B&&(y(this.glProgramWrappers,B),B.destroy()),this},deleteAttribLocation:function(B){return B&&(y(this.glAttribLocationWrappers,B),B.destroy()),this},deleteUniformLocation:function(B){return B&&(y(this.glUniformLocationWrappers,B),B.destroy()),this},deleteBuffer:function(B){return B?(y(this.glBufferWrappers,B),B.destroy(),this):this},preRenderCamera:function(B){var N=B.x,z=B.y,$=B.width,Q=B.height,Z=B.backgroundColor;if(B.emit(u.PRE_RENDER,B),this.pipelines.preBatchCamera(B),this.pushScissor(N,z,$,Q),B.mask&&(this.currentCameraMask.mask=B.mask,this.currentCameraMask.camera=B._maskCamera,B.mask.preRenderWebGL(this,B,B._maskCamera)),Z.alphaGL>0){var tt=this.pipelines.setMulti();tt.drawFillRect(N,z,$,Q,T.getTintFromFloats(Z.blueGL,Z.greenGL,Z.redGL,1),Z.alphaGL)}},getCurrentStencilMask:function(){var B=null,N=this.maskStack,z=this.currentCameraMask;return N.length>0?B=N[N.length-1]:z.mask&&z.mask.isStencil&&(B=z),B},postRenderCamera:function(B){var N=B.flashEffect,z=B.fadeEffect;if(N.isRunning||z.isRunning||z.isComplete){var $=this.pipelines.setMulti();N.postRenderWebGL($,T.getTintFromFloats),z.postRenderWebGL($,T.getTintFromFloats)}B.dirty=!1,this.popScissor(),B.mask&&(this.currentCameraMask.mask=null,B.mask.postRenderWebGL(this,B._maskCamera)),this.pipelines.postBatchCamera(B),B.emit(u.POST_RENDER,B)},preRender:function(){if(!this.contextLost){var B=this.gl;if(B.bindFramebuffer(B.FRAMEBUFFER,null),this.emit(o.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var N=this.config.backgroundColor;B.clearColor(N.redGL,N.greenGL,N.blueGL,N.alphaGL),B.clear(B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT|B.STENCIL_BUFFER_BIT)}B.enable(B.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&B.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(o.PRE_RENDER)}},render:function(B,N,z){if(!this.contextLost){var $=N.length;if(this.emit(o.RENDER,B,z),this.preRenderCamera(z),$===0){this.setBlendMode(l.BlendModes.NORMAL),this.postRenderCamera(z);return}this.currentType="";for(var Q=this.currentMask,Z=0;Z<$;Z++){this.finalType=Z===$-1;var tt=N[Z],H=tt.mask;Q=this.currentMask,Q.mask&&Q.mask!==H&&Q.mask.postRenderWebGL(this,Q.camera),H&&Q.mask!==H&&H.preRenderWebGL(this,tt,z),tt.blendMode!==this.currentBlendMode&&this.setBlendMode(tt.blendMode);var J=tt.type;J!==this.currentType&&(this.newType=!0,this.currentType=J),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=N[Z+1].type===this.currentType,tt.renderWebGL(this,tt,z),this.newType=!1}Q=this.currentMask,Q.mask&&Q.mask.postRenderWebGL(this,Q.camera),this.setBlendMode(l.BlendModes.NORMAL),this.postRenderCamera(z)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(o.POST_RENDER);var B=this.snapshotState;B.callback&&(P(this.gl,B),B.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var B=this.gl,N=this.getCurrentStencilMask();if(N){var z=N.mask;B.enable(B.STENCIL_TEST),z.invertAlpha?B.stencilFunc(B.NOTEQUAL,z.level,255):B.stencilFunc(B.EQUAL,z.level,255)}},snapshot:function(B,N,z){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,B,N,z)},snapshotArea:function(B,N,z,$,Q,Z,tt){var H=this.snapshotState;return H.callback=Q,H.type=Z,H.encoder=tt,H.getPixel=!1,H.x=B,H.y=N,H.width=z,H.height=$,this},snapshotPixel:function(B,N,z){return this.snapshotArea(B,N,1,1,z),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(B,N,z,$,Q,Z,tt,H,J,Y,_){Q===void 0&&(Q=!1),Z===void 0&&(Z=0),tt===void 0&&(tt=0),H===void 0&&(H=N),J===void 0&&(J=z),Y==="pixel"&&(Q=!0,Y="image/png");var U=this.currentFramebuffer;this.snapshotArea(Z,tt,H,J,$,Y,_);var et=this.snapshotState;return et.getPixel=Q,et.isFramebuffer=!0,et.bufferWidth=N,et.bufferHeight=z,et.width=Math.min(et.width,N),et.height=Math.min(et.height,z),this.setFramebuffer(B),P(this.gl,et),this.setFramebuffer(U),et.callback=null,et.isFramebuffer=!1,this},canvasToTexture:function(B,N,z,$){z===void 0&&(z=!1),$===void 0&&($=!1);var Q=this.gl,Z=Q.NEAREST,tt=Q.NEAREST,H=B.width,J=B.height,Y=Q.CLAMP_TO_EDGE,_=f(H,J);return!z&&_&&(Y=Q.REPEAT),this.config.antialias&&(Z=_&&this.mipmapFilter?this.mipmapFilter:Q.LINEAR,tt=Q.LINEAR),N?(N.update(B,H,J,$,Y,Y,Z,tt,N.format),N):this.createTexture2D(0,Z,tt,Y,Y,Q.RGBA,B,H,J,!0,!1,$)},createCanvasTexture:function(B,N,z){return N===void 0&&(N=!1),z===void 0&&(z=!1),this.canvasToTexture(B,null,N,z)},updateCanvasTexture:function(B,N,z,$){return z===void 0&&(z=!1),$===void 0&&($=!1),this.canvasToTexture(B,N,$,z)},videoToTexture:function(B,N,z,$){z===void 0&&(z=!1),$===void 0&&($=!1);var Q=this.gl,Z=Q.NEAREST,tt=Q.NEAREST,H=B.videoWidth,J=B.videoHeight,Y=Q.CLAMP_TO_EDGE,_=f(H,J);return!z&&_&&(Y=Q.REPEAT),this.config.antialias&&(Z=_&&this.mipmapFilter?this.mipmapFilter:Q.LINEAR,tt=Q.LINEAR),N?(N.update(B,H,J,$,Y,Y,Z,tt,N.format),N):this.createTexture2D(0,Z,tt,Y,Y,Q.RGBA,B,H,J,!0,!0,$)},createVideoTexture:function(B,N,z){return N===void 0&&(N=!1),z===void 0&&(z=!1),this.videoToTexture(B,null,N,z)},updateVideoTexture:function(B,N,z,$){return z===void 0&&(z=!1),$===void 0&&($=!1),this.videoToTexture(B,N,$,z)},createUint8ArrayTexture:function(B,N,z){var $=this.gl,Q=$.NEAREST,Z=$.NEAREST,tt=$.CLAMP_TO_EDGE,H=f(N,z);return H&&(tt=$.REPEAT),this.createTexture2D(0,Q,Z,tt,tt,$.RGBA,B,N,z)},setTextureFilter:function(B,N){var z=this.gl,$=N===0?z.LINEAR:z.NEAREST;z.activeTexture(z.TEXTURE0);var Q=z.getParameter(z.TEXTURE_BINDING_2D);return z.bindTexture(z.TEXTURE_2D,B.webGLTexture),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,$),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,$),B.minFilter=$,B.magFilter=$,Q&&z.bindTexture(z.TEXTURE_2D,Q),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var B=function(N){N.destroy()};c(this.glAttribLocationWrappers,B),c(this.glBufferWrappers,B),c(this.glFramebufferWrappers,B),c(this.glProgramWrappers,B),c(this.glTextureWrappers,B),c(this.glUniformLocationWrappers,B),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});S.exports=F},38683:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(95428),u=s(95540),h=s(14500),l=new c({initialize:function(o,f,r,d,p){this.pipeline=o,this.name=f,this.renderer=o.renderer,this.gl=this.renderer.gl,this.fragSrc=d,this.vertSrc=r,this.program=this.renderer.createProgram(r,d),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(p),this.createUniforms()},createAttributes:function(n){var o=0,f=0,r=[];this.vertexComponentCount=0;for(var d=0;d<n.length;d++){var p=n[d],v=p.name,g=u(p,"size",1),m=u(p,"type",h.FLOAT),T=m.enum,P=m.size,M=!!p.normalized;r.push({name:v,size:g,type:T,normalized:M,offset:f,enabled:!1,location:-1}),P===4?o+=g:o++,f+=g*P}this.vertexSize=f,this.vertexComponentCount=o,this.attributes=r},bind:function(n,o){return n===void 0&&(n=!1),o===void 0&&(o=!1),o&&this.pipeline.flush(),this.renderer.setProgram(this.program),n&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(n){n===void 0&&(n=!1);for(var o=this.gl,f=this.renderer,r=this.vertexSize,d=this.attributes,p=this.program,v=0;v<d.length;v++){var g=d[v],m=g.size,T=g.type,P=g.offset,M=g.enabled,b=g.location,R=!!g.normalized;if(n){b!==-1&&f.deleteAttribLocation(b);var A=this.renderer.createAttribLocation(p,g.name);A.webGLAttribLocation>=0?(o.enableVertexAttribArray(A.webGLAttribLocation),o.vertexAttribPointer(A.webGLAttribLocation,m,T,R,r,P),g.enabled=!0,g.location=A):A.webGLAttribLocation!==-1&&o.disableVertexAttribArray(A.webGLAttribLocation)}else M?o.vertexAttribPointer(b.webGLAttribLocation,m,T,R,r,P):!M&&b!==-1&&b.webGLAttribLocation>-1&&(o.disableVertexAttribArray(b.webGLAttribLocation),g.location=-1)}return this},createUniforms:function(){var n=this.gl,o=this.program,f=this.uniforms,r,d,p,v=n.getProgramParameter(o.webGLProgram,n.ACTIVE_UNIFORMS);for(r=0;r<v;r++){var g=n.getActiveUniform(o.webGLProgram,r);if(g){d=g.name,p=this.renderer.createUniformLocation(o,d),p!==null&&(f[d]={name:d,location:p,setter:null,value1:null,value2:null,value3:null,value4:null});var m=d.indexOf("[");m>0&&(d=d.substr(0,m),f.hasOwnProperty(d)||(p=this.renderer.createUniformLocation(o,d),p!==null&&(f[d]={name:d,location:p,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var n=this.gl;this.renderer.setProgram(this.program);for(var o in this.uniforms){var f=this.uniforms[o];f.setter&&f.setter.call(n,f.location.webGLUniformLocation,f.value1,f.value2,f.value3,f.value4)}},hasUniform:function(n){return this.uniforms.hasOwnProperty(n)},resetUniform:function(n){var o=this.uniforms[n];return o&&(o.value1=null,o.value2=null,o.value3=null,o.value4=null),this},setUniform1:function(n,o,f,r){var d=this.uniforms[o];return d?((r||d.value1!==f)&&(d.setter||(d.setter=n),d.value1=f,this.renderer.setProgram(this.program),n.call(this.gl,d.location.webGLUniformLocation,f),this.pipeline.currentShader=this),this):this},setUniform2:function(n,o,f,r,d){var p=this.uniforms[o];return p?((d||p.value1!==f||p.value2!==r)&&(p.setter||(p.setter=n),p.value1=f,p.value2=r,this.renderer.setProgram(this.program),n.call(this.gl,p.location.webGLUniformLocation,f,r),this.pipeline.currentShader=this),this):this},setUniform3:function(n,o,f,r,d,p){var v=this.uniforms[o];return v?((p||v.value1!==f||v.value2!==r||v.value3!==d)&&(v.setter||(v.setter=n),v.value1=f,v.value2=r,v.value3=d,this.renderer.setProgram(this.program),n.call(this.gl,v.location.webGLUniformLocation,f,r,d),this.pipeline.currentShader=this),this):this},setUniform4:function(n,o,f,r,d,p,v){var g=this.uniforms[o];return g?((v||g.value1!==f||g.value2!==r||g.value3!==d||g.value4!==p)&&(g.setter||(g.setter=n),g.value1=f,g.value2=r,g.value3=d,g.value4=p,this.renderer.setProgram(this.program),n.call(this.gl,g.location.webGLUniformLocation,f,r,d,p),this.pipeline.currentShader=this),this):this},setBoolean:function(n,o){return this.setUniform1(this.gl.uniform1i,n,Number(o))},set1f:function(n,o){return this.setUniform1(this.gl.uniform1f,n,o)},set2f:function(n,o,f){return this.setUniform2(this.gl.uniform2f,n,o,f)},set3f:function(n,o,f,r){return this.setUniform3(this.gl.uniform3f,n,o,f,r)},set4f:function(n,o,f,r,d){return this.setUniform4(this.gl.uniform4f,n,o,f,r,d)},set1fv:function(n,o){return this.setUniform1(this.gl.uniform1fv,n,o,!0)},set2fv:function(n,o){return this.setUniform1(this.gl.uniform2fv,n,o,!0)},set3fv:function(n,o){return this.setUniform1(this.gl.uniform3fv,n,o,!0)},set4fv:function(n,o){return this.setUniform1(this.gl.uniform4fv,n,o,!0)},set1iv:function(n,o){return this.setUniform1(this.gl.uniform1iv,n,o,!0)},set2iv:function(n,o){return this.setUniform1(this.gl.uniform2iv,n,o,!0)},set3iv:function(n,o){return this.setUniform1(this.gl.uniform3iv,n,o,!0)},set4iv:function(n,o){return this.setUniform1(this.gl.uniform4iv,n,o,!0)},set1i:function(n,o){return this.setUniform1(this.gl.uniform1i,n,o)},set2i:function(n,o,f){return this.setUniform2(this.gl.uniform2i,n,o,f)},set3i:function(n,o,f,r){return this.setUniform3(this.gl.uniform3i,n,o,f,r)},set4i:function(n,o,f,r,d){return this.setUniform4(this.gl.uniform4i,n,o,f,r,d)},setMatrix2fv:function(n,o,f){return this.setUniform2(this.gl.uniformMatrix2fv,n,o,f,!0)},setMatrix3fv:function(n,o,f){return this.setUniform2(this.gl.uniformMatrix3fv,n,o,f,!0)},setMatrix4fv:function(n,o,f){return this.setUniform2(this.gl.uniformMatrix4fv,n,o,f,!0)},createProgram:function(n,o){return n===void 0&&(n=this.vertSrc),o===void 0&&(o=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=n,this.fragSrc=o,this.program=this.renderer.createProgram(n,o),this.createUniforms(),this.rebind()},destroy:function(){var n=this.renderer;y(this.uniforms,function(o){n.deleteUniformLocation(o.location)}),this.uniforms=null,y(this.attributes,function(o){n.deleteAttribLocation(o.location)}),this.attributes=null,n.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});S.exports=l},14500:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};S.exports=w},4159:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(14500),y=s(79291),u={PipelineManager:s(7530),Pipelines:s(96615),RenderTarget:s(32302),Utils:s(70554),WebGLPipeline:s(29100),WebGLRenderer:s(74797),WebGLShader:s(38683),Wrappers:s(9503)};u=y(!1,u,c),S.exports=u},31302:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(95540),u=s(78908),h=s(85191),l=s(14500),n=s(29100),o=new c({Extends:n,initialize:function(r){r.fragShader=y(r,"fragShader",u),r.vertShader=y(r,"vertShader",h),r.batchSize=y(r,"batchSize",1),r.vertices=y(r,"vertices",[-1,1,-1,-7,7,1]),r.attributes=y(r,"attributes",[{name:"inPosition",size:2,type:l.FLOAT}]),n.call(this,r)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(f,r){n.prototype.resize.call(this,f,r),this.set2f("uResolution",f,r)},beginMask:function(f,r,d){this.renderer.beginBitmapMask(f,d)},endMask:function(f,r,d){var p=this.gl,v=this.renderer,g=f.bitmapMask;g&&p&&(v.drawBitmapMask(g,r,this),d&&this.set2f("uResolution",d.width,d.height),this.set1i("uInvertMaskAlpha",f.invertAlpha),p.drawArrays(this.topology,0,3),d&&this.set2f("uResolution",this.width,this.height),p.bindTexture(p.TEXTURE_2D,null))}});S.exports=o},92651:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(58918),u=s(14811),h=s(95540),l=s(43558),n=s(89350),o=s(70554),f=new c({Extends:l,initialize:function(d){d.shaders=[o.setGlowQuality(n.FXGlowFrag,d.game),n.FXShadowFrag,n.FXPixelateFrag,n.FXVignetteFrag,n.FXShineFrag,n.FXBlurLowFrag,n.FXBlurMedFrag,n.FXBlurHighFrag,n.FXGradientFrag,n.FXBloomFrag,n.ColorMatrixFrag,n.FXCircleFrag,n.FXBarrelFrag,n.FXDisplacementFrag,n.FXWipeFrag,n.FXBokehFrag],l.call(this,d);var p=this.game;this.glow=new y.Glow(p),this.shadow=new y.Shadow(p),this.pixelate=new y.Pixelate(p),this.vignette=new y.Vignette(p),this.shine=new y.Shine(p),this.gradient=new y.Gradient(p),this.circle=new y.Circle(p),this.barrel=new y.Barrel(p),this.wipe=new y.Wipe(p),this.bokeh=new y.Bokeh(p);var v=[];v[u.GLOW]=this.onGlow,v[u.SHADOW]=this.onShadow,v[u.PIXELATE]=this.onPixelate,v[u.VIGNETTE]=this.onVignette,v[u.SHINE]=this.onShine,v[u.BLUR]=this.onBlur,v[u.GRADIENT]=this.onGradient,v[u.BLOOM]=this.onBloom,v[u.COLOR_MATRIX]=this.onColorMatrix,v[u.CIRCLE]=this.onCircle,v[u.BARREL]=this.onBarrel,v[u.DISPLACEMENT]=this.onDisplacement,v[u.WIPE]=this.onWipe,v[u.BOKEH]=this.onBokeh,this.fxHandlers=v,this.source,this.target,this.swap},onDraw:function(r,d,p){this.source=r,this.target=d,this.swap=p;var v=r.width,g=r.height,m=this.tempSprite,T=this.fxHandlers;if(m&&m.preFX)for(var P=m.preFX.list,M=0;M<P.length;M++){var b=P[M];b.active&&T[b.type].call(this,b,v,g)}this.drawToGame(this.source)},runDraw:function(){var r=this.source,d=this.target;this.copy(r,d),this.source=d,this.target=r},onGlow:function(r,d,p){var v=this.shaders[u.GLOW];this.setShader(v),this.glow.onPreRender(r,v,d,p),this.runDraw()},onShadow:function(r){var d=this.shaders[u.SHADOW];this.setShader(d),this.shadow.onPreRender(r,d),this.runDraw()},onPixelate:function(r,d,p){var v=this.shaders[u.PIXELATE];this.setShader(v),this.pixelate.onPreRender(r,v,d,p),this.runDraw()},onVignette:function(r){var d=this.shaders[u.VIGNETTE];this.setShader(d),this.vignette.onPreRender(r,d),this.runDraw()},onShine:function(r,d,p){var v=this.shaders[u.SHINE];this.setShader(v),this.shine.onPreRender(r,v,d,p),this.runDraw()},onBlur:function(r,d,p){var v=h(r,"quality"),g=this.shaders[u.BLUR+v];this.setShader(g),this.set1i("uMainSampler",0),this.set2f("resolution",d,p),this.set1f("strength",h(r,"strength")),this.set3fv("color",h(r,"glcolor"));for(var m=h(r,"x"),T=h(r,"y"),P=h(r,"steps"),M=0;M<P;M++)this.set2f("offset",m,0),this.runDraw(),this.set2f("offset",0,T),this.runDraw()},onGradient:function(r){var d=this.shaders[u.GRADIENT];this.setShader(d),this.gradient.onPreRender(r,d),this.runDraw()},onBloom:function(r,d,p){var v=this.shaders[u.BLOOM];this.copySprite(this.source,this.swap),this.setShader(v),this.set1i("uMainSampler",0),this.set1f("strength",h(r,"blurStrength")),this.set3fv("color",h(r,"glcolor"));for(var g=2/d*h(r,"offsetX"),m=2/p*h(r,"offsetY"),T=h(r,"steps"),P=0;P<T;P++)this.set2f("offset",g,0),this.runDraw(),this.set2f("offset",0,m),this.runDraw();this.blendFrames(this.swap,this.source,this.target,h(r,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(r){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",r.getData()),this.set1f("uAlpha",r.alpha),this.runDraw()},onCircle:function(r,d,p){var v=this.shaders[u.CIRCLE];this.setShader(v),this.circle.onPreRender(r,v,d,p),this.runDraw()},onBarrel:function(r){var d=this.shaders[u.BARREL];this.setShader(d),this.barrel.onPreRender(r,d),this.runDraw()},onDisplacement:function(r){this.setShader(this.shaders[u.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",r.x,r.y),this.bindTexture(r.glTexture,1),this.runDraw()},onWipe:function(r){var d=this.shaders[u.WIPE];this.setShader(d),this.wipe.onPreRender(r,d),this.runDraw()},onBokeh:function(r,d,p){var v=this.shaders[u.BOKEH];this.setShader(v),this.bokeh.onPreRender(r,v,d,p),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,l.prototype.destroy.call(this),this}});S.exports=f},96569:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(95540),u=s(31063),h=s(57516),l=s(61340),n=s(26099),o=s(29100),f=new c({Extends:h,initialize:function(d){var p=y(d,"fragShader",u);d.fragShader=p.replace("%LIGHT_COUNT%",d.game.renderer.config.maxLights),h.call(this,d),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new n,this._tempMatrix=new l,this._tempMatrix2=new l},boot:function(){o.prototype.boot.call(this)},onRender:function(r,d){var p=r.sys.lights;if(this.lightsActive=!1,!(!p||!p.active)){var v=p.getLights(d),g=v.length;this.lightsActive=!0;var m,T=this.renderer,P=T.height,M=d.matrix,b=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",d.x,d.y,d.rotation,d.zoom),this.set3f("uAmbientLightColor",p.ambientColor.r,p.ambientColor.g,p.ambientColor.b),this.set1i("uLightCount",g),m=0;m<g;m++){var R=v[m].light,A=R.color,D="uLights["+m+"].";M.transformPoint(R.x,R.y,b),this.set2f(D+"position",b.x-d.scrollX*R.scrollFactorX*d.zoom,P-(b.y-d.scrollY*R.scrollFactorY*d.zoom)),this.set3f(D+"color",A.r,A.g,A.b),this.set1f(D+"intensity",R.intensity),this.set1f(D+"radius",R.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(r){if(r!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var d=this.inverseRotationMatrix;if(r){var p=-r,v=Math.cos(p),g=Math.sin(p);d[1]=g,d[3]=-g,d[0]=d[4]=v}else d[0]=d[4]=1,d[1]=d[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,d),this.currentNormalMapRotation=r}},setTexture2D:function(r,d){var p=this.renderer;r===void 0&&(r=p.whiteTexture);var v=this.getNormalMap(d);this.isNewNormalMap(r,v)&&(this.flush(),this.createBatch(r),this.addTextureToBatch(v),this.currentNormalMap=v);var g=0;if(d&&d.parentContainer){var m=d.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);g=m.rotationNormalized}else d&&(g=d.rotation);return this.currentBatch===null&&(this.createBatch(r),this.addTextureToBatch(v)),this.setNormalMapRotation(g),0},setGameObject:function(r,d){d===void 0&&(d=r.frame);var p=d.glTexture,v=this.getNormalMap(r);if(this.isNewNormalMap(p,v)&&(this.flush(),this.createBatch(p),this.addTextureToBatch(v),this.currentNormalMap=v),r.parentContainer){var g=r.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(g.rotationNormalized)}else this.setNormalMapRotation(r.rotation);return this.currentBatch===null&&(this.createBatch(p),this.addTextureToBatch(v)),0},isNewNormalMap:function(r,d){return this.currentTexture!==r||this.currentNormalMap!==d},getNormalMap:function(r){var d;if(r)r.displayTexture?d=r.displayTexture.dataSource[r.displayFrame.sourceIndex]:r.texture?d=r.texture.dataSource[r.frame.sourceIndex]:r.tileset&&(Array.isArray(r.tileset)?d=r.tileset[0].image.dataSource[0]:d=r.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return d?d.glTexture:this.renderer.normalTexture},batchSprite:function(r,d,p){this.lightsActive&&h.prototype.batchSprite.call(this,r,d,p)},batchTexture:function(r,d,p,v,g,m,T,P,M,b,R,A,D,G,F,B,N,z,$,Q,Z,tt,H,J,Y,_,U,et,nt,rt,ot,dt){this.lightsActive&&h.prototype.batchTexture.call(this,r,d,p,v,g,m,T,P,M,b,R,A,D,G,F,B,N,z,$,Q,Z,tt,H,J,Y,_,U,et,nt,rt,ot,dt)},batchTextureFrame:function(r,d,p,v,g,m,T){this.lightsActive&&h.prototype.batchTextureFrame.call(this,r,d,p,v,g,m,T)}});S.exports=f},56527:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(95540),u=s(57516),h=s(45561),l=s(60722),n=s(14500),o=s(29100),f=new c({Extends:u,initialize:function(d){d.fragShader=y(d,"fragShader",h),d.vertShader=y(d,"vertShader",l),d.attributes=y(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:n.UNSIGNED_BYTE,normalized:!0}]),d.forceZero=!0,d.resizeUniform="uResolution",u.call(this,d)},boot:function(){o.prototype.boot.call(this);var r=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",r.width,r.height)}});S.exports=f},57516:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(94811),u=s(95540),h=s(98840),l=s(44667),n=s(61340),o=s(70554),f=s(14500),r=s(29100),d=new c({Extends:r,initialize:function(v){var g=v.game.renderer,m=u(v,"fragShader",h);v.fragShader=o.parseFragmentShaderMaxTextures(m,g.maxTextures),v.vertShader=u(v,"vertShader",l),v.attributes=u(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:f.UNSIGNED_BYTE,normalized:!0}]),v.resizeUniform="uResolution",r.call(this,v),this._tempMatrix1=new n,this._tempMatrix2=new n,this._tempMatrix3=new n,this.calcMatrix=new n,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){r.prototype.boot.call(this);var p=this.renderer;this.set1iv("uMainSampler",p.textureIndexes),this.set2f("uResolution",p.width,p.height)},batchSprite:function(p,v,g){this.manager.set(this,p);var m=this._tempMatrix1,T=this._tempMatrix2,P=this._tempMatrix3,M=p.frame,b=M.glTexture,R=M.u0,A=M.v0,D=M.u1,G=M.v1,F=M.x,B=M.y,N=M.cutWidth,z=M.cutHeight,$=M.customPivot,Q=p.displayOriginX,Z=p.displayOriginY,tt=-Q+F,H=-Z+B;if(p.isCropped){var J=p._crop;(J.flipX!==p.flipX||J.flipY!==p.flipY)&&M.updateCropUVs(J,p.flipX,p.flipY),R=J.u0,A=J.v0,D=J.u1,G=J.v1,N=J.width,z=J.height,F=J.x,B=J.y,tt=-Q+F,H=-Z+B}var Y=1,_=1;p.flipX&&($||(tt+=-M.realWidth+Q*2),Y=-1),p.flipY&&($||(H+=-M.realHeight+Z*2),_=-1);var U=p.x,et=p.y;v.roundPixels&&(U=Math.floor(U),et=Math.floor(et)),T.applyITRS(U,et,p.rotation,p.scaleX*Y,p.scaleY*_),m.copyFrom(v.matrix),g?(m.multiplyWithOffset(g,-v.scrollX*p.scrollFactorX,-v.scrollY*p.scrollFactorY),T.e=U,T.f=et):(T.e-=v.scrollX*p.scrollFactorX,T.f-=v.scrollY*p.scrollFactorY),m.multiply(T,P);var nt=P.setQuad(tt,H,tt+N,H+z,v.renderRoundPixels),rt=o.getTintAppendFloatAlpha,ot=v.alpha,dt=rt(p.tintTopLeft,ot*p._alphaTL),vt=rt(p.tintTopRight,ot*p._alphaTR),mt=rt(p.tintBottomLeft,ot*p._alphaBL),gt=rt(p.tintBottomRight,ot*p._alphaBR);this.shouldFlush(6)&&this.flush();var yt=this.setGameObject(p,M);this.manager.preBatch(p),this.batchQuad(p,nt[0],nt[1],nt[2],nt[3],nt[4],nt[5],nt[6],nt[7],R,A,D,G,dt,vt,mt,gt,p.tintFill,b,yt),this.manager.postBatch(p)},batchTexture:function(p,v,g,m,T,P,M,b,R,A,D,G,F,B,N,z,$,Q,Z,tt,H,J,Y,_,U,et,nt,rt,ot,dt,vt,mt,gt){gt===void 0&&(gt=!1),this.manager.set(this,p);var yt=this._tempMatrix1,St=this._tempMatrix2,Ct=this._tempMatrix3,bt=Q/g+nt,At=Z/m+rt,Lt=(Q+tt)/g+nt,Tt=(Z+H)/m+rt,Et=M,wt=b,Wt=-z,Zt=-$;if(p.isCropped){var ue=p._crop,Qt=ue.width,jt=ue.height;Et=Qt,wt=jt,M=Qt,b=jt,Q=ue.x,Z=ue.y;var ve=Q,Le=Z;G&&(ve=tt-ue.x-Qt),F&&(Le=H-ue.y-jt),bt=ve/g+nt,At=Le/m+rt,Lt=(ve+Qt)/g+nt,Tt=(Le+jt)/m+rt,Wt=-z+Q,Zt=-$+Z}F=F^(!vt&&v.isRenderTexture?1:0),G&&(Et*=-1,Wt+=M),F&&(wt*=-1,Zt+=b),ot.roundPixels&&(T=Math.floor(T),P=Math.floor(P)),St.applyITRS(T,P,D,R,A),yt.copyFrom(ot.matrix),dt?(yt.multiplyWithOffset(dt,-ot.scrollX*B,-ot.scrollY*N),St.e=T,St.f=P):(St.e-=ot.scrollX*B,St.f-=ot.scrollY*N),yt.multiply(St,Ct);var Kt=Ct.setQuad(Wt,Zt,Wt+Et,Zt+wt,ot.renderRoundPixels);mt==null&&(mt=this.setTexture2D(v)),p&&!gt&&this.manager.preBatch(p),this.batchQuad(p,Kt[0],Kt[1],Kt[2],Kt[3],Kt[4],Kt[5],Kt[6],Kt[7],bt,At,Lt,Tt,J,Y,_,U,et,v,mt),p&&!gt&&this.manager.postBatch(p)},batchTextureFrame:function(p,v,g,m,T,P,M){this.manager.set(this);var b=this._tempMatrix1.copyFrom(P),R=this._tempMatrix2;M?b.multiply(M,R):R=b;var A=R.setQuad(v,g,v+p.width,g+p.height),D=this.setTexture2D(p.source.glTexture);m=o.getTintAppendFloatAlpha(m,T),this.batchQuad(null,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],p.u0,p.v0,p.u1,p.v1,m,m,m,m,0,p.glTexture,D)},batchFillRect:function(p,v,g,m,T,P){this.renderer.pipelines.set(this);var M=this.calcMatrix;P&&P.multiply(T,M);var b=M.setQuad(p,v,p+g,v+m),R=this.fillTint;this.batchQuad(null,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],0,0,1,1,R.TL,R.TR,R.BL,R.BR,2)},batchFillTriangle:function(p,v,g,m,T,P,M,b){this.renderer.pipelines.set(this);var R=this.calcMatrix;b&&b.multiply(M,R);var A=R.getX(p,v),D=R.getY(p,v),G=R.getX(g,m),F=R.getY(g,m),B=R.getX(T,P),N=R.getY(T,P),z=this.fillTint;this.batchTri(null,A,D,G,F,B,N,0,0,1,1,z.TL,z.TR,z.BL,2)},batchStrokeTriangle:function(p,v,g,m,T,P,M,b,R){var A=this.tempTriangle;A[0].x=p,A[0].y=v,A[0].width=M,A[1].x=g,A[1].y=m,A[1].width=M,A[2].x=T,A[2].y=P,A[2].width=M,A[3].x=p,A[3].y=v,A[3].width=M,this.batchStrokePath(A,M,!1,b,R)},batchFillPath:function(p,v,g){this.renderer.pipelines.set(this);var m=this.calcMatrix;g&&g.multiply(v,m);for(var T=p.length,P=this.polygonCache,M,b,R=this.fillTint.TL,A=this.fillTint.TR,D=this.fillTint.BL,G=0;G<T;++G)b=p[G],P.push(b.x,b.y);M=y(P),T=M.length;for(var F=0;F<T;F+=3){var B=M[F+0]*2,N=M[F+1]*2,z=M[F+2]*2,$=P[B+0],Q=P[B+1],Z=P[N+0],tt=P[N+1],H=P[z+0],J=P[z+1],Y=m.getX($,Q),_=m.getY($,Q),U=m.getX(Z,tt),et=m.getY(Z,tt),nt=m.getX(H,J),rt=m.getY(H,J);this.batchTri(null,Y,_,U,et,nt,rt,0,0,1,1,R,A,D,2)}P.length=0},batchStrokePath:function(p,v,g,m,T){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var P=p.length-1,M=0;M<P;M++){var b=p[M],R=p[M+1];this.batchLine(b.x,b.y,R.x,R.y,b.width/2,R.width/2,v,M,!g&&M===P-1,m,T)}},batchLine:function(p,v,g,m,T,P,M,b,R,A,D){this.renderer.pipelines.set(this);var G=this.calcMatrix;D&&D.multiply(A,G);var F=g-p,B=m-v,N=Math.sqrt(F*F+B*B);if(N!==0){var z=T*(m-v)/N,$=T*(p-g)/N,Q=P*(m-v)/N,Z=P*(p-g)/N,tt=g-Q,H=m-Z,J=p-z,Y=v-$,_=g+Q,U=m+Z,et=p+z,nt=v+$,rt=G.getX(tt,H),ot=G.getY(tt,H),dt=G.getX(J,Y),vt=G.getY(J,Y),mt=G.getX(_,U),gt=G.getY(_,U),yt=G.getX(et,nt),St=G.getY(et,nt),Ct=this.strokeTint,bt=Ct.TL,At=Ct.TR,Lt=Ct.BL,Tt=Ct.BR;if(this.batchQuad(null,yt,St,dt,vt,rt,ot,mt,gt,0,0,1,1,bt,At,Lt,Tt,2),!(M<=2)){var Et=this.prevQuad,wt=this.firstQuad;b>0&&Et[4]?this.batchQuad(null,yt,St,dt,vt,Et[0],Et[1],Et[2],Et[3],0,0,1,1,bt,At,Lt,Tt,2):(wt[0]=yt,wt[1]=St,wt[2]=dt,wt[3]=vt,wt[4]=1),R&&wt[4]?this.batchQuad(null,rt,ot,mt,gt,wt[0],wt[1],wt[2],wt[3],0,0,1,1,bt,At,Lt,Tt,2):(Et[0]=rt,Et[1]=ot,Et[2]=mt,Et[3]=gt,Et[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,r.prototype.destroy.call(this),this}});S.exports=d},43439:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(95540),u=s(4127),h=s(89924),l=s(29100),n=new c({Extends:l,initialize:function(f){f.vertShader=y(f,"vertShader",h),f.fragShader=y(f,"fragShader",u),f.attributes=y(f,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),l.call(this,f)},onRender:function(o,f){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",f.zoom)},batchPointLight:function(o,f,r,d,p,v,g,m,T,P,M,b){var R=o.color,A=o.intensity,D=o.radius,G=o.attenuation,F=R.r*A,B=R.g*A,N=R.b*A,z=f.alpha*o.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(r,d,M,b,D,G,F,B,N,z),this.batchLightVert(p,v,M,b,D,G,F,B,N,z),this.batchLightVert(g,m,M,b,D,G,F,B,N,z),this.batchLightVert(r,d,M,b,D,G,F,B,N,z),this.batchLightVert(g,m,M,b,D,G,F,B,N,z),this.batchLightVert(T,P,M,b,D,G,F,B,N,z),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(o,f,r,d,p,v,g,m,T,P){var M=this.vertexViewF32,b=this.vertexCount*this.currentShader.vertexComponentCount-1;M[++b]=o,M[++b]=f,M[++b]=r,M[++b]=d,M[++b]=p,M[++b]=v,M[++b]=g,M[++b]=m,M[++b]=T,M[++b]=P,this.vertexCount++}});S.exports=n},84057:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(89422),u=s(95540),h=s(27681),l=s(49627),n=s(29100),o=new c({Extends:n,initialize:function(r){r.renderTarget=u(r,"renderTarget",1),r.fragShader=u(r,"fragShader",h),r.vertShader=u(r,"vertShader",l),r.attributes=u(r,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),r.batchSize=1,r.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],n.call(this,r),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new y,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){n.prototype.boot.call(this);var f=this.manager.UTILITY_PIPELINE;this.fullFrame1=f.fullFrame1,this.fullFrame2=f.fullFrame2,this.halfFrame1=f.halfFrame1,this.halfFrame2=f.halfFrame2;var r=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",r.width,r.height);for(var d=this.renderTargets,p=0;p<d.length;p++)d[p].autoResize=!0},postBatch:function(f){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(f),this},onDraw:function(f){this.bindAndDraw(f)},getController:function(f){return f!==void 0?f:this.controller?this.controller:this},copySprite:function(f,r,d){d===void 0&&(d=!1);var p=this.gl;p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,f.texture.webGLTexture);var v=p.getParameter(p.FRAMEBUFFER_BINDING);p.bindFramebuffer(p.FRAMEBUFFER,r.framebuffer.webGLFramebuffer),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,r.texture.webGLTexture,0),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.STATIC_DRAW),p.drawArrays(p.TRIANGLES,0,6),d&&(p.bindTexture(p.TEXTURE_2D,null),p.bindFramebuffer(p.FRAMEBUFFER,v))},copyFrame:function(f,r,d,p,v){this.manager.copyFrame(f,r,d,p,v)},copyToGame:function(f){this.manager.copyToGame(f)},drawFrame:function(f,r,d){this.manager.drawFrame(f,r,d,this.colorMatrix)},blendFrames:function(f,r,d,p,v){this.manager.blendFrames(f,r,d,p,v)},blendFramesAdditive:function(f,r,d,p,v){this.manager.blendFramesAdditive(f,r,d,p,v)},clearFrame:function(f,r){this.manager.clearFrame(f,r)},blitFrame:function(f,r,d,p,v,g){this.manager.blitFrame(f,r,d,p,v,g)},copyFrameRect:function(f,r,d,p,v,g,m,T){this.manager.copyFrameRect(f,r,d,p,v,g,m,T)},bindAndDraw:function(f,r,d,p,v){d===void 0&&(d=!0),p===void 0&&(p=!0);var g=this.gl,m=this.renderer;this.bind(v),this.set1i("uMainSampler",0),r?(g.viewport(0,0,r.width,r.height),g.bindFramebuffer(g.FRAMEBUFFER,r.framebuffer.webGLFramebuffer),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,r.texture.webGLTexture,0),d&&(p?g.clearColor(0,0,0,0):g.clearColor(0,0,0,1),g.clear(g.COLOR_BUFFER_BIT))):(m.popFramebuffer(!1,!1),m.currentFramebuffer||g.viewport(0,0,m.width,m.height)),m.restoreStencilMask(),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,f.texture.webGLTexture),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6),r&&(g.bindTexture(g.TEXTURE_2D,null),g.bindFramebuffer(g.FRAMEBUFFER,m.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),n.prototype.destroy.call(this),this}});S.exports=o},43558:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(10312),y=s(67502),u=s(83419),h=s(96293),l=s(95540),n=s(57516),o=s(27681),f=s(87841),r=s(32302),d=s(45561),p=s(60722),v=s(29100),g=new u({Extends:n,initialize:function(T){var P=l(T,"fragShader",o),M=l(T,"vertShader",p),b=l(T,"drawShader",o),R=[{name:"DrawSprite",fragShader:d,vertShader:p},{name:"CopySprite",fragShader:P,vertShader:M},{name:"DrawGame",fragShader:b,vertShader:p},{name:"ColorMatrix",fragShader:h}],A=l(T,"shaders",[]);T.shaders=R.concat(A),T.vertShader||(T.vertShader=M),T.batchSize=1,n.call(this,T),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new f,this.targetBounds=new f,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){v.prototype.boot.call(this);var m=this.shaders,T=this.renderer;this.drawSpriteShader=m[0],this.copyShader=m[1],this.gameShader=m[2],this.colorMatrixShader=m[3],this.fsTarget=new r(T,T.width,T.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var P=new ArrayBuffer(168);this.quadVertexData=P,this.quadVertexViewF32=new Float32Array(P),this.quadVertexBuffer=T.createVertexBuffer(P,this.gl.STATIC_DRAW),this.onResize(T.width,T.height),this.currentShader=this.copyShader,this.set2f("uResolution",T.width,T.height)},onResize:function(m,T){var P=this.quadVertexViewF32;P[1]=T,P[22]=T,P[14]=m,P[28]=m,P[35]=m,P[36]=T},batchQuad:function(m,T,P,M,b,R,A,D,G,F,B,N,z,$,Q,Z,tt,H,J){var Y=Math.min(T,M,R,D),_=Math.min(P,b,A,G),U=Math.max(T,M,R,D),et=Math.max(P,b,A,G),nt=U-Y,rt=et-_,ot=this.spriteBounds.setTo(Y,_,nt,rt),dt=m?m.preFX.padding:0,vt=nt+dt*2,mt=rt+dt*2,gt=Math.abs(Math.max(vt,mt)),yt=this.manager.getRenderTarget(gt),St=this.targetBounds.setTo(0,0,yt.width,yt.height);y(St,Math.round(ot.centerX),Math.round(ot.centerY)),this.tempSprite=m;var Ct=this.gl,bt=this.renderer;bt.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",bt.width,bt.height),this.flipProjectionMatrix(!0),m&&(this.onDrawSprite(m,yt),m.preFX.onFX(this));var At=this.fsTarget;return this.flush(),Ct.viewport(0,0,bt.width,bt.height),Ct.bindFramebuffer(Ct.FRAMEBUFFER,At.framebuffer.webGLFramebuffer),Ct.framebufferTexture2D(Ct.FRAMEBUFFER,Ct.COLOR_ATTACHMENT0,Ct.TEXTURE_2D,At.texture.webGLTexture,0),Ct.clearColor(0,0,0,0),Ct.clear(Ct.COLOR_BUFFER_BIT),this.setTexture2D(J),this.batchVert(T,P,F,B,0,H,$),this.batchVert(M,b,F,z,0,H,Z),this.batchVert(R,A,N,z,0,H,tt),this.batchVert(T,P,F,B,0,H,$),this.batchVert(R,A,N,z,0,H,tt),this.batchVert(D,G,N,B,0,H,Q),this.flush(),this.flipProjectionMatrix(!1),Ct.activeTexture(Ct.TEXTURE0),Ct.bindTexture(Ct.TEXTURE_2D,yt.texture.webGLTexture),Ct.copyTexSubImage2D(Ct.TEXTURE_2D,0,0,0,St.x,St.y,St.width,St.height),Ct.bindFramebuffer(Ct.FRAMEBUFFER,null),Ct.bindTexture(Ct.TEXTURE_2D,null),this.onBatch(m),this.currentShader=this.copyShader,this.onDraw(yt,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(m,T,P,M,b,R,A){P===void 0&&(P=!0),M===void 0&&(M=!0),b===void 0&&(b=!1),A===void 0&&(A=this.copyShader);var D=this.gl,G=this.tempSprite;R&&(A=this.colorMatrixShader),this.currentShader=A;var F=this.setVertexBuffer(this.quadVertexBuffer);A.bind(F,!1);var B=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",B.width,B.height),G.preFX.onFXCopy(this),this.onCopySprite(m,T,G),R&&(this.set1fv("uColorMatrix",R.getData()),this.set1f("uAlpha",R.alpha)),D.activeTexture(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,m.texture.webGLTexture),m.height>T.height)D.viewport(0,0,m.width,m.height),this.setTargetUVs(m,T);else{var N=T.height-m.height;D.viewport(0,N,m.width,m.height),this.resetUVs()}if(D.bindFramebuffer(D.FRAMEBUFFER,T.framebuffer.webGLFramebuffer),D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,T.texture.webGLTexture,0),P&&(D.clearColor(0,0,0,+!M),D.clear(D.COLOR_BUFFER_BIT)),b){var z=this.renderer.currentBlendMode;this.renderer.setBlendMode(c.ERASE)}D.bufferData(D.ARRAY_BUFFER,this.quadVertexData,D.STATIC_DRAW),D.drawArrays(D.TRIANGLES,0,6),b&&this.renderer.setBlendMode(z),D.bindFramebuffer(D.FRAMEBUFFER,null)},copy:function(m,T){var P=this.gl;this.set1i("uMainSampler",0),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,m.texture.webGLTexture),P.viewport(0,0,m.width,m.height),this.setUVs(0,0,0,1,1,1,1,0),P.bindFramebuffer(P.FRAMEBUFFER,T.framebuffer.webGLFramebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,T.texture.webGLTexture,0),P.clearColor(0,0,0,0),P.clear(P.COLOR_BUFFER_BIT),P.bufferData(P.ARRAY_BUFFER,this.quadVertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),P.bindFramebuffer(P.FRAMEBUFFER,null)},blendFrames:function(m,T,P,M,b){this.manager.blendFrames(m,T,P,M,b)},blendFramesAdditive:function(m,T,P,M,b){this.manager.blendFramesAdditive(m,T,P,M,b)},drawToGame:function(m){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(m)},copyToGame:function(m){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(m)},bindAndDraw:function(m){var T=this.gl,P=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(m.texture);var M=this._tempMatrix1.loadIdentity(),b=this.targetBounds.x,R=this.targetBounds.y,A=b+m.width,D=R+m.height,G=M.getX(b,R),F=M.getX(b,D),B=M.getX(A,D),N=M.getX(A,R),z=M.getY(b,R),$=M.getY(b,D),Q=M.getY(A,D),Z=M.getY(A,R),tt=16777215;this.batchVert(G,z,0,0,0,0,tt),this.batchVert(F,$,0,1,0,0,tt),this.batchVert(B,Q,1,1,0,0,tt),this.batchVert(G,z,0,0,0,0,tt),this.batchVert(B,Q,1,1,0,0,tt),this.batchVert(N,Z,1,0,0,0,tt),P.restoreFramebuffer(!1,!0),P.currentFramebuffer||T.viewport(0,0,P.width,P.height),P.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(m){this.drawToGame(m)},setUVs:function(m,T,P,M,b,R,A,D){var G=this.quadVertexViewF32;G[2]=m,G[3]=T,G[9]=P,G[10]=M,G[16]=b,G[17]=R,G[23]=m,G[24]=T,G[30]=b,G[31]=R,G[37]=A,G[38]=D},setTargetUVs:function(m,T){var P=T.height/m.height;P>.5?P=.5-(P-.5):P=.5+(.5-P),this.setUVs(0,P,0,1+P,1,1+P,1,P)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,n.prototype.destroy.call(this),this}});S.exports=g},81041:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(95540),u=s(57516),h=new c({Extends:u,initialize:function(n){n.topology=5,n.batchSize=y(n,"batchSize",256),u.call(this,n)}});S.exports=h},12385:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(95540),u=s(57516),h=s(45561),l=s(60722),n=s(29100),o=new c({Extends:u,initialize:function(r){r.fragShader=y(r,"fragShader",h),r.vertShader=y(r,"vertShader",l),r.forceZero=!0,u.call(this,r)},boot:function(){n.prototype.boot.call(this);var f=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",f.width,f.height)}});S.exports=o},7589:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35407),y=s(10312),u=s(83419),h=s(89422),l=s(96293),n=s(36682),o=s(95540),f=s(48247),r=s(49627),d=s(29100),p=new u({Extends:d,initialize:function(g){g.renderTarget=o(g,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),g.vertShader=o(g,"vertShader",r),g.shaders=o(g,"shaders",[{name:"Copy",fragShader:n},{name:"AddBlend",fragShader:c},{name:"LinearBlend",fragShader:f},{name:"ColorMatrix",fragShader:l}]),g.attributes=o(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),g.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],g.batchSize=1,d.call(this,g),this.colorMatrix=new h,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){d.prototype.boot.call(this);var v=this.shaders,g=this.renderTargets;this.copyShader=v[0],this.addShader=v[1],this.linearShader=v[2],this.colorMatrixShader=v[3],this.fullFrame1=g[0],this.fullFrame2=g[1],this.halfFrame1=g[2],this.halfFrame2=g[3]},copyFrame:function(v,g,m,T,P){m===void 0&&(m=1),T===void 0&&(T=!0),P===void 0&&(P=!0);var M=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,v.texture.webGLTexture),g?(M.viewport(0,0,g.width,g.height),M.bindFramebuffer(M.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,g.texture.webGLTexture,0)):M.viewport(0,0,v.width,v.height),T&&(P?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT)),M.bufferData(M.ARRAY_BUFFER,this.vertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},blitFrame:function(v,g,m,T,P,M,b){m===void 0&&(m=1),T===void 0&&(T=!0),P===void 0&&(P=!0),M===void 0&&(M=!1),b===void 0&&(b=!1);var R=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,v.texture.webGLTexture),v.height>g.height)R.viewport(0,0,v.width,v.height),this.setTargetUVs(v,g);else{var A=g.height-v.height;R.viewport(0,A,v.width,v.height)}if(R.bindFramebuffer(R.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,g.texture.webGLTexture,0),T&&(P?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),M){var D=this.renderer.currentBlendMode;this.renderer.setBlendMode(y.ERASE)}b&&this.flipY(),R.bufferData(R.ARRAY_BUFFER,this.vertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),M&&this.renderer.setBlendMode(D),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(v,g,m,T,P,M,b,R){b===void 0&&(b=!0),R===void 0&&(R=!0);var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,v.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,v.texture.webGLTexture,0),b&&(R?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,g.texture.webGLTexture),A.copyTexSubImage2D(A.TEXTURE_2D,0,0,0,m,T,P,M),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},copyToGame:function(v){var g=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,v.texture.webGLTexture),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6)},drawFrame:function(v,g,m,T){m===void 0&&(m=!0),T===void 0&&(T=this.colorMatrix);var P=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",T.getData()),this.set1f("uAlpha",T.alpha),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,v.texture.webGLTexture),g?(P.viewport(0,0,g.width,g.height),P.bindFramebuffer(P.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,g.texture.webGLTexture,0)):P.viewport(0,0,v.width,v.height),m?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT),P.bufferData(P.ARRAY_BUFFER,this.vertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},blendFrames:function(v,g,m,T,P,M){T===void 0&&(T=1),P===void 0&&(P=!0),M===void 0&&(M=this.linearShader);var b=this.gl;this.setShader(M),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",T),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,v.texture.webGLTexture),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,g.texture.webGLTexture),m?(b.bindFramebuffer(b.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,m.texture.webGLTexture,0),b.viewport(0,0,m.width,m.height)):b.viewport(0,0,v.width,v.height),P?b.clearColor(0,0,0,0):b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT),b.bufferData(b.ARRAY_BUFFER,this.vertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),b.bindFramebuffer(b.FRAMEBUFFER,null),b.bindTexture(b.TEXTURE_2D,null)},blendFramesAdditive:function(v,g,m,T,P){this.blendFrames(v,g,m,T,P,this.addShader)},clearFrame:function(v,g){g===void 0&&(g=!0);var m=this.gl;m.viewport(0,0,v.width,v.height),m.bindFramebuffer(m.FRAMEBUFFER,v.framebuffer.webGLFramebuffer),g?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT);var T=this.renderer.currentFramebuffer;m.bindFramebuffer(m.FRAMEBUFFER,T.webGLFramebuffer)},setUVs:function(v,g,m,T,P,M,b,R){var A=this.vertexViewF32;A[2]=v,A[3]=g,A[6]=m,A[7]=T,A[10]=P,A[11]=M,A[14]=v,A[15]=g,A[18]=P,A[19]=M,A[22]=b,A[23]=R},setTargetUVs:function(v,g){var m=g.height/v.height;m>.5?m=.5-(m-.5):m=.5+(.5-m),this.setUVs(0,m,0,1+m,1,1+m,1,m)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});S.exports=p},36060:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};S.exports=w},84817:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pipelineafterflush"},36712:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pipelinebeforeflush"},40285:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pipelinebind"},65918:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pipelineboot"},92852:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pipelinedestroy"},56072:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pipelinerebind"},57566:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pipelineresize"},77085:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={AFTER_FLUSH:s(84817),BEFORE_FLUSH:s(36712),BIND:s(40285),BOOT:s(65918),DESTROY:s(92852),REBIND:s(56072),RESIZE:s(57566)}},54812:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(99155),u=s(84057),h=new c({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:y}),this.amount=1},onPreRender:function(l,n){l=this.getController(l),this.set1f("amount",l.amount,n)}});S.exports=h},67329:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(24400),u=s(84057),h=new c({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:y}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(l){l=this.getController(l),this.set1f("strength",l.blurStrength),this.set3fv("color",l.glcolor)},onDraw:function(l){var n=this.getController(),o=this.fullFrame1,f=this.fullFrame2;this.copyFrame(l,f);for(var r=2/l.width*n.offsetX,d=2/l.height*n.offsetY,p=0;p<n.steps;p++)this.set2f("offset",r,0),this.copySprite(l,o),this.set2f("offset",0,d),this.copySprite(o,l);this.blendFrames(f,l,o,n.strength),this.copyToGame(o)}});S.exports=h},8861:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(41514),u=s(51078),h=s(94328),l=s(84057),n=new c({Extends:l,initialize:function(f){l.call(this,{game:f,shaders:[{name:"Gaussian5",fragShader:y},{name:"Gaussian9",fragShader:u},{name:"Gaussian13",fragShader:h}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(o){var f=this.getController(),r=this.gl,d=this.fullFrame1,p=r.getParameter(r.FRAMEBUFFER_BINDING);this.bind(this.shaders[f.quality]),r.activeTexture(r.TEXTURE0),r.viewport(0,0,o.width,o.height),this.set1i("uMainSampler",0),this.set2f("resolution",o.width,o.height),this.set1f("strength",f.strength),this.set3fv("color",f.glcolor);for(var v=0;v<f.steps;v++)this.set2f("offset",f.x,0),this.copySprite(o,d),this.set2f("offset",0,f.y),this.copySprite(d,o);r.bindFramebuffer(r.FRAMEBUFFER,p),r.bindTexture(r.TEXTURE_2D,null),this.copyToGame(o)}});S.exports=n},51051:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(90610),u=s(84057),h=new c({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:y}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(l,n,o,f){l=this.getController(l),this.set1f("radius",l.radius,n),this.set1f("amount",l.amount,n),this.set1f("contrast",l.contrast,n),this.set1f("strength",l.strength,n),this.set2f("blur",l.blurX,l.blurY,n),this.setBoolean("isTiltShift",l.isTiltShift,n),o&&f&&this.set2f("resolution",o,f,n)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});S.exports=h},89428:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(91899),u=s(84057),h=new c({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:y}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(l,n,o,f){l=this.getController(l),this.set1f("scale",l.scale,n),this.set1f("feather",l.feather,n),this.set1f("thickness",l.thickness,n),this.set3fv("color",l.glcolor,n),this.set4fv("backgroundColor",l.glcolor2,n),o&&f&&this.set2f("resolution",o,f,n)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});S.exports=h},88904:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(84057),u=new c({Extends:y,initialize:function(l){y.call(this,{game:l})},onDraw:function(h){var l=this.fullFrame1;this.controller?this.manager.drawFrame(h,l,!0,this.controller):this.drawFrame(h,l),this.copyToGame(l)}});S.exports=u},63563:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(47838),u=s(84057),h=new c({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:y}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(l){var n=this.game.textures.getFrame(l);n&&(this.glTexture=n.glTexture)},onDraw:function(l){var n=this.getController(),o=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",n.x,n.y),this.bindTexture(n.glTexture,1),this.copySprite(l,o),this.copyToGame(o)}});S.exports=h},94045:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(95540),u=s(98656),h=s(84057),l=s(70554),n=new c({Extends:h,initialize:function(f,r){var d=y(r,"quality",.1),p=y(r,"distance",10);h.call(this,{game:f,fragShader:l.setGlowQuality(u,f,d,p)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(o,f,r,d){o=this.getController(o),this.set1f("outerStrength",o.outerStrength,f),this.set1f("innerStrength",o.innerStrength,f),this.set4fv("glowColor",o.glcolor,f),this.setBoolean("knockout",o.knockout,f),r&&d&&this.set2f("resolution",r,d,f)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});S.exports=n},74088:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(70463),u=s(84057),h=new c({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:y}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(l,n){l=this.getController(l),this.set1f("alpha",l.alpha,n),this.set1i("size",l.size,n),this.set3fv("color1",l.glcolor1,n),this.set3fv("color2",l.glcolor2,n),this.set2f("positionFrom",l.fromX,l.fromY,n),this.set2f("positionTo",l.toX,l.toY,n)}});S.exports=h},99636:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(50831),u=s(84057),h=new c({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:y}),this.amount=1},onPreRender:function(l,n,o,f){l=this.getController(l),this.set1f("amount",l.amount,n),o&&f&&this.set2f("resolution",o,f,n)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});S.exports=h},34700:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(92595),u=s(84057),h=new c({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:y}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(l,n){l=this.getController(l);var o=l.samples;this.set1i("samples",o,n),this.set1f("intensity",l.intensity,n),this.set1f("decay",l.decay,n),this.set1f("power",l.power/o,n),this.set2f("lightPosition",l.x,l.y,n),this.set4fv("color",l.glcolor,n)}});S.exports=h},91157:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(72464),u=s(84057),h=new c({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:y}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(l,n,o,f){l=this.getController(l),this.setTime("time",n),this.set1f("speed",l.speed,n),this.set1f("lineWidth",l.lineWidth,n),this.set1f("gradient",l.gradient,n),this.setBoolean("reveal",l.reveal,n),o&&f&&this.set2f("resolution",o,f,n)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});S.exports=h},27797:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(39249),u=s(84057),h=new c({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:y}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(l,n){l=this.getController(l),this.set1f("radius",l.radius,n),this.set1f("strength",l.strength,n),this.set2f("position",l.x,l.y,n)}});S.exports=h},67603:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(2878),u=s(84057),h=new c({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:y}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(l,n){l=this.getController(l);var o=l.progress,f=l.wipeWidth,r=l.direction,d=l.axis;this.set4f("config",o,f,r,d,n),this.setBoolean("reveal",l.reveal,n)}});S.exports=h},58918:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c={Barrel:s(54812),Bloom:s(67329),Blur:s(8861),Bokeh:s(51051),Circle:s(89428),ColorMatrix:s(88904),Displacement:s(63563),Glow:s(94045),Gradient:s(74088),Pixelate:s(99636),Shadow:s(34700),Shine:s(91157),Vignette:s(27797),Wipe:s(67603)};S.exports=c},96615:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(36060),y=s(79291),u={FX:s(58918),BitmapMaskPipeline:s(31302),Events:s(77085),FXPipeline:s(92651),LightPipeline:s(96569),MobilePipeline:s(56527),MultiPipeline:s(57516),PointLightPipeline:s(43439),PostFXPipeline:s(84057),PreFXPipeline:s(43558),RopePipeline:s(81041),SinglePipeline:s(12385),UtilityPipeline:s(7589)};u=y(!1,u,c),S.exports=u},35407:S=>{S.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},78908:S=>{S.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},85191:S=>{S.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},96293:S=>{S.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},36682:S=>{S.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},99155:S=>{S.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},24400:S=>{S.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},94328:S=>{S.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},41514:S=>{S.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},51078:S=>{S.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},90610:S=>{S.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},91899:S=>{S.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},47838:S=>{S.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},98656:S=>{S.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},70463:S=>{S.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},50831:S=>{S.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},92595:S=>{S.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},72464:S=>{S.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},39249:S=>{S.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},2878:S=>{S.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},31063:S=>{S.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},48247:S=>{S.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},41214:S=>{S.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},39653:S=>{S.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},62143:S=>{S.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},47940:S=>{S.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},98840:S=>{S.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},44667:S=>{S.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},4127:S=>{S.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},89924:S=>{S.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},27681:S=>{S.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},49627:S=>{S.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},45561:S=>{S.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},60722:S=>{S.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},89350:(S,w,s)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={AddBlendFrag:s(35407),BitmapMaskFrag:s(78908),BitmapMaskVert:s(85191),ColorMatrixFrag:s(96293),CopyFrag:s(36682),FXBarrelFrag:s(99155),FXBloomFrag:s(24400),FXBlurHighFrag:s(94328),FXBlurLowFrag:s(41514),FXBlurMedFrag:s(51078),FXBokehFrag:s(90610),FXCircleFrag:s(91899),FXDisplacementFrag:s(47838),FXGlowFrag:s(98656),FXGradientFrag:s(70463),FXPixelateFrag:s(50831),FXShadowFrag:s(92595),FXShineFrag:s(72464),FXVignetteFrag:s(39249),FXWipeFrag:s(2878),LightFrag:s(31063),LinearBlendFrag:s(48247),MeshFrag:s(41214),MeshVert:s(39653),MobileFrag:s(62143),MobileVert:s(47940),MultiFrag:s(98840),MultiVert:s(44667),PointLightFrag:s(4127),PointLightVert:s(89924),PostFXFrag:s(27681),QuadVert:s(49627),SingleFrag:s(45561),SingleVert:s(60722)}},93567:(S,w,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l,n){this.webGLAttribLocation=-1,this.gl=h,this.program=l,this.name=n,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var u=this.gl;u.isContextLost()||(this.webGLAttribLocation=u.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});S.exports=y},26128:(S,w,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l,n,o){this.webGLBuffer=null,this.gl=h,this.initialDataOrSize=l,this.bufferType=n,this.bufferUsage=o,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var u=this.gl;if(!u.isContextLost()){var h=this.bufferType,l=u.createBuffer();this.webGLBuffer=l,u.bindBuffer(h,this.webGLBuffer),u.bufferData(h,this.initialDataOrSize,this.bufferUsage),u.bindBuffer(h,null)}}},destroy:function(){var u=this.gl;u.isContextLost()||u.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});S.exports=y},84387:(S,w,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},u=new c({initialize:function(l,n,o,f,r){this.webGLFramebuffer=null,this.gl=l,this.width=n,this.height=o,this.renderTexture=f,this.addDepthStencilBuffer=!!r,this.createResource()},createResource:function(){var h=this.gl;if(!h.isContextLost()){var l=this.renderTexture,n=0,o=h.createFramebuffer();if(this.webGLFramebuffer=o,h.bindFramebuffer(h.FRAMEBUFFER,o),l.isRenderTexture=!0,l.isAlphaPremultiplied=!1,h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,l.webGLTexture,0),n=h.checkFramebufferStatus(h.FRAMEBUFFER),n!==h.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(y[n]||n));if(this.addDepthStencilBuffer){var f=h.createRenderbuffer();h.bindRenderbuffer(h.RENDERBUFFER,f),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_STENCIL,this.width,this.height),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,f)}h.bindFramebuffer(h.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var h=this.gl;if(!h.isContextLost()){h.bindFramebuffer(h.FRAMEBUFFER,this.webGLFramebuffer);var l=h.getFramebufferAttachmentParameter(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);l!==null&&(h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,null,0),h.deleteTexture(l));var n=h.getFramebufferAttachmentParameter(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);n!==null&&h.deleteRenderbuffer(n),h.bindFramebuffer(h.FRAMEBUFFER,null),h.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});S.exports=u},1482:(S,w,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l,n){this.webGLProgram=null,this.gl=h,this.vertexSource=l,this.fragmentSource=n,this.createResource()},createResource:function(){var u=this.gl;if(!u.isContextLost()){var h=u.createProgram(),l=u.createShader(u.VERTEX_SHADER),n=u.createShader(u.FRAGMENT_SHADER);u.shaderSource(l,this.vertexSource),u.shaderSource(n,this.fragmentSource),u.compileShader(l),u.compileShader(n);var o=`Shader failed:
`;if(!u.getShaderParameter(l,u.COMPILE_STATUS))throw new Error("Vertex "+o+u.getShaderInfoLog(l));if(!u.getShaderParameter(n,u.COMPILE_STATUS))throw new Error("Fragment "+o+u.getShaderInfoLog(n));if(u.attachShader(h,l),u.attachShader(h,n),u.linkProgram(h),!u.getProgramParameter(h,u.LINK_STATUS))throw new Error("Link "+o+u.getProgramInfoLog(h));u.useProgram(h),this.webGLProgram=h}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});S.exports=y},82751:(S,w,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(50030),u=new c({initialize:function(l,n,o,f,r,d,p,v,g,m,T,P,M){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=l,this.mipLevel=n,this.minFilter=o,this.magFilter=f,this.wrapT=r,this.wrapS=d,this.format=p,this.pixels=v,this.width=g,this.height=m,this.pma=T??!0,this.forceSize=!!P,this.flipY=!!M,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var h=this.gl;if(!h.isContextLost()){if(this.pixels instanceof u){this.webGLTexture=this.pixels.webGLTexture;return}var l=h.createTexture();l.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=l,this._processTexture()}},update:function(h,l,n,o,f,r,d,p,v){if(!(l===0||n===0)){this.pixels=h,this.width=l,this.height=n,this.flipY=o,this.wrapS=f,this.wrapT=r,this.minFilter=d,this.magFilter=p,this.format=v;var g=this.gl;g.isContextLost()||this._processTexture()}},_processTexture:function(){var h=this.gl;h.activeTexture(h.TEXTURE0);var l=h.getParameter(h.TEXTURE_BINDING_2D);h.bindTexture(h.TEXTURE_2D,this.webGLTexture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.minFilter),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,this.magFilter),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,this.wrapS),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,this.wrapT),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,this.flipY);var n=this.pixels,o=this.mipLevel,f=this.width,r=this.height,d=this.format,p=!1;if(n==null)h.texImage2D(h.TEXTURE_2D,o,d,f,r,0,d,h.UNSIGNED_BYTE,null),p=y(f,r);else if(n.compressed){f=n.width,r=n.height,p=n.generateMipmap;for(var v=0;v<n.mipmaps.length;v++)h.compressedTexImage2D(h.TEXTURE_2D,v,n.internalFormat,n.mipmaps[v].width,n.mipmaps[v].height,0,n.mipmaps[v].data)}else n instanceof Uint8Array?(h.texImage2D(h.TEXTURE_2D,o,d,f,r,0,d,h.UNSIGNED_BYTE,n),p=y(f,r)):(this.forceSize||(f=n.width,r=n.height),h.texImage2D(h.TEXTURE_2D,o,d,d,h.UNSIGNED_BYTE,n),p=y(f,r));p&&h.generateMipmap(h.TEXTURE_2D),l?h.bindTexture(h.TEXTURE_2D,l):h.bindTexture(h.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(h){this.__SPECTOR_Metadata=h,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=h)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof u||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});S.exports=u},57183:(S,w,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l,n){this.webGLUniformLocation=null,this.gl=h,this.program=l,this.name=n,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var u=this.gl;u.isContextLost()||(this.webGLUniformLocation=u.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});S.exports=y},9503:(S,w,s)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c={WebGLAttribLocationWrapper:s(93567),WebGLBufferWrapper:s(26128),WebGLProgramWrapper:s(1482),WebGLTextureWrapper:s(82751),WebGLFramebufferWrapper:s(84387),WebGLUniformLocationWrapper:s(57183)};S.exports=c},76531:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(13560),y=s(83419),u=s(45319),h=s(50792),l=s(97480),n=s(8443),o=s(57811),f=s(74403),r=s(45818),d=s(29747),p=s(87841),v=s(86555),g=s(56583),m=s(26099),T=s(38058),P=new y({Extends:h,initialize:function(b){h.call(this),this.game=b,this.canvas,this.canvasBounds=new p,this.parent=null,this.parentIsWindow=!1,this.parentSize=new v,this.gameSize=new v,this.baseSize=new v,this.displaySize=new v,this.scaleMode=c.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=c.CENTER.NO_CENTER,this.orientation=c.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:d,windowResize:d,fullScreenChange:d,fullScreenError:d}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(n.BOOT,this.boot,this)},boot:function(){var M=this.game;this.canvas=M.canvas,this.fullscreen=M.device.fullscreen;var b=this.scaleMode;b!==c.SCALE_MODE.RESIZE&&b!==c.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(b),b===c.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),M.events.on(n.PRE_STEP,this.step,this),M.events.once(n.READY,this.refresh,this),M.events.once(n.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(M){this.getParent(M),this.getParentBounds();var b=M.width,R=M.height,A=M.scaleMode,D=M.zoom,G=M.autoRound;if(typeof b=="string")if(b.substr(-1)!=="%")b=parseInt(b,10);else{var F=this.parentSize.width;F===0&&(F=window.innerWidth);var B=parseInt(b,10)/100;b=Math.floor(F*B)}if(typeof R=="string")if(R.substr(-1)!=="%")R=parseInt(R,10);else{var N=this.parentSize.height;N===0&&(N=window.innerHeight);var z=parseInt(R,10)/100;R=Math.floor(N*z)}this.scaleMode=A,this.autoRound=G,this.autoCenter=M.autoCenter,this.resizeInterval=M.resizeInterval,G&&(b=Math.floor(b),R=Math.floor(R)),this.gameSize.setSize(b,R),D===c.ZOOM.MAX_ZOOM&&(D=this.getMaxZoom()),this.zoom=D,D!==1&&(this._resetZoom=!0),this.baseSize.setSize(b,R),G&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),M.minWidth>0&&this.displaySize.setMin(M.minWidth*D,M.minHeight*D),M.maxWidth>0&&this.displaySize.setMax(M.maxWidth*D,M.maxHeight*D),this.displaySize.setSize(b,R),(M.snapWidth>0||M.snapHeight>0)&&this.displaySize.setSnap(M.snapWidth,M.snapHeight),this.orientation=r(b,R)},getParent:function(M){var b=M.parent;if(b!==null){if(this.parent=f(b),this.parentIsWindow=this.parent===document.body,M.expandParent&&M.scaleMode!==c.SCALE_MODE.NONE){var R=this.parent.getBoundingClientRect();(this.parentIsWindow||R.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",R=this.parent.getBoundingClientRect(),!this.parentIsWindow&&R.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}M.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=f(M.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var M=this.parentSize,b=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(b.height=o(!0));var R=b.width,A=b.height;if(M.width!==R||M.height!==A)return M.setSize(R,A),!0;if(this.canvas){var D=this.canvasBounds,G=this.canvas.getBoundingClientRect();if(G.x!==D.x||G.y!==D.y)return!0}return!1},lockOrientation:function(M){var b=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return b?b.call(screen,M):!1},setParentSize:function(M,b){return this.parentSize.setSize(M,b),this.refresh()},setGameSize:function(M,b){var R=this.autoRound;R&&(M=Math.floor(M),b=Math.floor(b));var A=this.width,D=this.height;return this.gameSize.resize(M,b),this.baseSize.resize(M,b),R&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(M/b),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(A,D)},resize:function(M,b){var R=this.zoom,A=this.autoRound;A&&(M=Math.floor(M),b=Math.floor(b));var D=this.width,G=this.height;this.gameSize.resize(M,b),this.baseSize.resize(M,b),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(M*R,b*R),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var F=this.canvas.style,B=M*R,N=b*R;return A&&(B=Math.floor(B),N=Math.floor(N)),(B!==M||N!==b)&&(F.width=B+"px",F.height=N+"px"),this.refresh(D,G)},setZoom:function(M){return this.zoom=M,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(M,b){return M===void 0&&(M=0),b===void 0&&(b=M),this.displaySize.setSnap(M,b),this.refresh()},refresh:function(M,b){M===void 0&&(M=this.width),b===void 0&&(b=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var R=this.game.domContainer;if(R){this.baseSize.setCSS(R);var A=this.canvas.style,D=R.style;D.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",D.marginLeft=A.marginLeft,D.marginTop=A.marginTop}return this.emit(l.RESIZE,this.gameSize,this.baseSize,this.displaySize,M,b),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var M=r(this.width,this.height);M!==this.orientation&&(this.orientation=M,this.emit(l.ORIENTATION_CHANGE,M))}},updateScale:function(){var M=this.canvas.style,b=this.gameSize.width,R=this.gameSize.height,A,D,G=this.zoom,F=this.autoRound;if(this.scaleMode===c.SCALE_MODE.NONE)this.displaySize.setSize(b*G,R*G),A=this.displaySize.width,D=this.displaySize.height,F&&(A=Math.floor(A),D=Math.floor(D)),this._resetZoom&&(M.width=A+"px",M.height=D+"px",this._resetZoom=!1);else if(this.scaleMode===c.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),A=this.displaySize.width,D=this.displaySize.height,F&&(A=Math.floor(A),D=Math.floor(D)),this.canvas.width=A,this.canvas.height=D;else if(this.scaleMode===c.SCALE_MODE.EXPAND){var B=this.game.config.width,N=this.game.config.height,z=this.parentSize.width,$=this.parentSize.height,Q=z/B,Z=$/N,tt,H;Q<Z?(tt=B,H=Q!==0?$/Q:N):(tt=Z!==0?z/Z:B,H=N);var J=u(tt,this.displaySize.minWidth,this.displaySize.maxWidth),Y=u(H,this.displaySize.minHeight,this.displaySize.maxHeight);this.baseSize.setSize(J,Y),this.gameSize.setSize(J,Y),F&&(J=Math.floor(J),Y=Math.floor(Y)),this.canvas.width=J,this.canvas.height=Y;var _=z*(J/tt),U=$*(Y/H);this.displaySize.setSize(_,U),A=this.displaySize.width,D=this.displaySize.height,F&&(A=Math.floor(A),D=Math.floor(D)),M.width=A+"px",M.height=D+"px"}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),A=this.displaySize.width,D=this.displaySize.height,F&&(A=Math.floor(A),D=Math.floor(D)),M.width=A+"px",M.height=D+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var M=g(this.parentSize.width,this.gameSize.width,0,!0),b=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(M,b),1)},updateCenter:function(){var M=this.autoCenter;if(M!==c.CENTER.NO_CENTER){var b=this.canvas,R=b.style,A=b.getBoundingClientRect(),D=A.width,G=A.height,F=Math.floor((this.parentSize.width-D)/2),B=Math.floor((this.parentSize.height-G)/2);M===c.CENTER.CENTER_HORIZONTALLY?B=0:M===c.CENTER.CENTER_VERTICALLY&&(F=0),R.marginLeft=F+"px",R.marginTop=B+"px"}},updateBounds:function(){var M=this.canvasBounds,b=this.canvas.getBoundingClientRect();M.x=b.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),M.y=b.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),M.width=b.width,M.height=b.height},transformX:function(M){return(M-this.canvasBounds.left)*this.displayScale.x},transformY:function(M){return(M-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(M){M===void 0&&(M={navigationUI:"hide"});var b=this.fullscreen;if(!b.available){this.emit(l.FULLSCREEN_UNSUPPORTED);return}if(!b.active){var R=this.getFullscreenTarget();b.keyboard?R[b.request](Element.ALLOW_KEYBOARD_INPUT):R[b.request](M)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(l.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(M){this.removeFullscreenTarget(),this.emit(l.FULLSCREEN_FAILED,M)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var M=document.createElement("div");M.style.margin="0",M.style.padding="0",M.style.width="100%",M.style.height="100%",this.fullscreenTarget=M,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var b=this.canvas.parentNode;b.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var M=this.fullscreenTarget;if(M&&M.parentNode){var b=M.parentNode;b.insertBefore(this.canvas,M),b.removeChild(M)}}},stopFullscreen:function(){var M=this.fullscreen;if(!M.available)return this.emit(l.FULLSCREEN_UNSUPPORTED),!1;M.active&&document[M.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(l.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(M){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(M)},startListeners:function(){var M=this,b=this.domlisteners;if(b.orientationChange=function(){M.updateBounds(),M._checkOrientation=!0,M.dirty=!0,M.refresh()},b.windowResize=function(){M.updateBounds(),M.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",b.orientationChange,!1):window.addEventListener("orientationchange",b.orientationChange,!1),window.addEventListener("resize",b.windowResize,!1),this.fullscreen.available){b.fullScreenChange=function(A){return M.onFullScreenChange(A)},b.fullScreenError=function(A){return M.onFullScreenError(A)};var R=["webkit","moz",""];R.forEach(function(A){document.addEventListener(A+"fullscreenchange",b.fullScreenChange,!1),document.addEventListener(A+"fullscreenerror",b.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",b.fullScreenChange,!1),document.addEventListener("MSFullscreenError",b.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(M,b){M instanceof T||(b=M,M=void 0),b===void 0&&(b=new p);var R=this.baseSize,A=this.parentSize,D=this.canvasBounds,G=this.displayScale,F=D.x>=0?0:-(D.x*G.x),B=D.y>=0?0:-(D.y*G.y),N;A.width>=D.width?N=R.width:N=R.width-(D.width-A.width)*G.x;var z;return A.height>=D.height?z=R.height:z=R.height-(D.height-A.height)*G.y,b.setTo(F,B,N,z),M&&(b.width/=M.zoomX,b.height/=M.zoomY,b.centerX=M.centerX+M.scrollX,b.centerY=M.centerY+M.scrollY),b},step:function(M,b){this.parent&&(this._lastCheck+=b,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var M=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",M.orientationChange,!1):window.removeEventListener("orientationchange",M.orientationChange,!1),window.removeEventListener("resize",M.windowResize,!1);var b=["webkit","moz",""];b.forEach(function(R){document.removeEventListener(R+"fullscreenchange",M.fullScreenChange,!1),document.removeEventListener(R+"fullscreenerror",M.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",M.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",M.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===c.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===c.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});S.exports=P},64743:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},39218:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}},81050:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}},80805:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},13560:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c={CENTER:s(64743),ORIENTATION:s(39218),SCALE_MODE:s(81050),ZOOM:s(80805)};S.exports=c},56139:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="enterfullscreen"},2336:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="fullscreenfailed"},47412:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="fullscreenunsupported"},51452:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="leavefullscreen"},20666:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="orientationchange"},47945:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="resize"},97480:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={ENTER_FULLSCREEN:s(56139),FULLSCREEN_FAILED:s(2336),FULLSCREEN_UNSUPPORTED:s(47412),LEAVE_FULLSCREEN:s(51452),ORIENTATION_CHANGE:s(20666),RESIZE:s(47945)}},93364:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(79291),y=s(13560),u={Center:s(64743),Events:s(97480),Orientation:s(39218),ScaleManager:s(76531),ScaleModes:s(81050),Zoom:s(80805)};u=c(!1,u,y.CENTER),u=c(!1,u,y.ORIENTATION),u=c(!1,u,y.SCALE_MODE),u=c(!1,u,y.ZOOM),S.exports=u},27397:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(95540),y=s(35355),u=function(h){var l=h.game.config.defaultPhysicsSystem,n=c(h.settings,"physics",!1);if(!(!l&&!n)){var o=[];if(l&&o.push(y(l+"Physics")),n)for(var f in n)f=y(f.concat("Physics")),o.indexOf(f)===-1&&o.push(f);return o}};S.exports=u},52106:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(95540),y=function(u){var h=u.plugins.getDefaultScenePlugins(),l=c(u.settings,"plugins",!1);return Array.isArray(l)?l:h||[]};S.exports=y},87033:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};S.exports=w},97482:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(2368),u=new c({initialize:function(l){this.sys=new y(this,l),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});S.exports=u},60903:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(89993),u=s(44594),h=s(8443),l=s(35154),n=s(54899),o=s(29747),f=s(97482),r=s(2368),d=new c({initialize:function(v,g){if(this.game=v,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,g){Array.isArray(g)||(g=[g]);for(var m=0;m<g.length;m++)this._pending.push({key:"default",scene:g[m],autoStart:m===0,data:{}})}v.events.once(h.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new f),this.game.events.emit(h.SYSTEM_READY,this.systemScene,this);var p,v,g,m;for(p=0;p<this._pending.length;p++){v=this._pending[p],g=v.key,m=v.scene;var T;m instanceof f?T=this.createSceneFromInstance(g,m):typeof m=="object"?T=this.createSceneFromObject(g,m):typeof m=="function"&&(T=this.createSceneFromFunction(g,m)),g=T.sys.settings.key,this.keys[g]=T,this.scenes.push(T),this._data[g]&&(T.sys.settings.data=this._data[g].data,this._data[g].autoStart&&(v.autoStart=!0)),(v.autoStart||T.sys.settings.active)&&this._start.push(g)}for(this._pending.length=0,this._data={},this.isBooted=!0,p=0;p<this._start.length;p++)v=this._start[p],this.start(v);this._start.length=0}},processQueue:function(){var p=this._pending.length,v=this._queue.length;if(!(p===0&&v===0)){var g,m;if(p){for(g=0;g<p;g++)m=this._pending[g],this.add(m.key,m.scene,m.autoStart,m.data);for(g=0;g<this._start.length;g++)m=this._start[g],this.start(m);this._start.length=0,this._pending.length=0}for(g=0;g<this._queue.length;g++)m=this._queue[g],this[m.op](m.keyA,m.keyB,m.data);this._queue.length=0}},add:function(p,v,g,m){if(g===void 0&&(g=!1),m===void 0&&(m={}),this.isProcessing||!this.isBooted)return this._pending.push({key:p,scene:v,autoStart:g,data:m}),this.isBooted||(this._data[p]={data:m}),null;p=this.getKey(p,v);var T;return v instanceof f?T=this.createSceneFromInstance(p,v):typeof v=="object"?(v.key=p,T=this.createSceneFromObject(p,v)):typeof v=="function"&&(T=this.createSceneFromFunction(p,v)),T.sys.settings.data=m,p=T.sys.settings.key,this.keys[p]=T,this.scenes.push(T),(g||T.sys.settings.active)&&(this._pending.length?this._start.push(p):this.start(p)),T},remove:function(p){if(this.isProcessing)return this.queueOp("remove",p);var v=this.getScene(p);if(!v||v.sys.isTransitioning())return this;var g=this.scenes.indexOf(v),m=v.sys.settings.key;return g>-1&&(delete this.keys[m],this.scenes.splice(g,1),this._start.indexOf(m)>-1&&(g=this._start.indexOf(m),this._start.splice(g,1)),v.sys.destroy()),this},bootScene:function(p){var v=p.sys,g=v.settings;v.sceneUpdate=o,p.init&&(p.init.call(p,g.data),g.status=y.INIT,g.isTransition&&v.events.emit(u.TRANSITION_INIT,g.transitionFrom,g.transitionDuration));var m;v.load&&(m=v.load,m.reset()),m&&p.preload?(p.preload.call(p),g.status=y.LOADING,m.once(n.COMPLETE,this.loadComplete,this),m.start()):this.create(p)},loadComplete:function(p){this.create(p.scene)},payloadComplete:function(p){this.bootScene(p.scene)},update:function(p,v){this.processQueue(),this.isProcessing=!0;for(var g=this.scenes.length-1;g>=0;g--){var m=this.scenes[g].sys;m.settings.status>y.START&&m.settings.status<=y.RUNNING&&m.step(p,v),m.scenePlugin&&m.scenePlugin._target&&m.scenePlugin.step(p,v)}},render:function(p){for(var v=0;v<this.scenes.length;v++){var g=this.scenes[v].sys;g.settings.visible&&g.settings.status>=y.LOADING&&g.settings.status<y.SLEEPING&&g.render(p)}this.isProcessing=!1},create:function(p){var v=p.sys,g=v.settings;p.create&&(g.status=y.CREATING,p.create.call(p,g.data),g.status===y.DESTROYED)||(g.isTransition&&v.events.emit(u.TRANSITION_START,g.transitionFrom,g.transitionDuration),p.update&&(v.sceneUpdate=p.update),g.status=y.RUNNING,v.events.emit(u.CREATE,p))},createSceneFromFunction:function(p,v){var g=new v;if(g instanceof f){var m=g.sys.settings.key;if(m!==""&&(p=m),this.keys.hasOwnProperty(p))throw new Error("Cannot add Scene with duplicate key: "+p);return this.createSceneFromInstance(p,g)}else return g.sys=new r(g),g.sys.settings.key=p,g.sys.init(this.game),g},createSceneFromInstance:function(p,v){var g=v.sys.settings.key;return g===""&&(v.sys.settings.key=p),v.sys.init(this.game),v},createSceneFromObject:function(p,v){var g=new f(v),m=g.sys.settings.key;m!==""?p=m:g.sys.settings.key=p,g.sys.init(this.game);for(var T=["init","preload","create","update","render"],P=0;P<T.length;P++){var M=l(v,T[P],null);M&&(g[T[P]]=M)}if(v.hasOwnProperty("extend")){for(var b in v.extend)if(v.extend.hasOwnProperty(b)){var R=v.extend[b];b==="data"&&g.hasOwnProperty("data")&&typeof R=="object"?g.data.merge(R):b!=="sys"&&(g[b]=R)}}return g},getKey:function(p,v){if(p||(p="default"),typeof v=="function")return p;if(v instanceof f?p=v.sys.settings.key:typeof v=="object"&&v.hasOwnProperty("key")&&(p=v.key),this.keys.hasOwnProperty(p))throw new Error("Cannot add Scene with duplicate key: "+p);return p},getScenes:function(p,v){p===void 0&&(p=!0),v===void 0&&(v=!1);for(var g=[],m=this.scenes,T=0;T<m.length;T++){var P=m[T];P&&(!p||p&&P.sys.isActive())&&g.push(P)}return v?g.reverse():g},getScene:function(p){if(typeof p=="string"){if(this.keys[p])return this.keys[p]}else for(var v=0;v<this.scenes.length;v++)if(p===this.scenes[v])return p;return null},isActive:function(p){var v=this.getScene(p);return v?v.sys.isActive():null},isPaused:function(p){var v=this.getScene(p);return v?v.sys.isPaused():null},isVisible:function(p){var v=this.getScene(p);return v?v.sys.isVisible():null},isSleeping:function(p){var v=this.getScene(p);return v?v.sys.isSleeping():null},pause:function(p,v){var g=this.getScene(p);return g&&g.sys.pause(v),this},resume:function(p,v){var g=this.getScene(p);return g&&g.sys.resume(v),this},sleep:function(p,v){var g=this.getScene(p);return g&&!g.sys.isTransitioning()&&g.sys.sleep(v),this},wake:function(p,v){var g=this.getScene(p);return g&&g.sys.wake(v),this},run:function(p,v){var g=this.getScene(p);if(!g){for(var m=0;m<this._pending.length;m++)if(this._pending[m].key===p){this.queueOp("start",p,v);break}return this}g.sys.isSleeping()?g.sys.wake(v):g.sys.isPaused()?g.sys.resume(v):this.start(p,v)},start:function(p,v){if(!this.isBooted)return this._data[p]={autoStart:!0,data:v},this;var g=this.getScene(p);if(!g)return console.warn("Scene key not found: "+p),this;var m=g.sys,T=m.settings.status;if(T>=y.START&&T<=y.CREATING)return this;if(T>=y.RUNNING&&T<=y.SLEEPING)m.shutdown(),m.sceneUpdate=o,m.start(v);else{m.sceneUpdate=o,m.start(v);var P;if(m.load&&(P=m.load),P&&m.settings.hasOwnProperty("pack")&&(P.reset(),P.addPack({payload:m.settings.pack})))return m.settings.status=y.LOADING,P.once(n.COMPLETE,this.payloadComplete,this),P.start(),this}return this.bootScene(g),this},stop:function(p,v){var g=this.getScene(p);if(g&&!g.sys.isTransitioning()&&g.sys.settings.status!==y.SHUTDOWN){var m=g.sys.load;m&&(m.off(n.COMPLETE,this.loadComplete,this),m.off(n.COMPLETE,this.payloadComplete,this)),g.sys.shutdown(v)}return this},switch:function(p,v,g){var m=this.getScene(p),T=this.getScene(v);return m&&T&&m!==T&&(this.sleep(p),this.isSleeping(v)?this.wake(v,g):this.start(v,g)),this},getAt:function(p){return this.scenes[p]},getIndex:function(p){var v=this.getScene(p);return this.scenes.indexOf(v)},bringToTop:function(p){if(this.isProcessing)return this.queueOp("bringToTop",p);var v=this.getIndex(p),g=this.scenes;if(v!==-1&&v<g.length){var m=this.getScene(p);g.splice(v,1),g.push(m)}return this},sendToBack:function(p){if(this.isProcessing)return this.queueOp("sendToBack",p);var v=this.getIndex(p);if(v!==-1&&v>0){var g=this.getScene(p);this.scenes.splice(v,1),this.scenes.unshift(g)}return this},moveDown:function(p){if(this.isProcessing)return this.queueOp("moveDown",p);var v=this.getIndex(p);if(v>0){var g=v-1,m=this.getScene(p),T=this.getAt(g);this.scenes[v]=T,this.scenes[g]=m}return this},moveUp:function(p){if(this.isProcessing)return this.queueOp("moveUp",p);var v=this.getIndex(p);if(v<this.scenes.length-1){var g=v+1,m=this.getScene(p),T=this.getAt(g);this.scenes[v]=T,this.scenes[g]=m}return this},moveAbove:function(p,v){if(p===v)return this;if(this.isProcessing)return this.queueOp("moveAbove",p,v);var g=this.getIndex(p),m=this.getIndex(v);if(g!==-1&&m!==-1&&m<g){var T=this.getAt(m);this.scenes.splice(m,1),this.scenes.splice(g+(m>g),0,T)}return this},moveBelow:function(p,v){if(p===v)return this;if(this.isProcessing)return this.queueOp("moveBelow",p,v);var g=this.getIndex(p),m=this.getIndex(v);if(g!==-1&&m!==-1&&m>g){var T=this.getAt(m);this.scenes.splice(m,1),g===0?this.scenes.unshift(T):this.scenes.splice(g-(m<g),0,T)}return this},queueOp:function(p,v,g,m){return this._queue.push({op:p,keyA:v,keyB:g,data:m}),this},swapPosition:function(p,v){if(p===v)return this;if(this.isProcessing)return this.queueOp("swapPosition",p,v);var g=this.getIndex(p),m=this.getIndex(v);if(g!==m&&g!==-1&&m!==-1){var T=this.getAt(g);this.scenes[g]=this.scenes[m],this.scenes[m]=T}return this},dump:function(){for(var p=[],v=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],g=0;g<this.scenes.length;g++){var m=this.scenes[g].sys,T=m.settings.visible&&(m.settings.status===y.RUNNING||m.settings.status===y.PAUSED)?"[*] ":"[-] ";T+=m.settings.key+" ("+v[m.settings.status]+")",p.push(T)}console.log(p.join(`
`))},destroy:function(){for(var p=0;p<this.scenes.length;p++){var v=this.scenes[p].sys;v.destroy()}this.systemScene.sys.destroy(),this.update=o,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});S.exports=d},52209:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45319),y=s(83419),u=s(44594),h=s(95540),l=s(37277),n=new y({initialize:function(f){this.scene=f,this.systems=f.sys,this.settings=f.sys.settings,this.key=f.sys.settings.key,this.manager=f.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,f.sys.events.once(u.BOOT,this.boot,this),f.sys.events.on(u.START,this.pluginStart,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(u.SHUTDOWN,this.shutdown,this)},start:function(o,f){return o===void 0&&(o=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",o,f),this},restart:function(o){var f=this.key;return this.manager.queueOp("stop",f),this.manager.queueOp("start",f,o),this},transition:function(o){o===void 0&&(o={});var f=h(o,"target",!1),r=this.manager.getScene(f);if(!f||!this.checkValidTransition(r))return!1;var d=h(o,"duration",1e3);this._elapsed=0,this._target=r,this._duration=d,this._willSleep=h(o,"sleep",!1),this._willRemove=h(o,"remove",!1);var p=h(o,"onUpdate",null);p&&(this._onUpdate=p,this._onUpdateScope=h(o,"onUpdateScope",this.scene));var v=h(o,"allowInput",!1);this.settings.transitionAllowInput=v;var g=r.sys.settings;g.isTransition=!0,g.transitionFrom=this.scene,g.transitionDuration=d,g.transitionAllowInput=v,h(o,"moveAbove",!1)?this.manager.moveAbove(this.key,f):h(o,"moveBelow",!1)&&this.manager.moveBelow(this.key,f),r.sys.isSleeping()?r.sys.wake(h(o,"data")):this.manager.start(f,h(o,"data"));var m=h(o,"onStart",null),T=h(o,"onStartScope",this.scene);return m&&m.call(T,this.scene,r,d),this.systems.events.emit(u.TRANSITION_OUT,r,d),!0},checkValidTransition:function(o){return!(!o||o.sys.isActive()||o.sys.isTransitioning()||o===this.scene||this.systems.isTransitioning())},step:function(o,f){this._elapsed+=f,this.transitionProgress=c(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var o=this._target.sys,f=this._target.sys.settings;o.events.emit(u.TRANSITION_COMPLETE,this.scene),f.isTransition=!1,f.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(o,f,r,d){return this.manager.add(o,f,r,d)},launch:function(o,f){return o&&o!==this.key&&this.manager.queueOp("start",o,f),this},run:function(o,f){return o&&o!==this.key&&this.manager.queueOp("run",o,f),this},pause:function(o,f){return o===void 0&&(o=this.key),this.manager.queueOp("pause",o,f),this},resume:function(o,f){return o===void 0&&(o=this.key),this.manager.queueOp("resume",o,f),this},sleep:function(o,f){return o===void 0&&(o=this.key),this.manager.queueOp("sleep",o,f),this},wake:function(o,f){return o===void 0&&(o=this.key),this.manager.queueOp("wake",o,f),this},switch:function(o,f){return o!==this.key&&this.manager.queueOp("switch",this.key,o,f),this},stop:function(o,f){return o===void 0&&(o=this.key),this.manager.queueOp("stop",o,f),this},setActive:function(o,f,r){f===void 0&&(f=this.key);var d=this.manager.getScene(f);return d&&d.sys.setActive(o,r),this},setVisible:function(o,f){f===void 0&&(f=this.key);var r=this.manager.getScene(f);return r&&r.sys.setVisible(o),this},isSleeping:function(o){return o===void 0&&(o=this.key),this.manager.isSleeping(o)},isActive:function(o){return o===void 0&&(o=this.key),this.manager.isActive(o)},isPaused:function(o){return o===void 0&&(o=this.key),this.manager.isPaused(o)},isVisible:function(o){return o===void 0&&(o=this.key),this.manager.isVisible(o)},swapPosition:function(o,f){return f===void 0&&(f=this.key),o!==f&&this.manager.swapPosition(o,f),this},moveAbove:function(o,f){return f===void 0&&(f=this.key),o!==f&&this.manager.moveAbove(o,f),this},moveBelow:function(o,f){return f===void 0&&(f=this.key),o!==f&&this.manager.moveBelow(o,f),this},remove:function(o){return o===void 0&&(o=this.key),this.manager.remove(o),this},moveUp:function(o){return o===void 0&&(o=this.key),this.manager.moveUp(o),this},moveDown:function(o){return o===void 0&&(o=this.key),this.manager.moveDown(o),this},bringToTop:function(o){return o===void 0&&(o=this.key),this.manager.bringToTop(o),this},sendToBack:function(o){return o===void 0&&(o=this.key),this.manager.sendToBack(o),this},get:function(o){return this.manager.getScene(o)},getStatus:function(o){var f=this.manager.getScene(o);if(f)return f.sys.getStatus()},getIndex:function(o){return o===void 0&&(o=this.key),this.manager.getIndex(o)},shutdown:function(){var o=this.systems.events;o.off(u.SHUTDOWN,this.shutdown,this),o.off(u.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});l.register("ScenePlugin",n,"scenePlugin"),S.exports=n},55681:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(89993),y=s(35154),u=s(46975),h=s(87033),l={create:function(n){return typeof n=="string"?n={key:n}:n===void 0&&(n={}),{status:c.PENDING,key:y(n,"key",""),active:y(n,"active",!1),visible:y(n,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:y(n,"pack",!1),cameras:y(n,"cameras",null),map:y(n,"map",u(h,y(n,"mapAdd",{}))),physics:y(n,"physics",{}),loader:y(n,"loader",{}),plugins:y(n,"plugins",!1),input:y(n,"input",{})}}};S.exports=l},2368:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(89993),u=s(42363),h=s(44594),l=s(27397),n=s(52106),o=s(29747),f=s(55681),r=new c({initialize:function(p,v){this.scene=p,this.game,this.renderer,this.config=v,this.settings=f.create(v),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=o},init:function(d){this.settings.status=y.INIT,this.sceneUpdate=o,this.game=d,this.renderer=d.renderer,this.canvas=d.canvas,this.context=d.context;var p=d.plugins;this.plugins=p,p.addToScene(this,u.Global,[u.CoreScene,n(this),l(this)]),this.events.emit(h.BOOT,this),this.settings.isBooted=!0},step:function(d,p){var v=this.events;v.emit(h.PRE_UPDATE,d,p),v.emit(h.UPDATE,d,p),this.sceneUpdate.call(this.scene,d,p),v.emit(h.POST_UPDATE,d,p)},render:function(d){var p=this.displayList;p.depthSort(),this.events.emit(h.PRE_RENDER,d),this.cameras.render(d,p),this.events.emit(h.RENDER,d)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(d){var p=this.settings,v=this.getStatus();return v!==y.CREATING&&v!==y.RUNNING?console.warn("Cannot pause non-running Scene",p.key):this.settings.active&&(p.status=y.PAUSED,p.active=!1,this.events.emit(h.PAUSE,this,d)),this},resume:function(d){var p=this.events,v=this.settings;return this.settings.active||(v.status=y.RUNNING,v.active=!0,p.emit(h.RESUME,this,d)),this},sleep:function(d){var p=this.settings,v=this.getStatus();return v!==y.CREATING&&v!==y.RUNNING?console.warn("Cannot sleep non-running Scene",p.key):(p.status=y.SLEEPING,p.active=!1,p.visible=!1,this.events.emit(h.SLEEP,this,d)),this},wake:function(d){var p=this.events,v=this.settings;return v.status=y.RUNNING,v.active=!0,v.visible=!0,p.emit(h.WAKE,this,d),v.isTransition&&p.emit(h.TRANSITION_WAKE,v.transitionFrom,v.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var d=this.settings.status;return d>y.PENDING&&d<=y.RUNNING},isSleeping:function(){return this.settings.status===y.SLEEPING},isActive:function(){return this.settings.status===y.RUNNING},isPaused:function(){return this.settings.status===y.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(d){return this.settings.visible=d,this},setActive:function(d,p){return d?this.resume(p):this.pause(p)},start:function(d){var p=this.events,v=this.settings;d&&(v.data=d),v.status=y.START,v.active=!0,v.visible=!0,p.emit(h.START,this),p.emit(h.READY,this,d)},shutdown:function(d){var p=this.events,v=this.settings;p.off(h.TRANSITION_INIT),p.off(h.TRANSITION_START),p.off(h.TRANSITION_COMPLETE),p.off(h.TRANSITION_OUT),v.status=y.SHUTDOWN,v.active=!1,v.visible=!1,p.emit(h.SHUTDOWN,this,d)},destroy:function(){var d=this.events,p=this.settings;p.status=y.DESTROYED,p.active=!1,p.visible=!1,d.emit(h.DESTROY,this),d.removeAllListeners();for(var v=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],g=0;g<v.length;g++)this[v[g]]=null}});S.exports=r},89993:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};S.exports=w},69830:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="addedtoscene"},7919:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="boot"},46763:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="create"},11763:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="destroy"},71555:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pause"},36735:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="postupdate"},3809:S=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="prerender"},90716:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="preupdate"},58262:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="ready"},91633:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="removedfromscene"},10319:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="render"},87132:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="resume"},81961:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="shutdown"},90194:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="sleep"},6265:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="start"},33178:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="transitioncomplete"},43063:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="transitioninit"},11259:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="transitionout"},61611:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="transitionstart"},45209:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="transitionwake"},22966:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="update"},21747:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="wake"},44594:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={ADDED_TO_SCENE:s(69830),BOOT:s(7919),CREATE:s(46763),DESTROY:s(11763),PAUSE:s(71555),POST_UPDATE:s(36735),PRE_RENDER:s(3809),PRE_UPDATE:s(90716),READY:s(58262),REMOVED_FROM_SCENE:s(91633),RENDER:s(10319),RESUME:s(87132),SHUTDOWN:s(81961),SLEEP:s(90194),START:s(6265),TRANSITION_COMPLETE:s(33178),TRANSITION_INIT:s(43063),TRANSITION_OUT:s(11259),TRANSITION_START:s(61611),TRANSITION_WAKE:s(45209),UPDATE:s(22966),WAKE:s(21747)}},62194:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(89993),y=s(79291),u={Events:s(44594),GetPhysicsPlugins:s(27397),GetScenePlugins:s(52106),SceneManager:s(60903),ScenePlugin:s(52209),Settings:s(55681),Systems:s(2368)};u=y(!1,u,c),S.exports=u},30341:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(50792),u=s(14463),h=s(79291),l=s(29747),n=new c({Extends:y,initialize:function(f,r,d){y.call(this),this.manager=f,this.key=r,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=h(this.config,d),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(o){return!o||!o.name||typeof o.name!="string"?!1:this.markers[o.name]?(console.error("addMarker "+o.name+" already exists in Sound"),!1):(o=h(!0,{name:"",start:0,duration:this.totalDuration-(o.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},o),this.markers[o.name]=o,!0)},updateMarker:function(o){return!o||!o.name||typeof o.name!="string"?!1:this.markers[o.name]?(this.markers[o.name]=h(!0,this.markers[o.name],o),!0):(console.warn("Audio Marker: "+o.name+" missing in Sound: "+this.key),!1)},removeMarker:function(o){var f=this.markers[o];return f?(this.markers[o]=null,f):null},play:function(o,f){if(o===void 0&&(o=""),typeof o=="object"&&(f=o,o=""),typeof o!="string")return!1;if(!o)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[o])return console.warn("Marker: "+o+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[o],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=h(this.currentConfig,f),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:l,calculateRate:function(){var o=1.0005777895065548,f=this.currentConfig.detune+this.manager.detune,r=Math.pow(o,f);this.totalRate=this.currentConfig.rate*this.manager.rate*r},destroy:function(){this.pendingRemove||(this.stop(),this.emit(u.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});S.exports=n},85034:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(41786),u=s(50792),h=s(14463),l=s(8443),n=s(46710),o=s(58731),f=s(29747),r=s(26099),d=new c({Extends:u,initialize:function(v){u.call(this),this.game=v,this.jsonCache=v.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new r;var g=v.events;g.on(l.BLUR,this.onGameBlur,this),g.on(l.FOCUS,this.onGameFocus,this),g.on(l.PRE_STEP,this.update,this),g.once(l.DESTROY,this.destroy,this)},add:f,addAudioSprite:function(p,v){v===void 0&&(v={});var g=this.add(p,v);g.spritemap=this.jsonCache.get(p).spritemap;for(var m in g.spritemap)if(g.spritemap.hasOwnProperty(m)){var T=y(v),P=g.spritemap[m];T.loop=P.hasOwnProperty("loop")?P.loop:!1,g.addMarker({name:m,start:P.start,duration:P.end-P.start,config:T})}return g},get:function(p){return o(this.sounds,"key",p)},getAll:function(p){return p?n(this.sounds,"key",p):n(this.sounds)},getAllPlaying:function(){return n(this.sounds,"isPlaying",!0)},play:function(p,v){var g=this.add(p);return g.once(h.COMPLETE,g.destroy,g),v?v.name?(g.addMarker(v),g.play(v.name)):g.play(v):g.play()},playAudioSprite:function(p,v,g){var m=this.addAudioSprite(p);return m.once(h.COMPLETE,m.destroy,m),m.play(v,g)},remove:function(p){var v=this.sounds.indexOf(p);return v!==-1?(p.destroy(),this.sounds.splice(v,1),!0):!1},removeAll:function(){this.sounds.forEach(function(p){p.destroy()}),this.sounds.length=0},removeByKey:function(p){for(var v=0,g=this.sounds.length-1;g>=0;g--){var m=this.sounds[g];m.key===p&&(m.destroy(),this.sounds.splice(g,1),v++)}return v},pauseAll:function(){this.forEachActiveSound(function(p){p.pause()}),this.emit(h.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(p){p.resume()}),this.emit(h.RESUME_ALL,this)},setListenerPosition:f,stopAll:function(){this.forEachActiveSound(function(p){p.stop()}),this.emit(h.STOP_ALL,this)},stopByKey:function(p){var v=0;return this.getAll(p).forEach(function(g){g.stop()&&v++}),v},isPlaying:function(p){var v=this.sounds,g=v.length-1,m;if(p===void 0){for(;g>=0;g--)if(m=this.sounds[g],m.isPlaying)return!0}else for(;g>=0;g--)if(m=this.sounds[g],m.key===p&&m.isPlaying)return!0;return!1},unlock:f,onBlur:f,onFocus:f,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(p,v){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(h.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(m){m.update(p,v)})},destroy:function(){this.game.events.off(l.BLUR,this.onGameBlur,this),this.game.events.off(l.FOCUS,this.onGameFocus,this),this.game.events.off(l.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(p,v){var g=this;this.sounds.forEach(function(m,T){m&&!m.pendingRemove&&p.call(v||g,m,T,g.sounds)})},setRate:function(p){return this.rate=p,this},rate:{get:function(){return this._rate},set:function(p){this._rate=p,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(h.GLOBAL_RATE,this,p)}},setDetune:function(p){return this.detune=p,this},detune:{get:function(){return this._detune},set:function(p){this._detune=p,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(h.GLOBAL_DETUNE,this,p)}}});S.exports=d},14747:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(33684),y=s(25960),u=s(57490),h={create:function(l){var n=l.config.audio,o=l.device.audio;return n.noAudio||!o.webAudio&&!o.audioData?new y(l):o.webAudio&&!n.disableWebAudio?new u(l):new c(l)}};S.exports=h},19723:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="complete"},98882:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="decodedall"},57506:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="decoded"},73146:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="destroy"},11305:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="detune"},40577:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="detune"},30333:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="mute"},20394:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="rate"},21802:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="volume"},1299:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="looped"},99190:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="loop"},97125:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="mute"},89259:S=>{/**
 * @author       pi-kei
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pan"},79986:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pauseall"},17586:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pause"},19618:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="play"},42306:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="rate"},10387:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="resumeall"},48959:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="resume"},9960:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="seek"},19180:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="stopall"},98328:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="stop"},50401:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="unlocked"},52498:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="volume"},14463:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={COMPLETE:s(19723),DECODED:s(57506),DECODED_ALL:s(98882),DESTROY:s(73146),DETUNE:s(11305),GLOBAL_DETUNE:s(40577),GLOBAL_MUTE:s(30333),GLOBAL_RATE:s(20394),GLOBAL_VOLUME:s(21802),LOOP:s(99190),LOOPED:s(1299),MUTE:s(97125),PAN:s(89259),PAUSE_ALL:s(79986),PAUSE:s(17586),PLAY:s(19618),RATE:s(42306),RESUME_ALL:s(10387),RESUME:s(48959),SEEK:s(9960),STOP_ALL:s(19180),STOP:s(98328),UNLOCKED:s(50401),VOLUME:s(52498)}},64895:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(30341),y=s(83419),u=s(14463),h=s(45319),l=new y({Extends:c,initialize:function(o,f,r){if(r===void 0&&(r={}),this.tags=o.game.cache.audio.get(f),!this.tags)throw new Error('No cached audio asset with key "'+f);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,c.call(this,o,f,r)},play:function(n,o){return this.manager.isLocked(this,"play",[n,o])||!c.prototype.play.call(this,n,o)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!c.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!c.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!c.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(u.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var n=this.currentConfig.seek,o=this.currentConfig.delay,f=(this.currentMarker?this.currentMarker.start:0)+n;return this.previousTime=f,this.audio.currentTime=f,this.applyConfig(),o===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+o*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var n=0;n<this.tags.length;n++){var o=this.tags[n];if(o.dataset.used==="false")return o.dataset.used="true",this.audio=o,!0}if(!this.manager.override)return!1;var f=[];this.manager.forEachActiveSound(function(d){d.key===this.key&&d.audio&&f.push(d)},this),f.sort(function(d,p){return d.loop===p.loop?p.seek/p.duration-d.seek/d.duration:d.loop?1:-1});var r=f[0];return this.audio=r.audio,r.reset(),r.audio=null,r.startTime=0,r.previousTime=0,!0},playCatchPromise:function(){var n=this.audio.play();n&&n.catch(function(o){console.warn(o)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){c.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(n){if(this.isPlaying){if(this.startTime>0){this.startTime<n-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,n-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var o=this.currentMarker?this.currentMarker.start:0,f=o+this.duration,r=this.audio.currentTime;if(this.currentConfig.loop)r>=f-this.manager.loopEndOffset?(this.audio.currentTime=o+Math.max(0,r-f),r=this.audio.currentTime):r<o&&(this.audio.currentTime+=o,r=this.audio.currentTime),r<this.previousTime&&this.emit(u.LOOPED,this);else if(r>=f){this.reset(),this.stopAndReleaseAudioTag(),this.emit(u.COMPLETE,this);return}this.previousTime=r}},destroy:function(){c.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=h(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){c.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(n){this.currentConfig.mute=n,!this.manager.isLocked(this,"mute",n)&&(this.updateMute(),this.emit(u.MUTE,this,n))}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.currentConfig.volume},set:function(n){this.currentConfig.volume=n,!this.manager.isLocked(this,"volume",n)&&(this.updateVolume(),this.emit(u.VOLUME,this,n))}},setVolume:function(n){return this.volume=n,this},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,!this.manager.isLocked(this,u.RATE,n)&&(this.calculateRate(),this.emit(u.RATE,this,n))}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,!this.manager.isLocked(this,u.DETUNE,n)&&(this.calculateRate(),this.emit(u.DETUNE,this,n))}},setDetune:function(n){return this.detune=n,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.isLocked(this,"seek",n)||this.startTime>0||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.isPlaying?(this.previousTime=n,this.audio.currentTime=n):this.isPaused&&(this.currentConfig.seek=n),this.emit(u.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,!this.manager.isLocked(this,"loop",n)&&(this.audio&&(this.audio.loop=n),this.emit(u.LOOP,this,n))}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.currentConfig.pan},set:function(n){this.currentConfig.pan=n,this.emit(u.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});S.exports=l},33684:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(85034),y=s(83419),u=s(14463),h=s(64895),l=new y({Extends:c,initialize:function(o){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,c.call(this,o)},add:function(n,o){var f=new h(this,n,o);return this.sounds.push(f),f},unlock:function(){this.locked=!1;var n=this;if(this.game.cache.audio.entries.each(function(d,p){for(var v=0;v<p.length;v++)if(p[v].dataset.locked==="true")return n.locked=!0,!1;return!0}),!!this.locked){var o=!1,f=function(){o=!0},r=function(){if(o){o=!1;return}document.body.removeEventListener("touchmove",f),document.body.removeEventListener("touchend",r);var d=[];if(n.game.cache.audio.entries.each(function(v,g){for(var m=0;m<g.length;m++){var T=g[m];T.dataset.locked==="true"&&d.push(T)}return!0}),d.length!==0){var p=d[d.length-1];p.oncanplaythrough=function(){p.oncanplaythrough=null,d.forEach(function(v){v.dataset.locked="false"}),n.unlocked=!0},d.forEach(function(v){v.load()})}};this.once(u.UNLOCKED,function(){for(this.forEachActiveSound(function(p){p.currentMarker===null&&p.duration===0&&(p.duration=p.tags[0].duration),p.totalDuration=p.tags[0].duration});this.lockedActionsQueue.length;){var d=this.lockedActionsQueue.shift();d.sound[d.prop].apply?d.sound[d.prop].apply(d.sound,d.value||[]):d.sound[d.prop]=d.value}},this),document.body.addEventListener("touchmove",f,!1),document.body.addEventListener("touchend",r,!1)}},onBlur:function(){this.forEachActiveSound(function(n){n.isPlaying&&(this.onBlurPausedSounds.push(n),n.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(n){n.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){c.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(n,o,f){return n.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:n,prop:o,value:f}),!0):!1},setMute:function(n){return this.mute=n,this},mute:{get:function(){return this._mute},set:function(n){this._mute=n,this.forEachActiveSound(function(o){o.updateMute()}),this.emit(u.GLOBAL_MUTE,this,n)}},setVolume:function(n){return this.volume=n,this},volume:{get:function(){return this._volume},set:function(n){this._volume=n,this.forEachActiveSound(function(o){o.updateVolume()}),this.emit(u.GLOBAL_VOLUME,this,n)}}});S.exports=l},23717:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={SoundManagerCreator:s(14747),Events:s(14463),BaseSound:s(30341),BaseSoundManager:s(85034),WebAudioSound:s(71741),WebAudioSoundManager:s(57490),HTML5AudioSound:s(64895),HTML5AudioSoundManager:s(33684),NoAudioSound:s(4603),NoAudioSoundManager:s(25960)}},4603:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(30341),y=s(83419),u=s(50792),h=s(79291),l=s(29747),n=function(){return!1},o=function(){return null},f=function(){return this},r=new y({Extends:u,initialize:function(p,v,g){g===void 0&&(g={}),u.call(this),this.manager=p,this.key=v,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=h({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:n,updateMarker:n,removeMarker:o,play:n,pause:n,resume:n,stop:n,setMute:f,setVolume:f,setRate:f,setDetune:f,setSeek:f,setLoop:f,setPan:f,applyConfig:o,resetConfig:o,update:l,calculateRate:o,destroy:function(){c.prototype.destroy.call(this)}});S.exports=r},25960:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(85034),y=s(83419),u=s(50792),h=s(4603),l=s(29747),n=new y({Extends:u,initialize:function(f){u.call(this),this.game=f,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(o,f){var r=new h(this,o,f);return this.sounds.push(r),r},addAudioSprite:function(o,f){var r=this.add(o,f);return r.spritemap={},r},get:function(o){return c.prototype.get.call(this,o)},getAll:function(o){return c.prototype.getAll.call(this,o)},play:function(o,f){return!1},playAudioSprite:function(o,f,r){return!1},remove:function(o){return c.prototype.remove.call(this,o)},removeAll:function(){return c.prototype.removeAll.call(this)},removeByKey:function(o){return c.prototype.removeByKey.call(this,o)},stopByKey:function(o){return c.prototype.stopByKey.call(this,o)},onBlur:l,onFocus:l,onGameBlur:l,onGameFocus:l,pauseAll:l,resumeAll:l,stopAll:l,update:l,setRate:l,setDetune:l,setMute:l,setVolume:l,unlock:l,forEachActiveSound:function(o,f){c.prototype.forEachActiveSound.call(this,o,f)},destroy:function(){c.prototype.destroy.call(this)}});S.exports=n},71741:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(30341),y=s(83419),u=s(14463),h=s(95540),l=new y({Extends:c,initialize:function(o,f,r){if(r===void 0&&(r={}),this.audioBuffer=o.game.cache.audio.get(f),!this.audioBuffer)throw new Error('Audio key "'+f+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=o.context.createGain(),this.volumeNode=o.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),o.context.createPanner&&(this.spatialNode=o.context.createPanner(),this.volumeNode.connect(this.spatialNode)),o.context.createStereoPanner?(this.pannerNode=o.context.createStereoPanner(),o.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(o.destination)):o.context.createPanner?this.spatialNode.connect(o.destination):this.volumeNode.connect(o.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,c.call(this,o,f,r)},play:function(n,o){return c.prototype.play.call(this,n,o)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(u.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!c.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!c.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(u.RESUME,this),!0)},stop:function(){return c.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(u.STOP,this),!0):!1},createAndStartBufferSource:function(){var n=this.currentConfig.seek,o=this.currentConfig.delay,f=this.manager.context.currentTime+o,r=(this.currentMarker?this.currentMarker.start:0)+n,d=this.duration-n;this.playTime=f-n,this.startTime=f,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,f),Math.max(0,r),Math.max(0,d)),this.resetConfig()},createAndStartLoopBufferSource:function(){var n=this.getLoopTime(),o=this.currentMarker?this.currentMarker.start:0,f=this.duration;this.loopTime=n,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,n),Math.max(0,o),Math.max(0,f))},createBufferSource:function(){var n=this,o=this.manager.context.createBufferSource();return o.buffer=this.audioBuffer,o.connect(this.muteNode),o.onended=function(f){var r=f.target;(r===n.source||r===n.loopSource)&&(n.currentConfig.loop?n.hasLooped=!0:n.hasEnded=!0)},o},stopAndRemoveBufferSource:function(){if(this.source){var n=this.source;this.source=null,n.stop(),n.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var n=this.currentConfig.source;if(n&&this.manager.context.createPanner){var o=this.spatialNode;o.panningModel=h(n,"panningModel","equalpower"),o.distanceModel=h(n,"distanceModel","inverse"),o.orientationX.value=h(n,"orientationX",0),o.orientationY.value=h(n,"orientationY",0),o.orientationZ.value=h(n,"orientationZ",-1),o.refDistance=h(n,"refDistance",1),o.maxDistance=h(n,"maxDistance",1e4),o.rolloffFactor=h(n,"rolloffFactor",1),o.coneInnerAngle=h(n,"coneInnerAngle",360),o.coneOuterAngle=h(n,"coneOuterAngle",0),o.coneOuterGain=h(n,"coneOuterGain",0),this.spatialSource=h(n,"follow",null),this.spatialSource||(o.positionX.value=h(n,"x",0),o.positionY.value=h(n,"y",0),o.positionZ.value=h(n,"z",0))}c.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(n){this.spatialNode&&(this.spatialNode.positionX.value=n)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(n){this.spatialNode&&(this.spatialNode.positionY.value=n)}},update:function(){if(this.isPlaying&&this.spatialSource){var n=h(this.spatialSource,"x",null),o=h(this.spatialSource,"y",null);n&&n!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=n),o&&o!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=o)}this.hasEnded?(c.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(u.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(u.LOOPED,this))},destroy:function(){this.pendingRemove||(c.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){c.prototype.calculateRate.call(this);var n=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,n),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,n)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var n=0,o=0;o<this.rateUpdates.length;o++){var f=0;o<this.rateUpdates.length-1?f=this.rateUpdates[o+1].time:f=this.manager.context.currentTime-this.playTime,n+=(f-this.rateUpdates[o].time)*this.rateUpdates[o].rate}return n},getLoopTime:function(){for(var n=0,o=0;o<this.rateUpdates.length-1;o++)n+=(this.rateUpdates[o+1].time-this.rateUpdates[o].time)*this.rateUpdates[o].rate;var f=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+f.time+(this.duration-n)/f.rate},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,this.calculateRate(),this.emit(u.RATE,this,n)}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,this.calculateRate(),this.emit(u.DETUNE,this,n)}},setDetune:function(n){return this.detune=n,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(n){this.currentConfig.mute=n,this.muteNode.gain.setValueAtTime(n?0:1,0),this.emit(u.MUTE,this,n)}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(n){this.currentConfig.volume=n,this.volumeNode.gain.setValueAtTime(n,0),this.emit(u.VOLUME,this,n)}},setVolume:function(n){return this.volume=n,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.currentConfig.seek=n,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(u.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),n&&this.createAndStartLoopBufferSource()),this.emit(u.LOOP,this,n)}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(n){this.currentConfig.pan=n,this.pannerNode&&this.pannerNode.pan.setValueAtTime(n,this.manager.context.currentTime),this.emit(u.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});S.exports=l},57490:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(53134),y=s(85034),u=s(83419),h=s(14463),l=s(8443),n=s(71741),o=s(95540),f=new u({Extends:y,initialize:function(d){this.context=this.createAudioContext(d),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended",y.call(this,d),this.locked&&(d.isBooted?this.unlock():d.events.once(l.BOOT,this.unlock,this)),d.events.on(l.VISIBLE,this.onGameVisible,this)},onGameVisible:function(){var r=this.context;window.setTimeout(function(){r&&(r.suspend(),r.resume())},100)},createAudioContext:function(r){var d=r.config.audio;if(d.context)return d.context.resume(),d.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(r){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=r,this.masterMuteNode=r.createGain(),this.masterVolumeNode=r.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(r.destination),this.destination=this.masterMuteNode,this},add:function(r,d){var p=new n(this,r,d);return this.sounds.push(p),p},decodeAudio:function(r,d){var p;Array.isArray(r)?p=r:p=[{key:r,data:d}];for(var v=this.game.cache.audio,g=p.length,m=0;m<p.length;m++){var T=p[m],P=T.key,M=T.data;typeof M=="string"&&(M=c(M));var b=function(A,D){v.add(A,D),this.emit(h.DECODED,A),g--,g===0&&this.emit(h.DECODED_ALL)}.bind(this,P),R=function(A,D){console.error("Error decoding audio: "+A+" - ",D?D.message:""),g--,g===0&&this.emit(h.DECODED_ALL)}.bind(this,P);this.context.decodeAudioData(M,b,R)}},setListenerPosition:function(r,d){return r===void 0&&(r=this.game.scale.width/2),d===void 0&&(d=this.game.scale.height/2),this.listenerPosition.set(r,d),this},unlock:function(){var r=this,d=document.body,p=function v(){if(r.context&&d){var g=d.removeEventListener.bind(d);r.context.resume().then(function(){g("touchstart",v),g("touchend",v),g("mousedown",v),g("mouseup",v),g("keydown",v),r.unlocked=!0},function(){g("touchstart",v),g("touchend",v),g("mousedown",v),g("mouseup",v),g("keydown",v)})}};d&&(d.addEventListener("touchstart",p,!1),d.addEventListener("touchend",p,!1),d.addEventListener("mousedown",p,!1),d.addEventListener("mouseup",p,!1),d.addEventListener("keydown",p,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var r=this.context;r&&!this.locked&&(r.state==="suspended"||r.state==="interrupted")&&r.resume()},update:function(r,d){var p=this.context.listener,v=o(this.listenerPosition,"x",null),g=o(this.listenerPosition,"y",null);if(p&&p.positionX!==void 0)v&&v!==this._spatialx&&(this._spatialx=p.positionX.value=v),g&&g!==this._spatialy&&(this._spatialy=p.positionY.value=g);else if(p){v&&v!==this._spatialx&&(this._spatialx=v),g&&g!==this._spatialy&&(this._spatialy=g);var m=o(p,"z",0);p.setPosition(this._spatialx||0,this._spatialy||0,m)}y.prototype.update.call(this,r,d),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var r=this;this.context.close().then(function(){r.context=null})}this.game.events.off(l.VISIBLE,this.onGameVisible,this),y.prototype.destroy.call(this)},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(r){this.masterMuteNode.gain.setValueAtTime(r?0:1,0),this.emit(h.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(r){this.masterVolumeNode.gain.setValueAtTime(r,0),this.emit(h.GLOBAL_VOLUME,this,r)}}});S.exports=f},73162:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(37105),y=s(83419),u=s(29747),h=s(19186),l=new y({initialize:function(o){this.parent=o,this.list=[],this.position=0,this.addCallback=u,this.removeCallback=u,this._sortKey=""},add:function(n,o){return o?c.Add(this.list,n):c.Add(this.list,n,0,this.addCallback,this)},addAt:function(n,o,f){return f?c.AddAt(this.list,n,o):c.AddAt(this.list,n,o,0,this.addCallback,this)},getAt:function(n){return this.list[n]},getIndex:function(n){return this.list.indexOf(n)},sort:function(n,o){return n?(o===void 0&&(o=function(f,r){return f[n]-r[n]}),h(this.list,o),this):this},getByName:function(n){return c.GetFirst(this.list,"name",n)},getRandom:function(n,o){return c.GetRandom(this.list,n,o)},getFirst:function(n,o,f,r){return c.GetFirst(this.list,n,o,f,r)},getAll:function(n,o,f,r){return c.GetAll(this.list,n,o,f,r)},count:function(n,o){return c.CountAllMatching(this.list,n,o)},swap:function(n,o){c.Swap(this.list,n,o)},moveTo:function(n,o){return c.MoveTo(this.list,n,o)},moveAbove:function(n,o){return c.MoveAbove(this.list,n,o)},moveBelow:function(n,o){return c.MoveBelow(this.list,n,o)},remove:function(n,o){return o?c.Remove(this.list,n):c.Remove(this.list,n,this.removeCallback,this)},removeAt:function(n,o){return o?c.RemoveAt(this.list,n):c.RemoveAt(this.list,n,this.removeCallback,this)},removeBetween:function(n,o,f){return f?c.RemoveBetween(this.list,n,o):c.RemoveBetween(this.list,n,o,this.removeCallback,this)},removeAll:function(n){for(var o=this.list.length;o--;)this.remove(this.list[o],n);return this},bringToTop:function(n){return c.BringToTop(this.list,n)},sendToBack:function(n){return c.SendToBack(this.list,n)},moveUp:function(n){return c.MoveUp(this.list,n),n},moveDown:function(n){return c.MoveDown(this.list,n),n},reverse:function(){return this.list.reverse(),this},shuffle:function(){return c.Shuffle(this.list),this},replace:function(n,o){return c.Replace(this.list,n,o)},exists:function(n){return this.list.indexOf(n)>-1},setAll:function(n,o,f,r){return c.SetAll(this.list,n,o,f,r),this},each:function(n,o){for(var f=[null],r=2;r<arguments.length;r++)f.push(arguments[r]);for(r=0;r<this.list.length;r++)f[0]=this.list[r],n.apply(o,f)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});S.exports=l},90330:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h){this.entries={},this.size=0,this.setAll(h)},setAll:function(u){if(Array.isArray(u))for(var h=0;h<u.length;h++)this.set(u[h][0],u[h][1]);return this},set:function(u,h){return this.has(u)||this.size++,this.entries[u]=h,this},get:function(u){if(this.has(u))return this.entries[u]},getArray:function(){var u=[],h=this.entries;for(var l in h)u.push(h[l]);return u},has:function(u){return this.entries.hasOwnProperty(u)},delete:function(u){return this.has(u)&&(delete this.entries[u],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(u){delete this.entries[u]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var u=[],h=this.entries;for(var l in h)u.push(h[l]);return u},dump:function(){var u=this.entries;console.group("Map");for(var h in u)console.log(h,u[h]);console.groupEnd()},each:function(u){var h=this.entries;for(var l in h)if(u(l,h[l])===!1)break;return this},contains:function(u){var h=this.entries;for(var l in h)if(h[l]===u)return!0;return!1},merge:function(u,h){h===void 0&&(h=!1);var l=this.entries,n=u.entries;for(var o in n)l.hasOwnProperty(o)&&h?l[o]=n[o]:this.set(o,n[o]);return this}});S.exports=y},25774:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(50792),u=s(82348),h=new c({Extends:y,initialize:function(){y.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(l){return this._active.indexOf(l)>-1},isPending:function(l){return this._toProcess>0&&this._pending.indexOf(l)>-1},isDestroying:function(l){return this._destroy.indexOf(l)>-1},add:function(l){return this.checkQueue&&this.isActive(l)&&!this.isDestroying(l)||this.isPending(l)||(this._pending.push(l),this._toProcess++),l},remove:function(l){if(this.isPending(l)){var n=this._pending,o=n.indexOf(l);o!==-1&&n.splice(o,1)}else this.isActive(l)&&(this._destroy.push(l),this._toProcess++);return l},removeAll:function(){for(var l=this._active,n=this._destroy,o=l.length;o--;)n.push(l[o]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var l=this._destroy,n=this._active,o,f;for(o=0;o<l.length;o++){f=l[o];var r=n.indexOf(f);r!==-1&&(n.splice(r,1),this.emit(u.PROCESS_QUEUE_REMOVE,f))}for(l.length=0,l=this._pending,o=0;o<l.length;o++)f=l[o],(!this.checkQueue||this.checkQueue&&n.indexOf(f)===-1)&&(n.push(f),this.emit(u.PROCESS_QUEUE_ADD,f));return l.length=0,this._toProcess=0,n},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});S.exports=h},59542:(S,w,s)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(43886);function y(M){if(!(this instanceof y))return new y(M);this._maxEntries=Math.max(4,M||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}y.prototype={all:function(){return this._all(this.data,[])},search:function(M){var b=this.data,R=[],A=this.toBBox;if(!m(M,b))return R;for(var D=[],G,F,B,N;b;){for(G=0,F=b.children.length;G<F;G++)B=b.children[G],N=b.leaf?A(B):B,m(M,N)&&(b.leaf?R.push(B):g(M,N)?this._all(B,R):D.push(B));b=D.pop()}return R},collides:function(M){var b=this.data,R=this.toBBox;if(!m(M,b))return!1;for(var A=[],D,G,F,B;b;){for(D=0,G=b.children.length;D<G;D++)if(F=b.children[D],B=b.leaf?R(F):F,m(M,B)){if(b.leaf||g(M,B))return!0;A.push(F)}b=A.pop()}return!1},load:function(M){if(!(M&&M.length))return this;if(M.length<this._minEntries){for(var b=0,R=M.length;b<R;b++)this.insert(M[b]);return this}var A=this._build(M.slice(),0,M.length-1,0);if(!this.data.children.length)this.data=A;else if(this.data.height===A.height)this._splitRoot(this.data,A);else{if(this.data.height<A.height){var D=this.data;this.data=A,A=D}this._insert(A,this.data.height-A.height-1,!0)}return this},insert:function(M){return M&&this._insert(M,this.data.height-1),this},clear:function(){return this.data=T([]),this},remove:function(M,b){if(!M)return this;for(var R=this.data,A=this.toBBox(M),D=[],G=[],F,B,N,z;R||D.length;){if(R||(R=D.pop(),B=D[D.length-1],F=G.pop(),z=!0),R.leaf&&(N=u(M,R.children,b),N!==-1))return R.children.splice(N,1),D.push(R),this._condense(D),this;!z&&!R.leaf&&g(R,A)?(D.push(R),G.push(F),F=0,B=R,R=R.children[0]):B?(F++,R=B.children[F],z=!1):R=null}return this},toBBox:function(M){return M},compareMinX:o,compareMinY:f,toJSON:function(){return this.data},fromJSON:function(M){return this.data=M,this},_all:function(M,b){for(var R=[];M;)M.leaf?b.push.apply(b,M.children):R.push.apply(R,M.children),M=R.pop();return b},_build:function(M,b,R,A){var D=R-b+1,G=this._maxEntries,F;if(D<=G)return F=T(M.slice(b,R+1)),h(F,this.toBBox),F;A||(A=Math.ceil(Math.log(D)/Math.log(G)),G=Math.ceil(D/Math.pow(G,A-1))),F=T([]),F.leaf=!1,F.height=A;var B=Math.ceil(D/G),N=B*Math.ceil(Math.sqrt(G)),z,$,Q,Z;for(P(M,b,R,N,this.compareMinX),z=b;z<=R;z+=N)for(Q=Math.min(z+N-1,R),P(M,z,Q,B,this.compareMinY),$=z;$<=Q;$+=B)Z=Math.min($+B-1,Q),F.children.push(this._build(M,$,Z,A-1));return h(F,this.toBBox),F},_chooseSubtree:function(M,b,R,A){for(var D,G,F,B,N,z,$,Q;A.push(b),!(b.leaf||A.length-1===R);){for($=Q=1/0,D=0,G=b.children.length;D<G;D++)F=b.children[D],N=r(F),z=p(M,F)-N,z<Q?(Q=z,$=N<$?N:$,B=F):z===Q&&N<$&&($=N,B=F);b=B||b.children[0]}return b},_insert:function(M,b,R){var A=this.toBBox,D=R?M:A(M),G=[],F=this._chooseSubtree(D,this.data,b,G);for(F.children.push(M),n(F,D);b>=0&&G[b].children.length>this._maxEntries;)this._split(G,b),b--;this._adjustParentBBoxes(D,G,b)},_split:function(M,b){var R=M[b],A=R.children.length,D=this._minEntries;this._chooseSplitAxis(R,D,A);var G=this._chooseSplitIndex(R,D,A),F=T(R.children.splice(G,R.children.length-G));F.height=R.height,F.leaf=R.leaf,h(R,this.toBBox),h(F,this.toBBox),b?M[b-1].children.push(F):this._splitRoot(R,F)},_splitRoot:function(M,b){this.data=T([M,b]),this.data.height=M.height+1,this.data.leaf=!1,h(this.data,this.toBBox)},_chooseSplitIndex:function(M,b,R){var A,D,G,F,B,N,z,$;for(N=z=1/0,A=b;A<=R-b;A++)D=l(M,0,A,this.toBBox),G=l(M,A,R,this.toBBox),F=v(D,G),B=r(D)+r(G),F<N?(N=F,$=A,z=B<z?B:z):F===N&&B<z&&(z=B,$=A);return $},_chooseSplitAxis:function(M,b,R){var A=M.leaf?this.compareMinX:o,D=M.leaf?this.compareMinY:f,G=this._allDistMargin(M,b,R,A),F=this._allDistMargin(M,b,R,D);G<F&&M.children.sort(A)},_allDistMargin:function(M,b,R,A){M.children.sort(A);var D=this.toBBox,G=l(M,0,b,D),F=l(M,R-b,R,D),B=d(G)+d(F),N,z;for(N=b;N<R-b;N++)z=M.children[N],n(G,M.leaf?D(z):z),B+=d(G);for(N=R-b-1;N>=b;N--)z=M.children[N],n(F,M.leaf?D(z):z),B+=d(F);return B},_adjustParentBBoxes:function(M,b,R){for(var A=R;A>=0;A--)n(b[A],M)},_condense:function(M){for(var b=M.length-1,R;b>=0;b--)M[b].children.length===0?b>0?(R=M[b-1].children,R.splice(R.indexOf(M[b]),1)):this.clear():h(M[b],this.toBBox)},compareMinX:function(M,b){return M.left-b.left},compareMinY:function(M,b){return M.top-b.top},toBBox:function(M){return{minX:M.left,minY:M.top,maxX:M.right,maxY:M.bottom}}};function u(M,b,R){if(!R)return b.indexOf(M);for(var A=0;A<b.length;A++)if(R(M,b[A]))return A;return-1}function h(M,b){l(M,0,M.children.length,b,M)}function l(M,b,R,A,D){D||(D=T(null)),D.minX=1/0,D.minY=1/0,D.maxX=-1/0,D.maxY=-1/0;for(var G=b,F;G<R;G++)F=M.children[G],n(D,M.leaf?A(F):F);return D}function n(M,b){return M.minX=Math.min(M.minX,b.minX),M.minY=Math.min(M.minY,b.minY),M.maxX=Math.max(M.maxX,b.maxX),M.maxY=Math.max(M.maxY,b.maxY),M}function o(M,b){return M.minX-b.minX}function f(M,b){return M.minY-b.minY}function r(M){return(M.maxX-M.minX)*(M.maxY-M.minY)}function d(M){return M.maxX-M.minX+(M.maxY-M.minY)}function p(M,b){return(Math.max(b.maxX,M.maxX)-Math.min(b.minX,M.minX))*(Math.max(b.maxY,M.maxY)-Math.min(b.minY,M.minY))}function v(M,b){var R=Math.max(M.minX,b.minX),A=Math.max(M.minY,b.minY),D=Math.min(M.maxX,b.maxX),G=Math.min(M.maxY,b.maxY);return Math.max(0,D-R)*Math.max(0,G-A)}function g(M,b){return M.minX<=b.minX&&M.minY<=b.minY&&b.maxX<=M.maxX&&b.maxY<=M.maxY}function m(M,b){return b.minX<=M.maxX&&b.minY<=M.maxY&&b.maxX>=M.minX&&b.maxY>=M.minY}function T(M){return{children:M,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function P(M,b,R,A,D){for(var G=[b,R],F;G.length;)R=G.pop(),b=G.pop(),!(R-b<=A)&&(F=b+Math.ceil((R-b)/A/2)*A,c(M,F,b,R,D),G.push(b,F,F,R))}S.exports=y},35072:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h){if(this.entries=[],Array.isArray(h))for(var l=0;l<h.length;l++)this.set(h[l])},set:function(u){return this.entries.indexOf(u)===-1&&this.entries.push(u),this},get:function(u,h){for(var l=0;l<this.entries.length;l++){var n=this.entries[l];if(n[u]===h)return n}},getArray:function(){return this.entries.slice(0)},delete:function(u){var h=this.entries.indexOf(u);return h>-1&&this.entries.splice(h,1),this},dump:function(){console.group("Set");for(var u=0;u<this.entries.length;u++){var h=this.entries[u];console.log(h)}console.groupEnd()},each:function(u,h){var l,n=this.entries.slice(),o=n.length;if(h)for(l=0;l<o&&u.call(h,n[l],l)!==!1;l++);else for(l=0;l<o&&u(n[l],l)!==!1;l++);return this},iterate:function(u,h){var l,n=this.entries.length;if(h)for(l=0;l<n&&u.call(h,this.entries[l],l)!==!1;l++);else for(l=0;l<n&&u(this.entries[l],l)!==!1;l++);return this},iterateLocal:function(u){var h,l=[];for(h=1;h<arguments.length;h++)l.push(arguments[h]);var n=this.entries.length;for(h=0;h<n;h++){var o=this.entries[h];o[u].apply(o,l)}return this},clear:function(){return this.entries.length=0,this},contains:function(u){return this.entries.indexOf(u)>-1},union:function(u){var h=new y;return u.entries.forEach(function(l){h.set(l)}),this.entries.forEach(function(l){h.set(l)}),h},intersect:function(u){var h=new y;return this.entries.forEach(function(l){u.contains(l)&&h.set(l)}),h},difference:function(u){var h=new y;return this.entries.forEach(function(l){u.contains(l)||h.set(l)}),h},size:{get:function(){return this.entries.length},set:function(u){return u<this.entries.length?this.entries.length=u:this.entries.length}}});S.exports=y},86555:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45319),y=s(83419),u=s(56583),h=s(26099),l=new y({initialize:function(o,f,r,d){o===void 0&&(o=0),f===void 0&&(f=o),r===void 0&&(r=0),d===void 0&&(d=null),this._width=o,this._height=f,this._parent=d,this.aspectMode=r,this.aspectRatio=f===0?1:o/f,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new h},setAspectMode:function(n){return n===void 0&&(n=0),this.aspectMode=n,this.setSize(this._width,this._height)},setSnap:function(n,o){return n===void 0&&(n=0),o===void 0&&(o=n),this.snapTo.set(n,o),this.setSize(this._width,this._height)},setParent:function(n){return this._parent=n,this.setSize(this._width,this._height)},setMin:function(n,o){return n===void 0&&(n=0),o===void 0&&(o=n),this.minWidth=c(n,0,this.maxWidth),this.minHeight=c(o,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(n,o){return n===void 0&&(n=Number.MAX_VALUE),o===void 0&&(o=n),this.maxWidth=c(n,this.minWidth,Number.MAX_VALUE),this.maxHeight=c(o,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(n,o){switch(n===void 0&&(n=0),o===void 0&&(o=n),this.aspectMode){case l.NONE:this._width=this.getNewWidth(u(n,this.snapTo.x)),this._height=this.getNewHeight(u(o,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case l.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(u(n,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case l.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(u(o,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case l.FIT:this.constrain(n,o,!0);break;case l.ENVELOP:this.constrain(n,o,!1);break}return this},setAspectRatio:function(n){return this.aspectRatio=n,this.setSize(this._width,this._height)},resize:function(n,o){return this._width=this.getNewWidth(u(n,this.snapTo.x)),this._height=this.getNewHeight(u(o,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(n,o){return o===void 0&&(o=!0),n=c(n,this.minWidth,this.maxWidth),o&&this._parent&&n>this._parent.width&&(n=Math.max(this.minWidth,this._parent.width)),n},getNewHeight:function(n,o){return o===void 0&&(o=!0),n=c(n,this.minHeight,this.maxHeight),o&&this._parent&&n>this._parent.height&&(n=Math.max(this.minHeight,this._parent.height)),n},constrain:function(n,o,f){n===void 0&&(n=0),o===void 0&&(o=n),f===void 0&&(f=!0),n=this.getNewWidth(n),o=this.getNewHeight(o);var r=this.snapTo,d=o===0?1:n/o;return f&&this.aspectRatio>d||!f&&this.aspectRatio<d?(n=u(n,r.x),o=n/this.aspectRatio,r.y>0&&(o=u(o,r.y),n=o*this.aspectRatio)):(f&&this.aspectRatio<d||!f&&this.aspectRatio>d)&&(o=u(o,r.y),n=o*this.aspectRatio,r.x>0&&(n=u(n,r.x),o=n*(1/this.aspectRatio))),this._width=n,this._height=o,this},fitTo:function(n,o){return this.constrain(n,o,!0)},envelop:function(n,o){return this.constrain(n,o,!1)},setWidth:function(n){return this.setSize(n,this._height)},setHeight:function(n){return this.setSize(this._width,n)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(n){n&&n.style&&(n.style.width=this._width+"px",n.style.height=this._height+"px")},copy:function(n){return n.setAspectMode(this.aspectMode),n.aspectRatio=this.aspectRatio,n.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(n){this.setSize(n,this._height)}},height:{get:function(){return this._height},set:function(n){this.setSize(this._width,n)}}});l.NONE=0,l.WIDTH_CONTROLS_HEIGHT=1,l.HEIGHT_CONTROLS_WIDTH=2,l.FIT=3,l.ENVELOP=4,S.exports=l},15238:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="add"},56187:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="remove"},82348:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={PROCESS_QUEUE_ADD:s(15238),PROCESS_QUEUE_REMOVE:s(56187)}},41392:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Events:s(82348),List:s(73162),Map:s(90330),ProcessQueue:s(25774),RTree:s(59542),Set:s(35072),Size:s(86555)}},57382:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(45319),u=s(40987),h=s(8054),l=s(50030),n=s(79237),o=new c({Extends:n,initialize:function(r,d,p,v,g){n.call(this,r,d,p,v,g),this.add("__BASE",0,0,0,v,g),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=v,this.height=g,this.imageData=this.context.getImageData(0,0,v,g),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===h.WEBGL&&this.refresh(),this},draw:function(f,r,d,p){return p===void 0&&(p=!0),this.context.drawImage(d,f,r),p&&this.update(),this},drawFrame:function(f,r,d,p,v){d===void 0&&(d=0),p===void 0&&(p=0),v===void 0&&(v=!0);var g=this.manager.getFrame(f,r);if(g){var m=g.canvasData,T=g.cutWidth,P=g.cutHeight,M=g.source.resolution;this.context.drawImage(g.source.image,m.x,m.y,T,P,d,p,T/M,P/M),v&&this.update()}return this},setPixel:function(f,r,d,p,v,g){g===void 0&&(g=255),f=Math.abs(Math.floor(f)),r=Math.abs(Math.floor(r));var m=this.getIndex(f,r);if(m>-1){var T=this.context.getImageData(f,r,1,1);T.data[0]=d,T.data[1]=p,T.data[2]=v,T.data[3]=g,this.context.putImageData(T,f,r)}return this},putData:function(f,r,d,p,v,g,m){return p===void 0&&(p=0),v===void 0&&(v=0),g===void 0&&(g=f.width),m===void 0&&(m=f.height),this.context.putImageData(f,r,d,p,v,g,m),this},getData:function(f,r,d,p){f=y(Math.floor(f),0,this.width-1),r=y(Math.floor(r),0,this.height-1),d=y(d,1,this.width-f),p=y(p,1,this.height-r);var v=this.context.getImageData(f,r,d,p);return v},getPixel:function(f,r,d){d||(d=new u);var p=this.getIndex(f,r);if(p>-1){var v=this.data,g=v[p+0],m=v[p+1],T=v[p+2],P=v[p+3];d.setTo(g,m,T,P)}return d},getPixels:function(f,r,d,p){f===void 0&&(f=0),r===void 0&&(r=0),d===void 0&&(d=this.width),p===void 0&&(p=d),f=Math.abs(Math.round(f)),r=Math.abs(Math.round(r));for(var v=y(f,0,this.width),g=y(f+d,0,this.width),m=y(r,0,this.height),T=y(r+p,0,this.height),P=new u,M=[],b=m;b<T;b++){for(var R=[],A=v;A<g;A++)P=this.getPixel(A,b,P),R.push({x:A,y:b,color:P.color,alpha:P.alphaGL});M.push(R)}return M},getIndex:function(f,r){return f=Math.abs(Math.round(f)),r=Math.abs(Math.round(r)),f<this.width&&r<this.height?(f+r*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(f,r,d,p,v){return f===void 0&&(f=0),r===void 0&&(r=0),d===void 0&&(d=this.width),p===void 0&&(p=this.height),v===void 0&&(v=!0),this.context.clearRect(f,r,d,p),v&&this.update(),this},setSize:function(f,r){return r===void 0&&(r=f),(f!==this.width||r!==this.height)&&(this.canvas.width=f,this.canvas.height=r,this._source.width=f,this._source.height=r,this._source.isPowerOf2=l(f,r),this.frames.__BASE.setSize(f,r,0,0),this.width=f,this.height=r,this.refresh()),this},destroy:function(){n.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});S.exports=o},81320:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(10312),y=s(38058),u=s(27919),h=s(83419),l=s(8054),n=s(4327),o=s(95540),f=s(36060),r=s(32302),d=s(79237),p=s(70554),v=new h({Extends:d,initialize:function(m,T,P,M,b){P===void 0&&(P=256),M===void 0&&(M=256),b===void 0&&(b=!0),this.type="DynamicTexture";var R=m.game.renderer,A=R&&R.type===l.CANVAS,D=A?u.create2D(this,P,M):[this];d.call(this,m,T,D,P,M),this.add("__BASE",0,0,0,P,M),this.renderer=R,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=A?D:null,this.context=A?D.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new y(0,0,P,M).setScene(m.game.scene.systemScene,!1),this.renderTarget=A?null:new r(R,P,M,1,0,!1,!1,!0,!1),this.pipeline=A?null:R.pipelines.get(f.SINGLE_PIPELINE),this.setSize(P,M,b)},setSize:function(g,m,T){m===void 0&&(m=g),T===void 0&&(T=!0),T&&(g=Math.floor(g),m=Math.floor(m),g%2!==0&&g++,m%2!==0&&m++);var P=this.get(),M=P.source;if(g!==this.width||m!==this.height){this.canvas&&(this.canvas.width=g,this.canvas.height=m);var b=this.renderTarget;b&&(b.willResize(g,m)&&b.resize(g,m),b.texture!==M.glTexture&&this.renderer.deleteTexture(M.glTexture),this.setFromRenderTarget()),this.camera.setSize(g,m),M.width=g,M.height=m,P.setSize(g,m),this.width=g,this.height=m}else{var R=this.getSourceImage();P.cutX+g>R.width&&(g=R.width-P.cutX),P.cutY+m>R.height&&(m=R.height-P.cutY),P.setSize(g,m,P.cutX,P.cutY)}return this},setFromRenderTarget:function(){var g=this.get(),m=g.source,T=this.renderTarget;return m.isRenderTexture=!0,m.isGLTexture=!0,m.glTexture=T.texture,this},setIsSpriteTexture:function(g){return this.isSpriteTexture=g,this},fill:function(g,m,T,P,M,b){var R=this.camera,A=this.renderer;m===void 0&&(m=1),T===void 0&&(T=0),P===void 0&&(P=0),M===void 0&&(M=this.width),b===void 0&&(b=this.height);var D=g>>16&255,G=g>>8&255,F=g&255,B=this.renderTarget;if(R.preRender(),B){B.bind(!0);var N=this.pipeline.manager.set(this.pipeline),z=A.width/B.width,$=A.height/B.height,Q=B.height-(P+b);N.drawFillRect(T*z,Q*$,M*z,b*$,p.getTintFromFloats(F/255,G/255,D/255,1),m),B.unbind(!0)}else{var Z=this.context;A.setContext(Z),Z.globalCompositeOperation="source-over",Z.fillStyle="rgba("+D+","+G+","+F+","+m+")",Z.fillRect(T,P,M,b),A.setContext()}return this.dirty=!0,this},clear:function(g,m,T,P){if(this.dirty){var M=this.context,b=this.renderTarget;b?b.clear(g,m,T,P):M&&(g!==void 0&&m!==void 0&&T!==void 0&&P!==void 0?M.clearRect(g,m,T,P):(M.save(),M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,this.width,this.height),M.restore())),this.dirty=!1}return this},stamp:function(g,m,T,P,M){T===void 0&&(T=0),P===void 0&&(P=0);var b=o(M,"alpha",1),R=o(M,"tint",16777215),A=o(M,"angle",0),D=o(M,"rotation",0),G=o(M,"scale",1),F=o(M,"scaleX",G),B=o(M,"scaleY",G),N=o(M,"originX",.5),z=o(M,"originY",.5),$=o(M,"blendMode",0),Q=o(M,"erase",!1),Z=o(M,"skipBatch",!1),tt=this.manager.resetStamp(b,R);return tt.setAngle(0),A!==0?tt.setAngle(A):D!==0&&tt.setRotation(D),tt.setScale(F,B),tt.setTexture(g,m),tt.setOrigin(N,z),tt.setBlendMode($),Q&&(this._eraseMode=!0),Z?this.batchGameObject(tt,T,P):this.draw(tt,T,P),Q&&(this._eraseMode=!1),this},erase:function(g,m,T){return this._eraseMode=!0,this.draw(g,m,T),this._eraseMode=!1,this},draw:function(g,m,T,P,M){return this.beginDraw(),this.batchDraw(g,m,T,P,M),this.endDraw(),this},drawFrame:function(g,m,T,P,M,b){return this.beginDraw(),this.batchDrawFrame(g,m,T,P,M,b),this.endDraw(),this},repeat:function(g,m,T,P,M,b,R,A,D){if(T===void 0&&(T=0),P===void 0&&(P=0),M===void 0&&(M=this.width),b===void 0&&(b=this.height),R===void 0&&(R=1),A===void 0&&(A=16777215),D===void 0&&(D=!1),g instanceof n?m=g:m=this.manager.getFrame(g,m),!m)return this;var G=this.manager.resetStamp(R,A);G.setFrame(m),G.setOrigin(0);var F=m.width,B=m.height;M=Math.floor(M),b=Math.floor(b);var N=Math.ceil(M/F),z=Math.ceil(b/B),$=N*F-M,Q=z*B-b;$>0&&($=F-$),Q>0&&(Q=B-Q),T<0&&(N+=Math.ceil(Math.abs(T)/F)),P<0&&(z+=Math.ceil(Math.abs(P)/B));var Z=T,tt=P,H=!1,J=this.manager.stampCrop.setTo(0,0,F,B);D||this.beginDraw();for(var Y=0;Y<z;Y++){if(tt+B<0){tt+=B;continue}for(var _=0;_<N;_++){if(H=!1,Z+F<0){Z+=F;continue}else Z<0&&(H=!0,J.width=F+Z,J.x=F-J.width);tt<0&&(H=!0,J.height=B+tt,J.y=B-J.height),$>0&&_===N-1&&(H=!0,J.width=$),Q>0&&Y===z-1&&(H=!0,J.height=Q),H&&G.setCrop(J),this.batchGameObject(G,Z,tt),G.isCropped=!1,J.setTo(0,0,F,B),Z+=F}Z=T,tt+=B}return D||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var g=this.camera,m=this.renderer,T=this.renderTarget;g.preRender(),T?m.beginCapture(T.width,T.height):m.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(g,m,T,P,M){return Array.isArray(g)||(g=[g]),this.batchList(g,m,T,P,M),this},batchDrawFrame:function(g,m,T,P,M,b){T===void 0&&(T=0),P===void 0&&(P=0),M===void 0&&(M=1),b===void 0&&(b=16777215);var R=this.manager.getFrame(g,m);return R&&(this.renderTarget?this.pipeline.batchTextureFrame(R,T,P,b,M,this.camera.matrix,null):this.batchTextureFrame(R,T,P,M,b)),this},endDraw:function(g){if(g===void 0&&(g=this._eraseMode),this.isDrawing){var m=this.renderer,T=this.renderTarget;if(T){var P=m.endCapture(),M=m.pipelines.setUtility();M.blitFrame(P,T,1,!1,!1,g,this.isSpriteTexture),m.resetScissor(),m.resetViewport()}else m.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(g,m,T,P,M){var b=g.length;if(b!==0)for(var R=0;R<b;R++){var A=g[R];!A||A===this||(A.renderWebGL||A.renderCanvas?this.batchGameObject(A,m,T):A.isParent||A.list?this.batchGroup(A.getChildren(),m,T):typeof A=="string"?this.batchTextureFrameKey(A,null,m,T,P,M):A instanceof n?this.batchTextureFrame(A,m,T,P,M):Array.isArray(A)&&this.batchList(A,m,T,P,M))}},batchGroup:function(g,m,T){m===void 0&&(m=0),T===void 0&&(T=0);for(var P=0;P<g.length;P++){var M=g[P];M.willRender(this.camera)&&this.batchGameObject(M,M.x+m,M.y+T)}},batchGameObject:function(g,m,T){m===void 0&&(m=g.x),T===void 0&&(T=g.y);var P=g.x,M=g.y,b=this.camera,R=this.renderer,A=this._eraseMode,D=g.mask;if(g.setPosition(m,T),this.canvas){if(A){var G=g.blendMode;g.blendMode=c.ERASE}D&&D.preRenderCanvas(R,g,b),g.renderCanvas(R,g,b,null),D&&D.postRenderCanvas(R,g,b),A&&(g.blendMode=G)}else R&&(D&&D.preRenderWebGL(R,g,b),A||R.setBlendMode(g.blendMode),g.renderWebGL(R,g,b),D&&D.postRenderWebGL(R,b,this.renderTarget));g.setPosition(P,M)},batchTextureFrameKey:function(g,m,T,P,M,b){var R=this.manager.getFrame(g,m);R&&this.batchTextureFrame(R,T,P,M,b)},batchTextureFrame:function(g,m,T,P,M){m===void 0&&(m=0),T===void 0&&(T=0),P===void 0&&(P=1),M===void 0&&(M=16777215);var b=this.camera.matrix,R=this.renderTarget;if(R)this.pipeline.batchTextureFrame(g,m,T,M,P,b,null);else{var A=this.context,D=g.canvasData,G=g.source.image;A.save(),A.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",A.globalAlpha=P,b.setToContext(A),D.width>0&&D.height>0&&A.drawImage(G,D.x,D.y,D.width,D.height,m,T,D.width,D.height),A.restore()}},snapshotArea:function(g,m,T,P,M,b,R){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,M,!1,g,m,T,P,b,R):this.renderer.snapshotCanvas(this.canvas,M,!1,g,m,T,P,b,R),this},snapshot:function(g,m,T){return this.snapshotArea(0,0,this.width,this.height,g,m,T)},snapshotPixel:function(g,m,T){return this.snapshotArea(g,m,1,1,T,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(g,m,T,P){var M=this.manager.resetStamp();M.setTexture(this),M.setOrigin(0),M.renderWebGL(g,M,T,P)},renderCanvas:function(){},destroy:function(){var g=this.manager.stamp;g&&g.texture===this&&this.manager.resetStamp(),d.prototype.destroy.call(this),u.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});S.exports=v},4327:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(45319),u=s(79291),h=new c({initialize:function(n,o,f,r,d,p,v){this.texture=n,this.name=o,this.source=n.source[f],this.sourceIndex=f,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(p,v,r,d)},setCutPosition:function(l,n){return l===void 0&&(l=0),n===void 0&&(n=0),this.cutX=l,this.cutY=n,this.updateUVs()},setCutSize:function(l,n){return this.cutWidth=l,this.cutHeight=n,this.updateUVs()},setSize:function(l,n,o,f){o===void 0&&(o=0),f===void 0&&(f=0),this.setCutPosition(o,f),this.setCutSize(l,n),this.width=l,this.height=n,this.halfWidth=Math.floor(l*.5),this.halfHeight=Math.floor(n*.5),this.centerX=Math.floor(l/2),this.centerY=Math.floor(n/2);var r=this.data,d=r.cut;d.x=o,d.y=f,d.w=l,d.h=n,d.r=o+l,d.b=f+n,r.sourceSize.w=l,r.sourceSize.h=n,r.spriteSourceSize.w=l,r.spriteSourceSize.h=n,r.radius=.5*Math.sqrt(l*l+n*n);var p=r.drawImage;return p.x=o,p.y=f,p.width=l,p.height=n,this.updateUVs()},setTrim:function(l,n,o,f,r,d){var p=this.data,v=p.spriteSourceSize;return p.trim=!0,p.sourceSize.w=l,p.sourceSize.h=n,v.x=o,v.y=f,v.w=r,v.h=d,v.r=o+r,v.b=f+d,this.x=o,this.y=f,this.width=r,this.height=d,this.halfWidth=r*.5,this.halfHeight=d*.5,this.centerX=Math.floor(r/2),this.centerY=Math.floor(d/2),this.updateUVs()},setScale9:function(l,n,o,f){var r=this.data;return r.scale9=!0,r.is3Slice=n===0&&f===this.height,r.scale9Borders.x=l,r.scale9Borders.y=n,r.scale9Borders.w=o,r.scale9Borders.h=f,this},setCropUVs:function(l,n,o,f,r,d,p){var v=this.cutX,g=this.cutY,m=this.cutWidth,T=this.cutHeight,P=this.realWidth,M=this.realHeight;n=y(n,0,P),o=y(o,0,M),f=y(f,0,P-n),r=y(r,0,M-o);var b=v+n,R=g+o,A=f,D=r,G=this.data;if(G.trim){var F=G.spriteSourceSize;f=y(f,0,F.x+m-n),r=y(r,0,F.y+T-o);var B=n+f,N=o+r,z=!(F.r<n||F.b<o||F.x>B||F.y>N);if(z){var $=Math.max(F.x,n),Q=Math.max(F.y,o),Z=Math.min(F.r,B)-$,tt=Math.min(F.b,N)-Q;A=Z,D=tt,d?b=v+(m-($-F.x)-Z):b=v+($-F.x),p?R=g+(T-(Q-F.y)-tt):R=g+(Q-F.y),n=$,o=Q,f=Z,r=tt}else b=0,R=0,A=0,D=0}else d&&(b=v+(m-n-f)),p&&(R=g+(T-o-r));var H=this.source.width,J=this.source.height;return l.u0=Math.max(0,b/H),l.v0=Math.max(0,R/J),l.u1=Math.min(1,(b+A)/H),l.v1=Math.min(1,(R+D)/J),l.x=n,l.y=o,l.cx=b,l.cy=R,l.cw=A,l.ch=D,l.width=f,l.height=r,l.flipX=d,l.flipY=p,l},updateCropUVs:function(l,n,o){return this.setCropUVs(l,l.x,l.y,l.width,l.height,n,o)},setUVs:function(l,n,o,f,r,d){var p=this.data.drawImage;return p.width=l,p.height=n,this.u0=o,this.v0=f,this.u1=r,this.v1=d,this},updateUVs:function(){var l=this.cutX,n=this.cutY,o=this.cutWidth,f=this.cutHeight,r=this.data.drawImage;r.width=o,r.height=f;var d=this.source.width,p=this.source.height;return this.u0=l/d,this.v0=n/p,this.u1=(l+o)/d,this.v1=(n+f)/p,this},updateUVsInverted:function(){var l=this.source.width,n=this.source.height;return this.u0=(this.cutX+this.cutHeight)/l,this.v0=this.cutY/n,this.u1=this.cutX/l,this.v1=(this.cutY+this.cutWidth)/n,this},clone:function(){var l=new h(this.texture,this.name,this.sourceIndex);return l.cutX=this.cutX,l.cutY=this.cutY,l.cutWidth=this.cutWidth,l.cutHeight=this.cutHeight,l.x=this.x,l.y=this.y,l.width=this.width,l.height=this.height,l.halfWidth=this.halfWidth,l.halfHeight=this.halfHeight,l.centerX=this.centerX,l.centerY=this.centerY,l.rotated=this.rotated,l.data=u(!0,l.data,this.data),l.updateUVs(),l},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});S.exports=h},79237:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(4327),u=s(11876),h='Texture "%s" has no frame "%s"',l=new c({initialize:function(o,f,r,d,p){Array.isArray(r)||(r=[r]),this.manager=o,this.key=f,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var v=0;v<r.length;v++)this.source.push(new u(this,r[v],d,p))},add:function(n,o,f,r,d,p){if(this.has(n))return null;var v=new y(this,n,o,f,r,d,p);return this.frames[n]=v,this.firstFrame==="__BASE"&&(this.firstFrame=n),this.frameTotal++,v},remove:function(n){if(this.has(n)){var o=this.get(n);return o.destroy(),delete this.frames[n],!0}return!1},has:function(n){return this.frames.hasOwnProperty(n)},get:function(n){n||(n=this.firstFrame);var o=this.frames[n];return o||(console.warn(h,this.key,n),o=this.frames[this.firstFrame]),o},getTextureSourceIndex:function(n){for(var o=0;o<this.source.length;o++)if(this.source[o]===n)return o;return-1},getFramesFromTextureSource:function(n,o){o===void 0&&(o=!1);var f=[];for(var r in this.frames)if(!(r==="__BASE"&&!o)){var d=this.frames[r];d.sourceIndex===n&&f.push(d)}return f},getFrameBounds:function(n){n===void 0&&(n=0);for(var o=this.getFramesFromTextureSource(n,!0),f=o[0],r=f.cutX,d=f.cutY,p=f.cutX+f.cutWidth,v=f.cutY+f.cutHeight,g=1;g<o.length;g++){var m=o[g];m.cutX<r&&(r=m.cutX),m.cutY<d&&(d=m.cutY),m.cutX+m.cutWidth>p&&(p=m.cutX+m.cutWidth),m.cutY+m.cutHeight>v&&(v=m.cutY+m.cutHeight)}return{x:r,y:d,width:p-r,height:v-d}},getFrameNames:function(n){n===void 0&&(n=!1);var o=Object.keys(this.frames);if(!n){var f=o.indexOf("__BASE");f!==-1&&o.splice(f,1)}return o},getSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var o=this.frames[n];return o?o.source.image:(console.warn(h,this.key,n),this.frames.__BASE.source.image)},getDataSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var o=this.frames[n],f;return o?f=o.sourceIndex:(console.warn(h,this.key,n),f=this.frames.__BASE.sourceIndex),this.dataSource[f].image},setDataSource:function(n){Array.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++){var f=this.source[o];this.dataSource.push(new u(this,n[o],f.width,f.height))}},setFilter:function(n){var o;for(o=0;o<this.source.length;o++)this.source[o].setFilter(n);for(o=0;o<this.dataSource.length;o++)this.dataSource[o].setFilter(n)},destroy:function(){var n,o=this.source,f=this.dataSource;for(n=0;n<o.length;n++)o[n]&&o[n].destroy();for(n=0;n<f.length;n++)f[n]&&f[n].destroy();for(var r in this.frames){var d=this.frames[r];d&&d.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});S.exports=l},17130:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(27919),y=s(57382),u=s(83419),h=s(40987),l=s(8054),n=s(81320),o=s(50792),f=s(69442),r=s(4327),d=s(8443),p=s(99584),v=s(35154),g=s(88571),m=s(41212),T=s(61309),P=s(87841),M=s(79237),b=new u({Extends:o,initialize:function(A){o.call(this),this.game=A,this.name="TextureManager",this.list={},this._tempCanvas=c.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new P,this.silentWarnings=!1,A.events.once(d.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(f.LOAD,this.updatePending,this),this.on(f.ERROR,this.updatePending,this);var R=this.game.config;R.defaultImage!==null&&this.addBase64("__DEFAULT",R.defaultImage),R.missingImage!==null&&this.addBase64("__MISSING",R.missingImage),R.whiteImage!==null&&this.addBase64("__WHITE",R.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(d.DESTROY,this.destroy,this),this.game.events.once(d.SYSTEM_READY,function(A){this.stamp=new g(A).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(f.LOAD),this.off(f.ERROR),this.emit(f.READY))},checkKey:function(R){return!R||typeof R!="string"||this.exists(R)?(this.silentWarnings||console.error("Texture key already in use: "+R),!1):!0},remove:function(R){if(typeof R=="string")if(this.exists(R))R=this.get(R);else return this.silentWarnings||console.warn("No texture found matching key: "+R),this;var A=R.key;return this.list.hasOwnProperty(A)&&(R.destroy(),this.emit(f.REMOVE,A),this.emit(f.REMOVE_KEY+A)),this},removeKey:function(R){return this.list.hasOwnProperty(R)&&delete this.list[R],this},addBase64:function(R,A){if(this.checkKey(R)){var D=this,G=new Image;G.onerror=function(){D.emit(f.ERROR,R)},G.onload=function(){var F=D.create(R,G);F&&(T.Image(F,0),D.emit(f.ADD,R,F),D.emit(f.ADD_KEY+R,F),D.emit(f.LOAD,R,F))},G.src=A}return this},getBase64:function(R,A,D,G){D===void 0&&(D="image/png"),G===void 0&&(G=.92);var F="",B=this.getFrame(R,A);if(B&&(B.source.isRenderTexture||B.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(B){var N=B.canvasData,z=c.create2D(this,N.width,N.height),$=z.getContext("2d",{willReadFrequently:!0});N.width>0&&N.height>0&&$.drawImage(B.source.image,N.x,N.y,N.width,N.height,0,0,N.width,N.height),F=z.toDataURL(D,G),c.remove(z)}return F},addImage:function(R,A,D){var G=null;return this.checkKey(R)&&(G=this.create(R,A),T.Image(G,0),D&&G.setDataSource(D),this.emit(f.ADD,R,G),this.emit(f.ADD_KEY+R,G)),G},addGLTexture:function(R,A){var D=null;if(this.checkKey(R)){var G=A.width,F=A.height;D=this.create(R,A,G,F),D.add("__BASE",0,0,0,G,F),this.emit(f.ADD,R,D),this.emit(f.ADD_KEY+R,D)}return D},addCompressedTexture:function(R,A,D){var G=null;if(this.checkKey(R)){if(G=this.create(R,A),G.add("__BASE",0,0,0,A.width,A.height),D){var F=function(N,z,$){Array.isArray($.textures)||Array.isArray($.frames)?T.JSONArray(N,z,$):T.JSONHash(N,z,$)};if(Array.isArray(D))for(var B=0;B<D.length;B++)F(G,B,D[B]);else F(G,0,D)}this.emit(f.ADD,R,G),this.emit(f.ADD_KEY+R,G)}return G},addRenderTexture:function(R,A){var D=null;return this.checkKey(R)&&(D=this.create(R,A),D.add("__BASE",0,0,0,A.width,A.height),this.emit(f.ADD,R,D),this.emit(f.ADD_KEY+R,D)),D},generate:function(R,A){if(this.checkKey(R)){var D=c.create(this,1,1);return A.canvas=D,p(A),this.addCanvas(R,D)}else return null},createCanvas:function(R,A,D){if(A===void 0&&(A=256),D===void 0&&(D=256),this.checkKey(R)){var G=c.create(this,A,D,l.CANVAS,!0);return this.addCanvas(R,G)}return null},addCanvas:function(R,A,D){D===void 0&&(D=!1);var G=null;return D?G=new y(this,R,A,A.width,A.height):this.checkKey(R)&&(G=new y(this,R,A,A.width,A.height),this.list[R]=G,this.emit(f.ADD,R,G),this.emit(f.ADD_KEY+R,G)),G},addDynamicTexture:function(R,A,D){var G=null;return typeof R=="string"&&!this.exists(R)?G=new n(this,R,A,D):(G=R,R=G.key),this.checkKey(R)?(this.list[R]=G,this.emit(f.ADD,R,G),this.emit(f.ADD_KEY+R,G)):G=null,G},addAtlas:function(R,A,D,G){return Array.isArray(D.textures)||Array.isArray(D.frames)?this.addAtlasJSONArray(R,A,D,G):this.addAtlasJSONHash(R,A,D,G)},addAtlasJSONArray:function(R,A,D,G){var F=null;if(A instanceof M?(R=A.key,F=A):this.checkKey(R)&&(F=this.create(R,A)),F){if(Array.isArray(D))for(var B=D.length===1,N=0;N<F.source.length;N++){var z=B?D[0]:D[N];T.JSONArray(F,N,z)}else T.JSONArray(F,0,D);G&&F.setDataSource(G),this.emit(f.ADD,R,F),this.emit(f.ADD_KEY+R,F)}return F},addAtlasJSONHash:function(R,A,D,G){var F=null;if(A instanceof M?(R=A.key,F=A):this.checkKey(R)&&(F=this.create(R,A)),F){if(Array.isArray(D))for(var B=0;B<D.length;B++)T.JSONHash(F,B,D[B]);else T.JSONHash(F,0,D);G&&F.setDataSource(G),this.emit(f.ADD,R,F),this.emit(f.ADD_KEY+R,F)}return F},addAtlasXML:function(R,A,D,G){var F=null;return A instanceof M?(R=A.key,F=A):this.checkKey(R)&&(F=this.create(R,A)),F&&(T.AtlasXML(F,0,D),G&&F.setDataSource(G),this.emit(f.ADD,R,F),this.emit(f.ADD_KEY+R,F)),F},addUnityAtlas:function(R,A,D,G){var F=null;return A instanceof M?(R=A.key,F=A):this.checkKey(R)&&(F=this.create(R,A)),F&&(T.UnityYAML(F,0,D),G&&F.setDataSource(G),this.emit(f.ADD,R,F),this.emit(f.ADD_KEY+R,F)),F},addSpriteSheet:function(R,A,D,G){var F=null;if(A instanceof M?(R=A.key,F=A):this.checkKey(R)&&(F=this.create(R,A)),F){var B=F.source[0].width,N=F.source[0].height;T.SpriteSheet(F,0,0,0,B,N,D),G&&F.setDataSource(G),this.emit(f.ADD,R,F),this.emit(f.ADD_KEY+R,F)}return F},addSpriteSheetFromAtlas:function(R,A){if(!this.checkKey(R))return null;var D=v(A,"atlas",null),G=v(A,"frame",null);if(!(!D||!G)){var F=this.get(D),B=F.get(G);if(B){var N=B.source.image;N||(N=B.source.glTexture);var z=this.create(R,N);return B.trimmed?T.SpriteSheetFromAtlas(z,B,A):T.SpriteSheet(z,0,B.cutX,B.cutY,B.cutWidth,B.cutHeight,A),this.emit(f.ADD,R,z),this.emit(f.ADD_KEY+R,z),z}}},addUint8Array:function(R,A,D,G){if(!this.checkKey(R)||A.length/4!==D*G)return null;var F=this.create(R,A,D,G);return F.add("__BASE",0,0,0,D,G),this.emit(f.ADD,R,F),this.emit(f.ADD_KEY+R,F),F},create:function(R,A,D,G){var F=null;return this.checkKey(R)&&(F=new M(this,R,A,D,G),this.list[R]=F),F},exists:function(R){return this.list.hasOwnProperty(R)},get:function(R){return R===void 0&&(R="__DEFAULT"),this.list[R]?this.list[R]:R instanceof M?R:R instanceof r?R.texture:this.list.__MISSING},cloneFrame:function(R,A){if(this.list[R])return this.list[R].get(A).clone()},getFrame:function(R,A){if(this.list[R])return this.list[R].get(A)},parseFrame:function(R){if(R){if(typeof R=="string")return this.getFrame(R);if(Array.isArray(R)&&R.length===2)return this.getFrame(R[0],R[1]);if(m(R))return this.getFrame(R.key,R.frame);if(R instanceof M)return R.get();if(R instanceof r)return R}else return},getTextureKeys:function(){var R=[];for(var A in this.list)A!=="__DEFAULT"&&A!=="__MISSING"&&A!=="__WHITE"&&A!=="__NORMAL"&&R.push(A);return R},getPixel:function(R,A,D,G){var F=this.getFrame(D,G);if(F){R-=F.x,A-=F.y;var B=F.data.cut;if(R+=B.x,A+=B.y,R>=B.x&&R<B.r&&A>=B.y&&A<B.b){var N=this._tempContext;N.clearRect(0,0,1,1),N.drawImage(F.source.image,R,A,1,1,0,0,1,1);var z=N.getImageData(0,0,1,1);return new h(z.data[0],z.data[1],z.data[2],z.data[3])}}return null},getPixelAlpha:function(R,A,D,G){var F=this.getFrame(D,G);if(F){R-=F.x,A-=F.y;var B=F.data.cut;if(R+=B.x,A+=B.y,R>=B.x&&R<B.r&&A>=B.y&&A<B.b){var N=this._tempContext;N.clearRect(0,0,1,1),N.drawImage(F.source.image,R,A,1,1,0,0,1,1);var z=N.getImageData(0,0,1,1);return z.data[3]}}return null},setTexture:function(R,A,D){return this.list[A]&&(R.texture=this.list[A],R.frame=R.texture.get(D)),R},renameTexture:function(R,A){var D=this.get(R);return D&&R!==A?(D.key=A,this.list[A]=D,delete this.list[R],!0):!1},each:function(R,A){for(var D=[null],G=1;G<arguments.length;G++)D.push(arguments[G]);for(var F in this.list)D[0]=this.list[F],R.apply(A,D)},resetStamp:function(R,A){R===void 0&&(R=1),A===void 0&&(A=16777215);var D=this.stamp;return D.setCrop(),D.setPosition(0),D.setAngle(0),D.setScale(1),D.setAlpha(R),D.setTint(A),D.setTexture("__WHITE"),D},destroy:function(){for(var R in this.list)this.list[R].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,c.remove(this._tempCanvas)}});S.exports=b},11876:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(27919),y=s(83419),u=s(50030),h=s(29795),l=s(82751),n=new y({initialize:function(f,r,d,p,v){v===void 0&&(v=!1);var g=f.manager.game;this.renderer=g.renderer,this.texture=f,this.source=r,this.image=r.compressed?null:r,this.compressionAlgorithm=r.compressed?r.format:null,this.resolution=1,this.width=d||r.naturalWidth||r.videoWidth||r.width||0,this.height=p||r.naturalHeight||r.videoHeight||r.height||0,this.scaleMode=h.DEFAULT,this.isCanvas=r instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&r instanceof HTMLVideoElement,this.isRenderTexture=r.type==="RenderTexture"||r.type==="DynamicTexture",this.isGLTexture=r instanceof l,this.isPowerOf2=u(this.width,this.height),this.glTexture=null,this.flipY=v,this.init(g)},init:function(o){var f=this.renderer;if(f){var r=this.source;if(f.gl){var d=this.image,p=this.flipY,v=this.width,g=this.height,m=this.scaleMode;this.isCanvas?this.glTexture=f.createCanvasTexture(d,!1,p):this.isVideo?this.glTexture=f.createVideoTexture(d,!1,p):this.isRenderTexture?this.glTexture=f.createTextureFromSource(null,v,g,m):this.isGLTexture?this.glTexture=r:this.compressionAlgorithm?this.glTexture=f.createTextureFromSource(r,void 0,void 0,m):r instanceof Uint8Array?this.glTexture=f.createUint8ArrayTexture(r,v,g,m):this.glTexture=f.createTextureFromSource(d,v,g,m)}else this.isRenderTexture&&(this.image=r.canvas)}o.config.antialias||this.setFilter(1)},setFilter:function(o){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,o),this.scaleMode=o},setFlipY:function(o){return o===void 0&&(o=!0),o===this.flipY?this:(this.flipY=o,this.update(),this)},update:function(){var o=this.renderer,f=this.image,r=this.flipY,d=o.gl;d&&this.isCanvas?o.updateCanvasTexture(f,this.glTexture,r):d&&this.isVideo&&o.updateVideoTexture(f,this.glTexture,r)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&c.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});S.exports=n},19673:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={LINEAR:0,NEAREST:1};S.exports=w},44538:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="addtexture"},63486:S=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="addtexture-"},94851:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="onerror"},29099:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="onload"},8678:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="ready"},86415:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="removetexture"},30879:S=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="removetexture-"},69442:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={ADD:s(44538),ADD_KEY:s(63486),ERROR:s(94851),LOAD:s(29099),READY:s(8678),REMOVE:s(86415),REMOVE_KEY:s(30879)}},27458:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(79291),y=s(19673),u={CanvasTexture:s(57382),DynamicTexture:s(81320),Events:s(69442),FilterMode:y,Frame:s(4327),Parsers:s(61309),Texture:s(79237),TextureManager:s(17130),TextureSource:s(11876)};u=c(!1,u,y),S.exports=u},89905:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){if(!y.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var u=s.source[c];s.add("__BASE",c,0,0,u.width,u.height);for(var h=y.getElementsByTagName("SubTexture"),l,n=0;n<h.length;n++){var o=h[n].attributes,f=o.name.value,r=parseInt(o.x.value,10),d=parseInt(o.y.value,10),p=parseInt(o.width.value,10),v=parseInt(o.height.value,10);if(l=s.add(f,c,r,d,p,v),o.frameX){var g=Math.abs(parseInt(o.frameX.value,10)),m=Math.abs(parseInt(o.frameY.value,10)),T=parseInt(o.frameWidth.value,10),P=parseInt(o.frameHeight.value,10);l.setTrim(p,v,g,m,T,P)}}return s};S.exports=w},72893:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=s.source[c];return s.add("__BASE",c,0,0,y.width,y.height),s};S.exports=w},4832:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=s.source[c];return s.add("__BASE",c,0,0,y.width,y.height),s};S.exports=w},78566:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(41786),y=function(u,h,l){if(!l.frames&&!l.textures){console.warn("Invalid Texture Atlas JSON Array");return}var n=u.source[h];u.add("__BASE",h,0,0,n.width,n.height);for(var o=Array.isArray(l.textures)?l.textures[h].frames:l.frames,f,r=0;r<o.length;r++){var d=o[r];if(f=u.add(d.filename,h,d.frame.x,d.frame.y,d.frame.w,d.frame.h),!f){console.warn("Invalid atlas json, frame already exists: "+d.filename);continue}d.trimmed&&f.setTrim(d.sourceSize.w,d.sourceSize.h,d.spriteSourceSize.x,d.spriteSourceSize.y,d.spriteSourceSize.w,d.spriteSourceSize.h),d.rotated&&(f.rotated=!0,f.updateUVsInverted());var p=d.anchor||d.pivot;p&&(f.customPivot=!0,f.pivotX=p.x,f.pivotY=p.y),d.scale9Borders&&f.setScale9(d.scale9Borders.x,d.scale9Borders.y,d.scale9Borders.w,d.scale9Borders.h),f.customData=c(d)}for(var v in l)v!=="frames"&&(Array.isArray(l[v])?u.customData[v]=l[v].slice(0):u.customData[v]=l[v]);return u};S.exports=y},39711:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(41786),y=function(u,h,l){if(!l.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var n=u.source[h];u.add("__BASE",h,0,0,n.width,n.height);var o=l.frames,f;for(var r in o)if(o.hasOwnProperty(r)){var d=o[r];if(f=u.add(r,h,d.frame.x,d.frame.y,d.frame.w,d.frame.h),!f){console.warn("Invalid atlas json, frame already exists: "+r);continue}d.trimmed&&f.setTrim(d.sourceSize.w,d.sourceSize.h,d.spriteSourceSize.x,d.spriteSourceSize.y,d.spriteSourceSize.w,d.spriteSourceSize.h),d.rotated&&(f.rotated=!0,f.updateUVsInverted());var p=d.anchor||d.pivot;p&&(f.customPivot=!0,f.pivotX=p.x,f.pivotY=p.y),d.scale9Borders&&f.setScale9(d.scale9Borders.x,d.scale9Borders.y,d.scale9Borders.w,d.scale9Borders.h),f.customData=c(d)}for(var v in l)v!=="frames"&&(Array.isArray(l[v])?u.customData[v]=l[v].slice(0):u.customData[v]=l[v]);return u};S.exports=y},31403:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c=[171,75,84,88,32,49,49,187,13,10,26,10],y,u=new Uint8Array(s,0,12);for(y=0;y<u.length;y++)if(u[y]!==c[y]){console.warn("KTXParser - Invalid file format");return}var h=Uint32Array.BYTES_PER_ELEMENT,l=new DataView(s,12,13*h),n=l.getUint32(0,!0)===67305985,o=l.getUint32(1*h,n);if(o!==0){console.warn("KTXParser - Only compressed formats supported");return}var f=l.getUint32(4*h,n),r=l.getUint32(6*h,n),d=l.getUint32(7*h,n),p=Math.max(1,l.getUint32(11*h,n)),v=l.getUint32(12*h,n),g=new Array(p),m=12+13*4+v,T=r,P=d;for(y=0;y<p;y++){var M=new Int32Array(s,m,1)[0];m+=4,g[y]={data:new Uint8Array(s,m,M),width:T,height:P},T=Math.max(1,T>>1),P=Math.max(1,P>>1),m+=M}return{mipmaps:g,width:r,height:d,internalFormat:f,compressed:!0,generateMipmap:!1}};S.exports=w},82038:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(A,D,G,F,B,N,z){return z===void 0&&(z=16),Math.floor((A+G)/B)*Math.floor((D+F)/N)*z}function s(A,D){return A=Math.max(A,16),D=Math.max(D,8),A*D/4}function c(A,D){return A=Math.max(A,8),D=Math.max(D,8),A*D/2}function y(A,D){return Math.ceil(A/4)*Math.ceil(D/4)*16}function u(A,D){return w(A,D,3,3,4,4,8)}function h(A,D){return w(A,D,3,3,4,4)}function l(A,D){return w(A,D,4,3,5,4)}function n(A,D){return w(A,D,4,4,5,5)}function o(A,D){return w(A,D,5,4,6,5)}function f(A,D){return w(A,D,5,5,6,6)}function r(A,D){return w(A,D,7,4,8,5)}function d(A,D){return w(A,D,7,5,8,6)}function p(A,D){return w(A,D,7,7,8,8)}function v(A,D){return w(A,D,9,4,10,5)}function g(A,D){return w(A,D,9,5,10,6)}function m(A,D){return w(A,D,9,7,10,8)}function T(A,D){return w(A,D,9,9,10,10)}function P(A,D){return w(A,D,11,9,12,10)}function M(A,D){return w(A,D,11,11,12,12)}var b={0:{sizeFunc:s,glFormat:[35841]},1:{sizeFunc:s,glFormat:[35843]},2:{sizeFunc:c,glFormat:[35840]},3:{sizeFunc:c,glFormat:[35842]},6:{sizeFunc:u,glFormat:[36196]},7:{sizeFunc:u,glFormat:[33776,35916]},8:{sizeFunc:h,glFormat:[33777,35917]},9:{sizeFunc:h,glFormat:[33778,35918]},11:{sizeFunc:h,glFormat:[33779,35919]},14:{sizeFunc:y,glFormat:[36494,36495]},15:{sizeFunc:y,glFormat:[36492,36493]},22:{sizeFunc:u,glFormat:[37492,37493]},23:{sizeFunc:h,glFormat:[37496,37497]},24:{sizeFunc:u,glFormat:[37494,37495]},25:{sizeFunc:u,glFormat:[37488]},26:{sizeFunc:h,glFormat:[37490]},27:{sizeFunc:h,glFormat:[37808,37840]},28:{sizeFunc:l,glFormat:[37809,37841]},29:{sizeFunc:n,glFormat:[37810,37842]},30:{sizeFunc:o,glFormat:[37811,37843]},31:{sizeFunc:f,glFormat:[37812,37844]},32:{sizeFunc:r,glFormat:[37813,37845]},33:{sizeFunc:d,glFormat:[37814,37846]},34:{sizeFunc:p,glFormat:[37815,37847]},35:{sizeFunc:v,glFormat:[37816,37848]},36:{sizeFunc:g,glFormat:[37817,37849]},37:{sizeFunc:m,glFormat:[37818,37850]},38:{sizeFunc:T,glFormat:[37819,37851]},39:{sizeFunc:P,glFormat:[37820,37852]},40:{sizeFunc:M,glFormat:[37821,37853]}},R=function(A){for(var D=new Uint32Array(A,0,13),G=D[0],F=G===55727696,B=F?D[2]:D[3],N=D[4],z=b[B].glFormat[N],$=b[B].sizeFunc,Q=D[11],Z=D[7],tt=D[6],H=52+D[12],J=new Uint8Array(A,H),Y=new Array(Q),_=0,U=Z,et=tt,nt=0;nt<Q;nt++){var rt=$(U,et);Y[nt]={data:new Uint8Array(J.buffer,J.byteOffset+_,rt),width:U,height:et},U=Math.max(1,U>>1),et=Math.max(1,et>>1),_+=rt}return{mipmaps:Y,width:Z,height:tt,internalFormat:z,compressed:!0,generateMipmap:!1}};S.exports=R},75549:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(95540),y=function(u,h,l,n,o,f,r){var d=c(r,"frameWidth",null),p=c(r,"frameHeight",d);if(d===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var v=u.source[h];u.add("__BASE",h,0,0,v.width,v.height);var g=c(r,"startFrame",0),m=c(r,"endFrame",-1),T=c(r,"margin",0),P=c(r,"spacing",0),M=Math.floor((o-T+P)/(d+P)),b=Math.floor((f-T+P)/(p+P)),R=M*b;R===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",u.key),(g>R||g<-R)&&(g=0),g<0&&(g=R+g),(m===-1||m>R||m<g)&&(m=R);for(var A=T,D=T,G=0,F=0,B=0,N=0;N<R;N++){G=0,F=0;var z=A+d,$=D+p;z>o&&(G=z-o),$>f&&(F=$-f),N>=g&&N<=m&&(u.add(B,h,l+A,n+D,d-G,p-F),B++),A+=d+P,A+d>o&&(A=T,D+=p+P)}return u};S.exports=y},47534:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(95540),y=function(u,h,l){var n=c(l,"frameWidth",null),o=c(l,"frameHeight",n);if(!n)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var f=u.source[0];u.add("__BASE",0,0,0,f.width,f.height),c(l,"startFrame",0),c(l,"endFrame",-1);for(var r=c(l,"margin",0),d=c(l,"spacing",0),p=h.cutX,v=h.cutY,g=h.cutWidth,m=h.cutHeight,T=h.realWidth,P=h.realHeight,M=Math.floor((T-r+d)/(n+d)),b=Math.floor((P-r+d)/(o+d)),R=h.x,A=n-R,D=n-(T-g-R),G=h.y,F=o-G,B=o-(P-m-G),N,z=r,$=r,Q=0,Z=0,tt=0;tt<b;tt++){for(var H=tt===0,J=tt===b-1,Y=0;Y<M;Y++){var _=Y===0,U=Y===M-1;if(N=u.add(Q,Z,p+z,v+$,n,o),_||H||U||J){var et=_?R:0,nt=H?G:0,rt=0,ot=0;_&&(rt+=n-A),U&&(rt+=n-D),H&&(ot+=o-F),J&&(ot+=o-B);var dt=n-rt,vt=o-ot;N.cutWidth=dt,N.cutHeight=vt,N.setTrim(n,o,et,nt,dt,vt)}z+=d,_?z+=A:U?z+=D:z+=n,Q++}z=r,$+=d,H?$+=F:J?$+=B:$+=o}return u};S.exports=y},86147:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=0,s=function(y,u,h,l){var n=w-l.y-l.height;y.add(h,u,l.x,n,l.width,l.height)},c=function(y,u,h){var l=y.source[u];y.add("__BASE",u,0,0,l.width,l.height),w=l.height;for(var n=h.split(`
`),o=/^[ ]*(- )*(\w+)+[: ]+(.*)/,f="",r="",d={x:0,y:0,width:0,height:0},p=0;p<n.length;p++){var v=n[p].match(o);if(v){var g=v[1]==="- ",m=v[2],T=v[3];if(g&&(r!==f&&(s(y,u,r,d),f=r),d={x:0,y:0,width:0,height:0}),m==="name"){r=T;continue}switch(m){case"x":case"y":case"width":case"height":d[m]=parseInt(T,10);break}}}return r!==f&&s(y,u,r,d),y};S.exports=c},55222:(S,w,s)=>{/**
 * @author       Ben Richards <benjamindrichards@gmail.com>
 * @copyright    2024 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(50030),y=function(f){for(var r=f.mipmaps,d=1;d<r.length;d++){var p=r[d].width,v=r[d].height;if(!c(p,v))return console.warn("Mip level "+d+" is not a power-of-two size: "+p+"x"+v),!1}var g=o[f.internalFormat];return g?g(f):(console.warn("No format checker found for internal format "+f.internalFormat+". Assuming valid."),!0)};function u(f){for(var r=f.mipmaps,d=0;d<r.length;d++){var p=r[d].width,v=r[d].height;if((p<<d)%4!==0||(v<<d)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+d+" is "+p+"x"+v),!1}return!0}function h(){return!0}function l(f){var r=f.mipmaps,d=r[0];return c(d.width,d.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+d.width+"x"+d.height),!1)}function n(f){var r=f.mipmaps,d=r[0];return d.width%4!==0||d.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+d.width+"x"+d.height+" pixels"),!1):!0}var o={37488:h,37489:h,37490:h,37491:h,37492:h,37493:h,37494:h,37495:h,37496:h,37497:h,36196:h,37808:h,37809:h,37810:h,37811:h,37812:h,37813:h,37814:h,37815:h,37816:h,37817:h,37818:h,37819:h,37820:h,37821:h,37840:h,37841:h,37842:h,37843:h,37844:h,37845:h,37846:h,37847:h,37848:h,37849:h,37850:h,37851:h,37852:h,37853:h,36492:u,36493:u,36494:u,36495:u,36283:u,36284:u,36285:u,36286:u,35840:l,35841:l,35842:l,35843:l,33776:u,33777:u,33778:u,33779:u,35916:n,35917:n,35918:n,35919:n};S.exports=y},61309:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={AtlasXML:s(89905),Canvas:s(72893),Image:s(4832),JSONArray:s(78566),JSONHash:s(39711),KTXParser:s(31403),PVRParser:s(82038),SpriteSheet:s(75549),SpriteSheetFromAtlas:s(47534),UnityYAML:s(86147)}},80341:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},16536:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h,l,n,o,f,r,d){(n===void 0||n<=0)&&(n=32),(o===void 0||o<=0)&&(o=32),f===void 0&&(f=0),r===void 0&&(r=0),this.name=h,this.firstgid=l|0,this.imageWidth=n|0,this.imageHeight=o|0,this.imageMargin=f|0,this.imageSpacing=r|0,this.properties=d||{},this.images=[],this.total=0},containsImageIndex:function(u){return u>=this.firstgid&&u<this.firstgid+this.total},addImage:function(u,h,l,n){return this.images.push({gid:u,image:h,width:l,height:n}),this.total++,this}});S.exports=y},27462:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=new c({initialize:function(h){if(this.gids=[],h!==void 0)for(var l=0;l<h.length;++l)for(var n=h[l],o=0;o<n.total;++o)this.gids[n.firstgid+o]=n;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(u){this.gids=u?this._gids:void 0}},getTypeIncludingTile:function(u){if(u.type!==void 0&&u.type!=="")return u.type;if(!(!this.gids||u.gid===void 0)){var h=this.gids[u.gid];if(h){var l=h.getTileData(u.gid);if(l)return l.type}}},setTextureAndFrame:function(u,h,l,n){if(h===null&&this.gids&&n.gid!==void 0){var o=this.gids[n.gid];o&&(h===null&&o.image!==void 0&&(h=o.image.key),l===null&&(l=n.gid-o.firstgid),u.scene.textures.getFrame(h,l)||(h=null,l=null))}u.setTexture(h,l)},setPropertiesFromTiledObject:function(u,h){if(this.gids!==void 0&&h.gid!==void 0){var l=this.gids[h.gid];l!==void 0&&this.setFromJSON(u,l.getTileProperties(h.gid))}this.setFromJSON(u,h.properties)},setFromJSON:function(u,h){if(h){if(Array.isArray(h)){for(var l=0;l<h.length;l++){var n=h[l];u[n.name]!==void 0?u[n.name]=n.value:u.setData(n.name,n.value)}return}for(var o in h)u[o]!==void 0?u[o]=h[o]:u.setData(o,h[o])}}});S.exports=y},31989:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(80341),y=s(87010),u=s(46177),h=s(49075),l=function(n,o,f,r,d,p,v,g){f===void 0&&(f=32),r===void 0&&(r=32),d===void 0&&(d=10),p===void 0&&(p=10),g===void 0&&(g=!1);var m=null;if(Array.isArray(v)){var T=o!==void 0?o:"map";m=u(T,c.ARRAY_2D,v,f,r,g)}else if(o!==void 0){var P=n.cache.tilemap.get(o);P?m=u(o,P.format,P.data,f,r,g):console.warn("No map data found for key "+o)}return m===null&&(m=new y({tileWidth:f,tileHeight:r,width:d,height:p})),new h(n,m)};S.exports=l},23029:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(31401),u=s(91907),h=s(62644),l=s(93232),n=new c({Mixins:[y.AlphaSingle,y.Flip,y.Visible],initialize:function(f,r,d,p,v,g,m,T){this.layer=f,this.index=r,this.x=d,this.y=p,this.width=v,this.height=g,this.right,this.bottom,this.baseWidth=m!==void 0?m:v,this.baseHeight=T!==void 0?T:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(o,f){return!(o<this.pixelX||f<this.pixelY||o>this.right||f>this.bottom)},copy:function(o){return this.index=o.index,this.alpha=o.alpha,this.properties=h(o.properties),this.visible=o.visible,this.setFlip(o.flipX,o.flipY),this.tint=o.tint,this.rotation=o.rotation,this.collideUp=o.collideUp,this.collideDown=o.collideDown,this.collideLeft=o.collideLeft,this.collideRight=o.collideRight,this.collisionCallback=o.collisionCallback,this.collisionCallbackContext=o.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(o){var f=this.tilemapLayer;if(f){var r=f.tileToWorldXY(this.x,this.y,void 0,o);return r.x}return this.x*this.baseWidth},getRight:function(o){var f=this.tilemapLayer;return f?this.getLeft(o)+this.width*f.scaleX:this.getLeft(o)+this.width},getTop:function(o){var f=this.tilemapLayer;if(f){var r=f.tileToWorldXY(this.x,this.y,void 0,o);return r.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(o){var f=this.tilemapLayer;return f?this.getTop(o)+this.height*f.scaleY:this.getTop(o)+this.height},getBounds:function(o,f){return f===void 0&&(f=new l),f.x=this.getLeft(o),f.y=this.getTop(o),f.width=this.getRight(o)-f.x,f.height=this.getBottom(o)-f.y,f},getCenterX:function(o){return(this.getLeft(o)+this.getRight(o))/2},getCenterY:function(o){return(this.getTop(o)+this.getBottom(o))/2},intersects:function(o,f,r,d){return!(r<=this.pixelX||d<=this.pixelY||o>=this.right||f>=this.bottom)},isInteresting:function(o,f){return o&&f?this.canCollide||this.hasInterestingFace:o?this.collides:f?this.hasInterestingFace:!1},resetCollision:function(o){if(o===void 0&&(o=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,o){var f=this.tilemapLayer;f&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(o,f,r,d,p){if(f===void 0&&(f=o),r===void 0&&(r=o),d===void 0&&(d=o),p===void 0&&(p=!0),this.collideLeft=o,this.collideRight=f,this.collideUp=r,this.collideDown=d,this.faceLeft=o,this.faceRight=f,this.faceTop=r,this.faceBottom=d,p){var v=this.tilemapLayer;v&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(o,f){return o===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=o,this.collisionCallbackContext=f),this},setSize:function(o,f,r,d){return o!==void 0&&(this.width=o),f!==void 0&&(this.height=f),r!==void 0&&(this.baseWidth=r),d!==void 0&&(this.baseHeight=d),this.updatePixelXY(),this},updatePixelXY:function(){var o=this.layer.orientation;if(o===u.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(o===u.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(o===u.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(o===u.HEXAGONAL){var f=this.layer.staggerAxis,r=this.layer.staggerIndex,d=this.layer.hexSideLength,p,v;f==="y"?(v=(this.baseHeight-d)/2+d,r==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*v):f==="x"&&(p=(this.baseWidth-d)/2+d,this.pixelX=this.x*p,r==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var o=this.layer.tilemapLayer;if(o){var f=o.gidMap[this.index];if(f)return f}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var o=this.tilemapLayer;return o?o.tilemap:null}}});S.exports=n},49075:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(84101),y=s(83419),u=s(39506),h=s(80341),l=s(95540),n=s(14977),o=s(27462),f=s(91907),r=s(36305),d=s(19133),p=s(68287),v=s(23029),g=s(81086),m=s(20442),T=s(33629),P=new y({initialize:function(b,R){this.scene=b,this.tileWidth=R.tileWidth,this.tileHeight=R.tileHeight,this.width=R.width,this.height=R.height,this.orientation=R.orientation,this.renderOrder=R.renderOrder,this.format=R.format,this.version=R.version,this.properties=R.properties,this.widthInPixels=R.widthInPixels,this.heightInPixels=R.heightInPixels,this.imageCollections=R.imageCollections,this.images=R.images,this.layers=R.layers,this.tiles=R.tiles,this.tilesets=R.tilesets,this.objects=R.objects,this.currentLayerIndex=0,this.hexSideLength=R.hexSideLength;var A=this.orientation;this._convert={WorldToTileXY:g.GetWorldToTileXYFunction(A),WorldToTileX:g.GetWorldToTileXFunction(A),WorldToTileY:g.GetWorldToTileYFunction(A),TileToWorldXY:g.GetTileToWorldXYFunction(A),TileToWorldX:g.GetTileToWorldXFunction(A),TileToWorldY:g.GetTileToWorldYFunction(A),GetTileCorners:g.GetTileCornersFunction(A)}},setRenderOrder:function(M){var b=["right-down","left-down","right-up","left-up"];return typeof M=="number"&&(M=b[M]),b.indexOf(M)>-1&&(this.renderOrder=M),this},addTilesetImage:function(M,b,R,A,D,G,F,B){if(M===void 0)return null;b==null&&(b=M);var N=this.scene.sys.textures;if(!N.exists(b))return console.warn('Texture key "%s" not found',b),null;var z=N.get(b),$=this.getTilesetIndex(M);if($===null&&this.format===h.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',M,this.tilesets),null;var Q=this.tilesets[$];return Q?((R||A)&&Q.setTileSize(R,A),(D||G)&&Q.setSpacing(D,G),Q.setImage(z),Q):(R===void 0&&(R=this.tileWidth),A===void 0&&(A=this.tileHeight),D===void 0&&(D=0),G===void 0&&(G=0),F===void 0&&(F=0),B===void 0&&(B={x:0,y:0}),Q=new T(M,F,R,A,D,G,void 0,void 0,B),Q.setImage(z),this.tilesets.push(Q),this.tiles=c(this),Q)},copy:function(M,b,R,A,D,G,F,B){return B=this.getLayer(B),B!==null?(g.Copy(M,b,R,A,D,G,F,B),this):null},createBlankLayer:function(M,b,R,A,D,G,F,B){R===void 0&&(R=0),A===void 0&&(A=0),D===void 0&&(D=this.width),G===void 0&&(G=this.height),F===void 0&&(F=this.tileWidth),B===void 0&&(B=this.tileHeight);var N=this.getLayerIndex(M);if(N!==null)return console.warn("Invalid Tilemap Layer ID: "+M),null;for(var z=new n({name:M,tileWidth:F,tileHeight:B,width:D,height:G,orientation:this.orientation,hexSideLength:this.hexSideLength}),$,Q=0;Q<G;Q++){$=[];for(var Z=0;Z<D;Z++)$.push(new v(z,-1,Z,Q,F,B,this.tileWidth,this.tileHeight));z.data.push($)}this.layers.push(z),this.currentLayerIndex=this.layers.length-1;var tt=new m(this.scene,this,this.currentLayerIndex,b,R,A);return tt.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(tt),tt},createLayer:function(M,b,R,A){var D=this.getLayerIndex(M);if(D===null)return console.warn("Invalid Tilemap Layer ID: "+M),typeof M=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var G=this.layers[D];if(G.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+M),null;this.currentLayerIndex=D,R===void 0&&(R=G.x),A===void 0&&(A=G.y);var F=new m(this.scene,this,D,b,R,A);return F.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(F),F},createFromObjects:function(M,b,R){R===void 0&&(R=!0);var A=[],D=this.getObjectLayer(M);if(!D)return console.warn("createFromObjects: Invalid objectLayerName given: "+M),A;var G=new o(R?this.tilesets:void 0);Array.isArray(b)||(b=[b]);for(var F=D.objects,B=0;B<b.length;B++){var N=b[B],z=l(N,"id",null),$=l(N,"gid",null),Q=l(N,"name",null),Z=l(N,"type",null);G.enabled=!l(N,"ignoreTileset",null);for(var tt,H=[],J=0;J<F.length;J++)tt=F[J],(z===null&&$===null&&Q===null&&Z===null||z!==null&&tt.id===z||$!==null&&tt.gid===$||Q!==null&&tt.name===Q||Z!==null&&G.getTypeIncludingTile(tt)===Z)&&H.push(tt);for(var Y=l(N,"classType",p),_=l(N,"scene",this.scene),U=l(N,"container",null),et=l(N,"key",null),nt=l(N,"frame",null),rt=0;rt<H.length;rt++){tt=H[rt];var ot=new Y(_);if(ot.setName(tt.name),ot.setPosition(tt.x,tt.y),G.setTextureAndFrame(ot,et,nt,tt),tt.width&&(ot.displayWidth=tt.width),tt.height&&(ot.displayHeight=tt.height),this.orientation===f.ISOMETRIC){var dt=this.tileWidth/this.tileHeight,vt={x:ot.x-ot.y,y:(ot.x+ot.y)/dt};ot.x=vt.x,ot.y=vt.y}var mt={x:ot.originX*tt.width,y:(ot.originY-(tt.gid?1:0))*tt.height};if(tt.rotation){var gt=u(tt.rotation);r(mt,gt),ot.rotation=gt}ot.x+=mt.x,ot.y+=mt.y,(tt.flippedHorizontal!==void 0||tt.flippedVertical!==void 0)&&ot.setFlip(tt.flippedHorizontal,tt.flippedVertical),tt.visible||(ot.visible=!1),G.setPropertiesFromTiledObject(ot,tt),U?U.add(ot):_.add.existing(ot),A.push(ot)}}return A},createFromTiles:function(M,b,R,A,D,G){return G=this.getLayer(G),G===null?null:g.CreateFromTiles(M,b,R,A,D,G)},fill:function(M,b,R,A,D,G,F){return G===void 0&&(G=!0),F=this.getLayer(F),F===null?null:(g.Fill(M,b,R,A,D,G,F),this)},filterObjects:function(M,b,R){if(typeof M=="string"){var A=M;if(M=this.getObjectLayer(M),!M)return console.warn("No object layer found with the name: "+A),null}return M.objects.filter(b,R)},filterTiles:function(M,b,R,A,D,G,F,B){return B=this.getLayer(B),B===null?null:g.FilterTiles(M,b,R,A,D,G,F,B)},findByIndex:function(M,b,R,A){return A=this.getLayer(A),A===null?null:g.FindByIndex(M,b,R,A)},findObject:function(M,b,R){if(typeof M=="string"){var A=M;if(M=this.getObjectLayer(M),!M)return console.warn("No object layer found with the name: "+A),null}return M.objects.find(b,R)||null},findTile:function(M,b,R,A,D,G,F,B){return B=this.getLayer(B),B===null?null:g.FindTile(M,b,R,A,D,G,F,B)},forEachTile:function(M,b,R,A,D,G,F,B){return B=this.getLayer(B),B===null?null:(g.ForEachTile(M,b,R,A,D,G,F,B),this)},getImageIndex:function(M){return this.getIndex(this.images,M)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(M){return M.name})},getIndex:function(M,b){for(var R=0;R<M.length;R++)if(M[R].name===b)return R;return null},getLayer:function(M){var b=this.getLayerIndex(M);return b!==null?this.layers[b]:null},getObjectLayer:function(M){var b=this.getIndex(this.objects,M);return b!==null?this.objects[b]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(M){return M.name})},getLayerIndex:function(M){return M===void 0?this.currentLayerIndex:typeof M=="string"?this.getLayerIndexByName(M):typeof M=="number"&&M<this.layers.length?M:M instanceof m&&M.tilemap===this?M.layerIndex:null},getLayerIndexByName:function(M){return this.getIndex(this.layers,M)},getTileAt:function(M,b,R,A){return A=this.getLayer(A),A===null?null:g.GetTileAt(M,b,R,A)},getTileAtWorldXY:function(M,b,R,A,D){return D=this.getLayer(D),D===null?null:g.GetTileAtWorldXY(M,b,R,A,D)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(M){return M.name})},getTilesWithin:function(M,b,R,A,D,G){return G=this.getLayer(G),G===null?null:g.GetTilesWithin(M,b,R,A,D,G)},getTilesWithinShape:function(M,b,R,A){return A=this.getLayer(A),A===null?null:g.GetTilesWithinShape(M,b,R,A)},getTilesWithinWorldXY:function(M,b,R,A,D,G,F){return F=this.getLayer(F),F===null?null:g.GetTilesWithinWorldXY(M,b,R,A,D,G,F)},getTileset:function(M){var b=this.getIndex(this.tilesets,M);return b!==null?this.tilesets[b]:null},getTilesetIndex:function(M){return this.getIndex(this.tilesets,M)},hasTileAt:function(M,b,R){return R=this.getLayer(R),R===null?null:g.HasTileAt(M,b,R)},hasTileAtWorldXY:function(M,b,R,A){return A=this.getLayer(A),A===null?null:g.HasTileAtWorldXY(M,b,R,A)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(M){this.setLayer(M)}},putTileAt:function(M,b,R,A,D){return A===void 0&&(A=!0),D=this.getLayer(D),D===null?null:g.PutTileAt(M,b,R,A,D)},putTileAtWorldXY:function(M,b,R,A,D,G){return A===void 0&&(A=!0),G=this.getLayer(G),G===null?null:g.PutTileAtWorldXY(M,b,R,A,D,G)},putTilesAt:function(M,b,R,A,D){return A===void 0&&(A=!0),D=this.getLayer(D),D===null?null:(g.PutTilesAt(M,b,R,A,D),this)},randomize:function(M,b,R,A,D,G){return G=this.getLayer(G),G===null?null:(g.Randomize(M,b,R,A,D,G),this)},calculateFacesAt:function(M,b,R){return R=this.getLayer(R),R===null?null:(g.CalculateFacesAt(M,b,R),this)},calculateFacesWithin:function(M,b,R,A,D){return D=this.getLayer(D),D===null?null:(g.CalculateFacesWithin(M,b,R,A,D),this)},removeLayer:function(M){var b=this.getLayerIndex(M);if(b!==null){d(this.layers,b);for(var R=b;R<this.layers.length;R++)this.layers[R].tilemapLayer&&this.layers[R].tilemapLayer.layerIndex--;return this.currentLayerIndex===b&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(M){var b=this.getLayerIndex(M);return b!==null?(M=this.layers[b],M.tilemapLayer.destroy(),d(this.layers,b),this.currentLayerIndex===b&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var M=this.layers,b=0;b<M.length;b++)M[b].tilemapLayer&&M[b].tilemapLayer.destroy(!1);return M.length=0,this.currentLayerIndex=0,this},removeTile:function(M,b,R){b===void 0&&(b=-1),R===void 0&&(R=!0);var A=[];Array.isArray(M)||(M=[M]);for(var D=0;D<M.length;D++){var G=M[D];A.push(this.removeTileAt(G.x,G.y,!0,R,G.tilemapLayer)),b>-1&&this.putTileAt(b,G.x,G.y,R,G.tilemapLayer)}return A},removeTileAt:function(M,b,R,A,D){return R===void 0&&(R=!0),A===void 0&&(A=!0),D=this.getLayer(D),D===null?null:g.RemoveTileAt(M,b,R,A,D)},removeTileAtWorldXY:function(M,b,R,A,D,G){return R===void 0&&(R=!0),A===void 0&&(A=!0),G=this.getLayer(G),G===null?null:g.RemoveTileAtWorldXY(M,b,R,A,D,G)},renderDebug:function(M,b,R){return R=this.getLayer(R),R===null?null:(this.orientation===f.ORTHOGONAL&&g.RenderDebug(M,b,R),this)},renderDebugFull:function(M,b){for(var R=this.layers,A=0;A<R.length;A++)g.RenderDebug(M,b,R[A]);return this},replaceByIndex:function(M,b,R,A,D,G,F){return F=this.getLayer(F),F===null?null:(g.ReplaceByIndex(M,b,R,A,D,G,F),this)},setCollision:function(M,b,R,A,D){return b===void 0&&(b=!0),R===void 0&&(R=!0),D===void 0&&(D=!0),A=this.getLayer(A),A===null?null:(g.SetCollision(M,b,R,A,D),this)},setCollisionBetween:function(M,b,R,A,D){return R===void 0&&(R=!0),A===void 0&&(A=!0),D=this.getLayer(D),D===null?null:(g.SetCollisionBetween(M,b,R,A,D),this)},setCollisionByProperty:function(M,b,R,A){return b===void 0&&(b=!0),R===void 0&&(R=!0),A=this.getLayer(A),A===null?null:(g.SetCollisionByProperty(M,b,R,A),this)},setCollisionByExclusion:function(M,b,R,A){return b===void 0&&(b=!0),R===void 0&&(R=!0),A=this.getLayer(A),A===null?null:(g.SetCollisionByExclusion(M,b,R,A),this)},setCollisionFromCollisionGroup:function(M,b,R){return M===void 0&&(M=!0),b===void 0&&(b=!0),R=this.getLayer(R),R===null?null:(g.SetCollisionFromCollisionGroup(M,b,R),this)},setTileIndexCallback:function(M,b,R,A){return A=this.getLayer(A),A===null?null:(g.SetTileIndexCallback(M,b,R,A),this)},setTileLocationCallback:function(M,b,R,A,D,G,F){return F=this.getLayer(F),F===null?null:(g.SetTileLocationCallback(M,b,R,A,D,G,F),this)},setLayer:function(M){var b=this.getLayerIndex(M);return b!==null&&(this.currentLayerIndex=b),this},setBaseTileSize:function(M,b){this.tileWidth=M,this.tileHeight=b,this.widthInPixels=this.width*M,this.heightInPixels=this.height*b;for(var R=0;R<this.layers.length;R++){this.layers[R].baseTileWidth=M,this.layers[R].baseTileHeight=b;for(var A=this.layers[R].data,D=this.layers[R].width,G=this.layers[R].height,F=0;F<G;F++)for(var B=0;B<D;B++){var N=A[F][B];N!==null&&N.setSize(void 0,void 0,M,b)}}return this},setLayerTileSize:function(M,b,R){if(R=this.getLayer(R),R===null)return this;R.tileWidth=M,R.tileHeight=b;for(var A=R.data,D=R.width,G=R.height,F=0;F<G;F++)for(var B=0;B<D;B++){var N=A[F][B];N!==null&&N.setSize(M,b)}return this},shuffle:function(M,b,R,A,D){return D=this.getLayer(D),D===null?null:(g.Shuffle(M,b,R,A,D),this)},swapByIndex:function(M,b,R,A,D,G,F){return F=this.getLayer(F),F===null?null:(g.SwapByIndex(M,b,R,A,D,G,F),this)},tileToWorldX:function(M,b,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldX(M,b,R)},tileToWorldY:function(M,b,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldY(M,b,R)},tileToWorldXY:function(M,b,R,A,D){return D=this.getLayer(D),D===null?null:this._convert.TileToWorldXY(M,b,R,A,D)},getTileCorners:function(M,b,R,A){return A=this.getLayer(A),A===null?null:this._convert.GetTileCorners(M,b,R,A)},weightedRandomize:function(M,b,R,A,D,G){return G=this.getLayer(G),G===null?null:(g.WeightedRandomize(b,R,A,D,M,G),this)},worldToTileX:function(M,b,R,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileX(M,b,R,A)},worldToTileY:function(M,b,R,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileY(M,b,R,A)},worldToTileXY:function(M,b,R,A,D,G){return G=this.getLayer(G),G===null?null:this._convert.WorldToTileXY(M,b,R,A,D,G)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});S.exports=P},45939:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(44603),y=s(31989);c.register("tilemap",function(u){var h=u!==void 0?u:{};return y(this.scene,h.key,h.tileWidth,h.tileHeight,h.width,h.height,h.data,h.insertNull)})},46029:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(39429),y=s(31989);c.register("tilemap",function(u,h,l,n,o,f,r){return u===null&&(u=void 0),h===null&&(h=void 0),l===null&&(l=void 0),n===null&&(n=void 0),o===null&&(o=void 0),y(this.scene,u,h,l,n,o,f,r)})},20442:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(78389),u=s(31401),h=s(95643),l=s(81086),n=s(19218),o=s(26099),f=new c({Extends:h,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.Transform,u.Visible,u.ScrollFactor,y,n],initialize:function(d,p,v,g,m,T){h.call(this,d,"TilemapLayer"),this.isTilemap=!0,this.tilemap=p,this.layerIndex=v,this.layer=p.layers[v],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=l.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new o,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(g),this.setAlpha(this.layer.alpha),this.setPosition(m,T),this.setOrigin(0,0),this.setSize(p.tileWidth*this.layer.width,p.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(r){var d=[],p=[],v=this.tilemap;Array.isArray(r)||(r=[r]);for(var g=0;g<r.length;g++){var m=r[g];if(typeof m=="string"&&(m=v.getTileset(m)),m){p.push(m);for(var T=m.firstgid,P=0;P<m.total;P++)d[T+P]=m}}this.gidMap=d,this.tileset=p},setRenderOrder:function(r){var d=["right-down","left-down","right-up","left-up"];return typeof r=="string"&&(r=d.indexOf(r)),r>=0&&r<4&&(this._renderOrder=r),this},calculateFacesAt:function(r,d){return l.CalculateFacesAt(r,d,this.layer),this},calculateFacesWithin:function(r,d,p,v){return l.CalculateFacesWithin(r,d,p,v,this.layer),this},createFromTiles:function(r,d,p,v,g){return l.CreateFromTiles(r,d,p,v,g,this.layer)},cull:function(r){return this.cullCallback(this.layer,r,this.culledTiles,this._renderOrder)},copy:function(r,d,p,v,g,m,T){return l.Copy(r,d,p,v,g,m,T,this.layer),this},fill:function(r,d,p,v,g,m){return l.Fill(r,d,p,v,g,m,this.layer),this},filterTiles:function(r,d,p,v,g,m,T){return l.FilterTiles(r,d,p,v,g,m,T,this.layer)},findByIndex:function(r,d,p){return l.FindByIndex(r,d,p,this.layer)},findTile:function(r,d,p,v,g,m,T){return l.FindTile(r,d,p,v,g,m,T,this.layer)},forEachTile:function(r,d,p,v,g,m,T){return l.ForEachTile(r,d,p,v,g,m,T,this.layer),this},setTint:function(r,d,p,v,g,m){r===void 0&&(r=16777215);var T=function(P){P.tint=r,P.tintFill=!1};return this.forEachTile(T,this,d,p,v,g,m)},setTintFill:function(r,d,p,v,g,m){r===void 0&&(r=16777215);var T=function(P){P.tint=r,P.tintFill=!0};return this.forEachTile(T,this,d,p,v,g,m)},getTileAt:function(r,d,p){return l.GetTileAt(r,d,p,this.layer)},getTileAtWorldXY:function(r,d,p,v){return l.GetTileAtWorldXY(r,d,p,v,this.layer)},getIsoTileAtWorldXY:function(r,d,p,v,g){p===void 0&&(p=!0);var m=this.tempVec;return l.IsometricWorldToTileXY(r,d,!0,m,g,this.layer,p),this.getTileAt(m.x,m.y,v)},getTilesWithin:function(r,d,p,v,g){return l.GetTilesWithin(r,d,p,v,g,this.layer)},getTilesWithinShape:function(r,d,p){return l.GetTilesWithinShape(r,d,p,this.layer)},getTilesWithinWorldXY:function(r,d,p,v,g,m){return l.GetTilesWithinWorldXY(r,d,p,v,g,m,this.layer)},hasTileAt:function(r,d){return l.HasTileAt(r,d,this.layer)},hasTileAtWorldXY:function(r,d,p){return l.HasTileAtWorldXY(r,d,p,this.layer)},putTileAt:function(r,d,p,v){return l.PutTileAt(r,d,p,v,this.layer)},putTileAtWorldXY:function(r,d,p,v,g){return l.PutTileAtWorldXY(r,d,p,v,g,this.layer)},putTilesAt:function(r,d,p,v){return l.PutTilesAt(r,d,p,v,this.layer),this},randomize:function(r,d,p,v,g){return l.Randomize(r,d,p,v,g,this.layer),this},removeTileAt:function(r,d,p,v){return l.RemoveTileAt(r,d,p,v,this.layer)},removeTileAtWorldXY:function(r,d,p,v,g){return l.RemoveTileAtWorldXY(r,d,p,v,g,this.layer)},renderDebug:function(r,d){return l.RenderDebug(r,d,this.layer),this},replaceByIndex:function(r,d,p,v,g,m){return l.ReplaceByIndex(r,d,p,v,g,m,this.layer),this},setSkipCull:function(r){return r===void 0&&(r=!0),this.skipCull=r,this},setCullPadding:function(r,d){return r===void 0&&(r=1),d===void 0&&(d=1),this.cullPaddingX=r,this.cullPaddingY=d,this},setCollision:function(r,d,p,v){return l.SetCollision(r,d,p,this.layer,v),this},setCollisionBetween:function(r,d,p,v){return l.SetCollisionBetween(r,d,p,v,this.layer),this},setCollisionByProperty:function(r,d,p){return l.SetCollisionByProperty(r,d,p,this.layer),this},setCollisionByExclusion:function(r,d,p){return l.SetCollisionByExclusion(r,d,p,this.layer),this},setCollisionFromCollisionGroup:function(r,d){return l.SetCollisionFromCollisionGroup(r,d,this.layer),this},setTileIndexCallback:function(r,d,p){return l.SetTileIndexCallback(r,d,p,this.layer),this},setTileLocationCallback:function(r,d,p,v,g,m){return l.SetTileLocationCallback(r,d,p,v,g,m,this.layer),this},shuffle:function(r,d,p,v){return l.Shuffle(r,d,p,v,this.layer),this},swapByIndex:function(r,d,p,v,g,m){return l.SwapByIndex(r,d,p,v,g,m,this.layer),this},tileToWorldX:function(r,d){return this.tilemap.tileToWorldX(r,d,this)},tileToWorldY:function(r,d){return this.tilemap.tileToWorldY(r,d,this)},tileToWorldXY:function(r,d,p,v){return this.tilemap.tileToWorldXY(r,d,p,v,this)},getTileCorners:function(r,d,p){return this.tilemap.getTileCorners(r,d,p,this)},weightedRandomize:function(r,d,p,v,g){return l.WeightedRandomize(d,p,v,g,r,this.layer),this},worldToTileX:function(r,d,p){return this.tilemap.worldToTileX(r,d,p,this)},worldToTileY:function(r,d,p){return this.tilemap.worldToTileY(r,d,p,this)},worldToTileXY:function(r,d,p,v,g){return this.tilemap.worldToTileXY(r,d,p,v,g,this)},destroy:function(r){r===void 0&&(r=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),r&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],h.prototype.destroy.call(this))}});S.exports=f},16153:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(61340),y=new c,u=new c,h=new c,l=function(n,o,f,r){var d=o.cull(f),p=d.length,v=f.alpha*o.alpha;if(!(p===0||v<=0)){var g=y,m=u,T=h;m.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),g.copyFrom(f.matrix);var P=n.currentContext,M=o.gidMap;P.save(),r?(g.multiplyWithOffset(r,-f.scrollX*o.scrollFactorX,-f.scrollY*o.scrollFactorY),m.e=o.x,m.f=o.y,g.multiply(m,T),T.copyToContext(P)):(m.e-=f.scrollX*o.scrollFactorX,m.f-=f.scrollY*o.scrollFactorY,m.copyToContext(P)),(!n.antialias||o.scaleX>1||o.scaleY>1)&&(P.imageSmoothingEnabled=!1);for(var b=0;b<p;b++){var R=d[b],A=M[R.index];if(A){var D=A.image.getSourceImage(),G=A.getTileTextureCoordinates(R.index),F=A.tileWidth,B=A.tileHeight;if(!(G===null||F===0||B===0)){var N=F*.5,z=B*.5;G.x+=A.tileOffset.x,G.y+=A.tileOffset.y,P.save(),P.translate(R.pixelX+N,R.pixelY+z),R.rotation!==0&&P.rotate(R.rotation),(R.flipX||R.flipY)&&P.scale(R.flipX?-1:1,R.flipY?-1:1),P.globalAlpha=v*R.alpha,P.drawImage(D,G.x,G.y,F,B,-N,-z,F,B),P.restore()}}}P.restore()}};S.exports=l},19218:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(29747),y=c,u=c;y=s(99558),u=s(16153),S.exports={renderWebGL:y,renderCanvas:u}},99558:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(70554),y=function(u,h,l){var n=h.cull(l),o=n.length,f=l.alpha*h.alpha;if(!(o===0||f<=0)){var r=h.gidMap,d=u.pipelines.set(h.pipeline,h),p=c.getTintAppendFloatAlpha,v=h.scrollFactorX,g=h.scrollFactorY,m=h.x,T=h.y,P=h.scaleX,M=h.scaleY;u.pipelines.preBatch(h);for(var b=0;b<o;b++){var R=n[b],A=r[R.index];if(A){var D=A.getTileTextureCoordinates(R.index),G=A.tileWidth,F=A.tileHeight;if(!(!D||G===0||F===0)){var B=G*.5,N=F*.5,z=A.glTexture,$=d.setTexture2D(z,h),Q=G,Z=F,tt=D.x,H=D.y,J=A.tileOffset.x,Y=A.tileOffset.y,_=p(R.tint,f*R.alpha);d.batchTexture(h,z,z.width,z.height,m+R.pixelX*P+(B*P-J),T+R.pixelY*M+(N*M-Y),G,F,P,M,R.rotation,R.flipX,R.flipY,v,g,B,N,tt,H,Q,Z,_,_,_,_,R.tintFill,0,0,l,null,!0,$,!0)}}}u.pipelines.postBatch(h)}};S.exports=y},33629:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(26099),u=new c({initialize:function(l,n,o,f,r,d,p,v,g){(o===void 0||o<=0)&&(o=32),(f===void 0||f<=0)&&(f=32),r===void 0&&(r=0),d===void 0&&(d=0),p===void 0&&(p={}),v===void 0&&(v={}),this.name=l,this.firstgid=n,this.tileWidth=o,this.tileHeight=f,this.tileMargin=r,this.tileSpacing=d,this.tileProperties=p,this.tileData=v,this.tileOffset=new y,g!==void 0&&this.tileOffset.set(g.x,g.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(h){return this.containsTileIndex(h)?this.tileProperties[h-this.firstgid]:null},getTileData:function(h){return this.containsTileIndex(h)?this.tileData[h-this.firstgid]:null},getTileCollisionGroup:function(h){var l=this.getTileData(h);return l&&l.objectgroup?l.objectgroup:null},containsTileIndex:function(h){return h>=this.firstgid&&h<this.firstgid+this.total},getTileTextureCoordinates:function(h){return this.containsTileIndex(h)?this.texCoordinates[h-this.firstgid]:null},setImage:function(h){this.image=h;var l=h.get(),n=h.getFrameBounds();return this.glTexture=l.source.glTexture,l.width>n.width||l.height>n.height?this.updateTileData(l.width,l.height):this.updateTileData(n.width,n.height,n.x,n.y),this},setTileSize:function(h,l){return h!==void 0&&(this.tileWidth=h),l!==void 0&&(this.tileHeight=l),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(h,l){return h!==void 0&&(this.tileMargin=h),l!==void 0&&(this.tileSpacing=l),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(h,l,n,o){n===void 0&&(n=0),o===void 0&&(o=0);var f=(l-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(h-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(f%1!==0||r%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),f=Math.floor(f),r=Math.floor(r),this.rows=f,this.columns=r,this.total=f*r,this.texCoordinates.length=0;for(var d=this.tileMargin+n,p=this.tileMargin+o,v=0;v<this.rows;v++){for(var g=0;g<this.columns;g++)this.texCoordinates.push({x:d,y:p}),d+=this.tileWidth+this.tileSpacing;d=this.tileMargin+n,p+=this.tileHeight+this.tileSpacing}return this}});S.exports=u},72023:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7423),y=function(u,h,l){var n=c(u,h,!0,l),o=c(u,h-1,!0,l),f=c(u,h+1,!0,l),r=c(u-1,h,!0,l),d=c(u+1,h,!0,l),p=n&&n.collides;return p&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),o&&o.collides&&(p&&(n.faceTop=!1),o.faceBottom=!p),f&&f.collides&&(p&&(n.faceBottom=!1),f.faceTop=!p),r&&r.collides&&(p&&(n.faceLeft=!1),r.faceRight=!p),d&&d.collides&&(p&&(n.faceRight=!1),d.faceLeft=!p),n&&!n.collides&&n.resetFaces(),n};S.exports=y},42573:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7423),y=s(7386),u=function(h,l,n,o,f){for(var r=null,d=null,p=null,v=null,g=y(h,l,n,o,null,f),m=0;m<g.length;m++){var T=g[m];T&&(T.collides?(r=c(T.x,T.y-1,!0,f),d=c(T.x,T.y+1,!0,f),p=c(T.x-1,T.y,!0,f),v=c(T.x+1,T.y,!0,f),T.faceTop=!(r&&r.collides),T.faceBottom=!(d&&d.collides),T.faceLeft=!(p&&p.collides),T.faceRight=!(v&&v.collides)):T.resetFaces())}};S.exports=u},33528:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26099),y=new c,u=function(h,l,n,o){var f=n.tilemapLayer,r=f.cullPaddingX,d=f.cullPaddingY,p=f.tilemap.tileToWorldXY(h,l,y,o,f);return p.x>o.worldView.x+f.scaleX*n.tileWidth*(-r-.5)&&p.x<o.worldView.right+f.scaleX*n.tileWidth*(r-.5)&&p.y>o.worldView.y+f.scaleY*n.tileHeight*(-d-1)&&p.y<o.worldView.bottom+f.scaleY*n.tileHeight*(d-.5)};S.exports=u},1785:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(42573),y=s(7386),u=s(62991),h=s(23029),l=function(n,o,f,r,d,p,v,g){v===void 0&&(v=!0);var m=y(n,o,f,r,null,g),T=[];m.forEach(function(G){var F=new h(G.layer,G.index,G.x,G.y,G.width,G.height,G.baseWidth,G.baseHeight);F.copy(G),T.push(F)});for(var P=d-n,M=p-o,b=0;b<T.length;b++){var R=T[b],A=R.x+P,D=R.y+M;u(A,D,g)&&g.data[D][A]&&(R.x=A,R.y=D,R.updatePixelXY(),g.data[D][A]=R)}v&&c(d-1,p-1,f+2,r+2,g),m.length=0,T.length=0};S.exports=l},78419:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62644),y=s(7386),u=s(27987),h=function(l,n,o,f,r,d){o||(o={}),Array.isArray(l)||(l=[l]);var p=d.tilemapLayer;f||(f=p.scene),r||(r=f.cameras.main);var v=d.width,g=d.height,m=y(0,0,v,g,null,d),T=[],P,M=function(D,G,F){for(var B=0;B<F.length;B++){var N=F[B];D.hasOwnProperty(N)||(D[N]=G[N])}};for(P=0;P<m.length;P++){var b=m[P],R=c(o);if(l.indexOf(b.index)!==-1){var A=p.tileToWorldXY(b.x,b.y,void 0,r,d);R.x=A.x,R.y=A.y,M(R,b,["rotation","flipX","flipY","alpha","visible","tint"]),R.hasOwnProperty("origin")||(R.x+=b.width*.5,R.y+=b.height*.5),R.hasOwnProperty("useSpriteSheet")&&(R.key=b.tileset.image,R.frame=b.index-b.tileset.firstgid),T.push(f.make.sprite(R))}}if(Array.isArray(n))for(P=0;P<l.length;P++)u(l[P],n[P],0,0,v,g,d);else if(n!==null)for(P=0;P<l.length;P++)u(l[P],n,0,0,v,g,d);return T};S.exports=h},19545:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(87841),y=s(63448),u=s(56583),h=new c,l=function(n,o){var f=n.tilemapLayer.tilemap,r=n.tilemapLayer,d=Math.floor(f.tileWidth*r.scaleX),p=Math.floor(f.tileHeight*r.scaleY),v=u(o.worldView.x-r.x,d,0,!0)-r.cullPaddingX,g=y(o.worldView.right-r.x,d,0,!0)+r.cullPaddingX,m=u(o.worldView.y-r.y,p,0,!0)-r.cullPaddingY,T=y(o.worldView.bottom-r.y,p,0,!0)+r.cullPaddingY;return h.setTo(v,m,g-v,T-m)};S.exports=l},30003:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(19545),y=s(32483),u=function(h,l,n,o){n===void 0&&(n=[]),o===void 0&&(o=0),n.length=0;var f=h.tilemapLayer,r=c(h,l);return(f.skipCull||f.scrollFactorX!==1||f.scrollFactorY!==1)&&(r.left=0,r.right=h.width,r.top=0,r.bottom=h.height),y(h,r,o,n),n};S.exports=u},35137:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7386),y=s(42573),u=s(20576),h=function(l,n,o,f,r,d,p){for(var v=p.collideIndexes.indexOf(l)!==-1,g=c(n,o,f,r,null,p),m=0;m<g.length;m++)g[m].index=l,u(g[m],v);d&&y(n-1,o-1,f+2,r+2,p)};S.exports=h},40253:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7386),y=function(u,h,l,n,o,f,r,d){var p=c(l,n,o,f,r,d);return p.filter(u,h)};S.exports=y},52692:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){c===void 0&&(c=0),y===void 0&&(y=!1);var h=0,l,n,o;if(y){for(n=u.height-1;n>=0;n--)for(l=u.width-1;l>=0;l--)if(o=u.data[n][l],o&&o.index===s){if(h===c)return o;h+=1}}else for(n=0;n<u.height;n++)for(l=0;l<u.width;l++)if(o=u.data[n][l],o&&o.index===s){if(h===c)return o;h+=1}return null};S.exports=w},66151:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7386),y=function(u,h,l,n,o,f,r,d){var p=c(l,n,o,f,r,d);return p.find(u,h)||null};S.exports=y},97560:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7386),y=function(u,h,l,n,o,f,r,d){var p=c(l,n,o,f,r,d);p.forEach(u,h)};S.exports=y},43305:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91907),y=s(30003),u=s(9474),h=s(14018),l=s(29747),n=s(54503),o=function(f){return f===c.ORTHOGONAL?y:f===c.HEXAGONAL?u:f===c.STAGGERED?n:f===c.ISOMETRIC?h:l};S.exports=o},7423:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62991),y=function(u,h,l,n){if(c(u,h,n)){var o=n.data[h][u]||null;return o?o.index===-1?l?o:null:o:null}else return null};S.exports=y},60540:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7423),y=s(26099),u=new y,h=function(l,n,o,f,r){return r.tilemapLayer.worldToTileXY(l,n,!0,u,f),c(u.x,u.y,o,r)};S.exports=h},55826:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26099),y=function(u,h,l,n){var o=n.baseTileWidth,f=n.baseTileHeight,r=n.tilemapLayer,d=0,p=0;r&&(l||(l=r.scene.cameras.main),d=r.x+l.scrollX*(1-r.scrollFactorX),p=r.y+l.scrollY*(1-r.scrollFactorY),o*=r.scaleX,f*=r.scaleY);var v=d+u*o,g=p+h*f;return[new c(v,g),new c(v+o,g),new c(v+o,g+f),new c(v,g+f)]};S.exports=y},11758:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91907),y=s(27229),u=s(29747),h=s(55826),l=function(n){return n===c.ORTHOGONAL?h:n===c.ISOMETRIC?u:n===c.HEXAGONAL?y:(n===c.STAGGERED,u)};S.exports=l},39167:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91907),y=s(29747),u=s(97281),h=function(l){return l===c.ORTHOGONAL?u:y};S.exports=h},62e3:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91907),y=s(19951),u=s(14127),h=s(29747),l=s(97202),n=s(70326),o=function(f){return f===c.ORTHOGONAL?n:f===c.ISOMETRIC?u:f===c.HEXAGONAL?y:f===c.STAGGERED?l:h};S.exports=o},5984:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91907),y=s(29747),u=s(28054),h=s(29650),l=function(n){return n===c.ORTHOGONAL?h:n===c.STAGGERED?u:y};S.exports=l},7386:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(95540),y=function(u,h,l,n,o,f){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=f.width),n===void 0&&(n=f.height),o||(o={});var r=c(o,"isNotEmpty",!1),d=c(o,"isColliding",!1),p=c(o,"hasInterestingFace",!1);u<0&&(l+=u,u=0),h<0&&(n+=h,h=0),u+l>f.width&&(l=Math.max(f.width-u,0)),h+n>f.height&&(n=Math.max(f.height-h,0));for(var v=[],g=h;g<h+n;g++)for(var m=u;m<u+l;m++){var T=f.data[g][m];if(T!==null){if(r&&T.index===-1||d&&!T.collides||p&&!T.hasInterestingFace)continue;v.push(T)}}return v};S.exports=y},91141:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(55738),y=s(7386),u=s(91865),h=s(29747),l=s(26099),n=s(91907),o=function(v,g){return u.RectangleToTriangle(g,v)},f=new l,r=new l,d=new l,p=function(v,g,m,T){if(T.orientation!==n.ORTHOGONAL)return console.warn("GetTilesWithinShape only works with orthogonal tilemaps"),[];if(v===void 0)return[];var P=h;v instanceof c.Circle?P=u.CircleToRectangle:v instanceof c.Rectangle?P=u.RectangleToRectangle:v instanceof c.Triangle?P=o:v instanceof c.Line&&(P=u.LineToRectangle),T.tilemapLayer.worldToTileXY(v.left,v.top,!0,r,m);var M=r.x,b=r.y;T.tilemapLayer.worldToTileXY(v.right,v.bottom,!1,d,m);var R=Math.ceil(d.x),A=Math.ceil(d.y),D=Math.max(R-M,1),G=Math.max(A-b,1),F=y(M,b,D,G,g,T),B=T.tileWidth,N=T.tileHeight;T.tilemapLayer&&(B*=T.tilemapLayer.scaleX,N*=T.tilemapLayer.scaleY);for(var z=[],$=new c.Rectangle(0,0,B,N),Q=0;Q<F.length;Q++){var Z=F[Q];T.tilemapLayer.tileToWorldXY(Z.x,Z.y,f,m),$.x=f.x,$.y=f.y,P(v,$)&&z.push(Z)}return z};S.exports=p},96523:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7386),y=s(26099),u=new y,h=new y,l=function(n,o,f,r,d,p,v){var g=v.tilemapLayer.tilemap._convert.WorldToTileXY;g(n,o,!0,u,p,v);var m=u.x,T=u.y;g(n+f,o+r,!1,h,p,v);var P=Math.ceil(h.x),M=Math.ceil(h.y);return c(m,T,P-m,M-T,d,v)};S.exports=l},96113:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91907),y=s(20242),u=s(10095),h=function(l){return l===c.ORTHOGONAL?u:y};S.exports=h},16926:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91907),y=s(86625),u=s(96897),h=s(29747),l=s(15108),n=s(85896),o=function(f){return f===c.ORTHOGONAL?n:f===c.ISOMETRIC?u:f===c.HEXAGONAL?y:f===c.STAGGERED?l:h};S.exports=o},55762:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91907),y=s(20242),u=s(51900),h=s(63288),l=function(n){return n===c.ORTHOGONAL?h:n===c.STAGGERED?u:y};S.exports=l},45091:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62991),y=function(u,h,l){if(c(u,h,l)){var n=l.data[h][u];return n!==null&&n.index>-1}else return!1};S.exports=y},24152:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(45091),y=s(26099),u=new y,h=function(l,n,o,f){f.tilemapLayer.worldToTileXY(l,n,!0,u,o);var r=u.x,d=u.y;return c(r,d,f)};S.exports=h},90454:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(63448),y=s(56583),u=function(h,l){var n=h.tilemapLayer.tilemap,o=h.tilemapLayer,f=Math.floor(n.tileWidth*o.scaleX),r=Math.floor(n.tileHeight*o.scaleY),d=h.hexSideLength,p,v,g,m;if(h.staggerAxis==="y"){var T=(r-d)/2+d;p=y(l.worldView.x-o.x,f,0,!0)-o.cullPaddingX,v=c(l.worldView.right-o.x,f,0,!0)+o.cullPaddingX,g=y(l.worldView.y-o.y,T,0,!0)-o.cullPaddingY,m=c(l.worldView.bottom-o.y,T,0,!0)+o.cullPaddingY}else{var P=(f-d)/2+d;p=y(l.worldView.x-o.x,P,0,!0)-o.cullPaddingX,v=c(l.worldView.right-o.x,P,0,!0)+o.cullPaddingX,g=y(l.worldView.y-o.y,r,0,!0)-o.cullPaddingY,m=c(l.worldView.bottom-o.y,r,0,!0)+o.cullPaddingY}return{left:p,right:v,top:g,bottom:m}};S.exports=u},9474:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(90454),y=s(32483),u=function(h,l,n,o){n===void 0&&(n=[]),o===void 0&&(o=0),n.length=0;var f=h.tilemapLayer,r=c(h,l);return f.skipCull&&f.scrollFactorX===1&&f.scrollFactorY===1&&(r.left=0,r.right=h.width,r.top=0,r.bottom=h.height),y(h,r,o,n),n};S.exports=u},27229:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(19951),y=s(26099),u=new y,h=function(l,n,o,f){var r=f.baseTileWidth,d=f.baseTileHeight,p=f.tilemapLayer;p&&(r*=p.scaleX,d*=p.scaleY);var v=c(l,n,u,o,f),g=[],m=.5773502691896257,T,P;f.staggerAxis==="y"?(T=m*r,P=d/2):(T=r/2,P=m*d);for(var M=0;M<6;M++){var b=2*Math.PI*(.5-M)/6;g.push(new y(v.x+T*Math.cos(b),v.y+P*Math.sin(b)))}return g};S.exports=h},19951:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26099),y=function(u,h,l,n,o){l||(l=new c);var f=o.baseTileWidth,r=o.baseTileHeight,d=o.tilemapLayer,p=0,v=0;d&&(n||(n=d.scene.cameras.main),p=d.x+n.scrollX*(1-d.scrollFactorX),v=d.y+n.scrollY*(1-d.scrollFactorY),f*=d.scaleX,r*=d.scaleY);var g=f/2,m=r/2,T,P,M=o.staggerAxis,b=o.staggerIndex;return M==="y"?(T=p+f*u+f,P=v+1.5*h*m+m,h%2===0&&(b==="odd"?T-=g:T+=g)):M==="x"&&b==="odd"&&(T=p+1.5*u*g+g,P=v+r*u+r,u%2===0&&(b==="odd"?P-=m:P+=m)),l.set(T,P)};S.exports=y},86625:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26099),y=function(u,h,l,n,o,f){n||(n=new c);var r=f.baseTileWidth,d=f.baseTileHeight,p=f.tilemapLayer;p&&(o||(o=p.scene.cameras.main),u=u-(p.x+o.scrollX*(1-p.scrollFactorX)),h=h-(p.y+o.scrollY*(1-p.scrollFactorY)),r*=p.scaleX,d*=p.scaleY);var v=.5773502691896257,g=-.3333333333333333,m=0,T=.6666666666666666,P=r/2,M=d/2,b,R,A,D,G;f.staggerAxis==="y"?(b=(u-P)/(v*r),R=(h-M)/M,A=v*b+g*R,D=m*b+T*R):(b=(u-P)/P,R=(h-M)/(v*d),A=g*b+v*R,D=T*b+m*R),G=-A-D;var F=Math.round(A),B=Math.round(D),N=Math.round(G),z=Math.abs(F-A),$=Math.abs(B-D),Q=Math.abs(N-G);z>$&&z>Q?F=-B-N:$>Q&&(B=-F-N);var Z,tt=B;return f.staggerIndex==="odd"?Z=tt%2===0?B/2+F:B/2+F-.5:Z=tt%2===0?B/2+F:B/2+F+.5,n.set(Z,tt)};S.exports=y},62991:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return s>=0&&s<y.width&&c>=0&&c<y.height};S.exports=w},14018:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(33528),y=function(u,h,l,n){l===void 0&&(l=[]),n===void 0&&(n=0),l.length=0;var o=u.tilemapLayer,f=u.data,r=u.width,d=u.height,p=o.skipCull,v=0,g=r,m=0,T=d,P,M,b;if(n===0)for(M=m;M<T;M++)for(P=v;P<g;P++)b=f[M][P],!(!b||b.index===-1||!b.visible||b.alpha===0)&&(!p&&!c(P,M,u,h)||l.push(b));else if(n===1)for(M=m;M<T;M++)for(P=g;P>=v;P--)b=f[M][P],!(!b||b.index===-1||!b.visible||b.alpha===0)&&(!p&&!c(P,M,u,h)||l.push(b));else if(n===2)for(M=T;M>=m;M--)for(P=v;P<g;P++)b=f[M][P],!(!b||b.index===-1||!b.visible||b.alpha===0)&&(!p&&!c(P,M,u,h)||l.push(b));else if(n===3)for(M=T;M>=m;M--)for(P=g;P>=v;P--)b=f[M][P],!(!b||b.index===-1||!b.visible||b.alpha===0)&&(!p&&!c(P,M,u,h)||l.push(b));return o.tilesDrawn=l.length,o.tilesTotal=r*d,l};S.exports=y},14127:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26099),y=function(u,h,l,n,o){l||(l=new c);var f=o.baseTileWidth,r=o.baseTileHeight,d=o.tilemapLayer,p=0,v=0;d&&(n||(n=d.scene.cameras.main),p=d.x+n.scrollX*(1-d.scrollFactorX),f*=d.scaleX,v=d.y+n.scrollY*(1-d.scrollFactorY),r*=d.scaleY);var g=p+(u-h)*(f/2),m=v+(u+h)*(r/2);return l.set(g,m)};S.exports=y},96897:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26099),y=function(u,h,l,n,o,f,r){n||(n=new c);var d=f.baseTileWidth,p=f.baseTileHeight,v=f.tilemapLayer;v&&(o||(o=v.scene.cameras.main),h=h-(v.y+o.scrollY*(1-v.scrollFactorY)),p*=v.scaleY,u=u-(v.x+o.scrollX*(1-v.scrollFactorX)),d*=v.scaleX);var g=d/2,m=p/2;u=u-g,r||(h=h-p);var T=.5*(u/g+h/m),P=.5*(-u/g+h/m);return l&&(T=Math.floor(T),P=Math.floor(P)),n.set(T,P)};S.exports=y},71558:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(23029),y=s(62991),u=s(72023),h=s(20576),l=function(n,o,f,r,d){if(r===void 0&&(r=!0),!y(o,f,d))return null;var p,v=d.data[f][o],g=v&&v.collides;n instanceof c?(d.data[f][o]===null&&(d.data[f][o]=new c(d,n.index,o,f,d.tileWidth,d.tileHeight)),d.data[f][o].copy(n)):(p=n,d.data[f][o]===null?d.data[f][o]=new c(d,p,o,f,d.tileWidth,d.tileHeight):d.data[f][o].index=p);var m=d.data[f][o],T=d.collideIndexes.indexOf(m.index)!==-1;if(p=n instanceof c?n.index:n,p===-1)m.width=d.tileWidth,m.height=d.tileHeight;else{var P=d.tilemapLayer.tilemap,M=P.tiles,b=M[p][2],R=P.tilesets[b];m.width=R.tileWidth,m.height=R.tileHeight}return h(m,T),r&&g!==m.collides&&u(o,f,d),m};S.exports=l},26303:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(71558),y=s(26099),u=new y,h=function(l,n,o,f,r,d){return d.tilemapLayer.worldToTileXY(n,o,!0,u,r,d),c(l,u.x,u.y,f,d)};S.exports=h},14051:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(42573),y=s(71558),u=function(h,l,n,o,f){if(o===void 0&&(o=!0),!Array.isArray(h))return null;Array.isArray(h[0])||(h=[h]);for(var r=h.length,d=h[0].length,p=0;p<r;p++)for(var v=0;v<d;v++){var g=h[p][v];y(g,l+v,n+p,!1,f)}o&&c(l-1,n-1,d+2,r+2,f)};S.exports=u},77389:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7386),y=s(26546),u=function(h,l,n,o,f,r){var d,p=c(h,l,n,o,{},r);if(!f)for(f=[],d=0;d<p.length;d++)f.indexOf(p[d].index)===-1&&f.push(p[d].index);for(d=0;d<p.length;d++)p[d].index=y(f)};S.exports=u},63557:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(23029),y=s(62991),u=s(72023),h=function(l,n,o,f,r){if(o===void 0&&(o=!0),f===void 0&&(f=!0),!y(l,n,r))return null;var d=r.data[n][l];if(d)r.data[n][l]=o?null:new c(r,-1,l,n,r.tileWidth,r.tileHeight);else return null;return f&&d&&d.collides&&u(l,n,r),d};S.exports=h},94178:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(63557),y=s(26099),u=new y,h=function(l,n,o,f,r,d){return d.tilemapLayer.worldToTileXY(l,n,!0,u,r,d),c(u.x,u.y,o,f,d)};S.exports=h},15533:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7386),y=s(3956),u=new y(105,210,231,150),h=new y(243,134,48,200),l=new y(40,39,37,150),n=function(o,f,r){f===void 0&&(f={});var d=f.tileColor!==void 0?f.tileColor:u,p=f.collidingTileColor!==void 0?f.collidingTileColor:h,v=f.faceColor!==void 0?f.faceColor:l,g=c(0,0,r.width,r.height,null,r);o.translateCanvas(r.tilemapLayer.x,r.tilemapLayer.y),o.scaleCanvas(r.tilemapLayer.scaleX,r.tilemapLayer.scaleY);for(var m=0;m<g.length;m++){var T=g[m],P=T.tileset?T.tileset.tileOffset:{x:0,y:0},M=T.width,b=T.height,R=T.pixelX-P.x,A=T.pixelY-P.y,D=T.collides?p:d;D!==null&&(o.fillStyle(D.color,D.alpha/255),o.fillRect(R,A,M,b)),R+=1,A+=1,M-=2,b-=2,v!==null&&(o.lineStyle(1,v.color,v.alpha/255),T.faceTop&&o.lineBetween(R,A,R+M,A),T.faceRight&&o.lineBetween(R+M,A,R+M,A+b),T.faceBottom&&o.lineBetween(R,A+b,R+M,A+b),T.faceLeft&&o.lineBetween(R,A,R,A+b))}};S.exports=n},27987:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7386),y=function(u,h,l,n,o,f,r){for(var d=c(l,n,o,f,null,r),p=0;p<d.length;p++)d[p]&&d[p].index===u&&(d[p].index=h)};S.exports=y},32483:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){var h=s.data,l=s.width,n=s.height,o=s.tilemapLayer,f=Math.max(0,c.left),r=Math.min(l,c.right),d=Math.max(0,c.top),p=Math.min(n,c.bottom),v,g,m;if(y===0)for(g=d;g<p;g++)for(v=f;h[g]&&v<r;v++)m=h[g][v],!(!m||m.index===-1||!m.visible||m.alpha===0)&&u.push(m);else if(y===1)for(g=d;g<p;g++)for(v=r;h[g]&&v>=f;v--)m=h[g][v],!(!m||m.index===-1||!m.visible||m.alpha===0)&&u.push(m);else if(y===2)for(g=p;g>=d;g--)for(v=f;h[g]&&v<r;v++)m=h[g][v],!(!m||m.index===-1||!m.visible||m.alpha===0)&&u.push(m);else if(y===3)for(g=p;g>=d;g--)for(v=r;h[g]&&v>=f;v--)m=h[g][v],!(!m||m.index===-1||!m.visible||m.alpha===0)&&u.push(m);return o.tilesDrawn=u.length,o.tilesTotal=l*n,u};S.exports=w},57068:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(20576),y=s(42573),u=s(9589),h=function(l,n,o,f,r){n===void 0&&(n=!0),o===void 0&&(o=!0),r===void 0&&(r=!0),Array.isArray(l)||(l=[l]);for(var d=0;d<l.length;d++)u(l[d],n,f);if(r)for(var p=0;p<f.height;p++)for(var v=0;v<f.width;v++){var g=f.data[p][v];g&&l.indexOf(g.index)!==-1&&c(g,n)}o&&y(0,0,f.width,f.height,f)};S.exports=h},37266:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(20576),y=s(42573),u=s(9589),h=function(l,n,o,f,r,d){if(o===void 0&&(o=!0),f===void 0&&(f=!0),d===void 0&&(d=!0),!(l>n)){for(var p=l;p<=n;p++)u(p,o,r);if(d)for(var v=0;v<r.height;v++)for(var g=0;g<r.width;g++){var m=r.data[v][g];m&&m.index>=l&&m.index<=n&&c(m,o)}f&&y(0,0,r.width,r.height,r)}};S.exports=h},75661:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(20576),y=s(42573),u=s(9589),h=function(l,n,o,f){n===void 0&&(n=!0),o===void 0&&(o=!0),Array.isArray(l)||(l=[l]);for(var r=0;r<f.height;r++)for(var d=0;d<f.width;d++){var p=f.data[r][d];p&&l.indexOf(p.index)===-1&&(c(p,n),u(p.index,n,f))}o&&y(0,0,f.width,f.height,f)};S.exports=h},64740:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(20576),y=s(42573),u=s(97022),h=function(l,n,o,f){n===void 0&&(n=!0),o===void 0&&(o=!0);for(var r=0;r<f.height;r++)for(var d=0;d<f.width;d++){var p=f.data[r][d];if(p){for(var v in l)if(u(p.properties,v)){var g=l[v];Array.isArray(g)||(g=[g]);for(var m=0;m<g.length;m++)p.properties[v]===g[m]&&c(p,n)}}}o&&y(0,0,f.width,f.height,f)};S.exports=h},63307:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(20576),y=s(42573),u=function(h,l,n){h===void 0&&(h=!0),l===void 0&&(l=!0);for(var o=0;o<n.height;o++)for(var f=0;f<n.width;f++){var r=n.data[o][f];if(r){var d=r.getCollisionGroup();d&&d.objects&&d.objects.length>0&&c(r,h)}}l&&y(0,0,n.width,n.height,n)};S.exports=u},9589:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=y.collideIndexes.indexOf(s);c&&u===-1?y.collideIndexes.push(s):!c&&u!==-1&&y.collideIndexes.splice(u,1)};S.exports=w},20576:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){c?s.setCollision(!0,!0,!0,!0,!1):s.resetCollision(!1)};S.exports=w},79583:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){if(typeof s=="number")u.callbacks[s]=c!==null?{callback:c,callbackContext:y}:void 0;else for(var h=0,l=s.length;h<l;h++)u.callbacks[s[h]]=c!==null?{callback:c,callbackContext:y}:void 0};S.exports=w},93254:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7386),y=function(u,h,l,n,o,f,r){for(var d=c(u,h,l,n,null,r),p=0;p<d.length;p++)d[p].setCollisionCallback(o,f)};S.exports=y},32903:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7386),y=s(33680),u=function(h,l,n,o,f){var r=c(h,l,n,o,null,f),d=r.map(function(v){return v.index});y(d);for(var p=0;p<r.length;p++)r[p].index=d[p]};S.exports=u},61325:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(63448),y=s(56583),u=function(h,l){var n=h.tilemapLayer.tilemap,o=h.tilemapLayer,f=Math.floor(n.tileWidth*o.scaleX),r=Math.floor(n.tileHeight*o.scaleY),d=y(l.worldView.x-o.x,f,0,!0)-o.cullPaddingX,p=c(l.worldView.right-o.x,f,0,!0)+o.cullPaddingX,v=y(l.worldView.y-o.y,r/2,0,!0)-o.cullPaddingY,g=c(l.worldView.bottom-o.y,r/2,0,!0)+o.cullPaddingY;return{left:d,right:p,top:v,bottom:g}};S.exports=u},54503:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(61325),y=s(32483),u=function(h,l,n,o){n===void 0&&(n=[]),o===void 0&&(o=0),n.length=0;var f=h.tilemapLayer,r=c(h,l);return f.skipCull&&f.scrollFactorX===1&&f.scrollFactorY===1&&(r.left=0,r.right=h.width,r.top=0,r.bottom=h.height),y(h,r,o,n),n};S.exports=u},97202:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26099),y=function(u,h,l,n,o){l||(l=new c);var f=o.baseTileWidth,r=o.baseTileHeight,d=o.tilemapLayer,p=0,v=0;d&&(n||(n=d.scene.cameras.main),p=d.x+n.scrollX*(1-d.scrollFactorX),f*=d.scaleX,v=d.y+n.scrollY*(1-d.scrollFactorY),r*=d.scaleY);var g=p+u*f+h%2*(f/2),m=v+h*(r/2);return l.set(g,m)};S.exports=y},28054:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=y.baseTileHeight,h=y.tilemapLayer,l=0;return h&&(c===void 0&&(c=h.scene.cameras.main),l=h.y+c.scrollY*(1-h.scrollFactorY),u*=h.scaleY),l+s*(u/2)+u};S.exports=w},15108:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26099),y=function(u,h,l,n,o,f){n||(n=new c);var r=f.baseTileWidth,d=f.baseTileHeight,p=f.tilemapLayer;p&&(o||(o=p.scene.cameras.main),h=h-(p.y+o.scrollY*(1-p.scrollFactorY)),d*=p.scaleY,u=u-(p.x+o.scrollX*(1-p.scrollFactorX)),r*=p.scaleX);var v=l?Math.floor(h/(d/2)):h/(d/2),g=l?Math.floor((u+v%2*.5*r)/r):(u+v%2*.5*r)/r;return n.set(g,v)};S.exports=y},51900:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){var h=u.baseTileHeight,l=u.tilemapLayer;return l&&(y||(y=l.scene.cameras.main),s=s-(l.y+y.scrollY*(1-l.scrollFactorY)),h*=l.scaleY),c?Math.floor(s/(h/2)):s/(h/2)};S.exports=w},86560:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7386),y=function(u,h,l,n,o,f,r){for(var d=c(l,n,o,f,null,r),p=0;p<d.length;p++)d[p]&&(d[p].index===u?d[p].index=h:d[p].index===h&&(d[p].index=u))};S.exports=y},97281:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=y.baseTileWidth,h=y.tilemapLayer,l=0;return h&&(c||(c=h.scene.cameras.main),l=h.x+c.scrollX*(1-h.scrollFactorX),u*=h.scaleX),l+s*u};S.exports=w},70326:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(97281),y=s(29650),u=s(26099),h=function(l,n,o,f,r){return o||(o=new u(0,0)),o.x=c(l,f,r),o.y=y(n,f,r),o};S.exports=h},29650:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=y.baseTileHeight,h=y.tilemapLayer,l=0;return h&&(c||(c=h.scene.cameras.main),l=h.y+c.scrollY*(1-h.scrollFactorY),u*=h.scaleY),l+s*u};S.exports=w},77366:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(7386),y=s(75508),u=function(h,l,n,o,f,r){if(f){var d,p=c(h,l,n,o,null,r),v=0;for(d=0;d<f.length;d++)v+=f[d].weight;if(!(v<=0))for(d=0;d<p.length;d++){for(var g=y.RND.frac()*v,m=0,T=-1,P=0;P<f.length;P++)if(m+=f[P].weight,g<=m){var M=f[P].index;T=Array.isArray(M)?M[Math.floor(y.RND.frac()*M.length)]:M;break}p[d].index=T}}};S.exports=u},10095:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(85896),y=s(26099),u=new y,h=function(l,n,o,f){return c(l,0,n,u,o,f),u.x};S.exports=h},85896:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(26099),y=function(u,h,l,n,o,f){l===void 0&&(l=!0),n||(n=new c);var r=f.baseTileWidth,d=f.baseTileHeight,p=f.tilemapLayer;p&&(o||(o=p.scene.cameras.main),u=u-(p.x+o.scrollX*(1-p.scrollFactorX)),h=h-(p.y+o.scrollY*(1-p.scrollFactorY)),r*=p.scaleX,d*=p.scaleY);var v=u/r,g=h/d;return l&&(v=Math.floor(v),g=Math.floor(g)),n.set(v,g)};S.exports=y},63288:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(85896),y=s(26099),u=new y,h=function(l,n,o,f){return c(0,l,n,u,o,f),u.y};S.exports=h},81086:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={CalculateFacesAt:s(72023),CalculateFacesWithin:s(42573),CheckIsoBounds:s(33528),Copy:s(1785),CreateFromTiles:s(78419),CullBounds:s(19545),CullTiles:s(30003),Fill:s(35137),FilterTiles:s(40253),FindByIndex:s(52692),FindTile:s(66151),ForEachTile:s(97560),GetCullTilesFunction:s(43305),GetTileAt:s(7423),GetTileAtWorldXY:s(60540),GetTileCorners:s(55826),GetTileCornersFunction:s(11758),GetTilesWithin:s(7386),GetTilesWithinShape:s(91141),GetTilesWithinWorldXY:s(96523),GetTileToWorldXFunction:s(39167),GetTileToWorldXYFunction:s(62e3),GetTileToWorldYFunction:s(5984),GetWorldToTileXFunction:s(96113),GetWorldToTileXYFunction:s(16926),GetWorldToTileYFunction:s(55762),HasTileAt:s(45091),HasTileAtWorldXY:s(24152),HexagonalCullBounds:s(90454),HexagonalCullTiles:s(9474),HexagonalGetTileCorners:s(27229),HexagonalTileToWorldXY:s(19951),HexagonalWorldToTileXY:s(86625),IsInLayerBounds:s(62991),IsometricCullTiles:s(14018),IsometricTileToWorldXY:s(14127),IsometricWorldToTileXY:s(96897),PutTileAt:s(71558),PutTileAtWorldXY:s(26303),PutTilesAt:s(14051),Randomize:s(77389),RemoveTileAt:s(63557),RemoveTileAtWorldXY:s(94178),RenderDebug:s(15533),ReplaceByIndex:s(27987),RunCull:s(32483),SetCollision:s(57068),SetCollisionBetween:s(37266),SetCollisionByExclusion:s(75661),SetCollisionByProperty:s(64740),SetCollisionFromCollisionGroup:s(63307),SetLayerCollisionIndex:s(9589),SetTileCollision:s(20576),SetTileIndexCallback:s(79583),SetTileLocationCallback:s(93254),Shuffle:s(32903),StaggeredCullBounds:s(61325),StaggeredCullTiles:s(54503),StaggeredTileToWorldXY:s(97202),StaggeredTileToWorldY:s(28054),StaggeredWorldToTileXY:s(15108),StaggeredWorldToTileY:s(51900),SwapByIndex:s(86560),TileToWorldX:s(97281),TileToWorldXY:s(70326),TileToWorldY:s(29650),WeightedRandomize:s(77366),WorldToTileX:s(10095),WorldToTileXY:s(85896),WorldToTileY:s(63288)}},91907:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},21829:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c={ORIENTATION:s(91907)};S.exports=c},62501:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(79291),y=s(21829),u={Components:s(81086),Parsers:s(57442),Formats:s(80341),ImageCollection:s(16536),ParseToTilemap:s(31989),Tile:s(23029),Tilemap:s(49075),TilemapCreator:s(45939),TilemapFactory:s(46029),Tileset:s(33629),TilemapLayer:s(20442),Orientation:s(91907),LayerData:s(14977),MapData:s(87010),ObjectLayer:s(48700)};u=c(!1,u,y.ORIENTATION),S.exports=u},14977:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(91907),u=s(95540),h=new c({initialize:function(n){n===void 0&&(n={}),this.name=u(n,"name","layer"),this.id=u(n,"id",0),this.x=u(n,"x",0),this.y=u(n,"y",0),this.width=u(n,"width",0),this.height=u(n,"height",0),this.tileWidth=u(n,"tileWidth",0),this.tileHeight=u(n,"tileHeight",0),this.baseTileWidth=u(n,"baseTileWidth",this.tileWidth),this.baseTileHeight=u(n,"baseTileHeight",this.tileHeight),this.orientation=u(n,"orientation",y.ORTHOGONAL),this.widthInPixels=u(n,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=u(n,"heightInPixels",this.height*this.baseTileHeight),this.alpha=u(n,"alpha",1),this.visible=u(n,"visible",!0),this.properties=u(n,"properties",[]),this.indexes=u(n,"indexes",[]),this.collideIndexes=u(n,"collideIndexes",[]),this.callbacks=u(n,"callbacks",[]),this.bodies=u(n,"bodies",[]),this.data=u(n,"data",[]),this.tilemapLayer=u(n,"tilemapLayer",null),this.hexSideLength=u(n,"hexSideLength",0),this.staggerAxis=u(n,"staggerAxis","y"),this.staggerIndex=u(n,"staggerIndex","odd")}});S.exports=h},87010:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(91907),u=s(95540),h=new c({initialize:function(n){n===void 0&&(n={}),this.name=u(n,"name","map"),this.width=u(n,"width",0),this.height=u(n,"height",0),this.infinite=u(n,"infinite",!1),this.tileWidth=u(n,"tileWidth",0),this.tileHeight=u(n,"tileHeight",0),this.widthInPixels=u(n,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=u(n,"heightInPixels",this.height*this.tileHeight),this.format=u(n,"format",null),this.orientation=u(n,"orientation",y.ORTHOGONAL),this.renderOrder=u(n,"renderOrder","right-down"),this.version=u(n,"version","1"),this.properties=u(n,"properties",{}),this.layers=u(n,"layers",[]),this.images=u(n,"images",[]),this.objects=u(n,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=u(n,"collision",{}),this.tilesets=u(n,"tilesets",[]),this.imageCollections=u(n,"imageCollections",[]),this.tiles=u(n,"tiles",[]),this.hexSideLength=u(n,"hexSideLength",0),this.staggerAxis=u(n,"staggerAxis","y"),this.staggerIndex=u(n,"staggerIndex","odd")}});S.exports=h},48700:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(95540),u=new c({initialize:function(l){l===void 0&&(l={}),this.name=y(l,"name","object layer"),this.id=y(l,"id",0),this.opacity=y(l,"opacity",1),this.properties=y(l,"properties",{}),this.propertyTypes=y(l,"propertytypes",{}),this.type=y(l,"type","objectgroup"),this.visible=y(l,"visible",!0),this.objects=y(l,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});S.exports=u},6641:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(91907),y=function(u){return u=u.toLowerCase(),u==="isometric"?c.ISOMETRIC:u==="staggered"?c.STAGGERED:u==="hexagonal"?c.HEXAGONAL:c.ORTHOGONAL};S.exports=y},46177:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(80341),y=s(2342),u=s(82593),h=s(46594),l=s(87021),n=function(o,f,r,d,p,v){var g;switch(f){case c.ARRAY_2D:g=y(o,r,d,p,v);break;case c.CSV:g=u(o,r,d,p,v);break;case c.TILED_JSON:g=h(o,r,v);break;case c.WELTMEISTER:g=l(o,r,v);break;default:console.warn("Unrecognized tilemap data format: "+f),g=null}return g};S.exports=n},2342:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(80341),y=s(14977),u=s(87010),h=s(23029),l=function(n,o,f,r,d){for(var p=new y({tileWidth:f,tileHeight:r}),v=new u({name:n,tileWidth:f,tileHeight:r,format:c.ARRAY_2D,layers:[p]}),g=[],m=o.length,T=0,P=0;P<o.length;P++){g[P]=[];for(var M=o[P],b=0;b<M.length;b++){var R=parseInt(M[b],10);isNaN(R)||R===-1?g[P][b]=d?null:new h(p,-1,b,P,f,r):g[P][b]=new h(p,R,b,P,f,r)}T===0&&(T=M.length)}return v.width=p.width=T,v.height=p.height=m,v.widthInPixels=p.widthInPixels=T*f,v.heightInPixels=p.heightInPixels=m*r,p.data=g,v};S.exports=l},82593:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(80341),y=s(2342),u=function(h,l,n,o,f){var r=l.trim().split(`
`).map(function(p){return p.split(",")}),d=y(h,r,n,o,f);return d.format=c.CSV,d};S.exports=u},6656:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(14977),y=s(23029),u=function(h,l){for(var n=[],o=0;o<h.layer.length;o++){for(var f=h.layer[o],r=new c({name:f.name,width:f.width,height:f.height,tileWidth:f.tilesize,tileHeight:f.tilesize,visible:f.visible===1}),d=[],p=[],v=0;v<f.data.length;v++){for(var g=0;g<f.data[v].length;g++){var m=f.data[v][g]-1,T;m>-1?T=new y(r,m,g,v,f.tilesize,f.tilesize):T=l?null:new y(r,-1,g,v,f.tilesize,f.tilesize),d.push(T)}p.push(d),d=[]}r.data=p,n.push(r)}return n};S.exports=u},96483:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(33629),y=function(u){for(var h=[],l=[],n=0;n<u.layer.length;n++){var o=u.layer[n],f=o.tilesetName;f!==""&&l.indexOf(f)===-1&&(l.push(f),h.push(new c(f,0,o.tilesize,o.tilesize,0,0)))}return h};S.exports=y},87021:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(80341),y=s(87010),u=s(6656),h=s(96483),l=function(n,o,f){if(o.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+n),null;for(var r=0,d=0,p=0;p<o.layer.length;p++)o.layer[p].width>r&&(r=o.layer[p].width),o.layer[p].height>d&&(d=o.layer[p].height);var v=new y({width:r,height:d,name:n,tileWidth:o.layer[0].tilesize,tileHeight:o.layer[0].tilesize,format:c.WELTMEISTER});return v.layers=u(o,f),v.tilesets=h(o),v};S.exports=l},52833:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={ParseTileLayers:s(6656),ParseTilesets:s(96483),ParseWeltmeister:s(87021)}},57442:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={FromOrientationString:s(6641),Parse:s(46177),Parse2DArray:s(2342),ParseCSV:s(82593),Impact:s(52833),Tiled:s(96761)}},51233:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(79291),y=function(u){for(var h,l,n,o,f,r=0;r<u.layers.length;r++){h=u.layers[r],o=null;for(var d=0;d<h.data.length;d++){f=h.data[d];for(var p=0;p<f.length;p++)l=f[p],!(l===null||l.index<0)&&(n=u.tiles[l.index][2],o=u.tilesets[n],l.width=o.tileWidth,l.height=o.tileHeight,o.tileProperties&&o.tileProperties[l.index-o.firstgid]&&(l.properties=c(l.properties,o.tileProperties[l.index-o.firstgid])))}}};S.exports=y},41868:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){for(var c=window.atob(s),y=c.length,u=new Array(y/4),h=0;h<y;h+=4)u[h/4]=(c.charCodeAt(h)|c.charCodeAt(h+1)<<8|c.charCodeAt(h+2)<<16|c.charCodeAt(h+3)<<24)>>>0;return u};S.exports=w},84101:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(33629),y=function(u){var h,l,n=[];for(h=0;h<u.imageCollections.length;h++)for(var o=u.imageCollections[h],f=o.images,r=0;r<f.length;r++){var d=f[r],p={x:0,y:d.height-u.tileHeight};l=new c(d.image,d.gid,d.width,d.height,0,0,void 0,void 0,p),l.updateTileData(d.width,d.height),u.tilesets.push(l)}for(h=0;h<u.tilesets.length;h++){l=u.tilesets[h];for(var v=l.tileMargin,g=l.tileMargin,m=0,T=0,P=0,M=l.firstgid;M<l.firstgid+l.total&&(n[M]=[v,g,h],v+=l.tileWidth+l.tileSpacing,m++,!(m===l.total||(T++,T===l.columns&&(v=l.tileMargin,g+=l.tileHeight+l.tileSpacing,T=0,P++,P===l.rows))));M++);}return n};S.exports=y},79677:(S,w,s)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(95540),y=function(u,h,l){if(!h)return{i:0,layers:u.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=h.x+c(h,"startx",0)*u.tilewidth+c(h,"offsetx",0),o=h.y+c(h,"starty",0)*u.tileheight+c(h,"offsety",0);return{i:0,layers:h.layers,name:l.name+h.name+"/",opacity:l.opacity*h.opacity,visible:l.visible&&h.visible,x:l.x+n,y:l.y+o}};S.exports=y},29920:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=2147483648,s=1073741824,c=536870912,y=function(u){var h=!!(u&w),l=!!(u&s),n=!!(u&c);u=u&536870911;var o=0,f=!1;return h&&l&&n?(o=Math.PI/2,f=!0):h&&l&&!n?(o=Math.PI,f=!1):h&&!l&&n?(o=Math.PI/2,f=!1):h&&!l&&!n?(o=0,f=!0):!h&&l&&n?(o=3*Math.PI/2,f=!1):!h&&l&&!n?(o=Math.PI,f=!0):!h&&!l&&n?(o=3*Math.PI/2,f=!0):!h&&!l&&!n&&(o=0,f=!1),{gid:u,flippedHorizontal:h,flippedVertical:l,flippedAntiDiagonal:n,rotation:o,flipped:f}};S.exports=y},12635:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(95540),y=s(79677),u=function(h){for(var l=[],n=[],o=y(h);o.i<o.layers.length||n.length>0;){if(o.i>=o.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=n.pop();continue}var f=o.layers[o.i];if(o.i++,f.type!=="imagelayer"){if(f.type==="group"){var r=y(h,f,o);n.push(o),o=r}continue}var d=c(f,"offsetx",0)+c(f,"startx",0),p=c(f,"offsety",0)+c(f,"starty",0);l.push({name:o.name+f.name,image:f.image,x:o.x+d+f.x,y:o.y+p+f.y,alpha:o.opacity*f.opacity,visible:o.visible&&f.visible,properties:c(f,"properties",{})})}return l};S.exports=u},46594:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(51233),y=s(84101),u=s(91907),h=s(62644),l=s(80341),n=s(6641),o=s(87010),f=s(12635),r=s(22611),d=s(28200),p=s(24619),v=function(g,m,T){var P=h(m),M=new o({width:P.width,height:P.height,name:g,tileWidth:P.tilewidth,tileHeight:P.tileheight,orientation:n(P.orientation),format:l.TILED_JSON,version:P.version,properties:P.properties,renderOrder:P.renderorder,infinite:P.infinite});if(M.orientation===u.HEXAGONAL)if(M.hexSideLength=P.hexsidelength,M.staggerAxis=P.staggeraxis,M.staggerIndex=P.staggerindex,M.staggerAxis==="y"){var b=(M.tileHeight-M.hexSideLength)/2;M.widthInPixels=M.tileWidth*(M.width+.5),M.heightInPixels=M.height*(M.hexSideLength+b)+b}else{var R=(M.tileWidth-M.hexSideLength)/2;M.widthInPixels=M.width*(M.hexSideLength+R)+R,M.heightInPixels=M.tileHeight*(M.height+.5)}M.layers=d(P,T),M.images=f(P);var A=p(P);return M.tilesets=A.tilesets,M.imageCollections=A.imageCollections,M.objects=r(P),M.tiles=y(M),c(M),M};S.exports=v},52205:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(18254),y=s(29920),u=function(n){return{x:n.x,y:n.y}},h=["id","name","type","rotation","properties","visible","x","y","width","height"],l=function(n,o,f){o===void 0&&(o=0),f===void 0&&(f=0);var r=c(n,h);if(r.x+=o,r.y+=f,n.gid){var d=y(n.gid);r.gid=d.gid,r.flippedHorizontal=d.flippedHorizontal,r.flippedVertical=d.flippedVertical,r.flippedAntiDiagonal=d.flippedAntiDiagonal}else n.polyline?r.polyline=n.polyline.map(u):n.polygon?r.polygon=n.polygon.map(u):n.ellipse?r.ellipse=n.ellipse:n.text?r.text=n.text:n.point?r.point=!0:r.rectangle=!0;return r};S.exports=l},22611:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(95540),y=s(52205),u=s(48700),h=s(79677),l=function(n){for(var o=[],f=[],r=h(n);r.i<r.layers.length||f.length>0;){if(r.i>=r.layers.length){if(f.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}r=f.pop();continue}var d=r.layers[r.i];if(r.i++,d.opacity*=r.opacity,d.visible=r.visible&&d.visible,d.type!=="objectgroup"){if(d.type==="group"){var p=h(n,d,r);f.push(r),r=p}continue}d.name=r.name+d.name;for(var v=r.x+c(d,"startx",0)+c(d,"offsetx",0),g=r.y+c(d,"starty",0)+c(d,"offsety",0),m=[],T=0;T<d.objects.length;T++){var P=y(d.objects[T],v,g);m.push(P)}var M=new u(d);M.objects=m,o.push(M)}return o};S.exports=l},28200:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(41868),y=s(91907),u=s(79677),h=s(6641),l=s(95540),n=s(14977),o=s(29920),f=s(23029),r=function(d,p){for(var v=l(d,"infinite",!1),g=[],m=[],T=u(d);T.i<T.layers.length||m.length>0;){if(T.i>=T.layers.length){if(m.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}T=m.pop();continue}var P=T.layers[T.i];if(T.i++,P.type!=="tilelayer"){if(P.type==="group"){var M=u(d,P,T);m.push(T),T=M}continue}if(P.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+P.name+"'");continue}else if(P.encoding&&P.encoding==="base64"){if(P.chunks)for(var b=0;b<P.chunks.length;b++)P.chunks[b].data=c(P.chunks[b].data);P.data&&(P.data=c(P.data)),delete P.encoding}var R,A,D,G,F,B,N=[],z=0;if(v){var $=l(P,"startx",0)+P.x,Q=l(P,"starty",0)+P.y;R=new n({name:T.name+P.name,id:P.id,x:T.x+l(P,"offsetx",0)+$*d.tilewidth,y:T.y+l(P,"offsety",0)+Q*d.tileheight,width:P.width,height:P.height,tileWidth:d.tilewidth,tileHeight:d.tileheight,alpha:T.opacity*P.opacity,visible:T.visible&&P.visible,properties:l(P,"properties",[]),orientation:h(d.orientation)}),R.orientation===y.HEXAGONAL&&(R.hexSideLength=d.hexsidelength,R.staggerAxis=d.staggeraxis,R.staggerIndex=d.staggerindex,R.staggerAxis==="y"?(F=(R.tileHeight-R.hexSideLength)/2,R.widthInPixels=R.tileWidth*(R.width+.5),R.heightInPixels=R.height*(R.hexSideLength+F)+F):(B=(R.tileWidth-R.hexSideLength)/2,R.widthInPixels=R.width*(R.hexSideLength+B)+B,R.heightInPixels=R.tileHeight*(R.height+.5)));for(var Z=0;Z<P.height;Z++){N[Z]=[null];for(var tt=0;tt<P.width;tt++)N[Z][tt]=null}for(Z=0,vt=P.chunks.length;Z<vt;Z++)for(var H=P.chunks[Z],J=H.x-$,Y=H.y-Q,_=0,U=0,et=H.data.length;U<et;U++){var nt=z+J,rt=_+Y;A=o(H.data[U]),A.gid>0?(D=new f(R,A.gid,nt,rt,d.tilewidth,d.tileheight),D.rotation=A.rotation,D.flipX=A.flipped,N[rt][nt]=D):(G=p?null:new f(R,-1,nt,rt,d.tilewidth,d.tileheight),N[rt][nt]=G),z++,z===H.width&&(_++,z=0)}}else{R=new n({name:T.name+P.name,id:P.id,x:T.x+l(P,"offsetx",0)+P.x,y:T.y+l(P,"offsety",0)+P.y,width:P.width,height:P.height,tileWidth:d.tilewidth,tileHeight:d.tileheight,alpha:T.opacity*P.opacity,visible:T.visible&&P.visible,properties:l(P,"properties",[]),orientation:h(d.orientation)}),R.orientation===y.HEXAGONAL&&(R.hexSideLength=d.hexsidelength,R.staggerAxis=d.staggeraxis,R.staggerIndex=d.staggerindex,R.staggerAxis==="y"?(F=(R.tileHeight-R.hexSideLength)/2,R.widthInPixels=R.tileWidth*(R.width+.5),R.heightInPixels=R.height*(R.hexSideLength+F)+F):(B=(R.tileWidth-R.hexSideLength)/2,R.widthInPixels=R.width*(R.hexSideLength+B)+B,R.heightInPixels=R.tileHeight*(R.height+.5)));for(var ot=[],dt=0,vt=P.data.length;dt<vt;dt++)A=o(P.data[dt]),A.gid>0?(D=new f(R,A.gid,z,N.length,d.tilewidth,d.tileheight),D.rotation=A.rotation,D.flipX=A.flipped,ot.push(D)):(G=p?null:new f(R,-1,z,N.length,d.tilewidth,d.tileheight),ot.push(G)),z++,z===P.width&&(N.push(ot),z=0,ot=[])}R.data=N,g.push(R)}return g};S.exports=r},24619:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(33629),y=s(16536),u=s(52205),h=s(57880),l=function(n){for(var o=[],f=[],r=null,d,p=0;p<n.tilesets.length;p++){var v=n.tilesets[p];if(v.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(v.image){var g=new c(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,void 0,void 0,v.tileoffset);if(n.version>1){var m=void 0,T=void 0;if(Array.isArray(v.tiles)){m=m||{},T=T||{};for(var P=0;P<v.tiles.length;P++){var M=v.tiles[P];if(M.properties){var b={};M.properties.forEach(function(Z){b[Z.name]=Z.value}),T[M.id]=b}if(M.objectgroup&&((m[M.id]||(m[M.id]={})).objectgroup=M.objectgroup,M.objectgroup.objects)){var R=M.objectgroup.objects.map(function(Z){return u(Z)});m[M.id].objectgroup.objects=R}M.animation&&((m[M.id]||(m[M.id]={})).animation=M.animation),M.type&&((m[M.id]||(m[M.id]={})).type=M.type)}}Array.isArray(v.wangsets)&&(m=m||{},T=T||{},h(v.wangsets,m)),m&&(g.tileData=m,g.tileProperties=T)}else if(v.tileproperties&&(g.tileProperties=v.tileproperties),v.tiles){g.tileData=v.tiles;for(d in g.tileData){var A=g.tileData[d].objectgroup;if(A&&A.objects){var D=A.objects.map(function(Z){return u(Z)});g.tileData[d].objectgroup.objects=D}}}g.updateTileData(v.imagewidth,v.imageheight),o.push(g)}else{var G=new y(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,v.properties),F=0;for(P=0;P<v.tiles.length;P++){M=v.tiles[P];var B=M.image,N=parseInt(M.id,10),z=v.firstgid+N,$=M.imagewidth,Q=M.imageheight;G.addImage(z,B,$,Q),F=Math.max(N,F)}G.maxId=F,f.push(G)}r&&(r.lastgid=v.firstgid-1),r=v}return{tilesets:o,imageCollections:f}};S.exports=l},57880:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){for(var y=0;y<s.length;y++){var u=s[y],h=y;if(u.name&&u.name!==""&&(h=u.name),Array.isArray(u.wangtiles)&&u.wangtiles.length>0){var l={},n={},o,f,r;if(Array.isArray(u.edgecolors))for(o=0;o<u.edgecolors.length;o++)r=1+o,f=u.edgecolors[o],f.name!==""&&(l[r]=f.name);if(Array.isArray(u.cornercolors))for(o=0;o<u.cornercolors.length;o++)r=1+o,f=u.cornercolors[o],f.name!==""&&(n[r]=f.name);if(Array.isArray(u.colors))for(o=0;o<u.colors.length;o++)f=u.colors[o],r=1+o,f.name!==""&&(l[r]=n[r]=f.name);for(var d=[l,n,l,n,l,n,l,n],p=0;p<u.wangtiles.length;p++){var v=u.wangtiles[p],g=c[v.tileid]||(c[v.tileid]={});g=g.wangid||(g.wangid={});for(var m=[],T=0;T<Math.min(d.length,v.wangid.length);T++){if(f=v.wangid[T],f===0){m.push(void 0);continue}var P=d[T][f];if(P!==void 0){m.push(P);continue}m.push(f)}g[h]=m}}}};S.exports=w},96761:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={AssignTileProperties:s(51233),Base64Decode:s(41868),BuildTilesetIndex:s(84101),CreateGroupLayer:s(79677),ParseGID:s(29920),ParseImageLayers:s(12635),ParseJSONTiled:s(46594),ParseObject:s(52205),ParseObjectLayers:s(22611),ParseTileLayers:s(28200),ParseTilesets:s(24619)}},33385:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(37277),u=s(44594),h=s(94880),l=s(72905),n=new c({initialize:function(f){this.scene=f,this.systems=f.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],f.sys.events.once(u.BOOT,this.boot,this),f.sys.events.on(u.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var o=this.systems.events;o.on(u.PRE_UPDATE,this.preUpdate,this),o.on(u.UPDATE,this.update,this),o.once(u.SHUTDOWN,this.shutdown,this)},addEvent:function(o){var f;if(o instanceof h){if(f=o,this.removeEvent(f),f.elapsed=f.startAt,f.hasDispatched=!1,f.repeatCount=f.repeat===-1||f.loop?999999999999:f.repeat,f.delay<=0&&f.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay")}else f=new h(o);return this._pendingInsertion.push(f),f},delayedCall:function(o,f,r,d){return this.addEvent({delay:o,callback:f,args:r,callbackScope:d})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(o){Array.isArray(o)||(o=[o]);for(var f=0;f<o.length;f++){var r=o[f];l(this._pendingRemoval,r),l(this._pendingInsertion,r),l(this._active,r)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var o=this._pendingRemoval.length,f=this._pendingInsertion.length;if(!(o===0&&f===0)){var r,d;for(r=0;r<o;r++){d=this._pendingRemoval[r];var p=this._active.indexOf(d);p>-1&&this._active.splice(p,1),d.destroy()}for(r=0;r<f;r++)d=this._pendingInsertion[r],this._active.push(d);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(o,f){if(this.now=o,!this.paused){f*=this.timeScale;for(var r=0;r<this._active.length;r++){var d=this._active[r];if(!d.paused&&(d.elapsed+=f*d.timeScale,d.elapsed>=d.delay)){var p=d.elapsed-d.delay;if(d.elapsed=d.delay,!d.hasDispatched&&d.callback&&(d.hasDispatched=!0,d.callback.apply(d.callbackScope,d.args)),d.repeatCount>0){if(d.repeatCount--,p>=d.delay)for(;p>=d.delay&&d.repeatCount>0;)d.callback&&d.callback.apply(d.callbackScope,d.args),p-=d.delay,d.repeatCount--;d.elapsed=p,d.hasDispatched=!1}else d.hasDispatched&&this._pendingRemoval.push(d)}}}},shutdown:function(){var o;for(o=0;o<this._pendingInsertion.length;o++)this._pendingInsertion[o].destroy();for(o=0;o<this._active.length;o++)this._active[o].destroy();for(o=0;o<this._pendingRemoval.length;o++)this._pendingRemoval[o].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var f=this.systems.events;f.off(u.PRE_UPDATE,this.preUpdate,this),f.off(u.UPDATE,this.update,this),f.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});y.register("Clock",n,"time"),S.exports=n},96120:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(50792),u=s(39429),h=s(95540),l=s(44594),n=s(89809),o=new c({Extends:y,initialize:function(r,d){y.call(this),this.scene=r,this.systems=r.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var p=this.systems.events;p.on(l.PRE_UPDATE,this.preUpdate,this),p.on(l.UPDATE,this.update,this),p.once(l.SHUTDOWN,this.destroy,this),d&&this.add(d)},preUpdate:function(f,r){this.paused||(this.elapsed+=r*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var f,r=this.events,d=!1,p=this.systems,v;for(f=0;f<r.length;f++){var g=r[f];if(!g.complete&&g.time<=this.elapsed){if(g.complete=!0,this.totalComplete++,v=g.target?g.target:this,g.if&&!g.if.call(v,g))continue;if(g.once&&(d=!0),g.set&&g.target)for(var m in g.set)g.target[m]=g.set[m];this.iteration&&g.repeat++,g.loop&&g.repeat&&g.loop.call(v),g.tween&&(g.tweenInstance=p.tweens.add(g.tween)),g.sound&&(typeof g.sound=="string"?p.sound.play(g.sound):p.sound.play(g.sound.key,g.sound.config)),g.event&&this.emit(g.event,v),g.run&&g.run.call(v),g.stop&&this.stop()}}if(d)for(f=0;f<r.length;f++)r[f].complete&&r[f].once&&(r.splice(f,1),f--);this.totalComplete>=r.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(n.COMPLETE,this)}},play:function(f){return f===void 0&&(f=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,f&&this.reset(),this},pause:function(){this.paused=!0;for(var f=this.events,r=0;r<f.length;r++){var d=f[r];d.tweenInstance&&(d.tweenInstance.paused=!0)}return this},repeat:function(f){return(f===void 0||f===!0)&&(f=-1),f===!1&&(f=0),this.loop=f,this},resume:function(){this.paused=!1;for(var f=this.events,r=0;r<f.length;r++){var d=f[r];d.tweenInstance&&(d.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(f){f===void 0&&(f=!1),this.elapsed=0,f||(this.iteration=0);for(var r=this.events,d=0;d<r.length;d++){var p=r[d];p.complete=!1,f||(p.repeat=0),p.tweenInstance&&p.tweenInstance.stop()}return this.play(!1)},add:function(f){Array.isArray(f)||(f=[f]);var r=this.events,d=0;r.length>0&&(d=r[r.length-1].time);for(var p=0;p<f.length;p++){var v=f[p],g=h(v,"at",0),m=h(v,"in",null);m!==null&&(g=this.elapsed+m);var T=h(v,"from",null);T!==null&&(g=d+T),r.push({complete:!1,time:g,repeat:0,if:h(v,"if",null),run:h(v,"run",null),loop:h(v,"loop",null),event:h(v,"event",null),target:h(v,"target",null),set:h(v,"set",null),tween:h(v,"tween",null),sound:h(v,"sound",null),once:h(v,"once",!1),stop:h(v,"stop",!1)}),d=g}return this.complete=!1,this},clear:function(){for(var f=this.events,r=0;r<f.length;r++){var d=f[r];d.tweenInstance&&d.tweenInstance.stop()}return f=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var f=Math.min(this.totalComplete,this.events.length);return f/this.events.length},destroy:function(){var f=this.systems.events;f.off(l.PRE_UPDATE,this.preUpdate,this),f.off(l.UPDATE,this.update,this),f.off(l.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});u.register("timeline",function(f){return new o(this.scene,f)}),S.exports=o},94880:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(95540),u=new c({initialize:function(l){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(l)},reset:function(h){if(this.delay=y(h,"delay",0),this.repeat=y(h,"repeat",0),this.loop=y(h,"loop",!1),this.callback=y(h,"callback",void 0),this.callbackScope=y(h,"callbackScope",this),this.args=y(h,"args",[]),this.timeScale=y(h,"timeScale",1),this.startAt=y(h,"startAt",0),this.paused=y(h,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay<=0&&this.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var h=this.delay+this.delay*this.repeat,l=this.elapsed+this.delay*(this.repeat-this.repeatCount);return l/h}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(h){h===void 0&&(h=!1),this.elapsed=this.delay,this.hasDispatched=!h,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});S.exports=u},35945:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="complete"},89809:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={COMPLETE:s(35945)}},90291:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Clock:s(33385),Events:s(89809),Timeline:s(96120),TimerEvent:s(94880)}},40382:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(72905),y=s(83419),u=s(43491),h=s(88032),l=s(37277),n=s(44594),o=s(93109),f=s(86081),r=s(8357),d=s(43960),p=s(26012),v=new y({initialize:function(m){this.scene=m,this.events=m.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(n.UPDATE,this.update,this),this.events.once(n.SHUTDOWN,this.shutdown,this)},create:function(g){Array.isArray(g)||(g=[g]);for(var m=[],T=0;T<g.length;T++){var P=g[T];P instanceof f||P instanceof d?m.push(P):Array.isArray(P.tweens)?m.push(p(this,P)):m.push(r(this,P))}return m.length===1?m[0]:m},add:function(g){var m=g,T=this.tweens;return m instanceof f||m instanceof d||(Array.isArray(m.tweens)?m=p(this,m):m=r(this,m)),T.push(m.reset()),m},addMultiple:function(g){for(var m,T=[],P=this.tweens,M=0;M<g.length;M++)m=g[M],m instanceof f||m instanceof d||(Array.isArray(m.tweens)?m=p(this,m):m=r(this,m)),P.push(m.reset()),T.push(m);return T},chain:function(g){var m=p(this,g);return this.tweens.push(m.init()),m},getChainedTweens:function(g){return g.getChainedTweens()},has:function(g){return this.tweens.indexOf(g)>-1},existing:function(g){return this.has(g)||this.tweens.push(g.reset()),this},addCounter:function(g){var m=h(this,g);return this.tweens.push(m.reset()),m},stagger:function(g,m){return o(g,m)},setLagSmooth:function(g,m){return g===void 0&&(g=1/1e-8),m===void 0&&(m=0),this.maxLag=g,this.lagSkip=Math.min(m,this.maxLag),this},setFps:function(g){return g===void 0&&(g=240),this.gap=1e3/g,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(g){var m=Date.now()-this.prevTime;m>this.maxLag&&(this.startTime+=m-this.lagSkip),this.prevTime+=m;var T=this.prevTime-this.startTime,P=T-this.nextTime,M=T-this.time*1e3;return P>0||g?(T/=1e3,this.time=T,this.nextTime+=P+(P>=this.gap?4:this.gap-P)):M=0,M},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(g){g===void 0&&(g=!1);var m=this.getDelta(g);if(!(m<=0)){this.processing=!0;var T,P,M=[],b=this.tweens;for(T=0;T<b.length;T++)P=b[T],P.update(m)&&M.push(P);var R=M.length;if(R&&b.length>0){for(T=0;T<R;T++){P=M[T];var A=b.indexOf(P);A>-1&&(P.isPendingRemove()||P.isDestroyed())&&(b.splice(A,1),P.destroy())}M.length=0}this.processing=!1}},remove:function(g){return this.processing?g.setPendingRemoveState():(c(this.tweens,g),g.setRemovedState()),this},reset:function(g){return this.existing(g),g.seek(),g.setActiveState(),this},makeActive:function(g){return this.existing(g),g.setActiveState(),this},each:function(g,m){var T,P=[null];for(T=1;T<arguments.length;T++)P.push(arguments[T]);return this.tweens.forEach(function(M){P[0]=M,g.apply(m,P)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(g){var m=[],T=this.tweens;Array.isArray(g)?g=u(g):g=[g];for(var P=g.length,M=0;M<T.length;M++)for(var b=T[M],R=0;R<P;R++)!b.isDestroyed()&&b.hasTarget(g[R])&&m.push(b);return m},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(g){return this.timeScale=g,this},isTweening:function(g){for(var m=this.tweens,T,P=0;P<m.length;P++)if(T=m[P],T.isPlaying()&&T.hasTarget(g))return!0;return!1},killAll:function(){for(var g=this.processing?this.getTweens():this.tweens,m=0;m<g.length;m++)g[m].destroy();return this.processing||(g.length=0),this},killTweensOf:function(g){for(var m=this.getTweensOf(g),T=0;T<m.length;T++)m[T].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(n.UPDATE,this.update,this),this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.events=null}});l.register("TweenManager",v,"tweens"),S.exports=v},57355:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){return s&&s.hasOwnProperty(c)?s[c]:y};S.exports=w},6113:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(62640),y=s(35355),u=function(h,l){var n=c.Power0;if(typeof h=="string")if(c.hasOwnProperty(h))n=c[h];else{var o="";if(h.indexOf(".")){o=h.substring(h.indexOf(".")+1);var f=o.toLowerCase();f==="in"?o="easeIn":f==="out"?o="easeOut":f==="inout"&&(o="easeInOut")}h=y(h.substring(0,h.indexOf(".")+1)+o),c.hasOwnProperty(h)&&(n=c[h])}else typeof h=="function"&&(n=h);if(!l)return n;var r=l.slice(0);return r.unshift(0),function(d){return r[0]=d,n.apply(this,r)}};S.exports=u},91389:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(89318),y=s(77259),u=s(28392),h={bezier:c,catmull:y,catmullrom:y,linear:u},l=function(n){if(n===null)return null;var o=h.linear;return typeof n=="string"?h.hasOwnProperty(n)&&(o=h[n]):typeof n=="function"&&(o=n),o};S.exports=l},55292:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u;if(s.hasOwnProperty(c)){var h=typeof s[c];h==="function"?u=function(l,n,o,f,r,d){return s[c](l,n,o,f,r,d)}:u=function(){return s[c]}}else typeof y=="function"?u=y:u=function(){return y};return u};S.exports=w},82985:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(81076),y=function(u){var h,l=[];if(u.hasOwnProperty("props"))for(h in u.props)h.substring(0,1)!=="_"&&l.push({key:h,value:u.props[h]});else for(h in u)c.indexOf(h)===-1&&h.substring(0,1)!=="_"&&l.push({key:h,value:u[h]});return l};S.exports=y},62329:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35154),y=function(u){var h=c(u,"targets",null);return h===null||(typeof h=="function"&&(h=h.call()),Array.isArray(h)||(h=[h])),h};S.exports=y},17777:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(30976),y=s(99472);function u(f){return!!f.getActive&&typeof f.getActive=="function"}function h(f){return!!f.getStart&&typeof f.getStart=="function"}function l(f){return!!f.getEnd&&typeof f.getEnd=="function"}function n(f){return h(f)||l(f)||u(f)}var o=function(f,r){var d,p=function(Z,tt,H){return H},v=function(Z,tt,H){return H},g=null,m=typeof r;if(m==="number")p=function(){return r};else if(Array.isArray(r))v=function(){return r[0]},p=function(){return r[r.length-1]};else if(m==="string"){var T=r.toLowerCase(),P=T.substring(0,6)==="random",M=T.substring(0,3)==="int";if(P||M){var b=T.indexOf("("),R=T.indexOf(")"),A=T.indexOf(",");if(b&&R&&A){var D=parseFloat(T.substring(b+1,A)),G=parseFloat(T.substring(A+1,R));P?p=function(){return y(D,G)}:p=function(){return c(D,G)}}else throw new Error("invalid random() format")}else{T=T[0];var F=parseFloat(r.substr(2));switch(T){case"+":p=function(Z,tt,H){return H+F};break;case"-":p=function(Z,tt,H){return H-F};break;case"*":p=function(Z,tt,H){return H*F};break;case"/":p=function(Z,tt,H){return H/F};break;default:p=function(){return parseFloat(r)}}}}else if(m==="function")p=r;else if(m==="object")if(n(r))u(r)&&(g=r.getActive),l(r)&&(p=r.getEnd),h(r)&&(v=r.getStart);else if(r.hasOwnProperty("value"))d=o(f,r.value);else{var B=r.hasOwnProperty("to"),N=r.hasOwnProperty("from"),z=r.hasOwnProperty("start");if(B&&(N||z)){if(d=o(f,r.to),z){var $=o(f,r.start);d.getActive=$.getEnd}if(N){var Q=o(f,r.from);d.getStart=Q.getEnd}}}return d||(d={getActive:g,getEnd:p,getStart:v}),d};S.exports=o},88032:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(70402),y=s(69902),u=s(23568),h=s(57355),l=s(6113),n=s(95540),o=s(55292),f=s(35154),r=s(17777),d=s(269),p=s(86081),v=function(g,m,T){if(m instanceof p)return m.parent=g,m;T===void 0?T=y:T=d(y,T);var P=n(m,"from",0),M=n(m,"to",1),b=[{value:P}],R=n(m,"delay",T.delay),A=n(m,"easeParams",T.easeParams),D=n(m,"ease",T.ease),G=r("value",M),F=new p(g,b),B=F.add(0,"value",G.getEnd,G.getStart,G.getActive,l(n(m,"ease",D),n(m,"easeParams",A)),o(m,"delay",R),n(m,"duration",T.duration),h(m,"yoyo",T.yoyo),n(m,"hold",T.hold),n(m,"repeat",T.repeat),n(m,"repeatDelay",T.repeatDelay),!1,!1);B.start=P,B.current=P,F.completeDelay=u(m,"completeDelay",0),F.loop=Math.round(u(m,"loop",0)),F.loopDelay=Math.round(u(m,"loopDelay",0)),F.paused=h(m,"paused",!1),F.persist=h(m,"persist",!1),F.isNumberTween=!0,F.callbackScope=f(m,"callbackScope",F);for(var N=c.TYPES,z=0;z<N.length;z++){var $=N[z],Q=f(m,$,!1);if(Q){var Z=f(m,$+"Params",[]);F.setCallback($,Q,Z)}}return F};S.exports=v},93109:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(6113),y=s(35154),u=s(36383),h=function(l,n){n===void 0&&(n={});var o,f=y(n,"start",0),r=y(n,"ease",null),d=y(n,"grid",null),p=y(n,"from",0),v=p==="first",g=p==="center",m=p==="last",T=typeof p=="number",P=Array.isArray(l),M=parseFloat(P?l[0]:l),b=P?parseFloat(l[1]):0,R=Math.max(M,b);if(P&&(f+=M),d){var A=d[0],D=d[1],G=0,F=0,B=0,N=0,z=[];m?(G=A-1,F=D-1):T?(G=p%A,F=Math.floor(p/A)):g&&(G=(A-1)/2,F=(D-1)/2);for(var $=u.MIN_SAFE_INTEGER,Q=0;Q<D;Q++){z[Q]=[];for(var Z=0;Z<A;Z++){B=G-Z,N=F-Q;var tt=Math.sqrt(B*B+N*N);tt>$&&($=tt),z[Q][Z]=tt}}}var H=r?c(r):null;return d?o=function(J,Y,_,U){var et=0,nt=U%A,rt=Math.floor(U/A);nt>=0&&nt<A&&rt>=0&&rt<D&&(et=z[rt][nt]);var ot;if(P){var dt=b-M;H?ot=et/$*dt*H(et/$):ot=et/$*dt}else H?ot=et*M*H(et/$):ot=et*M;return ot+f}:o=function(J,Y,_,U,et){et--;var nt;v?nt=U:g?nt=Math.abs(et/2-U):m?nt=et-U:T&&(nt=Math.abs(p-U));var rt;if(P){var ot;g?ot=(b-M)/et*(nt*2):ot=(b-M)/et*nt,H?rt=ot*H(nt/et):rt=ot}else H?rt=et*R*H(nt/et):rt=nt*M;return rt+f},o};S.exports=h},8357:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(70402),y=s(69902),u=s(23568),h=s(57355),l=s(6113),n=s(95540),o=s(91389),f=s(55292),r=s(82985),d=s(62329),p=s(35154),v=s(17777),g=s(269),m=s(86081),T=function(P,M,b){if(M instanceof m)return M.parent=P,M;b===void 0?b=y:b=g(y,b);var R=d(M);!R&&b.targets&&(R=b.targets);for(var A=r(M),D=n(M,"delay",b.delay),G=n(M,"duration",b.duration),F=n(M,"easeParams",b.easeParams),B=n(M,"ease",b.ease),N=n(M,"hold",b.hold),z=n(M,"repeat",b.repeat),$=n(M,"repeatDelay",b.repeatDelay),Q=h(M,"yoyo",b.yoyo),Z=h(M,"flipX",b.flipX),tt=h(M,"flipY",b.flipY),H=n(M,"interpolation",b.interpolation),J=function(gt,yt,St,Ct){if(St==="texture"){var bt=Ct,At=void 0;Array.isArray(Ct)?(bt=Ct[0],At=Ct[1]):Ct.hasOwnProperty("value")?(bt=Ct.value,Array.isArray(Ct.value)?(bt=Ct.value[0],At=Ct.value[1]):typeof Ct.value=="string"&&(bt=Ct.value)):typeof Ct=="string"&&(bt=Ct),gt.addFrame(yt,bt,At,f(Ct,"delay",D),n(Ct,"duration",G),n(Ct,"hold",N),n(Ct,"repeat",z),n(Ct,"repeatDelay",$),h(Ct,"flipX",Z),h(Ct,"flipY",tt))}else{var Lt=v(St,Ct),Tt=o(n(Ct,"interpolation",H));gt.add(yt,St,Lt.getEnd,Lt.getStart,Lt.getActive,l(n(Ct,"ease",B),n(Ct,"easeParams",F)),f(Ct,"delay",D),n(Ct,"duration",G),h(Ct,"yoyo",Q),n(Ct,"hold",N),n(Ct,"repeat",z),n(Ct,"repeatDelay",$),h(Ct,"flipX",Z),h(Ct,"flipY",tt),Tt,Tt?Ct:null)}},Y=new m(P,R),_=0;_<A.length;_++)for(var U=A[_].key,et=A[_].value,nt=0;nt<R.length;nt++)U==="scale"&&!R[nt].hasOwnProperty("scale")?(J(Y,nt,"scaleX",et),J(Y,nt,"scaleY",et)):J(Y,nt,U,et);Y.completeDelay=u(M,"completeDelay",0),Y.loop=Math.round(u(M,"loop",0)),Y.loopDelay=Math.round(u(M,"loopDelay",0)),Y.paused=h(M,"paused",!1),Y.persist=h(M,"persist",!1),Y.callbackScope=n(M,"callbackScope",Y);for(var rt=c.TYPES,ot=0;ot<rt.length;ot++){var dt=rt[ot],vt=p(M,dt,!1);if(vt){var mt=p(M,dt+"Params",[]);Y.setCallback(dt,vt,mt)}}return Y};S.exports=T},26012:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(70402),y=s(23568),u=s(57355),h=s(62329),l=s(35154),n=s(8357),o=s(43960),f=function(r,d){if(d instanceof o)return d.parent=r,d;var p=new o(r);p.startDelay=l(d,"delay",0),p.completeDelay=y(d,"completeDelay",0),p.loop=Math.round(y(d,"loop",l(d,"repeat",0))),p.loopDelay=Math.round(y(d,"loopDelay",l(d,"repeatDelay",0))),p.paused=u(d,"paused",!1),p.persist=u(d,"persist",!1),p.callbackScope=l(d,"callbackScope",p);var v,g=c.TYPES;for(v=0;v<g.length;v++){var m=g[v],T=l(d,m,!1);if(T){var P=l(d,m+"Params",[]);p.setCallback(m,T,P)}}var M=l(d,"tweens",null);if(Array.isArray(M)){var b=[],R=h(d),A=void 0;for(R&&(A={targets:R}),v=0;v<M.length;v++)b.push(n(p,M[v],A));p.add(b)}return p};S.exports=f},30231:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={GetBoolean:s(57355),GetEaseFunction:s(6113),GetInterpolationFunction:s(91389),GetNewValue:s(55292),GetProps:s(82985),GetTargets:s(62329),GetValueOp:s(17777),NumberTweenBuilder:s(88032),StaggerBuilder:s(93109),TweenBuilder:s(8357)}},73685:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="active"},98540:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="complete"},67233:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="loop"},2859:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="pause"},98336:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="repeat"},25764:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="resume"},32193:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="start"},84371:S=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="stop"},70766:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="update"},55659:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports="yoyo"},842:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={TWEEN_ACTIVE:s(73685),TWEEN_COMPLETE:s(98540),TWEEN_LOOP:s(67233),TWEEN_PAUSE:s(2859),TWEEN_RESUME:s(25764),TWEEN_REPEAT:s(98336),TWEEN_START:s(32193),TWEEN_STOP:s(84371),TWEEN_UPDATE:s(70766),TWEEN_YOYO:s(55659)}},43066:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c={States:s(86353),Builders:s(30231),Events:s(842),TweenManager:s(40382),Tween:s(86081),TweenData:s(48177),TweenFrameData:s(42220),BaseTween:s(70402),TweenChain:s(43960)};S.exports=c},70402:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(50792),u=s(842),h=s(86353),l=new c({Extends:y,initialize:function(o){y.call(this),this.parent=o,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=h.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(n){return this.timeScale=n,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(u.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(u.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(u.TWEEN_COMPLETE,"onComplete")},complete:function(n){return n===void 0&&(n=0),n?(this.setCompleteDelayState(),this.countdown=n):this.onCompleteHandler(),this},completeAfterLoop:function(n){return n===void 0&&(n=0),this.loopCounter>n&&(this.loopCounter=n),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(u.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(n){this.countdown-=n,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(n){return this.countdown-=n,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(u.TWEEN_START,"onStart"),n=0),n},updateCompleteDelay:function(n){this.countdown-=n,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(n,o,f){return f===void 0&&(f=[]),this.callbacks.hasOwnProperty(n)&&(this.callbacks[n]={func:o,params:f}),this},setPendingState:function(){this.state=h.PENDING},setActiveState:function(){this.state=h.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=h.LOOP_DELAY},setCompleteDelayState:function(){this.state=h.COMPLETE_DELAY},setStartDelayState:function(){this.state=h.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=h.PENDING_REMOVE},setRemovedState:function(){this.state=h.REMOVED},setFinishedState:function(){this.state=h.FINISHED},setDestroyedState:function(){this.state=h.DESTROYED},isPending:function(){return this.state===h.PENDING},isActive:function(){return this.state===h.ACTIVE},isLoopDelayed:function(){return this.state===h.LOOP_DELAY},isCompleteDelayed:function(){return this.state===h.COMPLETE_DELAY},isStartDelayed:function(){return this.state===h.START_DELAY},isPendingRemove:function(){return this.state===h.PENDING_REMOVE},isRemoved:function(){return this.state===h.REMOVED},isFinished:function(){return this.state===h.FINISHED},isDestroyed:function(){return this.state===h.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(n){n.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});l.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],S.exports=l},95042:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(83419),y=s(842),u=s(86353),h=new c({initialize:function(n,o,f,r,d,p,v,g,m,T){this.tween=n,this.targetIndex=o,this.duration=r<=0?.01:r,this.totalDuration=0,this.delay=0,this.getDelay=f,this.yoyo=d,this.hold=p,this.repeat=v,this.repeatDelay=g,this.repeatCounter=0,this.flipX=m,this.flipY=T,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(l){l===void 0&&(l=this.current),this.tween.targets[this.targetIndex][this.key]=l},setCreatedState:function(){this.state=u.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=u.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=u.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=u.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=u.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=u.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=u.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=u.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===u.CREATED},isDelayed:function(){return this.state===u.DELAY},isPendingRender:function(){return this.state===u.PENDING_RENDER},isPlayingForward:function(){return this.state===u.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===u.PLAYING_BACKWARD},isHolding:function(){return this.state===u.HOLD_DELAY},isRepeating:function(){return this.state===u.REPEAT_DELAY},isComplete:function(){return this.state===u.COMPLETE},setStateFromEnd:function(l){this.yoyo?this.onRepeat(l,!0,!0):this.repeatCounter>0?this.onRepeat(l,!0,!1):this.setCompleteState()},setStateFromStart:function(l){this.repeatCounter>0?this.onRepeat(l,!1):this.setCompleteState()},reset:function(){var l=this.tween,n=l.totalTargets,o=this.targetIndex,f=l.targets[o],r=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(f,r,0,o,n,l),this.repeatCounter=this.repeat===-1?u.MAX:this.repeat,this.setPendingRenderState();var d=this.duration+this.hold;this.yoyo&&(d+=this.duration);var p=d+this.repeatDelay;this.totalDuration=this.delay+d,this.repeat===-1?(this.totalDuration+=p*u.MAX,l.isInfinite=!0):this.repeat>0&&(this.totalDuration+=p*this.repeat),this.totalDuration>l.duration&&(l.duration=this.totalDuration),this.delay<l.startDelay&&(l.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(l,n,o){var f=this.tween,r=f.totalTargets,d=this.targetIndex,p=f.targets[d],v=this.key,g=v!=="texture";if(this.elapsed=l,this.progress=l/this.duration,this.flipX&&p.toggleFlipX(),this.flipY&&p.toggleFlipY(),g&&(n||o)&&(this.start=this.getStartValue(p,v,this.start,d,r,f)),o){this.setPlayingBackwardState(),this.dispatchEvent(y.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,g&&(this.end=this.getEndValue(p,v,this.start,d,r,f)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-l,g&&(this.current=this.start,p[v]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(y.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});S.exports=h},69902:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};S.exports=w},81076:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},86081:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(70402),y=s(83419),u=s(842),h=s(44603),l=s(39429),n=s(36383),o=s(86353),f=s(48177),r=s(42220),d=new y({Extends:c,initialize:function(v,g){c.call(this,v),this.targets=g,this.totalTargets=g.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.isNumberTween=!1},add:function(p,v,g,m,T,P,M,b,R,A,D,G,F,B,N,z){var $=new f(this,p,v,g,m,T,P,M,b,R,A,D,G,F,B,N,z);return this.totalData=this.data.push($),$},addFrame:function(p,v,g,m,T,P,M,b,R,A){var D=new r(this,p,v,g,m,T,P,M,b,R,A);return this.totalData=this.data.push(D),D},getValue:function(p){p===void 0&&(p=0);var v=null;return this.data&&(v=this.data[p].current),v},hasTarget:function(p){return this.targets&&this.targets.indexOf(p)!==-1},updateTo:function(p,v,g){if(g===void 0&&(g=!1),p!=="texture")for(var m=0;m<this.totalData;m++){var T=this.data[m];T.key===p&&(T.isPlayingForward()||T.isPlayingBackward())&&(T.end=v,g&&(T.start=T.current))}return this},restart:function(){switch(this.state){case o.REMOVED:case o.FINISHED:this.seek(),this.parent.makeActive(this);break;case o.PENDING:case o.PENDING_REMOVE:this.parent.reset(this);break;case o.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,c.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(p,v,g){if(p===void 0&&(p=0),v===void 0&&(v=16.6),g===void 0&&(g=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;g||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive");var m=this.paused;if(this.paused=!1,p>0){for(var T=Math.floor(p/v),P=p-T*v,M=0;M<T;M++)this.update(v);P>0&&this.update(P)}return this.paused=m,this.isSeeking=!1,this},initTweenData:function(p){p===void 0&&(p=!1),this.duration=0,this.startDelay=n.MAX_SAFE_INTEGER;for(var v=this.data,g=0;g<this.totalData;g++)v[g].reset(p);this.duration=Math.max(this.duration,.01);var m=this.duration,T=this.completeDelay,P=this.loopCounter,M=this.loopDelay;P>0?this.totalDuration=m+T+(m+M)*P:this.totalDuration=m+T},reset:function(p){return p===void 0&&(p=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=o.MAX),p||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")),this},update:function(p){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.paused||this.isFinished())return!1;if(p*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(p),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(p),!1;this.hasStarted||(this.startDelay-=p,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(u.TWEEN_START,"onStart"),p=0));var v=!1;if(this.isActive())for(var g=this.data,m=0;m<this.totalData;m++)g[m].update(p)&&(v=!0);this.elapsed+=p,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=p,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),v||this.nextState();var T=this.isPendingRemove();return T&&this.persist&&(this.setFinishedState(),T=!1),T},forward:function(p){return this.update(p),this},rewind:function(p){return this.update(-p),this},dispatchEvent:function(p,v){if(!this.isSeeking){if(this.emit(p,this,this.targets),!this.callbacks)return;var g=this.callbacks[v];g&&g.func.apply(this.callbackScope,[this,this.targets].concat(g.params))}},destroy:function(){c.prototype.destroy.call(this),this.targets=null}});l.register("tween",function(p){return this.scene.sys.tweens.add(p)}),h.register("tween",function(p){return this.scene.sys.tweens.create(p)}),S.exports=d},43960:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(72905),y=s(70402),u=s(83419),h=s(842),l=s(44603),n=s(39429),o=s(86353),f=new u({Extends:y,initialize:function(d){y.call(this,d),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?o.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(r){var d=this.parent.create(r);Array.isArray(d)||(d=[d]);for(var p=this.data,v=0;v<d.length;v++){var g=d[v];g.parent=this,p.push(g.reset())}return this.totalData=p.length,this},remove:function(r){return c(this.data,r),r.setRemovedState(),r===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(r){for(var d=this.data,p=0;p<this.totalData;p++)if(d[p].hasTarget(r))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(r){return r.seek(),r.setActiveState(),this},makeActive:function(r){return r.reset(),r.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(h.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var r=this.data,d=this.totalData,p=0;p<d;p++)r[p].reset(!1);this.setCurrentTween(0)},update:function(r){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.isFinished()||this.paused)return!1;if(r*=this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(r),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(r),!1;this.hasStarted||(this.startDelay-=r,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(h.TWEEN_START,"onStart"),r=0));var d=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(r)&&this.nextTween()&&this.nextState(),d=this.isPendingRemove(),d&&this.persist&&(this.setFinishedState(),d=!1)),d},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(r){this.currentIndex=r,this.currentTween=this.data[r],this.currentTween.setActiveState()},dispatchEvent:function(r,d){this.emit(r,this);var p=this.callbacks[d];p&&p.func.apply(this.callbackScope,[this].concat(p.params))},destroy:function(){y.prototype.destroy.call(this),this.currentTween=null}});n.register("tweenchain",function(r){return this.scene.sys.tweens.chain(r)}),l.register("tweenchain",function(r){return this.scene.sys.tweens.create(r)}),S.exports=f},48177:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(95042),y=s(45319),u=s(83419),h=s(842),l=new u({Extends:c,initialize:function(o,f,r,d,p,v,g,m,T,P,M,b,R,A,D,G,F){c.call(this,o,f,m,T,P,M,b,R,A,D),this.key=r,this.getActiveValue=v,this.getEndValue=d,this.getStartValue=p,this.ease=g,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=G,this.interpolationData=F},reset:function(n){c.prototype.reset.call(this);var o=this.tween.targets[this.targetIndex],f=this.key;n&&(o[f]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(o[f]=this.getActiveValue(o,f,0))},update:function(n){var o=this.tween,f=o.totalTargets,r=this.targetIndex,d=o.targets[r],p=this.key;if(!d)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(h.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(d,p,d[p],r,f,o),this.end=this.getEndValue(d,p,this.start,r,f,o),this.current=this.start,d[p]=this.start,this.setPlayingForwardState(),!0;var v=this.isPlayingForward(),g=this.isPlayingBackward();if(v||g){var m=this.elapsed,T=this.duration,P=0,M=!1;m+=n,m>=T?(P=m-T,m=T,M=!0):m<0&&(m=0);var b=y(m/T,0,1);this.elapsed=m,this.progress=b,this.previous=this.current,v||(b=1-b);var R=this.ease(b);this.interpolation?this.current=this.interpolation(this.interpolationData,R):this.current=this.start+(this.end-this.start)*R,d[p]=this.current,M&&(v?(o.isNumberTween&&(this.current=this.end,d[p]=this.current),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(P)):(o.isNumberTween&&(this.current=this.start,d[p]=this.current),this.setStateFromStart(P))),this.dispatchEvent(h.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,o){var f=this.tween;if(!f.isSeeking){var r=f.targets[this.targetIndex],d=this.key,p=this.current,v=this.previous;f.emit(n,f,d,r,p,v);var g=f.callbacks[o];g&&g.func.apply(f.callbackScope,[f,r,d,p,v].concat(g.params))}},destroy:function(){c.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});S.exports=l},42220:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(95042),y=s(45319),u=s(83419),h=s(842),l=new u({Extends:c,initialize:function(o,f,r,d,p,v,g,m,T,P,M){c.call(this,o,f,p,v,!1,g,m,T,P,M),this.key="texture",this.startTexture=null,this.endTexture=r,this.startFrame=null,this.endFrame=d,this.yoyo=m!==0},reset:function(n){c.prototype.reset.call(this);var o=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=o.texture.key,this.startFrame=o.frame.name),n&&o.setTexture(this.startTexture,this.startFrame)},update:function(n){var o=this.tween,f=this.targetIndex,r=o.targets[f];if(!r)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(h.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&r.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var d=this.isPlayingForward(),p=this.isPlayingBackward();if(d||p){var v=this.elapsed,g=this.duration,m=0,T=!1;v+=n,v>=g?(m=v-g,v=g,T=!0):v<0&&(v=0);var P=y(v/g,0,1);this.elapsed=v,this.progress=P,T&&(d?(r.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(m)):(r.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(m))),this.dispatchEvent(h.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,o){var f=this.tween;if(!f.isSeeking){var r=f.targets[this.targetIndex],d=this.key;f.emit(n,f,d,r);var p=f.callbacks[o];p&&p.func.apply(f.callbackScope,[f,r,d].concat(p.params))}},destroy:function(){c.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});S.exports=l},86353:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};S.exports=w},83419:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(l){return!!l.get&&typeof l.get=="function"||!!l.set&&typeof l.set=="function"}function s(l,n,o){var f=o?l[n]:Object.getOwnPropertyDescriptor(l,n);return!o&&f.value&&typeof f.value=="object"&&(f=f.value),f&&w(f)?(typeof f.enumerable>"u"&&(f.enumerable=!0),typeof f.configurable>"u"&&(f.configurable=!0),f):!1}function c(l,n){var o=Object.getOwnPropertyDescriptor(l,n);return o?(o.value&&typeof o.value=="object"&&(o=o.value),o.configurable===!1):!1}function y(l,n,o,f){for(var r in n)if(n.hasOwnProperty(r)){var d=s(n,r,o);if(d!==!1){var p=f||l;if(c(p.prototype,r)){if(h.ignoreFinals)continue;throw new Error("cannot override final property '"+r+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(l.prototype,r,d)}else l.prototype[r]=n[r]}}function u(l,n){if(n){Array.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++)y(l,n[o].prototype||n[o])}}function h(l){l||(l={});var n,o;if(l.initialize){if(typeof l.initialize!="function")throw new Error("initialize must be a function");n=l.initialize,delete l.initialize}else if(l.Extends){var f=l.Extends;n=function(){f.apply(this,arguments)}}else n=function(){};l.Extends?(n.prototype=Object.create(l.Extends.prototype),n.prototype.constructor=n,o=l.Extends,delete l.Extends):n.prototype.constructor=n;var r=null;return l.Mixins&&(r=l.Mixins,delete l.Mixins),u(n,r),y(n,l,!0,o),n}h.extend=y,h.mixin=u,h.ignoreFinals=!1,S.exports=h},29747:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(){};S.exports=w},20242:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(){return null};S.exports=w},71146:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h){if(h===void 0&&(h=s),y>0){var l=y-s.length;if(l<=0)return null}if(!Array.isArray(c))return s.indexOf(c)===-1?(s.push(c),u&&u.call(h,c),c):null;for(var n=c.length-1;n>=0;)s.indexOf(c[n])!==-1&&c.splice(n,1),n--;if(n=c.length,n===0)return null;y>0&&n>l&&(c.splice(l),n=l);for(var o=0;o<n;o++){var f=c[o];s.push(f),u&&u.call(h,f)}return c};S.exports=w},51067:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u,h,l){if(y===void 0&&(y=0),l===void 0&&(l=s),u>0){var n=u-s.length;if(n<=0)return null}if(!Array.isArray(c))return s.indexOf(c)===-1?(s.splice(y,0,c),h&&h.call(l,c),c):null;for(var o=c.length-1;o>=0;)s.indexOf(c[o])!==-1&&c.pop(),o--;if(o=c.length,o===0)return null;u>0&&o>n&&(c.splice(n),o=n);for(var f=o-1;f>=0;f--){var r=c[f];s.splice(y,0,r),h&&h.call(l,r)}return c};S.exports=w},66905:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=s.indexOf(c);return y!==-1&&y<s.length&&(s.splice(y,1),s.push(c)),c};S.exports=w},21612:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(82011),y=function(u,h,l,n,o){n===void 0&&(n=0),o===void 0&&(o=u.length);var f=0;if(c(u,n,o))for(var r=n;r<o;r++){var d=u[r];d[h]===l&&f++}return f};S.exports=y},95428:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u,h=[null];for(u=3;u<arguments.length;u++)h.push(arguments[u]);for(u=0;u<s.length;u++)h[0]=s[u],c.apply(y,h);return s};S.exports=w},36914:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(82011),y=function(u,h,l,n,o){if(n===void 0&&(n=0),o===void 0&&(o=u.length),c(u,n,o)){var f,r=[null];for(f=5;f<arguments.length;f++)r.push(arguments[f]);for(f=n;f<o;f++)r[0]=u[f],h.apply(l,r)}return u};S.exports=y},81957:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){if(c.length){if(c.length===1)return c[0]}else return NaN;var u=1,h,l;if(y){if(s<c[0][y])return c[0];for(;c[u][y]<s;)u++}else for(;c[u]<s;)u++;return u>c.length&&(u=c.length),y?(h=c[u-1][y],l=c[u][y],l-s<=s-h?c[u]:c[u-1]):(h=c[u-1],l=c[u],l-s<=s-h?l:h)};S.exports=w},43491:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){c===void 0&&(c=[]);for(var y=0;y<s.length;y++)Array.isArray(s[y])?w(s[y],c):c.push(s[y]);return c};S.exports=w},46710:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(82011),y=function(u,h,l,n,o){n===void 0&&(n=0),o===void 0&&(o=u.length);var f=[];if(c(u,n,o))for(var r=n;r<o;r++){var d=u[r];(!h||h&&l===void 0&&d.hasOwnProperty(h)||h&&l!==void 0&&d[h]===l)&&f.push(d)}return f};S.exports=y},58731:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(82011),y=function(u,h,l,n,o){if(n===void 0&&(n=0),o===void 0&&(o=u.length),n!==-1){if(c(u,n,o))for(var f=n;f<o;f++){var r=u[f];if(!h||h&&l===void 0&&r.hasOwnProperty(h)||h&&l!==void 0&&r[h]===l)return r}}else if(c(u,0,o))for(var f=o;f>=0;f--){var r=u[f];if(!h||h&&l===void 0&&r.hasOwnProperty(h)||h&&l!==void 0&&r[h]===l)return r}return null};S.exports=y},26546:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){c===void 0&&(c=0),y===void 0&&(y=s.length);var u=c+Math.floor(Math.random()*y);return s[u]===void 0?null:s[u]};S.exports=w},85835:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){if(c===y)return s;var u=s.indexOf(c),h=s.indexOf(y);if(u<0||h<0)throw new Error("Supplied items must be elements of the same array");return u>h||(s.splice(u,1),h=s.indexOf(y),s.splice(h+1,0,c)),s};S.exports=w},83371:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){if(c===y)return s;var u=s.indexOf(c),h=s.indexOf(y);if(u<0||h<0)throw new Error("Supplied items must be elements of the same array");return u<h||(s.splice(u,1),h===0?s.unshift(c):s.splice(h,0,c)),s};S.exports=w},70864:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=s.indexOf(c);if(y>0){var u=s[y-1],h=s.indexOf(u);s[y]=u,s[h]=c}return s};S.exports=w},69693:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=s.indexOf(c);if(u===-1||y<0||y>=s.length)throw new Error("Supplied index out of bounds");return u!==y&&(s.splice(u,1),s.splice(y,0,c)),c};S.exports=w},40853:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=s.indexOf(c);if(y!==-1&&y<s.length-1){var u=s[y+1],h=s.indexOf(u);s[y]=u,s[h]=c}return s};S.exports=w},20283:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){var h=[],l,n=!1;if((y||u)&&(n=!0,y||(y=""),u||(u="")),c<s)for(l=s;l>=c;l--)n?h.push(y+l.toString()+u):h.push(l);else for(l=s;l<=c;l++)n?h.push(y+l.toString()+u):h.push(l);return h};S.exports=w},593:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(2284),y=function(u,h,l){u===void 0&&(u=0),h===void 0&&(h=null),l===void 0&&(l=1),h===null&&(h=u,u=0);for(var n=[],o=Math.max(c((h-u)/(l||1)),0),f=0;f<o;f++)n.push(u),u+=l;return n};S.exports=y},43886:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function w(y,u,h){var l=y[u];y[u]=y[h],y[h]=l}function s(y,u){return y<u?-1:y>u?1:0}var c=function(y,u,h,l,n){for(h===void 0&&(h=0),l===void 0&&(l=y.length-1),n===void 0&&(n=s);l>h;){if(l-h>600){var o=l-h+1,f=u-h+1,r=Math.log(o),d=.5*Math.exp(2*r/3),p=.5*Math.sqrt(r*d*(o-d)/o)*(f-o/2<0?-1:1),v=Math.max(h,Math.floor(u-f*d/o+p)),g=Math.min(l,Math.floor(u+(o-f)*d/o+p));c(y,u,v,g,n)}var m=y[u],T=h,P=l;for(w(y,h,u),n(y[l],m)>0&&w(y,h,l);T<P;){for(w(y,T,P),T++,P--;n(y[T],m)<0;)T++;for(;n(y[P],m)>0;)P--}n(y[h],m)===0?w(y,h,P):(P++,w(y,P,l)),P<=u&&(h=P+1),u<=P&&(l=P-1)}};S.exports=c},88492:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35154),y=s(33680),u=function(l,n,o){for(var f=[],r=0;r<l.length;r++)for(var d=0;d<n.length;d++)for(var p=0;p<o;p++)f.push({a:l[r],b:n[d]});return f},h=function(l,n,o){var f=c(o,"max",0),r=c(o,"qty",1),d=c(o,"random",!1),p=c(o,"randomB",!1),v=c(o,"repeat",0),g=c(o,"yoyo",!1),m=[];if(p&&y(n),v===-1)if(f===0)v=0;else{var T=l.length*n.length*r;g&&(T*=2),v=Math.ceil(f/T)}for(var P=0;P<=v;P++){var M=u(l,n,r);d&&y(M),m=m.concat(M),g&&(M.reverse(),m=m.concat(M))}return f&&m.splice(f),m};S.exports=h},72905:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(19133),y=function(u,h,l,n){n===void 0&&(n=u);var o;if(!Array.isArray(h))return o=u.indexOf(h),o!==-1?(c(u,o),l&&l.call(n,h),h):null;for(var f=h.length-1,r=[];f>=0;){var d=h[f];o=u.indexOf(d),o!==-1&&(c(u,o),r.push(d),l&&l.call(n,d)),f--}return r};S.exports=y},60248:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(19133),y=function(u,h,l,n){if(n===void 0&&(n=u),h<0||h>u.length-1)throw new Error("Index out of bounds");var o=c(u,h);return l&&l.call(n,o),o};S.exports=y},81409:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(82011),y=function(u,h,l,n,o){if(h===void 0&&(h=0),l===void 0&&(l=u.length),o===void 0&&(o=u),c(u,h,l)){var f=l-h,r=u.splice(h,f);if(n)for(var d=0;d<r.length;d++){var p=r[d];n.call(o,p)}return r}else return[]};S.exports=y},31856:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(19133),y=function(u,h,l){h===void 0&&(h=0),l===void 0&&(l=u.length);var n=h+Math.floor(Math.random()*l);return c(u,n)};S.exports=y},42169:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=s.indexOf(c),h=s.indexOf(y);return u!==-1&&h===-1?(s[u]=y,!0):!1};S.exports=w},86003:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){c===void 0&&(c=1);for(var y=null,u=0;u<c;u++)y=s.shift(),s.push(y);return y};S.exports=w},49498:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){c===void 0&&(c=1);for(var y=null,u=0;u<c;u++)y=s.pop(),s.unshift(y);return y};S.exports=w},82011:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){var h=s.length;if(c<0||c>=h||c>=y||y>h){if(u)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};S.exports=w},89545:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){var y=s.indexOf(c);return y!==-1&&y>0&&(s.splice(y,1),s.unshift(c)),c};S.exports=w},17810:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(82011),y=function(u,h,l,n,o){if(n===void 0&&(n=0),o===void 0&&(o=u.length),c(u,n,o))for(var f=n;f<o;f++){var r=u[f];r.hasOwnProperty(h)&&(r[h]=l)}return u};S.exports=y},33680:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){for(var c=s.length-1;c>0;c--){var y=Math.floor(Math.random()*(c+1)),u=s[c];s[c]=s[y],s[y]=u}return s};S.exports=w},90126:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c=/\D/g;return s.sort(function(y,u){return parseInt(y.replace(c,""),10)-parseInt(u.replace(c,""),10)}),s};S.exports=w},19133:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){if(!(c>=s.length)){for(var y=s.length-1,u=s[c],h=c;h<y;h++)s[h]=s[h+1];return s.length=y,u}};S.exports=w},19186:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(82264);function y(n,o){return String(n).localeCompare(o)}function u(n,o){var f=n.length;if(f<=1)return n;for(var r=new Array(f),d=1;d<f;d*=2){h(n,o,d,r);var p=n;n=r,r=p}return n}function h(n,o,f,r){var d=n.length,p=0,v=f*2,g,m,T,P,M;for(g=0;g<d;g+=v)for(m=g+f,T=m+f,m>d&&(m=d),T>d&&(T=d),P=g,M=m;;)if(P<m&&M<T)o(n[P],n[M])<=0?r[p++]=n[P++]:r[p++]=n[M++];else if(P<m)r[p++]=n[P++];else if(M<T)r[p++]=n[M++];else break}var l=function(n,o){if(o===void 0&&(o=y),!n||n.length<2)return n;if(c.features.stableSort)return n.sort(o);var f=u(n,o);return f!==n&&h(f,null,n.length,n),n};S.exports=l},25630:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){if(c===y)return s;var u=s.indexOf(c),h=s.indexOf(y);if(u<0||h<0)throw new Error("Supplied items must be elements of the same array");return s[u]=y,s[h]=c,s};S.exports=w},37105:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Matrix:s(54915),Add:s(71146),AddAt:s(51067),BringToTop:s(66905),CountAllMatching:s(21612),Each:s(95428),EachInRange:s(36914),FindClosestInSorted:s(81957),Flatten:s(43491),GetAll:s(46710),GetFirst:s(58731),GetRandom:s(26546),MoveDown:s(70864),MoveTo:s(69693),MoveUp:s(40853),MoveAbove:s(85835),MoveBelow:s(83371),NumberArray:s(20283),NumberArrayStep:s(593),QuickSelect:s(43886),Range:s(88492),Remove:s(72905),RemoveAt:s(60248),RemoveBetween:s(81409),RemoveRandomElement:s(31856),Replace:s(42169),RotateLeft:s(86003),RotateRight:s(49498),SafeRange:s(82011),SendToBack:s(89545),SetAll:s(17810),Shuffle:s(33680),SortByDigits:s(90126),SpliceOne:s(19133),StableSort:s(19186),Swap:s(25630)}},86922:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){if(!Array.isArray(s)||!Array.isArray(s[0]))return!1;for(var c=s[0].length,y=1;y<s.length;y++)if(s[y].length!==c)return!1;return!0};S.exports=w},63362:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(41836),y=s(86922),u=function(h){var l="";if(!y(h))return l;for(var n=0;n<h.length;n++){for(var o=0;o<h[n].length;o++){var f=h[n][o].toString();f!=="undefined"?l+=c(f,2):l+="?",o<h[n].length-1&&(l+=" |")}if(n<h.length-1){l+=`
`;for(var r=0;r<h[n].length;r++)l+="---",r<h[n].length-1&&(l+="+");l+=`
`}}return l};S.exports=u},92598:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.reverse()};S.exports=w},21224:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){for(var c=0;c<s.length;c++)s[c].reverse();return s};S.exports=w},98717:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(37829),y=function(u){return c(u,180)};S.exports=y},44657:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(37829),y=function(u,h){h===void 0&&(h=1);for(var l=0;l<h;l++)u=c(u,90);return u};S.exports=y},37829:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(86922),y=s(2429),u=function(h,l){if(l===void 0&&(l=90),!c(h))return null;if(typeof l!="string"&&(l=(l%360+360)%360),l===90||l===-270||l==="rotateLeft")h=y(h),h.reverse();else if(l===-90||l===270||l==="rotateRight")h.reverse(),h=y(h);else if(Math.abs(l)===180||l==="rotate180"){for(var n=0;n<h.length;n++)h[n].reverse();h.reverse()}return h};S.exports=u},92632:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(37829),y=function(u,h){h===void 0&&(h=1);for(var l=0;l<h;l++)u=c(u,-90);return u};S.exports=y},69512:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(86003),y=s(49498),u=function(h,l,n){if(l===void 0&&(l=0),n===void 0&&(n=0),n!==0&&(n<0?c(h,Math.abs(n)):y(h,n)),l!==0)for(var o=0;o<h.length;o++){var f=h[o];l<0?c(f,Math.abs(l)):y(f,l)}return h};S.exports=u},2429:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){for(var c=s.length,y=s[0].length,u=new Array(y),h=0;h<y;h++){u[h]=new Array(c);for(var l=c-1;l>-1;l--)u[h][l]=s[l][h]}return u};S.exports=w},54915:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={CheckMatrix:s(86922),MatrixToString:s(63362),ReverseColumns:s(92598),ReverseRows:s(21224),Rotate180:s(98717),RotateLeft:s(44657),RotateMatrix:s(37829),RotateRight:s(92632),Translate:s(69512),TransposeMatrix:s(2429)}},71334:S=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(c,y){for(var u=new Uint8Array(c),h=u.length,l=y?"data:"+y+";base64,":"",n=0;n<h;n+=3)l+=w[u[n]>>2],l+=w[(u[n]&3)<<4|u[n+1]>>4],l+=w[(u[n+1]&15)<<2|u[n+2]>>6],l+=w[u[n+2]&63];return h%3===2?l=l.substring(0,l.length-1)+"=":h%3===1&&(l=l.substring(0,l.length-2)+"=="),l};S.exports=s},53134:S=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(256),c=0;c<w.length;c++)s[w.charCodeAt(c)]=c;var y=function(u){u=u.substr(u.indexOf(",")+1);var h=u.length,l=h*.75,n=0,o,f,r,d;u[h-1]==="="&&(l--,u[h-2]==="="&&l--);for(var p=new ArrayBuffer(l),v=new Uint8Array(p),g=0;g<h;g+=4)o=s[u.charCodeAt(g)],f=s[u.charCodeAt(g+1)],r=s[u.charCodeAt(g+2)],d=s[u.charCodeAt(g+3)],v[n++]=o<<2|f>>4,v[n++]=(f&15)<<4|r>>2,v[n++]=(r&3)<<6|d&63;return p};S.exports=y},65839:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={ArrayBufferToBase64:s(71334),Base64ToArrayBuffer:s(53134)}},91799:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Array:s(37105),Base64:s(65839),Objects:s(1183),String:s(31749),NOOP:s(29747),NULL:s(20242)}},41786:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c={};for(var y in s)Array.isArray(s[y])?c[y]=s[y].slice(0):c[y]=s[y];return c};S.exports=w},62644:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){var c,y,u;if(typeof s!="object"||s===null)return s;c=Array.isArray(s)?[]:{};for(u in s)y=s[u],c[u]=w(y);return c};S.exports=w},79291:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(41212),y=function(){var u,h,l,n,o,f,r=arguments[0]||{},d=1,p=arguments.length,v=!1;for(typeof r=="boolean"&&(v=r,r=arguments[1]||{},d=2),p===d&&(r=this,--d);d<p;d++)if((u=arguments[d])!=null)for(h in u)l=r[h],n=u[h],r!==n&&(v&&n&&(c(n)||(o=Array.isArray(n)))?(o?(o=!1,f=l&&Array.isArray(l)?l:[]):f=l&&c(l)?l:{},r[h]=y(v,f,n)):n!==void 0&&(r[h]=n));return r};S.exports=y},23568:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(75508),y=s(35154),u=function(h,l,n){var o=y(h,l,null);if(o===null)return n;if(Array.isArray(o))return c.RND.pick(o);if(typeof o=="object"){if(o.hasOwnProperty("randInt"))return c.RND.integerInRange(o.randInt[0],o.randInt[1]);if(o.hasOwnProperty("randFloat"))return c.RND.realInRange(o.randFloat[0],o.randFloat[1])}else if(typeof o=="function")return o(l);return o};S.exports=u},95540:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){var u=typeof s;return!s||u==="number"||u==="string"?y:s.hasOwnProperty(c)&&s[c]!==void 0?s[c]:y};S.exports=w},82840:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(35154),y=s(45319),u=function(h,l,n,o,f){f===void 0&&(f=n);var r=c(h,l,f);return y(r,n,o)};S.exports=u},35154:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){if(!s&&!u||typeof s=="number")return y;if(s&&s.hasOwnProperty(c))return s[c];if(u&&u.hasOwnProperty(c))return u[c];if(c.indexOf(".")!==-1){for(var h=c.split("."),l=s,n=u,o=y,f=y,r=!0,d=!0,p=0;p<h.length;p++)l&&l.hasOwnProperty(h[p])?(o=l[h[p]],l=l[h[p]]):r=!1,n&&n.hasOwnProperty(h[p])?(f=n[h[p]],n=n[h[p]]):d=!1;return r?o:d?f:y}else return y};S.exports=w},69036:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){for(var y=0;y<c.length;y++)if(!s.hasOwnProperty(c[y]))return!1;return!0};S.exports=w},1985:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){for(var y=0;y<c.length;y++)if(s.hasOwnProperty(c[y]))return!0;return!1};S.exports=w},97022:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.hasOwnProperty(c)};S.exports=w},41212:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){if(!s||typeof s!="object"||s.nodeType||s===s.window)return!1;try{if(s.constructor&&!{}.hasOwnProperty.call(s.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};S.exports=w},46975:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(41786),y=function(u,h){var l=c(u);for(var n in h)l.hasOwnProperty(n)||(l[n]=h[n]);return l};S.exports=y},269:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(41786),y=function(u,h){var l=c(u);for(var n in h)l.hasOwnProperty(n)&&(l[n]=h[n]);return l};S.exports=y},18254:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var c=s(97022),y=function(u,h){for(var l={},n=0;n<h.length;n++){var o=h[n];c(u,o)&&(l[o]=u[o])}return l};S.exports=y},61622:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y){if(!s||typeof s=="number")return!1;if(s.hasOwnProperty(c))return s[c]=y,!0;if(c.indexOf(".")!==-1){for(var u=c.split("."),h=s,l=s,n=0;n<u.length;n++)if(h.hasOwnProperty(u[n]))l=h,h=h[u[n]];else return!1;return l[u[u.length-1]]=y,!0}return!1};S.exports=w},1183:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Clone:s(41786),DeepCopy:s(62644),Extend:s(79291),GetAdvancedValue:s(23568),GetFastValue:s(95540),GetMinMaxValue:s(82840),GetValue:s(35154),HasAll:s(69036),HasAny:s(1985),HasValue:s(97022),IsPlainObject:s(41212),Merge:s(46975),MergeRight:s(269),Pick:s(18254),SetValue:s(61622)}},27902:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return s.replace(/%([0-9]+)/g,function(y,u){return c[Number(u)-1]})};S.exports=w},41836:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c,y,u){c===void 0&&(c=0),y===void 0&&(y=" "),u===void 0&&(u=3),s=s.toString();var h=0;if(c+1>=s.length)switch(u){case 1:s=new Array(c+1-s.length).join(y)+s;break;case 3:var l=Math.ceil((h=c-s.length)/2),n=h-l;s=new Array(n+1).join(y)+s+new Array(l+1).join(y);break;default:s=s+new Array(c+1-s.length).join(y);break}return s};S.exports=w},33628:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s,c){return c===0?s.slice(1):s.slice(0,c)+s.slice(c+1)};S.exports=w},27671:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s.split("").reverse().join("")};S.exports=w},45650:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var c=Math.random()*16|0,y=s==="x"?c:c&3|8;return y.toString(16)})};S.exports=w},35355:S=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var w=function(s){return s&&s[0].toUpperCase()+s.slice(1)};S.exports=w},31749:(S,w,s)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */S.exports={Format:s(27902),Pad:s(41836),RemoveAt:s(33628),Reverse:s(27671),UppercaseFirst:s(35355),UUID:s(45650)}}},W={};function K(S){var w=W[S];if(w!==void 0)return w.exports;var s=W[S]={exports:{}};return k[S](s,s.exports,K),s.exports}K.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var j=K(85454);return j})())})(bC);var LY=bC.exports;const ht=wC(LY);var RC={exports:{}};(function(ae,L){(function(k,W){ae.exports=W()})(EC,function(){class k{constructor(t){this.scene=t,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null}static register(t,i){k.prototype[t]=i}}var W=function(e){return e===void 0&&(e=K),this.getFrameNameCallback=e,this},K=function(e,t,i){return i==="__BASE"?`${e},${t}`:`${i}:${e},${t}`};function j(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(i=>j(i));if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(Object.getPrototypeOf(e)!==Object.prototype)return e;const t={};for(let i in e)e.hasOwnProperty(i)&&(t[i]=j(e[i]));return t}var S=function(e,t,i,a){Array.isArray(t)&&(a=i,i=t,t=void 0),t==null&&(t="__BASE"),typeof i=="number"&&arguments.length>=6?(i=[arguments[2],void 0,arguments[3]],a=[arguments[4],void 0,arguments[5]]):i===void 0&&a===void 0&&this.columns.data!==void 0&&this.rows.data!==void 0?(i=this.columns.data,a=this.rows.data):(i=j(i),a=j(a)),this.textureKey=e,this.baseFrameName=t,this.columns.data=i,this.columns.count=i?i.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=a,this.rows.count=a?a.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var x=this.scene.sys.textures.get(e);if(!x)return this.clear(),this;if(!i||!a)return this.clear(),this;for(var C=x.get(t),E=C.width,O=0,I=0,V=i.length;I<V;I++)i[I]===void 0?O++:typeof i[I]=="number"?E-=i[I]:E-=i[I].width;for(var X=O>0?E/O:0,q=C.height,st=0,I=0,V=a.length;I<V;I++)a[I]===void 0?st++:typeof a[I]=="number"?q-=a[I]:q-=a[I].width;for(var it=st?q/st:0,at,ut,lt,ft,pt,ct=0,xt=0,Mt=0,Pt=a.length;Mt<Pt;Mt++){a[Mt]===void 0&&(a[Mt]=it),typeof a[Mt]=="number"&&(a[Mt]={height:a[Mt],stretch:Mt%2}),at=a[Mt],lt=at.height,this.rows.stretch+=at.stretch|0,this.rows.minHeight+=at.stretch>0?0:lt,ct=0;for(var I=0,Ot=i.length;I<Ot;I++){if(i[I]===void 0&&(i[I]=X),typeof i[I]=="number"&&(i[I]={width:i[I],stretch:I%2}),ut=i[I],ft=ut.width,Mt===0&&(this.columns.stretch+=ut.stretch|0,this.columns.minWidth+=ut.stretch>0?0:ft),ft>=1&&lt>=1){pt=this.getFrameNameCallback(I,Mt,t);var It=typeof pt;(It==="string"||It==="number")&&x.add(pt,0,ct+C.cutX,xt+C.cutY,ft,lt)}ct+=ft}xt+=lt}return this.updateTexture(),this},w=function(){if(this.clear(),this.textureKey===void 0)return this;var e=this.scene.sys.textures.get(this.textureKey);if(!e)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,i=this.rows.minHeight*this.maxFixedPartScaleY,a=this.width-t,x=this.height-i,C=a>=0?this.maxFixedPartScaleX:this.width/t,E=x>=0?this.maxFixedPartScaleY:this.height/i;if(this.preserveRatio){var O=Math.min(C,E);if(C>O){var I=(C-O)*t;a>=0?a+=I:a=I,C=O}if(E>O){var V=(E-O)*i;x>=0?x+=V:x=V,E=O}}this.columns.scale=C,this.rows.scale=E;var X;a>0?X=this.columns.stretch>0?a/this.columns.stretch:0:X=0;var q;x>0?q=this.rows.stretch>0?x/this.rows.stretch:0:q=0;var st,it,at,ut,lt,ft=0,pt=0,ct;this._beginDraw();for(var xt=0,Mt=this.rows.count;xt<Mt;xt++){at=this.rows.data[xt],lt=at.stretch===0?at.height*E:q*at.stretch,ft=0;for(var Pt=0,Ot=this.columns.count;Pt<Ot;Pt++)it=this.columns.data[Pt],ut=it.stretch===0?it.width*C:X*it.stretch,st=this.getFrameNameCallback(Pt,xt,this.baseFrameName),e.has(st)&&ut>0&&lt>0&&(at.stretch===0&&it.stretch===0||this.getStretchMode(Pt,xt)===0?ct=0:ct=1,ct===0?this._drawImage(this.textureKey,st,ft,pt,ut,lt):this._drawTileSprite(this.textureKey,st,ft,pt,ut,lt)),ft+=ut;pt+=lt}this._endDraw()};const s=Phaser.Utils.Objects.IsPlainObject,c=Phaser.Utils.Objects.GetValue;var y=function(e){return s(e)?(this.stretchMode.edge=u(c(e,"edge",0)),this.stretchMode.internal=u(c(e,"internal",0))):(e=u(e),this.stretchMode.edge=e,this.stretchMode.internal=e),this},u=function(e){return typeof e=="string"&&(e=h[e]),e};const h={scale:0,repeat:1};var l=function(e,t){return e===0||e===this.columns.count-1||t===0||t===this.rows.count-1},n=function(e,t){return l.call(this,e,t)?this.stretchMode.edge:this.stretchMode.internal},o=function(e){return e==null&&(e=!0),this.preserveRatio=e,this},f=function(e,t){return t===void 0&&(t=e),this.maxFixedPartScaleX=e,this.maxFixedPartScaleY=t,this},r=function(){},d={_beginDraw:r,_drawImage:r,_drawTileSprite:r,_endDraw:r,setGetFrameNameCallback:W,setBaseTexture:S,updateTexture:w,setStretchMode:y,getStretchMode:n,setPreserveRatio:o,setMaxFixedPartScale:f};const p=Phaser.Utils.Objects.IsPlainObject,v=Phaser.Utils.Objects.GetValue;var g=function(e,t){class i extends e{constructor(x,C,E,O,I,V,X,q,st,it){if(p(C)?(it=C,C=v(it,"x",0),E=v(it,"y",0),O=v(it,"width",1),I=v(it,"height",1),V=v(it,"key",void 0),X=v(it,"baseFrame",void 0),q=v(it,"columns",void 0),st=v(it,"rows",void 0)):p(O)?(it=O,O=v(it,"width",1),I=v(it,"height",1),V=v(it,"key",void 0),X=v(it,"baseFrame",void 0),q=v(it,"columns",void 0),st=v(it,"rows",void 0)):p(V)?(it=V,V=v(it,"key",void 0),X=v(it,"baseFrame",void 0),q=v(it,"columns",void 0),st=v(it,"rows",void 0)):p(X)?(it=X,X=v(it,"baseFrame",void 0),q=v(it,"columns",void 0),st=v(it,"rows",void 0)):Array.isArray(X)?(it=st,st=q,q=X,X=v(it,"baseFrame",void 0)):p(q)&&(it=q,q=v(it,"columns",void 0),st=v(it,"rows",void 0)),X===void 0&&(X=v(it,"frame",void 0)),q===void 0){var at=v(it,"leftWidth",void 0),ut=v(it,"rightWidth",void 0);at!==void 0&&ut!==void 0&&(q=[at,void 0,ut])}if(st===void 0){var lt=v(it,"topHeight",void 0),ft=v(it,"bottomHeight",void 0);lt!==void 0&&ft!==void 0&&(st=[lt,void 0,ft])}super(x),this.type=t,this.setPosition(C,E).setSize(O,I).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(v(it,"getFrameNameCallback",void 0)),this.setStretchMode(v(it,"stretchMode",0)),this.setPreserveRatio(v(it,"preserveRatio",!0));var pt=v(it,"maxFixedPartScale",1),ct=v(it,"maxFixedPartScaleX",pt),xt=v(it,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(ct,xt),this.setBaseTexture(V,X,q,st)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(x,C){return this.width===x&&this.height===C?this:(super.resize?super.resize(x,C):super.setSize(x,C),this.updateTexture(),this)}get leftWidth(){return this.columns.data[0]}get rightWidth(){return this.columns.data[this.columns.count-1]}get topHeight(){return this.rows.data[0]}get bottomHeight(){return this.rows.data[this.rows.count-1]}}return Object.assign(i.prototype,d),i};const m=Phaser.Game;var T=function(e){return e instanceof m};const P=Phaser.Scene;var M=function(e){return e instanceof P},b=function(e){if(e==null||typeof e!="object")return null;if(T(e))return e;if(T(e.game))return e.game;if(M(e))return e.sys.game;if(M(e.scene))return e.scene.sys.game};const R=Phaser.GameObjects;var A=void 0,D=function(e,t){if(A||(A={},b(e).events.once("destroy",function(){for(var a in A)A[a].destroy();A=void 0})),!A.hasOwnProperty(t)){var i=b(e).scene.systemScene,e=new R[t](i);e.setOrigin(0),A[t]=e}return A[t]},G=function(e,t,i,a,x,C){var E=D(this,"Image").setTexture(e,t).setDisplaySize(x,C);this.draw(E,i,a)},F=function(e,t,i,a,x,C){var E=D(this,"TileSprite").setTexture(e,t).setSize(x,C);this.draw(E,i,a)};const B=Phaser.GameObjects.RenderTexture;let N=class extends g(B,"rexNinePatch"){};var z={_drawImage:G,_drawTileSprite:F};Object.assign(N.prototype,z);var $=function(e){return e==null||e===""||e.length===0},Q=function(e,t,i){var a=e;if(!$(t)){typeof t=="string"&&(t=t.split("."));for(var x,C=0,E=t.length;C<E;C++){if(x=t[C],a[x]==null||typeof a[x]!="object"){var O;C===E-1?O={}:O={},a[x]=O}a=a[x]}}return a},Z=function(e,t,i,a){if(a===void 0&&(a="."),typeof e=="object"){if($(t)){if(i==null)return;typeof i=="object"&&(e=i)}else{typeof t=="string"&&(t=t.split(a));var x=t.pop(),C=Q(e,t);C[x]=i}return e}};k.register("ninePatch",function(e,t,i,a,x,C,E,O){var I=new N(this.scene,e,t,i,a,x,C,E,O);return this.scene.add.existing(I),I}),Z(window,"RexPlugins.UI.NinePatch",N);const tt=Phaser.GameObjects.GetCalcMatrix;var H=function(e,t,i,a){var x=t.getRenderList();if(x.length!==0){i.addToRenderList(t);var C=e.pipelines.set(t.pipeline),E=t.frame.glTexture,O=C.setGameObject(t),I=i.roundPixels,V=tt(t,i,a),X=C.calcMatrix.copyFrom(V.calc),q=t._displayOriginX,st=t._displayOriginY,it=i.alpha*t.alpha;e.pipelines.preBatch(t);for(var at=0,ut=x.length;at<ut;at++)x[at].webglRender(C,X,it,q,st,E,O,I);e.pipelines.postBatch(t)}};const J=Phaser.Renderer.Canvas.SetTransform;var Y=function(e,t,i,a){var x=e.currentContext,C=t.getRenderList();if(!(C.length===0||!J(e,x,t,i,a))){i.addToRenderList(t);var E=i.roundPixels,O=-t._displayOriginX,I=-t._displayOriginY;x.translate(O,I);for(var V=0,X=C.length;V<X;V++)C[V].canvasRender(x,O,I,E);x.restore()}},_={renderWebGL:H,renderCanvas:Y},U=function(e,t){return this.texture=this.scene.sys.textures.get(e),this.frame=this.texture.get(t),this},et=function(e,t){if(this.width===e&&this.height===t)return this;this.width=e,this.height=t,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=e,i.hitArea.height=t),this},nt=function(e){return this.lastAppendedChildren.length=0,Array.isArray(e)?(this.children.add(e),this.lastAppendedChildren.push(...e)):(this.children.add(e),this.lastAppendedChildren.push(e)),this};const rt=Phaser.Utils.Array.Remove;var ot=function(e){return this.poolManager&&this.poolManager.free(e),rt(this.children.list,e),this.lastAppendedChildren.length=0,this.dirty=!0,this},dt=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},vt=function(){return this.lastAppendedChildren},mt=function(){return this.children.list},gt={setTint(e){return this.tint=e,this.tintFill=!1,this},setTintFill(e){return this.tint=e,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}},yt={setTexture:U,resize:et,setSize:et,addChild:nt,removeChild:ot,removeChildren:dt,clear:dt,getLastAppendedChildren:vt,getChildren:mt};Object.assign(yt,gt);class St{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const Ct=Phaser.Utils.Objects.GetValue;var bt={};let At=class{constructor(t){this.pools=Ct(t,"pools",bt)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var i=t.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new St),this.pools[i].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var i=0,a=t.length;i<a;i++)this.free(t[i]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}};const Lt=60;var Tt=!1,Et=function(e){if(!Tt){e===void 0&&(e=Lt);var t=Phaser.VERSION.split("."),i=parseInt(t[0]);if(i===3){var a=parseInt(t[1]);a<e&&console.error(`Minimum supported version : ${i}.${a}`)}else console.error(`Can't supported version : ${i}`);Tt=!0}};Et();const wt=Phaser.GameObjects.GameObject,Wt=Phaser.Utils.Objects.IsPlainObject,Zt=Phaser.Utils.Objects.GetValue,ue=Phaser.Structs.List,Qt=Phaser.Utils.Array.StableSort;class jt extends wt{constructor(t,i,a,x,C,E){Wt(i)&&(E=i,i=Zt(E,"x",0),a=Zt(E,"y",0),x=Zt(E,"texture"),C=Zt(E,"frame")),i===void 0&&(i=0),a===void 0&&(a=0),super(t,"rexBlitter"),this.children=new ue,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var O=Zt(E,"reuseBob",!0);this.poolManager=O?new At(E):void 0,this.setTexture(x,C),this.setPosition(i,a),this.setOrigin(0,0),this.clearTint(),this.initPipeline(),this.initPostPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,i=this.children.list,a=0,x=i.length;a<x;a++){var C=i[a];ve(C)&&(this.renderList.push(C),t||(t=C.depth!==0))}t&&Qt(this.renderList,Le),this.displayListDirty=!1}return this.renderList}}var ve=function(e){return e.active&&e.visible&&e.alpha>0},Le=function(e,t){return e._depth-t._depth};const Kt=Phaser.GameObjects.Components;Phaser.Class.mixin(jt,[Kt.Alpha,Kt.BlendMode,Kt.ComputedSize,Kt.Depth,Kt.GetBounds,Kt.Mask,Kt.Origin,Kt.Pipeline,Kt.PostPipeline,Kt.ScrollFactor,Kt.Transform,Kt.Visible,_,yt]);const de="image";var Nt=function(e,t,i){if(!e||typeof e=="number")return i;if(typeof t=="string"){if(e.hasOwnProperty(t))return e[t];if(t.indexOf(".")!==-1)t=t.split(".");else return i}for(var a=t,x=e,C=i,E=0;E<a.length;E++)if(t=a[E],x.hasOwnProperty(t))C=x[t],x=C;else{C=i;break}return C},ge=function(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t];return e},Oi={enableData(){return this.data===void 0&&(this.data={}),this},setData(e,t){if(this.enableData(),arguments.length===1){var i=e;for(e in i)this.data[e]=i[e]}else this.data[e]=t;return this},getData(e,t){return this.enableData(),e===void 0?this.data:Nt(this.data,e,t)},incData(e,t,i){return i===void 0&&(i=0),this.enableData(),this.setData(e,this.getData(e,i)+t),this},mulData(e,t,i){return i===void 0&&(i=0),this.enableData(),this.setData(e,this.getData(e,i)*t),this},clearData(){return this.data&&ge(this.data),this}};let os=class{constructor(t,i){this.type=i,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(os.prototype,Oi);const Es=Phaser.Math.DegToRad,ws=Phaser.Math.RadToDeg,fi=Phaser.Utils.Objects.GetValue;let OC=class extends os{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,i){return this.x=t,this.y=i,this}setRotation(t){return this.rotation=t,this}get angle(){return ws(this.rotation)}set angle(t){this.rotation=Es(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,i){return i===void 0&&(i=!1),this.width=t,i&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,i){return i===void 0&&(i=!1),this.displayWidth=t,i&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,i){return i===void 0&&(i=!1),this.displayHeight=t,i&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,i){return i===void 0&&(i=t),this.setOriginX(t).setOriginY(i),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var i=fi(t,"width",void 0),a=fi(t,"height",void 0),x=fi(t,"scale",void 0),C=fi(t,"scaleX",x),E=fi(t,"scaleY",x);i!==void 0?a===void 0&&E===void 0?this.setWidth(i,!0):this.setWidth(i):C!==void 0?this.setScaleX(C):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),a!==void 0?i===void 0&&C===void 0?this.setHeight(a,!0):this.setHeight(a):E!==void 0?this.setScaleY(E):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var O=fi(t,"origin",void 0);return O!==void 0?this.setOrigin(O):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,i,a,x,C,E,O,I){}canvasRender(t,i,a,x){}};const AC=Phaser.GameObjects.Components.TransformMatrix,LC=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var Eo=new AC,DC=function(e,t,i,a,x,C,E,O){var I=this.frame;if(I){var V=this._width,X=this._height,q=V*this.originX,st=X*this.originY,it=this.x-a,at=this.y-x,ut,lt,ft,pt,ct,xt,Mt,Pt;if(this.isCropped){var Ot=this._crop;(Ot.flipX!==this.flipX||Ot.flipY!==this.flipY)&&I.updateCropUVs(Ot,this.flipX,this.flipY),ut=Ot.u0,lt=Ot.v0,ft=Ot.u1,pt=Ot.v1,Mt=Ot.width,Pt=Ot.height,ct=Ot.x,xt=Ot.y}else ut=this.frame.u0,lt=this.frame.v0,ft=this.frame.u1,pt=this.frame.v1,Mt=V,Pt=X,ct=0,xt=0;var It=1,Bt=1;this.flipX&&(it+=V-q*2,It=-1),this.flipY&&(at+=X-st*2,Bt=-1),Eo.applyITRS(it,at,this.rotation,this.scaleX*It,this.scaleY*Bt),t.multiply(Eo,Eo);var zt=-q+ct,Vt=-st+xt,_t=zt+Mt,te=Vt+Pt,kt=Eo.setQuad(zt,Vt,_t,te,O),ce=LC(this.tint,this.alpha*i);e.batchQuad(this.parent,kt[0],kt[1],kt[2],kt[3],kt[4],kt[5],kt[6],kt[7],ut,lt,ft,pt,ce,ce,ce,ce,this.tintFill,C,E)}},FC=function(e,t,i,a){var x=this.frame;if(x){e.save();var C=this._width,E=this._height,O=C*this.originX,I=E*this.originY,V=this.x-O,X=this.y-I,q,st,it,at;if(this.isCropped){var ut=this._crop;(ut.flipX!==this.flipX||ut.flipY!==this.flipY)&&x.updateCropUVs(ut,this.flipX,this.flipY),it=ut.cw,at=ut.ch,q=ut.cx,st=ut.cy}else it=x.cutWidth,at=x.cutHeight,q=x.cutX,st=x.cutY;var lt=1,ft=1;this.flipX&&(V+=C,lt=-1),this.flipY&&(X+=E,ft=-1);var pt=x.source.resolution,ct=it/pt,xt=at/pt;a&&(V=Math.floor(V+.5),X=Math.floor(X+.5),ct+=.5,xt+=.5),e.translate(V,X),e.rotate(this.rotation),e.scale(this.scaleX*lt,this.scaleY*ft),e.drawImage(x.source.image,q,st,it,at,0,0,ct,xt),e.restore()}};const BC=Phaser.Utils.Objects.IsPlainObject;let ev=class extends OC{constructor(t,i){super(t,de),this._crop=IC(),this.setFrame(i)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!BC(t)&&(t=this.parent.texture.get(t)),this.frame=t,t?(this._width=t.realWidth,this._height=t.realHeight):(this._width=0,this._height=0),this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}setCrop(t,i,a,x){return t===void 0?(this.isCropped=!1,this):this.frame?t===0&&i===0&&a===this._width&&x===this._height?(this.isCropped=!1,this):(this.frame.setCropUVs(this._crop,t,i,a,x,this.flipX,this.flipY),this.isCropped=!0,this):this}reset(){return super.reset(),this.resetFlip().resetTint().setFrame().setCrop(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}};var IC=function(e){return e===void 0&&(e={}),e.u0=0,e.v0=0,e.u1=0,e.v1=0,e.x=0,e.y=0,e.width=0,e.height=0,e.flipX=!1,e.flipY=!1,e.cx=0,e.cy=0,e.cw=0,e.ch=0,e},GC={webglRender:DC,canvasRender:FC};Object.assign(ev.prototype,GC);var iv=function(e,t){typeof t=="string"&&(t={frame:t});var i=e.poolManager?e.poolManager.allocate(de):null;return i===null?i=new ev(e):i.setParent(e).setActive(),i.modifyPorperties(t),e.addChild(i),i},kC=function(e,t,i,a,x,C){iv(this,{frame:t,x:i,y:a,width:x,height:C})},NC=function(e,t,i,a,x,C){var E=this.texture.get(t),O=E.width,I=E.height,V=x%O,X=C%I;V===0&&(V=O),X===0&&(X=I);for(var q=Math.ceil(x/O),st=Math.ceil(C/I),it=q-1,at=st-1,ut=0;ut<q;ut++)for(var lt=0;lt<st;lt++){let ct=iv(this,{frame:t,x:i+ut*O,y:a+lt*I});var ft=ut===it?V:O,pt=lt===at?X:I;(ft!==O||pt!==I)&&ct.setCrop(0,0,ft,pt)}},VC={_drawImage:kC,_drawTileSprite:NC};class su extends g(jt,"rexNinePatch2"){setBaseTexture(t,i,a,x){return this.setTexture(t,i),super.setBaseTexture(t,i,a,x),this}}Object.assign(su.prototype,VC),k.register("ninePatch2",function(e,t,i,a,x,C,E,O){var I=new su(this.scene,e,t,i,a,x,C,E,O);return this.scene.add.existing(I),I}),Z(window,"RexPlugins.UI.NinePatch2",su);var zC=Phaser.Renderer.WebGL.Utils,sv=function(e,t,i,a,x,C){for(var E=zC.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*a),O=i.pathData,I=i.pathIndexes,V=0;V<I.length;V+=3){var X=I[V]*2,q=I[V+1]*2,st=I[V+2]*2,it=O[X+0]-x,at=O[X+1]-C,ut=O[q+0]-x,lt=O[q+1]-C,ft=O[st+0]-x,pt=O[st+1]-C,ct=t.getX(it,at),xt=t.getY(it,at),Mt=t.getX(ut,lt),Pt=t.getY(ut,lt),Ot=t.getX(ft,pt),It=t.getY(ft,pt);e.batchTri(i,ct,xt,Mt,Pt,Ot,It,0,0,1,1,E,E,E,2)}},YC=Phaser.Renderer.WebGL.Utils,wo=function(e,t,i,a,x){var C=e.strokeTint,E=YC.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*i);C.TL=E,C.TR=E,C.BL=E,C.BR=E;var O=t.pathData,I=O.length-1,V=t.lineWidth,X=V/2,q=O[0]-a,st=O[1]-x;t.closePath||(I-=2);for(var it=2;it<I;it+=2){var at=O[it]-a,ut=O[it+1]-x;e.batchLine(q,st,at,ut,X,X,V,it-2,t.closePath?it===I-1:!1),q=at,st=ut}};const WC=Phaser.GameObjects.GetCalcMatrix;var XC=function(e,t,i,a){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var x=e.pipelines.set(t.pipeline),C=WC(t,i,a),E=x.calcMatrix.copyFrom(C.calc),O=t._displayOriginX,I=t._displayOriginY,V=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&sv(x,E,t,V,O,I),t.isStroked&&wo(x,t,V,O,I),e.pipelines.postBatch(t)},qr=function(e,t,i,a){var x=t.fillColor,C=t.fillAlpha,E=(x&16711680)>>>16,O=(x&65280)>>>8,I=x&255;e.fillStyle="rgba("+E+","+O+","+I+","+C+")"},_r=function(e,t,i,a){var x=t.strokeColor,C=t.strokeAlpha,E=(x&16711680)>>>16,O=(x&65280)>>>8,I=x&255;e.strokeStyle="rgba("+E+","+O+","+I+","+C+")",e.lineWidth=t.lineWidth};const UC=Phaser.Renderer.Canvas.SetTransform;var HC=function(e,t,i,a){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var x=e.currentContext;if(UC(e,x,t,i,a)){var C=t._displayOriginX,E=t._displayOriginY,O=t.pathData,I=O.length-1,V=O[0]-C,X=O[1]-E;x.beginPath(),x.moveTo(V,X),t.closePath||(I-=2);for(var q=2;q<I;q+=2){var st=O[q]-C,it=O[q+1]-E;x.lineTo(st,it)}x.closePath(),t.isFilled&&(qr(x,t),x.fill()),t.isStroked&&(_r(x,t),x.stroke()),x.restore()}},$C={renderWebGL:XC,renderCanvas:HC};const KC=Phaser.GameObjects.Shape;class nu extends KC{get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=t!=null&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&this._fillColor!=null}setFillStyle(t,i){return i===void 0&&(i=1),this.fillColor=t,this.fillAlpha=i,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=t!=null&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this._strokeAlpha=t,this.isStroked=t>0&&this._strokeColor!=null&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&this._strokeColor!=null}setStrokeStyle(t,i,a){return a===void 0&&(a=1),this.lineWidth=t,this.strokeColor=i,this.strokeAlpha=a,this}updateData(){return this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,i){var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=t,a.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}}Object.assign(nu.prototype,$C);const Ks=Phaser.Utils.Objects.GetValue;let ru=class{constructor(t,i,a,x,C){t===void 0&&(t=0),i===void 0&&(i=t),a===void 0&&(a=0),x===void 0&&(x=0),C===void 0&&(C=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,i,a,x,C)}setTo(t,i,a,x,C){return this.setPosition(t,i),this.setRadius(C),this.setSize(a,x),this}setPosition(t,i){return this.x=t,this.y=i,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,i){return this.width=t,this.height=i,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var i,a;typeof t=="number"?(i=t,a=t):(i=Ks(t,"x",0),a=Ks(t,"y",0));var x=this.cornerRadius;x.tl=bo(Ks(t,"tl",void 0),i,a),x.tr=bo(Ks(t,"tr",void 0),i,a),x.bl=bo(Ks(t,"bl",void 0),i,a),x.br=bo(Ks(t,"br",void 0),i,a)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Ro(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Ro(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Ro(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Ro(this.cornerRadius.br,t)}};var bo=function(e,t,i){return e===void 0?e={x:t,y:i}:typeof e=="number"&&(e={x:e,y:e}),nv(e),e},Ro=function(e,t){typeof t=="number"?(e.x=t,e.y=t):(e.x=Ks(t,"x",0),e.y=Ks(t,"y",0)),nv(e)},nv=function(e){e.convex=e.x>=0||e.y>=0,e.x=Math.abs(e.x),e.y=Math.abs(e.y)},xe=function(e){return e.x>0&&e.y>0},We=function(e,t,i){var a=i.length;if(a>=2){var x=i[a-2],C=i[a-1];if(e===x&&t===C)return i}return i.push(e,t),i};const rv=Phaser.Math.DegToRad;var Xe=function(e,t,i,a,x,C,E,O,I){E&&C>x?C-=360:!E&&C<x&&(C+=360);var V=C-x,X=rv(V)/O;x=rv(x);for(var q=0;q<=O;q++){var st=x+X*q,it=e+i*Math.cos(st),at=t+a*Math.sin(st);We(it,at,I)}return I};const ZC=Phaser.Utils.Objects.IsPlainObject,av=Phaser.Utils.Objects.GetValue,JC=Phaser.Geom.Polygon.Earcut;let Pn=class extends nu{constructor(t,i,a,x,C,E,O,I){var V,X,q,st;if(ZC(i)){var it=i;i=it.x,a=it.y,x=it.width,C=it.height,E=it.radius,O=it.color,I=it.alpha,V=it.strokeColor,X=it.strokeAlpha,q=it.strokeWidth,st=it.shape}i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=1),C===void 0&&(C=x),E===void 0&&(E=0),st===void 0&&(st=0);var at=new ru;if(super(t,"rexRoundRectangleShape",at),this.setShapeType(st),this.shapeType===0){var ut=av(E,"radius",E);at.setTo(0,0,x,C,ut)}else{var ut={x:x/2,y:C/2};at.setTo(0,0,x,C,ut)}this.setIteration(av(E,"iteration",void 0)),this.setPosition(i,a),this.setFillStyle(O,I),q===void 0&&(q=2),this.setStrokeStyle(q,V,X),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,i=this.pathData;i.length=0;var a=t.width,x=t.height,C=t.cornerRadius,E,O=this.iteration+1;if(E=C.tl,xe(E))if(E.convex){var I=E.x,V=E.y;Xe(I,V,E.x,E.y,180,270,!1,O,i)}else{var I=0,V=0;Xe(I,V,E.x,E.y,90,0,!0,O,i)}else We(0,0,i);if(E=C.tr,xe(E))if(E.convex){var I=a-E.x,V=E.y;Xe(I,V,E.x,E.y,270,360,!1,O,i)}else{var I=a,V=0;Xe(I,V,E.x,E.y,180,90,!0,O,i)}else We(a,0,i);if(E=C.br,xe(E))if(E.convex){var I=a-E.x,V=x-E.y;Xe(I,V,E.x,E.y,0,90,!1,O,i)}else{var I=a,V=x;Xe(I,V,E.x,E.y,270,180,!0,O,i)}else We(a,x,i);if(E=C.bl,xe(E))if(E.convex){var I=E.x,V=x-E.y;Xe(I,V,E.x,E.y,90,180,!1,O,i)}else{var I=0,V=x;Xe(I,V,E.x,E.y,360,270,!0,O,i)}else We(0,x,i);return i.push(i[0],i[1]),this.pathIndexes=JC(i),this}setShapeType(t){return typeof t=="string"&&(t=QC[t]),this.shapeType=t,this}setSize(t,i){return i===void 0&&(i=t),this.geom.width===t&&this.geom.height===i?this:(this.geom.setSize(t,i),this.shapeType===1&&this.setRadius({x:t/2,y:i/2}),this.updateDisplayOrigin(),this.dirty=!0,super.setSize(t,i),this)}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}};const QC={rectangle:0,circle:1};k.register("roundRectangle",function(e,t,i,a,x,C,E){var O=new Pn(this.scene,e,t,i,a,x,C,E);return this.scene.add.existing(O),O}),Z(window,"RexPlugins.UI.RoundRectangle",Pn);const jC=Phaser.Renderer.WebGL.Utils;var qC=function(e,t,i,a){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){i.addToRenderList(t);var x=t.frame,C=x.width,E=x.height,O=jC.getTintAppendFloatAlpha,I=e.pipelines.set(t.pipeline,t),V=I.setTexture2D(x.glTexture,t);e.pipelines.preBatch(t),I.batchTexture(t,x.glTexture,C,E,t.x,t.y,C/t.resolution,E/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,C,E,O(t.tintTopLeft,i.alpha*t._alphaTL),O(t.tintTopRight,i.alpha*t._alphaTR),O(t.tintBottomLeft,i.alpha*t._alphaBL),O(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,a,!1,V),e.pipelines.postBatch(t)}},_C=function(e,t,i,a){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(i.addToRenderList(t),e.batchSprite(t,t.frame,i,a))},t1={renderWebGL:qC,renderCanvas:_C};const e1=Phaser.Display.Color;var i1={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(e){return this.context.fillStyle=e,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(e,t,i,a,x,C,E,O,I,V){var X=this.scene.sys.textures.getFrame(e,t);if(!X)return this;var q=X.cutWidth,st=X.cutHeight;i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=q),C===void 0&&(C=st),E===void 0&&(E=0),O===void 0&&(O=0),I===void 0&&(I=q),V===void 0&&(V=st);var it=X.cutX+E,at=X.cutY+O;return this.context.drawImage(X.source.image,it,at,I,V,i,a,x,C),this.dirty=!0,this},getDataURL(e,t){return this.canvas.toDataURL(e,t)},getPixel(e,t,i){i===void 0&&(i=new e1);var a=this.context.getImageData(e,t,1,1);return i.setTo(a.data[0],a.data[1],a.data[2],a.data[3]),i},setPixel(e,t,i,a,x,C){if(typeof i!="number"){var E=i;i=E.red,a=E.green,x=E.blue,C=E.alpha}C===void 0&&(C=i!==0||a!==0||x!==0?255:0);var O=this.context.createImageData(1,1);return O.data[0]=i,O.data[1]=a,O.data[2]=x,O.data[3]=C,this.context.putImageData(O,e,t),this.dirty=!0,this}},ov=function(e,t,i,a,x,C,E){var O=e.sys.textures,I=e.renderer;a===void 0&&(a=0),x===void 0&&(x=0),C===void 0&&(C=t.width),E===void 0&&(E=t.height);var V;O.exists(i)?V=O.get(i):V=O.createCanvas(i,C,E);var X=V.getSourceImage();X.width!==C&&(X.width=C),X.height!==E&&(X.height=E);var q=X.getContext("2d",{willReadFrequently:!0});q.clearRect(0,0,C,E),q.drawImage(t,a,x,C,E),I.gl&&V&&I.canvasToTexture(X,V.source[0].glTexture,!0,0)},s1={updateTexture(e,t){if(e){var i=this.resolution;i!==1&&(this.context.save(),this.context.scale(i,i)),t?e.call(t,this.canvas,this.context):e(this.canvas,this.context),i!==1&&this.context.restore()}(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"Canvas Game Object"}),this.dirty=!1;var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this},generateTexture(e,t,i,a,x){var C=this.canvas;return a===void 0?a=C.width:a*=this.resolution,x===void 0?x=C.height:x*=this.resolution,ov(this.scene,C,e,t,i,a,x),this},loadTexture(e,t){var i=this.scene.sys.textures.getFrame(e,t);return i?(this.width!==i.cutWidth||this.height!==i.cutHeight?this.setSize(i.cutWidth,i.cutHeight):this.clear(),this.drawFrame(e,t),this.dirty=!0,this):this}};Et();const hv=Phaser.Display.Canvas.CanvasPool,n1=Phaser.GameObjects.GameObject,r1=Phaser.Utils.String.UUID;let Zs=class extends n1{constructor(t,i,a,x,C,E){i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=1),C===void 0&&(C=1),E===void 0&&(E=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this._width=x,this._height=C,this.resolution=E,x=Math.max(Math.ceil(x*this.resolution),1),C=Math.max(Math.ceil(C*this.resolution),1),this.canvas=hv.create(this,x,C),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(i,a),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline(!0),this._crop=this.resetCropObject(),this._textureKey=r1(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){hv.remove(this.canvas),this.canvas=null,this.context=null;var t=this.texture;t&&t.destroy()}setResolution(t){if(this.resolution===t)return this;this.resolution=t;var i=Math.max(Math.ceil(this.width*t),1),a=Math.max(Math.ceil(this.height*t),1);return this.canvas.width=i,this.canvas.height=a,this.frame.source.resolution=t,this.dirty=!0,this}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setCanvasSize(t,i){return this._width===t&&this._height===i?this:(this._width=t,this._height=i,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),i=Math.max(Math.ceil(i*this.resolution),1),this.canvas.width=t,this.canvas.height=i,this.frame.setSize(t,i),this.dirty=!0,this)}setSize(t,i){return this.setCanvasSize(t,i),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,i){return this.setSize(t,i),this}};const ci=Phaser.GameObjects.Components;Phaser.Class.mixin(Zs,[ci.Alpha,ci.BlendMode,ci.Crop,ci.Depth,ci.Flip,ci.GetBounds,ci.Mask,ci.Origin,ci.Pipeline,ci.PostPipeline,ci.ScrollFactor,ci.Tint,ci.Transform,ci.Visible,t1,i1,s1]);const a1=Phaser.Utils.String.Pad;var Ut=function(e,t,i){if(e==null)return e;switch(typeof e){case"string":return e;case"number":return`#${a1(Math.floor(e).toString(16),6,"0",1)}`;case"function":return e(t,i);case"object":return e.hasOwnProperty("r")?e.hasOwnProperty("a")?`rgba(${e.r},${e.g},${e.b},${e.a})`:`rgb(${e.r},${e.g},${e.b})`:e.hasOwnProperty("h")?e.hasOwnProperty("a")?`hsla(${e.h},${e.s},${e.l},${e.a})`:`hsl(${e.h},${e.s},${e.l})`:e;default:return e}};const lv=Phaser.Math.DegToRad;var uv=function(e,t,i,a,x,C,E){var O=new ru(t,i,a,x,C),I=O.minWidth,V=O.minHeight,X=a>=I?1:a/I,q=x>=V?1:x/V,st=O.cornerRadius,it,at,ut,lt,ft,pt,ct;e.save(),e.beginPath(),e.translate(t,i),it=st.tl,Ao(it)?(at=it.x*X,ut=it.y*q,Oo(it)?(lt=at,ft=ut,Js(e,lt,ft,at,ut,180,270,!1,E)):(lt=0,ft=0,Js(e,lt,ft,at,ut,90,0,!0,E)),pt=0,ct=ut):(e.lineTo(0,0),pt=0,ct=0),it=st.tr,Ao(it)?(at=it.x*X,ut=it.y*q,Oo(it)?(lt=a-at,ft=ut,Js(e,lt,ft,at,ut,270,360,!1,E)):(lt=a,ft=0,Js(e,lt,ft,at,ut,180,90,!0,E))):e.lineTo(a,0),it=st.br,Ao(it)?(at=it.x*X,ut=it.y*q,Oo(it)?(lt=a-at,ft=x-ut,Js(e,lt,ft,at,ut,0,90,!1,E)):(lt=a,ft=x,Js(e,lt,ft,at,ut,270,180,!0,E))):e.lineTo(a,x),it=st.bl,Ao(it)?(at=it.x*X,ut=it.y*q,Oo(it)?(lt=at,ft=x-ut,Js(e,lt,ft,at,ut,90,180,!1,E)):(lt=0,ft=x,Js(e,lt,ft,at,ut,360,270,!0,E))):e.lineTo(0,x),e.lineTo(pt,ct),e.closePath(),e.restore()},Oo=function(e){return!e.hasOwnProperty("convex")||e.convex},Ao=function(e){return e.x>0&&e.y>0},Js=function(e,t,i,a,x,C,E,O,I){if(O&&E>C?E-=360:!O&&E<C&&(E+=360),C=lv(C),E=lv(E),I==null)e.ellipse(t,i,a,x,0,C,E,O);else{I+=1;for(var V,X,q,st=(E-C)/I,it=0;it<=I;it++)q=C+st*it,V=t+a*Math.cos(q),X=i+x*Math.sin(q),e.lineTo(V,X)}},o1=function(e,t,i,a,x,C,E,O,I,V,X,q,st){if(uv(t,i,a,x,C,E,st),O!=null){if(X!=null){var it;q?it=t.createLinearGradient(0,0,x,0):it=t.createLinearGradient(0,0,0,C),it.addColorStop(0,O),it.addColorStop(1,X),O=it}t.fillStyle=O,t.fill()}I!=null&&V>0&&(t.strokeStyle=I,t.lineWidth=V,t.stroke())},au=function(e,t,i,a,x,C,E,O){if(!(t==null&&i==null)){var I=e.canvas.width,V=e.canvas.height;i==null&&(a=0);var X=a/2;I=Math.max(1,I-a),V=Math.max(1,V-a),o1(e.canvas,e.context,X,X,I,V,x,t,i,a,C,E,O)}},h1=function(){au(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const dv=Phaser.Utils.Objects.GetValue;let fv=class extends Zs{constructor(t,i,a,x,C,E,O,I,V,X,q,st){i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=1),C===void 0&&(C=x),E===void 0&&(E=0),st===void 0&&(st=1),super(t,i,a,x,C,st),this.type="rexRoundRectangleCanvas";var it=dv(E,"radius",E),at=dv(E,"iteration",void 0);this.setRadius(it),this.setIteration(at),this.setFillStyle(O,X,q),this.setStrokeStyle(I,V)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=Ut(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=Ut(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,i,a){return a===void 0&&(a=!0),this.fillStyle=t,this.fillColor2=i,this.isHorizontalGradient=a,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=Ut(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,i){return this.strokeStyle=t,this.lineWidth=i,this}updateTexture(){return super.updateTexture(function(){this.clear(),h1.call(this)},this),this}};k.register("roundRectangleCanvas",function(e,t,i,a,x,C,E,O,I,V){var X=new fv(this.scene,e,t,i,a,x,C,E,O,I,V);return this.scene.add.existing(X),X}),Z(window,"RexPlugins.UI.RoundRectangleCanvas",fv);var se=function(e,t){if(!e)return!1;if(e.hasOwnProperty(t))return!0;for(;e;){if(Object.getOwnPropertyDescriptor(e,t))return!0;e=e.__proto__}return!1},Qs=function(e,t,i){!t||se(e,`${t}X`)||(Object.defineProperty(e,`${t}X`,{get:function(){return i.x},set:function(a){i.x=a,e.dirty=!0}}),Object.defineProperty(e,`${t}Y`,{get:function(){return i.y},set:function(a){i.y=a,e.dirty=!0}}),Object.defineProperty(e,`${t}T`,{get:function(){return i.t},set:function(a){i.t=a,e.dirty=!0}}))},l1={setTLPosition(e,t){return this.geom.setTLPosition(e,t),this.dirty=!0,this},setTRPosition(e,t){return this.geom.setTRPosition(e,t),this.dirty=!0,this},setBLPosition(e,t){return this.geom.setBLPosition(e,t),this.dirty=!0,this},setBRPosition(e,t){return this.geom.setBRPosition(e,t),this.dirty=!0,this},resetCornerPosition(){return this.geom.resetCornerPosition(),this.dirty=!0,this},insertTopSidePoint(e,t,i,a){var x=this.geom.topSidePoints;if(Array.isArray(e))for(var x=e,C,E=0,O=x.length;E<O;E++)C=x[E],this.geom.insertTopSidePoint(C.t,C.x,C.y),Qs(this,C.key,x[x.length-1]);else this.geom.insertTopSidePoint(e,t,i),Qs(this,a,x[x.length-1]);return this.dirty=!0,this},insertRightSidePoint(e,t,i,a){var x=this.geom.rightSidePoints;if(Array.isArray(e))for(var x=e,C,E=0,O=x.length;E<O;E++)C=x[E],this.geom.insertRightSidePoint(C.t,C.x,C.y),Qs(this,C.key,x[x.length-1]);else this.geom.insertRightSidePoint(e,t,i),Qs(this,a,x[x.length-1]);return this.dirty=!0,this},insertBottomSidePoint(e,t,i,a){var x=this.geom.bottomSidePoints;if(Array.isArray(e))for(var x=e,C,E=0,O=x.length;E<O;E++)C=x[E],this.geom.insertBottomSidePoint(C.t,C.x,C.y),Qs(this,C.key,x[x.length-1]);else this.geom.insertBottomSidePoint(e,t,i),Qs(this,a,x[x.length-1]);return this.dirty=!0,this},insertLeftSidePoint(e,t,i,a){var x=this.geom.leftSidePoints;if(Array.isArray(e))for(var x=e,C,E=0,O=x.length;E<O;E++)C=x[E],this.geom.insertLeftSidePoint(C.t,C.x,C.y),Qs(this,C.key,x[x.length-1]);else this.geom.insertLeftSidePoint(e,t,i),Qs(this,a,x[x.length-1]);return this.dirty=!0,this},clearTopSidePoints(){return this.geom.clearTopSidePoints(),this.dirty=!0,this},clearRightSidePoints(){return this.geom.clearRightSidePoints(),this.dirty=!0,this},clearBottomSidePoints(){return this.geom.clearBottomSidePoints(),this.dirty=!0,this},clearLeftSidePoints(){return this.geom.clearLeftSidePoints(),this.dirty=!0,this},clearAllSidesPoints(){return this.geom.clearAllSidesPoints(),this.dirty=!0,this}};class u1{constructor(t,i,a,x){t===void 0&&(t=0),i===void 0&&(i=t),a===void 0&&(a=0),x===void 0&&(x=0),this.setTo(t,i,a,x),this.tlx=0,this.tly=0,this.trx=0,this.try=0,this.blx=0,this.bly=0,this.brx=0,this.bry=0,this.topSidePoints=[],this.rightSidePoints=[],this.bottomSidePoints=[],this.leftSidePoints=[]}setTo(t,i,a,x){return this.setPosition(t,i),this.setSize(a,x),this}setPosition(t,i){return this.x=t,this.y=i,this}setSize(t,i){return this.width=t,this.height=i,this}setTLPosition(t,i){return this.tlx=t,this.tly=i,this}setTRPosition(t,i){return this.trx=t,this.try=i,this}setBLPosition(t,i){return this.blx=t,this.bly=i,this}setBRPosition(t,i){return this.brx=t,this.bry=i,this}resetCornerPosition(){return this.setTLPosition(0,0).setTRPosition(0,0).setBLPosition(0,0).setBRPosition(0,0),this}insertTopSidePoint(t,i,a){return Lo(this.topSidePoints,t,i,a),this}insertRightSidePoint(t,i,a){return Lo(this.rightSidePoints,t,i,a),this}insertBottomSidePoint(t,i,a){return Lo(this.bottomSidePoints,t,i,a),this}insertLeftSidePoint(t,i,a){return Lo(this.leftSidePoints,t,i,a),this}clearTopSidePoints(){return this.topSidePoints.length=0,this}clearRightSidePoints(){return this.rightSidePoints.length=0,this}clearBottomSidePoints(){return this.bottomSidePoints.length=0,this}clearLeftSidePoints(){return this.leftSidePoints.length=0,this}clearAllSidesPoints(){return this.clearTopSidePoints().clearRightSidePoints().clearBottomSidePoints().clearLeftSidePoints(),this}}var Lo=function(e,t,i,a){if(typeof t!="number"){var x=t;t=x.t,i=x.x,a=x.y}e.push({t,x:i,y:a})};const d1=Phaser.Utils.Objects.IsPlainObject,Ai=Phaser.Utils.Objects.GetValue,js=Phaser.Math.Linear,f1=Phaser.Geom.Polygon.Earcut;class ou extends nu{constructor(t,i,a,x,C,E,O){var I,V,X;if(d1(i)){var q=i;i=q.x,a=q.y,x=q.width,C=q.height,E=q.color,O=q.alpha,I=q.strokeColor,V=q.strokeAlpha,X=q.strokeWidth}i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=1),C===void 0&&(C=x);var st=new u1;super(t,"rexQuadShape",st),st.setTo(0,0,x,C),this.setPosition(i,a),this.setFillStyle(E,O),I!==void 0&&X===void 0&&(X=2),this.setStrokeStyle(X,I,V),this.setTLPosition(Ai(q,"tlx",0),Ai(q,"tly",0)).setTRPosition(Ai(q,"trx",0),Ai(q,"try",0)).setBLPosition(Ai(q,"blx",0),Ai(q,"bly",0)).setBRPosition(Ai(q,"brx",0),Ai(q,"bry",0));var it=Ai(q,"leftSidePoints");it&&this.insertLeftSidePoint(it);var at=Ai(q,"topSidePoints");at&&this.insertTopSidePoint(at);var ut=Ai(q,"rightSidePoints");ut&&this.insertRightSidePoint(ut);var lt=Ai(q,"bottomSidePoints");lt&&this.insertBottomSidePoint(lt),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,i=this.pathData;i.length=0;var a=t.width,x=t.height,C=0+t.tlx,E=0+t.tly,O=a+t.trx,I=0+t.try,V=a+t.brx,X=x+t.bry,q=0+t.blx,st=x+t.bly,it=t.topSidePoints,at=t.rightSidePoints,ut=t.bottomSidePoints,lt=t.leftSidePoints;We(C,E,i),Do(it);for(var ft=0,pt=it.length;ft<pt;ft++){var ct=it[ft],xt=js(C,O,ct.t)+ct.x,Mt=js(E,I,ct.t)+ct.y;We(xt,Mt,i)}We(O,I,i),Do(at);for(var ft=0,pt=at.length;ft<pt;ft++){var ct=at[ft],xt=js(O,V,ct.t)+ct.x,Mt=js(I,X,ct.t)+ct.y;We(xt,Mt,i)}We(V,X,i),Do(ut);for(var ft=ut.length-1;ft>=0;ft--){var ct=ut[ft],xt=js(q,V,ct.t)+ct.x,Mt=js(st,X,ct.t)+ct.y;We(xt,Mt,i)}We(q,st,i),Do(lt);for(var ft=lt.length-1;ft>=0;ft--){var ct=lt[ft],xt=js(C,q,ct.t)+ct.x,Mt=js(E,st,ct.t)+ct.y;We(xt,Mt,i)}return i.push(i[0],i[1]),this.pathIndexes=f1(i),this}get tlx(){return this.geom.tlx}set tlx(t){this.geom.tlx=t,this.dirty=!0}get tly(){return this.geom.tly}set tly(t){this.geom.tly=t,this.dirty=!0}get trx(){return this.geom.trx}set trx(t){this.geom.trx=t,this.dirty=!0}get try(){return this.geom.try}set try(t){this.geom.try=t,this.dirty=!0}get blx(){return this.geom.blx}set blx(t){this.geom.blx=t,this.dirty=!0}get bly(){return this.geom.bly}set bly(t){this.geom.bly=t,this.dirty=!0}get brx(){return this.geom.brx}set brx(t){this.geom.brx=t,this.dirty=!0}get bry(){return this.geom.bry}set bry(t){this.geom.bry=t,this.dirty=!0}get leftSidePoints(){return this.geom.leftSidePoints}get topSidePoints(){return this.geom.topSidePoints}get bottomSidePoints(){return this.geom.bottomSidePoints}get rightSidePoints(){return this.geom.rightSidePoints}}var Do=function(e){e.length<=1||e.sort(function(t,i){return t.t-i.t})};Object.assign(ou.prototype,l1),k.register("QuadShape",function(e,t,i,a,x,C){var E=new ou(this.scene,e,t,i,a,x,C);return this.scene.add.existing(E),E}),Z(window,"RexPlugins.UI.QuadShape",ou);var c1=Phaser.Renderer.WebGL.Utils,v1=function(e,t,i,a){if(!(t.width===0||t.height===0)){i.addToRenderList(t);var x=t.frame,C=x.width,E=x.height,O=c1.getTintAppendFloatAlpha,I=e.pipelines.set(t.pipeline,t),V=I.setTexture2D(x.glTexture,t);e.pipelines.preBatch(t),I.batchTexture(t,x.glTexture,C,E,t.x,t.y,C/t.style.resolution,E/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,C,E,O(t.tintTopLeft,i.alpha*t._alphaTL),O(t.tintTopRight,i.alpha*t._alphaTR),O(t.tintBottomLeft,i.alpha*t._alphaBL),O(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,a,!1,V),e.pipelines.postBatch(t)}},p1=function(e,t,i,a){t.width===0||t.height===0||(i.addToRenderList(t),e.batchSprite(t,t.frame,i,a))},g1={renderWebGL:v1,renderCanvas:p1};const hu=Phaser.Display.Canvas.CanvasPool;var m1=function(e,t,i){i===void 0&&(i={});var a=hu.create(this),x=a.getContext("2d",{willReadFrequently:!0});e.syncFont(a,x);var C=x.measureText(t),E=Math.ceil(C.width*e.baselineX),O=E,I=2*O;if(O=O*e.baselineY|0,a.width=E,a.height=I,x.fillStyle="#f00",x.fillRect(0,0,E,I),x.font=e._font,x.textBaseline="alphabetic",x.fillStyle="#000",x.fillText(e.testString,0,O),i.left=0,E===0||I===0||!x.getImageData(0,0,E,I))return hu.remove(a),i;for(var V=x.getImageData(0,0,E,I).data,X=!1,q=0;q<E;q++){for(var st=0;st<I;st++){var it=(st*E+q)*4;if(V[it]!==255){i.left=q,X=!0;break}}if(X)break}return hu.remove(a),i};Et();const x1=Phaser.GameObjects.GameObject;class cv extends x1{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,i){return this.style.setFixedSize(t,i)}setBackgroundColor(t,i,a){return this.style.setBackgroundColor(t,i,a)}setBackgroundStrokeColor(t,i){return this.style.setBackgroundStrokeColor(t,i)}setBackgroundCornerRadius(t,i){return this.style.setBackgroundCornerRadius(t,i)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,i){return this.style.setStroke(t,i)}setShadow(t,i,a,x,C,E){return this.style.setShadow(t,i,a,x,C,E)}setShadowOffset(t,i){return this.style.setShadowOffset(t,i)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setUnderline(t,i,a){return this.style.setUnderline(t,i,a)}setUnderlineColor(t){return this.style.setUnderlineColor(t)}setUnderlineThickness(t){return this.style.setUnderlineThickness(t)}setUnderlineOffset(t){return this.style.setUnderlineOffset(t)}setStrikethrough(t,i,a){return this.style.setStrikethrough(t,i,a)}setStrikethroughColor(t){return this.style.setStrikethroughColor(t)}setStrikethroughThickness(t){return this.style.setStrikethroughThickness(t)}setStrikethroughOffset(t){return this.style.setStrikethroughOffset(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}get lineSpacing(){return this.style.lineSpacing}set lineSpacing(t){this.style.lineSpacing=t}setLineSpacing(t){return this.style.lineSpacing=t,this.updateText(!0),this}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,i){return this.style.setTextMetrics(t,i)}measureTextMargins(t,i){return m1(this.style,t,i)}}const ai=Phaser.GameObjects.Components;Phaser.Class.mixin(cv,[ai.Alpha,ai.BlendMode,ai.ComputedSize,ai.Crop,ai.Depth,ai.Flip,ai.GetBounds,ai.Mask,ai.Origin,ai.Pipeline,ai.PostPipeline,ai.ScrollFactor,ai.Tint,ai.Transform,ai.Visible,g1]);var y1={backgroundColor:["backgroundColor",null,Ut],backgroundColor2:["backgroundColor2",null,Ut],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,Ut],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",Ut],stroke:["stroke","#fff",Ut],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",Ut],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",Ut],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],strikethroughColor:["strikethrough.color","#000",Ut],strikethroughThickness:["strikethrough.thickness",0,null],strikethroughOffset:["strikethrough.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|MÃ‰qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const Fo=Phaser.Display.Canvas.CanvasPool;var vv=function(e){var t=Fo.create(this),i=t.getContext("2d",{willReadFrequently:!0});e.syncFont(t,i);var a=i.measureText(e.testString);if("actualBoundingBoxAscent"in a){var x=a.actualBoundingBoxAscent,C=a.actualBoundingBoxDescent,V={ascent:x,descent:C,fontSize:x+C};return Fo.remove(t),V}var E=Math.ceil(a.width*e.baselineX),O=E,I=2*O;O=O*e.baselineY|0,t.width=E,t.height=I,i.fillStyle="#f00",i.fillRect(0,0,E,I),i.font=e._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(e.testString,0,O);var V={ascent:0,descent:0,fontSize:0};if(!i.getImageData(0,0,E,I))return V.ascent=O,V.descent=O+6,V.fontSize=V.ascent+V.descent,Fo.remove(t),V;var X=i.getImageData(0,0,E,I).data,q=X.length,st=E*4,it,at,ut=0,lt=!1;for(it=0;it<O;it++){for(at=0;at<st;at+=4)if(X[ut+at]!==255){lt=!0;break}if(!lt)ut+=st;else break}for(V.ascent=O-it,ut=q-st,lt=!1,it=I;it>O;it--){for(at=0;at<st;at+=4)if(X[ut+at]!==255){lt=!0;break}if(!lt)ut-=st;else break}return V.descent=it-O,V.fontSize=V.ascent+V.descent,Fo.remove(t),V},De={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,MIX_WRAP:3,SPLITREGEXP:/(?:\r\n|\r|\n)/};const Bo={none:De.NO_WRAP,word:De.WORD_WRAP,char:De.CHAR_WRAP,character:De.CHAR_WRAP,mix:De.MIX_WRAP},S1=Phaser.Utils.Objects.GetAdvancedValue,yi=Phaser.Utils.Objects.GetValue;let lu=class{constructor(t,i,a){this.parent=t,a===void 0&&(a=y1),this.propertyMap=a,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.strikethroughColor,this.strikethroughThickness,this.strikethroughOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(i,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==De.NO_WRAP&&this.wrapWidth===0}setStyle(t,i,a){if(i===void 0&&(i=!0),a===void 0&&(a=!1),t&&t.hasOwnProperty("wordWrap")){var x=t.wordWrap;x.hasOwnProperty("width")&&(t.wrap={mode:"word",width:x.width})}if(t&&t.hasOwnProperty("wrap")){var C=t.wrap;if(C.hasOwnProperty("mode")){var E=C.mode;typeof E=="string"&&(C.mode=Bo[E])}else C.hasOwnProperty("width")&&(C.mode=1)}t&&t.rtl&&a&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var O=this.propertyMap;for(var I in O){var V=O[I],X=V[0],q=a?V[1]:this[I],st=V[2];if(I==="wrapCallback"||I==="wrapCallbackScope")this[I]=yi(t,X,q);else{var it=S1(t,X,q);st&&(it=st(it)),this[I]=it}}var at=yi(t,"font",null);at===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=at;var ut=yi(t,"fill",null);ut!==null&&(this.color=Ut(ut));var lt=yi(t,"metrics",!1);return lt?this.metrics={ascent:yi(lt,"ascent",0),descent:yi(lt,"descent",0),fontSize:yi(lt,"fontSize",0)}:(i||!this.metrics)&&(this.metrics=vv(this)),i?this.parent.updateText():this.parent}syncFont(t,i){i.font=this._font}syncStyle(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"}syncShadow(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=vv(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=yi(t,"fontFamily","Courier"),this.fontSize=yi(t,"fontSize","16px"),this.fontStyle=yi(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,i,a){return a===void 0&&(a=!0),this.backgroundColor=Ut(t,this.parent.canvas,this.parent.context),this.backgroundColor2=Ut(i,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=a,this.update(!1)}setBackgroundStrokeColor(t,i){return this.backgroundStrokeColor=Ut(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=i,this.update(!1)}setBackgroundCornerRadius(t,i){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=i,this.update(!1)}setFill(t){return this.color=Ut(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=Ut(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,i){return t===void 0?this.strokeThickness=0:(i===void 0&&(i=this.strokeThickness),this.stroke=Ut(t,this.parent.canvas,this.parent.context),this.strokeThickness=i),this.update(!0)}setShadow(t,i,a,x,C,E){return t===void 0&&(t=0),i===void 0&&(i=0),a===void 0&&(a="#000"),x===void 0&&(x=0),C===void 0&&(C=!1),E===void 0&&(E=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=Ut(a,this.parent.canvas,this.parent.context),this.shadowBlur=x,this.shadowStroke=C,this.shadowFill=E,this.update(!1)}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=Ut(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,i,a){return t===void 0&&(t="#000"),i===void 0&&(i=0),a===void 0&&(a=0),this.underlineColor=Ut(t,this.parent.canvas,this.parent.context),this.underlineThickness=i,this.underlineOffset=a,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=Ut(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setStrikethrough(t,i,a){return t===void 0&&(t="#000"),i===void 0&&(i=0),a===void 0&&(a=0),this.strikethroughColor=Ut(t,this.parent.canvas,this.parent.context),this.strikethroughThickness=i,this.strikethroughOffset=a,this.update(!1)}setStrikethroughColor(t){return t===void 0&&(t="#000"),this.strikethroughColor=Ut(t,this.parent.canvas,this.parent.context),this.update(!1)}setStrikethroughThickness(t){return t===void 0&&(t=0),this.strikethroughThickness=t,this.update(!1)}setStrikethroughOffset(t){return t===void 0&&(t=0),this.strikethroughOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=Bo[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,i){return t===void 0&&(t="left"),i===void 0&&(i="top"),this.halign=t,this.valign=i,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,i){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,i&&(typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=yi(i,"fontFamily",this.fontFamily),this.fontSize=yi(i,"fontSize",this.fontSize),this.fontStyle=yi(i,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.parent.lineSpacing}toJSON(){var t={},i=this.propertyMap;for(var a in i)t[a]=this[a];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}};var nr=function(e){return e==null?e="":Array.isArray(e)?e=e.join(`
`):typeof e=="number"&&(e=e.toString()),e},C1={draw(e,t,i,a){var x=this.penManager;this.hitAreaManager.clear();var C=this.context;C.save();var E=this.defaultStyle;this.clear(),au(this,E.backgroundColor,E.backgroundStrokeColor,E.backgroundStrokeLineWidth,E.backgroundCornerRadius,E.backgroundColor2,E.backgroundHorizontalGradient,E.backgroundCornerIteration),e+=this.startXOffset,t+=this.startYOffset;var O=E.halign,I=E.valign,V,X=E.lineHeight,q=x.lines,st=q.length,it=E.maxLines,at,ut,lt;it>0&&st>it?(at=it,I==="center"?ut=Math.floor((st-at)/2):I==="bottom"?ut=st-at:ut=0):(at=st,ut=0),lt=ut+at;var ft,pt,ct=this.rtl,xt=ct?this.parent.width:void 0;I==="center"?pt=Math.max((a-at*X)/2,0):I==="bottom"?pt=Math.max(a-at*X-2,0):pt=0,pt+=t;for(var Mt=ut;Mt<lt;Mt++)if(V=x.getLineWidth(Mt),V!==0){for(var Pt=q[Mt],Ot=Pt.length,It=O,Bt=0;Bt<Ot;Bt++){var zt=Pt[Bt].prop.align;if(zt!==void 0){It=zt;break}}It==="center"?ft=(i-V)/2:It==="right"?ft=ct?0:i-V:ft=ct?i-V:0,ft+=e;for(var Bt=0;Bt<Ot;Bt++)this.drawPen(Pt[Bt],ft,pt,xt)}C.restore()},drawPen(e,t,i,a){t+=e.x,i+=e.y+(e.prop.y||0),a!==void 0&&(t=a-t);var x=this.canvas,C=this.context;C.save();var E=this.parser.propToContextStyle(this.defaultStyle,e.prop);if(E.bgcolor!==null&&e.width>0){var O=this.defaultStyle.metrics,I=i-O.ascent,V=O.fontSize;this.drawRectangle(t,I,e.width,V,E.bgcolor,E)}if(E.underlineThickness>0&&e.width>0){var X=i+E.underlineOffset-E.underlineThickness/2;this.drawLine(t,X,e.width,E.underlineThickness,E.underlineColor,E)}if(e.isTextPen&&(E.buildFont(),E.syncFont(x,C),E.syncStyle(x,C),this.drawText(t,i,e.text,E)),e.isImagePen&&this.drawImage(t,i,e.prop.img,e.prop.color,E),E.strikethroughThickness>0&&e.width>0){var X=i+E.strikethroughOffset-E.strikethroughThickness/2;this.drawLine(t,X,e.width,E.strikethroughThickness,E.strikethroughColor,E)}if(C.restore(),e.hasAreaMarker&&e.width>0){var q,st=e.prop.area;if(st)q={key:st};else{var it=e.prop.url;q={key:`url:${it}`,url:it}}this.hitAreaManager.add(t,i-this.startYOffset,e.width,this.defaultStyle.lineHeight,q)}},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawRectangle(e,t,i,a,x,C){this.autoRound&&(e=Math.round(e),t=Math.round(t));var E=this.context;E.fillStyle=x,E.fillRect(e,t,i,a)},drawLine(e,t,i,a,x,C){this.autoRound&&(e=Math.round(e),t=Math.round(t));var E=this.context;C.syncShadow(E,C.shadowStroke);var O=E.lineCap;E.lineCap="butt",E.strokeStyle=x,E.lineWidth=a,E.beginPath(),E.moveTo(e,t),E.lineTo(e+i,t),E.stroke(),E.lineCap=O},drawText(e,t,i,a){this.autoRound&&(e=Math.round(e),t=Math.round(t));var x=this.context;a.stroke&&a.stroke!=="none"&&a.strokeThickness>0&&(a.syncShadow(x,a.shadowStroke),x.strokeText(i,e,t)),a.color&&a.color!=="none"&&(a.syncShadow(x,a.shadowFill),x.fillText(i,e,t))},drawImage(e,t,i,a,x){t-=this.startYOffset,this.parent.imageManager.draw(i,this.context,e,t,a,this.autoRound)}};const En=Phaser.Utils.Objects.GetValue,T1=De.NO_NEWLINE,pv=De.RAW_NEWLINE;class M1{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=En(t,"text",""),this.x=En(t,"x",0),this.y=En(t,"y",0),this.width=En(t,"width",0);var i=En(t,"prop",null);i===null&&(i={}),this.prop=i,this.newLineMode=En(t,"newLineMode",0),this.startIndex=En(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===pv&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==T1&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===pv&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}}var Hi=function(e,t){var i=Array.isArray(e);if(t===void 0?t=i?[]:{}:ge(t),i){t.length=e.length;for(var a=0,x=e.length;a<x;a++)t[a]=e[a]}else for(var C in e)t[C]=e[C];return t};const gv=Phaser.Utils.Objects.GetFastValue,mv=De.NO_NEWLINE,P1=De.WRAPPED_NEWLINE;class uu{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=gv(t,"tagToText",r),this.tagToTextScope=gv(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,i=this.lines.length;t<i;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,i,a,x,C,E){var O=this.pensPool.pop();return O==null&&(O=new M1),wn.text=t,wn.x=i,wn.y=a,wn.width=x,wn.prop=C,wn.newLineMode=E,O.resetFromJSON(wn),this.addPen(O),this}addImagePen(t,i,a,x){return this.addTextPen("",t,i,a,x,mv),this}addNewLinePen(){var t=this.lastPen,i=t?t.lastX:0,a=t?t.y:0,x=t?Hi(t.prop):null;return this.addTextPen("",i,a,0,x,P1),this}addPen(t){var i=this.lastPen;i==null?t.startIndex=0:t.startIndex=i.endIndex,this.pens.push(t);var a=this.lastLine;a==null&&(a=this.linesPool.pop()||[],this.lines.push(a)),a.push(t),t.newLineMode!==mv&&(a=this.linesPool.pop()||[],this.lines.push(a)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new uu),t.clear();for(var i=0,a=this.lines.length;i<a;i++)for(var x=this.lines[i],C=0,E=x.length;C<E;C++){var O=x[C];t.addPen(O.text,O.x,O.y,O.width,Hi(O.prop),O.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var i=this.lines[t];return i&&i[0]?i[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var i,a=!1,x;for(i=t;i>=0&&(x=this.lines[i],a=x!=null&&x.length>0,!a);i--);if(!a)return 0;var C=x[x.length-1];return C.endIndex}getLineWidth(t){var i=this.lines[t];if(!i)return 0;var a=i[i.length-1];if(a==null)return 0;var x=a.lastX;return x}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,i=0,a=0,x=this.lines.length;a<x;a++)t=this.getLineWidth(a),t>i&&(i=t);return this.maxLinesWidth=i,i}getLineWidths(){for(var t=[],i=0,a=this.lines.length;i<a;i++)t.push(this.getLineWidth(i));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",i=this.pens,a=0,x=i.length;a<x;a++)t+=i[a].plainText;return t}get rawTextLength(){for(var t=0,i=this.pens,a=0,x=this.pens.length;a<x;a++)t+=i[a].rawTextLength;return t}getSliceTagText(t,i,a){var x=this.lastPen;if(x==null)return"";var C=x.endIndex;(t===void 0||t===0)&&(t=-1),(i===void 0||i===C)&&(i=C+1),a===void 0&&(a=!1);for(var E="",O,I,V,X,q,st,it,at=0,ut=this.pens.length;at<ut&&(O=this.pens[at],X=O.endIndex,!(!(X<=t)&&(O=this.pens[at],I=a?O.wrapText:O.plainText,st=O.prop,V=O.startIndex,q=V>=t&&X<=i,q||(I=I.substring(t-V,i-V)),this.tagToTextScope?E+=this.tagToText.call(this.tagToTextScope,I,st,it):E+=this.tagToText(I,st,it),it=st,X>=i)));at++);return E}get length(){return this.lines.length}set length(t){this.clear()}}var wn={};const E1=Phaser.Geom.Rectangle;var xv=new St;class w1{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var t=0,i=this.hitAreas.length;t<i;t++)this.hitAreas[t].data=null;return xv.pushMultiple(this.hitAreas),this}add(t,i,a,x,C){C===void 0&&(C={});var E=xv.pop();return E===null?E=new E1(t,i,a,x):E.setTo(t,i,a,x),E.data=C,this.hitAreas.push(E),this}getFirst(t,i){for(var a=0,x=this.hitAreas.length;a<x;a++){var C=this.hitAreas[a];if(C.contains(t,i))return C}return null}getByKey(t){for(var i=0,a=this.hitAreas.length;i<a;i++){var x=this.hitAreas[i];if(x.data.key===t)return x}return null}drawBounds(t,i,a){i===void 0&&(i=16777215),a&&t.save().translateCanvas(a.x,a.y).rotateCanvas(a.rotation).scaleCanvas(a.scaleX,a.scaleY);for(var x=0,C=this.hitAreas.length;x<C;x++){var E=this.hitAreas[x];t.lineStyle(1,i).strokeRect(E.x,E.y,E.width,E.height)}return a&&t.restore(),this}}var b1=function(){this.parent.on("pointerdown",R1,this).on("pointerup",O1,this).on("pointermove",du,this).on("pointerover",du,this).on("pointerout",function(e,t){du.call(this,e,null,null,t)},this)},R1=function(e,t,i,a){var x=this.hitAreaManager.getFirst(t,i);if(x!==null){var C=x.data.key;rr.call(this,"areadown",C,e,t,i,a),x.data&&(x.data.isDown=!0)}},O1=function(e,t,i,a){var x=this.hitAreaManager.getFirst(t,i);if(x!==null){var C=x.data.key;if(rr.call(this,"areaup",C,e,t,i,a),!!x.data){if(x.data.isDown){if(rr.call(this,"areaclick",C,e,t,i,a),!x.data)return;var E=x.data.url;E&&window.open(E,"_blank")}x.data.isDown=!1}}},du=function(e,t,i,a){if(t===null){if(this.lastHitAreaKey!==null){rr.call(this,"areaout",this.lastHitAreaKey,e,t,i,a);var x=this.hitAreaManager.getByKey(this.lastHitAreaKey);x&&x.data&&(x.data.isDown=!1),this.lastHitAreaKey=null}return}var x=this.hitAreaManager.getFirst(t,i),C=x?x.data.key:null;if(this.lastHitAreaKey!==C){if(this.lastHitAreaKey!==null){rr.call(this,"areaout",this.lastHitAreaKey,e,t,i,a);var E=this.hitAreaManager.getByKey(this.lastHitAreaKey);E&&(this.urlTagCursorStyle&&yv(this.scene,E,""),E.data.isDown=!1)}C!==null&&(rr.call(this,"areaover",C,e,t,i,a),x.data&&this.urlTagCursorStyle&&yv(this.scene,x,this.urlTagCursorStyle)),this.lastHitAreaKey=C}},rr=function(e,t,i,a,x,C){this.parent.emit(`${e}-${t}`,i,a,x,C),this.parent.emit(e,t,i,a,x,C)},yv=function(e,t,i){!t||!t.data||!t.data.url||(e.input.manager.canvas.style.cursor=i)};const Sv=Phaser.GameObjects.Components.TransformMatrix,A1=Phaser.Math.TransformXY;var Cv=function(e,t,i,a,x){a===void 0&&(a=e.scene.cameras.main),x===void 0?x={}:x===!0&&(x=L1);var C=a.scrollX,E=a.scrollY,O=t+C*e.scrollFactorX-C,I=i+E*e.scrollFactorY-E;return e.parentContainer?(Io===void 0&&(Io=new Sv,Tv=new Sv),e.getWorldTransformMatrix(Io,Tv),Io.applyInverse(O,I,x)):A1(O,I,e.x,e.y,e.rotation,e.scaleX,e.scaleY,x),x.x+=e.displayOriginX,x.y+=e.displayOriginY,x},Io,Tv,L1={},D1=function(e,t,i){var a=Cv(this.parent,e,t,i,!0),x=this.hitAreaManager.getFirst(a.x,a.y);if(x!==null)return x.data.key},F1=/^[\x00-\x7F]+$/,ta=function(e){return F1.test(e)};const B1=De.NO_NEWLINE,I1=De.RAW_NEWLINE,fu=De.WRAPPED_NEWLINE,Mv=De.NO_WRAP,G1=De.WORD_WRAP,Pv=De.CHAR_WRAP,k1=De.SPLITREGEXP;var Ev=function(e,t,i,a,x,C){a<=0&&(i=Mv);var E=[];if(!e||!e.length)return E;for(var O=i===Mv,I=e.split(k1),V,X,q,st=0,it=I.length;st<it;st++){if(V=I[st],q=st===it-1?B1:I1,O){var at=t.measureText(V).width;E.push(C.getLine(V,at,q));continue}if(X=st===0?a-x:a,V.length<=100){var at=t.measureText(V).width;if(at<=X){E.push(C.getLine(V,at,q));continue}}for(var ut=N1(V,i),lt,ft,pt="",ct=0,xt,Mt=0,Pt=ut.length;Mt<Pt;Mt++){if(lt=ut[Mt],ft=t.measureText(lt).width,ft>a&&V1(lt)){pt!==""?E.push(C.getLine(pt,ct,fu)):Mt===0&&x>0&&E.push(C.getLine("",0,fu)),E.push(...Ev(lt,t,Pv,a,0,C));var Ot=E.pop();pt=Ot.text,ct=Ot.width,C.freeLine(Ot),pt===" "&&(pt="",ct=0);continue}xt=ct+ft,xt>X?(E.push(C.getLine(pt,ct,fu)),pt=lt,ct=ft,X=a):(pt+=lt,ct=xt),Mt===Pt-1&&E.push(C.getLine(pt,ct,q))}}return E},N1=function(e,t){var i;switch(t){case G1:i=[],e=e.split(" ");for(var a=0,x=e.length;a<x;a++){var C=e[a];a<x-1?i.push(C+" "):C!==""&&i.push(C)}break;case Pv:i=e.split("");break;default:i=[],e=e.split(" ");for(var a=0,x=e.length;a<x;a++){var C=e[a];a<x-1?ta(C)?i.push(C+" "):(i.push(...C.split("")),i.push(" ")):C!==""&&(ta(C)?i.push(C):i.push(...C.split("")))}break}return i},V1=function(e){switch(e.length){case 1:return!1;case 2:return e.charAt(1)!==" ";default:return!0}};const cu=Phaser.Utils.Objects.GetValue,z1=De.NO_WRAP,wv=De.NO_NEWLINE,Y1=De.WRAPPED_NEWLINE;class bv{constructor(t){this.parent=t.parent,this.scene=this.parent.scene,this.context=cu(t,"context",null),this.canvas=this.context.canvas,this.parser=cu(t,"parser",null),this.defaultStyle=cu(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new w1,this.lastHitAreaKey=null,this.urlTagCursorStyle=null}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,i,a,x,C){if(C===void 0&&(C=this.penManager),C.clear(),t==="")return C;var E=this.parent.style;if(E.isWrapFitMode){var O=this.parent.padding;a=E.fixedWidth-O.left-O.right}for(var I=this.canvas,V=this.context,X=0,q=0,st=E.wrapCallback,it=E.wrapCallbackScope,at=!0,ut,lt,ft,pt=this.parser.splitText(t),ct,xt,Mt=this.wrapTextLinesPool,Pt=0,Ot=pt.length;Pt<Ot;Pt++)if(ct=this.parser.tagTextToProp(pt[Pt],lt),ut=ct.plainText,lt=ct.prop,lt.img){var It=this.imageManager.getOuterWidth(lt.img);a>0&&i!==z1&&a<X+It&&(C.addNewLinePen(),q+=x,X=0),C.addImagePen(X,q,It,Hi(lt)),X+=It}else if(ut!==""){if(V.save(),ft=this.parser.propToContextStyle(this.defaultStyle,lt),ft.buildFont(),ft.syncFont(I,V),ft.syncStyle(I,V),!st)xt=Ev(ut,V,i,a,X,Mt);else{xt=st.call(it,ut,V,a,X),typeof xt=="string"&&(xt=xt.split(`
`));for(var Vt,Bt=0,zt=xt.length;Bt<zt;Bt++)Vt=xt[Bt],typeof Vt=="string"?xt[Bt]=Mt.getLine(Vt,V.measureText(Vt).width,Bt<zt-1?Y1:wv):at=!1}for(var Vt,Bt=0,zt=xt.length;Bt<zt;Bt++)Vt=xt[Bt],C.addTextPen(Vt.text,X,q,Vt.width,Hi(lt),Vt.newLineMode),Vt.newLineMode!==wv?(X=0,q+=x):X+=Vt.width;at&&Mt.freeLines(xt),xt=null,V.restore()}for(var Pt=0,Ot=this.lines.length;Pt<Ot;Pt++){var _t=this.lines[Pt],te=_t[_t.length-1];te&&(te.width+=this.parser.getStrokeThinkness(this.defaultStyle,te.prop))}return C}get startXOffset(){return this.defaultStyle.xOffset}get startYOffset(){return this.defaultStyle.metrics.ascent}get lines(){return this.penManager.lines}get displayLinesCount(){var t=this.penManager.linesCount,i=this.defaultStyle.maxLines;return i>0&&t>i&&(t=i),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.displayLinesCount,i=this.defaultStyle.lineHeight*t;return t>0&&(i-=this.defaultStyle.lineSpacing),i}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new uu({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,i,a){var x;if(t==null)x=this.penManager.plainText;else{var C=this.parser.splitText(t,1);x="";for(var E=0,O=C.length;E<O;E++)x+=C[E]}return(i!=null||a!=null)&&(i==null&&(i=0),a==null&&(a=x.length),x=x.substring(i,a)),x}getPenManager(t,i){if(t===void 0)return this.copyPenManager(i,this.penManager);i===void 0&&(i=this.newPenManager());var a=this.defaultStyle;return this.updatePenManager(t,a.wrapMode,a.wrapWidth,a.lineHeight,i),i}getText(t,i,a,x){if(t==null)return this.penManager.getSliceTagText(i,a,x);var C=this.tmpPenManager,E=this.defaultStyle;return this.updatePenManager(t,E.wrapMode,E.wrapWidth,E.lineHeight,C),C.getSliceTagText(i,a,x)}copyPenManager(t,i){return i===void 0&&(i=this.penManager),i.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var W1={setInteractive:b1,getHitArea:D1};Object.assign(bv.prototype,C1,W1);class Rv extends St{freeLine(t){if(t)return this.push(t),this}freeLines(t){if(t)return this.pushMultiple(t),this}getLine(t,i,a){var x=this.pop();return x===null&&(x={}),x.text=t,x.width=i,x.newLineMode=a,x}}const X1=Phaser.Utils.Objects.IsPlainObject,ar=Phaser.Utils.Objects.GetValue;var vu=function(e,t){X1(e)?(t=e,e=t.key):t===void 0&&(t={key:e}),t.hasOwnProperty("key")||(t.key=e);var i=t.key,a=t.frame,x=t.width,C=t.height;if(x===void 0||C===void 0){var E=this.textureManager.getFrame(i,a),O=E?E.cutWidth:0,I=E?E.cutHeight:0;x===void 0&&C===void 0?(x=O,C=I):x===void 0?x=O*(C/I):C===void 0&&(C=I*(x/O))}this.images[e]={key:i,frame:a,width:x,height:C,y:ar(t,"y",0),left:ar(t,"left",0),right:ar(t,"right",0),originX:ar(t,"originX",0),originY:ar(t,"originY",0),tintFill:ar(t,"tintFill",!1)}};const Ov=Phaser.Display.Canvas.CanvasPool;var Av=function(e,t,i,a,x,C,E,O){i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=e.cutWidth),C===void 0&&(C=e.cutHeight),O===void 0&&(O=!1),O&&(i=Math.round(i),a=Math.round(a));var I=t.getContext("2d",{willReadFrequently:!0});if(E){var V=Ov.create(null,x,C,Phaser.CANVAS,!0),X=V.getContext("2d",{willReadFrequently:!0});X.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,x,C),X.globalCompositeOperation="source-in",X.fillStyle=E,X.fillRect(0,0,x,C),I.drawImage(V,0,0,x,C,i,a,x,C),Ov.remove(V)}else I.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,i,a,x,C)},U1=function(e,t,i,a,x,C){var E=this.get(e);if(E){var O=this.textureManager.getFrame(E.key,E.frame),I=E.width,V=E.height;i+=E.left-E.originX*I,a+=E.y-E.originY*V,E.tintFill||(x=void 0),Av(O,t.canvas,i,a,I,V,x,C)}};class pu{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,i){if(typeof t=="string")vu.call(this,t,i);else if(Array.isArray(t))for(var a=t,x=0,C=a.length;x<C;x++)vu.call(this,a[x]);else{var a=t;for(var t in a)vu.call(this,t,a[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var i=this.get(t);return i?i.width+i.left+i.right:0}getFrame(t){var i=this.get(t);return i?this.textureManager.getFrame(i.key,i.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var H1={draw:U1};Object.assign(pu.prototype,H1);var Lv=function(e,t){!e&&e!==0&&(e=""),t===void 0&&(t=!0),Array.isArray(e)&&(e=e.join(`
`));var i;return t?i=`${this.text}
${e}`:i=`${this.text}${e}`,i!=this.text&&this.setText(i),this};const $1=Phaser.Utils.Objects.IsPlainObject,Dv=Phaser.DOM.AddToDOM,Fv=Phaser.Display.Canvas.CanvasPool,K1=Phaser.GameObjects.GameObject,vi=Phaser.Utils.Objects.GetValue,Z1=Phaser.DOM.RemoveFromDOM,J1=De.SPLITREGEXP,Q1=Phaser.Utils.String.UUID;var or=null,gu=null,mu=null;class xu extends cv{constructor(t,i,a,x,C,E,O){if($1(i)){var I=i;i=vi(I,"x",0),a=vi(I,"y",0),x=vi(I,"text",""),C=vi(I,"style")}if(i===void 0&&(i=0),a===void 0&&(a=0),super(t,E),this.renderer=t.sys.game.renderer,this.setPosition(i,a),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=Fv.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,C){if(C.hasOwnProperty("align")){var V=C.align;delete C.align,C.halign=V}C.hasOwnProperty("stroke")&&!C.hasOwnProperty("strokeThickness")&&(C.strokeThickness=1)}this.style=new lu(this,C);var X=vi(C,"images",void 0);X&&this.addImage(X),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=Q1(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);var q=vi(C,"sharedPool",!0),st,it,at;q?(or||(or={},gu=new St,mu=new Rv,this.scene.game.events.once("destroy",function(){or=null,gu=null,mu=null})),or.hasOwnProperty(E)||(or[E]=new St),st=or[E],it=gu,at=mu):(st=new St,it=new St,at=new Rv),this.canvasText=new bv({parent:this,context:this.context,parser:O,style:this.style,pensPool:st,linesPool:it,wrapTextLinesPool:at}),this.parser=O,this.initRTL(),C&&C.padding&&this.setPadding(C.padding),this.setText(x),this.setUrlTagCursorStyle(vi(C,"urlTagCursorStyle","pointer")),vi(C,"interactive",!1)&&this.setInteractive()}preDestroy(){Z1(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),Fv.remove(this.canvas);var t=this.texture;t&&t.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",Dv(this.canvas,this.scene.sys.canvas),this.originX=1)}setRTL(t){t===void 0&&(t=!0);var i=this.style;if(i.rtl===t)return this;if(i.rtl=t,t?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",Dv(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),i.halign==="left"?i.halign="right":i.halign==="right"&&(i.halign="left"),this._imageManager){var a=this._imageManager.images;for(var x in a)a[x].originX=1-a[x].originX}return this}setText(t){return t=nr(t),t===this._text?this:(this._text=t,this.updateText(),this)}setPadding(t,i,a,x){if(typeof t=="object"){var C=t,E=vi(C,"x",null);E!==null?(t=E,a=E):(t=vi(C,"left",0),a=vi(C,"right",t));var O=vi(C,"y",null);O!==null?(i=O,x=O):(i=vi(C,"top",0),x=vi(C,"bottom",i))}else t===void 0&&(t=0),i===void 0&&(i=t),a===void 0&&(a=t),x===void 0&&(x=i);return this.padding.left=t,this.padding.top=i,this.padding.right=a,this.padding.bottom=x,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var i=this.canvasText,a=this.style;t&&i.updatePenManager(this._text,a.wrapMode,a.wrapWidth,a.lineHeight);var x=this.padding,C,E,O=Math.ceil(i.linesWidth);a.fixedWidth===0?(this.width=O+x.left+x.right,C=O):(this.width=a.fixedWidth,C=this.width-x.left-x.right,C<O&&(C=O)),a.fixedHeight===0?(this.height=i.linesHeight+x.top+x.bottom,E=i.linesHeight):(this.height=a.fixedHeight,E=this.height-x.top-x.bottom,E<i.linesHeight&&(E=i.linesHeight));var I=this.width,V=this.height;this.updateDisplayOrigin();var X=a.resolution;I*=X,V*=X,I=Math.max(Math.ceil(I),1),V=Math.max(Math.ceil(V),1);var q=this.canvas,st=this.context;q.width!==I||q.height!==V?(q.width=I,q.height=V,this.frame.setSize(I,V)):st.clearRect(0,0,I,V),st.save(),st.scale(X,X);var it=this.style.rtl?x.right:x.left,at=x.top;i.draw(it,at,C,E),st.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(q,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"BBCodeText Game Object"}),this.dirty=!0;var ut=this.input;return ut&&!ut.customHitArea&&(ut.hitArea.width=this.width,ut.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=i,t}setInteractive(t,i,a){var x=!!this.input;return K1.prototype.setInteractive.call(this,t,i,a),x||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(t){return this.urlTagCursorStyle=t,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(t){this.canvasText.urlTagCursorStyle=t}getWrappedText(t,i,a){return typeof t=="number"&&(a=i,i=t,t=void 0),t=this.canvasText.getText(t,i,a,!0),t.split(J1)}getPlainText(t,i,a){return typeof t=="number"&&(a=i,i=t,t=void 0),this.canvasText.getPlainText(t,i,a)}getText(t,i,a,x){return typeof t=="number"&&(x=a,a=i,i=t,t=void 0),x===void 0&&(x=!1),this.canvasText.getText(t,i,a,x)}getSubString(t,i,a){return typeof t=="number"&&(a=i,i=t,t=void 0),this.getText(t,i,a)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,i){return this.canvasText.getPenManager(t,i)}setSize(t,i){return this.setFixedSize(t,i)}resize(t,i){return this.setFixedSize(t,i)}get imageManager(){return this._imageManager||(this._imageManager=new pu(this.scene)),this._imageManager}addImage(t,i){return this.imageManager.add(t,i),this}drawAreaBounds(t,i){return this.canvasText.hitAreaManager.drawBounds(t,i,this),this}generateTexture(t,i,a,x,C){var E=this.canvas;return x===void 0?x=E.width:x*=this.resolution,C===void 0?C=E.height:C*=this.resolution,ov(this.scene,E,t,i,a,x,C),this}getHitArea(t,i,a){return this.canvasText.getHitArea(t,i,a)}}var j1={appendText:Lv};Object.assign(xu.prototype,j1);var q1=function(e,t){for(var i=this.tagRegex,a=[],x=0,C=!1,E=!1;;){var O=i.RE_SPLITTEXT.exec(e);if(!O)break;var I=O[0];if(E)if(i.RE_ESC_CLOSE.test(I))E=!1;else continue;else if(C)if(i.RE_RAW_CLOSE.test(I))C=!1;else continue;else i.RE_ESC_OPEN.test(I)?E=!0:i.RE_RAW_OPEN.test(I)&&(C=!0);var V=i.RE_SPLITTEXT.lastIndex,X=V-I.length;if(x<X){var q=e.substring(x,X);a.push(q)}t===void 0&&a.push(I),x=V}var st=e.length;return x<st&&a.push(e.substring(x,st)),a};const Ee=!1,ye=!0;var _1={plainText:null,prevProp:null},tT=function(e,t){var i=this.tagRegex;t==null&&(t={});var a="";if(t.img&&Ht(t,Ee,"img"),t.esc)i.RE_ESC_CLOSE.test(e)?Ht(t,Ee,"esc"):a=e;else if(t.raw)i.RE_RAW_CLOSE.test(e)?Ht(t,Ee,"raw"):a=e;else if(i.RE_ESC_OPEN.test(e))Ht(t,ye,"esc",!0);else if(i.RE_ESC_CLOSE.test(e))Ht(t,Ee,"esc");else if(i.RE_RAW_OPEN.test(e))Ht(t,ye,"raw",!0);else if(i.RE_RAW_CLOSE.test(e))Ht(t,Ee,"raw");else if(i.RE_BLOD_OPEN.test(e))Ht(t,ye,"b",!0);else if(i.RE_BLOD_CLOSE.test(e))Ht(t,Ee,"b");else if(i.RE_ITALICS_OPEN.test(e))Ht(t,ye,"i",!0);else if(i.RE_ITALICS_CLOSE.test(e))Ht(t,Ee,"i");else if(i.RE_WEIGHT_OPEN.test(e)){var x=e.match(i.RE_WEIGHT_OPEN);Ht(t,ye,"weight",x[1])}else if(i.RE_WEIGHT_CLOSE.test(e))Ht(t,Ee,"weight");else if(i.RE_SIZE_OPEN.test(e)){var x=e.match(i.RE_SIZE_OPEN);Ht(t,ye,"size",`${x[1]}px`)}else if(i.RE_SIZE_CLOSE.test(e))Ht(t,Ee,"size");else if(i.RE_FAMILY_OPEN.test(e)){var x=e.match(i.RE_FAMILY_OPEN);Ht(t,ye,"family",x[1])}else if(i.RE_FAMILY_CLOSE.test(e))Ht(t,Ee,"family");else if(i.RE_COLOR_OPEN.test(e)){var x=e.match(i.RE_COLOR_OPEN);Ht(t,ye,"color",x[1])}else if(i.RE_COLOR_CLOSE.test(e))Ht(t,Ee,"color");else if(i.RE_UNDERLINE_OPEN.test(e))Ht(t,ye,"u",!0);else if(i.RE_UNDERLINE_OPENC.test(e)){var x=e.match(i.RE_UNDERLINE_OPENC);Ht(t,ye,"u",x[1])}else if(i.RE_UNDERLINE_CLOSE.test(e))Ht(t,Ee,"u");else if(i.RE_STRIKETHROUGH_OPEN.test(e))Ht(t,ye,"s",!0);else if(i.RE_STRIKETHROUGH_OPENC.test(e)){var x=e.match(i.RE_STRIKETHROUGH_OPENC);Ht(t,ye,"s",x[1])}else if(i.RE_STRIKETHROUGH_CLOSE.test(e))Ht(t,Ee,"s");else if(i.RE_SHADOW_OPEN.test(e))Ht(t,ye,"shadow",!0);else if(i.RE_SHADOW_OPENC.test(e)){var x=e.match(i.RE_SHADOW_OPENC);Ht(t,ye,"shadow",x[1])}else if(i.RE_SHADOW_CLOSE.test(e))Ht(t,Ee,"shadow");else if(i.RE_STROKE_OPEN.test(e))Ht(t,ye,"stroke",!0);else if(i.RE_STROKE_OPENC.test(e)){var x=e.match(i.RE_STROKE_OPENC);Ht(t,ye,"stroke",x[1])}else if(i.RE_STROKE_CLOSE.test(e))Ht(t,Ee,"stroke");else if(i.RE_BGCOLOR_OPEN.test(e)){var x=e.match(i.RE_BGCOLOR_OPEN);Ht(t,ye,"bgcolor",x[1])}else if(i.RE_BGCOLOR_CLOSE.test(e))Ht(t,Ee,"bgcolor");else if(i.RE_OFFSETY_OPEN.test(e)){var x=e.match(i.RE_OFFSETY_OPEN);Ht(t,ye,"y",parseFloat(x[1]))}else if(i.RE_OFFSETY_CLOSE.test(e))Ht(t,Ee,"y");else if(i.RE_IMAGE_OPEN.test(e)){var x=e.match(i.RE_IMAGE_OPEN);Ht(t,ye,"img",x[1])}else if(i.RE_IMAGE_CLOSE.test(e))Ht(t,Ee,"img");else if(i.RE_AREA_OPEN.test(e)){var x=e.match(i.RE_AREA_OPEN);Ht(t,ye,"area",x[1])}else if(i.RE_AREA_CLOSE.test(e))Ht(t,Ee,"area");else if(i.RE_URL_OPEN.test(e)){var x=e.match(i.RE_URL_OPEN);Ht(t,ye,"url",x[1])}else if(i.RE_URL_CLOSE.test(e))Ht(t,Ee,"url");else if(i.RE_ALIGN_OPEN.test(e)){var x=e.match(i.RE_ALIGN_OPEN);Ht(t,ye,"align",x[1])}else if(i.RE_ALIGN_CLOSE.test(e))Ht(t,Ee,"align");else if(i.RE_ID_OPEN.test(e)){var x=e.match(i.RE_ID_OPEN);Ht(t,ye,"id",x[1])}else i.RE_ID_CLOSE.test(e)?Ht(t,Ee,"id"):a=e;var C=_1;return C.plainText=a,C.prop=t,C},Ht=function(e,t,i,a){return t===ye?e[i]=a:e.hasOwnProperty(i)&&delete e[i],e},eT=function(e,t){var i=sT;if(t.hasOwnProperty("img"))i.image=t.img;else{if(i.image=null,t.hasOwnProperty("family")?i.fontFamily=t.family:i.fontFamily=e.fontFamily,t.hasOwnProperty("size")){var a=t.size;typeof a=="number"&&(a=`${a}px`),i.fontSize=a}else i.fontSize=e.fontSize;i.fontStyle=iT(t),t.hasOwnProperty("color")?i.color=t.color:i.color=e.color,t.hasOwnProperty("stroke")?t.stroke===!0?(i.stroke=e.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=t.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=e.stroke,i.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(i.shadowColor=e.shadowColor,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor=t.shadow,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor="#000",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,i.shadowStroke=!1,i.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(i.underlineColor=e.underlineColor,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor=t.u,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor="#000",i.underlineThickness=0,i.underlineOffset=0),t.hasOwnProperty("s")?t.s===!0?(i.strikethroughColor=e.strikethroughColor,i.strikethroughThickness=e.strikethroughThickness,i.strikethroughOffset=e.strikethroughOffset):(i.strikethroughColor=t.s,i.strikethroughThickness=e.strikethroughThickness,i.strikethroughOffset=e.strikethroughOffset):(i.strikethroughColor="#000",i.strikethroughThickness=0,i.strikethroughOffset=0),t.hasOwnProperty("bgcolor")?i.bgcolor=t.bgcolor:i.bgcolor=null,i},iT=function(e){var t=e.b,i=e.weight,a=e.i;return t||i||a?a?t?"bold italic":i?`${i} italic`:"italic":t?"bold":i.toString():""},sT=new lu,nT=function(e,t,i){i==null&&(i=rT);var a=this.delimiters[0],x=this.delimiters[1],C=[];for(var E in i)t.hasOwnProperty(E)||C.push(`${a}/${E}${x}`);for(var E in t){var O=t[E];if(E!=="img"){if(i[E]===O)continue}switch(E){case"size":C.push(`${a}size=${O.replace("px","")}${x}`);break;case"color":case"weight":case"family":case"stroke":case"bgcolor":case"y":case"img":case"area":case"url":case"align":case"id":C.push(`${a}${E}=${O}${x}`);break;case"u":case"s":O===!0?C.push(`${a}${E}${x}`):C.push(`${a}${E}=${O}${x}`);break;default:C.push(`${a}${E}${x}`);break}}return C.push(e),C.join("")},rT={},hr=function(e){return e.replace(aT,"\\$&").replace(oT,"\\x2d")},aT=/[|\\{}()[\]^$+*?.]/g,oT=/-/g,Bv,Iv,$t={},Ce=function(e,t,i,a){return a===void 0?`${e}${i}${t}`:`${e}${i}=(${a})${t}`},Ne=function(e,t,i){return`${e}/${i}${t}`},hT=function(e){return`[^${e}]+`},yu="[-.0-9]+",lT=["[a-zA-Z]+","#[0-9abcdef]+","rgba?\\(s*[.0-9]+s*(,s*[.0-9]+s*){2,3}\\)"],lr=lT.join("|"),Gv=function(e,t){if(t===void 0){var i=e;e=i[0],t=i[1]}if(Bv===e&&Iv===t)return!1;Bv=e,Iv=t,e=hr(e),t=hr(t);var a=hT(t),x="esc",C=Ce(e,t,x),E=Ne(e,t,x),O="raw",I=Ce(e,t,O),V=Ne(e,t,O),X="b",q=Ce(e,t,X),st=Ne(e,t,X),it="i",at=Ce(e,t,it),ut=Ne(e,t,it),lt="weight",ft=Ce(e,t,lt,yu),pt=Ne(e,t,lt),ct="size",xt=Ce(e,t,ct,yu),Mt=Ne(e,t,ct),Pt="family",Ot=Ce(e,t,Pt,a),It=Ne(e,t,Pt),Bt="color",zt=Ce(e,t,Bt,lr),Vt=Ne(e,t,Bt),_t="u",te=Ce(e,t,_t),kt=Ce(e,t,_t,lr),ce=Ne(e,t,_t),me="s",Pe=Ce(e,t,me),Ye=Ce(e,t,me,lr),ke=Ne(e,t,me),ui="shadow",Xi=Ce(e,t,ui),Ui=Ce(e,t,ui,lr),Ps=Ne(e,t,ui),sr="stroke",eu=Ce(e,t,sr),di=Ce(e,t,sr,lr),Co=Ne(e,t,sr),To="bgcolor",iu=Ce(e,t,To,lr),Hs=Ne(e,t,To),aC="y",oC=Ce(e,t,aC,yu),hC=Ne(e,t,aC),lC="img",uC=Ce(e,t,lC,a),dC=Ne(e,t,lC),fC="area",cC=Ce(e,t,fC,a),vC=Ne(e,t,fC),pC="url",gC=Ce(e,t,pC,a),mC=Ne(e,t,pC),xC="align",yC=Ce(e,t,xC,a),SC=Ne(e,t,xC),CC="id",TC=Ce(e,t,CC,a),MC=Ne(e,t,CC);return $t.RE_ESC_OPEN=new RegExp(C,"i"),$t.RE_ESC_CLOSE=new RegExp(E,"i"),$t.RE_RAW_OPEN=new RegExp(I,"i"),$t.RE_RAW_CLOSE=new RegExp(V,"i"),$t.RE_BLOD_OPEN=new RegExp(q,"i"),$t.RE_BLOD_CLOSE=new RegExp(st,"i"),$t.RE_ITALICS_OPEN=new RegExp(at,"i"),$t.RE_ITALICS_CLOSE=new RegExp(ut,"i"),$t.RE_WEIGHT_OPEN=new RegExp(ft,"i"),$t.RE_WEIGHT_CLOSE=new RegExp(pt,"i"),$t.RE_SIZE_OPEN=new RegExp(xt,"i"),$t.RE_SIZE_CLOSE=new RegExp(Mt,"i"),$t.RE_FAMILY_OPEN=new RegExp(Ot,"i"),$t.RE_FAMILY_CLOSE=new RegExp(It,"i"),$t.RE_COLOR_OPEN=new RegExp(zt,"i"),$t.RE_COLOR_CLOSE=new RegExp(Vt,"i"),$t.RE_UNDERLINE_OPEN=new RegExp(te,"i"),$t.RE_UNDERLINE_OPENC=new RegExp(kt,"i"),$t.RE_UNDERLINE_CLOSE=new RegExp(ce,"i"),$t.RE_STRIKETHROUGH_OPEN=new RegExp(Pe,"i"),$t.RE_STRIKETHROUGH_OPENC=new RegExp(Ye,"i"),$t.RE_STRIKETHROUGH_CLOSE=new RegExp(ke,"i"),$t.RE_SHADOW_OPEN=new RegExp(Xi,"i"),$t.RE_SHADOW_OPENC=new RegExp(Ui,"i"),$t.RE_SHADOW_CLOSE=new RegExp(Ps,"i"),$t.RE_STROKE_OPEN=new RegExp(eu,"i"),$t.RE_STROKE_OPENC=new RegExp(di,"i"),$t.RE_STROKE_CLOSE=new RegExp(Co,"i"),$t.RE_BGCOLOR_OPEN=new RegExp(iu,"i"),$t.RE_BGCOLOR_CLOSE=new RegExp(Hs,"i"),$t.RE_OFFSETY_OPEN=new RegExp(oC,"i"),$t.RE_OFFSETY_CLOSE=new RegExp(hC,"i"),$t.RE_IMAGE_OPEN=new RegExp(uC,"i"),$t.RE_IMAGE_CLOSE=new RegExp(dC,"i"),$t.RE_AREA_OPEN=new RegExp(cC,"i"),$t.RE_AREA_CLOSE=new RegExp(vC,"i"),$t.RE_URL_OPEN=new RegExp(gC,"i"),$t.RE_URL_CLOSE=new RegExp(mC,"i"),$t.RE_ALIGN_OPEN=new RegExp(yC,"i"),$t.RE_ALIGN_CLOSE=new RegExp(SC,"i"),$t.RE_ID_OPEN=new RegExp(TC,"i"),$t.RE_ID_CLOSE=new RegExp(MC,"i"),$t.RE_SPLITTEXT=new RegExp([I,V,C,E,q,st,at,ut,ft,pt,xt,Mt,Ot,It,zt,Vt,te,kt,ce,Pe,Ye,ke,Xi,Ui,Ps,eu,di,Co,iu,Hs,oC,hC,uC,dC,cC,vC,gC,mC,yC,SC,TC,MC].join("|"),"ig"),!0},kv=function(e,t){return e!==void 0&&Gv(e,t),Object.assign({},$t)};const uT=Phaser.Utils.Objects.GetValue;let Nv=class{constructor(t){var i=uT(t,"delimiters","[]");this.tagRegex=kv(i),this.delimiters=i}getStrokeThinkness(t,i){var a;return i.hasOwnProperty("stroke")?a=t.strokeThickness:a=0,a}setDelimiters(t,i){return Gv(t,i)&&(this.tagRegex=kv()),this}};var dT={splitText:q1,tagTextToProp:tT,propToContextStyle:eT,propToTagText:nT};Object.assign(Nv.prototype,dT);class Su extends xu{constructor(t,i,a,x,C){var E=new Nv(C);super(t,i,a,x,C,"rexBBCodeText",E)}setDelimiters(t,i){return this.parser.setDelimiters(t,i),this}}k.register("BBCodeText",function(e,t,i,a){var x=new Su(this.scene,e,t,i,a);return this.scene.add.existing(x),x}),Z(window,"RexPlugins.UI.BBCodeText",Su);var fT={plainText:null,prevProp:null},cT=new lu;let vT=class{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,i){this.tags[t]=i}getTag(t){return this.tags[t]}splitText(t,i){for(var a=[],x=0;;){var C=Cu.exec(t);if(!C)break;var E=C[0],O=Cu.lastIndex-E.length;if(x<O&&a.push(t.substring(x,O)),i===void 0)a.push(E);else if(i===1){if(zv.test(E)){var I=E.match(Yv);a.push(I[2])}else if(Wv.test(E)){var I=E.match(Xv);a.push(I[2])}}x=Cu.lastIndex}var V=t.length;return x<V&&a.push(t.substring(x,V)),a}tagTextToProp(t,i){var a,x;if(zv.test(t)){var C=t.match(Yv);if(C!=null){var E=C[1],O=this.tags;O.hasOwnProperty(E)?x=O[E]:x={},x._class=E,a=C[2]}}else if(Wv.test(t)){var C=t.match(Xv);if(C!=null){var I=C[1];x=pT(I),x._style=I,a=C[2]}}a==null&&(a=t),x==null&&(x={});var V=fT;return V.plainText=a,V.prop=x,V}propToContextStyle(t,i){var a=cT;if(i.hasOwnProperty("img"))a.image=i.img;else{if(a.image=null,i.hasOwnProperty("family")||i.hasOwnProperty("fontFamily")||i.hasOwnProperty("font-family")){var x=i.hasOwnProperty("family")?i.family:i.hasOwnProperty("fontFamily")?i.fontFamily:i["font-family"];a.fontFamily=x}else a.fontFamily=t.fontFamily;if(i.hasOwnProperty("size")||i.hasOwnProperty("fontSize")||i.hasOwnProperty("font-size")){var C=i.hasOwnProperty("size")?i.size:i.hasOwnProperty("fontSize")?i.fontSize:i["font-size"];typeof C=="number"&&(C=`${C}px`),a.fontSize=C}else a.fontSize=t.fontSize;if(i.hasOwnProperty("style")||i.hasOwnProperty("fontStyle")||i.hasOwnProperty("font-style")){var E=i.hasOwnProperty("style")?i.style:i.hasOwnProperty("fontStyle")?i.fontStyle:i["font-style"];a.fontStyle=E}else a.fontStyle=t.fontStyle;if(i.hasOwnProperty("color")||i.hasOwnProperty("font-color")){var O=i.hasOwnProperty("color")?i.color:i["font-color"];a.color=O}else a.color=t.color;if(i.hasOwnProperty("stroke")){var I=i.stroke;a.stroke=I.hasOwnProperty("color")?I.color:t.stroke,a.strokeThickness=I.hasOwnProperty("thickness")?I.thickness:t.strokeThickness}else a.stroke=t.stroke,a.strokeThickness=t.strokeThickness}if(i.hasOwnProperty("shadow")){var V=i.shadow;a.shadowColor=V.hasOwnProperty("color")?V.color:t.shadowColor,a.shadowOffsetX=V.hasOwnProperty("offsetX")?V.offsetX:t.shadowOffsetX,a.shadowOffsetY=V.hasOwnProperty("offsetY")?V.offsetY:t.shadowOffsetY,a.shadowBlur=V.hasOwnProperty("blur")?V.blur:t.shadowBlur,a.shadowStroke=!0,a.shadowFill=!0}else a.shadowColor=t.shadowColor,a.shadowOffsetX=t.shadowOffsetX,a.shadowOffsetY=t.shadowOffsetY,a.shadowBlur=t.shadowBlur,a.shadowStroke=t.shadowStroke,a.shadowFill=t.shadowFill;if(i.hasOwnProperty("u")||i.hasOwnProperty("underline")){var X=i.hasOwnProperty("u")?i.u:i.underline;a.underlineColor=X.hasOwnProperty("color")?X.color:t.underlineColor,a.underlineThickness=X.hasOwnProperty("thickness")?X.thickness:t.underlineThickness,a.underlineOffset=X.hasOwnProperty("offset")?X.offset:t.underlineOffset}else a.underlineColor=t.underlineColor,a.underlineThickness=t.underlineThickness,a.underlineOffset=t.underlineOffset;if(i.hasOwnProperty("s")||i.hasOwnProperty("strikethrough")){var q=i.hasOwnProperty("s")?i.s:i.strikethrough;a.strikethroughColor=q.hasOwnProperty("color")?q.color:t.strikethroughColor,a.strikethroughThickness=q.hasOwnProperty("thickness")?q.thickness:t.strikethroughThickness,a.strikethroughOffset=q.hasOwnProperty("offset")?q.offset:t.strikethroughOffset}else a.strikethroughColor=t.strikethroughColor,a.strikethroughThickness=t.strikethroughThickness,a.strikethroughOffset=t.strikethroughOffset;return a}getStrokeThinkness(t,i){var a;if(i.hasOwnProperty("stroke")){var x=i.stroke;a=x.hasOwnProperty("thickness")?x.thickness:t.strokeThickness}else a=t.strokeThickness;return a}propToTagText(t,i,a){return i.hasOwnProperty("_class")?t===""&&this.isTextTag(i._class)?"":`<class='${i._class}'>${t}</class>`:i.hasOwnProperty("_style")?`<style='${i._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var i=this.tags[t];return i?i.img==null:!1}};var pT=function(e){e=e.split(";");for(var t={},i,a,x,C=0,E=e.length;C<E;C++)if(i=e[C].split(":"),a=i[0],x=i[1],!(Vv(a)||Vv(x))){switch(a){case"stroke":var O=x.split(" "),I=O.length;x={},I>=1&&(x.color=O[0]),I>=2&&(x.thickness=parseInt(O[1].replace("px","")));break;case"shadow":var O=x.split(" "),I=O.length;x={},I>=1&&(x.color=O[0]),I>=2&&(x.offsetX=parseInt(O[1].replace("px",""))),I>=3&&(x.offsetY=parseInt(O[2].replace("px",""))),I>=4&&(x.blur=parseInt(O[3].replace("px","")));break;case"u":case"underline":case"s":case"strikethrough":var O=x.split(" "),I=O.length;x={},I>=1&&(x.color=O[0]),I>=2&&(x.thickness=parseInt(O[1].replace("px",""))),I>=3&&(x.offset=parseInt(O[2].replace("px",""))),a==="underline"?a="u":a==="strikethrough"&&(a="s");break;case"y":x=parseFloat(x);break}t[a]=x}return t},Vv=function(e){return e=e.replace(gT,""),e.length===0},Cu=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,zv=/<\s*class=/i,Yv=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,Wv=/<\s*style=/i,Xv=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,gT=/^\s+|\s+$/;const mT=Phaser.Utils.Objects.GetValue;class Uv extends xu{constructor(t,i,a,x,C){var E=mT(C,"tags",void 0),O=new vT(E);super(t,i,a,x,C,"rexTagText",O)}addTag(t,i){return this.parser.addTag(t,i),this.updateText(!0)}addTags(t){for(var i in t)this.parser.addTag(i,t[i]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}k.register("tagText",function(e,t,i,a){var x=new Uv(this.scene,e,t,i,a);return this.scene.add.existing(x),x}),Z(window,"RexPlugins.UI.TagText",Uv);const Go=Phaser.Utils.Objects.GetValue;var ko=function(e,t){return t===void 0?e:e[t]},qs=function(e,t,i){e===void 0&&(e={}),t===void 0&&(t=0);var a=typeof t;return a==="string"?e[t]=i:a==="number"?(e.left=t,e.right=t,e.top=t,e.bottom=t):(e.left=Go(t,"left",0),e.right=Go(t,"right",0),e.top=Go(t,"top",0),e.bottom=Go(t,"bottom",0)),e};let Tu=class{constructor(t,i){this.setParent(t),this.type=i,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(t,i){return!1}};Object.assign(Tu.prototype,Oi);var xT={renderContent(){},render(){if(!this.willRender)return this;var e=this.context;if(e.save(),e.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,i=this.drawY;this.autoRound&&(t=Math.round(t),i=Math.round(i)),e.translate(t,i),e.scale(this.scaleX,this.scaleY),e.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),e.restore(),this}};const yT=Phaser.Math.RotateAround;var ST=function(e,t,i,a){return a===void 0?a={}:a===!0&&(Mu===void 0&&(Mu={}),a=Mu),a.x=(e-i.drawX)/i.scaleX,a.y=(t-i.drawY)/i.scaleY,i.rotation!==0&&yT(a,0,0,-i.rotation),a},Mu;const CT=Phaser.Geom.Rectangle;var TT=function(e,t){if(this.width===0||this.height===0)return!1;var i=ST(e,t,this,!0);return MT(this).contains(i.x,i.y)},MT=function(e){No===void 0&&(No=new CT);var t=e.drawTLX,i=e.drawTLY;return No.setTo(t,i,e.drawTRX-t,e.drawBLY-i),No},No;const PT=Phaser.Math.RotateAround;var Hv=function(e,t,i,a){return a===void 0?a={}:a===!0&&(Pu===void 0&&(Pu={}),a=Pu),a.x=t,a.y=i,e.rotation!==0&&PT(a,0,0,e.rotation),a.x=a.x*e.scaleX+e.drawX,a.y=a.y*e.scaleY+e.drawY,a},Pu;const $v=Phaser.GameObjects.Components.TransformMatrix;var ET=function(e,t,i,a){a===void 0?a={}:a===!0&&(a=wT);var x=t-e.width*e.originX,C=i-e.height*e.originY;return ea===void 0&&(ea=new $v,Kv=new $v),e.parentContainer?e.getWorldTransformMatrix(ea,Kv):ea.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),ea.transformPoint(x,C,a),a},ea,Kv,wT={},bT=function(e,t,i,a,x){var C=Hv(t,i,a,!0),E=ET(e,C.x,C.y,x);return E},Zv=function(e,t,i,a,x){typeof i!="number"&&(x=i,i=0,a=0);var C=t.drawCenterX+i,E=t.drawCenterY+a;return bT(e,t,C,E,x)},RT=function(e,t,i){return Zv(this.parent,this,e,t,i)},Jv={contains:TT,getWorldPosition:RT};Object.assign(Jv,xT);const OT=Phaser.Math.DegToRad,AT=Phaser.Math.RadToDeg,Vo=Phaser.Utils.Objects.GetValue;class bn extends Tu{constructor(t,i){super(t,i),this.renderable=!0,this.scrollFactorX=1,this.scrollFactorY=1,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,i){return this.x=t,this.y=i,this}setInitialPosition(t,i){return this.x0=t,this.y0=i,this}setScrollFactorX(t){return this.scrollFactorX=t,this}setScrollFactorY(t){return this.scrollFactorY=t,this}setScrollFactor(t,i){return i===void 0&&(i=t),this.scrollFactorX=t,this.scrollFactorY=i,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return AT(this._rotation)}set angle(t){this.rotation=OT(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,i){return i===void 0&&(i=!1),this.width=t,i&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var i=Vo(t,"width",void 0),a=Vo(t,"height",void 0),x=Vo(t,"scaleX",void 0),C=Vo(t,"scaleY",void 0);return i!==void 0?a===void 0&&C===void 0?this.setWidth(i,!0):this.setWidth(i):x!==void 0&&this.setScaleX(x),a!==void 0?i===void 0&&x===void 0?this.setHeight(a,!0):this.setHeight(a):C!==void 0&&this.setScaleY(C),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){var t=this.x+this.leftSpace+this.offsetX-this.originX*this.width;return this.parent._textOX*this.scrollFactorX+t}get drawY(){var t=this.y+this.offsetY;return this.parent._textOY*this.scrollFactorY+t}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(bn.prototype,Jv);var _s=function(e,t,i){return t.hasOwnProperty(e)?t[e]:i[e]};const Rn=Phaser.Utils.Objects.GetValue;class LT extends bn{constructor(t,i){super(t,"background"),this.setScrollFactor(0),this.setColor(Rn(i,"color",null),Rn(i,"color2",null),Rn(i,"horizontalGradient",!0)),this.setStroke(Rn(i,"stroke",null),Rn(i,"strokeThickness",2)),this.setCornerRadius(Rn(i,"cornerRadius",0),Rn(i,"cornerIteration",null))}set color(t){t=Ut(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=Ut(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,i,a){return a===void 0&&(a=!0),this.color=t,this.color2=i,this.horizontalGradient=a,this}set stroke(t){t=Ut(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,i){return t!=null&&i===void 0&&(i=2),this.stroke=t,this.strokeThickness=i,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,_s("color2",t,this),_s("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,_s("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,_s("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,i){return this.cornerRadius=t,this.cornerIteration=i,this}renderContent(){au(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const tn=Phaser.Utils.Objects.GetValue;class DT extends bn{constructor(t,i){super(t,"innerbounds"),this.setScrollFactor(0),this.setColor(tn(i,"color",null),tn(i,"color2",null),tn(i,"horizontalGradient",!0)),this.setStroke(tn(i,"stroke",null),tn(i,"strokeThickness",2))}set color(t){t=Ut(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=Ut(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,i,a){return a===void 0&&(a=!0),this.color=t,this.color2=i,this.horizontalGradient=a,this}set stroke(t){t=Ut(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,i){return t!=null&&i===void 0&&(i=2),this.stroke=t,this.strokeThickness=i,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,tn(t,"color2",null),tn(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,tn(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,i=t.left,a=t.top,x=this.parent.width-t.left-t.right,C=this.parent.height-t.top-t.bottom,E=this.context;if(this.color!=null){var O;if(this.color2!=null){var I;this.horizontalGradient?I=E.createLinearGradient(0,0,x,0):I=E.createLinearGradient(0,0,0,C),I.addColorStop(0,this.color),I.addColorStop(1,this.color2),O=I}else O=this.color;E.fillStyle=O,E.fillRect(i,a,x,C)}this.stroke!=null&&this.strokeThickness>0&&(E.strokeStyle=this.stroke,E.lineWidth=this.strokeThickness,E.strokeRect(i,a,x,C))}}const Fe=Phaser.Utils.Objects.GetValue;class zo{constructor(t,i){this.parent=t,this.set(i)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(Fe(t,"bold",!1)),this.setItalic(Fe(t,"italic",!1)),this.setFontSize(Fe(t,"fontSize","16px")),this.setFontFamily(Fe(t,"fontFamily","Courier")),this.setColor(Fe(t,"color","#fff")),this.setStrokeStyle(Fe(t,"stroke",null),Fe(t,"strokeThickness",0)),this.setShadow(Fe(t,"shadowColor",null),Fe(t,"shadowOffsetX",0),Fe(t,"shadowOffsetY",0),Fe(t,"shadowBlur",0)),this.setOffset(Fe(t,"offsetX",0),Fe(t,"offsetY",0)),this.setSpace(Fe(t,"leftSpace",0),Fe(t,"rightSpace",0)),this.setAlign(Fe(t,"align",void 0)),this.setBackgroundColor(Fe(t,"backgroundColor",null)),this.setBackgroundHeight(Fe(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(Fe(t,"backgroundBottomY",void 0)),this.setBackgroundLeftX(Fe(t,"backgroundLeftX",0)),this.setBackgroundRightX(Fe(t,"backgroundRightX",0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(_s("stroke",t,this),_s("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(_s("shadowOffsetX",t,this),_s("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),t.hasOwnProperty("backgroundLeftX")&&this.setBackgroundLeftX(t.backgroundLeftX),t.hasOwnProperty("backgroundRightX")&&this.setBackgroundRightX(t.backgroundRightX),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new zo(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=Ut(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,i){return this.stroke=Ut(t),i!==void 0&&(this.strokeThickness=i),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=Ut(t),this}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=0),this.shadowOffsetX=t,this.shadowOffsetY=i,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,i,a,x){return this.setShadowColor(t).setShadowOffset(i,a).setShadowBlur(x),this}setBackgroundColor(t){return this.backgroundColor=Ut(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setBackgroundLeftX(t){return this.backgroundLeftX=t,this}setBackgroundRightX(t){return this.backgroundRightX=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,i){return this.setOffsetX(t).setOffsetY(i),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,i){return this.setLeftSpace(t).setRightSpace(i),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var i=this.hasFill,a=this.hasStroke;return t.fillStyle=i?this.color:"#000",t.strokeStyle=a?this.stroke:"#000",t.lineWidth=a?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,i){return this.syncFont(t).syncStyle(t),t.measureText(i)}}var FT=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=0),this.fixedWidth===e&&this.fixedHeight===t?this:(this.fixedWidth=e,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(e>0?e:this.width,t>0?t:this.height),this)},BT=function(e,t){var i=this.padding,a=i.left,x=i.right,C=i.top,E=i.bottom;return qs(i,e,t),this.dirty=this.dirty||a!=i.left||x!=i.right||C!=i.top||E!=i.bottom,this},IT=function(e){return ko(this.padding,e)},GT=function(e){return this.textStyle.modify(e),this},kT=function(e){return this.defaultTextStyle.modify(e),this},NT=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},VT=function(e){return this.testString=e,this};const zT=Phaser.Utils.Array.Remove;var YT=function(e){return this.poolManager.free(e),zT(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},WT=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this};const XT=Phaser.Utils.Array.Remove;var UT=function(e){return XT(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},HT=function(){return this.setText(),this},$T=function(e,t){var i=Array.isArray(e);return t===void 0||t===this.children.length?i?this.children.push(...e):this.children.push(e):i?this.children.splice(t,0,...e):this.children.splice(t,0,e),this.lastAppendedChildren.length=0,i?this.lastAppendedChildren.push(...e):this.lastAppendedChildren.push(e),this};const bs="text",Qv="image",jv="drawer",qv="space",Eu="command";var _v=function(e){return e.type===bs&&e.text===`
`},tp=function(e){return e.type===bs&&e.text==="\f"},KT=function(e){return e.type===bs&&e.text===" "},On=function(e){return e.type===bs},ZT=function(e){return e.type===Eu};class ep extends bn{constructor(t,i,a){super(t,bs),this.updateTextFlag=!1,this.style=new zo(this,a),this.setText(i)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.clearTextSize();else{var i=this.style.getTextMetrics(this.context,this.text);this.textWidth=i.width;var a,x;"actualBoundingBoxAscent"in i?(a=i.actualBoundingBoxAscent,x=i.actualBoundingBoxDescent):(a=0,x=0),this.textHeight=a+x,this.ascent=a,this.descent=x}return this.updateTextFlag=!1,this}clearTextSize(){return this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0,this}copyTextSize(t){return this.textWidth=t.textWidth,this.textHeight=t.textHeight,this.ascent=t.ascent,this.descent=t.descent,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){return this.textWidth===0?!1:super.willRender}renderContent(){var t=this.context,i=this.style;if(i.hasBackgroundColor){t.fillStyle=i.backgroundColor;var a=this.drawTLX+i.backgroundLeftX,x=this.drawTRX+i.backgroundRightX,C=a,E=x-a+1;if(E>0){var O=i.backgroundBottomY;O==null&&(O=this.drawBLY);var I=i.backgroundHeight;I==null&&(I=O-this.drawTLY);var V=O-I;t.fillRect(C,V,E,I)}}var X=i.hasFill,q=i.hasStroke;!X&&!q||(i.syncFont(t).syncStyle(t),q&&(i.syncShadow(t),t.strokeText(this.text,0,0)),X&&(i.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var JT=function(e,t){t&&this.textStyle.modify(t);var i=this.poolManager.allocate(bs);return i===null?i=new ep(this,e,this.textStyle):i.setParent(this).setActive().modifyStyle(this.textStyle).setText(e),i},QT=function(e,t){t&&this.textStyle.modify(t);for(var i=[],a=0,x=e.length;a<x;a++){var C=e.charAt(a),E=this.poolManager.allocate(bs);E===null?E=new ep(this,C,this.textStyle):E.setParent(this).setActive().modifyStyle(this.textStyle).setText(C),i.push(E)}return i},ia=function(e,t){var i=this.createCharChildren(e,t);return this.addChild(i),this},jT=function(e,t){return e===void 0&&(e=""),this.removeChildren(),ia.call(this,e,t),this.dirty=!0,this},qT=function(e,t,i){var a=this.createCharChildren(t,i);return e=this.getCharChildIndex(e,!0),this.addChild(a,e),this},_T=function(e,t){t===void 0&&(t=1);for(var i=0;i<t;i++){var a=this.getCharChildIndex(e,!0);if(a===void 0)break;this.removeChild(this.children[a])}return this},tM=function(e){var t="";return this.forEachCharChild(function(i){t+=i.text},void 0,e),t};Phaser.Display.Canvas.CanvasPool;class eM extends bn{constructor(t,i,a){super(t,Qv),this.setTexture(i,a),this.color=void 0}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,i){return this.key=t,this.frame=i,this.frameObj=this.scene.sys.textures.getFrame(t,i),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setColor(t){return this.color=t,this}modifyPorperties(t){return t.hasOwnProperty("color")&&this.setColor(t.color),super.modifyPorperties(t),this}renderContent(){Av(this.frameObj,this.canvas,0,0,this.frameWidth,this.frameHeight,this.color,!1)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var iM=function(e,t,i){var a=this.poolManager.allocate(Qv);return a===null?a=new eM(this,e,t):a.setParent(this).setActive().setTexture(e,t),a.modifyPorperties(i),a},ip=function(e,t,i){var a=this.createImageChild(e,t,i);return this.addChild(a),this};class sM extends bn{constructor(t,i,a,x){super(t,jv),this.setRenderCallback(i),this.setDrawerSize(a,x)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,i){return t===!0?(this.toLocalPosition=!1,t=void 0,i=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),i===void 0&&(i=t),this.drawerWidth=t,this.drawerHeight=i,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}var nM=function(e,t,i){var a=this.poolManager.allocate(jv);return a===null?a=new sM(this,e,t,i):a.setParent(this).setActive().setRenderCallback(e).setDrawerSize(t,i),a},rM=function(e,t,i){var a=this.createDrawerChild(e,t,i);return this.addChild(a),this};let aM=class extends bn{constructor(t,i){super(t,qv),this.setSpaceWidth(i)}get width(){return this.spaceWidth*this.scaleX}set width(t){this.spaceWidth>0?this.scaleX=t/this.spaceWidth:this.scaleX=1}setSpaceWidth(t){return this.spaceWidth=t,this}};var oM=function(e){var t=this.poolManager.allocate(qv);return t===null?t=new aM(this,e):t.setParent(this).setActive().setSpaceWidth(e),t},sp=function(e){var t=this.createSpaceChild(e);return this.addChild(t),this};class hM extends Tu{constructor(t,i,a,x,C){super(t,Eu),this.setName(i).setParameter(x).setCallback(a,C)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,i){return this.callback=t,this.scope=i,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var lM=function(e,t,i,a){var x=this.poolManager.allocate(Eu);return x===null?x=new hM(this,e,t,i,a):x.setParent(this).setActive().setName(e).setCallback(t,a).setParameter(i),x},Gt=function(e,t,i,a){var x=this.createCommandChild(e,t,i,a);return this.addChild(x),this},uM=function(e){return e===void 0?e={}:typeof e=="object"&&(e=j(e)),this.wrapConfig=e,this},np=function(e){var t={callback:void 0,start:0,isLastPage:!1,maxLines:void 0,padding:void 0,letterSpacing:void 0,hAlign:void 0,vAlign:void 0,children:[],lines:[],maxLineWidth:0,linesHeight:0,lineHeight:void 0,maxLineHeight:0,linesWidth:0,lineWidth:void 0};return Object.assign(t,e)};const dM={none:0,word:1,char:2,character:2,mix:3};var fM=function(e,t,i,a){a===void 0&&(a={word:[],width:0}),a.word.length=0;for(var x=i===2,C=i===3,E=!x&&!C,O=e.length,I=t,V=a.word,X=0,q=!1;I<O;){var st=e[I];if(!st.renderable){V.push(st),I++;continue}var it=st.type===bs?st.text:null;if(it===null||it===`
`||it==="\f"){I===t&&(V.push(st),X+=st.outerWidth);break}if(E){if(V.push(st),X+=st.outerWidth,it===" ")break;I++}else if(x){V.push(st),X+=st.outerWidth;break}else if(C)if(ta(it)){if(V.push(st),X+=st.outerWidth,it===" ")break;I++,q=!0}else{if(q)break;V.push(st),X+=st.outerWidth;var at=e[I+1];at&&at.type===bs&&at.text===" "&&(V.push(at),X+=at.outerWidth);break}}return a.width=X,a},rp=function(e){for(var t=0,i=e.length;t<i;t++){var a=e[t];if(a.align!==void 0)return a.align}},ap=function(e,t,i){if(!(t===0&&i===0))for(var a=0,x=e.length;a<x;a++){var C=e[a];C.renderable&&(C.x+=t,C.y+=i)}},cM=function(e,t,i){for(var a=e.hAlign,x=e.vAlign,C=e.justifyPercentage,E=e.lines,O,I,V=0,X=E.length;V<X;V++){var q=E[V],st=q.width,it=q.children,at=rp(it);switch(at===void 0&&(at=a),at){case 0:case"left":O=0;break;case 1:case"center":var ut=t-st;O=ut/2;break;case 2:case"right":var ut=t-st;O=ut;break;case 3:case"justify":case"justify-left":var ut=t-st,lt=ut/t;lt<C&&wu(it,ut),O=0;break;case 4:case"justify-center":var ut=t-st,lt=ut/t;lt<C?(wu(it,ut),O=0):O=ut/2;break;case 5:case"justify-right":var ut=t-st,lt=ut/t;lt<C?(wu(it,ut),O=0):O=ut;break;default:O=0;break}var ft=e.linesHeight;switch(x){case 1:case"center":I=(i-ft)/2;break;case 2:case"bottom":I=i-ft;break;default:I=0;break}ap(it,O,I)}},wu=function(e,t){for(var i=t/e.length,a=0,x=e.length;a<x;a++){var C=e[a];C.renderable&&(C.x+=i*a)}},op=function(){var e=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,i;return"actualBoundingBoxAscent"in e?(t=e.actualBoundingBoxAscent,i=e.actualBoundingBoxDescent):(t=0,i=0),Yo.ascent=t,Yo.descent=i,Yo.height=t+i,Yo},Yo={};const oi=Phaser.Utils.Objects.GetValue;var vM=function(e){var t=oi(e,"start",0);qs(this.wrapPadding,oi(e,"padding",0));var i=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,a=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,x=oi(e,"lineHeight"),C=oi(e,"ascent",x),E;if(x===void 0){var O=oi(e,"useDefaultTextHeight",!1);if(E=oi(e,"maxLines",0),this.fixedHeight>0&&!O){var Hs=this.fixedHeight-i;if(E>0)x=Hs/E;else{var I=op.call(this);x=I.height,C=I.ascent,E=Math.floor((Hs-C)/x)}}else{var I=op.call(this);x=I.height,C=I.ascent}}else if(this.fixedHeight>0){if(E=oi(e,"maxLines"),E===void 0){var Hs=this.fixedHeight-i;E=Math.floor(Hs/x)}}else E=oi(e,"maxLines",0);C===void 0&&(C=x);var V=E===0,X=oi(e,"wrapMode");if(X===void 0){var q=oi(e,"charWrap",!1);X=q?"char":"word"}typeof X=="string"&&(X=dM[X]);var st=oi(e,"wrapWidth",void 0);st===void 0&&(this.fixedWidth>0?st=this.fixedWidth-a:(st=1/0,X=0));for(var it=oi(e,"letterSpacing",0),at=oi(e,"hAlign",0),ut=oi(e,"vAlign",0),lt=oi(e,"justifyPercentage",.25),ft=np({callback:"runWordWrap",start:t,padding:this.wrapPadding,letterSpacing:it,maxLines:E,hAlign:at,vAlign:ut,justifyPercentage:lt,ascent:C,lineHeight:x,wrapWidth:st,wrapMode:X}),pt=this.children,ct=0,xt=pt.length;ct<xt;ct++)pt[ct].setActive(!1);st+=it;for(var Mt=this.padding.left+this.wrapPadding.left,Pt=this.padding.top+this.wrapPadding.top+C,Ot=Mt,It=Pt,Bt=st,zt=t,Vt=pt.length,_t=ft.children,te=ft.lines,kt=[],ce=0,me=0,Pe,Ye=!1;zt<Vt;){Pe=fM(pt,zt,X,Pe);var ke=Pe.word,ui=ke.length,Xi=Pe.width+ui*it;zt+=ui;var Ui=_v(ke[0]);Ye=tp(ke[0]);var Ps=Ui||Ye;if(Bt<Xi||Ps){if(Ps){var sr=ke[0];sr.setActive().setPosition(Ot,It),_t.push(sr),kt.push(sr)}Ot=Mt,It+=x,Bt=st,te.push({children:kt,width:ce}),me=Math.max(me,ce),ce=0,kt=[];var eu=Ye||!V&&te.length===E;if(eu)break;if(Ps)continue}Bt-=Xi,ce+=Xi;for(var ct=0,xt=ke.length;ct<xt;ct++){var di=ke[ct];di.setActive(),_t.push(di),kt.push(di),di.renderable&&(di.setPosition(Ot,It),Ot+=di.outerWidth+it)}}kt.length>0&&(te.push({children:kt,width:ce}),me=Math.max(me,ce)),ft.start+=_t.length,ft.isLastPage=!Ye&&ft.start===Vt,ft.maxLineWidth=me,ft.linesHeight=te.length*x;var Co=this.fixedWidth>0?this.fixedWidth:ft.maxLineWidth+a,To=this.fixedHeight>0?this.fixedHeight:ft.linesHeight+i,iu=Co-a,Hs=To-i;cM(ft,iu,Hs),this.setCanvasSize(Co,To);for(var ct=0,xt=_t.length;ct<xt;ct++){var di=_t[ct];di.renderable&&(di.x0=di.x,di.y0=di.y)}return ft};const pM=Phaser.Utils.Objects.Merge;var gM=function(e){return e===void 0&&(e={}),vM.call(this,pM(e,this.wrapConfig))},mM=function(e,t,i){var a=e.hAlign,x=e.vAlign,C,E,O=e.rtl,I=e.lines,V=e.lineWidth,X=e.linesWidth;switch(a){case 1:case"center":C=(t-X)/2;break;case 2:case"right":C=t-X;break;default:C=0;break}O&&(C+=V);for(var q=0,st=I.length;q<st;q++){var it=I[O?st-q-1:q],at=it.children,ut=it.height,lt=rp(at);switch(lt===void 0&&(lt=x),lt){case 1:case"center":E=(i-ut)/2;break;case 2:case"bottom":E=i-ut;break;default:E=0;break}ap(at,C,E),C+=V}};const Si=Phaser.Utils.Objects.GetValue;var xM=function(e){var t=Si(e,"start",0);qs(this.wrapPadding,Si(e,"padding",0));var i=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,a=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,x=Si(e,"lineWidth",void 0),C;if(x===void 0)if(C=Si(e,"maxLines",0),this.fixedWidth>0){var Ui=this.fixedWidth-a;x=Ui/C}else x=0;else if(this.fixedWidth>0){if(C=Si(e,"maxLines",void 0),C===void 0){var Ui=this.fixedWidth-a;C=Math.floor(Ui/x)+1}}else C=Si(e,"maxLines",0);var E=C===0,O=Si(e,"fixedCharacterHeight",void 0);if(O===void 0){var I=Si(e,"charPerLine",void 0);if(I!==void 0){var Ps=this.fixedHeight-i;O=Math.floor(Ps/I)}}var V=Si(e,"wrapHeight",void 0);V===void 0&&(this.fixedHeight>0?V=this.fixedHeight-i:V=1/0);for(var X=Si(e,"letterSpacing",0),q=Si(e,"rtl",!0),st=Si(e,"hAlign",q?2:0),it=Si(e,"vAlign",0),at=np({callback:"runVerticalWrap",start:t,padding:this.wrapPadding,letterSpacing:X,maxLines:C,hAlign:st,vAlign:it,lineWidth:x,fixedCharacterHeight:O,wrapHeight:V,rtl:q}),ut=this.children,lt=0,ft=ut.length;lt<ft;lt++)ut[lt].setActive(!1);V+=X;for(var pt=this.padding.left+this.wrapPadding.left,ct=this.padding.top+this.wrapPadding.top,xt=pt,Mt=ct,Pt=V,Ot=t,It=ut.length,Bt=at.children,zt=at.lines,Vt=[],_t=0,te=0;Ot<It;){var kt=ut[Ot];if(Ot++,!kt.renderable){kt.setActive(),Bt.push(kt),Vt.push(kt);continue}var ce=(O!==void 0?O:kt.height)+X,me=_v(kt),Pe=tp(kt),Ye=me||Pe;if(Pt<ce||Ye){me&&(kt.setActive().setPosition(xt,Mt).setOrigin(.5),Bt.push(kt),Vt.push(kt)),xt=pt,Mt=ct,Pt=V,zt.push({children:Vt,height:_t}),te=Math.max(te,_t),_t=0,Vt=[];var ke=Pe||!E&&zt.length===C;if(ke)break;if(Ye)continue}Pt-=ce,_t+=ce,kt.setActive().setPosition(xt,Mt).setOrigin(.5),Bt.push(kt),Vt.push(kt),Mt+=ce}Vt.length>0&&(zt.push({children:Vt,height:_t}),te=Math.max(te,_t)),at.start+=Bt.length,at.isLastPage=at.start===It,at.maxLineHeight=te,at.linesWidth=zt.length*x;var ui=this.fixedWidth>0?this.fixedWidth:at.linesWidth+a,Xi=this.fixedHeight>0?this.fixedHeight:at.maxLineHeight+i,Ui=ui-a,Ps=Xi-i;mM(at,Ui,Ps),this.setCanvasSize(ui,Xi);for(var lt=0,ft=Bt.length;lt<ft;lt++){var kt=Bt[lt];kt.renderable&&(kt.x0=kt.x,kt.y0=kt.y)}return at};const yM=Phaser.Utils.Objects.Merge;var SM=function(e){return e===void 0&&(e={}),xM.call(this,yM(e,this.wrapConfig))};const hp=Phaser.Utils.Objects.GetValue;var CM=function(e){var t=hp(this.wrapConfig,"callback");return t||(t=hp(e,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,e)},TM={setVAlign(e){return this.wrapConfig.vAlign=e,this},setHAlign(e){return this.wrapConfig.hAlign=e,this}},MM={setTextOX(e){return e===this._textOX?this:(this._textOX=e,this)},setTextOY(e){return e===this._textOY?this:(this._textOY=e,this)},setTextOXY(e,t){if(!(e===this._textOX&&t===this._textOY))return this._textOX=e,this._textOY=t,this},addTextOX(e){return this.setTextOX(this._textOX+e),this},addTextOY(e){return this.setTextOY(this._textOY+e),this},addTextOXY(e,t){return this.setTextOXY(this._textOX+e,this._textOY+t),this}},PM=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var e,t=0,i=this.children.length;t<i;t++)e=this.children[t],e.active&&e.render();this.innerBounds.active&&this.innerBounds.render()},EM=function(e,t,i){i===void 0&&(i=!0);for(var a=this.children.filter(function(I){return!(i&&!I.active)}),x=0,C=a.length;x<C;x++){var E=a[x],O;if(t?O=e.call(this,E,x,a):O=e(E,x,a),O)break}return this},wM=function(e,t,i){i===void 0&&(i=!0);for(var a=this.children.filter(function(I){return!(i&&!I.active||!I.renderable||I.removed)}),x=0,C=a.length;x<C;x++){var E=a[x],O;if(t?O=e.call(this,E,x,a):O=e(E,x,a),O)break}return this},bM=function(e,t,i){i===void 0&&(i=!0);for(var a=this.children.filter(function(I){return!(i&&!I.active||!On(I)||I.removed)}),x=0,C=a.length;x<C;x++){var E=a[x],O;if(t?O=e.call(this,E,x,a):O=e(E,x,a),O)break}return this},RM=function(){return this.children};const OM=Phaser.Utils.Array.GetAll;var AM=function(){return OM(this.children,"active",!0)},LM=function(e,t){return t===void 0&&(t=[]),this.forEachCharChild(function(i){t.push(i)},void 0,e),t},DM=function(){return this.lastAppendedChildren},FM=function(e,t,i,a){typeof t!="number"&&(a=t,t=0,i=0);var x=e.drawCenterX+t,C=e.drawCenterY+i;return Hv(e,x,C,a)};const BM=Phaser.Math.Distance.BetweenPointsSquared;var IM=function(e,t){var i={x:e,y:t},a=1/0,x=null;return this.forEachRenderableChild(function(C){var E=BM(i,FM(C,!0));a>E&&(a=E,x=C)}),x},GM=function(e,t,i,a){return typeof e=="number"&&(e=this.getCharChild(e,!0)),Zv(this,e,t,i,a)},kM=function(){for(var e=this.children,t=0,i=0,a=0,x=e.length;a<x;a++){var C=e[a];if(!(!C.renderable||!C.active||!C.visible)){var E=C.x0!==void 0?C.x0:C.x,O=C.y0!==void 0?C.y0:C.y;t=Math.max(t,E),i=Math.max(i,O)}}var I=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,V=i+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==I||this.height!==V)&&(this.dirty=!0,this.setCanvasSize(I,V)),this},NM=function(e,t){t===void 0&&(t=!0);for(var i=this.children,a=0,x=i.length;a<x;a++){var C=i[a];if(!(t&&!C.active)&&On(C)&&!C.removed){if(e===0)return a;e--}}},VM=function(e,t){t===void 0&&(t=!0);for(var i=this.children,a=0,x=i.length;a<x;a++){var C=i[a];if(!(t&&!C.active)&&On(C)&&!C.removed){if(e===0)return C;e--}}},zM=function(e,t){if(typeof e!="number"&&(e=this.children.indexOf(e),e<0))return null;t===void 0&&(t=!0);var i=this.children;e>=i.length&&(e=i.length);for(var a=0,x=0;x<e;x++){var C=i[x];t&&!C.active||On(C)&&!C.removed&&a++}return a},YM=function(e){return e===void 0&&(e=!0),this.childrenInteractiveEnable!==e&&(this.lastOverChild=null),this.childrenInteractiveEnable=e,this},bu=function(a,t,i){for(var a=a,x=0,C=a.length;x<C;x++){var E=a[x];if(!(!E.active||!E.renderable)&&E.contains(t,i))return E}return null},WM=function(){return this.on("pointerdown",XM,this).on("pointerdown",UM,this).on("pointermove",Ru,this).on("pointerover",Ru,this).on("pointerout",function(e,t){Ru.call(this,e,null,null,t)},this),this},XM=function(e,t,i,a){if(this.childrenInteractiveEnable){var x=bu(this.children,t,i);x&&this.emit("child.pointerdown",x,e,t,i,a)}},UM=function(e,t,i,a){if(this.childrenInteractiveEnable){var x=bu(this.children,t,i);x&&this.emit("child.pointerup",x,e,t,i,a)}},Ru=function(e,t,i,a){if(this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,e,t,i,a),this.lastOverChild=null);return}var x=bu(this.children,t,i);x!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,e,t,i,a),x!==null&&this.emit("child.pointerover",x,e,t,i,a),this.lastOverChild=x)}};const HM=Phaser.GameObjects.GameObject;var $M=function(e,t,i){var a=!!this.input;return HM.prototype.setInteractive.call(this,e,t,i),a||WM.call(this),this};const KM=Phaser.Utils.Array.BringToTop,ZM=Phaser.Utils.Array.SendToBack,JM=Phaser.Utils.Array.MoveUp,QM=Phaser.Utils.Array.MoveDown,jM=Phaser.Utils.Array.MoveAbove,qM=Phaser.Utils.Array.MoveBelow;var _M={moveChildToFist(e){return ZM(this.children,e),this},moveChildToLast(e){return KM(this.children,e),this},movechildUp(e){return JM(this.children,e),this},movechildDown(e){return QM(this.children,e),this},movechildAbove(e,t){return jM(this.children,e,t),this},movechildBelow(e,t){return qM(this.children,e,t),this}},tP={setBackgroundColor(e,t,i){return this.background.setColor(e,t,i),this},setBackgroundStroke(e,t){return this.background.setStroke(e,t),this},setBackgroundCornerRadius(e,t){return this.background.setCornerRadius(e,t),this}},eP={setInnerBoundsColor(e,t,i){return this.innerBounds.setColor(e,t,i),this},setInnerBoundsStroke(e,t){return this.innerBounds.setStroke(e,t),this}},lp={setFixedSize:FT,setPadding:BT,getPadding:IT,modifyTextStyle:GT,modifyDefaultTextStyle:kT,resetTextStyle:NT,setTestString:VT,removeChild:YT,removeChildren:WT,popChild:UT,clearContent:HT,addChild:$T,createCharChild:JT,createCharChildren:QT,setText:jT,appendText:ia,insertText:qT,removeText:_T,getText:tM,createImageChild:iM,appendImage:ip,createDrawerChild:nM,appendDrawer:rM,createSpaceChild:oM,appendSpace:sp,createCommandChild:lM,appendCommand:Gt,setWrapConfig:uM,runWordWrap:gM,runVerticalWrap:SM,runWrap:CM,renderContent:PM,forEachChild:EM,forEachRenderableChild:wM,forEachCharChild:bM,getChildren:RM,getActiveChildren:AM,getCharChildren:LM,getLastAppendedChildren:DM,getNearestChild:IM,getCharWorldPosition:GM,setToMinSize:kM,getCharChildIndex:NM,getCharChild:VM,getCharIndex:zM,setChildrenInteractiveEnable:YM,setInteractive:$M};Object.assign(lp,_M,tP,eP,TM,MM);const iP=Phaser.Utils.Objects.GetFastValue;var sP={};class nP{constructor(t){this.pools=iP(t,"pools",sP)}free(t){if(!this.pools)return this;var i=t.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new St),this.pools[i].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var i=0,a=t.length;i<a;i++)this.free(t[i]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const Ou=Phaser.Utils.Objects.IsPlainObject,Ke=Phaser.Utils.Objects.GetValue;class ur extends Zs{constructor(t,i,a,x,C,E,O){Ou(i)?(O=i,i=Ke(O,"x",0),a=Ke(O,"y",0),x=Ke(O,"width",0),C=Ke(O,"height",0),E=Ke(O,"resolution",1)):Ou(x)?(O=x,x=Ke(O,"width",0),C=Ke(O,"height",0),E=Ke(O,"resolution",1)):Ou(E)&&(O=E,E=Ke(O,"resolution",1));var I=x===0?1:x,V=C===0?1:C;super(t,i,a,I,V,E),this.type="rexDynamicText",this.autoRound=!0,this.padding=qs(),this.wrapPadding=qs();var X=Ke(O,"style",void 0);this.defaultTextStyle=new zo(null,X),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(Ke(O,"testString","|MÉqgy")),this._textOX=0,this._textOY=0,this.background=new LT(this,Ke(O,"background",void 0)),this.innerBounds=new DT(this,Ke(O,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new nP(O),this.setFixedSize(x,C),this.setPadding(Ke(O,"padding",0)),this.setWrapConfig(Ke(O,"wrap",void 0)),this.setChildrenInteractiveEnable(Ke(O,"childrenInteractive",!1));var q=Ke(O,"text",void 0);q&&this.setText(q)}updateTexture(){return super.updateTexture(function(){this.renderContent()},this),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,i){return this.setFixedSize(t,i),this}get textOX(){return this._textOX}set textOX(t){this.setTextOX(t)}get textOY(){return this._textOY}set textOY(t){this.setTextOY(t)}}Object.assign(ur.prototype,lp),k.register("dynamicText",function(e,t,i,a,x){var C=new ur(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.DynamicText",ur);var sa={setEventEmitter(e,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},rP={hasProperty(e){var t=this.gameObject;if(t.hasOwnProperty(e))return!0;var i=t[e];return i!==void 0},getProperty(e){return this.gameObject[e]},setProperty(e,t){return this.gameObject[e]=t,this},easeProperty(st){var t=st.property,i=st.value,a=st.duration,x=st.delay,C=st.ease,E=st.repeat,O=st.yoyo,I=st.from,V=st.complete,X=st.target;if(a===void 0&&(a=1e3),x===void 0&&(x=0),C===void 0&&(C="Linear"),E===void 0&&(E=0),O===void 0&&(O=!1),X===void 0&&(X=this.gameObject),I){var q=i;i=X[t],X[t]=q}var st={targets:X,duration:a,delay:x,ease:C,repeat:E,yoyo:O,onComplete:V};return st[t]=i,this.addTweenTask(t,st),this},addTweenTask(e,t){var i=this.tweens,a=i[e];a&&a.remove();var x=t.onComplete;return t.onComplete=function(){i[e].remove(),i[e]=null,x&&x(t.targets,e)},a=this.scene.tweens.add(t),a.timeScale=this.timeScale,i[e]=a,this},getTweenTask(e){return this.tweens[e]},freeTweens(){var e=this.tweens,t;for(var i in e)t=e[i],t&&t.remove(),e[i]=null;return this}},aP={hasMethod(e){return typeof this.gameObject[e]=="function"},call(e,...t){if(!this.hasMethod(e))return console.warn(`[GameObjectManager] Game object '${this.name}' does not have method '${e}'`),this;var i=this.gameObject;return i[e].apply(i,t),this}},oP={hasData(e){var t=this.gameObject;return t.data?t.data.has(e):!1},getData(e){return this.gameObject.getData(e)},setData(e,t){return this.gameObject.setData(e,t),this}};class Au{constructor(t,i,a){this.GOManager=t,this.tweens={},this.effects={},this.setGO(i,a)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeGO(){return this.freeTweens(),this.gameObject.bob=void 0,this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,i){return t.goName=i,t.goType=this.GOManager.name,t.bob=this,this.gameObject=t,this.name=i,this.freeTweens(),this}setTimeScale(t){var i=this.tweens;for(var a in i){var x=i[a];x&&(x.timeScale=t)}return this}}Object.assign(Au.prototype,rP,aP,oP);var na=function(e){for(var t in e)return!1;return!0},An=function(e){return e&&e.charAt(0)!=="!"},hP={has(e){return this.bobs.hasOwnProperty(e)},exists(e){return this.bobs.hasOwnProperty(e)},get(e,t){if(An(e))return this.bobs[e];t===void 0&&(t=[]),e&&(e=e.substring(1));for(var i in this.bobs)e&&i===e||t.push(this.bobs[i]);return t},getFitst(e){e&&e.charAt(0)==="!"&&(e=e.substring(1));for(var t in this.bobs)if(!(e&&e===t))return this.bobs[t];return null},getGO(e,t){var i=this.get(e);if(i)if(Array.isArray(i)){t===void 0&&(t=[]);var a=i;return a.forEach(function(x){t.push(x.gameObject)}),t}else return i.gameObject;else return null},forEachGO(e,t){for(var i in this.bobs){var a=this.bobs[i].gameObject,x;if(t?x=e.call(t,a,i,this):x=e(a,i,this),x)break}return this},getAllGO(e){e===void 0&&(e=[]);for(var t in this.bobs){var i=this.bobs[t].gameObject;e.push(i)}return e}},ra=function(e){return e>>16&255},aa=function(e){return e>>8&255},oa=function(e){return e&255},up=function(e,t){return t===void 0&&(t={}),t.r=e>>16&255,t.g=e>>8&255,t.b=e&255,t};const lP=65535,uP=16711935,dP=16776960;var fP=function(e,t){return(t&255)<<16|e&lP},cP=function(e,t){return(t&255)<<8|e&uP},vP=function(e,t){return t&255|e&dP},pP=function(e,t,i,a){return(t&255)<<16|(i&255)<<8|a&255},gP=function(e,t){if(e.hasOwnProperty("tintR"))return e;t===void 0&&(t=16777215);var i=ra(t),a=aa(t),x=oa(t);return Object.defineProperty(e,"tint",{get:function(){return t},set:function(C){C=Math.floor(C)&16777215,e.setTint&&e.setTint(C),t!==C&&(t=C,i=ra(t),a=aa(t),x=oa(t))}}),Object.defineProperty(e,"tintR",{get:function(){return i},set:function(C){C=Math.floor(C)&255,i!==C&&(i=C,e.tint=fP(t,C))}}),Object.defineProperty(e,"tintG",{get:function(){return a},set:function(C){C=Math.floor(C)&255,a!==C&&(a=C,e.tint=cP(t,C))}}),Object.defineProperty(e,"tintB",{get:function(){return x},set:function(C){C=Math.floor(C)&255,x!==C&&(x=C,e.tint=vP(t,C))}}),Object.defineProperty(e,"tintGray",{get:function(){return Math.floor((i+a+x)/3)},set:function(C){C=Math.floor(C)&255,(i!==C||a!==C||x!==C)&&(i=C,a=C,x=C,e.tint=pP(t,C,C,C))}}),e.tint=t,e};const mP=Phaser.Events.EventEmitter;var xP=function(e){if(e.events)return e;var t=new mP,i=e.x;Object.defineProperty(e,"x",{get:function(){return i},set:function(E){i!==E&&(i=E,t.emit("update",e))}});var a=e.y;Object.defineProperty(e,"y",{get:function(){return a},set:function(E){a!==E&&(a=E,t.emit("update",e))}});var x=e.width;Object.defineProperty(e,"width",{get:function(){return x},set:function(E){x!==E&&(x=E,t.emit("update",e))}});var C=e.height;return Object.defineProperty(e,"height",{get:function(){return C},set:function(E){C!==E&&(C=E,t.emit("update",e))}}),e.events=t,e},yP=function(e,t,i,a,x,C){return C===void 0?C={}:C===!0&&(C=SP),typeof i!="number"&&(i=0,a=0),C.x=x.x+x.width*e+i,C.y=x.y+x.height*t+a,C},SP={},CP=function(e,t,i,a,x,C,E){if(e.hasOwnProperty("vp"))return e;typeof i=="function"&&(E=i,i=void 0),typeof x=="function"&&(E=x,x=void 0),i===void 0&&(i=.5),a===void 0&&(a=.5),x===void 0&&(x=0),C===void 0&&(C=0),E===void 0&&(E=yP),xP(t);var O=t.events;e.vp=t;var I=function(){E(i,a,x,C,t,e)};O.on("update",I),e.once("destroy",function(){O.off("update",I),e.vp=void 0}),Object.defineProperty(e,"vpx",{get:function(){return i},set:function(V){i!==V&&(i=V,I())}}),Object.defineProperty(e,"vpy",{get:function(){return a},set:function(V){a!==V&&(a=V,I())}}),Object.defineProperty(e,"vpxOffset",{get:function(){return x},set:function(V){x!==V&&(x=V,I())}}),Object.defineProperty(e,"vpyOffset",{get:function(){return C},set:function(V){C!==V&&(C=V,I())}}),I()},_e=function(e){return e.preFX?e.preFX:e.postFX?e.postFX:null},we=function(e,t){e._effectSwitchNames||(e._effectSwitchNames=[],e.clearAllEffects=function(){for(var i=e._effectSwitchNames,a=0,x=i.length;a<x;a++)e[i[a]]=null;return e},e.on("destroy",e.clearAllEffects,e)),e._effectSwitchNames.push(t)},TP=function(e){if(se(e,"barrel"))return e;var t=_e(e);if(!t)return e;var i;return Object.defineProperty(e,"barrel",{get:function(){return i},set:function(a){i!==a&&(i=a,i===null||i===!1?e._barrelEffect&&(t.remove(e._barrelEffect),e._barrelEffect=void 0):(e._barrelEffect||(e._barrelEffect=t.addBarrel()),e._barrelEffect.amount=i))}}),e.barrel=null,we(e,"barrel"),e},Ze=function(e,t,i){if(se(e,t))return e;var a=_e(e);if(!a)return e;var x=`_${t}Effect`,C;return Object.defineProperty(e,t,{get:function(){return C},set:function(E){if(C!==E)if(C=E,C===null||C===!1)e[x]&&(a.remove(e[x]),e[x]=void 0);else{e[x]||(e[x]=a.addColorMatrix());var O=e[x];O[t](i===1?E:void 0)}}}),e[t]=null,we(e,t),e},MP=function(e){return Ze(e,"blackWhite"),e},PP=function(e){if(se(e,"bloomColor"))return e;var t=_e(e);if(!t)return e;var i,a=1,x=1,C=1,E=1,O=4;return Object.defineProperty(e,"bloomColor",{get:function(){return i},set:function(I){i!==I&&(i=I,i===null||i===!1?e._bloom&&(t.remove(e._bloom),e._bloom=void 0,t.setPadding(0)):(e._bloom||(e._bloom=t.addBloom(i,a,x,C,E,O),t.setPadding(Math.max(a,x)+1)),e._bloom.color=i))}}),Object.defineProperty(e,"bloomOffsetX",{get:function(){return a},set:function(I){if(a!==I&&(a=I,e._bloom)){var V=Math.max(a,x);t.setPadding(V+1),e._bloom.offsetX=a}}}),Object.defineProperty(e,"bloomOffsetY",{get:function(){return x},set:function(I){if(x!==I&&(x=I,e._bloom)){var V=Math.max(a,x);t.setPadding(V+1),e._bloom.offsetY=x}}}),Object.defineProperty(e,"bloomBlurStrength",{get:function(){return C},set:function(I){C!==I&&(C=I,e._bloom&&(e._bloom.blurStrength=C))}}),Object.defineProperty(e,"bloomStrength",{get:function(){return E},set:function(I){E!==I&&(E=I,e._bloom&&(e._bloom.strength=E))}}),Object.defineProperty(e,"bloomSteps",{get:function(){return O},set:function(I){O!==I&&(O=I,e._bloom&&(e._bloom.steps=O))}}),e.bloomColor=null,we(e,"bloomColor"),e},EP=function(e){if(se(e,"blurColor"))return e;var t=_e(e);if(!t)return e;var i,a=0,x=1,C=1,E=1,O=4;return Object.defineProperty(e,"blurColor",{get:function(){return i},set:function(I){i!==I&&(i=I,i===null||i===!1?e._blur&&(t.remove(e._blur),e._blur=void 0,t.setPadding(0)):(e._blur||(e._blur=t.addBlur(a,x,C,E,i,O),t.setPadding(Math.max(x,C)+1)),e._blur.color=i))}}),Object.defineProperty(e,"blurQuality",{get:function(){return a},set:function(I){a!==I&&(a=I,e._blur&&(e._blur.quality=a))}}),Object.defineProperty(e,"blurX",{get:function(){return x},set:function(I){if(x!==I&&(x=I,e._blur)){var V=Math.max(x,C);t.setPadding(V+1),e._blur.x=x}}}),Object.defineProperty(e,"blurY",{get:function(){return C},set:function(I){if(C!==I&&(C=I,e._blur)){var V=Math.max(x,C);t.setPadding(V+1),e._blur.y=C}}}),Object.defineProperty(e,"blurStrength",{get:function(){return E},set:function(I){E!==I&&(E=I,e._blur&&(e._blur.strength=E))}}),Object.defineProperty(e,"blurSteps",{get:function(){return O},set:function(I){O!==I&&(O=I,e._blur&&(e._blur.steps=O))}}),e.blurColor=null,we(e,"blurColor"),e},wP=function(e){if(se(e,"bokehRadius"))return e;var t=_e(e);if(!t)return e;var i,a=1,x=.2;return Object.defineProperty(e,"bokehRadius",{get:function(){return i},set:function(C){i!==C&&(i=C,i===null||i===!1?e._bokeh&&(t.remove(e._bokeh),e._bokeh=void 0):(e._bokeh||(e._bokeh=t.addBokeh(i,a,x)),e._bokeh.radius=i))}}),Object.defineProperty(e,"bokehAmount",{get:function(){return a},set:function(C){a!==C&&(a=C,e._bokeh&&(e._bokeh.amount=a))}}),Object.defineProperty(e,"bokehContrast",{get:function(){return x},set:function(C){x!==C&&(x=C,e._bokeh&&(e._bokeh.contrast=x))}}),e.bokehRadius=null,we(e,"bokehRadius"),e},bP=function(e){return Ze(e,"brightness",1),e},RP=function(e){return Ze(e,"brown"),e},OP=function(e){if(se(e,"circleColor"))return e;var t=_e(e);if(!t)return e;var i,a=8,x=0,C=.4,E=1,O=.005;return Object.defineProperty(e,"circleColor",{get:function(){return i},set:function(I){i!==I&&(i=I,i===null||i===!1?e._circle&&(t.remove(e._circle),e._circle=void 0):(e._circle||(e._circle=t.addCircle(a,i,x,E,O),e.circleBackgroundAlpha=C),e._circle.color=i))}}),Object.defineProperty(e,"circleThickness",{get:function(){return a},set:function(I){a!==I&&(a=I,e._circle&&(e._circle.thickness=a))}}),Object.defineProperty(e,"circleBackgroundColor",{get:function(){return x},set:function(I){x!==I&&(x=I,e._circle&&(e._circle.backgroundColor=x))}}),Object.defineProperty(e,"circleBackgroundAlpha",{get:function(){return C},set:function(I){C!==I&&(C=I,e._circle&&(e._circle.glcolor2[3]=C))}}),Object.defineProperty(e,"circleScale",{get:function(){return E},set:function(I){E!==I&&(E=I,e._circle&&(e._circle.scale=E))}}),Object.defineProperty(e,"circleFeather",{get:function(){return O},set:function(I){O!==I&&(O=I,e._circle&&(e._circle.feather=O))}}),e.circleColor=null,we(e,"circleColor"),e},AP=function(e){return Ze(e,"contrast",1),e},LP=function(e){return Ze(e,"desaturate",1),e},DP=function(e){return Ze(e,"desaturateLuminance"),e},FP=function(e){if(se(e,"displacementKey"))return e;var t=_e(e);if(!t)return e;var i,a=.005,x=.005;return Object.defineProperty(e,"displacementKey",{get:function(){return i},set:function(C){i!==C&&(i=C,i===null||i===!1?e._displacement&&(t.remove(e._displacement),e._displacement=void 0):(e._displacement||(e._displacement=t.addDisplacement(i,a,x)),e._displacement.setTexture(i)))}}),Object.defineProperty(e,"displacementX",{get:function(){return a},set:function(C){a!==C&&(a=C,e._displacement&&(e._displacement.x=a))}}),Object.defineProperty(e,"displacementY",{get:function(){return x},set:function(C){x!==C&&(x=C,e._displacement&&(e._displacement.y=x))}}),e.displacementKey=null,we(e,"displacementKey"),e},BP=function(e){if(se(e,"glowColor"))return e;var t=_e(e);if(!t)return e;var i,a=4,x=0;return Object.defineProperty(e,"glowColor",{get:function(){return i},set:function(C){i!==C&&(i=C,i===null||i===!1?e._glow&&(t.remove(e._glow),e._glow=void 0,t.setPadding(0)):(e._glow||(e._glow=t.addGlow(i,a,x),t.setPadding(a+1)),e._glow.color=i))}}),Object.defineProperty(e,"glowOuterStrength",{get:function(){return a},set:function(C){a!==C&&(a=C,e._glow&&(t.setPadding(a+1),e._glow.outerStrength=a))}}),Object.defineProperty(e,"glowInnerStrength",{get:function(){return x},set:function(C){x!==C&&(x=C,e._glow&&(e._glow.innerStrength=x))}}),e.glowColor=null,we(e,"glowColor"),e},IP=function(e){if(se(e,"gradientColor"))return e;var t=_e(e);if(!t)return e;var i,a,x=.5,C=0,E=0,O=0,I=1,V=0;return Object.defineProperty(e,"gradientColor",{get:function(){return[i,a]},set:function(X){var q,st;X===null||X===!1?(q=null,st=null):(q=X[0],st=X[1]),!(i===q&&a===st)&&(i=q,a=st,i===null||i===!1?e._gradient&&(t.remove(e._gradient),e._gradient=void 0):(e._gradient||(e._gradient=t.addGradient(i,a,x,C,E,O,I,V)),e._gradient.color1=i,e._gradient.color2=a))}}),Object.defineProperty(e,"gradientColor1",{get:function(){return i},set:function(X){if(X===null||X===!1){e.gradientColor=X;return}i!==X&&(i=X,e._gradient&&(e._gradient.color1=i))}}),Object.defineProperty(e,"gradientColor2",{get:function(){return a},set:function(X){if(X===null||X===!1){e.gradientColor=X;return}a!==X&&(a=X,e._gradient&&(e._gradient.color2=a))}}),Object.defineProperty(e,"gradientAlpha",{get:function(){return x},set:function(X){x!==X&&(x=X,e._gradient&&(e._gradient.alpha=x))}}),Object.defineProperty(e,"gradientFromX",{get:function(){return C},set:function(X){C!==X&&(C=X,e._gradient&&(e._gradient.fromX=C))}}),Object.defineProperty(e,"gradientFromY",{get:function(){return E},set:function(X){E!==X&&(E=X,e._gradient&&(e._gradient.fromY=E))}}),Object.defineProperty(e,"gradientToX",{get:function(){return O},set:function(X){O!==X&&(O=X,e._gradient&&(e._gradient.toX=O))}}),Object.defineProperty(e,"gradientToY",{get:function(){return I},set:function(X){I!==X&&(I=X,e._gradient&&(e._gradient.toY=I))}}),Object.defineProperty(e,"gradientSize",{get:function(){return V},set:function(X){V!==X&&(V=X,e._gradient&&(e._gradient.size=V))}}),e.gradientColor=null,we(e,"gradientColor"),e},GP=function(e){return Ze(e,"grayscale",1),e},kP=function(e){return Ze(e,"hue",1),e},NP=function(e){return Ze(e,"kodachrome"),e},VP=function(e){return Ze(e,"lsd"),e},zP=function(e){return Ze(e,"negative"),e},YP=function(e){if(se(e,"pixelate"))return e;var t=_e(e);if(!t)return e;var i;return Object.defineProperty(e,"pixelate",{get:function(){return i},set:function(a){i!==a&&(i=a,i===null||i===!1?e._pixelateEffect&&(t.remove(e._pixelateEffect),e._pixelateEffect=void 0):(e._pixelateEffect||(e._pixelateEffect=t.addPixelate()),e._pixelateEffect.amount=i))}}),e.pixelate=null,we(e,"pixelate"),e},WP=function(e){return Ze(e,"polaroid"),e},XP=function(e){if(se(e,"revealLeft"))return e;var t=_e(e);if(!t)return e;var i,a,x,C,E=.1,O=function(){i=null,a=null,x=null,C=null},I=function(V){V._revealEffect&&(t.remove(V._revealEffect),V._revealEffect=void 0)};return Object.defineProperty(e,"revealLeft",{get:function(){return i},set:function(V){i!==V&&(O(),i=V,i===null||i===!1?I(e):(e._revealEffect||(e._revealEffect=t.addReveal(E,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=0,e._revealEffect.progress=i))}}),Object.defineProperty(e,"revealRight",{get:function(){return a},set:function(V){a!==V&&(O(),a=V,a===null||a===!1?I(e):(e._revealEffect||(e._revealEffect=t.addReveal(E,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=0,e._revealEffect.progress=a))}}),Object.defineProperty(e,"revealUp",{get:function(){return x},set:function(V){x!==V&&(O(),x=V,x===null||x===!1?I(e):(e._revealEffect||(e._revealEffect=t.addReveal(E,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=1,e._revealEffect.progress=x))}}),Object.defineProperty(e,"revealDown",{get:function(){return C},set:function(V){C!==V&&(O(),C=V,C===null||C===!1?I(e):(e._revealEffect||(e._revealEffect=t.addReveal(E,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=1,e._revealEffect.progress=C))}}),Object.defineProperty(e,"revealWidth",{get:function(){return E},set:function(V){E!==V&&(E=V,e._revealEffect&&(e._revealEffect.wipeWidth=E))}}),e.revealLeft=null,we(e,"revealLeft"),we(e,"revealRight"),we(e,"revealUp"),we(e,"revealDown"),e},UP=function(e){return Ze(e,"saturate",1),e},HP=function(e){return Ze(e,"sepia"),e},$P=function(e){if(se(e,"shadowColor"))return e;var t=_e(e);if(!t)return e;var i,a=0,x=0,C=.1,E=1,O=6,I=1;return Object.defineProperty(e,"shadowColor",{get:function(){return i},set:function(V){i!==V&&(i=V,i===null||i===!1?e._shadow&&(t.remove(e._shadow),e._shadow=void 0):(e._shadow||(e._shadow=t.addShadow(a,x,C,E,i,O,I)),e._shadow.color=i))}}),Object.defineProperty(e,"shadowX",{get:function(){return a},set:function(V){a!==V&&(a=V,e._shadow&&(e._shadow.x=a))}}),Object.defineProperty(e,"shadowY",{get:function(){return x},set:function(V){x!==V&&(x=V,e._shadow&&(e._shadow.y=x))}}),Object.defineProperty(e,"decay",{get:function(){return C},set:function(V){C!==V&&(C=V,e._shadow&&(e._shadow.decay=C))}}),Object.defineProperty(e,"shadowPower",{get:function(){return E},set:function(V){E!==V&&(E=V,e._shadow&&(e._shadow.power=E))}}),Object.defineProperty(e,"shadowSamples",{get:function(){return O},set:function(V){O!==V&&(O=V,e._shadow&&(e._shadow.samples=O))}}),Object.defineProperty(e,"shadowIntensity",{get:function(){return I},set:function(V){I!==V&&(I=V,e._shadow&&(e._shadow.intensity=I))}}),e.shadowColor=null,we(e,"shadowColor"),e},KP=function(e){return Ze(e,"shiftToBGR"),e},ZP=function(e){if(se(e,"shineSpeed"))return e;var t=_e(e);if(!t)return e;var i,a=.5,x=3;return Object.defineProperty(e,"shineSpeed",{get:function(){return i},set:function(C){i!==C&&(i=C,i===null||i===!1?e._shine&&(t.remove(e._shine),e._shine=void 0):(e._shine||(e._shine=t.addShine(i,a,x)),e._shine.speed=i))}}),Object.defineProperty(e,"shineLineWidth",{get:function(){return a},set:function(C){a!==C&&(a=C,e._shine&&(e._shine.lineWidth=a))}}),Object.defineProperty(e,"shineGradient",{get:function(){return x},set:function(C){x!==C&&(x=C,e._shine&&(e._shine.gradient=x))}}),e.shineSpeed=null,we(e,"shineSpeed"),e},JP=function(e){return Ze(e,"technicolor"),e},QP=function(e){if(se(e,"tiltShiftRadius"))return e;var t=_e(e);if(!t)return e;var i,a=1,x=.2,C=1,E=1,O=1;return Object.defineProperty(e,"tiltShiftRadius",{get:function(){return i},set:function(I){i!==I&&(i=I,i===null||i===!1?e._tiltShift&&(t.remove(e._tiltShift),e._tiltShift=void 0):(e._tiltShift||(e._tiltShift=t.addTiltShift(i,a,x,C,E,O)),e._tiltShift.radius=i))}}),Object.defineProperty(e,"tiltShiftAmount",{get:function(){return a},set:function(I){a!==I&&(a=I,e._tiltShift&&(e._tiltShift.amount=a))}}),Object.defineProperty(e,"tiltShiftContrast",{get:function(){return x},set:function(I){x!==I&&(x=I,e._tiltShift&&(e._tiltShift.contrast=x))}}),Object.defineProperty(e,"tiltShiftBlurX",{get:function(){return C},set:function(I){C!==I&&(C=I,e._tiltShift&&(e._tiltShift.blurX=C))}}),Object.defineProperty(e,"tiltShiftBlurY",{get:function(){return E},set:function(I){E!==I&&(E=I,e._tiltShift&&(e._tiltShift.blurY=E))}}),Object.defineProperty(e,"tiltShiftStrength",{get:function(){return O},set:function(I){O!==I&&(O=I,e._tiltShift&&(e._tiltShift.strength=O))}}),e.tiltShiftRadius=null,we(e,"tiltShiftRadius"),e},jP=function(e){if(se(e,"vignetteRadius"))return e;var t=_e(e);if(!t)return e;var i,a=.5,x=.5,C=.5;return Object.defineProperty(e,"vignetteRadius",{get:function(){return i},set:function(E){i!==E&&(i=E,i===null||i===!1?e._vignette&&(t.remove(e._vignette),e._vignette=void 0):(e._vignette||(e._vignette=t.addVignette(a,x,i,C)),e._vignette.radius=i))}}),Object.defineProperty(e,"vignetteX",{get:function(){return a},set:function(E){a!==E&&(a=E,e._vignette&&(e._vignette.x=a))}}),Object.defineProperty(e,"vignetteY",{get:function(){return x},set:function(E){x!==E&&(x=E,e._vignette&&(e._vignette.y=x))}}),Object.defineProperty(e,"vignetteStrength",{get:function(){return C},set:function(E){C!==E&&(C=E,e._vignette&&(e._vignette.strength=C))}}),e.vignetteRadius=null,we(e,"vignetteRadius"),e},qP=function(e){return Ze(e,"vintagePinhole"),e},_P=function(e){if(se(e,"wipeLeft"))return e;var t=_e(e);if(!t)return e;var i,a,x,C,E=.1,O=function(){i=null,a=null,x=null,C=null},I=function(V){V._wipeEffect&&(t.remove(V._wipeEffect),V._wipeEffect=void 0)};return Object.defineProperty(e,"wipeLeft",{get:function(){return i},set:function(V){i!==V&&(O(),i=V,i===null||i===!1?I(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(E,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=0,e._wipeEffect.progress=i))}}),Object.defineProperty(e,"wipeRight",{get:function(){return a},set:function(V){a!==V&&(O(),a=V,a===null||a===!1?I(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(E,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=0,e._wipeEffect.progress=a))}}),Object.defineProperty(e,"wipeUp",{get:function(){return x},set:function(V){x!==V&&(O(),x=V,x===null||x===!1?I(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(E,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=1,e._wipeEffect.progress=x))}}),Object.defineProperty(e,"wipeDown",{get:function(){return C},set:function(V){C!==V&&(O(),C=V,C===null||C===!1?I(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(E,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=1,e._wipeEffect.progress=C))}}),Object.defineProperty(e,"wipeWidth",{get:function(){return E},set:function(V){E!==V&&(E=V,e._wipeEffect&&(e._wipeEffect.wipeWidth=E))}}),e.wipeLeft=null,we(e,"wipeLeft"),we(e,"wipeRight"),we(e,"wipeUp"),we(e,"wipeDown"),e};const Wo={barrel:TP,blackWhite:MP,bloom:PP,blur:EP,bokeh:wP,brightness:bP,brown:RP,circle:OP,contrast:AP,desaturate:LP,desaturateLuminance:DP,displacement:FP,glow:BP,gradient:IP,grayscale:GP,hue:kP,kodachrome:NP,lsd:VP,negative:zP,pixelate:YP,polaroid:WP,reveal:XP,saturate:UP,sepia:HP,shadow:$P,shiftToBGR:KP,shine:ZP,technicolor:JP,tiltShift:QP,vignette:jP,vintagePinhole:qP,wipe:_P};var dr=function(e,t){if(t===void 0)t=!0;else if(typeof t=="string")t={config:!0};else if(Array.isArray(t))for(var i=t,t={},a=0,x=i.length;a<x;a++)t[i[a]]=!0;if(t===!0)for(var C in Wo)Wo[C](e);else for(var C in t)t[C]&&Wo[C]&&Wo[C](e);return e};const tE=Phaser.Utils.Array.Remove;var eE={addGO(e,t){this.remove(e,!0),this.useTintFadeEffect(t)&&gP(t),this.viewportCoordinateEnable&&CP(t,this.viewport),this.effectPropertiesConfig&&dr(t,this.effectPropertiesConfig),t.setName(e).once("destroy",function(){tE(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var i=new this.BobClass(this,t,e);return this.bobs[e]=i,this},add(e,...t){var i=this.createGameObjectCallback,a=this.createGameObjectScope,x=i.call(a,this.scene,...t);this.addGO(e,x),this.gameObjectDepth!=null&&x.setDepth(this.gameObjectDepth);var C=this.get(e);return this.fadeBob(C,0,1),this}},iE={remove(e,t){var i=this.get(e);if(i)Array.isArray(i)||(i=[i]);else return this;var a=this;return i.forEach(function(x){delete a.bobs[x.name];var C=x.gameObject;a.removedGOs.push(C),C.setName(),t?x.destroy():a.fadeBob(x,void 0,0,function(){x.destroy()})}),this},removeAll(){var e=this.bobs;for(var t in e)this.remove(t);return this},clear(e){e===void 0&&(e=!0);var t=this.bobs;for(var i in t)e&&t[i].destroy(),delete t[i];return this.removedGOs.length=0,this}},sE={hasProperty(e,t){var i=An(e)?this.get(e):this.getFitst(e);return i?i.hasProperty(t):!1},getProperty(e,t){var i=An(e)?this.get(e):this.getFitst(e);if(i)return i.getProperty(t)},isNumberProperty(e,t){var i=this.getProperty(e,t);return typeof i=="number"},setProperty(e,t,i){var a=this.get(e);if(a)Array.isArray(a)||(a=[a]);else return this;return this.symbols&&typeof i=="string"&&this.isNumberProperty(e,t)&&(i in this.symbols?i=this.symbols[i]:console.warn(`Can't find symbol ${i}`)),a.forEach(function(x){x.setProperty(t,i)}),this},easeProperty(e,t){var i=this.get(e);if(i)Array.isArray(i)||(i=[i]);else return this;var a=t.value,x=t.property;return this.symbols&&typeof a=="string"&&this.isNumberProperty(e,x)&&a in this.symbols&&(t.value=this.symbols[a]),i.forEach(function(C){C.easeProperty(t)}),this},hasTweenTask(e,t){var i=An(e)?this.get(e):this.getFitst(e);return i?i.tweens.hasOwnProperty(t):!1},getTweenTask(e,t){var i=An(e)?this.get(e):this.getFitst(e);return i&&i.tweens[t]||null}},nE={hasMethod(e,t){var i=An(e)?this.get(e):this.getFitst(e);return i?i.hasMethod(t):!1},call(e,t,...i){var a=this.get(e);if(a)Array.isArray(a)||(a=[a]);else return this;return a.forEach(function(x){x.call(t,...i)}),this}},rE={hasData(e,t){var i=An(e)?this.get(e):this.getFitst(e);return i?i.hasData(t):!1},getData(e,t){if(this.has(e))return this.get(e).getData(t)},setData(e,t,i){var a=this.get(e);if(a)Array.isArray(a)||(a=[a]);else return this;return a.forEach(function(x){x.setData(t,i)}),this}};const dp=0,fp=1,Lu=2,cp=3,vp=4,Du=5,aE={tint:dp,alpha:fp,revealUp:Lu,revealDown:cp,revealLeft:vp,revealRight:Du};var oE={setGOFadeMode(e){return typeof e=="string"&&(e=aE[e]),this.fadeMode=e,this},setGOFadeTime(e){return this.fadeTime=e,this},useTintFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===dp)&&this.fadeTime>0&&e.setTint!==void 0},useAlphaFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===fp)&&this.fadeTime>0&&e.setAlpha!==void 0},useRevealEffect(e){return this.fadeMode>=Lu&&this.fadeMode<=Du&&this.fadeTime>0&&(e.preFX||e.postFX)},fadeBob(e,t,i,a){var x=e.gameObject;if(this.useTintFadeEffect(x))t!==void 0&&e.setProperty("tintGray",255*t),e.easeProperty({property:"tintGray",value:Math.floor(255*i),duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:a});else if(this.useAlphaFadeEffect(x))t!==void 0&&e.setProperty("alpha",t),e.easeProperty({property:"alpha",value:i,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:a});else if(this.useRevealEffect(x)){dr(x,"reveal");var C;switch(this.fadeMode){case Lu:C="revealUp";break;case cp:C="revealDown";break;case vp:C="revealLeft";break;case Du:C="revealRight";break}t===void 0&&(t=0),x[C]=t,e.easeProperty({property:C,value:i,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:a}),e.getTweenTask(C).once("complete",function(){x[C]=null})}else a&&a(x);return this}},ne=function(e){return e.displayWidth!==void 0?e.displayWidth:e.width},re=function(e){return e.displayHeight!==void 0?e.displayHeight:e.height};const pp=Phaser.Geom.Rectangle,hs=Phaser.Math.Vector2,hE=Phaser.Math.RotateAround,lE=Phaser.GameObjects.Container;var Fu=function(e,t){if(t===void 0?t=new pp:t===!0&&(Bu===void 0&&(Bu=new pp),t=Bu),e.getBounds&&!(e instanceof lE))return e.getBounds(t);var i,a,x,C,E,O,I,V;if(e.parentContainer){var X=e.parentContainer.getBoundsTransformMatrix();Ln(e,t),X.transformPoint(t.x,t.y,t),i=t.x,a=t.y,ha(e,t),X.transformPoint(t.x,t.y,t),x=t.x,C=t.y,la(e,t),X.transformPoint(t.x,t.y,t),E=t.x,O=t.y,Iu(e,t),X.transformPoint(t.x,t.y,t),I=t.x,V=t.y}else Ln(e,t),i=t.x,a=t.y,ha(e,t),x=t.x,C=t.y,la(e,t),E=t.x,O=t.y,Iu(e,t),I=t.x,V=t.y;return t.x=Math.min(i,x,E,I),t.y=Math.min(a,C,O,V),t.width=Math.max(i,x,E,I)-t.x,t.height=Math.max(a,C,O,V)-t.y,t},Bu=void 0,Ln=function(e,t,i){return t===void 0?t=new hs:t===!0&&(hi===void 0&&(hi=new hs),t=hi),e.getTopLeft?e.getTopLeft(t):(t.x=e.x-ne(e)*e.originX,t.y=e.y-re(e)*e.originY,ua(e,t,i))},ha=function(e,t,i){return t===void 0?t=new hs:t===!0&&(hi===void 0&&(hi=new hs),t=hi),e.getTopRight?e.getTopRight(t):(t.x=e.x-ne(e)*e.originX+ne(e),t.y=e.y-re(e)*e.originY,ua(e,t,i))},la=function(e,t,i){return t===void 0?t=new hs:t===!0&&(hi===void 0&&(hi=new hs),t=hi),e.getBottomLeft?e.getBottomLeft(t):(t.x=e.x-ne(e)*e.originX,t.y=e.y-re(e)*e.originY+re(e),ua(e,t,i))},Iu=function(e,t,i){return t===void 0?t=new hs:t===!0&&(hi===void 0&&(hi=new hs),t=hi),e.getBottomRight?e.getBottomRight(t):(t.x=e.x-ne(e)*e.originX+ne(e),t.y=e.y-re(e)*e.originY+re(e),ua(e,t,i))},gp=function(e,t,i){t===void 0?t=new hs:t===!0&&(hi===void 0&&(hi=new hs),t=hi);var a=ne(e),x=re(e);return t.x=e.x+a*(.5-e.originX),t.y=e.y+x*(.5-e.originY),ua(e,t,i)},hi=void 0,ua=function(e,t,i){if(i===void 0&&(i=!1),e.rotation!==0&&hE(t,e.x,e.y,e.rotation),i&&e.parentContainer){var a=e.parentContainer.getBoundsTransformMatrix();a.transformPoint(t.x,t.y,t)}return t};const da=Phaser.Utils.Objects.GetValue;var mp=function(e,t,i){var a,x,C,E,O;if(typeof i=="number"?a=i:(a=da(i,"color"),x=da(i,"lineWidth"),C=da(i,"fillColor"),E=da(i,"fillAlpha",1),O=da(i,"padding",0)),Array.isArray(e))for(var I=0,V=e.length;I<V;I++)xp(e[I],t,a,x,C,E,O);else xp(e,t,a,x,C,E,O)},xp=function(e,t,i,a,x,C,E){var O=e.getBounds||e.width!==void 0&&e.height!==void 0;if(O){i===void 0&&(i=16777215),a===void 0&&(a=1),x===void 0&&(x=null),C===void 0&&(C=1),E===void 0&&(E=0);var I=Ln(e,fr[0]);I.x-=E,I.y-=E;var V=ha(e,fr[1]);V.x+=E,V.y-=E;var X=Iu(e,fr[2]);X.x+=E,X.y+=E;var q=la(e,fr[3]);q.x-=E,q.y+=E,x!==null&&t.fillStyle(x,C).fillPoints(fr,!0,!0),i!==null&&t.lineStyle(a,i).strokePoints(fr,!0,!0)}},fr=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],uE=function(e,t){return this.forEachGO(function(i){i.drawBounds?i.drawBounds(e,t):mp(i,e,t)}),this},yp=function(e,t){var i=e.cameras,a;if(t===void 0)a=i.main;else{var x=typeof t;switch(x){case"string":a=i.getCamera(t);break;case"number":a=i.cameras[t];break;default:a=t;break}}return a},dE={setCamera(e,t){var i=this.get(e);if(!i)return this;var a=yp(this.scene,t);return a?(i.gameObject.cameraFilter=4294967295^a.id,i.camera=a,this):this},getCamera(e){var t=this.get(e);return t?t.camera:null}},Sp={drawGameObjectsBounds:uE};Object.assign(Sp,hP,eE,iE,sE,nE,rE,oE,dE);const fE=Phaser.Cameras.Scene2D.BaseCamera;var cE=function(e){return e instanceof fE};const Cp=Phaser.Geom.Rectangle;var cr=function(e,t,i){return cE(t)||(i=t,t=void 0),i===void 0?i=new Cp:i===!0&&(i=vE),t?e.scale.getViewPort(t,i):e.scale.getViewPort(i)},vE=new Cp;const pi=Phaser.Utils.Objects.GetValue;class vr{constructor(t,i){this.scene=t,this.BobClass=pi(i,"BobClass",Au),this.setCreateGameObjectCallback(pi(i,"createGameObject"),pi(i,"createGameObjectScope")),this.setEventEmitter(pi(i,"eventEmitter",void 0)),this.setGameObjectDepth(pi(i,"depth",void 0));var a=pi(i,"fade",500);typeof a=="number"?(this.setGOFadeMode(),this.setGOFadeTime(a)):(this.setGOFadeMode(pi(a,"mode")),this.setGOFadeTime(pi(a,"time",500)));var x=pi(i,"viewportCoordinate",!1);x!==!1?(this.setViewportCoordinateEnable(pi(i,"enable",!0)),this.setViewport(pi(x,"viewport"))):this.setViewportCoordinateEnable(!1);var C=pi(i,"effectProperties",!1);this.setEffectPropertiesConfig(C),this.setSymbols(pi(i,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1,this.name=pi(i,"name")}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var i=this.bobs;for(var a in i)i[a].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,i){return this.createGameObjectCallback=t,this.createGameObjectScope=i,this}setGameObjectDepth(t){return this.gameObjectDepth=t,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setEffectPropertiesConfig(t){return t===void 0&&(t=!0),this.effectPropertiesConfig=t,this}setViewport(t){return t===void 0&&(t=cr(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return na(this.bobs)&&this.removedGOs.length===0}}Object.assign(vr.prototype,sa,Sp);const pE=Phaser.GameObjects.GameObject,gE=Phaser.GameObjects.Layer;var gi=function(e){return e instanceof pE||e instanceof gE};const mE=Phaser.GameObjects.Layer;var fa=function(e){return e instanceof mE},Tp=function(e){var t=e.displayList;return fa(t)?t:null},Li=function(e,t){if(e.length<=1)return e;t===void 0&&(t=!1);for(var i,a=0,x=e.length;a<x;a++){var C=e[a];if(C.displayList?i=C.displayList:C.parentContainer&&(i=C.parentContainer.list),i)break}return i||(i=C.scene.sys.displayList),i.depthSort&&(i.depthSort(),i=i.list),t?e.sort(function(E,O){return i.indexOf(O)-i.indexOf(E)}):e.sort(function(E,O){return i.indexOf(E)-i.indexOf(O)}),e},xE={getLayer(e){return this.getGO(e)},getLayers(e){return e===void 0&&(e=[]),this.forEachGO(function(t){e.push(t)}),Li(e,!1),e},addToLayer(e,t){var i=this.getGO(e);if(!i){console.warn(`[LayerManager] Can't get layer "${e}"`);return}Array.isArray(t)||(t=[t]);for(var a=0,x=t.length;a<x;a++){var C=t[a];C.isRexContainerLite?C.addToLayer(i):i.add(C)}return i.scrollFactorX!==void 0&&C.setScrollFactor(i.scrollFactorX,i.scrollFactorY),this},addToBottomLayer(e){var t=this.getLayers()[0];return this.addToLayer(t.goName,e),this},addToTopLayer(e){var t=this.getLayers(),i=t[t.length-1];return this.addToLayer(i.goName,e),this},removeFromLayer(e,t,i){var a=this.getGO(e);if(!a){console.warn(`[LayerManager] Can't get layer "${e}"`);return}return i===void 0&&(i=!0),t.isRexContainerLite?t.removeFromLayer(a,i):(a.remove(t),i&&t.addToDisplayList()),this},clearLayer(e,t){t===void 0&&(t=!0);var i=this.getGO(e);if(!i){console.warn(`Can't get layer "${e}"`);return}if(t)for(var a=i.getAll(),x=0,C=a.length;x<C;x++)a[x].destroy();else i.removeAll();return this}},yE={setScrollFactor(e,t,i){i===void 0&&(i=t);var a=this.getLayer(e);if(!a)return this;a.scrollFactorX=t,a.scrollFactorY=i;for(var x=a.getAll(),C=0,E=x.length;C<E;C++)x[C].setScrollFactor(t,i);return this}};const Xo=Phaser.Utils.Array,SE=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(Xo.BringToTop(e,this),this):this},CE=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(Xo.SendToBack(e,this),this):this},Mp=function(e){var t;return e.parentContainer?(t=e.parentContainer.list,t.indexOf(this)===-1&&e.parentContainer.add(this)):e.displayList&&(t=e.displayList.list,t.indexOf(this)===-1&&e.displayList.add(this)),t?(Xo.MoveBelow(t,this,e),this):this},Pp=function(e){var t;return e.parentContainer?(t=e.parentContainer.list,t.indexOf(this)===-1&&(e.isRexContainerLite?e.addToContainer(e.parentContainer):e.parentContainer.add(e))):e.displayList&&(t=e.displayList.list,t.indexOf(this)===-1&&(e.isRexContainerLite?e.addToLayer(e.displayList):e.displayList.add(e))),t?(Xo.MoveAbove(t,this,e),this):this};var Uo={bringMeToTop:SE,sendMeToBack:CE,moveMyDepthBelow:Mp,moveMyDepthAbove:Pp},TE={bringLayerToTop(e){var t=this.getLayer(e);return t?(Uo.bringMeToTop.call(t),this):this},sendLayerToBack(e){var t=this.getLayer(e);return t?(Uo.sendMeToBack.call(t),this):this},moveLayerBelow(e,t){if(e===t)return this;var i=this.getLayer(e),a=this.getLayer(t);return!i||!a?this:(Uo.moveMyDepthBelow.call(i,a),this)},moveLayerAbove(e,t){if(e===t)return this;var i=this.getLayer(e),a=this.getLayer(t);return!i||!a?this:(Uo.moveMyDepthAbove.call(i,a),this)}};const ME=vr.prototype.setCamera;var PE={setCamera(e,t){var i=yp(this.scene,t);return i||(i=this.scene.cameras.add(void 0,void 0,void 0,void 0,!1,t)),ME.call(this,e,i),this}},Ep={};Object.assign(Ep,xE,yE,TE,PE);const Ho=Phaser.Utils.Objects.GetValue;class $o extends vr{constructor(t,i){i===void 0?i={}:Array.isArray(i)&&(i={layers:i}),i.hasOwnProperty("fade")||(i.fade=0),i.viewportCoordinate=!1,super(t,i);var a=Ho(i,"rootLayer");this.setRootLayer(a);var x=Ho(i,"layers");if(x)for(var C=0,E=x.length;C<E;C++){var O=x[C];if(typeof O=="string")this.add(O);else{var I=O.name;this.add(I);var V=O.scrollFactor,X=Ho(O,"scrollFactorX",V),q=Ho(O,"scrollFactorY",V);X!==void 0&&this.setScrollFactor(I,X,q),this.setCamera(I,O.cameraName)}}}setCreateGameObjectCallback(t,i){return t||(t=EE),super.setCreateGameObjectCallback(t,i),this}setRootLayer(t){if(t===this.rootLayer)return this;var i=this.getAllGO();return t?t.add(i):this.scene.displayList.add(i),this.rootLayer=t,this}addGO(t,i){return super.addGO(t,i),i.name=t,this.rootLayer&&this.rootLayer.add(i),this}get(t,i){if(gi(t)){var a=Tp(t);if(!a||(t=a.name,!t))return}return super.get(t,i)}}var EE=function(e,t){var i=e.add.layer();return t!==void 0&&i.setDepth(t),i};Object.assign($o.prototype,Ep);var wE=function(e){return M(e)?e.sys.sound:e.sound},bE=function(e){return this.sound.game.cache.audio.has(e)},pr=function(e){return e==null||typeof e!="object"?null:M(e)?e:e.scene&&M(e.scene)?e.scene:e.parent&&e.parent.scene&&M(e.parent.scene)?e.parent.scene:null};const RE=Phaser.Utils.Objects.GetValue;class Se{constructor(t,i){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(RE(i,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,i){this.destroy(i)}setParent(t){return this.parent=t,this.scene=pr(t),this.game=b(t),this}}Object.assign(Se.prototype,sa);const OE=Phaser.Utils.Objects.GetValue;class Ko extends Se{constructor(t,i){super(t,i),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(OE(i,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=AE[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isPaused=!1,this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const AE={no:0,lazy:1,always:2},LE=Phaser.Utils.Objects.GetValue;class DE extends Ko{constructor(t,i){super(t,i);var a=this.scene?"update":"step";this.tickEventName=LE(i,"tickEventName",a),this.isSceneTicker=!FE(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var FE=function(e){return e==="step"||e==="poststep"};const Rs=Phaser.Utils.Objects.GetValue,wp=Phaser.Math.Clamp;let bp=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=Rs(t,"state",ca),this.timeScale=Rs(t,"timeScale",1),this.delay=Rs(t,"delay",0),this.repeat=Rs(t,"repeat",0),this.repeatCounter=Rs(t,"repeatCounter",0),this.repeatDelay=Rs(t,"repeatDelay",0),this.duration=Rs(t,"duration",0),this.nowTime=Rs(t,"nowTime",0),this.justRestart=Rs(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?gr:va,this.repeatCounter=0,this}stop(){return this.state=ca,this}update(t,i){this.state===ca||this.state===Zo||i===0||this.timeScale===0||(this.nowTime+=i*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=Rp)):(this.nowTime=this.duration,this.state=Zo):this.nowTime>=0&&(this.state=gr))}get t(){var t;switch(this.state){case ca:case va:case Rp:t=0;break;case gr:t=this.nowTime/this.duration;break;case Zo:t=1;break}return wp(t,0,1)}set t(t){t=wp(t,-1,1),t<0?(this.state=va,this.nowTime=-this.delay*t):(this.state=gr,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===ca}get isDelay(){return this.state===va}get isCountDown(){return this.state===gr}get isRunning(){return this.state===va||this.state===gr}get isDone(){return this.state===Zo}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}};const ca=0,va=1,gr=2,Rp=3,Zo=-1;class BE extends DE{constructor(t,i){super(t,i),this.timer=new bp}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const pa=Phaser.Utils.Objects.GetValue,Op=Phaser.Utils.Objects.GetAdvancedValue,IE=Phaser.Tweens.Builders.GetEaseFunction;class Dn extends BE{resetFromJSON(t){return this.timer.resetFromJSON(pa(t,"timer")),this.setEnable(pa(t,"enable",!0)),this.setTarget(pa(t,"target",this.parent)),this.setDelay(Op(t,"delay",0)),this.setDuration(Op(t,"duration",1e3)),this.setEase(pa(t,"ease","Linear")),this.setRepeat(pa(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=IE(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateTarget(this.target,this.timer),this.complete()),this}update(t,i){if(!this.isRunning||!this.enable||this.parent.hasOwnProperty("active")&&!this.parent.active)return this;var a=this.target,x=this.timer;return x.update(t,i),x.isDelay||this.updateTarget(a,x),this.emit("update",a,this),x.isDone&&this.complete(),this}updateTarget(t,i){}}const GE=Phaser.Sound.BaseSound;var Gu=function(e){return e instanceof GE};const Ap=Phaser.Utils.Objects.GetValue,Lp=Phaser.Utils.Objects.GetAdvancedValue,kE=Phaser.Math.Linear;let Dp=class extends Dn{constructor(t,i,a){Gu(t)&&(a=i,i=t,t=void 0),i.active=!0,i.scene=t,i.game=i.manager.game,super(i,a),this.volume={},this.resetFromJSON(a)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(Ap(t,"mode",0)),this.setEnable(Ap(t,"enable",!0)),this.setVolumeRange(Lp(t,"volume.start",this.parent.volume),Lp(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=NE[t]),this.mode=t,this}setVolumeRange(t,i){return this.volume.start=t,this.volume.end=i,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateTarget(t,i){t.volume=kE(this.volume.start,this.volume.end,i.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.stop(),this.parent.destroy();break}return this}};const NE={stop:1,destroy:2};var Jo=function(e,t,i,a,x){Gu(e)&&(x=a,a=i,i=t,t=e,e=void 0),a===void 0&&(a=1),x===void 0&&(x=0);var C={mode:0,volume:{start:x,end:a},duration:i};typeof t=="string"&&(t=e.sys.sound.add(t));var E;return t.hasOwnProperty("_fade")?(E=t._fade,E.stop().resetFromJSON(C)):(E=new Dp(e,t,C),t._fade=E),E.start(),t.isPlaying||t.setVolume(x).play(),t},mr=function(e,t,i,a){Gu(e)&&(a=i,i=t,t=e,e=void 0),a===void 0&&(a=!0);var x={mode:a?2:1,volume:{start:t.volume,end:0},duration:i},C;return t.hasOwnProperty("_fade")?(C=t._fade,C.stop().resetFromJSON(x)):(C=new Dp(e,t,x),t._fade=C),C.start(),t.isPlaying||t.play(),t};const ga=Phaser.Utils.Objects.GetValue;var VE={setBackgroundMusicLoop(e){return e===void 0&&(e=!0),this.backgroundMusicLoop=e,this},setBackgroundMusicFadeTime(e){return this.backgroundMusicFadeTime=e,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(e){return this.backgroundMusic=e,e&&(e.once("complete",function(){this.backgroundMusic===e&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===e&&(this.backgroundMusic=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic&&this.backgroundMusic.key===e)return this;this.stopBackgroundMusic();var i=this.sound.add(e,{loop:ga(t,"loop",this.backgroundMusicLoop),mute:ga(t,"mute",this.backgroundMusicMute),volume:ga(t,"volume",this.backgroundMusicVolume),detune:ga(t,"detune",0),rate:ga(t,"rate",1)});return this.setCurrentBackgroundMusic(i),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(e){return this.backgroundMusic&&Jo(this.backgroundMusic,e,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(e,t){return this.backgroundMusic&&mr(this.backgroundMusic,e,t),this},crossFadeBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(e).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=i,this},setBackgroundMusicMute(e){return e===void 0&&(e=!0),this.backgroundMusicMute=e,this},setBackgroundMusicVolume(e){return this.backgroundMusicVolume=e,this},setBackgroundMusicRate(e){return this.backgroundMusic&&this.backgroundMusic.setRate(e),this},setBackgroundMusicDetune(e){return this.backgroundMusic&&this.backgroundMusic.setDetune(e),this}};const ma=Phaser.Utils.Objects.GetValue;var zE={setBackgroundMusic2Loop(e){return e===void 0&&(e=!0),this.backgroundMusic2Loop=e,this},setBackgroundMusic2FadeTime(e){return this.backgroundMusic2FadeTime=e,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(e){return this.backgroundMusic2=e,e&&(e.once("complete",function(){this.backgroundMusic2===e&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===e&&(this.backgroundMusic2=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic2&&this.backgroundMusic2.key===e)return this;this.stopBackgroundMusic2();var i=this.sound.add(e,{loop:ma(t,"loop",this.backgroundMusicLoop),mute:ma(t,"mute",this.backgroundMusic2Mute),volume:ma(t,"volume",this.backgroundMusic2Volume),detune:ma(t,"detune",0),rate:ma(t,"rate",1)});return this.setCurrentBackgroundMusic2(i),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(e){return this.backgroundMusic2&&Jo(this.backgroundMusic2,e,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(e,t){return this.backgroundMusic2&&mr(this.backgroundMusic2,e,t),this},crossFadeBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(e).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=i,this},setBackgroundMusic2Mute(e){return e===void 0&&(e=!0),this.backgroundMusic2Mute=e,this},setBackgroundMusic2Volume(e){return this.backgroundMusic2Volume=e,this},setBackgroundMusic2Rate(e){return this.backgroundMusic2&&this.backgroundMusic2.setRate(e),this},setBackgroundMusic2Detune(e){return this.backgroundMusic2&&this.backgroundMusic2.setDetune(e),this}};const Fp=Phaser.Utils.Array.Remove,Qo=Phaser.Utils.Objects.GetValue;var YE={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.sound.add(e,{mute:Qo(t,"mute",this.soundEffectsMute),volume:Qo(t,"volume",this.soundEffectsVolume),detune:Qo(t,"detune",0),rate:Qo(t,"rate",1)});return this.soundEffects.push(i),i.once("complete",function(){i.destroy(),this.sound&&Fp(this.soundEffects,i)},this).once("destroy",function(){this.sound&&Fp(this.soundEffects,i)},this).play(),this},stopAllSoundEffects(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect(e){var t=this.getLastSoundEffect();return t&&Jo(t,e,this.soundEffectsVolume,0),this},fadeOutSoundEffect(e,t){var i=this.getLastSoundEffect();return i&&mr(i,e,t),this},fadeOutAllSoundEffects(e,t){for(var i=this.soundEffects.length-1;i>=0;i--)mr(this.soundEffects[i],e,t);return this},setSoundEffectMute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var i=this.getLastSoundEffect();i&&i.setMute(e)}else this.soundEffectsMute=e;return this},setSoundEffectVolume(e,t){if(t===void 0&&(t=!1),t){var i=this.getLastSoundEffect();i&&i.setVolume(e)}else this.soundEffectsVolume=e;return this},setSoundEffectDetune(e,t){t===void 0&&(t=!1);var i;t?i=[this.getLastSoundEffect()]:i=this.soundEffects;for(var a=0,x=i.length;a<x;a++)i[a].setDetune(e);return this},setSoundEffectRate(e,t){t===void 0&&(t=!1);var i;t?i=[this.getLastSoundEffect()]:i=this.soundEffects;for(var a=0,x=i.length;a<x;a++)i[a].setRate(e);return this}};const Bp=Phaser.Utils.Array.Remove,jo=Phaser.Utils.Objects.GetValue;var WE={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.sound.add(e,{mute:jo(t,"mute",this.soundEffects2Mute),volume:jo(t,"volume",this.soundEffects2Volume),detune:jo(t,"detune",0),rate:jo(t,"rate",1)});return this.soundEffects2.push(i),i.once("complete",function(){i.destroy(),this.sound&&Bp(this.soundEffects2,i)},this).once("destroy",function(){this.sound&&Bp(this.soundEffects2,i)},this).play(),this},stopAllSoundEffects2(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect2(e){var t=this.getLastSoundEffect2();return t&&Jo(t,e,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(e,t){var i=this.getLastSoundEffect2();return i&&mr(i,e,t),this},fadeOutAllSoundEffects2(e,t){for(var i=this.soundEffects2.length-1;i>=0;i--)mr(this.soundEffects2[i],e,t);return this},setSoundEffect2Mute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var i=this.getLastSoundEffect2();i&&i.setMute(e)}else this.soundEffects2Mute=e;return this},setSoundEffect2Volume(e,t){if(t===void 0&&(t=!1),t){var i=this.getLastSoundEffect2();i&&i.setVolume(e)}else this.soundEffects2Volume=e;return this},setSoundEffect2Detune(e,t){t===void 0&&(t=!1);var i;t?i=[this.getLastSoundEffect2()]:i=this.soundEffects2;for(var a=0,x=i.length;a<x;a++)i[a].setDetune(e);return this},setSoundEffect2Rate(e,t){t===void 0&&(t=!1);var i;t?i=[this.getLastSoundEffect2()]:i=this.soundEffects2;for(var a=0,x=i.length;a<x;a++)i[a].setRate(e);return this}},Ip={hasAudio:bE};Object.assign(Ip,VE,zE,YE,WE);const Di=Phaser.Utils.Objects.GetValue;class Gp{constructor(t,i){this.sound=wE(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=Di(i,"bgm.volume",1),this._backgroundMusicMute=Di(i,"bgm.mute",!1),this.setBackgroundMusicLoop(Di(i,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Di(i,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=Di(i,"bgm2.volume",1),this._backgroundMusic2Mute=Di(i,"bgm2.mute",!1),this.setBackgroundMusic2Loop(Di(i,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(Di(i,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=Di(i,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=Di(i,"soundEffect2.volume",1);var a=Di(i,"bgm.initial",void 0);a&&this.setCurrentBackgroundMusic(a);var x=Di(i,"bgm2.initial",void 0);x&&this.setCurrentBackgroundMusic2(x)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(var t=this.soundEffects2.length-1;t>=0;t--)this.soundEffects2[t].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicMute(){return this._backgroundMusicMute}set backgroundMusicMute(t){this._backgroundMusicMute=t,this.backgroundMusic&&this.backgroundMusic.setMute(mute)}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get backgroundMusic2Mute(){return this._backgroundMusic2Mute}set backgroundMusic2Mute(t){this._backgroundMusic2Mute=t,this.backgroundMusic2&&this.backgroundMusic2.setMute(mute)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(t){this._backgroundMusic2Volume=t,this.backgroundMusic2&&this.backgroundMusic2.setVolume(t)}get soundEffectsMute(){return this._soundEffectsMute}set soundEffectsMute(t){this._soundEffectsMute=t;for(var i=this.soundEffects,a=0,x=i.length;a<x;a++)i[a].setMute(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var i=this.soundEffects,a=0,x=i.length;a<x;a++)i[a].setVolume(t)}get soundEffects2Mute(){return this._soundEffects2Mute}set soundEffects2Mute(t){this._soundEffects2Mute=t;for(var i=this.soundEffects,a=0,x=soundEffects2.length;a<x;a++)i[a].setMute(t)}get soundEffects2Volume(){return this._soundEffects2Volume}set soundEffects2Volume(t){this._soundEffects2Volume=t;for(var i=this.soundEffects2,a=0,x=i.length;a<x;a++)i[a].setVolume(t)}}Object.assign(Gp.prototype,Ip);const ku=Phaser.Utils.Objects.GetValue;class XE extends Ko{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=ku(t,"isRunning",!1),this.timeScale=ku(t,"timeScale",1),this.now=ku(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class kp extends XE{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,i){return!this.isRunning||this.timeScale===0?this:(this.tick(i),this)}}var fe=function(e,t){return t===void 0&&(t=.5),e<=t?e=e/t:e=1-(e-t)/(1-t),e};const Np=Phaser.Math.Clamp;class UE{constructor(t,i){this.setTimeline(t).reset(i)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,i,a,x){return this.target=t,this.onStart=i,this.onProgress=a,this.onComplete=x,this}setDuration(t,i){return i===void 0&&(i=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=i,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=Np(t,0,1),this.yoyo&&(t=fe(t)),t}setProgress(t){t=Np(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){t&&t(this.target,this.t,this)}update(t,i){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=i,this.t=this.getProgress(),this.runCallback(this.onProgress);var a=this.remainder<=0;return a&&this.runCallback(this.onComplete),a}}let HE=class extends St{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var i=0,a=t.length;i<a;i++)this.free(t[i]);return this}};const $E=Phaser.Utils.Objects.GetValue,KE=new HE;class ZE extends kp{constructor(t,i){super(t,i),this.addedTimers=[],this.timers=[],this.timerPool=$E(i,"pool",KE)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var i=this.timerPool.allocate();return i?i.setTimeline(this).reset(t):i=new UE(this,t),this.addedTimers.push(i),i.runCallback(i.onStart),this.isRunning||this.start(),i}delayCall(t,i,a,x){var C=this.addTimer({duration:t,onComplete:function(E,O,I){a===void 0&&(a=[]),a.push(I),i.apply(x,a)}});return C}delayEvent(t,i){this.removeDelayEvent(i);var a=this.delayCall(t,function(){this.removeDelayEvent(i),this.emit(i)},[],this);return this.once(`_remove.${i}`,function(){a.remove(),a=void 0}),this}removeDelayEvent(t){return this.emit(`_remove.${t}`),this}getTimers(t){for(var i=[],a=[this.addedTimers,this.timers],x=0,C=a.length;x<C;x++)for(var E=a[x],O=0,I=E.length;O<I;O++){var V=E[O];V.name===t&&i.push(V)}return i}update(t,i){if(super.update(t,i),!!this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var a=[],x=0,C=this.timers.length;x<C;x++){var E=this.timers[x],O=E.update(this.now,this.delta);O?this.timerPool.free(E):a.push(E)}this.timers=a,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}}const JE="_wait.complete",QE="_remove.wait";var jE=function(e,t,i,a,x){var C=pr(e),E=C.time.delayedCall(t,function(){C.sys.events.once("preupdate",function(){i.call(a,x)})});return E};let Vp=class{constructor(t){t||(this.setEventEmitter(!0),t=this),this.parent=t,this.waitId=0,this.waitCompleteEventName=JE,this.removeWaitEventsEventName=QE}destroy(){this.removeWaitEvents(),this.clearWaitCompleteCallbacks(),this.parent=null}waitEvent(t,i,a){var x=this.getWaitCompleteTriggerCallback(a);return t.once(i,x,this),this.parent.once(this.removeWaitEventsEventName,function(){t.off(i,x,this)}),this.parent}getWaitCompleteTriggerCallback(t){t===void 0&&(t=!0);var i=this.waitId,a=this,x=function(){i<a.waitId||(a.waitId++,a.removeWaitEvents(),a.parent.emit(a.waitCompleteEventName))};if(t){var C=function(){jE(a.parent,0,x)};return C}else return x}removeWaitEvents(){return this.parent.emit(this.removeWaitEventsEventName),this}addWaitCompleteCallback(t,i){return this.parent.on(this.waitCompleteEventName,t,i),this}clearWaitCompleteCallbacks(){return this.parent.off(this.waitCompleteEventName),this}};Object.assign(Vp.prototype,sa);var qE={waitTime(e){var t=this.parent.timeline;return t.delayEvent(e,"delay"),this.parent.once(this.removeWaitEventsEventName,function(){t.removeDelayEvent("delay")}),this.waitEvent(t,"delay")}},_E=function(e,t){var i=`(?<!\\\\)\\${t}`,a=`\\${t}`;return e.split(new RegExp(i,"g")).map(function(x){return x.replace(a,t)})},tw={setClickTarget(e){return this.clickTarget=e,e?M(e)?this.touchEE=e.input:this.touchEE=e.setInteractive():this.touchEE=null,this},clearClickTarget(){return this.setClickTarget(),this},setClickShortcutKeys(e){return this.clickShortcutKeys=e,this},clearClickShortcutKeys(){return this.setClickShortcutKeys(),this},waitClick(){var e=this.touchEE,t=this.clickShortcutKeys;return e||t?(e&&this.waitEvent(e,"pointerdown"),t&&this.waitKeyDown(t)):this.waitTime(0),this},waitKeyDown(e){var t=this.scene.input.keyboard;if(typeof e=="string"){if(e.indexOf("|")===-1)return this.waitEvent(t,`keydown-${e.toUpperCase()}`);for(var i=_E(e,"|"),a=0,x=i.length;a<x;a++)this.waitEvent(t,`keydown-${i[a].toUpperCase()}`);return this.parent}else return this.waitEvent(t,"keydown")}},ew={waitGameObjectTweenComplete(e,t,i){var a=this.parent.getGameObjectTweenTask(e,t,i);return a?this.waitEvent(a,"complete"):this.waitTime(0)},waitGameObjectDataFlag(e,t,i,a){var x=this.parent.getGameObject(e,t);if(!x)return this.waitTime(0);if(x.getData(i)===a)return this.waitTime(0);var C=`changedata-${i}`,E=function(O,I,V){I=!!I,I===a&&O.emit("_dataFlagMatch")};return x.on(C,E),this.parent.once(this.removeWaitEventsEventName,function(){x.off(C,E)}),this.waitEvent(x,"_dataFlagMatch")},waitGameObjectDestroy(e,t){var i=this.parent.getGameObject(e,t);return i?this.waitEvent(i,"destroy"):this.waitTime(0)},waitGameObjectManagerEmpty(e){if(e){var t=this.parent.getGameObjectManager(e);return t?this.waitEvent(t,"empty"):this.waitTime(0)}else{var i=this.parent.gameObjectManagers,a=!1;for(var x in i)a=!0,this.waitEvent(i[x],"empty");return a?this.parent:this.waitTime(0)}}},iw={setCameraTarget(e){return this.cameraTarget=e,this},clearCameraTarget(){return this.setCameraTarget(),this},waitCameraEffectComplete(e,t){var i;if(t?i=this.scene.cameras.getCamera(t):i=this.cameraTarget,!i)return this.waitTime(0);var a,x;switch(e){case"camera.fadein":a=i.fadeEffect,x="camerafadeincomplete";break;case"camera.fadeout":a=i.fadeEffect,x="camerafadeoutcomplete";break;case"camera.flash":a=i.flashEffect,x="cameraflashcomplete";break;case"camera.shake":a=i.shakeEffect,x="camerashakecomplete";break;case"camera.zoom":a=i.zoomEffect,x="camerazoomcomplete";break;case"camera.rotate":a=i.rotateToEffect,x="camerarotatecomplete";break;case"camera.scroll":a=i.panEffect,x="camerapancomplete";break}return a.isRunning?this.waitEvent(i,x):this.waitTime(0)}},sw={waitSoundEffectComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitSoundEffect2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect2();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusicComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusic2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic2();return e?this.waitEvent(e,"complete"):this.waitTime(0)}},nw=function(e){if(!e)return this.waitTime(0);var t=!1;for(var i in e)switch(i){case"time":t=!0,this.waitTime(e.time);break;case"click":t=!0,this.waitClick();break;case"key":t=!0,this.waitKeyDown(e.key);break;case"bgm":t=!0,this.waitBackgroundMusicComplete();break;case"bgm2":t=!0,this.waitBackgroundMusic2Complete();break;case"se":t=!0,this.waitSoundEffectComplete();break;case"se2":t=!0,this.waitSoundEffect2Complete();break;case"camera":t=!0,this.waitCameraEffectComplete(`camera.${e.camera.toLowerCase()}`,e.cameraName);break;default:var a=i.split(".");if(a.length===2){var x=a[0],C=a[1],E=this.parent.getGameObjectManager(void 0,x);if(!E)continue;if(C==="destroy")return this.waitGameObjectDestroy(void 0,x);var O=E.getProperty(x,C);if(typeof O=="number"){t=!0,this.waitGameObjectTweenComplete(void 0,x,C);continue}var I=C,V=I.startsWith("!");if(V&&(I=I.substring(1)),E.hasData(x,C)){t=!0,this.waitGameObjectDataFlag(void 0,x,I,!V);continue}this.waitEvent(gameObject,C);continue}else a.length;break}return t||this.waitTime(0),this.parent},zp={waitAny:nw};Object.assign(zp,qE,tw,ew,iw,sw);class Yp extends Vp{constructor(t,i){super(t),this.waitCompleteEventName=Nt(i,"completeEventName",this.waitCompleteEventName),this.setClickTarget(Nt(i,"clickTarget",this.scene)),this.setClickShortcutKeys(Nt(i,"clickShortcutKeys",void 0)),this.setCameraTarget(Nt(i,"camera",this.scene.cameras.main))}get clickTarget(){return this.parent.clickTarget}set clickTarget(t){this.parent.clickTarget=t}get clickShortcutKeys(){return this.parent.clickShortcutKeys}set clickShortcutKeys(t){this.parent.clickShortcutKeys=t}get cameraTarget(){return this.parent.cameraTarget}set cameraTarget(t){this.parent.cameraTarget=t}destroy(){this.clearClickTarget(),this.clearClickShortcutKeys(),this.clearCameraTarget(),super.destroy()}get scene(){return this.parent.managersScene}}Object.assign(Yp.prototype,zp);const qo=Phaser.Utils.Objects.GetValue;var rw=function(e,t){this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=e,this.gameObjectManagers={};var i=qo(t,"layers",!1);if(i!==!1){var a=new $o(e,{name:"LAYER",layers:i,rootLayer:qo(t,"rootLayer",void 0),depth:qo(t,"layerDepth",void 0)});this.addGameObjectManager(a),this.layerManager=a}var x=qo(t,"sounds");return x!==!1&&(this.soundManager=new Gp(e,x)),this.timeline=new ZE(this),this.waitEventManager=new Yp(this,t),this},aw=function(e){this.timeline.timeScale=e;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(e);return this},ow=function(){return this.timeline.timeScale},hw=function(e){this.waitEventManager.destroy(),this.waitEventManager=void 0,delete this.gameObjectManagers.layer;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(e),delete this.gameObjectManagers[t];this.layerManager&&(this.layerManager.destroy(e),this.layerManager=void 0),this.soundManager&&(this.soundManager.destroy(),this.soundManager=void 0),this.timeline&&(this.timeline.destroy(),this.timeline=void 0),this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=void 0},Wp={addGameObjectManager(e,t){var i;return e instanceof vr?i=e:typeof e=="string"?(i=t,i.name=e):(e===void 0&&(e={}),t===void 0&&(t=vr),e.createGameObjectScope||(e.createGameObjectScope=this),i=new t(this.managersScene,e)),this.gameObjectManagers[i.name]=i,this},getGameObjectManager(e,t){if(e){var i=this.gameObjectManagers[e];return i}else{t&&t.charAt(0)==="!"&&(t=t.substring(1));for(var e in this.gameObjectManagers){var i=this.gameObjectManagers[e];if(i.has(t))return i}}},getGameObjectManagerNames(){var e=[];for(var t in this.gameObjectManagers)e.push(t);return e},getGameObjectManagerName(e){var t=this.getGameObjectManager(void 0,e);if(t)return t.name},hasGameObjectMananger(e){return e in this.gameObjectManagers}},lw={createGameObject(e,t,...i){return this.getGameObjectManager(e,t).add(t,...i),this},destroyGameObject(e,t){var i=this.getGameObjectManager(e,t);return t===void 0?i.removeAll():i.remove(t),this},hasGameObject(e,t){return!!this.getGameObjectManager(e,t)},callGameObjectMethod(e,t,i,...a){return this.getGameObjectManager(e,t).call(t,i,...a),this},setGameObjectProperty(e,t,i,a){return this.getGameObjectManager(e,t).setProperty(t,i,a),this},easeGameObjectProperty(e,t,i){return this.getGameObjectManager(e,t).easeProperty(t,i),this},getGameObjectTweenTask(e,t,i){return this.getGameObjectManager(e,t).getTweenTask(t,i)},getGameObject(e,t,i){var a=this.getGameObjectManager(e,t);if(!a)return i;if(typeof t=="string")return a.getGO(t);i===void 0&&(i=[]);var x=t;x===void 0&&(x=Object.keys(a.bobs));for(var C=Array.isArray(i),E=0,O=x.length;E<O;E++){t=x[E];var I=a.getGO(t);I&&(C?i.push(I):i[t]=I)}return i},addGameObject(e,t,i){var a=this.getGameObjectManager(e,t);if(typeof t=="string")a.addGO(t,i);else{var x=t;for(t in x)a.addGO(t,x[t])}return this},drawGameObjectsBounds(e,t,i){e instanceof Phaser.GameObjects.Graphics&&(i=t,t=e,e=void 0),e===void 0&&(e=this.getGameObjectManagerNames()),Array.isArray(e)||(e=[e]);for(var a=0,x=e.length;a<x;a++)this.getGameObjectManager(e[a]).drawGameObjectsBounds(t,i);return this}},uw=function(e){class t extends e{}var i={initManagers:rw,setTimeScale:aw,getTimeScale:ow,destroyManagers:hw};return Object.assign(t.prototype,i,Wp,lw),t};function dw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xp={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,i="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(i=!1));function x(I,V,X){this.fn=I,this.context=V,this.once=X||!1}function C(I,V,X,q,st){if(typeof X!="function")throw new TypeError("The listener must be a function");var it=new x(X,q||I,st),at=i?i+V:V;return I._events[at]?I._events[at].fn?I._events[at]=[I._events[at],it]:I._events[at].push(it):(I._events[at]=it,I._eventsCount++),I}function E(I,V){--I._eventsCount===0?I._events=new a:delete I._events[V]}function O(){this._events=new a,this._eventsCount=0}O.prototype.eventNames=function(){var V=[],X,q;if(this._eventsCount===0)return V;for(q in X=this._events)t.call(X,q)&&V.push(i?q.slice(1):q);return Object.getOwnPropertySymbols?V.concat(Object.getOwnPropertySymbols(X)):V},O.prototype.listeners=function(V){var X=i?i+V:V,q=this._events[X];if(!q)return[];if(q.fn)return[q.fn];for(var st=0,it=q.length,at=new Array(it);st<it;st++)at[st]=q[st].fn;return at},O.prototype.listenerCount=function(V){var X=i?i+V:V,q=this._events[X];return q?q.fn?1:q.length:0},O.prototype.emit=function(V,X,q,st,it,at){var ut=i?i+V:V;if(!this._events[ut])return!1;var lt=this._events[ut],ft=arguments.length,pt,ct;if(lt.fn){switch(lt.once&&this.removeListener(V,lt.fn,void 0,!0),ft){case 1:return lt.fn.call(lt.context),!0;case 2:return lt.fn.call(lt.context,X),!0;case 3:return lt.fn.call(lt.context,X,q),!0;case 4:return lt.fn.call(lt.context,X,q,st),!0;case 5:return lt.fn.call(lt.context,X,q,st,it),!0;case 6:return lt.fn.call(lt.context,X,q,st,it,at),!0}for(ct=1,pt=new Array(ft-1);ct<ft;ct++)pt[ct-1]=arguments[ct];lt.fn.apply(lt.context,pt)}else{var xt=lt.length,Mt;for(ct=0;ct<xt;ct++)switch(lt[ct].once&&this.removeListener(V,lt[ct].fn,void 0,!0),ft){case 1:lt[ct].fn.call(lt[ct].context);break;case 2:lt[ct].fn.call(lt[ct].context,X);break;case 3:lt[ct].fn.call(lt[ct].context,X,q);break;case 4:lt[ct].fn.call(lt[ct].context,X,q,st);break;default:if(!pt)for(Mt=1,pt=new Array(ft-1);Mt<ft;Mt++)pt[Mt-1]=arguments[Mt];lt[ct].fn.apply(lt[ct].context,pt)}}return!0},O.prototype.on=function(V,X,q){return C(this,V,X,q,!1)},O.prototype.once=function(V,X,q){return C(this,V,X,q,!0)},O.prototype.removeListener=function(V,X,q,st){var it=i?i+V:V;if(!this._events[it])return this;if(!X)return E(this,it),this;var at=this._events[it];if(at.fn)at.fn===X&&(!st||at.once)&&(!q||at.context===q)&&E(this,it);else{for(var ut=0,lt=[],ft=at.length;ut<ft;ut++)(at[ut].fn!==X||st&&!at[ut].once||q&&at[ut].context!==q)&&lt.push(at[ut]);lt.length?this._events[it]=lt.length===1?lt[0]:lt:E(this,it)}return this},O.prototype.removeAllListeners=function(V){var X;return V?(X=i?i+V:V,this._events[X]&&E(this,X)):(this._events=new a,this._eventsCount=0),this},O.prototype.off=O.prototype.removeListener,O.prototype.addListener=O.prototype.on,O.prefixed=i,O.EventEmitter=O,e.exports=O})(Xp);var fw=Xp.exports,cw=dw(fw);class Up extends cw{shutdown(){this.removeAllListeners()}destroy(){this.removeAllListeners()}}var Hp={setEventEmitter(e,t){return t===void 0&&(t=Up),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},vw=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,pw=/^0x[0-9A-F]+$/i,Nu=function(e){if(typeof e!="string")return e;if(e==="")e=null;else if(vw.test(e))e=parseFloat(e);else if(pw.test(e))e=parseInt(e,16);else switch(e){case"false":e=!1;break;case"true":e=!0;break;case"null":e=null;break;case"undefined":e=void 0;break}return e};let $p=class{constructor(t){this.setEventEmitter(Nt(t,"eventEmitter",void 0)),this.setValueConverter(Nt(t,"valueConvert",!0)),this.setLoopEnable(Nt(t,"loop",!1)),this.setMultipleLinesTagEnable(Nt(t,"multipleLinesTag",!1));var i=Nt(t,"delimiters","<>");this.setDelimiters(i[0],i[1]),this.setTranslateTagNameCallback(Nt(t,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(t){return t===void 0&&(t=!0),this.multipleLinesTagEnable=t,this}setDelimiters(t,i){i===void 0&&(i=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=i,t=hr(this.delimiterLeft),i=hr(this.delimiterRight);var a=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${t}(.+?)${i}`,a),this}setTranslateTagNameCallback(t){return this.translateTagNameCallback=t,this}setValueConverter(t){return t===!0?t=Nu:t||(t=gw),this.valueConverter=t,this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,i=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var a=this.reSplit.exec(t);if(!a){if(this.progressIndex<i&&(this.onContent(t.substring(this.progressIndex,i)),this.isPaused)){this.progressIndex=i;break}this.onComplete(),this.isRunning=!1;return}var x=this.reSplit.lastIndex,C=x-a[0].length;if(this.progressIndex<C&&(this.onContent(t.substring(this.progressIndex,C)),this.isPaused)){this.progressIndex=C;break}if(this.lastTagSource=a[0],this.onTag(a[1]),this.lastTagSource=void 0,this.progressIndex=x,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,i){return this.isPaused?this:(this.pause(),t.once(i,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTag(t){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}};const gw=function(e){return e};Object.assign($p.prototype,Hp);var mw=function(e,t,i){if(e==null)return[];t===void 0&&(t=Nu),i===void 0&&(i=",");for(var a=e.split(i),x=0,C=a.length;x<C;x++)a[x]=t(a[x]);return a};class xw extends $p{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(Nt(t,"regex.tag",void 0)),this.setValueExpression(Nt(t,"regex.value",void 0));var i=Nt(t,"delimiters","<>");this.setDelimiters(i[0],i[1])}setTagExpression(t){return t||(t=_o),this.tagExpression=t,this}setValueExpression(t){return t||(t=_o),this.valueExpression=t,this}setDelimiters(t,i){super.setDelimiters(t,i);var a=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(a,"i"),this.tagExpression!==_o||this.valueExpression!==_o){var x=`${this.tagExpression}(=${this.valueExpression})?`,C=`/${this.tagExpression}`;t=hr(this.delimiterLeft),i=hr(this.delimiterRight);var E=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${x})|(${C}))${i}`,E)}return this}onTag(t){var i=t.match(this.reTag),a=i[1],x=a.charAt(0)==="/";if(x&&(a=a.substring(1,a.length)),this.translateTagNameCallback&&(a=this.translateTagNameCallback(a)),this.skipEventFlag=!1,x)this.emit(`-${a}`),this.skipEventFlag||this.emit("-",a),this.lastTagEnd=a;else{var C=mw(i[3],this.valueConverter);this.emit(`+${a}`,...C),this.skipEventFlag||this.emit("+",a,...C),this.lastTagStart=a}}}const _o="[^=]+";var yw=function(e,t,i){var a="color",x;t.on("start",function(){x=e.textStyle.color}).on(`+${a}`,function(C){e.textStyle.setColor(C),t.skipEvent()}).on(`-${a}`,function(){e.textStyle.setColor(x),t.skipEvent()}).on("complete",function(){e.textStyle.setColor(x)})},Sw=function(e,t,i){var a="stroke",x;t.on("start",function(){x=e.textStyle.stroke,e.textStyle.setStrokeStyle(null)}).on(`+${a}`,function(C){C===void 0&&(C=x),e.textStyle.setStrokeStyle(C),t.skipEvent()}).on(`-${a}`,function(){e.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){e.textStyle.setStrokeStyle(x)})},Cw=function(e,t,i){var a="b";t.on("start",function(){e.textStyle.setBold(!1)}).on(`+${a}`,function(){e.textStyle.setBold(!0),t.skipEvent()}).on(`-${a}`,function(){e.textStyle.setBold(!1),t.skipEvent()})},Tw=function(e,t,i){var a="i";t.on("start",function(){e.textStyle.setItalic(!1)}).on(`+${a}`,function(){e.textStyle.setItalic(!0),t.skipEvent()}).on(`-${a}`,function(){e.textStyle.setItalic(!1),t.skipEvent()})},Mw=function(e,t,i){var a="size",x;t.on("start",function(){x=e.textStyle.fontSize}).on(`+${a}`,function(C){e.textStyle.setFontSize(C),t.skipEvent()}).on(`-${a}`,function(){e.textStyle.setFontSize(x),t.skipEvent()}).on("complete",function(){e.textStyle.setFontSize(x)})},Pw=function(e,t,i){var a="y",x;t.on("start",function(){x=e.textStyle.offsetY,e.textStyle.setOffsetY(0)}).on(`+${a}`,function(C){C===void 0&&(C=x),e.textStyle.setOffsetY(C),t.skipEvent()}).on(`-${a}`,function(){e.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetY(0)})},Ew=function(e,t,i){var a="x",x;t.on("start",function(){x=e.textStyle.offsetY,e.textStyle.setOffsetX(0)}).on(`+${a}`,function(C){C===void 0&&(C=x),e.textStyle.setOffsetX(C),t.skipEvent()}).on(`-${a}`,function(){e.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetX(0)})},ww=function(e,t,i){var a="left",x;t.on("start",function(){x=e.textStyle.leftSpace,e.textStyle.setLeftSpace(0)}).on(`+${a}`,function(C){C===void 0&&(C=x),e.textStyle.setLeftSpace(C),t.skipEvent()}).on(`-${a}`,function(){e.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setLeftSpace(0)})},bw=function(e,t,i){var a="right",x;t.on("start",function(){x=e.textStyle.rightSpace,e.textStyle.setRightSpace(0)}).on(`+${a}`,function(C){C===void 0&&(C=x),e.textStyle.setRightSpace(C),t.skipEvent()}).on(`-${a}`,function(){e.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setRightSpace(0)})},Rw=function(e,t,i){var a="shadow",x;t.on("start",function(){x=e.textStyle.shadowColor,e.textStyle.setShadowColor(null)}).on(`+${a}`,function(C){C===void 0&&(C=x),e.textStyle.setShadowColor(C),t.skipEvent()}).on(`-${a}`,function(){e.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){e.textStyle.setShadowColor(x)})},Ow=function(e,t,i){var a="align";t.on(`+${a}`,function(x){e.textStyle.setAlign(x),t.skipEvent()}).on(`-${a}`,function(){e.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){e.textStyle.setAlign()})},Aw=function(e,t,i){var a="img";t.on(`+${a}`,function(x){var C=e.imageManager.get(x);C&&ip.call(e,C.key,C.frame,{width:C.width,hieght:C.height,leftSpace:C.left,rightSpace:C.right,color:C.tintFill?e.textStyle.color:void 0}),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},Lw=function(e,t,i){var a="space";t.on(`+${a}`,function(x){sp.call(e,x),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},Dw=function(e,t,i){var a="speed";t.on(`+${a}`,function(x){Kp(e,x),t.skipEvent()}).on(`-${a}`,function(){Kp(e,void 0),t.skipEvent()})},Fw=function(e){this.typeWriter.setTypingSpeed(e)},Kp=function(e,t){Gt.call(e,"speed",Fw,t,e)},Bw=function(e,t,i){var a="se";t.on(`+${a}`,function(x,C){Gt.call(e,a,Iw,[x,C],e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="se2";t.on(`+${a}`,function(x,C){Gt.call(e,a,Gw,[x,C],e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},Iw=function(e){if(!this.skipSoundEffect){var t=e[0],i=e[1];this.soundManager.playSoundEffect(t),i&&this.soundManager.fadeInSoundEffect(i)}},Gw=function(e){if(!this.skipSoundEffect){var t=e[0],i=e[1];this.soundManager.playSoundEffect2(t),i&&this.soundManager.fadeInSoundEffect2(i)}},kw=function(e,t,i){var a="se.fadein";t.on(`+${a}`,function(x){Gt.call(e,a,Nw,x,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="se2.fadein";t.on(`+${a}`,function(x){Gt.call(e,a,Vw,x,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},Nw=function(e){this.soundManager.fadeInSoundEffect(e)},Vw=function(e){this.soundManager.fadeInSoundEffect2(e)},zw=function(e,t,i){var a="se.fadeout";t.on(`+${a}`,function(x,C){C=C==="stop",Gt.call(e,a,Yw,[x,C],e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="se2.fadeout";t.on(`+${a}`,function(x,C){C=C==="stop",Gt.call(e,a,Ww,[x,C],e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},Yw=function(e){this.soundManager.fadeOutSoundEffect(...e)},Ww=function(e){this.soundManager.fadeOutSoundEffect2(...e)},Xw=function(e,t,i){var a="se.volume";t.on(`+${a}`,function(x){Gt.call(e,a,Uw,x,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="se2.volume";t.on(`+${a}`,function(x){Gt.call(e,a,Hw,x,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},Uw=function(e){this.soundManager.setSoundEffectVolume(e,!0)},Hw=function(e){this.soundManager.setSoundEffectVolume2(e,!0)},$w=function(e,t,i){var a="se.mute";t.on(`+${a}`,function(){Gt.call(e,a,Kw,void 0,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="se2.mute";t.on(`+${a}`,function(){Gt.call(e,a,Zw,void 0,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="se.unmute";t.on(`+${a}`,function(){Gt.call(e,a,Jw,void 0,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="se2.unmute";t.on(`+${a}`,function(){Gt.call(e,a,Qw,void 0,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},Kw=function(){this.soundManager.setSoundEffectMute(!0)},Zw=function(){this.soundManager.setSoundEffect2Mute(!0)},Jw=function(){this.soundManager.setSoundEffectMute(!1)},Qw=function(){this.soundManager.setSoundEffect2Mute(!1)},jw=function(e,t,i){var a="bgm";t.on(`+${a}`,function(x,C){Gt.call(e,a,qw,[x,C],e),t.skipEvent()}).on(`-${a}`,function(){Gt.call(e,"bgm.stop",_w,void 0,e),t.skipEvent()});var a="bgm2";t.on(`+${a}`,function(x,C){Gt.call(e,a,t2,[x,C],e),t.skipEvent()}).on(`-${a}`,function(){Gt.call(e,"bgm2.stop",e2,void 0,e),t.skipEvent()})},qw=function(e){var t=e[0],i=e[1];this.soundManager.playBackgroundMusic(t),i&&this.soundManager.fadeInBackgroundMusic(i)},_w=function(){this.soundManager.stopBackgroundMusic()},t2=function(e){var t=e[0],i=e[1];this.soundManager.playBackgroundMusic2(t),i&&this.soundManager.fadeInBackgroundMusic2(i)},e2=function(){this.soundManager.stopBackgroundMusic2()},i2=function(e,t,i){var a="bgm.fadein";t.on(`+${a}`,function(x){Gt.call(e,a,s2,x,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="bgm2.fadein";t.on(`+${a}`,function(x){Gt.call(e,a,n2,x,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},s2=function(e){this.soundManager.fadeInBackgroundMusic(e)},n2=function(e){this.soundManager.fadeInBackgroundMusic2(e)},r2=function(e,t,i){var a="bgm.fadeout";t.on(`+${a}`,function(x,C){C=C==="stop",Gt.call(e,a,a2,[x,C],e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="bgm2.fadeout";t.on(`+${a}`,function(x,C){C=C==="stop",Gt.call(e,a,o2,[x,C],e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},a2=function(e){this.soundManager.fadeOutBackgroundMusic(...e)},o2=function(e){this.soundManager.fadeOutBackgroundMusic2(...e)},h2=function(e,t,i){var a="bgm.cross";t.on(`+${a}`,function(x,C){Gt.call(e,a,l2,[x,C],e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="bgm2.cross";t.on(`+${a}`,function(x,C){Gt.call(e,a,u2,[x,C],e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},l2=function(e){this.soundManager.crossFadeBackgroundMusic(...e)},u2=function(e){this.soundManager.crossFadeBackgroundMusic2(...e)},d2=function(e,t,i){var a="bgm.pause";t.on(`+${a}`,function(){Gt.call(e,a,f2,void 0,e),t.skipEvent()}).on(`-${a}`,function(){Gt.call(e,"bgm.resume",c2,void 0,e),t.skipEvent()});var a="bgm2.pause";t.on(`+${a}`,function(){Gt.call(e,a,v2,void 0,e),t.skipEvent()}).on(`-${a}`,function(){Gt.call(e,"bgm2.resume",p2,void 0,e),t.skipEvent()})},f2=function(){this.soundManager.pauseBackgroundMusic()},c2=function(){this.soundManager.resumeBackgroundMusic()},v2=function(){this.soundManager.pauseBackgroundMusic2()},p2=function(){this.soundManager.resumeBackgroundMusic2()},g2=function(e,t,i){var a="bgm.volume";t.on(`+${a}`,function(x){Gt.call(e,a,m2,x,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="bgm2.volume";t.on(`+${a}`,function(x){Gt.call(e,a,x2,x,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},m2=function(e){this.soundManager.setBackgroundMusicVolume(e)},x2=function(e){this.soundManager.setBackgroundMusicVolume2(e)},y2=function(e,t,i){var a="bgm.mute";t.on(`+${a}`,function(){Gt.call(e,a,S2,void 0,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="bgm2.mute";t.on(`+${a}`,function(){Gt.call(e,a,C2,void 0,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="bgm.unmute";t.on(`+${a}`,function(){Gt.call(e,a,T2,void 0,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()});var a="bgm2.unmute";t.on(`+${a}`,function(){Gt.call(e,a,M2,void 0,e),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},S2=function(){this.soundManager.setBackgroundMusicMute(!0)},C2=function(){this.soundManager.setBackgroundMusic2Mute(!0)},T2=function(){this.soundManager.setBackgroundMusicMute(!1)},M2=function(){this.soundManager.setBackgroundMusic2Mute(!1)},P2=function(e,t,i){var a="camera.fadein";t.on(`+${a}`,function(x,C,E,O){Gt.call(e,a,E2,[x,C,E,O],e),t.skipEvent()})},E2=function(e){this.cameraTarget.fadeIn(...e)},w2=function(e,t,i){var a="camera.fadeout";t.on(`+${a}`,function(x,C,E,O){Gt.call(e,a,b2,[x,C,E,O],e),t.skipEvent()})},b2=function(e){this.cameraTarget.fadeOut(...e)},R2=function(e,t,i){var a="camera.shake";t.on(`+${a}`,function(x,C){Gt.call(e,a,O2,[x,C],e),t.skipEvent()})},O2=function(e){this.cameraTarget.shake(...e)},A2=function(e,t,i){var a="camera.flash";t.on(`+${a}`,function(x,C,E,O){Gt.call(e,a,L2,[x,C,E,O],e),t.skipEvent()})},L2=function(e){this.cameraTarget.flash(...e)},D2=function(e,t,i){var a="camera.zoom";t.on(`+${a}`,function(x){Gt.call(e,a,F2,x,e),t.skipEvent()}).on(`+${a}.to`,function(x,C,E){Gt.call(e,"camera.zoom.to",B2,[x,C,E],e),t.skipEvent()})},F2=function(e){this.cameraTarget.setZoom(e)},B2=function(e){this.cameraTarget.zoomTo(...e)};const Zp=Phaser.Math.DegToRad;var I2=function(e,t,i){var a="camera.rotate";t.on(`+${a}`,function(x){x=Zp(x),Gt.call(e,a,G2,x,e),t.skipEvent()}).on(`+${a}.to`,function(x,C,E){x=Zp(x),Gt.call(e,"camera.rotate.to",k2,[x,C,E],e),t.skipEvent()})},G2=function(e){this.cameraTarget.setRotation(e)},k2=function(e){var t=e[0],i=e[1],a=e[2];this.cameraTarget.rotateTo(t,!1,i,a)},N2=function(e,t,i){var a="camera.scroll";t.on(`+${a}`,function(x,C){Gt.call(e,a,V2,[x,C],e),t.skipEvent()}).on(`+${a}.to`,function(x,C,E,O){Gt.call(e,"camera.scroll.to",z2,[x,C,E,O],e),t.skipEvent()})},V2=function(e){this.cameraTarget.setScroll(...e)},z2=function(e){var t=e[0],i=e[1],a=e[2],x=e[3],C=this.cameraTarget,E=C.scrollX,O=C.scrollY;C.setScroll(t,i),t+=C.centerX,i+=C.centerY,C.setScroll(E,O),C.pan(t,i,a,x)},Y2=function(e,t,i){var a="wait",x="click";t.on(`+${a}`,function(C){Jp(e,C),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()}).on(`+${x}`,function(){Jp(e,"click"),t.skipEvent()}).on(`-${x}`,function(){t.skipEvent()})},W2=function(e){this.typeWriter.wait(e)},Jp=function(e,t){Gt.call(e,"wait",W2,t,e)},X2=function(e,t,i){var a="r";t.on(`+${a}`,function(){ia.call(e,`
`),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},U2=function(e,t,i){for(var a=["pagebreak","pb"],x=0,C=a.length;x<C;x++){var E=a[x];t.on(`+${E}`,function(){ia.call(e,"\f"),t.skipEvent()}).on(`-${E}`,function(){t.skipEvent()})}},H2=function(e,t,i){var a="content.off";t.on(`+${a}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},$2=function(e,t,i){var a="content.on";t.on(`+${a}`,function(){t.setContentOutputEnable(),t.skipEvent()})},K2=function(e,t,i){t.on("content",function(a){if(t.contentOutputEnable)ia.call(e,a);else{var x=`+${t.lastTagStart}`;e.emit(`parser.${x}#content`,t,a)}})},Z2=function(e,t,i){t.on("start",function(){e.emit("parser.start",t)}).on("+",function(a,...x){if(!t.skipEventFlag){var C=`+${a}`,E=x;e.emit(`parser.${C}`,t,...x,E),Qp(e,C,E)}}).on("-",function(a){if(!t.skipEventFlag){var x=`-${a}`,C=[];e.emit(`parser.${x}`,t,C),Qp(e,x,C)}}).on("complete",function(){e.emit("parser.complete",t)})},J2=function(e,t){var i=`tag.${t}`;e==null?this.emit(i):this.emit(i,...e)},Qp=function(e,t,i){Gt.call(e,t,J2,i,e)};const jp=[yw,Sw,Cw,Tw,Mw,Rw,Ow,Pw,Ew,ww,bw,Aw,Lw,Dw,Bw,kw,zw,Xw,$w,jw,i2,r2,h2,d2,g2,y2,P2,w2,R2,A2,D2,I2,N2,Y2,X2,U2,H2,$2,K2,Z2];var Q2=function(e,t,i){for(var a=0,x=jp.length;a<x;a++)jp[a](e,t,i)},j2=function(e,t){for(var i=e.commentLineStart,a=t.split(`
`),x=0,C=a.length;x<C;x++){var E=a[x];E===""||(E.trim().length===0||i&&E.startsWith(i))&&(a[x]="")}return a.join("")};const q2=Phaser.Utils.Objects.GetValue;class _2 extends xw{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("delimiters")||(i.delimiters="[]"),super(i),Q2(t,this,i),this.setCommentLineStartSymbol(q2(i,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(j2(this,t)),this}}var tb={setDefaultTypingSpeed(e){return this.defaultSpeed=e,this},setTypingSpeed(e){return e===void 0&&(e=this.defaultSpeed),this.speed=e,this}};const Fn="page.fadeout",Vu="_remove.play",qp=[Fn,Vu];var eb=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(Fn),this;var e=this.children.filter(function(a){return a.renderable}),t=this.fadeOutPageCallback(e,this.fadeOutPageDuration);if(!t)this.emit(Fn);else if(t.once)t.once("complete",function(){this.emit(Fn)},this);else if(t.then){var i=this;t.then(function(){i.emit(Fn)})}else this.emit(Fn);return this},th=function(e,t){return new Promise(function(i,a){e.once(t,function(){i()})})},Je=function(e){return th(e,"complete")},ib=function(e){return this.children=e,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(e),this.typing(),Je(this)};const sb="delay",_p="anim";var tg=function(e){e===void 0&&(e=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var i=this.getNextChild();if(!i){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(i.renderable){var a=this.animationConfig;if(a.duration>0){var x=this.timeline.addTimer({name:_p,target:i,duration:a.duration,yoyo:a.yoyo,onStart:a.onStart,onProgress:a.onProgress,onComplete:a.onComplete});this.skipTypingAnimation&&x.seek(1)}else a.onStart&&a.onStart(i,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",i);var C=this.nextChild;if(C&&!(this.skipSpaceEnable&&KT(C))){if(t+=this.speed+e,e=0,t>0){this.typingTimer=this.timeline.addTimer({name:sb,target:this,duration:t,onComplete:function(E,O,I){E.typingTimer=void 0,tg.call(E,I.remainder)}});break}}}else ZT(i)&&i.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},nb=function(){return this.timeline.pause(),this},rb=function(){return this.timeline.resume(),this},ab=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},ob=function(e){return this.isTypingPaused?(e===void 0&&(e=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=e):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(e)),this):this},hb=function(e){switch(e){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},lb=function(e,t){var i=t.split(".");return e.gameObjectManagers.hasOwnProperty(i[0])},ub=function(e,t,i,a){var x=e.waitEventManager,C=t.split("."),E=C[0],O=e.getGameObjectManager(E),I=`wait.${E}`;switch(C.length){case 1:x.waitGameObjectManagerEmpty(E),e.emit(I);return;case 2:var V=C[1];x.waitGameObjectDestroy(E,V),e.emit(I,V);return;case 3:var V=C[1],X=C[2],q=O.getProperty(V,X);if(typeof q=="number"){x.waitGameObjectTweenComplete(E,V,X),e.emit(I,V,X);return}var st=X,it=st.startsWith("!");if(it&&(st=st.substring(1)),O.hasData(V,st)){x.waitGameObjectDataFlag(E,V,st,!it),e.emit(I,V,st);return}else{x.waitTime(0);return}}};const db=Phaser.Input.Keyboard.KeyCodes;var eg=function(e,t,i,a){var x=e.waitEventManager;x.clearWaitCompleteCallbacks().addWaitCompleteCallback(i,a),typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var C=0,E=t.length;C<E;C++){var O=t[C];if(O==null||O==="wait"){var I=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit("wait",I)}else if(typeof O=="number"||!isNaN(O)){var V=parseFloat(O);x.waitTime(V),e.emit("wait.time",V)}else if(O==="click")x.waitClick(),e.emit("wait.click");else if(O==="se"){x.waitSoundEffectComplete();var X=e.soundManager.getLastSoundEffect();e.emit("wait.music",X)}else if(O==="se2"){x.waitSoundEffect2Complete();var X=e.soundManager.getLastSoundEffect2();e.emit("wait.music",X)}else if(O==="bgm"){x.waitBackgroundMusicComplete();var X=e.soundManager.getBackgroundMusic();e.emit("wait.music",X)}else if(O==="bgm2"){x.waitBackgroundMusic2Complete();var X=e.soundManager.getBackgroundMusic2();e.emit("wait.music",X)}else if(db.hasOwnProperty(O.toUpperCase()))x.waitKeyDown(O),e.emit("wait.keydown",O);else if(hb(O))x.waitCameraEffectComplete(O),e.emit("wait.camera",O);else if(lb(e,O))ub(e,O);else{var I=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit(`wait.${O}`,I)}}},fb=function(e){return this.ignoreWait?this:(this.pauseTyping(),eg(this.textPlayer,e,this.resumeTyping,this),this)},cb=function(e){return e===void 0&&(e=!0),this.ignoreWait=e,this},vb=function(e){return e===void 0&&(e=!0),this.skipSpaceEnable=e,this},pb=function(e){if(e===void 0&&(e=!0),this.skipTypingAnimation=e,e)for(var t=this.timeline.getTimers(_p),i=0,a=t.length;i<a;i++)t[i].seek(1);return this},gb=function(e){if(e===void 0&&(e=!0),this.skipSoundEffect=e,e){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},mb=function(){return this.typingTimer&&this.typingTimer.seek(1),this},ig={fadeOutPage:eb,start:ib,typing:tg,pause:nb,resume:rb,pauseTyping:ab,resumeTyping:ob,wait:fb,setIgnoreWait:cb,setSkipSpaceEnable:vb,setSkipTypingAnimation:pb,setSkipSoundEffect:gb,skipCurrentTypingDelay:mb};Object.assign(ig,tb);const xr=Phaser.Utils.Objects.GetValue;class sg{constructor(t,i){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(xr(i,"onTypingStart",yb)),this.setDefaultTypingSpeed(xr(i,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(xr(i,"skipSpace",!1)),this.setAnimationConfig(xr(i,"animation",void 0)),this.setMinSizeEnable(xr(i,"minSizeEnable",!1)),this.setFadeOutPageCallback(xr(i,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=xb),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var xb=function(e){e.setVisible&&e.setVisible()},yb=function(e){for(var t=0,i=e.length;t<i;t++){var a=e[t];a.setVisible&&a.setVisible(!1)}};Object.assign(sg.prototype,sa,ig);class Sb extends Au{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}var Cb={playAnimation(e,t){return this.has(e)||this.add(e),this.get(e).playAnimation(t),this},stopAnimation(e){return this.has(e)?(this.get(e).stopAnimation(),this):this},chainAnimation(e,t){return this.has(e)?(this.get(e).chainAnimation(t),this):this},pauseAnimation(e){return this.has(e)?(this.get(e).pauseAnimation(),this):this}},ng={};Object.assign(ng,Cb);var rg=function(e){return!e||e==="sprite"?e=Tb:e==="image"&&(e=Mb),e},Tb=function(e,t,i){return typeof i!="string"&&typeof i!="number"&&(i=void 0),e.add.sprite(0,0,t,i)},Mb=function(e,t,i){return typeof i!="string"&&typeof i!="number"&&(i=void 0),e.add.image(0,0,t,i)};class ag extends vr{constructor(t,i){i===void 0&&(i={}),i.BobClass=Sb,super(t,i)}setCreateGameObjectCallback(t,i){return t=rg(t),super.setCreateGameObjectCallback(t,i),this}}Object.assign(ag.prototype,ng);var og=function(e,t){return e.length===3&&e[0]===t&&e[2]==="play"},Pb=function(e,t){return e.length===3&&e[0]===t&&e[2]==="stop"},Eb=function(e,t,i){var a=i.name;t.on("+",function(x,...C){if(!t.skipEventFlag){var E=x.split("."),O;if(og(E,a))O=E[1];else return;Gt.call(e,`${a}.play`,wb,[a,O,C],e),t.skipEvent()}}).on("+",function(x){if(!t.skipEventFlag){var C=x.split("."),E;if(Pb(C,a))E=C[1];else return;Gt.call(e,`${a}.stop`,hg,[a,E],e),t.skipEvent()}}).on("-",function(x){if(!t.skipEventFlag){var C=x.split("."),E;if(og(C,a))E=C[1];else return;Gt.call(e,`${a}.stop`,hg,[a,E],e),t.skipEvent()}})},wb=function(e){var t,i,a;[t,i,a]=e;var x=a.shift(),C=this.getGameObjectManager(t);C.playAnimation(i,x),a.length>0&&C.chainAnimation(i,a)},hg=function(e){var t,i;[t,...i]=e;var a=this.getGameObjectManager(t);a.stopAnimation(...i)},bb=function(e,t){return e.length===3&&e[0]===t&&e[2]==="pause"},Rb=function(e,t,i){var a=i.name;t.on("+",function(x){if(!t.skipEventFlag){var C=x.split("."),E;if(bb(C,a))E=C[1];else return;Gt.call(e,`${a}.pause`,Ob,[a,E],e),t.skipEvent()}})},Ob=function(e){var t,i;[t,...i]=e;var a=this.getGameObjectManager(t);a.pauseAnimation(...i)},Ab=function(e,t){return e.length===3&&e[0]===t&&e[2]==="chain"},Lb=function(e,t,i){var a=i.name;t.on("+",function(x){if(!t.skipEventFlag){var C=x.split("."),E;if(Ab(C,a))E=C[1];else return;var O=Array.prototype.slice.call(arguments,1);Gt.call(e,`${a}.chain`,Db,[a,E,O],e),t.skipEvent()}})},Db=function(e){var t,i;[t,...i]=e;var a=this.getGameObjectManager(t);a.chainAnimation(...i)};const Fb=[Eb,Rb,Lb];var Bb=function(e){e===void 0&&(e={}),e.name="sprite",e.parseCallbacks=Fb,e.createGameObject=rg(e.createGameObject),this.addGameObjectManager(e,ag)},lg=function(e,t){return e.length===2&&e[0]===t},Ib=function(e,t,i){var a=i.name;t.on("+",function(x,...C){if(!t.skipEventFlag){var E=x.split("."),O;if(lg(E,a))O=E[1];else return;Gt.call(e,`${a}.add`,Gb,[a,O,...C],e),t.skipEvent()}}).on("-",function(x){if(!t.skipEventFlag){var C=x.split("."),E;if(lg(C,a))E=C[1];else return;Gt.call(e,`${a}.remove`,kb,[a,E],e),t.skipEvent()}})},Gb=function(e){var t,i;[t,...i]=e;var a=this.getGameObjectManager(t);a.add(...i)},kb=function(e){var t,i;[t,...i]=e;var a=this.getGameObjectManager(t);a.remove(...i)},Nb=function(e,t,i){var a=i.name;t.on("-",function(x){t.skipEventFlag||x===a&&(Gt.call(e,`${a}.removeall`,Vb,a,e),t.skipEvent())})},Vb=function(e){var t=this.getGameObjectManager(e);t.removeAll()},zb=function(e,t){return e.length===3&&e[0]===t},Yb=function(e,t,i){var a=i.name;t.on("+",function(x,...C){if(!t.skipEventFlag){var E=x.split("."),O,I;if(zb(E,a))O=E[1],I=E[2];else return;Gt.call(e,`${a}.call`,Wb,[a,O,I,...C],e),t.skipEvent()}})},Wb=function(e){var t,i,a,x;[t,i,a,...x]=e;var C=`${t}.${a}`;if(this.emit(C,i,...x),!(this.listenerCount(C)>0)){var E=this.getGameObjectManager(t);E.hasMethod(i,a)?E.call(i,a,...x):E.setProperty(i,a,x[0])}},Xb={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},Ub=function(e,t){return e.length===4&&e[0]===t&&Xb[e[3]]},Hb=function(e,t,i){var a=i.name;e.getGameObjectManager(a),t.on("+",function(x,C,E,O,I){if(!t.skipEventFlag){var V=x.split("."),X,q,st;if(Ub(V,a))X=V[1],q=V[2],st=V[3];else return;typeof O=="number"&&(I=O,O=void 0),Gt.call(e,`${a}.ease`,$b,[a,X,q,C,E,O,I,st],e),t.skipEvent()}})},$b=function(e){var t,i,a,x,C,E,O,I;[t,i,a,x,C,E,O,I]=e;var V=this.getGameObjectManager(t),X=V.getProperty(i,a);if(typeof X=="number"){I.endsWith("Left")||I.endsWith("Up")?I.startsWith("to")||I.startsWith("yoyo")?x=X-x:I.startsWith("from")&&(V.setProperty(i,a,X-x),x=X):I.endsWith("Right")||I.endsWith("Down")?I.startsWith("to")||I.startsWith("yoyo")?x=X+x:I.startsWith("from")&&(V.setProperty(i,a,X+x),x=X):I==="from"&&(V.setProperty(i,a,x),x=X);var q=I.startsWith("yoyo");V.easeProperty(i,{property:a,value:x,duration:C,ease:E,repeat:O,yoyo:q})}};const ug=[Ib,Nb,Yb,Hb],Kb=Wp.addGameObjectManager;var Zb={addGameObjectManager(e,t){e=e?Hi(e):{};var i=e.name;i||console.warn("[TextPlayer] Parameter 'name' is required in addGameObjectManager(config) method");var a=e.defaultLayer,x=e.createGameObject,C=this.layerManager;e.createGameObject=function(V,...X){var q=x.call(this,V,...X);return a&&C&&C.addToLayer(a,q),q},Kb.call(this,e,t);var E=e.parseCallbacks;E?E=[...E,...ug]:E=ug;for(var O=0,I=E.length;O<I;O++)E[O](this,this.parser,e);return this}},Jb=function(e){return this.waitEventManager.setClickTarget(e),this},Qb=function(e){return this.waitEventManager.setCameraTarget(e),this},jb=function(e){var t=this;e?typeof e=="function"?this.nextPageInput=function(i,a){var x=t.waitEventManager;x.clearWaitCompleteCallbacks().addWaitCompleteCallback(i,a);var C=x.getWaitCompleteTriggerCallback();e.call(t,C)}:this.nextPageInput=function(i,a){eg(t,e,i,a)}:this.nextPageInput=null},qb=function(e,t){return this.imageManager.add(e,t),this},_b={play(e){return this.isPlaying?this:(this.removeChildren(),this.parser.start(e),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(e){var t=Je(this);return this.play(e),t}},zu=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once(Fn,tR,this).fadeOutPage(),this)},tR=function(){var e=this.runWrap(this.lastWrapResult);this.lastWrapResult=e,this.emit("page.start");var t=function(){this.emit(Vu),e.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?zu.call(this):this.nextPageInput&&this.nextPageInput(zu,this))};this.once(Vu,function(){this.typeWriter.off("complete",t,this)},this),this.typeWriter.once("complete",t,this).start(e.children)},eR={pauseTyping(){return this.typeWriter.pauseTyping(),this},pause(){return this.pauseTyping(),this.timeline.pause(),this}},iR={resumeTyping(e){return this.typeWriter.resumeTyping(e),this},resume(){return this.resumeTyping(),this.timeline.resume(),this}},sR=function(e){return this.typeWriter.wait(e),this},nR={setDefaultTypingSpeed(e){return this.defaultTypingSpeed=e,this},setTypingSpeed(e){return this.typingSpeed=e,this}},rR=function(e){return this.typeWriter.setIgnoreWait(e),this},aR=function(e){return e===void 0&&(e=!0),this.ignoreNextPageInput=e,this},oR=function(){if(!this.isPlaying||!this.isPageTyping)return this;var e=this.typeWriter.speed,t=this.typeWriter.ignoreWait,i=this.typeWriter.skipTypingAnimation,a=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(e).setIgnoreWait(t).setSkipTypingAnimation(i).setSkipSoundEffect(a)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},hR={getSprite(e){return this.getGameObject("sprite",e)},addSprite(e,t){return this.addGameObject("sprite",e,t),this}},lR={setContentOutputEnable(e){return this.parser.setContentOutputEnable(e),this},setContentCallback(e,t){return this.contentCallback=e,this.contentCallbackScope=t,this}},dg={setClickTarget:Jb,setCameraTarget:Qb,setNextPageInput:jb,addImage:qb,typingNextPage:zu,wait:sR,setIgnoreWait:rR,setIgnoreNextPageInput:aR,showPage:oR};Object.assign(dg,Zb,_b,eR,iR,nR,hR,lR);var uR=function(e){for(var t=0,i=qp.length;t<i;t++)e.emit(qp[t])};const fg=Phaser.Utils.Objects.IsPlainObject,yr=Phaser.Utils.Objects.GetValue;class Yu extends uw(ur){constructor(t,i,a,x,C,E){fg(i)?E=i:fg(x)&&(E=x),E===void 0&&(E={});var O=E.text;delete E.text,super(t,i,a,x,C,E),this.type="rexTextPlayer",this.initManagers(t,E),this.parser=new _2(this,yr(E,"parser",void 0)),this.typeWriter=new sg(this,yr(E,"typing",void 0)),this._imageManager=void 0;var I=yr(E,"images",void 0);I&&this.addImage(I);var V=yr(E,"sprites");V!==!1&&V!==null&&Bb.call(this,V),this.setIgnoreNextPageInput(yr(E,"ignoreNextPageInput",!1)),this.setNextPageInput(yr(E,"nextPageInput",null)),this.isPlaying=!1,O&&this.play(O)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new pu(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||this.ignoreDestroy||(uR(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}}Object.assign(Yu.prototype,dg),k.register("textPlayer",function(e,t,i,a,x){var C=new Yu(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.TextPlayer",Yu);const cg={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},vg={direction:["direction",void 0]};var en=function(e,t,i){if(typeof i=="string")e.hasOwnProperty(i)&&(t[i]=e[i]);else{var a=i;if(Array.isArray(a))for(var x=0,C=a.length;x<C;x++)en(e,t,a[x]);else for(var i in a)en(e,t,i)}},dR=function(e){e===void 0&&(e={});var t={};return en(e,t,"inputType"),en(e,t,"type"),en(e,t,"style"),en(e,t,vg),en(e,t,cg),t},Wu=function(e,t,i,a,x){if(t)return!(i&&!i(e,t)||!pg(e,t)||a&&!a(e,t));x===void 0&&(x=!1);for(var C=e.scene.input.manager,E=C.pointersTotal,O=C.pointers,t,I=0;I<E;I++)if(t=O[I],!(i&&!i(e,t))&&pg(e,t)&&!(a&&!a(e,t)))return x?t:!0;return!1},pg=function(e,t){for(var i=e.scene,a=i.input.cameras.getCamerasBelowPointer(t),x=i.input.manager,C=[e],E=0,O=a.length;E<O;E++)if(x.hitTest(t,C,a[E],eh),eh.length>0)return eh.length=0,!0;return eh.length=0,!1},eh=[],Sr=void 0,fR=function(e){e!==Sr&&(Sr!==void 0&&Sr.close(),Sr=e)},cR=function(e){e===Sr&&(Sr=void 0)};const vR=Phaser.Utils.Objects.GetValue;var ih=function(e,t,i){i===void 0&&(i={});var a,x;for(var C in e)a=e[C],x=vR(t,C,a[1]),x!==void 0&&(i[a[0]]=x);return i},gg=function(e){e.addEventListener("touchstart",Cr,!1),e.addEventListener("touchmove",Cr,!1),e.addEventListener("touchend",Cr,!1),e.addEventListener("mousedown",Cr,!1),e.addEventListener("mouseup",Cr,!1),e.addEventListener("mousemove",Cr,!1)},Cr=function(e){e.stopPropagation()},mg=function(){return this.close(),this.emit("keydown-ENTER",this.parent,this),this},pR=function(){this.isOpened=!0,this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",mg,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.clickOutSideTarget?(Pp.call(this.clickOutSideTarget,this.parent),Mp.call(this.clickOutSideTarget,this.parent),this.clickOutSideTarget.setInteractive().on("pointerdown",this.onClickOutside,this)):this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this)},gR=function(e){if(e){var t=e.parentElement;t&&t.removeChild(e)}},mR=function(){this.isOpened=!1,this.updateText(),this.enterCloseEnable&&this.scene.input.keyboard.off("keydown-ENTER",mg,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.clickOutSideTarget?this.clickOutSideTarget.disableInteractive().off("pointerdown",this.onClickOutside,this):this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),gR(this.node),this.node=void 0,this.emit("close",this)};const Xu=Phaser.Utils.Objects.GetValue;var xR=function(e,t){var i,a=Xu(t,"inputType",void 0);a===void 0&&(a=Xu(t,"type","text")),a==="textarea"?(i=document.createElement("textarea"),i.style.resize="none"):(i=document.createElement("input"),i.type=a);var x=Xu(t,"style",void 0),C=i.style;ih(vg,x,C),C.position="absolute",C.opacity=0,C.pointerEvents="none",C.zIndex=0,C.transform="scale(0)",ih(cg,t,i),gg(i);var E=e.scene.sys.scale,O=E.isFullscreen?E.fullscreenTarget:document.body;return O.appendChild(i),i.addEventListener("focus",function(I){pR.call(e)}),i.addEventListener("blur",function(I){mR.call(e)}),i},yR=function(){return this.isOpened?this:this.readOnly?this:(fR(this),this.node||(this.node=xR(this,this.nodeConfig)),this.setFocus(),this)},SR=function(){return this.isOpened?(cR(this),this.setBlur(),this):this},CR={open:yR,close:SR};const Os=Phaser.Utils.Objects.GetValue;class Uu extends Se{constructor(t,i){super(t);var a=Os(i,"inputType",void 0);a===void 0&&(a=Os(i,"type","text")),this.setEnterCloseEnable(Os(i,"enterClose",a!=="textarea"));var x=Os(i,"onOpen",void 0);x||(x=Os(i,"onFocus",void 0)),this.onOpenCallback=x,this.clickOutSideTarget=Os(i,"clickOutSideTarget",void 0);var C=Os(i,"onClose",void 0);C||(C=Os(i,"onBlur",void 0)),this.onCloseCallback=C,this.onUpdateCallback=Os(i,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=dR(i),this.node=void 0}destroy(){this.close(),this.clickOutSideTarget&&this.clickOutSideTarget.destroy(),super.destroy()}onClickOutside(t){Wu(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){this.node&&(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node&&(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,i){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,i),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){this.node&&this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){this.node&&(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(this.node)return this.node.style.color}set fontColor(t){this.node&&(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,i){return this.node?(this.node.style[t]=i,this):this}getStyle(t){if(this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(Uu.prototype,CR);var xg=function(e,t,i){e=e.replace(" ","");var a=i.previousText;if(e===a)return e;if(isNaN(e)){i.emit("nan",e,i),e=a;var x=i.cursorPosition-1;i.setText(e),i.setCursorPosition(x)}else i.previousText=e;return e},TR=function(e){var t=e.parent,i=e.isOpened?e.selectionStart:null,a=e.isOpened?e.selectionEnd:null,x=e.prevSelectionStart,C=e.prevSelectionEnd;if(!(x===i&&C===a)){var E,O;x===null?(E=i,O=a):i===null?(E=x,O=C):(E=Math.min(x,i),O=Math.max(C,a));for(var I=E;I<O;I++){var V;x===null?V=!1:V=I>=x&&I<C;var X;if(i===null?X=!1:X=I>=i&&I<a,V!==X){var q=t.getCharChild(I);if(q){var st=V?"rangeout":"rangein";t.emit(st,q,I,t)}}}e.prevSelectionStart=i,e.prevSelectionEnd=a}},MR=function(e){var t=e.parent,i=0,a=t.width,x=0,C=t.height,E=e.drawX,O=e.drawY,I=E+e.drawTLX,V=E+e.drawTRX,X=O+e.drawTLY,q=O+e.drawBLY,st;I<i?st=i-I:V>a?st=a-V:st=0;var it;X<x?it=x-X:q>C?it=C-q:it=0,t._textOX+=st,t._textOY+=it},PR=function(e){var t=e.parent,i=t.text;e.requestCursorPosition!==null&&(e.setCursorPosition(e.requestCursorPosition),e.requestCursorPosition=null);var a=e.cursorPosition;if(e.prevCursorPosition!==a){if(e.prevCursorPosition!==null&&e.prevCursorPosition>i.length&&(e.prevCursorPosition=null),e.prevCursorPosition!==null){var x=t.getCharChild(e.prevCursorPosition);x&&(x.text===`
`&&x.clearTextSize(),t.emit("cursorout",x,e.prevCursorPosition,t))}if(a!=null){var x=t.getCharChild(a);x&&(x.text===`
`&&x.copyTextSize(t.lastInsertCursor),MR(x),t.emit("cursorin",x,a,t))}t.emit("movecursor",a,e.prevCursorPosition,t),e.prevCursorPosition=a}},yg=function(e){var t=e.prevSelectionStart;if(t!==null){for(var i=e.prevSelectionEnd,a=e.parent,x=t;x<i;x++){var C=a.getCharChild(x);C&&a.emit("cursorout",C,x,a)}e.prevSelectionStart=null,e.prevSelectionEnd=null}},Sg=function(e){var t=e.prevCursorPosition;if(t!==null){var i=e.parent,a=i.getCharChild(t);a&&i.emit("cursorout",a,t,i),e.prevCursorPosition=null}};const ER=Phaser.Utils.Objects.GetValue;let wR=class extends Uu{constructor(t,i){super(t,i),this.setSelectAllWhenFocusEnable(ER(i,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,this.requestCursorPosition=null,t.on("pointerdown",function(a,x,C,E){var O=t.getNearestChild(x,C),I=t.getCharIndex(O);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(I),this.cursorMoveStartIndex=I,this.firstClickAfterOpen=!1},this).on("pointermove",function(a,x,C,E){if(a.isDown){var O=t.getNearestChild(x,C),I=t.getCharIndex(O);this.cursorMoveStartIndex<I?this.selectText(this.cursorMoveStartIndex,I+1):this.selectText(I,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")}).on("keydown-ENTER",function(){t.emit("keydown-ENTER")})}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,i=this.text;if(this.onUpdateCallback){var a=this.onUpdateCallback(i,t,this);a!=null&&(i=a)}return t.text!==i&&t.setText(i),this.isOpened?this.selectionStart!==this.selectionEnd?(Sg(this),TR(this)):(yg(this),PR(this)):(yg(this),Sg(this)),this}setNumberInput(){return this.onUpdateCallback=xg,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}setRequestCursorPosition(t){return this.isOpened?(this.requestCursorPosition=t,this):this}};const bR=Phaser.Utils.Objects.GetValue,RR=["inputType","onOpen","clickOutSideTarget","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var OR=function(e,t){var i=bR(t,"edit");return i===void 0&&(i={}),en(t,i,RR),new wR(e,i)},As=function(e,t){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var i=t.split("."),a=e,x=0;x<i.length;x++)if(a.hasOwnProperty(i[x]))a=a[i[x]];else return!1;return!0}else return!1},Hu=function(e){if(e.parentContainer)return Hu(e.parentContainer);var t=Tp(e);return t?Hu(t):e},AR=function(e){for(var t=Hu(e).cameraFilter,i=e.scene.sys.cameras.cameras,a,x,C=0,E=i.length;C<E;C++)if(a=i[C],x=(t&a.id)>0,!x)return a;return null};class Cg extends Se{constructor(t,i){super(t),this.targetCamera=void 0,this.boot()}boot(){this.scene.sys.events.on("prerender",this.resize,this)}destroy(){this.scene&&(this.scene.sys.events.off("prerender",this.resize,this),super.destroy())}resize(){var t=this.scene,i=this.parent,a=AR(i);if(a){i.setScrollFactor(0).setOrigin(.5);var x=t.sys.scale.gameSize,C=x.width,E=x.height,O=1/a.zoom,I=C/2,V=E/2,X=C*O,q=E*O;(i.x!==I||i.y!==V)&&i.setPosition(I,V),(i.width!==X||i.height!==q)&&i.setSize(X,q)}}}const LR=Phaser.GameObjects.Zone;let $u=class extends LR{constructor(t){super(t,0,0,2,2),this.fullWindow=new Cg(this)}};var DR=function(e,t){var i=!t.textArea;if(!As(t,"wrap.vAlign")){var a=i?"center":"top";Z(t,"wrap.vAlign",a)}if(As(t,"wrap.wrapMode")||Z(t,"wrap.wrapMode","char"),!As(t,"wrap.maxLines")){var a=i?1:void 0;Z(t,"wrap.maxLines",a)}if(i&&Z(t,"wrap.wrapWidth",1/0),As(t,"wrap.useDefaultTextHeight")||Z(t,"wrap.useDefaultTextHeight",!0),t.edit||(t.edit={}),!As(t.edit,"inputType")){var a=i?"text":"textarea";Z(t.edit,"inputType",a)}if(t.clickOutSideTarget===!0){var x=new $u(e);e.add.existing(x),t.clickOutSideTarget=x}return t},sh=function(e,t,i,a){if(i===void 0&&(i="."),a===void 0&&(a={}),!e)return a;if(t in e)return Object.assign(a,e[t]);t+=i;for(var x in e)x.startsWith(t)&&(a[x.replace(t,"")]=e[x]);return a},FR=function(){var e=this.scene.input.keyboard;this.textEdit.on("open",function(){e.on("keydown-UP",this.cursorMoveUp,this).on("keydown-DOWN",this.cursorMoveDown,this)},this).on("close",function(){e.off("keydown-UP",this.cursorMoveUp,this).off("keydown-DOWN",this.cursorMoveDown,this)},this)},nh=function(e,t,i){if(i===void 0&&(i={}),Array.isArray(t))for(var a,x=0,C=t.length;x<C;x++)a=t[x],i[a]=e[a];else for(var a in t)i[a]=e[a];return i},xa=function(e,t){for(var i in e)if(!(i in t)||e[i]!==t[i])return!1;for(var i in t)if(!(i in e))return!1;return!0},BR=function(e){na(e)||this.setCursorStyle(e).on("cursorin",function(t){var i=this.cursorStyle,a=nh(t.style,i);xa(i,a)||(t.styleSave=a,t.modifyStyle(i))},this).on("cursorout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},IR=function(e){na(e)||this.setRangeStyle(e).on("rangein",function(t){var i=this.rangeStyle,a=nh(t.style,i);xa(i,a)||(t.styleSave=a,t.modifyStyle(i))},this).on("rangeout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},GR=function(e){na(e)||this.setFocusStyle(e).on("open",function(){var t=this.background,i=this.focusStyle,a=nh(t,i);xa(i,a)||(t.styleSave=a,t.modifyStyle(i))},this).on("close",function(){var t=this.background;t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},kR=function(e){var t=e.createCharChild("|");return t.text="",t};function Ls(){}Ls.prototype={diff(e,t,i={}){let a=i.callback;typeof i=="function"&&(a=i,i={}),this.options=i;let x=this;function C(it){return a?(setTimeout(function(){a(void 0,it)},0),!0):it}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));let E=t.length,O=e.length,I=1,V=E+O;i.maxEditLength&&(V=Math.min(V,i.maxEditLength));let X=[{newPos:-1,components:[]}],q=this.extractCommon(X[0],t,e,0);if(X[0].newPos+1>=E&&q+1>=O)return C([{value:this.join(t),count:t.length}]);function st(){for(let it=-1*I;it<=I;it+=2){let at,ut=X[it-1],lt=X[it+1],ft=(lt?lt.newPos:0)-it;ut&&(X[it-1]=void 0);let pt=ut&&ut.newPos+1<E,ct=lt&&0<=ft&&ft<O;if(!pt&&!ct){X[it]=void 0;continue}if(!pt||ct&&ut.newPos<lt.newPos?(at=VR(lt),x.pushComponent(at.components,void 0,!0)):(at=ut,at.newPos++,x.pushComponent(at.components,!0,void 0)),ft=x.extractCommon(at,t,e,it),at.newPos+1>=E&&ft+1>=O)return C(NR(x,at.components,t,e,x.useLongestToken));X[it]=at}I++}if(a)(function it(){setTimeout(function(){if(I>V)return a();st()||it()},0)})();else for(;I<=V;){let it=st();if(it)return it}},pushComponent(e,t,i){let a=e[e.length-1];a&&a.added===t&&a.removed===i?e[e.length-1]={count:a.count+1,added:t,removed:i}:e.push({count:1,added:t,removed:i})},extractCommon(e,t,i,a){let x=t.length,C=i.length,E=e.newPos,O=E-a,I=0;for(;E+1<x&&O+1<C&&this.equals(t[E+1],i[O+1]);)E++,O++,I++;return I&&e.components.push({count:I}),e.newPos=E,O},equals(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty(e){let t=[];for(let i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t},castInput(e){return e},tokenize(e){return e.split("")},join(e){return e.join("")}};function NR(e,t,i,a,x){let C=0,E=t.length,O=0,I=0;for(;C<E;C++){let X=t[C];if(X.removed){if(X.value=e.join(a.slice(I,I+X.count)),I+=X.count,C&&t[C-1].added){let q=t[C-1];t[C-1]=t[C],t[C]=q}}else{if(!X.added&&x){let q=i.slice(O,O+X.count);q=q.map(function(st,it){let at=a[I+it];return at.length>st.length?at:st}),X.value=e.join(q)}else X.value=e.join(i.slice(O,O+X.count));O+=X.count,X.added||(I+=X.count)}}let V=t[E-1];return E>1&&typeof V.value=="string"&&(V.added||V.removed)&&e.equals("",V.value)&&(t[E-2].value+=V.value,t.pop()),t}function VR(e){return{newPos:e.newPos,components:e.components.slice(0)}}const zR=new Ls;function YR(e,t,i){return zR.diff(e,t,i)}const Tg=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,Mg=/\S/,Pg=new Ls;Pg.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!Mg.test(e)&&!Mg.test(t)},Pg.tokenize=function(e){let t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let i=0;i<t.length-1;i++)!t[i+1]&&t[i+2]&&Tg.test(t[i])&&Tg.test(t[i+2])&&(t[i]+=t[i+2],t.splice(i+1,2),i--);return t};const Eg=new Ls;Eg.tokenize=function(e){let t=[],i=e.split(/(\n|\r\n)/);i[i.length-1]||i.pop();for(let a=0;a<i.length;a++){let x=i[a];a%2&&!this.options.newlineIsToken?t[t.length-1]+=x:(this.options.ignoreWhitespace&&(x=x.trim()),t.push(x))}return t};const WR=new Ls;WR.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};const XR=new Ls;XR.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};const UR=Object.prototype.toString,ya=new Ls;ya.useLongestToken=!0,ya.tokenize=Eg.tokenize,ya.castInput=function(e){const{undefinedReplacement:t,stringifyReplacer:i=(a,x)=>typeof x>"u"?t:x}=this.options;return typeof e=="string"?e:JSON.stringify(Ku(e,null,null,i),i,"  ")},ya.equals=function(e,t){return Ls.prototype.equals.call(ya,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Ku(e,t,i,a,x){t=t||[],i=i||[],a&&(e=a(x,e));let C;for(C=0;C<t.length;C+=1)if(t[C]===e)return i[C];let E;if(UR.call(e)==="[object Array]"){for(t.push(e),E=new Array(e.length),i.push(E),C=0;C<e.length;C+=1)E[C]=Ku(e[C],t,i,a,x);return t.pop(),i.pop(),E}if(e&&e.toJSON&&(e=e.toJSON()),typeof e=="object"&&e!==null){t.push(e),E={},i.push(E);let O=[],I;for(I in e)e.hasOwnProperty(I)&&O.push(I);for(O.sort(),C=0;C<O.length;C+=1)I=O[C],E[I]=Ku(e[I],t,i,a,I);t.pop(),i.pop()}else E=e;return E}const Zu=new Ls;Zu.tokenize=function(e){return e.slice()},Zu.join=Zu.removeEmpty=function(e){return e};const HR=Phaser.Utils.Array.Remove;var $R=function(e,t){var i=e.text;if(t!==i){if(i==null&&(i=""),HR(e.children,e.lastInsertCursor),t==="")e.removeChildren();else for(var a=YR(i,t),x=0,C=0,E=a.length;C<E;C++){var O=a[C];O.removed?e.removeText(x,O.count):(O.added&&e.insertText(x,O.value),x+=O.count)}e.children.push(e.lastInsertCursor),e.runWrap(),e.isOpened&&e.textEdit.setText(t),e.emit("textchange",t,e)}},KR={setTextOYByPercentage(e){return this.setTextOY(-this.textVisibleHeight*e),this},getTextOYPercentage(){var e=this.textVisibleHeight;return e===0?0:this._textOY/-e},setTextOXByPercentage(e){return this.setTextOX(-this.textVisibleWidth*e),this},getTextOXPercentage(){var e=this.textVisibleWidth;return e===0?0:this._textOX/-e}};const rh=Phaser.Math.Clamp;var wg=function(e,t){var i={lineIndex:0,position:0};if(t<0)return i;for(var a=0,x=e.length;a<x;a++){var C=e[a];if(t<=C){i.lineIndex=a;break}t-=C}return i.position=t,i},bg=function(e,t){var i=0,a=t.lineIndex;if(a<0)return i;for(var x=0,C=e.length;x<C;x++){var E=e[x];if(a>x)i+=E;else if(a===x)i+=Math.min(t.position,E);else break}return i},ZR={cursorMoveLeft(){if(!this.isOpened)return this;var e=rh(this.cursorPosition-1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveRight(){if(!this.isOpened)return this;var e=rh(this.cursorPosition+1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveUp(){if(!this.isOpened)return this;var e=wg(this.characterCountOfLines,this.cursorPosition);e.lineIndex-=1;var t=rh(bg(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this},cursorMoveDown(){if(!this.isOpened)return this;var e=wg(this.characterCountOfLines,this.cursorPosition);e.lineIndex+=1;var t=rh(bg(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this}};const Rg=Phaser.Utils.Objects.IsPlainObject;class Sa extends ur{constructor(t,i,a,x,C,E){Rg(i)?E=i:Rg(x)&&(E=x),E===void 0&&(E={}),DR(t,E);var O=E.text;O&&delete E.text;var I=sh(E.background,"focus"),V=sh(E.style,"cursor"),X=sh(E.style,"range");super(t,i,a,x,C,E),this.type="rexCanvasInput",this.contentWidth=void 0,this.contentHeight=void 0,this.lineHeight=void 0,this.linesCount=void 0,this.characterCountOfLines=[],this._text,this.textEdit=OR(this,E),FR.call(this),E.focusStyle&&Object.assign(I,E.focusStyle),GR.call(this,I),E.cursorStyle&&Object.assign(V,E.cursorStyle),BR.call(this,V),E.rangeStyle&&Object.assign(X,E.rangeStyle),na(X)&&Object.assign(X,V),IR.call(this,X);var q=E.onAddChar;q&&this.on("addchar",q);var st=E.onCursorIn;st&&this.on("cursorin",st);var it=E.onCursorOut;it&&this.on("cursorout",it);var at=!E.onRangeIn&&!E.onRangeOut,ut=at?E.onCursorIn:E.onRangeIn;ut&&this.on("rangein",ut);var lt=at?E.onCursorOut:E.onRangeOut;lt&&this.on("rangeout",lt);var ft=E.onMoveCursor;ft&&this.on("movecursor",ft),this.setParseTextCallback(E.parseTextCallback),this.lastInsertCursor=kR(this),O||(O=""),this.setText(O)}addChild(t,i){if(super.addChild(t,i),Array.isArray(t))for(var a=t,x=0,C=a.length;x<C;x++){var t=a[x];On(t)&&this.emit("addchar",t,i+x,this)}else On(t)&&this.emit("addchar",t,i,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&($R(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}runWrap(t){var i=super.runWrap(t);this.contentWidth=i.maxLineWidth,this.contentHeight=i.linesHeight,this.lineHeight=i.lineHeight,this.linesCount=i.lines.length,this.characterCountOfLines.length=0;for(var a=i.lines,x=0,C=a.length;x<C;x++){for(var E=a[x].children,O=0,I=0,V=E.length;I<V;I++){var X=E[I];X.active&&!X.removed&&On(X)&&O++}this.characterCountOfLines.push(O)}return i}setSize(t,i){return this.width===t&&this.height===i?this:(super.setSize(t,i),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=JR),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setRangeStyle(t){return this.rangeStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput().setSelectAllWhenFocusEnable(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}get cursorPosition(){return this.textEdit.cursorPosition}set cursorPosition(t){this.isOpened&&(this.textEdit.cursorPosition=t,this.textEdit.requestCursorPosition=t)}setCursorPosition(t){return this.cursorPosition=t,this}get topTextOY(){return 0}get bottomTextOY(){return-this.tableVisibleHeight}get leftTextOX(){return 0}get rightTextOX(){return-this.textVisibleWidth}get textVisibleHeight(){var t=this.contentHeight-this.height;return t<0&&(t=0),t}get textVisibleWidth(){var t=this.contentWidth-this.width;return t<0&&(t=0),t}set t(t){this.setTextOYByPercentage(t).updateTexture()}get t(){return this.getTextOYPercentage()}set s(t){this.setTextOXByPercentage(t).updateTexture()}get s(){return this.getTextOXPercentage()}}var JR=function(e){return e};Object.assign(Sa.prototype,KR,ZR),k.register("canvasInput",function(e,t,i,a,x){var C=new Sa(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.CanvasInput",Sa);var Ju=function(e){return b(e).loop.delta};const Og=Phaser.Utils.Objects.GetValue,QR=Phaser.Math.Wrap;class Ag extends Uu{constructor(t,i){i===void 0&&(i={}),i.onUpdate==="number"&&(i.onUpdate=xg),super(t,i),this.setCursor(Og(i,"cursor","|")),this.setCursorFlashDuration(Og(i,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var t=this.parent,i=this.text;if(this.onUpdateCallback){var a=this.onUpdateCallback(i,t,this);a!=null&&(i=a)}if(this.isOpened&&this.hasCursor){var x=this.cursorPosition;i=i.substring(0,x)+this.cursor+i.substring(x),this.prevCursorPosition!==x&&(this.prevCursorPosition=x)}return t.text!==i&&(t.setText(i),this.emit("textchange",i,t,this)),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var i=this.cursorFlashTimer+Ju(this.scene);return this.cursorFlashTimer=QR(i,0,this.cursorFlashDuration),t}}k.register("hiddenEdit",function(e,t){var i=new Ag(e,t);return i}),Z(window,"RexPlugins.UI.HiddenEdit",Ag);const jR=Phaser.GameObjects.GetCalcMatrix;var qR=function(e,t,i,a){t.updateData(),i.addToRenderList(t);var x=e.pipelines.set(t.pipeline),C=jR(t,i,a),E=x.calcMatrix.copyFrom(C.calc),O=t._displayOriginX,I=t._displayOriginY,V=i.alpha*t.alpha;e.pipelines.preBatch(t);for(var X=t.geom,q,st=0,it=X.length;st<it;st++)q=X[st],q.visible&&q.webglRender(x,E,V,O,I);e.pipelines.postBatch(t)};const _R=Phaser.Renderer.Canvas.SetTransform;var tO=function(e,t,i,a){t.updateData(),i.addToRenderList(t);var x=e.currentContext;if(_R(e,x,t,i,a)){for(var C=t._displayOriginX,E=t._displayOriginY,O=t.geom,I,V=0,X=O.length;V<X;V++)I=O[V],I.visible&&I.canvasRender(x,C,E);x.restore()}},eO={renderWebGL:qR,renderCanvas:tO};const iO=Phaser.GameObjects.Shape,sO=Phaser.Utils.Array.Remove;class Ds extends iO{constructor(t,i,a,x,C){i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=2),C===void 0&&(C=x),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(i,a),this.setSize(x,C),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,i){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==i,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=i,this.updateDisplayOrigin();var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=t,a.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==i,this._fillColor=t,this._fillAlpha=i,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,i,a){return a===void 0&&(a=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==i||this.strokeAlpha!==a,this._lineWidth=t,this._strokeColor=i,this._strokeAlpha=a,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,i=0,a=t.length;i<a;i++){var x=t[i];x.dirty&&x.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,ge(this.shapes),this.dirty=!0,this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var i=t.name;return i&&(this.shapes[i]=t),this.dirty=!0,this}deleteShape(t){var i=this.getShape(t);return i&&(delete this.shapes[t],sO(this.geom,i)),this}}Object.assign(Ds.prototype,eO);var nO={setBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==e||this.boxFillAlpha!==t,this.boxFillColor=e,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==e||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=e,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(e,t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.boxLineWidth!==e||this.boxStrokeColor!==t||this.boxStrokeAlpha!==i,this.boxLineWidth=e,this.boxStrokeColor=t,this.boxStrokeAlpha=i,this},setUncheckedBoxStrokeStyle(e,t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==e||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==i,this.uncheckedBoxLineWidth=e,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=i,this},setCheckerStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==e||this.checkAlpha!==t,this.checkerColor=e,this.checkAlpha=t,this},setBoxShape(e){return e===void 0&&(e=!1),this.isCircleShape===e?this:(this.isCircleShape=e,this.isSizeChanged=!0,this.dirty=!0,this)}},rO={setBoxSize(e){return this.dirty=this.dirty||this.boxSize!==e,this.boxSize=e,this},setCheckerSize(e){return this.dirty=this.dirty||this.checkerSize!==e,this.checkerSize=e,this}},aO=function(e,t){return e==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=e,this.fillAlpha=t),this},oO=function(e,t,i){return e==null||t==null?this.isStroked=!1:(i===void 0&&(i=1),this.isStroked=!0,this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=i),this},hO={fillStyle:aO,lineStyle:oO};class ah{constructor(){this.name=void 0,this.dirty=!0,this.visible=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}reset(){return this.setVisible().fillStyle().lineStyle(),this}webglRender(t,i,a,x,C){}canvasRender(t,i,a){}updateData(){this.dirty=!1}}Object.assign(ah.prototype,hO,Oi);const lO=Phaser.Geom.Polygon.Earcut;class Ca extends ah{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=lO(this.pathData),super.updateData(),this}webglRender(t,i,a,x,C){this.isFilled&&sv(t,i,this,a,x,C),this.isStroked&&wo(t,this,a,x,C)}canvasRender(t,i,a){var x=this.pathData,C=x.length-1,E=x[0]-i,O=x[1]-a;t.beginPath(),t.moveTo(E,O),this.closePath||(C-=2);for(var I=2;I<C;I+=2){var V=x[I]-i,X=x[I+1]-a;t.lineTo(V,X)}this.closePath&&t.closePath(),this.isFilled&&(qr(t,this),t.fill()),this.isStroked&&(_r(t,this),t.stroke())}}const Lg=Phaser.Math.DegToRad;class Tr extends Ca{constructor(t,i,a,x,C,E,O,I){t===void 0&&(t=0),i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=0),C===void 0&&(C=0),E===void 0&&(E=360),O===void 0&&(O=!1),I===void 0&&(I=!1),super(),this.setCenterPosition(t,i),this.setRadius(a,x),this.setAngle(C,E,O),this.setPie(I),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,i){return i===void 0&&(i=t),this.x=t,this.y=i,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,i){return i===void 0&&(i=t),this.radiusX=t,this.radiusY=i,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,i,a){return a===void 0&&(a=!1),this.startAngle=t,this.endAngle=i,this.anticlockwise=a,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),Xe(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,i,a){t.beginPath();var x=this.x-i,C=this.y-a,E=Lg(this.startAngle),O=Lg(this.endAngle);this.pie&&(t.moveTo(x,C),t.lineTo(x+Math.cos(E)*this.radiusX,C+Math.sin(E)*this.radiusY)),t.ellipse(x,C,this.radiusX,this.radiusY,0,E,O,this.anticlockwise),this.pie&&t.lineTo(x,C),this.isFilled&&(qr(t,this),t.fill()),this.isStroked&&(_r(t,this),t.stroke())}}class Fi extends Tr{constructor(t,i,a){super(t,i,a,a,0,360)}}class uO extends Ca{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),i=0,a=t.length;i<a;i++)this.pathData.push(t[i].x,t[i].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class dO extends Tr{constructor(t,i,a,x){super(t,i,a,x,0,360)}}class sn extends Ca{constructor(t,i,a,x){t===void 0&&(t=0),i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=0),super(),this.setP0(t,i),this.setP1(a,x)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,i){return this.x0=t,this.y0=i,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,i){return this.x1=t,this.y1=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var fO=function(e,t,i){return i.length=0,e!=null&&i.push(e,t),i};const Dg=Phaser.Math.Interpolation.QuadraticBezier;var cO=function(e,t,i,a,x,C){for(var E=C.length,O=C[E-2],I=C[E-1],V=1,X=x-1;V<=X;V++){var q=V/X;C.push(Dg(q,O,e,i),Dg(q,I,t,a))}return C};const Fg=Phaser.Math.Interpolation.CubicBezier;var vO=function(e,t,i,a,x,C,E,O){for(var I=O.length,V=O[I-2],X=O[I-1],q=1,st=E-1;q<=st;q++){var it=q/st;O.push(Fg(it,V,e,i,x),Fg(it,X,t,a,C))}return O};const Bg=Phaser.Math.Interpolation.CatmullRom;var pO=function(e,t,i){for(var a=i.length,x=i[a-2],C=i[a-1],E=[x],O=[C],I=0,V=e.length;I<V;I+=2)E.push(e[I]),O.push(e[I+1]);for(var I=1,X=t-1;I<=X;I++){var q=I/X;i.push(Bg(E,q),Bg(O,q))}return i},Ig=function(e){var t=e.length;if(t<2)return e;var i=e[t-2],a=e[t-1];return e.push(i),e.push(a),e},gO={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(e,t){return this.restorePathData(),this.accumulationLengths=void 0,fO(e,t,this.pathData),this.firstPointX=e,this.firstPointY=t,this.lastPointX=e,this.lastPointY=t,this},lineTo(e,t,i){return i===void 0&&(i=!1),i&&(e+=this.lastPointX,t+=this.lastPointY),We(e,t,this.pathData),this.lastPointX=e,this.lastPointY=t,this},verticalLineTo(e,t){return this.lineTo(e,this.lastPointY,t),this},horizontalLineTo(e,t){return this.lineTo(this.lastPointX,e,t),this},ellipticalArc(e,t,i,a,x,C,E){return E===void 0&&(E=!1),Xe(e,t,i,a,x,C,E,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(e,t,i,a,x,C){return this.ellipticalArc(e,t,i,i,a,x,C),this},quadraticBezierTo(e,t,i,a){return cO(e,t,i,a,this.iterations,this.pathData),this.lastPointX=i,this.lastPointY=a,this},cubicBezierTo(e,t,i,a,x,C){return vO(e,t,i,a,x,C,this.iterations,this.pathData),this.lastPointX=x,this.lastPointY=C,this},catmullRomTo(...e){return pO(e,this.iterations,this.pathData),this.lastPointX=e[e.length-2],this.lastPointY=e[e.length-1],this},close(){var e=this.pathData[0],t=this.pathData[1];return(e!==this.lastPointX||t!==this.lastPointY)&&this.lineTo(e,t),this.closePath=!0,this},end(){return Ig(this.pathData),this}};const mO=Phaser.Math.RotateAround;var xO=function(e,t,i,a){for(var x={x:0,y:0},C=0,E=a.length-1;C<E;C+=2)x.x=a[C],x.y=a[C+1],mO(x,e,t,i),a[C]=x.x,a[C+1]=x.y;return a},yO=function(e,t,i,a,x){for(var C=0,E=x.length-1;C<E;C+=2){var O=x[C]-e,I=x[C+1]-t;O*=i,I*=a,x[C]=O+e,x[C+1]=I+t}return x},Gg=function(e,t,i){for(var a=0,x=i.length-1;a<x;a+=2)i[a]+=e,i[a+1]+=t;return i};const SO=Phaser.Math.DegToRad;Phaser.Math.RotateAround;var CO={rotateAround(e,t,i){if(this.pathData.length===0)return this;i=SO(i),xO(e,t,i,this.pathData);var a=this.pathData.length;return this.lastPointX=this.pathData[a-2],this.lastPointY=this.pathData[a-1],this},scale(e,t,i,a){return this.pathData.length===0?this:(yO(e,t,i,a,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this)},offset(e,t){return Gg(e,t,this.pathData),this}},oh=function(e,t,i,a){i===void 0&&(i=0),a===void 0&&(a=t.length),e.length=a-i;for(var x=0,C=e.length;x<C;x++)e[x]=t[x+i];return e},TO={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(oh(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}};const MO=Phaser.Math.Distance.Between,PO=Phaser.Math.Wrap,EO=Phaser.Math.Linear;var kg=function(e,t,i,a,x){if(a===void 0&&(a=i,i=0),i=Ng(i),a=Ng(a),i!==a){var C=t[t.length-1],E=C*i,O=C*a;i<a?Qu(e,t,E,O,x):(Qu(e,t,E,C,x),Qu(e,t,0,O,x)),Ig(x)}},Qu=function(e,t,i,a,x){for(var C=i>0,E=0,O=t.length;E<O;E++){var I=E*2,V=t[E];if(C){if(V<i)continue;if(V==i)C=!1;else{var X=V-t[E-1],q=1-(V-i)/X;x.push(hh(e,I-2,I,q)),x.push(hh(e,I-1,I+1,q)),C=!1}}if(V<=a){if(x.push(e[I]),x.push(e[I+1]),V===a)break}else{var X=V-t[E-1],q=1-(V-a)/X;x.push(hh(e,I-2,I,q)),x.push(hh(e,I-1,I+1,q));break}}},hh=function(e,t,i,a){var x=e[t],C=e[i];return EO(x,C,a)},Ng=function(e){return e===0?0:e%1===0?1:PO(e,0,1)},wO={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var e=this.accumulationLengths,t=this.pathData,i,a,x,C,E,O=0,I=0,V=t.length;I<V;I+=2)x=t[I],C=t[I+1],E=i===void 0?0:MO(i,a,x,C),O+=E,e.push(O),i=x,a=C;return this.totalPathLength=O,this},setDisplayPathSegment(e,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,kg(this.pathDataSave,this.accumulationLengths,e,t,this.pathData),this},appendFromPathSegment(e,t,i){return t===void 0?this.pathData.push(...e.pathData):(e.updateAccumulationLengths(),kg(e.pathData,e.accumulationLengths,t,i,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},bO={draw(e,t,i){var a=this.toPoints();return t&&e.fillPoints(a,this.closePath,this.closePath),i&&e.strokePoints(a,this.closePath,this.closePath),this}},RO=function(e,t){t===void 0&&(t=[]);for(var i=0,a=e.length-1;i<a;i+=2)t.push({x:e[i],y:e[i+1]});return t};const OO=Phaser.Geom.Polygon;var AO=function(e,t){return t===void 0&&(t=new OO),t.setTo(e),t};class Vg{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return RO(this.pathData)}toPolygon(t){return AO(this.pathData,t)}}Object.assign(Vg.prototype,gO,CO,TO,wO,bO);class Qe extends Ca{constructor(){super(),this.builder=new Vg(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,i){return this.builder.startAt(t,i),this.dirty=!0,this}lineTo(t,i,a){return this.builder.lineTo(t,i,a),this.dirty=!0,this}verticalLineTo(t,i){return this.builder.verticalLineTo(t,i),this.dirty=!0,this}horizontalLineTo(t,i){return this.builder.horizontalLineTo(t,i),this.dirty=!0,this}ellipticalArc(t,i,a,x,C,E,O){return this.builder.ellipticalArc(t,i,a,x,C,E,O),this.dirty=!0,this}arc(t,i,a,x,C,E){return this.builder.arc(t,i,a,x,C,E),this.dirty=!0,this}quadraticBezierTo(t,i,a,x){return this.builder.quadraticBezierTo(t,i,a,x),this.dirty=!0,this}cubicBezierTo(t,i,a,x,C,E){return this.builder.cubicBezierTo(t,i,a,x,C,E),this.dirty=!0,this}catmullRomTo(...t){return this.builder.catmullRomTo(...t),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,i,a){return this.builder.rotateAround(t,i,a),this.dirty=!0,this}scale(t,i,a,x){return this.builder.scale(t,i,a,x),this.dirty=!0,this}offset(t,i){return this.builder.offset(t,i),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,i,a){return this.builder.appendFromPathSegment(t.builder,i,a),this}copyPathFrom(t,i,a){return this.builder.clear().appendFromPathSegment(t.builder,i,a),this}setDisplayPathSegment(t,i){return this.builder.setDisplayPathSegment(t,i),this}}const LO=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let DO=class extends ah{constructor(t,i,a,x){t===void 0&&(t=0),i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=a),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,i),this.setSize(a,x)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,i){return this.width=t,this.height=i,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,i){return this.centerX=t,this.centerY=i,this}updateData(){this.pathData.length=0;var t=this.x,i=t+this.width,a=this.y,x=a+this.height;return this.pathData.push(t,a),this.pathData.push(i,a),this.pathData.push(i,x),this.pathData.push(t,x),this.pathData.push(t,a),super.updateData(),this}webglRender(t,i,a,x,C){if(this.isFilled){var E=t.fillTint,O=LO(this.fillColor,this.fillAlpha*a);E.TL=O,E.TR=O,E.BL=O,E.BR=O,t.batchFillRect(-x+this.x,-C+this.y,this.width,this.height)}this.isStroked&&wo(t,this,a,x,C)}canvasRender(t,i,a){this.isFilled&&(qr(t,this),t.fillRect(-i,-a,this.width,this.height)),this.isStroked&&(_r(t,this),t.beginPath(),t.rect(-i,-a,this.width,this.height),t.stroke())}};const lh=Phaser.Utils.Objects.GetValue;class uh extends Ca{constructor(t,i,a,x,C,E){t===void 0&&(t=0),i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=a),C===void 0&&(C=0),E===void 0&&(E=6),super(),this.setTopLeftPosition(t,i),this.setSize(a,x),this.setRadius(C),this.setIterations(E),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,i){return this.width=t,this.height=i,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,i){return this.centerX=t,this.centerY=i,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var i=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==i,this._convexTL=i,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var i=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==i,this._convexTR=i,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var i=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==i,this._convexBL=i,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var i=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==i,this._convexBR=i,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=lh(t,"tl",0),this.radiusTR=lh(t,"tr",0),this.radiusBL=lh(t,"bl",0),this.radiusBR=lh(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var i=this.width,a=this.height,x,C=this.iterations+1;if(x=this.radiusTL,x>0)if(this._convexTL){var E=x,O=x;Xe(E,O,x,x,180,270,!1,C,t)}else{var E=0,O=0;Xe(E,O,x,x,90,0,!0,C,t)}else We(0,0,t);if(x=this.radiusTR,x>0)if(this._convexTR){var E=i-x,O=x;Xe(E,O,x,x,270,360,!1,C,t)}else{var E=i,O=0;Xe(E,O,x,x,180,90,!0,C,t)}else We(i,0,t);if(x=this.radiusBR,x>0)if(this._convexBR){var E=i-x,O=a-x;Xe(E,O,x,x,0,90,!1,C,t)}else{var E=i,O=a;Xe(E,O,x,x,270,180,!0,C,t)}else We(i,a,t);if(x=this.radiusBL,x>0)if(this._convexBL){var E=x,O=a-x;Xe(E,O,x,x,90,180,!1,C,t)}else{var E=0,O=a;Xe(E,O,x,x,360,270,!0,C,t)}else We(0,a,t);return t.push(t[0],t[1]),Gg(this.x,this.y,t),super.updateData(),this}}const FO=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let BO=class extends ah{constructor(t,i,a,x,C,E){t===void 0&&(t=0),i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=0),C===void 0&&(C=0),E===void 0&&(E=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,i),this.setP1(a,x),this.setP2(C,E)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,i){return this.x0=t,this.y0=i,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,i){return this.x1=t,this.y1=i,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,i){return this.dirty=this.dirty||this.x2!==t||this.y2!==i,this.x2=t,this.y2=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,i,a,x,C){if(this.isFilled){var E=FO(this.fillColor,this.fillAlpha*a),O=this.x0-x,I=this.y0-C,V=this.x1-x,X=this.y1-C,q=this.x2-x,st=this.y2-C,it=i.getX(O,I),at=i.getY(O,I),ut=i.getX(V,X),lt=i.getY(V,X),ft=i.getX(q,st),pt=i.getY(q,st);t.batchTri(it,at,ut,lt,ft,pt,E,E,E)}this.isStroked&&wo(t,this,a,x,C)}canvasRender(t,i,a){var x=this.x1-i,C=this.y1-a,E=this.x2-i,O=this.y2-a,I=this.x3-i,V=this.y3-a;t.beginPath(),t.moveTo(x,C),t.lineTo(E,O),t.lineTo(I,V),t.closePath(),this.isFilled&&(qr(t,this),t.fill()),this.isStroked&&(_r(t,this),t.stroke())}};var IO={buildShapes(){this.addShape(new uh().setName("box")).addShape(new Qe().setName("checker"))},updateShapes(){var e=this.width/2,t=this.height/2,i=Math.min(e,t),a=i*2,x=e-i,C=t-i,E=this.boxLineWidth,O=Math.max(a/10,2),I=this.getShape("box"),V=this.getShape("checker");if(this.isSizeChanged){var st=a*(1-this.boxSize)/2,X=E/2,q=a*this.boxSize-E;I.setTopLeftPosition(x+X+st,C+X+st).setSize(q,q),this.isCircleShape?I.setRadius(q/2):I.setRadius(0);var st=a*(1-this.checkerSize)/2,it=a*this.checkerSize/4,at=it*1,ut=it*2,lt=it*3;V.startAt(at,ut).lineTo(ut,lt).lineTo(lt,at).offset(x+st,C+st).end()}this.checked?(I.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(E,this.boxStrokeColor,this.boxStrokeAlpha),V.lineStyle(O,this.checkerColor)):(I.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(E,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),V.lineStyle()),this.checked&&V.setDisplayPathSegment(this.checkerAnimProgress)}};const nn=Phaser.Utils.Objects.GetValue,GO=Phaser.Math.Linear;class $i extends Dn{constructor(t,i){super(t,i),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var i=this.target;this.propertyKey=nn(t,"key","value");var a=i[this.propertyKey];return this.fromValue=nn(t,"from",a),this.toValue=nn(t,"to",a),this.setEase(nn(t,"ease",this.ease)),this.setDuration(nn(t,"duration",this.duration)),this.setRepeat(nn(t,"repeat",0)),this.setDelay(nn(t,"delay",0)),this.setRepeatDelay(nn(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),i[this.propertyKey]=this.fromValue,super.start(),this}updateTarget(t,i){var a=i.t;a=this.easeFn(a),t[this.propertyKey]=GO(this.fromValue,this.toValue,a)}}var kO={setCheckerAnimationDuration(e){return e===void 0&&(e=0),this.checkerAnimDuration=e,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new $i(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}},zg={};Object.assign(zg,nO,rO,IO,kO);const Ta=23730,NO=16777215,be=Phaser.Utils.Objects.GetValue,Yg=Phaser.Utils.Objects.IsPlainObject;class Wg extends Ds{constructor(t,i,a,x,C,E,O){Yg(i)?(O=i,i=be(O,"x",0),a=be(O,"y",0),x=be(O,"width",2),C=be(O,"height",2),E=be(O,"color",Ta)):Yg(E)&&(O=E,E=be(O,"color",Ta)),super(t,i,a,x,C),this.type="rexCheckbox",E===void 0&&(E=Ta),this.setBoxShape(be(O,"circleBox",!1)),this.setBoxFillStyle(E,be(O,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(be(O,"uncheckedColor",null),be(O,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(be(O,"boxLineWidth",4),be(O,"boxStrokeColor",E),be(O,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,be(O,"uncheckedBoxStrokeColor",this.boxStrokeColor),be(O,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(be(O,"checkerColor",NO),be(O,"checkerAlpha",1)),this.setBoxSize(be(O,"boxSize",1)),this.setCheckerSize(be(O,"checkerSize",1)),this.setCheckerAnimationDuration(be(O,"animationDuration",150)),this.buildShapes();var I=be(O,"checked");I===void 0&&(I=be(O,"value",!1)),this.setValue(I)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}}Object.assign(Wg.prototype,zg);const Ma=Phaser.Utils.Objects.GetValue;class Fs extends Se{constructor(t,i){super(t,i),this._enable=void 0,t.setInteractive(Ma(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.isDown=!1,this.isOver=!1,this.setEnable(Ma(t,"enable",!0)),this.setMode(Ma(t,"mode",1)),this.setClickInterval(Ma(t,"clickInterval",100)),this.setDragThreshold(Ma(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var i=t?"enable":"disable";this.emit(i,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=VO[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,i,a,x){this.pointer===void 0&&(this.pointer=t,this.isDown=!0,this.emit("down",this,this.parent,t,x),this.mode===0&&this.click(t.downTime,t,x))}onRelease(t,i,a,x){this.pointer===t&&(this.isDown=!1,this.emit("up",this,this.parent,t,x),this.mode===1&&this.click(t.upTime,t,x),this.pointer=void 0)}onPointOut(t,i){this.pointer===t&&this.cancel()}onMove(t,i,a,x){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&t.getDistance()>=this.dragThreshold&&this.cancel()}onOver(t,i,a,x){return this.enable?(this.isOver=!0,this.emit("over",this,this.parent,t,x),this):this}onOut(t,i){return this.enable?(this.isOver=!1,this.emit("out",this,this.parent,t,i),this):this}click(t,i,a){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,i,a),this;this.pointer=void 0;var x=this.lastClickTime;return x!==void 0&&t-x<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,i,a),this)}cancel(){return this.pointer=void 0,this}}const VO={press:0,pointerdown:0,release:1,pointerup:1},rn=Phaser.Utils.Objects.GetValue,Xg=Phaser.Utils.Objects.IsPlainObject;class ju extends Wg{constructor(t,i,a,x,C,E,O){Xg(i)?(O=i,i=rn(O,"x",0),a=rn(O,"y",0),x=rn(O,"width",2),C=rn(O,"height",2),E=rn(O,"color",Ta)):Xg(E)&&(O=E,E=rn(O,"color",Ta)),super(t,i,a,x,C,E,O),this._click=new Fs(this,rn(O,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(rn(O,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}k.register("checkbox",function(e,t,i,a,x,C){var E=new ju(this.scene,e,t,i,a,x,C);return this.scene.add.existing(E),E}),Z(window,"RexPlugins.UI.Checkbox",ju);var zO={setTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==e||this.trackFillAlpha!==t,this.trackFillColor=e,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==e||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=e,this.falseValueTrackFillAlpha=t,this},setThumbStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==e||this.checkAlpha!==t,this.thumbColor=e,this.thumbAlpha=t,this}},YO={setTrackSize(e,t){return this.dirty=this.dirty||this.trackWidth!==e||this.trackHeight!==t,this.trackWidth=e,this.trackHeight=t,this},setTrackRadius(e){return this.dirty=this.dirty||this.trackRadius!==e,this.trackRadius=e,this},setThumbSize(e,t){return t===void 0&&(t=e),this.dirty=this.dirty||this.thumbWidth!==e||this.thumbHeight!==t,this.thumbWidth=e,this.thumbHeight=t,this},setThumbRadius(e){return this.dirty=this.dirty||this.thumbRadius!==e,this.thumbRadius=e,this}},WO={setThumbPosition(e,t){return t===void 0&&(t=1-e),this.thumbLeftX=e,this.thumbRightX=t,this},setRTL(e){return e===void 0&&(e=!0),this.rtl=e,this}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var qu=function(e,t,i){return(t-e)*i+e},XO=function(e,t,i){var a=qu(ra(e),ra(t),i),x=qu(aa(e),aa(t),i),C=qu(oa(e),oa(t),i);return(a&255)<<16|(x&255)<<8|C&255};const Ug=Phaser.Math.Linear;var UO={buildShapes(){this.addShape(new uh().setName("track")).addShape(new uh().setName("thumb"))},updateShapes(){var e=this.width,t=this.height,i=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,a=this.getShape("track");if(this.isSizeChanged){var x=e*this.trackWidth,C=t*this.trackHeight,E=(e-x)/2,O=(t-C)/2,I=t*this.trackRadius;a.setTopLeftPosition(E,O).setSize(x,C).setRadius(I)}var V=XO(this.falseValueTrackColor,this.trackFillColor,i),X=Ug(this.falseValueTrackFillAlpha,this.trackFillAlpha,i);a.fillStyle(V,X);var q=this.getShape("thumb");if(this.isSizeChanged){var st=e*this.thumbWidth,it=t*this.thumbHeight,at=t*this.thumbRadius;q.setSize(st,it).setRadius(at)}var ut=Ug(this.thumbLeftX,this.thumbRightX,i)*e;this.rtl&&(ut=e-ut);var lt=t/2;q.setCenterPosition(ut,lt),q.fillStyle(this.thumbColor,this.thumbAlpha)}},HO={setToggleAnimationDuration(e){return e===void 0&&(e=0),this.toggleAnimDuration=e,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new $i(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}},Hg={};Object.assign(Hg,zO,YO,WO,UO,HO);var $O=function(e){var t=.3*ra(e)+.59*aa(e)+.11*oa(e);return(t&255)<<16|(t&255)<<8|t&255};const Re=Phaser.Utils.Objects.GetValue,$g=Phaser.Utils.Objects.IsPlainObject,_u=23730,KO=16777215;class Kg extends Ds{constructor(t,i,a,x,C,E,O){$g(i)?(O=i,i=Re(O,"x",0),a=Re(O,"y",0),x=Re(O,"width",2),C=Re(O,"height",2),E=Re(O,"color",_u)):$g(E)&&(O=E,E=Re(O,"color",_u)),super(t,i,a,x,C),this.type="rexToggleSwitch",E===void 0&&(E=_u),this.setTrackFillStyle(E,Re(O,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(Re(O,"falseValueTrackColor",$O(E)),Re(O,"falseValueTrackFillAlpha",1)),this.setThumbStyle(Re(O,"thumbColor",KO),Re(O,"thumbAlpha",1)),this.setTrackSize(Re(O,"trackWidth",.9),Re(O,"trackHeight",.5)),this.setTrackRadius(Re(O,"trackRadius",this.trackHeight*.5));var I=Re(O,"thumbHeight",void 0),V=Re(O,"thumbWidth",I);V===void 0&&(V=this.trackHeight*.9),this.setThumbSize(V,I),this.setThumbRadius(Re(O,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(Re(O,"thumbLeft",.3),Re(O,"thumbRight",void 0)),this.setRTL(Re(O,"rtl",!1)),this.setToggleAnimationDuration(Re(O,"animationDuration",150)),this.buildShapes(),this.setValue(Re(O,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,i){i===void 0&&(i=this.toggleAnimDuration);var a=this.toggleAnimDuration;return this.toggleAnimDuration=i,this.value=t,this.toggleAnimDuration=a,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}}Object.assign(Kg.prototype,Hg);const Zg=Phaser.Utils.Objects.GetValue;class td extends Kg{constructor(t,i,a,x,C,E,O){super(t,i,a,x,C,E,O),this._click=new Fs(this,Zg(O,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(Zg(O,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}k.register("toggleSwitch",function(e,t,i,a,x,C){var E=new td(this.scene,e,t,i,a,x,C);return this.scene.add.existing(E),E}),Z(window,"RexPlugins.UI.ToggleSwitch",td);var ZO={loadFromURL(e,t){var i=this,a=new Image;return a.onload=function(){i.width!==a.width||i.height!==a.height?i.resize(a.width,a.height):i.clear(),i.context.drawImage(a,0,0),i.updateTexture(),t&&t(),a.onload=null,a.src="",a.remove()},a.src=e,this},loadFromURLPromise(e){var t=this;return new Promise(function(i,a){t.loadFromURL(e,i)})},loadFromFile(e,t){var i=URL.createObjectURL(e);return this.loadFromURL(i,function(){URL.revokeObjectURL(i),t&&t()}),this},loadFromFilePromise(e){var t=this;return new Promise(function(i,a){t.loadFromFile(e,i)})}};class Bn extends Zs{}Object.assign(Bn.prototype,ZO),k.register("canvas",function(e,t,i,a){var x=new Bn(this.scene,e,t,i,a);return this.scene.add.existing(x),x}),Z(window,"RexPlugins.UI.Canvas",Bn);const Mr=Phaser.Utils.Objects.GetValue;class Jg extends Zs{constructor(t,i,a,x,C,E){super(t,i,a),this.type="rexCircleMaskImage",this.setTexture(x,C,E)}setTexture(t,i,a){typeof i=="object"&&(a=i,i=void 0),typeof a=="string"&&(a={maskType:a});var x=Mr(a,"maskType",0),C=Mr(a,"backgroundColor",void 0),E=Mr(a,"strokeColor",void 0),O=E!=null?10:0,I=Mr(a,"strokeWidth",O);if(x===void 0?x=0:typeof x=="string"&&(x=JO[x]),this._textureKey=t,this._frameName=i,x===null)return this.loadTexture(t,i),this.dirty=!0,this;var V=this.scene.sys.textures.getFrame(t,i);if(!V)return this;V.cutWidth!==this.width||V.cutHeight!==this.height?this.setCanvasSize(V.cutWidth,V.cutHeight):this.clear();var X=this.canvas,q=this.context,st=X.width,it=X.height;C!=null&&(q.fillStyle=C,q.fillRect(0,0,st,it)),q.save(),q.beginPath();var at=I/2;switch(x){case 1:var ct=Math.floor(st/2),xt=Math.floor(it/2),ut=ct-at,lt=xt-at;q.ellipse(ct,xt,ut,lt,0,0,2*Math.PI);break;case 2:var ft=Mr(a,"radius",0),pt=Mr(a,"iteration",void 0);uv(q,at,at,st-I,it-I,ft,pt);break;default:var ct=Math.floor(st/2),xt=Math.floor(it/2),Mt=Math.min(ct,xt)-at;q.arc(ct,xt,Mt,0,2*Math.PI);break}return E!=null&&(q.strokeStyle=E,q.lineWidth=I,q.stroke()),q.clip(),this.loadTexture(t,i),q.restore(),this.dirty=!0,this}resize(t,i){return this.setDisplaySize(t,i),this}}const JO={circle:0,ellipse:1,roundRectangle:2};k.register("circleMaskImage",function(e,t,i,a,x){var C=new Jg(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.CircleMaskImage",Jg);const Pa=Phaser.Utils.Objects.GetValue;class Qg extends Zs{constructor(t,i,a,x,C,E){super(t,i,a),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(x,C,E)}setTexture(t,i,a){typeof i=="object"&&(a=i,i=void 0),typeof a=="string"&&(a={mask:{key:a}});var x=Pa(a,"mask.key"),C=Pa(a,"mask.frame"),E=Pa(a,"mask.invertAlpha",!1),O=Pa(a,"mask.scale"),I=Pa(a,"backgroundColor");if(x){this._maskKey=x,this._maskFrame=C,this._maskScale=O;var V=x?this.scene.sys.textures.get(x):null;this.maskFrame=V?V.get(C):null}this._textureKey=t,this._frameName=i;var X=this.maskFrame;if(X===null)return this.loadTexture(t,i),this.dirty=!0,this;var q=I!=null;this.loadTexture(t,i);var st=this.canvas,it=this.context,at=st.width,ut=st.height;it.save(),it.globalCompositeOperation=E?"destination-out":"destination-in";var lt,ft;this._maskScale!=null?(lt=X.cutWidth*this._maskScale,ft=X.cutHeight*this._maskScale):(lt=at,ft=ut);var pt=(at-lt)/2,ct=(ut-ft)/2;return this.drawFrame(this._maskKey,this._maskFrame,pt,ct,lt,ft),it.restore(),q&&(it.save(),it.globalCompositeOperation="destination-over",it.fillStyle=I,it.fillRect(0,0,at,ut),it.restore()),this.dirty=!0,this}resize(t,i){return this.setDisplaySize(t,i),this}}k.register("alphaMaskImage",function(e,t,i,a,x){var C=new Qg(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.AlphaMaskImage",Qg);const QO=Phaser.Math.Linear,jg=Phaser.Math.Percent;var jO={setValue(e,t,i){return e==null?this:(t!==void 0&&(e=jg(e,t,i)),this.value=e,this)},addValue(e,t,i){return t!==void 0&&(e=jg(e,t,i)),this.value+=e,this},getValue(e,t){var i=this.value;return e!==void 0&&t!==void 0&&(i=QO(e,t,i)),i}};const qO=Phaser.Math.Percent;var _O={setEaseValuePropName(e){return this.easeValuePropName=e,this},setEaseValueDuration(e){return this.easeValueDuration=e,this},setEaseValueFunction(e){return this.easeFunction=e,this},stopEaseValue(){return this.easeValueTask&&this.easeValueTask.stop(),this},easeValueTo(e,t,i){return e==null?this:(t!==void 0&&(e=qO(e,t,i)),this.easeValueTask===void 0&&(this.easeValueTask=new $i(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:e,duration:this.easeValueDuration,ease:this.easeFunction}),this)},easeValueRepeat(e,t,i,a){return i===void 0&&(i=-1),a===void 0&&(a=0),this.easeValueTask===void 0&&(this.easeValueTask=new $i(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:e,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:i,repeatDelay:a}),this}};const Ea=Phaser.Utils.Objects.GetValue,tA=Phaser.Math.Clamp;function an(e){class t extends e{bootProgressBase(a){this.eventEmitter=Ea(a,"eventEmitter",this);var x=Ea(a,"valuechangeCallback",null);if(x!==null){var C=Ea(a,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",x,C)}return this.setEaseValuePropName("value").setEaseValueDuration(Ea(a,"easeValue.duration",0)).setEaseValueFunction(Ea(a,"easeValue.ease","Linear")),this}get value(){return this._value}set value(a){a=tA(a,0,1);var x=this._value,C=x!=a;this.dirty=this.dirty||C,this._value=a,C&&this.eventEmitter.emit("valuechange",this._value,x,this.eventEmitter)}}return Object.assign(t.prototype,jO,_O),t}const eA=Phaser.Math.RadToDeg,qg=Phaser.Math.DegToRad;var _g=function(e,t,i,a,x,C,E,O){var I=Math.abs(E-C)===360,V=qg(C),X=qg(E),q=Math.cos(V),st=Math.sin(V),it=Math.cos(X),at=Math.sin(X);return e.startAt(t+q*a,i+st*a),e.arc(t,i,a,C,E,O),I&&x===0||(e.lineTo(t+it*x,i+at*x),x>0&&e.arc(t,i,x,E,C,!O)),e.close(),e},iA={buildShapes(){var e=this.iterations;this.addShape(new Qe().setIterations(e).setName("track")).addShape(new Qe().setIterations(e).setName("bar")).addShape(new Fi().setIterations(e).setName("center"))},updateShapes(){var e=this.radius,t=this.thickness*this.radius,i=this.radius,a=i-t,x=this.getShape("track");this.trackColor!=null&&this.thickness>0?(x.fillStyle(this.trackColor),_g(x,e,e,i,a,0,360,!1)):x.reset();var C=this.getShape("bar");if(this.barColor!=null&&this.thickness>0){var E,O,I;if(this.value===1)E=!1,O=0,I=360;else{E=this.anticlockwise,O=eA(this.startAngle);var V=360*(E?1-this.value:this.value);I=V+O}C.fillStyle(this.barColor),_g(C,e,e,i+1,a-1,O,I,!1)}else C.reset();var X=this.getShape("center");this.centerColor&&a>0?X.setCenterPosition(e,e).setRadius(a).fillStyle(this.centerColor):X.reset()}};const Ki=Phaser.Utils.Objects.GetValue,sA=Phaser.Utils.Objects.IsPlainObject,nA=Phaser.Math.Clamp,rA=Phaser.Math.DegToRad(270);let ed=class extends an(Ds){constructor(t,i,a,x,C,E,O){sA(i)&&(O=i,i=Ki(O,"x",0),a=Ki(O,"y",0),x=Ki(O,"radius",1),C=Ki(O,"barColor",void 0),E=Ki(O,"value",0)),x===void 0&&(x=1);var I=x*2;super(t,i,a,I,I),this.type="rexCircularProgress",this.bootProgressBase(O),this.setRadius(x),this.setTrackColor(Ki(O,"trackColor",void 0)),this.setBarColor(C),this.setCenterColor(Ki(O,"centerColor",void 0)),this.setThickness(Ki(O,"thickness",.2)),this.setStartAngle(Ki(O,"startAngle",rA)),this.setAnticlockwise(Ki(O,"anticlockwise",!1)),this.iterations=Ki(O,"iterations",128),this.buildShapes(),this.setValue(E)}resize(t,i){return t=Math.floor(Math.min(t,i)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var i=t*2;this.resize(i,i)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=nA(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}};Object.assign(ed.prototype,iA),k.register("circularProgress",function(e,t,i,a,x,C){var E=new ed(this.scene,e,t,i,a,x,C);return this.scene.add.existing(E),E}),Z(window,"RexPlugins.UI.CircularProgress",ed);var id=function(e,t,i,a,x,C,E,O,I,V,X,q){V===void 0&&(V=0),X===void 0&&(X=2*Math.PI),q===void 0&&(q=!1),t.beginPath(),t.ellipse(i,a,x,C,0,V,X,q),E!=null&&(t.fillStyle=E,t.fill()),O!=null&&(t.strokeStyle=O,t.lineWidth=I,t.stroke())};const t0=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],aA=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];for(var sd={},e0,dh=0,oA=t0.length;dh<oA;dh++)e0=t0[dh].toLowerCase(),sd[e0]=aA[dh];var hA=function(e){return e=e.toLowerCase(),sd.hasOwnProperty(e)?sd[e]:null},nd=function(e){return typeof e!="string"||(e.startsWith("#")?e=parseInt(e.substring(1),16):e.startsWith("0x")?e=parseInt(e.substring(2),16):e=hA(e)),e};const lA=Phaser.Math.DegToRad,rd=Phaser.Math.Linear;var uA=function(e,t,i,a,x,C,E,O,I,V,X,q,st){V===void 0&&(V=0),X===void 0&&(X=2*Math.PI),q===void 0&&(q=!1),st===void 0&&(st=2),E=nd(E),O=nd(O),wa=up(E,wa),ba=up(O,ba);var it=lA(st),at;q?at=V-X:at=X-V,at<0&&(at+=2*Math.PI);var ut=Math.ceil(at/it),lt=at/ut;q&&(lt=-lt);for(var ft=0;ft<ut;ft++){var pt=ft/ut,ct=Math.round(rd(wa.r,ba.r,pt)),xt=Math.round(rd(wa.g,ba.g,pt)),Mt=Math.round(rd(wa.b,ba.b,pt)),Pt=V+ft*lt,Ot=Pt+lt;ft<ut-1&&(Ot+=lt/2),t.beginPath(),t.ellipse(i,a,x,C,0,Pt,Ot,q),t.strokeStyle=`rgb(${ct},${xt},${Mt})`,t.lineWidth=I,t.stroke()}},wa,ba,dA=function(e,t,i,a,x,C,E,O,I,V,X){I===void 0&&O!=null&&(I=2),t.font=C,t.textAlign=V,t.textBaseline=X,t.fillStyle=E,t.strokeStyle=O,t.lineWidth=I,t.lineCap="round",t.lineJoin="round",O!=null&&O!=="none"&&I>0&&t.strokeText(x,i,a),E!=null&&E!=="none"&&t.fillText(x,i,a)};const ad=Phaser.Math.PI2;var fA=function(){var e=this.radius,t=this.thickness*this.radius,i=this.radius-t/2,a=this.radius-t,x=this.canvas,C=this.context,E=this.anticlockwise,O=this.startAngle,I=this.endAngle,V=this._deltaAngle;if(this.trackColor&&t>0&&(C.save(),id(x,C,e,e,i,i,void 0,this.trackColor,t,O,I,E),C.restore()),this.barColor&&i>0){var X;this.value>=1?X=I:E?X=(O-V*this.value+ad)%ad:X=(O+V*this.value)%ad,C.save(),this.barColor2?uA(x,C,e,e,i,i,this.barColor2,this.barColor,t,O,X,E):id(x,C,e,e,i,i,void 0,this.barColor,t,O,X,E),C.restore()}if(this.centerColor&&a>0){var q;this.centerColor2?(q=this.context.createRadialGradient(e,e,0,e,e,a),q.addColorStop(0,this.centerColor),q.addColorStop(1,this.centerColor2)):q=this.centerColor,C.save(),id(x,C,e,e,a,a,q),C.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(C.save(),dA(x,C,e,e,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),C.restore())};const Te=Phaser.Utils.Objects.GetValue,cA=Phaser.Utils.Objects.IsPlainObject,vA=Phaser.Math.Clamp,pA=Phaser.Math.DegToRad(270),fh=Phaser.Math.PI2;class ch extends an(Zs){constructor(t,i,a,x,C,E,O){cA(i)&&(O=i,i=Te(O,"x",0),a=Te(O,"y",0),x=Te(O,"radius",1),C=Te(O,"barColor",void 0),E=Te(O,"value",0));var I=x*2,V=Te(O,"resolution",1);super(t,i,a,I,I,V),this.type="rexCircularProgressCanvas",this.bootProgressBase(O),this.setRadius(x),this.setTrackColor(Te(O,"trackColor",void 0)),this.setBarColor(C),this.setBarColor2(Te(O,"barColor2",void 0)),this.setCenterColor(Te(O,"centerColor",void 0)),this.setThickness(Te(O,"thickness",.2)),this.setAnticlockwise(Te(O,"anticlockwise",!1)),this.setStartAngle(Te(O,"startAngle",pA));var X=Te(O,"endAngle");X===void 0&&(this.anticlockwise?X=this.startAngle-fh:X=this.startAngle+fh),this.setEndAngle(Te(O,"endAngle",X)),this.setTextColor(Te(O,"textColor",void 0)),this.setTextStrokeColor(Te(O,"textStrokeColor",void 0),Te(O,"textStrokeThickness",void 0));var q=Te(O,"textFont",void 0);q?this.setTextFont(q):this.setTextFont(Te(O,"textSize","16px"),Te(O,"textFamily","Courier"),Te(O,"textStyle","")),this.setTextFormatCallback(Te(O,"textFormatCallback",void 0),Te(O,"textFormatCallbackScope",void 0)),this.setValue(E)}resize(t,i){return t=Math.floor(Math.min(t,i)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var i=t*2;this.resize(i,i)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=Ut(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=Ut(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get barColor2(){return this._barColor2}set barColor2(t){t=Ut(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}setBarColor2(t){return this.barColor2=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t,this._deltaAngle=od(this._startAngle,this._endAngle,this._anticlockwise)}setStartAngle(t){return this.startAngle=t,this}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!=t,this._endAngle=t,this._deltaAngle=od(this._startAngle,this._endAngle,this._anticlockwise)}setEndAngle(t){return this.endAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t,this._deltaAngle=od(this._startAngle,this._endAngle,this._anticlockwise)}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=vA(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=Ut(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=Ut(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,i){return this.centerColor=t,this.centerColor2=i,this}get textColor(){return this._textColor}set textColor(t){t=Ut(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=Ut(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,i){return i===void 0&&(i=2),this.textStrokeColor=t,this.textStrokeThickness=i,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,i,a){var x;return i===void 0?x=t:x=a+" "+t+" "+i,this.textFont=x,this}setTextFormatCallback(t,i){return this.textFormatCallback=t,this.textFormatCallbackScope=i,this}updateTexture(){return super.updateTexture(function(){this.clear(),fA.call(this)},this),this}getFormatText(t){t===void 0&&(t=this.value);var i;return this.textFormatCallbackScope?i=this.textFormatCallback(t):i=this.textFormatCallback.call(this.textFormatCallbackScope,t),i}}var od=function(e,t,i){return i?e<=t?fh+e-t:e-t:e>=t?fh+t-e:t-e};k.register("circularProgressCanvas",function(e,t,i,a,x,C){var E=new ch(this.scene,e,t,i,a,x,C);return this.scene.add.existing(E),E}),Z(window,"RexPlugins.UI.CircularProgressCanvas",ch);var gA=function(){var e=this.skewX,t=this.width-Math.abs(e),i=this.height,a=this.getShape("trackFill");a.fillStyle(this.trackColor),a.isFilled&&hd(a,0,0,t,i,e);var x=this.getShape("bar");if(x.fillStyle(this.barColor),x.isFilled){var C,E;this.rtl?(C=t*(1-this.value),E=t):(C=0,E=t*this.value),hd(x,C,0,E,i,e)}var O=this.getShape("trackStroke");O.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),O.isStroked&&hd(O,0,0,t,i,e)},hd=function(e,t,i,a,x,C){var E=(t+a)/2;return C>=0?e.startAt(E+C,i).lineTo(a+C,i).lineTo(a,x).lineTo(t,x).lineTo(t+C,i).lineTo(E+C,i):e.startAt(E,i).lineTo(a,i).lineTo(a-C,x).lineTo(t-C,x).lineTo(t,i).lineTo(E,i),e.close(),e};const Ra=Phaser.Utils.Objects.GetValue,ld=Phaser.Utils.Objects.IsPlainObject;let vh=class extends an(Ds){constructor(t,i,a,x,C,E,O,I){ld(i)?(I=i,i=I.x,a=I.y,x=I.width,C=I.height,E=I.barColor,O=I.value):ld(x)?(I=x,x=I.width,C=I.height,E=I.barColor,O=I.value):ld(E)&&(I=E,E=I.barColor,O=I.value),i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=2),C===void 0&&(C=x),O===void 0&&(O=0),super(t,i,a,x,C,I),this.type="rexLineProgress",this.bootProgressBase(I),this.addShape(new Qe().setName("trackFill")).addShape(new Qe().setName("bar")).addShape(new Qe().setName("trackStroke")),this.setTrackColor(Ra(I,"trackColor",void 0)),this.setBarColor(E),this.setTrackStroke(Ra(I,"trackStrokeThickness",2),Ra(I,"trackStrokeColor",void 0)),this.setSkewX(Ra(I,"skewX",0)),this.setRTL(Ra(I,"rtl",!1)),this.setValue(O)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,i){return this.trackStrokeThickness=t,this.trackStrokeColor=i,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}};var mA={updateShapes:gA};Object.assign(vh.prototype,mA),k.register("lineProgress",function(e,t,i,a,x,C,E){var O=new vh(this.scene,e,t,i,a,x,C,E);return this.scene.add.existing(O),O}),Z(window,"RexPlugins.UI.LineProgress",vh);var ud=function(e,t,i,a,x){e.setIterations(x).start();var O=a.tl;if(xe(O))if(O.convex){var C=O.x,E=O.y;e.ellipticalArc(C,E,O.x,O.y,180,270,!1)}else{var C=0,E=0;e.ellipticalArc(C,E,O.x,O.y,90,0,!0)}else e.lineTo(0,0);var O=a.tr;if(xe(O))if(O.convex){var C=t-O.x,E=O.y;e.ellipticalArc(C,E,O.x,O.y,270,360,!1)}else{var C=t,E=0;e.ellipticalArc(C,E,O.x,O.y,180,90,!0)}else e.lineTo(t,0);var O=a.br;if(xe(O))if(O.convex){var C=t-O.x,E=i-O.y;e.ellipticalArc(C,E,O.x,O.y,0,90,!1)}else{var C=t,E=i;e.ellipticalArc(C,E,O.x,O.y,270,180,!0)}else e.lineTo(t,i);var O=a.bl;if(xe(O))if(O.convex){var C=O.x,E=i-O.y;e.ellipticalArc(C,E,O.x,O.y,90,180,!1)}else{var C=0,E=i;e.ellipticalArc(C,E,O.x,O.y,360,270,!0)}else e.lineTo(0,i);return e.close(),e},ph=Phaser.Math.RadToDeg,xA=function(e,t,i,a,x){var C=t*x,V=a.tl;if(xe(V)){var E;C>V.x?E=90:E=ph(Math.acos((V.x-C)/V.x));var O=V.x,I=V.y;e.ellipticalArc(O,I,V.x,V.y,180,180+E,!1)}else e.lineTo(0,0);var V=a.tr;if(xe(V)&&C>t-V.x){var E=90-ph(Math.acos((C-(t-V.x))/V.x)),O=t-V.x,I=V.y;e.ellipticalArc(O,I,V.x,V.y,270,270+E,!1)}else e.lineTo(C,0);var V=a.br;if(xe(V)&&C>t-V.x){var E=90-ph(Math.acos((C-(t-V.x))/V.x)),O=t-V.x,I=i-V.y;e.ellipticalArc(O,I,V.x,V.y,90-E,90,!1)}else e.lineTo(C,i);var V=a.bl;if(xe(V)){var E;C>V.x?E=90:E=ph(Math.acos((V.x-C)/V.x));var O=V.x,I=i-V.y;e.ellipticalArc(O,I,V.x,V.y,180-E,180,!1)}else e.lineTo(0,i)},gh=Phaser.Math.RadToDeg,yA=function(e,t,i,a,x){var C=i*x,V=a.tl;if(xe(V)){var E;C>V.y?E=90:E=gh(Math.acos((V.y-C)/V.y));var O=V.x,I=V.y;e.ellipticalArc(O,I,V.x,V.y,270-E,270,!1)}else e.lineTo(0,0);var V=a.tr;if(xe(V)){var E;C>V.y?E=90:E=gh(Math.acos((V.y-C)/V.y));var O=t-V.x,I=V.y;e.ellipticalArc(O,I,V.x,V.y,270,270+E,!1)}else e.lineTo(t,0);var V=a.br;if(xe(V)&&C>i-V.y){var E=90-gh(Math.acos((C-(i-V.y))/V.y)),O=t-V.x,I=i-V.y;e.ellipticalArc(O,I,V.x,V.y,0,0+E,!1)}else e.lineTo(t,C);var V=a.bl;if(xe(V)&&C>i-V.y){var E=90-gh(Math.acos((C-(i-V.y))/V.y)),O=V.x,I=i-V.y;e.ellipticalArc(O,I,V.x,V.y,180-E,180,!1)}else e.lineTo(0,C)},mh=Phaser.Math.RadToDeg,SA=function(e,t,i,a,x){var C=t*x,V=a.tr;if(xe(V)){var E;C>V.x?E=90:E=mh(Math.acos((V.x-C)/V.x));var O=t-V.x,I=V.y;e.ellipticalArc(O,I,V.x,V.y,360-E,360,!1)}else e.lineTo(t,0);var V=a.br;if(xe(V)){var E;C>V.x?E=90:E=mh(Math.acos((V.x-C)/V.x));var O=t-V.x,I=i-V.y;e.ellipticalArc(O,I,V.x,V.y,0,0+E,!1)}else e.lineTo(t,i);var V=a.bl;if(xe(V)&&C>t-V.x){var E=90-mh(Math.acos((C-(t-V.x))/V.x)),O=V.x,I=i-V.y;e.ellipticalArc(O,I,V.x,V.y,90,90+E,!1)}else e.lineTo(t-C,i);var V=a.tl;if(xe(V)&&C>t-V.x){var E=90-mh(Math.acos((C-(t-V.x))/V.x)),O=V.x,I=V.y;e.ellipticalArc(O,I,V.x,V.y,270-E,270,!1)}else e.lineTo(t-C,0)},xh=Phaser.Math.RadToDeg,CA=function(e,t,i,a,x){var C=i*x,V=a.br;if(xe(V)){C>V.y?I=90:I=xh(Math.acos((V.y-C)/V.y));var E=t-V.x,O=i-V.y;e.ellipticalArc(E,O,V.x,V.y,90-I,90,!1)}else e.lineTo(t,i);var V=a.bl;if(xe(V)){C>V.y?I=90:I=xh(Math.acos((V.y-C)/V.y));var E=V.x,O=i-V.y;e.ellipticalArc(E,O,V.x,V.y,90,90+I,!1)}else e.lineTo(0,i);var V=a.tl;if(xe(V)&&C>i-V.y){var I=90-xh(Math.acos((C-(i-V.y))/V.y)),E=V.x,O=V.y;e.ellipticalArc(E,O,V.x,V.y,180,180+I,!1)}else e.lineTo(0,i-C);var V=a.tr;if(xe(V)&&C>i-V.y){var I=90-xh(Math.acos((C-(i-V.y))/V.y)),E=t-V.x,O=V.y;e.ellipticalArc(E,O,V.x,V.y,360-I,360,!1)}else e.lineTo(t,i-C)},TA=function(e,t,i,a,x,C,E,O){if(e.setIterations(O).start(),x===0)return e;if(x===1)return ud(e,t,i,a,O);var I;return C===0?I=E?SA:xA:I=E?CA:yA,I(e,t,i,a,x),e.close(),e},MA=function(){var e=this.width,t=this.height,i=this.rrGeom.cornerRadius,a=this.value,x=this.orientation,C=this.rtl,E=this.iteration+1,O=this.getShape("trackFill");O.fillStyle(this.trackColor),O.isFilled&&ud(O,e,t,i,E);var I=this.getShape("bar");I.fillStyle(this.barColor),I.isFilled&&TA(I,e,t,i,a,x,C,E);var V=this.getShape("trackStroke");V.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),V.isStroked&&ud(V,e,t,i,E)},PA={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},In=function(e){return typeof e=="string"&&(e=PA[e]),e};const Pr=Phaser.Utils.Objects.GetValue,dd=Phaser.Utils.Objects.IsPlainObject;class fd extends an(Ds){constructor(t,i,a,x,C,E,O,I,V){dd(i)?(V=i,i=V.x,a=V.y,x=V.width,C=V.height,E=V.radius,O=V.barColor,I=V.value):dd(x)?(V=x,x=V.width,C=V.height,E=V.radius,O=V.barColor,I=V.value):dd(E)&&(V=E,E=V.radius,O=V.barColor,I=V.value),i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=1),C===void 0&&(C=x),E===void 0&&(E=0),I===void 0&&(I=0),super(t,i,a,x,C,V),this.type="rexRoundRectangleProgress",this.rrGeom=new ru,this.bootProgressBase(V),this.addShape(new Qe().setName("trackFill")).addShape(new Qe().setName("bar")).addShape(new Qe().setName("trackStroke")),this.setTrackColor(Pr(V,"trackColor",void 0)),this.setBarColor(O),this.setTrackStroke(Pr(V,"trackStrokeThickness",2),Pr(V,"trackStrokeColor",void 0)),this.setOrientation(Pr(V,"orientation",0)),this.setRTL(Pr(V,"rtl",!1)),this.setRadius(E),this.setIteration(Pr(E,"iteration",void 0)),this.setValue(I)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,i){return this.trackStrokeThickness=t,this.trackStrokeColor=i,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get orientation(){return this._orientation}set orientation(t){t=In(t),this.dirty=this.dirty||this._orientation!=t,this._orientation=t}setOrientation(t){return this.orientation=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get radius(){return this.rrGeom.radius}set radius(t){this.rrGeom.setRadius(t),this.dirty=!0}get radiusTL(){return this.rrGeom.radiusTL}set radiusTL(t){this.rrGeom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.rrGeom.radiusTR}set radiusTR(t){this.rrGeom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.rrGeom.radiusBL}set radiusBL(t){this.rrGeom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.rrGeom.radiusBR}set radiusBR(t){this.rrGeom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.rrGeom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}}var EA={updateShapes:MA};Object.assign(fd.prototype,EA),k.register("roundRectanleProgress",function(e,t,i,a,x,C,E,O){var I=new fd(this.scene,e,t,i,a,x,C,E,O);return this.scene.add.existing(I),I}),Z(window,"RexPlugins.UI.RoundRectangleProgress",fd);var wA=function(e,t){e.save(),e.beginPath();var i=t[0];e.moveTo(i.x,i.y);for(var a=1,x=t.length;a<x;a++)i=t[a],e.lineTo(i.x,i.y);e.closePath(),e.restore()},cd=function(e,t,i,a,x,C,E){E===void 0&&(E="round"),wA(t,i),t.lineJoin=E,a!=null&&(t.fillStyle=a,t.fill()),x!=null&&(t.strokeStyle=x,t.lineWidth=C,t.stroke())},bA=function(){var e=this.skewX,t=this.width-Math.abs(e),i=this.height,a=this.canvas,x=this.context;(this.trackColor||this.trackStrokeColor)&&i0(0,0,t,i,e,this.trackPoints);var C,E;if(this.barColor&&(this.rtl?(C=t*(1-this.value),E=t):(C=0,E=t*this.value),i0(C,0,E,i,e,this.barPoints)),this.trackColor&&(x.save(),cd(a,x,this.trackPoints,this.trackColor),x.restore()),this.barColor){x.save();var O;if(this.barColor2){var I;if(this.isHorizontalGradient){var V=i/2;I=x.createLinearGradient(C,V,E,V)}else{var X=t/2;I=x.createLinearGradient(X,0,X,i)}I.addColorStop(0,this.rtl?this.barColor:this.barColor2),I.addColorStop(1,this.rtl?this.barColor2:this.barColor),O=I}else O=this.barColor;cd(a,x,this.barPoints,O),x.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(x.save(),cd(a,x,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),x.restore())},i0=function(e,t,i,a,x,C){C===void 0&&(C=[]),C.length=4;for(var E=0;E<4;E++)C[E]||(C[E]={});var O;return x>=0?(O=C[0],O.x=e+x,O.y=t,O=C[1],O.x=i+x,O.y=t,O=C[2],O.x=i,O.y=a,O=C[3],O.x=e,O.y=a):(O=C[0],O.x=e,O.y=t,O=C[1],O.x=i,O.y=t,O=C[2],O.x=i-x,O.y=a,O=C[3],O.x=e-x,O.y=a),C};const Ie=Phaser.Utils.Objects.GetValue,vd=Phaser.Utils.Objects.IsPlainObject;class pd extends an(Zs){constructor(t,i,a,x,C,E,O,I){vd(i)?(I=i,i=Ie(I,"x",0),a=Ie(I,"y",0),x=Ie(I,"width",2),C=Ie(I,"height",2),E=Ie(I,"barColor",void 0),O=Ie(I,"value",0)):vd(x)?(I=x,x=Ie(I,"width",2),C=Ie(I,"height",2),E=Ie(I,"barColor",void 0),O=Ie(I,"value",0)):vd(E)&&(I=E,E=Ie(I,"barColor",void 0),O=Ie(I,"value",0));var V=Ie(I,"resolution",1);super(t,i,a,x,C,V),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(I),this.setTrackColor(Ie(I,"trackColor",void 0)),this.setBarColor(E,Ie(I,"barColor2",void 0),Ie(I,"isHorizontalGradient",void 0)),this.setTrackStroke(Ie(I,"trackStrokeThickness",2),Ie(I,"trackStrokeColor",void 0)),this.setSkewX(Ie(I,"skewX",0)),this.setRTL(Ie(I,"rtl",!1)),this.setValue(O)}get trackColor(){return this._trackColor}set trackColor(t){t=Ut(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=Ut(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,i){return this.trackStrokeThickness=t,this.trackStrokeColor=i,this}get barColor(){return this._barColor}set barColor(t){t=Ut(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=Ut(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,i,a){return a===void 0&&(a=!0),this.barColor=t,this.barColor2=i,this.isHorizontalGradient=a,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return super.updateTexture(function(){this.clear(),bA.call(this)},this),this}}k.register("circularProgressCanvas",function(e,t,i,a,x,C,E){var O=new pd(this.scene,e,t,i,a,x,C,E);return this.scene.add.existing(O),O}),Z(window,"RexPlugins.UI.LineProgressCanvas",pd),Phaser.Math.Wrap;const Er=Phaser.Math.Linear;var RA=function(){var e=this.getShape("triangle"),t=this.padding,i=this.width-t.right,a=0+t.left,x=this.height-t.bottom,C=0+t.top,E=(a+i)/2,O=(C+x)/2,I={0:{a:{x:a,y:C},b:{x:i,y:O},c:{x:a,y:x}},1:{a:{x:a,y:C},b:{x:E,y:x},c:{x:i,y:C}},2:{a:{x:i,y:C},b:{x:a,y:O},c:{x:i,y:x}},3:{a:{x:a,y:x},b:{x:E,y:C},c:{x:i,y:x}}},V,X,q,st,it,at;if(this.previousDirection===void 0){var ut=I[this.direction],lt=ut.a,ft=ut.b,pt=ut.c;V=lt.x,X=lt.y,q=ft.x,st=ft.y,it=pt.x,at=pt.y}else{var ct=I[this.previousDirection],xt=I[this.direction],Mt=this.easeDirectionProgress;V=Er(ct.a.x,xt.a.x,Mt),X=Er(ct.a.y,xt.a.y,Mt),q=Er(ct.b.x,xt.b.x,Mt),st=Er(ct.b.y,xt.b.y,Mt),it=Er(ct.c.x,xt.c.x,Mt),at=Er(ct.c.y,xt.c.y,Mt)}e.startAt(V,X).lineTo(q,st).lineTo(it,at),this.arrowOnly?e.end():e.close()};const OA=Phaser.Math.DegToRad,yh=OA(120);var AA=function(t){var t=this.getShape("triangle"),i=this.width/2,a=this.height/2,x=Math.min(i,a)*this.radius,C=this.verticeRotation;t.startAt(i+x*Math.cos(C+yh),a+x*Math.sin(C+yh)).lineTo(i+x*Math.cos(C),a+x*Math.sin(C)).lineTo(i+x*Math.cos(C-yh),a+x*Math.sin(C-yh)),this.arrowOnly?t.end():t.close()},LA={buildShapes(){this.addShape(new Qe().setName("triangle"))},updateShapes(){var e=this.getShape("triangle");this.arrowOnly?e.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):e.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?RA.call(this):AA.call(this)}},DA={setEaseDuration(e){return e===void 0&&(e=0),this.easeDuration=e,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new $i(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}};const wr=Phaser.Utils.Objects.GetValue,FA=Phaser.Utils.Objects.IsPlainObject,BA=Phaser.Math.DegToRad,IA=Phaser.Math.RadToDeg;class Oa extends Ds{constructor(t,i,a,x,C,E,O){var I,V,X,q,st,it,at,ut;if(FA(i)){var lt=i;i=lt.x,a=lt.y,x=lt.width,C=lt.height,E=lt.color,O=lt.alpha,I=lt.strokeColor,V=lt.strokeAlpha,X=lt.strokeWidth,q=lt.arrowOnly,st=lt.direction,it=lt.easeDuration,at=lt.padding,ut=lt.radius}i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=1),C===void 0&&(C=x),q===void 0&&(q=!1),st===void 0&&(st=0),it===void 0&&(it=0),at===void 0&&(at=0),ut===void 0&&(ut=void 0),super(t,i,a,x,C),this.type="rexTriangle",this.setFillStyle(E,O),I!==void 0&&X===void 0&&(X=2),this.setStrokeStyle(X,I,V),this.setArrowOnly(q),this.setDirection(st,it),this.setPadding(at),this.setRadius(ut),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=kA(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,i){return i!==void 0&&this.setEaseDuration(i),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,i,a,x){if(typeof t=="object"){var C=t,E=wr(C,"x",null);E!==null?(t=E,a=E):(t=wr(C,"left",0),a=wr(C,"right",t));var O=wr(C,"y",null);O!==null?(i=O,x=O):(i=wr(C,"top",0),x=wr(C,"bottom",i))}else t===void 0&&(t=0),i===void 0&&(i=t),a===void 0&&(a=t),x===void 0&&(x=i);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=i||this.padding.right!=a||this.padding.bottom!=x,this.padding.left=t,this.padding.top=i,this.padding.right=a,this.padding.bottom=x,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return IA(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=BA(t)}setVerticeAngle(t){return this.verticeAngle=t,this}}const GA={right:0,down:1,left:2,up:3};var kA=function(e){return typeof e=="string"&&(e=GA[e]),e=e%4,e};Object.assign(Oa.prototype,LA,DA),k.register("triangle",function(e,t,i,a,x,C){var E=new Oa(this.scene,e,t,i,a,x,C);return this.scene.add.existing(E),E}),Z(window,"RexPlugins.UI.Triangle",Oa),Et();const NA=Phaser.GameObjects.Zone,VA=Phaser.Utils.Array.Add,zA=Phaser.Utils.Array.Remove;let Aa=class extends NA{constructor(t,i,a,x,C){i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=1),C===void 0&&(C=1),super(t,i,a,x,C),this.children=[]}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var i,a=this.children.length-1;a>=0;a--)i=this.children[a],!i.parentContainer&&!i.displayList&&i.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var i=this;return VA(this.children,t,0,function(a){a.once("destroy",i.onChildDestroy,i)},this),this}remove(t,i){var a=this;return zA(this.children,t,function(x){x.off("destroy",a.onChildDestroy,a),i&&x.destroy()}),this}onChildDestroy(t,i){this.remove(t,!1)}clear(t){for(var i=this,a,x=0,C=this.children.length;x<C;x++)a=this.children[x],a.off("destroy",i.onChildDestroy,i),t&&a.destroy();return this.children.length=0,this}};const s0=Phaser.GameObjects.Components;Phaser.Class.mixin(Aa,[s0.Alpha,s0.Flip]);var Ci=function(e,t){var i;if(t===void 0)e.hasOwnProperty("rexContainer")&&(i=e.rexContainer.parent);else for(i=Ci(e);i&&i.name!==t;)i=Ci(i);return i},n0=function(e){for(var t=Ci(e);t;)e=t,t=Ci(t);return e};const YA=Phaser.Math.DegToRad,WA=Phaser.Math.RadToDeg;var Jt=function(e){if(!e.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,syncScrollFactor:!0,syncCameraFilter:!0,syncDisplayList:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return WA(this.rotation)},set:function(i){this.rotation=YA(i)}}),Object.defineProperty(t,"displayWidth",{get:function(){return e.width*this.scaleX},set:function(i){this.scaleX=i/e.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return e.height*this.scaleY},set:function(i){this.scaleY=i/e.height}}),e.rexContainer=t}return e.rexContainer},XA={setParent(e,t){t===void 0&&(t=this);var i=Jt(e);return t?(i.parent=t,i.self=e):(i.parent=null,i.self=null),this},getParent(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),Ci(e,t)},getTopmostParent(e){return e===void 0&&(e=this),n0(e)}};const Gn=Phaser.Utils.Objects.GetValue,r0=Aa.prototype.add;var a0=function(e,t){this.setParent(e);var i=Jt(e);return o0(i,t),this.resetChildState(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e).updateCameraFilter(e),r0.call(this,e),h0.call(this,e,i),this},gd=function(e,t){this.setParent(e);var i=Jt(e);return o0(i,t),i.x=e.x,i.y=e.y,i.rotation=e.rotation,i.scaleX=e.scaleX,i.scaleY=e.scaleY,i.alpha=e.alpha,i.visible=e.visible,i.active=e.active,this.updateChildPosition(e).updateChildAlpha(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e),r0.call(this,e),h0.call(this,e,i),this},o0=function(e,t){t===void 0&&(t=!0),typeof t=="boolean"?(e.syncPosition=t,e.syncRotation=t,e.syncScale=t,e.syncAlpha=t,e.syncScrollFactor=t,e.syncCameraFilter=t,e.syncDisplayList=t):(e.syncPosition=Gn(t,"syncPosition",!0),e.syncRotation=Gn(t,"syncRotation",!0),e.syncScale=Gn(t,"syncScale",!0),e.syncAlpha=Gn(t,"syncAlpha",!0),e.syncScrollFactor=Gn(t,"syncScrollFactor",!0),e.syncCameraFilter=Gn(t,"syncCameraFilter",!0),e.syncDisplayList=Gn(t,"syncDisplayList",!0))},h0=function(e,t){this.addToParentContainer(e),t.syncDisplayList&&this.addToPatentLayer(e),this.addToRenderLayer(e)},UA={add(e){return Array.isArray(e)?this.addMultiple(e):a0.call(this,e),this},pin(e,t){return Array.isArray(e)?this.addMultiple(e,t):a0.call(this,e,t),this},addMultiple(e){for(var t=Array.from(arguments),i=0,a=e.length;i<a;i++)t[0]=e[i],this.add.apply(this,t);return this},addLocal(e){return Array.isArray(e)?this.addMultiple(e):gd.call(this,e),this},pinLocal(e,t){return Array.isArray(e)?this.addMultiple(e,t):gd.call(this,e,t),this},addLocalMultiple(e){for(var t=0,i=e.length;t<i;t++)gd.call(this,e[t]);return this}};const l0=Aa.prototype.remove,HA=Aa.prototype.clear;var $A={remove(e,t){return Ci(e)!==this?this:(this.setParent(e,null),t||this.removeFromRenderLayer(e),l0.call(this,e,t),this)},unpin(e,t){return Ci(e)!==this?this:(this.setParent(e,null),t||this.removeFromRenderLayer(e),l0.call(this,e,t),this)},clear(e){for(var t=this.children,i=0,a=t.length;i<a;i++){var x=t[i];this.setParent(x,null),e||this.removeFromRenderLayer(x)}return HA.call(this,e),this}},KA={getLocalState(e){return Jt(e)},resetChildState(e){return this.resetChildPositionState(e).resetChildVisibleState(e).resetChildAlphaState(e).resetChildActiveState(e),this},resetChildrenState(e){for(var t=0,i=e.length;t<i;t++)this.resetChildState(e[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},ZA={worldToLocal(e){e.x-=this.x,e.y-=this.y;var t=Math.cos(-this.rotation),i=Math.sin(-this.rotation),a=e.x,x=e.y;return e.x=a*t-x*i,e.y=a*i+x*t,e.x/=this.scaleX,e.y/=this.scaleY,e},localToWorld(e){e.x*=this.scaleX,e.y*=this.scaleY;var t=Math.cos(this.rotation),i=Math.sin(this.rotation),a=e.x,x=e.y;return e.x=a*t-x*i,e.y=a*i+x*t,e.x+=this.x,e.y+=this.y,e}},La=function(e,t){return e===t?1:e/t},JA={updateChildPosition(e){e.isRexContainerLite&&(e.syncChildrenEnable=!1);var t=Jt(e),i=t.parent;return t.syncPosition&&(e.x=t.x,e.y=t.y,i.localToWorld(e)),t.syncRotation&&(e.rotation=t.rotation+i.rotation),t.syncScale&&(e.scaleX=t.scaleX*i.scaleX,e.scaleY=t.scaleY*i.scaleY),e.isRexContainerLite&&(e.syncChildrenEnable=!0,e.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(e){var t=Jt(e),i=t.parent;return t.x=e.x,t.y=e.y,i.worldToLocal(t),t.scaleX=La(e.scaleX,i.scaleX),t.scaleY=La(e.scaleY,i.scaleY),t.rotation=e.rotation-i.rotation,this},setChildPosition(e,t,i){return e.x=t,e.y=i,this.resetChildPositionState(e),this},setChildLocalPosition(e,t,i){var a=Jt(e);return a.x=t,a.y=i,this.updateChildPosition(e),this},resetLocalPositionState(){var e=Jt(this).parent;return e&&e.resetChildPositionState(this),this},getChildLocalX(e){var t=Jt(e);return t.x},getChildLocalY(e){var t=Jt(e);return t.y}};const QA=Phaser.Math.DegToRad;var jA={updateChildRotation(e){var t=Jt(e),i=t.parent;return t.syncRotation&&(e.rotation=i.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(e){var t=Jt(e),i=t.parent;return t.rotation=e.rotation-i.rotation,this},setChildRotation(e,t){return e.rotation=t,this.resetChildRotationState(e),this},setChildAngle(e,t){return e.angle=t,this.resetChildRotationState(e),this},setChildLocalRotation(e,t){var i=Jt(e);return i.rotation=t,this.updateChildRotation(e),this},setChildLocalAngle(e,t){var i=Jt(e);return i.rotation=QA(t),this.updateChildRotation(e),this},resetLocalRotationState(){var e=Jt(this).parent;return e&&e.resetChildRotationState(this),this},getChildLocalRotation(e){var t=Jt(e);return t.rotation}},qA={updateChildScale(e){var t=Jt(e),i=t.parent;return t.syncScale&&(e.scaleX=i.scaleX*t.scaleX,e.scaleY=i.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(e){var t=Jt(e),i=t.parent;return t.scaleX=La(e.scaleX,i.scaleX),t.scaleY=La(e.scaleY,i.scaleY),this},setChildScale(e,t,i){return i===void 0&&(i=t),e.scaleX=t,e.scaleY=i,this.resetChildScaleState(e),this},setChildLocalScale(e,t,i){i===void 0&&(i=t);var a=Jt(e);return a.scaleX=t,a.scaleY=i,this.updateChildScale(e),this},setChildDisplaySize(e,t,i){return e.setDisplaySize(t,i),this.resetChildScaleState(e),this},resetLocalScaleState(){var e=Jt(this).parent;return e&&e.resetChildScaleState(this),this},getChildLocalScaleX(e){var t=Jt(e);return t.scaleX},getChildLocalScaleY(e){var t=Jt(e);return t.scaleY}},_A={updateChildVisible(e){var t=Jt(e),i=t.parent,a=t.hasOwnProperty("maskVisible")?t.maskVisible:!0,x=i?i.visible:!0;return e.visible=x&&t.visible&&a,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(e){var t=Jt(e);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=e.visible,this},setChildVisible(e,t){return this.setChildLocalVisible(e,t),this},setChildLocalVisible(e,t){t===void 0&&(t=!0);var i=Jt(e);return i.visible=t,this.updateChildVisible(e),this},setChildMaskVisible(e,t){t===void 0&&(t=!0);var i=Jt(e);return i.maskVisible=t,this.updateChildVisible(e),this},resetLocalVisibleState(){var e=Jt(this).parent;return e&&e.resetChildVisibleState(this),this},getChildLocalVisible(e){var t=Jt(e);return t.visible}},tL={updateChildAlpha(e){var t=Jt(e),i=t.parent;return t.syncAlpha&&(e.alpha=i.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(e){var t=Jt(e),i=t.parent;return t.alpha=La(e.alpha,i.alpha),this},setChildAlpha(e,t){return e.alpha=t,this.resetChildAlphaState(e),this},setChildLocalAlpha(e,t){var i=Jt(e);return i.alpha=t,this.updateChildAlpha(e),this},resetLocalAlphaState(){var e=Jt(this).parent;return e&&e.resetChildAlphaState(this),this},getChildLocalAlpha(e){var t=Jt(e);return t.alpha}},eL={updateChildActive(e){var t=Jt(e),i=t.parent;return e.active=i.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(e){var t=Jt(e);return t.active=e.active,this},setChildActive(e,t){return e.active=t,this.resetChildActiveState(e),this},setChildLocalActive(e,t){t===void 0&&(t=!0);var i=Jt(e);return i.active=t,this.updateChildActive(e),this},resetLocalActiveState(){var e=Jt(this).parent;return e&&e.resetChildActiveState(this),this},getChildLocalActive(e){var t=Jt(e);return t.active}},iL={updateChildScrollFactor(e){var t=Jt(e),i=t.parent;return t.syncScrollFactor&&(e.scrollFactorX=i.scrollFactorX,e.scrollFactorY=i.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},sL={updateCameraFilter(e){var t=Jt(e),i=t.parent;return t.syncCameraFilter&&(e.cameraFilter=i.cameraFilter),this},syncCameraFilter(){return this.syncChildrenEnable&&this.children.forEach(this.updateCameraFilter,this),this}},nL={updateChildMask(e){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==e&&(e.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(e){return this.mask=e,this},clearMask(e){e===void 0&&(e=!1);var t=this;return this._mask=null,this.setChildMaskVisible(this),this.children.forEach(function(i){i.clearMask&&i.clearMask(!1),i.hasOwnProperty("isRexContainerLite")||t.setChildMaskVisible(i)}),e&&this.mask&&this.mask.destroy(),this}},Sh=function(e){return e.filter(function(t){if(t.displayList)return!0;if(t.parentContainer)return!0})},rL={setDepth(e,t){if(this.depth=e,!t&&this.children)for(var i=this.getAllChildren(),a=0,x=i.length;a<x;a++)i[a].depth=e;return this},swapDepth(e){var t=this.depth,i=e.depth;return this.setDepth(i),e.setDepth(t),this},incDepth(e){if(this.depth+=e,this.children)for(var t=this.getAllChildren(),i=0,a=t.length;i<a;i++)t[i].depth+=e;return this},bringToTop(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);Li(t,!1);for(var i=0,a=t.length;i<a;i++){var x=t[i];e.exists(x)&&e.bringToTop(x)}return this},bringMeToTop(){return this.bringToTop()},sendToBack(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);Li(t,!0);for(var i=0,a=t.length;i<a;i++){var x=t[i];e.exists(x)&&e.sendToBack(x)}return this},sendMeToBack(){return this.sendToBack()},moveDepthBelow(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var i=this.getAllChildren([this]);Li(i,!1);for(var a=0,x=i.length;a<x;a++){var C=i[a];if(t.exists(C)){t.moveBelow(e,C);break}}return this},moveMyDepthBelow(e){return this.moveDepthBelow(e)},moveDepthAbove(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var i=this.getAllChildren([this]);Li(i,!0);for(var a=0,x=i.length;a<x;a++){var C=i[a];if(t.exists(C)){t.moveAbove(e,C);break}}return this},moveMyDepthAbove(e){return this.moveDepthAbove(e)},bringChildToTop(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=Sh(t),t=Li(t,!1)):t=[e];var i=this.getAllChildren([this]);i=Sh(i),i=Li(i,!1);for(var a=i[i.length-1],x=0,C=t.length;x<C;x++){var E=t[x];a!==E&&(E!==this&&a.displayList!==E.displayList||(a.displayList.moveAbove(E,a),a=E))}return this},sendChildToBack(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=Sh(t),t=Li(t,!1)):t=[e];var i=this.getAllChildren([this]);i=Sh(i),i=Li(i,!1);for(var a=i[0],x=t.length-1;x>=0;x--){var C=t[x];a!==C&&(C!==this&&a.displayList!==C.displayList||(a.displayList.moveBelow(C,a),a=C))}return this}},u0=function(e,t){var i=t(e);if(!i&&e.isRexContainerLite)for(var a=e.children,x=0,C=a.length;x<C;x++)u0(a[x],t)},md=function(e,t){for(var i=[e];i.length>0;){var a=i.shift(),x=t(a);!x&&a.isRexContainerLite&&i.push(...a.children)}};const kn=Phaser.Utils.Array;var aL={getChildren(e){if(!e)e=this.children;else for(var t=0,i=this.children.length;t<i;t++)e.push(this.children[t]);return e},getAllChildren(e){e===void 0&&(e=[]);var t=this;return md(t,function(i){i!==t&&e.push(i)}),e},getAllVisibleChildren(e){e===void 0&&(e=[]);var t=this;return md(t,function(i){if(i!==t){if(!i.visible)return!0;e.push(i)}}),e},bfs(e,t){return t===void 0&&(t=this),md(t,e),this},dfs(e,t){return t===void 0&&(t=this),u0(t,e),this},contains(e){var t=Ci(e);return t?t===this?!0:this.contains(t):!1},getByName(e,t){if(t){for(var i=[this],a,x;i.length;){a=i.shift();for(var C=0,E=a.children.length;C<E;C++){if(x=a.children[C],x.name===e)return x;x.isRexContainerLite&&i.push(x)}}return null}else return kn.GetFirst(this.children,"name",e)},getRandom(e,t){return kn.GetRandom(this.children,e,t)},getFirst(e,t,i,a){return kn.GetFirstElement(this.children,e,t,i,a)},getAll(e,t,i,a){return kn.GetAll(this.children,e,t,i,a)},count(e,t,i,a){return kn.CountAllMatching(this.children,e,t,i,a)},swap(e,t){return kn.Swap(this.children,e,t),this},setAll(e,t,i,a){return kn.SetAll(this.children,e,t,i,a),this}},d0=function(e){for(var t=[],i=0,a=e.length;i<a;i++){var x=e[i];x.hasOwnProperty("rexContainer")&&t.push(x.rexContainer)}return t},oL=function(e){for(var t=0,i=e.length;t<i;t++){var a=e[t].scene;if(a)return a}return null},f0=function(e,t,i){if(!i.parent){e.remove();return}var a=i.parent,x=i.self;switch(t){case"x":case"y":a.updateChildPosition(x);break;case"angle":case"rotation":a.updateChildRotation(x);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":a.updateChildScale(x);break;case"alpha":a.updateChildAlpha(x);break;default:a.updateChildPosition(x),a.updateChildRotation(x),a.updateChildScale(x),a.updateChildAlpha(x);break}},hL={tweenChild(e){var t=e.targets;Array.isArray(t)||(t=[t]);var i=this.scene||oL(t);if(i){e.targets=d0(t);var a=i.tweens.add(e);return a.on("update",f0),a}},tweenSelf(e){return e.targets=[this],this.tweenChild(e)},createTweenChildConfig(e){var t=e.targets;t&&(Array.isArray(t)||(t=[t]),e.targets=d0(t));var i=e.onUpdate;return e.onUpdate=function(a,x){i&&i(a,x),f0(a,void 0,x)},e},tween(e){var t=this.scene;return e.targets||(e.targets=this),t.tweens.add(e)}};const lL=Phaser.GameObjects.Container;var uL=function(e){return e instanceof lL},c0=function(e){var t=e.getAllChildren([e]);return t=t.filter(function(i){return!!i.displayList||!!i.parentContainer}),t},v0=function(e){var t=c0(this);t.indexOf(this)===-1&&t.push(this),Li(t),e.add(t)},p0=function(e,t,i){if(this.scene){var a=c0(this);Li(a,t),e.remove(a),i&&a.forEach(function(x){x.addToDisplayList()})}},dL={addToContainer(e){return uL(e)?(this._setParentContainerFlag=!0,v0.call(this,e),this._setParentContainerFlag=!1,this):this},addToLayer(e){return fa(e)?(v0.call(this,e),this):this},removeFromContainer(){return this.parentContainer?(this._setParentContainerFlag=!0,p0.call(this,this.parentContainer,!0,!1),this._setParentContainerFlag=!1,this):this},removeFromLayer(e){return e===void 0&&(e=!0),fa(this.displayList)?(p0.call(this,this.displayList,!1,e),this):this},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var e=this.getParent();e;){var t=e.parentContainer;if(t)return t;e=e.getParent()}return null},addToParentContainer(e){if(!e.displayList)return this;var t=this.getParentContainer();return t?(e.isRexContainerLite?e.addToContainer(t):t.add(e),this):this},addToPatentLayer(e){if(!e.displayList)return this;var t=this.displayList;return t===e.displayList?this:(fa(t)&&(e.isRexContainerLite?e.addToLayer(t):t.add(e)),this)}},fL={hasLayer(){return!!this.privateRenderLayer},enableLayer(){if(this.hasLayer())return this;var e=this.scene.add.layer();return this.moveDepthBelow(e),this.addToLayer(e),this.privateRenderLayer=e,this},getLayer(){return this.hasLayer()||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.hasLayer())return this.privateRenderLayer;for(var e=this.getParent();e;){var t=e.privateRenderLayer;if(t)return t;e=e.getParent()}return null},addToRenderLayer(e){if(!e.displayList)return this;var t=this.getRenderLayer();if(!t)return this;if(t===e.displayList)return this;e.isRexContainerLite?e.addToLayer(t):t.add(e);var i=Jt(e);return i.layer=t,this},removeFromRenderLayer(e){var t=Jt(e),i=t.layer;return i?(e.isRexContainerLite?e.removeFromLayer(!0):i.remove(e),t.layer=null,this):this}};const g0=Phaser.Geom.Rectangle,cL=Phaser.Geom.Rectangle.Union;var vL=function(e,t){t===void 0?t=new g0:t===!0&&(xd===void 0&&(xd=new g0),t=xd),t.setTo(0,0,0,0);for(var i,a=!0,x=0,C=e.length;x<C;x++)if(i=e[x],!!i.getBounds){var E=Fu(i,!0);a?(t.setTo(E.x,E.y,E.width,E.height),a=!1):cL(E,t,t)}return t},xd,Nn=Phaser.Utils.Objects.GetValue,yd=function(e){if(e){var t=e.gameObjects,i=e.renderTexture,a=e.saveTexture,x=Nn(e,"x",void 0),C=Nn(e,"y",void 0),E=Nn(e,"width",void 0),O=Nn(e,"height",void 0),I=Nn(e,"originX",0),V=Nn(e,"originY",0),X=Nn(e,"padding",0),q,st;if(E===void 0||O===void 0||x===void 0||C===void 0){var it=vL(t,!0),at=x!==void 0&&C!==void 0;at?(E=Math.max(x-it.left,it.right-x)*2,O=Math.max(C-it.top,it.bottom-C)*2,I=.5,V=.5):(x=it.x,C=it.y,E=it.width,O=it.height,I=0,V=0),q=it.x,st=it.y}else q=x+(0-I)*E,st=C+(0-V)*O;q-=X,st-=X,E+=X*2,O+=X*2;var ut=t[0].scene,lt=ut.sys.textures;return a&&!i&&(i=lt.addDynamicTexture(a,E,O)),i||(i=ut.add.renderTexture(0,0,E,O)),i.setPosition&&i.setPosition(x,C),(i.width!==E||i.height!==O)&&i.setSize(E,O),i.setOrigin&&i.setOrigin(I,V),i.camera.setScroll(q,st),t=Li(Hi(t)),i.draw(t),a&&(gi(i)?i.saveTexture(a):i.key!==a&&lt.renameTexture(i.key,key)),i}},pL={snapshot(e){var t=this.scaleX,i=this.scaleY,a=t===1&&i===1;a||this.setScale(1),e===void 0&&(e={}),e.gameObjects=this.getAllVisibleChildren(),e.x=this.x,e.y=this.y,e.originX=this.originX,e.originY=this.originY;var x=yd(e),C=!!x.scene;return a||(this.setScale(t,i),C&&x.setScale(t,i)),C?x:this}};const m0=Phaser.Utils.Objects.GetValue;var gL=function(e,t){var i=m0(t,"drawContainer",!0),a=m0(t,"children");return a===void 0&&(a=this.getAllVisibleChildren([this])),i||(a=a.filter(function(x){return!x.isRexContainerLite})),mp(a,e,t),this};const mL=Phaser.Math.RotateAround;var xL=function(e,t,i){i===void 0&&(i=t);var a={x:(t-e.originX)*e.displayWidth,y:(i-e.originY)*e.displayHeight};return mL(a,0,0,e.rotation),e.originX=t,e.originY=i,e.x=e.x+a.x,e.y=e.y+a.y,e},yL=function(e,t){this.syncChildrenEnable=!1,xL(this,e,t),this.syncChildrenEnable=!0;for(var i=this.getAllChildren(),a=0,x=i.length;a<x;a++)this.resetChildPositionState(i[a]);return this},x0={changeOrigin:yL,drawBounds:gL};Object.assign(x0,XA,UA,$A,KA,ZA,JA,jA,qA,_A,tL,eL,iL,sL,nL,rL,aL,hL,dL,fL,pL);class Ti extends Aa{constructor(t,i,a,x,C,E){Array.isArray(x)&&(E=x,x=void 0,C=void 0),super(t,i,a,x,C),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this._cameraFilter=0,this.privateRenderLayer=void 0,E&&this.add(E)}destroy(t){!this.scene||this.ignoreDestroy||(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&this.privateRenderLayer.scene&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,i){return this.setSize(t,i),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get cameraFilter(){return this._cameraFilter}set cameraFilter(t){this._cameraFilter!==t&&(this._cameraFilter=t,this.syncCameraFilter())}get list(){return this.children}static GetParent(t){return Ci(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=Ci(this);return t?t.setParentContainerFlag:!1}}Object.assign(Ti.prototype,x0);var Ch=function(e){return e.hasOwnProperty("rexSizer")||(e.rexSizer={}),e.rexSizer};function SL(e){return e===void 0&&(e=this),Ch(e)}var CL=function(e){var t=Ch(e);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},TL=function(e){return e===void 0&&(e=cr(this.scene)),this.left=Math.max(this.left,e.left),this.right=Math.min(this.right,e.right),this.top=Math.max(this.top,e.top),this.bottom=Math.min(this.bottom,e.bottom),this};const Oe=Phaser.Display.Align;var br={center:Oe.CENTER,left:Oe.LEFT_CENTER,right:Oe.RIGHT_CENTER,top:Oe.TOP_CENTER,bottom:Oe.BOTTOM_CENTER,"left-top":Oe.TOP_LEFT,"top-left":Oe.TOP_LEFT,"left-center":Oe.LEFT_CENTER,"center-left":Oe.LEFT_CENTER,"left-bottom":Oe.BOTTOM_LEFT,"bottom-left":Oe.BOTTOM_LEFT,"center-top":Oe.TOP_CENTER,"top-center":Oe.TOP_CENTER,"center-center":Oe.CENTER,"center-bottom":Oe.BOTTOM_CENTER,"bottom-center":Oe.BOTTOM_CENTER,"right-top":Oe.TOP_RIGHT,"top-right":Oe.TOP_RIGHT,"right-center":Oe.RIGHT_CENTER,"center-right":Oe.RIGHT_CENTER,"right-bottom":Oe.BOTTOM_RIGHT,"bottom-right":Oe.BOTTOM_RIGHT},Sd=new Phaser.GameObjects.Zone({sys:{queueDepthSort:r,events:{once:r}}},0,0,1,1);Sd.setOrigin(0);var Bs={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_CENTER:4,CENTER:6,RIGHT_CENTER:8,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},Cd=function(e){var t=re(e);return e.y+t-t*e.originY},Td=function(e){var t=ne(e);return e.x-t*e.originX+t*.5},Md=function(e,t){var i=re(e);return e.y=t-i+i*e.originY,e},Pd=function(e,t){var i=ne(e),a=i*e.originX;return e.x=t+a-i*.5,e},ML=function(e,t,i,a){return i===void 0&&(i=0),a===void 0&&(a=0),Pd(e,Td(t)+i),Md(e,Cd(t)+a),e},Ed=function(e){var t=ne(e);return e.x-t*e.originX},wd=function(e,t){var i=ne(e);return e.x=t+i*e.originX,e},PL=function(e,t,i,a){return i===void 0&&(i=0),a===void 0&&(a=0),wd(e,Ed(t)-i),Md(e,Cd(t)+a),e},bd=function(e){var t=ne(e);return e.x+t-t*e.originX},Rd=function(e,t){var i=ne(e);return e.x=t-i+i*e.originX,e},EL=function(e,t,i,a){return i===void 0&&(i=0),a===void 0&&(a=0),Rd(e,bd(t)+i),Md(e,Cd(t)+a),e},Od=function(e,t){var i=re(e),a=i*e.originY;return e.y=t+a-i*.5,e},wL=function(e,t,i){return Pd(e,t),Od(e,i)},Ad=function(e){var t=re(e);return e.y-t*e.originY+t*.5},bL=function(e,t,i,a){return i===void 0&&(i=0),a===void 0&&(a=0),wL(e,Td(t)+i,Ad(t)+a),e},RL=function(e,t,i,a){return i===void 0&&(i=0),a===void 0&&(a=0),wd(e,Ed(t)-i),Od(e,Ad(t)+a),e},OL=function(e,t,i,a){return i===void 0&&(i=0),a===void 0&&(a=0),Rd(e,bd(t)+i),Od(e,Ad(t)+a),e},Ld=function(e){var t=re(e);return e.y-t*e.originY},Dd=function(e,t){var i=re(e);return e.y=t+i*e.originY,e},AL=function(e,t,i,a){return i===void 0&&(i=0),a===void 0&&(a=0),Pd(e,Td(t)+i),Dd(e,Ld(t)-a),e},LL=function(e,t,i,a){return i===void 0&&(i=0),a===void 0&&(a=0),wd(e,Ed(t)-i),Dd(e,Ld(t)-a),e},DL=function(e,t,i,a){return i===void 0&&(i=0),a===void 0&&(a=0),Rd(e,bd(t)+i),Dd(e,Ld(t)-a),e},ls=[];ls[Bs.BOTTOM_CENTER]=ML,ls[Bs.BOTTOM_LEFT]=PL,ls[Bs.BOTTOM_RIGHT]=EL,ls[Bs.CENTER]=bL,ls[Bs.LEFT_CENTER]=RL,ls[Bs.RIGHT_CENTER]=OL,ls[Bs.TOP_CENTER]=AL,ls[Bs.TOP_LEFT]=LL,ls[Bs.TOP_RIGHT]=DL;var y0=function(e,t,i,a,x){return ls[i](e,t,a,x)},Da=function(e,t,i,a,x,C){Sd.setPosition(t,i).setSize(a,x),y0(e,Sd,C)};const Rr=Phaser.Utils.Objects.GetValue,FL=Phaser.GameObjects.Group,BL=Phaser.GameObjects.Container;var IL=function(e,t){var i=e.scene,a,x,C,E,O;if(typeof t=="number")a=t;else{a=Rr(t,"color"),x=Rr(t,"lineWidth");var I=Rr(t,"name",!1);I&&(C=Rr(I,"createTextCallback",GL),E=Rr(I,"createTextCallbackScope",void 0),O=Rr(I,"align","left-top"),typeof O=="string"&&(O=br[O]))}if(a===void 0&&(a=16777215),x===void 0&&(x=1),C&&!e.children){e.children=new FL(i),e.once("destroy",function(ut,lt){ut.children.destroy(!lt),ut.children=void 0});var V=e.clear.bind(e);e.clear=function(){V(),e.children.clear(!1,!0)}}var X=this.getAllShownChildren([this]);S0(X,X);for(var q,st,it=0,at=X.length;it<at;it++){if(q=X[it],q.getBounds||q.width!==void 0&&q.height!==void 0)Vn=Fu(q,Vn);else continue;a!=null&&e.lineStyle(x,a).strokeRectShape(Vn),q.name&&C&&(E?st=C.call(E,i):st=C(i),st&&(st.setText(q.name),e.children.add(st),Da(st,Vn.x,Vn.y,Vn.width,Vn.height,O)))}return this},GL=function(e,t,i){return e.add.text(0,0,"")},S0=function(e,t){Array.isArray(e)||(e=[e]),t===void 0&&(t=[]);for(var i=0,a=e.length;i<a;i++){var x=e[i];x instanceof BL&&(t.push(...x.list),S0(x.list,t))}return t},Vn=void 0;const Th=Phaser.Utils.Objects.GetValue;var zn=function(e,t){return e===void 0&&(e=0),t===void 0&&(t={}),typeof e=="number"?(t.left=e,t.right=e,t.top=e,t.bottom=e):(t.left=Th(e,"left",0),t.right=Th(e,"right",0),t.top=Th(e,"top",0),t.bottom=Th(e,"bottom",0)),t};const kL=Ti.prototype.add;var Fa=function(e){return kL.call(this,e),this.sizerEventsEnable&&(e.emit("sizer.add",e,this),this.emit("add",e,this)),this},NL={addBackground(e,t,i){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(i=t,t=void 0),t===void 0&&(t=0),Fa.call(this,e),this.backgroundChildren.push(e);var a=this.getSizerConfig(e);return a.padding=zn(t),i!==void 0&&this.addChildrenMap(i,e),this},isBackground(e){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(e)!==-1}},on=function(e,t){var i=null;if(t===void 0)e.hasOwnProperty("rexContainer")&&(i=e.rexContainer.parent,i?i.isRexSizer||(i=on(i)):i=null);else for(i=on(e);i&&i.name!==t;)i=on(i);return i},VL=function(e){for(var t=on(e);t;)e=t,t=on(t);return e},Or={getParentSizer(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),on(e,t)},getTopmostSizer(e){return e===void 0&&(e=this),VL(e)},hasParentSizer(e,t){t===void 0&&(t=this);for(var i=on(t);i;){if(i===e)return!0;i=on(i)}return!1},hasChild(e,t){return t===void 0&&(t=this),this.hasParentSizer(t,e)}};const zL=Phaser.Utils.Array.Remove,YL=Ti.prototype.remove,C0=Or.getParentSizer;var Ba=function(e,t){for(var i=C0(e);i;)i.removeChildCallback&&i.removeChildCallback(e,t),i=C0(i);return this.isBackground(e)&&zL(this.backgroundChildren,e),YL.call(this,e,t),!t&&this.sizerEventsEnable&&(e.emit("sizer.remove",e,this),this.emit("remove",e,this)),this};const WL=Phaser.Utils.Array.Remove,XL=Or.getParentSizer;var UL={removeFromParentSizer(){var e=XL(gameObject);return e&&e.remove(this),this},removeBackground(e,t){return this.backgroundChildren===void 0?this:this.getParentSizer(e)!==this?this:(WL(this.backgroundChildren,e),Ba.call(this,e,t),this)},removeAllBackgrounds(e){if(this.backgroundChildren===void 0)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],e);return this}},T0=function(e,t){if(typeof e=="string")this.childrenMap[e]=t;else{var i=e;for(e in i)this.childrenMap[e]=i[e]}return this},HL=function(e){if(typeof e=="object"){var t=e;for(var e in this.childrenMap)if(this.childrenMap[e]===t)return delete this.childrenMap[e],this}return delete this.childrenMap[e],this},$L=function(e,t){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){t===void 0&&(t=!1);var i=e.shift(),a=null;if(i.charAt(0)==="#")i=i.substring(1),a=this.getByName(i,t);else if(e.length===0&&t){var x=this.childrenMap;if(x)for(var C=[x],E;C.length;){x=C.shift();for(var O in x)if(E=x[O],O===i){a=E;break}else E&&typeof E=="object"&&E.childrenMap&&C.push(E.childrenMap);if(a)break}}else if(i.indexOf("[")===-1)this.childrenMap&&(a=this.childrenMap[i]);else{var I=i.match(KL);if(I!=null&&this.childrenMap){var V=this.childrenMap[I[1]];V&&(a=V[I[2]])}}return e.length===0?a:a&&a.childrenMap?a.getElement(e):null}};const KL=/(\S+)\[(\d+)\]/i;var ZL=function(e){if(Array.isArray(this.sizerChildren)){var t=this.sizerChildren.indexOf(e);return t===-1&&(t=null),t}else{if(this.getParentSizer(e)!==this)return null;for(var i in this.sizerChildren)if(this.sizerChildre[i]===e)return i;return null}},JL={getInnerPadding(e){return ko(this.space,e)},setInnerPadding(e,t){return qs(this.space,e,t),this},getOuterPadding(e){return ko(this.getSizerConfig(this).padding,e)},setOuterPadding(e,t){return qs(this.getSizerConfig(this).padding,e,t),this},getChildOuterPadding(e,t){return typeof e=="string"&&(e=this.getElement(e)),ko(this.getSizerConfig(e).padding,t)},setChildOuterPadding(e,t,i){return typeof e=="string"&&(e=this.getElement(e)),qs(this.getSizerConfig(e).padding,t,i),this}},Fd=function(e){var t=this.childrenWidth;if(t!==void 0){var i=this.minWidth!==void 0?this.minWidth*this.scaleX:0;return e===void 0?(e=Math.max(i,t),this.layoutWarnEnable&&i>0&&t>i&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${i}) < childrenWidth (${t})`)):this.layoutWarnEnable&&(i>e||t>e)&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${i}) or childrenWidth (${t} > targetWidth ${e})`),e}},Bd=function(){var e;for(var t in this.sizerChildren)if(e=this.sizerChildren[t],!(!e||e.isRexSizer&&e.ignoreLayout||!e.runWidthWrap)&&(!e.hasWidthWrap||e.hasWidthWrap()))return!0;return!1},QL=function(e){var t,i,a;for(var x in this.sizerChildren)t=this.sizerChildren[x],t&&t.isRexSizer&&!t.ignoreLayout&&(i=this.getExpandedChildWidth(t,e),a=t.resolveWidth(i),a===void 0&&(a=i),t.resolveChildrenWidth(a))},Id=function(e){var t,i,a;for(var x in this.sizerChildren)t=this.sizerChildren[x],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(i=this.getExpandedChildWidth(t,e),t.isRexSizer?(a=t.resolveWidth(i),a===void 0&&(a=i)):a=i,t.runWidthWrap(a));return this},Gd=function(e){var t=this.childrenHeight;if(t!==void 0){var i=this.minHeight!==void 0?this.minHeight*this.scaleY:0;return e===void 0?(e=Math.max(i,t),this.layoutWarnEnable&&i>0&&t>i&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${i}) < childrenHeight (${t})`)):this.layoutWarnEnable&&(i>e||t>e)&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${i}) or childrenHeight (${t}) > targetHeight (${e})`),e}},kd=function(){var e;for(var t in this.sizerChildren)if(e=this.sizerChildren[t],!(!e||e.isRexSizer&&e.ignoreLayout||!e.runHeightWrap)&&(!e.hasHeightWrap||e.hasHeightWrap()))return!0;return!1},jL=function(e){var t,i,a;for(var x in this.sizerChildren)t=this.sizerChildren[x],t&&t.isRexSizer&&!t.ignoreLayout&&(i=this.getExpandedChildHeight(t,e),a=t.resolveHeight(i),a===void 0&&(a=i),t.resolveChildrenHeight(a))},Nd=function(e){var t,i,a;for(var x in this.sizerChildren)t=this.sizerChildren[x],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap)&&(i=this.getExpandedChildHeight(t,e),t.isRexSizer?(a=t.resolveHeight(i),a===void 0&&(a=i)):a=i,t.runHeightWrap(a));return this},qL=function(e){var t;if(e.isRexSizer){var i=e.childrenWidth;if(i==null)return;var a=e.minWidth*e.scaleX;t=Math.max(a,i)}else e.minWidth!==void 0?t=e.minWidth:e._minWidth!==void 0?t=e._minWidth:t=ne(e);return t},_L=function(e){var t;if(e.isRexSizer){var i=e.childrenHeight;if(i===void 0)return;var a=e.minHeight*e.scaleY;t=Math.max(a,i)}else e.minHeight!==void 0?t=e.minHeight:e._minHeight!==void 0?t=e._minHeight:t=re(e);return t},tD=function(e,t){return t},eD=function(e,t){return t},iD=function(){return 0},sD=function(){return 0},nD=function(e){e===void 0&&(e=[]);for(var t=e.length,i=this.getChildrenSizers(e),a=e.length,x=t;x<a;x++)i[x].getAllChildrenSizers(e);return e},rD=function(e){return e===void 0&&(e=[]),e},aD={getShownChildren(e){e===void 0&&(e=[]);for(var t=this.children,i,a=0,x=t.length;a<x;a++)i=t[a],!(i.rexSizer&&i.rexSizer.hidden)&&e.push(i);return e},getAllShownChildren(e){e===void 0&&(e=[]);for(var t=[this];t.length>0;){var i=t.shift();i.rexSizer&&i.rexSizer.hidden||(i!==this&&e.push(i),i.isRexContainerLite&&t.push(...i.children))}return e}},Ia=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var e=this.getChildrenSizers(),t,i=0,a=e.length;i<a;i++)t=e[i],!t.ignoreLayout&&t.preLayout()},oD=function(){return this.runLayout(),this},hD=function(e){if(e.resize)return!0;if(!e.setSize)return!1;for(var t=0,i=M0.length;t<i;t++){var a=M0[t];if(a&&e instanceof a)return!1}return!0},M0=[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Mesh,Phaser.GameObjects.Shader,Phaser.GameObjects.Video],lD=function(e){if(e.displayWidth===void 0)return!1;for(var t=0,i=P0.length;t<i;t++){var a=P0[t];if(a&&e instanceof a)return!1}return!0},P0=[Phaser.GameObjects.BitmapText],ti=function(e,t,i){if(!(!e||t===void 0&&i===void 0))if(hD(e)){var a,x;t===void 0?a=e.width:a=t/e.scaleX,i===void 0?x=e.height:x=i/e.scaleY,e.resize?e.resize(a,x):e.setSize(a,x)}else{var C=lD(e);t!==void 0&&(C?e.displayWidth=t:e.scaleX=t/e.width),i!==void 0&&(C?e.displayHeight=i:e.scaleY=i/e.height)}},uD=function(e,t,i){if(this.ignoreLayout)return this;var a=!e;a&&this.preLayout();var x,C;a||e.runChildrenWrapFlag?(x=this.hasWidthWrap(),C=this.hasHeightWrap()):(x=!1,C=!1);var E=dD(this,t,i,x,C);E||console.error("Can't resolve size of ",this);var O=E.width,I=E.height;return ti(this,O,I),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout(e,O,I),a&&this._anchor&&this._anchor.updatePosition(),this},dD=function(e,t,i,a,x){var C=E0(e,t,a),E=fD(e,i,x);return C===void 0&&(C=E0(e,t,a)),C!==void 0&&E!==void 0?{width:C,height:E}:!1},E0=function(e,a,i){var a=e.resolveWidth(a);return a!==void 0&&i&&(e.resolveChildrenWidth(a),e.runWidthWrap(a)),a},fD=function(e,a,i){var a=e.resolveHeight(a);return a!==void 0&&i&&(e.resolveChildrenHeight(a),e.runHeightWrap(a)),a},cD=function(){},vD=function(e,t,i){return this},pD=function(e,t,i,a){ti(i,e,t)};const Mh=Phaser.Utils.Objects.GetValue;class Vd extends Se{constructor(t,i){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(i)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var i,a;t.x!==void 0?(i=null,a=t.x):t.left!==void 0?(i=0,a=t.left):t.right!==void 0?(i=1,a=t.right):t.centerX!==void 0&&(i=.5,a=t.centerX);var x,C;t.y!==void 0?(x=null,C=t.y):t.top!==void 0?(x=0,C=t.top):t.bottom!==void 0?(x=1,C=t.bottom):t.centerY!==void 0&&(x=.5,C=t.centerY);var E,O;a!==void 0&&(a=a.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),E=parseFloat(a[0])/100,O=a[1]===""?0:parseFloat(a[1]));var I,V;C!==void 0&&(C=C.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),I=parseFloat(C[0])/100,V=C[1]===""?0:parseFloat(C[1]));var X=t.width,q,st;X!==void 0&&(X=X.split("%"),q=parseFloat(X[0])/100,st=X[1]===""?0:parseFloat(X[1]));var it=t.height,at,ut;it!==void 0&&(it=it.split("%"),at=parseFloat(it[0])/100,ut=it[1]===""?0:parseFloat(it[1])),this.setAlign(i,x),this.setPercentage(E,I),this.setOffset(O,V),this.setSizePercentage(q,at),this.setSizePadding(st,ut);var lt=Mh(t,"onResizeCallback",pD),ft=Mh(t,"onResizeCallbackScope");this.setResizeCallback(lt,ft);var pt=Mh(t,"onUpdateViewportCallback"),ct=Mh(t,"onUpdateViewportCallbackScope");return this.setUpdateViewportCallback(pt,ct),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,i){return this.alignX=t,this.alignY=i,this}setPercentage(t,i){return this.percentageX=t,this.percentageY=i,this}setOffset(t,i){return this.offsetX=t,this.offsetY=i,this}setSizePercentage(t,i){return this.percentageWidth=t,this.percentageHeight=i,this}setSizePadding(t,i){return this.paddingWidth=t,this.paddingHeight=i,this}setResizeCallback(t,i){return this.onResizeCallback=t,this.onResizeCallbackScope=i,this}setUpdateViewportCallback(t,i){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=i,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,i=this.onResizeCallbackScope,a=this.anchorWidth,x=this.anchorHeight;if(!(a===void 0&&x===void 0||!t)){var C=this.parent;a===void 0&&(a=C.width),x===void 0&&(x=C.height),i?t.call(i,a,x,C,this):t(a,x,C,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=cr(this.scene,t,this.viewport);var i=this.viewport,a=this.onUpdateViewportCallback,x=this.onUpdateViewportCallbackScope;a&&(x?a.call(x,i,this.parent,this):a(i,this.parent,this))}}var gD=function(e){e===void 0&&(e={});var t=e.hasOwnProperty("width"),i=e.hasOwnProperty("height"),a=e.hasOwnProperty("onResizeCallback");return(t||i)&&!a&&(e.onResizeCallback=function(x,C,E){t&&E.setMinWidth(x),i&&E.setMinHeight(C),E.layout()}),this._anchor===void 0?this._anchor=new Vd(this,e):this._anchor.resetFromJSON(e),this};const mD=Phaser.Utils.Objects.GetValue,Ar=Phaser.Utils.Objects.GetAdvancedValue,w0=Phaser.Math.Linear;class Ga extends Dn{constructor(t,i){super(t,i),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(mD(t,"mode",0)),this.setScaleRange(Ar(t,"start",void 0),Ar(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=xD[t]),this.mode=t,this}setScaleRange(t,i){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=Ar(t,"x",this.parent.scaleX),this.startY=Ar(t,"y",this.parent.scaleY)),typeof i=="number"?(this.endX=i,this.endY=i):(this.endX=Ar(i,"x",void 0),this.endY=Ar(i,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var i=this.repeat;return this.mode===2&&i!==-1&&(i=(i+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(i),super.start(),this}updateTarget(t,i){var a=i.t;i.isOddIteration&&(a=1-a),a=this.easeFn(a),this.hasScaleX&&(t.scaleX=w0(this.startX,this.endX,a)),this.hasScaleY&&(t.scaleY=w0(this.startY,this.endY,a))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const xD={stop:0,destroy:1,yoyo:2};var zd=function(e,t,i,a,x){a===void 0&&(a="Cubic");var C,E;switch(i){case 0:case"x":C={x:0},E={x:e.scaleX};break;case 1:case"y":C={y:0},E={y:e.scaleY};break;default:C=0,E=e.scale;break}var O={mode:0,start:C,end:E,duration:t,ease:a};return x===void 0?x=new Ga(e,O):x.resetFromJSON(O),x.restart(),x},b0=function(e,t,i,a,x,C){a===void 0&&(a="Linear"),x instanceof Ga&&(C=x,x=void 0),x===void 0&&(x=!0);var E={};switch(E.mode=x?1:0,i){case 0:case"x":E.end={x:0};break;case 1:case"y":E.end={y:0};break;default:E.end=0;break}return E.duration=t,E.ease=a,C===void 0?C=new Ga(e,E):C.resetFromJSON(E),C.restart(),C},yD=function(e,t,i,a,x,C,E){i===void 0&&(i=1.2),a===void 0&&(a=0),C===void 0&&(C="Cubic");var O,I;switch(x){case 0:case"x":O={x:e.scaleX},I={x:i};break;case 1:case"y":O={y:e.scaleX},I={y:i};break;default:O=e.scaleX,I=i;break}var V={mode:2,start:O,end:I,duration:t/2,ease:C,repeat:a};return E===void 0?E=new Ga(e,V):E.resetFromJSON(V),E.restart(),E};const Yd=Phaser.Utils.Objects.IsPlainObject;var R0={onInitScale(){var e=this,t=this._scaleBehavior;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},popUp(e,t,i){if(Yd(e)){var a=e;e=a.duration,t=a.orientation,i=a.ease}var x=this._scaleBehavior===void 0;return this._scaleBehavior=zd(this,e,t,i,this._scaleBehavior),x&&this.onInitScale(),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(e,t,i){return this.popUp(e,t,i),Je(this._scaleBehavior)},isRunningPopUp(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="popup.complete"},scaleDownDestroy(e,t,i,a){if(Yd(e)){var x=e;e=x.duration,t=x.orientation,i=x.ease,a=x.destroy}var C=this._scaleBehavior===void 0;return this._scaleBehavior=b0(this,e,t,i,a,this._scaleBehavior),C&&this.onInitScale(),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(e,t,i,a){return this.scaleDownDestroy(e,t,i,a),Je(this._scaleBehavior)},scaleDown(e,t,i){return this.scaleDownDestroy(e,t,i,!1),this},scaleDownPromise(e,t,i){return this.scaleDown(e,t,i),Je(this._scaleBehavior)},isRunningScaleDown(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="scaledown.complete"},scaleYoyo(e,t,i,a,x){if(Yd(e)){var C=e;e=C.duration,t=C.peakValue,i=C.repeat,a=C.orientation,x=C.ease}var E=this._scaleBehavior===void 0;return this._scaleBehavior=yD(this,e,t,i,a,x,this._scaleBehavior),E&&this.onInitScale(),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(e,t,i,a,x){return this.scaleYoyo(e,t,i,a,x),Je(this._scaleBehavior)},isRunningScaleYoyo(){return this._scaleBehavior&&(this._scaleBehavior.completeEventName="scaleyoyo.complete")},isRunningEaseScale(){return this.isRunningPopUp()||this.isRunningScaleDown()||this.isRunningScaleYoyo()}},Is={};Object.assign(Is,R0),Is.onInitScale=function(){R0.onInitScale.call(this);var e=this,t=this._scaleBehavior;t.on("update",function(){var i=Or.getParentSizer(e);i&&i.resetChildPositionState(e)})};const SD=Phaser.Utils.Objects.GetValue,O0=Phaser.Utils.Objects.GetAdvancedValue,CD=Phaser.Math.Linear;let Wd=class extends Dn{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(SD(t,"mode",0)),this.setAlphaRange(O0(t,"start",this.parent.alpha),O0(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=TD[t]),this.mode=t,this}setAlphaRange(t,i){return this.alphaStart=t,this.alphaEnd=i,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateTarget(t,i){var a=i.t;i.isOddIteration&&(a=1-a),t.alpha=CD(this.alphaStart,this.alphaEnd,a)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}};const TD={stop:0,destroy:1,yoyo:2},MD=Phaser.Utils.Objects.IsPlainObject;var Ph=function(e,t,i,a){var x,C;MD(i)?(x=i.start,C=i.end):C=i,x===void 0&&(x=0),C===void 0&&(C=1);var E={mode:0,start:x,end:C,duration:t};return a===void 0?a=new Wd(e,E):a.resetFromJSON(E),a.restart(),a},Eh=function(e,t,i,a){i instanceof Wd&&(a=i,i=void 0),i===void 0&&(i=!0);var x={mode:i?1:0,end:0,duration:t};return a===void 0?a=new Wd(e,x):a.resetFromJSON(x),a.restart(),a};const A0=Phaser.Utils.Objects.IsPlainObject;var L0={onInitFade(){var e=this,t=this._fade;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},fadeIn(e,t){if(A0(e)){var i=e;e=i.duration,t=i.alpha}var a=this._fade===void 0;return this._fade=Ph(this,e,t,this._fade),a&&this.onInitFade(),this._fade.completeEventName="fadein.complete",this},fadeInPromise(e,t){return this.fadeIn(e,t),Je(this._fade)},isRunningFadeIn(){return this._fade&&this._fade.completeEventName==="fadein.complete"},fadeOutDestroy(e,t){if(A0(e)){var i=e;e=i.duration,t=i.destroy}var a=this._fade===void 0;return this._fade=Eh(this,e,t,this._fade),a&&this.onInitFade(),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(e,t){return this.fadeOutDestroy(e,t),Je(this._fade)},fadeOut(e){return this.fadeOutDestroy(e,!1),this},fadeOutPromise(e){return this.fadeOut(e),Je(this._fade)},isRunningFadeOut(){return this._fade&&this._fade.completeEventName==="fadeout.complete"},isRunningEaseFade(){return this.isRunningFadeIn()||this.isRunningFadeOut()}},ka={};Object.assign(ka,L0),ka.onInitFade=function(){L0.onInitFade.call(this);var e=this,t=this._fade;t.on("update",function(){var i=Or.getParentSizer(e);i&&i.resetChildAlphaState(e)})};const PD=Phaser.Utils.Objects.GetValue,Lr=Phaser.Utils.Objects.GetAdvancedValue,D0=Phaser.Math.Linear;class wh extends Dn{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(PD(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var i=Lr(t,"x",void 0),a=Lr(t,"y",void 0);this.setTargetPosition(i,a)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=ED[t]),this.mode=t,this}setTargetPosition(t,i){if(typeof t=="number"||typeof i=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=i;else{var a=t;this.startX=Lr(a,"startX",void 0),this.startY=Lr(a,"startY",void 0),this.endX=Lr(a,"endX",void 0),this.endY=Lr(a,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateTarget(t,i){var a=i.t;i.isOddIteration&&(a=1-a),a=this.easeFn(a),this.hasMoveX&&(t.x=D0(this.startX,this.endX,a)),this.hasMoveY&&(t.y=D0(this.startY,this.endY,a))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const ED={stop:0,destroy:1,yoyo:2};var bh=function(e,t){if(typeof e=="number")return e;var i=e[0],a=parseFloat(e.substr(2));switch(i){case"+":return t+a;case"-":return t-a;case"*":return t*a;case"/":return t/a}},F0=function(e,t,i,a,x,C,E){C instanceof wh&&(E=C,C=void 0),C===void 0&&(C=!1);var O={};return O.mode=C?1:0,i!==void 0&&(O.startX=e.x,O.endX=bh(i,e.x)),a!==void 0&&(O.startY=e.y,O.endY=bh(a,e.y)),O.duration=t,O.ease=x===void 0?"Linear":x,E===void 0?E=new wh(e,O):E.resetFromJSON(O),E.restart(),E},B0=function(e,t,i,a,x,C,E){C instanceof wh&&(E=C,C=void 0),C===void 0&&(C=!1);var O={};return O.mode=C?1:0,i!==void 0&&(O.startX=bh(i,e.x),O.endX=e.x),a!==void 0&&(O.startY=bh(a,e.y),O.endY=e.y),O.duration=t,O.ease=x===void 0?"Linear":x,E===void 0?E=new wh(e,O):E.resetFromJSON(O),E.restart(),E};const I0=Phaser.Utils.Objects.IsPlainObject,G0=Phaser.Math.Distance.Between;var k0={onInitEaseMove(){var e=this,t=this._easeMove;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},moveFrom(e,t,i,a,x){if(I0(e)){var C=e;t=C.x,i=C.y,C.hasOwnProperty("speed")?e=G0(t,i,this.x,this.y)*1e3/C.speed:e=C.duration,a=C.ease}var E=this._easeMove===void 0;return this._easeMove=B0(this,e,t,i,a,x,this._easeMove),E&&this.onInitEaseMove(),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(e,t,i,a,x){return this.moveFrom(e,t,i,a,x),Je(this._easeMove)},moveFromDestroy(e,t,i,a){return this.moveFrom(e,t,i,a,!0),this},moveFromDestroyPromise(e,t,i,a){return this.moveFromDestroy(e,t,i,a),Je(this._easeMove)},isRunningMoveFrom(){return this._easeMove&&(this._easeMove.completeEventName="movefrom.complete")},moveTo(e,t,i,a,x){if(I0(e)){var C=e;t=C.x,i=C.y,C.hasOwnProperty("speed")?e=G0(t,i,this.x,this.y)*1e3/C.speed:e=C.duration,a=C.ease}var E=this._easeMove===void 0;return this._easeMove=F0(this,e,t,i,a,x,this._easeMove),E&&this.onInitEaseMove(),this._easeMove.completeEventName,this},moveToPromise(e,t,i,a,x){return this.moveTo(e,t,i,a,x),Je(this._easeMove)},moveToDestroy(e,t,i,a){return this.moveTo(e,t,i,a,!0),this},moveToDestroyPromise(e,t,i,a){return this.moveToDestroy(e,t,i,a,!0),Je(this._easeMove)},isRunningMoveTo(){return this._easeMove&&this._easeMove.completeEventName==="moveto.complete"},isRunningEaseMove(){return this.isRunningMoveFrom()||this.isRunningMoveTo()},moveStop(e){return this._easeMove?(this._easeMove.stop(e),this):this}},Rh={};Object.assign(Rh,k0),Rh.onInitEaseMove=function(){k0.onInitEaseMove.call(this);var e=this,t=this._easeMove;t.on("update",function(){var i=Or.getParentSizer(e);i&&i.resetChildPositionState(e)})};const Bi=Phaser.Utils.Objects.GetValue;class Xd extends Ko{constructor(t,i){super(t,i),this.timer=new bp,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(Bi(t,"timer")),this.setEnable(Bi(t,"enable",!0)),this.setMode(Bi(t,"mode",1)),this.isRunning=Bi(t,"isRunning",!1),this.setMagnitudeMode(Bi(t,"magnitudeMode",1)),this.setAxisMode(Bi(t,"axis",0)),this.setDuration(Bi(t,"duration",500)),this.setMagnitude(Bi(t,"magnitude",10)),this.ox=Bi(t,"ox",void 0),this.oy=Bi(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=wD[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=RD[t]),this.magnitudeMode=t,this}setAxisMode(t){return typeof t=="string"&&(t=bD[t]),this.axisMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,i){if(typeof t!="number"){var a=t;i=Bi(a,"magnitude",void 0),t=Bi(a,"duration",void 0)}return i!==void 0&&this.setMagnitude(i),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,i){return this.start(t,i),this}update(t,i){if(!this.isRunning||!this.enable)return this;var a=this.parent;if(!a.active)return this;if(this.timer.update(t,i),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=a.x,this.oy=a.y);var x=this.magnitude;this.magnitudeMode===1&&(x*=1-this.timer.t);var C=Math.random()*Math.PI*2,E=this.ox+Math.cos(C)*x,O=this.oy+Math.sin(C)*x;switch(this.axisMode){case 1:a.x=E;break;case 2:a.y=O;break;default:a.x=E,a.y=O;break}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;switch(this.axisMode){case 1:t.x=this.ox;break;case 2:t.y=this.oy;break;default:t.x=this.ox,t.y=this.oy;break}return this.ox=void 0,this.oy=void 0,this}}const wD={effect:0,behavior:1},bD={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},RD={constant:0,decay:1},OD=Phaser.Utils.Objects.IsPlainObject;var AD=function(e,t){t.on("complete",function(){e.emit("shake.complete",e)})},LD={shake(e,t,i){if(OD(e)){var a=e;e=a.duration,t=a.magnitude,i=a.magnitudeMode}return this._shake===void 0&&(this._shake=new Xd(this,{mode:0,magnitudeMode:1}),AD(this,this._shake)),e!==void 0&&this._shake.setDuration(e),t!==void 0&&this._shake.setMagnitude(t),i!==void 0&&this._shake.setMagnitudeMode(i),this._shake.shake(),this},shakePromise(e,t){return this.shake(e,t),Je(this._shake)}};const N0=Phaser.Utils.Objects.IsPlainObject;class DD extends Se{constructor(t,i){super(t,i),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var i=this.easeTasks[t];return i===void 0&&(i=new $i(this.parent),this.easeTasks[t]=i,i.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),i}easeTo(t,i,a,x){if(N0(t)){var C=t;t=C.key,i=C.value,a=C.duration,x=C.ease;var E=C.speed;a===void 0&&E!==void 0&&(a=Math.abs(i-this.parent.data.values[t])/E*1e3)}a===void 0&&(a=1e3),x===void 0&&(x="Linear");var O=this.getEaseTask(t);return O.restart({key:t,to:i,duration:a,ease:x}),this}easeFrom(t,i,a,x){if(N0(t)){var C=t;t=C.key,i=C.value,a=C.duration,x=C.ease;var E=C.speed;a===void 0&&E!==void 0&&(a=Math.abs(i-this.parent.data.values[t])/E*1e3)}a===void 0&&(a=1e3),x===void 0&&(x="Linear");var O=this.getEaseTask(t);return O.restart({key:t,from:i,duration:a,ease:x}),this}stopEase(t,i){i===void 0&&(i=!0);var a=this.easeTasks[t];return a&&a.stop(i),this}stopAll(t){t===void 0&&(t=!0);for(var i in this.easeTasks)this.stopEase(i,t);return this}}var FD=function(e,t){t.on("complete",function(i){e.emit(`easedata.${i}.complete`,e),e.emit("easedata.complete",i,e)})},BD={easeDataTo(e,t,i,a){return this._easeData||(this._easeData=new DD(this),FD(this,this._easeData)),this._easeData.easeTo(e,t,i,a),this},easeDataToPromise(e,t,i,a){return this.easeDataTo(e,t,i,a),th(this._easeData,`complete-${e}`)},stopEaseData(e,t){return this._easeData?(this._easeData.stopEase(e,t),this):this},stopAllEaseData(e){return this._easeData?(this._easeData.stopAll(e),this):this}},ID=Phaser.Utils.Array.Remove,GD=function(e){e._delayCallTimers=[],e.once("destroy",function(){for(var t=e._delayCallTimers,i=0,a=t.length;i<a;i++)t[i].remove();e._delayCallTimers=void 0})},V0={delayCall(e,t,i){var a=this._delayCallTimers;a===void 0&&GD(this);var x,C=this,E=function(){ID(C._delayCallTimers,x),i?t.call(i):t()};return x=this.scene.time.delayedCall(e,E),this._delayCallTimers.push(x),this}},hn=function(e){z0(e,!1)},ln=function(e){z0(e,!0)},Ud=function(e){if(!e)return!1;var t=Ch(e);return!t.hidden},z0=function(e,t){if(e){var i=Ch(e);i.hidden=t;var a=Ci(e);a?a.setChildVisible(e,!t):e.setVisible(!t)}},kD={show(e){return e===void 0&&(e=this),hn(e),this},hide(e){return e===void 0&&(e=this),ln(e),this},isShow(e){return e===void 0&&(e=this),Ud(e)}};const ND=["next","exit","enter"];let Y0=class{constructor(t){var i=Nt(t,"states",void 0);i&&this.addStates(i);var a=Nt(t,"extend",void 0);if(a)for(var x in a)(!this.hasOwnProperty(x)||this[x]===void 0)&&(this[x]=a[x]);var C=Nt(t,"eventEmitter",void 0),E=Nt(t,"EventEmitterClass",void 0);this.setEventEmitter(C,E),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(Nt(t,"enable",!0)),this.start(Nt(t,"start",void 0));var i=Nt(t,"init",void 0);return i&&i.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var i="exit_"+this._prevState,a=this[i];a&&a.call(this),this.emit(i,this)}if(this._stateLock=!1,this._state!=null){var x="enter_"+this._state,C=this[x];C&&C.call(this),this.emit(x,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,i=this["next_"+this.state];return i&&(typeof i=="string"?t=i:t=i.call(this)),this.goto(t),this}get stateProperties(){return ND}addState(t,i){typeof t!="string"&&(i=t,t=i.name);for(var a=this.stateProperties,x=0,C=a.length;x<C;x++){var E=a[x],O=i[E];O&&(this[`${E}_${t}`]=O)}return this}addStates(t){if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)this.addState(t[i]);else for(var x in t)this.addState(x,t[x]);return this}runMethod(t,i,a,x,C,E){var O=this[t+"_"+this.state];if(O){var I=arguments.length;switch(I){case 1:return O.call(this);case 2:return O.call(this,i);case 3:return O.call(this,i,a);case 4:return O.call(this,i,a,x);case 5:return O.call(this,i,a,x,C);case 6:return O.call(this,i,a,x,C,E)}for(var V=new Array(I-1),X=1;X<I;X++)V[X-1]=arguments[X];return O.apply(this,V)}}};Object.assign(Y0.prototype,Hp);var Hd=function(e,t,i,a,x){x===void 0&&(x=!1);var C=e._events[t];if(!C)return!1;for(var E=0,O=C.length;E<O;E++){var I=C[E];if(I.fn===i&&I.context===a&&I.once===x)return!0}return!1};const VD=["next","exit","enter","update","preupdate","postupdate"];class Gs extends Y0{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=Nt(t,"scene",void 0),this}get stateProperties(){return VD}update(t,i){this.runMethod("update",t,i)}preupdate(t,i){this.runMethod("preupdate",t,i)}postupdate(t,i){this.runMethod("postupdate",t,i)}startUpdate(t){t||(t=this._scene);var i=t.sys.events;return Hd(i,"update",this.update,this)?this:(this._scene=t,i.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var i=t.sys.events;return Hd(i,"preupdate",this.preupdate,this)?this:(this._scene=t,i.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var i=t.sys.events;return Hd(i,"postupdate",this.postupdate,this)?this:(this._scene=t,i.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}let zD=class extends Gs{constructor(t,i){super(i),this.parent=t;var a=i.initState||"IDLE";this.start(a)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;if(t.transitInTime>0){var i=t.runTransitionInCallback();t.delayCall(i,this.next,this)}else this.next()}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;if(t.transitOutTime>0){var i=t.runTransitionOutCallback();t.delayCall(i,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}};var YD=function(e,t,i,a,x){var C=pr(e),E=C.time.delayedCall(t,function(){C.game.events.once("poststep",function(){i.call(a,x)})});return E},WD={delayCall(e,t,i){return this.delayCallTimer=YD(this,e,t,i),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},XD={setTransitInTime(e){return this.transitInTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInCallback(e){return e||(e=r),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=r),this.transitOutCallback=e,this}},UD={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(e,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?e:this.parent;var i=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=i,this}},HD={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(e,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?e:this.parent;var i=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=i,this}},W0={};Object.assign(W0,WD,XD,UD,HD);const Dr=Phaser.Utils.Objects.GetValue;class Oh extends Se{constructor(t,i){super(t,i),this.setTransitInTime(Dr(i,"duration.in",200)),this.setTransitOutTime(Dr(i,"duration.out",200)),this.setTransitInCallback(Dr(i,"transitIn")),this.setTransitOutCallback(Dr(i,"transitOut")),this.oneShotMode=Dr(i,"destroy",!1),this.delayCallTimer=void 0,this._state=new zD(this,{eventEmitter:!1,initState:Dr(i,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}}Object.assign(Oh.prototype,W0);const $D=Phaser.GameObjects.Rectangle;class $d extends $D{constructor(t,i,a){super(t,0,0,2,2,i,1),this.fullWindow=new Cg(this),this.setAlpha(a)}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}}const Kd=Phaser.Utils.Objects.GetValue;class Ah extends Se{constructor(t,i){super(t,{eventEmitter:!1}),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setHitAreaMode(Kd(t,"hitAreaMode",0)),this.setEnable(Kd(t,"enable",!0)),this.setStopMode(Kd(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,i,a,x){this.stopAllLevels&&x.stopPropagation()},this).on("pointerup",function(t,i,a,x){this.stopAllLevels&&x.stopPropagation()},this).on("pointermove",function(t,i,a,x){this.stopAllLevels&&x.stopPropagation()},this).on("pointerover",function(t,i,a,x){this.stopAllLevels&&x.stopPropagation()},this).on("pointerout",function(t,i){this.stopAllLevels&&i.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=KD[t]);var i=this.parent;return i.input&&i.removeInteractive(),t===0?i.setInteractive():i.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var KD={default:0,fullWindow:1};const X0=Phaser.Utils.Objects.GetValue;class Zd extends $d{constructor(t,i){var a=X0(i,"color",0),x=X0(i,"alpha",.8);super(t,a,x),this.touchEventStop=new Ah(this,{hitAreaMode:1})}}var ZD=function(e,t){var i=e.scene,a=new Zd(i,t);return i.add.existing(a),e.isRexContainerLite?(e.pin(a,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1}),e.moveDepthBelow(a)):i.children.moveBelow(a,e),a},Lh={popUp(e,t){e._modalScaleSave!==void 0?(e.scaleX=e._modalScaleSave,e.scaleY=e._modalScaleSave):e._modalScaleSave=e.scaleX,zd(e,t)},scaleDown(e,t){b0(e,t,void 0,void 0,!1)},fadeIn(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,Ph(e,t)},fadeOut(e,t){Eh(e,t,!1)}},JD=function(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,Ph(e,t,e.alpha)},QD=function(e,t){Eh(e,t,!1)},Dh=function(e,t,i,a,x){if(!e||a&&!a(e,t,i))return!1;var C=Fu(e,!0);return!(!C.contains(t,i)||x&&!x(e,t,i))};const us=Phaser.Utils.Objects.GetValue;let jD=class extends Oh{constructor(t,i){i===void 0&&(i={}),i.transitIn==null&&(i.transitIn=un.popUp),i.transitOut==null&&(i.transitOut=un.scaleDown),i.destroy=us(i,"destroy",!0),super(t,i);var a=us(i,"cover");this.cover=a!==!1?ZD(t,a):void 0,this.cover&&(this.setCoverTransitInCallback(us(a,"transitIn",JD)),this.setCoverTransitOutCallback(us(a,"transitOut",QD)));var x=us(i,"touchOutsideClose",!1),C=us(i,"duration.hold",-1),E=us(i,"timeOutClose",C>=0),O=us(i,"anyTouchClose",!1),I=us(i,"manualClose",!1);I&&(x=!1,O=!1,E=!1),O&&(x=!1),E?this.setDisplayTime(C):this.setDisplayTime(-1),O?this.once("open",this.anyTouchClose,this):x&&this.once("open",this.touchOutsideClose,this),us(i,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Dh(this.parent,t.worldX,t.worldY)||this.requestClose()}runTransitionInCallback(){var t=super.runTransitionInCallback(),i=this.cover;return i&&this.coverTransitInCallback&&this.coverTransitInCallback(i,t),t}runTransitionOutCallback(){var t=super.runTransitionOutCallback(),i=this.cover;return i&&this.coverTransitOutCallback&&this.coverTransitOutCallback(i,t),t}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=un[t]),t){case un.popUp:t=Lh.popUp;break;case un.fadeIn:t=Lh.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=un[t]),t){case un.scaleDown:t=Lh.scaleDown;break;case un.fadeOut:t=Lh.fadeOut;break}return super.setTransitOutCallback(t),this}setCoverTransitInCallback(t){return this.coverTransitInCallback=t,this}setCoverTransitOutCallback(t){return this.coverTransitOutCallback=t,this}};const un={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var Jd=function(e,t){var i=new jD(e,t);return i.on("open",function(){e.emit("modal.open",i)}),i.on("close",function(a){e.emit("modal.close",a,i)}),e.on("modal.requestClose",i.requestClose,i),i},qD=function(e,t){var i=Jd(e,t);return new Promise(function(a,x){i.once("close",function(C){a(C)})})},U0=function(e,t){e.emit("modal.requestClose",t)},Zi=function(e){return e&&typeof e=="function"},Fh={modal(e,t){return Zi(e)&&(t=e,e=void 0),this._modalBehavior===void 0&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,e),this._modalBehavior=Jd(this,e)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(e){var t=this;return new Promise(function(i,a){t.modal(e,i)})},modalClose(e){return U0(this,e),this}},_D=function(e,t,i,a,x,C){return C===void 0&&(C=!1),t[C?"once":"on"](i,a,x),e.once("destroy",function(){t.off(i,a,x)}),e},ks=function(e,t,i,a,x){Zi(t)&&(x=a,a=i,i=t,t=this);var C=this.scene.events;return this.bindEvent(t,C,e,i,a,x),this},tF={bindEvent(e,t,i,a,x,C){return typeof t=="string"&&(C=x,x=a,a=i,i=t,t=e,e=this),_D(e,t,i,a,x,C),this},bindScenePreupdateEvent(e,t,i,a){return ks.call(this,"preupdate",e,t,i,a),this},bindSceneUpdateEvent(e,t,i,a){return ks.call(this,"update",e,t,i,a),this},bindScenePostupdateEvent(e,t,i,a){return ks.call(this,"postupdate",e,t,i,a),this},bindSceneRenderEvent(e,t,i,a){return ks.call(this,"render",e,t,i,a),this},bindScenePauseEvent(e,t,i,a){return ks.call(this,"pause",e,t,i,a),this},bindSceneResumeEvent(e,t,i,a){return ks.call(this,"resume",e,t,i,a),this},bindSceneSleepEvent(e,t,i,a){return ks.call(this,"sleep",e,t,i,a),this},bindSceneWakeEvent(e,t,i,a){return ks.call(this,"wake",e,t,i,a),this},bindSceneShutdownEvent(e,t,i,a){return ks.call(this,"shutdown",e,t,i,a),this}},Bh=function(e,t,i){var a=e.camera;return a?(i===void 0?i={}:i===!0&&(i=eF),a===t?(i.x=e.worldX,i.y=e.worldY):a.getWorldPoint(e.x,e.y,i),i):null},eF={},iF=function(e,t,i,a,x){var C=e.scene.sys.cameras.main,E,O=e.scrollFactorX===0&&e.scrollFactorY===0;if(t)return O?i(e,t.x,t.y,a,x):(E=Bh(t,C,!0),E?i(e,E.x,E.y,a,x):!1);for(var I=e.scene.input.manager,V=I.pointersTotal,X=I.pointers,q=0;q<V;q++)if(t=X[q],O){if(i(e,t.x,t.y,a,x))return!0}else{if(E=Bh(t,C,!0),!E)continue;if(i(e,E.x,E.y,a,x))return!0}return!1},ds=function(e,t,i,a){return iF(e,t,Dh,i,a)},sF=function(e,t){return(gi(e)||typeof e=="string")&&(t=e,e=void 0),t===void 0?t=this:typeof t=="string"&&(t=this.getElement(t)),ds(t,e)},Ji=function(e){return Object.prototype.toString.call(e)==="[object Array]"},Yn=function(e,t,i,a,x){return Dh(e,t,i,nF(a),x)},H0=function(e){var t=e.rexSizer&&e.rexSizer.hidden;return!t},nF=function(e){return e?function(t,i,a){return H0(t)?(e(t,i,a),!0):!1}:H0},$0=function(e,t,i,a,x){if(Zi(i)||(x=i,i=void 0,a=void 0),x===void 0&&(this.sizerChildren?x=this.sizerChildren:this.isRexContainerLite?x=this.children:x=this.list),Ji(x)){for(var C,E=0,O=x.length;E<O;E++)if(C=x[E],Yn(C,e,t,i,a))return C}else{var C;for(var I in x)if(C=x[I],Yn(C,e,t,i,a))return C}return null},rF=function(e,t){return t===void 0?t={}:t===!0&&(t=aF),t.x=e.x,t.y=e.y,t.scaleX=e.scaleX,t.scaleY=e.scaleY,t.width=e.width,t.height=e.height,t.displayWidth=e.displayWidth,t.displayHeight=e.displayHeight,t},aF={},Na=function(e){this.sizerEventsEnable&&(rF(e,this.getChildPrevState(e)),this.layoutedChildren.push(e))},Va=function(e,t,i,a,x,C,E,O){E===void 0&&(E=0),O===void 0&&(O=0),Da(e,t,i,a,x,C),e.x+=E,e.y+=O,this.resetChildPositionState(e),this.sizerEventsEnable&&e.emit("sizer.postlayout",e,this)};const oF=Phaser.Display.Align.CENTER;var hF=function(){if(this.backgroundChildren!==void 0)for(var e=this.backgroundChildren,t=this.left,i=this.top,a=this.width*this.scaleX,x=this.height*this.scaleY,C,E,O,I,V,X,q,st=0,it=e.length;st<it;st++)C=e[st],E=C.rexSizer,!E.hidden&&(O=E.padding,Na.call(this,C),I=t+O.left*this.scaleX,V=i+O.top*this.scaleY,X=a-(O.left+O.right)*this.scaleX,q=x-(O.top+O.bottom)*this.scaleY,ti(C,X,q),Va.call(this,C,I,V,X,q,oF,0,0))};const lF=Phaser.Utils.Objects.IsPlainObject;var uF=function(e,t,i){if(lF(e)){var a=e;e=a.sensor,i=a.target,t=a.draggable}else typeof t!="boolean"&&(i=t,t=void 0);var x=typeof e;if(x==="string"){var C=e;if(e=this.getElement(C),!e)return console.error(`Can get element '${C}'`),this}else(e===void 0||x!="object")&&(t=e,e=this);return t===void 0&&(t=!0),e.input&&e.input._rexUIDragSizer?e.input.draggable=t:t&&(e.setInteractive(),e.scene.input.setDraggable(e),e.on("drag",function(E,O,I){var V=i===void 0?this.getTopmostSizer():i;V.x+=O-e.x,V.y+=I-e.y,V.emit("sizer.drag",E,O,I)},this).on("dragstart",function(E,O,I){var V=i===void 0?this.getTopmostSizer():i;V.emit("sizer.dragstart",E,O,I)},this).on("dragend",function(E,O,I,V){var X=i===void 0?this.getTopmostSizer():i;X.emit("sizer.dragend",E,O,I,V)},this).on("drop",function(E,O){var I=i===void 0?this.getTopmostSizer():i;I.emit("sizer.drop",E,O)}),e.input._rexUIDragSizer=!0),this},Qd={onClick(e,t,i,a){return e?(typeof e=="function"&&(a=i,i=t,t=e,e=this),e._click===void 0&&(e._click=new Fs(e,a)),e._click.on("click",t,i),this):this},offClick(e,t,i){return typeof e=="function"&&(i=t,t=e,e=this),e._click===void 0?this:(e._click.off("click",t,i),this)},enableClick(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._click===void 0?this:(e._click.setEnable(t),this)},disableClick(e){return e===void 0&&(e=this),e._click===void 0?this:(e._click.setEnable(!1),this)}};const za=Phaser.Utils.Objects.GetValue;class jd extends Se{constructor(t,i){super(t,i),this._enable=void 0;var a=za(i,"inputConfig",void 0);a&&t.setInteractive(a),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(za(t,"enable",!0)),this.setMode(za(t,"mode",1)),this.setClickInterval(za(t,"clickInterval",100)),this.setDragThreshold(za(t,"threshold",void 0)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this),t.input.on("pointermove",this.onMove,this)}shutdown(t){if(!this.isShutdown){var i=this.parent.scene;i.input.off("pointerdown",this.onPress,this),i.input.off("pointerup",this.onRelease,this),i.input.off("pointermove",this.onMove,this),this.pointer=null,super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var i=t?"enable":"disable";this.emit(i,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=dF[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}isPointerInside(t){var i=this.parent,a=i.input?Wu:ds;return a(i,t)}onPress(t){this.parent.willRender(t.camera)&&this.pointer===void 0&&(this.isPointerInside(t)||(this.pointer=t,this.mode===0&&(this.isPointerInside(t)||this.click(t.downTime,t))))}onRelease(t){this.parent.willRender(t.camera)&&this.pointer===t&&(this.mode===1&&(this.isPointerInside(t)||this.click(t.upTime,t)),this.pointer=void 0)}onMove(t,i,a,x){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&(t.getDistance()>=this.dragThreshold||this.isPointerInside(t))&&this.cancel()}click(t,i){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,i),this;this.pointer=void 0;var a=this.lastClickTime;return a!==void 0&&t-a<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,i),this)}cancel(){return this.pointer=void 0,this}}const dF={press:0,pointerdown:0,release:1,pointerup:1};var fF={onClickOutside(e,t,i,a){return e?(typeof e=="function"&&(a=i,i=t,t=e,e=this),e._clickOutside===void 0&&(e._clickOutside=new jd(e,a)),e._clickOutside.on("clickoutside",t,i),this):this},offClickOutside(e,t,i){return typeof e=="function"&&(i=t,t=e,e=this),e._clickOutside===void 0?this:(e._clickOutside.off("clickoutside",t,i),this)},enableClickOutside(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._clickOutside===void 0?this:(e._clickOutside.setEnable(t),this)},disableClickOutside(e){return e===void 0&&(e=this),e._clickOutside===void 0?this:(e._clickOutside.setEnable(!1),this)}};class cF extends Gs{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,i){this.remainderTime-=i,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>i?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const qd=Phaser.Utils.Objects.GetValue;class Fr extends Se{constructor(t,i){super(t,i),this._enable=void 0,this.cooldown=new cF,this.parent.setInteractive(qd(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(qd(t,"enable",!0)),this.setCooldown(qd(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,i,a){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,i){this.cooldown.update(t,i),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}}var vF={isPointerInBounds(e){return e===void 0?e=this:typeof e=="string"&&(e=this.getElement(e)),e?ds(e):!1},onTouching(e,t,i,a){return e?(typeof e=="function"&&(a=i,i=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new Fr(e,a)),e._inTouching.on("intouch",t,i),this):this},offTouching(e,t,i){return typeof e=="function"&&(i=t,t=e,e=this),e._inTouching===void 0?this:(e._inTouching.off("intouch",t,i),this)},onTouchingEnd(e,t,i,a){return e?(typeof e=="function"&&(a=i,i=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new Fr(e,a)),e._inTouching.on("touchend",t,i),this):this},offTouchingEnd(e,t,i){return typeof e=="function"&&(i=t,t=e,e=this),e._inTouching===void 0?this:(e._inTouching.off("touchend",t,i),this)},enableTouching(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._inTouching===void 0?this:(e._inTouching.setEnable(t),this)},disableTouching(e){return e===void 0&&(e=this),e._inTouching===void 0?this:(e._inTouching.setEnable(!1),this)}},pF={onOver(e,t,i){return e?(typeof e=="function"&&(i=t,t=e,e=this),e.setInteractive().on("pointerover",t,i),this):this},onOut(e,t,i){return e?(typeof e=="function"&&(i=t,t=e,e=this),e.setInteractive().on("pointerout",t,i),this):this}},K0=function(e,t,i,a){if(e==="parent"){for(var x,C=0,E=t.length;C<E;C++)if(x=t[C],!!Yn(x,i,a))return x.pointToChild?x.pointToChild(i,a):$0.call(x,i,a)}else for(var C=0,E=t.length;C<E;C++){var O=t[C];if(Yn(O,i,a))return O}return null},Ii=function(e,t,i,a,x,C,E,O){var I;if(C===void 0)I=x;else{var V=i[0];if(!V)return;var X=E.camera,q=x+X.scrollX*(V.scrollFactorX-1),st=C+X.scrollY*(V.scrollFactorY-1);I=K0(a,i,q,st)}I&&e.emit(t,I,E,O)};const gF=Phaser.Utils.Objects.GetValue;var mF=function(e){var t=gF(e,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",xF,this))},xF=function(e,t,i,a){var x=this._childrenInteractive;Ii(x.eventEmitter,`${x.eventNamePrefix}down`,x.targetSizers,x.targetMode,e.worldX,e.worldY,e,a)};const yF=Phaser.Utils.Objects.GetValue;var SF=function(e){var t=yF(e,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",CF,this))},CF=function(e,t,i,a){var x=this._childrenInteractive;Ii(x.eventEmitter,`${x.eventNamePrefix}up`,x.targetSizers,x.targetMode,e.worldX,e.worldY,e,a)};const TF=Phaser.Utils.Objects.GetValue;var MF=function(e){var t=TF(e,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",Z0,this).on("pointerover",Z0,this).on("pointerout",PF,this))},Z0=function(e,t,i,a){var x=this._childrenInteractive,C=x.targetSizers[0];if(C){var E=e.camera,O=e.worldX+E.scrollX*(C.scrollFactorX-1),I=e.worldY+E.scrollY*(C.scrollFactorY-1),V=K0(x.targetMode,x.targetSizers,O,I),X=x.lastOverChild;V&&X&&V===X||(x.lastOverChild=V,Ii(x.eventEmitter,`${x.eventNamePrefix}out`,x.targetSizers,x.targetMode,X,void 0,e,a),Ii(x.eventEmitter,`${x.eventNamePrefix}over`,x.targetSizers,x.targetMode,V,void 0,e,a))}},PF=function(e,t){var i=this._childrenInteractive,a=i.lastOverChild;i.lastOverChild=null,Ii(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,i.targetMode,a,void 0,e,t)};const EF=Phaser.Utils.Objects.GetValue;var wF=function(e){var t=EF(e,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var i=this._childrenInteractive;this._click=new Fs(this,t),this._click.on("click",function(a,x,C,E){Ii(i.eventEmitter,`${i.eventNamePrefix}click`,i.targetSizers,i.targetMode,C.worldX,C.worldY,C,E)},this)}};const _d=Phaser.Utils.Objects.GetValue;class Ih extends Ko{constructor(t,i){var a=pr(t);a===t&&(t=void 0),super(a,i),this.gameObject=t,t&&t.setInteractive(_d(i,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(_d(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(_d(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=tf,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,i){if(this.enable&&this.pointer===void 0){var a=this.bounds?this.bounds.contains(t.x,t.y):!0;a&&this.pointer!==t&&(this.pointer=t,this.pointerCamera=t.camera,this.lastPointer=t,this.movedState=!1,this.tracerState=J0,this.gameObject===void 0&&(this.isTouchingAnyObject=i.length>0),this.onDragStart())}}onPointerUp(t){if(this.enable){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;i&&this.pointer===t&&(this.pointer=void 0,this.pointerCamera=void 0,this.movedState=!1,this.tracerState=tf,this.onDragEnd())}}onPointerMove(t){if(this.enable&&t.isDown){var i=this.bounds?this.bounds.contains(t.x,t.y):!0,a=this.pointer===t;!a&&i||(a&&!i?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===J0&&this.onDragEnd(),this.pointer=void 0,this.tracerState=tf,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,i){}postUpdate(t,i){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=bF,this}isPointerInGameObject(t,i,a){var x=this.lastPointer;return x?ds(t,x,i,a):!1}}const tf=0,J0=1,bF="IDLE",Wn=Phaser.Utils.Objects.GetValue,RF=Phaser.Math.Distance.Between;class Gh extends Ih{constructor(t,i){super(t,i);var a=this,x={states:{IDLE:{enter:function(){a.stop(),a.tapsCount=0,a.x=0,a.y=0,a.worldX=0,a.worldY=0,a.lastPointer=void 0},exit:function(){var C=a.lastPointer;a.x=C.x,a.y=C.y,a.worldX=C.worldX,a.worldY=C.worldY}},BEGIN:{enter:function(){a.start(),a.tapsCount=0,a.emit("tappingstart",a,a.gameObject,a.lastPointer)}},RECOGNIZED:{enter:function(){a.start(),a.emit("tap",a,a.gameObject,a.lastPointer),a.emit(`${a.tapsCount}tap`,a,a.gameObject,a.lastPointer)}}},init:function(){this.state=Xn},eventEmitter:!1};this.setRecongizedStateObject(new Gs(x))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(Wn(t,"time",250)),this.setTapInterval(Wn(t,"tapInterval",200)),this.setDragThreshold(Wn(t,"threshold",9)),this.setTapOffset(Wn(t,"tapOffset",10));var i=Wn(t,"taps",void 0);return i!==void 0?this.setTaps(i):(this.setMaxTaps(Wn(t,"maxTaps",void 0)),this.setMinTaps(Wn(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case Xn:this.state=Br;break;case Br:var t=this.lastPointer,i=RF(t.upX,t.upY,t.x,t.y);i>this.tapOffset&&(this.state=Ir,this.state=Br);break;case Ir:this.state=Br;break}}onDragEnd(){this.state===Br&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Ir))}onDrag(){this.state!==Xn&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Xn)}preUpdate(t,i){if(!(!this.isRunning||!this.enable)&&this.state===Br){var a=this.lastPointer;if(a.isDown){var x=t-a.downTime;x>this.holdTime&&(this.state=Xn)}else{var C=t-a.upTime;C>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Ir:this.state=Xn)}}}postUpdate(t,i){!this.isRunning||!this.enable||this.state===Ir&&(this.state=Xn)}get isTapping(){return this.state===Ir}get isTapped(){return this.isTapping}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,i){return i===void 0&&(i=t),this.setMinTaps(t).setMaxTaps(i),this}}const Xn="IDLE",Br="BEGIN",Ir="RECOGNIZED",Q0=Phaser.Utils.Objects.GetValue;class kh extends Ih{constructor(t,i){super(t,i);var a=this,x={states:{IDLE:{enter:function(){a.x=0,a.y=0,a.worldX=0,a.worldY=0,a.lastPointer=void 0},exit:function(){var C=a.lastPointer;a.x=C.x,a.y=C.y,a.worldX=C.worldX,a.worldY=C.worldY}},BEGIN:{enter:function(){a.start()},exit:function(){a.stop()}},RECOGNIZED:{enter:function(){a.emit("pressstart",a,a.gameObject,a.lastPointer)},exit:function(){a.emit("pressend",a,a.gameObject,a.lastPointer)}}},init:function(){this.state=Nh},eventEmitter:!1};this.setRecongizedStateObject(new Gs(x))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Q0(t,"threshold",9)),this.setHoldTime(Q0(t,"time",251)),this}onDragStart(){this.state=j0,this.holdTime===0&&(this.state=ef)}onDragEnd(){this.state=Nh}onDrag(){this.state!==Nh&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Nh)}preUpdate(t,i){if(!(!this.isRunning||!this.enable)&&this.state===j0){var a=t-this.pointer.downTime;a>=this.holdTime&&(this.state=ef)}}get isPressing(){return this.state===ef}get isPressed(){return this.isPressing}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const Nh="IDLE",j0="BEGIN",ef="RECOGNIZED",OF=Phaser.Utils.Objects.GetValue;class q0 extends Ih{constructor(t,i){super(t,i);var a=this,x={states:{IDLE:{},BEGIN:{enter:function(){var C=a.pointer;a.startX=C.x,a.startY=C.y,a.startWorldX=C.worldX,a.startWorldY=C.worldY}},RECOGNIZED:{enter:function(){a.emit("panstart",a,a.gameObject,a.lastPointer)},exit:function(){var C=a.lastPointer;a.endX=C.x,a.endY=C.y;var E=Bh(C,a.pointerCamera,!0);a.endWorldX=E.x,a.endWorldY=E.y,a.emit("panend",a,a.gameObject,a.lastPointer)}}},init:function(){this.state=_0},eventEmitter:!1};this.setRecongizedStateObject(new Gs(x))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(OF(t,"threshold",10)),this}onDragStart(){this.state=tm,this.dragThreshold===0&&(this.state=Vh)}onDragEnd(){this.state=_0}onDrag(){switch(this.state){case tm:if(this.pointer.getDistance()>=this.dragThreshold){this.state=Vh,this.dx=0,this.dy=0,this.dWorldX=0,this.dWorldY=0;var x=this.pointer;this.x=x.x,this.y=x.y,this.worldX=x.worldX,this.worldY=x.worldY}break;case Vh:var t=this.pointerCamera,i=this.pointer.position,a=this.pointer.prevPosition;this.dx=i.x-a.x,this.dy=i.y-a.y,this.dWorldX=this.dx/t.zoom,this.dWorldY=this.dy/t.zoom;var x=this.pointer;this.x=x.x,this.y=x.y;var C=Bh(x,t,!0);this.worldX=C.x,this.worldY=C.y,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanning(){return this.state===Vh}get isPanned(){return this.isPanning}setDragThreshold(t){return this.dragThreshold=t,this}}const _0="IDLE",tm="BEGIN",Vh="RECOGNIZED",AF=Phaser.Math.Distance.Between,LF=Phaser.Math.Angle.Between;var DF={getDt:function(){var e=Ju(this.scene);return e},getVelocity:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=AF(t.x,t.y,e.x,e.y),a=i/(this.getDt()*.001);return a},getVelocityX:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=Math.abs(e.x-t.x),a=i/(this.getDt()*.001);return a},getVelocityY:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=Math.abs(e.y-t.y),a=i/(this.getDt()*.001);return a},getVelocityAngle:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=LF(t.x,t.y,e.x,e.y);return i}},FF={"up&down":0,"left&right":1,"4dir":2,"8dir":3},BF=function(e,t,i){switch(i===void 0?i={}:i===!0&&(i=IF),i.left=!1,i.right=!1,i.up=!1,i.down=!1,e=(e+360)%360,t){case 0:e<180?i.down=!0:i.up=!0;break;case 1:e>90&&e<=270?i.left=!0:i.right=!0;break;case 2:e>45&&e<=135?i.down=!0:e>135&&e<=225?i.left=!0:e>225&&e<=315?i.up=!0:i.right=!0;break;case 3:e>22.5&&e<=67.5?(i.down=!0,i.right=!0):e>67.5&&e<=112.5?i.down=!0:e>112.5&&e<=157.5?(i.down=!0,i.left=!0):e>157.5&&e<=202.5?i.left=!0:e>202.5&&e<=247.5?(i.left=!0,i.up=!0):e>247.5&&e<=292.5?i.up=!0:(e>292.5&&e<=337.5&&(i.up=!0),i.right=!0);break}return i},IF={};const sf=Phaser.Utils.Objects.GetValue,GF=Phaser.Math.RadToDeg;class Ya extends Ih{constructor(t,i){super(t,i);var a=this,x={states:{IDLE:{enter:function(){a.x=0,a.y=0,a.worldX=0,a.worldY=0},exit:function(){var C=a.lastPointer;a.x=C.x,a.y=C.y,a.worldX=C.worldX,a.worldY=C.worldY}},BEGIN:{enter:function(){a.validDrag=!1}},RECOGNIZED:{enter:function(){a.start(),a.updateDirectionStates(),a.emit("swipe",a,a.gameObject,a.lastPointer)},exit:function(){a.stop(),a.clearDirectionStates()}}},init:function(){this.state=nf},eventEmitter:!1};this.setRecongizedStateObject(new Gs(x)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(sf(t,"threshold",10)),this.setVelocityThreshold(sf(t,"velocityThreshold",1e3)),this.setDirectionMode(sf(t,"dir","8dir")),this}onDragStart(){this.state=em}onDragEnd(){this.state=nf}onDrag(){this.state===em&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=rf))}postUpdate(t,i){!this.isRunning||!this.enable||this.state===rf&&(this.state=nf)}get isSwiping(){return this.state===rf}get isSwiped(){return this.isSwiping}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=FF[t]),this.dirMode=t,this}updateDirectionStates(){var t=GF(this.getVelocityAngle());return BF(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Ya.prototype,DF);const nf="IDLE",em="BEGIN",rf="RECOGNIZED",zh=Phaser.Utils.Objects.GetValue,kF=Phaser.Utils.Array.SpliceOne,NF=Phaser.Math.Distance.Between,VF=Phaser.Math.Angle.Between;class af{constructor(t,i){var a=pr(t);a===t&&(t=void 0);var x=a.input.manager.pointersTotal-1;x<2&&a.input.addPointer(2-x),this.scene=a,this.gameObject=t,t&&t.setInteractive(zh(i,"inputConfig",void 0)),this.setEventEmitter(zh(i,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(zh(t,"enable",!0)),this.bounds=zh(t,"bounds",void 0),this.tracerState=Yh,this.pointers.length=0,ge(this.movedState),this}boot(){this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,ge(this.movedState),this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0,this.gameObject=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&this.pointers.length!==2){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;if(i){var a=this.pointers.indexOf(t);if(a===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.pointerCamera=t.camera,this.tracerState){case Yh:this.tracerState=Xa,this.onDrag1Start();break;case Xa:this.tracerState=fs,this.onDrag2Start();break}}}}onPointerUp(t){if(this.enable){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;if(i){var a=this.pointers.indexOf(t);if(a!==-1)switch(delete this.movedState[t.id],kF(this.pointers,a),this.tracerState){case Xa:this.tracerState=Yh,this.onDrag1End();break;case fs:this.tracerState=Xa,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(this.enable&&t.isDown){var i=this.bounds?this.bounds.contains(t.x,t.y):!0,a=this.pointers.indexOf(t)!==-1;if(!(!a&&i)){if(a&&!i)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Xa:this.onDrag1();break;case fs:this.onDrag2();break}}}}dragCancel(){return this.tracerState===fs&&this.onDrag2End(),this.pointers.length=0,ge(this.movedState),this.tracerState=Yh,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==fs)return 0;var t=this.pointers[0],i=this.pointers[1];return NF(t.x,t.y,i.x,i.y)}get angleBetween(){if(this.tracerState!==fs)return 0;var t=this.pointers[0],i=this.pointers[1];return VF(t.x,t.y,i.x,i.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var i=t.position,a=t.prevPosition;Wa.x=i.x-a.x,Wa.y=i.y-a.y}else Wa.x=0,Wa.y=0;return Wa}get centerX(){if(this.tracerState!==fs)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.x+i.x)/2}get centerY(){if(this.tracerState!==fs)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.y+i.y)/2}get prevCenterX(){if(this.tracerState!==fs)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+i.x)/2}get prevCenterY(){if(this.tracerState!==fs)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+i.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=zF,this}isPointer0InGameObject(t,i,a){var x=this.pointers[0];return x?ds(t,x,i,a):!1}isPointer1InGameObject(t,i,a){var x=this.pointers[1];return x?ds(t,x,i,a):!1}}Object.assign(af.prototype,sa);var Wa={};const Yh=0,Xa=1,fs=2,zF="IDLE",YF=Phaser.Utils.Objects.GetValue;class im extends af{constructor(t,i){super(t,i);var a=this,x={states:{IDLE:{enter:function(){a.prevDistance=void 0,a.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){a.emit("pinchstart",a)},exit:function(){a.emit("pinchend",a)}}},init:function(){this.state=sm},eventEmitter:!1};this.setRecongizedStateObject(new Gs(x))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(YF(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=nm,this.dragThreshold===0&&(this.state=Wh)}onDrag2End(){this.state=sm}onDrag2(){switch(this.state){case nm:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Wh}break;case Wh:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinching(){return this.state===Wh}get isPinched(){return this.isPinching}setDragThreshold(t){return this.dragThreshold=t,this}}const sm="IDLE",nm="BEGIN",Wh="RECOGNIZED",WF=Phaser.Math.RotateAround;var rm=function(e,t,i,a){return WF(e,t,i,a),e.rotation+=a,e},XF=function(e,t,i,a){return a===void 0?a={}:a===!0&&(a=UF),i.getWorldPoint(e,t,a),a},UF={},HF=function(e,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var i=this.movementCenterX,a=this.movementCenterY,x=XF(this.centerX,this.centerY,t,!0),C=x.x,E=x.y,O=this.rotation;if(Array.isArray(e))for(var I=e,V=0,X=I.length;V<X;V++)e=I[V],e.x+=i,e.y+=a,rm(e,C,E,O);else e.x+=i,e.y+=a,rm(e,C,E,O);return this};const $F=Phaser.Utils.Objects.GetValue,of=Phaser.Math.Angle.WrapDegrees,am=Phaser.Math.Angle.ShortestBetween,hf=Phaser.Math.RadToDeg,KF=Phaser.Math.DegToRad;class lf extends af{constructor(t,i){super(t,i);var a=this,x={states:{IDLE:{enter:function(){a.prevAngle=void 0,a.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){a.emit("rotatestart",a)},exit:function(){a.emit("rotateend",a)}}},init:function(){this.state=om},eventEmitter:!1};this.setRecongizedStateObject(new Gs(x))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold($F(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=of(hf(this.angleBetween)),this.state=hm,this.dragThreshold===0&&(this.state=Xh)}onDrag2End(){this.state=om}onDrag2(){switch(this.state){case hm:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=of(hf(this.angleBetween));this.angle=am(this.prevAngle,t),this.prevAngle=t,this.state=Xh}break;case Xh:var t=of(hf(this.angleBetween));this.angle=am(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotating(){return this.state===Xh}get isRotated(){return this.isRotating}get rotation(){return KF(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var ZF={spinObject:HF};Object.assign(lf.prototype,ZF);const om="IDLE",hm="BEGIN",Xh="RECOGNIZED",JF=Phaser.Utils.Objects.GetValue;var QF=function(e){var t=JF(e,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var i=this._childrenInteractive;this._tap=new Gh(this,t),this._tap.on("tap",function(a,x,C){Ii(i.eventEmitter,`${i.eventNamePrefix}${a.tapsCount}tap`,i.targetSizers,i.targetMode,a.worldX,a.worldY,C,a),Ii(i.eventEmitter,`${i.eventNamePrefix}tap`,i.targetSizers,i.targetMode,a.worldX,a.worldY,C,a)},this)}};const jF=Phaser.Utils.Objects.GetValue;var qF=function(e){var t=jF(e,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var i=this._childrenInteractive;this._press=new kh(this,t),this._press.on("pressstart",function(a,x,C){Ii(i.eventEmitter,`${i.eventNamePrefix}pressstart`,i.targetSizers,i.targetMode,a.worldX,a.worldY,C,a)},this).on("pressend",function(a,x,C){Ii(i.eventEmitter,`${i.eventNamePrefix}pressend`,i.targetSizers,i.targetMode,a.worldX,a.worldY,C,a)},this)}};const _F=Phaser.Utils.Objects.GetValue;var t3=function(e){var t=_F(e,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var i=this._childrenInteractive;this._swipe=new Ya(this,t),this._swipe.on("swipe",function(a,x,C){var E=a.left?"left":a.right?"right":a.up?"up":"down";Ii(i.eventEmitter,`${i.eventNamePrefix}swipe${E}`,i.targetSizers,i.targetMode,a.worldX,a.worldY,C,a),Ii(i.eventEmitter,`${i.eventNamePrefix}swipe`,i.targetSizers,i.targetMode,a.worldX,a.worldY,C,a)},this)}};const Ua=Phaser.Utils.Objects.GetValue;var Uh=function(e,t){return e.setInteractive(),Ua(t,"dropZone",!1)&&(e.input.dropZone=!0),e._childrenInteractive={targetSizers:Ua(t,"targets",[e]),targetMode:Ua(t,"targetMode","parent"),eventEmitter:Ua(t,"eventEmitter",e),eventNamePrefix:Ua(t,"inputEventPrefix","child.")},mF.call(e,t),SF.call(e,t),MF.call(e,t),wF.call(e,t),QF.call(e,t),qF.call(e,t),t3.call(e,t),e},e3=function(e){return Uh(this,e),this},i3=function(){for(var e=this.getAllChildren([this]),t=0,i=e.length;t<i;t++){var a=e[t];a.emit.apply(a,arguments)}return this},lm={getSizerConfig:SL,getChildPrevState:CL,pushIntoBounds:TL,drawBounds:IL,resolveWidth:Fd,hasWidthWrap:Bd,resolveChildrenWidth:QL,runWidthWrap:Id,resolveHeight:Gd,hasHeightWrap:kd,resolveChildrenHeight:jL,runHeightWrap:Nd,getChildWidth:qL,getChildHeight:_L,getExpandedChildWidth:tD,getExpandedChildHeight:eD,getChildrenWidth:iD,getChildrenHeight:sD,addChildrenMap:T0,addElement:T0,removeChildrenMap:HL,getElement:$L,getChildIndex:ZL,getAllChildrenSizers:nD,getChildrenSizers:rD,preLayout:Ia,layout:oD,runLayout:uD,layoutChildren:cD,layoutBackgrounds:hF,postLayout:vD,setAnchor:gD,isInTouching:sF,pointToChild:$0,setDraggable:uF,setChildrenInteractive:e3,broadcastEvent:i3};Object.assign(lm,JL,NL,UL,Or,Is,ka,Rh,LD,BD,V0,Qd,fF,vF,pF,kD,Fh,aD,tF);const Ns=Phaser.Utils.Objects.GetValue;let Un=class extends Ti{constructor(t,i,a,x,C,E){super(t,i,a,1,1),this.isRexSizer=!0;var O=Ns(E,"origin",.5),I=Ns(E,"originX",O),V=Ns(E,"originY",O);this.setOrigin(I,V),this.setMinSize(x,C),this.setName(Ns(E,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0,this.runChildrenWrapFlag=!1,this.enableLayoutWarn(!1);var X=Ns(E,"anchor",void 0);X&&this.setAnchor(X),this.setInnerPadding(Ns(E,"space",0));var q=Ns(E,"draggable",!1);q&&this.setDraggable(q),this.setSizerEventsEnable(Ns(E,"sizerEvents",!1)),this.setDirty(!0),Ns(E,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var i=this.getAllChildrenSizers([this]),a=0,x=i.length;a<x;a++)i[a].sizerEventsEnable=!1;super.destroy(t),ge(this.backgroundChildren),ge(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,i){return this.setMinWidth(t).setMinHeight(i),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}enableLayoutWarn(t){return t===void 0&&(t=!0),this.layoutWarnEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-ne(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+ne(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+ne(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-re(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+re(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+re(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left*this.scaleX}get innerRight(){return this.right-this.space.right*this.scaleX}get innerTop(){return this.top+this.space.top*this.scaleY}get innerBottom(){return this.bottom-this.space.bottom*this.scaleY}get innerWidth(){return(this.width-this.space.left-this.space.right)*this.scaleX}get innerHeight(){return(this.height-this.space.top-this.space.bottom)*this.scaleY}get minInnerWidth(){var t=(this.minWidth-this.space.left-this.space.right)*this.scaleX;return Math.max(t,0)}get minInnerHeight(){var t=(this.minHeight-this.space.top-this.space.bottom)*this.scaleY;return Math.max(t,0)}};Object.assign(Un.prototype,lm);var s3=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,i,a,x,C=!1;for(var E in t)i=t[E],x=this.getChildWidth(i),x===void 0&&(C=!0),!C&&(a=i.rexSizer.padding,x+=(a.left+a.right)*this.scaleX,e=Math.max(x,e));if(!C)return e+(this.space.left+this.space.right)*this.scaleX},n3=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,i,a,x,C=!1;for(var E in t)i=t[E],x=this.getChildHeight(i),x===void 0&&(C=!0),!C&&(a=i.rexSizer.padding,x+=(a.top+a.bottom)*this.scaleY,e=Math.max(x,e));if(!C)return e+(this.space.top+this.space.bottom)*this.scaleY},r3=function(e,t){t===void 0&&(t=this.width*this.scaleX);var i,a=e.rexSizer;if(a.expandWidth){var x=t-(this.space.left+this.space.right)*this.scaleX,C=a.padding;i=x-(C.left+C.right)*this.scaleX}return i},a3=function(e,t){t===void 0&&(t=this.height);var i,a=e.rexSizer;if(a.expandHeight){var x=t-(this.space.top+this.space.bottom)*this.scaleY,C=a.padding;i=x-(C.top+C.bottom)*this.scaleY}return i},o3=function(e){e===void 0&&(e=[]);var t=this.sizerChildren,i;for(var a in t)i=t[a],i.isRexSizer&&e.push(i);return e},uf=function(e,t,i,a){if(i===void 0)i=0;else{var x=typeof i;x==="boolean"?(a=i,i=0):x==="string"&&(i=h3[i])}a===void 0?a={}:a===!0&&(a=l3);var C=t.width/e.width,E=t.height/e.height,O=i?Math.max(C,E):Math.min(C,E);return a.width=e.width*O,a.height=e.height*O,a};const h3={fit:0,FIT:0,envelop:1,ENVELOP:1};var l3={},df=function(e,t){e.layoutWarnEnable&&(e.width<e.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${e.constructor.name}`),e.height<e.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${e.constructor.name}`))},u3=function(){var e,t,i,a=this.innerLeft,x=this.innerTop,C=this.innerWidth,E=this.innerHeight,O,I,V,X,q,st,it,at,ut,lt=this.sizerChildren;for(var ft in lt)e=lt[ft],!e.rexSizer.hidden&&(t=e.rexSizer,i=t.padding,Na.call(this,e),it=this.getExpandedChildWidth(e),at=this.getExpandedChildHeight(e),t.aspectRatio>0&&(ff.width=t.aspectRatio,ff.height=1,cf.width=it,cf.height=at,ut=uf(ff,cf,"FIT",!0),it=ut.width,at=ut.height),e.isRexSizer?(e.runLayout(this,it,at),df(e,this)):ti(e,it,at),O=a+i.left*this.scaleX,V=C-(i.left+i.right)*this.scaleX,I=x+i.top*this.scaleY,X=E-(i.top+i.bottom)*this.scaleY,it===void 0&&(it=ne(e)),at===void 0&&(at=re(e)),q=(t.alignOffsetX+t.alignOffsetOriginX*it)*this.scaleX,st=(t.alignOffsetY+t.alignOffsetOriginY*at)*this.scaleY,Va.call(this,e,O,I,V,X,t.align,q,st))},ff={},cf={};const um=Phaser.Utils.Objects.IsPlainObject,Mi=Phaser.Utils.Objects.GetValue,dm=Phaser.Display.Align.CENTER,d3=Phaser.Utils.String.UUID;var f3=function(e,t,i,a,x,C,E,O,I,V){var X,q;if(Fa.call(this,e),um(t)){var it=t;t=Mi(it,"key",void 0),i=Mi(it,"align",dm),a=Mi(it,"padding",0),x=Mi(it,"expand",!0),e.isRexSizer||(C=Mi(it,"minWidth",e._minWidth),E=Mi(it,"minHeight",e._minHeighted)),O=Mi(it,"offsetX",0),I=Mi(it,"offsetY",0),X=Mi(it,"offsetOriginX",0),q=Mi(it,"offsetOriginY",0),V=Mi(it,"aspectRatio",0)}var st=t!==void 0;st||(t=d3()),typeof i=="string"&&(i=br[i]),i===void 0&&(i=dm),a===void 0&&(a=0),x===void 0&&(x=!0),e.isRexSizer||(C===void 0&&(C=e._minWidth),E===void 0&&(E=e._minHeight)),O===void 0&&(O=0),I===void 0&&(I=0),X===void 0&&(X=0),q===void 0&&(q=0),V===void 0?V=0:V===!0&&(V=ne(e)/re(e)),V>0&&(x=!0,C===void 0&&(C=0),E===void 0&&(E=0));var it=this.getSizerConfig(e);return it.align=i,it.padding=zn(a),um(x)?(it.expandWidth=Mi(x,"width",!1),it.expandHeight=Mi(x,"height",!1)):(it.expandWidth=x,it.expandHeight=x),e.isRexSizer||(it.expandWidth&&(e.minWidth=C===void 0?ne(e):C),it.expandHeight&&(e.minHeight=E===void 0?re(e):E)),it.alignOffsetX=O,it.alignOffsetY=I,it.alignOffsetOriginX=X,it.alignOffsetOriginY=q,it.aspectRatio=V,this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=e,st&&this.addChildrenMap(t,e),this},c3={add:f3};const v3=Ti.prototype.clear;var Hh=function(e){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!e&&this.sizerEventsEnable,i;if(t&&(i=this.getChildren([])),v3.call(this,e),t)for(var a,x=0,C=i.length;x<C;x++)a=i[x],a.emit("sizer.remove",a,this),this.emit("remove",a,this);return this},p3={remove(e,t){var i;if(typeof e=="string"){if(i=e,e=this.sizerChildren[i],!e)return this}else{if(this.getParentSizer(e)!==this)return this;i=this.childToKey(e)}return i&&(delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i]),Ba.call(this,e,t),this},removeAll(e){for(var t in this.sizerChildren)this.remove(t,e);return this},clear(e){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return Hh.call(this,e),this}},fm={getChildrenWidth:s3,getChildrenHeight:n3,getExpandedChildWidth:r3,getExpandedChildHeight:a3,getChildrenSizers:o3,layoutChildren:u3};Object.assign(fm,c3,p3);var $h=function(e,t){if(Array.isArray(e))return e.indexOf(t);for(var i in e)if(e[i]===t)return i;return null};const cm=Phaser.Utils.Objects.IsPlainObject,Gr=Phaser.Utils.Objects.GetValue;class Gi extends Un{constructor(t,i,a,x,C,E){cm(i)?(E=i,i=Gr(E,"x",0),a=Gr(E,"y",0),x=Gr(E,"width",void 0),C=Gr(E,"height",void 0)):cm(x)&&(E=x,x=Gr(E,"width",void 0),C=Gr(E,"height",void 0)),super(t,i,a,x,C,E),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var i=t;if(this.sizerChildren.hasOwnPropery(i))return i}else return $h(this.sizerChildren,t);return null}}Object.assign(Gi.prototype,fm);var g3=Phaser.Math.Distance.Between,Kh=function(e,t,i){var a=e.width/2;return g3(a,a,t,i)<=a};const m3=Phaser.Math.Angle.Between,x3=Phaser.Math.Angle.Normalize;var vm=function(e,t,i){if(this.enable&&e.isDown){var a=this.sizerChildren.knob;if(Kh(a,t,i)){var x=a.width/2,C=a.startAngle,E=m3(x,x,t,i),O=a.anticlockwise?C-E:E-C,I=x3(O)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-I)<.1?this.value=I:this.easeValueTo(I)}}},y3=function(){var e=this.sizerChildren.knob;e.on("pointerdown",vm,this).on("pointermove",vm,this).setInteractive()};const pm=Phaser.Math.Angle.Between,S3=Phaser.Math.Angle.Wrap;var C3=function(e,t,i){if(!(!this.enable||this.panPointer)){var a=this.sizerChildren.knob;Kh(a,t,i)&&gm.call(this,e)}},T3=function(e,t,i){if(this.enable&&e.isDown){var a=this.sizerChildren.knob;switch(this.panState){case vf:Kh(a,t,i)&&gm.call(this,e);break;case xm:Kh(a,t,i)?P3.call(this):mm.call(this);break}}},M3=function(e,t,i){!this.enable||this.panPointer!==e||mm.call(this)},gm=function(e){this.panPointer=e,this.panState=xm},mm=function(){this.panPointer=void 0,this.panState=vf},P3=function(){var e=this.panPointer.prevPosition,t=this.panPointer.position,i=this.sizerChildren.knob,a=pm(i.x,i.y,e.x,e.y),x=pm(i.x,i.y,t.x,t.y),C=i.anticlockwise?a-x:x-a,E=S3(C)/(Math.PI*2);this.stopEaseValue(),this.value+=E};const vf=0,xm=1;var E3=function(){var e=this.sizerChildren.knob;e.on("pointerdown",C3,this).on("pointermove",T3,this).on("pointerup",M3,this).setInteractive(),this.panPointer=void 0,this.panState=vf},w3=function(e,t){return this.textFormatCallback=e,this.textFormatCallbackScope=t,this},ym=function(e){e===void 0&&(e=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(e):t=this.textFormatCallback.call(this.textFormatCallbackScope,e),t},b3=function(e){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(ym.call(this,e)),t.layout&&t.layout()),this},R3={setTextFormatCallback:w3,getFormatText:ym,updateText:b3};const Qi=Phaser.Utils.Objects.GetValue,O3=Phaser.Math.Snap.To;class pf extends an(Gi){constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexKnob",this.bootProgressBase(i);var a=Qi(i,"background",void 0),x=Qi(i,"text",void 0);a&&this.addBackground(a),x&&(i.textColor=void 0,i.textStrokeColor=void 0,this.setTextFormatCallback(Qi(i,"textFormatCallback",void 0),Qi(i,"textFormatCallbackScope",void 0)),i.textFormatCallback=void 0,i.textFormatCallbackScope=void 0);var C=new ch(t,i);C.setDepth(Qi(i,"knobDepth",0)),C._value=-1,t.add.existing(C),this.add(C,"knob"),x&&(this.add(x,"text","center",0,!1),t.children.moveBelow(C,x)),this.addChildrenMap("background",a),this.addChildrenMap("knob",C),this.addChildrenMap("text",x),this.setEnable(Qi(i,"enable",void 0)),this.setGap(Qi(i,"gap",void 0)),this.setValue(Qi(i,"value",0),Qi(i,"min",void 0),Qi(i,"max",void 0));var E=Qi(i,"input",0);switch(typeof E=="string"&&(E=A3[E]),E){case 0:E3.call(this);break;case 1:y3.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=O3(t,this.gap));var i=this.value;this.sizerChildren.knob.value=t;var a=this.value;i!==a&&(this.updateText(),this.eventEmitter.emit("valuechange",a,i,this.eventEmitter))}}const A3={pan:0,drag:0,click:1,none:-1};Object.assign(pf.prototype,R3),k.register("knob",function(e){var t=new pf(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Knob",pf);const L3={arc:Tr,circle:Fi,curve:uO,ellipse:dO,line:sn,lines:Qe,rectangle:DO,roundRectangle:uh,triangle:BO},Sm=Phaser.Utils.Objects.GetValue,D3=Phaser.Utils.Objects.IsPlainObject,F3=function(){for(var e=this.getShapes(),t=0,i=e.length;t<i;t++)e[t].lineStyle().fillStyle()};var B3={createShape(e,t){var i=L3[e],a=new i;return t&&a.setName(t),a},buildShapes(e){var t=Sm(e,"create",void 0);if(D3(t)){var i=t;for(var a in i){var x=i[a];switch(typeof x){case"number":for(var C=0;C<x;C++)this.addShape(this.createShape(a));break;case"string":this.addShape(this.createShape(a,x));break;default:for(var E=x,C=0,O=E.length;C<O;C++)this.addShape(this.createShape(a,E[C]));break}}}else if(Array.isArray(t))for(var i=t,C=0,O=i.length;C<O;C++){var I=i[C];this.addShape(this.createShape(I.type,I.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(Sm(e,"update"))},setUpdateShapesCallback(e){return e===void 0&&(e=F3),this.dirty=this.dirty||this.updateCallback!==e,this.updateCallback=e,this},updateShapes(){this.updateCallback.call(this)}};const Ha=Phaser.Utils.Objects.GetValue,I3=Phaser.Utils.Objects.IsPlainObject;class Zh extends Ds{constructor(t,i,a,x,C,E){I3(i)&&(E=i,i=Ha(E,"x",0),a=Ha(E,"y",0),x=Ha(E,"width",2),C=Ha(E,"height",2)),super(t,i,a,x,C),this.type=Ha(E,"type","rexCustomShapes"),this.buildShapes(E)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(t,i,a,x){return typeof a=="boolean"&&(x=a,a=void 0),Cv(this,t,i,a,x)}}Object.assign(Zh.prototype,B3),k.register("customShapes",function(e,t,i,a,x){var C=new Zh(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.CustomShapes",Zh);const $a=Phaser.Utils.Objects.GetValue,G3=Phaser.Utils.Objects.IsPlainObject;class cs extends an(Zh){constructor(t,i,a,x,C,E){G3(i)&&(E=i,i=$a(E,"x",0),a=$a(E,"y",0),x=$a(E,"width",2),C=$a(E,"height",2)),E===void 0&&(E={}),E.type||(E.type="rexCustomProgress"),super(t,i,a,x,C,E),this.bootProgressBase(E),this.setValue($a(E,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}}k.register("customProgress",function(e,t,i,a,x){var C=new cs(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.CustomProgress",cs);var k3=function(e){return this.easeValueTask||(this.easeValueTask=new $i(this,{eventEmitter:null})),e!==void 0&&(this.duration=e,this.easeValueTask.stop()),this.easeValueTask.isRunning?this:(this.easeValueTask.restart({key:"value",from:0,to:1,duration:this.duration,ease:this.ease,repeat:-1,delay:this.delay,repeatDelay:this.repeatDelay}),this.setDirty(),this)},N3=function(){return this.easeValueTask?(this.easeValueTask.stop(),this.setDirty(),this):this},V3=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this},z3=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this},Y3={start:k3,stop:N3,pause:V3,resume:z3};const ji=Phaser.Utils.Objects.GetValue;class Cm extends Ds{constructor(t,i){var a=ji(i,"x",0),x=ji(i,"y",0),C=ji(i,"width",64),E=ji(i,"height",64);super(t,a,x,C,E),this.resetFromConfig(i,!0),this.buildShapes(i),ji(i,"start",!0)&&this.start()}resetFromConfig(t,i){i===void 0&&(i=!1);var a;return a=i?1e3:this.duration,this.setDuration(ji(t,"duration",a)),a=i?"Linear":this.ease,this.setEase(ji(t,"ease",a)),a=i?0:this.delay,this.setDelay(ji(t,"delay",a)),a=i?0:this.repeatDelay,this.setRepeatDelay(ji(t,"repeatDelay",a)),a=i?16777215:this.color,this.setColor(ji(t,"color",a)),a=i?0:this.value,this.setValue(ji(t,"value",a)),this}buildShapes(){}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get color(){return this._color}set color(t){this.isColorChanged=this.isColorChanged||this._color!==t,this.dirty=this.dirty||this.isColorChanged,this._color=t,this.setShapesColor(t)}setColor(t){return this.color=t,this}setShapesColor(t){}get value(){return this._value}set value(t){t=Phaser.Math.Clamp(t,0,1),this.dirty=this.dirty||this._value!=t,this._value=t}setValue(t){return this.value=t,this}setDuration(t){return this.duration=t,this}setDelay(t){return this.delay=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return this.ease=t,this}get isRunning(){return this.tweenTask?this.tweenTask.isRunning:!1}}Object.assign(Cm.prototype,Y3);const dn=Phaser.Math.DegToRad,W3=Phaser.Math.Linear,X3=Phaser.Math.Easing.Expo.In,U3={right:0,down:1,left:2,up:3};var H3=function(e,t,i,a,x,C,E,O,I,V,X){var q=kr(t,0,a,x,C,E,O,I,V,X);e.startAt(q.x,q.y);var st=kr(i,0,a,x,C,E,O,I,V,X);e.lineTo(st.x,st.y);var it=kr(i,i,a,x,C,E,O,I,V,X);e.lineTo(it.x,it.y);var at=kr(0,i,a,x,C,E,O,I,V,X);e.lineTo(at.x,at.y);var ut=kr(0,t,a,x,C,E,O,I,V,X);e.lineTo(ut.x,ut.y);var lt=kr(t,t,a,x,C,E,O,I,V,X);e.lineTo(lt.x,lt.y),e.close()},gf={},kr=function(e,t,i,a,x,C,E,O,I,V){var X=e*i,q=t*a;return gf.x=E*X+O*q+x,gf.y=I*X+V*q+C,gf},Jh={setDirection(e){return typeof e=="string"&&(e=U3[e]),this.direction=e,this},buildShapes(){for(var e=0;e<3;e++)this.addShape(new Qe)},updateShapes(){var e,t,i,a,x,C;switch(this.direction){case 1:e=this.centerX,t=this.centerY-this.radius;var E=dn(315);i=Math.cos(E),a=Math.sin(E);var O=dn(45);x=Math.cos(O),C=Math.sin(O);break;case 3:e=this.centerX,t=this.centerY+this.radius;var E=dn(135);i=Math.cos(E),a=Math.sin(E);var O=dn(225);x=Math.cos(O),C=Math.sin(O);break;case 2:e=this.centerX+this.radius,t=this.centerY;var E=dn(225);i=Math.cos(E),a=Math.sin(E);var O=dn(315);x=Math.cos(O),C=Math.sin(O);break;default:e=this.centerX-this.radius,t=this.centerY;var E=dn(45);i=Math.cos(E),a=Math.sin(E);var O=dn(135);x=Math.cos(O),C=Math.sin(O);break}for(var I=this.radius/7,V=this.getShapes(),X=0,q=V.length;X<q;X++){var st=V[X],it=(this.value+(q-X)*.1)%1;it=X3(fe(it));var at=W3(.25,1,it);st.fillStyle(this.color,at);var ut=X*3+1,lt=ut+2;H3(st,ut,lt,I,I,e,t,i,a,x,C)}}};const $3=Phaser.Math.Linear;var K3={buildShapes(){for(var e=0;e<4;e++)this.addShape(new sn);this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,a=e-i,x=t+i,C=i*2,E=this.getShapes(),O=E.length,I=i*2/O,V=I*.7;if(this.prevValue===void 0||this.prevValue>this.value)for(var X=0;X<O;X++){var q=E[X],st=this.prevValue===void 0?Math.random():q.getData("to");q.setData("from",st).setData("to",Math.random())}this.prevValue=this.value;for(var X=0;X<O;X++){var q=E[X],st=q.getData("from"),it=q.getData("to"),at=$3(st,it,this.value),ut=at*C,lt=a+I*(X+.5);q.lineStyle(V,this.color,1).setP0(lt,x).setP1(lt,x-ut)}}};const Z3=Phaser.Math.Linear;var J3={buildShapes(){for(var e=0;e<3;e++)this.addShape(new Fi)},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,a=i*.1,x=Math.ceil(a*.25),C=1-fe(this.value),E=Z3(.3,.9,C)*i,O=this.getShapes(),I=0,V=O.length;I<V;I++){var X=O[I],C=(this.value+I/V)%1,q=Math.PI*2*C;X.lineStyle(x,this.color).setRadius(a).setCenterPosition(e+Math.cos(q)*E,t+Math.sin(q)*E)}}};const Q3=Phaser.Math.Linear,j3=Phaser.Math.Easing.Expo.In;var q3={buildShapes(){for(var e=5,t=0;t<e;t++){var i=new sn;this.addShape(i);var a=fe(t/(e-1))/2;i.setData("offset",a)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,a=e-i,x=i*2,C=this.getShapes(),E=C.length,O=i*2/E,I=O*.7,V=0;V<E;V++){var X=C[V],q=(this.value+X.getData("offset"))%1;q=j3(fe(q));var st=Q3(.4,1,q)*x,it=a+O*(V+.5);X.lineStyle(I,this.color,1).setP0(it,t-st/2).setP1(it,t+st/2)}}},_3={buildShapes(){this.addShape(new Qe().setName("border")),this.addShape(new Qe().setName("fill"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,a=i*.7,x=e-a,C=t-a,E=a*2;if(this.getShape("border").lineStyle(2,this.color,1).startAt(x,C).lineTo(E,0,!0).lineTo(0,E,!0).lineTo(-E,0,!0).lineTo(0,-E,!0).close(),this.value<.5){var O=(.5-this.value)*2,I=E*O;this.getShape("fill").fillStyle(this.color,1).startAt(x,C).lineTo(E,0,!0).lineTo(0,I,!0).lineTo(-E,0,!0).lineTo(0,-I,!0).close()}else{var O=(this.value-.5)*2,V=180*O;this.getShape("border").rotateAround(e,t,V),this.getShape("fill").fillStyle().lineStyle()}}};const Tm=Phaser.Math.RadToDeg,Mm=Phaser.Math.Angle.WrapDegrees,tB=Phaser.Math.Angle.Wrap,eB=Phaser.Math.Angle.ShortestBetween,iB=Phaser.Math.DegToRad,Pm=Phaser.Math.DegToRad(270);var sB={buildShapes(){this.addShape(new Fi().setName("border")),this.addShape(new sn().setName("minuteHand")),this.addShape(new sn().setName("hourHand")),this.minuteHandAngle=0,this.hourHandAngle=0},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,a=Math.ceil(i/25),x=i-a/2,C=i*.8,E=i*.5,O=this.minuteHandAngle;this.minuteHandAngle=Math.PI*2*this.value;var I=Mm(Tm(O)),V=Mm(Tm(this.minuteHandAngle)),X=eB(I,V);this.hourHandAngle=tB(this.hourHandAngle+iB(X)/12),this.getShape("border").lineStyle(a,this.color).setRadius(x).setCenterPosition(e,t);var q=this.minuteHandAngle+Pm;this.getShape("minuteHand").lineStyle(a,this.color).setP0(e,t).setP1(e+Math.cos(q)*C,t+Math.sin(q)*C);var q=this.hourHandAngle+Pm;this.getShape("hourHand").lineStyle(a,this.color).setP0(e,t).setP1(e+Math.cos(q)*E,t+Math.sin(q)*E)}};const Em=Phaser.Math.Linear,nB=Phaser.Math.Easing.Expo.In,mf=2,xf=2;var rB={buildShapes(){for(var e=mf*xf,t=0;t<e;t++){var i=new sn;this.addShape(i)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,a=e-i,x=t-i,C=i*2/xf,E=i*2/mf,O=this.getShapes(),I=O.length,V=0;V<I;V++){var X=V%xf,q=Math.floor(V/mf),st=a+C*(X+.5),it=x+E*(q+.5),at=O[V],ut=(this.value+(I-V)*.1)%1;ut=nB(fe(ut));var lt=(I-V)/I,ft=Em(.7,1,ut)*E,pt=Em(.7,1,ut)*C;at.lineStyle(pt,this.color,lt).setP0(st-ft/2,it).setP1(st+ft/2,it)}}};const wm=Phaser.Math.Linear;var aB={buildShapes(){for(var e=3,t=0;t<e;t++){var i=new Fi;this.addShape(i);var a=fe(t/(e-1))/2;i.setData("offset",a)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,a=e-i,x=this.getShapes(),C=x.length,E=i*2/C,O=E/2,I=0;I<C;I++){var V=x[I],X=(this.value+V.getData("offset"))%1;X=fe(X);var q=wm(.25,1,X),st=wm(.5,1,X)*O;V.fillStyle(this.color,q).setRadius(st).setCenterPosition(a+E*(I+.5),t)}}};const bm=Phaser.Math.Linear,oB=Phaser.Math.Easing.Expo.In;var hB={buildShapes(){for(var e=0;e<3;e++){var t=new sn;this.addShape(t)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,a=e-i,x=this.getShapes(),C=x.length,E=i*2/C,O=i*2,I=0;I<C;I++){var V=x[I],X=(this.value+(C-I)*.1)%1;X=oB(fe(X));var q=(I+1)/C,st=bm(.7,1,X)*O,it=bm(.7,1,X)*E,at=a+E*(I+.5);V.lineStyle(it,this.color,q).setP0(at,t-st/2).setP1(at,t+st/2)}}};const lB=Phaser.Math.Linear,yf=3,Sf=3;var uB={buildShapes(){for(var e=yf*Sf,t=0;t<e;t++){var i=new Fi;this.addShape(i),i.setData("offset",Math.random())}this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,a=this.isInitialize||this.isSizeChanged,x=e-i,C=t-i,E=i*2/Sf,O=i*2/yf,I=Math.min(E,O)/2*.8,V=this.getShapes(),X=0,q=V.length;X<q;X++){var st=X%Sf,it=Math.floor(X/yf),at=x+E*(st+.5),ut=C+O*(it+.5),lt=V[X],ft=(this.value+lt.getData("offset"))%1;ft=fe(ft),lt.fillStyle(this.color,lB(.25,1,ft)),a&&lt.setRadius(I).setCenterPosition(at,ut)}this.isInitialize=!1}},dB={buildShapes(){for(var e=0;e<2;e++)this.addShape(new Qe)},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,a=Math.ceil(i/25),x=i-a,C=x*.6,E=x*.7,O=x*1.2,I=this.getShapes(),V=0,X=I.length;V<X;V++){var q=I[V],st=(this.value+V/X)%1,it=fe(st),at=e,ut=t-15*st,lt=x*st,ft=C*st,pt=E*st,ct=O*st;q.lineStyle(a,this.color,it).startAt(at,ut).cubicBezierTo(at,ut-ft,at-lt,ut-ft,at-lt,ut).cubicBezierTo(at-lt,ut+ft,at,ut+pt,at,ut+ct).cubicBezierTo(at,ut+pt,at+lt,ut+ft,at+lt,ut).cubicBezierTo(at+lt,ut-ft,at,ut-ft,at,ut).close()}}};const fB=Phaser.Math.Linear;var cB={buildShapes(){for(var e=0;e<12;e++)this.addShape(new sn);this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.isInitialize||this.isSizeChanged,a=this.radius,x=a/2,C=Math.ceil(a/20),E=this.getShapes(),O=0,I=E.length;O<I;O++){var V=E[O],X=O/I,q=Math.PI*2*X,st=fB(.25,1,(1-this.value+X)%1);V.lineStyle(C,this.color,st),i&&V.setP0(e+Math.cos(q)*x,t+Math.sin(q)*x).setP1(e+Math.cos(q)*a,t+Math.sin(q)*a)}this.isInitialize=!1}},vB={buildShapes(){this.addShape(new Fi().setName("track")),this.addShape(new Fi().setName("thumb"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,a=i*.9,x=Math.ceil(a/25),C=i*.1,E=Math.PI*2*this.value;this.getShape("track").lineStyle(x,this.color,.7).setRadius(a).setCenterPosition(e,t),this.getShape("thumb").fillStyle(this.color).setRadius(C).setCenterPosition(e+Math.cos(E)*a,t+Math.sin(E)*a)}},pB={buildShapes(){this.addShape(new Fi().setName("track")),this.addShape(new Tr().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,a=Math.ceil(i/25),x=i-a/2;this.getShape("track").lineStyle(a,this.color,.5).setRadius(x).setCenterPosition(e,t);var C=this.value*360,E=C+60;this.getShape("arc").lineStyle(a,this.color,1).setRadius(x).setCenterPosition(e,t).setAngle(C,E)}};const gB=Phaser.Math.Linear;var mB={buildShapes(){for(var e=0;e<4;e++){var t=new Tr().setPie();this.addShape(t),t.setData("speed",gB(180,360,Math.random()))}this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,a;this.prevValue!==void 0&&(a=this.value-this.prevValue,this.prevValue>this.value&&(a+=1));for(var x=this.getShapes(),C=0,E=x.length;C<E;C++){var O=x[C],I=(C+1)/E;if(this.prevValue===void 0){var V=C/E*360,X=V+90;O.fillStyle(this.color,I).setRadius(i).setCenterPosition(e,t).setAngle(V,X).setData("angle",V)}else{var V=O.getData("angle")+O.getData("speed")*a;V=V%360;var X=V+90;O.fillStyle(this.color,I).setRadius(i).setCenterPosition(e,t).setAngle(V,X).setData("angle",V)}}this.prevValue=this.value}},xB={buildShapes(){this.addShape(new Fi)},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,a=i*this.value,x=Math.ceil(i/25),C=fe(this.value);this.getShapes()[0].lineStyle(x,this.color,C).setRadius(a).setCenterPosition(e,t)}};const yB=Phaser.Math.Linear,SB=Phaser.Math.Easing.Expo.In;var CB={buildShapes(){this.addShape(new Fi().setName("center")),this.addShape(new Qe().setName("arc0")),this.addShape(new Qe().setName("arc1")),this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,a=this.isInitialize||this.isSizeChanged,x=i*2/6,C=e-i+x,E=t+i-x,O=this.getShapes(),I=0,V=O.length;I<V;I++){var X=O[I],q=(this.value+(V-I)*.1)%1;q=SB(fe(q));var st=yB(.25,1,q);switch(X.name){case"center":X.fillStyle(this.color,st),a&&X.setRadius(x).setCenterPosition(C,E);break;case"arc0":if(X.fillStyle(this.color,st),a){var it=x*2,at=x*3;X.startAt(C,E-it).lineTo(C,E-at).setIterations(8).arc(C,E,at,270,360).lineTo(C+it,E).setIterations(6).arc(C,E,it,360,270,!0).close()}break;case"arc1":if(X.fillStyle(this.color,st),a){var it=x*4,at=x*5;X.startAt(C,E-it).lineTo(C,E-at).setIterations(8).arc(C,E,at,270,360).lineTo(C+it,E).setIterations(6).arc(C,E,it,360,270,!0).close()}break}}this.isInitialize=!1}},TB={buildShapes(){for(var e=0;e<2;e++)this.addShape(new Fi)},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,a=Math.ceil(i/25),x=i-a,C=this.getShapes(),E=0,O=C.length;E<O;E++){var I=C[E],V=(this.value+E/O)%1,X=fe(V);I.lineStyle(a,this.color,X).setRadius(V*x).setCenterPosition(e,t)}}},MB={buildShapes(){this.addShape(new Tr().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,a=Math.ceil(i/10),x=i-a,C=this.value*720,E=fe(this.value)*180,O=C-E;this.getShape("arc").lineStyle(a,this.color,1).setRadius(x).setCenterPosition(e,t).setAngle(O+315,C+315)}};Phaser.Utils.Objects.GetValue;const Cf={leftArrow:Jh,rightArrow:Jh,upArrow:Jh,downArrow:Jh,audio:K3,ball:J3,bars:q3,box:_3,clock:sB,cube:rB,dots:aB,facebook:hB,grid:uB,hearts:dB,ios:cB,oribit:vB,oval:pB,pie:mB,puff:xB,radio:CB,rings:TB,spinner:MB},Tf=[];for(var PB in Cf)Tf.push(PB);const Rm=Phaser.Utils.Array.GetRandom;var EB={setAnimationMode(e,t){Cf.hasOwnProperty(e)||(e=Rm(Tf)),this.animationMode=e;var i=Cf[e];switch(t&&this.resetFromConfig(t),e){case"leftArrow":i.setDirection.call(this,"left");break;case"rightArrow":i.setDirection.call(this,"right");break;case"upArrow":i.setDirection.call(this,"up");break;case"downArrow":i.setDirection.call(this,"down");break}return this.clear(),i.buildShapes.call(this),this.updateShapes=i.updateShapes.bind(this),this.stop().start(),this},setRandomAnimationMode(e){var t=Rm(Tf);return this.setAnimationMode(t,e),this}};const wB=Phaser.Utils.Objects.GetValue;class Mf extends Cm{constructor(t,i){super(t,i),this.type="rexSpinnerAIO",this.setAnimationMode(wB(i,"animationMode"))}}Object.assign(Mf.prototype,EB),k.register("aioSpinner",function(e){var t=new Mf(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.AIOSpinner",Mf);var bB={setTransitionStartCallback(e,t){return this.onStartCallback=e,this.onStartCallbackScope=t,this},setTransitionProgressCallback(e,t){return this.onProgressCallback=e,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(e,t){return this.onCompleteCallback=e,this.onCompleteCallbackScope=t,this}},Om=function(){for(var e=this.scaleMode-1,t=0,i=this.images.length;t<i;t++){var a=this.images[t],x=uf(a,this,e,!0),C=x.width/a.width;this.setChildLocalScale(a,C),a.biasScale=C}},Qh=function(e){this.scaleMode===0?this.resize(e.width,e.height):Om.call(this)};const Am=Phaser.Utils.Objects.IsPlainObject,Pf=Phaser.Utils.Objects.GetValue,RB=Phaser.Utils.Array.GetRandom;var OB={out:0,in:1},vs=function(e,t,...i){for(var a=0,x=i.length;a<x;a++){var C=i[a];if(C&&C.hasOwnProperty(e))return C[e]}return t},AB={setTransitionDirection(e){return typeof e=="string"&&(e=OB[e]),this.dir=e,this},setDuration(e){return this.duration=e,this},setEaseFunction(e){return this.easeFunction=e,this},setNextTexture(e,t){return this.nextImage.setTexture(e,t),Qh.call(this,this.nextImage),this},transit(e,t,i){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),i!==void 0&&(e={key:e,frame:t,mode:i}),this.currentTransitionMode=void 0,Am(e)){var a=e;e=Pf(a,"key",void 0),t=Pf(a,"frame",void 0),i=Pf(a,"mode"),Array.isArray(i)&&(i=RB(i));var x;this.transitionModes&&this.transitionModes.hasOwnProperty(i)&&(x=this.transitionModes[i],this.currentTransitionMode=i),this.setDuration(vs("duration",this.duration,a,x)).setEaseFunction(vs("ease",this.easeFunction,a,x)).setTransitionDirection(vs("dir",this.dir,a,x));var C=vs("mask",void 0,a,x);C&&this.setMaskGameObject(C),this.setMaskEnable(C===!0);var E=vs("onStart",void 0,a,x),O=vs("onProgress",void 0,a,x),I=vs("onComplete",void 0,a,x);(E!==void 0||O!==void 0||I!==void 0)&&this.setTransitionStartCallback(E,vs("onStartScope",void 0,a,x)).setTransitionProgressCallback(O,vs("onProgressScope",void 0,a,x)).setTransitionCompleteCallback(I,vs("onCompleteScope",void 0,a,x))}return this.setNextTexture(e,t),this.start(),this},addTransitionMode(e,t){return this.transitionModes===void 0&&(this.transitionModes={}),Am(e)&&(t=e,e=t.name,delete t.name),this.transitionModes[e]=t,this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new $i(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};const LB=Phaser.GameObjects.Graphics.prototype.setPosition;var DB=function(e,t){var i=this.parent;return e===void 0&&(e=i.x),t===void 0&&(t=i.y),LB.call(this,e,t),this};const Lm=Phaser.Geom.Rectangle,Dm=Phaser.Geom.Circle;var FB=function(e,t,i,a,x,C,E){switch(e){case 1:a=a.left;var O=-t*(x-.5),I=-i*(C-.5),V=Math.min(t,i)/2+a;(E===void 0||!(E instanceof Dm))&&(E=new Dm),E.setTo(O,I,V);break;default:var X=-(t*x)-a.left,q=-(i*C)-a.top,st=t+a.left+a.right,it=i+a.top+a.bottom;(E===void 0||!(E instanceof Lm))&&(E=new Lm),E.setTo(X,q,st,it);break}return E},Fm=function(e,t,i,a,x){switch(this.geom=FB(this.shapeType,e,t,i,a,x,this.geom),this.clear().fillStyle(16777215),this.shapeType){case 1:this.fillCircleShape(this.geom);break;default:this.fillRectShape(this.geom);break}},BB=function(e,t,i){var a=this.parent;e===void 0&&(e=a.width),t===void 0&&(t=a.height),i===void 0?i=this.padding:typeof i=="number"&&(i=GetBoundsConfig(i));var x=this.width!==e||this.height!==t,C=this.padding!==i&&!xa(this.padding,i);return!x&&!C?this:(this.width=e,this.height=t,C&&Hi(i,this.padding),this.originX=a.originX,this.originY=a.originY,Fm.call(this,e,t,i,a.originX,a.originY),this)},IB=function(e,t){t===void 0&&(t=e);var i=this.parent;return e===void 0&&(e=i.originX),t===void 0&&(t=i.originY),this.originX===e&&this.originY===t?this:(this.originX=e,this.originY=t,Fm.call(this,this.width,this.height,this.padding,e,t),this)},GB=function(e,t){return e-=this.x,t-=this.y,this.geom.contains(e,t)},kB={setPosition:DB,resize:BB,setOrigin:IB,contains:GB};const NB=Phaser.GameObjects.Graphics;class jh extends NB{constructor(t,i,a){i===void 0&&(i=0),typeof i=="string"&&(i=VB[i]),super(t.scene),this.parent=t,this.shapeType=i,this.padding=zn(a),this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}}const VB={rectangle:0,circle:1};Object.assign(jh.prototype,kB);var zB={setMaskGameObject(e){if(!e)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(e===!0&&this.maskGameObject instanceof jh)return this;if(this.maskGameObject===e)return this;this.removeMaskGameObject()}return e===!0&&(e=new jh(this)),e.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(e),this.maskGameObject=e,e._maskObject||(e._maskObject=e.createGeometryMask(),e.once("destroy",function(){e._maskObject.destroy(),e._maskObject=void 0})),this.childrenMask=e._maskObject,this},removeMaskGameObject(e){return e===void 0&&(e=!0),this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,e),this.maskGameObject=void 0,this},setImageMaskEnable(e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=!1),t?(this.childrenMask||this.setMaskGameObject(!0),e.setMask(this.childrenMask),this.childrenMask.setInvertAlpha(i)):e.clearMask(),this},setCurrentImageMaskEnable(e,t){return this.setImageMaskEnable(this.currentImage,e,t),this},setNextImageMaskEnable(e,t){return this.setImageMaskEnable(this.nextImage,e,t),this},setCellImagesMaskEnable(e,t){for(var i=this.getCellImages(),a=0,x=i.length;a<x;a++)this.setImageMaskEnable(i[a],e,t);return this},setMaskEnable(e,t){return this.setImageMaskEnable(this.backImage,e,t),this.setImageMaskEnable(this.frontImage,e,t),this.setCellImagesMaskEnable(e,t),this}},YB=function(e,t){typeof e=="object"&&(e=e.name),t===void 0&&(t=",");var i;return e==="__BASE"?i=function(a,x){return`${a}${t}${x}`}:i=function(a,x){return`${e}_${a}${t}${x}`},i},WB=function(e,t,i,a,x,C){i==null&&(i="__BASE"),C||(C=YB(i,C));for(var E=e.sys.textures.get(t),O=typeof i=="object"?i:E.get(i),I=O.width,V=O.height,X,q,st,it=I/a,at=V/x,ut=O.cutX,lt=O.cutY,ft=0,pt=0,ct=0;ct<x;ct++){ft=0;for(var xt=0;xt<a;xt++)st=C(xt,ct),X=ft+ut,q=pt+lt,E.add(st,0,X,q,it,at),ft+=it;pt+=at}return{getFrameNameCallback:C,cellWidth:it,cellHeight:at,columns:a,rows:x}};const Vs=Phaser.Utils.Objects.GetValue,XB=Phaser.GameObjects.Image,UB=Phaser.Utils.Objects.IsPlainObject,HB=Phaser.Math.RotateAround;var $B=function(e,t,i,a){UB(t)&&(a=t,t=Vs(a,"columns",1),i=Vs(a,"rows",1));var x=Vs(a,"createImageCallback");if(!x){var C=Vs(a,"ImageClass",XB);x=function(Pe,Ye,ke){return new C(Pe,0,0,Ye,ke)}}for(var E=Vs(a,"originX",.5),O=Vs(a,"originY",.5),I=Vs(a,"add",!0),V=Vs(a,"align",I),X=Vs(a,"objectPool",void 0),q=e.scene,st=e.texture,it=e.frame,at=WB(q,st,it,t,i),ut=at.getFrameNameCallback,lt=e.scaleX,ft=e.scaleY,pt=e.rotation,ct=e.getTopLeft(),xt=ct.x,Mt=ct.y,Pt=[],Ot=at.cellWidth*lt,It=at.cellHeight*ft,Bt=0;Bt<i;Bt++)for(var zt=0;zt<t;zt++){var Vt,_t=ut(zt,Bt);if(X&&X.length>0?Vt=X.pop().setTexture(st,_t):Vt=x(q,st,_t),I&&q.add.existing(Vt),V){var te=xt+Ot*zt,kt=Mt+It*Bt,ce=te+E*Ot,me=kt+O*It;Vt.setOrigin(E,O).setPosition(ce,me).setScale(lt,ft).setRotation(pt),HB(Vt,xt,Mt,pt)}Pt.push(Vt)}return Pt},KB={gridCutImage(e,t,i,a){a===void 0&&(a={}),a.objectPool=this.imagesPool;for(var x=$B(e,t,i,a),C,E=0,O=x.length;E<O;E++)C=x[E],C.setVisible(!0),this.add(C);return this.cellImages=x,this.setChildLocalVisible(e,!1),x},gridCutCurrentImage(e,t,i){return this.gridCutImage(this.currentImage,e,t,i)},gridCutNextImage(e,t,i){return this.gridCutImage(this.nextImage,e,t,i)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var e=this.cellImages[0].texture,t=this.cellImages,i,a,x=0,C=t.length;x<C;x++)i=t[x],this.setChildLocalAlpha(i,1).setChildLocalScale(i,1).setChildLocalVisible(i,!1),i.clearMask(),a=i.frame.name,i.setTexture(),e.remove(a);return this.imagesPool.push(...t),t.length=0,this}},Bm={setFlipX(e){return this.flipX=e,this},setFlipY(e){return this.flipY=e,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(e,t){return this.flipX=e,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}},Im={};Object.assign(Im,bB,AB,zB,KB,Bm);var ZB=function(e,t,i,a){},JB=function(e,t,i,a){e.setChildLocalAlpha(t,1-a).setChildLocalAlpha(i,a)},QB=function(e,t,i,a){e.setChildLocalAlpha(t,1)};const Gm=Phaser.Utils.Objects.IsPlainObject,Ve=Phaser.Utils.Objects.GetValue,jB=Phaser.Math.Clamp;class qh extends Ti{constructor(t,i,a,x,C,E){Gm(i)?(E=i,i=Ve(E,"x",0),a=Ve(E,"y",0),x=Ve(E,"key",void 0),C=Ve(E,"frame",void 0)):Gm(C)&&(E=C,C=void 0);var O=Ve(E,"back",void 0),I=Ve(E,"front",void 0);O||(O=t.add.image(i,a,x,C)),I||(I=t.add.image(i,a,x,C));var V=Ve(E,"width",void 0),X=Ve(E,"height",void 0),q=V!==void 0&&X!==void 0?1:0;V===void 0&&(V=I.width),X===void 0&&(X=I.height),super(t,i,a,V,X),this.type="rexTransitionImage",this._flipX=!1,this._flipY=!1,q=Ve(E,"scaleMode",q),typeof q=="string"&&(q=qB[q]),this.scaleMode=q,O.setVisible(!1),this.addMultiple([O,I]),this.backImage=O,this.frontImage=I,this.images=[this.backImage,this.frontImage],this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[],this.transitionModes=void 0,this.currentTransitionMode=void 0;var st=Ve(E,"onStart",void 0),it=Ve(E,"onProgress",void 0),at=Ve(E,"onComplete",void 0),ut=Ve(E,"dir",0);st===void 0&&it===void 0&&at===void 0&&(st=ZB,it=JB,at=QB,ut=0),this.setTransitionStartCallback(st,Ve(E,"onStartScope",void 0)).setTransitionProgressCallback(it,Ve(E,"onProgressScope",void 0)).setTransitionCompleteCallback(at,Ve(E,"onCompleteScope",void 0)).setTransitionDirection(ut).setDuration(Ve(E,"duration",1e3)).setEaseFunction(Ve(E,"ease","Linear"));var lt=Ve(E,"mask",void 0);lt&&this.setMaskGameObject(lt),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1,Qh.call(this,this.frontImage)}destroy(t){!this.scene||this.ignoreDestroy||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.images.length=0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,this.transitionModes=void 0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get tint(){return this._tint}set tint(t){this._tint!==t&&(this._tint=t,this.backImage.setTint(t),this.frontImage.setTint(t))}setTint(t){return this.tint=t,this}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}setFlipX(t){return this.flipX=t,this}toggleFlipX(){return this.flipX=!this.flipX,this}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}setFlipY(t){return this.flipY=t,this}toggleFlipY(){return this.flipY=!this.flipY,this}setFlip(t,i){return this.flipX=t,this.flipY=i,this}get t(){return this._t}set t(t){if(t=jB(t,0,1),this._t!==t){this._t=t;var i=this.currentImage,a=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),Ef.call(this,this.onStartCallback,this.onStartCallbackScope,this,i,a,t)),Ef.call(this,this.onProgressCallback,this.onProgressCallbackScope,this,i,a,t),t===1){Ef.call(this,this.onCompleteCallback,this.onCompleteCallbackScope,this,i,a,t);var x=a.texture.key,C=a.frame.name;this.frontImage.setTexture(x,C),this.backImage.setTexture(x,C),Qh.call(this,a),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,i){return super.setOrigin(t,i),this.backImage.setOrigin(t,i),this.frontImage.setOrigin(t,i),this.maskGameObject&&this.maskGameObject.setOrigin(t,i),this}setTexture(t,i){return this.frontImage.setTexture(t,i),this.backImage.setTexture(t,i).setVisible(!1),Qh.call(this,this.frontImage),this}setSize(t,i){return super.setSize(t,i),this.scaleMode&&Om.call(this),this}}var Ef=function(e,t,i,a,x,C){if(e){if(this.scaleMode){var E;a.biasScale>0&&(E=this.getChildLocalScaleX(a),E=E/a.biasScale,this.setChildLocalScale(a,E)),x.biasScale&&(E=this.getChildLocalScaleX(x),E=E/x.biasScale,this.setChildLocalScale(x,E))}if(t?e.call(t,i,a,x,C):e(i,a,x,C),this.scaleMode){var E;a.biasScale>0&&(E=this.getChildLocalScaleX(a),E=E*a.biasScale,this.setChildLocalScale(a,E)),x.biasScale&&(E=this.getChildLocalScaleX(x),E=E*x.biasScale,this.setChildLocalScale(x,E))}}};Object.assign(qh.prototype,Im);const qB={fit:1,FIT:1,envelop:2,ENVELOP:2};k.register("transitionImage",function(e,t,i,a,x){var C=new qh(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.TransitionImage",qh);const _B="slideLeft",tI="slideRight",eI="slideUp",iI="slideDown",sI="slideAwayLeft",nI="slideAwayRight",rI="slideAwayUp",aI="slideAwayDown",oI="pushLeft",hI="pushRight",lI="pushUp",uI="pushDown",dI="zoomOut",fI="zoomIn",cI="zoomInOut",vI="fade",pI="crossFade",gI="wipeLeft",mI="wipeRight",xI="wipeUp",yI="wipeDown",SI="irisOut",CI="irisIn",TI="irisInOut",MI="pieOut",PI="pieIn",EI="pieInOut",wI="blinds",bI="squares",RI="diamonds",OI="circles",AI="curtain",LI="pixellate",DI="dissolve",FI="revealLeft",BI="revealRight",II="revealUp",GI="revealDown";var kI=function(e){e.addTransitionMode(nI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=i.width*x;t.setChildLocalPosition(i,C,0)},onComplete:function(t,i,a,x){t.setChildLocalPosition(i,0,0)}}).addTransitionMode(sI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=i.width*-x;t.setChildLocalPosition(i,C,0)},onComplete:function(t,i,a,x){t.setChildLocalPosition(i,0,0)}}).addTransitionMode(aI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=i.height*x;t.setChildLocalPosition(i,0,C)},onComplete:function(t,i,a,x){t.setChildLocalPosition(i,0,0)}}).addTransitionMode(rI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=i.height*-x;t.setChildLocalPosition(i,0,C)},onComplete:function(t,i,a,x){t.setChildLocalPosition(i,0,0)}})},NI=function(e){e.addTransitionMode(tI,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=a.width*(x-1);t.setChildLocalPosition(a,C,0)},onComplete:function(t,i,a,x){t.setChildLocalPosition(a,0,0)}}).addTransitionMode(_B,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=a.width*(1-x);t.setChildLocalPosition(a,C,0)},onComplete:function(t,i,a,x){t.setChildLocalPosition(a,0,0)}}).addTransitionMode(iI,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=a.height*(x-1);t.setChildLocalPosition(a,0,C)},onComplete:function(t,i,a,x){t.setChildLocalPosition(a,0,0)}}).addTransitionMode(eI,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=a.height*(1-x);t.setChildLocalPosition(a,0,C)},onComplete:function(t,i,a,x){t.setChildLocalPosition(a,0,0)}})},VI=function(e){e.addTransitionMode(hI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=i.width*x;t.setChildLocalPosition(i,C,0);var C=a.width*(x-1);t.setChildLocalPosition(a,C,0)},onComplete:function(t,i,a,x){t.setChildLocalPosition(i,0,0),t.setChildLocalPosition(a,0,0)}}).addTransitionMode(oI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=i.width*-x;t.setChildLocalPosition(i,C,0);var C=a.width*(1-x);t.setChildLocalPosition(a,C,0)},onComplete:function(t,i,a,x){t.setChildLocalPosition(i,0,0),t.setChildLocalPosition(a,0,0)}}).addTransitionMode(uI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=i.height*x;t.setChildLocalPosition(i,0,C);var C=a.height*(x-1);t.setChildLocalPosition(a,0,C)},onComplete:function(t,i,a,x){t.setChildLocalPosition(i,0,0),t.setChildLocalPosition(a,0,0)}}).addTransitionMode(lI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=i.height*-x;t.setChildLocalPosition(i,0,C);var C=a.height*(1-x);t.setChildLocalPosition(a,0,C)},onComplete:function(t,i,a,x){t.setChildLocalPosition(i,0,0),t.setChildLocalPosition(a,0,0)}})},zI=function(e){e.addTransitionMode(dI,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=1-x;t.setChildLocalScale(i,C,C)},onComplete:function(t,i,a,x){t.setChildLocalScale(i,1,1)}}).addTransitionMode(fI,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){var C=x;t.setChildLocalScale(a,C,C)},onComplete:function(t,i,a,x){t.setChildLocalScale(a,1,1)}}).addTransitionMode(cI,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,a,x){a.tint=0},onProgress:function(t,i,a,x){var C;x<.5?(C=1-fe(x),t.setChildLocalScale(i,C,C)):(i.visible&&t.setChildVisible(i,!1),C=1-fe(x),t.setChildLocalScale(a,C,C))},onComplete:function(t,i,a,x){t.setChildLocalScale(i,1,1),t.setChildVisible(i,!0),i.tint=16777215,t.setChildLocalScale(a,1,1),t.setChildVisible(a,!0),a.tint=16777215}})},YI=function(e){e.addTransitionMode(vI,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,a,x){a.tint=0},onProgress:function(t,i,a,x){var C;x<.5?(x=fe(x),C=Math.floor(255*(1-x)),i.tint=(C<<16)+(C<<8)+C):(i.visible&&t.setChildVisible(i,!1),x=fe(x),C=Math.floor(255*(1-x)),a.tint=(C<<16)+(C<<8)+C)},onComplete:function(t,i,a,x){t.setChildVisible(i,!0),i.tint=16777215,t.setChildVisible(a,!0),a.tint=16777215}}).addTransitionMode(pI,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,a,x){},onProgress:function(t,i,a,x){t.setChildLocalAlpha(i,1-x),t.setChildLocalAlpha(a,x)},onComplete:function(t,i,a,x){t.setChildLocalAlpha(i,1)}})},WI=function(e){var t=new cs(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){var i=this.getShape("rect").fillStyle(16777215),a=1-this.value;switch(this.wipeMode){case"right":i.setSize(this.width*a,this.height).setTopLeftPosition(this.width-i.width,0);break;case"left":i.setSize(this.width*a,this.height).setTopLeftPosition(0,0);break;case"down":i.setSize(this.width,this.height*a).setTopLeftPosition(0,this.height-i.height);break;case"up":i.setSize(this.width,this.height*a).setTopLeftPosition(0,0);break}}});return t},XI=function(e){var t=WI(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(mI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,a,x,C){i.setCurrentImageMaskEnable(!0),i.maskGameObject.wipeMode="right"},onProgress:function(i,a,x,C){i.maskGameObject.setValue(C)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1)}}).addTransitionMode(gI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,a,x,C){i.setCurrentImageMaskEnable(!0),i.maskGameObject.wipeMode="left"},onProgress:function(i,a,x,C){i.maskGameObject.setValue(C)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1)}}).addTransitionMode(yI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,a,x,C){i.setCurrentImageMaskEnable(!0),i.maskGameObject.wipeMode="down"},onProgress:function(i,a,x,C){i.maskGameObject.setValue(C)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1)}}).addTransitionMode(xI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,a,x,C){i.setCurrentImageMaskEnable(!0),i.maskGameObject.wipeMode="up"},onProgress:function(i,a,x,C){i.maskGameObject.setValue(C)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1)}})},UI=function(e){var t=new cs(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){this.getShape("rect").fillStyle(16777215).setSize(this.width*this.value,this.height*this.value).setCenterPosition(this.centerX,this.centerY)}});return t},HI=function(e){var t=UI(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(SI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,a,x,C){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,a,x,C){i.maskGameObject.setValue(C)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1)}}).addTransitionMode(CI,{ease:"Linear",dir:"in",mask:t,onStart:function(i,a,x,C){i.setNextImageMaskEnable(!0,!0)},onProgress:function(i,a,x,C){i.maskGameObject.setValue(1-C)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1)}}).addTransitionMode(TI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,a,x,C){x.tint=0,i.setCurrentImageMaskEnable(!0),i.setNextImageMaskEnable(!0)},onProgress:function(i,a,x,C){var E;C<.5?(C=fe(C),E=Math.floor(255*(1-C)),i.maskGameObject.setValue(1-C),a.tint=(E<<16)+(E<<8)+E):(a.visible&&i.setChildVisible(a,!1),C=fe(C),E=Math.floor(255*(1-C)),i.maskGameObject.setValue(1-C),x.tint=(E<<16)+(E<<8)+E)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1),i.setChildVisible(a,!0),a.tint=16777215,i.setChildVisible(x,!0),x.tint=16777215}})},$I=function(e){var t=new cs(e,{type:"Graphics",create:[{name:"pie",type:"arc"}],update:function(){var i=Math.max(this.width,this.height)*2,a=90*this.value;this.getShape("pie").fillStyle(16777215).setCenterPosition(this.centerX,0).setRadius(i).setAngle(90-a,90+a).setPie()}});return t},KI=function(e){var t=$I(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(MI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,a,x,C){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,a,x,C){i.maskGameObject.setValue(C)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1)}}).addTransitionMode(PI,{ease:"Linear",dir:"in",mask:t,onStart:function(i,a,x,C){i.setNextImageMaskEnable(!0,!0)},onProgress:function(i,a,x,C){i.maskGameObject.setValue(1-C)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1)}}).addTransitionMode(EI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,a,x,C){x.tint=0,i.setCurrentImageMaskEnable(!0),i.setNextImageMaskEnable(!0)},onProgress:function(i,a,x,C){var E;C<.5?(C=fe(C),E=Math.floor(255*(1-C)),i.maskGameObject.setValue(1-C),a.tint=(E<<16)+(E<<8)+E):(a.visible&&i.setChildVisible(a,!1),C=fe(C),E=Math.floor(255*(1-C)),i.maskGameObject.setValue(1-C),x.tint=(E<<16)+(E<<8)+E)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1),i.setChildVisible(a,!0),a.tint=16777215,i.setChildVisible(x,!0),x.tint=16777215}})},ZI=function(e,t){var i=new cs(e,{type:"Graphics",create:{rectangle:t},update:function(){for(var a=this.getShapes(),x=this.width/t,C=0;C<t;C++)a[C].fillStyle(16777215).setSize(x*this.value,this.height).setTopLeftPosition(x*C,0)}});return i},JI=function(e){var t=ZI(e.scene,10);e.once("destroy",function(){t.destroy()}).addTransitionMode(wI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,a,x,C){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,a,x,C){i.maskGameObject.setValue(C)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1)}})},QI=function(e,t,i){var a=new cs(e,{type:"Graphics",create:{rectangle:t*i},update:function(){for(var x=this.getShapes(),C=this.width/t,E=this.height/i,O=0;O<i;O++)for(var I=0;I<t;I++)x[I*i+O].fillStyle(16777215).setSize(C*this.value,E*this.value).setCenterPosition(C*(I+.5),E*(O+.5))}});return a},jI=function(e){var t=QI(e.scene,Math.ceil(e.width/40),Math.ceil(e.height/40));e.once("destroy",function(){t.destroy()}).addTransitionMode(bI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,a,x,C){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,a,x,C){i.maskGameObject.setValue(C)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1)}})},qI=function(e,t,i){var a=new cs(e,{type:"Graphics",create:{lines:t*i},update:function(){for(var x=this.getShapes(),C=this.width/(t-1),E=this.height/i,O=E*2,I=C*this.value,V=E*this.value,X=0;X<i;X++)for(var q=0;q<t;q++){var st=q*C,it=X*O+q%2*E;x[q*i+X].fillStyle(16777215).start(st+I,it).lineTo(st,it+V).lineTo(st-I,it).lineTo(st,it-V).lineTo(st+I,it).close()}}});return a},_I=function(e){var t=qI(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",function(){t.destroy()}).addTransitionMode(RI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,a,x,C){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,a,x,C){i.maskGameObject.setValue(C)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1)}})},t5=function(e,t,i){var a=new cs(e,{type:"Graphics",create:{circle:t*i},update:function(){for(var x=this.getShapes(),C=this.width/(t-1),E=this.height/i,O=E*2,I=Math.max(C,E)*this.value,V=0;V<i;V++)for(var X=0;X<t;X++){var q=X*C,st=V*O+X%2*E;x[X*i+V].fillStyle(16777215).setCenterPosition(q,st).setRadius(I)}}});return a},e5=function(e){var t=t5(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",function(){t.destroy()}).addTransitionMode(OI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,a,x,C){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,a,x,C){i.maskGameObject.setValue(C)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1)}})},i5=function(e,t){var i=new cs(e,{type:"Graphics",create:{lines:t},update:function(){for(var a=this.getShapes(),x=this.width/t,C=x/2,E=0;E<t;E++){var O=x*E,I=this.height*this.value,V=O+C;a[E].fillStyle(16777215).start(O,0).horizontalLineTo(I).arc(V,I,C,180,0,!0).horizontalLineTo(-I).lineTo(O,0).close()}}});return i},s5=function(e){var t=i5(e.scene,10);e.once("destroy",function(){t.destroy()}).addTransitionMode(AI,{ease:"Linear",dir:"out",mask:t,onStart:function(i,a,x,C){x.tint=0,i.setCurrentImageMaskEnable(!0,!0),i.setNextImageMaskEnable(!0,!0)},onProgress:function(i,a,x,C){var E;C<.5?(C=fe(C),E=Math.floor(255*(1-C)),i.maskGameObject.setValue(C),a.tint=(E<<16)+(E<<8)+E):(a.visible&&i.setChildVisible(a,!1),C=fe(C),E=Math.floor(255*(1-C)),i.maskGameObject.setValue(C),x.tint=(E<<16)+(E<<8)+E)},onComplete:function(i,a,x,C){i.removeMaskGameObject(!1),i.setChildVisible(a,!0),a.tint=16777215,i.setChildVisible(x,!0),x.tint=16777215}})},n5=function(e){e.addTransitionMode(LI,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,a,x){t.setChildVisible(a,!1),i.effect=i.preFX.addPixelate(0),a.effect=a.preFX.addPixelate(0)},onProgress:function(t,i,a,x){if(x<.5){x=fe(x);var C=Math.min(i.width,i.height)/5;i.effect.amount=Math.ceil(C*x)}else{i.visible&&t.setChildVisible(i,!1),a.visible||t.setChildVisible(a,!0),x=fe(x);var C=Math.min(a.width,a.height)/5;a.effect.amount=Math.ceil(C*x)}},onComplete:function(t,i,a,x){i.preFX.remove(i.effect),delete i.effect,t.setChildVisible(i,!0),a.preFX.remove(a.effect),delete a.effect}})};const r5=`#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
// Scene buffer
uniform sampler2D uMainSampler;
uniform sampler2D uMainSampler2;

uniform int resizeMode;
uniform float progress;
uniform float fromRatio;
uniform float toRatio;
varying vec2 outFragCoord;
// Effect parameters
uniform float noiseX;
uniform float noiseY;
uniform float noiseZ;
uniform float fromEdgeStart;
uniform float fromEdgeWidth;
uniform float toEdgeStart;
uniform float toEdgeWidth;

vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 fade(vec3 t) { return t*t*t*(t*(t*6.0-15.0)+10.0); }
float Perlin(vec3 P) {
    vec3 i0 = mod289(floor(P)), i1 = mod289(i0 + vec3(1.0));
    vec3 f0 = fract(P), f1 = f0 - vec3(1.0), f = fade(f0);
    vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x), iy = vec4(i0.yy, i1.yy);
    vec4 iz0 = i0.zzzz, iz1 = i1.zzzz;
    vec4 ixy = permute(permute(ix) + iy), ixy0 = permute(ixy + iz0), ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0), gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    vec4 gx1 = ixy1 * (1.0 / 7.0), gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0); gx1 = fract(gx1);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0), sz0 = step(gz0, vec4(0.0));
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1), sz1 = step(gz1, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5); gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    gx1 -= sz1 * (step(0.0, gx1) - 0.5); gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g0 = vec3(gx0.x,gy0.x,gz0.x), g1 = vec3(gx0.y,gy0.y,gz0.y),
        g2 = vec3(gx0.z,gy0.z,gz0.z), g3 = vec3(gx0.w,gy0.w,gz0.w),
        g4 = vec3(gx1.x,gy1.x,gz1.x), g5 = vec3(gx1.y,gy1.y,gz1.y),
        g6 = vec3(gx1.z,gy1.z,gz1.z), g7 = vec3(gx1.w,gy1.w,gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g0,g0), dot(g2,g2), dot(g1,g1), dot(g3,g3)));
    vec4 norm1 = taylorInvSqrt(vec4(dot(g4,g4), dot(g6,g6), dot(g5,g5), dot(g7,g7)));
    g0 *= norm0.x; g2 *= norm0.y; g1 *= norm0.z; g3 *= norm0.w;
    g4 *= norm1.x; g6 *= norm1.y; g5 *= norm1.z; g7 *= norm1.w;
    vec4 nz = mix(vec4(dot(g0, vec3(f0.x, f0.y, f0.z)), dot(g1, vec3(f1.x, f0.y, f0.z)),
        dot(g2, vec3(f0.x, f1.y, f0.z)), dot(g3, vec3(f1.x, f1.y, f0.z))),
        vec4(dot(g4, vec3(f0.x, f0.y, f1.z)), dot(g5, vec3(f1.x, f0.y, f1.z)),
            dot(g6, vec3(f0.x, f1.y, f1.z)), dot(g7, vec3(f1.x, f1.y, f1.z))), f.z);
    return 2.2 * mix(mix(nz.x,nz.z,f.y), mix(nz.y,nz.w,f.y), f.x);
}
float Perlin(vec2 P) { return Perlin(vec3(P, 0.0)); }


vec4 getFromColor (vec2 uv) {
  return texture2D(uMainSampler, uv);
}

vec4 getToColor (vec2 uv) {
  if (resizeMode == 2) {
    //  cover
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(min(fromRatio / toRatio, 1.0), min((toRatio / fromRatio), 1.0)));
  } else if (resizeMode == 1) {
    //  contain
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(max(fromRatio / toRatio, 1.0), max((toRatio / fromRatio), 1.0)));
  } else {
    //  stretch
    return texture2D(uMainSampler2, vec2(uv.x, 1.0 - uv.y));
  }
}

vec4 transition (vec2 uv) {    
  vec4 colorFront = getFromColor(uv);
  vec4 colorTo = getToColor(uv);

  float noise = (Perlin(vec3(uv.x * noiseX, uv.y * noiseY, noiseZ)) + 1.0) / 2.0
    * (1.0 - (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth))
    + (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth) * 0.5;
  vec4 colorResult = colorFront * smoothstep(progress - (fromEdgeStart + fromEdgeWidth), progress - fromEdgeStart, noise)
    + colorTo * smoothstep((1.0 - progress) - (toEdgeStart + toEdgeWidth), (1.0 - progress) - toEdgeStart, (1.0 - noise));
  return colorResult;
}

void main () {
  vec2 uv = outFragCoord;
  gl_FragColor = transition(uv);
}
`,a5=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,qi=Phaser.Utils.Objects.GetValue,o5=Phaser.Math.Clamp;class wf extends a5{constructor(t){super({name:"rexDissolvePostFx",game:t,renderTarget:!0,fragShader:r5}),this._progress=0,this.toFrame=null,this.targetTexture=null,this.resizeMode=1,this.toRatio=1,this.noiseX=0,this.noiseY=0,this.noiseZ=0,this.fromEdgeStart=.01,this.fromEdgeWidth=.05,this.toEdgeStart=.01,this.toEdgeWidth=.05}resetFromJSON(t){return this.setProgress(qi(t,"progress",0)),this.setTransitionTargetTexture(qi(t,"toTexture","__DEFAULT"),qi(t,"toFrame",void 0),qi(t,"resizeMode",1)),this.setNoise(qi(t,"noiseX",void 0),qi(t,"noiseY",void 0),qi(t,"noiseZ",void 0)),this.setFromEdge(qi(t,"fromEdgeStart",.01),qi(t,"fromEdgeWidth",.05)),this.setToEdge(qi(t,"toEdgeStart",.01),qi(t,"toEdgeWidth",.05)),this}onBoot(){}onPreRender(){this.set1f("progress",this.progress),this.set1i("resizeMode",this.resizeMode),this.set1f("noiseX",this.noiseX),this.set1f("noiseY",this.noiseY),this.set1f("noiseZ",this.noiseZ),this.set1f("fromEdgeStart",this.fromEdgeStart),this.set1f("fromEdgeWidth",this.fromEdgeWidth),this.set1f("toEdgeStart",this.toEdgeStart),this.set1f("toEdgeWidth",this.toEdgeWidth)}onDraw(t){this.set1f("fromRatio",t.width/t.height),this.set1f("toRatio",this.toRatio),this.set1i("uMainSampler2",1),this.bindTexture(this.targetTexture,1),this.bindAndDraw(t)}get progress(){return this._progress}set progress(t){this._progress=o5(t,0,1)}setProgress(t){return this.progress=t,this}setTransitionTargetTexture(t,i,a){t===void 0&&(t="__DEFAULT");var x=this.game.textures.getFrame(t,i);return x||(x=this.game.textures.getFrame("__DEFAULT")),this.toRatio=x.width/x.height,this.toFrame=x,this.targetTexture=x.glTexture,a!==void 0&&(this.resizeMode=a),this}setResizeMode(t){return typeof t=="string"&&(t=h5[t]),this.resizeMode=t,this}setNoise(t,i,a){return t===void 0&&(t=4+Math.random()*6),i===void 0&&(i=4+Math.random()*6),a===void 0&&(a=Math.random()*10),this.noiseX=t,this.noiseY=i,this.noiseZ=a,this}setFromEdge(t,i){return this.fromEdgeStart=t,this.fromEdgeWidth=i,this}setToEdge(t,i){return this.toEdgeStart=t,this.toEdgeWidth=i,this}}var h5={stretch:0,contain:1,cover:2},l5=function(e,t,i){b(e).renderer.pipelines.addPostPipeline(t,i)},u5=function(e,t,i){i===void 0&&(i={}),e.setPostPipeline(t);var a=e.postPipelines[e.postPipelines.length-1];return a.resetFromJSON(i),i.name&&(a.name=i.name),a};const d5=Phaser.Utils.Array.SpliceOne;var f5=function(e,t,i){for(var a,x,C,a=e.postPipelines,x=a.length-1;x>=0;x--){var C=a[x];C instanceof t&&(C.destroy(),d5(a,x))}e.hasPostPipeline=e.postPipelines.length>0},c5=function(e){l5(e.scene.game,"rexDissolvePostFx",wf),e.addTransitionMode(DI,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,a,x){i.effect=u5(i,wf)},onProgress:function(t,i,a,x){i.effect.setProgress(x)},onComplete:function(t,i,a,x){f5(i,wf),delete i.effect}})};const _h=.1,v5=0,p5=0,g5=1,m5=1,km=0,Nm=1;var x5=function(e){e.addTransitionMode(BI,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,a,x){a.effect=a.preFX.addReveal(_h,v5,km)},onProgress:function(t,i,a,x){a.effect.progress=x},onComplete:function(t,i,a,x){a.preFX.remove(a.effect),delete a.effect}}).addTransitionMode(FI,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,a,x){a.effect=a.preFX.addReveal(_h,g5,km)},onProgress:function(t,i,a,x){a.effect.progress=x},onComplete:function(t,i,a,x){a.preFX.remove(a.effect),delete a.effect}}).addTransitionMode(GI,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,a,x){a.effect=a.preFX.addReveal(_h,p5,Nm)},onProgress:function(t,i,a,x){a.effect.progress=x},onComplete:function(t,i,a,x){a.preFX.remove(a.effect),delete a.effect}}).addTransitionMode(II,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,a,x){a.effect=a.preFX.addReveal(_h,m5,Nm)},onProgress:function(t,i,a,x){a.effect.progress=x},onComplete:function(t,i,a,x){a.preFX.remove(a.effect),delete a.effect}})};const Vm=[kI,NI,VI,zI,YI,HI,KI,XI,JI,jI,_I,e5,s5,n5,c5,x5];class zm extends qh{constructor(t,i,a,x,C,E){super(t,i,a,x,C,E);for(var O=0,I=Vm.length;O<I;O++)Vm[O](this)}}k.register("transitionImagePack",function(e,t,i,a,x){var C=new zm(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.TransitionImagePack",zm);var y5=function(){var e=this.image;if(!this.scaleUp&&e.width<=this.width&&e.height<=this.height)return this;var t=uf(e,this,"FIT",!0);return e.setDisplaySize(t.width,t.height),this.resetChildScaleState(e),this},Ym={scaleImage:y5};Object.assign(Ym,Bm);var S5=function(){var e=this.background;return e?(e.setOrigin(this.originX,this.originY),e.setPosition(this.x,this.y),ti(e,this.displayWidth,this.displayHeight),this.resetChildScaleState(e),this):this};const Wm=Phaser.Utils.Objects.IsPlainObject,zs=Phaser.Utils.Objects.GetValue;class tl extends Ti{constructor(t,i,a,x,C,E){Wm(i)?(E=i,i=zs(E,"x",0),a=zs(E,"y",0),x=zs(E,"key",void 0),C=zs(E,"frame",void 0)):Wm(C)&&(E=C,C=void 0);var O=zs(E,"image");O?O.setPosition(i,a).setOrigin(.5):(O=t.add.image(i,a,x,C),x===void 0&&O.setVisible(!1)),super(t,i,a,1,1),this.type="rexImageBox";var I=zs(E,"background");I&&this.add(I),this.background=I,this.add(O),this.image=O,this.scaleUp=zs(E,"scaleUp",!1);var V=zs(E,"width",O.width),X=zs(E,"height",O.height);this.resize(V,X)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.image.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.image.setFlipY(t))}resize(t,i){return super.resize(t,i),S5.call(this),this.scaleImage(),this}setTexture(t,i){var a=this.image;return a.setTexture(t,i),t!==null?(this.setChildVisible(a,!0),this.scaleImage()):this.setChildVisible(a,!1),this}}Object.assign(tl.prototype,Ym),k.register("imageBox",function(e,t,i,a,x){var C=new tl(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.ImageBox",tl),k.register("fullWindowRectangle",function(e,t){var i=new $d(this.scene,e,t);return this.scene.add.existing(i),i}),Z(window,"RexPlugins.UI.FullWindowRectangle",$d),k.register("fullWindowZone",function(){var e=new $u(this.scene);return this.scene.add.existing(e),e}),Z(window,"RexPlugins.UI.FullWindowZone",$u),k.register("cover",function(e){var t=new Zd(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Cover",Zd);var bf=function(e,t){if(this.scene.sys.scale.autoRound&&(e=Math.floor(e),t=Math.floor(t)),this.width===e&&this.height===t)return this;var i=this.node.style;return i.width=`${e}px`,i.height=`${t}px`,this.updateSize(),this};const Xm={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"],autoCapitalize:["autocapitalize","off"]},Um={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],borderRadius:["border-radius",void 0],outline:["outline","none"],direction:["direction",void 0]},C5={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"},Hm=Phaser.Utils.Objects.GetValue;var $m=function(e,t,i,a){var x=Hm(a,"preventDefault",!1),C=Hm(a,"preTest");for(let E in i)t.addEventListener(E,function(O){(!C||C(e,E))&&e.emit(i[E],e,O),x&&O.preventDefault()})};const T5=Phaser.GameObjects.DOMElement,Km=Phaser.Utils.Objects.IsPlainObject,ps=Phaser.Utils.Objects.GetValue;class el extends T5{constructor(t,i,a,x,C,E){Km(i)?(E=i,i=ps(E,"x",0),a=ps(E,"y",0),x=ps(E,"width",0),C=ps(E,"height",0)):Km(x)&&(E=x,x=ps(E,"width",0),C=ps(E,"height",0)),E===void 0&&(E={});var O,I=ps(E,"inputType",void 0);I===void 0&&(I=ps(E,"type","text")),I==="textarea"?(O=document.createElement("textarea"),O.style.resize="none"):(O=document.createElement("input"),O.type=I),ih(Xm,E,O);var V=ps(E,"style",void 0);V=ih(Um,E,V);var X=O.style;for(var q in E)if(!(q in Xm||q in Um)){if(q in X)V[q]=E[q];else if(q in O){if(q==="type")continue;O[q]=E[q]}}V["box-sizing"]="border-box",super(t,i,a,O,V),this.type="rexInputText",this.resize(x,C),$m(this,O,C5),gg(O),ps(E,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get inputType(){return this.node.tagName.toLowerCase()==="textarea"?"textarea":this.node.type}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,i){return t===void 0?this.node.select():this.node.setSelectionRange(t,i),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,i){return this.node.style[t]=i,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var M5={resize:bf};Object.assign(el.prototype,M5),k.register("inputText",function(e){var t=new el(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.InputText",el);const Zm=Phaser.Utils.Objects.GetValue;var P5=function(e,t){var i=document.createElement("input");i.type="file";var a=Zm(t,"accept",""),x=Zm(t,"multiple",!1);return i.setAttribute("accept",a),x?i.setAttribute("multiple",""):i.removeAttribute("multiple"),i},Jm=function(e,t){return e===void 0&&(e=0),new Promise(function(i,a){setTimeout(function(){i(t)},e)})},Qm=function({game:e,fileInput:t,closeDelay:i}){return th(b(e).events,"focus").then(function(){return Jm(i)}).then(function(){var a={files:t.files};return Promise.resolve(a)})};const E5=Phaser.Utils.Objects.GetValue,w5=Phaser.DOM.RemoveFromDOM;var jm=function(e,t){var i=E5(t,"closeDelay",200),a=P5(e,t);return a.click(),Qm({game:e,fileInput:a,closeDelay:i}).then(function(x){return w5(a),a.remove(),Promise.resolve(x)})},qm=function(e){return this.setOrigin(e.originX,e.originY),this.setPosition(e.x,e.y),this.resize(e.displayWidth,e.displayHeight),this},b5=function(e,t,i){if(i===void 0)switch(t){case"image":case"svg":i="textures";break;case"animation":i="json";break;case"tilemapTiledJSON":case"tilemapCSV":i="tilemap";break;case"glsl":i="shader";break;default:i=t;break}e=b(e);var a;return i==="textures"?a=e.textures:a=e.cache[i],a},_m=function(e,t,i,a,x,C){if(!(x===null||x===!1))if(Zi(x))x();else{var E=b5(e,i,x);E.exists(a)&&E.remove(a)}var O=e.load;if(C&&O.once(`filecomplete-${i}-${a}`,function(V,X,q){C(q)}),Zi(t))t();else{var I=window.URL.createObjectURL(t);O[i](a,I)}O.start()},R5=function(e,t,i,a,x){var C=this.scene;return _m(C,e,t,i,a,x),this},O5=function(e,t,i,a){var x=this.scene;return new Promise(function(C,E){var O=function(I){C(I)};_m(x,e,t,i,a,O)})},tx={loadFile:R5,loadFilePromise:O5};const A5=Phaser.GameObjects.DOMElement,ex=Phaser.Utils.Objects.IsPlainObject,gs=Phaser.Utils.Objects.GetValue;class Ka extends A5{constructor(t,i,a,x,C,E){ex(i)?(E=i,i=gs(E,"x",0),a=gs(E,"y",0),x=gs(E,"width",0),C=gs(E,"height",0)):ex(x)&&(E=x,x=gs(E,"width",0),C=gs(E,"height",0));var O=document.createElement("input");O.type="file";var I=O.style;I.display="none";var V=document.createElement("label");V.appendChild(O);var X=gs(E,"style",void 0);super(t,i,a,V,X),this.type="rexFileChooser",this.resetFromJSON(E),this.resize(x,C);var q=this;O.onchange=function(){q.emit("change",q)},this.setCloseDelay(gs(E,"closeDelay",200)),O.onclick=function(){Qm({game:t,fileInput:O,closeDelay:q.closeDelay}).then(function(){q.emit("select",q)})}}resetFromJSON(t){return this.setAccept(gs(t,"accept","")),this.setMultiple(gs(t,"multiple",!1)),this}setAccept(t){return t===void 0&&(t=""),this.fileInput.setAttribute("accept",t),this}setMultiple(t){return t===void 0&&(t=!0),t?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(t){return t===void 0&&(t=200),this.closeDelay=t,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}setOpenEnable(t){return t===void 0&&(t=!0),this.fileInput.disabled=!t,this}}var L5={resize:bf,syncTo:qm};Object.assign(Ka.prototype,L5,tx),k.register("fileChooser",function(e){var t=new Ka(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.FileChooser",Ka);var D5={setDropEnable(e){return e===void 0&&(e=!0),this.dropEnable=e,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}},F5={addFilter(e,t){return this.filters||(this.filters={}),this.filters[e]=t,this},addFilters(e){this.filters||(this.filters={});for(var t in e)this.filters[t]=e[t];return this}},ix={resize:bf,syncTo:qm};Object.assign(ix,D5,F5,tx);const B5={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"},I5=Phaser.GameObjects.DOMElement,sx=Phaser.Utils.Objects.IsPlainObject,Ys=Phaser.Utils.Objects.GetValue;class Rf extends I5{constructor(t,i,a,x,C,E){sx(i)?(E=i,i=Ys(E,"x",0),a=Ys(E,"y",0),x=Ys(E,"width",0),C=Ys(E,"height",0)):sx(x)&&(E=x,x=Ys(E,"width",0),C=Ys(E,"height",0)),E===void 0&&(E={});var O=document.createElement("div"),I=Ys(E,"style",void 0);super(t,i,a,O,I),this.type="rexFileDropZone",this.resize(x,C),this._files=[],this.setDropEnable(Ys(E,"dropEnable",!0));var V=Ys(E,"filters");V&&this.addFilters(V),$m(this,O,B5,{preventDefault:!0,preTest(X){return X.dropEnable}}),this.on("drop",function(X,q){this._files=q.dataTransfer.files;var st=this._files;if(st&&this.filters)for(var it in this.filters){for(var at=this.filters[it],ut=[],lt=0,ft=st.length;lt<ft;lt++){var pt=st[lt];at(pt,st)&&ut.push(pt)}ut.length>0&&this.emit(`drop.${it}`,ut)}},this)}get files(){return this._files}}Object.assign(Rf.prototype,ix),k.register("fileDropZone",function(e){var t=new Rf(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.FileDropZone",Rf);var G5=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,i=this.sizerChildren,a,x,C,E,O,I=!1;if(this.childrenProportion,this.orientation===0)for(var V=!0,X=0,q=i.length;X<q;X++)a=i[X],a.hasOwnProperty("rexSizer")&&(x=a.rexSizer,!x.hidden&&(C=x.proportion,C===0||e?(O=this.getChildWidth(a),x.fitRatio>0&&!x.resolved&&(O=void 0),O===void 0&&(C!==0&&!this.hasProportion0Child?O=0:I=!0)):O=0,!I&&(E=a.rexSizer.padding,O+=(E.left+E.right)*this.scaleX,V?V=!1:O+=this.space.item*this.scaleX,t+=O)));else for(var X=0,q=i.length;X<q;X++)a=i[X],a.hasOwnProperty("rexSizer")&&(x=a.rexSizer,!x.hidden&&(O=this.getChildWidth(a),O===void 0&&(I=!0),!I&&(E=x.padding,O+=(E.left+E.right)*this.scaleX,t=Math.max(O,t))));if(!I)return t+(this.space.left+this.space.right)*this.scaleX},k5=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,i=this.sizerChildren,a,x,C,E,O,I=!1;if(this.childrenProportion,this.orientation===0)for(var V=0,X=i.length;V<X;V++)a=i[V],a.hasOwnProperty("rexSizer")&&(x=a.rexSizer,!x.hidden&&(O=this.getChildHeight(a),O===void 0&&(I=!0),!I&&(E=x.padding,O+=(E.top+E.bottom)*this.scaleY,t=Math.max(O,t))));else for(var q=!0,V=0,X=i.length;V<X;V++)a=i[V],a.hasOwnProperty("rexSizer")&&(x=a.rexSizer,!x.hidden&&(C=x.proportion,C===0||e?(O=this.getChildHeight(a),x.fitRatio>0&&!x.resolved&&(O=void 0),O===void 0&&(C!==0&&!this.hasProportion0Child?O=0:I=!0)):O=0,!I&&(E=x.padding,O+=(E.top+E.bottom)*this.scaleY,q?q=!1:O+=this.space.item*this.scaleY,t+=O)));if(!I)return t+(this.space.top+this.space.bottom)*this.scaleY},N5=function(e,t){t===void 0&&(t=this.width*this.scaleX);var i,a=e.rexSizer;if(this.orientation===0)a.proportion>0&&this.proportionLength>0&&(i=a.proportion*this.proportionLength);else if(a.expand){var x=this.space,C=t-(x.left+x.right)*this.scaleX,E=a.padding;i=C-(E.left+E.right)*this.scaleX}return i},V5=function(e,t){t===void 0&&(t=this.height);var i,a=e.rexSizer;if(this.orientation===0){if(a.expand){var x=this.space,C=t-(x.top+x.bottom)*this.scaleY,E=a.padding;i=C-(E.top+E.bottom)*this.scaleY}}else a.proportion>0&&this.proportionLength>0&&(i=a.proportion*this.proportionLength);return i},z5=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,i,a=0,x=t.length;a<x;a++)i=t[a],i.isRexSizer&&e.push(i);return e},Y5=function(){this.hasRatioFitChild=!1;for(var e,t,i=this.sizerChildren,a=0,x=i.length;a<x;a++)e=i[a],t=e.rexSizer,!t.hidden&&t.fitRatio>0&&(ti(e,0,0),t.resolved=!1,this.hasRatioFitChild=!0);return this._childrenProportion=void 0,this.hasProportion0Child=!1,this.proportionLength=void 0,Ia.call(this),this};const W5=Phaser.Math.Wrap;var X5=function(){for(var e=this.sizerChildren,t,i,a,x=this.innerLeft,C=this.innerTop,E=this.innerWidth,O=this.innerHeight,I=x,V=C,X,q,st,it,at,ut,lt,ft,pt,ct=this.startChildIndex,xt=0,Mt=e.length;xt<Mt;xt++)ct===0?pt=xt:pt=W5(xt+ct,0,Mt),this.rtl&&(pt=Mt-pt-1),t=e[pt],!t.rexSizer.hidden&&(i=t.rexSizer,a=i.padding,Na.call(this,t),t.isRexSpace?(lt=0,ft=0):(lt=this.getExpandedChildWidth(t),ft=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,lt,ft),df(t,this)):ti(t,lt,ft),lt===void 0&&(lt=ne(t)),ft===void 0&&(ft=re(t)),this.orientation===0?(X=I+a.left*this.scaleX,i.proportion===0||this.proportionLength===0?st=lt:st=i.proportion*this.proportionLength,q=V+a.top*this.scaleY,it=O-(a.top+a.bottom)*this.scaleY):(X=I+a.left*this.scaleX,st=E-(a.left+a.right)*this.scaleX,q=V+a.top*this.scaleY,i.proportion===0||this.proportionLength===0?it=ft:it=i.proportion*this.proportionLength),lt===void 0&&(lt=ne(t)),ft===void 0&&(ft=re(t)),at=(i.alignOffsetX+i.alignOffsetOriginX*lt)*this.scaleX,ut=(i.alignOffsetY+i.alignOffsetOriginY*ft)*this.scaleY,Va.call(this,t,X,q,st,it,i.align,at,ut),this.orientation===0?I+=st+(a.left+a.right)*this.scaleX+this.space.item*this.scaleX:V+=it+(a.top+a.bottom)*this.scaleY+this.space.item*this.scaleY)},U5=function(t){var t=Fd.call(this,t);if(t!==void 0&&this.orientation===0&&this.proportionLength===void 0){var i=t-this.childrenWidth;i>0?(i=t-this.getChildrenWidth(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return t},H5=function(t){var t=Gd.call(this,t);if(t!==void 0&&this.orientation===1&&this.proportionLength===void 0){var i=t-this.childrenHeight;i>0?(i=t-this.getChildrenHeight(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return t},$5=function(){return this.hasRatioFitChild&&this.orientation===1?!0:Bd.call(this)},nx=function(e,t){if(this.hasRatioFitChild){var i;this.orientation===0?i=t-(this.getInnerPadding("top")+this.getInnerPadding("bottom"))*this.scaleY:e-(this.getInnerPadding("left")+this.getInnerPadding("right"))*this.scaleX;for(var a,x,C,E,O=this.sizerChildren,I=0,V=O.length;I<V;I++){var a=O[I],x=a.rexSizer;if(!x.hidden){var X=x.fitRatio;X&&(this.orientation===0?(E=i-(this.getChildOuterPadding(a,"top")+this.getChildOuterPadding(a,"bottom"))*this.scaleY,C=E*X):(C=i-(this.getChildOuterPadding(a,"top")+this.getChildOuterPadding(a,"bottom"))*this.scaleX,E=C/X),ti(a,C,E),a.isRexSizer&&a.setMinSize(C,E),x.resolved=!0)}}}},K5=function(e){this.wrapResult||(this.orientation===1&&nx.call(this,e,void 0),Id.call(this,e))},Z5=function(){return this.hasRatioFitChild&&this.orientation===0?!0:kd.call(this)},J5=function(e){this.wrapResult||(this.orientation===0&&nx.call(this,void 0,e),Nd.call(this,e))};const Q5=Phaser.GameObjects.Zone;class Of extends Q5{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var j5=function(e,t){var i=this.sizerChildren;if(i.length===0)return-1;for(var a=-1,x=1/0,C=0,E=i.length;C<E;C++){var O=i[C],I;this.orientation===0?I=Math.abs(O.left-e):I=Math.abs(O.top-t),x>I&&(x=I,a=C)}var O=i[i.length-1],I;return this.orientation===0?I=Math.abs(O.right-e):I=Math.abs(O.bottom-t),x>I&&(x=I,a=C+1),a};const rx=Phaser.Utils.Objects.IsPlainObject,Pi=Phaser.Utils.Objects.GetValue,ax=Phaser.Display.Align.CENTER,q5={min:0,full:-1};var Af=function(e,t,i,a,x,C,E,O,I,V){var X,q,st,it;Fa.call(this,e);var at=e.isRexSpace,ut=typeof t;if(t===null)return this;if(ut!=="number"){if(ut==="string")t=q5[t];else if(rx(t)){var lt=t;t=Pi(lt,"proportion",void 0),i=Pi(lt,"align",ax),a=Pi(lt,"padding",0),x=Pi(lt,"expand",!1),C=Pi(lt,"key",void 0),E=Pi(lt,"index",void 0),e.isRexSizer||(O=Pi(lt,"minWidth",void 0),I=Pi(lt,"minHeight",void 0)),V=Pi(lt,"fitRatio",0),X=Pi(lt,"offsetX",0),q=Pi(lt,"offsetY",0),st=Pi(lt,"offsetOriginX",0),it=Pi(lt,"offsetOriginY",0)}}typeof i=="string"&&(i=br[i]),t===void 0&&(t=at?1:0),i===void 0&&(i=ax),a===void 0&&(a=0),x===void 0&&(x=!1),O===void 0&&(at?O=0:e.isRexSizer||(O=e._minWidth)),I===void 0&&(at?I=0:e.isRexSizer||(I=e._minHeight)),V===void 0||V===!1?V=0:V===!0&&(V=ne(e)/re(e)),X===void 0&&(X=0),q===void 0&&(q=0),st===void 0&&(st=0),it===void 0&&(it=0);var lt=this.getSizerConfig(e);return lt.proportion=t,lt.align=i,lt.padding=zn(a),lt.expand=x,lt.fitRatio=t===0?V:0,lt.alignOffsetX=X,lt.alignOffsetY=q,lt.alignOffsetOriginX=st,lt.alignOffsetOriginY=it,E===void 0||E>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(E,0,e),e.isRexSizer||(t>0&&(this.orientation===0?e.minWidth=O===void 0?ne(e):O:e.minHeight=I===void 0?re(e):I),x&&(this.orientation===0?e.minHeight=I:e.minWidth=O)),C!==void 0&&this.addChildrenMap(C,e),this},_5={add:Af,addSpace(e){return this.insertSpace(void 0,e),this},insertSpace(e,t){return t===void 0&&(t=1),Af.call(this,new Of(this.scene),{proportion:t,minWidth:0,minHeight:0,index:e}),this},insert(e,t,i,a,x,C,E,O){return rx(i)&&(i.index=e),Af.call(this,t,i,a,x,C,E,e,O),this},insertAtPosition(e,t,i,a,x,C,E,O,I){var V=j5.call(this,e,t);return V===-1&&(V=void 0),this.insert(V,i,a,x,C,E,O,I),this}};const t4=Phaser.Utils.Array.Remove;var e4={remove(e,t){return this.getParentSizer(e)!==this?this:(t4(this.sizerChildren,e),Ba.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,Hh.call(this,e),this}},i4={getChildAlign(e){return this.getSizerConfig(e).align},setChildAlign(e,t){return typeof t=="string"&&(t=br[t]),this.getSizerConfig(e).align=t,this}},s4={getChildProportion(e){return this.getSizerConfig(e).proportion},setChildProportion(e,t){return this.getSizerConfig(e).proportion=t,this}},n4={getChildExpand(e){return this.getSizerConfig(e).expand},setChildExpand(e,t){return this.getSizerConfig(e).expand=t,this}},r4=function(e){e===void 0&&(e="left");var t=this.sizerChildren,i=t[0],a=i&&i.isRexSpace;e==="right"||e==="bottom"||e==="center"?a||this.insertSpace(0):a&&this.remove(i,!0);var x=t.length-1,C=t[x],E=C&&C.isRexSpace;return e==="center"?E||this.insertSpace(x+1):E&&this.remove(C,!0),this},Lf={sortChildren(e){return this.sizerChildren.sort(e),this},sortChildrenByData(e,t){return this.sizerChildren.sort(function(i,a){var x=i.getData(e),C=a.getData(e);return t?C-x:x-C}),this},sortChildrenByProperty(e,t){return this.sizerChildren.sort(function(i,a){var x=i[e],C=a[e];return t?C-x:x-C}),this}},ox={getChildrenWidth:G5,getChildrenHeight:k5,getExpandedChildWidth:N5,getExpandedChildHeight:V5,getChildrenSizers:z5,preLayout:Y5,layoutChildren:X5,resolveWidth:U5,resolveHeight:H5,hasWidthWrap:$5,runWidthWrap:K5,hasHeightWrap:Z5,runHeightWrap:J5,setChildrenAlignMode:r4};Object.assign(ox,_5,e4,i4,s4,n4,Lf);var a4=function(){for(var e=0,t=this.sizerChildren,i,a,x=0,C=t.length;x<C;x++)i=t[x],!i.rexSizer.hidden&&(a=i.rexSizer.proportion,a>0?e+=a:a===0&&(this.hasProportion0Child=!0));return e};const Df=Phaser.Utils.Objects.IsPlainObject,ki=Phaser.Utils.Objects.GetValue;class qt extends Un{constructor(t,i,a,x,C,E,O){Df(i)?(O=i,i=ki(O,"x",0),a=ki(O,"y",0),x=ki(O,"width",void 0),C=ki(O,"height",void 0),E=ki(O,"orientation",0)):Df(x)?(O=x,x=ki(O,"width",void 0),C=ki(O,"height",void 0),E=ki(O,"orientation",0)):Df(E)&&(O=E,E=ki(O,"orientation",0)),E===void 0&&(E=0),super(t,i,a,x,C,O),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(E),this.setItemSpacing(ki(O,"space.item",0)),this.setStartChildIndex(ki(O,"startChildIndex",0)),this.setRTL(ki(O,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=In(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=a4.call(this)),this._childrenProportion}}Object.assign(qt.prototype,ox);var il=function(e,t,i){if(e){var a=t==null,x=i==null;return a&&x||(a||(e.displayWidth=t),x||(e.displayHeight=i),a&&(e.scaleX=e.scaleY),x&&(e.scaleY=e.scaleX)),e}},o4=function(e){e===void 0?e={}:typeof e=="string"&&(e={text:e});var t=e.text||"";this.setText(t);var i=this.childrenMap.icon;if(i){e.icon?this.show(i):this.hide(i);var a=e.iconSize;a&&(this.setChildDisplaySize(i,a,a),this.iconWidth!==void 0&&this.setIconSize(a)),e.icon!==!0&&this.setIconTexture(e.icon,e.iconFrame)}var x=this.childrenMap.action;if(x){e.action?this.show(x):this.hide(x);var C=e.actionSize;C&&(this.setChildDisplaySize(x,C,C),this.actionWidth!==void 0&&this.setActionSize(C)),e.action!==!0&&this.setActionTexture(e.action,e.actionFrame)}return this},h4={appendText:Lv,resetDisplayContent:o4};class Ff extends qt{get text(){var t=this.childrenMap.text;return t?t.text:""}set text(t){var i=this.childrenMap.text;i&&i.setText(t)}setText(t){return this.text=t,this}setIconTexture(t,i){var a=this.childrenMap.icon;return!a||!a.setTexture?this:(a.setTexture(t,i),this.iconWidth!==void 0&&this.iconHeight!==void 0&&(il(a,this.iconWidth,this.iconHeight),this.resetChildScaleState(a)),this)}setTexture(t,i){return this.setIconTexture(t,i),this}setIconSize(t,i){return i===void 0&&(i=t),this.iconWidth=t,this.iconHeight=i,this}get texture(){var t=this.childrenMap.icon;if(t)return t.texture}get frame(){var t=this.childrenMap.icon;if(t)return t.frame}setActionTexture(t,i){var a=this.childrenMap.action;return!a||!a.setTexture?this:(a.setTexture(t,i),this.actionWidth!==void 0&&this.actionHeight!==void 0&&(il(a,this.actionWidth,this.actionHeight),this.resetChildScaleState(a)),this)}get actionTexture(){var t=this.childrenMap.action;if(t)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t)return t.frame}setActionSize(t,i){return i===void 0&&(i=t),this.actionWidth=t,this.actionHeight=i,this}preLayout(){var t=this.childrenMap.icon;t&&this.iconWidth!==void 0&&this.iconHeight!==void 0&&il(t,this.iconWidth,this.iconHeight);var i=this.childrenMap.action;i&&this.actionWidth!==void 0&&this.actionHeight!==void 0&&il(i,this.actionWidth,this.actionHeight),super.preLayout()}postLayout(t,i,a){var x=this.childrenMap.iconMask;x&&(x.setPosition(),this.resetChildPositionState(x));var C=this.childrenMap.actionMask;return C&&(C.setPosition(),this.resetChildPositionState(C)),super.postLayout(t,i,a),this}resize(t,i){super.resize(t,i);var a=this.childrenMap.iconMask;a&&a.resize();var x=this.childrenMap.actionMask;return x&&x.resize(),this}}Object.assign(Ff.prototype,h4);var _i=function(e,t,i,a){var x=new jh(t,i,a);if(e&&!e.isRexSizer){var C=x.createGeometryMask();e.setMask(C),this.once("destroy",function(){e.setMask(),C.destroy()})}return this.pin(x),x};const l4=Phaser.GameObjects.Text;var Bf=function(e){return e instanceof l4};const u4=Phaser.GameObjects.BitmapText;var hx=function(e){return e instanceof u4};const ei=0,ii=1,Ei=2;var fn=function(e){var t;return hx(e)?t=Ei:Bf(e)?t=ei:t=ii,t},d4=function(e,t){for(var i=[],a=e.split(`
`),x=t.style,C=x.wordWrapWidth,E=x.hasOwnProperty("wrapMode")?x.wrapMode:3,O=t.context,I=0,V=a.length;I<V;I++)c4(O,a[I],C,E,i);return i},f4=function(e,t){var i;if(t===2)i=e.split("");else{i=[];for(var a=e.split(" "),x,C=0,E=a.length;C<E;C++)x=a[C],C<E-1?ta(x)?i.push(x+" "):(i.push(...x.split("")),i.push(" ")):x!==""&&(ta(x)?i.push(x):i.push(...x.split("")))}return i},c4=function(e,t,i,a,x){if(t.length<=100){var C=e.measureText(t).width;if(C<=i)return x.push(t),x}for(var E=f4(t,a),O,I,V=[],X=i,q=0,st=E.length;q<st;q++)O=E[q],I=e.measureText(O).width,X-=I,X<0&&(x.push(V.join("")),V.length=0,X=i-I),V.push(O);return V.length>0&&x.push(V.join("")),x},If=function(e,t){var i=fn(e);switch(i){case ei:switch(typeof t=="string"&&(t=Bo[t]||0),e.style.wrapMode=t,t){case 2:case 3:e.style.wordWrapCallback=d4;break;case 1:default:e.style.wordWrapCallback=null;break}break;case ii:typeof t=="string"&&(t=Bo[t]||0),e.style.wrapMode=t;break}},v4=function(e){var t=function(i){var a=e.padding,x=i-(a.left+a.right)*e.scaleX,C=e.style;return Bf(e)?(C.wordWrapWidth=x,C.maxLines=0):(C.wrapMode===0&&(C.wrapMode=1),C.wrapWidth=x,C.maxLines=0),C.fixedWidth=i,C.fixedHeight=0,e.updateText(),e.minHeight=e.height,e};return t},p4=function(e){var t=function(i){return e.setFixedSize(i,0).runWordWrap(),e.minHeight=e.height,e};return t},g4=function(e){var t=function(i){return e.setMaxWidth(i),e.minHeight=e.height,e};return t},m4=function(e){return e instanceof ur},sl=function(e,t){return t===void 0&&(t=0),e._minWidth=t,e.runWidthWrap=m4(e)?p4(e):hx(e)?g4(e):v4(e),e};const Gf=65535;var nl=function(e,t,i){if(t==null)return e;if(t===0)return kf(e,0,i),e;var a=e.text.length;if(a===0)return kf(e,t,i),e;var x=Math.floor(t*1.5/a);i!==void 0&&x>i&&(x=Math.floor(i));for(var C={},E=ux(e,x,t,i,C),O=0;O<=Gf&&E!==0;O++){if(x+=E,x<0){x=0;break}E=ux(e,x,t,i,C)}return O===Gf&&console.warn(`FontSizeFit: Test count exceeds ${Gf}`),e.setFontSize(x),kf(e,t,i),e},lx=function(e,t,i){return i[t]===void 0&&(e.setFontSize(t),i[t]={width:e.width,height:e.height}),i[t]},ux=function(e,t,i,a,x){var C=lx(e,t,x),E=lx(e,t+1,x),O;if(a!==void 0)if(C.height<=a&&E.height>a)O=0;else{if(C.height>a)return-1;O=Math.floor(a-C.height)}var I;if(C.width<=i&&E.width>i)return 0;if(C.width>i)return-1;var I=Math.floor(i-C.width);return O===void 0?I:Math.min(I,O)},kf=function(e,t,i){var a=e.style;a&&(a.fixedWidth=t,a.parent.width=t,i!==void 0&&(a.fixedHeight=i,a.parent.height=i),a.update(!1))};const Nf=Phaser.Utils.Objects.GetValue;var rl=function(e,t){typeof t=="number"&&(t={minWidth:t});var i=Nf(t,"minWidth",0),a=Nf(t,"minHeight",0),x=Nf(t,"fitHeight",!1);return e._minWidth=i,e._minHeight=a,x?(e.runWidthWrap=function(C){return e.setFixedSize&&e.setFixedSize(0,0),e.setFontSize(1),e},e.resize=function(C,E){return nl(e,C,E),e}):(e.runWidthWrap=function(C){return e.setFixedSize&&e.setFixedSize(0,0),nl(e,C,void 0),e},e.resize=function(C,E){return e.width===C&&e.height===E||e.setFixedSize(C,E),e}),e};const ee=Phaser.Utils.Objects.GetValue;class Ws extends Ff{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexLabel";var a=ee(i,"background",void 0),x=ee(i,"icon",void 0),C=ee(i,"iconMask",void 0),E=ee(i,"text",void 0),O=ee(i,"action",void 0),I=ee(i,"actionMask",void 0),V=ee(i,"align",void 0);if(a&&this.addBackground(a),x){var X;this.orientation===0?(E||O)&&(X={right:ee(i,"space.icon",0),top:ee(i,"space.iconTop",0),bottom:ee(i,"space.iconBottom",0),left:ee(i,"space.iconLeft",0)}):(E||O)&&(X={bottom:ee(i,"space.icon",0),left:ee(i,"space.iconLeft",0),right:ee(i,"space.iconRight",0),top:ee(i,"space.iconTop",0)});var q=ee(i,"squareFitIcon",!1)?1:0;if(this.add(x,{proportion:0,padding:X,fitRatio:q}),C&&(C=_i.call(this,x,x,1)),!q){var st=ee(i,"iconSize",void 0);this.setIconSize(ee(i,"iconWidth",st),ee(i,"iconHeight",st))}}if(E){var it=ee(i,"wrapText",!1),at=ee(i,"adjustTextFontSize",!1);it?(it===!0&&(it="word"),If(E,it),i.expandTextWidth=!0,sl(E)):at&&(i.expandTextWidth=!0,i.expandTextHeight=!0,rl(E,{fitHeight:!0}));var ut=ee(i,"space.text",0),lt=ee(i,"expandTextWidth",!1),ft=ee(i,"expandTextHeight",!1),pt,X,ct;this.orientation===0?(pt=lt?1:0,O&&(X={right:ut}),ct=ft):(pt=ft?1:0,O&&(X={bottom:ut}),ct=lt),this.add(E,{proportion:pt,expand:ct,padding:X})}if(O){var X;this.orientation===0?X={top:ee(i,"space.actionTop",0),bottom:ee(i,"space.actionBottom",0),right:ee(i,"space.actionRight",0)}:X={left:ee(i,"space.actionLeft",0),right:ee(i,"space.actionRight",0),bottom:ee(i,"space.actionBottom",0)};var q=ee(i,"squareFitAction",!1)?1:0;if(this.add(O,{proportion:0,padding:X,fitRatio:q}),I&&(I=_i.call(this,O,O,1)),!q){var xt=ee(i,"actionSize");this.setActionSize(ee(i,"actionWidth",xt),ee(i,"actionHeight",xt))}}this.setChildrenAlignMode(V),this.addChildrenMap("background",a),this.addChildrenMap("icon",x),this.addChildrenMap("iconMask",C),this.addChildrenMap("text",E),this.addChildrenMap("action",O),this.addChildrenMap("actionMask",I)}}const cn=Phaser.Utils.Objects.GetValue;var x4=function(e,t){var i=cn(t,"canvas"),a=cn(i,"width",128),x=cn(i,"height",128),C=new Bn(e,0,0,a,x);e.add.existing(C);var E=cn(i,"key"),O=cn(i,"frame"),I=cn(i,"fill");return I!==void 0?C.fill(I):E!==void 0&&C.loadTexture(E,O),C.setTexture=C.loadTexture.bind(C),C},y4=function(e,t){var i=new tl(e,{scaleUp:cn(t,"scaleUpIcon",!1),background:cn(t,"iconBackground"),image:x4(e,t)});return e.add.existing(i),i};const S4=Phaser.Utils.Objects.GetValue;var dx=function(e,t){var i=S4(t,"clickTarget",this);return typeof i=="string"&&(i=e.getElement(i)),i};const C4=Phaser.Utils.Objects.GetValue;var T4=function(e,t){var i=dx(e,t);if(i){var a=C4(t,"click"),x=new Fs(i,a);return x.on("click",e.open,e),x}};const fx={accept:"image/*",multiple:!1};var cx=function(e,t){if(t.length!==0){var i=e.childrenMap.icon,a=i.image,x=t[0];return a.loadFromFilePromise(x).then(function(){return i.scaleImage(),e.emit("select",x,e),Promise.resolve(x)})}},M4=function(e,t){var i=e.scene,a=new Ka(i,fx);return i.add.existing(a),e.pin(a),a.on("change",function(){cx(e,a.files)}),a},P4={async openPromise(){var e=this;return jm(this.scene.game,fx).then(function(t){return cx(e,t.files)})},open(){return this.openPromise(),this},setClickOpenEnable(e){return e===void 0&&(e=!0),this.clickBehavior&&this.clickBehavior.setEnable(e),this.fileChooser&&this.fileChooser.setOpenEnable(e),this}},E4=function(e){if(!e)return null;var t=e.name;return t.substr(0,t.lastIndexOf("."))},w4=function(e){var t=this.childrenMap.canvas;return t.generateTexture(e),this},vx={getFileName:E4,saveTexture:w4};Object.assign(vx,P4);const b4=Phaser.Utils.Objects.GetValue;class Vf extends Ws{constructor(t,i){var a=y4(t,i);i.icon=a,super(t,i),this.type="rexImageFileInputLabel";var x=this.iconWidth,C=this.iconWidth;x!==void 0&&C!==void 0&&a.resize(x,C),this.clickTarget=dx(this,i),this.clickTarget&&(b4(i,"domButton",!0)?this.fileChooser=M4(this):this.clickBehavior=T4(this,i)),this.addChildrenMap("canvas",a.image),this.addChildrenMap("iconBackground",a.background),this.addChildrenMap("fileChooser",this.fileChooser)}postLayout(t,i,a){this.fileChooser&&(this.fileChooser.syncTo(this.clickTarget),this.resetChildState(this.fileChooser)),super.postLayout(t,i,a)}}Object.assign(Vf.prototype,vx),k.register("imageInputLabel",function(e){var t=new Vf(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.ImageInputLabel",Vf);let R4=class extends Se{constructor(t,i){return super(t),new Proxy(this,this)}get(t,i){if(se(t,i))return t[i];var a=t.parent;if(se(a,i))return a[i]}set(t,i,a){return se(t,i)?t[i]=a:se(t.parent,i)&&(t.parent[i]=a),!0}get key(){return this.parent.texture.key}set key(t){this.parent.setTexture(t,this.frame)}get frame(){return this.parent.frame.name}set frame(t){this.parent.setFrame(t)}get scale(){return this.parent.scaleX}set scale(t){this.parent.setScale(t)}};const zf=Phaser.Utils.Objects.GetValue;class O4 extends Se{constructor(t,i){super(t,i),this.style=zf(i,"style",this);var a=zf(i,"propertiesMap");this.activeStyle=Yf(i,"active",a),this.hoverStyle=Yf(i,"hover",a),this.disableStyle=Yf(i,"disable",a),this.onModifyStyle=zf(i,"onModifyStyle")}getStyle(t){return nh(this.style,t)}modifyStyle(t){for(var i in t)this.style[i]=t[i];return this.onModifyStyle&&this.onModifyStyle(this.parent,t),this}applyStyle(t){if(t){var i=this.getStyle(t);if(!xa(i,t))return this.modifyStyle(t),i}}setActiveState(t){return Wf.call(this,"active",t),this}setHoverState(t){return Wf.call(this,"hover",t),this}setDisableState(t){return Wf.call(this,"disable",t),this}}var Yf=function(e,t,i){var a=sh(e,t);if(i)for(var x in a)i.hasOwnProperty(x)&&(a[i[x]]=a[x],delete a[x]);return a},Wf=function(e,t){t===void 0&&(t=!0);var i=`${e}State`,a=`${e}Style`,x=`${e}StyleSave`;this[i]!==t&&(this[i]=t,t?this[x]=this.applyStyle(this[a]):(this.applyStyle(this[x]),this[x]=void 0))},Hn={addStyleManager(e){return this.styleManager=new O4(this,e),this},setActiveState(e){return this.styleManager.setActiveState(e),this},setHoverState(e){return this.styleManager.setHoverState(e),this},setDisableState(e){return this.styleManager.setDisableState(e),this}};const A4=Phaser.GameObjects.Image,Za=Phaser.Utils.Objects.GetValue;class Ja extends A4{constructor(t,i){i===void 0&&(i={});var a=Za(i,"x",0),x=Za(i,"y",0),C=Za(i,"key",""),E=Za(i,"frame",void 0);super(t,a,x,C,E),this.type="rexStatesImage";var O=Za(i,"effects",!0);O&&dr(this,O),this.style=new R4(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}}Object.assign(Ja.prototype,Hn),k.register("statesImage",function(e){var t=new Ja(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.StatesImage",Ja);class Qa extends Pn{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexStatesRoundRectangleShape",i.style=this,i.propertiesMap=L4,this.addStyleManager(i),delete i.style,delete i.propertiesMap}}const L4={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(Qa.prototype,Hn),k.register("statesRoundRectangle",function(e){var t=new Qa(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.StatesRoundRectangle",Qa);let D4=class extends Se{constructor(t,i){return super(t),new Proxy(this,this)}get(t,i){if(se(t,i))return t[i];var a=t.parent;if(se(a,i))return a[i]}set(t,i,a){return se(t,i)?t[i]=a:se(t.parent,i)&&(t.parent[i]=a),!0}get key(){return this.parent.texture.key}set key(t){this.key!==t&&this.parent.setTexture(t,this.frame)}get frame(){return this.parent.frame.name}set frame(t){this.frame!==t&&this.parent.setFrame(t)}};const F4=Phaser.GameObjects.NineSlice,ts=Phaser.Utils.Objects.GetValue;class ja extends F4{constructor(t,i){i===void 0&&(i={});var a=ts(i,"x",0),x=ts(i,"y",0),C=ts(i,"key",null),E=ts(i,"frame",null),O=ts(i,"width",0),I=ts(i,"height",0),V=ts(i,"leftWidth",0),X=ts(i,"rightWidth",0),q=ts(i,"topHeight",0),st=ts(i,"bottomHeight",0);super(t,a,x,C,E,O,I,V,X,q,st),this.type="rexStatesNineSlice";var it=ts(i,"effects",!0);it&&dr(this,it),this.style=new D4(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}}Object.assign(ja.prototype,Hn),k.register("statesNineSlice",function(e){var t=new ja(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.StatesNineSlice",ja);let B4=class extends Se{constructor(t,i){return super(t),new Proxy(this,this)}get(t,i){if(se(t,i))return t[i];var a=t.parent;if(se(a,i))return a[i]}set(t,i,a){return se(t,i)?t[i]=a:se(t.parent,i)&&(t.parent[i]=a),!0}get key(){return this.parent.textureKey}set key(t){this.key!==t&&this.parent.setBaseTexture(t,this.baseFrameName)}get frame(){return this.parent.baseFrameName}set frame(t){this.frame!==t&&this.parent.setBaseTexture(this.parent.textureKey,t)}};const I4=Phaser.Utils.Objects.GetValue;class qa extends N{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexStatesNinePatch";var a=I4(i,"effects",!0);a&&dr(this,a),this.style=new B4(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}}Object.assign(qa.prototype,Hn),k.register("statesNinePatch",function(e){var t=new qa(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.StatesNinePatch",qa);const G4=Phaser.GameObjects.Text,Xf=Phaser.Utils.Objects.GetValue;class al extends G4{constructor(t,i){i===void 0&&(i={});var a=Xf(i,"x",0),x=Xf(i,"y",0),C=Xf(i,"text","");super(t,a,x,C,i),this.type="rexStatesText",i.style=this.style,i.onModifyStyle=function(E,O){var I=O.hasOwnProperty("fontStyle")||O.hasOwnProperty("fontSize")||O.hasOwnProperty("fontFamily");E.style.update(I)},this.addStyleManager(i),delete i.style}}Object.assign(al.prototype,Hn),k.register("statesText",function(e){var t=new al(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.StatesText",al);class k4 extends Se{constructor(t,i){return super(t),new Proxy(this,this)}get(t,i){if(se(t,i))return t[i];var a=t.parent;if(se(a,i))return a[i]}set(t,i,a){return se(t,i)?t[i]=a:se(t.parent,i)&&(t.parent[i]=a),!0}get key(){return this.parent.texture.key}set key(t){this.parent.setTexture(t,this.frame)}get fontSize(){return this.parent.fontSize}set fontSize(t){this.parent.setFontSize(t)}get tint(){return this.parent.tintTopLeft}set tint(t){this.parent.setTint(t)}get letterSpacing(){return this.parent.letterSpacing}set letterSpacing(t){this.parent.setLetterSpacing(t)}get lineSpacing(){return this.parent.lineSpacing}set lineSpacing(t){this.parent.setLineSpacing(t)}}const N4=Phaser.GameObjects.BitmapText,$n=Phaser.Utils.Objects.GetValue;class ol extends N4{constructor(t,i){i===void 0&&(i={});var a=$n(i,"x",0),x=$n(i,"y",0),C=$n(i,"font",""),E=$n(i,"fontSize",!1),O=$n(i,"align",0),I=$n(i,"tint");super(t,a,x,C,"",E,O),this.type="rexStatesBitmapText",I!==void 0&&this.setTint(I);var V=$n(i,"effects",!0);V&&dr(this,V),this.style=new k4(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}}Object.assign(ol.prototype,Hn),k.register("statesBitmapText",function(e){var t=new ol(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.StatesBitmapText",ol);class hl extends vh{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("value")||(i.value=0),i.hasOwnProperty("hover.bar")||(i["hover.bar"]=!0),i.hasOwnProperty("easeDuration")||(i.easeDuration=200),i.hasOwnProperty("ease")||(i.ease="Quad"),Z(i,"easeValue.duration",i.easeDuration),Z(i,"easeValue.ease",i.ease),super(t,i),this.type="rexStatesBarRectangleShape",this.barState=!1,i.style=this,i.propertiesMap=V4,this.addStyleManager(i),delete i.style,delete i.propertiesMap}get bar(){return this.barState}set bar(t){t=!!t,this.barState!==t&&(this.barState=t,this.easeValueTo(this.barState?1:0))}}const V4={color:"trackColor",strokeColor:"trackStrokeColor",strokeWidth:"trackStrokeThickness"};Object.assign(hl.prototype,Hn),k.register("statesBarRectangle",function(e){var t=new hl(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.StatesBarRectangle",hl);var z4=function(e){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,Y4(this,e)),this},Y4=function(e,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var i=t.options;i.responsive=!1,i.maintainAspectRatio=!1,i.hasOwnProperty("devicePixelRatio")||(i.devicePixelRatio=1);var a=!1;i.animation===void 0?i.animation={}:i.animation===!1&&(a=!0,i.animation={});var x=i.animation;a&&(x.duration=0);var C=x.onProgress;x.onProgress=function(O){C&&C(O),e.needRedraw()};var E=x.onComplete;return x.onComplete=function(O){E&&E(O),e.needRedraw()},t},W4=function(e){if(this.chart!==void 0)if(typeof e=="string"){for(var t=this.chart.data.datasets,i,a=0,x=t.length;a<x;a++)if(i=t[a],i.label===e)return i}else return this.chart.data.datasets[e]},X4=function(e,t){var i=this.getChartDataset(e);if(i!==void 0){if(typeof t=="string"){var a=this.chart.data.labels;if(t=a.indexOf(t),t===-1)return}return i.data[t]}},U4=function(e,t,i){if(this.chart===void 0)return this;var a=this.getChartDataset(e);if(typeof t=="string"){var x=this.chart.data.labels;if(t=x.indexOf(t),t===-1)return this}return a.data[t]=i,this},H4=function(){return this.chart===void 0?this:(this.chart.update(),this)};let Uf=class extends Bn{constructor(t,i,a,x,C,E){super(t,i,a,x,C),this.type="rexChart",this.chart=void 0,E!==void 0&&this.setChart(E)}destroy(t){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,i){if(t===this.width&&i===this.height)return this;if(super.resize(t,i),this.chart){var a=this.chart;a.height=this.canvas.height,a.width=this.canvas.width,a.aspectRatio=a.height?a.width/a.height:null,a.update()}return this}};var $4={setChart:z4,getChartDataset:W4,getChartData:X4,setChartData:U4,updateChart:H4};Object.assign(Uf.prototype,$4),k.register("chart",function(e,t,i,a,x){var C=new Uf(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.Chart",Uf),k.register("container",function(e,t,i,a,x){var C=new Ti(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.Container",Ti),k.register("sizer",function(e,t,i,a,x,C){var E=new qt(this.scene,e,t,i,a,x,C);return this.scene.add.existing(E),E}),Z(window,"RexPlugins.UI.Sizer",qt);var px=function(){return Array.prototype.reduce.call(arguments,K4,0)},K4=function(e,t){return e+t},Z4=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,i,a=this.sizerChildren,x,C,E,O,I=!1;this.totalColumnProportions;for(var V=0;V<this.columnCount;V++){if(O=this.columnProportions[V],i=0,O===0||e){for(var X=0;X<this.rowCount;X++)x=a[X*this.columnCount+V],x&&(x.rexSizer.hidden||(E=this.getChildWidth(x),E===void 0&&(O!==0&&!this.hasColumnProportion0Child?E=0:I=!0),!I&&(C=x.rexSizer.padding,E+=(C.left+C.right)*this.scaleX,i=Math.max(i,E))));I||(t+=i)}I||e&&(this.columnWidth[V]=i)}if(!I){var q=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven),st=px(this.space.left,q,...this.space.column,this.space.right);return t+st*this.scaleX}},J4=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,i,a=this.sizerChildren,x,C,E,O,I=!1;this.totalRowProportions;for(var V=0;V<this.rowCount;V++){if(O=this.rowProportions[V],i=0,O===0||e){for(var X=0;X<this.columnCount;X++)x=a[V*this.columnCount+X],x&&(x.rexSizer.hidden||(E=this.getChildHeight(x),E===void 0&&(O!==0&&!this.hasRowProportion0Child?E=0:I=!0),!I&&(C=x.rexSizer.padding,E+=(C.top+C.bottom)*this.scaleY,i=Math.max(i,E))));I||(t+=i)}I||e&&(this.rowHeight[V]=i)}if(!I){var q=Math.max(this.space.indentTopOdd,this.space.indentTopEven),st=px(this.space.top,q,...this.space.row,this.space.bottom);return t+st*this.scaleY}},Q4=function(e,t){var i,a=e.rexSizer;if(a.expandWidth){var x=a.padding;i=t-(x.left+x.right)*this.scaleX}return i},j4=function(e,t){var i,a=e.rexSizer;if(a.expandHeight){var x=a.padding;i=t-(x.top+x.bottom)*this.scaleY}return i},q4=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,i,a=0,x=t.length;a<x;a++)i=t[a],i&&i.isRexSizer&&e.push(i);return e},_4=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.hasColumnProportion0Child=!1,this.hasRowProportion0Child=!1,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,Ia.call(this),this},t9=function(){for(var e,t,i,a=this.innerLeft,x=this.innerTop,C,E=x,O,I,V,X,q,st,it,at,ut,lt,ft,pt,ct=0;ct<this.rowCount;ct++){lt=this.getRowHeight(ct),ft=ct%2?this.space.indentLeftEven:this.space.indentLeftOdd,C=a+ft*this.scaleX;for(var xt=0;xt<this.columnCount;xt++){if(ut=this.getColumnWidth(xt),e=this.getChildAt(xt,ct),!e||e.rexSizer.hidden){C+=ut+this.space.column[xt]*this.scaleX;continue}Na.call(this,e),it=this.getExpandedChildWidth(e,ut),at=this.getExpandedChildHeight(e,lt),e.isRexSizer?(e.runLayout(this,it,at),df(e,this)):ti(e,it,at),t=e.rexSizer,i=t.padding,O=C+i.left*this.scaleX,V=ut-(i.left+i.right)*this.scaleX,pt=xt%2?this.space.indentTopEven:this.space.indentTopOdd,I=E+pt*this.scaleY+i.top*this.scaleY,X=lt-(i.top+i.bottom)*this.scaleY,it===void 0&&(it=ne(e)),at===void 0&&(at=re(e)),q=(t.alignOffsetX+t.alignOffsetOriginX*it)*this.scaleX,st=(t.alignOffsetY+t.alignOffsetOriginY*at)*this.scaleY,Va.call(this,e,O,I,V,X,t.align,q,st),C+=ut+this.space.column[xt]*this.scaleX}E+=lt+this.space.row[ct]*this.scaleY}},e9=function(t){var t=Fd.call(this,t);if(t!==void 0&&this.proportionWidthLength===void 0){var i=this.totalColumnProportions;if(i>0){var a=t-this.getChildrenWidth(!1);a>=0&&(this.proportionWidthLength=a/i)}else this.proportionWidthLength=0}return t},i9=function(t){var t=Gd.call(this,t);if(t!==void 0&&this.proportionHeightLength===void 0){var i=this.totalRowProportions;if(i>0){var a=t-this.getChildrenHeight(!1);a>=0&&(this.proportionHeightLength=a/i)}else this.proportionHeightLength=0}return t},s9=function(e){var t,i,a,x;for(var C in this.sizerChildren)t=this.sizerChildren[C],t&&t.isRexSizer&&!t.ignoreLayout&&(x=this.getColumnWidth(parseInt(C)%this.columnCount),i=this.getExpandedChildWidth(t,x),a=t.resolveWidth(i),a===void 0&&(a=i),t.resolveChildrenWidth(a))},n9=function(e){var t,i,a,x;for(var C in this.sizerChildren)t=this.sizerChildren[C],t&&t.isRexSizer&&!t.ignoreLayout&&(x=this.getRowHeight(Math.floor(parseInt(C)/this.rowCount)),i=this.getExpandedChildHeight(t,x),a=t.resolveHeight(i),a===void 0&&(a=i),t.resolveChildrenHeight(a))},r9=function(e){var t,i,a,x;for(var C in this.sizerChildren)t=this.sizerChildren[C],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(x=this.getColumnWidth(parseInt(C)%this.columnCount),i=this.getExpandedChildWidth(t,x),t.isRexSizer&&(a=t.resolveWidth(i),a===void 0&&(a=i)),t.runWidthWrap(a));return this},a9=function(e){var t,i,a,x;for(var C in this.sizerChildren)t=this.sizerChildren[C],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap)&&(x=this.getRowHeight(Math.floor(parseInt(C)/this.rowCount)),i=this.getExpandedChildHeight(t,x),t.isRexSizer&&(a=t.resolveHeight(i),a===void 0&&(a=i)),t.runHeightWrap(a));return this};const gx=Phaser.Utils.Objects.IsPlainObject,Ni=Phaser.Utils.Objects.GetValue,mx=Phaser.Display.Align.CENTER;var xx=function(e,t,i,a,x){if(typeof e=="number"||typeof t=="number")if(e===void 0){for(var C,E=0;E<a;E++)if(C=t*a+E,!i[C])return C}else if(t===void 0){for(var C,E=0;E<x;E++)if(C=E*a+e,!i[C])return C}else{var C=t*a+e;if(!i[C])return C}else if(t===!0){for(var C,E=0;E<a;E++)for(var O=0;O<x;O++)if(C=O*a+E,!i[C])return C}else for(var E=0,I=i.length;E<I;E++)if(!i[E])return E;return null},o9=function(e,t,i,a,x,C,E){var O,I,V,X;if(Fa.call(this,e),gx(t)){var st=t;t=Ni(st,"column",void 0),i=Ni(st,"row",void 0),a=Ni(st,"align",mx),x=Ni(st,"padding",0),C=Ni(st,"expand",!1),E=Ni(st,"key",void 0),O=Ni(st,"offsetX",0),I=Ni(st,"offsetY",0),V=Ni(st,"offsetOriginX",0),X=Ni(st,"offsetOriginY",0)}var q=xx(t,i,this.sizerChildren,this.columnCount,this.rowCount);if(q===null){if(typeof t=="number"&&typeof i=="number")return this;i===!0||typeof i=="number"?this.addEmptyColumn():this.addEmptyRow(),q=xx(t,i,this.sizerChildren,this.columnCount,this.rowCount)}typeof a=="string"&&(a=br[a]),a===void 0&&(a=mx),x===void 0&&(x=0),C===void 0&&(C=!0),O===void 0&&(O=0),I===void 0&&(I=0),V===void 0&&(V=0),X===void 0&&(X=0);var st=this.getSizerConfig(e);return st.align=a,st.padding=zn(x),gx(C)?(st.expandWidth=Ni(C,"width",!1),st.expandHeight=Ni(C,"height",!1)):(st.expandWidth=C,st.expandHeight=C),st.alignOffsetX=O,st.alignOffsetY=I,st.alignOffsetOriginX=V,st.alignOffsetOriginY=X,this.sizerChildren[q]=e,E!==void 0&&this.addChildrenMap(E,e),this},h9={add:o9},Nr=function(e,t,i,a){i===void 0&&(i=0),a===void 0&&(a=e.length-1);for(var x=i;x<=a;x++)e[x]=t;return e},l9={remove(e,t){if(this.getParentSizer(e)!==this)return this;var i=this.sizerChildren.indexOf(e);return i!==-1&&(this.sizerChildren[i]=null),Ba.call(this,e,t),this},removeAt(e,t,i){var a=this.getChildAt(e,t);return a&&this.remove(a,i),this},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--){var i=this.sizerChildren[t];i&&this.remove(i,e)}return this},clear(e){return Nr(this.sizerChildren,null),Hh.call(this,e),this}},u9={setColumnSpace(e){if(this.space.column||(this.space.column=[]),this.space.column.length=this.columnCount-1,typeof e=="number")this.space.column0=e,Nr(this.space.column,e);else{this.space.column0=e[0];for(var t=0,i=this.columnCount-1;t<i;t++)this.space.column[t]=e[t]||0}return this},setRowSpace(e){if(this.space.row||(this.space.row=[]),this.space.row.length=this.rowCount-1,typeof e=="number")this.space.row0=e,Nr(this.space.row,e);else{this.space.row0=e[t];for(var t=0,i=this.rowCount-1;t<i;t++)this.space.row[t]=e[t]||0}return this},setIndentLeft(e,t){return this.space.indentLeftOdd=e,this.space.indentLeftEven=t,this},setIndentTop(e,t){return this.space.indentTopOdd=e,this.space.indentTopEven=t,this}};const yx=Phaser.Utils.Objects.GetValue;var d9=function(e,t,i,a,x){if(e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),a===void 0&&(a=0),this.columnCount=e,this.rowCount=t,this.gridCount=e*t,this.removeAll(),this.sizerChildren.length=e*t,Nr(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=e,typeof i=="number")Nr(this.columnProportions,i);else for(var C=0;C<e;C++)this.columnProportions[C]=i[C]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof a=="number")Nr(this.rowProportions,a);else for(var C=0;C<t;C++)this.rowProportions[C]=a[C]||0;this.columnWidth=[],this.columnWidth.length=e,this.rowHeight=[],this.rowHeight.length=t,this.setColumnSpace(yx(x,"column",0)),this.setRowSpace(yx(x,"row",0));var E=this.scene,O=this.createCellContainerCallback;if(O)for(var I=0,V=this.rowCount;I<V;I++)for(var X=0,q=this.columnCount;X<q;X++){var st={column:X,row:I},it=O(E,X,I,st);it&&this.add(it,st)}return this},Sx=function(e,t,i){t===void 0&&(t=this.rowProportions[0]||0),i===void 0&&(i=this.space.row0||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var a=[e*this.columnCount,0],x=0;x<this.columnCount;x++)a.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,a),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(e,0,i),this},f9=function(e,t){return Sx.call(this,this.rowCount,e,t),this},Cx=function(e,t,i){t===void 0&&(t=this.columnProportions[0]||0),i===void 0&&(i=this.space.column0||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var a=this.rowCount-1;a>=0;a--){var x=a*this.columnCount+e;this.sizerChildren.splice(x,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(e,0,i),this},c9=function(e,t){return Cx.call(this,this.columnCount,e,t),this},Tx={getChildrenWidth:Z4,getChildrenHeight:J4,getExpandedChildWidth:Q4,getExpandedChildHeight:j4,getChildrenSizers:q4,preLayout:_4,layoutChildren:t9,resolveWidth:e9,resolveHeight:i9,resolveChildrenWidth:s9,resolveChildrenHeight:n9,runWidthWrap:r9,runHeightWrap:a9,resetGrid:d9,insertEmptyRow:Sx,addEmptyRow:f9,insertEmptyColumn:Cx,addEmptyColumn:c9};Object.assign(Tx,h9,l9,u9,Lf);var v9=function(){for(var e=0,t,i=0;i<this.columnCount;i++)t=this.columnProportions[i],t>0?e+=t:t===0&&(this.hasColumnProportion0Child=!0);return e},p9=function(){for(var e=0,t,i=0;i<this.rowCount;i++)t=this.rowProportions[i],t>0?e+=t:t===0&&(this.hasRowProportion0Child=!0);return e};const ll=Phaser.Utils.Objects.IsPlainObject,pe=Phaser.Utils.Objects.GetValue;class es extends Un{constructor(t,i,a,x,C,E,O,I,V,X){ll(i)?(X=i,i=pe(X,"x",0),a=pe(X,"y",0),x=pe(X,"width",void 0),C=pe(X,"height",void 0),E=pe(X,"column",X.col||0),O=pe(X,"row",0),I=pe(X,"columnProportions",0),V=pe(X,"rowProportions",0)):ll(x)?(X=x,x=pe(X,"width",void 0),C=pe(X,"height",void 0),E=pe(X,"column",X.col||0),O=pe(X,"row",0),I=pe(X,"columnProportions",0),V=pe(X,"rowProportions",0)):ll(E)?(X=E,E=pe(X,"column",X.col||0),O=pe(X,"row",0),I=pe(X,"columnProportions",0),V=pe(X,"rowProportions",0)):ll(I)&&(X=I,I=pe(X,"columnProportions",0),V=pe(X,"rowProportions",0)),super(t,i,a,x,C,X),this.type="rexGridSizer",this.sizerChildren=[],this.addChildrenMap("items",this.sizerChildren),this.setCreateCellContainerCallback(pe(X,"createCellContainerCallback")),this.setIndentLeft(pe(X,"space.indentLeftOdd",0),pe(X,"space.indentLeftEven",0)),this.setIndentTop(pe(X,"space.indentTopOdd",0),pe(X,"space.indentTopEven",0)),this.resetGrid(E,O,I,V,pe(X,"space",void 0))}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0,this.createCellContainerCallback=void 0)}setColumnProportion(t,i){return t>=this.columnProportions.length?this:(this.columnProportions[t]=i,this)}setRowProportion(t,i){return t>=this.rowProportions.length?this:(this.rowProportions[t]=i,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=v9.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=p9.call(this)),this._totalRowProportions}getChildAt(t,i){return this.sizerChildren[i*this.columnCount+t]}childToGridIndex(t,i){if(!t)return null;var a=this.sizerChildren.indexOf(t);return a===-1?null:(i===void 0&&(i={}),i.x=a%this.columnCount,i.y=Math.floor(a/this.columnCount),i)}getColumnWidth(t){var i=this.columnProportions[t],a=i===0?this.columnWidth[t]:i*this.proportionWidthLength;return a}getRowHeight(t){var i=this.rowProportions[t],a=i===0?this.rowHeight[t]:i*this.proportionHeightLength;return a}setCreateCellContainerCallback(t){return this.createCellContainerCallback=t,this}}Object.assign(es.prototype,Tx),k.register("gridSizer",function(e,t,i,a,x,C,E,O,I){var V=new es(this.scene,e,t,i,a,x,C,E,O,I);return this.scene.add.existing(V),V}),Z(window,"RexPlugins.UI.GridSizer",es);var g9=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t;if(this.orientation===0?e?t=this.maxChildWidth:t=this.rexSizer.resolved?this.wrapResult.width:void 0:t=this.rexSizer.resolved?this.wrapResult.width:void 0,t!==void 0)return t+(this.space.left+this.space.right)*this.scaleX},m9=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t;if(this.orientation===1?e?t=this.maxChildHeight:t=this.rexSizer.resolved?this.wrapResult.height:void 0:t=this.rexSizer.resolved?this.wrapResult.height:void 0,t!==void 0)return t+(this.space.top+this.space.bottom)*this.scaleY},x9=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,i,a=0,x=t.length;a<x;a++)i=t[a],i!==`
`&&i.isRexSizer&&e.push(i);return e},y9=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,this.wrapResult=void 0,this.rexSizer.resolved=!1,Ia.call(this),this},S9=function(){for(var e=this.orientation===0,t=e?this.innerWidth:this.innerHeight,i,a,x,C=0,E,O,I=this.innerLeft,V=this.innerTop,X,q,st,it,at,ut,lt=this.wrapResult.lines,ft,pt,ct,xt=I,Mt=V,Pt=0,Ot=lt.length;Pt<Ot;Pt++){switch(ft=lt[Pt],pt=ft.children,this.rtl&&pt.reverse(),e?(E=Pt%2?this.space.indentLeftEven:this.space.indentLeftOdd,xt=I+E*this.scaleX):(O=Pt%2?this.space.indentTopEven:this.space.indentTopOdd,Mt=V+O*this.scaleY),ct=t-(e?ft.width:ft.height),this.align){case 0:break;case 1:e?xt+=ct:Mt+=ct;break;case 2:e?xt+=ct/2:Mt+=ct/2;break;case 3:C=Hf(t,ct,this.justifyPercentage,pt.length);break;case 4:C=Hf(t,ct,this.justifyPercentage,pt.length),C===0&&(e?xt+=ct:Mt+=ct);break;case 5:C=Hf(t,ct,this.justifyPercentage,pt.length),C===0&&(e?xt+=ct/2:Mt+=ct/2);break}for(var It=!0,Bt=0,zt=pt.length;Bt<zt;Bt++)i=pt[Bt],!i.rexSizer.hidden&&(a=i.rexSizer,x=a.padding,Na.call(this,i),e?X=xt+x.left*this.scaleX:q=Mt+x.top*this.scaleY,It?It=!1:e?X+=this.space.item*this.scaleX:q+=this.space.item*this.scaleY,st=ne(i),it=re(i),e?(O=Bt%2?this.space.indentTopEven:this.space.indentTopOdd,q=Mt+O*this.scaleY+x.top*this.scaleY,xt=X+st+x.right*this.scaleX+C):(E=Bt%2?this.space.indentLeftEven:this.space.indentLeftOdd,X=xt+E*this.scaleX+x.left*this.scaleX,Mt=q+it+x.top*this.scaleY+C),at=(a.alignOffsetX+a.alignOffsetOriginX*st)*this.scaleX,ut=(a.alignOffsetY+a.alignOffsetOriginY*it)*this.scaleY,Va.call(this,i,X,q,st,it,a.align,at,ut));e?Mt+=ft.height+this.space.line*this.scaleY:xt+=ft.width+this.space.line*this.scaleX}},Hf=function(e,t,i,a){return t/e<=i?t/(a-1):0},C9=function(){return this.orientation===0?!0:Bd.call(this)},Mx=function(e){var t={lines:[],width:0,height:0},i=this.sizerChildren,a,x,C,E,O=0,I,V,X=t.lines,q=void 0,st;if(this.orientation===0){for(var it=0,at=i.length;it<at;it++){if(a=i[it],a===`
`)a=void 0,C=0,st=!0;else{if(a.rexSizer.hidden)continue;a.isRexSizer&&a.runLayout(this),C=this.getChildWidth(a),x=a.rexSizer.padding,C+=(x.left+x.right)*this.scaleX,st=O<C||q===void 0}st&&(q&&(q.width=e-(O+this.space.item*this.scaleX),t.width=Math.max(t.width,q.width),t.height+=q.height+this.space.line*this.scaleY),q={children:[],width:0,height:0},X.push(q),I=X.length%2?this.space.indentLeftOdd:this.space.indentLeftEven,O=e-I*this.scaleX),O-=C+this.space.item*this.scaleX,a&&(q.children.push(a),E=this.getChildHeight(a),x=a.rexSizer.padding,E+=(x.top+x.bottom)*this.scaleY,q.height=Math.max(q.height,E))}q&&(q.width=e-(O+this.space.item*this.scaleX),t.width=Math.max(t.width,q.width),t.height+=q.height),t.height+=Math.max(this.space.indentTopOdd,this.space.indentTopEven)*this.scaleY}else{for(var ut=e,it=0,at=i.length;it<at;it++){if(a=i[it],a===`
`)a=void 0,C=0,st=!0;else{if(a.rexSizer.hidden)continue;a.isRexSizer&&a.layout(),E=this.getChildHeight(a),x=a.rexSizer.padding,E+=(x.top+x.bottom)*this.scaleY,st=O<E||q===void 0}st&&(q&&(q.height=ut-(O+this.space.item*this.scaleY),t.height=Math.max(t.height,q.height),t.width+=q.width+this.space.line*this.scaleX),q={children:[],width:0,height:0},X.push(q),V=X.length%2?this.space.indentTopOdd:this.space.indentTopEven,O=ut-V*this.scaleY),O-=E+this.space.item*this.scaleY,a&&(q.children.push(a),C=this.getChildWidth(a),x=a.rexSizer.padding,C+=(x.left+x.right)*this.scaleX,q.width=Math.max(q.width,C))}q&&(q.height=ut-(O+this.space.item*this.scaleY),t.height=Math.max(t.height,q.height),t.width+=q.width),t.width+=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven)*this.scaleX}return t},T9=function(e){if(!this.wrapResult&&this.orientation===0){var t=e-(this.space.left+this.space.right)*this.scaleX;this.wrapResult=Mx.call(this,t),this.rexSizer.resolved=!0,Id.call(this,e)}},M9=function(){return this.orientation===1?!0:kd.call(this)},P9=function(e){if(!this.wrapResult&&this.orientation===1){var t=e-(this.space.top+this.space.bottom)*this.scaleY;this.wrapResult=Mx.call(this,t),this.rexSizer.resolved=!0,Nd.call(this,e)}},E9=function(e,t){},w9=function(e,t){};const Px=Phaser.Math.Distance.Between;var b9=function(e,t){var i=this.sizerChildren;if(i.length===0)return-1;for(var a=-1,x=1/0,C=0,E=i.length;C<E;C++){var O=i[C];if(!(Math.abs(O.centerY-t)>O.height/2)){var V=Px(O.left,O.centerY,e,t);x>V&&(x=V,a=C);var I=i[C+1];if(!(I&&I.y===O.y)){var V=Px(O.right,O.centerY,e,t);x>V&&(x=V,a=C+1)}}}return a};const R9=Phaser.Utils.Objects.IsPlainObject,Kn=Phaser.Utils.Objects.GetValue,O9=Phaser.Display.Align.CENTER;var $f=function(e,t,i,a){if(e===`
`)return this.addNewLine(),this;var x,C,E,O;if(Fa.call(this,e),R9(t)){var I=t;t=Kn(I,"padding",0),i=Kn(I,"key",void 0),a=Kn(I,"index",void 0),x=Kn(I,"offsetX",0),C=Kn(I,"offsetY",0),E=Kn(I,"offsetOriginX",0),O=Kn(I,"offsetOriginY",0)}t===void 0&&(t=0),x===void 0&&(x=0),C===void 0&&(C=0),E===void 0&&(E=0),O===void 0&&(O=0);var I=this.getSizerConfig(e);return I.align=O9,I.padding=zn(t),I.alignOffsetX=x,I.alignOffsetY=C,I.alignOffsetOriginX=E,I.alignOffsetOriginY=O,a===void 0||a>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(a,0,e),i!==void 0&&this.addChildrenMap(i,e),this},A9={add(e,t,i){if(Ji(e))for(var a=e,x=0,C=a.length;x<C;x++)$f.call(this,a[x],t);else $f.call(this,e,t,i);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(e,t,i,a){return $f.call(this,t,i,a,e),this},insertAtPosition(e,t,i,a,x){var C=b9.call(this,e,t);return C===-1&&(C=void 0),this.insert(C,i,a,x),this}};const L9=Phaser.Utils.Array.Remove;var D9={remove(e,t){return this.getParentSizer(e)!==this?this:(L9(this.sizerChildren,e),Ba.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,Hh.call(this,e),this}},Ex={getChildrenWidth:g9,getChildrenHeight:m9,getChildrenSizers:x9,preLayout:y9,layoutChildren:S9,hasWidthWrap:C9,runWidthWrap:T9,hasHeightWrap:M9,runHeightWrap:P9,getExpandedChildWidth:E9,getExpandedChildHeight:w9};Object.assign(Ex,A9,D9,Lf);var F9=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,i,a,x=!1,C=0,E=e.length;C<E;C++)i=e[C],i!==`
`&&(a=this.getChildWidth(i),a===void 0&&(x=!0),!x&&(t=Math.max(a,t)));if(!x)return t},B9=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,i,a,x=!1,C=0,E=e.length;C<E;C++)i=e[C],i!==`
`&&(a=this.getChildHeight(i),a===void 0&&(x=!0),!x&&(t=Math.max(a,t)));if(!x)return t};const wx=Phaser.Utils.Objects.IsPlainObject,si=Phaser.Utils.Objects.GetValue;class vn extends Un{constructor(t,i,a,x,C,E){wx(i)?(E=i,i=si(E,"x",0),a=si(E,"y",0),x=si(E,"width",void 0),C=si(E,"height",void 0)):wx(x)&&(E=x,x=si(E,"width",void 0),C=si(E,"height",void 0)),super(t,i,a,x,C,E),this.type="rexFixWidthSizer",this.sizerChildren=[],this.runChildrenWrapFlag=!0,this.setOrientation(si(E,"orientation",0)),this.setItemSpacing(si(E,"space.item",0)),this.setLineSpacing(si(E,"space.line",0)),this.setIntentLeft(si(E,"space.indentLeftOdd",0),si(E,"space.indentLeftEven",0)),this.setIntentTop(si(E,"space.indentTopOdd",0),si(E,"space.indentTopEven",0)),this.setAlign(si(E,"align",0)),this.setJustifyPercentage(si(E,"justifyPercentage",.25)),this.setRTL(si(E,"rtl",!1)),this.wrapResult=void 0,this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=In(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,i){return this.space.indentLeftOdd=t,this.space.indentLeftEven=i,this}setIntentTop(t,i){return this.space.indentTopOdd=t,this.space.indentTopEven=i,this}setAlign(t){return typeof t=="string"&&(t=I9[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=F9.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=B9.call(this)),this._maxChildHeight}}const I9={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(vn.prototype,Ex),k.register("fixWidthSizer",function(e,t,i,a,x){var C=new vn(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.FixWidthSizer",vn),k.register("overlapSizer",function(e,t,i,a,x){var C=new Gi(this.scene,e,t,i,a,x);return this.scene.add.existing(C),C}),Z(window,"RexPlugins.UI.OverlapSizer",Gi),k.register("space",function(){var e=new Of(this.scene);return e}),Z(window,"RexPlugins.UI.Space",Of),k.register("label",function(e){var t=new Ws(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Label",Ws);const bx=["alpha","tint","flipX","flipY"];var Kf=function(e,t){if(!t)return e;for(var i=0,a=bx.length;i<a;i++){var x=bx[i];x in t&&x in e&&(e[x]=t[x])}if("origin"in t&&"originX"in e)e.setOrigin(t.origin);else{var C,E;"originX"in t&&"originX"in e&&(C=t.originX),"originY"in t&&"originY"in e&&(E=t.originY),C!==void 0&&E!==void 0&&e.setOrigin(C,E)}return e},ze=function(e,t){var i;t&&(t.hasOwnProperty("$type")?i=t.$type:t.hasOwnProperty("barColor")?i="bar":t.hasOwnProperty("leftWidth")?i="nineSlice":t.hasOwnProperty("key")&&(i="image"));var a;switch(i){case"bar":a=new hl(e,t);break;case"image":a=new Ja(e,t);break;case"nineSlice":t.hasOwnProperty("stretchMode")?a=new qa(e,t):a=new ja(e,t);break;default:a=new Qa(e,t);break}return Kf(a,t),e.add.existing(a),a},G9=function(){switch(this.scrollMode){case 0:case 1:Zf.call(this),this.updateController(),Jf.call(this),Qf.call(this);break;default:Zf.call(this,"y"),Zf.call(this,"x"),this.updateController(),Jf.call(this,"y"),Jf.call(this,"x"),Qf.call(this,"y"),Qf.call(this,"x");break}return this},Zf=function(e){var t,i,a,x;switch(this.scrollMode){case 0:case 1:t=this.topChildOY,i=this.bottomChildOY,a=this.childrenMap.scroller,x=this.childrenMap.slider,e=this.scrollMode===0?"Y":"X";break;default:e=e.toUpperCase(),e==="Y"?(t=this.topChildOY,i=this.bottomChildOY):(t=this.leftChildOX,i=this.rightChildOX),a=this.childrenMap[`scroller${e}`],x=this.childrenMap[`slider${e}`]}var C=e==="Y"?this.scaleY:this.scaleX;i*=C,a&&a.setBounds(t,i),x&&(x.setEnable(t!==i),x.tickLength&&x.setTick(x.tickLength,t,i))},Jf=function(e){switch(this.scrollMode){case 0:case 1:var i=this.childrenMap.slider;i&&this.hideUnscrollableSlider&&this.setChildVisible(i,this.isOverflow);var x=this.childrenMap.scroller;x&&this.disableUnscrollableDrag&&x.setEnable(this.isOverflow);break;default:e=e.toUpperCase();var t=this[`isOverflow${e}`],i=this.childrenMap[`slider${e}`],a=this[`hideUnscrollableSlider${e}`];i&&a&&this.setChildVisible(i,t);var x=this.childrenMap.scroller,C=this[`disableUnscrollableDrag${e}`];x&&C&&x.setEnable(t);break}},Qf=function(e){switch(this.scrollMode){case 0:case 1:if(!this.adaptThumbSizeMode)return;var C=this.childrenMap.slider;if(!C)return;var t=Math.min(this.childVisibleHeight/this.childHeight,1),E=C.childrenMap.track,O=C.childrenMap.thumb,I=this.minThumbSize;if(this.scrollMode===0){var i=E.displayHeight*t;I!==void 0&&i<I&&(i=I),ti(O,void 0,i)}else{var a=E.displayWidth*t;I!==void 0&&a<I&&(a=I),ti(O,a,void 0)}Rx(C);break;default:e=e.toUpperCase();var x=this[`adaptThumb${e}SizeMode`];if(!x)return;var C=this.childrenMap[`slider${e}`];if(!C)return;var E=C.childrenMap.track,O=C.childrenMap.thumb,I=this[`minThumb${e}Size`];if(e==="Y"){var t=Math.min(this.childVisibleHeight/this.childHeight,1),i=E.displayHeight*t;I!==void 0&&i<I&&(i=I),ti(O,void 0,i)}else{var t=Math.min(this.childVisibleWidth/this.childWidth,1),a=E.displayWidth*t;I!==void 0&&a<I&&(a=I),ti(O,a,void 0)}Rx(C);break}},Rx=function(e){var t=e.minWidth,i=e.minHeight;e.minWidth=e.width,e.minHeight=e.height,e.layout(),e.minWidth=t,e.minHeight=i},k9=function(){switch(this.scrollMode){case 0:case 1:var e=this.childrenMap.scroller,t=this.childrenMap.slider;e&&e.setValue(this.childOY),t&&t.setValue(this.t);break;default:var i=this.childrenMap.scrollerY,a=this.childrenMap.sliderY,x=this.childrenMap.scrollerX,C=this.childrenMap.sliderX;i&&i.setValue(this.childOY),a&&a.setValue(this.t),x&&x.setValue(this.childOX),C&&C.setValue(this.s);break}};const ul=Phaser.Math.Clamp;var N9={setChildOY(e,t){return t===void 0&&(t=!1),t&&(e=ul(e,this.bottomChildOY,this.topChildOY)),this.childOY=e,this},addChildOY(e,t){return this.setChildOY(this.childOY+e,t),this},setT(e,t){return t===void 0&&(t=!1),t&&(e=ul(e,0,1)),this.t=e,this},addT(e,t){return this.setT(this.t+e,t),this},scrollToTop(){return this.t=0,this},scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this},setChildOX(e,t){return t===void 0&&(t=!1),t&&(e=ul(e,this.leftChildOX,this.rightChildOX)),this.childOX=e,this},addChildOX(e,t){return this.setChildOX(this.childOX+e,t),this},setS(e,t){return t===void 0&&(t=!1),t&&(e=ul(e,0,1)),this.s=e,this},addS(e,t){return this.setS(this.s+e,t),this},scrollToLeft(){return this.s=0,this},scrollToRight(){if(this.s=1,this.s===0)return this;do this.s=1;while(this.s!==1);return this}},Ox={resizeController:G9,updateController:k9};Object.assign(Ox,N9);var Ax={v:0,vertical:0,y:0,h:1,horizontal:1,x:1,xy:2,vh:2},jf=function(e,t){t===void 0&&(t="scrollMode"),e.hasOwnProperty(t)||(e[t]=V9(e));var i=e[t];return typeof i=="string"&&(i=Ax[i]),i},V9=function(e){var t=!!e.sliderY||!!e.scrollerY,i=!!e.sliderX||!!e.scrollerX,a;return t&&i?a=2:t?a=0:i?a=1:a=0,a};const Ue=Phaser.Utils.Objects.GetValue;var z9=function(e,t,i){var a=Ue(i,"child"),x=Ue(a,"gameObject",void 0);if(x){var C=Ue(i,"space.child",0);e.childMargin={};var E=e.childMargin,O={};if(typeof C=="number")switch(e.scrollMode){case 0:case 1:E.top=0,E.bottom=0,E.left=0,E.right=0;break;default:E.top=C,E.bottom=C,E.left=C,E.right=C;break}else switch(e.scrollMode){case 0:E.top=Ue(C,"top",0),E.bottom=Ue(C,"bottom",0),O.left=Ue(C,"left",0),O.right=Ue(C,"right",0);break;case 1:E.top=Ue(C,"left",0),E.bottom=Ue(C,"right",0),O.top=Ue(C,"top",0),O.bottom=Ue(C,"bottom",0);break;default:E.top=Ue(C,"top",0),E.bottom=Ue(C,"bottom",0),E.left=Ue(C,"left",0),E.right=Ue(C,"right",0);break}t.add(x,{column:1,row:1,align:Ue(a,"align","center"),padding:O,expand:{width:Ue(a,"expandWidth",!0),height:Ue(a,"expandHeight",!0)}})}e.addChildrenMap("child",x)};const Lx=Phaser.Math.Percent;var Y9=function(e,t,i){var a;return e.y===t.y?a=Lx(i.x,e.x,t.x):e.x===t.x&&(a=Lx(i.y,e.y,t.y)),a},Dx=function(e,t){qf.x=e,qf.y=t;var i,a;this.reverseAxis?(i=this.getEndPoint(),a=this.getStartPoint()):(i=this.getStartPoint(),a=this.getEndPoint());var x=Y9(i,a,qf);return x},qf={},W9=function(e,t,i){!this.enable||!this.inputActive||(this.value=Dx.call(this,t,i))},_f=function(e){if(!(!this.enable||!this.inputActive)&&e.isDown){var t=Dx.call(this,e.worldX,e.worldY);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-t)<.1?this.value=t:this.easeValueTo(t)}};const X9=Phaser.Utils.Objects.GetValue;var U9=function(e){this.inputActive=!1;var t=X9(e,"input",0);typeof t=="string"&&(t=H9[t]);var i=this.childrenMap.thumb;switch(t){case 0:i&&(i.setInteractive(),this.scene.input.setDraggable(i),i.on("dragstart",function(x){this.inputActive=!0,this.eventEmitter.emit("inputstart",x)},this).on("dragend",function(x){this.inputActive=!1,this.eventEmitter.emit("inputend",x)},this).on("drag",W9,this));break;case 1:this.setInteractive().on("pointerdown",function(x){this.inputActive=!0,this.eventEmitter.emit("inputstart",x)},this).on("pointerdown",_f,this);var a=function(x){this.inputActive&&(this.inputActive=!1,this.eventEmitter.emit("inputend",x))};this.scene.input.on("pointerup",a,this).on("pointermove",_f,this),this.once("destroy",function(){this.scene.input.on("pointerup",a,this).off("pointermove",_f,this)},this);break}};const H9={pan:0,drag:0,click:1,none:-1};var Fx=function(e,t){t===void 0&&(t=$9);var i=this.childrenMap.thumb,a=i.x,x=i.y;return Da(i,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,e),t.x=i.x,t.y=i.y,i.x=a,i.y=x,t},$9={};const K9=Phaser.Display.Align.LEFT_CENTER,Z9=Phaser.Display.Align.TOP_CENTER;var J9=function(e){if(e===void 0&&(e=Q9),this.childrenMap.thumb){var t=this.orientation===0?K9:Z9;Fx.call(this,t,e)}else this.orientation===0?(e.x=this.innerLeft+1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerTop+1);return e},Q9={};const j9=Phaser.Display.Align.RIGHT_CENTER,q9=Phaser.Display.Align.BOTTOM_CENTER;var _9=function(e){if(e===void 0&&(e=tG),this.childrenMap.thumb){var t=this.orientation===0?j9:q9;Fx.call(this,t,e)}else this.orientation===0?(e.x=this.innerRight-1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerBottom-1);return e},tG={};const Bx=Phaser.Math.Linear;var eG=function(e,t,i,a){return a===void 0&&(a=iG),a.x=Bx(t.x,i.x,e),a.y=Bx(t.y,i.y,e),a},iG={},sG=function(e){var t=this.childrenMap.thumb;if(t===void 0)return this;e===void 0&&(e=this.value);var i,a;return this.reverseAxis?(i=this.getEndPoint(),a=this.getStartPoint()):(i=this.getStartPoint(),a=this.getEndPoint()),eG(e,i,a,t),t.x+=this.thumbOffsetX,t.y+=this.thumbOffsetY,this.resetChildPositionState(t),this};const nG=Phaser.Display.Align.LEFT_CENTER,rG=Phaser.Display.Align.TOP_CENTER,aG=Phaser.Display.Align.RIGHT_CENTER,oG=Phaser.Display.Align.BOTTOM_CENTER;var hG=function(e){var t=this.childrenMap.indicator;if(t===void 0)return this;e===void 0&&(e=this.value);var i=this.reverseAxis,a,x,C=this.childrenMap.thumb;if(C)if(this.orientation===0){var E=ne(C);if(i){var O=C.x-E*C.originX;a=this.right-O}else{var O=C.x-E*C.originX,I=O+E;a=I-this.left}}else{var V=re(C);if(i){var X=C.y-V*C.originY;x=this.bottom-X}else{var X=C.y-V*C.originY,q=X+V;x=q-this.top}}else this.orientation===0?a=this.width*e:x=this.height*e;ti(t,a,x);var st;i?st=this.orientation===0?aG:oG:st=this.orientation===0?nG:rG,y0(t,this,st),this.resetChildPositionState(t)};const wi=Phaser.Utils.Objects.GetValue,dl=Phaser.Utils.Objects.IsPlainObject,lG=Phaser.Math.Clamp,uG=Phaser.Math.Snap.To;class Vr extends an(qt){constructor(t,i){super(t,i),this.type="rexSlider",this.bootProgressBase(i),this.reverseAxis=wi(i,"reverseAxis",!1);var a=wi(i,"background",void 0),x=wi(i,"track",void 0),C=wi(i,"indicator",void 0),E=wi(i,"thumb",void 0);if(a&&(dl(a)&&(a=ze(t,a)),this.addBackground(a)),x&&(dl(x)&&(x=ze(t,x)),this.add(x,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0})),C&&(dl(C)&&(C=ze(t,C)),this.pin(C)),E){dl(E)&&(E=ze(t,E)),this.pin(E);var O=wi(i,"thumbOffsetX",0),I=wi(i,"thumbOffsetY",0);this.setThumbOffset(O,I)}this.addChildrenMap("background",a),this.addChildrenMap("track",x),this.addChildrenMap("indicator",C),this.addChildrenMap("thumb",E),this.setEnable(wi(i,"enable",void 0));var V=wi(i,"tick",void 0);V===void 0&&(V=wi(i,"gap",void 0)),this.setGap(V),U9.call(this,i),this.setValue(wi(i,"value",0),wi(i,"min",void 0),wi(i,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,i,a){return t&&i!==void 0&&(t=t/(a-i)),this.gap=t,this}setTick(t,i,a){return this.setGap(t,i,a),this}get tick(){return this.gap}set tick(t){this.gap=t}setThumbOffset(t,i){return this.thumbOffsetX=t,this.thumbOffsetY=i,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=uG(t,this.gap));var i=this._value;this._value=lG(t,0,1),i!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter))}postLayout(t,i,a){return this.updateThumb(),this.updateIndicator(),super.postLayout(t,i,a),this}}var dG={getStartPoint:J9,getEndPoint:_9,updateThumb:sG,updateIndicator:hG};Object.assign(Vr.prototype,dG);const mi=Phaser.Utils.Objects.GetValue;class tc extends qt{constructor(t,i){super(t,i),this.type="rexScrollBar";var a=mi(i,"background",void 0),x=mi(i,"buttons",void 0),C=mi(x,"top",mi(x,"left",void 0)),E=mi(x,"bottom",mi(x,"right",void 0)),O,I=mi(i,"slider",void 0);if(a&&this.addBackground(a),C){this.add(C);var V=new Fr(C);V.on("intouch",function(){if(this.enable){var lt=O.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=lt}},this)}if(I){I.orientation=this.orientation,I.eventEmitter=this,I.value=null;var X;if(this.orientation===0){var q=mi(I,"width",void 0);X=q===void 0?1:0}else{var st=mi(I,"height",void 0);X=st===void 0?1:0}O=new Vr(t,I),t.add.existing(O),this.add(O,{proportion:X})}if(E){this.add(E);var V=new Fr(E);V.on("intouch",function(){if(this.enable){var ft=O.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=ft}},this)}var it=[C,E];this.addChildrenMap("background",a),this.addChildrenMap("slider",O),this.addChildrenMap("buttons",it);var at=mi(i,"valuechangeCallback",null);if(at!==null){var ut=mi(i,"valuechangeCallbackScope",void 0);this.on("valuechange",at,ut)}this.setEnable(mi(i,"enable",void 0)),this.setValue(mi(i,"value",0)),this.setScrollStep(mi(x,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,i,a){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,i,a),this}addValue(t,i,a){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,i,a),this}getValue(t,i){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,i):0}easeValueTo(t,i,a){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,i,a),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}setGap(t,i,a){return this.childrenMap.slider&&this.childrenMap.slider.setGap(t,i,a),this}get gap(){if(this.childrenMap.slider)return this.childrenMap.slider.gap}set gap(t){this.childrenMap.slider&&(this.childrenMap.slider.gap=t)}setTick(t,i,a){return this.setGap(t,i,a),this}get tick(){if(this.childrenMap.slider)return this.childrenMap.slider.tick}set tick(t){this.childrenMap.slider&&(this.childrenMap.slider.tick=t)}}var fG=function(e,t){t===void 0&&(t={});var i=Hi(t);t={slider:i},t.orientation=i.orientation,delete i.orientation,t.background=i.background,delete i.background,t.buttons=i.buttons,delete i.buttons,t.value=null;var a=new tc(e,t);e.add.existing(a);var x=a.childrenMap.slider;return a.addChildrenMap("track",x.childrenMap.track),a.addChildrenMap("indicator",x.childrenMap.indicator),a.addChildrenMap("thumb",x.childrenMap.thumb),a};const cG=Phaser.Math.Snap.To;Phaser.Math.Clamp;var vG=function(){this.emit("dragstart")},pG=function(){this.emit("dragend")},gG=function(){this.value+=this.dragDelta},mG=function(){var e=this.value,t=this.dragSpeed,i=this.snapStep,a=!!i;if(a){var C=e,E=t===0?0:t*t/(2*this.slidingDeceleration);if(C+=t>0?E:-E,C=cG(C,i,this.minValue),E=Math.abs(C-e),E>0){var x;t===0?(x=this.backDeceleration,t=Math.sqrt(2*x*E)):(x=t*t/(2*E),x*=.99),this._slowDown.init(e,void 0,t,x,C)}else this._slowDown.stop(),this._state.next()}else if(t===0)this._slowDown.stop(),this._state.next();else{var x=this.slidingDeceleration;this._slowDown.init(e,t>0,t,x)}},xG=function(e,t){t*=.001;var i=this._slowDown.update(t).value;this.overMax(i)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(i)?(this.value=this.minValue,this._slowDown.stop()):this.value=i},yG=function(){var e=this.value,t=this.outOfMinBound?this.minValue:this.maxValue,i=Math.abs(t-e),a=this.backDeceleration,x=Math.sqrt(2*a*i);this._slowDown.init(e,void 0,x,a,t)},SG=function(e,t){t*=.001,this.value=this._slowDown.update(t).value,this._slowDown.isMoving||this._state.next()},Ix=function(){this._slowDown.stop()};class CG extends Gs{constructor(t,i){super(i),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,i=this.parent,a=i.dragState;return a.isDown&&(t=i.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,i){this.next()}next_DRAGBEGIN(){var t,i=this.parent,a=i.dragState;return a.isDown?t=a.pointer.getDistance()>=i.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,i){this.next()}next_DRAG(){var t,i=this.parent,a=i.dragState;return a.isUp&&(i.outOfBounds?t="BACK":i.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,i){var a=this.parent,x=a.dragState;x.justMoved&&gG.call(a),this.next()}enter_DRAG(){vG.call(this.parent)}exit_DRAG(){pG.call(this.parent)}next_SLIDE(){var t,i=this.parent,a=i.dragState;return a.isDown?t="DRAG":i.isSliding||(t="IDLE"),t}enter_SLIDE(){mG.call(this.parent)}exit_SLIDE(){Ix.call(this.parent)}update_SLIDE(t,i){xG.call(this.parent,t,i),this.next()}next_BACK(){var t,i=this.parent,a=i.dragState;return a.isDown?t="DRAG":i.isPullBack||(t="IDLE"),t}enter_BACK(){yG.call(this.parent)}exit_BACK(){Ix.call(this.parent)}update_BACK(t,i){SG.call(this.parent,t,i),this.next()}}const _a=Phaser.Utils.Objects.GetValue,TG=Phaser.Math.Distance.Between;class MG extends Se{constructor(t,i){super(t,i),this._enable=void 0,this.rectBoundsInteractive=_a(i,"rectBoundsInteractive",!1),this.rectBoundsInteractive||t.setInteractive(_a(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(_a(t,"enable",!0)),this.holdThreshold=_a(t,"holdThreshold",50),this.pointerOutReleaseEnable=_a(t,"pointerOutRelease",!0),this}boot(){var t=this.scene,i=this.parent;this.rectBoundsInteractive?(t.input.on("pointerdown",this.onPointIn,this),t.input.on("pointerup",this.onPointOut,this),t.input.on("pointermove",this.onPointerMove,this)):(i.on("pointerdown",this.onPointIn,this),i.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&i.on("pointerout",this.onPointOut,this),i.on("pointermove",this.onPointerMove,this)),t.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){if(!this.isShutdown){var i=this.scene;this.parent,this.rectBoundsInteractive&&(i.input.off("pointerdown",this.onPointIn,this),i.input.off("pointerup",this.onPointOut,this),i.input.off("pointermove",this.onPointerMove,this)),i.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t)}}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=Ju(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=TG(this.preX,this.preY,this.x,this.y),i=t/(this.dt*.001);return i}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,i,a){!this.enable||!t.isDown||this.pointer!==void 0||this.rectBoundsInteractive&&!ds(this.parent,t)||(this.pointer=t,this.localX=i,this.localY=a)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,i,a){if(!(!this.enable||!t.isDown||this.pointer!==t)){if(this.rectBoundsInteractive&&this.pointerOutReleaseEnable&&!ds(this.parent,t)){this.onPointOut(t);return}this.localX=i,this.localY=a}}preupdate(t,i){if(this.enable){var a=this.pointer;this.justMoved=!1,a&&!this.isInTouched?(this.x=a.worldX,this.y=a.worldY,this.preX=a.worldX,this.preY=a.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",a,this.localX,this.localY)):a&&this.isInTouched?this.x===a.x&&this.y===a.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=a.worldX,this.y=a.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",a,this.localX,this.localY)):!a&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",a))}}}const ec=Phaser.Utils.Objects.GetValue;class PG{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(ec(t,"value",0)),this.setSpeed(ec(t,"speed",0)),this.setAcceleration(ec(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class EG{constructor(){this.value,this.dir,this.movement=new PG}init(t,i,a,x,C){return this.value=t,this.end=C,C!==void 0?this.dir=t<C:this.dir=i,a=Math.abs(a),this.movement.setSpeed(a).setAcceleration(-x),this}stop(){this.movement.reset()}update(t){var i=this.movement.getDeltaValue(t);return this.dir||(i=-i),this.end===void 0?this.value+=i:i===0?this.value=this.end:(this.value+=i,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const Ae=Phaser.Utils.Objects.GetValue,wG=Phaser.Math.Clamp;class bG extends Se{constructor(t,i){super(t,i);var a=Ae(i,"enable",!0);this._state=new CG(this,{enable:a,eventEmitter:!1});var x={rectBoundsInteractive:Ae(i,"rectBoundsInteractive",!1),inputConfig:Ae(i,"inputConfig",void 0),enable:a,pointerOutRelease:Ae(i,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new MG(t,x),this._enable=void 0,this._value=void 0,this._slowDown=new EG,this.setSnapStep(Ae(i,"snapStep",void 0));var C=Ae(i,"valuechangeCallback",null);if(C!==null){var E=Ae(i,"valuechangeCallbackScope",void 0);this.on("valuechange",C,E)}if(C=Ae(i,"overmaxCallback",null),C!==null){var E=Ae(i,"overmaxCallbackScope",void 0);this.on("overmax",C,E)}if(C=Ae(i,"overminCallback",null),C!==null){var E=Ae(i,"overminCallbackScope",void 0);this.on("overmin",C,E)}this.resetFromJSON(i),this.boot()}resetFromJSON(t){this.setOrientationMode(Ae(t,"orientation",0)),this.setDragThreshold(Ae(t,"threshold",10)),this.setSlidingDeceleration(Ae(t,"slidingDeceleration",5e3)),this.setBackDeceleration(Ae(t,"backDeceleration",2e3));var i=Ae(t,"dragRate",1);i=i*(Ae(t,"dragReverse",!1)?-1:1),this.setDragRate(i);var a=Ae(t,"bounds",void 0);return a?this.setBounds(a):this.setBounds(Ae(t,"max",0),Ae(t,"min",0)),this.setValue(Ae(t,"value",this.maxValue||0)),this.setEnable(Ae(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=RG[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRate(t){return this.dragRate=t,this}setBounds(t,i){if(Array.isArray(t)){var a=t;t=a[0],i=a[1]}return t<i?(this.minValue=t,this.maxValue=i):(this.minValue=i,this.maxValue=t),this}setSnapStep(t){return this.snapStep=t,this}get value(){return this._value}set value(t){if(t!==this._value){var i=this._value,a=this.overMax(t),x=this.overMin(t);a&&this.emit("overmax",t,i),x&&this.emit("overmin",t,i),this.backEnable||(a&&(t=this.maxValue),x&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,i)}}setValue(t,i){return i===void 0&&(i=!1),i&&(t=wG(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,i){return this.setValue(this.value+t,i),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRate,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRate,t}}const RG={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},fl=Phaser.Utils.Objects.GetValue;class OG extends Se{constructor(t,i){switch(super(t,i),this.parent!==this.scene?this.focusMode=fl(i,"focus",!0):this.focusMode=!1,typeof this.focusMode=="boolean"&&(this.focusMode=this.focusMode?1:0),this.setSpeed(fl(i,"speed",.1)),this.setEnable(fl(i,"enable",!0)),this.focusMode){case 0:case 2:this.scene.input.on("wheel",this.onSceneScroll,this);break;default:t.setInteractive(fl(i,"inputConfig",void 0)).on("wheel",function(a,x,C,E,O){this.tryScroll(C)},this);break}}destroy(){switch(this.focusMode){case 0:case 2:this.scene.input.off("wheel",this.onSceneScroll,this);break}}onSceneScroll(t,i,a,x,C,E){this.focusMode===2&&!ds(this.parent,t)||this.tryScroll(x)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}tryScroll(t){if(this.enable)return this.scroll(t),this}scroll(t){return t*=this.speed,this.emit("scroll",t,this.parent,this),this}}const Me=Phaser.Utils.Objects.GetValue,AG=Phaser.Math.Snap.To;var cl=function(e,t,i,a){i=i.toUpperCase();var x=i==="Y",C=e.scrollMode===2,E=e.childrenMap.child,O,I=`snapStep${i}`;if(C)O=Me(a,I,void 0);else{var O=Me(a,"snapStep",void 0);O===void 0&&(O=Me(a,I,void 0))}e[I]=O;var V,X,q=`slider${i}`;if(C||a.hasOwnProperty(q)?V=Me(a,q,void 0):V=Me(a,"slider",void 0),V){V===!0&&(V={}),V.orientation=x?1:0,X=fG(e.scene,V);var st,it,at,ut=Me(V,"position",0);typeof ut=="string"&&(ut=LG[ut]);var lt=Me(a,`space.slider${i}`,void 0),ft;lt===void 0&&(lt=Me(a,"space.slider",void 0),lt===void 0&&(C?lt=0:ft=Me(a,"space.child",0)));var pt;ft===void 0?pt=typeof lt=="number":pt=typeof ft=="number",x?ut===0?(st=2,it=1,ft===void 0?at=pt?{left:lt}:lt:at={left:Me(ft,"right",ft)}):(st=0,it=1,ft===void 0?at=pt?{right:lt}:lt:at={right:Me(ft,"left",ft)}):ut===0?(st=1,it=2,ft===void 0?at=pt?{top:lt}:lt:at={top:Me(ft,"bottom",ft)}):(st=1,it=0,ft===void 0?at=pt?{bottom:lt}:lt:at={bottom:Me(ft,"top",ft)}),t.add(X,{column:st,row:it,align:"center",padding:at,expand:!0}),e[`hideUnscrollableSlider${i}`]=Me(V,"hideUnscrollableSlider",!1),e[`disableUnscrollableDrag${i}`]=Me(V,"disableUnscrollableDrag",!1),e[`adaptThumb${i}SizeMode`]=Me(V,"adaptThumbSize",!1),e[`minThumb${i}Size`]=Me(V,"minThumbSize",void 0)}else e[`hideUnscrollableSlider${i}`]=!1,e[`disableUnscrollableDrag${i}`]=!1,e[`adaptThumb${i}SizeMode`]=!1,e[`minThumb${i}Size`]=void 0;var ct=Me(a,"scrollDetectionMode");typeof ct=="string"&&(ct=DG[ct]);var xt,Mt,Pt=`scroller${i}`;C||a.hasOwnProperty(Pt)?xt=Me(a,Pt,!0):xt=Me(a,"scroller",!0),xt&&E&&(xt===!0&&(xt={}),xt.orientation=x?0:1,ct!==void 0&&(xt.rectBoundsInteractive=ct===1),xt.snapStep=O,Mt=new bG(E,xt),E.isRexContainerLite&&E.sendChildToBack(E));var Ot=Me(a,C?`mouseWheelScroller${i}`:"mouseWheelScroller",!1),It;if(Ot&&E&&(ct!==void 0&&(Ot.focus=ct===1?2:0),It=new OG(E,Ot)),e.addChildrenMap(`slider${i}`,X),e.addChildrenMap(`scroller${i}`,Mt),e.addChildrenMap(`mouseWheelScroller${i}`,It),(!C||x)&&(e.hideUnscrollableSlider=e[`hideUnscrollableSlider${i}`],e.disableUnscrollableDrag=e[`disableUnscrollableDrag${i}`],e.adaptThumbSizeMode=e[`adaptThumb${i}SizeMode`],e.minThumbSize=e[`minThumb${i}Size`],e.addChildrenMap("slider",X),e.addChildrenMap("scroller",Mt),e.addChildrenMap("mouseWheelScroller",It)),X){var Bt,zt;C?(Bt=x?"t":"s",zt=`scroll${i}`):(Bt="t",zt="scroll"),X.on("valuechange",function(te){e[Bt]=te,e.emit(zt,e)}).on("inputend",function(){var te=e[`snapStep${i}`];if(te){var kt=e[x?"topChildOY":"leftChildOX"],ce=e[x?"bottomChildOY":"rightChildOX"],me=e[`childO${i}`],Pe=AG(me,te,kt),Ye=500*(Math.abs(Pe-me)/te);X.setEaseValueDuration(Ye).easeValueTo(Pe,kt,ce)}})}if(Mt){var Vt,zt;C?(Vt=`childO${i}`,zt=`scroll${i}`):(Vt="childOY",zt="scroll"),Mt.on("valuechange",function(kt){e[Vt]=kt,e.emit(zt,e)})}if(It){var _t;C?_t=`addChildO${i}`:_t="addChildOY",It.on("scroll",function(te){var kt=e[I];kt&&(te=kt),e[_t](-te,!0)})}};const LG={right:0,left:1,bottom:0,top:1},DG={gameObject:0,rectBounds:1},vl=Phaser.Utils.Objects.GetValue;var FG=function(e,t){var i=e.scene,a=[0,1,0],x=[0,1,0],C=vl(t,"width"),E=vl(t,"height");if(!C){var O=vl(t,"child.expandWidth",!0);O||(a[1]=0)}if(!E){var I=vl(t,"child.expandHeight",!0);I||(x[1]=0)}var V=new es(i,{column:3,row:3,columnProportions:a,rowProportions:x});switch(z9(e,V,t),e.scrollMode){case 0:cl(e,V,"y",t);break;case 1:cl(e,V,"x",t);break;default:cl(e,V,"y",t),cl(e,V,"x",t);break}return V};const ms=Phaser.Utils.Objects.GetValue;let to=class extends qt{constructor(t,i){i===void 0&&(i={});var a=jf(i),x=a===1;i.orientation=x?0:1,super(t,i),this.type=ms(i,"type","rexScrollable"),this.scrollMode=a;var C=ms(i,"background",void 0);C&&this.addBackground(C);var E=ms(i,"header",void 0);if(E){var O=ms(i,"align.header","center"),I=ms(i,"space.header",0),V;x?V={right:I}:V={bottom:I},this.add(E,{proportion:0,align:O,padding:V,expand:ms(i,"expand.header",!0)})}var X=FG(this,i);X&&this.add(X,{proportion:1,align:"center",padding:0,expand:!0});var q=ms(i,"footer",void 0);if(q){var O=ms(i,"align.footer","center"),st=ms(i,"space.footer",0),V;x?V={left:st}:V={top:st},this.add(q,{proportion:0,align:O,padding:V,expand:ms(i,"expand.footer",!0)})}this.addChildrenMap("background",C),this.addChildrenMap("header",E),this.addChildrenMap("footer",q),this.runLayoutFlag=!1}postLayout(t,i,a){var x=0,C=0;return this.runLayoutFlag?(C=this.t,this.scrollMode===2&&(x=this.s)):this.runLayoutFlag=!0,this.resizeController(),this.setT(C),this.scrollMode===2&&this.setS(x),super.postLayout(t,i,a),this}set t(t){var i=this.childMargin;if(i.top!==0||i.bottom!==0){var a=this.childrenMap.child,x=a.topChildOY-a.bottomChildOY,C=x+i.top+i.bottom,E=C*t-i.top;t=x!==0?E/x:0}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,i=this.childMargin;if(i.top!==0||i.bottom!==0){var a=this.childrenMap.child,x=a.topChildOY-a.bottomChildOY,C=x+i.top+i.bottom,E=x*t+i.top;t=C!==0?E/C:0}return t}set s(t){var i=this.childMargin;if(i.left!==0||i.right!==0){var a=this.childrenMap.child,x=a.leftChildOX-a.rightChildOX,C=x+i.left+i.right,E=C*t-i.left;t=x!==0?E/x:0}this.childrenMap.child.s=t,this.updateController()}get s(){var t=this.childrenMap.child.s,i=this.childMargin;if(i.left!==0||i.right!==0){var a=this.childrenMap.child,x=a.leftChildOX-a.rightChildOX,C=x+i.left+i.right,E=x*t+i.left;t=C!==0?E/C:0}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}set childOX(t){this.childrenMap.child.childOX=t,this.updateController()}get childOX(){return this.childrenMap.child.childOX}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get leftChildOX(){return this.childrenMap.child.leftChildOX+this.childMargin.left}get rightChildOX(){return this.childrenMap.child.rightChildOX-this.childMargin.right}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get childVisibleWidth(){return this.childrenMap.child.childVisibleWidth}get childWidth(){return this.childrenMap.child.childWidth}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get isOverflowY(){return this.isOverflow}get isOverflowX(){var t=this.childrenMap.child;return t.leftChildOX!==t.rightChildOX}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var i=this.childrenMap.slider;i&&i.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get sliderYEnable(){return this.sliderEnable}set sliderYEnable(t){this.sliderEnable=t}setSliderYEnable(t){return this.setSliderEnable(t),this}get sliderXEnable(){var t=this.childrenMap.sliderX;return t?t.enable:!1}set sliderXEnable(t){var i=this.childrenMap.sliderX;i&&i.setEnable(t)}setSliderXEnable(t){return t===void 0&&(t=!0),this.sliderXEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var i=this.childrenMap.scroller;i&&i.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get scrollerYEnable(){return this.scrollerEnable}set scrollerYEnable(t){this.scrollerEnable=t}setScrollerYEnable(t){return this.setScrollerEnable(t),this}get scrollerXEnable(){var t=this.childrenMap.scrollerX;return t?t.enable:!1}set scrollerXEnable(t){var i=this.childrenMap.scrollerX;i&&i.setEnable(t)}setScrollerXEnable(t){return t===void 0&&(t=!0),this.scrollerXEnable=t,this}get scrollerXEnable(){var t=this.childrenMap.scrollerX;return t?t.enable:!1}set scrollerXEnable(t){var i=this.childrenMap.scrollerX;i&&i.setEnable(t)}setScrollerXEnable(t){return t===void 0&&(t=!0),this.scrollerXEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var i=this.childrenMap.mouseWheelScroller;i&&i.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}get mouseWheelScrollerYEnable(){return this.mouseWheelScrollerEnable}set mouseWheelScrollerYEnable(t){this.mouseWheelScrollerEnable=t}setMouseWheelScrollerYEnable(t){return this.setMouseWheelScrollerEnable(t),this}get mouseWheelScrollerXEnable(){var t=this.childrenMap.mouseWheelScrollerX;return t?t.enable:!1}set mouseWheelScrollerXEnable(t){var i=this.childrenMap.mouseWheelScrollerX;i&&i.setEnable(t)}setMouseWheelScrollerXEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerXEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var i=this.childrenMap.child;return i.setInteractive(),i.input.dropZone=t,this}};Object.assign(to.prototype,Ox);var ic=function(e,t,i){var a=fn(e);switch(a){case ei:i=e.getWrappedText(t);break;case ii:i=e.getPenManager(t,i);break;case Ei:e.maxWidth>0?i=e.setText(t).getTextBounds().wrappedText.split(`
`):i=t.split(`
`);break}return i},BG=function(e){return e!==void 0&&(this.text=e),this.lines=ic(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},Gx=function(e){return(e-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},kx=function(e){return e*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},IG=function(e){var t=e+this.visibleLinesCount+1,i;switch(this.textObjectType){case ei:i=this.lines.slice(e,t).join(`
`);break;case ii:var a=this.lines.getLineStartIndex(e),x=this.lines.getLineEndIndex(t-1);i=this.lines.getSliceTagText(a,x,!0);break;case Ei:i=this.lines.slice(e,t).join(`
`);break}return i},pl=function(e,t){var i=fn(e);switch(i){case ei:var C=e.style,a=C.wordWrapWidth,x=C.wordWrapCallback;C.wordWrapWidth=0,C.wordWrapCallback=void 0,e.setText(t),C.wordWrapWidth=a,C.wordWrapCallback=x;break;case ii:var C=e.style,E=C.wrapMode;C.wrapMode=0,e.setText(t),C.wrapMode=E;break;case Ei:var O=e._maxWidth;e._maxWidth=0,e.setText(t),e._maxWidth=O;break}},Nx=function(){var e=this.textObject.rexSizer;this.textObject.y+=e.offsetY-e.preOffsetY,e.preOffsetY=e.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&GG.call(this)},GG=function(){if(this.textObject.setCrop){var e=this.textObject.rexSizer.offsetY,t,i;e<=0?(t=-e,i=this.height):(t=0,i=this.height-e),this.textObject.setCrop(0,t,this.width,i)}},kG=function(){var e=Math.max(Math.floor(Gx.call(this,-this.textOY)),0),t=kx.call(this,e)+this.textOY,i=IG.call(this,e);return pl(this.textObject,i),this.textObject.rexSizer.offsetY=t,Nx.call(this),this},NG=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,Ia.call(this),this},VG=function(e,t,i){if(i+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===i)){switch(this.textObjectWidth=t,this._textObjectRealHeight=i,this.textObjectType){case ei:case ii:e.setFixedSize(t,i);var a=e.style,x=Math.max(t,0);this.textObjectType===ei?a.wordWrapWidth=x:(a.wrapMode===0&&(a.wrapMode=1),a.wrapWidth=x);break;case Ei:e.setMaxWidth(t);break}this.setText()}},zG=function(){var e,t,i,a=this.left,x=this.top,C,E,O,I;e=this.textObject,e.rexSizer.hidden||(t=e.rexSizer,i=t.padding,C=a+i.left*this.scaleX,E=x+i.top*this.scaleY,O=this.width*this.scaleX-(i.left+i.right)*this.scaleX,I=this.height*this.scaleY-(i.top+i.bottom)*this.scaleY,VG.call(this,e,O,I),Da(e,C,E,O,I,t.align),t.preOffsetY=0,Nx.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},YG={setText:BG,updateTextObject:kG,preLayout:NG,layoutChildren:zG};const Vx=Phaser.Utils.Objects.IsPlainObject,bi=Phaser.Utils.Objects.GetValue,WG=Phaser.Display.Align.TOP_LEFT;class zx extends Un{constructor(t,i,a,x,C,E){Vx(i)?(E=i,i=bi(E,"x",0),a=bi(E,"y",0),x=bi(E,"width",void 0),C=bi(E,"height",void 0)):Vx(x)&&(E=x,x=bi(E,"width",void 0),C=bi(E,"height",void 0)),super(t,i,a,x,C,E),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=bi(E,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(bi(E,"clampTextOY",!0)),this.alwaysScrollable=bi(E,"alwaysScrollable",!1);var O=bi(E,"background",void 0),I=bi(E,"text",void 0);I===void 0&&(I=XG(t)),this.textCropEnable=bi(E,"textCrop",!!I.setCrop);var V=bi(E,"textMask",!this.textCropEnable);O&&this.addBackground(O),this.add(I),this.sizerChildren=[I];var X=this.getSizerConfig(I);X.align=WG,X.padding=zn(0),X.expand=!0,this.textObject=I,this.textObjectType=fn(I),X.preOffsetY=0,X.offsetY=0,V&&(this.textMask=_i.call(this,this.textObject,this)),this.addChildrenMap("background",O),this.addChildrenMap("text",I)}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case ei:this.lines.length=0;break;case ii:this.lines.destroy();break;case Ei:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case ei:case ii:var i=this.textObject.style;t=i.metrics.fontSize+i.strokeThickness;break;case Ei:var a=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*a;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case ei:case ii:t=this.textObject.lineSpacing;break;case Ei:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(Gx.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=kx.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var i=this.topTextOY,a=this.bottomTextOY,x=this.textOYExceedTop(t),C=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:x?t=i:C&&(t=a)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),x&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=x,C&&(this.execeedBottomState||this.emit("execeedbottom",this,t,a)),this.execeedBottomState=C}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var XG=function(e){return e.add.text(0,0,"")};Object.assign(zx.prototype,YG);var UG=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textObjectHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.textHeight}})},HG={setText(e){var t=this.childrenMap.child;return t.setText(e),this.resizeController(),this},appendText(e){return this.setText(this.text+e),this}},$G={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}};const xs=Phaser.Utils.Objects.GetValue;class eo extends to{constructor(t,i){i===void 0&&(i={});var a=xs(i,"text",void 0),x=xs(i,"textWidth",void 0),C=xs(i,"textHeight",void 0),E=xs(i,"textCrop",!!a.setCrop),O=xs(i,"textMask",!E),I=xs(i,"content",""),V=new zx(t,{width:x,height:C,text:a,textMask:O,textCrop:E&&!O,content:I,clampTextOY:xs(i,"clampChildOY",!1),alwaysScrollable:xs(i,"alwaysScrollable",!1)});t.add.existing(V),UG(V),i.scrollMode=0,i.type="rexTextArea",i.child={gameObject:V,expandWidth:x===void 0,expandHeight:C===void 0};var X=xs(i,"space",void 0);X&&(X.child=xs(X,"text",0)),super(t,i),this.addChildrenMap("text",a)}get text(){return this.childrenMap.child.text}get lineHeight(){var t=this.childrenMap.child;return t.textLineHeight+t.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.textHeight}}Object.assign(eo.prototype,HG,$G);const gl=Phaser.Utils.Objects.GetValue;var Yx=function(e,t,i){t=t?j(t):{};var a=gl(i,"background",ze),x=gl(i,"text",sc),C=gl(i,"track",ze),E=gl(i,"thumb",ze);a?t.background=a(e,t.background):delete t.background,x?t.text=x(e,t.text):delete t.text;var O=t.slider;O!==!1&&O!==null&&(O===void 0&&(O={}),C?O.track=C(e,O.track):delete O.track,E?O.thumb=E(e,O.thumb):delete O.thumb,t.slider=O);var I=new eo(e,t);return e.add.existing(I),I},sc=function(e,t){var i;t&&(t.hasOwnProperty("$type")?i=t.$type:t.hasOwnProperty("key")&&(i="bitmaptext",t.font=t.key));var a;switch(i){case"bitmaptext":case"bitmap":a=new ol(e,t);break;case"bbcodetext":case"bbcode":a=new Su(e,0,0,"",t);break;case"label":a=new io(e,t);break;case"textarea":a=Yx(e,t);break;default:a=new al(e,t);break}return Kf(a,t),e.add.existing(a),a},Wx=function(e,t){var i;t&&(t.hasOwnProperty("$type")?i=t.$type:t.hasOwnProperty("leftWidth")?i="nineSlice":(t.hasOwnProperty("color")||t.hasOwnProperty("strokeColor"))&&(i="roundRectangle"));var a;switch(i){case"nineSlice":t.hasOwnProperty("stretchMode")?a=new qa(e,t):a=new ja(e,t);break;case"roundRectangle":a=new Qa(e,t);break;default:a=new Ja(e,t);break}return Kf(a,t),e.add.existing(a),a};const ml=Phaser.Utils.Objects.GetValue;var xl=function(e,t,i){t=t?j(t):{};var a=ml(i,"background",ze),x=ml(i,"text",sc),C=ml(i,"icon",Wx),E=ml(i,"action",Wx);return t.background!==null&&a?t.background=a(e,t.background):delete t.background,t.text!==null&&x?t.text=x(e,t.text):delete t.text,t.icon!==null&&C?t.icon=C(e,t.icon):delete t.icon,t.action!==null&&E?t.action=E(e,t.action):delete t.action,t};class io extends Ws{constructor(t,i,a){i=xl(t,i,a),super(t,i),this.type="rexSimpleLabel"}setActiveState(t){return nc(this.getChildren(),"setActiveState",t),this}setHoverState(t){return nc(this.getChildren(),"setHoverState",t),this}setDisableState(t){return nc(this.getChildren(),"setDisableState",t),this}}var nc=function(e,t,i){for(var a=0,x=e.length;a<x;a++){var C=e[a];C&&C[t]&&C[t](i)}};k.register("simpleLabel",function(e,t){var i=new io(this.scene,e,t);return this.scene.add.existing(i),i}),Z(window,"RexPlugins.UI.SimpleLabel",io);const Xt=Phaser.Utils.Objects.GetValue;var KG=function(e){var t=this.scene,i=Xt(e,"orientation",0);this.setOrientation(i);var a=Xt(e,"icon",void 0),x=Xt(e,"iconMask",void 0),C=Xt(e,"innerBackground",void 0),E=Xt(e,"title",void 0),O=Xt(e,"separator",void 0),I=Xt(e,"text",void 0),V=Xt(e,"action",void 0),X=Xt(e,"actionMask",void 0);if(a){var q=Xt(e,"align.icon","center"),Pt;this.orientation===0?Pt={right:Xt(e,"space.icon",0),top:Xt(e,"space.iconTop",0),bottom:Xt(e,"space.iconBottom",0),left:Xt(e,"space.iconLeft",0)}:Pt={bottom:Xt(e,"space.icon",0),left:Xt(e,"space.iconLeft",0),right:Xt(e,"space.iconRight",0),top:Xt(e,"space.iconTop",0)};var st=Xt(e,"squareFitIcon",!1)?1:0;if(this.add(a,{proportion:0,align:q,padding:Pt,fitRatio:st}),x&&(x=_i.call(this,a,a,1)),!st){var it=Xt(e,"iconSize",void 0);this.setIconSize(Xt(e,"iconWidth",it),Xt(e,"iconHeight",it))}}var at=new qt(t,{orientation:1});C&&at.addBackground(C);var ut=Xt(e,"space.separator",0);if(E){var q=Xt(e,"align.title","left"),lt=Xt(e,"expandTitleWidth",!1),ft=Xt(e,"expandTitleHeight",!1),pt,Pt,ct;pt=ft?1:0,ct=lt,Pt={bottom:!O&&I?Xt(e,"space.title",ut):0,left:Xt(e,"space.titleLeft",0),right:Xt(e,"space.titleRight",0)},at.add(E,{proportion:pt,expand:ct,align:q,padding:Pt})}if(O){var Pt={top:E?ut:0,bottom:I?ut:0,left:Xt(e,"space.separatorLeft",0),right:Xt(e,"space.separatorRight",0)};at.add(O,{expand:!0,padding:Pt})}if(I){var q=Xt(e,"align.text","left"),xt=Xt(e,"expandTextWidth",!1),Mt=Xt(e,"expandTextHeight",!1),pt,Pt,ct;pt=Mt?1:0,ct=xt,Pt={left:Xt(e,"space.textLeft",0),right:Xt(e,"space.textRight",0)},at.add(I,{proportion:pt,expand:ct,align:q,padding:Pt})}var Pt=void 0;if(V&&(Pt={right:Xt(e,"space.text",0)}),this.add(at,{proportion:1,padding:Pt}),V){var q=Xt(e,"align.action","center"),Pt;this.orientation===0?Pt={top:Xt(e,"space.actionTop",0),bottom:Xt(e,"space.actionBottom",0),right:Xt(e,"space.actionRight",0)}:Pt={left:Xt(e,"space.actionLeft",0),right:Xt(e,"space.actionRight",0),bottom:Xt(e,"space.actionBottom",0)};var st=Xt(e,"squareFitAction",!1)?1:0;if(this.add(V,{proportion:0,align:q,padding:Pt,fitRatio:st}),X&&(X=_i.call(this,V,V,1)),!st){var Ot=Xt(e,"actionSize");this.setActionSize(Xt(e,"actionWidth",Ot),Xt(e,"actionHeight",Ot))}}this.addChildrenMap("icon",a),this.addChildrenMap("iconMask",x),this.addChildrenMap("innerSizer",at),this.addChildrenMap("innerBackground",C),this.addChildrenMap("title",E),this.addChildrenMap("separator",O),this.addChildrenMap("text",I),this.addChildrenMap("action",V),this.addChildrenMap("actionMask",X)};const Yt=Phaser.Utils.Objects.GetValue;var ZG=function(e){this.setOrientation(1),this.setRTL(!1);var t=this.scene,i=Yt(e,"title",void 0),a=Yt(e,"separator",void 0),x=Yt(e,"innerBackground",void 0),C=Yt(e,"icon",void 0),E=Yt(e,"iconMask",void 0),O=Yt(e,"text",void 0),I=Yt(e,"action",void 0),V=Yt(e,"actionMask",void 0);if(i){var X=Yt(e,"align.title","left"),q=Yt(e,"expandTitleWidth",!1),st=Yt(e,"expandTitleHeight",!1),it,at,ut;it=st?1:0,ut=q,at={bottom:Yt(e,"space.title",0),left:Yt(e,"space.titleLeft",0),right:Yt(e,"space.titleRight",0)},this.add(i,{proportion:it,expand:ut,align:X,padding:at})}if(a){var lt=Yt(e,"space.separator",0),at={top:i?lt:0,bottom:O?lt:0,left:Yt(e,"space.separatorLeft",0),right:Yt(e,"space.separatorRight",0)};this.add(a,{proportion:0,expand:!0,padding:at})}var ft=Yt(e,"orientation",0),pt=new qt(t,{orientation:ft,rtl:Yt(e,"rtl",!1),space:{left:Yt(e,"space.innerLeft",0),right:Yt(e,"space.innerRight",0),top:Yt(e,"space.innerTop",0),bottom:Yt(e,"space.innerBottom",0)}});if(x&&pt.addBackground(x),this.add(pt,{proportion:1,expand:!0}),C){var X=Yt(e,"align.icon","center"),at;pt.orientation===0?at={right:Yt(e,"space.icon",0),top:Yt(e,"space.iconTop",0),bottom:Yt(e,"space.iconBottom",0),left:Yt(e,"space.iconLeft",0)}:at={bottom:Yt(e,"space.icon",0),left:Yt(e,"space.iconLeft",0),right:Yt(e,"space.iconRight",0),top:Yt(e,"space.iconTop",0)};var ct=Yt(e,"squareFitIcon",!1)?1:0;if(pt.add(C,{proportion:0,align:X,padding:at,fitRatio:ct}),E&&(E=_i.call(this,C,C,1)),!ct){var xt=Yt(e,"iconSize",void 0);this.setIconSize(Yt(e,"iconWidth",xt),Yt(e,"iconHeight",xt))}}if(O){var X=Yt(e,"align.text","left"),Mt=Yt(e,"space.text",0),Pt=Yt(e,"expandTextWidth",!1),Ot=Yt(e,"expandTextHeight",!1),it,at,ut;pt.orientation===0?(it=Pt?1:0,I&&(at={right:Mt}),ut=Ot):(it=Ot?1:0,I&&(at={bottom:Mt}),ut=Pt),pt.add(O,{proportion:it,expand:ut,align:X,padding:at})}if(I){var X=Yt(e,"align.action","center"),at;pt.orientation===0?at={top:Yt(e,"space.actionTop",0),bottom:Yt(e,"space.actionBottom",0),right:Yt(e,"space.actionRight",0)}:at={left:Yt(e,"space.actionLeft",0),right:Yt(e,"space.actionRight",0),bottom:Yt(e,"space.actionBottom",0)};var ct=Yt(e,"squareFitAction",!1)?1:0;if(pt.add(I,{proportion:0,align:X,padding:at,fitRatio:ct}),V&&(V=_i.call(this,I,I,1)),!ct){var It=Yt(e,"actionSize");this.setActionSize(Yt(e,"actionWidth",It),Yt(e,"actionHeight",It))}}this.addChildrenMap("title",i),this.addChildrenMap("separator",a),this.addChildrenMap("innerSizer",pt),this.addChildrenMap("innerBackground",x),this.addChildrenMap("icon",C),this.addChildrenMap("iconMask",E),this.addChildrenMap("text",O),this.addChildrenMap("action",I),this.addChildrenMap("actionMask",V)};const pn=Phaser.Utils.Objects.GetValue,Xx=[KG,ZG];class yl extends Ff{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexTitleLabel";var a=pn(i,"background",void 0);a&&this.addBackground(a);var x=pn(i,"title",void 0),C=pn(i,"text",void 0);if(x){var E=pn(i,"wrapTitle",!1),O=pn(i,"adjustTitleFontSize",!1);E?(E===!0&&(E="word"),If(x,E),i.expandTitleWidth=!0,sl(x)):O&&(i.expandTextWidth=!0,i.expandTextHeight=!0,rl(x,{fitHeight:!0}))}if(C){var I=pn(i,"wrapText",!1),V=pn(i,"adjustTextFontSize",!1);I?(I===!0&&(I="word"),If(C,I),i.expandTextWidth=!0,sl(C)):V&&(i.expandTextWidth=!0,i.expandTextHeight=!0,rl(C,{fitHeight:!0}))}var X=pn(i,"layoutMode",0),q=Xx[X]||Xx[0];q.call(this,i),this.addChildrenMap("background",i.background)}get title(){var t=this.childrenMap.title;return t?t.title:""}set title(t){var i=this.childrenMap.title;i&&i.setText(t)}setTitle(t){return this.title=t,this}resetDisplayContent(t){t===void 0?t={}:typeof t=="string"&&(t={text:t}),super.resetDisplayContent(t);var i=this.childrenMap.title;return i&&(t.title===void 0||(t.title?(this.show(i),this.setTitle(t.title)):this.hide(i))),this}}k.register("titleLabel",function(e){var t=new yl(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.TitleLabel",yl);const rc=Phaser.Utils.Objects.GetValue;var Ux=function(e,t,i){var a=rc(i,"innerBackground",ze),x=rc(i,"separator",ze),C=rc(i,"title",sc),E,O;t.innerBackground!==null&&a&&(E=a(e,t.innerBackground)),t.separator!==null&&x&&(O=x(e,t.separator)),t=xl(e,t,i),E?t.innerBackground=E:delete t.innerBackground,O?t.separator=O:delete t.separator,t.title!==null&&C?t.title=C(e,t.title):delete t.title;var I=t.background;return I&&(E?e.children.moveBelow(I,E):O&&e.children.moveBelow(I,O)),t};class Hx extends yl{constructor(t,i,a){i=Ux(t,i,a),super(t,i),this.type="rexSimpleTitleLabel"}setActiveState(t){return ac(this.getChildren(),"setActiveState",t),this}setHoverState(t){return ac(this.getChildren(),"setHoverState",t),this}setDisableState(t){return ac(this.getChildren(),"setDisableState",t),this}}var ac=function(e,t,i){for(var a=0,x=e.length;a<x;a++){var C=e[a];C&&C[t]&&C[t](i)}};k.register("simpleTitleLabel",function(e,t){var i=new Hx(this.scene,e,t);return this.scene.add.existing(i),i}),Z(window,"RexPlugins.UI.SimpleTitleLabel",Hx);const ie=Phaser.Utils.Objects.GetValue,JG=Phaser.Utils.Objects.IsPlainObject;var QG=function(e,t){var i=ie(t,"background",void 0),a=ie(t,"icon",void 0),x=ie(t,"iconMask",void 0),C=ie(t,"nameText",void 0),E=ie(t,"valueText",void 0),O=ie(t,"bar",void 0),I=ie(t,"action",void 0),V=ie(t,"actionMask",void 0),X=ie(t,"barShape","line")==="line";if(JG(O)){var q=X?pd:ch;O=new q(e,O),e.add.existing(O),C&&e.children.moveBelow(O,C),E&&e.children.moveBelow(O,E)}var st=C||E||O;if(i&&this.addBackground(i),a){var it=void 0;this.orientation===0?(st||I)&&(it={right:ie(t,"space.icon",0),top:ie(t,"space.iconTop",0),bottom:ie(t,"space.iconBottom",0)}):(st||I)&&(it={bottom:ie(t,"space.icon",0),left:ie(t,"space.iconLeft",0),right:ie(t,"space.iconRight",0)}),this.add(a,{proportion:0,padding:it}),x&&(x=_i.call(this,a,a,1))}if(st){var at=new qt(e,{orientation:1}),ut;if(C||E){if(ut=new qt(e,{orientation:0}),C){C.text===""&&C.setText(" "),C.setOrigin(0,C.originY);var it={left:ie(t,"space.name",0)};ut.add(C,{padding:it})}if(E){E.text===""&&E.setText(" "),E.setOrigin(1,E.originY),ut.addSpace();var it={right:ie(t,"space.value",0)};ut.add(E,{padding:it}),this.setValueTextFormatCallback(ie(t,"valueTextFormatCallback",jG),ie(t,"valueTextFormatCallbackScope",void 0))}at.add(ut,{expand:!0})}if(O)if(X){var lt=ut?ie(t,"space.bar"):0;lt===void 0&&(lt=ie(t,"space.barTop",0));var it={top:lt,bottom:ie(t,"space.barBottom",0),left:ie(t,"space.barLeft",0),right:ie(t,"space.barRight",0)};at.add(O,{expand:!0,padding:it})}else{var it={top:ie(t,"space.barTop",0),bottom:ie(t,"space.barBottom",0),left:ie(t,"space.barLeft",0),right:ie(t,"space.barRight",0)};this.addBackground(O,it)}var it=void 0;I&&(it={right:ie(t,"space.text",0)});var ft=ie(t,"align.text","bottom");this.add(at,{proportion:1,align:ft,padding:it})}if(I){var it;this.orientation===0?it={top:ie(t,"space.actionTop",0),bottom:ie(t,"space.actionBottom",0)}:it={left:ie(t,"space.actionLeft",0),right:ie(t,"space.actionRight",0)},this.add(I,{proportion:0,padding:it}),V&&(V=_i.call(this,I,I,1))}this.addChildrenMap("background",i),this.addChildrenMap("icon",a),this.addChildrenMap("iconMask",x),this.addChildrenMap("name",C),this.addChildrenMap("value",E),this.addChildrenMap("bar",O),this.addChildrenMap("action",I),this.addChildrenMap("actionMask",V)},jG=function(e,t,i){return e.toString()};const qG=Phaser.Math.Clamp;var _G={setValueTextFormatCallback(e,t){return this.valueTextFormatCallback=e,this.valueTextFormatCallbackScope=t,this},getFormatValueText(e,t,i){e===void 0&&(e=this.value),t===void 0&&(t=this.minValue),i===void 0&&(i=this.maxValue);var a;return this.valueTextFormatCallbackScope?a=this.valueTextFormatCallback(e,t,i):a=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,e,t,i),a},updateValueText(e,t,i){var a=this.childrenMap.value;return a&&this.valueTextFormatCallback&&(a.setText(this.getFormatValueText(e,t,i)),a.layout&&a.layout()),this},setValue(e,t,i){return t===void 0?t=this.minValue:this.minValue=t,i===void 0?i=this.maxValue:this.maxValue=i,e=qG(e,t,i),this.value=e,this.updateValueText(e,t,i),this.setBarValue(e,t,i),this},setEaseValueDuration(e){return this.easeValueDuration=e,this},easeValueTo(e,t,i){return t===void 0?t=this.minValue:this.minValue=t,i===void 0?i=this.maxValue:this.maxValue=i,this.easeValueTask===void 0&&(this.easeValueTask=new $i(this),this.easeValueTask.on("update",function(){this.setValue(this.value,this.minValue,this.maxValue)},this)),this.easeValueTask.restart({key:"value",to:e,duration:this.easeValueDuration}),this}};class Sl extends qt{constructor(t,i){super(t,i),this.type="rexNameValueLabel",QG.call(this,t,i),this.setEaseValueDuration(1e3)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var i=this.childrenMap.name;i!==void 0&&i.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var i=this.childrenMap.value;i!==void 0&&i.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var i=this.childrenMap.bar;i!==void 0&&i.setValue(t)}setBarValue(t,i,a){var x=this.childrenMap.bar;return x===void 0?this:(x.setValue(t,i,a),this)}easeBarValueTo(t,i,a){var x=this.childrenMap.bar;return x===void 0?this:(x.easeValueTo(t,i,a),this)}setTexture(t,i){var a=this.childrenMap.icon;if(a!==void 0)return a.setTexture(t,i),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}postLayout(t,i,a){var x=this.childrenMap.iconMask;x&&(x.setPosition(),this.resetChildPositionState(x));var C=this.childrenMap.actionMask;return C&&(C.setPosition(),this.resetChildPositionState(C)),super.postLayout(t,i,a),this}resize(t,i){super.resize(t,i);var a=this.childrenMap.iconMask;a&&a.resize();var x=this.childrenMap.actionMask;return x&&x.resize(),this}}Object.assign(Sl.prototype,_G),k.register("nameValueLabel",function(e){var t=new Sl(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.NameValueLabel",Sl);class tk extends Up{constructor(t){super(),this.setTable(Nt(t,"table")),this.setMaxLevel(Nt(t,"maxLevel"));var i=Nt(t,"exp",0),a=Nt(t,"level",void 0);a!==void 0&&!this.checkLevel(a,i)&&(console.error(`Level ${a} and Exp ${i} are mismatch`),a=void 0),this.resetExp(i,a)}setTable(t){return this.levelTable=t,this.isLevelMapFunction=Zi(t),this}setMaxLevel(t){t===void 0&&(Array.isArray(this.levelTable)?t=this.levelTable.length-1:t=-1);var i;return t!==-1?i=this.getExp(t):i=-1,this.hasMaxLevel=t!==-1,this.maxLevel=t,this.maxExp=i,this}resetExp(t,i){return this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),i===void 0&&(i=this.getLevel(t)),this._exp=t,this._level=i,this._requiredExp=this.getRequiredExpToNextLevel(i,t),this}get exp(){return this._exp}set exp(t){if(this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),t<this._exp){this.resetExp(t);return}if(t!==this._exp){for(var i=this.getLevel(t,this._level),a=this._level,x=this._exp,C;;){var E=this.getExp(a),O=this.getExp(a+1);if(C=Math.min(O,t),this.emit("levelup",a,x,C,E,O),a===i&&C===t)break;a++,x=O}this.resetExp(t,i)}}get level(){return this._level}set level(t){this.hasMaxLevel&&t>this.maxLevel?this.exp=this.maxExp:this.exp=this.getExp(t)}get requiredExp(){return this._requiredExp}getExp(t){return t===void 0?this._exp:this.isLevelMapFunction?this.levelTable(t):(this.hasMaxLevel&&t>this.maxLevel&&(t=this.maxLevel),this.levelTable[t])}getLevel(t,i){if(t===void 0)return this._level;for(i===void 0&&(i=0);;){var a=this.getExp(i+1);if(a>t||(i++,this.hasMaxLevel&&a===this.maxExp))break}return i}getRequiredExpToNextLevel(t,i){return t===void 0&&(t=this.level),i===void 0&&(i=this.exp),this.getExp(t+1)-i}checkLevel(t,i){return i>=this.getExp(t)&&i<this.getExp(t+1)}gainExp(t,i,a){return i&&this.on("levelup",i,a),this.exp+=t,i&&this.off("levelup",i,a),this}setExp(t,i,a){return i&&this.on("levelup",i,a),this.exp=t,i&&this.off("levelup",i,a),this}setLevel(t,i,a){return i&&this.on("levelup",i,a),this.level=t,i&&this.off("levelup",i,a),this}}var oc=function(e,t,i){var a=Nt(i,"reverse",!1),x;if(Ji(e[0]))if(a)for(var E=e.length,C=E-1;C>=0;C--)x=oc(e[C],t,i);else for(var C=0,E=e.length;C<E;C++)x=oc(e[C],t,i);else x=ek(e,t,i);return x},ek=function(e,t,i){var a=Nt(i,"argsConvert",void 0),x=Nt(i,"argsConvertScope",void 0),C=e[0];if(gn=oh(gn,e,1),a){a===!0&&(a=Nu,x=void 0);for(var E=0,O=gn.length;E<O;E++)x?gn[E]=a.call(x,gn[E],e):gn[E]=a(gn[E],e)}var I;typeof C=="string"?(I=t[C],I==null&&(I=Nt(t,C,null))):I=C;var V=I.apply(t,gn);return V},gn=[];const is=Phaser.Utils.Objects.GetValue;class $x extends Se{constructor(t,i){super(t,i);var a=is(i,"clock",void 0);a||(a=new kp(t)),this.clock=a,this.clock.on("update",this.update,this),this.commands=[],this.resetFromJSON(i)}resetFromJSON(t){return this.clock.resetFromJSON(is(t,"clock",void 0)),this.state=is(t,"state",0),this.commands=is(t,"commands",[]),this.scope=is(t,"scope",void 0),this.setTimeUnit(is(t,"timeUnit",0)),this.setDtMode(is(t,"dtMode",0)),this.index=is(t,"index",0),this.nextTime=is(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,i,a){this.stop();var x=is(a,"timeUnit",void 0);x!==void 0&&this.setTimeUnit(x);var C=is(a,"dtMode",void 0);return C!==void 0&&this.setDtMode(C),t=t.filter(function(E){var O=E[0];return!isNaN(O)}).map(function(E){var O=E[0];return typeof O=="string"&&(E[0]=parseFloat(E[0])),E}),this.dtMode===0&&t.sort(function(E,O){var I=E[0],V=O[0];return I>V?1:I<V?-1:0}),oh(this.commands,t),this.scope=i,this}clear(){return this.commands.length=0,this}append(t,i,...a){var x;return Array.isArray(i)?x=i:x=[i,...a],this.commands.push([t,x]),this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var i=this.commands;;){var a=i[this.index],x=a[1];if(Ji(x)||(x=oh(ik,a,1)),oc(x,this.scope),this.emit("runcommand",x,this.scope),this.index>=i.length-1)return this.nextTime=0,this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var i=this.commands[this.index][0];return this.timeUnit===1&&(i=i*1e3),this.dtMode===1&&(i+=t),i}setDtMode(t){return typeof t=="string"&&(t=nk[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=sk[t]),this.timeUnit=t,this}}var ik=[];const sk={ms:0,s:1,sec:1},nk={abs:0,absolute:0,inc:1,increment:1};var rk=function(e,t,i,a,x){var C=(i-t)/(x-a)*this.totalEaseDuration,E=i===x?e+1:e;this.player.append(0,this.setEaseValueDuration,C).append(0,this.easeValueTo,i,a,x).append(0,this.emit,"levelup.start",e,t,i,this).append(C,r).append(0,this.emit,"levelup.end",E,t,i,this),this.player.isPlaying||this.player.start()},ak={setExpTable(e){return this.levelCounter.setTable(e),this},resetExp(e){return this.levelCounter.resetExp(e),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1)),this},getExp(e){return this.levelCounter.getExp(e)},getLevel(e,t){return this.levelCounter.getLevel(e,t)},getRequiredExpToNextLevel(e,t){return this.levelCounter.getRequiredExpToNextLevel(e,t)},gainExp(e){return this.levelCounter.gainExp(e),this},setExp(e){return this.levelCounter.setExp(e),this},setLevel(e){return this.levelCounter.setLevel(e),this}};const Kx=Phaser.Utils.Objects.GetValue;class hc extends Sl{constructor(t,i){super(t,i),this.type="rexExpBar",this.setTotalEaseDuration(Kx(i,"easeDuration",1e3)),this.levelCounter=new tk(Kx(i,"levelCounter")),this.player=new $x(this,{scope:this,dtMode:1}),this.levelCounter.on("levelup",rk,this),this.player.on("complete",function(){this.player.clear(),this.emit("levelup.complete",this.level,this)},this),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1))}destroy(t){!this.scene||this.ignoreDestroy||(this.levelCounter.destroy(),this.levelCounter=void 0,this.player.destroy(),this.player=void 0,super.destroy(t))}get exp(){return this.levelCounter.exp}set exp(t){this.levelCounter.exp=t}get level(){return this.levelCounter.level}set level(t){this.levelCounter.level=t}get requiredExp(){return this.levelCounter.requiredExp}setTotalEaseDuration(t){return this.totalEaseDuration=t,this}}Object.assign(hc.prototype,ak),k.register("expBar",function(e){var t=new hc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.ExpBar",hc);const Cl=qt.prototype.add,Zx=qt.prototype.addSpace;var lc=function(e){var t=!e.isRexSpace,i=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var a=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");a&&Zx.call(this),Cl.call(this,e,{proportion:i,expand:!0});var x=!this.buttonsExpand&&this.buttonsAlign==="center";x&&Zx.call(this),this.hasTailSpace=x}else Cl.call(this,e,{proportion:i,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var C=this.sizerChildren.length-1;Cl.call(this,e,{index:C,proportion:i,expand:!0})}else Cl.call(this,e,{proportion:i,expand:!0});return t&&this.buttonGroup.add(e),this},ok={addButton(e){if(Ji(e))for(var t=e,i=0,a=t.length;i<a;i++)lc.call(this,t[i]);else lc.call(this,e);return this},addButtons(e){for(var t=0,i=e.length;t<i;t++)lc.call(this,e[t]);return this}};const hk=qt.prototype.remove,lk=qt.prototype.clear;var uc=function(e,t){return this.getParentSizer(e)!==this?this:(this.buttonGroup.remove(e),hk.call(this,e,t),this)},uk={remove(e,t){if(Ji(e))for(var i=e,a=0,x=i.length;a<x;a++)uc.call(this,i[a],t);else uc.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,lk.call(this,e),this},removeButton(i,t){var i=this.getButton(i);return i?(this.remove(i,t),this):this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)uc.call(this,t[i],e);return this}},dk=function(e,t,i){if(e){var a=this.setValueCallback,x=this.setValueCallbackScope;a&&(x?a.call(x,e,t,i):a(e,t,i)),this.fireEvent("button.statechange",e,t,i)}},fk=function(e){var t=this;e._selected=void 0,Object.defineProperty(e,"selected",{get:function(){return e._selected},set:function(i){if(e._selected!==i){var a=e._selected;e._selected=i,dk.call(t,e,i,a)}},enumerable:!0,configurable:!0}),e.selected=!1},ck={add(e){return this.buttons.push(e),e._click||(e._click=new Fs(e,this.clickConfig),e._click.on("click",function(t,i,a,x){this.fireEvent("button.click",i,a,x)},this).on("enable",function(t,i){this.fireEvent("button.enable",i)},this).on("disable",function(t,i){this.fireEvent("button.disable",i)},this).on("over",function(t,i,a,x){this.fireEvent("button.over",i,a,x)},this).on("out",function(t,i,a,x){this.fireEvent("button.out",i,a,x)},this).on("down",function(t,i,a,x){this.fireEvent("button.down",i,a,x)},this).on("up",function(t,i,a,x){this.fireEvent("button.up",i,a,x)},this),e.isRexContainerLite&&e.sendChildToBack(e)),this.buttonsType&&(e.name===void 0&&console.error(`${this.parent.constructor.name}: Option button miss value`),fk.call(this,e)),this},addMultiple(e){for(var t=0,i=e.length;t<i;t++)this.add(e[t]);return this}};const vk=Phaser.Utils.Array.Remove;var pk={remove(e){return this.buttonsType&&delete e.selected,vk(this.buttons,e),this},clear(){if(this.buttonsType)for(var e=this.buttons,t=0,i=e.length;t<i;t++)delete e[t].selected;return this.buttons.length=0,this}},gk=function(e,t,...i){if(this.buttons){var a;if(typeof t=="number"){if(a=t,t=this.buttons[a],!t)return}else if(a=this.buttons.indexOf(t),a===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(e,t,a,...i),this.groupName!==void 0?this.eventEmitter.emit(e,t,this.groupName,a,...i):this.eventEmitter.emit(e,t,a,...i)}};const so=Phaser.Utils.Objects.GetValue;var mk={setButtonsType(e){e===void 0&&(e={});var t=so(e,"buttonsType",e.type);if(this.buttonsType=t,!this.buttonsType)return this;var i,a;switch(i=so(e,"setValueCallback",void 0),a=so(e,"setValueCallbackScope",void 0),i===void 0&&(i=so(e,"setButtonStateCallback",void 0),a=so(e,"setButtonStateCallbackScope",void 0)),this.setValueCallback=i,this.setValueCallbackScope=a,t){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType();break}return this},setRadioType(){var e=this.parent,t=this.buttons;e._value=void 0;var i=void 0;return Object.defineProperty(e,"value",{get:function(){return e._value},set:function(a){if(e._value!==a){e._value=a;for(var x=0,C=t.length;x<C;x++){var E=t[x];E.rexSizer.hidden||(i===void 0?E.name===a?E.selected=!0:E.selected=!1:i===x?E.selected=!0:E.selected=!1)}}},enumerable:!0,configurable:!0}),e.on("button.click",function(a){i=this.buttons.indexOf(a),e.value=a.name,i=void 0},this),this},setCheckboxesType(){var e=this.parent;return e.on("button.click",function(t){t.selected=!t.selected}),this},clearAllButtonsState(){for(var e=this.buttons,t=0,i=e.length;t<i;t++){var a=e[t];a.selected=!1}return this},getAllButtonsState(){for(var e={},t=this.buttons,i=0,a=t.length;i<a;i++){var x=t[i];x.rexSizer.hidden||(e[x.name]=x.selected)}return e},setSelectedButtonName(e){return this.parent.value=e,this},getSelectedButtonName(){return this.parent.value},setButtonState(e,t){t===void 0&&(t=!0);for(var i=this.buttons,a=0,x=i.length;a<x;a++){var C=i[a];if(!C.rexSizer.hidden&&C.name===e){C.selected=t;break}}return this},getButtonState(e){for(var t=this.buttons,i=0,a=t.length;i<a;i++){var x=t[i];if(!x.rexSizer.hidden&&x.name===e)return x.selected}}},xk=function(e,t){if(e)if(Ji(e)){for(var i,a=0,x=e.length;a<x;a++)if(i=Jx(e[a],t),i)return i}else{var i;for(var C in e)if(i=Jx(e[C],t),i)return i}else return null},Jx=function(e,t){return e?e.hasOwnProperty("name")?e.name===t?e:null:GetElementByName(e,t):null},Tl={getButton(e){var t=this.buttons,i,a=typeof e;switch(a){case"number":i=t[e];break;case"string":i=xk(t,e);break;default:i=e,t.indexOf(i)===-1&&(i=void 0);break}return i},getButtons(){return this.buttons},hasAnyButton(){return this.buttons.length>0},setButtonEnable(e,t){var i=this.buttons;if(e===void 0||typeof e=="boolean"){t=e;for(var a=0,x=i.length;a<x;a++)i[a]._click.setEnable(t)}else this.getButton(e)._click.setEnable(t);return this},toggleButtonEnable(e){var t=this.buttons;if(e===void 0||typeof e=="boolean")for(var i=0,a=t.length;i<a;i++)t[i]._click.toggleEnable();else this.getButton(e)._click.toggleEnable();return this},getButtonEnable(e){return e===void 0&&(e=0),this.getButton(e)._click.enable},emitButtonClick(e){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",e),this},emitButtonOver(e){for(var t=this.buttonGroup?this.buttonGroup:this,i=this.buttons,a=0,x=i.length;a<x;a++){var C=i[a];C._click.isOver&&(C._click.isOver=!1,t.fireEvent("button.out",C))}var C=this.getButton(e);return C&&(C._click.isOver=!0,t.fireEvent("button.over",C)),this},showButton(e){return hn(this.getButton(e)),this},hideButton(e){return ln(this.getButton(e)),this},isButtonShown(e){return Ud(this.getButton(e)),this},forEachButtton(e,t){for(var i=this.buttons,a=0,x=i.length;a<x;a++)t?e.call(t,i[a],a,i):e(i[a],a,i);return this}};class Ml{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var yk={fireEvent:gk};Object.assign(Ml.prototype,ck,pk,mk,Tl,yk);var dc={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(e){return this.buttonGroup.setSelectedButtonName(e),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(e,t){return this.buttonGroup.setButtonState(e,t),this},getButtonState(e){return this.buttonGroup.getButtonState(e)}};const Zn=Phaser.Utils.Objects.GetValue;let He=class extends qt{constructor(t,i){i===void 0&&(i={});var a=i.space;typeof a=="number"&&(i.space={item:a}),super(t,i),this.type="rexButtons",this.buttonGroup=new Ml({parent:this,eventEmitter:Zn(i,"eventEmitter",this),groupName:Zn(i,"groupName",void 0),clickConfig:Zn(i,"click",void 0)}).setButtonsType(i);var x=Zn(i,"background",void 0),C=Zn(i,"buttons",void 0);this.buttonsExpand=Zn(i,"expand",!1),this.buttonsAlign=Zn(i,"align",void 0),x&&this.addBackground(x),C&&this.addButtons(C),this.addChildrenMap("background",x),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(He.prototype,ok,uk,Tl,dc),k.register("buttons",function(e){var t=new He(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Buttons",He);const Sk=es.prototype.add;var Ck={addButton(e,t,i){return Sk.call(this,e,t,i,void 0,0,this.buttonsExpand),this.buttonGroup.add(e),this},addButtons(e,t){for(var i=0,a=e;i<a;i++)this.addButton(e[i],void 0,t);return this}};const Tk=es.prototype.remove,Mk=es.prototype.clear;var fc=function(i,t){var i=this.getButton(i);return i?(this.buttonGroup.remove(i),Tk.call(this,i,t),this):this},Pk={remove(e,t){if(Ji(e))for(var i=e,a=0,x=i.length;a<x;a++)fc.call(this,i[a],t);else fc.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,Mk.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)fc.call(this,t[i],e);return this}};const ys=Phaser.Utils.Objects.GetValue;class Pl extends es{constructor(t,i){i===void 0&&(i={});var a=ys(i,"row",0),x=ys(i,"column",i.col||0),C=ys(i,"createCellContainerCallback"),E=ys(i,"buttons",void 0),O=ys(i,"expand",!0),I=O?1:0;if(C&&(i.createCellContainerCallback=void 0),E!==void 0){a=Math.max(a,E.length);for(var V=0,X=E.length;V<X;V++)x=Math.max(x,E[V].length)}i.row=a,i.column=x,i.columnProportions=I,i.rowProportions=I,super(t,i),this.type="rexGridButtons",this.buttonGroup=new Ml({parent:this,eventEmitter:ys(i,"eventEmitter",this),groupName:ys(i,"groupName",void 0),clickConfig:ys(i,"click",void 0)}).setButtonsType(i);var q=ys(i,"background",void 0);if(this.buttonsExpand=O,ys(i,"space",void 0),q&&this.addBackground(q),E)for(var st,it,at=0,ut=E.length;at<ut;at++){st=E[at];for(var lt=0,ft=st.length;lt<ft;lt++)it=st[lt],it&&this.addButton(it,lt,at)}else if(C)for(var pt=0;pt<a;pt++)for(var ct=0;ct<x;ct++){var it=C(t,ct,pt);it&&this.addButton(it,ct,pt)}this.addChildrenMap("background",q),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Pl.prototype,Ck,Pk,Tl,dc),k.register("gridButtons",function(e){var t=new Pl(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.GridButtons",Pl);const Qx=vn.prototype.add;var El=function(e){return Qx.call(this,e),this.buttonGroup.add(e),this},Ek={addButton(e){if(Ji(e))for(var t=e,i=0,a=t.length;i<a;i++)El.call(this,t[i]);else El.call(this,e);return this},addButtons(e){if(Ji(e[0]))for(var t=e,i,a=0,x=t.length-1;a<=x;a++){i=t[a];for(var C=0,E=i.length;C<E;C++)El.call(this,i[C]);a>x&&Qx.addNewLine(this)}else for(var C=0,E=e.length;C<E;C++)El.call(this,e[C]);return this}};const wk=vn.prototype.remove,bk=vn.prototype.clear;var cc=function(i,t){var i=this.getButton(i);return i?(this.buttonGroup.remove(i),wk.call(this,i,t),this):this},Rk={remove(e,t){if(Ji(e))for(var i=e,a=0,x=i.length;a<x;a++)cc.call(this,i[a],t);else cc.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,bk.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)cc.call(this,t[i],e);return this}};const zr=Phaser.Utils.Objects.GetValue;class mn extends vn{constructor(t,i){i===void 0&&(i={});var a=i.space;typeof a=="number"&&(i.space={item:a,line:a}),super(t,i),this.type="rexFixWidthButtons",this.buttonGroup=new Ml({parent:this,eventEmitter:zr(i,"eventEmitter",this),groupName:zr(i,"groupName",void 0),clickConfig:zr(i,"click",void 0)}).setButtonsType(i);var x=zr(i,"background",void 0),C=zr(i,"buttons",void 0);this.buttonsAlign=zr(i,"align",void 0),x&&this.addBackground(x),C&&this.addButtons(C),this.addChildrenMap("background",x),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(mn.prototype,Ek,Rk,Tl,dc),k.register("fixWidthButtons",function(e){var t=new mn(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.FixWidthButtons",mn);var Ok={setAccept(e){return this.childrenMap.fileChooser.setAccept(e),this},setMultiple(e){return this.childrenMap.fileChooser.setMultiple(e),this},loadFile(e,t,i,a,x){return this.childrenMap.fileChooser.loadFile(e,t,i,a,x),this},loadFilePromise(e,t,i,a){return this.childrenMap.fileChooser.loadFilePromise(e,t,i,a)}};const jx=Phaser.Utils.Objects.GetValue;class vc extends Ws{constructor(t,i){super(t,i),this.type="rexFileSelectorButton";var a=new Ka(t);t.add.existing(a),this.addBackground(a),this.addChildrenMap("fileChooser",a),this.setAccept(jx(i,"accept","")),this.setMultiple(jx(i,"multiple",!1)),a.on("change",function(x){var C=x.files;C.length!==0&&(C=Array.from(C),this.emit("select",C,this))},this)}get files(){return this.childrenMap.fileChooser.files}}Object.assign(vc.prototype,Ok),k.register("fileSelectorButton",function(e){var t=new vc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.FileSelectorButton",vc);var Ak={getChoice(e){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(e)},getAction(e){return this.childrenMap.actionsSizer.getButton(e)},getToolbar(e){return this.childrenMap.toolbarSizer.getButton(e)},getLeftToolbar(e){return this.childrenMap.leftToolbarSizer.getButton(e)},setChoiceEnable(e,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonEnable(e,t),this},setActionEnable(e,t){return this.childrenMap.actionsSizer.setButtonEnable(e,t),this},setToolbarEnable(e,t){return this.childrenMap.toolbarSizer.setButtonEnable(e,t),this},setLeftToolbarEnable(e,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(e,t),this},toggleChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(e),this},toggleActionEnable(e){return this.childrenMap.actionsSizer.toggleButtonEnable(e),this},toggleToolbarEnable(e){return this.childrenMap.toolbarSizer.toggleButtonEnable(e),this},toggleLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(e),this},getChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(e):!1},getActionEnable(e){return this.childrenMap.actionsSizer.getButtonEnable(e)},getToolbarEnable(e){return this.childrenMap.toolbarSizer.getButtonEnable(e)},getLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.getButtonEnable(e)},emitChoiceClick(e){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(e),this},emitActionClick(e){return this.childrenMap.actionsSizer.emitButtonClick(e),this},emitToolbarClick(e){return this.childrenMap.toolbarSizer.emitButtonClick(e),this},emitLeftToolbarClick(e){return this.childrenMap.leftToolbarSizer.emitButtonClick(e),this},showChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.showButton(e),this},showAction(e){return this.childrenMap.actionsSizer.showButton(e),this},showToolbar(e){return this.childrenMap.toolbarSizer.showButton(e),this},showLeftToolbar(e){return this.childrenMap.leftToolbarSizer.showButton(e),this},hideChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(e),this},hideAction(e){return this.childrenMap.actionsSizer.hideButton(e),this},hideToolbar(e){return this.childrenMap.toolbarSizer.hideButton(e),this},hideLeftToolbar(e){return this.childrenMap.leftToolbarSizer.hideButton(e),this},addChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.addButton(e),this},addAction(e){return this.childrenMap.actionsSizer.addButton(e),this},addToolbar(e){return this.childrenMap.toolbarSizer.addButton(e),this},addLeftToolbar(e){return this.childrenMap.leftToolbarSizer.addButton(e),this},removeChoice(e,t){var i=this.childrenMap.choicesSizer;return i&&i.removeButton(e,t),this},removeAction(e,t){return this.childrenMap.actionsSizer.removeButton(e,t),this},removeToolbar(e,t){return this.childrenMap.toolbarSizer.removeButton(e,t),this},removeLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.removeButton(e,t),this},clearChoices(e){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(e),this},clearActions(e){return this.childrenMap.actionsSizer.clearButtons(e),this},clearToolbar(e){return this.childrenMap.toolbarSizer.clearButtons(e),this},clearLeftToolbar(e){return this.childrenMap.leftToolbarSizer.clearButtons(e),this},forEachChoice(e,t){var i=this.childrenMap.choicesSizer;return i&&i.forEachButtton(e,t),this},forEachAction(e,t){return this.childrenMap.actionsSizer.forEachButtton(e,t),this},forEachToolbar(e,t){return this.childrenMap.toolbarSizer.forEachButtton(e,t),this},forEachLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.forEachButtton(e,t),this},setAllButtonsEnable(e){return e===void 0&&(e=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(e),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(e),this.childrenMap.actionsSizer&&this.setActionEnable(e),this.childrenMap.choicesSizer&&this.setChoiceEnable(e),this},getChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e?e.getAllButtonsState():{}},getChoicesButtonState(e){var t=this.childrenMap.choicesSizer;return e===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(e):!1},setChoicesButtonState(e,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonState(e,t),this},clearChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e&&e.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var e=this.childrenMap.choicesSizer;return e?e.getSelectedButtonName():""},setChoicesSelectedButtonName(e){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(e),this},hasAnyChoice(){var e=this.childrenMap.choicesSizer;return e?e.hasAnyButton():!1},hasAnyAction(){var e=this.childrenMap.actionsSizer;return e?e.hasAnyButton():!1},hasAnyToolbar(){var e=this.childrenMap.toolbarSizer;return e?e.hasAnyButton():!1},hasAnyLeftToolbar(){var e=this.childrenMap.leftToolbarSizer;return e?e.hasAnyButton():!1}},Lk={onCreateModalBehavior(e){e.on("button.click",function(t,i,a,x,C){var E=!1;switch(i){case"actions":E=!0;break;case"choices":e.hasAnyAction()||(E=!0);break}if(E){var O={index:a,text:t.text,button:t,dialog:e};switch(e.buttonsType){case"radio":O.value=e.getChoicesSelectedButtonName();break;case"checkboxes":O.value=e.getChoicesButtonStates();break;default:O.value=void 0}e.modalClose(O)}})},modal(e,t){return e&&e.defaultBehavior===!1?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,Fh.modal.call(this,e,t),this}},qx={};Object.assign(qx,Ak,Lk);const Ft=Phaser.Utils.Objects.GetValue;class no extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexDialog",this.eventEmitter=Ft(i,"eventEmitter",this);var a=Ft(i,"background",void 0),x=Ft(i,"title",void 0),C=Ft(i,"toolbar",void 0),E=Ft(i,"toolbarBackground",void 0),O=Ft(i,"leftToolbar",void 0),I=Ft(i,"leftToolbarBackground",void 0),V=Ft(i,"content",void 0),X=Ft(i,"description",void 0),q,st=Ft(i,"choices",void 0),it=Ft(i,"choicesBackground",void 0),at,ut=Ft(i,"actions",void 0),lt=Ft(i,"actionsBackground",void 0),ft=Ft(i,"click",void 0);a&&this.addBackground(a);var pt;C&&(pt=new He(t,{groupName:"toolbar",background:E,buttons:C,orientation:0,space:{item:Ft(i,"space.toolbarItem",0)},click:ft,eventEmitter:this.eventEmitter}),t.add.existing(pt));var ct;if(O&&(ct=new He(t,{groupName:"leftToolbar",background:I,buttons:O,orientation:0,space:{item:Ft(i,"space.leftToolbarItem",0)},click:ft,eventEmitter:this.eventEmitter}),t.add.existing(ct)),x||C||O){var xt=!!x&&Ft(i,"expand.title",!0),Mt=Ft(i,"align.title","center"),Pt=x&&!xt&&Mt==="center"||!x&&(C||O),Ot=!Pt,It;Ot?It=new qt(t,{orientation:0}):It=new Gi(t),t.add.existing(It);var Bt=Ot?!0:{height:!0};if(ct&&It.add(ct,{align:"left",expand:Bt}),x){Ot&&!xt&&Mt==="right"&&It.addSpace();var zt={left:Ft(i,"space.titleLeft",0),right:Ft(i,"space.titleRight",0)},Vt=xt?1:0;It.add(x,{align:Mt,proportion:Vt,expand:Bt,padding:zt}),Ot&&!xt&&Mt==="left"&&It.addSpace()}pt&&(Ot&&!x&&It.addSpace(),It.add(pt,{align:"right",expand:Bt}));var zt;(V||X||st||ut)&&(zt={bottom:Ft(i,"space.title",0),top:Ft(i,"space.titleTop",0)});var Vt=Ft(i,"proportion.title",0);this.add(It,{padding:zt,proportion:Vt,expand:!0})}if(V){var _t=Ft(i,"align.content","center"),te=Ft(i,"space.content",0),zt={left:Ft(i,"space.contentLeft",0),right:Ft(i,"space.contentRight",0),bottom:X||st||ut?te:0},Vt=Ft(i,"proportion.content",0),kt=Ft(i,"expand.content",!0);this.add(V,{align:_t,padding:zt,proportion:Vt,expand:kt})}if(X){var _t=Ft(i,"align.description","center"),ce=Ft(i,"space.description",0),zt={left:Ft(i,"space.descriptionLeft",0),right:Ft(i,"space.descriptionRight",0),bottom:st||ut?ce:0},Vt=Ft(i,"proportion.description",0),kt=Ft(i,"expand.description",!0);this.add(X,{align:_t,padding:zt,proportion:Vt,expand:kt})}if(st){var me=Ft(i,"choicesType","").split("-"),Pe=ro(me,"wrap")?mn:ro(me,"grid")?Pl:He,Ye=ro(me,"radio")?"radio":ro(me,"checkboxes")?"checkboxes":void 0,ke={left:Ft(i,"space.choicesBackgroundLeft",0),right:Ft(i,"space.choicesBackgroundRight",0),top:Ft(i,"space.choicesBackgroundTop",0),bottom:Ft(i,"space.choicesBackgroundBottom",0)},ui=Ft(i,"space.choice",0);Pe===He?ke.item=ui:Pe===mn?(ke.item=ui,ke.line=Ft(i,"space.choiceLine",ui)):(ke.column=Ft(i,"space.choiceColumn",ui),ke.row=Ft(i,"space.choiceRow",ui));var Xi={width:Ft(i,"choicesWidth",void 0),height:Ft(i,"choicesHeight",void 0),groupName:"choices",buttonsType:Ye,background:it,buttons:st,space:ke,click:ft,eventEmitter:this.eventEmitter,setValueCallback:Ft(i,"choicesSetValueCallback",void 0),setValueCallbackScope:Ft(i,"choicesSetValueCallbackScope",void 0)};Pe===He&&(Xi.orientation=ro(me,"x")?0:1),q=new Pe(t,Xi),t.add.existing(q);var Ui=Ft(i,"space.choices",0),zt={left:Ft(i,"space.choicesLeft",0),right:Ft(i,"space.choicesRight",0),bottom:ut?Ui:0},_t=Ft(i,"align.choices","center"),Vt=Ft(i,"proportion.choices",0),kt=Ft(i,"expand.choices",!0);this.add(q,{align:_t,padding:zt,proportion:Vt,expand:kt}),this.buttonsType=Ye}if(ut){at=new He(t,{groupName:"actions",background:lt,buttons:ut,orientation:0,space:{item:Ft(i,"space.action",0)},expand:Ft(i,"expand.actions",!1),align:Ft(i,"align.actions","center"),click:ft,eventEmitter:this.eventEmitter}),t.add.existing(at);var zt={left:Ft(i,"space.actionsLeft",0),right:Ft(i,"space.actionsRight",0),bottom:Ft(i,"space.actionsBottom",0)},Vt=Ft(i,"proportion.action",0);this.add(at,{align:"center",padding:zt,proportion:Vt,expand:!0})}ao(this,"click"),ao(this,"over"),ao(this,"out"),ao(this,"enable"),ao(this,"disable"),this.addChildrenMap("background",a),this.addChildrenMap("title",x),this.addChildrenMap("toolbar",C),this.addChildrenMap("leftToolbar",O),this.addChildrenMap("content",V),this.addChildrenMap("description",X),this.addChildrenMap("choices",q?q.buttons:void 0),this.addChildrenMap("actions",at?at.buttons:void 0),this.addChildrenMap("choicesSizer",q),this.addChildrenMap("actionsSizer",at),this.addChildrenMap("toolbarSizer",pt),this.addChildrenMap("leftToolbarSizer",ct)}}var ro=function(e,t){return e.indexOf(t)!==-1},_x={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},ao=function(e,t){e.on(`button.${t}`,function(i,a,x,C,E){_x.hasOwnProperty(a)&&e.emit(`${_x[a]}.${t}`,i,x,C,E)})};Object.assign(no.prototype,qx),k.register("dialog",function(e){var t=new no(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Dialog",no);var $e=function(e,t,i){var a=new io(e,t,i);return e.add.existing(a),a},Dk=function(e){return e===void 0&&(e={}),Fk.call(this,e),Bk.call(this,e),Ik.call(this,e),Gk.call(this,e),this},Fk=function(e){var t=this.childrenMap.title;e=e.title,e===null?t.hide():(t.show(),t.resetDisplayContent(e))},Bk=function(e){var t=this.childrenMap.content;if(e=e.content,e===null)t.hide();else if(t.show(),t.resetDisplayContent)t.resetDisplayContent(e);else{var i=e||"";t.setText(i)}},Ik=function(e){var t=this.childrenMap.actions;if(t){var i=e.buttons;if(i){for(var C=this.scene,E=this.defaultActionConfig,O=this.defaultActionButtonCreator,I=0,V=i.length;I<V;I++){var X=i[I],q=t[I];q||(q=$e(C,E,O),this.addAction(q)),q.show().resetDisplayContent(X)}this.buttonMode=i.length;for(var I=i.length,V=t.length;I<V;I++)t[I].hide()}else{var a=t[0];a&&(e.buttonA===null?a.hide():(a.show(),a.resetDisplayContent(e.buttonA)));var x=t[1];x&&(e.buttonB===null?x.hide():(x.show(),x.resetDisplayContent(e.buttonB)))}}},Gk=function(e){var t=this.childrenMap.choices;if(t){var i=e.choices;i||(i=[]);for(var a=this.scene,x=this.defaultChoiceConfig,C=this.defaultActionButtonCreator,E=0,O=i.length;E<O;E++){var I=i[E];typeof I=="string"&&(I={text:I});var V=t[E];V||(V=$e(a,x,C),this.addChoice(V)),V.show().resetDisplayContent(I);var X;I.hasOwnProperty("value")?X=I.value:X=I.text,V.setName(X)}for(var E=i.length,O=t.length;E<O;E++)t[E].hide()}};const kk=Phaser.Utils.Objects.Merge;var Nk=function(e,t){Zi(e)&&(t=e,e=void 0),e===void 0&&(e={}),e=kk(e,this.modalStyle);var i;this.buttonMode===0?this.hasAnyChoice()?i=!1:i=!0:i=!1,e.hasOwnProperty("anyTouchClose")||(e.anyTouchClose=i),e.hasOwnProperty("manualClose")||(e.manualClose=!i);var a=this,x=function(C){var E=C.index;E===a.confirmButtonIndex?a.emit("confirm",C):E===a.cancelButtonIndex&&a.emit("cancel",C),t&&t(C)};return Fh.modal.call(this,e,x),this},Vk={setConfirmButtonIndex(e){return this.confirmButtonIndex=e,this},setCancelButtonIndex(e){return this.cancelButtonIndex=e,this}},ty={resetDisplayContent:Dk,modal:Nk};Object.assign(ty,Vk);var zk=function(e){e.setHoverState&&e.setHoverState(!0)},Yk=function(e){e.setHoverState&&e.setHoverState(!1)},Wk=function(e,t,i,a){e.setActiveState&&e.setActiveState(a)},Xk=function(e){e.setDisableState&&e.setDisableState(!1)},Uk=function(e){e.setDisableState&&e.setDisableState(!0)},ey=function(){this.on("button.over",zk).on("button.out",Yk).on("button.enable",Xk).on("button.disable",Uk).on("button.statechange",Wk)};const Hk=Phaser.Utils.Objects.GetValue;var $k=function(e,t,i){var a=Hk(t,"$type");a===void 0&&t&&(t.hasOwnProperty("slider")||t.hasOwnProperty("scroller"))&&(a="textarea");var x;switch(a){case"textarea":x=new Yx(e,t,i);break;default:x=new $e(e,t,i);break}return e.add.existing(x),x};const pc=Phaser.Utils.Objects.GetValue;class wl extends no{constructor(t,i,a){i=i?j(i):{},a===void 0&&(a={});var x=pc(a,"background",ze);i.background=x(t,i.background),i.title=$e(t,i.title,a.title),i.content=$k(t,i.content,a.content),i.content instanceof eo&&As(i,"height")&&!As(i,"proportion.content")&&Z(i,"proportion.content",1);var C=i.button,E=i.buttonA||C,O=i.buttonB||C,I=i.buttonMode;I===void 0&&(I=E&&O?2:E?1:0);var V=a.button,X=a.buttonA||V,q=a.buttonB||V;switch(I){case 2:i.actions=[$e(t,E,X),$e(t,O,q)];break;case 1:i.actions=[$e(t,E,X)];break;case 0:break;default:i.actions=[];break}var st=i.choice;st&&(i.choices=[]),super(t,i),this.type="rexConfirmDialog",this.buttonMode=I,this.defaultActionConfig=C,this.defaultActionButtonCreator=V,this.defaultChoiceConfig=st,this.defaultChoiceCreator=a.choice;var it=this.childrenMap.actions;this.addChildrenMap("buttonA",it?it[0]:null),this.addChildrenMap("buttonB",it?it[1]:null),ey.call(this),this.setConfirmButtonIndex(pc(i,"confirmButtonIndex",0)),this.setCancelButtonIndex(pc(i,"cancelButtonIndex",1)),this.modalStyle=i.modal||{}}}Object.assign(wl.prototype,ty),k.register("confirmDialog",function(e,t){var i=new wl(this.scene,e,t);return this.scene.add.existing(i),i}),Z(window,"RexPlugins.UI.ConfirmDialog",wl);const iy=Phaser.Utils.Objects.GetValue;var sy=function(e,t){var i=t.dialog,a=!i;if(a){var x=t.style;x.buttonMode=2,i=new wl(e,x,t.creators),e.add.existing(i)}i.setConfirmButtonIndex(iy(t,"confirmButtonIndex",0)).setCancelButtonIndex(iy(t,"cancelButtonIndex",1)).resetDisplayContent(t.content).layout(),a&&t.onCreateDialog&&t.onCreateDialog(i);var C=t.modal;C&&!C.hasOwnProperty("destroy")&&(C.destroy=a);var E=t.confirm,O=t.cancel,I=t.confirmScope,V=t.cancelScope;E&&i.once("confirm",E,I),O&&i.once("cancel",O,V);var X=function(q){i.off("confirm",E,I),i.off("cancel",O,V)};return i.modal(C,X),i};class ny extends Ws{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexConfirmActionButton",this.setConfirmDialogEnable(),this.confirmActionConfig=Hi(i.confirmDialog||{}),i.confirm&&this.setConfirmCallback(i.confirm,i.confirmScope),i.cancel&&this.setCancelCallback(i.cancel,i.cancelScope),this.onClickCallback=function(){if(this.confirmDialogEnable){if(this.confirmDialog)return;this.confirmDialog=sy(t,this.confirmActionConfig),this.confirmDialog.once("destroy",function(){this.confirmDialog=void 0},this)}else this.runConfirmCallback()},this.onClick(this.onClickCallback,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.confirmDialog&&this.confirmDialog.destroy(),super.destroy(t),this.confirmActionConfig=void 0,this.onClickCallback=void 0,this.confirmDialog=void 0)}setConfirmCallback(t,i){return this.confirmActionConfig.confirm=t,this.confirmActionConfig.confirmScope=i,this}setCancelCallback(t,i){return this.confirmActionConfig.cancel=t,this.confirmActionConfig.cancelScope=i,this}setConfirmDialogContent(t){return this.confirmActionConfig.content=t,this}setConfitmDialogStyle(t){return this.confirmActionConfig.style=t,this}setConfitmDialogModalConfig(t){return this.confirmActionConfig.modal=t,this}setConfirmDialogEnable(t){return t===void 0&&(t=!0),this.confirmDialogEnable=t,this}runConfirmCallback(){var t=this.confirmActionConfig.confirm,i=this.confirmActionConfig.confirmScope;return t&&t.call(i),this}}k.register("confirmActionButton",function(e){var t=new ny(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.ConfirmActionButton",ny);var Kk=function(e){return e===void 0&&(e={}),Zk.call(this,e),Jk.call(this,e),Qk.call(this,e),this},Zk=function(e){var t=this.childrenMap.title;e.title===null?this.hide(t):(this.show(t),t.resetDisplayContent(e.title))},Jk=function(e){var t=this.childrenMap.firstNameTitle;if(e.firstNameTitle===null)this.hide(t);else{this.show(t);var i=e.firstNameTitle||"";t.resetDisplayContent(i)}var a=this.childrenMap.firstNameInput;if(e.firstName===null)this.hide(a);else{this.show(a);var x=e.firstName||"";a.setText(x)}var C=this.childrenMap.lastNameTitle;if(e.lastNameTitle===null)this.hide(C);else{this.show(C);var E=e.lastNameTitle||"";C.resetDisplayContent(E)}var O=this.childrenMap.lastNameInput;if(e.lastName===null)this.hide(O);else{this.show(O);var I=e.lastName||"";O.setText(I)}},Qk=function(e){var t=this.childrenMap.actions[0];e.button===null?this.hide(t):(this.show(t),t.resetDisplayContent(e.button))};const jk=Phaser.Utils.Objects.Merge;var qk=function(e,t){Zi(e)&&(t=e,e=void 0),e===void 0&&(e={}),e=jk(e,this.modalStyle),e.anyTouchClose=!1,e.manualClose=!1;var i=this,a=function(x){x.firstName=i.firstName,x.lastName=i.lastName,i.emit("confirm",x),t&&t(x)};return Fh.modal.call(this,e,a),this},_k={resetDisplayContent:Kk,modal:qk},xn=function(e,t,i){i===void 0&&(i=!0),i?t=t?j(t):{}:t||(t={});var a=new Sa(e,t);return e.add.existing(a),a};const Vi=Phaser.Utils.Objects.GetValue;var t8=function(e,t,i){var a=In(Vi(t,"layoutMode",0)),x=a===0,C=new qt(e,{orientation:a,space:{item:Vi(t,"space.firstName",0)}});e.add.existing(C);var E=new qt(e,{orientation:"x"});e.add.existing(E);var O=Vi(t,"firstNameTitle",t.nameTitle),I=$e(e,O,i.firstNameTitle||i.nameTitle);E.add(I,{expand:!0,proportion:Vi(t,"proportion.firstNameTitle",0),padding:{right:Vi(t,"space.firstNameTitle",0)}});var V=t.nameInput||{},X=Vi(t,"firstNameInput",V),q=xn(e,X,i.firstNameInput||i.nameInput),st=!X.hasOwnProperty("width");E.add(q,{expand:!0,proportion:st?1:0});var it=new qt(e,{orientation:"x"});e.add.existing(it);var at=Vi(t,"lastNameTitle",t.nameTitle),ut=$e(e,at,i.lastNameTitle||i.nameTitle);it.add(ut,{expand:!0,proportion:Vi(t,"proportion.lastNameTitle",0),padding:{right:Vi(t,"space.lastNameTitle",0)}});var lt=Vi(t,"firstNameInput",V),ft=xn(e,lt,i.lastNameInput||i.nameInput),pt=!lt.hasOwnProperty("width");if(it.add(ft,{expand:!0,proportion:pt?1:0}),x){var ct=st?1:0,xt=Vi(t,"proportion.firstName",ct);C.add(E,{expand:!0,proportion:xt});var Mt=pt?1:0,Pt=Vi(t,"proportion.lastName",Mt);C.add(it,{expand:!0,proportion:Pt})}else C.add(E,{expand:st,proportion:0}),C.add(it,{expand:pt,proportion:0});return C.addChildrenMap("firstNameTitle",I),C.addChildrenMap("firstNameInput",q),C.addChildrenMap("lastNameTitle",ut),C.addChildrenMap("lastNameInput",ft),C};const e8=Phaser.Utils.Objects.GetValue;class gc extends no{constructor(t,i,a){i===void 0&&(i={}),a===void 0&&(a={}),i.orientation="y";var x=i.space;x&&(x.hasOwnProperty("names")&&(x.content=x.names),x.hasOwnProperty("namesLeft")&&(x.contentLeft=x.namesLeft),x.hasOwnProperty("namesRight")&&(x.contentRight=x.namesRight));var C=e8(a,"background",ze);i.background=C(t,i.background),i.title=$e(t,i.title,a.title),i.content=t8(t,i,a),i.actions=[$e(t,i.button,a.button)],super(t,i),this.type="rexNameInputDialog";var E=i.content.childrenMap;this.addChildrenMap("firstNameTitle",E.firstNameTitle),this.addChildrenMap("firstNameInput",E.firstNameInput),this.addChildrenMap("lastNameTitle",E.lastNameTitle),this.addChildrenMap("lastNameInput",E.lastNameInput),this.addChildrenMap("button",i.actions[0]),ey.call(this),this.modalStyle=i.modal||{}}get firstName(){return this.childrenMap.firstNameInput.text}set firstName(t){this.childrenMap.firstNameInput.setText(t)}setFirstName(t){return this.firstName=t,this}get lastName(){return this.childrenMap.lastNameInput.text}set lastName(t){this.childrenMap.lastNameInput.setText(t)}setLastName(t){return this.lastName=t,this}}Object.assign(gc.prototype,_k),k.register("nameInputDialog",function(e,t){var i=new gc(this.scene,e,t);return this.scene.add.existing(i),i}),Z(window,"RexPlugins.UI.NameInputDialog",gc);var Jn=function(e,t){if(e){var i=Ci(e);i&&i.remove(e,t)}};const bl=Phaser.Utils.Objects.GetValue;var oo=function(e,t,i){var a=bl(e,`proportion.${t}`,i.proportion),x=bl(e,`align.${t}`,"center"),C=bl(e,`space.${t}`,void 0);if(typeof C=="number"&&i.paddingKey){var E=C;C={},C[i.paddingKey]=E}var O=bl(e,`expand.${t}`,!0);return{proportion:a,align:x,padding:C,expand:O}},Rl=function(e){return oo(e,"header",{proportion:0,paddingKey:"bottom"})},Ol=function(e){return oo(e,"leftSide",{proportion:0,paddingKey:"right"})},Al=function(e){return oo(e,"content",{proportion:1})},Ll=function(e){return oo(e,"rightSide",{proportion:0,paddingKey:"left"})},Dl=function(e){return oo(e,"footer",{proportion:0,paddingKey:"top"})},Xs=function(e){return{proportion:1,align:"center",padding:0,expand:!0}},Us=function(e,t){var i=new qt(e,{orientation:t});return e.add.existing(i),i},i8=function(e){var t=this.scene,i=e.header;i&&this.add(i,Rl(e));var a=Us(t,0);this.add(a,Xs());var x=e.leftSide;x&&a.add(x,Ol(e));var C=e.content;C&&a.add(C,Al(e));var E=e.rightSide;E&&a.add(E,Ll(e));var O=e.footer;O&&this.add(O,Dl(e))},s8=function(e){var t=this.scene,i=e.header;i&&this.add(i,Rl(e));var a=Us(t,0);this.add(a,Xs());var x=e.leftSide;x&&a.add(x,Ol(e));var C=Us(t,1);a.add(C,Xs());var E=Us(t,0);C.add(E,Xs());var O=e.content;O&&E.add(O,Al(e));var I=e.rightSide;I&&E.add(I,Ll(e));var V=e.footer;V&&C.add(V,Dl(e))},n8=function(e){var t=this.scene,i=e.header;i&&this.add(i,Rl(e));var a=Us(t,0);this.add(a,Xs());var x=Us(t,1);a.add(x,Xs());var C=Us(t,0);x.add(C,Xs());var E=e.leftSide;E&&C.add(E,Ol(e));var O=e.content;O&&C.add(O,Al(e));var I=e.footer;I&&x.add(I,Dl(e));var V=e.rightSide;V&&a.add(V,Ll(e))},r8=function(e){var t=this.scene,i=e.header;i&&this.add(i,Rl(e));var a=Us(t,0);this.add(a,Xs());var x=e.leftSide;x&&a.add(x,Ol(e));var C=Us(t,1);a.add(C,Xs());var E=e.content;E&&C.add(E,Al(e));var O=e.footer;O&&C.add(O,Dl(e));var I=e.rightSide;I&&a.add(I,Ll(e))};const a8=Phaser.Utils.Objects.GetValue,ry=[i8,s8,n8,r8];var o8=function(e){e===void 0&&(e={});var t=e.background,i=e.header,a=e.leftSide,x=e.content,C=e.rightSide,E=e.footer;Jn(t),Jn(i),Jn(a),Jn(x),Jn(C),Jn(E),this.clear(!0),t&&this.addBackground(t);var O=a8(e,"layoutMode",0);typeof O=="string"&&(O=h8[O.toUpperCase()]);var I=ry[O]||ry[0];return I.call(this,e),this.addChildrenMap("background",t),this.addChildrenMap("header",i),this.addChildrenMap("leftSide",a),this.addChildrenMap("content",x),this.addChildrenMap("rightSide",C),this.addChildrenMap("footer",E),this};const h8={FFF:0,LFF:1,FFR:2,LFR:3};class mc extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexHolyGrail",this.build(i)}}var l8={build:o8};Object.assign(mc.prototype,l8),k.register("holyGrail",function(e){var t=new mc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.HolyGrail",mc);var u8={getButtonsSizer(e){return this.childrenMap[`${e}ButtonsSizer`]},getButton(e,t){var i=this.getButtonsSizer(e);return i?i.getButton(t):void 0},setButtonEnable(e,t,i){return this.getButtonsSizer(e).setButtonEnable(t,i),this},setLeftButtonEnable(e,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(e,t),this},setRightButtonEnable(e,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(e,t),this},setTopButtonEnable(e,t){return this.childrenMap.topButtonsSizer.setButtonEnable(e,t),this},setBottomButtonEnable(e,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(e,t),this},toggleButtonEnable(e,t){return this.getButtonsSizer(e).toggleButtonEnable(t),this},toggleLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(e),this},toggleRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(e),this},toggleTopButtonEnable(e){return this.childrenMap.topButtonsSizer.toggleButtonEnable(e),this},toggleBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(e),this},getButtonEnable(e,t){return this.getButtonsSizer(e).getButtonEnable(t)},getLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.getButtonEnable(e)},getRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.getButtonEnable(e)},getTopButtonEnable(e){return this.childrenMap.topButtonsSizer.getButtonEnable(e)},getBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.getButtonEnable(e)},emitButtonClick(e,t){var i=this.getButtonsSizer(e);return i?(i.emitButtonClick(t),this):this},emitLeftButtonClick(e){return this.childrenMap.leftButtonsSizer.emitButtonClick(e),this},emitRightButtonClick(e){return this.childrenMap.rightButtonsSizer.emitButtonClick(e),this},emitTopButtonClick(e){return this.childrenMap.topButtonsSizer.emitButtonClick(e),this},emitBottomButtonClick(e){return this.childrenMap.bottomButtonsSizer.emitButtonClick(e),this},getLeftButton(e){return this.childrenMap.leftButtonsSizer.getButton(e)},getRightButton(e){return this.childrenMap.rightButtonsSizer.getButton(e)},getTopButton(e){return this.childrenMap.topButtonsSizer.getButton(e)},getBottomButton(e){return this.childrenMap.bottomButtonsSizer.getButton(e)},showButton(e,t){return hn(this.getButton(e,t)),this},showLeftButton(e){return hn(this.getLeftButton(e)),this},showRightButton(e){return hn(this.getRightButton(e)),this},showTopButton(e){return hn(this.getTopButton(e)),this},showBottomButton(e){return hn(this.getBottomButton(e)),this},hideButton(e,t){return ln(this.getButton(e,t)),this},hideLeftButton(e){return ln(this.getLeftButton(e)),this},hideRightButton(e){return ln(this.getRightButton(e)),this},hideTopButton(e){return ln(this.getTopButton(e)),this},hideBottomButton(e){return ln(this.getBottomButton(e)),this},addButton(e,t){return this.getButtonsSizer(e).addButton(t),this},addLeftButton(e){return this.addButton("left",e),this},addRightButton(e){return this.addButton("right",e),this},addTopButton(e){return this.addButton("top",e),this},removeButton(e,t,i){return this.getButtonsSizer(e).removeButton(t,i),this},removeLeftButton(e,t){return this.removeButton("left",e,t),this},removeRightButton(e,t){return this.removeButton("right",e,t),this},removeTopButton(e,t){return this.removeButton("top",e,t),this},removeBottomButton(e,t){return this.removeButton("bottom",e,t),this},clearButtons(e,t){return this.getButtonsSizer(e).clearButtons(t),this},clearLeftButtons(e){return this.clearButtons("left",e),this},clearRightButtons(e){return this.clearButtons("right",e),this},clearTopButtons(e){return this.clearButtons("top",e),this},clearBottomButtonss(e){return this.clearButtons("bottom",e),this},forEachButton(e,t,i){return this.getButtonsSizer(e).forEachButtton(t,i),this},forEachLeftButton(e,t){return this.childrenMap.leftButtonsSizer.forEachButtton(e,t),this},forEachRightButton(e,t){return this.childrenMap.rightButtonsSizer.forEachButtton(e,t),this},forEachTopButton(e,t){return this.childrenMap.topButtonsSizer.forEachButtton(e,t),this},forEachBottomButton(e,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(e,t),this}};const oe=Phaser.Utils.Objects.GetValue;class xc extends es{constructor(t,i){i===void 0&&(i={}),i.column=3,i.row=3,i.columnProportions=[0,0,0],i.rowProportions=[0,0,0];var a=oe(i,"expand.panel",!1);a&&(i.columnProportions[1]=1,i.rowProportions[1]=1),super(t,i),this.type="rexTabs",this.eventEmitter=oe(i,"eventEmitter",this);var x=oe(i,"background",void 0),C=oe(i,"panel",void 0),E=oe(i,"leftButtons",void 0),O=oe(i,"leftButtonsBackground",void 0),I,V=oe(i,"rightButtons",void 0),X=oe(i,"rightButtonsBackground",void 0),q,st=oe(i,"topButtons",void 0),it=oe(i,"topButtonsBackground",void 0),at,ut=oe(i,"bottomButtons",void 0),lt=oe(i,"bottomButtonsBackground",void 0),ft,pt=oe(i,"click",void 0);if(x&&this.addBackground(x),C&&this.add(C,{column:1,row:1,expand:a}),E){var ct=oe(i,"space.leftButtonsOffset",0),xt=oe(i,"space.leftButton",0),Mt=oe(i,"expand.leftButtons",!1),Pt=oe(i,"align.leftButtons","top");I=new He(t,{groupName:"left",background:O,buttons:E,orientation:"y",space:{item:xt},expand:Mt,click:pt,eventEmitter:this.eventEmitter}),this.add(I,{column:0,row:1,align:Pt,padding:{top:ct},expand:Mt})}if(V){var Ot=oe(i,"space.rightButtonsOffset",0),It=oe(i,"space.rightButton",0),Bt=oe(i,"expand.rightButtons",!1),zt=oe(i,"align.rightButtons","top");q=new He(t,{groupName:"right",background:X,buttons:V,orientation:"y",space:{item:It},expand:Bt,click:pt,eventEmitter:this.eventEmitter}),this.add(q,{column:2,row:1,align:zt,padding:{top:Ot},expand:Bt})}if(st){var Vt=oe(i,"space.topButtonsOffset",0),_t=oe(i,"space.topButton",0),te=oe(i,"expand.topButtons",!1),kt=oe(i,"align.topButtons","left");at=new He(t,{groupName:"top",background:it,buttons:st,orientation:"x",space:{item:_t},expand:te,align:oe(i,"align.topButtons",void 0),click:pt,eventEmitter:this.eventEmitter}),this.add(at,{column:1,row:0,align:kt,padding:{left:Vt},expand:te})}if(ut){var ce=oe(i,"space.bottomButtonsOffset",0),me=oe(i,"space.bottomButton",0),Pe=oe(i,"expand.bottomButtons",!1),Ye=oe(i,"align.bottomButtons","left");ft=new He(t,{groupName:"bottom",background:lt,buttons:ut,orientation:"x",space:{item:me},expand:Pe,align:oe(i,"align.bottomButtons",void 0),click:pt,eventEmitter:this.eventEmitter}),this.add(ft,{column:1,row:2,align:Ye,padding:{left:ce},expand:Pe})}this.addChildrenMap("background",x),this.addChildrenMap("panel",C),this.addChildrenMap("leftButtons",E),this.addChildrenMap("rightButtons",V),this.addChildrenMap("topButtons",st),this.addChildrenMap("bottomButtons",ut),this.addChildrenMap("leftButtonsSizer",I),this.addChildrenMap("rightButtonsSizer",q),this.addChildrenMap("topButtonsSizer",at),this.addChildrenMap("bottomButtonsSizer",ft)}}Object.assign(xc.prototype,u8),k.register("tabs",function(e){var t=new xc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Tabs",xc),k.register("slider",function(e){var t=new Vr(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Slider",Vr);class ay{constructor(t,i){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,i){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,i),this}setCellContainerAlign(t){return typeof t=="string"&&(t=br[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var i=this.parent;this._deltaHeight===0&&t!==0?i.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&i.nonZeroDeltaHeightCount--;var a=this._deltaHeight!==t;if(this._deltaHeight=t,a){i.resetTotalRowsHeight();var x=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(x,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(ay.prototype,Oi);const oy=Phaser.Utils.Objects.GetValue,d8=Phaser.Utils.Array.SpliceOne;class f8{constructor(t,i){this.parent=t,this.cells=[],this.cellPool=new St,this.resetFromJSON(i)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var i=t.cellHeight;i===void 0&&(i=60);var a=t.cellWidth;return a===void 0&&(a=60),this.setDefaultCellHeight(i),this.setDefaultCellWidth(a),this.initCells(oy(t,"cellsCount",0)),this.setColumnCount(oy(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var i=this.cells;i.length=t;for(var a=0;a<t;a++)i[a]=null;return this}insertNewCells(t,i){var a=this.cells;if(t===a.length){var x=t+i;a.legth=x;for(var C=t;C<x;C++)a[C]=null}else{var E=[];E.length=i;for(var C=0;C<i;C++)E[C]=null;this.cells.splice(t,0,...E)}return this.resetTotalRowsHeight(),this}removeCells(t,i){for(var a=t+i,x=t;x<a;x++)this.freeCell(x);return a===this.cells.length?this.cells.length=t:(i===1?d8(this.cells,t):this.cells.splice(t,i),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){this.colCount=t,this.resetTotalRowsHeight();var i=this.parent;if(i.expandCellSize){var a=i.scrollMode===0?i.width:i.height,x=a/t;this.setDefaultCellWidth(x)}return this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,i){if(i===void 0&&(i=0),t===0)return 0;if(this.defaultCellHeightMode){var O=t/this.defaultCellHeight;switch(i){case 1:O=Math.ceil(O);break;default:O=Math.floor(O);break}return O}for(var a=this.rowCount,x=t,C,E,O=0;;)if(E=this.getRowHeight(O),x-=E,C=O>=0&&O<a,x>0&&C)O+=1;else{if(x===0)return i===2&&(O+=1),O;if(i===1){var I=O;O+=1,C=O>=0&&O<a,C||(O=I)}return O}}widthToColIndex(t,i){if(t===0)return 0;var a=t/this.defaultCellWidth;return i?a=Math.ceil(a):a=Math.floor(a),a}colRowToCellIndex(t,i){return t>=this.colCount?null:i*this.colCount+t}rowIndexToHeight(t,i){if(this.defaultCellHeightMode)return(i-t+1)*this.defaultCellHeight;for(var a,x=0,C=t;C<=i;C++)a=this.getRowHeight(C),x+=a;return x}colIndexToWidth(t,i){return(i-t+1)*this.defaultCellWidth}getRowHeight(t){var i=this.colCount;if(i<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var a=0,x,C=0;C<i;C++)x=this.getCellHeight(this.colRowToCellIndex(C,t)),a<x&&(a=x);return a}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var i;if(this.defaultCellHeightMode)i=this.defaultCellHeight;else{var a=this.getCell(t,!1),x=a?a.deltaHeight:0;i=this.defaultCellHeight+x}return i}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,i){if(!this.isValidCellIdx(t))return null;if(i===void 0&&(i=!0),this.cells[t]===null&&i){var a=this.newCell(t);this.cells[t]=a}return this.cells[t]}newCell(t){var i=this.cellPool.pop();return i===null?i=new ay(this):i.setParent(this),i.index=t,i}buildCellIndex(t){t===void 0&&(t=0);for(var i=this.cells,a,x=t,C=i.length;x<C;x++)a=i[x],a&&(a.index=x);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var c8=function(e){var t=this.table,i=this.topTableOY,a=this.bottomTableOY,x=e>i,C=e<a;if(this.clampTableOXY){var E=t.rowCount,O=t.heightToRowIndex(this.instHeight,1);E<O?e=0:x?e=i:C&&(e=a)}return this._tableOY!==e&&(this._tableOY=e),x&&(this.execeedTopState||this.emit("execeedtop",this,e,i)),this.execeedTopState=x,C&&(this.execeedBottomState||this.emit("execeedbottom",this,e,a)),this.execeedBottomState=C,this},v8=function(e){var t=this.table,i=this.leftTableOX,a=this.rightTableOX,x=e>this.leftTableOX,C=e<this.rightTableOX;if(this.clampTableOXY){var E=t.colCount,O=t.widthToColIndex(this.instWidth,!0);E<O?e=0:x?e=i:C&&(e=a)}return this._tableOX!==e&&(this._tableOX=e),x&&(this.execeedLeftState||this.emit("execeedleft",this,e,i)),this.execeedLeftState=x,C&&(this.execeedRightState||this.emit("execeedright",this,e,a)),this.execeedRightState=C,this},yc=function(e){return e.hasOwnProperty("geometryMask")?e.geometryMask:e.bitmapMask};const p8=Phaser.Geom.Intersects.RectangleToRectangle,g8=Phaser.Geom.Rectangle.Overlaps;var m8=function({parent:e,mask:t,children:i,onVisible:a,onInvisible:x,scope:C}){if(t){i===void 0&&(i=e.getAllChildren());for(var E=!!a||!!x,O=e.getBounds(),I=yc(t),V,X,q,st,it=0,at=i.length;it<at;it++)if(V=i[it],V!==I&&x8(V)){if(st=V.visible,V.getBounds)switch(X=V.getBounds(X),q=y8(O,X),q){case 4:S8(e,V);break;case 0:p8(O,X)||g8(O,X)?Sc(e,V,t):C8(e,V);break;default:Sc(e,V,t);break}else Sc(e,V,t);if(E&&V.visible!==st){var ut=V.visible?a:x;ut&&(C?ut.call(C,V,e):ut(V,e))}}}},x8=function(e){if(!e.displayList)return!1;for(;;){var t=e.rexContainer;if(t)if(t.visible){var i=t.parent;if(i){e=i;continue}else return!0}else return!1;else return e.visible}},y8=function(e,t){var i=t.top,a=t.bottom,x=t.left,C=t.right,E=0;return E+=e.contains(x,i)?1:0,E+=e.contains(x,a)?1:0,E+=e.contains(C,i)?1:0,E+=e.contains(C,a)?1:0,E},S8=function(e,t,i){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!0))},Sc=function(e,t,i){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.setMask&&t.setMask(i),e.setChildMaskVisible(t,!0))},C8=function(e,t,i){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!1),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!1))};const Yr=Phaser.Utils.Objects.GetValue,T8={update:0,everyTick:1};var hy={setupChildrenMask(e){return e===!1?this:(this.setMaskUpdateMode(Yr(e,"updateMode",0)),this.enableChildrenMask(Yr(e,"padding",0)),this.setMaskLayer(Yr(e,"layer",void 0)),this.onMaskGameObjectVisible=Yr(e,"onVisible"),this.onMaskGameObjectInvisible=Yr(e,"onInvisible"),this.maskGameObjectCallbackScope=Yr(e,"scope"),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this.onMaskGameObjectVisible=null,this.onMaskGameObjectInvisible=null,this.maskGameObjectCallbackScope=null,this):this},setMaskUpdateMode(e){return typeof e=="string"&&(e=T8[e]),this.maskUpdateMode=e,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(e){var t=_i.call(this,null,this,0,e);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(e){return e===void 0&&(e=!0),this.maskChildrenFlag=e,this},setMaskLayer(e){return this.maskLayer=e,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):m8({parent:this,mask:this.childrenMask,onVisible:this.onMaskGameObjectVisible,onInvisible:this.onMaskGameObjectInvisible,scope:this.maskGameObjectCallbackScope}),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var e=yc(this.childrenMask);return e.setPosition().resize(),this.resetChildPositionState(e),this}},M8=function(){if(this.cellsCount!==0){var e=this.scaleX,t=this.scaleY,i=e===1&&t===1;i||this.setScale(1);var a=this.table,x=this.tableOYOffset,C=this.tableOY+x,E=this.tableOX;this.startRowIndex=Math.max(a.heightToRowIndex(-C,2),0);for(var O=this.startRowIndex,I=Math.max(a.widthToColIndex(-E),0),V=I,X=a.colRowToCellIndex(V,O),q=this.bottomBound,st=this.rightBound,it=a.cellsCount-1,at=a.colCount-1,ut=this.getCellTLX(V),lt=ut,ft=this.getCellTLY(O)+x,pt=ft;pt<q&&X<=it;){if(this.table.isValidCellIdx(X)){var ct=a.getCell(X,!0);this.visibleCells.set(ct),this.preVisibleCells.contains(ct)||this.showCell(ct);var xt,Mt;if(this.scrollMode===0?(xt=lt,Mt=pt):(xt=pt,Mt=lt),ct.cellContainerAlign==null)ct.setXY(xt,Mt);else{var Pt=ct.getContainer();Da(Pt,xt,Mt,ct.width,ct.height,ct.cellContainerAlign),ct.setXY(Pt.x,Pt.y)}}lt<st&&V<at?(lt+=a.getColWidth(V),V+=1):(lt=ut,pt+=a.getRowHeight(O),V=I,O+=1),X=a.colRowToCellIndex(V,O)}i||this.setScale(e,t)}},ly=function(e){var t=null,i=e.getContainer();if(i?(t=i,e.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",e,t,this),this.cellContainersPool){var i=e.getContainer();i?t===null?this.cellContainersPool.add(i):t!==i&&(this.cellContainersPool.add(i),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},P8=function(e){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,i=this.tableOX+this.table.colIndexToWidth(0,e-1)+t;return i},E8=function(e){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,i=this.tableOY+this.table.rowIndexToHeight(0,e-1)+t;return i},w8=function(){var e=this.preVisibleCells,t=this.visibleCells;e.iterate(function(i){t.contains(i)||this.hideCell(i)},this)},uy=function(e){if(this.emit("cellinvisible",e),this.cellContainersPool){var t=e.popContainer();t&&(t.setScale(1).setAlpha(1),this.cellContainersPool.killAndHide(t))}e.destroyContainer()},b8=function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),e&&(dy.call(this),this.hideCells()),dy.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),t&&(this.layoutChildrenMask(),this.maskChildren()),this},dy=function(){var e=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=e,this.visibleCells.clear()},R8=function(e){var t=this.table.getCell(e,!1);return t&&this.visibleCells.contains(t)},fy=function(e,t){t-=this.y+this.topLeftY,e-=this.x+this.topLeftX;var i=this.tableOY-(this.scrollMode===0?t:e),a=this.tableOX-(this.scrollMode===0?e:t),x=this.table,C=x.heightToRowIndex(-i,0),E=x.widthToColIndex(-a),O=x.colRowToCellIndex(E,C);return O===null||!this.isCellVisible(O)?null:O},O8=function(e,t){var i=fy.call(this,e,t);if(i!==null)return this.getCellContainer(i)},A8=function(e,t){return this.visibleCells.each(e,t),this},L8=function(e,t){return this.visibleCells.iterate(e,t),this},D8=function(e,t){return this.table.cells.slice().forEach(e,t),this},F8=function(e,t){return this.table.cells.forEach(e,t),this},B8=function(e){var t=this.cellsCount;return t===e?this:(t>e?this.removeCells(e,t-e):this.insertNewCells(t,e-t),this)};const I8=Phaser.Math.Clamp;var G8=function(e,t){return typeof e=="object"&&(e=e.index),t===void 0&&(t=1),t<=0?this:(e=I8(e,0,this.cellsCount),this.table.insertNewCells(e,t),this)},k8=function(e,t){if(typeof e=="object"&&(e=e.index),t===void 0&&(t=1),e<0&&(t+=e,e=0),t<=0)return this;if(e>this.cellsCount)return this;for(var i,a=e,x=e+t;a<x;a++)i=this.getCell(a,!1),i&&(this.visibleCells.contains(i)&&(uy.call(this,i),this.visibleCells.delete(i)),this.preVisibleCells.delete(i));return this.table.removeCells(e,t),this},N8=function(e){return this.table.colCount===e?this:(this.table.setColumnCount(e),this)},V8=function(e,t){return this.setCellsCount(e*t),this.table.setColumnCount(e),this},z8=function(e){var t=this.table.getCell(e,!1);return!t||!t.container?this:(ly.call(this,t),this)},cy={setTableOY:c8,setTableOX:v8,showCells:M8,showCell:ly,getCellTLX:P8,getCellTLY:E8,hideCells:w8,hideCell:uy,updateTable:b8,isCellVisible:R8,pointToCellIndex:fy,pointToCellContainer:O8,eachVisibleCell:A8,iterateVisibleCell:L8,eachCell:D8,iterateCell:F8,setCellsCount:B8,insertNewCells:G8,removeCells:k8,setColumnCount:N8,setGridSize:V8,updateVisibleCell:z8};Object.assign(cy,hy);const Y8=Phaser.GameObjects.Group,vy=Phaser.Structs.Set,zi=Phaser.Utils.Objects.GetValue;let py=class extends Ti{constructor(t,i,a,x,C,E){E===void 0&&(E={}),super(t,i,a,x,C),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new vy,this.preVisibleCells=new vy,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var O=zi(E,"reuseCellContainer",!1);O&&(this.cellContainersPool=new Y8(t));var I=zi(E,"cellVisibleCallback",null);if(I!==null){var V=zi(E,"cellVisibleCallbackScope",void 0);this.on("cellvisible",I,V)}if(I=zi(E,"cellInvisibleCallback",null),I!==null){var V=zi(E,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",I,V)}zi(E,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(zi(E,"mask",void 0)),this.setScrollMode(zi(E,"scrollMode",0)),this.setClampMode(zi(E,"clampTableOXY",!0)),this.setStartFromBottomEnable(zi(E,"startFromBottom",!1));var X,q,st,it=this.scrollMode===0;if(it?(X=E.cellWidth,q=E.cellHeight,st=E.columns):(X=E.cellHeight,q=E.cellWidth,st=zi(E,"rows",E.columns)),this.fixedCellSize=zi(E,"fixedCellSize",!1),this.expandCellSize=!this.fixedCellSize&&X===void 0,st||(st=1),this.fixedCellSize)st=Math.max(Math.floor(this.instWidth/X),1);else if(this.expandCellSize){var x=it?this.width:this.height;X=x/st}E.cellWidth=X,E.cellHeight=q,E.columns=st,this.table=new f8(this,E),this.updateTable()}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=W8[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}setStartFromBottomEnable(t){return t===void 0&&(t=!0),this.startFromBottomEnable=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,i){return this.setTableOY(i).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,i){return this.addTableOY(i).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}setTableOXByPercentage(t){return this.setTableOX(-this.tableVisibleWidth*t),this}getTableOXPercentage(){var t=this.tableVisibleWidth;return t===0?0:this.tableOX/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}set s(t){this.setTableOXByPercentage(t).updateTable()}get s(){return this.getTableOXPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}scrollToRow(t){this.scrollToBottom();var i=this.table.rowIndexToHeight(0,t-1);return this.setTableOY(-i).updateTable(),this}scrollToNextRow(t){return t===void 0&&(t=1),this.scrollToRow(this.startRowIndex+t),this}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var i=this.table.getCell(t,!1),a;return i&&(a=i.getContainer()),a}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,i){var a;return typeof t=="number"?a=this.table.getCell(t,!0):a=t,a.height=i,this}setCellWidth(t,i){var a;return typeof t=="number"?a=this.table.getCell(t,!0):a=t,a.width=i,this}resetAllCellsSize(t,i){if(this.scrollMode===1){var a=t;t=i,i=a}this.table.setDefaultCellHeight(i).setDefaultCellWidth(t);for(var x=this.table.cells,C=0,E=x.length;C<E;C++){var O=x[C];O&&(O.deltaHeight=0)}if(this.fixedCellSize){var I=Math.floor(this.instWidth/t);this.table.setColumnCount(I)}return this.updateTable(!0,!0),this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get tableOYOffset(){if(this.startFromBottomEnable){var t=this.tableHeight-this.instHeight;if(t<0)return-t}return 0}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t=this.tableWidth-this.instWidth;return t<0&&(t=0),t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,i){if(this.width===t&&this.height===i)return this;if(super.resize(t,i),this.fixedCellSize){var a=Math.floor(this.instWidth/this.table.defaultCellWidth);this.table.setColumnCount(a)}else this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount);return this.updateTable(!0,!0),this}};Object.assign(py.prototype,cy);const W8={v:0,vertical:0,h:1,horizontal:1};var X8=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.tableOY},set:function(t){e.tableOY=t}}),Object.defineProperty(e,"childOX",{configurable:!0,get:function(){return e.tableOX},set:function(t){e.tableOX=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTableOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTableOY}}),Object.defineProperty(e,"leftChildOX",{get:function(){return e.leftTableOX}}),Object.defineProperty(e,"rightChildOX",{get:function(){return e.rightTableOX}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.instHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.tableHeight}}),Object.defineProperty(e,"childVisibleWidth",{get:function(){return e.instWidth}}),Object.defineProperty(e,"childWidth",{get:function(){return e.tableWidth}})},U8=function(e){e.on("cellvisible",function(t,E,a){var x=this.createCellContainerCallback,C=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var E;C?E=x.call(C,t,E,a):E=x(t,E,a),E&&(t.cellContainerAlign==null&&E.setOrigin&&E.setOrigin(0),E.isRexSizer&&E.layout()),t.item=void 0,t.items=void 0,t.setContainer(E)},this)},Ss=function(e,t,i,a,x,C,E){var O;if(x===void 0)O=a;else{var I=C.camera,V=a+I.scrollX*(i.scrollFactorX-1),X=x+I.scrollY*(i.scrollFactorY-1);O=i.pointToCellIndex(V,X)}if(O!=null){var q=i.getCellContainer(O);q&&e.emit(t,q,O,C,E)}},H8=function(e,t){e.on("pointerdown",function(i,a,x,C){Ss(this.eventEmitter,"cell.down",e,i.worldX,i.worldY,i,C)},this).on("pointerup",function(i,a,x,C){Ss(this.eventEmitter,"cell.up",e,i.worldX,i.worldY,i,C)},this)},$8=function(e,t){e.on("pointermove",gy,this).on("pointerover",gy,this).on("pointerout",K8,this)},gy=function(e,t,i,a){var x=this.childrenMap.child,C=e.camera,E=e.worldX+C.scrollX*(x.scrollFactorX-1),O=e.worldY+C.scrollY*(x.scrollFactorY-1),I=x.pointToCellIndex(E,O);if(I!==x.input.lastOverCellIndex){var V=x.input.lastOverCellIndex;x.input.lastOverCellIndex=I,Ss(this.eventEmitter,"cell.out",x,V,void 0,e,a),Ss(this.eventEmitter,"cell.over",x,I,void 0,e,a)}},K8=function(e,t){var i=this.childrenMap.child,a=i.input.lastOverCellIndex;i.input.lastOverCellIndex=void 0,Ss(this.eventEmitter,"cell.out",i,a,void 0,e,t)};const Z8=Phaser.Utils.Objects.GetValue;var J8=function(e,t){var i=Z8(t,"click",void 0);i!==!1&&(i===void 0&&(i={}),i.threshold=10,e._click=new Fs(e,i),e._click.on("click",function(a,x,C,E){Ss(this.eventEmitter,"cell.click",x,C.worldX,C.worldY,C,E)},this))};const Q8=Phaser.Utils.Objects.GetValue;var j8=function(e,t){var i=Q8(t,"tap",void 0);i!==!1&&(e._tap=new Gh(e,i),e._tap.on("tap",function(a,x,C){var E=`cell.${a.tapsCount}tap`;Ss(this.eventEmitter,E,a.gameObject,a.worldX,a.worldY,C)},this))};const q8=Phaser.Utils.Objects.GetValue;var _8=function(e,t){var i=q8(t,"press",void 0);i!==!1&&(e._press=new kh(e,i),e._press.on("pressstart",function(a,x,C){Ss(this.eventEmitter,"cell.pressstart",e,a.worldX,a.worldY,C)},this).on("pressend",function(a,x,C){Ss(this.eventEmitter,"cell.pressend",e,a.worldX,a.worldY,C)},this))};const t6=Phaser.Utils.Objects.GetValue;var e6=function(e,t){var i=t6(t,"swipe",void 0);i!==!1&&(i===void 0&&(i={}),i.dir="4dir",e._swipe=new Ya(e,i),e._swipe.on("swipe",function(a,x,C){var E=a.left?"left":a.right?"right":a.up?"up":"down";Ss(this.eventEmitter,`cell.swipe${E}`,e,a.worldX,a.worldY,C)},this))},i6=function(e,t){e.setInteractive(),H8.call(this,e,t),$8.call(this,e,t),J8.call(this,e,t),j8.call(this,e,t),_8.call(this,e,t),e6.call(this,e,t)},s6=function(e,t){e===void 0?this.items=[]:this.items=e,t===void 0&&(t=!0);var i=this.childrenMap.child;return i.setCellsCount(this.items.length),t&&(i.updateTable(!0),this.resizeController()),this},n6={scrollToRow(e){var t=this.childrenMap.child;return t.scrollToRow(e),this},scrollToNextRow(e){var t=this.childrenMap.child;return t.scrollToNextRow(e),this}};const ss=Phaser.Utils.Objects.GetValue;class Cc extends to{constructor(t,i){i===void 0&&(i={});var a=jf(i),x=ss(i,"table",void 0);x===void 0&&(x={}),x.scrollMode=a===2?0:a,x.clampTableOXY=ss(i,"clampChildOY",!1);var C=ss(x,"width",void 0),E=ss(x,"height",void 0),O=new py(t,0,0,C,E,x);t.add.existing(O);var I,V;x.scrollMode===0?(I=C===void 0,V=E===void 0):(I=E===void 0,V=C===void 0),X8(O),O._minWidth=C===void 0?0:void 0,O._minHeight=E===void 0?0:void 0,i.type="rexGridTable",i.child={gameObject:O,expandWidth:I,expandHeight:V};var X=ss(i,"space",void 0);X&&(X.child=ss(X,"table",0)),super(t,i),this.addChildrenMap("table",O),this.addChildrenMap("tableLayer",O.maskLayer),this.eventEmitter=ss(i,"eventEmitter",this);var q=ss(i,"createCellContainerCallback",r),st=ss(i,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(q,st),U8.call(this,O),this.resizeControllerFlag=!1;var it=a===0?"cellheightchange":"cellwidthchange";O.on(it,function(){this.resizeControllerFlag=!0},this),ss(x,"interactive",!0)&&i6.call(this,O,x),this.setItems(ss(i,"items",[]),!1),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,i){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=i,this}refresh(){return this.setItems(this.items),this}getCell(t){var i=this.childrenMap.child;return i.getCell(t)}getCellContainer(t){var i=this.childrenMap.child;return i.getCellContainer(t)}updateVisibleCell(t){var i=this.childrenMap.child;return i.updateVisibleCell(t)}resetAllCellsSize(t,i){var a=this.childrenMap.child;return a.resetAllCellsSize(t,i),this}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){var t=this.childrenMap.child;return t.startRowIndex}}var r6={setItems:s6};Object.assign(Cc.prototype,n6,r6),k.register("gridTable",function(e){var t=new Cc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.GridTable",Cc);var Tc=function(e,t){return e.sameOrientation?e.orientation=t.orientation:e.orientation=t.orientation===0?1:0,e},a6=function(e,t){e.popUp(Tc(e.root.easeIn,e))},o6=function(e,t){e.scaleDown(Tc(e.root.easeOut,e))},h6={setTransitInCallback(e){return e===void 0&&(e=a6),this.transitInCallback=e,this},setTransitOutCallback(e){return e===void 0&&(e=o6),this.transitOutCallback=e,this}},l6=function(e,t,i,a,x){var C=pr(e),E=C.time.delayedCall(t,function(){C.sys.events.once("postupdate",function(){i.call(a,x)})});return E},u6={delayCall(e,t,i){return this.timer=l6(this,e,t,i),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}},d6=function(e,t){var a=this.childrenMap.subMenu;if(a&&a.parentButton===e)return this;this.collapseSubMenu();var i;this.root.toggleOrientation?i=this.orientation===0?1:0:i=this.orientation;var a=new this.constructor(this.scene,{items:t,orientation:i,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:e});return this.pin(a),this.childrenMap.subMenu=a,this.root.emit("expand",a,e,this),this},f6=function(){var e=this.root;e.emit("collapse",this,this.parentButton,e);var t=e.easeOut.duration;return e.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},c6=function(){var e=this.childrenMap.subMenu;return e===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(e),e.collapse(),this)},my={expandSubMenu:d6,collapse:f6,collapseSubMenu:c6};Object.assign(my,h6,u6);var v6=function(e,t,i,a){var x;return i&&(t.scene=e,a?x=i.call(a,t):x=i(t),t.scene=void 0),x},p6=function(e,t,i,a){var x,C=[],E;if(t&&i)for(var O=0,I=t.length;O<I;O++)x=t[O],x.scene=e,a?E=i.call(a,x,O,t):E=i(x,O,t),x.scene=void 0,C.push(E);return C},g6=function(e){e.on(e.root.expandEventName,function(t,i){if(!this._isPassedEvent){var a=this.root.childrenKey,x=this.items[i][a];x&&this.expandSubMenu(t,x)}},e).on("button.click",function(t,i,a,x){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,i,a,x),this.root._isPassedEvent=!1)},e).on("button.over",function(t,i,a,x){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,i,a,x),this.root._isPassedEvent=!1)},e).on("button.out",function(t,i,a,x){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,i,a,x),this.root._isPassedEvent=!1)},e)},xy=function(e,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=In(t.orientation)===e.orientation:t.sameOrientation=!0,t.destroy=!1,t},m6=function(){var e=this.root,t=e.easeIn.duration;e.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const li=Phaser.Utils.Objects.GetValue;class Mc extends He{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1);var a=i._rootMenu,x=i._parentMenu,C=i._parentButton,E=li(i,"popup",!0),O=li(i,"items",void 0),I=li(i,"createBackgroundCallback",void 0),V=li(i,"createBackgroundCallbackScope",void 0);i.background=v6(t,O,I,V);var X=li(i,"createButtonCallback",void 0),q=li(i,"createButtonCallbackScope",void 0);if(i.buttons=p6(t,O,X,q),super(t,i),this.type="rexMenu",this.items=O,this.root=a===void 0?this:a,this.isRoot=this.root===this,this.parentMenu=x,this.parentButton=C,this.timer=void 0,this.isRoot){this.isPopUpMode=E;var st=i.bounds;st===void 0&&(st=cr(t)),this.bounds=st,this.subMenuSide=[this.y<st.centerY?Ec:Bl,this.x<st.centerX?Pc:Fl];var it=li(i,"subMenuSide",void 0);it!==void 0&&(typeof it=="string"&&(it=x6[it]),this.subMenuSide[this.orientation]=it),this.toggleOrientation=li(i,"toggleOrientation",!1),this.expandEventName=li(i,"expandEvent","button.click"),this.easeIn=xy(this,li(i,"easeIn",0)),this.easeOut=xy(this,li(i,"easeOut",0)),this.setTransitInCallback(li(i,"transitIn")),this.setTransitOutCallback(li(i,"transitOut")),this.createBackgroundCallback=I,this.createBackgroundCallbackScope=V,this.createButtonCallback=X,this.createButtonCallbackScope=q,this.childrenKey=li(i,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=li(i,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var at=0,ut=0;if(!this.root.easeIn.sameOrientation){var lt=Tc(this.root.easeIn,this).orientation,ft=x?x.orientation:this.orientation,it=this.root.subMenuSide[ft];lt===0&&it===Fl&&(at=1),lt===1&&it===Bl&&(ut=1)}if(E&&this.setOrigin(at,ut).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var it=this.root.subMenuSide[x.orientation];switch(it){case Fl:this.alignTop(C.top).alignRight(C.left);break;case Pc:this.alignTop(C.top).alignLeft(C.right);break;case Bl:this.alignLeft(C.left).alignBottom(C.top);break;case Ec:this.alignLeft(C.left).alignTop(C.bottom);break}}g6(this),E&&(this.pushIntoBounds(this.root.bounds),m6.call(this))}destroy(t){!this.scene||this.ignoreDestroy||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const Fl=2,Pc=0,Bl=3,Ec=1,x6={up:Bl,down:Ec,left:Fl,right:Pc};Object.assign(Mc.prototype,my),k.register("menu",function(e){var t=new Mc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Menu",Mc);var y6={setWrapEnable(e){return e===void 0&&(e=!0),this.listWrapEnable=e,this},setCreateButtonCallback(e){return this.listCreateButtonCallback=e,this},setCreateListBackgroundCallback(e){return this.listCreateBackgroundCallback=e,this},setCreateListSliderTrackCallback(e){return this.listCreateSliderTrackCallback=e,this},setCreateListSliderThumbCallback(e){return this.listCreateSliderThumbCallback=e,this},setListSliderAdaptThumbSizeEnable(e){return e===void 0&&(e=!0),this.listSliderAdaptThumbSizeEnable=e,this},setListScrollerConfig(e){return e===void 0&&(e={}),this.listScrollerConfig=e,this},setListMouseWheelScrollerConfig(e){return this.listMouseWheelScrollerConfig=e,this},setButtonClickCallback(e){return this.listOnButtonClick=e,this},setButtonOverCallback(e){return this.listOnButtonOver=e,this},setButtonOutCallback(e){return this.listOnButtonOut=e,this},setListExpandDirection(e){return typeof e=="string"&&(e=S6[e]),this.listExpandDirection=e,this},setListEaseInDuration(e){return e===void 0&&(e=0),this.listEaseInDuration=e,this},setListEaseOutDuration(e){return e===void 0&&(e=0),this.listEaseOutDuration=e,this},setListTransitInCallback(e){return this.listTransitInCallback=e,this},settListTransitOutCallback(e){return this.listTransitOutCallback=e,this},setListBounds(e){return this.listBounds=e,this},setListWidth(e){return this.listWidth=e,this},setListHeight(e){return this.listHeight=e,this},setListSize(e,t){return this.setListWidth(e).setListHeight(t),this},setListMaxHeight(e){return this.listMaxHeight=e,this},setListAlignmentMode(e){return this.listAlignMode=e,this},setListAlignmentSide(e){return e===void 0&&(e=""),this.listAlignSide=e,this},setListSpace(e){return e===void 0&&(e={}),this.listSpace=e,this},setListDraggable(e){return e===void 0&&(e=!0),this.listDraggable=e,this}};const S6={down:0,up:1};var C6=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,i=t.rexSizer,a=!1;if(i.hidden)e=0;else switch(this.scrollMode){case 0:e=this.getChildWidth(t),e===void 0&&(a=!0);break;case 1:e=0;break;default:e=0;break}if(!a)return e},T6=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,i=t.rexSizer,a=!1;if(i.hidden)e=0;else switch(this.scrollMode){case 0:e=0;break;case 1:e=this.getChildHeight(t),e===void 0&&(a=!0);break;default:e=0;break}if(!a)return e},M6=function(e){return e===void 0&&(e=[]),this.child&&this.child.isRexSizer&&e.push(this.child),e},P6=function(){var e=this.left,t=this.top;switch(this.scrollMode){case 0:t+=this.childOY;break;case 1:e+=this.childOY;break;default:t+=this.childOY,e+=this.childOX;break}this.child.setPosition(e,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},E6=function(){var e=this.child,t,i;if(!e.rexSizer.hidden){switch(this.scrollMode){case 0:t=this.width*this.scaleX;break;case 1:i=this.height*this.scaleY;break}e.isRexSizer?e.runLayout(this,t,i):ti(e,t,i),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren()}},w6=function(e,t){t||e.clearMask&&e.clearMask(!1)},yy={getChildrenWidth:C6,getChildrenHeight:T6,getChildrenSizers:M6,resetChildPosition:P6,layoutChildren:E6,removeChildCallback:w6};Object.assign(yy,hy);const Sy=Phaser.Utils.Objects.IsPlainObject,Yi=Phaser.Utils.Objects.GetValue,b6=Phaser.Display.Align.TOP_LEFT;class Cy extends Un{constructor(t,i,a,x,C,E){Sy(i)?(E=i,i=Yi(E,"x",0),a=Yi(E,"y",0),x=Yi(E,"width",void 0),C=Yi(E,"height",void 0)):Sy(x)&&(E=x,x=Yi(E,"width",void 0),C=Yi(E,"height",void 0)),super(t,i,a,x,C,E),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this._childOX=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,this.setScrollMode(Yi(E,"scrollMode",0));var O=Yi(E,"clampChildOY",!0),I=Yi(E,"clampChildOX",O);this.setClampMode(O,I);var V=Yi(E,"child",void 0),X=Yi(E,"expand",!0);V.setOrigin&&V.setOrigin(0),this.add(V),this.sizerChildren=[V];var q=this.getSizerConfig(V);q.align=b6,q.expand=X,this.child=V;var st=Yi(E,"mask");this.setupChildrenMask(st),this.childrenMask&&(this.maskGameObject=yc(this.childrenMask))}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=Ax[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t,i){return this.clampChildOY=t,this.clampChildOX=i,this}get instHeight(){return this.scrollMode===0||this.scrollMode===2?this.displayHeight:this.displayWidth}get instWidth(){return this.scrollMode===0||this.scrollMode===2?this.displayWidth:this.displayHeight}get childHeight(){return this.scrollMode===0||this.scrollMode===2?re(this.child):ne(this.child)}get childWidth(){return this.scrollMode===0||this.scrollMode===2?ne(this.child):re(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get leftChildOX(){return 0}get rightChildOX(){return-this.visibleWidth}get childVisibleHeight(){return this.instHeight}get childVisibleWidth(){return this.instWidth}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}get visibleWidth(){var t=this.childWidth-this.childVisibleWidth;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}childOXExceedLeft(t){return t===void 0&&(t=this.childOX),t>this.leftChildOX}childOXExeceedRight(t){return t===void 0&&(t=this.childOX),t<this.rightChildOX}get childOY(){return this._childOY}set childOY(t){var i=this.topChildOY,a=this.bottomChildOY,x=this.childOYExceedTop(t),C=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:x?t=i:C&&(t=a)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),x&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=x,C&&(this.execeedBottomState||this.emit("execeedbottom",this,t,a)),this.execeedBottomState=C}get childOX(){return this._childOX}set childOX(t){var i=this.leftChildOX,a=this.rightChildOX,x=this.childOXExceedLeft(t),C=this.childOXExeceedRight(t);this.clampChildOX&&(this.childVisibleWidth>this.childWidth?t=0:x?t=i:C&&(t=a)),this._childOX!==t&&(this._childOX=t,this.resetChildPosition()),x&&(this.execeedLeftState||this.emit("execeedleft",this,t,i)),this.execeedLeftState=x,C&&(this.execeedRightState||this.emit("execeedright",this,t,a)),this.execeedRightState=C}setChildOY(t){return this.childOY=t,this}setChildOX(t){return this.childOX=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}set s(t){this.childOX=-this.visibleWidth*t}get s(){var t=this.visibleWidth;return t===0?0:this.childOX/-t}setChildOYByPercentage(t){return this.t=t,this}setChildOXByPercentage(t){return this.s=t,this}}Object.assign(Cy.prototype,yy);var R6=function(e,t,i,a){if(!this.hasChild(e))return this;var x,C;switch(this.scrollMode){case 0:x=this.childOY+Il.call(this,e,"y",t);break;case 1:x=this.childOY+Il.call(this,e,"x",t);break;default:x=this.childOY+Il.call(this,e,"y",t),C=this.childOX+Il.call(this,e,"x",t);break}return i===void 0||i<=0?(this.childOY=x,this.scrollMode===2&&(this.childOX=C)):(this._easeScrollChildOY===void 0&&(this._easeScrollChildOY=new $i(this)),this._easeScrollChildOY.restart({key:"childOY",to:x,duration:i,ease:a}),this.scrollMode===2&&(this._easeScrollChildOX===void 0&&(this._easeScrollChildOX=new $i(this)),this._easeScrollChildOX.restart({key:"childOX",to:C,duration:i,ease:a}))),this};const Ty=["top","bottom","centerY","center"],My=["left","right","centerX","center"];var Il=function(e,t,i){t=t.toUpperCase();var a=t==="Y",x=this.childrenMap.child,C;if(a){if(i)for(var E=0,O=Ty.length;E<O;E++){var I=Ty[E];if(i.indexOf(I)!==-1){i=I;break}}switch(i){case"top":C=x.top-Ln(e).y;break;case"bottom":C=x.bottom-la(e).y;break;case"centerY":case"center":C=x.centerY-gp(e).y;break;default:var V=x.top-Ln(e).y,X=x.bottom-la(e).y;V<=0&&X>=0?C=0:C=Math.abs(V)<=Math.abs(X)?V:X;break}}else{if(i)for(var E=0,O=My.length;E<O;E++){var I=My[E];if(i.indexOf(I)!==-1){i=I;break}}switch(i){case"left":C=x.left-Ln(e).x;break;case"right":C=x.right-ha(e).x;break;case"centerX":case"center":C=x.centerX-gp(e).x;break;default:var q=x.left-Ln(e).x,st=x.right-ha(e).x;q<=0&&st>=0?C=0:C=Math.abs(q)<=Math.abs(st)?q:st;break}}return C};const yn=Phaser.Utils.Objects.GetValue;class ho extends to{constructor(t,i){i===void 0&&(i={});var a=jf(i),x=yn(i,"panel",void 0);x===void 0&&(x={}),x.scrollMode=a,x.clampChildOY=yn(i,"clampChildOY",!1),x.clampChildOX=yn(i,"clampChildOX",!1);var C=new Cy(t,x);t.add.existing(C);var E,O;switch(a){case 0:E=yn(i,"expand.panel",!0),O=!0;break;case 1:E=!0,O=yn(i,"expand.panel",!0);break;default:E=!0,O=!0}i.type="rexScrollablePanel",i.child={gameObject:C,expandWidth:E,expandHeight:O,align:yn(i,"align.panel","center")};var I=yn(i,"space",void 0);I&&(I.child=yn(I,"panel",0)),super(t,i),this.addChildrenMap("panel",C.child),this.addChildrenMap("panelLayer",C.maskLayer),this.addChildrenMap("mask",C.maskGameObject),this.addChildrenMap("scrollableBlock",C)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),Uh(this.childrenMap.child,t),this}}var O6={scrollToChild:R6};Object.assign(ho.prototype,O6);const A6=Phaser.Utils.Objects.GetValue;var L6=function(){var e=this.scene,t,i=this.listCreateBackgroundCallback;i&&(t=i.call(this,e),e.add.existing(t));var q=[],a=this.listCreateButtonCallback;if(a)for(var x=this.options,C=0,E=x.length;C<E;C++){var O=a.call(this,e,x[C],C,x);O&&(e.add.existing(O),q.push(O))}var I=this.listWidth;I===void 0&&(this.listAlignMode==="text"?I=this.getElement("text").width:I=this.width);var V=this.listHeight,X={width:I,buttons:q,space:this.listSpace},q,st,it;if(this.listCreateSliderThumbCallback?it=V>0||this.listMaxHeight>0:it=!1,!it)X.height=V,q=Py(e,X,this.listWrapEnable),st=q;else{var q=Py(e,X,this.listWrapEnable);if(this.listMaxHeight>0&&(q.layout(),q.height<=this.listMaxHeight&&(st=q)),!st){V===0&&(V=this.listMaxHeight);var at=Ey(e,this.listCreateSliderTrackCallback),ut=Ey(e,this.listCreateSliderThumbCallback);st=new ho(e,{height:V,scrollMode:0,panel:{child:q,mask:{padding:1}},slider:{track:at,thumb:ut,adaptThumbSize:this.listSliderAdaptThumbSizeEnable},scrollDetectionMode:1,scroller:this.listScrollerConfig,mouseWheelScroller:this.listMouseWheelScrollerConfig,space:{panel:A6(this.listSpace,"panel",0)}}),e.add.existing(st)}}return t&&st.addBackground(t,"background"),this.listDraggable&&st.setDraggable(!0),st!==q&&q.on("button.over",function(lt,ft,pt,ct){st.emit("button.over",lt,ft,pt,ct)}).on("button.out",function(lt,ft,pt,ct){st.emit("button.out",lt,ft,pt,ct)}).on("button.click",function(lt,ft,pt,ct){st.emit("button.click",lt,ft,pt,ct)}),st},Py=function(e,t,i){var a;return i?(t.orientation="x",a=new mn(e,t)):(t.orientation="y",a=new He(e,t)),e.add.existing(a),a},Ey=function(e,t,i){var a;return t&&(a=t.call(i,e),e.add.existing(a)),a},D6=function(e,t,i,a,x){var C={};switch(C.mode=0,i){case 0:case"x":C.end={x:0};break;case 1:case"y":C.end={y:0};break;default:C.end=0;break}return C.duration=t,C.ease=a,x===void 0?x=new Ga(e,C):x.resetFromJSON(C),x.restart(),x},F6=function(e,t,i,a,x){return As(e,t)?Nt(e,t):As(e,i)?Nt(e,i):x};const Wr=Phaser.Utils.Objects.GetValue;var B6=function(e,t){var i=Wr(t,"expandDirection",void 0);typeof i=="string"&&(i=I6[i]);var a=F6(t,"alignTarget","alignTargetX"),x=Wr(t,"alignTargetY",a),C=Wr(t,"alignOffsetX",0),E=Wr(t,"alignOffsetY",0),O=Wr(t,"alignSide",""),I=O.includes("right"),V=Wr(t,"bounds"),X=i===0,q=i===1,st=!X&&!q,it=I?1:0,at=X||st?0:1;e.setOrigin(it,at);var ut,lt;I?ut=a.getTopRight().x:ut=a.getTopLeft().x,lt=x.getBottomLeft().y,e.setPosition(ut+C,lt+E);var ft=V;ft||(ft=cr(e.scene)),st&&e.getBottomLeft().y>ft.bottom&&(lt=x.getTopLeft().y,e.setOrigin(0,1).setPosition(ut+C,lt+E))};const I6={down:0,up:1},wy=Phaser.Utils.Objects.GetValue;class by extends Oh{constructor(t,i){i===void 0&&(i={}),i.transitIn==null&&(i.transitIn=function(C,E){zd(C,E,"y","Cubic")}),i.transitOut==null&&(i.transitOut=function(C,E){D6(C,E,"y","Linear")}),i.manualClose=!0,i.clickOutsideClose=!0,i.destroy=!0,super(t,i),B6(t,i),t.isRexSizer&&t.layout();var a=wy(i,"touchOutsideClose",!1),x=wy(i,"anyTouchClose",!1);x&&(a=!1),x?this.once("open",this.anyTouchClose,this):a&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Dh(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var G6=function(){if(this.listPanel)return this;if(this.options.length===0)return this;var e=L6.call(this);e.on("button.over",function(a,x,C,E){this.currentOverIndex=x,this.listOnButtonOver&&this.listOnButtonOver.call(this,a,x,C,E),this.emit("button.over",this,e,a,x,C,E)},this).on("button.out",function(a,x,C,E){this.currentOverIndex===x&&(this.currentOverIndex=void 0),this.listOnButtonOut&&this.listOnButtonOut.call(this,a,x,C,E),this.emit("button.out",this,e,a,x,C,E)},this);var t;!this.listAlignMode||this.listAlignMode==="label"?t=this:t=this.getElement(this.listAlignMode);var i=new by(e,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:t,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds}).on("open",function(){e.on("button.click",function(a,x,C,E){this.listOnButtonClick&&this.listOnButtonClick.call(this,a,x,C,E),this.emit("button.click",this,e,a,x,C,E),this.dropDownBehavior.requestClose()},this),this.emit("list.open",this,e)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0,this.emit("list.close",this)},this);return e.onClickOutside(function(){i.requestClose()}),this.listPanel=e,this.dropDownBehavior=i,this.pin(e),this},k6=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this.currentOverIndex=void 0,this):this},N6=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},V6=function(e){if(e===void 0&&(e=this.currentOverIndex),e===void 0)return this;var t=this.listPanel,i=t?t.getButton(e):this.options[e];return this.listOnButtonClick&&this.listOnButtonClick.call(this,i,e),this.emit("button.click",this,t,i,e),this},z6=function(e){var t=this.listPanel;return t?(t.emitButtonOver(e),this):this},Y6={focusNextButton(){if(!this.isOpened)return this;var e=this.currentOverIndex,t;if(e===void 0)t=0;else{var i=this.listPanel.getButtons().length;t=(e+1)%i}return this.emitButtonOver(t),this},focusPrevButton(){if(!this.isOpened)return this;var e=this.currentOverIndex,t;if(e===void 0)t=0;else{var i=this.listPanel.getButtons().length;t=(e-1+i)%i}return this.emitButtonOver(t),this}},Ry={openListPanel:G6,closeListPanel:k6,toggleListPanel:N6,emitButtonClick:V6,emitButtonOver:z6};Object.assign(Ry,y6,Y6);const le=Phaser.Utils.Objects.GetValue;class lo extends Ws{constructor(t,i){super(t,i),this.type="rexDropDownList",this.timer=void 0,this.listPanel=void 0,this.currentOverIndex=void 0,this.setOptions(le(i,"options"));var a=le(i,"list");this.setWrapEnable(le(a,"wrap",!1)),this.setCreateButtonCallback(le(a,"createButtonCallback")),this.setCreateListBackgroundCallback(le(a,"createBackgroundCallback")),this.setCreateListSliderTrackCallback(le(a,"createTrackCallback")),this.setCreateListSliderThumbCallback(le(a,"createThumbCallback")),this.setListSliderAdaptThumbSizeEnable(le(a,"sliderAdaptThumbSize",!1)),this.setListScrollerConfig(le(a,"scroller")),this.setListMouseWheelScrollerConfig(le(a,"mouseWheelScroller")),this.setButtonClickCallback(le(a,"onButtonClick")),this.setButtonOverCallback(le(a,"onButtonOver")),this.setButtonOutCallback(le(a,"onButtonOut")),this.setListExpandDirection(le(a,"expandDirection")),this.setListEaseInDuration(le(a,"easeIn",500)),this.setListEaseOutDuration(le(a,"easeOut",100)),this.setListTransitInCallback(le(a,"transitIn")),this.settListTransitOutCallback(le(a,"transitOut")),this.setListMaxHeight(le(a,"maxHeight",0)),this.setListSize(le(a,"width"),le(a,"height",0)),this.setListAlignmentMode(le(a,"alignParent","text")),this.setListAlignmentSide(le(a,"alignSide","")),this.setListBounds(le(a,"bounds")),this.setListSpace(le(a,"space")),this.setListDraggable(le(a,"draggable",!1)),this.setValueChangeCallback(le(i,"setValueCallback"),le(i,"setValueCallbackScope")),this.setValue(le(i,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}get isOpened(){return!!this.listPanel}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,i){return this.valueChangeCallback=t,this.valueChangeCallbackScope=i,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var i=this._value;this._value=t;var a=this.valueChangeCallback,x=this.valueChangeCallbackScope;a&&(x?a.call(x,this,t,i):a(this,t,i)),this.emit("valuechange",this,t,i)}}}Object.assign(lo.prototype,Ry),k.register("dropDownList",function(e){var t=new lo(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.DropDownList",lo);var Oy=function(e,t,i){t=t?j(t):{},i===void 0&&(i={});var a=t.label||t.button,x=t.button||t.label;delete t.label,delete t.button;var C=i.label||i.button||i,E=i.button||i.label||i,O=xl(e,a,C);O.list=t.list||{},O.list.createButtonCallback=function(X,q){var st=$e(X,x,E).resetDisplayContent(q);return q.hasOwnProperty("value")&&(st.value=q.value),st};var I=t.track;I&&(O.list.createTrackCallback=function(X){return ze(X,I)},delete t.track);var V=t.thumb;return V&&(O.list.createThumbCallback=function(X){return ze(X,V)},delete t.thumb),O.list.onButtonOver=function(X,q,st,it){X.setHoverState&&X.setHoverState(!0)},O.list.onButtonOut=function(X,q,st,it){X.setHoverState&&X.setHoverState(!1)},O};class Ay extends lo{constructor(t,i,a){i=Oy(t,i,a),super(t,i),this.type="rexSimpleDropDownList"}setOptions(t){t===void 0&&(t=[]);for(var i=0,a=t.length;i<a;i++){var x=t[i];typeof x=="string"&&(t[i]={text:x,value:x})}return super.setOptions(t),this}}k.register("simpleDropDownList",function(e,t){var i=new Ay(this.scene,e,t);return this.scene.add.existing(i),i}),Z(window,"RexPlugins.UI.SimpleDropDownList",Ay);var W6=function(e){var t=fn(e),i,a,x;switch(t){case ei:case ii:i=e.height-e.padding.top-e.padding.bottom,a=e.lineSpacing,x=e.style.metrics.fontSize+e.style.strokeThickness;break;case Ei:i=e.height,a=0;var C=e.fontSize/e.fontData.size;x=e.fontData.lineHeight*C;break}return(i-a)/(x+a)},X6=function(e,t){if(e===void 0&&(e=this.startLineIndex),t===void 0){var i=this.pageLinesCount;i>0?t=e+i:t=this.totalLinesCount}t>this.totalLinesCount&&(t=this.totalLinesCount);var a;switch(this.textObjectType){case ei:case Ei:a=this.lines.slice(e,t).join(`
`);break;case ii:var x=this.lines.getLineStartIndex(e),C=this.lines.getLineEndIndex(t-1);a=this.lines.getSliceTagText(x,C,!0);var E=(a.match(/\n/g)||[]).length;E>t-e-1&&(a=a.substring(0,a.length-1));break}return a},U6={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(i){var t=this.totalLinesCount;this.sections.push(nr(i));var i=this.sections.join(`
`);this.lines=ic(this.parent,i,this.lines);var a=this.totalLinesCount-t,x=this.pageLinesCount,C;x>0?C=Math.ceil(a/this.pageLinesCount):C=1;for(var E=0;E<C;E++)this.pageStartIndexes.push(t+E*this.pageLinesCount);return this},setText(e,t){t===void 0&&(t=!0),t&&this.resetIndex(),this.clearText();for(var i=nr(e).split(this.pageBreak),a=0,x=i.length;a<x;a++)this.appendPage(i[a]);return this},appendText(e){var t=this.content+nr(e);return this.setText(t,!1),this}};const Ly=Phaser.Math.Clamp;var H6={resetIndex(){return this.pageIndex=-1,this.startLineIndex=-1,this.endLineIndex=void 0,this},setPageIndex(e){return e=Ly(e,0,this.lastPageIndex),this.pageIndex=e,this.startLineIndex=this.pageStartIndexes[e],this.endLineIndex=this.pageStartIndexes[e+1],this},getPage(e){return e===void 0&&(e=this.pageIndex),this.setPageIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},getFirstPage(){return this.getPage(0)},getLastPage(){return this.getPage(this.lastPageIndex)},setStartLineIndex(e){var t=Math.max(this.totalLinesCount-this.pageLinesCount,0);return e=Ly(e,0,t),this.startLineIndex=e,this.endLineIndex=e+this.pageLinesCount,this},getPageByLineIndex(e){return this.setStartLineIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getPageOfNextLine(){return this.getPageByLineIndex(this.startLineIndex+1)},getPageOfPreviousLine(){return this.getPageByLineIndex(this.startLineIndex-1)},getPageOfFirstLine(){return this.getPageByLineIndex(0)},getPageOfLastLine(){return this.getPageByLineIndex(this.totalLinesCount)}},$6={showPage(e){return this.displayText(this.getPage(e)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},showFirstPage(){return this.displayText(this.getFirstPage()),this},showLastPage(){return this.displayText(this.getLastPage()),this},show(){return this.displayText(this.getLines()),this},showPageByLineIndex(e){return this.displayText(this.getPageByLineIndex(e)),this},showNextLine(){return this.displayText(this.getPageOfNextLine()),this},showPreviousLine(){return this.displayText(this.getPageOfPreviousLine()),this},showFirstLine(){return this.displayText(this.getPageOfFirstLine()),this},showLastLine(){return this.displayText(this.getPageOfLastLine()),this},displayText(e){pl(this.parent,e)}},Dy={getLines:X6};Object.assign(Dy,U6,H6,$6);const Xr=Phaser.Utils.Objects.GetValue;Phaser.Math.Clamp;class Gl extends Se{constructor(t,i){super(t,{eventEmitter:!1}),this.textObjectType=fn(this.parent),this.pageStartIndexes=[],this.lines=ic(this.parent,""),this.sections=[],this.resetFromJSON(i)}resetFromJSON(t){this.setMaxLines(Xr(t,"maxLines",void 0)),this.setPageBreak(Xr(t,"pageBreak",`\f
`)),this.setText(Xr(t,"text","")),this.startLineIndex=Xr(t,"start",-1),this.endLineIndex=Xr(t,"end",void 0);var i=Xr(t,"page");return i===void 0?this.resetIndex():this.setPageIndex(i),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,end:this.endLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case ei:this.lines.length=0;break;case ii:this.lines.destroy();break;case Ei:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get lastPageIndex(){return this.pageCount-1}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case ei:case ii:var i=this.parent.style.maxLines;i>0?t=i:t=Math.floor(W6(this.parent));break;case Ei:t=this.totalLinesCount;break}return t}get isFirstLine(){return this.startLineIndex<=0}get isLastLine(){return this.endLineIndex===this.totalLinesCount}get content(){return this.sections.join(this.pageBreak)}}Object.assign(Gl.prototype,Dy);var K6={setText(e){this.setTextCallback&&(this.setTextCallbackScope?e=this.setTextCallback.call(this.setTextCallbackScope,e,this.isLastChar,this.insertIndex):e=this.setTextCallback(e,this.isLastChar,this.insertIndex)),this.textWrapEnable?pl(this.parent,e):this.parent.setText(e)},appendText(e){var t=this.text.concat(nr(e));return this.isTyping?this.setTypingContent(t):this.start(t,void 0,this.textLength),this}},Z6=function(e,t,i,a){return e!==void 0&&this.setTypingContent(e),t!==void 0&&(this.speed=t),i===void 0&&(i=0),this.typingIndex=i+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(a)),this},Fy=function(e,t){return e.getPlainText&&(t=e.getPlainText(t)),t},J6=function(e,t,i,a,x){var C;if(t>0){a===void 0&&(a=0);var E=Fy(this.parent,e);C=Q6(E,t)+a}return this.start(e,i,C,x)},Q6=function(e,t){for(var i=void 0,a=0;a<t&&(i=e.indexOf(`
`,i+1),i!==-1);a++);return i},uo=function(e,t,i,a){var x;return e.getSubString?x=e.getSubString(t,i,a):x=t.slice(i,a),x},By=function(e,t,i,a){var x=this.parent,C;if(a===0){var E=0,O=t;this.insertIndex=O,C=uo(x,e,E,O)}else if(a===1){var O=i,E=O-t;this.insertIndex=0,C=uo(x,e,E,O)}else if(a===2){var I=i/2,E=Math.floor(I-t/2),O=E+t;this.insertIndex=t%2?t:0,C=uo(x,e,E,O)}else if(a===3){var V=Math.floor(t/2),X;if(V>0){var O=i,E=O-V;X=uo(x,e,E,O)}else X="";var q=t-V,st;if(q>0){var E=0,O=E+q;this.insertIndex=O,st=uo(x,e,E,O)}else st="",this.insertIndex=0;C=st+X}return this.insertChar=C.charAt(this.insertIndex-1),C},j6=function(e){var t=this.getTimer();if(t&&this.freeTimer(),e){for(;!this.isLastChar;)By.call(this,this.text,this.typingIndex,this.textLength,this.typeMode),this.emit("typechar",this.insertChar),this.typingIndex++;this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)}return this},q6=function(){var e=this.getTimer();return e&&(e.paused=!0),this},_6=function(){var e=this.getTimer();return e&&(e.paused=!1),this},Iy={start:Z6,startFromLine:J6,stop:j6,pause:q6,resumeTyping:_6};Object.assign(Iy,K6);var t7=function(e,t){var i=fn(e);switch(i){case ei:e.style.syncFont(e.canvas,e.context),t=e.runWordWrap(t);break;case ii:t=e.getText(t,void 0,void 0,!0);break;case Ei:t=e.setText(t).getTextBounds().wrappedText;break}return t};const fo=Phaser.Utils.Objects.GetFastValue,wc=Phaser.Utils.Objects.GetValue;class kl extends Se{constructor(t,i){super(t,i),this.timer=null,this.resetFromJSON(i)}resetFromJSON(t){this.setTextWrapEnable(wc(t,"wrap",!1)),this.setTypeMode(wc(t,"typeMode",0)),this.setTypingSpeed(wc(t,"speed",333)),this.setTextCallback=fo(t,"setTextCallback",null),this.setTextCallbackScope=fo(t,"setTextCallbackScope",null),this.setTypingContent(fo(t,"text","")),this.typingIndex=fo(t,"typingIndex",0),this.insertIndex=null,this.insertChar=null;var i=fo(t,"elapsed",null);return i!==null&&this.start(void 0,void 0,this.typingIndex,i),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=e7[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTypingSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var i=nr(t);this.textWrapEnable&&(i=t7(this.parent,i)),this._text=i}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIndex===this.textLength}setTypingContent(t){return this.text=t,this.textLength=Fy(this.parent,this.text).length,this}onTyping(){var t=By.call(this,this.text,this.typingIndex,this.textLength,this.typeMode);this.setText(t),this.emit("typechar",this.insertChar),this.emit("type"),this.isLastChar?(this.freeTimer(),this.scene.sys.events.once("preupdate",function(){this.emit("complete",this,this.parent)},this)):(this.timer.delay=this.speed,this.typingIndex++)}startTimer(t){this.timer&&this.freeTimer();var i;return t===void 0?i=0:(this.speed,i=t),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:i,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIndex):t=this.setTextCallback(t,this.isLastChar,this.insertIndex)),this.textWrapEnable?pl(this.parent,t):this.parent.setText(t)}}const e7={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3};Object.assign(kl.prototype,Iy);const co=Phaser.Utils.Objects.GetValue;var i7=function(e,t){t===void 0&&(t="rexTextBox");class i extends e{constructor(x,C){super(x,C),this.type=t,this.isRunning=!1,this._isPageEnd=!1;var E=this.childrenMap.text,O=co(C,"expandTextWidth",!1),I=co(C,"expandTextHeight",!1);if(O||I){var V=fn(E);switch(V){case ei:case ii:if(E.resize=function(q,st){var it=O?q:0,at=I?st:0;E.setFixedSize(it,at),it>0&&E.setWordWrapWidth(it)},V===ii){var X=E.style;X.wrapMode===0&&(X.wrapMode=1)}break}O&&(E._minWidth=0),I&&(E._minHeight=0)}this.setTypingMode(co(C,"typingMode","page")),this.page=new Gl(E,co(C,"page",void 0)),this.typing=new kl(E,co(C,"typing",C.type)),this.typing.on("complete",this.onTypingComplete,this).on("type",this.onType,this).on("typechar",this.onTypeChar,this),this.textWidthSave=E.width,this.textHeightSave=E.height}setTypingMode(x){return typeof x=="string"&&(x=s7[x]),this.typingMode=x,this}start(x,C){return C!==void 0&&this.setTypingSpeed(C),this.isRunning=!0,this.page.setText(x),this.emit("start"),this.typingMode===0?this.typeNextPage():this.typeNextLine(),this}more(x,C){if(C!==void 0&&this.setTypingSpeed(C),this.isRunning)this.page.appendText(x),this.typing.appendText(x);else{if(this.isRunning=!0,this.page.appendText(x),this.emit("start"),this.typingMode===0){this._isPageEnd=!1;var E=this.page.getPage(),O=this.typing.textLength;this.typing.start(E,void 0,O)}return this}}typeNextPage(){if(!this.isRunning)return this;if(this.isLastPage)this.emit("complete");else{this._isPageEnd=!1;var x=this.page.getNextPage();this.typing.start(x)}return this}typeNextLine(){if(!this.isRunning)return this;if(this.isLastLine)this.isRunning=!1,this.emit("pageend"),this.emit("complete");else{var x=this.page.getPageOfNextLine(),C;this.isFirstLine?C=0:C=this.page.pageLinesCount-1,this.typing.startFromLine(x,C)}}pause(){return this.isRunning?(this.isTyping&&(this.typing.pause(),this.emit("pause")),this):this}resume(){return this.isRunning?(this.isTyping||(this.emit("resume"),this.typing.resume()),this):this}stop(x){return this.isRunning?(this.typing.stop(x),this):this}showLastPage(){return this.isRunning?(this.typing.stop(),this.typingMode===0?this.page.showLastPage():this.page.showLastLine(),this.emit("type"),this.onTypingComplete(),this):this}setTypeSpeed(x){return this.typing.setTypingSpeed(x),this}setTypingSpeed(x){return this.typing.setTypingSpeed(x),this}get isTyping(){return this.typing.isTyping}get isPageEnd(){return this._isPageEnd}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}get isLastLine(){return this.page.isLastLine}get isFirstLine(){return this.page.isFirstLine}get lineCound(){return this.page.totalLinesCount}get startLineIndex(){return this.page.startLineIndex}get endLineIndex(){return this.page.endLineIndex}get typingSpeed(){return this.typing.speed}onType(){var x=this.childrenMap.text;(this.textWidthSave!==x.width||this.textHeightSave!==x.height)&&(this.textWidthSave=x.width,this.textHeightSave=x.height,this.getTopmostSizer().layout()),this.emit("type")}onTypeChar(x){this.emit("typechar",x)}onTypingComplete(){if(this.typingMode===0){this._isPageEnd=!0;var x=this.isLastPage;this.isRunning=!x,this.emit("pageend"),x&&this.emit("complete")}else this.typeNextLine()}}return i};const s7={page:0,line:1};class bc extends i7(yl){constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("layoutMode")||(i.layoutMode=1),super(t,i)}}k.register("textBox",function(e){var t=new bc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.TextBox",bc);class Gy extends bc{constructor(t,i,a){i=Ux(t,i,a),super(t,i)}}k.register("simpleTextBox",function(e){var t=new Gy(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.SimpleTextBox",Gy);const Ri=Phaser.Utils.Objects.GetValue;class ky extends qt{constructor(t,i){super(t,i),this.type="rexNumberBar";var a=Ri(i,"background",void 0),x=Ri(i,"icon",void 0),C=Ri(i,"iconMask",void 0),E=Ri(i,"slider",void 0),O=Ri(i,"text",void 0),I=Ri(i,"space.icon",0),V=Ri(i,"space.slider",0);if(a&&this.addBackground(a),x){var X;this.orientation===0?(E||O)&&(X={right:I}):(E||O)&&(X={bottom:I}),this.add(x,{proportion:0,align:"center",padding:X}),C&&(C=_i.call(this,x,x,1))}var q;if(E){E.orientation=this.orientation,E.eventEmitter=this,E.value=null,E.hasOwnProperty("input")||(E.input=-1),q=new Vr(t,E),t.add.existing(q);var X;this.orientation===0?O&&(X={right:V}):O&&(X={bottom:V});var st;if(this.orientation===0){var it=Ri(E,"width",void 0);st=it===void 0?1:0}else{var at=Ri(E,"height",void 0);st=at===void 0?1:0}this.add(q,{proportion:st,align:"center",padding:X})}O&&this.add(O),this.addChildrenMap("background",a),this.addChildrenMap("icon",x),this.addChildrenMap("iconMask",C),this.addChildrenMap("slider",q),this.addChildrenMap("text",O);var ut=Ri(i,"valuechangeCallback",null);if(ut!==null){var lt=Ri(i,"valuechangeCallbackScope",void 0);this.on("valuechange",ut,lt)}this.setEnable(Ri(i,"enable",void 0)),this.setValue(Ri(i,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,i,a){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,i,a),this}addValue(t,i,a){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,i,a),this}getValue(t,i){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,i):0}easeValueTo(t,i,a){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,i,a),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var i;return t.text?i=t.text:i=t.getData("text"),i}set text(t){var i=this.childrenMap.text;i!==void 0&&(i.setText?i.setText(t):i.setData("text",t))}setText(t){return this.text=t,this}}k.register("numberBar",function(e){var t=new ky(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.NumberBar",ky),k.register("scrollBar",function(e){var t=new tc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.ScrollBar",tc);const Rc=Phaser.Utils.Objects.GetValue,Ny={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class Vy extends Gi{constructor(t,i){super(t,i),this.type="rexBadge";var a=Rc(i,"background",void 0);a&&this.addBackground(a),this.addChildrenMap("background",a);var x=Rc(i,"main",void 0);x&&this.add(x,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",x);for(var C in Ny){var E=Rc(i,C,void 0);E&&(this.add(E,{key:C,align:Ny[C],expand:!1}),this.addChildrenMap(C,E))}}}k.register("badgeLabel",function(e){var t=new Vy(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.BadgeLabel",Vy);const n7=Gi.prototype.add;var zy=function(e,t,i,a,x,C,E,O,I){return e.setVisible(!1),n7.call(this,e,t,i,a,x,C,E,O,I),this},r7={add:zy,addPage:zy},a7=function(e){return e===void 0?null:this.sizerChildren.hasOwnProperty(e)?this.sizerChildren[e]:null};const Yy=Ti.prototype.setChildVisible;var o7=function(e,t){this._previousKey=this._currentKey;var i=this.previousPage;i&&(this.swapMode===0?(Yy.call(this,i,!1),this.emit("pageinvisible",i,this._previousKey,this)):i.destroy()),e&&!this.sizerChildren.hasOwnProperty(e)&&this.emit("createpage",e,this),this._currentKey=e;var a=this.currentPage;return a&&(Yy.call(this,a,!0),this.emit("pagevisible",a,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&a.setAlpha(0).fadeIn(t,1)),this},h7=function(e){return this.sizerChildren.hasOwnProperty(e)},Wy={getPage:a7,swapPage:o7,hasPage:h7};Object.assign(Wy,r7);const Xy=Phaser.Utils.Objects.GetValue;class Nl extends Gi{constructor(t,i){super(t,i),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(Xy(i,"swapMode",0)),this.setFadeInDuration(Xy(i,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=l7[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Nl.prototype,Wy);const l7={invisible:0,destroy:1};k.register("pages",function(e){var t=new Nl(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Pages",Nl);const u7=Phaser.GameObjects.Mesh;class Uy extends u7{get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}forceUpdate(){return this.dirtyCache[10]=1,this}}const Hy=Phaser.Math.Vector3,d7=Phaser.Math.Matrix4;var $y=new Hy,Ky=new Hy,Zy=new d7,f7=function(e,t,i,a,x,C,E){t===void 0&&(t=0),i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=0),C===void 0&&(C=0),E===void 0&&(E=0),$y.set(t,i,a),Ky.set(x,C,E),Zy.fromRotationXYTranslation(Ky,$y,!0);for(var O=0,I=e.vertices.length;O<I;O++)e.vertices[O].transformMat4(Zy)};const c7=Phaser.Utils.Objects.IsPlainObject,Qn=Phaser.Utils.Objects.GetValue,v7=Phaser.Geom.Mesh.GenerateGridVerts,Oc=Phaser.Math.RadToDeg,Vl=Phaser.Math.DegToRad,Jy=45,p7=1+1/Math.sin(Vl(Jy));let Qy=class extends Uy{constructor(t,i,a,x,C,E){c7(i)&&(E=i,i=Qn(E,"x",0),a=Qn(E,"y",0),x=Qn(E,"key",null),C=Qn(E,"frame",null)),super(t,i,a,x,C),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(p7),this.hideCCW=Qn(E,"hideCCW",!0);var O=Qn(E,"gridWidth",0),I=Qn(E,"gridHeight",O);this.resetVerts(O,I),this.prevFrame=this.frame}preUpdate(t,i){this.prevFrame!==this.frame&&(this.prevFrame=this.frame,this.syncSize()),super.preUpdate(t,i)}get originX(){return .5}get originY(){return .5}resetPerspective(){return this.setPerspective(this.width,this.height,Jy),this}resetVerts(C,E){if(C!==void 0&&(this.gridWidth=C),E!==void 0&&(this.gridHeight=E),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var a=this.frame.cutWidth,x=this.frame.cutHeight,C,E;this.gridWidth===0?C=Math.max(a/8,32):E=this.gridWidth,this.gridHeight===0?E=Math.max(x/8,32):E=this.gridHeight,v7({mesh:this,width:a/this.height,height:x/this.height,widthSegments:Math.ceil(a/C),heightSegments:Math.ceil(x/E)});var O=this.transformInfo;return O&&this.transformVerts(O.x,O.y,O.z,O.rotateX,O.rotateY,O.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return Oc(this.rotationX)}set angleX(t){this.rotationX=Vl(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return Oc(this.rotationY)}set angleY(t){this.rotationY=Vl(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return Oc(this.rotationZ)}set angleZ(t){this.rotationZ=Vl(t)}transformVerts(t,i,a,x,C,E){return t===void 0&&(t=0),i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=0),C===void 0&&(C=0),E===void 0&&(E=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=i,this.transformInfo.rotateX=x,this.transformInfo.rotateY=C,this.transformInfo.rotateZ=E,f7(this,t,i,a,x,C,E),this}};const g7=Phaser.Textures.DynamicTexture;var jy=function(e,t,i){t===void 0&&(t=2),i===void 0&&(i=2);var a=new g7(e.sys.textures,null,t,i);return a};const m7=Phaser.Utils.Objects.IsPlainObject,zl=Phaser.Utils.Objects.GetValue;class qy extends Qy{constructor(t,i,a,x,C,E){m7(i)&&(E=i,i=zl(E,"x",0),a=zl(E,"y",0),x=zl(E,"width",32),C=zl(E,"height",32));var O=jy(t,x,C);super(t,i,a,O,null,E),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}snapshot(t,i){return i===void 0&&(i={}),i.gameObjects=t,i.renderTexture=this.rt,yd(i),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var ns=function(e,t,i,a){if(Array.isArray(e))for(var x=!1,C=0,E=e.length;C<E;C++){var O=e[C];if(!(a&&!O)&&(i?x=t.call(i,O,C,e):x=t(O,C,e),x))return}else{var x=!1;for(var I in e){var O=e[I];if(!(a&&!O)&&(i?x=t.call(i,O,I,e):x=t(O,I,e),x))return}}};const Ur=Phaser.Math.RadToDeg,Hr=Phaser.Math.DegToRad;class x7 extends Ti{constructor(t,i,a,x,C,E){super(t,i,a,x,C),this.faces=E,ns(E,function(O){O.setPosition(i,a),this.add(O)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return Ur(this.rotationX)}set angleX(t){this.rotationX=Hr(t)}get rotateX(){return Ur(this.rotationX)}set rotateX(t){this.rotationX=Hr(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return Ur(this.rotationY)}set angleY(t){this.rotationY=Hr(t)}get rotateY(){return Ur(this.rotationY)}set rotateY(t){this.rotationY=Hr(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return Ur(this.rotationZ)}set angleZ(t){this.rotationZ=Hr(t)}get rotateZ(){return Ur(this.rotationZ)}set rotateZ(t){this.rotationZ=Hr(t)}setDebug(t,i){return ns(this.faces,function(a){a.setDebug(t,i)},null,!0),this}panX(t){return ns(this.faces,function(i){i.panX(t)},null,!0),this}panY(t){return ns(this.faces,function(i){i.panY(t)},null,!0),this}panZ(t){return ns(this.faces,function(i){i.panZ(t)},null,!0),this}transformVerts(t,i,a,x,C,E){return ns(this.faces,function(O){O.transformVerts(t,i,a,x,C,E)},null,!0),this}forEachFace(t,i,a){return ns(this.faces,t,i,a),this}}const y7=Phaser.Utils.Objects.IsPlainObject,S7={key:"__WHITE"},C7={image:Qy,rendertexture:qy};var _y=function(e,t){t===void 0&&(t=S7);var i;return y7(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),i=new C7[t.type](e,t),e.add.existing(i)):i=t,i},T7=function(e,t,i){var a;if(i===void 0){a=[];for(var x,C,E=0,O=t.length;E<O;E++)C=t[E],C?x=_y(e,C):x=null,a.push(x)}else{a={};for(var x,I,E=0,O=i.length;E<O;E++)I=i[E],t.hasOwnProperty(I)?x=_y(e,t[I]):x=null,a[I]=x}return a};const M7=Phaser.Math.DegToRad,tS=M7(180);var P7=function(e,t){var i=t.back;i&&(e.orientation===0?i.transformVerts(0,0,0,0,tS,0):i.transformVerts(0,0,0,tS,0,0))};const Ac=Phaser.Utils.Objects.GetValue,E7=Phaser.Math.Linear;let w7=class extends Dn{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(Ac(t,"ease","Cubic")),this.setFrontToBackDirection(Ac(t,"frontToBack",0)),this.setBackToFrontDirection(Ac(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=eS[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=eS[t]),this.endAngleBF=t===0?-180:180,this}start(t,i){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var a=i+1,x=this.parent;return x.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*a):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*a),super.start(),this}flip(t,i){return this.isRunning?this:(t===void 0&&(t=this.duration),i===void 0&&(i=0),this.start(t,i),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+i+1)%2,this)}flipRight(t,i){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,i),this}flipLeft(t,i){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,i),this}updateTarget(t,i){var a=this.easeFn(i.t),x=E7(this.startAngle,this.endAngle,a);t.orientation===0?t.angleY=x:t.angleX=x}};const eS={right:0,"left-to-right":0,left:1,"right-to-left":1},b7=Phaser.Utils.Objects.IsPlainObject,jn=Phaser.Utils.Objects.GetValue,R7=["back","front"];class O7 extends x7{constructor(t,i,a,x){b7(i)&&(x=i,i=jn(x,"x",0),a=jn(x,"y",0));var C=T7(t,x,R7),E=C.back,O=C.front,I=jn(x,"width"),V=jn(x,"height");if(I===void 0||V===void 0){if(I===void 0){var X=O?O.width:0,q=E?E.width:0;I=Math.max(X,q)}if(V===void 0){var st=O?O.height:0,it=E?E.height:0;V=Math.max(st,it)}}super(t,i,a,I,V,C),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,ns(C,function(ut,lt){this[`${lt}Face`]=ut},this);var at=jn(x,"flip",void 0);at!==!1&&(this.flip=new w7(this,at)),this.setOrientation(jn(x,"orientation",0)),P7(this,C),this.setFace(jn(x,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,ns(this.faces,function(i){i.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,ns(this.faces,function(i){i.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,ns(this.faces,function(i){i.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=A7[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=L7[t]),this.currentFaceIndex=t;var i=t===1,a=i?180:0;this.orientation===0?this.angleY=a:this.angleX=a}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const A7={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},L7={front:0,back:1};Phaser.Utils.Objects.GetValue,Phaser.Math.RadToDeg,Phaser.Math.DegToRad,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Angle.ShortestBetween,Phaser.Math.Wrap,Phaser.Math.Linear,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.DegToRad,Phaser.Math.RadToDeg,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Linear,Phaser.Math.Wrap,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.Wrap;const D7=Phaser.Utils.Objects.GetValue;var F7=function(e,t,i){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=D7(i,"useParentBounds",!1),t.setPosition(e.x,e.y).setVisible(!1),e.pin(t)},iS=function(e,t){if(!e)return!1;for(var i=t.visibleSibling,a=0,x=i.length;a<x;a++)e.setChildVisible(i[a],!0);return i.length=0,e.setChildVisible(t,!1),t.isRunning=!1,!0},B7=function(e,t){if(!e)return!1;iS(e,t);var i=t.useParentBounds;yd({gameObjects:e.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:i?e.displayWidth:void 0,height:i?e.displayHeighth:void 0,originX:i?e.originX:void 0,originY:i?e.originY:void 0}),e.setChildVisible(t,!0);for(var a=t.visibleSibling,x=e.children,C=0,E=x.length;C<E;C++){var O=x[C];O.visible&&O!==t&&(e.setChildVisible(O,!1),a.push(O))}return t.isRunning=!0,!0},sS=function(e){return class extends e{constructor(i,a){var x=i.scene;super(x,0,0,1,1,a),x.add.existing(this),F7(i,this,a)}destroy(i){!this.scene||this.ignoreDestroy||(this.exit(),super.destroy(i))}enter(){var i=B7(this.rexContainer.parent,this);return i&&this.syncSize(),this}exit(){return iS(this.rexContainer.parent,this),this}}};class nS extends sS(qy){get perspectiveState(){return this.isRunning}}const I7=Phaser.Utils.Objects.GetValue;var G7=function(e){var t=this.scene;this.setSnapshotPadding(I7(e,"snapshotPadding",0)),e=Hi(e),delete e.width,delete e.height,e.front={width:1,height:1},e.back={width:1,height:1};var i=new O7(t,e);t.add.existing(i);var a=i.flip;if(a){var x=this;a.on("start",function(){x.enterPerspectiveMode()}).on("complete",function(){x.exitPerspectiveMode()})}return i};const k7=["front","back"];var N7={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var e=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,e),this.setChildVisible(this.childrenMap.back,!e),this},setSnapshotPadding(e){return this.snapshotPadding=e,this},snapshotFace(e){typeof e=="number"&&(e=k7[e]);var t=this.perspectiveCard.faces[e],i=this.childrenMap[e];t.rt.clear();var a=i.visible;i.visible=!0;var x=i.isRexContainerLite?i.getAllVisibleChildren():i;return t.snapshot(x,{padding:this.snapshotPadding}),i.visible=a,this}};const rS=Phaser.Utils.Objects.GetValue;class Lc extends Gi{constructor(t,i){super(t,i),this.type="rexPerspectiveCard";var a=i.back,x=rS(i,"expand.back",!0);this.add(a,{key:"back",expand:x});var C=i.front,E=rS(i,"expand.front",!0);this.add(C,{key:"front",expand:E}),this.perspectiveCard=G7.call(this,i),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var i=t===0,a=this.childrenMap.front,x=this.childrenMap.back;this.setChildVisible(a,i),this.setChildVisible(x,!i)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,i,a,x,C,E){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,i,a,x,C,E),this}forEachFace(t,i,a){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,i,a),this}}Object.assign(Lc.prototype,N7),k.register("perspectiveCard",function(e){var t=new Lc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.PerspectiveCard",Lc);var V7=function(e){var t=this.getElement("tabs.buttons");if(!(e>=t.length))return t[e].name},z7=function(e){for(var t=this.getElement("tabs.buttons"),i=0,a=t.length;i<a;i++)if(t[i].name===e)return i};const Y7=Phaser.Utils.Objects.IsPlainObject,Dc=Phaser.Utils.Objects.GetValue,W7=Phaser.Utils.String.UUID;var X7=function(e,t,i){if(Y7(e)){var a=e;e=Dc(a,"key"),t=Dc(a,"tab"),i=Dc(a,"page")}return e||(e=W7()),t.name=e,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(i,{key:e}),this},U7=function(e,t){var i;if(typeof e=="number"?i=e:i=this.getPageIndex(e),i!=null){var a;t!==void 0&&(a=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(i),a!==void 0&&(this.childrenMap.pages.fadeInDuration=a)}return this},H7=function(e){return this.swapPage(0,e),this},$7=function(e){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,e),this},K7={swapPage:U7,swapFirstPage:H7,swapLastPage:$7},Z7={removePage(e,t){typeof e=="number"&&(e=this.getPageKey(e));var i=this.childrenMap.tabs,a=i.getByName(e),x=this.childrenMap.pages,C=x.getElement(e);return!a||!C?this:(x.removeChildrenMap(e),i.removeButton(a,t),x.remove(C,t),this)},removeAllPages(e){for(var t=this.getElement("tabs.buttons"),i=t.length-1;i>=0;i--)this.removePage(t[i].name,e);return this}},J7=function(e){return typeof e=="number"&&(e=this.getPageKey(e)),this.childrenMap.pages.getPage(e)},Q7=function(e){var t;return typeof e=="number"?t=e:t=this.getPageIndex(e),this.getElement("tabs.buttons")[t]},j7={top:1,left:3,right:5,bottom:7},aS={top:"bottom",left:"right",right:"left",bottom:"top"},q7=function(e){var t=j7[e];if(t===void 0)return this;var i=this.childrenMap.tabs,a=this.sizerChildren.indexOf(i);if(a===t)return this;this.sizerChildren[a]=null,this.sizerChildren[t]=i;var x=this.getSizerConfig(i).padding,C=aS[this.tabsPosition],E=aS[e];return x[E]=x[C],x[C]=0,this.tabsPosition=e,this},_7={setTabsPadding(e,t){var i=this.childrenMap.tabs;return i.setOuterPadding(e,t),this},getTabsPadding(e){var t=this.childrenMap.tabs;return t.getOuterPadding(e)}},oS={getPageKey:V7,getPageIndex:z7,addPage:X7,getPage:J7,getTab:Q7,setTabPosition:q7};Object.assign(oS,K7,Z7,_7);const rs=Phaser.Utils.Objects.GetValue,hS=es.prototype.add;let Yl=class extends es{constructor(t,i){i===void 0&&(i={}),i.column=3,i.row=3,i.columnProportions=[0,0,0],i.rowProportions=[0,0,0];var a=rs(i,"expand.pages",!0);a&&(i.columnProportions[1]=1,i.rowProportions[1]=1),super(t,i),this.type="rexTabPages";var x=rs(i,"background",void 0);x&&this.addBackground(x);var C=rs(i,"pages"),E=new Nl(t,C);t.add.existing(E);var O=rs(i,"tabsPosition",void 0);O===void 0&&(O=rs(i,"tabPosition","top"));var I=rs(i,"wrapTabs",!1),V=I?mn:He,X=rs(i,"tabs",void 0);X===void 0&&(X={}),X.orientation=O==="top"||O==="bottom"?"x":"y",X.buttonsType="radio",!I&&!X.hasOwnProperty("expand")&&(X.expand=rs(i,"expand.tabs",!1));var q=new V(t,X);t.add.existing(q),hS.call(this,E,{column:1,row:1,expand:a});var st,it,at=rs(i,"space.item",0);switch(O){case"top":st=1,it=0,at={bottom:at};break;case"bottom":st=1,it=2,at={top:at};break;case"left":st=0,it=1,at={right:at};break;case"right":st=2,it=1,at={left:at};break}hS.call(this,q,{column:st,row:it,padding:at,expand:I?!0:rs(i,"expand.tabs",!1),align:rs(i,"align.tabs","left")}),this.addChildrenMap("background",x),this.addChildrenMap("tabs",q),this.addChildrenMap("pages",E),this.tabsPosition=O,q.on("button.click",function(ut){var lt=ut.name;E.hasPage(lt)&&E.swapPage(lt)}),q.on("button.statechange",function(ut,lt,ft,pt){var ct=ft?"tab.focus":"tab.blur";this.emit(ct,ut,ut.name)},this),E.on("pagevisible",function(ut,lt,ft){this.emit("page.focus",ut,lt)}),E.on("pageinvisible",function(ut,lt,ft){this.emit("page.blur",ut,lt)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(Yl.prototype,oS),k.register("tabPages",function(e){var t=new Yl(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.TabPages",Yl);class tN extends Oh{constructor(t,i){i===void 0&&(i={}),i.destroy=!1,super(t,i)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var eN={expand(e){if(this.expanded===!0)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,i=this.childrenMap.child;if(this.show(i),this.reLayoutEnable){var a=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();a.layout()}return t.emit("folder.expand",e,this),i.emit("folder.expand",e,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,e),this},collapse(e){if(this.expanded===!1)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,i=this.childrenMap.child;return t.emit("folder.collapse",e,this),i.emit("folder.collapse",e,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){if(this.setChildScale(i,1,1).hide(i),this.reLayoutEnable){var a=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();a.layout()}this.emit("collapse.complete",this)},this).requestClose(null,e),this},toggle(e){return this.expanded?this.collapse(e):this.expand(e),this},setExpandedState(e){return this.reLayoutEnable=!1,e===void 0?this.expanded=void 0:e?this.expand(0):this.collapse(0),this.reLayoutEnable=!0,this}},iN=function(e,t){Is.popUp.call(e,t,this.expandDirection)},sN=function(e,t){Is.scaleDown.call(e,t,this.expandDirection)},nN={setTransitionDuration(e){return this.transitionDuration=e,this.childTransition.setTransitInTime(e).setTransitOutTime(e),this},setExpandCallback(e){return e===void 0&&(e=iN.bind(this)),this.childTransition.setTransitInCallback(e),this},setCollapseCallback(e){return e===void 0&&(e=sN.bind(this)),this.childTransition.setTransitOutCallback(e),this}};const Be=Phaser.Utils.Objects.GetValue;let vo=class extends qt{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1),super(t,i),this.type="rexFolder",this.reLayoutEnable=!0,this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var a=i.background,x=i.title,C=i.child;a&&this.addBackground(a);var E=Be(i,"space"),O=this.orientation===1?"left":"top",st=Be(i,"align.title",O),it=Be(i,"expand.title",!0);this.add(x,{proportion:0,align:st,expand:it,padding:{left:Be(E,"titleLeft",0),right:Be(E,"titleRight",0),top:Be(E,"titleTop",0),bottom:Be(E,"titleBottom",0)}});var I=Be(i,"toggleByTarget",void 0),V=Be(i,"toggleClickConfig");I===void 0&&(I=x),I&&Qd.onClick.call(I,function(){this.toggle()},this,V),this.childTransition=new tN(C);var X=Be(i,"customChildOrigin",!1);if(!X){var q=this.rtl?1:0;C.setOrigin(q)}var st=Be(i,"align.child","left"),it=Be(i,"expand.child",!0),at=it?1:0;this.add(C,{proportion:at,align:st,expand:it,padding:{left:Be(E,"childLeft",0),right:Be(E,"childRight",0),top:Be(E,"childTop",0),bottom:Be(E,"childBottom",0)}}),this.addChildrenMap("title",x),this.addChildrenMap("child",C),this.addChildrenMap("background",a);var ut=i.transition;this.setTransitionDuration(Be(ut,"duration",200)),this.setExpandCallback(Be(ut,"expandCallback",void 0)),this.setCollapseCallback(Be(ut,"collapseCallback",void 0)),this.reLayoutTarget=Be(i,"reLayoutTarget",void 0);var lt=i.onExpandStart;lt&&this.on("expand.start",lt);var ft=i.onExpandComplete;ft&&this.on("expand.complete",ft);var pt=i.onCollapseStart;pt&&this.on("collapse.start",pt);var ct=i.onCollapseComplete;ct&&this.on("collapse.complete",ct);var xt=Be(i,"expanded",void 0);xt!==void 0&&this.setExpandedState(xt)}};Object.assign(vo.prototype,eN,nN),k.register("folder",function(e){var t=new vo(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Folder",vo);var rN=function(e,t,i,a){for(var x in this.treesMap){var C=this.treesMap[x];if(Yn(C.nodeBody,e,t,i,a))return C;var E=C.pointToChild(e,t,i,a);if(E)return E}return null},aN=function(e){return e===void 0&&(e={}),e.targetMode="parent",e.targetSizers=[this],Uh(this,e),this},lS=function(e){return class extends e{get isTree(){return!1}get isNode(){return!1}setText(i){return this.text=i,this}get text(){var i=this.nodeBody;return i.text}set text(i){var a=this.nodeBody;a.setText&&a.setText(i)}setTexture(i,a){var x=this.nodeBody;return x.setTexture&&x.setTexture(i,a),this}get texture(){var i=this.nodeBody;if(i)return i.texture}get frame(){var i=this.nodeBody;if(i)return i.frame}}},oN=function(e,t,i,a){for(var x in this.nodesMap){var C=this.nodesMap[x];if(this.isTreeObject(C)){var E=C;if(Yn(E.nodeBody,e,t,i,a))return E;var O=E.pointToChild(e,t,i,a);if(O)return O}else if(Yn(C,e,t,i,a))return C}return null},hN={getTreePatent(e){if(e===void 0&&(e=this),!!e.rexSizer)return e.rexSizer.treeParent},getTreeRoot(e){e===void 0&&(e=this);for(var t;;){if(!e.rexSizer)return;if(t=e.rexSizer.treeParent,t===null)return e;e=t}},getTreesSizer(e){var t=this.getTreeRoot(e);return t?t.getParentSizer():null},isGrandsonNode(e){if(e===void 0||!e.rexSizer)return!1;for(var t;;){if(!e.rexSizer)return!1;if(t=e.rexSizer.treeParent,t===this)return!0;if(t===null)return!1;e=t}return!1}},po=function(e,t,i,a,x=!1){var C;if(gi(t))C=t,delete t[key];else if(Zi(t)){var E=t;C=E(e,i),C&&e.add.existing(C)}else(x||t)&&a&&(C=a(e,t,i));return C},Fc=function(e,t,i){var a=ze(e,t);return a},lN=function(e,t,i){var a=new io(e,t);return e.add.existing(a),a.resetDisplayContent(""),a};const $r=Phaser.Utils.Objects.GetValue;class uS extends lS(qt){constructor(t,i,a){var x=i.space;super(t,{orientation:"x",space:{left:$r(x,"nodeLeft",0),right:$r(x,"nodeRight",0),top:$r(x,"nodeTop",0),bottom:$r(x,"nodeBottom",0)}}),this.type="rexTreeNode";var C=po(t,$r(i,"nodeBackground"),a,Fc,!1),E=po(t,$r(i,"nodeBody"),a,lN,!0);C&&this.addBackground(C),this.add(E,{proportion:1}),this.nodeBody=E,this.addChildrenMap("background",C),this.addChildrenMap("nodeBody",E)}get isNode(){return!0}getTreePatent(){return this.rexSizer.treeParent}getTreeRoot(){var t=this.rexSizer.treeParent;return t?t.getTreeRoot():null}getTreesSizer(){var t=this.getTreeRoot();return t?t.getParentSizer():null}}var dS=function(e,t){var i=e.parentContainer;if(i){t.isRexContainerLite?t.addToContainer(i):i.add(t);return}var a=e.displayList;if(fa(a)){t.isRexContainerLite?t.addToLayer(a):a.add(t);return}e.scene.add.existing(t)};const fS=Phaser.Utils.String.UUID;var uN={addTree(e,t){if(gi(e)){var i=e;e={nodeBody:i,nodeKey:t}}return this.insertTree(void 0,e)},insertTree(e,t){var i;typeof t=="string"?(i=t,t=void 0):t&&(i=t.nodeKey,delete t.nodeKey),i===void 0&&(i=fS());var a=this.createTree(t);return dS(this,a),this.insertNode(e,a,{expand:!0}),a._postAddCallback(),a},addNode(e,t){return this.insertNode(void 0,e,t)},insertNode(e,t,i){var a;gi(t)||(i=t,t=new uS(this.scene,this.configSave,{isLeaf:!0})),typeof i=="string"?(a=i,i=void 0):i&&(a=i.nodeKey,delete i.nodeKey),a===void 0&&(a=fS()),i===void 0&&(i={}),i.hasOwnProperty("expand")||(i.expand=!0),this.removeNode(t,!1),t.rexSizer.treeParent=this,this.nodesMap.hasOwnProperty(a)&&(console.error(`[Trees] Duplicate nodeKey '${a}'`),this.removeNode(this.nodesMap[a],!0)),t.nodeKey=a,this.nodesMap[a]=t;var x=this.childrenMap.child;return x.insert(e,t,i),t}},dN={removeNode(e,t){if(typeof e=="string"&&(e=this.getTree(e)),!e)return this;var i=this.getTreePatent(e);if(!i)return this;delete i.nodesMap[e.nodeKey],e.nodeKey=null,e.rexSizer.treeParent=null;var a=i.childrenMap.child;return a.remove(e,t),this},removeAllNodes(e){var t=this.nodesMap;for(var i in t)this.removeNode(t[i],e);return this}},fN={getNode(e){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){var t=e.shift(),i=this.nodesMap[t];return e.length===0?i:i&&this.isTreeObject(i)?i.getNode(e):null}},getNodes(e){var t=this.nodesMap;if(!e)e=nodes;else for(var i in t)e.push(t[i]);return e},getAllNodes(e){}},cS={pointToChild:oN};Object.assign(cS,hN,uN,dN,fN);var cN=function(e,t,i){var a=new Oa(e,t);return e.add.existing(a),a.on("expand.start",function(x){x.setDirection("down")}).on("collapse.complete",function(x){x.setDirection("right")}),a};const vS=Phaser.Utils.Objects.GetValue;var vN=function(e,t){var i=new uS(e,t,{isLeaf:!1});e.add.existing(i);var a=po(e,vS(t,"toggleButton"),{isLeaf:!1},cN,!0);return i.insert(0,a,{padding:{right:vS(t,"space.toggleButton",0)},fitRatio:1}),i.addChildrenMap("toggleButton",a),i};const pS=Phaser.Utils.Objects.GetValue;var pN=function(e,t){var i=new qt(e,{orientation:pS(t,"childrenOrientation","y")});e.add.existing(i);var a=po(e,pS(t,"childrenBackground"),{isLeaf:!1},Fc,!1);return a&&i.addBackground(a),i};const gN=Phaser.Utils.Objects.Clone;var mN=function(e,t){var i=e?gN(e):{};if(!t)return i;for(var a in t)i[a]=t[a];return i};const Sn=Phaser.Utils.Objects.GetValue;class qn extends lS(vo){constructor(t,i){i===void 0&&(i={});var a=po(t,Sn(i,"background"),{isLeaf:!1},Fc,!1),x=pN(t,i),C=x.childrenMap.items,E=vN(t,i),O=E.childrenMap.toggleButton,I=E.childrenMap.nodeBody,V=In(Sn(i,"orientation","y")),X=i.space;if(X){var q=Sn(X,"indent",0);X.childLeft=Sn(X,"indentLeft",V===1?q:0),X.childRight=Sn(X,"indentRight",0),X.childTop=Sn(X,"indentTop",V===0?q:0),X.childBottom=Sn(X,"indentBottom",0)}var st={background:a,title:E,child:x,toggleByTarget:O,transition:i.transition,orientation:V,space:X,align:i.align,expand:i.expand};super(t,st),this.type="rexTree",this.rexSizer.treeParent=null,this.nodesMap={},this.configSave=i,this.nodeBody=I,this.addChildrenMap("toggleButton",O),this.addChildrenMap("nodeBody",I),this.addChildrenMap("childrenNodes",C),this.on("expand.start",function(){O.emit("expand.start",O),Wl(this,"expand.start")},this).on("expand.complete",function(){O.emit("expand.complete",O),Wl(this,"expand.complete")}).on("collapse.start",function(){O.emit("collapse.start",O),Wl(this,"collapse.start")}).on("collapse.complete",function(){O.emit("collapse.complete",O),Wl(this,"collapse.complete")});var it=this;it._postAddCallback=function(){var at=Sn(i,"expanded",!0);at!==void 0&&it.setExpandedState(at),delete it._postAddCallback}}destroy(t){!this.scene||this.ignoreDestroy||(this.configSave=void 0,Clear(this.nodesMap),this.nodesMap=void 0,super.destroy(t))}get isTree(){return!0}createTree(t){return qn.CreateTree(this.scene,this.configSave,t)}isTreeObject(t){return t&&t instanceof qn}}qn.CreateTree=function(e,t,i){return new qn(e,mN(t,i))};var Wl=function(e,t){var i=e.getTreesSizer();i&&i.emit(t,e)};Object.assign(qn.prototype,cS);const xN=Phaser.Utils.String.UUID;var yN={addTree(e){if(gi(e)){var t=e;e={nodeBody:t,nodeKey}}return this.insertTree(void 0,e)},insertTree(e,t){var i;typeof t=="string"?(i=t,t=void 0):t&&(i=t.nodeKey,delete t.nodeKey),i===void 0&&(i=xN());var a=qn.CreateTree(this.scene,this.treeConfig,t);return dS(this,a),a.nodeKey=i,this.treesMap[i]=a,this.insert(e,a,{expand:!0}),a._postAddCallback(),a}},SN={removeTree(e,t){return typeof e=="string"&&(e=this.getTree(e)),e?(delete this.treesMap[e.nodeKey],e.nodeKey=null,this.remove(e,t),this):this},removeAllNodes(e){var t=this.treesMap;for(var i in t)this.removeTree(t[i],e);return this}},CN={getTree(e){return this.treesMap[e]},getTrees(e){e===void 0&&(e=[]);for(var t in this.treesMap)e.push(this.treesMap[t]);return e},getNode(e){var t=e.indexOf(".");if(t===-1)return this.getTree(e);var i=this.getTree(e.substring(0,t));if(i)return i.getNode(e.substring(t+1))}},gS={pointToChild:rN,setChildrenInteractive:aN};Object.assign(gS,yN,SN,CN);const TN=Phaser.Utils.Objects.GetValue;class Bc extends qt{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation="y"),super(t,i),this.type="rexTrees",this.treesMap={},this.treeConfig=TN(i,"tree")}destroy(t){!this.scene||this.ignoreDestroy||(this.treeConfig=void 0,Clear(this.treesMap),this.treesMap=void 0,super.destroy(t))}}Object.assign(Bc.prototype,gS),k.register("trees",function(e){var t=new Bc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Trees",Bc),k.register("textArea",function(e){var t=new eo(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.TextArea",eo);var MN=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textVisibleHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.contentHeight}})},PN={setText(e){var t=this.childrenMap.child;return t.setText(e),this},appendText(e){return this.setText(this.text+e),this}},EN={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}};const Xl=Phaser.Utils.Objects.GetValue;class Ul extends to{constructor(t,i){i===void 0&&(i={});var a=Xl(i,"text"),x;gi(a)?x=a:(a===void 0&&(a={}),a.textArea=!0,x=new Sa(t,a),t.add.existing(x)),MN(x);var C=a.width===void 0,E=a.height===void 0;C&&(x.minWidth=0),E&&(x.minHeight=0),i.scrollMode=0,i.type="rexTextAreaInput",i.child={gameObject:x,expandWidth:C,expandHeight:E};var O=Xl(i,"space",void 0);O&&(O.child=Xl(O,"text",0)),i.scroller=!1,super(t,i),this.addChildrenMap("text",x);var I,V;x.on("cursorin",function(){var q=x.textOY,st=x.contentHeight,it=I!==q,at=V!==st;I=q,V=st,at&&this.resizeController(),(it||at)&&(this.t=x.t)},this),x.on("textchange",function(q){this.emit("textchange",q,this)},this).on("close",function(){this.emit("close",this.text,this)},this);var X=Xl(i,"content",void 0);X&&this.setText(X)}get text(){return this.childrenMap.child.text}set text(t){t==null?t="":t=t.toString(),this.childrenMap.child.text!==t&&this.setText(t)}get lineHeight(){var t=this.childrenMap.child;return t.lineHeight}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.contentHeight}get readOnly(){var t=this.childrenMap.child;return t.readOnly}set readOnly(t){var i=this.childrenMap.child;i.readOnly=t}setReadOnly(t){var i=this.childrenMap.child;return i.setReadOnly(t),this}get value(){return this.text}set value(t){this.text=t}}Object.assign(Ul.prototype,PN,EN),k.register("textAreaInput",function(e){var t=new Ul(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.TextAreaInput",Ul),k.register("scrollablePanel",function(e){var t=new ho(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.ScrollablePanel",ho);var Hl={popUp:function(e,t){e.popUp(t)},scaleDown:function(e,t){e.scaleDown(t)},fadeIn:function(e,t){e.fadeIn(t)},fadeOut:function(e,t){e.fadeOut(t)}};const Cn={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var wN={setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){switch(typeof e=="string"&&(e=Cn[e]),e){case Cn.popUp:e=Hl.popUp;break;case Cn.fadeIn:e=Hl.fadeIn;break}return e||(e=r),this.transitInCallback=e,this},setTransitOutCallback(e){switch(typeof e=="string"&&(e=Cn[e]),e){case Cn.scaleDown:e=Hl.scaleDown;break;case Cn.fadeOut:e=Hl.fadeOut;break}return e||(e=r),this.transitOutCallback=e,this}},bN={showMessage(e){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),e===void 0){if(this.messages.length===0)return this;e=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(e),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof e=="string"?this.setText(e):e(this),this.layout();var t=[[0,[this.transitInCallback,this,this.transitInTime]],[0,[this.emit,"transitin",this,this.transitInTime]],[this.transitInTime,[r]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[0,[this.emit,"transitout",this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[r]]];return this.player.load(t,this).once("complete",function(){this.showMessage()},this).start(),this},removeAllMessages(){return this.messages.length=0,this}};const go=Phaser.Utils.Objects.GetValue;class Ic extends Ws{constructor(t,i){i===void 0&&(i={text:createDefaultTextObject(t)}),super(t,i),this.type="rexToast",this.setTransitInTime(go(i,"duration.in",200)),this.setDisplayTime(go(i,"duration.hold",1200)),this.setTransitOutTime(go(i,"duration.out",200)),this.setTransitInCallback(go(i,"transitIn",Cn.popUp)),this.setTransitOutCallback(go(i,"transitOut",Cn.scaleDown)),this.player=new $x(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||this.ignoreDestroy||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setScale(t,i){return i===void 0&&(i=t),this.scaleX0=t,this.scaleY0=i,super.setScale(t,i),this}get isShowingMessage(){return this.player.isPlaying}}Object.assign(Ic.prototype,wN,bN),k.register("toast",function(e){var t=new Ic(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Toast",Ic);var RN={"bottom-to-top":1,"top-to-bottom":0,"right-to-left":1,"left-to-right":0},ON={setQueueDirection(e){return typeof e=="string"&&(e=RN[e]),this.rtl=e===0,this.orientation===1?e?this.queueDirection=0:this.queueDirection=1:e?this.queueDirection=2:this.queueDirection=3,this},setCreateMessageLabelCallback(e){return this.createMessageLabelCallback=e,this},setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){return e||(e=r),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=r),this.transitOutCallback=e,this}};const AN=Qd.onClick,mS=V0.delayCall,LN=Rh.moveTo;var DN=function(e,t,i){var a=t(e.scene,i,e);if(AN.call(a,function(){e.removeMessage(a)}),e.displayTime){var x=e.transitInTime+e.displayTime+10;mS.call(a,x,function(){e.removeMessage(a)})}return a},xS=function(e){for(var t=e.childrenMap.items,i,a=[],x=0,C=t.length;x<C;x++)i=t[x],a.push({x:i.x,y:i.y});return a},FN=function(e){for(var t=e.childrenMap.items,i,a=[],x=0,C=t.length;x<C;x++)i=t[x],a.push({x:i.scaleX,y:i.scaleY}),i.setScale(1);e.layout();for(var E=xS(e),x=0,C=t.length;x<C;x++){var O=a[x];t[x].setScale(O.x,O.y)}return E},BN=function(e,t,i,a){for(var x=e.childrenMap.items,C=Math.min(t.length,i.length,x.length),E,O,I,V=e.queueDirection,X=0;X<C;X++){switch(E=x[X],O=t[X],I=i[X],E.setPosition(O.x,O.y),V){case 0:if(O.y<=I.y)continue;break;case 1:if(O.y>=I.y)continue;break;case 2:if(O.x<=I.x)continue;break;case 3:if(O.x>=I.x)continue;break}LN.call(E,a,I.x,I.y)}},IN=function(e,t,i){var a=xS(e);e.add(t);var x=FN(e);BN(e,a,x,i),e.transitInCallback(t,i,e)},GN={showMessage(e){var t=DN(this,this.createMessageLabelCallback,e);return IN(this,t,this.transitInTime),this},removeMessage(e){if(this.getParentSizer(e)!==this)return this;if(!e.__isDestroying){e.__isDestroying=!0;var t=this.transitOutTime;return this.transitOutCallback(e,t,this),mS.call(e,t+10,function(){delete e.__isDestroying,e.destroy()}),this}},removeAllMessages(){for(var e=this.childrenMap.items,t=0,i=e.length;t<i;t++)this.removeMessage(e[t]);return this}},yS={};Object.assign(yS,ON,GN);var SS={transitIn(e,t,i){switch(i.queueDirection){case 0:e.setOrigin(.5,1),Is.popUp.call(e,t,"y");break;case 1:e.setOrigin(.5,0),Is.popUp.call(e,t,"y");break;case 2:e.setOrigin(1,.5),Is.popUp.call(e,t,"x");break;case 3:e.setOrigin(0,.5),Is.popUp.call(e,t,"x");break}ka.fadeIn.call(e,t)},transitOut(e,t,i){ka.fadeOut.call(e,t)}};const _n=Phaser.Utils.Objects.GetValue;class Gc extends qt{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1),super(t,i),this.type="rexToastQueue",this.setCreateMessageLabelCallback(_n(i,"createMessageLabelCallback")),this.setQueueDirection(_n(i,"queueDirection",1)),this.setTransitInTime(_n(i,"duration.in",200)),this.setDisplayTime(_n(i,"duration.hold",2e3)),this.setTransitOutTime(_n(i,"duration.out",200)),this.setTransitInCallback(_n(i,"transitIn",SS.transitIn)),this.setTransitOutCallback(_n(i,"transitOut",SS.transitOut))}}Object.assign(Gc.prototype,yS),k.register("toastQueue",function(e){var t=new Gc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.ToastQueue",Gc);var kN=function(e,t){if(t===!1)return null;if(gi(t))return t;var i=new Pn(e,t);return e.add.existing(i),i};const NN=Phaser.Utils.String.Pad;var CS=function(e,t){t===void 0&&(t="0x");var i=e.toString(16).toUpperCase();return i=NN(i,6,0,1),i=t+i,i},VN=function(e,t){e&&(e.setTint?e.setTint(t):e.setFillStyle&&e.setFillStyle(t))};const Wi=Phaser.Utils.Objects.GetValue,zN=Phaser.Utils.Objects.IsPlainObject,YN=Phaser.Math.Clamp;let kc=class extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation=0,super(t,i),this.type="rexColorInputLite";var a=Wi(i,"background",void 0),x=Wi(i,"swatch"),C;zN(x)&&(C=Wi(x,"size"));var E=kN(t,Wi(i,"swatch")),O=Wi(i,"inputText",{}),I;if(O&&(I=xn(t,O)),a&&this.addBackground(a),E){C=Wi(i,"swatchSize",C);var V;C!==void 0?(ti(E,C,C),V=!1):V=Wi(i,"squareExpandSwatch",!0);var X=V?1:0;this.add(E,{proportion:0,expand:!0,fitRatio:X})}if(I){var q=Wi(O,"width")===void 0?1:0,st=Wi(O,"height")===void 0;this.add(I,{proportion:q,expand:st})}this.addChildrenMap("background",a),this.addChildrenMap("swatch",E),this.addChildrenMap("inputText",I),I&&I.on("close",function(){this.setValue(I.value)},this);var it=Wi(i,"valuechangeCallback",null);if(it!==null){var at=Wi(i,"valuechangeCallbackScope",void 0);this.on("valuechange",it,at)}this.setValue(Wi(i,"value",0))}get value(){return this._value}set value(t){if(typeof t=="string"){if(t=nd(t),t==null){var a=this.childrenMap.inputText;a&&a.setText(CS(this._value));return}}else t=YN(Math.floor(t),0,16777215);if(this._value!==t){this._value=t;var i=this.childrenMap.swatch;i&&VN(i,t);var a=this.childrenMap.inputText;a&&a.setText(CS(t)),this.emit("valuechange",this._value)}}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}};var WN={setCreateColorPickerBackgroundCallback(e){return this.colorPickerCreateBackgroundCallback=e,this},setColorPickerHPalettePosition(e){return this.colorPickerHPalettePosition=e,this},setColorPickerExpandDirection(e){return typeof e=="string"&&(e=XN[e]),this.colorPickerExpandDirection=e,this},setColorPickerEaseInDuration(e){return e===void 0&&(e=0),this.colorPickerEaseInDuration=e,this},setColorPickerEaseOutDuration(e){return e===void 0&&(e=0),this.colorPickerEaseOutDuration=e,this},setColorPickerTransitInCallback(e){return this.colorPickerTransitInCallback=e,this},setColorPickerTransitOutCallback(e){return this.colorPickerTransitOutCallback=e,this},setColorPickerBounds(e){return this.colorPickerBounds=e,this},setColorPickerWidth(e){return this.colorPickerWidth=e,this},setColorPickerHeight(e){return this.colorPickerHeight=e,this},setColorPickerSize(e,t){return this.setColorPickerWidth(e).setColorPickerHeight(t),this},setColorPickerSpace(e){return e===void 0&&(e={}),this.colorPickerSpace=e,this},setColorComponentsHeight(e){return this.colorComponentsHeight=e,this},setColorComponentsFormatLabelConfig(e){return this.colorComponentsFormatLabelConfig=e,this},setColorComponentsInputTextConfig(e){return this.colorComponentsInputTextConfig=e,this},setColorComponentsSpace(e){return e===void 0&&(e={}),this.colorComponentsSpace=e,this}};const XN={down:0,up:1},TS=Phaser.Display.Color,$l=Phaser.Math.Percent;var UN=function(e,t,i){i===void 0&&(i=!1);var a=e.width,x=e.height,C=new TS;if(i)for(var E=0;E<x;E++){var O=$l(E,0,x);C.setFromHSV(O,1,1),t.fillStyle=C.rgba,t.fillRect(0,E,a,1)}else for(var I=0;I<a;I++){var O=$l(I,0,a);C.setFromHSV(O,1,1),t.fillStyle=C.rgba,t.fillRect(I,0,1,x)}},HN=function(e,t,i){for(var a=e.width,x=e.height,C=t.getImageData(0,0,a,x),E=C.data,O=new TS,I=0;I<x;I++)for(var V=0;V<a;V++){var X=$l(V,0,a),q=1-$l(I,0,x);O.setFromHSV(i,X,q);var st=(I*a+V)*4;E[st]=O.red,E[st+1]=O.green,E[st+2]=O.blue,E[st+3]=255}t.putImageData(C,0,0)};const $N=Phaser.Display.Color,MS=Phaser.Math.Percent,KN=Phaser.Display.Color.ColorToRGBA,ZN=Phaser.Display.Color.HSVToRGB;class JN extends Bn{constructor(t,i,a,x,C,E){i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=2),C===void 0&&(C=2),super(t,i,a,x,C),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new $N,this.setOrientation(E),this.setSize(x,C)}setOrientation(t){return this.orientation=In(t),this}updateTexture(){return UN(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,i){return t===void 0?this.hue:(this.orientation===0?this.hue=MS(t,0,this.width):this.hue=MS(i,0,this.height),this.hue)}getColor(t,i){if(t===void 0)return this.color;var a=this.getHue(t,i);return this.colorObject.setFromRGB(ZN(a,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,i){return i===void 0?i={}:i===!0&&(Nc===void 0&&(Nc={}),i=Nc),this.colorObject.setFromRGB(KN(t)),this.orientation===0?(i.x=this.width*this.colorObject.h,i.y=this.height/2):(i.x=this.width/2,i.y=this.height*this.colorObject.h),i}}var Nc=void 0,QN=Phaser.Math.RotateAround,PS=function(e,t,i,a){a===void 0?a={}:a===!0&&(Vc===void 0&&(Vc={}),a=Vc),t-=e.width*e.originX,i-=e.height*e.originY;var x={x:t*e.scaleX,y:i*e.scaleY};return QN(x,0,0,-e.rotation),a.x=e.x+t,a.y=e.y+i,a},Vc;class jN extends Gi{constructor(t,i){i===void 0&&(i={}),super(t,i);var a=i.width!=null?1:0,x=new JN(t).setOrientation(a);t.add.existing(x),this.type="rexColorPicker.HPalette",x.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var C=new Pn(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(C),this.add(x,{key:"paletteCanvas",expand:!0}).add(C,{key:"marker",expand:!1})}resize(t,i){if(this.width===t&&this.height===i)return this;super.resize(t,i);var a=Math.min(t,i);return this.childrenMap.marker.setSize(a,a),this}onPaletteCanvasPointerDown(t,i,a,x){if(t.isDown){var C=this.childrenMap.paletteCanvas,E=C.getColor(i,a);this.setMarkerPosition(E),this.emit("input",E)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var i=this.childrenMap.paletteCanvas;return i.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var i=this.childrenMap.paletteCanvas,a=this.childrenMap.marker,x=i.colorToLocalPosition(t,!0);return PS(i,x.x,x.y,a),this.resetChildPositionState(a),this}getHue(t,i){var a=this.childrenMap.paletteCanvas;return a.getHue(t,i)}}const qN=Phaser.Display.Color,ES=Phaser.Math.Percent,wS=Phaser.Display.Color.ColorToRGBA,_N=Phaser.Display.Color.HSVToRGB;class tV extends Bn{constructor(t,i,a,x,C,E){i===void 0&&(i=0),a===void 0&&(a=0),x===void 0&&(x=2),C===void 0&&(C=2),super(t,i,a,x,C),this.type="rexColorPicker.SVPaletteCanvas",E===void 0&&(E=1),this.colorObject=new qN,this.setHue(E),this.setSize(x,C)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return HN(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,i){if(t===void 0)return this.colorObject.color;var a=ES(t,0,this.width),x=1-ES(i,0,this.height);return this.colorObject.setFromRGB(_N(this.hue,a,x)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(wS(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,i){return i===void 0?i={}:i===!0&&(zc===void 0&&(zc={}),i=zc),this.colorObject.setFromRGB(wS(t)),i.x=this.width*this.colorObject.s,i.y=this.height*(1-this.colorObject.v),i}}var zc=void 0;class eV extends Gi{constructor(t,i){super(t,i);var a=new tV(t);t.add.existing(a),this.type="rexColorPicker.SVPalette",a.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var x=new Pn(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(x),this.add(a,{key:"paletteCanvas",expand:!0}).add(x,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,i,a,x){if(t.isDown){var C=this.childrenMap.paletteCanvas,E=C.getColor(i,a);this.setMarkerPosition(E),this.emit("input",E)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var i=this.childrenMap.paletteCanvas;return i.setHue(t),this}setColor(t){if(this.color===t)return this;var i=this.childrenMap.paletteCanvas;return i.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var i=this.childrenMap.paletteCanvas,a=this.childrenMap.marker,x=i.colorToLocalPosition(t,!0);return PS(i,x.x,x.y,a),this.resetChildPositionState(a),this}}const as=Phaser.Utils.Objects.GetValue;class Yc extends qt{constructor(t,i){super(t,i),this.type="rexColorPicker",this.freezePalettes=!1;var a=as(i,"hPalette.position",0);typeof a=="string"&&(a=iV[a]);var x=a===0||a===2?1:0;this.setOrientation(x);var C=as(i,"background",void 0),E,O;if(this.orientation===0){var E=as(i,"hPalette.width",void 0);E===void 0&&(E=as(i,"hPalette.size",10))}else O=as(i,"hPalette.height",void 0),O===void 0&&(O=as(i,"hPalette.size",10));var I=new jN(t,{width:E,height:O});t.add.existing(I);var V=as(i,"svPalette.width",void 0),X=as(i,"svPalette.height",void 0),q=new eV(t,{width:V,height:X});t.add.existing(q),C&&this.addBackground(C);var st={proportion:0,expand:!0},it,at;this.orientation===0?(it=V===void 0?1:0,at=X===void 0):(it=X===void 0?1:0,at=V===void 0);var ut={proportion:it,expand:at};a===0||a===3?this.add(q,ut).add(I,st):this.add(I,st).add(q,ut),I.on("input",function(){q.setHue(I.getHue()),this.setValue(q.color,!0)},this),q.on("input",function(){this.setValue(q.color,!0)},this),this.addChildrenMap("background",C),this.addChildrenMap("hPalette",I),this.addChildrenMap("svPalette",q);var lt=as(i,"valuechangeCallback",null);if(lt!==null){var ft=as(i,"valuechangeCallbackScope",void 0);this.on("valuechange",lt,ft)}this.setValue(as(i,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var i=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,i,this)}}setValue(t,i){return this.freezePalettes=!!i,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}postLayout(t,i,a){return this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),super.postLayout(t,i,a),this}}var iV={bottom:0,left:1,top:2,right:3};const Cs=Phaser.Utils.Objects.GetValue,sV=Phaser.Display.Color,nV=Phaser.Display.Color.ColorToRGBA,rV=Phaser.Display.Color.HSVToRGB,tr=Phaser.Math.Clamp;class Wc extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation=0,super(t,i),this.type="rexColorComponents",this.colorObject=new sV;var a=Cs(i,"background",void 0),x=Cs(i,"formatLabel",void 0);gi(x)||(x=$e(t,x).resetDisplayContent());var C=[];if(i.inputText0&&i.inputText1&&i.inputText2)C.push(i.inputText0),C.push(i.inputText1),C.push(i.inputText2);else for(var E=Cs(i,"inputText"),O=0;O<3;O++){var I=xn(t,E).setMaxLength(3).setNumberInput();C.push(I)}a&&this.addBackground(a);var X=Cs(i,"proportion.formatLabel",0),V=!!x.isRexContainerLite,q=Cs(i,"expand.formatLabel",V);this.add(x,{proportion:X,expand:q});for(var X=Cs(E,"width")===void 0?1:0,q=Cs(E,"height")===void 0,O=0,st=C.length;O<st;O++)this.add(C[O],{proportion:X,expand:q});this.addChildrenMap("background",a),this.addChildrenMap("formatLabel",x),this.addChildrenMap("components",C),this.onClick(x,this.toggleColorFormat,this);for(var O=0,st=C.length;O<st;O++)C[O].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var it=Cs(i,"valuechangeCallback",null);if(it!==null){var at=Cs(i,"valuechangeCallbackScope",void 0);this.on("valuechange",it,at)}x.setText("RGB"),this.setValue(Cs(i,"value",16777215))}get value(){return this._value}set value(t){t=tr(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(nV(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,i,a,x;return this.colorFormat==="RGB"?(i=this.colorObject.red,a=this.colorObject.green,x=this.colorObject.blue):(i=Math.floor(this.colorObject.h*360),a=Math.floor(this.colorObject.s*100),x=Math.floor(this.colorObject.v*100)),t[0].setValue(i),t[1].setValue(a),t[2].setValue(x),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var i=tr(t[0].value,0,255),a=tr(t[1].value,0,255),x=tr(t[2].value,0,255);this.colorObject.setTo(i,a,x)}else{var C=tr(t[0].value,0,359)/360,E=tr(t[1].value,0,100)/100,O=tr(t[2].value,0,100)/100;this.colorObject.setFromRGB(rV(C,E,O))}return this}}const Xc=Phaser.Utils.Objects.GetValue;class aV extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexColorInput.ColorPickerPanel";var a=Xc(i,"background",void 0),x=new Yc(t,{hPalette:i.hPalette||{},svPalette:i.svPalette||{},space:{item:Xc(i,"space.hPalette",8)}});t.add.existing(x);var C;i.colorComponents&&(C=new Wc(t,i.colorComponents),t.add.existing(C)),a&&(this.addBackground(a),new Ah(a,{stopAllLevels:!1})),this.add(x,{proportion:1,expand:!0}),C&&this.add(C,{proportion:0,expand:!0}),this.addChildrenMap("background",a),this.addChildrenMap("colorPicker",x),this.addChildrenMap("colorComponents",C),x.on("valuechange",function(E){this.setValue(E)},this),C&&C.on("valuechange",function(E){this.setValue(E)},this),this.setValue(Xc(i,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var i=this.childrenMap.colorPicker;i.setValue(t);var a=this.childrenMap.colorComponents;a&&a.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}}Phaser.Utils.Objects.GetValue;var oV=function(t){var t=this.scene,i,a=this.colorPickerCreateBackgroundCallback;a&&(i=a.call(this,t),t.add.existing(i));var x=this.colorPickerWidth;x===void 0&&(x=this.width);var C=this.colorPickerHeight;C===void 0&&(C=x);var E;this.colorComponentsHeight>0?E={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:E=!1;var O=new aV(t,{width:x,height:C,background:i,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:E,value:this.value});return t.add.existing(O),O},hV=function(){if(!this.colorPicker){var e=oV.call(this).layout(),t=new by(e,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){e.on("valuechange",function(i){this.setValue(i)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=e,this.dropDownBehavior=t,this.pin(e),this}},bS={openColorPicker:hV};Object.assign(bS,WN);const je=Phaser.Utils.Objects.GetValue;class Kl extends kc{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexColorInput",i.hasOwnProperty("colorPicker")||(i.colorPicker={background:{color:0}});var a=i.colorPicker,x=a!==!1&&a!==null;if(x){this.setColorPickerSize(je(a,"width",160),je(a,"height",170));var C,E=je(a,"background");E?C=function(it){return ze(it,E)}:C=je(a,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(C),this.setColorPickerHPalettePosition(je(a,"hPalettePosition",0)),this.setColorPickerExpandDirection(je(a,"expandDirection")),this.setColorPickerEaseInDuration(je(a,"easeIn",200)),this.setColorPickerEaseOutDuration(je(a,"easeOut",200)),this.setColorPickerTransitInCallback(je(a,"transitIn")),this.setColorPickerTransitOutCallback(je(a,"transitOut")),this.setColorPickerBounds(je(a,"bounds"));var O=je(a,"space");O===void 0&&(O={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(O)}var I=i.colorComponents,V=I!==!1&&I!==null;if(x&&V){this.setColorComponentsHeight(je(I,"height",30)),this.setColorComponentsFormatLabelConfig(je(I,"formatLabel"));var X=je(I,"inputText");X||(X=je(i,"inputText")),this.setColorComponentsInputTextConfig(X);var q=je(I,"space");q===void 0&&(q={item:8}),this.setColorComponentsSpace(q)}var st=this.childrenMap.swatch;st&&x&&this.onClick(st,this.openColorPicker,this)}}Object.assign(Kl.prototype,bS),k.register("colorInput",function(e){var t=new Kl(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.ColorInput",Kl),k.register("colorInputLite",function(e){var t=new kc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.ColorInputBase",kc),k.register("colorPicker",function(e){var t=new Yc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.ColorPicker",Yc),k.register("colorComponents",function(e){var t=new Wc(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.ColorComponents",Wc);var RS=function(e){for(var t=e.scene.input,i=t.manager,a=i.pointersTotal,x=i.pointers,C,E=0;E<a;E++)if(C=x[E],!(!C.primaryDown||t.getDragState(C)!==0||!Wu(e,C)))return t.setDragState(C,1),t._drag[C.id]=[e],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(C,3),t.processDragStartList(C)):t.setDragState(C,2),!0;return!1};const Zl=Phaser.Utils.Objects.GetValue,OS=Phaser.Math.Distance.Between,AS=Phaser.Math.RotateAroundDistance;class Uc extends Se{constructor(t,i){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(Zl(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(Zl(t,"enable",!0)),this.setAxisMode(Zl(t,"axis",0)),this.setAxisRotation(Zl(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=lV[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return RS(this.parent),this}dragend(){if(this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,i,a){this.isDragging||(this.pointer=t)}onDrag(t,i,a){if(this.pointer===t){var x=this.parent;if(this.axisMode===0)x.x=i,x.y=a;else if(this.axisRotation===0)this.axisMode===1?x.x=i:this.axisMode===2&&(x.y=a);else{var C,E={x:i,y:a};C=OS(E.x,E.y,x.x,x.y),E=AS(E,x.x,x.y,-this.axisRotation,C),this.axisMode===1?E.y=x.y:this.axisMode===2&&(E.x=x.x),C=OS(E.x,E.y,x.x,x.y),E=AS(E,x.x,x.y,this.axisRotation,C),x.x=E.x,x.y=E.y}}}onDragEnd(t,i,a,x){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const lV={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};var uV=function(){var e=this.sizerChildren[0],t=this.sizerChildren[1],i=this.sizerChildren[2],a=this.getSizerConfig(e).padding,x=this.getSizerConfig(t).padding,C=this.getSizerConfig(i).padding;if(this.orientation===0){var E=this.innerLeft+a.left,O=this.innerRight-C.right,I=ne(t),V=t.x+I*(0-t.originX),X=t.x+I*(1-t.originX),q=V-x.left-this.space.item-a.right,st=X+x.right+this.space.item+C.left,it=q-E,at=O-st,ut=it+at;this.minFirstChildSize>0&&it<this.minFirstChildSize&&(it=this.minFirstChildSize,at=ut-it),this.minSecondChildSize>0&&at<this.minSecondChildSize&&(at=this.minSecondChildSize,it=ut-at),this.setSplitRatio(it/ut)}else{var lt=this.innerTop+a.top,ft=this.innerBottom-C.bottom,pt=re(t),ct=t.y+pt*(0-t.originY),xt=t.y+pt*(1-t.originY),Mt=ct-x.top-this.space.item-a.bottom,Pt=xt+x.bottom+this.space.item+C.top,Ot=Mt-lt,It=ft-Pt,Bt=Ot+It;this.minFirstChildSize>0&&Ot<this.minFirstChildSize&&(Ot=this.minFirstChildSize,It=Bt-Ot),this.minSecondChildSize>0&&It<this.minSecondChildSize&&(It=this.minSecondChildSize,Ot=Bt-It),this.setSplitRatio(Ot/Bt)}var zt=this.minWidth,Vt=this.minHeight;this.setMinSize(this.width,this.height).layout().setMinSize(zt,Vt)};const Ge=Phaser.Utils.Objects.GetValue,dV=Phaser.Math.Clamp;class LS extends qt{constructor(t,i){i.hasOwnProperty("orientation")||(i.orientation=i.hasOwnProperty("leftPanel")?0:1),super(t,i),this.type="rexSplit";var a=Ge(i,"background",void 0),x,C,E,O;this.orientation===0?(x="leftPanel",C="rightPanel",E="minLeftPanelWidth",O="minRightPanelWidth"):(x="topPanel",C="bottomPanel",E="minTopPanelHeight",O="minBottomPanelHeight");var I=Ge(i,x,void 0),V=Ge(i,"splitter",void 0),X=Ge(i,C,void 0);a&&this.addBackground(a);var q=Ge(i,"space",void 0);this.add(I,{proportion:1,expand:!0,padding:{left:Ge(q,`${x}Left`,0),right:Ge(q,`${x}Right`,0),top:Ge(q,`${x}Top`,0),bottom:Ge(q,`${x}Bottom`,0)}}),this.add(V,{proportion:0,expand:!0,padding:{left:Ge(q,"splitterLeft",0),right:Ge(q,"splitterRight",0),top:Ge(q,"splitterTop",0),bottom:Ge(q,"splitterBottom",0)}}),this.add(X,{proportion:1,expand:!0,padding:{left:Ge(q,`${C}Left`,0),right:Ge(q,`${C}Right`,0),top:Ge(q,`${C}Top`,0),bottom:Ge(q,`${C}Bottom`,0)}}),this.addChildrenMap("background",a),this.addChildrenMap(x,I),this.addChildrenMap("splitter",V),this.addChildrenMap(C,X),this.minFirstChildSize=Ge(i,E,0),this.minSecondChildSize=Ge(i,O,0),this.setSplitRatio(Ge(i,"splitRatio",.5)),this.splitterDragBehavior=new Uc(V,{axis:this.orientation===0?1:2}),V.on("dragstart",function(){this.emit("splitter.dragstart",V,this.splitRatio)},this).on("dragend",function(){this.emit("splitter.dragend",V,this.splitRatio)},this).on("drag",function(){uV.call(this),this.emit("splitter.drag",V,this.splitRatio)},this).on("pointerover",function(){this.emit("splitter.over",V,this.splitRatio)},this).on("pointerout",function(){this.emit("splitter.out",V,this.splitRatio)},this)}get splitterEnable(){return this.splitterDragBehavior.enable}set splitterEnable(t){this.splitterDragBehavior.setEnable(t)}setSplitterEnable(t){return t===void 0&&(t=!0),this.splitterEnable=t,this}set minLeftPanelWidth(t){this.minFirstChildSize=t}get minLeftPanelWidth(){return this.minFirstChildSize}set minRightPanelWidth(t){this.minSecondChildSize=t}get minRightPanelWidth(){return this.minSecondChildSize}set minTopPanelHeight(t){this.minFirstChildSize=t}get minTopPanelHeight(){return this.minFirstChildSize}set minBottomPanelHeight(t){this.minSecondChildSize=t}get minBottomPanelHeight(){return this.minSecondChildSize}setMinLeftPanelWidth(t){return this.minLeftPanelWidth=t,this}setMinRightPanelWidth(t){return this.minRightPanelWidth=t,this}setMinTopPanelHeight(t){return this.minTopPanelHeight=t,this}setMinBottomPanelHeight(t){return this.minBottomPanelHeight=t,this}get splitRatio(){return this._splitRatio}set splitRatio(t){t=dV(t,0,1),this._splitRatio!==t&&(this._splitRatio=t,this.getSizerConfig(this.sizerChildren[0]).proportion=t,this.getSizerConfig(this.sizerChildren[2]).proportion=1-t)}setSplitRatio(t){return this.splitRatio=t,this}}k.register("splitPanels",function(e){var t=new LS(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.SplitPanels",LS);var fV=function(){return function(e,t,i,a){t!=="panel"&&i.setChildVisible(e,!0)}},cV=function(){return function(e,t,i,a){t!=="panel"&&i.setChildVisible(e,!1)}},vV={show:fV,hide:cV},pV=function(e,t){return t===void 0&&(t=1),function(i,a,x,C){a!=="panel"&&x.fadeChild(i,C?0:e,t)}},gV=function(e,t){return t===void 0&&(t=0),function(i,a,x,C){a!=="panel"&&x.fadeChild(i,C?0:e,t)}},mV={show:pV,hide:gV},DS=function(e,t){return function(i,a,x,C){a!=="panel"&&x.moveChild(i,C?0:e,t)}},xV={show:DS,hide:DS},FS=function(e,t){return function(i,a,x,C){a==="panel"&&x.moveChild(i,C?0:e,t)}},yV={show:FS,hide:FS};const Hc={visible:vV,fade:mV,move:xV,"move-panel":yV};var SV=function(e){var t,i;[t,...i]=typeof e=="string"?[e]:e;var a,x;return Hc.hasOwnProperty(t)?(a=Hc[t].show.apply(null,i),x=Hc[t].hide.apply(null,i)):(a=r,x=r),{show:a,hide:x}},CV={showChild(e,t){var i=this.sizerChildren[e];return i&&(this.emit("showchild",i,e,this,t),this.resetChildState(i)),this},hideChild(e,t){var i=this.sizerChildren[e];return i&&(this.emit("hidechild",i,e,this,t),this.resetChildState(i)),this},swapChild(e,t){return this.currentChildKey===e||(this.currentChildKey==="panel"||e==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=e,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(e,t))),this},showPanel(e){return this.swapChild("panel",e),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var e=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(e),this},toggleRightSide(){var e=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(e),this},toggleTopSide(){var e=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(e),this},toggleBottomSide(){var e=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(e),this}};const TV=Ti.prototype.setChildVisible;var MV={setChildVisible(e,t){var i;if(typeof e=="string"){var i=e;e=this.sizerChildren[i]}else i=$h(this.sizerChildren,e);return t===void 0&&(t=this.currentChildKey===i),TV.call(this,e,t),this}},PV={fadeChild(e,t,i){var a;return typeof e=="string"?(a=e,e=this.sizerChildren[a]):a=$h(this.sizerChildren,e),t===void 0&&(t=500),i===void 0&&(i=this.currentChildKey===a?1:0),e.fadeIn(t,{start:e.alpha,end:i}),this},fadeChildPromise(e,t,i){return typeof e=="string"&&(e=this.sizerChildren[key]),this.fadeChild(e,t,i),e._fade?Je(e._fade):Promise.resolve()}},EV={moveChild(e,t,i,a){var x;typeof e=="string"?(x=e,e=this.sizerChildren[x]):x=$h(this.sizerChildren,e),t===void 0&&(t=500);var C=this.currentChildKey===x;if(a===void 0)switch(x){case"leftSide":case"rightSide":a=ne(e);break;case"topSide":case"bottomSide":a=re(e);break;default:if(C)switch(this.previousChildKey){case"leftSide":case"rightSide":a=ne(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":a=re(this.sizerChildren[this.previousChildKey]);break;default:a=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":a=ne(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":a=re(this.sizerChildren[this.currentChildKey]);break;default:a=0;break}break}var E,O,I,V;if(C)switch(x){case"panel":switch(this.previousChildKey){case"leftSide":E=!0;break;case"rightSide":O=!0;break;case"topSide":I=!0;break;case"bottomSide":V=!0;break}break;case"leftSide":O=!0;break;case"rightSide":E=!0;break;case"topSide":V=!0;break;case"bottomSide":I=!0;break}else switch(x){case"panel":switch(this.currentChildKey){case"leftSide":O=!0;break;case"rightSide":E=!0;break;case"topSide":V=!0;break;case"bottomSide":I=!0;break}break;case"leftSide":E=!0;break;case"rightSide":O=!0;break;case"topSide":I=!0;break;case"bottomSide":V=!0;break}return E?e.moveTo(t,`-=${a}`,void 0,i):O?e.moveTo(t,`+=${a}`,void 0,i):I?e.moveTo(t,void 0,`-=${a}`,i):V?e.moveTo(t,void 0,`+=${a}`,i):e.moveTo(0),this},moveChildPromise(e,t,i,a){return typeof e=="string"&&(e=this.sizerChildren[key]),this.moveChild(e,t,i,a),e._easeMove?Je(e._easeMove):Promise.resolve()}},BS={};Object.assign(BS,MV,PV,EV);const xi=Phaser.Utils.Objects.GetValue;class $c extends Gi{constructor(t,i){super(t,i),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var a=xi(i,"showChildCallback",void 0);if(a)if(Zi(a)){var x=xi(i,"showChildCallbackScope",void 0);this.on("showchild",a,x);var C=xi(i,"hideChildCallback",void 0),E=xi(i,"hideChildCallbackScope",void 0);this.on("hidechild",C,E)}else{var O=SV(a);this.on("showchild",O.show),this.on("hidechild",O.hide)}var I=xi(i,"background",void 0),V=xi(i,"panel",void 0),X=xi(i,"leftSide",void 0),q=xi(i,"rightSide",void 0),st=xi(i,"topSide",void 0),it=xi(i,"bottomSide",void 0);if(I&&this.addBackground(I),V&&this.add(V,"panel","center",0,!0),X){var at=xi(i,"expand.left",!0);this.add(X,"leftSide","left-top",0,{height:at})}if(q){var at=xi(i,"expand.right",!0);this.add(q,"rightSide","right-top",0,{height:at})}if(st){var at=xi(i,"expand.top",!0);this.add(st,"topSide","left-top",0,{width:at})}if(it){var at=xi(i,"expand.bottom",!0);this.add(it,"bottomSide","left-bottom",0,{width:at})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign($c.prototype,CV,BS),k.register("sides",function(e){var t=new $c(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Sides",$c);var wV=function(e){var t=!0;return e.hasOwnProperty("accept")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'accept' callback.`)),e.hasOwnProperty("build")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'build' callback.`)),t&&this.inputHandlers.unshift(e),this};const bV=Phaser.Utils.Array.GetFirst,RV=Phaser.Utils.Array.Remove;var OV=function(e){var t=bV(this.inputHandlers,"name",e);return t&&RV(this.inputHandlers,t),this};class mo extends Ws{constructor(t,i){i=xl(t,i),super(t,i),this.type="rexTweaker.Title"}setTitle(t){return t=t?j(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}}class AV extends mo{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexTweaker.FolderTitle";var a=new Oa(t,i.expandedIcon);t.add.existing(a),this.addSpace().add(a,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",a)}setExpandedState(t){t===void 0&&(t=!0);var i=t?"down":"right",a=this.childrenMap.expandedIcon;return a.setDirection(i),this}}/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var IS=function(e,t){var i=Hi(e);for(var a in t)i.hasOwnProperty(a)||(i[a]=t[a]);return i},xo=function(e,t,i){return ze(e,IS(t,i))},LV={setBindingTarget(e){var t=this.childrenMap.child;return t.setBindingTarget(e),this}},DV={getMaxInputRowTitleWidth(){var e=this.childrenMap.child,t=e.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");var t=this.childrenMap.child;return t.setInputRowTitleWidth(e),this}};class GS extends vo{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexTweaker.Folder"}setTitle(t){var i=this.childrenMap.title;return i.setTitle(t),this}}Object.assign(GS.prototype,LV,DV);const Kr=Phaser.Utils.Objects.GetValue;var FV=function(e,t,i){var a=e.scene,x=Kr(i,"title")||{},C=new AV(a,x);a.add.existing(C),C.on("folder.expand",function(){C.setExpandedState(!0)}).on("folder.collapse",function(){C.setExpandedState(!1)});var E={root:Kr(i,"root"),styles:Kr(i,"tweaker"),space:Kr(i,"space")||{}},O=e.createTweaker(E),I=Kr(i,"background"),V=xo(a,t,I),X=new GS(a,{title:C,child:O,background:V,transition:{duration:Kr(i,"transition.duration",200)}});return a.add.existing(X),X};const kS=Phaser.Utils.Objects.GetValue;var BV=function(e){e===void 0&&(e={});var t=kS(this.styles,"folder")||{};t.tweaker=this.styles,t.root=this.root;var i=FV(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0}),i.setTitle(e);var a=kS(e,"expanded",!0);a!==void 0&&i.setExpandedState(a);var x=i.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,x),x},IV={setBindingTarget(e){for(var t=this.childrenMap.pages.children,i=0,a=t.length;i<a;i++)t[i].setBindingTarget(e);return this}},GV={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.pages.children,i=0,a=t.length;i<a;i++)e=Math.max(e,t[i].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,i=0,a=t.length;i<a;i++)t[i].setInputRowTitleWidth(e);return this}};class NS extends Yl{constructor(t,i){super(t,i),this.type="rexTweaker.TabPages"}}Object.assign(NS.prototype,IV,GV);const Jl=Phaser.Utils.Objects.GetValue;var kV=function(e,t,i){var a=e.scene,x=new NS(a,i);a.add.existing(x);for(var C=Jl(i,"tab"),E={root:Jl(i,"root"),styles:Jl(i,"tweaker")},O=Jl(t,"pages")||[],I=0,V=O.length;I<V;I++){var X=O[I];x.addPage({key:X.title,tab:$e(a,C).setActiveState(!1).resetDisplayContent({text:X.title}),page:e.createTweaker(E)})}return x.on("tab.focus",function(q,st){q.setActiveState(!0)}).on("tab.blur",function(q,st){q.setActiveState(!1)}),x};const VS=Phaser.Utils.Objects.GetValue;var NV=function(e){e===void 0&&(e={});var t=VS(this.styles,"tab")||{};t.tweaker=this.styles,t.root=this.root;var i=kV(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0});for(var a=VS(e,"pages")||[],x=[],C=0,E=0,O=a.length;E<O;E++){var I=i.getPage(E),V=a[E].show;V&&(C=E);var X=a[E].key;X&&this.root.addChildrenMap(X,I),x.push(I)}return i.swapPage(C,0),x},VV={setBindingTarget(e){for(var t=this.childrenMap.columns,i=0,a=t.length;i<a;i++)t[i].setBindingTarget(e);return this}},zV={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.columns,i=0,a=t.length;i<a;i++)e=Math.max(e,t[i].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.columns,i=0,a=t.length;i<a;i++)t[i].setInputRowTitleWidth(e);return this}};const Zr=Phaser.Utils.Objects.GetValue;class zS extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation="y",super(t,i),this.type="rexTweaker.Columns";var a=Zr(i,"background",void 0),x=Zr(i,"title",void 0);a&&this.addBackground(a),x&&this.add(x,{expand:!0,space:{bottom:Zr(i,"space.title",0)}});var C=new qt(t,{orientation:"x",space:{item:Zr(i,"space.column",0)}});t.add.existing(C);for(var E=Zr(i,"columns",void 0),O,I,V=0,X=E.length;V<X;V++)O=E[V],I=O.child,C.add(O.child,{proportion:I.minWidth===0?1:0,expand:Zr(O,"expand",!0)});this.add(C,{expand:!0}),this.addChildrenMap("title",x),this.addChildrenMap("columnsSizer",C),this.addChildrenMap("columns",C.childrenMap.items)}setTitle(t){var i=this.childrenMap.title;return t.title||t.icon?i.show().setTitle(t):i.hide(),this}getColumns(){return this.childrenMap.columns}getColumn(t){return this.childrenMap.columns[t]}}Object.assign(zS.prototype,VV,zV);const er=Phaser.Utils.Objects.GetValue;var YV=function(e,t,i){var a=e.scene,x=er(i,"title")||{},C=new mo(a,x);a.add.existing(C);var E={root:er(i,"root"),styles:er(i,"tweaker")},O=er(i,"background");O&&!Array.isArray(O)&&(O=[O]);var I=er(t,"columns",2);if(typeof I=="number"){var V=I;I=[];for(var X=0,q=V;X<q;X++)I.push({})}for(var X=0,q=I.length;X<q;X++){var st=I[X];O&&(E.background=O[X%O.length]),E.width=er(st,"width",0);var it=e.createTweaker(E);st.child=it}var at=new zS(a,{title:C,columns:I,space:er(i,"space")});return a.add.existing(at),at};const YS=Phaser.Utils.Objects.GetValue;var WV=function(e){e===void 0&&(e={}),typeof e=="number"&&(e={columns:e});var t=YS(this.styles,"columns")||{};t.tweaker=this.styles,t.root=this.root;var i=YV(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0}),i.setTitle(e);var a=YS(e,"columns",void 0);if(a&&Array.isArray(a))for(var x=0,C=a.length;x<C;x++){var E=a[x].key;E&&this.root.addChildrenMap(E,i.getColumn(x))}return i.getColumns()},XV={setBindingTarget(e){for(var t=this.childrenMap.child,i=0,a=t.length;i<a;i++)t[i].setBindingTarget(e);return this}},UV={getMaxInputRowTitleWidth(){return 0},setInputRowTitleWidth(e){return this}};const Ql=Phaser.Utils.Objects.GetValue;class WS extends qt{constructor(t,i){i===void 0&&(i={}),i.orientation="y",super(t,i),this.type="rexTweaker.Wrap";var a=Ql(i,"background",void 0),x=Ql(i,"title",void 0);a&&this.addBackground(a),x&&this.add(x,{expand:!0,space:{bottom:Ql(i,"space.title",0)}});var C=Ql(i,"child",void 0);this.add(C,{expand:!0}),this.addChildrenMap("title",x),this.addChildrenMap("child",C)}setTitle(t){var i=this.childrenMap.title;return t.title||t.icon?i.show().setTitle(t):i.hide(),this}}Object.assign(WS.prototype,XV,UV);const Ts=Phaser.Utils.Objects.GetValue;var HV=function(e,t,i){var a=e.scene,x=Ts(i,"title")||{},C=new mo(a,x);a.add.existing(C);var E=Ts(i,"itemWidth",0),O=Ts(i,"itemHeight",0),I={root:Ts(i,"root"),styles:Ts(i,"tweaker"),space:Ts(i,"space"),align:Ts(i,"align",5),wrap:!0,itemWidth:Ts(t,"itemWidth",E),itemHeight:Ts(t,"itemHeight",O)};Ts(i,"background");var V=e.createTweaker(I),X=new WS(a,{title:C,child:V});return a.add.existing(X),X};const $V=Phaser.Utils.Objects.GetValue;var KV=function(e){e===void 0&&(e={});var t=$V(this.styles,"wrap")||{};t.tweaker=this.styles,t.root=this.root;var i=HV(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0}),i.setTitle(e);var a=i.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,a),a},ZV={setBindingTarget(e){var t=this.childrenMap.panel;return t.setBindingTarget(e),this}},JV={getMaxInputRowTitleWidth(){var e=this.childrenMap.panel,t=e.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");var t=this.childrenMap.panel;return t.setInputRowTitleWidth(e),this}};class XS extends ho{constructor(t,i){super(t,i),this.type="rexTweaker.Scrollable"}setTitle(t){var i=this.childrenMap.header;return t.title||t.icon?i.show().setTitle(t):i.hide(),this}}Object.assign(XS.prototype,ZV,JV);const Tn=Phaser.Utils.Objects.GetValue;var QV=function(e,t,i){var a=e.scene,x=Tn(i,"title")||{},C=new mo(a,x);a.add.existing(C);var E={root:Tn(i,"root"),styles:Tn(i,"tweaker"),space:Tn(i,"space")||{}},O=e.createTweaker(E),I=Tn(i,"slider");if(I){I=j(I);var V=I.track;V&&(I.track=xo(a,t,V));var X=I.thumb;X&&(I.thumb=xo(a,t,X))}var q=Tn(i,"background"),st=xo(a,t,q),it=new XS(a,{scrollMode:0,header:C,panel:{child:O,mask:{padding:1}},slider:I,background:st,height:Tn(t,"height",0),space:Tn(i,"space",void 0)});return a.add.existing(it),it};const jV=Phaser.Utils.Objects.GetValue;var qV=function(e){e===void 0&&(e={});var t=jV(this.styles,"scrollable")||{};t.tweaker=this.styles,t.root=this.root;var i=QV(this,e,t);delete t.tweaker,delete t.root,this.add(i,{proportion:i.minWidth===0?1:0,expand:!0}),i.setTitle(e);var a=i.childrenMap.panel;return e.key&&this.root.addChildrenMap(e.key,a),a};const US=Phaser.Utils.Objects.GetValue;var _V={setupBinding(){var e=this.childrenMap.inputField;return e.on("valuechange",function(t){this.autoUpdateEnable&&this.setTargetValue(t)},this),this},setAutoUpdateEnable(e){return e===void 0&&(e=!0),this.autoUpdateEnable=e,this},setBindingTarget(e,t){this.bindingTarget=e,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue();var i=this.childrenMap.inputField;return i.onBindTarget&&i.onBindTarget(e,t),this},setBindingTargetKey(e){return this.bindTargetKey=e,this},setValueCallbacks(e){return this.onGetValue=US(e,"onGetValue"),this.onSetValue=US(e,"onSetValue"),this},getTargetValue(){if(this.bindingTarget){if(this.bindTargetKey!=null)return this.bindingTarget[this.bindTargetKey];if(this.onGetValue)return this.onGetValue(this.bindingTarget)}},setTargetValue(e){return this.bindingTarget?this.bindTargetKey!=null?(this.bindingTarget[this.bindTargetKey]=e,this):(this.onSetValue&&this.onSetValue(this.bindingTarget,e),this):this},syncTargetValue(){if(!this.bindingTarget)return this;var e=this.childrenMap.inputField;return e.syncValue&&e.syncValue(this.getTargetValue()),this}},tz={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(this.bindingTarget){var e=this.getTargetValue(),t=this.childrenMap.inputField;t.value!==e&&t.syncValue(e)}}},ez={getMinTitleWidth(){var e=this.childrenMap.title;if(!e||e.orientation!==0)return 0;var t=e.rexSizer.padding,i=this.getChildWidth(this.childrenMap.title)+(t.left+t.right)*e.scaleX;return i+this.getInnerPadding("left")},setMinTitleWidth(e){var t=this.childrenMap.title;if(!t||t.orientation!==0)return this;var i=t.rexSizer.padding;return e-=(i.left+i.right)*t.scaleX,t.minWidth=e,this}};const Kc=Phaser.Utils.Objects.GetValue;class Zc extends qt{constructor(t,i){super(t,i),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var a=i.inputTitle,x=i.inputField,C=i.background,V=Kc(i,"proportion.title",0),E=Kc(i,"space.title",0),O;this.orientation===0?O={right:E}:O={bottom:E},this.add(a,{proportion:V,expand:!0,padding:O});var I=x.defaultProportion;I===void 0&&(I=i.defaultExpandWidth?1:0);var V=Kc(i,"proportion.inputField",I);this.add(x,{proportion:V,expand:!0}),C&&this.addBackground(C),this.addChildrenMap("title",a),this.addChildrenMap("inputField",x),this.addChildrenMap("background",C),this.setupBinding()}destroy(t){!this.scene||this.ignoreDestroy||(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var i=this.childrenMap.title;return i.setTitle(t),this}preLayout(){var t=this.childrenMap.title;t&&(t.minWidth=0),super.preLayout()}}Object.assign(Zc.prototype,_V,tz,ez);var HS=function(e,t,i){var a=new mo(e,i);return e.add.existing(a),a},iz=function(e){e===void 0&&(e=qt);class t extends e{get bindingTarget(){var a=this.getParentSizer();return a.bindingTarget}get bindingKey(){var a=this.getParentSizer();return a.bindTargetKey}get value(){return this._value}get root(){var a=this.getParentSizer(),x=a.getParentSizer();return x.root}onBindTarget(a,x){this.onBindTargetCallback&&this.onBindTargetCallback(this,a,x)}validate(a){return this.syncValueFlag||!this.validateCallback?!0:this.validateCallback(a,this._value,this.bindingTarget,this.bindingKey)}getFotmatText(a){return this.textFormatCallback?a=this.textFormatCallback(a):a=a.toString(),a}set value(a){if(this._value!==a&&(this.validate(a)||(a=this._value),this.filterValueCallback&&(a=this.filterValueCallback(this,a)),this.displayValueCallback&&this.displayValueCallback(this,a),this._value!==a)){var x=this._value;if(this._value=a,!this.syncValueFlag){var C=this.bindingTarget,E=this.bindingKey;this.emit("valuechange",a,x,C,E),this.root.emit("valuechange",a,x,C,E)}}}getValue(){return this.value}setValue(a){return this.value=a,this}syncValue(a){return this.syncValueFlag=!0,this.value=a,this.syncValueFlag=!1,this}setup(a,x){return x===void 0&&(x=!1),(x||a.hasOwnProperty("format"))&&this.setTextFormatCallback(a.format),(x||a.hasOwnProperty("onValidate"))&&this.setValidateCallback(a.onValidate),this.setupCallback&&this.setupCallback(this,a,x),this}setSetupCallback(a){return this.setupCallback=a,this}setFilterValueCallback(a){return this.filterValueCallback=a,this}setDisplayValueCallback(a){return this.displayValueCallback=a,this}setOnBindTargetCallback(a){return this.onBindTargetCallback=a,this}setTextFormatCallback(a){return this.textFormatCallback=a,this}setValidateCallback(a){return this.validateCallback=a,this}}return t},sz=function(e,t,i){for(var a,x=this.inputHandlers,C=0,E=x.length;C<E;C++){var O=x[C];if(O.accept(t)){var I=iz(O.baseClass);a=new I(e),e.add.existing(a),a.setSetupCallback(O.setup).setFilterValueCallback(O.filterValue).setDisplayValueCallback(O.displayValue).setOnBindTargetCallback(O.onBindTarget),O.build(a,i);break}}return a&&a.setup(t,!0),a};const $S=Phaser.Utils.Objects.GetValue;var nz=function(e,t,i){var a=sz.call(this,e,t,i);if(!a)return null;var x=$S(i,"title")||{},C=HS(e,t,x),E=$S(i,"background")||{},O=ze(e,E),I=new Zc(e,{...i,...t,inputTitle:C,inputField:a,background:O});return e.add.existing(I),I.setTitle(t),I.setValueCallbacks(t),I},rz=function(e,t,i){arguments.length===1?(i=e,e=i.bindingTarget,t=i.bindingKey):(i===void 0&&(i={}),i.bindingTarget=e,i.bindingKey=t),i.title||(i.title=t),i.bindingTarget&&i.bindingKey?i.value=i.bindingTarget[i.bindingKey]:i.value=void 0;var a=this.styles.inputRow||{};this.isWrapMode?a.defaultExpandWidth=!0:a.defaultExpandWidth=this.styles.orientation===1;var x=nz.call(this,this.scene,i,a);if(!x)return console.error(`[Tweaker] Can't add Input
    title: ${i.title}
    view: ${i.view}
`),this;if(this.isWrapMode)x.setMinWidth(this.itemWidth),x.setMinHeight(this.itemHeight),this.add(x);else{var C;this.orientation===1?C=0:(C=this.itemWidth>0?0:1,x.minWidth===0&&x.setMinWidth(this.itemWidth)),x.minHeight===0&&x.setMinHeight(this.itemHeight),this.add(x,{proportion:C,expand:!0})}if(i.onValueChange){var E=x.childrenMap.inputField;E.on("valuechange",i.onValueChange)}return x.setAutoUpdateEnable(i.autoUpdate),x.setBindingTarget(e,t),i.monitor&&x.startMonitorTarget(),i.key&&this.root.addChildrenMap(i.key,x),this},az=function(e,t){var i=new Pn(e,t);return e.add.existing(i),i};const oz=Phaser.Utils.Objects.GetValue;var hz=function(e,t){var i=oz(t,"wrap",!1),a=i?mn:He,x=new a(e,t);return e.add.existing(x),x};const jl=Phaser.Utils.Objects.GetValue;var lz=function(e,t,i){for(var a=jl(i,"title")||{},x=HS(e,t,a),C=t.buttons,E=jl(i,"button")||{},O=[],I=0,V=C.length;I<V;I++){var X=$e(e,E);O.push(X);var q=C[I];X.resetDisplayContent(q.label),X.callback=q.callback}var st=hz(e,{buttons:O,expand:!0,wrap:jl(t,"wrap",!1)});st.defaultProportion=1;var it=jl(i,"background")||{},at=az(e,it),ut=new Zc(e,{...i,inputTitle:x,inputField:st,background:at});return e.add.existing(ut),ut.setTitle(t),st.on("button.click",function(lt){lt.callback(ut.bindingTarget)}),ut};const uz=Phaser.Utils.Objects.GetValue;var dz=function(e){e===void 0&&(e={});var t=this.scene,i=e.bindingTarget;delete e.bindingTarget;var a=uz(this.styles,"inputRow")||{},x=lz(t,e,a);return this.add(x,{expand:!0}),i&&x.setBindingTarget(i),e.key&&this.root.addChildrenMap(e.key,x),this},fz=function(e){return e===void 0&&(e={}),e.buttons=[{label:e.label,callback:e.callback}],delete e.label,delete e.callback,this.addButtons(e),this},cz=function(e,t,i){return ze(e,IS(t,i))};const vz=Phaser.Utils.Objects.GetValue;var pz=function(e){e===void 0&&(e={});var t=this.scene,i=vz(this.styles,"separator"),a=cz(t,e,i);return this.add(a,{expand:!0}),this},gz=function(e,t,i){return typeof t=="boolean"&&(i=t,t=void 0),i===void 0&&(i=!0),yo(this,j(e),t,i),this},yo=function(e,t,i,a){if(t)for(var x=0,C=t.length;x<C;x++){var E=t[x];E.hasOwnProperty("$target")&&(i=E.$target,delete E.$target);var O=E.$type;switch(delete E.$type,O){case"folder":var I=e.addFolder(E);yo(I,E.$properties,i,a);break;case"tab":for(var V=e.addTab(E),X=0,q=V.length;X<q;X++)yo(V[X],E.pages[X].$properties,i,a);break;case"columns":for(var st=e.addColumns(E),X=0,q=st.length;X<q;X++)yo(st[X],E.columns[X].$properties,i,a);break;case"scrollable":var it=e.addScrollable(E);yo(it,E.$properties,i,a);break;case"separator":e.addSeparator();break;case"button":E.bindingTarget=i,e.addButton(E);break;case"buttons":E.bindingTarget=i,e.addButtons(E);break;default:var at=E.$key;if(delete E.$key,at.indexOf(".")===-1)E.bindingTarget=i,E.bindingKey=at;else{var ut=at.split(".");E.bindingKey=ut.pop();for(var lt=i,ft=0,pt=ut.length;ft<pt;ft++)if(lt=lt[ut[ft]],!i){console.warn(`[Monitor] Key path '${at}' is invalid`);continue}E.bindingTarget=lt}E.hasOwnProperty("monitor")||(E.monitor=a),e.addInput(E);break}}},mz=function(e){for(var t=this.sizerChildren,i=0,a=t.length;i<a;i++){var x=t[i];x.setBindingTarget&&x.setBindingTarget(e)}return this},xz=function(){for(var e=0,t=this.sizerChildren,i=0,a=t.length;i<a;i++){var x=t[i];x.rexSizer.hidden||(x.getMinTitleWidth?e=Math.max(e,x.getMinTitleWidth()):x.getMaxInputRowTitleWidth&&(e=Math.max(e,x.getMaxInputRowTitleWidth())))}return e+this.getInnerPadding("left")},yz=function(e){this.isWrapMode||(e-=this.getInnerPadding("left"));for(var t=this.sizerChildren,i=0,a=t.length;i<a;i++){var x=t[i];x.rexSizer.hidden||(x.setMinTitleWidth?x.setMinTitleWidth(e):x.setInputRowTitleWidth&&x.setInputRowTitleWidth(e))}return this},Sz={registerInputHandler:wV,removeInputHandler:OV,addFolder:BV,addTab:NV,addColumns:WV,addWrap:KV,addScrollable:qV,addInput:rz,addButtons:dz,addButton:fz,addSeparator:pz,addRows:gz,setBindingTarget:mz,getMaxInputRowTitleWidth:xz,setInputRowTitleWidth:yz};const Mn=Phaser.Utils.Objects.GetValue;var KS=function(e){var t=Mn(e,"wrap",!1),i=t?vn:qt;class a extends i{constructor(C,E){E===void 0&&(E={}),E.orientation===void 0&&(E.orientation=t?0:1),super(C,E),this.type="rexTweakerShell",this.isWrapMode=t,E.root?(this.root=E.root,this.inputHandlers=this.root.inputHandlers):(this.root=this,this.inputHandlers=[]),this.styles=Mn(E,"styles")||{},this.styles.orientation=this.orientation;var O=Mn(E,"itemWidth");O===void 0&&(O=Mn(this.styles,"itemWidth",0)),this.itemWidth=O;var I=Mn(E,"itemHeight");if(I===void 0&&(I=Mn(this.styles,"itemHeight",0)),this.itemHeight=I,t||this.root===this&&this.orientation===1){var V=Mn(E,"inputRow.alignTitle");if(V===void 0){var X=Mn(this.styles,"inputRow.proportion.title");V=!X}else V&&Z(this.styles,"inputRow.proportion.title",0);this.alignInputRowTitleStartFlag=V}else this.alignInputRowTitleStartFlag=!1;var q=xo(C,void 0,E.background);q&&this.addBackground(q)}preLayout(){super.preLayout(),this.alignInputRowTitleStartFlag&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}createTweaker(C,E){E===void 0&&(E=!0);var O=KS(C),I=new O(this.scene,C);return E&&this.scene.add.existing(I),I}}return Object.assign(a.prototype,Sz),a},Cz=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},Tz={name:"TextInput",accept(e){return e.hasOwnProperty("view")?e.view==="string":typeof e.value=="string"},build(e,t){var i=e.scene;e.type="rexTweaker.TextInput";var a=t.inputText,x=xn(i,a);e.add(x,{proportion:1,expand:!0,key:"inputText"}),x.on("close",function(){e.setValue(x.value)})},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&Cz(e,!!t.inputTextReadOnly)},displayValue(e,t){var i=e.childrenMap.inputText;i.setText(e.getFotmatText(t))}},Mz=function(e,t,i){i===void 0&&(i=!0),i?t=t?j(t):{}:t||(t={});var a=new Ul(e,t);return e.add.existing(a),a},Pz=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},Ez={name:"TextAreaInput",accept(e){return e.hasOwnProperty("view")?e.view==="textarea":!1},build(e,t){var i=e.scene;this.type="rexTweaker.TextAreaInput";var a=t.inputTextArea;a===void 0&&(a={}),a.hasOwnProperty("text")||(a.text=t.inputText),a.hasOwnProperty("slider")||(a.slider=t.slider);var x=Mz(i,a);e.add(x,{proportion:1,expand:!0,key:"inputText"}),x.on("close",function(){e.setValue(x.value)})},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&Pz(e,!!t.inputTextReadOnly)},displayValue(e,t){var i=e.childrenMap.inputText;i.setText(e.getFotmatText(t))},onBindTarget(e){var t=e.childrenMap.inputText;t.scrollToTop()}},wz=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},bz={name:"NumberInput",accept(e){return e.hasOwnProperty("view")?e.view==="number":typeof e.value=="number"},build(e,t){var i=e.scene;e.type="rexTweaker.NumberInput";var a=t.inputNumber||t.inputText,x=xn(i,a).setNumberInput();e.add(x,{proportion:1,expand:!0,key:"inputText"}),x.on("close",function(){e.setValue(x.value)})},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&wz(e,!!t.inputTextReadOnly),e.isFloatType=!t.int},filterValue(e,t){return e.isFloatType?t:Math.floor(t)},displayValue(e,t){var i=e.childrenMap.inputText;i.setText(e.getFotmatText(t))}},Rz=function(e,t){var i=new Vr(e,t);return e.add.existing(i),i};const Jc=Phaser.Utils.Objects.GetValue,Oz=Phaser.Math.Linear,Az=Phaser.Math.Snap.Floor;var Lz=function(e,t,i,a){e.minValue=t,e.maxValue=i,e.step=a;var x=e.childrenMap.slider;x.setGap(a,t,i)},Dz=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},Fz={name:"RangeInput",accept(e){return e.hasOwnProperty("view")?e.view==="range":typeof e.value=="number"&&e.hasOwnProperty("min")&&e.hasOwnProperty("max")},build(e,t){var i=e.scene;e.type="rexTweaker.RangeInput";var a=t.slider,x=e.orientation===0?"track.height":"track.width",C=Jc(a,x),E=Rz(i,a),X=t.defaultExpandWidth?2:0,q=Jc(t,"proportion.range.slider",X),O=C===void 0;e.add(E,{proportion:q,expand:O,key:"slider"});var I=t.inputNumber||t.inputText,V=xn(i,I).setNumberInput(),X=t.defaultExpandWidth?1:0,q=Jc(t,"proportion.range.inputText",X);e.add(V,{proportion:q,expand:!0,key:"inputText"}),V.on("close",function(){e.setValue(V.value)}),E.on("valuechange",function(){var st=Oz(e.minValue,e.maxValue,E.value);e.step&&(st=Az(st,e.step,e.minValue)),e.setValue(st)})},setup(e,t,i){(i||t.hasOwnProperty("max"))&&Lz(e,t.min,t.max,t.step),(i||t.hasOwnProperty("inputTextReadOnly"))&&Dz(e,!!t.inputTextReadOnly)},displayValue(e,t){var i=e.childrenMap.slider;i.setValue(t,e.minValue,e.maxValue);var a=e.childrenMap.inputText;a.setText("").setText(e.getFotmatText(t))}},ZS=function(e,t){var i=new He(e,t);return e.add.existing(i),i};const Bz=Phaser.Utils.Objects.GetValue;var Iz=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},Gz={name:"RangeInput",accept(e){return e.hasOwnProperty("view")?e.view==="incdec":!1},build(e,t){var i=e.scene;e.type="rexTweaker.IncDecInput";var a=Bz(t,"incDec")||{},x={text:null,action:null},C=ZS(i,{expand:!1}),E=t.defaultExpandWidth?1:0;e.add(C,{proportion:E,expand:!0});var O=t.inputNumber||t.inputText,I=xn(i,O).setNumberInput();I.on("close",function(){e.setValue(I.value)});var V=Object.assign(j(x),a.incButton||{}),X=$e(i,V),q=Object.assign(j(x),a.decButton||{}),st=$e(i,q);C.addButton(X),C.addButton(st);var it=a.inputTextIndex||0;C.insert(it,I,{proportion:1,expand:!0}),e.step=1,e.minValue=void 0,e.maxValue=void 0,C.on("button.click",function(at,ut,lt,ft){var pt=e.value;ut===0?pt+=e.step:pt-=e.step,e.maxValue!==void 0&&pt>e.maxValue&&(pt=e.maxValue),e.minValue!==void 0&&pt<e.minValue&&(pt=e.minValue),e.setValue(pt)}),e.addChildrenMap("incButton",X),e.addChildrenMap("decButton",st),e.addChildrenMap("inputText",I)},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&Iz(e,!!t.inputTextReadOnly),(i||t.hasOwnProperty("step"))&&(e.step=t.hasOwnProperty("step")?t.step:1),(i||t.hasOwnProperty("min"))&&(e.minValue=t.min),(i||t.hasOwnProperty("max"))&&(e.maxValue=t.max)},displayValue(e,t){var i=e.childrenMap.inputText;i.setText("").setText(e.getFotmatText(t))}},kz=function(e,t,i){i===void 0&&(i=!0),i?t=t?j(t):{}:t||(t={});var a=new Kl(e,t);return e.add.existing(a),a},Nz={name:"ColorInput",accept(e){return e.hasOwnProperty("view")?e.view==="color":!1},build(e,t){var i=e.scene;e.type="rexTweaker.ColorInput";var a=t.colorInput;a===void 0&&(a={}),a.hasOwnProperty("inputText")||(a.inputText=t.inputText);var x=kz(i,a);e.add(x,{proportion:1,expand:!0,key:"colorInput"}),x.on("valuechange",function(C){e.setValue(C)})},displayValue(e,t){var i=e.childrenMap.colorInput;i.setValue(t)}},Vz=function(e,t){var i=new ju(e,t);return e.add.existing(i),i},zz={name:"CheckboxInput",accept(e){return e.hasOwnProperty("view")?e.view==="boolean":typeof e.value=="boolean"},build(e,t){var i=e.scene;e.type="rexTweaker.CheckboxInput";var a=t.checkbox,x=Vz(i,a),C=a.size;C!==void 0&&x.setSize(C,C);var E=C!==void 0?0:1;e.add(x,{proportion:0,expand:!1,fitRatio:E,key:"checkbox"}),x.on("valuechange",function(O){e.setValue(O)})},displayValue(e,t){var i=e.childrenMap.checkbox;i.setValue(t)}},Yz=function(e,t){var i=new td(e,t);return e.add.existing(i),i},Wz={name:"ToggleSwitchInput",accept(e){return e.hasOwnProperty("view")?e.view==="toggleSwitch":!1},build(e,t){var i=e.scene;e.type="rexTweaker.ToggleSwitchInput";var a=t.toggleSwitch,x=Yz(i,a),C=a.size;C!==void 0&&x.setSize(C,C);var E=C!==void 0?0:1;e.addSpace().add(x,{proportion:0,expand:!1,fitRatio:E,key:"toggleSwitch"}),x.on("valuechange",function(O){e.setValue(O)})},displayValue(e,t){var i=e.childrenMap.toggleSwitch;i.setValue(t)}},Xz=function(e,t){t=Oy(e,t);var i=new lo(e,t);return e.add.existing(i),i},JS=function(e,t){for(var i=0,a=e.length;i<a;i++){var x=e[i];if(x.value===t)return i}},Uz=function(e,t){var i=JS(e,t);if(i!=null)return e[i]},Hz=function(e,t){var i=e.childrenMap.list;i.setOptions(t)},$z={name:"ListInput",accept(e){return e.hasOwnProperty("view")?e.view==="list":e.hasOwnProperty("options")},build(e,t){var i=e.scene;e.type="rexTweaker.ListInput";var a=Xz(i,t.list);e.add(a,{proportion:1,expand:!0,key:"list"}),a.on("button.click",function(x,C,E,O,I,V){e.setValue(E.value)})},setup(e,t,i){(i||t.hasOwnProperty("options"))&&Hz(e,t.options)},displayValue(e,t){var i=e.childrenMap.list,a=Uz(i.options,t);i.resetDisplayContent(a).setMinSize(i.width,i.height).layout().setMinSize(0,0)}},Kz=function(e,t){for(var i=0,a=e.length;i<a;i++){var x=e[i];x&&x.setActiveState(i===t)}};const Zz=Phaser.Utils.Objects.GetValue;var Jz=function(e,t){var i=e.childrenMap.list;i.options=t;var a=e.scene,x=i.buttonConfig;i.clearButtons(!0);for(var C=0,E=t.length;C<E;C++){var O=t[C],I=$e(a,x).setActiveState(!1).resetDisplayContent({text:O.text});i.addButton(I)}},Qz={name:"ButtonsInput",accept(e){return e.hasOwnProperty("view")?e.view==="buttons":!1},build(e,t){var i=e.scene;e.type="rexTweaker.ButtonsInput";var a=t.button?j(t.button):{},x=Zz(a,"expand",!0);x&&(a.align="center"),delete a.expand;var C=ZS(i,{expand:x});C.buttonConfig=a,e.add(C,{proportion:1,expand:!0,key:"list"}),C.on("button.click",function(E,O,I,V){var X=C.options[O];X&&(e._selectedIndex=O,e.setValue(X.value),e._selectedIndex=void 0)})},setup(e,t,i){(i||t.hasOwnProperty("options"))&&Jz(e,t.options)},displayValue(e,t){var i=e.childrenMap.list,a=e._selectedIndex;a===void 0&&(a=JS(i.options,t)),Kz(i.childrenMap.buttons,a)}},jz=function(){this.registerInputHandler(Tz).registerInputHandler(Ez).registerInputHandler(bz).registerInputHandler(Fz).registerInputHandler(Gz).registerInputHandler(Nz).registerInputHandler(zz).registerInputHandler(Wz).registerInputHandler($z).registerInputHandler(Qz)};class QS extends KS(){constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("style")&&(i.styles=i.style),i.styles===void 0&&(i.styles={}),i.background=i.styles.background||{},i.space=i.styles.space||{},super(t,i),this.type="rexTweaker",jz.call(this)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.inputHandlers=void 0)}}k.register("tweaker",function(e){var t=new QS(this.scene,e);return this.scene.add.existing(t),t}),Z(window,"RexPlugins.UI.Tweaker",QS),k.register("click",function(e,t){return new Fs(e,t)}),Z(window,"RexPlugins.UI.Click",Fs),k.register("clickOutside",function(e,t){return new jd(e,t)}),Z(window,"RexPlugins.UI.ClickOutside",jd),k.register("inTouching",function(e,t){return new Fr(e,t)}),Z(window,"RexPlugins.UI.InTouching",Fr),k.register("tap",function(e,t){return gi(e)||(t=e,e=this.scene),new Gh(e,t)}),Z(window,"RexPlugins.UI.Tap",Gh),k.register("press",function(e,t){return gi(e)||(t=e,e=this.scene),new kh(e,t)}),Z(window,"RexPlugins.UI.Press",kh),k.register("swipe",function(e,t){return gi(e)||(t=e,e=this.scene),new Ya(e,t)}),Z(window,"RexPlugins.UI.Swipe",Ya),k.register("pan",function(e,t){return gi(e)||(t=e,e=this.scene),new q0(e,t)}),Z(window,"RexPlugins.UI.Pan",q0),k.register("drag",function(e,t){return new Uc(e,t)}),Z(window,"RexPlugins.UI.Drag",Uc),k.register("pinch",function(e){return new im(this.scene,e)}),Z(window,"RexPlugins.UI.Pinch",im),k.register("rotate",function(e){return new lf(this.scene,e)}),Z(window,"RexPlugins.UI.Rotate",lf);const qz=Phaser.Utils.Objects.IsPlainObject,jS=Phaser.Utils.Objects.GetValue;var qS=function(e,t,i){var a;if(e===void 0)e=i.texture.key,t=i.frame.name;else if(qz(e)){var x=e;e=jS(x,"key",i.texture.key),t=jS(x,"frame",i.frame.name)}else typeof e=="string"||(a=e);return a===void 0&&(a=function(C){C.setTexture(e,t)}),a};const So=Phaser.Utils.Objects.GetValue,_z=Phaser.Utils.Objects.GetAdvancedValue,tY=Phaser.Math.Linear;class _S extends Dn{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(_z(t,"duration",500)),this.setEase(So(t,"ease","Sine")),this.setOrientation(So(t,"orientation",0)),this.setFrontFace(So(t,"front",void 0)),this.setBackFace(So(t,"back",void 0)),this.setFace(So(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=eY[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=iY[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,i){return this.frontFaceCallback=qS(t,i,this.parent),this}setBackFace(t,i){return this.backFaceCallback=qS(t,i,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateTarget(t,i){i.justRestart&&this.toggleFace();var a=i.t;i.isOddIteration&&(a=1-a),a=this.easeFn(a);var x=tY(this.scale0,0,a);this.orientation===0?t.scaleX=x:t.scaleY=x}}const eY={x:0,horizontal:0,y:1,vertical:1},iY={front:0,back:1};k.register("flip",function(e,t){return new _S(e,t)}),Z(window,"RexPlugins.UI.Flip",_S),k.register("shake",function(e,t){return new Xd(e,t)}),Z(window,"RexPlugins.UI.Shake",Xd),k.register("touchEventStop",function(e,t){return new Ah(e,t)}),Z(window,"RexPlugins.UI.TouchEventStop",Ah),k.register("perspective",function(e,t){return new nS(e,t)}),Z(window,"RexPlugins.UI.Perspective",nS);const tC=Phaser.Math.RotateAround;var Qc=function(e,t,i){var a=e.width/2,x=e.height/2;return ni.x=t-a,ni.y=i-x,tC(ni,0,0,e.rotation),ni.x*=e.scaleX,ni.y*=e.scaleY,ni.x+=e.x,ni.y+=e.y,ni},sY=function(e,t,i){var a=e.width/2,x=e.height/2;return ni.x=t-e.x,ni.y=i-e.y,ni.x/=e.scaleX,ni.y/=e.scaleY,tC(ni,0,0,-e.rotation),ni.x+=a,ni.y+=x,ni},ni={x:0,y:0};class nY{constructor(t,i){this.parent=t,this.vertex=i,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,i){var a=this.parent,x=a.height,C=a.frame.cutWidth/x/2,E=a.frame.cutHeight/x/2,O=t/x-C,I=i/x-E,V=this.vertex;return V.x=O,V.y=-I,a.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,i){return this._localXOrigin=t,this._localYOrigin=i,this._localX=t,this._localY=i,this}setLocalXY(t,i,a){return this._localX===t&&this._localY===i?this:(this._localX=t,this._localY=i,a||this.updateVertexPosition(t,i),this)}setWorldXY(t,i){if(this._worldX===t&&this._worldY===i)return this;var a=sY(this.parent,t,i);return this.setLocalXY(a.x,a.y),this}setPosition(t,i){return this.setWorldXY(t,i),this}getWorldXY(){return Qc(this.parent,this._localX,this._localY)}get x(){var t=Qc(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=Qc(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}}const rY=Phaser.Geom.Mesh.Vertex,aY=Phaser.Geom.Mesh.Face;var oY=function(e){for(var t=e.isNinePointMode,i=t?9:4,a=e.vertices,x=e.faces,C=e.controlPoints,E=0;E<i;E++){var O=new rY;a.push(O),C.push(new nY(e,O))}var I;t?I=uY:e.fourPointsModeRTL?I=lY:I=hY;for(var E=0,V=I.length;E<V;E+=3){var X=a[I[E+0]],q=a[I[E+1]],st=a[I[E+2]];x.push(new aY(X,q,st))}t?(e.topLeft=C[0],e.topCenter=C[1],e.topRight=C[2],e.centerLeft=C[3],e.center=C[4],e.centerRight=C[5],e.bottomLeft=C[6],e.bottomCenter=C[7],e.bottomRight=C[8]):(e.topLeft=C[0],e.topRight=C[1],e.bottomLeft=C[2],e.bottomRight=C[3])};const hY=[0,2,3,0,3,1],lY=[1,3,2,1,2,0],uY=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var dY=function(e){var t,i=0,a=e.height,x=0,C=e.width;if(e.isNinePointMode){var E=(x+C)/2,O=(i+a)/2;t=[x,i,E,i,C,i,x,O,E,O,C,O,x,a,E,a,C,a]}else t=[x,i,C,i,x,a,C,a];return t};const fY=Phaser.Utils.Objects.IsPlainObject,Jr=Phaser.Utils.Objects.GetValue;let cY=class extends Uy{constructor(t,i,a,x,C,E){fY(i)&&(E=i,i=Jr(E,"x",0),a=Jr(E,"y",0),x=Jr(E,"key",null),C=Jr(E,"frame",null)),super(t,i,a,x,C),this.type="rexQuadImage",this.isNinePointMode=Jr(E,"ninePointMode",!1),this.fourPointsModeRTL=Jr(E,"rtl",!1),this.controlPoints=[],oY(this),this.hideCCW=!1,this.syncSize()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){super.destroy(t);for(var i=0,a=this.controlPoints.length;i<a;i++)this.controlPoints[i].destroy();this.controlPoints=void 0}}resetVerts(){this.dirtyCache[9]=-1;for(var t=dY(this),i=this.width,a=this.height,x=this.frame.cutWidth/a/2,C=this.frame.cutHeight/a/2,E=this.frame.u0,O=this.frame.u1,I=this.frame.v0,V=this.frame.v1,X=O-E,q=V-I,st=this.controlPoints,it=0,at=t.length;it<at;it+=2){var ut=t[it+0],lt=t[it+1],ft=it/2,pt=ut/a-x,ct=lt/a-C,xt=E+X*(ut/i),Mt=I+q*(lt/a);this.vertices[ft].set(pt,-ct,0).setUVs(xt,Mt),st[ft].resetLocalXY(ut,lt)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}};Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var eC=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=0);for(var a=e.width,x=e.height,C=a*.5,E=x*.5,O=Math.tan(t)*E,I=Math.tan(i)*C,V=e.controlPoints,X=0,q=V.length;X<q;X++){var st=V[X],it=st.localXOrigin,at=st.localYOrigin;st.localX=it+(at>E?O:-O),st.localY=at+(it>C?I:-I)}};const vY=Phaser.Utils.Objects.IsPlainObject,ql=Phaser.Utils.Objects.GetValue,iC=Phaser.Math.DegToRad,sC=Phaser.Math.RadToDeg;class pY extends cY{constructor(t,i,a,x,C){if(vY(i)){var E=i;i=ql(E,"x",0),a=ql(E,"y",0),x=ql(E,"key",null),C=ql(E,"frame",null)}super(t,i,a,x,C),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,eC(this,this._skewX,this._skewY)}get skewXDeg(){return sC(this._skewX)}set skewXDeg(t){this.skewX=iC(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,eC(this,this._skewX,this._skewY)}get skewYDeg(){return sC(this._skewY)}set skewYDeg(t){this.skewY=iC(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,i){return i===void 0&&(i=t),this.skewX=t,this.skewY=i,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,i){return i===void 0&&(i=t),this.skewXDeg=t,this.skewYDeg=i,this}}const gY=Phaser.Utils.Objects.IsPlainObject,_l=Phaser.Utils.Objects.GetValue;class mY extends pY{constructor(t,i,a,x,C){if(gY(i)){var E=i;i=_l(E,"x",0),a=_l(E,"y",0),x=_l(E,"width",32),C=_l(E,"height",32)}var O=jy(t,x,C);super(t,i,a,O,null),this.type="rexSkewRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}}class nC extends sS(mY){get skewState(){return this.isRunning}}k.register("skew",function(e,t){return new nC(e,t)}),Z(window,"RexPlugins.UI.Skew",nC),k.register("anchor",function(e,t){return new Vd(e,t)}),Z(window,"RexPlugins.UI.Anchor",Vd),k.register("textTyping",function(e,t){return new kl(e,t)}),Z(window,"RexPlugins.UI.TextTyping",kl),k.register("textPage",function(e,t){return new Gl(e,t)}),Z(window,"RexPlugins.UI.TextPage",Gl);var Qr=void 0,xY=function(e){e!==Qr&&(Qr!==void 0&&Qr.close(),Qr=e)},yY=function(e){e===Qr&&(Qr=void 0)};const Ms=Phaser.Utils.Objects.GetValue,SY=Phaser.Utils.Objects.Clone;var CY=function(e,t){t===void 0&&(t={}),t=SY(t);var i=e.scene,a=e.style,x=Ms(t,"backgroundColor",a.backgroundColor);x===null&&(x="transparent"),t.text=Ms(t,"text",e.text),t.fontFamily=Ms(t,"fontFamily",a.fontFamily),t.fontSize=Ms(t,"fontSize",a.fontSize),t.color=Ms(t,"color",a.color),t.backgroundColor=x,t.direction=Ms(t,"rtl",a.rtl)?"rtl":"ltr",t.align=Ms(t,"align",TY(a)),t.direction==="rtl"&&Bf(e)&&(t.align="right");var C=e.padding;C.left>0&&(t.paddingLeft=`${C.left}px`),C.right>0&&(t.paddingRight=`${C.right}px`),a.backgroundCornerRadius&&(t.borderRadius=Ms(t,"borderRadius",`${a.backgroundCornerRadius}px`));var E=new el(i,e.x,e.y,Ms(t,"width",e.width),Ms(t,"height",e.height),t);E.setScale(e.scaleX,e.scaleY).setOrigin(e.originX,e.originY).setScrollFactor(e.scrollFactorX,e.scrollFactorY);var O=e.parentContainer;return O?O.add(E):i.add.existing(E),E},TY=function(e){return e.hasOwnProperty("align")?e.align:e.hasOwnProperty("halign")?e.halign:"left"},MY=function(e,t,i){return e.time.delayedCall(0,t,[],i)};const ir=Phaser.Utils.Objects.GetValue,PY=Phaser.Utils.Objects.Merge;var EY=function(e,t){e===void 0&&(e={}),e=PY(e,this.openConfig),xY(this),Zi(e)&&(t=e,e=void 0);var i=ir(e,"inputType",void 0);i===void 0&&(i=ir(e,"type","text")),t===void 0&&(t=ir(e,"onClose",void 0));var a=ir(e,"onCreate",void 0),x=ir(e,"onOpen",void 0),C=ir(e,"onTextChanged",void 0);return this.inputText=CY(this.parent,e),a&&a(this.parent,this.inputText),this.inputText.on("textchange",function(E){var O=E.text;C?C(this.parent,O):this.parent.text=O},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,ir(e,"enterClose",i!=="textarea")&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=MY(this.scene,function(){this.scene.input.once("pointerdown",this.close,this),x&&x(this.parent,this.inputText),this.emit("open",this.parent,this.inputText)},this),this},wY=function(){return yY(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},bY={open:EY,close:wY};const RY=Phaser.Utils.Objects.GetValue;class tu extends Se{constructor(t,i){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(i);var a=RY(i,"clickEnable",!0);a&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}Object.assign(tu.prototype,bY);var OY=function(e,t,i){return e._edit||(e._edit=new tu(e,{clickEnable:!1})),e._edit.open(t,i),e._edit};k.register("textEdit",function(e,t){return new tu(e,t)}),Z(window,"RexPlugins.UI.TextEdit",tu),k.register("layerManager",function(e){return new $o(this.scene,e)}),Z(window,"RexPlugins.UI.LayerManager",$o);class rC extends Phaser.Plugins.ScenePlugin{constructor(t,i){super(t,i),this.add=new k(t)}boot(){var t=this.scene.events;t.on("destroy",this.destroy,this)}destroy(){this.add.destroy(),super.destroy()}isInTouching(t,i,a,x){return t.visible?ds(t,i,a,x):!1}get viewport(){return cr(this.scene,this.scene.cameras.main,!0)}}var AY={getParentSizer:Ci,getTopmostSizer:n0,removeFromParent:Jn,hide:ln,show:hn,isShown:Ud,confirmAction:sy,edit:OY,wrapExpandText:sl,fontSizeExpandText:rl,fontSizeResize:nl,setFontSizeToFitWidth:nl,waitEvent:th,waitComplete:Je,delayPromise:Jm,setChildrenInteractive:Uh,fadeIn:Ph,fadeOutDestroy:Eh,easeMoveTo:F0,easeMoveFrom:B0,modal:Jd,modalPromise:qD,modalClose:U0,requestDrag:RS,openFileChooser:jm};return Object.assign(rC.prototype,AY),rC})})(RC);var DY=RC.exports;const FY=wC(DY);class BY extends ht.Scene{constructor(){super({key:"PreloadScene"})}preload(){const L=this.cameras.main.width,k=this.cameras.main.height,W=L/2,K=k/2,j=this.add.graphics(),S=this.add.graphics();S.fillStyle(2236962,.8),S.fillRect(W-160,K-25,320,50);const w=this.make.text({x:W,y:K-50,text:"LOADING SCENE",style:{font:"24px monospace",color:"#ffffff",fontStyle:"bold"}});w.setOrigin(.5,.5);const s=this.make.text({x:W,y:K-5,text:"0%",style:{font:"14px monospace",color:"#ffffff"}});s.setOrigin(.5,.5);const c=this.make.text({x:W,y:K+50,text:"Loading assets...",style:{font:"12px monospace",color:"#cccccc"}});c.setOrigin(.5,.5),this.load.on("progress",y=>{j.clear(),j.fillStyle(16777215,1),j.fillRect(W-150,K-15,300*y,30),s.setText(Math.floor(y*100)+"%")}),this.load.on("fileprogress",y=>{c.setText("Loading asset: "+y.key)}),this.load.on("complete",()=>{j.destroy(),S.destroy(),w.destroy(),s.destroy(),c.destroy()}),this.load.json("shops","assets/json/shops.json"),this.load.image("steering-wheel","assets/image/steering-wheel.svg"),this.load.image("key-white","assets/image/key-white.svg"),this.load.image("key-hole","assets/image/key-hole.svg"),this.load.image("hot-dog","assets/image/hot-dog.svg"),this.load.image("face-smile","assets/image/face-smile.svg"),this.load.image("face-neutral","assets/image/face-neutral.svg"),this.load.image("face-frown","assets/image/face-frown.svg"),this.load.image("x","assets/image/x.png"),this.time.delayedCall(2e3,()=>{this.scene.start("AppScene")})}create(){}}class IY extends ht.Scene{tilesprite;constructor(){super({key:"BackgroundScene"})}create(){const L=this.cameras.main.width,k=this.cameras.main.height;this.tilesprite=this.add.tileSprite(0,0,L,k,"x"),this.tilesprite.setOrigin(0,0),this.tilesprite.setScrollFactor(0),this.tilesprite.setDepth(0),this.cameras.main.setVisible(!1),this.events.on("postupdate",()=>{this.tilesprite.tilePositionX-=.5,this.tilesprite.tilePositionY+=.3})}}class GY extends ht.Scene{step=0;halfStep=0;uiHalfStep=0;stepText;gameStarted=!1;isPaused=!1;stepTimer;halfStepTimer;uiHalfStepTimer;constructor(){super({key:"AppScene"})}create(){this.setupOverlayCamera(),this.scene.launch("BackgroundScene"),this.scene.launch("GameScene"),this.scene.launch("MenuScene"),this.scene.bringToTop("MenuScene"),this.time.delayedCall(50,()=>{this.scene.bringToTop("MenuScene"),this.scene.bringToTop("GameScene"),this.scene.bringToTop("AppScene")}),this.time.delayedCall(100,()=>{const u=this.scene.get("MenuScene");u&&(u.events.emit("showStartMenu"),this.scene.bringToTop("MenuScene"))}),this.time.delayedCall(200,()=>{this.scene.bringToTop("AppScene")}),this.input.keyboard?.on("keydown",u=>{switch(console.log("AppScene: Key pressed:",u.code),u.code){case"KeyM":this.gameStarted||(this.scene.launch("MenuScene"),this.scene.bringToTop("MenuScene"));break;case"KeyS":this.scene.launch("StoryScene"),this.scene.bringToTop("StoryScene");break}});const L=10,k=35,W=5,K=W+k,S=this.cameras.main.width-10-60,w=5,s=this.add.text(L,W,"PAUSE",{fontSize:"16px",color:"#ffffff",backgroundColor:"#0000ff",padding:{x:10,y:5}});s.setScrollFactor(0),s.setDepth(5e3),s.setInteractive({useHandCursor:!0}),s.on("pointerdown",()=>{s.setStyle({backgroundColor:"#ff0000"}),this.togglePauseMenu()}),s.on("pointerup",()=>{s.setStyle({backgroundColor:"#0000ff"})});const c=this.add.text(L,K,"SAVE",{fontSize:"16px",color:"#ffffff",backgroundColor:"#27ae60",padding:{x:10,y:5}});c.setScrollFactor(0),c.setDepth(5e3),c.setInteractive({useHandCursor:!0}),c.on("pointerdown",()=>{c.setStyle({backgroundColor:"#ff0000"}),this.showSaveMenu()}),c.on("pointerup",()=>{c.setStyle({backgroundColor:"#27ae60"})});const y=this.add.text(S,w,"MUTE",{fontSize:"16px",color:"#ffffff",backgroundColor:"#e74c3c",padding:{x:10,y:5}});y.setScrollFactor(0),y.setDepth(4e4),y.setInteractive(),y.on("pointerdown",()=>{y.setStyle({backgroundColor:"#c0392b"})}),y.on("pointerup",()=>{y.setStyle({backgroundColor:"#e74c3c"})});try{const u=this.scene.get("GameScene");u&&u.events.on("tutorialOverlayVisible",h=>{s.setVisible(!h),c.setVisible(!h),y.setVisible(!h)})}catch{}this.stepTimer=this.time.addEvent({delay:1e3,callback:this.incrementStep,callbackScope:this,loop:!0,paused:!0}),this.halfStepTimer=this.time.addEvent({delay:500,callback:this.incrementHalfStep,callbackScope:this,loop:!0,paused:!0}),this.uiHalfStepTimer=this.time.addEvent({delay:500,callback:this.incrementUiHalfStep,callbackScope:this,loop:!0}),this.events.on("gameResumed",this.onGameResumed,this)}setupOverlayCamera(){const L=this.cameras.add(0,0,this.cameras.main.width,this.cameras.main.height);L.setName("appOverlayCamera"),L.setScroll(0,0),this.cameras.main=L}incrementStep(){if(console.log("📊 AppScene: incrementStep called, gameStarted:",this.gameStarted,"isPaused:",this.isPaused),!this.gameStarted||this.isPaused){console.log("📊 AppScene: Step increment blocked - game not started or paused");return}this.step++,console.log("📊 AppScene: Step incremented to:",this.step);const L=this.scene.get("GameScene");L&&(console.log("📊 AppScene: Emitting step event to GameScene:",this.step),L.events.emit("step",this.step));const k=this.scene.get("MenuScene");k&&k.events.emit("step",this.step)}incrementHalfStep(){if(!this.gameStarted)return;this.halfStep++;const L=this.scene.get("GameScene");L&&L.events.emit("halfStep",this.halfStep);const k=this.scene.get("MenuScene");k&&k.events.emit("halfStep",this.halfStep)}incrementUiHalfStep(){this.uiHalfStep++;const L=this.scene.get("GameScene");L&&L.events.emit("uiHalfStep",this.uiHalfStep);const k=this.scene.get("MenuScene");k&&k.events.emit("uiHalfStep",this.uiHalfStep)}pause(){this.stepTimer&&(this.stepTimer.paused=!0),this.halfStepTimer&&(this.halfStepTimer.paused=!0)}resume(){this.gameStarted&&!this.isPaused&&this.stepTimer&&(this.stepTimer.paused=!1),this.gameStarted&&!this.isPaused&&this.halfStepTimer&&(this.halfStepTimer.paused=!1)}onGameResumed(){console.log("AppScene: Received gameResumed event - resuming step timer"),this.isPaused=!1,this.stepTimer&&(this.stepTimer.paused=!1,console.log("AppScene: Step timer unpaused")),this.halfStepTimer&&(this.halfStepTimer.paused=!1,console.log("AppScene: Half-step timer unpaused"))}getStep(){return this.step}setStep(L){this.step=L}togglePauseMenu(){if(this.isPaused){this.isPaused=!1;const L=this.scene.get("GameScene");L&&L.events.emit("gameResumed")}else{this.isPaused=!0;const L=this.scene.get("MenuScene");L&&this.time.delayedCall(50,()=>{L.events.emit("showPauseMenu"),this.scene.bringToTop("MenuScene")});const k=this.scene.get("GameScene");k&&k.events.emit("gamePaused")}}startGame(){console.log("📊 AppScene: startGame called"),console.log("📊 AppScene: gameStarted was:",this.gameStarted),console.log("📊 AppScene: isPaused was:",this.isPaused),this.gameStarted=!0,this.stepTimer?(console.log("📊 AppScene: Step timer exists, unpausing..."),this.stepTimer.paused=!1,console.log("📊 AppScene: Step timer unpaused, paused state:",this.stepTimer.paused)):console.error("📊 AppScene: Step timer does not exist!"),this.halfStepTimer&&(this.halfStepTimer.paused=!1,console.log("📊 AppScene: Half-step timer unpaused"));const L=this.scene.get("GameScene");L&&L.startGame()}showSaveMenu(){const L=this.scene.get("MenuScene");L&&this.time.delayedCall(50,()=>{L.events.emit("showSaveMenu"),this.scene.bringToTop("MenuScene")})}stopStepEvents(){this.gameStarted=!1,this.step=0}}class tv{scene;activeOverlays=new Map;hypercardPatterns=[{key:"hypercard_solid",name:"Solid",description:"Solid fill"},{key:"hypercard_white",name:"White",description:"White/transparent"},{key:"hypercard_black",name:"Black",description:"Black fill"},{key:"hypercard_gray",name:"Gray",description:"50% gray"},{key:"hypercard_ltgray",name:"Light Gray",description:"25% gray"},{key:"hypercard_dkgray",name:"Dark Gray",description:"75% gray"},{key:"hypercard_horizontal",name:"Horizontal",description:"Horizontal lines"},{key:"hypercard_vertical",name:"Vertical",description:"Vertical lines"},{key:"hypercard_diagonal",name:"Diagonal",description:"Diagonal lines"},{key:"hypercard_reverse_diagonal",name:"Reverse Diagonal",description:"Reverse diagonal lines"},{key:"hypercard_cross",name:"Cross",description:"Crosshatch"},{key:"hypercard_diagonal_cross",name:"Diagonal Cross",description:"Diagonal crosshatch"},{key:"hypercard_dots",name:"Dots",description:"Dotted pattern"},{key:"hypercard_bricks",name:"Bricks",description:"Brick pattern"},{key:"hypercard_weave",name:"Weave",description:"Woven pattern"},{key:"hypercard_scales",name:"Scales",description:"Scale pattern"},{key:"hypercard_circles",name:"Circles",description:"Circular pattern"},{key:"hypercard_squares",name:"Squares",description:"Square pattern"},{key:"hypercard_diamonds",name:"Diamonds",description:"Diamond pattern"},{key:"hypercard_triangles",name:"Triangles",description:"Triangle pattern"},{key:"hypercard_hexagons",name:"Hexagons",description:"Hexagon pattern"},{key:"hypercard_stars",name:"Stars",description:"Star pattern"},{key:"hypercard_zigzag",name:"Zigzag",description:"Zigzag pattern"},{key:"hypercard_waves",name:"Waves",description:"Wave pattern"},{key:"hypercard_spiral",name:"Spiral",description:"Spiral pattern"},{key:"hypercard_maze",name:"Maze",description:"Maze pattern"},{key:"hypercard_honeycomb",name:"Honeycomb",description:"Honeycomb pattern"},{key:"hypercard_chain",name:"Chain",description:"Chain pattern"},{key:"hypercard_fish",name:"Fish",description:"Fish scale pattern"},{key:"hypercard_wood",name:"Wood",description:"Wood grain pattern"},{key:"hypercard_marble",name:"Marble",description:"Marble pattern"},{key:"hypercard_granite",name:"Granite",description:"Granite pattern"}];currentPatternIndex=0;constructor(L){this.scene=L,this.configureSmoothRendering(),typeof this.createHypercardPatterns=="function"?(console.log("🎨 HyperCard patterns method found, creating patterns..."),this.createHypercardPatterns()):(console.log("🎨 HyperCard patterns method not found, falling back to dither textures..."),this.createDitherTextures()),this.scene.time.delayedCall(100,()=>{console.log("🎨 OverlayManager: Textures ready for use"),console.log(`🎨 Available textures: ${Object.keys(this.scene.textures.list).filter(k=>k.includes("dither")||k.includes("hypercard")).join(", ")}`)})}configureSmoothRendering(){if(this.scene.renderer&&"gl"in this.scene.renderer&&this.scene.renderer.gl){const L=this.scene.renderer.gl;L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.LINEAR),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.LINEAR),console.log("🎨 Configured smooth rendering with LINEAR filtering")}this.scene.cameras&&this.scene.cameras.main&&(this.scene.cameras.main.roundPixels=!1,console.log("🎨 Disabled roundPixels for smooth camera positioning"))}createOverlay(L,k={}){this.removeOverlay(L);const{width:W=this.scene.cameras.main.width,height:K=this.scene.cameras.main.height,depth:j=1,opacity:S=.3,color:w=0,type:s="dither",cutouts:c=[]}=k,y=this.scene.add.container(0,0);y.setScrollFactor(0),y.setDepth(j);let u,h;if(s==="dither"){const n=this.selectPattern(S);if(console.log(`🎨 Creating TileSprite with texture: ${n}`),!this.scene.textures.exists(n))console.error(`🎨 ERROR: Texture ${n} does not exist!`),u=this.scene.add.graphics(),u.fillStyle(w,S),u.fillRect(0,0,W,K);else{const o=Math.floor(W),f=Math.floor(K);u=this.scene.add.tileSprite(0,0,o,f,n),u.setOrigin(0,0),u.setTint(w),u.setAlpha(S),u.setScale(1,1),u.setDisplaySize(o,f),console.log(`🎨 TileSprite created with bulletproof scaling: ${o}x${f} texture: ${u.texture.key}`)}}else u=this.scene.add.graphics(),u.fillStyle(w,S),u.fillRect(0,0,W,K);if(y.add(u),c.length>0){const n=this.scene.make.graphics();c.forEach(o=>{n.fillStyle(16777215),n.fillRect(o.x,o.y,o.width,o.height)}),h=new ht.Display.Masks.BitmapMask(this.scene,n),h.invertAlpha=!0,u.setMask(h)}const l={container:y,background:u,mask:h,destroy:()=>{console.log(`🎨 Destroying overlay: ${L} (total before: ${this.activeOverlays.size})`),h&&h.destroy(),y.destroy(),this.activeOverlays.delete(L),console.log(`🎨 Overlay destroyed: ${L} (total after: ${this.activeOverlays.size})`)},setVisible:n=>{y.setVisible(n)},setDepth:n=>{y.setDepth(n)},setOpacity:n=>{u instanceof ht.GameObjects.TileSprite?u.setAlpha(n):(u.clear(),u.fillStyle(w,n),u.fillRect(0,0,W,K))}};return y.on("destroy",()=>{console.log(`🎨 Reactive cleanup: Container destroyed for overlay ${L}`),this.activeOverlays.delete(L)}),this.activeOverlays.set(L,l),console.log(`🎨 Added overlay to activeOverlays: ${L} (total: ${this.activeOverlays.size})`),l}getOverlay(L){return this.activeOverlays.get(L)}removeOverlay(L){console.log(`🎨 removeOverlay called for: ${L} (total before: ${this.activeOverlays.size})`);const k=this.activeOverlays.get(L);k?(console.log(`🎨 Found overlay to remove: ${L}`),k.destroy()):console.log(`🎨 No overlay found to remove: ${L}`)}removeAllOverlays(){console.log(`🎨 removeAllOverlays called (total: ${this.activeOverlays.size})`),this.activeOverlays.forEach(L=>L.destroy()),this.activeOverlays.clear(),console.log(`🎨 All overlays removed (total after: ${this.activeOverlays.size})`)}selectPattern(L){return this.scene.textures.exists("hypercard_ltgray")?this.selectHypercardPattern(L):this.selectDitherPattern(L)}selectHypercardPattern(L){let k,W;return L<=.3?(k="hypercard_ltgray",W=4):L<=.6?(k="hypercard_gray",W=3):(k="hypercard_dkgray",W=5),this.currentPatternIndex=W,console.log(`🎨 selectHypercardPattern: opacity=${L} -> ${k} (index: ${W})`),console.log(`🎨 Texture exists: ${this.scene.textures.exists(k)}`),k}selectDitherPattern(L){let k,W;return L<=.3?(k="ditherPattern25",W=0):L<=.6?(k="ditherPattern50",W=1):(k="ditherPattern75",W=2),this.currentPatternIndex=W,console.log(`🎨 selectDitherPattern: opacity=${L} -> ${k} (index: ${W})`),console.log(`🎨 Texture exists: ${this.scene.textures.exists(k)}`),k}cycleDitherPattern(L){this.scene.textures.exists("hypercard_ltgray")?this.cycleHypercardPatterns(L):this.cycleDitherPatterns(L)}cycleHypercardPatterns(L){console.log(`🎨 Cycling HyperCard patterns (${L}) - Found ${this.activeOverlays.size} active overlays`),console.log("🎨 Active overlay IDs:",Array.from(this.activeOverlays.keys())),console.log(`🎨 Current pattern index: ${this.currentPatternIndex} (${this.hypercardPatterns[this.currentPatternIndex].name})`);let k;L==="next"?k=(this.currentPatternIndex+1)%this.hypercardPatterns.length:k=(this.currentPatternIndex-1+this.hypercardPatterns.length)%this.hypercardPatterns.length,this.currentPatternIndex=k;const W=this.hypercardPatterns[k];console.info(`🎨 Switching to: ${W.name} (${W.description})`),this.activeOverlays.forEach((K,j)=>{if(K.background&&K.background instanceof ht.GameObjects.TileSprite){console.log(`🎨 Updating overlay ${j} to ${W.key}`);const S=K.background.displayWidth,w=K.background.displayHeight;K.background.setTexture(W.key),K.background.setDisplaySize(Math.floor(S),Math.floor(w)),K.background.setScale(1,1),console.log(`🎨 Maintained pixel-perfect scaling: ${Math.floor(S)}x${Math.floor(w)}`)}else console.log(`🎨 Overlay ${j} background is not TileSprite:`,K.background?.constructor.name)})}cycleDitherPatterns(L){const k=[{key:"ditherPattern25",percentage:25,name:"Light"},{key:"ditherPattern50",percentage:50,name:"Medium"},{key:"ditherPattern75",percentage:75,name:"Dark"}];console.log(`🎨 Cycling dither patterns (${L}) - Found ${this.activeOverlays.size} active overlays`),console.log("🎨 Active overlay IDs:",Array.from(this.activeOverlays.keys())),console.log(`🎨 Current pattern index: ${this.currentPatternIndex} (${k[this.currentPatternIndex].name})`);let W;L==="next"?W=(this.currentPatternIndex+1)%k.length:W=(this.currentPatternIndex-1+k.length)%k.length,this.currentPatternIndex=W;const K=k[W];console.info(`🎨 Switching to: ${K.name} (${K.percentage}%)`),this.activeOverlays.forEach((j,S)=>{if(j.background&&j.background instanceof ht.GameObjects.TileSprite){console.log(`🎨 Updating overlay ${S} to ${K.key}`);const w=j.background.displayWidth,s=j.background.displayHeight;j.background.setTexture(K.key),j.background.setDisplaySize(Math.floor(w),Math.floor(s)),j.background.setScale(1,1),console.log(`🎨 Maintained pixel-perfect scaling: ${Math.floor(w)}x${Math.floor(s)}`)}else console.log(`🎨 Overlay ${S} background is not TileSprite:`,j.background?.constructor.name)})}createDitherTextures(){console.log("🎨 Creating dither textures..."),this.createDitherPattern("ditherPattern25",8,25),this.createDitherPattern("ditherPattern50",8,50),this.createDitherPattern("ditherPattern75",8,75),console.log("🎨 Texture verification:"),console.log(`🎨 ditherPattern25 exists: ${this.scene.textures.exists("ditherPattern25")}`),console.log(`🎨 ditherPattern50 exists: ${this.scene.textures.exists("ditherPattern50")}`),console.log(`🎨 ditherPattern75 exists: ${this.scene.textures.exists("ditherPattern75")}`)}createHypercardPatterns(){console.log("🎨 Creating classic Mac OS HyperCard patterns..."),this.hypercardPatterns.forEach((k,W)=>{this.createHypercardPattern(k.key,8,W)}),console.log(`🎨 Created ${this.hypercardPatterns.length} classic HyperCard patterns`)}createDitherPattern(L,k,W){if(this.scene.textures.exists(L))return;const K=Math.floor(k),j=this.scene.textures.createCanvas(L,K,K);if(!j)return;const S=j.getContext();S.imageSmoothingEnabled=!1,S.fillStyle="#000000";let w;W<=25?w=[[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]:W<=50?w=[[1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0],[0,0,1,0,0,0,1,0],[0,0,0,1,0,0,0,1],[1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0],[0,0,1,0,0,0,1,0],[0,0,0,1,0,0,0,1]]:w=[[1,1,1,1,0,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]];for(let c=0;c<k;c++)for(let y=0;y<k;y++)w[c][y]===1&&S.fillRect(y,c,1,1);j.refresh(),console.log(`🎨 Created ${W}% Mac OS dither texture: ${L}`),console.log(`🎨 Texture verification after creation: ${this.scene.textures.exists(L)}`);const s=this.scene.add.sprite(0,0,L);console.log(`🎨 Test sprite texture key: ${s.texture.key}`),s.destroy()}createHypercardPattern(L,k,W){if(this.scene.textures.exists(L))return;const K=Math.floor(k),j=this.scene.textures.createCanvas(L,K,K);if(!j)return;const S=j.getContext();S.imageSmoothingEnabled=!1,S.fillStyle="#000000";let w;switch(W){case 0:w=[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]];break;case 1:w=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]];break;case 2:w=[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]];break;case 3:w=[[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1]];break;case 4:w=[[1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0],[1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0]];break;case 5:w=[[1,1,1,0,1,1,1,0],[1,0,1,1,1,0,1,1],[1,1,0,1,1,1,0,1],[0,1,1,1,0,1,1,1],[1,1,1,0,1,1,1,0],[1,0,1,1,1,0,1,1],[1,1,0,1,1,1,0,1],[0,1,1,1,0,1,1,1]];break;case 6:w=[[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]];break;case 7:w=[[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0]];break;case 8:w=[[1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1]];break;case 9:w=[[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0],[0,0,0,0,0,1,0,0],[0,0,0,0,1,0,0,0],[0,0,0,1,0,0,0,0],[0,0,1,0,0,0,0,0],[0,1,0,0,0,0,0,0],[1,0,0,0,0,0,0,0]];break;case 10:w=[[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1]];break;case 11:w=[[1,0,0,1,1,0,0,1],[0,1,1,0,0,1,1,0],[0,1,1,0,0,1,1,0],[1,0,0,1,1,0,0,1],[1,0,0,1,1,0,0,1],[0,1,1,0,0,1,1,0],[0,1,1,0,0,1,1,0],[1,0,0,1,1,0,0,1]];break;case 12:w=[[0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0]];break;case 13:w=[[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1],[0,0,0,0,1,1,1,1],[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1],[0,0,0,0,1,1,1,1]];break;case 14:w=[[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0]];break;case 15:w=[[0,1,1,1,1,1,1,0],[1,0,0,0,0,0,0,1],[0,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,0],[1,0,0,0,0,0,0,1],[0,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0]];break;case 16:w=[[0,1,1,1,1,1,1,0],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,1,1,1,1,1,1,0]];break;case 17:w=[[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0],[0,0,0,0,1,1,1,1],[0,0,0,0,1,1,1,1],[0,0,0,0,1,1,1,1],[0,0,0,0,1,1,1,1]];break;case 18:w=[[0,0,1,0,0,0,1,0],[0,1,0,1,0,1,0,1],[1,0,0,0,1,0,0,0],[0,1,0,1,0,1,0,1],[0,0,1,0,0,0,1,0],[0,1,0,1,0,1,0,1],[1,0,0,0,1,0,0,0],[0,1,0,1,0,1,0,1]];break;case 19:w=[[1,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0],[1,1,1,0,0,0,0,0],[1,1,1,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,1,0,0],[0,0,0,0,1,1,1,0],[0,0,0,0,1,1,1,1]];break;case 20:w=[[0,1,1,1,1,1,0,0],[1,0,0,0,0,0,1,0],[1,0,0,0,0,0,1,0],[0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0],[0,1,0,0,0,0,0,1],[0,1,0,0,0,0,0,1],[0,0,1,1,1,1,1,0]];break;case 21:w=[[1,0,0,1,0,0,0,1],[0,1,0,0,1,0,1,0],[0,0,1,0,0,1,0,0],[1,0,0,1,0,0,0,1],[0,1,0,0,1,0,1,0],[0,0,1,0,0,1,0,0],[1,0,0,1,0,0,0,1],[0,1,0,0,1,0,1,0]];break;case 22:w=[[1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0],[0,0,1,0,0,0,1,0],[0,0,0,1,0,0,0,1],[1,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0],[0,0,1,0,0,0,1,0],[0,0,0,1,0,0,0,1]];break;case 23:w=[[0,1,1,0,0,1,1,0],[1,0,0,1,1,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,1,0,0,1,1,0],[1,0,0,1,1,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]];break;case 24:w=[[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,1],[1,1,1,1,1,1,0,1],[1,0,0,0,0,1,0,1],[1,0,1,1,0,1,0,1],[1,0,1,0,0,1,0,1],[1,0,1,1,1,1,0,1],[1,0,0,0,0,0,0,1]];break;case 25:w=[[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,1,1,1,1,0,1],[1,0,0,0,0,1,0,1],[1,1,1,0,0,1,0,1],[1,0,0,0,1,1,0,1],[1,0,1,1,1,0,0,1],[1,1,1,1,1,1,1,1]];break;case 26:w=[[0,1,1,0,1,1,0,0],[1,0,0,1,0,0,1,0],[1,0,0,1,0,0,1,0],[0,1,1,0,1,1,0,0],[0,0,1,1,0,1,1,0],[0,1,0,0,1,0,0,1],[0,1,0,0,1,0,0,1],[0,0,1,1,0,1,1,0]];break;case 27:w=[[0,1,1,1,1,1,0,0],[1,0,0,0,0,0,1,0],[1,0,0,0,0,0,1,0],[0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0],[0,1,0,0,0,0,0,1],[0,1,0,0,0,0,0,1],[0,0,1,1,1,1,1,0]];break;case 28:w=[[0,1,1,1,1,1,0,0],[1,0,0,0,0,0,1,0],[0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,0],[0,1,0,0,0,0,0,1],[0,0,1,1,1,1,1,0],[0,0,0,0,0,0,0,0]];break;case 29:w=[[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0]];break;case 30:w=[[1,1,0,1,0,1,1,0],[0,1,1,0,1,0,1,1],[1,0,1,1,0,1,0,1],[0,1,0,1,1,0,1,0],[1,0,1,0,1,1,0,1],[0,1,0,1,0,1,1,0],[1,0,1,0,1,0,1,1],[0,1,0,1,0,1,0,1]];break;case 31:w=[[1,0,1,1,0,1,0,1],[0,1,0,1,1,0,1,0],[1,1,0,0,1,1,0,1],[0,1,1,1,0,1,1,0],[1,0,1,0,1,0,1,1],[0,1,0,1,0,1,0,1],[1,0,1,1,0,1,0,0],[0,1,0,1,1,0,1,1]];break;default:w=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}for(let s=0;s<k;s++)for(let c=0;c<k;c++)w[s][c]===1&&S.fillRect(c,s,1,1);j.refresh(),console.log(`🎨 Created HyperCard pattern: ${this.hypercardPatterns[W].name}`)}createMenuOverlay(L,k,W=.3){return this.createOverlay(L,{type:"dither",color:8421504,opacity:W,cutouts:k,depth:49999})}createDitherOverlay(L,k=1,W=.3){return this.createOverlay(L,{type:"dither",color:8421504,opacity:W,depth:k})}createReactiveOverlay(L,k,W={}){const K=this.createOverlay(L,W);return k.on("destroy",()=>{console.log(`🎨 Reactive cleanup: Target object destroyed for overlay ${L}`)}),K}createTutorialOverlay(L,k){return this.createOverlay(L,{type:"dither",color:8421504,opacity:.3,cutouts:k,depth:5e4})}}class kY{scene;container;config;windowShapes;constructor(L,k,W){this.scene=L,this.windowShapes=k,this.config=W,this.container=this.createContainer()}createContainer(){const L=this.scene.add.container(this.config.x,this.config.y);return L.setDepth(2e3),L}getContainer(){return this.container}addInvisibleClickArea(){const L=this.scene.add.rectangle(this.config.width/2,this.config.height/2,this.config.width,this.config.height,0,0);return L.setDepth(10),L.setName("invisibleClickArea"),this.container.add(L),L}createTextBackground(L,k,W,K){const j={x:L,y:k,width:W,height:K};return this.windowShapes.createCollageRect(j,!0,"narrativeBackground")}}class NY extends kY{currentTextIndex=0;textElements=[];textBackgrounds=[];isComplete=!1;invisibleOverlay;autoAdvanceTimer;createBackground(){const L=this.config.width/2,k=this.config.height/2,W=this.windowShapes.createCollageRect({x:-L,y:-k,width:this.config.width,height:this.config.height,fillColor:16777215,shapeType:"window"},!1,"window");W.setAlpha(1),W.setScale(.01),W.setDepth(10),W.setPosition(L,k),this.container.add(W),this.createDitheredOverlay(),this.createChoppyExpansionAnimation(W,()=>{console.log("🎬 CYOA window opening animation complete"),this.startTextSequence()});const K=`cyoa_window_${Date.now()}`;this.windowShapes.registerAnimatedShape(K,W,"window",-L,-k,this.config.width,this.config.height),console.log(`🎬 CYOA main window registered for animation at OFFSET (${-L}, ${-k})`),W.cyoaAnimationId=K,W.on("destroy",()=>{this.windowShapes.unregisterAnimatedShape(K)})}createTextElements(){this.setupClickToAdvance()}startTextSequence(){this.revealNextText()}createChoppyExpansionAnimation(L,k){this.scene.tweens.add({targets:L,scaleX:1,scaleY:1,duration:200,ease:"Back.easeOut",onComplete:()=>{k()}})}createChoppyClosingAnimation(L,k){this.scene.tweens.add({targets:L,scaleX:.01,scaleY:.01,duration:200,ease:"Back.easeIn",onComplete:()=>{k()}})}regenerateCollageShape(L,k,W){L.clear();const K={x:-k/2,y:-W/2,width:k,height:W,fillColor:16777215,strokeColor:0,strokeWidth:2,shapeType:"window"};this.windowShapes.createCollageRectShape(L,K)}regenerateCollageShapeForExpansion(L,k,W){L.clear();const K={x:-k/2,y:-W/2,width:k,height:W,fillColor:16777215,strokeColor:0,strokeWidth:2,shapeType:"window"};this.windowShapes.createCollageRectShapeForExpansion(L,K)}createButtons(){if(!this.config.buttons)return;if(!this.container||!this.container.scene){console.log("⚠️ Cannot create buttons - container is destroyed");return}if(!this.isComplete)return;console.log("🔘 CYOA: Creating buttons with H menu style");const L=80,k=30,W=35,K=15,j=this.container.x,S=this.container.y,w=this.container.containerWidth||this.config.width,s=this.container.containerHeight||this.config.height;Math.min(this.config.buttons.length,3);const c=["Yes","Maybe","No"],y=w-L-K,u=s-k-K;this.config.buttons.forEach((h,l)=>{if(l>=3)return;const n=u-l*(k+W),o=j+y,f=S+n,r=this.windowShapes.createCollageButton(0,0,L,k);r.setPosition(o,f),r.setVisible(!0),r.setDepth(4e4);const d=h.text||c[l]||`Option ${l+1}`,p=this.windowShapes.generateUniqueRotation()*.67,v=this.scene.add.text(o+L/2,f+k/2,d,{fontSize:"14px",color:"#000000",fontFamily:"Arial, sans-serif"});v.setOrigin(.5,.5),v.setDepth(40001),v.setRotation(p);const g=new ht.Geom.Rectangle(0,0,L,k);r.setInteractive(g,ht.Geom.Rectangle.Contains),console.log(`🔘 Button "${d}" created at ABSOLUTE (${o}, ${f}), depth 40000`),r.on("pointerover",()=>console.log(`🖱️ Hovering over ${d} button`)),r.on("pointerout",()=>console.log(`🖱️ Left ${d} button`)),r.buttonIndex=l,v.buttonIndex=l,this.container.storyButtons||(this.container.storyButtons=[]),this.container.storyButtons.push(r,v),r.on("pointerup",()=>{console.log(`🔘 User selected: ${d}`),this.cleanupStoryButtons(),this.hideTextElementsExceptOverlay();const m=this.container.getAt(0);this.createChoppyClosingAnimation(m,()=>{console.log("🎬 CYOA window closing animation complete"),h.callback?(console.log(`🔘 Calling callback for ${d}`),h.callback()):(console.log("🔘 No callback - ending story and destroying container"),this.container&&this.container.scene&&this.container.destroy())})})}),console.log("🔘 CYOA buttons created with H menu styling and interaction")}revealNextText(){if(this.currentTextIndex>=this.config.texts.length){this.completeDialog();return}const L=this.config.texts[this.currentTextIndex],k=this.config.texts.length,W=30,S=(this.config.height-W-120)/k,w=W+this.currentTextIndex*S;try{const s=this.windowShapes.createNarrativeText(20,w,L,this.config.width-40,this.container);s.background&&s.background.updateAnimationCoords&&s.background.updateAnimationCoords(this.config.x,this.config.y),s.textElement&&this.textElements.push(s.textElement),s.background&&this.textBackgrounds.push(s.background)}catch(s){console.warn("Could not create narrative text element:",s);return}this.currentTextIndex++,this.autoAdvanceTimer=this.scene.time.delayedCall(2e3,()=>{!this.isComplete&&this.scene&&this.revealNextText()})}setupClickToAdvance(){this.invisibleOverlay=this.scene.add.rectangle(this.config.width/2,this.config.height/2,this.config.width,this.config.height,0,0),this.invisibleOverlay.setDepth(10),this.invisibleOverlay.setName("invisibleClickArea"),this.container.add(this.invisibleOverlay),this.invisibleOverlay.setInteractive(),this.invisibleOverlay.on("pointerup",()=>{this.isComplete||(this.autoAdvanceTimer&&(this.autoAdvanceTimer.remove(),this.autoAdvanceTimer=void 0),this.revealNextText())})}completeDialog(){this.isComplete=!0,this.autoAdvanceTimer&&(this.autoAdvanceTimer.remove(),this.autoAdvanceTimer=void 0),this.invisibleOverlay&&this.invisibleOverlay.scene&&(this.invisibleOverlay.removeInteractive(),this.invisibleOverlay.setVisible(!1)),this.createButtons()}cleanupStoryButtons(){this.container.storyButtons&&Array.isArray(this.container.storyButtons)&&(console.log("🧹 Cleaning up standalone CYOA buttons before callback"),this.container.storyButtons.forEach(L=>{if(L&&L.destroy&&L.scene){if(L.type==="Graphics"){const k=L.animationId;k&&this.windowShapes&&this.windowShapes.unregisterAnimatedShape&&this.windowShapes.unregisterAnimatedShape(k)}L.destroy()}}),this.container.storyButtons=[])}hideTextElementsExceptOverlay(){console.log("👻 Hiding text elements before closing animation (keeping overlay)"),this.textElements.forEach(L=>{L&&L.setVisible&&L.setVisible(!1)}),this.textBackgrounds.forEach(L=>{L&&L.setVisible&&L.setVisible(!1)}),this.invisibleOverlay&&this.invisibleOverlay.setVisible&&this.invisibleOverlay.setVisible(!1)}hideTextElements(){console.log("👻 Hiding text elements before closing animation"),this.textElements.forEach(k=>{k&&k.setVisible&&k.setVisible(!1)}),this.textBackgrounds.forEach(k=>{k&&k.setVisible&&k.setVisible(!1)}),this.invisibleOverlay&&this.invisibleOverlay.setVisible&&this.invisibleOverlay.setVisible(!1);const L=this.windowShapes&&this.windowShapes.narrativeWindowQueue&&this.windowShapes.narrativeWindowQueue.length>0;this.container.ditheredOverlay&&this.container.ditheredOverlay.setVisible&&!L?(console.log("🎨 Hiding dithered overlay (no more queued windows)"),this.container.ditheredOverlay.setVisible(!1)):L&&console.log("🎨 Keeping dithered overlay (more windows queued)")}createDitheredOverlay(L){const k=L||this.container,W=`cyoa_dither_${k.name||"default"}`,K=this.windowShapes.overlayManager.createDitherOverlay(W,1,.3);try{const j=k.__overlayPattern;if(j&&K&&K.container){const S=K.container.list?.find(w=>w instanceof ht.GameObjects.TileSprite);S&&this.scene.textures.exists(j)&&S.setTexture(j)}}catch{}k.ditheredOverlay=K,console.log("🎨 Created unified CYOA dither overlay:",{overlayId:W,overlayDepth:K.container.depth,containerName:k.name})}}class qc{scene;currentWindowRotations=[];activeShapes=new Map;overlayManager;activeSpeechBubbles=new Map;activeAnimatedShapes=new Map;activeSteeringWheels=new Map;activeSubtitleAnimations=new Map;activeNarrativeWindow=null;narrativeWindowQueue=[];constructor(L){this.scene=L,this.overlayManager=new tv(L)}createChoppyExpansionAnimation(L,k,W,K){this.scene.tweens.add({targets:L,scaleX:1,scaleY:1,duration:200,ease:"Back.easeOut",onComplete:()=>{K()}})}regenerateCollageShapeForAnimation(L,k,W){L.clear();const K={x:-k/2,y:-W/2,width:k,height:W,fillColor:16777215,strokeColor:0,strokeWidth:2,shapeType:"window"};this.createCollageRectShape(L,K)}regenerateCollageShapeForExpansion(L,k,W){L.clear();const K={x:-k/2,y:-W/2,width:k,height:W,fillColor:16777215,strokeColor:0,strokeWidth:2,shapeType:"window"};this.createCollageRectShapeForExpansion(L,K)}createCollageRectShapeForExpansion(L,k){const W=k.strokeWidth||2,K=k.strokeColor||0,j=k.fillColor||13684944,S=k.fillAlpha!==void 0?k.fillAlpha:1,w=8,s=[],c=ht.Math.Between(4,8),y=[],u=[],h=[],l=[];y.push({x:k.x-w+ht.Math.Between(-12,-5),y:k.y-w+ht.Math.Between(-12,-5)}),u.push({x:k.x+k.width+w+ht.Math.Between(5,12),y:k.y-w+ht.Math.Between(-12,-5)}),h.push({x:k.x+k.width+w+ht.Math.Between(5,12),y:k.y+k.height+w+ht.Math.Between(5,12)}),l.push({x:k.x-w+ht.Math.Between(-12,-5),y:k.y+k.height+w+ht.Math.Between(5,12)});for(let n=0;n<c;n++)y.push({x:k.x+k.width*(n+1)/(c+1)+ht.Math.Between(-8,8),y:k.y-w+ht.Math.Between(-15,-3)}),u.push({x:k.x+k.width+w+ht.Math.Between(3,15),y:k.y+k.height*(n+1)/(c+1)+ht.Math.Between(-8,8)}),h.push({x:k.x+k.width*(n+1)/(c+1)+ht.Math.Between(-8,8),y:k.y+k.height+w+ht.Math.Between(3,15)}),l.push({x:k.x-w+ht.Math.Between(-15,-3),y:k.y+k.height*(n+1)/(c+1)+ht.Math.Between(-8,8)});s.push(...y),s.push(...u),s.push(...h),s.push(...l),L.fillStyle(j,S),L.fillPoints(s),k.shapeType!=="window"&&(L.lineStyle(W,K,1),L.strokePoints(s,!0))}createCollageRectShape(L,k){const W=k.strokeWidth||2,K=k.strokeColor||0,j=k.fillColor||13684944,S=k.fillAlpha!==void 0?k.fillAlpha:1,w=8,s=[],c=ht.Math.Between(4,8),y=[],u=[],h=[],l=[];y.push({x:k.x-w+ht.Math.Between(-12,-5),y:k.y-w+ht.Math.Between(-12,-5)}),u.push({x:k.x+k.width+w+ht.Math.Between(5,12),y:k.y-w+ht.Math.Between(-12,-5)}),h.push({x:k.x+k.width+w+ht.Math.Between(5,12),y:k.y+k.height+w+ht.Math.Between(5,12)}),l.push({x:k.x-w+ht.Math.Between(-12,-5),y:k.y+k.height+w+ht.Math.Between(5,12)});for(let n=0;n<c;n++)y.push({x:k.x+k.width*(n+1)/(c+1)+ht.Math.Between(-8,8),y:k.y-w+ht.Math.Between(-15,-3)}),u.push({x:k.x+k.width+w+ht.Math.Between(3,15),y:k.y+k.height*(n+1)/(c+1)+ht.Math.Between(-8,8)}),h.push({x:k.x+k.width*(n+1)/(c+1)+ht.Math.Between(-8,8),y:k.y+k.height+w+ht.Math.Between(3,15)}),l.push({x:k.x-w+ht.Math.Between(-15,-3),y:k.y+k.height*(n+1)/(c+1)+ht.Math.Between(-8,8)});s.push(...y),s.push(...u),s.push(...h),s.push(...l),L.fillStyle(j,S),L.fillPoints(s),k.shapeType!=="window"&&(L.lineStyle(W,K,1),L.strokePoints(s,!0))}createCollageRect(L,k=!1,W="rectangle"){const K=this.scene.add.graphics(),j=L.strokeWidth||2,S=L.strokeColor||0,w=L.fillColor||13684944,s=L.fillAlpha!==void 0?L.fillAlpha:1,c=5,y=[],u=ht.Math.Between(4,8),h=[],l=[],n=[],o=[];h.push({x:L.x-c+ht.Math.Between(-8,-3),y:L.y-c+ht.Math.Between(-8,-3)}),l.push({x:L.x+L.width+c+ht.Math.Between(3,8),y:L.y-c+ht.Math.Between(-8,-3)}),n.push({x:L.x+L.width+c+ht.Math.Between(3,8),y:L.y+L.height+c+ht.Math.Between(3,8)}),o.push({x:L.x-c+ht.Math.Between(-8,-3),y:L.y+L.height+c+ht.Math.Between(3,8)});for(let r=0;r<u;r++)switch(ht.Math.Between(0,3)){case 0:h.push({x:ht.Math.Between(L.x-c+10,L.x+L.width+c-10)+ht.Math.Between(-6,6),y:L.y-c+ht.Math.Between(-10,-3)});break;case 1:l.push({x:L.x+L.width+c+ht.Math.Between(3,10),y:ht.Math.Between(L.y-c+10,L.y+L.height+c-10)+ht.Math.Between(-6,6)});break;case 2:n.push({x:ht.Math.Between(L.x-c+10,L.x+L.width+c-10)+ht.Math.Between(-6,6),y:L.y+L.height+c+ht.Math.Between(3,10)});break;case 3:o.push({x:L.x-c+ht.Math.Between(-10,-3),y:ht.Math.Between(L.y-c+10,L.y+L.height+c-10)+ht.Math.Between(-6,6)});break}h.sort((r,d)=>r.x-d.x),l.sort((r,d)=>r.y-d.y),n.sort((r,d)=>d.x-r.x),o.sort((r,d)=>d.y-r.y),y.push(...h),y.push(...l),y.push(...n),y.push(...o);const f=6;K.fillStyle(2236962,1),K.beginPath(),K.moveTo(y[0].x+f,y[0].y+f);for(let r=1;r<y.length;r++)K.lineTo(y[r].x+f,y[r].y+f);K.closePath(),K.fillPath(),W==="window"?K.lineStyle(0,S,0):K.lineStyle(j,S),K.fillStyle(w,s),K.beginPath(),K.moveTo(y[0].x,y[0].y);for(let r=1;r<y.length;r++)K.lineTo(y[r].x,y[r].y);if(K.closePath(),K.fillPath(),W!=="window"&&K.strokePath(),K.fillStyle(w,s),K.fillRect(L.x,L.y,L.width,L.height),k){const r=`animated_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;let d=L.x,p=L.y;K.updateAnimationCoords=(v,g)=>{d=v+L.x,p=g+L.y,console.log(`🎬 Updated animation coords: ${W} now at world (${d}, ${p})`),this.unregisterAnimatedShape(r),this.registerAnimatedShape(r,K,W,d,p,L.width,L.height)},this.registerAnimatedShape(r,K,W,d,p,L.width,L.height),console.log(`🎬 Registered shape for animation: ${W} at (${d}, ${p})`),K.animationId=r,K.on("destroy",()=>{this.unregisterAnimatedShape(r)})}return K}createNarrativeBackground(L,k=!1){const W=this.scene.add.graphics(),K=0,j=0,S=0,w=1,s=[],c={x:Math.round(L.x+ht.Math.Between(0,5)),y:Math.round(L.y+ht.Math.Between(0,3))},y={x:Math.round(L.x+L.width+ht.Math.Between(-5,0)),y:Math.round(L.y+ht.Math.Between(0,3))},u={x:Math.round(L.x+L.width+ht.Math.Between(-5,0)),y:Math.round(L.y+L.height+ht.Math.Between(-3,0))},h={x:Math.round(L.x+ht.Math.Between(0,5)),y:Math.round(L.y+L.height+ht.Math.Between(-3,0))};s.push(c),s.push(y),s.push(u),s.push(h),W.lineStyle(K,j,1),W.fillStyle(S,w),W.setDefaultStyles({lineStyle:{width:K,color:j,alpha:1},fillStyle:{color:S,alpha:w}}),W.beginPath(),W.moveTo(s[0].x,s[0].y);for(let l=1;l<s.length;l++)W.lineTo(s[l].x,s[l].y);if(W.closePath(),W.fillPath(),W.strokePath(),k){const l=`animated_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;this.registerAnimatedShape(l,W,"narrativeBackground",L.x,L.y,L.width,L.height),W.animationId=l,W.on("destroy",()=>{this.unregisterAnimatedShape(l)})}return W.setDepth(12),W}createCollageSpeechBubble(L,k,W,K){const j=this.scene.add.graphics(),S=2,w=0,s=16777215,c=1,y=[];y.push({x:L+20+ht.Math.Between(-5,5),y:k+K+ht.Math.Between(-3,3)}),y.push({x:L+W*.5+ht.Math.Between(-8,8),y:k+K+ht.Math.Between(2,5)}),y.push({x:L+W-20+ht.Math.Between(-5,5),y:k+K+ht.Math.Between(-3,3)}),y.push({x:L+W+ht.Math.Between(-3,3),y:k+K*.7+ht.Math.Between(-8,8)}),y.push({x:L+W+ht.Math.Between(-5,2),y:k+K*.3+ht.Math.Between(-8,8)}),y.push({x:L+W*.8+ht.Math.Between(-5,5),y:k+ht.Math.Between(-3,3)}),y.push({x:L+W*.7+ht.Math.Between(-8,8),y:k-15+ht.Math.Between(-5,5)}),y.push({x:L+W*.6+ht.Math.Between(-5,5),y:k-25+ht.Math.Between(-7,-3)}),y.push({x:L+W*.65+ht.Math.Between(-8,8),y:k+ht.Math.Between(-2,2)}),y.push({x:L+W*.3+ht.Math.Between(-5,5),y:k+ht.Math.Between(-3,3)}),y.push({x:L+20+ht.Math.Between(-5,5),y:k+ht.Math.Between(-3,3)}),y.push({x:L+ht.Math.Between(-3,3),y:k+K*.3+ht.Math.Between(-8,8)}),y.push({x:L+ht.Math.Between(-5,2),y:k+K*.7+ht.Math.Between(-8,8)}),y.push({x:L+ht.Math.Between(-3,3),y:k+K-20+ht.Math.Between(-5,5)});const u=6;j.fillStyle(2236962,1),j.beginPath(),j.moveTo(y[0].x+u,y[0].y+u);for(let h=1;h<y.length;h++)j.lineTo(y[h].x+u,y[h].y+u);j.closePath(),j.fillPath(),j.lineStyle(S,w),j.fillStyle(s,c),j.beginPath(),j.moveTo(y[0].x,y[0].y);for(let h=1;h<y.length;h++)j.lineTo(y[h].x,y[h].y);return j.closePath(),j.fillPath(),j.strokePath(),j}createRandomTestWindow(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=ht.Math.Between(200,350),K=ht.Math.Between(150,250),j=ht.Math.Between(50,L-W-50),S=ht.Math.Between(50,k-K-50),w=["dialog","confirmDialog","menu","panel","messageBox","speechBubble","storyDialog"];switch(ht.Utils.Array.GetRandom(w)){case"dialog":return this.createDialogComposition(j,S,W,K);case"confirmDialog":return this.createConfirmDialogComposition(j,S,W,K);case"menu":const c=ht.Math.Between(2,5),y=Math.max(K,120+c*45);return this.createMenuComposition(j,S,W,y);case"panel":return this.createPanelComposition(j,S,W,K);case"messageBox":return this.createMessageBoxComposition(j,S,W,K);case"speechBubble":return this.createSpeechBubbleComposition(j,S,W,K);case"storyDialog":const u=Math.max(K,400),h=Math.max(W,300),l=this.createStoryDialogComposition(j,S,h,u);if(!l){console.log("Story dialog queued - creating placeholder");const n=this.scene.add.container(j,S);return n.setSize(h,u),n}return l;default:return this.createDialogComposition(j,S,W,K)}}createCollageButton(L,k,W=80,K=30){return this.createCollageRect({x:L,y:k,width:W,height:K,fillColor:16777215},!0,"button")}createCollagePanel(L,k,W,K){return this.createCollageRect({x:L,y:k,width:W,height:K,fillColor:13684944})}generateUniqueRotation(){for(let j=0;j<20;j++){const S=(Math.random()-.5)*.08;let w=!0;for(const s of this.currentWindowRotations)if(Math.abs(S-s)<.03){w=!1;break}if(w)return this.currentWindowRotations.push(S),S}const K=(Math.random()-.5)*.08;return this.currentWindowRotations.push(K),K}resetRotationTracking(){this.currentWindowRotations=[]}createNarrativeText(L,k,W,K,j,S="left"){const w=this.generateUniqueRotation(),s=(Math.random()-.5)*10,c={fontSize:"20px",color:"#ffffff",align:S,fontFamily:"Arial",padding:{x:8,y:6},wordWrap:{width:K,useAdvancedWrap:!0}},y=this.scene.add.text(L+s,k,W,c);if(S==="right"?y.setOrigin(1,.5):y.setOrigin(0,.5),y.setWordWrapWidth(K),y.setAlign(S),y.setDepth(11),y.setRotation(w),y.setStyle({...c,smoothed:!0}),y.canvas){const o=y.canvas.getContext("2d");o&&(o.textBaseline="top",o.imageSmoothingEnabled=!0)}const u=y.getBounds(),h=8,l={x:u.x-h,y:u.y-h,width:u.width+h*2,height:u.height+h*2,fillColor:0,fillAlpha:1,strokeColor:0,strokeWidth:0},n=this.createNarrativeBackground(l,!0);return n.setRotation(w),j&&(j.add(n),j.add(y)),{textElement:y,background:n}}createMaskedWindow(L,k,W=!1){const K=this.createCollageRect({...L,fillColor:16777215,fillAlpha:1},W,"maskedWindow"),j=this.scene.add.container(L.x+L.width/2,L.y+L.height/2);j.setDepth(K.depth-1);const S=K.createGeometryMask();return j.setMask(S),k&&j.add(k),{window:K,mask:S,contentContainer:j}}addImageToMaskedWindow(L,k,W=0,K=0,j=1){const S=this.scene.add.image(W,K,k);return S.setScale(j),L.add(S),S}addTiledScrollingBackground(L,k,W=0,K=0,j=0,S=0){const w=this.scene.add.tileSprite(W,K,400,300,k);return w.setOrigin(.5,.5),L.add(w),this.scene.events.on("postupdate",()=>{w.tilePositionX+=j,w.tilePositionY+=S}),w}addCameraViewToMaskedWindow(L,k,W=0,K=0,j=1){const S=this.scene.add.renderTexture(W,K,k.width,k.height);return S.setScale(j),L.add(S),this.scene.events.on("postupdate",()=>{S.draw(k)}),S}createCollageDialog(L,k,W,K,j=24){const S=this.createCollageRect({x:L,y:k,width:W,height:K,fillColor:13684944});return S.lineStyle(1,0),S.lineBetween(L,k+j,L+W,k+j),S}regeneratePolygonShape(L,k){L.clear();const W=k.strokeWidth||2,K=k.strokeColor||0,j=k.fillColor||13684944,S=k.fillAlpha!==void 0?k.fillAlpha:1,w=5,s=[],c=ht.Math.Between(2,5),y=[],u=[],h=[],l=[];y.push({x:k.x-w+ht.Math.Between(-5,-2),y:k.y-w+ht.Math.Between(-5,-2)}),u.push({x:k.x+k.width+w+ht.Math.Between(2,5),y:k.y-w+ht.Math.Between(-5,-2)}),h.push({x:k.x+k.width+w+ht.Math.Between(2,5),y:k.y+k.height+w+ht.Math.Between(2,5)}),l.push({x:k.x-w+ht.Math.Between(-5,-2),y:k.y+k.height+w+ht.Math.Between(2,5)});for(let o=0;o<c;o++)switch(ht.Math.Between(0,3)){case 0:y.push({x:ht.Math.Between(k.x-w+10,k.x+k.width+w-10)+ht.Math.Between(-6,6),y:k.y-w+ht.Math.Between(-10,-3)});break;case 1:u.push({x:k.x+k.width+w+ht.Math.Between(3,10),y:ht.Math.Between(k.y-w+10,k.y+k.height+w-10)+ht.Math.Between(-6,6)});break;case 2:h.push({x:ht.Math.Between(k.x-w+10,k.x+k.width+w-10)+ht.Math.Between(-6,6),y:k.y+k.height+w+ht.Math.Between(3,10)});break;case 3:l.push({x:k.x-w+ht.Math.Between(-10,-3),y:ht.Math.Between(k.y-w+10,k.y+k.height+w-10)+ht.Math.Between(-6,6)});break}y.sort((o,f)=>o.x-f.x),u.sort((o,f)=>o.y-f.y),h.sort((o,f)=>f.x-o.x),l.sort((o,f)=>f.y-o.y),s.push(...y),s.push(...u),s.push(...h),s.push(...l);const n=6;L.fillStyle(2236962,1),L.beginPath(),L.moveTo(s[0].x+n,s[0].y+n);for(let o=1;o<s.length;o++)L.lineTo(s[o].x+n,s[o].y+n);L.closePath(),L.fillPath(),L.lineStyle(W,K),L.fillStyle(j,S),L.beginPath(),L.moveTo(s[0].x,s[0].y);for(let o=1;o<s.length;o++)L.lineTo(s[o].x,s[o].y);L.closePath(),L.fillPath(),L.strokePath(),L.fillStyle(j,S),L.fillRect(k.x,k.y,k.width,k.height)}registerShape(L,k,W){this.activeShapes.set(L,{graphics:k,config:W})}unregisterShape(L){this.activeShapes.delete(L)}onFourthBeat(){this.activeShapes.forEach(({graphics:L,config:k})=>{this.regeneratePolygonShape(L,k)})}getActiveShapeCount(){return this.activeShapes.size}registerSpeechBubble(L,k,W,K,j,S){this.activeSpeechBubbles.set(L,{graphics:k,x:W,y:K,width:j,height:S})}unregisterSpeechBubble(L){this.activeSpeechBubbles.delete(L)}onStep(){this.activeSpeechBubbles.forEach(({graphics:L,x:k,y:W,width:K,height:j})=>{this.regenerateSpeechBubbleShape(L,k,W,K,j)})}onHalfStep(L){try{this.activeAnimatedShapes.forEach((k,W)=>{const K=k.graphics;(!K||!K.scene)&&this.activeAnimatedShapes.delete(W)}),this.activeSpeechBubbles.forEach((k,W)=>{const K=k.graphics;(!K||!K.scene)&&this.activeSpeechBubbles.delete(W)}),this.activeSteeringWheels.forEach((k,W)=>{const K=k.graphics;(!K||!K.scene)&&this.activeSteeringWheels.delete(W)})}catch{}this.activeSpeechBubbles.forEach(({graphics:k,x:W,y:K,width:j,height:S})=>{this.regenerateSpeechBubbleShape(k,W,K,j,S)}),this.activeAnimatedShapes.forEach(({graphics:k,shapeType:W,x:K,y:j,width:S,height:w})=>{k&&k.scene&&this.regenerateShapeWithSubtleAnimation(k,W,K,j,S,w)}),this.activeSteeringWheels.forEach(({graphics:k,x:W,y:K,radius:j,currentRotation:S})=>{k&&k.scene&&this.regenerateSteeringWheel(k,W,K,j,S)}),this.activeSubtitleAnimations.forEach(({element:k,animationData:W})=>{k&&k.scene&&W&&this.updateSubtitleAnimation(k,W)}),this.activeAnimatedShapes.size>0?console.log(`🎬 Animating ${this.activeAnimatedShapes.size} shapes on half-step ${L}`):L%10===0&&console.log("🎬 No animated shapes registered")}registerAnimatedShape(L,k,W,K,j,S,w){if(W==="subtitle_pulse"){const s=k,c=s.__subtitleAnimation;c&&(this.activeSubtitleAnimations.set(L,{element:s,animationData:c}),console.log(`🎵 Registered subtitle animation: ${L}`))}else this.activeAnimatedShapes.set(L,{graphics:k,shapeType:W,x:K,y:j,width:S,height:w})}unregisterAnimatedShape(L){this.activeAnimatedShapes.delete(L),this.activeSubtitleAnimations.delete(L)}updateSubtitleAnimation(L,k){const{steps:W,elements:K,position:j}=k;let{currentStep:S,stepDirection:w}=k;const s=W[S];K.forEach(c=>{c&&c.scene&&c.setScale(s)}),K.forEach(c=>{c&&c.scene&&c!==L&&c.setPosition(j.x,j.y)}),S=S===0?1:0,k.currentStep=S}regenerateSpeechBubbleShape(L,k,W,K,j){L.clear();const S=2,w=0,s=16777215,c=1,y=[];y.push({x:k+20+ht.Math.Between(-5,5),y:W+j+ht.Math.Between(-3,3)}),y.push({x:k+K*.5+ht.Math.Between(-8,8),y:W+j+ht.Math.Between(2,5)}),y.push({x:k+K-20+ht.Math.Between(-5,5),y:W+j+ht.Math.Between(-3,3)}),y.push({x:k+K+ht.Math.Between(-3,3),y:W+j*.7+ht.Math.Between(-8,8)}),y.push({x:k+K+ht.Math.Between(-5,2),y:W+j*.3+ht.Math.Between(-8,8)}),y.push({x:k+K*.8+ht.Math.Between(-5,5),y:W+ht.Math.Between(-3,3)}),y.push({x:k+K*.7+ht.Math.Between(-8,8),y:W-15+ht.Math.Between(-5,5)}),y.push({x:k+K*.6+ht.Math.Between(-5,5),y:W-25+ht.Math.Between(-7,-3)}),y.push({x:k+K*.65+ht.Math.Between(-8,8),y:W+ht.Math.Between(-2,2)}),y.push({x:k+K*.3+ht.Math.Between(-5,5),y:W+ht.Math.Between(-3,3)}),y.push({x:k+20+ht.Math.Between(-5,5),y:W+ht.Math.Between(-3,3)}),y.push({x:k+ht.Math.Between(-3,3),y:W+j*.3+ht.Math.Between(-8,8)}),y.push({x:k+ht.Math.Between(-5,2),y:W+j*.7+ht.Math.Between(-8,8)}),y.push({x:k+ht.Math.Between(-3,3),y:W+j-20+ht.Math.Between(-5,5)});const u=6;L.fillStyle(2236962,1),L.beginPath(),L.moveTo(y[0].x+u,y[0].y+u);for(let h=1;h<y.length;h++)L.lineTo(y[h].x+u,y[h].y+u);L.closePath(),L.fillPath(),L.lineStyle(S,w),L.fillStyle(s,c),L.beginPath(),L.moveTo(y[0].x,y[0].y);for(let h=1;h<y.length;h++)L.lineTo(y[h].x,y[h].y);L.closePath(),L.fillPath(),L.strokePath()}regenerateShapeWithSubtleAnimation(L,k,W,K,j,S){L.clear();const w=2,s=0;let c=16777215,y=1,u=!1;if(k==="window"){let d=L.parentContainer;d&&d.isComplete?(c=13421772,y=.85):c=16777215}else k==="button"?c=16777215:k==="narrativeBackground"&&(c=0,u=!0);const h=[],l=ht.Math.Between(2,5),n=[],o=[],f=[],r=[];if(k==="narrativeBackground"){const d={x:Math.round(W+ht.Math.Between(0,5)),y:Math.round(K+ht.Math.Between(0,3))},p={x:Math.round(W+j+ht.Math.Between(-5,0)),y:Math.round(K+ht.Math.Between(0,3))},v={x:Math.round(W+j+ht.Math.Between(-5,0)),y:Math.round(K+S+ht.Math.Between(-3,0))},g={x:Math.round(W+ht.Math.Between(0,5)),y:Math.round(K+S+ht.Math.Between(-3,0))};h.push(d),h.push(p),h.push(v),h.push(g)}else{n.push({x:W-5+ht.Math.Between(-5,-2),y:K-5+ht.Math.Between(-5,-2)}),o.push({x:W+j+5+ht.Math.Between(2,5),y:K-5+ht.Math.Between(-5,-2)}),f.push({x:W+j+5+ht.Math.Between(2,5),y:K+S+5+ht.Math.Between(2,5)}),r.push({x:W-5+ht.Math.Between(-5,-2),y:K+S+5+ht.Math.Between(2,5)});for(let p=0;p<l;p++)switch(ht.Math.Between(0,3)){case 0:n.push({x:ht.Math.Between(W-5+10,W+j+5-10)+ht.Math.Between(-4,4),y:K-5+ht.Math.Between(-8,-2)});break;case 1:o.push({x:W+j+5+ht.Math.Between(2,8),y:ht.Math.Between(K-5+10,K+S+5-10)+ht.Math.Between(-4,4)});break;case 2:f.push({x:ht.Math.Between(W-5+10,W+j+5-10)+ht.Math.Between(-4,4),y:K+S+5+ht.Math.Between(2,8)});break;case 3:r.push({x:W-5+ht.Math.Between(-8,-2),y:ht.Math.Between(K-5+10,K+S+5-10)+ht.Math.Between(-4,4)});break}}if(n.sort((d,p)=>d.x-p.x),o.sort((d,p)=>d.y-p.y),f.sort((d,p)=>p.x-d.x),r.sort((d,p)=>p.y-d.y),h.push(...n),h.push(...o),h.push(...f),h.push(...r),!u){L.fillStyle(2236962,1),L.beginPath(),L.moveTo(h[0].x+6,h[0].y+6);for(let p=1;p<h.length;p++)L.lineTo(h[p].x+6,h[p].y+6);L.closePath(),L.fillPath()}k==="narrativeBackground"?(L.lineStyle(w,s,1),L.setDefaultStyles({lineStyle:{width:w,color:s,alpha:1},fillStyle:{color:c,alpha:y}})):k==="window"?L.lineStyle(0,s,0):L.lineStyle(w,s),L.fillStyle(c,y),L.beginPath(),L.moveTo(h[0].x,h[0].y);for(let d=1;d<h.length;d++)L.lineTo(h[d].x,h[d].y);L.closePath(),L.fillPath(),k!=="window"&&L.strokePath(),k!=="narrativeBackground"&&(L.fillStyle(c,y),L.fillRect(W,K,j,S))}getActiveSpeechBubbleCount(){return this.activeSpeechBubbles.size}createAnimatedSteeringWheel(L,k,W){const K=this.scene.add.graphics(),j=`steeringwheel_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return this.registerSteeringWheel(j,K,L,k,W,0),K.wheelId=j,K.on("destroy",()=>{this.unregisterSteeringWheel(j)}),this.regenerateSteeringWheel(K,L,k,W,0),K}registerSteeringWheel(L,k,W,K,j,S){this.activeSteeringWheels.set(L,{graphics:k,x:W,y:K,radius:j,currentRotation:S})}unregisterSteeringWheel(L){this.activeSteeringWheels.delete(L)}updateSteeringWheelRotation(L,k){for(const[W,K]of this.activeSteeringWheels)if(K.graphics===L){K.currentRotation=k,this.regenerateSteeringWheel(L,K.x,K.y,K.radius,k);break}}regenerateSteeringWheel(L,k,W,K,j){L.clear();const S=3,w=0,s=16777215,c=1,y=this.createSimplifiedSteeringWheelGeometry(k,W,K,j),u=2;L.fillStyle(2236962,.3),this.drawPolygonFromPoints(L,y,u,u),L.lineStyle(S,w),L.fillStyle(s,c),this.drawPolygonFromPoints(L,y,0,0),L.fillPath(),L.strokePath()}createSimplifiedSteeringWheelGeometry(L,k,W,K){return[{angle:-Math.PI/2-.6,r:W*.9},{angle:-Math.PI/2-.3,r:W*.7},{angle:-Math.PI/2,r:W*.65},{angle:-Math.PI/2+.3,r:W*.7},{angle:-Math.PI/2+.6,r:W*.9},{angle:.2,r:W},{angle:.6,r:W*.8},{angle:1,r:W*.6},{angle:Math.PI/2-.2,r:W*.5},{angle:Math.PI/2,r:W*.45},{angle:Math.PI/2+.2,r:W*.5},{angle:Math.PI-1,r:W*.6},{angle:Math.PI-.6,r:W*.8},{angle:Math.PI-.2,r:W},{angle:-Math.PI+.4,r:W*.95}].map(w=>{const s=w.r+ht.Math.Between(-.3,.3),c=w.angle+K;return{x:L+Math.cos(c)*s,y:k+Math.sin(c)*s}})}drawPolygonFromPoints(L,k,W,K){if(k.length!==0){L.beginPath(),L.moveTo(k[0].x+W,k[0].y+K);for(let j=1;j<k.length;j++)L.lineTo(k[j].x+W,k[j].y+K);L.closePath()}}createDialogComposition(L,k,W,K){const j=this.scene.add.container(L,k),S=this.createCollageRect({x:0,y:0,width:W,height:K,fillColor:13684944},!0,"window");j.add(S);const w=this.createCollageButton(W-35,5,25,25);return j.add(w),j}createConfirmDialogComposition(L,k,W,K){const j=this.scene.add.container(L,k),S=this.createCollageRect({x:0,y:0,width:W,height:K,fillColor:13684944},!0,"window");j.add(S);const w=this.createCollageButton(W-35,5,25,25);j.add(w);const s=(W-30)/2,c=K-40,y=this.createCollageButton(10,c,s,30),u=this.createCollageButton(W-s-10,c,s,30);return j.add(y),j.add(u),j}createMenuComposition(L,k,W,K,j=3){const S=this.scene.add.container(L,k),w=this.createCollageRect({x:0,y:0,width:W,height:K,fillColor:13684944},!0,"window");S.add(w);const s=this.createCollageButton(5,5,25,25);S.add(s);const c=35,y=10,u=40,h=W-20;for(let l=0;l<j;l++){const n=u+l*(c+y),o=this.createCollageButton(10,n,h,c);S.add(o)}return S}createPanelComposition(L,k,W,K){const j=this.scene.add.container(L,k),S=this.createCollageRect({x:0,y:0,width:W,height:K,fillColor:13684944},!0,"window");j.add(S);const w=30,s=5,c=this.createCollageButton(s,s,w,w);j.add(c);const y=this.createCollageButton(W-w-s,s,w,w);j.add(y);const u=this.createCollageButton(s,K-w-s,w,w);j.add(u);const h=this.createCollageButton(W-w-s,K-w-s,w,w);return j.add(h),j}createMessageBoxComposition(L,k,W,K){const j=this.scene.add.container(L,k),S=this.createCollageRect({x:0,y:0,width:W,height:K,fillColor:13684944},!0,"window");j.add(S);const w=80,s=this.createCollageButton((W-w)/2,K-40,w,30);return j.add(s),j}createSpeechBubbleComposition(L,k,W,K){const j=this.scene.add.container(L,k),S=K-40,w=this.createCollageSpeechBubble(0,40,W,S);j.add(w);const s=`speechbubble_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return this.registerSpeechBubble(s,w,0,40,W,S),j.speechBubbleId=s,j.on("destroy",()=>{this.unregisterSpeechBubble(s)}),j}createStoryDialogComposition(L,k,W,K,j="default-bg"){if(this.activeNarrativeWindow&&(!this.activeNarrativeWindow.scene||this.activeNarrativeWindow.scene!==this.scene)&&(console.log("🔧 Clearing stale activeNarrativeWindow reference"),this.activeNarrativeWindow=null),this.activeNarrativeWindow&&this.activeNarrativeWindow.scene)return console.log("Narrative window already active, queuing new request..."),console.log("📊 Active window:",this.activeNarrativeWindow),this.narrativeWindowQueue.push({x:L,y:k,width:W,height:K,backgroundImageKey:j}),null;console.log("✅ Creating new narrative window immediately");const S=this.scene.add.container(L,k);S.setDepth(2e3),console.log(`📦 Container created at position: ${L}, ${k} with depth 2000`);const w=W/2,s=K/2,c=this.createCollageRect({x:-w,y:-s,width:W,height:K,fillColor:16777215},!1,"window");console.log(`🏠 Main window created: ${W}x${K} with center offset`),c.setAlpha(1),c.setScale(.01),c.setDepth(10),c.setPosition(w,s),S.add(c),console.log("✅ Main window added to container"),console.log("📦 Main window depth set to 10"),this.createDitheredOverlay(S),this.createChoppyExpansionAnimation(c,W,K,()=>{console.log("🎬 H menu window opening animation complete"),this.revealNextStoryText(S)});const y=`h_menu_window_${Date.now()}`;this.registerAnimatedShape(y,c,"window",-w,-s,W,K),console.log(`🎬 H menu main window registered for animation at OFFSET (${-w}, ${-s})`),c.hMenuAnimationId=y,c.on("destroy",()=>{this.unregisterAnimatedShape(y)}),c.setInteractive(),console.log(`🖱️ Main window made interactive: ${W}x${K}`),c.on("pointerdown",()=>{console.log("🖱️ Main window (polygon) clicked!"),S.isComplete?console.log("⏹️ Dialog already complete, not advancing"):(console.log("➡️ Advancing story dialog"),this.advanceStoryDialog(S))}),c.on("pointerover",()=>console.log("🖱️ Mouse over polygon")),c.on("pointerout",()=>console.log("🖱️ Mouse left polygon"));const u=["The ancient door creaks open...","Strange shadows dance in the flickering light.","Do you dare to enter the mysterious chamber?"];S.storyTexts=u,S.currentTextIndex=0,S.textElements=[],S.textBackgrounds=[],S.containerWidth=W,S.containerHeight=K,S.isComplete=!1,S.on("destroy",()=>{console.log("🗑️ Container destroy event triggered"),S.autoAdvanceTimer&&(S.autoAdvanceTimer.remove(),S.autoAdvanceTimer=null);const l=this.narrativeWindowQueue&&this.narrativeWindowQueue.length>0;S.ditheredOverlay&&S.ditheredOverlay.destroy&&!l?(console.log("🧹 Cleaning up dithered overlay (no more queued windows)"),S.ditheredOverlay.destroy(),S.ditheredOverlay=null):l&&console.log("🎨 Keeping dithered overlay (more windows queued)"),S.storyButtons&&Array.isArray(S.storyButtons)&&(console.log("🧹 Cleaning up standalone story buttons"),S.storyButtons.forEach(n=>{n&&n.destroy&&n.scene&&n.destroy()}),S.storyButtons=null),this.activeNarrativeWindow===S&&(console.log("🔄 Clearing active narrative window and processing queue"),this.activeNarrativeWindow=null,this.processNarrativeQueue())}),this.activeNarrativeWindow=S;const h=this.scene.add.rectangle(W/2,K/2,W,K,0,0);return h.setDepth(10),h.setName("invisibleClickArea"),S.add(h),console.log(`👻 Invisible click area added: ${W}x${K}`),h.setInteractive(),h.on("pointerup",()=>{console.log("🎯 Invisible overlay clicked - checking if should advance story"),S.isComplete?console.log("⏹️ Dialog already complete, buttons should handle interactions"):(console.log("➡️ Advancing story dialog from invisible overlay click"),this.advanceStoryDialog(S))}),S}createCYOADialog(L,k,W,K,j,S){if(this.activeNarrativeWindow&&this.activeNarrativeWindow.scene)return console.log("CYOA dialog queued because another narrative window is active."),null;this.resetRotationTracking();const w={x:L,y:k,width:W,height:K,type:"cyoa",texts:j,buttons:S},s=new NY(this.scene,this,w);s.createBackground(),s.createTextElements();const c=s.getContainer();return c.__overlayPattern="hypercard_waves",this.activeNarrativeWindow=c,c.on("destroy",()=>{console.log("🗑️ CYOA Container destroy event triggered");const y=this.narrativeWindowQueue&&this.narrativeWindowQueue.length>0;c.ditheredOverlay&&c.ditheredOverlay.destroy&&!y?(console.log("🧹 Cleaning up dithered overlay (no more queued windows)"),c.ditheredOverlay.destroy(),c.ditheredOverlay=null):y&&console.log("🎨 Keeping dithered overlay (more windows queued)"),c.storyButtons&&Array.isArray(c.storyButtons)&&(console.log("🧹 Cleaning up standalone CYOA buttons"),c.storyButtons.forEach(u=>{if(u&&u.destroy&&u.scene){if(u.type==="Graphics"){const h=u.animationId;h&&this.unregisterAnimatedShape&&this.unregisterAnimatedShape(h)}u.destroy()}}),c.storyButtons=[]),this.activeNarrativeWindow===c&&(this.activeNarrativeWindow=null,this.processNarrativeQueue())}),console.log("✅ CYOA dialog created with H menu styling"),c}revealNextStoryText(L){if(!L||!L.scene)return;if(L.currentTextIndex>=L.storyTexts.length){this.showStoryButtons(L);return}const k=L.storyTexts[L.currentTextIndex],W=L.storyTexts.length,K=L.containerWidth,j=L.containerHeight,S=30,s=j-S-120;let c;const y=8,u=K-20,h=K-40;if(W===1)c=S+s/2;else if(W===2){const l=S+s/2;c=L.currentTextIndex===0?l-40:l+40}else{const l=s/W;c=S+L.currentTextIndex*l}try{const l=W===2&&L.currentTextIndex===1?u-h:y,n=this.createNarrativeText(l,c,k,h,L);L.textElements.push(n.textElement),L.textBackgrounds.push(n.background)}catch(l){console.warn("Could not create narrative text element:",l);return}L.currentTextIndex++,L.autoAdvanceTimer=this.scene.time.delayedCall(2e3,()=>{this.advanceStoryDialog(L)})}advanceStoryDialog(L){!L||!L.scene||L.isComplete||(L.autoAdvanceTimer&&(L.autoAdvanceTimer.remove(),L.autoAdvanceTimer=null),L.currentTextIndex<L.storyTexts.length?this.revealNextStoryText(L):this.showStoryButtons(L))}showStoryButtons(L){if(console.log("🔘 showStoryButtons called - creating buttons"),!L||!L.scene){console.log("❌ Container check failed in showStoryButtons");return}L.isComplete=!0,console.log("✅ Container marked as complete, creating buttons");const k=L.getByName("debugOverlay");k?(k.setVisible(!1),k.setInteractive(!1),console.log("🔍 Debug overlay hidden AND disabled - buttons should be fully interactive now")):console.log("❌ Could not find debug overlay to hide");const W=L.getFirst();if(W){W.clear();const M={x:0,y:0,width:L.containerWidth,height:L.containerHeight,fillColor:13421772,fillAlpha:.85},b=W,R=2,A=0,D=5,G=[],F=ht.Math.Between(2,5),B=[],N=[],z=[],$=[];B.push({x:M.x-D+ht.Math.Between(-5,-2),y:M.y-D+ht.Math.Between(-5,-2)}),N.push({x:M.x+M.width+D+ht.Math.Between(2,5),y:M.y-D+ht.Math.Between(-5,-2)}),z.push({x:M.x+M.width+D+ht.Math.Between(2,5),y:M.y+M.height+D+ht.Math.Between(2,5)}),$.push({x:M.x-D+ht.Math.Between(-5,-2),y:M.y+M.height+D+ht.Math.Between(2,5)});for(let Z=0;Z<F;Z++)switch(ht.Math.Between(0,3)){case 0:B.push({x:ht.Math.Between(M.x-D+10,M.x+M.width+D-10)+ht.Math.Between(-4,4),y:M.y-D+ht.Math.Between(-8,-2)});break;case 1:N.push({x:M.x+M.width+D+ht.Math.Between(2,8),y:ht.Math.Between(M.y-D+10,M.y+M.height+D-10)+ht.Math.Between(-4,4)});break;case 2:z.push({x:ht.Math.Between(M.x-D+10,M.x+M.width+D-10)+ht.Math.Between(-4,4),y:M.y+M.height+D+ht.Math.Between(2,8)});break;case 3:$.push({x:M.x-D+ht.Math.Between(-8,-2),y:ht.Math.Between(M.y-D+10,M.y+M.height+D-10)+ht.Math.Between(-4,4)});break}B.sort((Z,tt)=>Z.x-tt.x),N.sort((Z,tt)=>Z.y-tt.y),z.sort((Z,tt)=>tt.x-Z.x),$.sort((Z,tt)=>tt.y-Z.y),G.push(...B),G.push(...N),G.push(...z),G.push(...$);const Q=6;b.fillStyle(2236962,1),b.beginPath(),b.moveTo(G[0].x+Q,G[0].y+Q);for(let Z=1;Z<G.length;Z++)b.lineTo(G[Z].x+Q,G[Z].y+Q);b.closePath(),b.fillPath(),b.lineStyle(R,A),b.fillStyle(M.fillColor,M.fillAlpha),b.beginPath(),b.moveTo(G[0].x,G[0].y);for(let Z=1;Z<G.length;Z++)b.lineTo(G[Z].x,G[Z].y);b.closePath(),b.fillPath(),b.strokePath(),b.fillStyle(M.fillColor,M.fillAlpha),b.fillRect(M.x,M.y,M.width,M.height)}const K=L.containerWidth,j=L.containerHeight,S=L.x,w=L.y,s=80,c=30,y=35,u=15,h=S+K-s-u,l=w+j-c-u,n=l-c-y,o=n-c-y,f=this.createCollageButton(0,0,s,c),r=this.createCollageButton(0,0,s,c),d=this.createCollageButton(0,0,s,c);f.setPosition(h,o),r.setPosition(h,n),d.setPosition(h,l),f.setVisible(!0),r.setVisible(!0),d.setVisible(!0),f.setDepth(5e3),r.setDepth(5e3),d.setDepth(5e3),console.log(`🎨 Scene name: ${this.scene.scene.key}`),console.log(`🎨 Yes button visible: ${f.visible}, depth: ${f.depth}`),console.log(`🔘 Buttons created at absolute positions: Yes(${h},${o}), Maybe(${h},${n}), No(${h},${l})`);const p=this.scene.add.text(h+s/2,o+c/2,"Yes",{fontSize:"14px",color:"#000000"});p.setOrigin(.5,.5),p.setDepth(5001);const v=this.scene.add.text(h+s/2,n+c/2,"Maybe",{fontSize:"14px",color:"#000000"});v.setOrigin(.5,.5),v.setDepth(5001);const g=this.scene.add.text(h+s/2,l+c/2,"No",{fontSize:"14px",color:"#000000"});g.setOrigin(.5,.5),g.setDepth(5001),L.storyButtons=[f,r,d,p,v,g],console.log("🔘 Buttons created at absolute world positions (not in container)");const m=new ht.Geom.Rectangle(0,0,s,c),T=new ht.Geom.Rectangle(0,0,s,c),P=new ht.Geom.Rectangle(0,0,s,c);f.setInteractive(m,ht.Geom.Rectangle.Contains),r.setInteractive(T,ht.Geom.Rectangle.Contains),d.setInteractive(P,ht.Geom.Rectangle.Contains),console.log("🖱️ Buttons made interactive with explicit hit areas and depths set to 200+"),f.on("pointerover",()=>console.log("🖱️ Hovering over Yes button")),f.on("pointerout",()=>console.log("🖱️ Left Yes button")),r.on("pointerover",()=>console.log("🖱️ Hovering over Maybe button")),r.on("pointerout",()=>console.log("🖱️ Left Maybe button")),d.on("pointerover",()=>console.log("🖱️ Hovering over No button")),d.on("pointerout",()=>console.log("🖱️ Left No button")),f.on("pointerdown",()=>{console.log("User selected: Yes - destroying container..."),L.destroy()}),r.on("pointerdown",()=>{console.log("User selected: Maybe - destroying container..."),L.destroy()}),d.on("pointerdown",()=>{console.log("User selected: No - destroying container..."),L.destroy()})}processNarrativeQueue(){if(console.log(`📋 Processing queue - ${this.narrativeWindowQueue.length} items waiting`),this.narrativeWindowQueue.length>0){const L=this.narrativeWindowQueue.shift();L&&(console.log("🎭 Processing queued narrative window..."),this.scene.time.delayedCall(100,()=>{this.createStoryDialogComposition(L.x,L.y,L.width,L.height,L.backgroundImageKey)}))}else console.log("📋 Queue is empty - no more narrative windows to process")}closeActiveNarrativeWindow(){this.activeNarrativeWindow&&this.activeNarrativeWindow.scene&&this.activeNarrativeWindow.destroy()}getQueuedNarrativeCount(){return this.narrativeWindowQueue.length}hasActiveNarrativeWindow(){return this.activeNarrativeWindow!==null&&this.activeNarrativeWindow.scene!==null}waitForActiveWindowClear(L){if(!this.hasActiveNarrativeWindow()){L();return}const k=()=>{this.hasActiveNarrativeWindow()?this.scene.time.delayedCall(50,k):(console.log("📋 Active narrative window cleared - executing callback"),L())};this.scene.time.delayedCall(50,k)}clearNarrativeQueue(){this.narrativeWindowQueue.length=0}forceResetNarrativeSystem(){console.log("🔧 Force resetting narrative system..."),this.activeNarrativeWindow&&(console.log("🗑️ Destroying active narrative window"),this.activeNarrativeWindow.destroy()),this.activeNarrativeWindow=null,this.narrativeWindowQueue.length=0,console.log("✅ Narrative system reset complete")}createDitheredOverlay(L){const k=`dither_${L.name||"default"}`,W=this.overlayManager.createDitherOverlay(k,1,.3);try{const K=L.__overlayPattern;if(K&&W&&W.container){const j=W.container.list?.find(S=>S instanceof ht.GameObjects.TileSprite);j&&this.scene.textures.exists(K)&&j.setTexture(K)}}catch{}L.ditheredOverlay=W,console.log("🎨 Created unified dither overlay:",{overlayId:k,overlayDepth:W.container.depth,containerName:L.name})}}class jr{static instance;SAVE_KEY="game-fast-save";SAVE_VERSION="1.0.0";constructor(){}static getInstance(){return jr.instance||(jr.instance=new jr),jr.instance}save(L){try{const k={steps:L,timestamp:new Date().toISOString(),version:this.SAVE_VERSION},W=JSON.stringify(k,null,2);return localStorage.setItem(this.SAVE_KEY,W),console.log("Game saved successfully:",k),!0}catch(k){return console.error("Failed to save game:",k),!1}}load(){try{const L=localStorage.getItem(this.SAVE_KEY);if(!L)return console.log("No save data found"),null;const k=JSON.parse(L);return k.version!==this.SAVE_VERSION&&console.warn("Save version mismatch. Expected:",this.SAVE_VERSION,"Found:",k.version),console.log("Game loaded successfully:",k),k}catch(L){return console.error("Failed to load game:",L),null}}clearSave(){try{return localStorage.removeItem(this.SAVE_KEY),console.log("Save data cleared successfully"),!0}catch(L){return console.error("Failed to clear save data:",L),!1}}hasSave(){return localStorage.getItem(this.SAVE_KEY)!==null}getSaveInfo(){const L=this.load();return L?{exists:!0,timestamp:L.timestamp,steps:L.steps}:{exists:!1}}}const jc={ui:{rearviewMirror:{position:{x:.55,y:-.1},size:{width:.92,height:.4}},steeringWheel:{position:{x:.25,y:.8},scale:1},magneticTarget:{position:{x:213,y:550},radius:25}},virtualPets:{positions:[{x:.15,y:.93,scale:.8},{x:.35,y:.88,scale:.8},{x:.55,y:.98,scale:.8},{x:.75,y:.9,scale:.8},{x:.95,y:.85,scale:.8}]},itemSizes:{small:{width:20,height:20,scale:1,description:"Keys, small items"},medium:{width:30,height:30,scale:1.5,description:"Food, medium items"},large:{width:40,height:40,scale:2,description:"Large items"}},physics:{gravity:{baseY:.5,maxLateralGx:.8},magnetic:{attractionWindowMs:900}}};class VY{config=jc;loaded=!1;async loadConfig(){try{const L=await fetch("/GameElements.json");L.ok?(this.config=await L.json(),this.loaded=!0,console.log("✅ Game elements config loaded successfully")):(console.warn("⚠️ Failed to load GameElements.json, using defaults"),this.config=jc)}catch(L){console.warn("⚠️ Error loading GameElements.json:",L),this.config=jc}}getConfig(){return this.config}isLoaded(){return this.loaded}getRearviewMirror(){return this.config.ui.rearviewMirror}getSteeringWheel(){return this.config.ui.steeringWheel}getMagneticTarget(){return this.config.ui.magneticTarget}getVirtualPetPositions(){return this.config.virtualPets.positions}getItemSize(L){return this.config.itemSizes[L]}getPhysics(){return this.config.physics}toPixelPosition(L,k,W){return{x:L.x*k,y:L.y*W}}toPixelSize(L,k,W){return{width:L.width*k,height:L.height*W}}}const ri=new VY,Dt={white:16777215,lightGray:13421772,mediumLightGray:10066329,mediumGray:6710886,mediumDarkGray:4473924,darkGray:3355443,darkerGray:2236962,black:0},zY={carMaxSpeed:5,minCrankForSteering:.4,minSpeedForSteering:.01,steeringSensitivity:1,maxTurn:1.5,turnResetMultiplier:.1,centrifugal:2,baseTurnGain:.3,maxTurnGain:2,turnGainPower:.5,turnDecayRate:.01,centerReturnForce:0,lateralFriction:.99,skyColor:Dt.black,roadColor:Dt.mediumGray,boundaryPadding:50,roadDepth:-1e3,lineWidth:4,lineHeight:30,lineGap:40,centerLineYOffset:50,lineDepth:-1e3,obstacleMinDelayMs:9e3,obstacleMaxDelayMs:18e3,potholeProbability:.5,potholeWidth:.3,potholeHeight:.08,potholeMinPos:.45,potholeMaxPos:.55,potholeSpawnY:.2,potholeColor:Dt.black,potholeSpeed:1.2,exitWidth:30,exitHeight:60,exitPosition:.9,exitSpawnY:.1,exitColor:Dt.white,exitSpeed:1,radarEnabled:!1,radarX:0,radarY:10,radarWidth:33,radarHeight:163,radarAlpha:.75,roadBendStrength:200,lensStrength:1.5,useLowRes:!1,lowResScale:.5},YY={overlayColor:Dt.black,overlayAlpha:.2,overlayDepth:9e4,maskColor:Dt.white,keysHoleRadius:30,targetHoleMultiplier:1.5,magneticTargetX:200,magneticTargetY:550,magneticTargetRadius:25},Rt={gameLayerX:.02,gameLayerY:.02,moneyX:.02,moneyY:.98,healthX:.02,healthY:.12,countdownX:.5,countdownY:.2,progressX:.02,progressY:.92,gameLayerFontSize:"14px",moneyHealthFontSize:"18px",countdownFontSize:"36px",progressFontSize:"18px",managerValuesFontSize:"12px",gameLayerDepth:1e3,managerValuesPadding:{x:10,y:5},gameLayerColor:Dt.white,moneyColor:Dt.lightGray,healthColor:Dt.mediumGray,countdownColor:Dt.white,progressColor:Dt.white,gameLayerBackgroundColor:Dt.black,managerValuesBackgroundColor:Dt.black,rearviewBackgroundColor:Dt.darkerGray,rearviewBackgroundAlpha:.9,rearviewStrokeColor:Dt.white,managerValuesSkillColor:Dt.lightGray,managerValuesDifficultyColor:Dt.mediumGray,managerValuesMomentumColor:Dt.mediumLightGray,managerValuesPlotAColor:Dt.mediumGray,managerValuesPlotBColor:Dt.mediumLightGray,managerValuesPlotCColor:Dt.mediumDarkGray,managerValuesStopsColor:Dt.white,managerValuesOpacity:.8,gameLayerText:"(game)",frontseatText:"look up",backseatText:"look down",buttonPadding:10,buttonCornerRadius:5,buttonBackgroundColor:Dt.darkGray,buttonHoverColor:Dt.mediumDarkGray,frontseatFontSize:"18px",backseatFontSize:"18px",frontseatColor:Dt.white,backseatColor:Dt.white,speedCrankOffsetX:120,speedCrankOffsetY:-20,speedCrankWidth:40,speedCrankHeight:150,speedCrankTrackColor:Dt.darkGray,speedCrankTrackAlpha:.8,speedCrankTrackStrokeColor:Dt.white,speedCrankTrackStrokeWidth:2,speedCrankTrackCornerRadius:5,speedCrankHandleColor:Dt.mediumLightGray,speedCrankHandleAlpha:.9,speedCrankHandleStrokeColor:Dt.white,speedCrankHandleStrokeWidth:1,speedCrankHandleCornerRadius:3,speedCrankHandleMargin:4,speedCrankHandleHeight:20,speedCrankIndicatorColor:Dt.white,speedCrankIndicatorStrokeColor:Dt.black,speedCrankIndicatorRadius:3,speedCrankTextOffsetX:10,speedCrankTextFontSize:"16px",speedCrankTextColor:Dt.white,speedCrankSnapPositions:[0,.4,.7,1],speedCrankDepthTrack:1e3,speedCrankDepthHandle:1001,speedCrankDepthIndicator:1002,speedCrankDepthText:1003,speedCrankDepthArea:1004},PC={gameLayerText:Rt.gameLayerText,gameLayerPositionX:Rt.gameLayerX,gameLayerPositionY:Rt.gameLayerY,gameLayerFontSize:Rt.gameLayerFontSize,gameLayerColor:Rt.gameLayerColor,gameLayerBackgroundColor:Rt.gameLayerBackgroundColor,gameLayerDepth:Rt.gameLayerDepth,textDisplayDelayMs:100,countdownPositionX:Rt.countdownX,countdownPositionY:Rt.countdownY,countdownFontSize:Rt.countdownFontSize,countdownColor:Rt.countdownColor,moneyPositionX:Rt.moneyX,moneyPositionY:Rt.moneyY,healthPositionX:Rt.healthX,healthPositionY:Rt.healthY,moneyHealthFontSize:Rt.moneyHealthFontSize,moneyColor:Rt.moneyColor,healthColor:Rt.healthColor,progressPositionX:Rt.progressX,progressPositionY:Rt.progressY,progressFontSize:Rt.progressFontSize,progressColor:Rt.progressColor,managerValuesFontSize:Rt.managerValuesFontSize,managerValuesBackgroundColor:Rt.managerValuesBackgroundColor,managerValuesPadding:Rt.managerValuesPadding,managerValuesOpacity:Rt.managerValuesOpacity,managerValuesSkillColor:Rt.managerValuesSkillColor,managerValuesDifficultyColor:Rt.managerValuesDifficultyColor,managerValuesMomentumColor:Rt.managerValuesMomentumColor,managerValuesPlotAColor:Rt.managerValuesPlotAColor,managerValuesPlotBColor:Rt.managerValuesPlotBColor,managerValuesPlotCColor:Rt.managerValuesPlotCColor,managerValuesStopsColor:Rt.managerValuesStopsColor,frontseatText:Rt.frontseatText,frontseatPositionX:0,frontseatPositionY:0,frontseatFontSize:Rt.frontseatFontSize,frontseatColor:Rt.frontseatColor,backseatText:Rt.backseatText,backseatPositionX:0,backseatPositionY:0,backseatFontSize:Rt.backseatFontSize,backseatColor:Rt.backseatColor,buttonPadding:Rt.buttonPadding,buttonCornerRadius:Rt.buttonCornerRadius,buttonBackgroundColor:Rt.buttonBackgroundColor,buttonHoverColor:Rt.buttonHoverColor,speedCrankOffsetX:Rt.speedCrankOffsetX,speedCrankOffsetY:Rt.speedCrankOffsetY,speedCrankWidth:Rt.speedCrankWidth,speedCrankHeight:Rt.speedCrankHeight,speedCrankTrackColor:Rt.speedCrankTrackColor,speedCrankTrackAlpha:Rt.speedCrankTrackAlpha,speedCrankTrackStrokeColor:Rt.speedCrankTrackStrokeColor,speedCrankTrackStrokeWidth:Rt.speedCrankTrackStrokeWidth,speedCrankTrackCornerRadius:Rt.speedCrankTrackCornerRadius,speedCrankHandleColor:Rt.speedCrankHandleColor,speedCrankHandleAlpha:Rt.speedCrankHandleAlpha,speedCrankHandleStrokeColor:Rt.speedCrankHandleStrokeColor,speedCrankHandleStrokeWidth:Rt.speedCrankHandleStrokeWidth,speedCrankHandleCornerRadius:Rt.speedCrankHandleCornerRadius,speedCrankHandleMargin:Rt.speedCrankHandleMargin,speedCrankHandleHeight:Rt.speedCrankHandleHeight,speedCrankIndicatorColor:Rt.speedCrankIndicatorColor,speedCrankIndicatorStrokeColor:Rt.speedCrankIndicatorStrokeColor,speedCrankIndicatorRadius:Rt.speedCrankIndicatorRadius,speedCrankTextOffsetX:Rt.speedCrankTextOffsetX,speedCrankTextFontSize:Rt.speedCrankTextFontSize,speedCrankTextColor:Rt.speedCrankTextColor,speedCrankSnapPositions:Rt.speedCrankSnapPositions,speedCrankDepthTrack:Rt.speedCrankDepthTrack,speedCrankDepthHandle:Rt.speedCrankDepthHandle,speedCrankDepthIndicator:Rt.speedCrankDepthIndicator,speedCrankDepthText:Rt.speedCrankDepthText,speedCrankDepthArea:Rt.speedCrankDepthArea},he={sliderWidth:200,sliderHeight:20,sliderYOffset:50,sliderTrackColor:3355443,sliderCornerRadius:10,sliderHandleWidth:20,sliderHandleHeight:20,sliderHandleColor:6710886,sliderHandleCornerRadius:10,sliderTrackDepth:1e3,sliderHandleDepth:1001,labelsDepth:1002,meterDepth:1003,startLabelOffset:30,turnKeyLabelOffset:-30,labelsFontSize:"16px",labelsColor:"#ffffff",meterWidth:150,meterHeight:10,meterYOffset:80,meterBackgroundColor:2236962,meterCornerRadius:5,meterFillColor:65280,meterTextOffset:20,momentumDecay:.95,maxVelocity:15,gravity:.3,sensitivity:.5,startThreshold:.9,startIncrement:.5},_c={petColor:16764006,petDecayRates:[{food:.3,bathroom:.53,boredom:.23},{food:.48,bathroom:.38,boredom:.59},{food:.2,bathroom:.43,boredom:.35},{food:.62,bathroom:.16,boredom:.47},{food:.4,bathroom:.57,boredom:.29}]},WY={initialGameTime:8,initialMoney:100,initialHealth:100,initialPlayerSkill:50,initialDifficulty:50,initialMomentum:50,initialPlotA:0,initialPlotB:0,initialPlotC:0,initialKnobValue:0,initialPosition:0,initialRegion:"midwest",initialMonthlyListeners:2e3,initialBuzz:0,minBuzz:-3,maxBuzz:3,minMonthlyListeners:0,maxMonthlyListeners:1e5,minMoney:0,maxMoney:9999,minHealth:0,maxHealth:100,minSkill:0,maxSkill:100,minDifficulty:0,maxDifficulty:100,minMomentum:0,maxMomentum:100,minPlot:0,maxPlot:100,minKnobValue:0,maxKnobValue:100},$s={gravityX:0,gravityY:.5,magneticStrength:.005,magneticRadius:50,magneticTargetColor:Dt.mediumGray,magneticTargetInactiveColor:Dt.mediumDarkGray,magneticSnapThreshold:15,magneticConstraintStiffness:1,magneticConstraintDamping:.1},Po={regions:{west:{name:"West",displayName:"West",color:Dt.mediumGray,description:"The vast western frontier"},southwest:{name:"Southwest",displayName:"Southwest",color:Dt.mediumLightGray,description:"Desert landscapes and canyons"},south:{name:"South",displayName:"South",color:Dt.lightGray,description:"Southern hospitality and warmth"},midwest:{name:"Midwest",displayName:"Midwest",color:Dt.mediumDarkGray,description:"Heartland of America"},northeast:{name:"Northeast",displayName:"Northeast",color:Dt.darkGray,description:"Historic cities and coastlines"}},connections:{west:["southwest","south","midwest"],southwest:["west","south"],south:["midwest","west","southwest"],midwest:["west","south","northeast"],northeast:["midwest","south"]},showsPerRegion:3,startingRegion:"midwest",regionChoiceUI:{leftRegionOffset:-150,rightRegionOffset:150,regionChoiceY:.6,regionChoiceDepth:5e4,regionChoiceFontSize:"24px",regionChoiceColor:Dt.white,regionChoiceBackgroundColor:Dt.black,regionChoiceBackgroundAlpha:.8,regionChoicePadding:20,regionChoiceCornerRadius:10,regionChoiceStrokeColor:Dt.white,regionChoiceStrokeWidth:2}};class XY{textDisplayCallbacks=[];menuAutoCompleteStepCount=0;menuAutoCompleteTimer=null;menuCountdownText=null;menuCountdownTimer=null;currentMenuAutoCompleteType=null;SLIDER_WIDTH=he.sliderWidth;SLIDER_HEIGHT=he.sliderHeight;SLIDER_Y_OFFSET=he.sliderYOffset;SLIDER_TRACK_COLOR=he.sliderTrackColor;SLIDER_CORNER_RADIUS=he.sliderCornerRadius;SLIDER_HANDLE_WIDTH=he.sliderHandleWidth;SLIDER_HANDLE_HEIGHT=he.sliderHandleHeight;SLIDER_HANDLE_COLOR=he.sliderHandleColor;SLIDER_HANDLE_CORNER_RADIUS=he.sliderHandleCornerRadius;SLIDER_TRACK_DEPTH=he.sliderTrackDepth;SLIDER_HANDLE_DEPTH=he.sliderHandleDepth;LABELS_DEPTH=he.labelsDepth;METER_DEPTH=he.meterDepth;START_LABEL_OFFSET=he.startLabelOffset;TURN_KEY_LABEL_OFFSET=he.turnKeyLabelOffset;LABELS_FONT_SIZE=he.labelsFontSize;LABELS_COLOR=he.labelsColor;METER_WIDTH=he.meterWidth;METER_HEIGHT=he.meterHeight;METER_Y_OFFSET=he.meterYOffset;METER_BACKGROUND_COLOR=he.meterBackgroundColor;METER_CORNER_RADIUS=he.meterCornerRadius;METER_FILL_COLOR=he.meterFillColor;METER_TEXT_OFFSET=he.meterTextOffset;MOMENTUM_DECAY=he.momentumDecay;MAX_VELOCITY=he.maxVelocity;GRAVITY=he.gravity;SENSITIVITY=he.sensitivity;START_THRESHOLD=he.startThreshold;START_INCREMENT=he.startIncrement;MENU_PRIORITIES={TURN_KEY:110,START:100,TUTORIAL_INTERRUPT:95,PAUSE:90,REGION_CHOICE:80,GAME_OVER:75,STORY:74,EXIT:73,CYOA:70,DESTINATION:65,OBSTACLE:60,POTHOLE:55,SHOP:73,VIRTUAL_PET:45,MORAL_DECISION:45,PET_STORY:40,TUTORIAL:20};MENU_CATEGORIES={PERSISTENT:["START","PAUSE","GAME_OVER","TURN_KEY"],TEMPORARY:["OBSTACLE","EXIT","SHOP","SAVE"],ONE_TIME:["CYOA","STORY","MORAL_DECISION","REGION_CHOICE"],OVERLAY:["TUTORIAL","PET_STORY"]};scene;saveManager;currentDialog=null;menuStack=[];currentDisplayedMenuType=null;queuedMenus=[];storySequenceInProgress=!1;isExitOrShopOpen(){return this.currentDisplayedMenuType==="EXIT"||this.currentDisplayedMenuType==="SHOP"?!0:this.menuStack.some(k=>k.type==="EXIT"||k.type==="SHOP")}enqueueMenu(L,k){if(this.queuedMenus.some(K=>K.type===L)){console.log(`⏳ Menu '${L}' already queued, skipping duplicate`);return}console.log(`⏳ Queueing menu '${L}' until EXIT/SHOP closes`),this.queuedMenus.push({type:L,payload:k})}processQueuedMenus(){if(this.isExitOrShopOpen())return;if(this.currentDialog){this.scene.time.delayedCall(60,()=>this.processQueuedMenus());return}if(this.storySequenceInProgress){console.log("⏳ Story sequence in progress - waiting for completion before processing queue"),console.log("⏳ Current displayed menu type:",this.currentDisplayedMenuType),this.scene.time.delayedCall(100,()=>this.processQueuedMenus());return}if(this.queuedMenus.length===0)return;const L=this.queuedMenus.shift();L&&this.scene.time.delayedCall(50,()=>{try{switch(L.type){case"CYOA":this.showCyoaMenu(L.payload);break;case"EXIT":L.payload?L.payload.shopCount!==void 0?this.showExitMenu(L.payload.shopCount,L.payload.exitNumber):this.showExitStoresCatalog(L.payload.exitNumber):this.showExitMenu();break;case"TUTORIAL_INTERRUPT":this.showTutorialInterrupt();break;case"STORY":this.showStoryMenu(L.payload);break;case"NOVEL_STORY":this.showNovelStory(L.payload);break;case"STORY_OVERLAY":L.payload&&typeof L.payload.title=="string"&&typeof L.payload.content=="string"&&this.showStoryOverlay(L.payload.title,L.payload.content);break;case"DESTINATION":this.showDestinationMenu(L.payload?.includeFinalShowStep);break;case"REGION_CHOICE":this.showRegionChoiceMenu(L.payload);break;case"OBSTACLE":this.showObstacleMenu(L.payload.obstacleType,L.payload.damage,L.payload.exitNumber);break;case"VIRTUAL_PET":this.showVirtualPetMenu(L.payload?.petSprite);break;case"MORAL_DECISION":this.showMoralDecisionMenu(L.payload);break;default:console.log("⚠️ Unknown queued menu type:",L.type)}}catch(k){console.warn("Failed to process queued menu",L,k)}this.scene.time.delayedCall(50,()=>this.processQueuedMenus())})}userDismissedMenuType=null;overlayManager;windowShapes;constructor(L){this.scene=L,this.saveManager=jr.getInstance(),this.overlayManager=new tv(L),this.scene.events.on("step",this.onGlobalStep,this),this.scene.events.on("showCyoaMenu",this.showCyoaMenu,this),this.scene.events.on("step",this.onStepEvent,this);try{const k=this.scene.scene.get("GameScene"),W=k&&k.windowShapes;this.windowShapes=W||new qc(this.scene)}catch{this.windowShapes=new qc(this.scene)}this.scene.events.on("halfStep",k=>{try{this.windowShapes?.onHalfStep?.(k)}catch{}try{this.tickPotholeDialogsHalfStep()}catch{}}),this.scene.events.on("uiHalfStep",k=>{try{const W=this.scene.scene.get("AppScene");if(!!(W&&W.gameStarted))return;this.windowShapes?.onHalfStep?.(k)}catch{}})}startMenuAutoComplete(L){if(L==="START"||L==="CYOA"||L==="DESTINATION"||L==="EXIT"||L==="SHOP")return;this.currentMenuAutoCompleteType=L,this.menuAutoCompleteStepCount=0;const k=this.scene.scene.get("AppScene");k&&!k.isPaused&&k.gameStarted?this.addMenuCountdown(L,"steps"):this.startMenuCountdownTimer(L)}stopMenuAutoComplete(){this.currentMenuAutoCompleteType=null,this.menuAutoCompleteStepCount=0,this.menuCountdownTimer&&(this.menuCountdownTimer.destroy(),this.menuCountdownTimer=null),this.menuCountdownText&&(this.menuCountdownText.destroy(),this.menuCountdownText=null)}onStepEvent(L){if(this.currentMenuAutoCompleteType&&this.currentMenuAutoCompleteType!=="START"){this.menuAutoCompleteStepCount++;const k=12-this.menuAutoCompleteStepCount;if(this.menuCountdownText&&this.menuCountdownText.scene&&this.menuCountdownText.active)this.menuCountdownText.setText(`Auto-complete in: ${k} steps`);else if(this.menuCountdownText=null,this.menuCountdownTimer){try{this.menuCountdownTimer.remove(!1)}catch{}this.menuCountdownTimer=null}this.menuAutoCompleteStepCount>=12&&this.autoCompleteCurrentMenu()}}startMenuCountdownTimer(L){let k=12;this.addMenuCountdown(L,"step-lengths"),this.menuCountdownTimer=this.scene.time.addEvent({delay:1e3,callback:()=>{if(k--,this.menuCountdownText&&this.menuCountdownText.scene&&this.menuCountdownText.active)this.menuCountdownText.setText(`Auto-complete in: ${k} step-lengths`);else{if(this.menuCountdownTimer){try{this.menuCountdownTimer.remove(!1)}catch{}this.menuCountdownTimer=null}this.menuCountdownText=null;return}k<=0&&this.autoCompleteCurrentMenu()},loop:!0,repeat:11})}addMenuCountdown(L,k){this.scene.time.delayedCall(100,()=>{const W=this.scene.cameras.main.width,K=this.scene.cameras.main.height,j=W/2,S=K/2;this.menuCountdownText=this.scene.add.text(j,S-100,`Auto-complete in: 12 ${k}`,{fontSize:"16px",color:"#ff6b6b",fontStyle:"bold",backgroundColor:"#000000",padding:{x:8,y:4}}),this.menuCountdownText.setOrigin(.5),this.menuCountdownText.setScrollFactor(0),this.menuCountdownText.setDepth(1e3),this.currentDialog&&(this.currentDialog.countdownText=this.menuCountdownText)})}autoCompleteCurrentMenu(){if(!this.currentMenuAutoCompleteType)return;const L=this.currentMenuAutoCompleteType;switch(this.stopMenuAutoComplete(),L){case"TURN_KEY":this.scene.time.delayedCall(500,()=>{this.closeDialog();const k=this.scene.scene.get("GameScene");k&&k.events.emit("turnKey")});break;case"CYOA":this.closeDialog();break;case"EXIT":case"SHOP":this.closeDialog();break;case"PAUSE":this.closeDialog();break;default:this.closeDialog();break}}canShowMenu(L){const k=this.MENU_PRIORITIES[L];if(!k)return!0;const W=this.menuStack[this.menuStack.length-1];if(W&&W.priority>k)return L==="EXIT"&&W.type==="CYOA"?(console.log("⚠️ Forcing EXIT to preempt CYOA"),this.clearCurrentDialog(),this.popSpecificMenu(W.type),!0):(console.log(`🚫 MenuManager: Cannot show ${L} menu (priority ${k}) - blocked by ${W.type} menu (priority ${W.priority})`),console.log("🚫 MenuManager: Current menu stack:",this.menuStack.map(K=>`${K.type}:${K.priority}`)),!1);if(this.isExitOrShopOpen()&&["CYOA","TUTORIAL_INTERRUPT","NOVEL_STORY","STORY","STORY_OUTCOME","DESTINATION"].includes(L)){let j;try{j=this.menuStack[this.menuStack.length-1]?.config}catch{}return this.enqueueMenu(L,j),console.log(`⏳ MenuManager: Queued '${L}' until EXIT/SHOP closes`),!1}if(W&&W.priority<k){console.log(`⚠️ MenuManager: Preempting lower-priority menus for ${L} (priority ${k})`);const K=!!(this.currentDisplayedMenuType&&(this.currentDisplayedMenuType==="EXIT"||this.currentDisplayedMenuType==="SHOP"))||this.menuStack.some(j=>j.type==="EXIT"||j.type==="SHOP");this.menuStack=this.menuStack.filter(j=>j.priority>=k);try{this.clearCurrentDialog()}catch{}K&&(this._resumeOnNextClose=!0)}return console.log(`✅ MenuManager: Can show ${L} menu (priority ${k})`),!0}pushMenu(L,k){const W=this.MENU_PRIORITIES[L];W?(this.menuStack.push({type:L,priority:W,config:k}),console.log(`📚 MenuManager: Pushed ${L} menu (priority ${W}) to stack. Stack now:`,this.menuStack.map(K=>`${K.type}:${K.priority}`))):console.log(`⚠️ MenuManager: No priority found for menu type: ${L}`)}popMenu(){return this.menuStack.pop()||null}popSpecificMenu(L){const k=this.menuStack.findIndex(W=>W.type===L);if(k!==-1){const W=this.menuStack.splice(k,1)[0];return console.log(`🗑️ MenuManager: Popped ${L} menu from stack. Remaining stack:`,this.menuStack.map(K=>`${K.type}:${K.priority}`)),W}return console.log(`⚠️ MenuManager: Could not find ${L} menu in stack to pop. Current stack:`,this.menuStack.map(W=>`${W.type}:${W.priority}`)),null}clearMenusFromStack(L){const k=this.menuStack.length;this.menuStack=this.menuStack.filter(K=>K.type!==L);const W=k-this.menuStack.length;W>0&&console.log(`MenuManager: Cleared ${W} ${L} menu(s) from stack. Stack now:`,this.menuStack.map(K=>`${K.type}(${K.priority})`))}resumeGame(){const L=this.scene.scene.get("AppScene"),k=this.scene.scene.get("GameScene");L&&(L.isPaused=!1,console.log("MenuManager: Game resumed")),k&&k.carStarted&&k.carMechanics&&(k.carMechanics.resumeDriving(),console.log("MenuManager: Resumed CarMechanics driving")),k&&k.events.emit("gameResumed")}createWindowBackground(){const L=this.currentDialog.collageBackground,k=this.currentDialog.dialogWidth,W=this.currentDialog.dialogHeight;if(!L||!k||!W){console.error("❌ Missing references for window background creation");return}console.log("🎨 Creating window background with x texture");const K=this.scene.add.tileSprite(0,0,k,W,"x");K.setOrigin(0,0),K.setDepth(-2);const j=L.createGeometryMask();K.setMask(j),this.currentDialog.add(K),this.scene.events.on("postupdate",()=>{K&&K.active&&(K.tilePositionX-=.5,K.tilePositionY+=.3)}),this.currentDialog.backgroundSprite=K,this.currentDialog.geometryMask=j,console.log("✅ Window background created successfully")}pauseGame(){const L=this.scene.scene.get("AppScene"),k=this.scene.scene.get("GameScene");L&&(L.isPaused=!0,console.log("MenuManager: Game paused")),k&&k.carStarted&&k.carMechanics&&(k.carMechanics.pauseDriving(),console.log("MenuManager: Paused CarMechanics driving")),k&&k.events.emit("gamePaused")}showStoryOverlay(L,k){if(this.clearAllPotholeDialogs(!0),this.isExitOrShopOpen()){this.enqueueMenu("STORY_OVERLAY",{title:L,content:k});return}this.clearCurrentDialog();const W=this.scene.scene.get("GameScene");if(!W||!W.windowShapes){console.warn("Cannot create story overlay: GameScene or WindowShapes not available");return}const K=this.scene.cameras.main.width,j=this.scene.cameras.main.height,S=Math.floor(K*.85),w=Math.floor(j*.9),s=Math.floor((K-S)/2),c=Math.floor((j-w)/2),y=[L,k],u=[{text:"Continue",callback:()=>{console.log("Story overlay dismissed by user"),this.clearCurrentDialog()}}],h=W.windowShapes.createCYOADialog(s,c,S,w,y,u);h?(h.setDepth(4e4),this.currentDialog=h,this.currentDisplayedMenuType="STORY",this.currentDialog.isStory=!0,this.currentDialog.stepsRemaining=10,console.log(`✨ Story overlay created with H menu styling: "${L}"`)):console.warn("Story overlay was queued (another narrative window is active)")}onGlobalStep(){this.currentDialog&&this.currentDialog.isStory&&(this.currentDialog.stepsRemaining-=1,this.currentDialog.stepsRemaining<=0&&this.clearCurrentDialog());const L=this.potholeCreationCountdown;if(L&&L.remaining>0)if(this.getCurrentStep()!==L.lastStep)this.potholeCreationCountdown=null;else{const K={title:"",content:"YOU HIT A POTHOLE!!!!1",buttons:[],width:90,height:60},j=this.createIndependentPotholeDialog(K);if(j){j.isPothole=!0,j.stepsRemaining=4,j.isIndependent=!0;try{const S=this.scene.cameras.main.width,w=this.scene.cameras.main.height,s=ht.Math.FloatBetween(.2,.8)*S,c=ht.Math.FloatBetween(.2,.8)*w;j.setPosition(s,c)}catch{}this.independentPotholeDialogs||(this.independentPotholeDialogs=[]),this.independentPotholeDialogs.push(j)}L.remaining-=1,L.remaining<=0&&(this.potholeCreationCountdown=null)}const k=this.independentPotholeDialogs||[];for(let W=k.length-1;W>=0;W--){const K=k[W];if(K&&!K.destroyed&&K.isPothole){if(K.stepsRemaining-=1,K.stepsRemaining<=0){const j=K.collageWindow;if(j&&j.scene)this.scene.tweens.add({targets:j,scaleX:.01,scaleY:.01,duration:160,ease:"Back.easeIn",onComplete:()=>{try{K.destroy()}catch{}}});else try{K.destroy()}catch{}k.splice(W,1)}}else K&&K.destroyed&&k.splice(W,1)}this.currentDialog&&this.currentDialog.isPetMenu&&this.updatePetMenuValues()}tickPotholeDialogsHalfStep(){const L=this.independentPotholeDialogs||[];if(!(!L||L.length===0))for(let k=L.length-1;k>=0;k--){const W=L[k];if(!(!W||W.destroyed||!W.isPothole)&&(typeof W.stepsRemaining!="number"&&(W.stepsRemaining=4),W.stepsRemaining-=.5,W.stepsRemaining<=0)){const K=W.collageWindow;if(K&&K.scene)this.scene.tweens.add({targets:K,scaleX:.01,scaleY:.01,duration:140,ease:"Back.easeIn",onComplete:()=>{try{W.destroy()}catch{}}});else try{W.destroy()}catch{}L.splice(k,1)}}}clearAllPotholeDialogs(L=!0){this.potholeCreationCountdown=null;const k=this.potholeCreationListener;if(k&&typeof this.scene.events.off=="function"){try{this.scene.events.off("postupdate",k)}catch{}this.potholeCreationListener=null}const W=this.independentPotholeDialogs||[];for(let K=W.length-1;K>=0;K--){const j=W[K];if(!j||j.destroyed||!j.isPothole){W.splice(K,1);continue}if(L&&j.collageWindow&&j.collageWindow.scene)this.scene.tweens.add({targets:j.collageWindow,scaleX:.01,scaleY:.01,duration:120,ease:"Back.easeIn",onComplete:()=>{try{j.destroy()}catch{}}});else try{j.destroy()}catch{}W.splice(K,1)}this.independentPotholeDialogs=W}updatePetMenuValues(){if(!this.currentDialog||!this.currentDialog.isPetMenu)return;const L=this.scene.scene.get("GameScene");if(!L||!L.getVirtualPet)return;const k=this.currentDialog.petIndex,W=L.getVirtualPet(k);if(!W)return;const K=this.currentDialog.foodBarFill,j=this.currentDialog.bathroomBarFill,S=this.currentDialog.boredBarFill,w=this.currentDialog.foodBarWidth;if(K){const s=W.getFoodValue?.()||0,c=Math.floor(w*(s/10));K.setDisplaySize(c,K.displayHeight)}if(j){const s=W.getBathroomValue?.()||0,c=Math.floor(w*(s/10));j.setDisplaySize(c,j.displayHeight)}if(S){const s=W.getBoredValue?.()||0,c=Math.floor(w*(s/10));S.setDisplaySize(c,S.displayHeight)}}showPetStoryUI(L){this.clearCurrentDialog();const k=this.scene.scene.get("GameScene");if(!k||!k.virtualPet)return;const W=k.virtualPet.getPetScreenXY?.();if(!W)return;const K=this.scene.cameras.main,j=90,S=50;let w=ht.Math.Clamp(W.x,j,K.width-j),s=W.y-80,c=s<S?W.y+90:s;c=ht.Math.Clamp(c,S,K.height-S);const y=w,u=c;try{this.scene.scene.bringToTop("MenuScene")}catch{}this.currentDialog=this.scene.add.container(y,u),this.currentDialog.setScrollFactor(0),this.currentDialog.setDepth(50010),this.currentDisplayedMenuType="PET_STORY";const h=this.scene.add.graphics();h.fillStyle(1973790,.9),h.fillRoundedRect(-80,-40,160,80,8),h.lineStyle(2,16777215,1),h.strokeRoundedRect(-80,-40,160,80,8),h.setScrollFactor(0),this.currentDialog.add(h);const l=k.virtualPet.getFoodValue?.()||0,n=120,o=12,f=0,r=this.scene.add.rectangle(0,f,n,o,0,.65);r.setStrokeStyle(1,16777215,.9),r.setScrollFactor(0);const d=Math.floor(n*(l/10)),p=this.scene.add.rectangle(-n/2,f,d,o-3,3066993,1).setOrigin(0,.5);p.setScrollFactor(0);const v=this.scene.add.text(0,-18,"FOOD",{fontSize:"12px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5);v.setScrollFactor(0),this.currentDialog.add([v,r,p]),this.currentDialog.stepsRemaining=3,this.currentDialog.isStory=!0,console.log("Pet story UI created at position:",y,u,"petXY:",W,"with depth:",this.currentDialog.depth)}showPetStoryUIForPet(L){this.clearCurrentDialog();const k=this.scene.scene.get("GameScene");if(!k||!k.getVirtualPet)return;const W=k.getVirtualPet(L);if(!W)return;const K=W.getPetScreenXY?.();if(!K)return;const j=this.scene.cameras.main,S=160,w=120;let s=ht.Math.Clamp(K.x,S/2,j.width-S/2),c=K.y-100;c-w/2<0&&(c=K.y+100);try{this.scene.scene.bringToTop("MenuScene")}catch{}this.currentDialog=this.scene.add.container(s,c),this.currentDialog.setScrollFactor(0),this.currentDialog.setDepth(50010),this.currentDisplayedMenuType="PET_STORY";const y=this.scene.add.graphics();y.fillStyle(1973790,.9),y.fillRoundedRect(-S/2,-w/2,S,w,8),y.lineStyle(2,16777215,1),y.strokeRoundedRect(-S/2,-w/2,S,w,8),y.setScrollFactor(0),this.currentDialog.add(y);const u=this.scene.add.text(0,-40,"FOOD",{fontSize:"12px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5);u.setScrollFactor(0);const h=100,l=10,n=this.scene.add.rectangle(0,-25,h,l,0,.6);n.setStrokeStyle(1,16777215,.8),n.setScrollFactor(0);const o=W.getFoodValue?.()||0,f=Math.floor(h*(o/10)),r=this.scene.add.rectangle(-h/2,-25,f,l-2,3066993,1);r.setOrigin(0,.5),r.setScrollFactor(0);const d=this.scene.add.text(0,-5,"BATH",{fontSize:"12px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5);d.setScrollFactor(0);const p=this.scene.add.rectangle(0,10,h,l,0,.6);p.setStrokeStyle(1,16777215,.8),p.setScrollFactor(0);const v=W.getBathroomValue?.()||0,g=Math.floor(h*(v/10)),m=this.scene.add.rectangle(-h/2,10,g,l-2,3447003,1);m.setOrigin(0,.5),m.setScrollFactor(0);const T=this.scene.add.text(0,30,"BORED",{fontSize:"12px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5);T.setScrollFactor(0);const P=this.scene.add.rectangle(0,45,h,l,0,.6);P.setStrokeStyle(1,16777215,.8),P.setScrollFactor(0);const M=W.getBoredValue?.()||0,b=Math.floor(h*(M/10)),R=this.scene.add.rectangle(-h/2,45,b,l-2,10181046,1);R.setOrigin(0,.5),R.setScrollFactor(0),this.currentDialog.add([u,n,r,d,p,m,T,P,R]),this.currentDialog.isPetMenu=!0,this.currentDialog.petIndex=L,this.currentDialog.foodBarFill=r,this.currentDialog.bathroomBarFill=m,this.currentDialog.boredBarFill=R,this.currentDialog.foodBarWidth=h}getCurrentMenuType(){const L=this.menuStack[this.menuStack.length-1];return L?L.type:null}getStackState(){return this.menuStack.length===0?"Empty stack":this.menuStack.map(L=>`${L.type}(${L.priority})`).join(" → ")}shouldRestorePreviousMenu(){if(this.menuStack.length===0||this.currentDialog)return!1;const L=this.menuStack[this.menuStack.length-1];if(L.type==="CYOA")return console.log("MenuManager: CYOA is one-time event, not restoring"),!1;if(L.type==="PAUSE")return console.log("MenuManager: PAUSE menu should not be restored"),!1;const k=this.MENU_CATEGORIES.PERSISTENT.includes(L.type),W=L.type==="EXIT"&&this.userDismissedMenuType==="SHOP";return!k&&!W?(console.log(`MenuManager: ${L.type} is not persistent, not restoring`),!1):L.type===this.userDismissedMenuType?(console.log(`MenuManager: User dismissed ${L.type}, not restoring`),!1):(console.log(W?`MenuManager: Restoring ${L.type} (parent menu after SHOP close)`:`MenuManager: Restoring ${L.type} (persistent menu)`),!0)}restorePreviousMenu(){if(this.menuStack.length===0)return;const L=this.menuStack[this.menuStack.length-1];switch(console.log(`MenuManager: Restoring previous menu: ${L.type}`),this.popMenu(),L.type){case"START":this.showStartMenu();break;case"PAUSE":this.showPauseMenu();break;case"TURN_KEY":const k=this.scene.scene.get("GameScene");k&&k.keysInIgnition?this.showTurnKeyMenu():console.log("MenuManager: Not restoring ignition menu - keys not in ignition");break;case"SAVE":this.showSaveMenu();break;case"OBSTACLE":L.config&&this.showObstacleMenu(L.config.type,L.config.damage);break;case"GAME_OVER":this.showGameOverMenu();break;case"EXIT":L.config?L.config.shopCount!==void 0?this.showExitMenu(L.config.shopCount,L.config.exitNumber):this.showExitStoresCatalog(L.config.exitNumber):this.showExitMenu();break;default:console.log(`MenuManager: No restoration logic for ${L.type}`);break}}showStartMenu(){if(!this.canShowMenu("START"))return;this.clearCurrentDialog(),this.pushMenu("START");const L=this.saveManager.load(),k=L&&L.steps>0;let W;if(k){const K=new Date(L.timestamp).toLocaleString();W={title:"INFINITY DRIVES",subtitle:"the official game that is an ad for Infinity Guise the new fake emo album by Summerbruise",content:`Welcome back! You have a saved game with ${L.steps} steps.
Saved: ${K}`,buttons:[{text:"Resume Game",onClick:()=>{this.closeDialog();const j=this.scene.scene.get("AppScene"),S=this.scene.scene.get("GameScene");j&&j.startGame(),S&&L&&S.loadGame(L.steps)},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}},{text:"Start Fresh",onClick:()=>{this.saveManager.clearSave(),this.closeDialog();const j=this.scene.scene.get("AppScene");j&&j.startGame()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]}}else W={title:"INFINITY DRIVES",subtitle:"the official game that is an ad for Infinity Guise the new fake emo album by Summerbruise",content:`you awake in a 2007 honda odyssey
you remember: you took a job as a tour manager for fake emo band summerbruise
its time to start`,texts:["you awake in a 2007 honda odyssey","you remember: you took a job as a tour manager for fake emo band summerbruise","its time to start"],buttons:[{text:"start",onClick:()=>{this.closeDialog();const K=this.scene.scene.get("AppScene");K&&K.startGame()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};try{const K=this.scene.cameras.main.width,j=this.scene.cameras.main.height;W.width=Math.floor(K*.85),W.height=Math.floor(j*.9)}catch{}this.createDialog(W,"START")}showPauseMenu(){if(!this.canShowMenu("PAUSE"))return;this.clearCurrentDialog(),this.pushMenu("PAUSE");const L={title:"PAUSE MENU",content:"Game is paused. Choose an option:",buttons:[{text:"Resume",onClick:()=>{this.closeDialog();const k=this.scene.scene.get("AppScene");if(k){k.isPaused=!1,console.log("Game resumed from pause menu");const W=this.scene.scene.get("GameScene");W&&W.events.emit("gameResumed")}},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}},{text:"Restart",onClick:()=>{this.closeDialog(),window.location.reload()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};this.createDialog(L,"PAUSE"),this.startMenuAutoComplete("PAUSE")}showSaveMenu(){if(!this.canShowMenu("SAVE"))return;this.clearCurrentDialog(),this.pushMenu("SAVE");const L=this.saveManager.load(),W={title:"SAVE MENU",content:L&&L.steps>0?`Current save: ${L.steps} steps (${L.timestamp})`:"No save data found",buttons:[{text:"Save Game",onClick:()=>{const K=this.scene.scene.get("AppScene");if(K){const j=K.getStep();this.saveManager.save(j),this.closeDialog()}},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}},{text:"Load Game",onClick:()=>{const K=this.saveManager.load();if(K&&K.steps>0){const j=this.scene.scene.get("GameScene");j&&j.loadGame(K.steps)}this.closeDialog()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}},{text:"Clear Save",onClick:()=>{this.saveManager.clearSave(),this.closeDialog()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}},{text:"Close",onClick:()=>{this.closeDialog()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};this.createDialog(W,"SAVE")}showPotholeMenu(){try{this.scene.scene.get("GameScene")?.events.emit("potholeMenuShake")}catch{}const L=this.getCurrentSpeedPercentage(),k=Math.max(3,Math.min(20,Math.floor(L*.2)));this.potholeCreationCountdown?this.potholeCreationCountdown.remaining+=k:this.potholeCreationCountdown={remaining:k,lastStep:this.getCurrentStep()},this.potholeCreationListener||(this.potholeCreationListener=this.scene.events.on("postupdate",()=>{this.processPotholeCreationCountdown()}))}getCurrentSpeedPercentage(){try{const L=this.scene.scene.get("GameScene");if(L&&L.gameState)return L.gameState.getState().speedPercentage||0}catch{}return 0}getCurrentStep(){try{const L=this.scene.scene.get("GameScene");if(L&&L.gameState)return L.gameState.getState().step||0}catch{}return 0}processPotholeCreationCountdown(){const L=this.potholeCreationCountdown;if(L&&L.remaining>0){if(this.getCurrentStep()!==L.lastStep){this.potholeCreationCountdown=null;return}const W={title:"",content:"YOU HIT A POTHOLE!!!!1",buttons:[],width:90,height:60},K=this.createIndependentPotholeDialog(W);if(K){try{this.scene.scene.get("GameScene")?.events.emit("potholeMenuShake")}catch{}K.isPothole=!0,K.stepsRemaining=4,K.isIndependent=!0;try{const j=this.scene.cameras.main.width,S=this.scene.cameras.main.height,w=ht.Math.FloatBetween(.2,.8)*j,s=ht.Math.FloatBetween(.2,.8)*S;K.setPosition(w,s)}catch{}this.independentPotholeDialogs||(this.independentPotholeDialogs=[]),this.independentPotholeDialogs.push(K)}L.remaining-=1,L.remaining<=0&&(this.potholeCreationCountdown=null)}}createIndependentPotholeDialog(L){const k=this.scene.cameras.main.width,W=this.scene.cameras.main.height,K=L.width||90,j=L.height||60,S=this.scene.add.container(k/2,W/2);S.setScrollFactor(0),S.setDepth(5e4);const w=K/2,s=j/2;try{const c=this.scene.scene.get("GameScene"),y=c&&c.windowShapes||this.windowShapes;if(y&&y.createCollageRect){const u=y.createCollageRect({x:-w,y:-s,width:K,height:j,fillColor:16777215,fillAlpha:1},!1,"window");if(u){u.setDepth(-1),u.setPosition(0,0),S.add(u);const h=`pothole_window_${Date.now()}_${Math.random().toString(36).slice(2,7)}`;try{y.registerAnimatedShape(h,u,"window",-w,-s,K,j)}catch(l){console.error("❌ Failed to register pothole window animation:",l)}u.__shapeId=h,u.setScale(.01),this.scene.tweens.add({targets:u,scaleX:1,scaleY:1,duration:200,ease:"Back.easeOut"}),S.collageWindow=u}}}catch(c){console.error("❌ Error creating pothole background:",c)}if(L.content){const y=K-12,u=String(L.content||"").trim(),h=this.scene.add.text(0,0,u,{fontSize:"12px",color:"#000000",wordWrap:{width:y,useAdvancedWrap:!0},align:"center"}).setOrigin(.5);h.setPosition(0,0),S.add(h)}return S}showTutorialInterrupt(){if(this.isExitOrShopOpen()){this.enqueueMenu("TUTORIAL_INTERRUPT");return}if(!this.canShowMenu("TUTORIAL_INTERRUPT"))return;this.clearCurrentDialog(),this.pushMenu("TUTORIAL_INTERRUPT");let L=8;const k={title:"TUTORIAL",content:"You have to take care of these little guys.",buttons:[{text:`Continue (${L})`,onClick:()=>{console.log("🎓 Tutorial interrupt manually closed"),this.closeDialog(),console.log("🎓 Emitting tutorialInterruptClosed event (manual)"),this.scene.scene.get("GameScene")?.events.emit("tutorialInterruptClosed")},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#27ae60",padding:{x:10,y:5}}}]};this.createDialog(k,"TUTORIAL_INTERRUPT"),this.currentDialog.tutorialCountdown=L;let W=this.currentDialog.buttonText;if(!W){const K=j=>{if(!(!j||!j.list))for(const S of j.list){if(S instanceof ht.GameObjects.Text&&typeof S.text=="string"&&S.text.includes("Continue"))return S;if(S.list){const w=K(S);if(w)return w}}};W=K(this.currentDialog)}W?(this.currentDialog.buttonText=W,console.log("🎓 Tutorial interrupt: Button text found and stored")):console.warn("🎓 Tutorial interrupt: Could not find button text object")}updateTutorialInterruptCountdown(){if(!this.currentDialog||this.currentDisplayedMenuType!=="TUTORIAL_INTERRUPT")return;const L=this.currentDialog.tutorialCountdown,k=this.currentDialog.buttonText;if(console.log(`🎓 Tutorial interrupt countdown update: current=${L}`),L!==void 0&&L>0){this.currentDialog.tutorialCountdown=L-1;const W=L-1;if(k){const K=W>0?`Continue (${W})`:"Continue";k.setText(K),console.log(`🎓 Tutorial interrupt countdown: ${W}`)}W<=0&&(console.log("🎓 Tutorial interrupt countdown reached 0 - auto-closing menu"),this.closeDialog(),console.log("🎓 Emitting tutorialInterruptClosed event"),this.scene.scene.get("GameScene")?.events.emit("tutorialInterruptClosed"))}}showExitMenu(L=3,k){if(console.log(`🚪 MenuManager: showExitMenu called with shopCount=${L}, exitNumber=${k}`),console.log("🚪 MenuManager: Current menu stack length:",this.menuStack.length),this.currentDisplayedMenuType==="VIRTUAL_PET")try{this.closeCurrentDialog()}catch{}if(this._lastExitNumber=k??this._lastExitNumber,this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing EXIT until CYOA closes"),this.enqueueMenu("EXIT",{shopCount:L,exitNumber:k});return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing EXIT until STORY closes"),this.enqueueMenu("EXIT",{shopCount:L,exitNumber:k});return}if(this.currentDisplayedMenuType==="EXIT"){console.log("⏳ Queueing EXIT until current EXIT closes"),this.enqueueMenu("EXIT",{shopCount:L,exitNumber:k});return}if(!this.canShowMenu("EXIT")){console.log("🚫 MenuManager: showExitMenu blocked by canShowMenu check");return}console.log("✅ MenuManager: showExitMenu proceeding after canShowMenu check"),this.clearCurrentDialog();let W=k??this._lastExitNumber;if(W==null)for(let w=this.menuStack.length-1;w>=0;w--){const s=this.menuStack[w];if(s.type==="EXIT"&&s.config&&s.config.exitNumber!=null){W=s.config.exitNumber;break}}if(W==null)try{this.scene.scene.get("GameScene")?.gameState?.getState()?.showsInCurrentRegion===0&&(W=1)}catch{}this.pushMenu("EXIT",{exitNumber:W,shopCount:L});const j=this.generateShopNames(L).map((w,s)=>{const c=this.getWeightedPrice(),y=this.formatPriceParts(c),u={text:w,onClick:()=>{this.handleExitShopChoiceWithPrice(w,c)}};return u.__priceFilled=y.filled,u.__priceEmpty=y.empty,u});j.push({text:"Close",onClick:()=>{this.closeDialog()}});const S={title:"EXIT",content:`Choose a shop to visit. (${L} shops available)`,buttons:j};this.createDialog(S,"EXIT");try{this.currentDialog.exitNumber=W,console.log("showExitMenu: attached dialog exitNumber=",W)}catch{}}showExitStoresCatalog(L){if(console.log(`🚪 MenuManager: showExitStoresCatalog called with exitNumber=${L}`),this.currentDisplayedMenuType==="VIRTUAL_PET")try{this.closeCurrentDialog()}catch{}if(this._lastExitNumber=L??this._lastExitNumber,this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing EXIT until CYOA closes"),this.enqueueMenu("EXIT",{exitNumber:L});return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing EXIT until STORY closes"),this.enqueueMenu("EXIT",{exitNumber:L});return}if(this.currentDisplayedMenuType==="EXIT"){console.log("⏳ Queueing EXIT until current EXIT closes"),this.enqueueMenu("EXIT",{exitNumber:L});return}if(!this.canShowMenu("EXIT")){console.log("🚫 MenuManager: showExitStoresCatalog blocked by canShowMenu check");return}this.clearCurrentDialog();let k=L??this._lastExitNumber;if(k==null)for(let S=this.menuStack.length-1;S>=0;S--){const w=this.menuStack[S];if(w.type==="EXIT"&&w.config&&w.config.exitNumber!=null){k=w.config.exitNumber;break}}this.pushMenu("EXIT",{exitNumber:k});const W=["regional gas station","gas station","motel","restaurant","weed store","car store","car doctor","psychic"],K=W.map(S=>{const w=this.getWeightedPrice(),s=this.formatPriceParts(w),c={text:S,onClick:()=>{this.handleExitShopChoiceWithPrice(S,w)}};return c.__priceFilled=s.filled,c.__priceEmpty=s.empty,c});K.push({text:"Close",onClick:()=>{this.closeDialog()}});const j={title:"EXIT (All Stores)",content:`Choose a store to test. (${W.length} total)`,buttons:K};this.createDialog(j,"EXIT");try{this.currentDialog.exitNumber=k}catch{}}showRegionChoiceMenu(L){if(this.isExitOrShopOpen()){this.enqueueMenu("REGION_CHOICE",L);return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing REGION_CHOICE until CYOA closes"),this.enqueueMenu("REGION_CHOICE",L);return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing REGION_CHOICE until VIRTUAL_PET closes"),this.enqueueMenu("REGION_CHOICE",L);return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing REGION_CHOICE until STORY closes"),this.enqueueMenu("REGION_CHOICE",L);return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing REGION_CHOICE until DESTINATION closes"),this.enqueueMenu("REGION_CHOICE",L);return}if(this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing REGION_CHOICE until current REGION_CHOICE closes"),this.enqueueMenu("REGION_CHOICE",L);return}if(!this.canShowMenu("REGION_CHOICE"))return;this.clearCurrentDialog(),this.pushMenu("REGION_CHOICE");const W=(L?.connectedRegions||[]).map(j=>({text:j,onClick:()=>{this.closeDialog()}})),K={title:"Choose Next Region",content:`Current: ${L?.currentRegion||"unknown"}`,buttons:W};this.createDialog(K,"REGION_CHOICE")}getCurrentDifficulty(){try{const W=this.scene.scene.get("GameScene")?.gameState?.getState?.();if(!W)return 1;const K=W.currentRegion||Po.startingRegion,j=W.showsInCurrentRegion||0,S=Po.showsPerRegion||3,w=this.getRegionBaseDifficulty(K),s=Math.max(0,Math.min(1,j/Math.max(1,S)));return Math.min(5,w+s)}catch{return 1}}getRegionBaseDifficulty(L){return{midwest:1,south:2,southwest:3,west:4,northeast:5}[L]??1}getWeightedPrice(){const L=this.getCurrentDifficulty(),k={1:.2,2:.5,3:.25,4:.05},W={1:.25,2:.25,3:.25,4:.25},K=Math.max(0,Math.min(1,(L-1)/4)),j=[1,2,3,4].map(y=>k[y]*(1-K)+W[y]*K),S=j.reduce((y,u)=>y+u,0),w=j.map(y=>y<=0?0:y/(S||1)),s=Math.random();let c=0;for(let y=0;y<w.length;y++)if(c+=w[y],s<=c)return y+1;return 4}formatPriceParts(L){const k=Math.max(1,Math.min(4,Math.floor(L))),W="$".repeat(k),K="$".repeat(4-k);return{filled:W,empty:K}}generateShopNames(L){const k=["regional gas station","gas station","motel","restaurant","weed store","car store","car doctor","psychic"],W=[],K=new Set;for(let j=0;j<L;j++){let S,w=0;do S=k[Math.floor(Math.random()*k.length)],w++;while(K.has(S)&&w<20);K.add(S),W.push(S)}return W}handleExitShopChoice(L){this.handleExitShopChoiceWithPrice(L,this.getWeightedPrice())}handleExitShopChoiceWithPrice(L,k){try{console.log("Exit menu choice:",L,"priceTier",k)}catch{}this.showShopMenu({shopType:(L||"").toLowerCase(),priceTier:k});try{this.scene.events.emit("exitShopChosen",L)}catch{}}showShopMenu(L){if(!this.canShowMenu("SHOP"))return;if(this.currentDialog){if(this.currentDialog.background){const y=this.currentDialog.background;y.overlayInstance?(console.log("MenuManager: Cleaning up overlay instance in showShopMenu"),y.overlayInstance.destroy()):y.destroy()}this.currentDialog.destroy(),this.currentDialog=null}this.pushMenu("SHOP");const k=this.scene.scene.get("GameScene"),W=k&&k.gameState?.getState()?.money||0,K=this.scene.cache.json.get("shops")||{},j=(L?.shopType||"").toLowerCase(),S=L?.priceTier||this.getWeightedPrice();this._lastPriceTier=S;const w=K[j]||{};let s=[];if(w.type==="retail"&&w.items&&(s=(w.items[String(S)]||[]).slice().sort(()=>Math.random()-.5).slice(0,3).map(h=>({name:String(h.name),cost:Number(h.cost),effect:h.effect}))),w.type==="service"){if(j==="car doctor"){const y=w.pricing?.base||[30,60,100,150],u=y[Math.max(0,Math.min(y.length-1,S-1))],h={title:"car doctor",content:`they fixed this and this and that, $${u}`,buttons:[{text:"pay and heal",onClick:()=>this.handleServiceCharge("car doctor",u)},{text:"Back",onClick:()=>{this.destroyCurrentDialogOnly(),this.showExitMenu()}},{text:"Close",onClick:()=>this.closeDialog()}]};this.createDialog(h,"SHOP");return}if(j==="psychic"){const y=w.pricing?.base||[20,35,55,80],u=y[Math.max(0,Math.min(y.length-1,S-1))],h={title:"psychic",content:"here's a rumor i heard",buttons:[{text:`pay $${u}`,onClick:()=>this.handleServiceCharge("psychic",u,!0)},{text:"Back",onClick:()=>{this.destroyCurrentDialogOnly(),this.showExitMenu()}},{text:"Close",onClick:()=>this.closeDialog()}]};this.createDialog(h,"SHOP");return}if(j==="regional gas station"){const y=w.pricing?.base||[15,25,40,60],u=y[Math.max(0,Math.min(y.length-1,S-1))],h={title:"regional gas station",content:`they topped you off and wiped the windshield, $${u}`,buttons:[{text:`pay $${u}`,onClick:()=>this.handleServiceCharge("regional gas station",u)},{text:"Back",onClick:()=>{this.destroyCurrentDialogOnly(),this.showExitMenu()}},{text:"Close",onClick:()=>this.closeDialog()}]};this.createDialog(h,"SHOP");return}}const c={title:j||"shop",content:`money: $${W}`,buttons:s.map(y=>({text:`${String(y.name).toLowerCase()} - $${y.cost}`,onClick:()=>this.handleShopPurchase(y.name,y.cost),style:{fontSize:"16px",color:W>=y.cost?"#ffffff":"#666666",backgroundColor:W>=y.cost?"#34495e":"#222222",padding:{x:15,y:8}}})).concat([{text:"Back",onClick:()=>{this.destroyCurrentDialogOnly(),this.showExitMenu()},style:{fontSize:"16px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:6}}},{text:"Close",onClick:()=>this.closeDialog(),style:{fontSize:"16px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:6}}}])};this.createDialog(c,"SHOP")}handleShopPurchase(L,k){const W=this.scene.scene.get("GameScene");if(!W)return;const K=W.gameState;if(!K)return;const S=K.getState().money||0;if(S<k){console.log(`Cannot afford ${L} - need $${k}, have $${S}`);return}const w=S-k;K.updateState({money:w}),console.log(`Purchased ${L} for $${k}. Remaining money: $${w}`),this.refreshCurrentShopMenu();try{this.scene.events.emit("shopPurchase",{item:L,cost:k})}catch{}}refreshCurrentShopMenu(){if(this.currentDisplayedMenuType!=="SHOP"||!this.currentDialog)return;const L=this.scene.scene.get("GameScene"),k=L&&L.gameState?.getState()?.money||0,W=this._lastPriceTier||1,j=this.menuStack.find(y=>y.type==="SHOP")?.config?.shopType||"",S=this.scene.cache.json.get("shops")||{},w=j.toLowerCase(),s=S[w]||{};let c=[];if(s.type==="retail"&&s.items&&(c=(s.items[String(W)]||[]).slice().sort(()=>Math.random()-.5).slice(0,3).map(h=>({name:String(h.name),cost:Number(h.cost),effect:h.effect}))),s.type==="service"&&w==="car doctor"){const y=s.pricing?.base||[30,60,100,150],u=y[Math.max(0,Math.min(y.length-1,W-1))];this.updateCurrentDialogContent(`they fixed this and this and that, $${u}`,`Money: $${k}`);return}if(c.length>0){const y=c.map(u=>`${u.name}: $${u.cost}`).join(`
`);this.updateCurrentDialogContent(y,`Money: $${k}`)}}updateCurrentDialogContent(L,k){if(!this.currentDialog)return;const W=this.currentDialog.getByName("contentText");if(W&&W.setText(L),k){const K=this.currentDialog.getByName("titleText");K&&K.setText(k)}}handleServiceCharge(L,k,W){const K=this.scene.scene.get("GameScene");if(!K)return;const j=K.gameState;if(!j)return;const w=j.getState().money||0;w<k||(j.updateState({money:w-k}),L==="car doctor"&&j.updateState({health:10}),W&&console.log("psychic rumor: here's a rumor i heard"),this.refreshCurrentShopMenu())}destroyCurrentDialogOnly(){if(this.currentDialog){if(this.currentDialog.background){const L=this.currentDialog.background;L.overlayInstance?L.overlayInstance.destroy():L.destroy()}this.currentDialog.destroy(),this.currentDialog=null}}showTurnKeyMenu(){if(console.log("MenuManager: showTurnKeyMenu called"),console.log("MenuManager: Current stack before showTurnKeyMenu:",this.menuStack.map(W=>`${W.type}(${W.priority})`)),console.log("MenuManager: Current dialog exists:",!!this.currentDialog),console.log("MenuManager: Current displayed menu type:",this.currentDisplayedMenuType),console.log("MenuManager: Showing ignition menu"),!this.canShowMenu("TURN_KEY")){console.log("MenuManager: Cannot show TURN_KEY menu - blocked by higher priority");return}this.queuedMenus.length>0&&(console.log(`MenuManager: Clearing ${this.queuedMenus.length} queued menus for ignition priority`),this.queuedMenus=[]),this.clearCurrentDialog(),this.pushMenu("TURN_KEY"),console.log("MenuManager: Pushed TURN_KEY to stack. Stack now:",this.menuStack.map(W=>`${W.type}(${W.priority})`));const L={title:"IGNITION",content:"swipe up to turn keys, swipe down to remove",buttons:[]};this.createDialog(L,"TURN_KEY"),this.addTurnKeyDial(),console.log("MenuManager: Emitting ignitionMenuShown event"),this.scene.events.emit("ignitionMenuShown");const k=this.scene.scene.get("GameScene");k&&(console.log("MenuManager: Emitting ignitionMenuShown event on GameScene"),k.events.emit("ignitionMenuShown"))}addTurnKeyDial(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=L/2,K=k/2,j=this.SLIDER_WIDTH,S=this.SLIDER_HEIGHT,w=W,s=K+this.SLIDER_Y_OFFSET,c=this.scene.add.graphics();c.fillStyle(this.SLIDER_TRACK_COLOR),c.fillRoundedRect(w-j/2,s-S/2,j,S,this.SLIDER_CORNER_RADIUS),c.setScrollFactor(0),c.setDepth(this.SLIDER_TRACK_DEPTH);const y=this.SLIDER_HANDLE_WIDTH,u=this.SLIDER_HANDLE_HEIGHT,h=this.scene.add.graphics();h.fillStyle(this.SLIDER_HANDLE_COLOR),h.fillRoundedRect(w-y/2,s+S/2-u,y,u,this.SLIDER_HANDLE_CORNER_RADIUS),h.setScrollFactor(0),h.setDepth(this.SLIDER_HANDLE_DEPTH);const l=this.scene.add.text(W,K+S/2+this.START_LABEL_OFFSET,"START",{fontSize:this.LABELS_FONT_SIZE,color:this.LABELS_COLOR,fontStyle:"bold"});l.setOrigin(.5),l.setScrollFactor(0),l.setDepth(this.LABELS_DEPTH);const n=this.scene.add.text(W,K-S/2+this.TURN_KEY_LABEL_OFFSET,"Turn Key",{fontSize:this.LABELS_FONT_SIZE,color:this.LABELS_COLOR,fontStyle:"bold"});n.setOrigin(.5),n.setScrollFactor(0),n.setDepth(this.LABELS_DEPTH);const o=this.METER_WIDTH,f=this.METER_HEIGHT,r=W,d=K+S/2+this.METER_Y_OFFSET,p=this.scene.add.graphics();p.fillStyle(this.METER_BACKGROUND_COLOR),p.fillRoundedRect(r-o/2,d-f/2,o,f,this.METER_CORNER_RADIUS),p.setScrollFactor(0),p.setDepth(this.METER_DEPTH);const v=this.scene.add.graphics();v.fillStyle(this.METER_FILL_COLOR),v.setScrollFactor(0),v.setDepth(this.METER_DEPTH);const g=this.scene.add.text(W,d+this.METER_TEXT_OFFSET,"START: 0%",{fontSize:this.LABELS_FONT_SIZE,color:this.LABELS_COLOR,fontStyle:"bold"});g.setOrigin(.5),g.setScrollFactor(0),g.setDepth(this.METER_DEPTH);let m=!1,T=0,P=0,M=0,b=0,R=0;const A=this.MOMENTUM_DECAY,D=this.MAX_VELOCITY,G=this.GRAVITY,F=this.SENSITIVITY;let B=0;const N=this.START_THRESHOLD,z=this.START_INCREMENT,$=20;let Q=!1;const Z=ot=>{m=!0,P=ot.y,M=ot.x,b=Date.now(),R=0},tt=ot=>{if(!m)return;const dt=Date.now();if(dt-b>0){const mt=P-ot.y,gt=mt/S,yt=ot.x-M,St=100,Ct=Math.abs(mt)>Math.abs(yt)*2;if(mt>St&&Ct&&Math.abs(mt)>150){this.closeDialog();const bt=this.scene.scene.get("GameScene");bt&&bt.events.emit("removeKeys");return}if(Q)return;R=gt*F,R=ht.Math.Clamp(R,-D,D),T+=R,R=0,T=ht.Math.Clamp(T,0,1),J()}P=ot.y,M=ot.x,b=dt},H=()=>{m=!1,R=0},J=()=>{const ot=s+S/2-T*S-u/2;h.clear(),h.fillStyle(this.SLIDER_HANDLE_COLOR),h.fillRoundedRect(w-y/2,ot,y,u,this.SLIDER_HANDLE_CORNER_RADIUS)},Y=()=>{const ot=B/$*o;v.clear(),v.fillStyle(this.METER_FILL_COLOR),v.fillRoundedRect(r-o/2,d-f/2,ot,f,this.METER_CORNER_RADIUS),g.setText(`START: ${Math.floor(B)}%`)},_=()=>{Q?(T=1,J()):m||(R-=G,Math.abs(R)>.001?(T+=R,T=ht.Math.Clamp(T,0,1),R*=A,J()):(T+=R,T=ht.Math.Clamp(T,0,1),J())),T>=N?(B+=z,B=Math.min(B,$),Y(),B>=$&&!Q&&(console.log("Car started!"),Q=!0,console.log("Manual completion: Scheduling turnKey event in 500ms"),this.scene.time.delayedCall(500,()=>{console.log("Manual completion: Executing delayed turnKey event"),this.closeDialog();const ot=this.scene.scene.get("GameScene");ot?(console.log("Manual completion: Emitting turnKey event to GameScene"),ot.events.emit("turnKey")):console.error("Manual completion: GameScene not found for turnKey event")}))):B>0&&(B-=z*2,B=Math.max(B,0),Y())},U=this.scene.time.addEvent({delay:16,callback:_,loop:!0});this.scene.input.on("pointerdown",Z);const et=ot=>tt(ot),nt=()=>H();this.scene.input.on("pointermove",et),this.scene.input.on("pointerup",nt),this.currentDialog.pointerDownHandler=Z,this.currentDialog.pointerMoveHandler=et,this.currentDialog.pointerUpHandler=nt;const rt=this.scene.scene.get("GameScene");rt&&rt.input&&(rt.input.enabled=!0,rt.input.enabled=!1,this.currentDialog.__restoreInput=()=>{try{rt.input.enabled=!0}catch{}}),this.currentDialog.momentumTimer=U,this.currentDialog.turnKeyDial={sliderTrack:c,handle:h},this.currentDialog.dialLabel={startLabel:l,turnKeyLabel:n},this.currentDialog.startMeter={meterBackground:p,meterFill:v,meterText:g}}showObstacleMenu(L,k,W){if(this.isExitOrShopOpen()){this.enqueueMenu("OBSTACLE",{obstacleType:L,damage:k,exitNumber:W});return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing OBSTACLE until CYOA closes"),this.enqueueMenu("OBSTACLE",{obstacleType:L,damage:k,exitNumber:W});return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing OBSTACLE until VIRTUAL_PET closes"),this.enqueueMenu("OBSTACLE",{obstacleType:L,damage:k,exitNumber:W});return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing OBSTACLE until STORY closes"),this.enqueueMenu("OBSTACLE",{obstacleType:L,damage:k,exitNumber:W});return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing OBSTACLE until DESTINATION closes"),this.enqueueMenu("OBSTACLE",{obstacleType:L,damage:k,exitNumber:W});return}if(this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing OBSTACLE until REGION_CHOICE closes"),this.enqueueMenu("OBSTACLE",{obstacleType:L,damage:k,exitNumber:W});return}if(!this.canShowMenu("OBSTACLE"))return;if(L==="exit"){console.log("🎭 showObstacleMenu(exit): incoming exitNumber=",W,"_lastExitNumber=",this._lastExitNumber);let j=W??this._lastExitNumber;if(console.log("🎭 showObstacleMenu(exit): after ?? operator, resolvedExitNumber=",j),j==null)try{const s=this.scene.scene.get("GameScene")?.carMechanics?.getPlannedCyoa?.();if(Array.isArray(s)){const c=s.find(y=>y.isExitRelated&&y.exitNumber!=null);c&&(j=c.exitNumber)}}catch{}console.log("🎭 showObstacleMenu(exit): after fallback logic, resolvedExitNumber=",j),this._lastExitNumber=j??this._lastExitNumber,console.log("🎭 showObstacleMenu(exit): resolved exitNumber=",j,"updated _lastExitNumber=",this._lastExitNumber),console.log("🎭 showObstacleMenu(exit): calling showExitMenu with damage=",k,"exitNumber=",j),this.showExitMenu(k,j);return}this.clearCurrentDialog(),this.pushMenu("OBSTACLE",{type:L,damage:k});const K={title:"COLLISION!",content:`You hit a ${L}! Damage: ${k}%`,buttons:[{text:"Continue",onClick:()=>{this.closeDialog();const j=this.scene.scene.get("GameScene");j&&j.resumeAfterCollision()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};this.createDialog(K,"OBSTACLE")}showCyoaMenu(L){if(this.isExitOrShopOpen()){this.enqueueMenu("CYOA",L);return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing CYOA until VIRTUAL_PET closes"),this.enqueueMenu("CYOA",L);return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing CYOA until STORY closes"),this.enqueueMenu("CYOA",L);return}if(console.log(`🎭 CYOA (H-style): Creating CYOA ${L.cyoaId}`),console.log("MenuManager: Current menu stack before CYOA:",this.menuStack.map(W=>`${W.type}(${W.priority})`)),console.log("MenuManager: Current displayed menu type:",this.currentDisplayedMenuType),this.currentDisplayedMenuType==="CYOA"){console.log("🎭 CYOA already displayed, ignoring duplicate request");return}if(this.menuStack.some(W=>W.type==="CYOA")){console.log("🎭 CYOA already on stack, ignoring duplicate request");return}if(!this.canShowMenu("CYOA")){console.log("MenuManager: Cannot show CYOA menu - blocked by higher priority");return}this.clearCurrentDialog(),this.pushMenu("CYOA",L),this.pauseGame();const k={title:"CYOA",content:"choose your path",buttons:[{text:"ok",onClick:()=>{this.closeDialog(),this.resumeGame(),this.popSpecificMenu("CYOA")}},{text:"no",onClick:()=>{this.closeDialog(),this.resumeGame(),this.popSpecificMenu("CYOA")}}]};this.createDialog(k,"CYOA")}showStoryMenu(L){if(this.clearAllPotholeDialogs(!0),this.isExitOrShopOpen()){this.enqueueMenu("STORY",L);return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing STORY until CYOA closes"),this.enqueueMenu("STORY",L);return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing STORY until VIRTUAL_PET closes"),this.enqueueMenu("STORY",L);return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing STORY until current story closes"),this.enqueueMenu("STORY",L);return}if(!this.canShowMenu("STORY"))return;this.clearCurrentDialog(),this.pushMenu("STORY",L),this.storySequenceInProgress=!0;const k=this.scene.scene.get("AppScene");k&&(k.isPaused=!0,console.log("MenuManager: Game paused for story menu"));const K={title:"STORY",content:L.isExitRelated?`A story unfolds near Exit ${L.exitNumber}...`:"A story unfolds on the road...",buttons:[{text:"Continue",onClick:()=>{this.closeDialog();const j=this.scene.scene.get("GameScene");j&&j.resumeAfterCyoa()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};this.createDialog(K,"STORY"),this.startMenuAutoComplete("STORY")}showNovelStory(L){if(this.clearAllPotholeDialogs(!0),this.isExitOrShopOpen()){this.enqueueMenu("NOVEL_STORY",L);return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing NOVEL_STORY until CYOA closes"),this.enqueueMenu("NOVEL_STORY",L);return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing NOVEL_STORY until VIRTUAL_PET closes"),this.enqueueMenu("NOVEL_STORY",L);return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing NOVEL_STORY until current story closes"),this.enqueueMenu("NOVEL_STORY",L);return}if(console.log("MenuManager: showNovelStory called with:",L),console.log("MenuManager: canShowMenu check:",this.canShowMenu("NOVEL_STORY")),!this.canShowMenu("NOVEL_STORY")){console.log("MenuManager: Cannot show novel story menu - blocked");return}this.clearCurrentDialog(),this.pushMenu("NOVEL_STORY",L),this.storySequenceInProgress=!0;const k=this.scene.scene.get("AppScene");k&&(k.isPaused=!0,console.log("MenuManager: Game paused for novel story menu"));const W=this.scene.scene.get("GameScene");if(!W||!W.windowShapes){console.warn("Cannot create novel story: GameScene or WindowShapes not available");return}const K=this.scene.cameras.main.width,j=this.scene.cameras.main.height,S=Math.floor(K*.85),w=Math.floor(j*.9),s=Math.floor((K-S)/2),c=Math.floor((j-w)/2),y=`${L.storyline}-${L.event}`,u=L.eventData.text,h=[y,u],l=L.eventData.choices.map((o,f)=>({text:o.text,callback:()=>{this.scene.time.delayedCall(500,()=>{this.showStoryOutcome(L.storylineData,o.outcome,()=>{const r=this.scene.scene.get("GameScene");if(r&&r.storyManager){const d=r.storyManager;d.isDebugStoryActive()?(console.log(`Debug Story: Choice made - ${o.outcome}`),this.closeDialog()):(console.log(`Real Story: Making choice - ${o.outcome}`),d.makeChoice(o.outcome))}else this.closeDialog()})})}})),n=W.windowShapes.createCYOADialog(s,c,S,w,h,l);n?(n.setDepth(35e3),this.currentDialog=n,this.currentDisplayedMenuType="NOVEL_STORY",console.log(`✨ Novel story dialog created with H menu styling: "${y}"`)):console.warn("Novel story dialog was queued (another narrative window is active)")}showStoryOutcome(L,k,W){if(!this.canShowMenu("STORY_OUTCOME"))return;this.clearCurrentDialog(),this.pushMenu("STORY_OUTCOME"),this.pauseGame();const K=L.outcomes[k]||L.outcomes.a,j="Outcome",S=this.scene.scene.get("GameScene");if(S&&S.windowShapes){const w=this.scene.cameras.main.width,s=this.scene.cameras.main.height,c=Math.floor(w*.85),y=Math.floor(s*.9),u=Math.floor((w-c)/2),h=Math.floor((s-y)/2),l=S.windowShapes.createCYOADialog(u,h,c,y,[j,K],[{text:"Continue",callback:()=>{if(l&&l.scene){console.log("🗑️ Destroying story outcome WindowShapes container");const o=this.scene.scene.get("GameScene");o&&o.windowShapes&&o.windowShapes.activeNarrativeWindow===l&&(console.log("🔄 Clearing activeNarrativeWindow reference for story outcome"),o.windowShapes.activeNarrativeWindow=null),l.destroy()}const n=this.scene.scene.get("GameScene");n&&n.windowShapes?n.windowShapes.waitForActiveWindowClear(()=>{n&&n.storyManager&&(console.log("📖 Completing story after outcome window cleared"),n.storyManager.completeStoryAfterOutcome()),this.resumeGame(),this.storySequenceInProgress=!1,console.log("📖 Story sequence completed - processing queued menus"),this.scene.time.delayedCall(100,()=>this.processQueuedMenus()),W()}):this.scene.time.delayedCall(500,()=>{n&&n.storyManager&&(console.log("📖 Completing story after outcome window closed (fallback)"),n.storyManager.completeStoryAfterOutcome()),this.resumeGame(),this.storySequenceInProgress=!1,console.log("📖 Story sequence completed - processing queued menus (fallback)"),this.scene.time.delayedCall(100,()=>this.processQueuedMenus()),W()})}}])}else{const w={title:j,content:K,buttons:[{text:"Continue",onClick:()=>{this.scene.time.delayedCall(500,()=>{const s=this.scene.scene.get("GameScene");s&&s.storyManager&&(console.log("📖 Completing story after outcome window closed (fallback)"),s.storyManager.completeStoryAfterOutcome()),W()})},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};this.createDialog(w,"STORY_OUTCOME")}}showGameOverMenu(){if(!this.canShowMenu("GAME_OVER"))return;this.clearCurrentDialog(),this.pushMenu("GAME_OVER");const L={title:"GAME OVER",content:"Time's up! You lost. Better luck next time!",buttons:[{text:"Restart Game",onClick:()=>{this.closeDialog(),window.location.reload()},style:{fontSize:"18px",color:"#ffffff",backgroundColor:"#333333",padding:{x:10,y:5}}}]};this.createDialog(L,"GAME_OVER")}showCYOAMenu(L){if(!this.canShowMenu("CYOA"))return;this.clearCurrentDialog(),this.pushMenu("CYOA");const k={title:"CYOA",content:L?.text||"Choose your path.",buttons:[{text:L?.optionA||"Option A",onClick:()=>{}},{text:L?.optionB||"Option B",onClick:()=>{}}]};if(this.createDialog(k,"CYOA"),L?.imageKey)try{const K=this.scene.add.image(0,-110,L.imageKey);K.setOrigin(.5),K.setScrollFactor(0);const j=Math.min(280/(K.width||280),120/(K.height||120));K.setScale(j),this.currentDialog.add(K)}catch{}else{const K=this.scene.add.graphics();K.lineStyle(1,16777215,.5),K.strokeRoundedRect(-140,-170,280,100,6),this.currentDialog.add(K)}this.currentDialog.list.filter(K=>K instanceof ht.GameObjects.Text).filter(K=>K.text===(L?.optionA||"Option A")||K.text===(L?.optionB||"Option B")).forEach(K=>{K.removeAllListeners("pointerdown"),K.on("pointerdown",()=>{const j=K.text===(L?.optionA||"Option A")?L?.followA||"You chose A":L?.followB||"You chose B";this.clearCurrentDialog();const S={title:"Result",content:j,buttons:[{text:"Close",onClick:()=>this.closeDialog()}]};this.createDialog(S,"CYOA")})})}showMoralDecisionMenu(L){if(this.isExitOrShopOpen()){this.enqueueMenu("MORAL_DECISION",L);return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing MORAL_DECISION until CYOA closes"),this.enqueueMenu("MORAL_DECISION",L);return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing MORAL_DECISION until VIRTUAL_PET closes"),this.enqueueMenu("MORAL_DECISION",L);return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing MORAL_DECISION until STORY closes"),this.enqueueMenu("MORAL_DECISION",L);return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing MORAL_DECISION until DESTINATION closes"),this.enqueueMenu("MORAL_DECISION",L);return}if(this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing MORAL_DECISION until REGION_CHOICE closes"),this.enqueueMenu("MORAL_DECISION",L);return}if(!this.canShowMenu("MORAL_DECISION"))return;this.clearCurrentDialog(),this.pushMenu("MORAL_DECISION");const k={title:"MORAL DECISION",content:L?.text||"What would you do?",buttons:[{text:L?.optionA||"Option A",onClick:()=>{}},{text:L?.optionB||"Option B",onClick:()=>{}}]};this.createDialog(k,"MORAL_DECISION");try{const K=this.scene.scene.get("GameScene");if(K){const j=L?.petIndex??0;if(K.getVirtualPet?.(j)){const w=this.scene.add.ellipse(0,-110,60,60,16764006,1);w.setStrokeStyle(2,0,1),w.setScrollFactor(0),this.currentDialog.add(w),this.scene.tweens.add({targets:w,y:w.y-3,duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"});const s=this.scene.add.text(0,-140,`Pet ${j+1}`,{fontSize:"14px",color:"#ffffff",fontStyle:"bold",stroke:"#000000",strokeThickness:1}).setOrigin(.5);s.setScrollFactor(0),this.currentDialog.add(s)}}}catch{}this.currentDialog.list.filter(K=>K instanceof ht.GameObjects.Text).filter(K=>K.text===(L?.optionA||"Option A")||K.text===(L?.optionB||"Option B")).forEach(K=>{K.removeAllListeners("pointerdown"),K.on("pointerdown",()=>{const j=K.text===(L?.optionA||"Option A")?L?.followA||"You chose A":L?.followB||"You chose B";this.clearCurrentDialog();const S={title:"Result",content:j,buttons:[{text:"Close",onClick:()=>this.closeDialog()}]};this.createDialog(S,"MORAL_DECISION")})})}showVirtualPetMenu(L){if(console.log("MenuManager: showVirtualPetMenu called with petSprite:",L),console.log("MenuManager: Current menu stack before VIRTUAL_PET:",this.menuStack.map(W=>`${W.type}(${W.priority})`)),console.log("MenuManager: Current displayed menu type:",this.currentDisplayedMenuType),this.isExitOrShopOpen()){this.enqueueMenu("VIRTUAL_PET",{petSprite:L});return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing VIRTUAL_PET until CYOA closes"),this.enqueueMenu("VIRTUAL_PET",{petSprite:L});return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing VIRTUAL_PET until STORY closes"),this.enqueueMenu("VIRTUAL_PET",{petSprite:L});return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing VIRTUAL_PET until DESTINATION closes"),this.enqueueMenu("VIRTUAL_PET",{petSprite:L});return}if(this.currentDisplayedMenuType==="REGION_CHOICE"){console.log("⏳ Queueing VIRTUAL_PET until REGION_CHOICE closes"),this.enqueueMenu("VIRTUAL_PET",{petSprite:L});return}if(!this.canShowMenu("VIRTUAL_PET")){console.log("MenuManager: Cannot show VIRTUAL_PET menu - blocked by higher priority");return}this.clearCurrentDialog(),this.pushMenu("VIRTUAL_PET"),this.scene.events.emit("gamePaused");const k={title:"band member",content:"doing fine",buttons:[{text:"Close",onClick:()=>{this.closeDialog();const W=this.scene.scene.get("GameScene");W&&W.events.emit("gameResumed")}}]};if(this.createDialog(k,"VIRTUAL_PET"),L)try{const W=this.scene.add.ellipse(0,-50,L.width,L.height,L.fillColor,L.fillAlpha);W.setStrokeStyle(L.lineWidth,L.strokeColor,L.strokeAlpha),W.setScrollFactor(0),this.currentDialog.add(W);let K="";try{const w=this.scene.scene.get("GameScene")?.virtualPets;if(w&&w.length){const s=w.findIndex(c=>c?.getPetSprite?.()===L);s>=0&&(K=String(s+1))}}catch{}if(K){const S=this.scene.add.text(0,-50,K,{fontSize:"16px",color:"#ffffff",fontStyle:"bold",stroke:"#000000",strokeThickness:2}).setOrigin(.5);S.setScrollFactor(0),this.currentDialog.add(S)}const j=this.scene.scene.get("GameScene");if(j){let S;try{const M=j?.virtualPets;M&&M.length&&(S=M.find(b=>b?.getPetSprite?.()===L)),!S&&j.getVirtualPet&&(S=j.getVirtualPet(0))}catch{}if(!S)return;const w=S.getFoodMeterElements(),s=S.getBathroomMeterElements?.(),c=S.getBoredMeterElements?.(),y=this.scene.add.text(0,20,"FOOD",{fontSize:"16px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5);y.setScrollFactor(0);const u=120,h=15,l=this.scene.add.rectangle(0,45,u,h,0,.6);l.setStrokeStyle(2,16777215,.8),l.setScrollFactor(0);const n=S.getFoodValue?.()||0,o=Math.floor(u*(n/10)),f=this.scene.add.rectangle(-u/2,45,o,h-4,3066993,1);f.setOrigin(0,.5),f.setScrollFactor(0);const r=this.scene.add.text(0,70,"BATH",{fontSize:"16px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5);r.setScrollFactor(0);const d=this.scene.add.rectangle(0,95,u,h,0,.6);d.setStrokeStyle(2,16777215,.8),d.setScrollFactor(0);const p=ht.Math.Clamp(S?.bathroomValue??0,0,10),v=this.scene.add.rectangle(-u/2,95,Math.floor(u*(p/10)),h-4,3447003,1).setOrigin(0,.5);v.setScrollFactor(0);const g=this.scene.add.text(0,120,"BORED",{fontSize:"16px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5);g.setScrollFactor(0);const m=this.scene.add.rectangle(0,145,u,h,0,.6);m.setStrokeStyle(2,16777215,.8),m.setScrollFactor(0);const T=ht.Math.Clamp(S?.boredValue??0,0,10),P=this.scene.add.rectangle(-u/2,145,Math.floor(u*(T/10)),h-4,10181046,1).setOrigin(0,.5);P.setScrollFactor(0),this.currentDialog.add([y,l,f,r,d,v,g,m,P])}}catch(W){console.log("Could not create pet copy in menu:",W)}}showDestinationMenu(L=!1){if(this.isExitOrShopOpen()){this.enqueueMenu("DESTINATION",{includeFinalShowStep:L});return}if(this.currentDisplayedMenuType==="CYOA"){console.log("⏳ Queueing DESTINATION until CYOA closes"),this.enqueueMenu("DESTINATION",{includeFinalShowStep:L});return}if(this.currentDisplayedMenuType==="VIRTUAL_PET"){console.log("⏳ Queueing DESTINATION until VIRTUAL_PET closes"),this.enqueueMenu("DESTINATION",{includeFinalShowStep:L});return}if(this.currentDisplayedMenuType==="STORY"||this.currentDisplayedMenuType==="NOVEL_STORY"||this.currentDisplayedMenuType==="STORY_OUTCOME"){console.log("⏳ Queueing DESTINATION until STORY closes"),this.enqueueMenu("DESTINATION",{includeFinalShowStep:L});return}if(this.currentDisplayedMenuType==="DESTINATION"){console.log("⏳ Queueing DESTINATION until current DESTINATION closes"),this.enqueueMenu("DESTINATION",{includeFinalShowStep:L});return}if(!this.canShowMenu("DESTINATION"))return;this.clearCurrentDialog(),this.pushMenu("DESTINATION");const k={title:"DESTINATION",content:"Choose a destination or assign custom spots.",buttons:[{text:"Shop 1",onClick:()=>{}},{text:"Shop 2",onClick:()=>{}},{text:"Shop 3",onClick:()=>{}},{text:"Go",onClick:()=>{this.closeDialog()}}]};this.createDialog(k,"DESTINATION");const W=[],K=[];for(let n=0;n<5;n++){const o=this.scene.add.circle(-110+n*55,120,12,16763955);o.setInteractive({draggable:!0}),o.setScrollFactor(0),this.currentDialog.add(o),W.push(o);const f=this.scene.add.text(o.x,o.y,String(n+1),{fontSize:"12px",color:"#000000",fontStyle:"bold"});f.setOrigin(.5),f.setScrollFactor(0),this.currentDialog.add(f),K.push(f)}const j=this.currentDialog.list.filter(n=>n instanceof ht.GameObjects.Text).filter(n=>/Shop\s+[1-3]/i.test(n.text)),S=new Map;j.forEach(n=>S.set(n,[]));const w=new Map,s=n=>n.displayWidth?n.displayWidth:n.width||80,c=n=>n.radius?n.radius:12,y=n=>{const o=S.get(n)||[];if(o.length===0)return;const f=s(n),r=c(o[0]),d=12,p=r*2+d,v=n.x+f/2+r+d,g=n.y;o.forEach((m,T)=>{m.x=v+T*p,m.y=g;const P=W.indexOf(m),M=K[P];M&&(M.x=m.x,M.y=m.y)})},u=(n,o)=>{if(!o)return;const f=S.get(o);if(!f)return;const r=f.indexOf(n);r>=0&&f.splice(r,1),y(o)},h=n=>{let o=null,f=Number.POSITIVE_INFINITY;j.forEach(d=>{const p=n.x-d.x,v=n.y-d.y,g=p*p+v*v;g<f&&(f=g,o=d)});const r=w.get(n)||null;if(o){if(r!==o){u(n,r);const d=S.get(o);d.indexOf(n)===-1&&d.push(n),w.set(n,o)}r&&r!==o&&y(r),y(o)}else r&&(u(n,r),w.set(n,null))};W.forEach((n,o)=>{n.on("drag",f=>{const r=this.currentDialog.getLocalPoint?this.currentDialog.getLocalPoint(f.x,f.y):{x:f.x-this.currentDialog.x,y:f.y-this.currentDialog.y};n.x=r.x,n.y=r.y;const d=K[o];d&&(d.x=n.x,d.y=n.y)}),n.on("dragend",()=>h(n))});const l=this.currentDialog.list.filter(n=>n instanceof ht.GameObjects.Text).find(n=>n.text==="Go");l&&(l.removeAllListeners("pointerdown"),l.on("pointerdown",()=>{const n=j.filter(f=>(S.get(f)||[]).length>0).map(f=>({title:f.text,circles:S.get(f)||[]}));L&&n.push({title:"show",circles:[]});const o=f=>{if(f>=n.length){this.clearCurrentDialog();return}this.clearCurrentDialog();const r=n[f],d={title:r.title,content:"Proceed to next destination.",buttons:[{text:f<n.length-1?"Continue":"Done",onClick:()=>{this.clearCurrentDialog(),o(f+1)}}]};this.createDialog(d,"DESTINATION_STEP"),this.scene.cameras.main.width,this.scene.cameras.main.height;const p=this.currentDialog,v=-40,g=-120,m=36;r.circles.forEach((T,P)=>{const M=this.scene.add.circle(g+P*m,v,12,16763955),b=W.indexOf(T),R=b>=0?String(b+1):"?",A=this.scene.add.text(M.x,M.y,R,{fontSize:"12px",color:"#000000",fontStyle:"bold"}).setOrigin(.5);p.add(M),p.add(A)})};o(0)}))}createDialog(L,k){const W=this.scene.cameras.main.width,K=this.scene.cameras.main.height,j=L.width||300,S=L.height||350;this.currentDialog=this.scene.add.container(W/2,K/2),this.currentDialog.setScrollFactor(0),this.currentDialog.setDepth(5e4),this.currentDialog.setSize(j,S),this.currentDialog.containerWidth=j,this.currentDialog.containerHeight=S,this.currentDisplayedMenuType=k||null;const w=this.scene.scene.get("GameScene");w&&w.gameState&&w.gameState.updateState({hasOpenMenu:!0});try{const l=this.scene.scene.get("GameScene"),n=l&&l.windowShapes||this.windowShapes;if(n&&(this.windowShapes=n),n&&n.createDitheredOverlay){const f={START:"hypercard_diamonds",IGNITION:"hypercard_diamonds",CYOA:"hypercard_waves",EXIT:"hypercard_waves",SHOP:"hypercard_waves",STORY:"hypercard_wood",DESTINATION:"hypercard_wood"}[k||""];f&&(this.currentDialog.__overlayPattern=f),n.createDitheredOverlay(this.currentDialog),this.currentDialog.background=this.currentDialog.ditheredOverlay||null;try{const r=this.currentDialog.ditheredOverlay;r&&(r.setDepth(this.currentDialog.depth-1),r.disableInteractive?.())}catch{}}}catch{}const s=j/2,c=S/2;let y=null;try{const l=this.scene.scene.get("GameScene"),n=l&&l.windowShapes||this.windowShapes;if(n&&(this.windowShapes=n),console.log("🔍 WindowShapes check:",{windowShapes:!!n,createCollageRect:!!(n&&n.createCollageRect),gameScene:!!l}),n&&n.createCollageRect&&(console.log("🏗️ Creating collage background..."),y=n.createCollageRect({x:-s,y:-c,width:j,height:S,fillColor:16777215,fillAlpha:1},!1,"window"),console.log("🏗️ Collage background created:",!!y),y)){y.setDepth(-1),y.setPosition(0,0);const o=this.scene.textures.get("x");let f="x";!o||!o.key?(this.scene.textures.exists("fallback")||this.scene.textures.generate("fallback",{data:["#00ff00"],pixelWidth:1,pixelHeight:1}),f="fallback",console.log("⚠️ Using green fallback texture instead of x.png")):console.log("✅ X texture is ready");const r=this.scene.add.tileSprite(0,0,j,S,f);r.setOrigin(0,0),r.setDepth(-2),r.setPosition(-s,-c),console.log("🎨 Background sprite positioned at:",r.x,r.y),console.log("🎭 Mask temporarily disabled - should see green TileSprite"),this.currentDialog.add(r),this.scene.events.on("postupdate",()=>{r&&r.active&&(r.tilePositionX-=.5,r.tilePositionY+=.3)}),this.currentDialog.backgroundSprite=r,console.log("🎨 Window background created with texture:",f),console.log("🔍 Dialog container info:",{x:this.currentDialog.x,y:this.currentDialog.y,width:this.currentDialog.width,height:this.currentDialog.height,childrenCount:this.currentDialog.list.length,dialogWidth:j,dialogHeight:S}),this.currentDialog.add(y),this.currentDialog.collageWindow=y;const d=`menu_window_${Date.now()}_${Math.random().toString(36).slice(2,7)}`;try{n.registerAnimatedShape(d,y,"window",-s,-c,j,S),console.log("🎬 Registered window animation:",d)}catch(p){console.error("❌ Failed to register window animation:",p)}y.__shapeId=d;try{y.setScale(.01),this.scene.tweens.add({targets:y,scaleX:1,scaleY:1,duration:200,ease:"Back.easeOut"})}catch{}}}catch(l){console.error("❌ Error creating collage background:",l)}if(!y){const l=this.scene.add.graphics();l.fillStyle(3355443,.9),l.fillRoundedRect(-s,-c,j,S,10),l.lineStyle(2,16777215,1),l.strokeRoundedRect(-s,-c,j,S,10),l.setDepth(-1),this.currentDialog.add(l)}const u=`<< ${String(L.title||"")} >>`;if(L.title&&L.title.trim())try{const l=this.windowShapes||this.scene.scene.get("GameScene")?.windowShapes;if(l&&l.createNarrativeText){let n=-s-20;const o=S<120?-c+5:-c-12;let f=j-80;const r=this.scene.add.text(n,o,u,{fontSize:"20px",color:"#ffffff",align:"left",fontFamily:"Arial",padding:{x:8,y:6},wordWrap:{width:f,useAdvancedWrap:!0}});r.setOrigin(0,.5),r.setWordWrapWidth(f),r.setAlign("left"),r.setDepth(11);const d=r.getBounds(),p=l.createNarrativeBackground({x:d.x-8,y:d.y-8,width:d.width+16,height:d.height+16,fillColor:0,shapeType:"narrativeBackground"},!0);if(p.setDepth(10),this.currentDialog.add(p),this.currentDialog.add(r),L.subtitle){let v=s-2-80;const g=o+40+20;let m=f-20;const T=L.subtitle,P=this.scene.add.text(v,g,T,{fontSize:"12px",color:"#ffffff",align:"right",fontFamily:"Arial",fontStyle:"italic",padding:{x:8,y:6},wordWrap:{width:m,useAdvancedWrap:!0}});P.setOrigin(.5,.5),P.setWordWrapWidth(m),P.setAlign("right"),P.setDepth(10);const M=l.generateUniqueRotation?l.generateUniqueRotation():0;P.setRotation(M);const b=P.getBounds(),R=8,A=b.width+R*2,D=b.height+R*2,G=this.scene.add.rectangle(v,g,A,D,0,0);G.setDepth(12),G.setRotation(M),G.setInteractive({useHandCursor:!0}),console.log("🎵 Creating subtitle background manually with size:",A,"x",D);const F=this.scene.add.graphics();F.fillStyle(0,1);const B=3,N={x:-A/2+ht.Math.Between(0,B),y:-D/2+ht.Math.Between(0,B)},z={x:A/2+ht.Math.Between(-B,0),y:-D/2+ht.Math.Between(0,B)},$={x:A/2+ht.Math.Between(-B,0),y:D/2+ht.Math.Between(-B,0)},Q={x:-A/2+ht.Math.Between(0,B),y:D/2+ht.Math.Between(-B,0)};F.beginPath(),F.moveTo(N.x,N.y),F.lineTo(z.x,z.y),F.lineTo($.x,$.y),F.lineTo(Q.x,Q.y),F.closePath(),F.fillPath(),F.setPosition(v,g),F&&F.setRotation&&F.setRotation(M),F.setDepth(8);const Z=[1,1.15];let tt=1,H=0;if(P.__subtitleAnimation={steps:Z,currentStep:H,stepDirection:tt,elements:[P,F,G],position:{x:v,y:g}},l.registerAnimatedShape){const J=`subtitle_pulse_${Date.now()}`;l.registerAnimatedShape(J,P,"subtitle_pulse",0,0,0,0),P.subtitleAnimationId=J}G.on("pointerdown",J=>{J.event.stopPropagation(),console.log("🎵 Subtitle pointerdown")}),G.on("pointerup",J=>{J.event.stopPropagation(),console.log("🎵 Subtitle clicked - opening Bandcamp"),window.open("https://summerbruise.bandcamp.com/album/infinity-guise","_blank")}),G.on("pointerover",()=>{console.log("🎵 Subtitle hover")}),G.on("pointerout",()=>{console.log("🎵 Subtitle hover out")}),this.currentDialog.add(F),this.currentDialog.add(G),this.currentDialog.add(P),this.currentDialog.subtitleElement=P,this.currentDialog.subtitleBackground=F,this.currentDialog.subtitleClickArea=G}}else{const n=this.scene.add.text(-s-3,-c-3,u,{fontSize:"20px",color:"#000000",fontStyle:"bold"}).setOrigin(0,0);if(this.currentDialog.add(n),L.subtitle){const o=this.scene.add.text(s-2,-c+28,L.subtitle,{fontSize:"12px",color:"#000000",fontStyle:"italic"}).setOrigin(1,0);this.currentDialog.add(o)}}}catch{const l=this.scene.add.text(-s-3,-c-3,u,{fontSize:"20px",color:"#000000",fontStyle:"bold"}).setOrigin(0,0);if(this.currentDialog.add(l),L.subtitle){const n=this.scene.add.text(s-2,-c+28,L.subtitle,{fontSize:"12px",color:"#000000",fontStyle:"italic"}).setOrigin(1,0);this.currentDialog.add(n)}}if(L.content){const l=this.windowShapes||this.scene.scene.get("GameScene")?.windowShapes;if(k==="START"&&L.texts&&Array.isArray(L.texts))this.currentDialog.storyTexts=L.texts,this.currentDialog.currentTextIndex=0,this.currentDialog.containerWidth=j,this.currentDialog.containerHeight=S,this.startTextSequence(this.currentDialog);else if(k==="POTHOLE"){const o=j-12,f=String(L.content||"").trim(),r=this.scene.add.text(0,0,f,{fontSize:"12px",color:"#000000",wordWrap:{width:o,useAdvancedWrap:!0},align:"center"}).setOrigin(.5);r.setPosition(0,0),this.currentDialog.add(r)}else{const n=String(L.content||"").split(`
`).map(T=>T.trim()).filter(Boolean),o=Math.max(1,n.length),f=40,d=S-f-110,p=-s+10,v=s-10,g=j-20,m=T=>{if(o===1)return-c+f+d/2;const P=d/(o-1);return-c+f+T*P};for(let T=0;T<o;T++){const P=n[T]||n[0],M=m(T),b=o===2&&T===1,R=b?v-g:p;try{if(l&&l.createNarrativeText)l.createNarrativeText(R,M,P,g,this.currentDialog);else{const A=this.scene.add.text(0,0,P,{fontSize:"16px",color:"#000000",wordWrap:{width:g},align:b?"right":"left"}).setOrigin(b?1:0,.5);A.setPosition(b?v:p,M),this.currentDialog.add(A)}}catch{}}}}if(k!=="START"){const l=L.content?c-70:c-90,n=50;L.buttons.forEach((o,f)=>{const r=l-(L.buttons.length-1-f)*n,d=this.scene.add.container(0,r);d.setDepth((this.currentDialog.depth||0)+2),d.setScrollFactor(0),this.currentDialog.add(d);try{this.currentDialog.bringToTop?.(d)}catch{}const p=/Close/i.test(o.text),v=p?120:160,g=p?30:34,m=v/2,T=g/2;let P=null;try{const G=this.scene.scene.get("GameScene"),F=G&&G.windowShapes||this.windowShapes;if(F&&(this.windowShapes=F),F&&F.createCollageButton&&(P=F.createCollageButton(-m,-T,v,g),P)){d.add(P);const B=`menu_btn_${Date.now()}_${Math.random().toString(36).slice(2,5)}`;try{F.registerAnimatedShape(B,P,"button",-m,-T,v,g)}catch{}P.__shapeId=B}}catch{}try{p&&d.setPosition(s-6-m,c-6-T)}catch{}const M=/regional gas station/i.test(o.text),b=M||o.text.length>16,R=M?`regional
gas station`:o.text,A=this.scene.add.text(0,0,R,{fontSize:M?"11px":b?"12px":"14px",color:"#000000",fontStyle:"bold"}).setOrigin(.5);d.add(A);try{const G=o.__priceFilled,F=o.__priceEmpty;if(!/Close/i.test(o.text)&&(G||F)){A.setOrigin(0,.5),A.x=-m+8,A.y=0;const N=this.scene.add.text(0,0,G||"",{fontSize:"14px",color:"#000000",fontStyle:"bold"}).setOrigin(1,.5),z=this.scene.add.text(0,0,F||"",{fontSize:"14px",color:"#888888",fontStyle:"bold"}).setOrigin(1,.5),$=m-8;z.x=$,z.y=0,N.x=$-z.width,N.y=0,d.add(N),d.add(z)}}catch{}try{k==="TUTORIAL_INTERRUPT"&&/Continue/i.test(o.text)&&(this.currentDialog.buttonText=A)}catch{}const D=this.scene.add.rectangle(0,0,v,g,0,0);if(D.setOrigin(.5),D.setScrollFactor(0),D.setDepth((d.depth||1)+1),d.add(D),D.setInteractive({useHandCursor:!0}).on("pointerdown",G=>{console.log("🔴 button pointerdown (hitTarget)",{x:G.worldX,y:G.worldY,depth:D.depth})}).on("pointerup",G=>{console.log("🟢 button pointerup (hitTarget)",{x:G.worldX,y:G.worldY,depth:D.depth});try{this.scene.input.setDefaultCursor("default")}catch{}try{o.onClick()}catch(F){console.warn("button onClick error",F)}}),!P){const G=this.scene.add.graphics();G.fillStyle(3426654,1),G.fillRoundedRect(-m,-T,v,g,6),G.lineStyle(2,16777215,1),G.strokeRoundedRect(-m,-T,v,g,6),d.addAt(G,0),A.setColor("#ffffff")}try{const G=this.scene.add.graphics();G.lineStyle(1,16711680,1),G.strokeRect(-m,-T,v,g),d.addAt(G,0),G.setAlpha(.9),G.setDepth((d.depth||1)+1),this.scene.tweens.add({targets:G,alpha:.2,yoyo:!0,repeat:5,duration:150}),this.scene.time.delayedCall(2e3,()=>{try{G.destroy()}catch{}})}catch{}D.on("pointerover",()=>{try{this.scene.input.setDefaultCursor("pointer")}catch{}}),D.on("pointerout",()=>{try{this.scene.input.setDefaultCursor("default")}catch{}})})}const h=this.scene.scene.get("GameScene");h&&h.updateAllTutorialOverlays&&h.updateAllTutorialOverlays()}createActionButtons(L){return L.map(k=>{const W=this.scene.add.text(0,0,k.text,{fontSize:"18px",color:k.style?.color||"#ffffff",backgroundColor:k.style?.backgroundColor||"#34495e",padding:{x:15,y:8}});return W.setInteractive().on("pointerdown",()=>{k.onClick()}).on("pointerover",()=>{this.scene.tweens.add({targets:W,scaleX:1.05,scaleY:1.05,duration:100})}).on("pointerout",()=>{this.scene.tweens.add({targets:W,scaleX:1,scaleY:1,duration:100})}),W})}createOverlayBackground(L,k,W,K=.3){const j=`menu_overlay_${Date.now()}`,S=this.overlayManager.createMenuOverlay(j,W,K);return S.container.overlayInstance=S,S.container}clearCurrentDialog(){if(this.currentDialog){try{const L=this.currentDialog.collageWindow;if(L&&L.scene){L.once("destroy",()=>{this.finishDialogCleanup()}),this.scene.tweens.add({targets:L,scaleX:.01,scaleY:.01,duration:160,ease:"Back.easeIn",onComplete:()=>{try{L.destroy()}catch{}}});return}}catch{}this.finishDialogCleanup()}}finishDialogCleanup(){if(!this.currentDialog){this.scene.time.delayedCall(10,()=>this.processQueuedMenus());return}if(this.menuStack.length>0){const K=this.menuStack[this.menuStack.length-1];if(K&&K.type!==this.currentDisplayedMenuType){console.log("MenuManager: Skipping cleanup - new menu being created:",K.type);return}}try{const K=this.windowShapes||this.scene.scene.get("GameScene")?.windowShapes;if(K&&K.unregisterAnimatedShape){["hMenuAnimationId","cyoaAnimationId","animationId"].forEach(y=>{const u=this.currentDialog[y];u&&K.unregisterAnimatedShape(u)});const S=this.currentDialog.collageWindow;S&&S.__shapeId&&K.unregisterAnimatedShape(S.__shapeId);const w=this.currentDialog.backgroundSprite;w&&w.destroy&&w.destroy();const s=this.currentDialog.geometryMask;s&&s.destroy&&s.destroy();const c=y=>{try{(y&&y.list?y.list:[]).forEach(h=>{if(h&&h.type==="Graphics"){const l=h.animationId,n=h.cyoaAnimationId;l&&K.unregisterAnimatedShape(l),n&&K.unregisterAnimatedShape(n)}h&&h.list&&Array.isArray(h.list)&&c(h)})}catch{}};c(this.currentDialog)}}catch{}if(this.currentDialog.background){const K=this.currentDialog.background;K.overlayInstance?K.overlayInstance.destroy():K.destroy()}const L=this.currentDialog.subtitleElement;if(L&&L.pulseTween&&(L.pulseTween.stop(),L.pulseTween.destroy()),this.currentDialog.turnKeyDial){const K=this.currentDialog.turnKeyDial;K.sliderTrack&&K.sliderTrack.destroy(),K.handle&&K.handle.destroy()}if(this.currentDialog.dialLabel){const K=this.currentDialog.dialLabel;K.startLabel&&K.startLabel.destroy(),K.turnKeyLabel&&K.turnKeyLabel.destroy()}if(this.currentDialog.startMeter){const K=this.currentDialog.startMeter;K.meterBackground&&K.meterBackground.destroy(),K.meterFill&&K.meterFill.destroy(),K.meterText&&K.meterText.destroy()}if(this.currentDialog.pointerDownHandler&&this.scene.input.off("pointerdown",this.currentDialog.pointerDownHandler),this.currentDialog.pointerMoveHandler&&this.scene.input.off("pointermove",this.currentDialog.pointerMoveHandler),this.currentDialog.pointerUpHandler&&this.scene.input.off("pointerup",this.currentDialog.pointerUpHandler),this.currentDialog.momentumTimer&&this.currentDialog.momentumTimer.destroy(),this.currentDialog.countdownText&&(this.currentDialog.countdownText.destroy(),this.currentDialog.countdownText=null),this.textDisplayCallbacks.forEach(K=>{K&&K.destroy&&K.destroy()}),this.textDisplayCallbacks=[],this.currentDialog.destroy(),this.currentDialog=null,this._resumeOnNextClose){this._resumeOnNextClose=!1;try{const K=this.scene.scene.get("AppScene");K&&(K.isPaused=!1);const j=this.scene.scene.get("GameScene");j&&(j.carMechanics?.resumeDriving?.(),j.events.emit("gameResumed"))}catch{}}this.currentDisplayedMenuType==="DESTINATION"||this.currentDisplayedMenuType==="DESTINATION_STEP"?this.resumeGameAfterDestinationMenu(!0):this.currentDisplayedMenuType==="EXIT"?this.resumeGameAfterDestinationMenu(!1):this.currentDisplayedMenuType==="SHOP"&&(this.shouldRestorePreviousMenu()||this.resumeGameAfterDestinationMenu(!1)),this.currentDisplayedMenuType=null;const k=this.scene.scene.get("GameScene");k&&k.gameState&&k.gameState.updateState({hasOpenMenu:!1}),this.shouldRestorePreviousMenu()?this.scene.time.delayedCall(100,()=>{this.restorePreviousMenu(),this.userDismissedMenuType=null}):this.userDismissedMenuType=null;const W=this.scene.scene.get("GameScene");W&&W.updateAllTutorialOverlays&&W.updateAllTutorialOverlays(),this.processQueuedMenus()}closeDialog(){console.log(`🚪 MenuManager: closeDialog() called. Current menu type: ${this.currentDisplayedMenuType}`),console.log("🚪 MenuManager: Menu stack before closeDialog:",this.menuStack.map(k=>`${k.type}:${k.priority}`));const L=this.currentDisplayedMenuType;if((L==="STORY"||L==="STORY_OUTCOME"||L==="NOVEL_STORY")&&(this.storySequenceInProgress=!1,console.log("📖 Story sequence flag cleared due to manual close")),this.stopMenuAutoComplete(),this.userDismissedMenuType=this.currentDisplayedMenuType,L==="SHOP"&&(console.log("🛒 Closing SHOP menu - also closing parent EXIT menu"),this.menuStack.findIndex(W=>W.type==="EXIT")!==-1&&(console.log("🚪 Found parent EXIT menu, closing it as well"),this.popSpecificMenu("EXIT"),this.userDismissedMenuType="EXIT")),this.currentDisplayedMenuType){const k=this.currentDisplayedMenuType;this.MENU_CATEGORIES.ONE_TIME.includes(k)?this.clearMenusFromStack(k):this.popSpecificMenu(k),["STORY","NOVEL_STORY","STORY_OUTCOME","PET_STORY"].includes(k)||this.resumeGame()}if(L==="TURN_KEY"){this.scene.events.emit("ignitionMenuHidden");const k=this.scene.scene.get("GameScene");k&&k.events.emit("ignitionMenuHidden")}else if(L==="CYOA"){const k=this.scene.scene.get("AppScene");k&&(k.isPaused=!1);const W=this.scene.scene.get("GameScene");W&&W.events.emit("gameResumed")}else if(L==="NOVEL_STORY"){const k=this.scene.scene.get("AppScene");k&&(k.isPaused=!1);const W=this.scene.scene.get("GameScene");W&&W.events.emit("gameResumed")}if(this.clearCurrentDialog(),this.menuStack.length>0){const k=this.menuStack[this.menuStack.length-1];this.currentDisplayedMenuType=k.type,console.log(`🔄 Updated currentDisplayedMenuType to: ${this.currentDisplayedMenuType}`)}else this.currentDisplayedMenuType=null,console.log("🔄 Cleared currentDisplayedMenuType (no menus on stack)");if(this._resumeOnNextClose){try{this.scene.scene.get("GameScene")?.resumeAfterCollision?.()}catch{}this._resumeOnNextClose=!1}this.processQueuedMenus(),console.log("🚪 MenuManager: Menu stack after closeDialog:",this.menuStack.map(k=>`${k.type}:${k.priority}`))}closeCurrentDialog(){console.log("MenuManager: closeCurrentDialog called"),this.userDismissedMenuType=this.currentDisplayedMenuType,this.currentDisplayedMenuType&&this.popSpecificMenu(this.currentDisplayedMenuType),this.clearCurrentDialog()}resumeGameAfterDestinationMenu(L){const k=this.scene.scene.get("AppScene");k&&(k.isPaused=!1);const W=this.scene.scene.get("GameScene");W&&(L?(W.carStarted=!1,W.gameState&&W.gameState.updateState({carStarted:!1,speedCrankPercentage:0}),W.carMechanics&&W.carMechanics.stopDriving(),W.removeKeysFromIgnition&&W.removeKeysFromIgnition()):W.carStarted&&W.carMechanics&&W.carMechanics.resumeDriving(),W.events.emit("gameResumed"))}createMaskedMenuWindow(L,k,W,K,j="none",S){const w=this.windowShapes||this.scene.scene.get("GameScene")?.windowShapes;if(!w)throw new Error("WindowShapes not available");const s={x:L-W/2,y:k-K/2,width:W,height:K,fillColor:16777215,fillAlpha:1},c=w.createMaskedWindow(s,void 0,!0);return j==="image"&&S?w.addImageToMaskedWindow(c.contentContainer,S,0,0,1):j==="camera"&&S&&w.addCameraViewToMaskedWindow(c.contentContainer,S,0,0,1),c}createMaskedMenuWithTiledBackground(L,k,W,K,j,S=0,w=0){const s=this.windowShapes||this.scene.scene.get("GameScene")?.windowShapes;if(!s)throw new Error("WindowShapes not available");const c={x:L-W/2,y:k-K/2,width:W,height:K,fillColor:16777215,fillAlpha:1},y=s.createMaskedWindow(c,void 0,!0),u=s.addTiledScrollingBackground(y.contentContainer,j,0,0,S,w);return u.setDisplaySize(W,K),{...y,tileSprite:u}}showMaskedStartMenu(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=this.createMaskedMenuWindow(L/2,k/2,Math.floor(L*.85),Math.floor(k*.9),"camera",this.scene.cameras.main);this.scene.add.existing(W.window),this.scene.add.existing(W.contentContainer)}showStartMenuWithTiledBackground(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=this.createMaskedMenuWithTiledBackground(L/2,k/2,Math.floor(L*.85),Math.floor(k*.9),"x",.5,-.3);this.scene.add.existing(W.window),this.scene.add.existing(W.contentContainer),this.currentMaskedWindow=W,console.log("🎭 Created START menu with x.png tiled scrolling background")}showTiledBackgroundTest(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=this.createMaskedMenuWithTiledBackground(L/2,k/2,300,200,"x",.5,-.3);this.scene.add.existing(W.window),this.scene.add.existing(W.contentContainer),console.log("🎭 Test window created with x.png tiled scrolling background"),console.log("📝 Call menuManager.hideTiledBackgroundTest() to remove it"),this.testMaskedWindow=W}hideTiledBackgroundTest(){const L=this.testMaskedWindow;L&&(L.window.destroy(),L.contentContainer.destroy(),this.testMaskedWindow=null,console.log("🎭 Test window removed"))}startTextSequence(L){if(!L||!L.scene)return;const k=this.scene.add.rectangle(0,0,L.containerWidth,L.containerHeight,0,0);k.setInteractive(),k.on("pointerup",()=>{this.revealNextText(L)}),L.add(k),L.clickArea=k,this.revealNextText(L)}revealNextText(L){if(!L||!L.scene)return;if(L.currentTextIndex>=L.storyTexts.length){this.showStartButtons(L);return}const k=L.storyTexts[L.currentTextIndex],W=L.storyTexts.length,K=130,j=120,S=-L.containerHeight/2+K,s=L.containerHeight/2-j-S;let c;if(W===1)c=S+s/2;else{const v=s/(W-1);c=S+L.currentTextIndex*v}console.log(`📏 Positioning text ${L.currentTextIndex}: totalTexts=${W}, availableHeight=${s}, spacing=${W>1?s/(W-1):"N/A"}, textY=${c}`);const y=L.currentTextIndex%2===0,u=L.containerWidth||this.currentDialog?.containerWidth||this.scene.cameras.main.width*.85,h=Math.max(2,Math.floor(u*.02)),l=Math.max(12,Math.floor(u*.06)),n=Math.min(u*.6,220),o=Math.random(),f=(Math.random()-.5)*4,r=Math.floor(u*.03);let d;y?(d=-u/2+h+o*(l-2),d-=Math.random()*r):(d=u/2-h-o*(l-2),d+=Math.random()*r),d+=f,(this.currentDisplayedMenuType==="TUTORIAL_INTERRUPT"||this.currentDisplayedMenuType==="IGNITION")&&(d+=50),L.isPothole&&(d+=50);const p=Math.max(-u/2-r,Math.min(u/2+r,d));try{const v=this.windowShapes||this.scene.scene.get("GameScene")?.windowShapes;if(v&&v.createNarrativeText){console.log(`📝 Creating text ${L.currentTextIndex}: "${k}" at (${p}, ${c}), width: ${n}, side: ${y?"left":"right"}, ${y?"left":"right"}-justified`);const g=v.createNarrativeText(p,c,k,n,L,y?"left":"right");if(g&&g.textElement&&g.textElement.getBounds){const m=g.textElement.getBounds();console.log(`📏 Text ${L.currentTextIndex} bounds: top=${m.top}, bottom=${m.bottom}, height=${m.height}`)}}}catch{}L.currentTextIndex++}showStartButtons(L){if(!L||!L.scene)return;if(L.buttonsCreated){console.log("🔘 Buttons already created, skipping");return}L.buttonsCreated=!0;const k=L.clickArea;k&&k.scene&&(k.destroy(),L.clickArea=null);const W=L.containerHeight/2-60,K=L.containerWidth/2-53,j=this.scene.add.container(K,W);j.setDepth((L.depth||0)+2),j.setScrollFactor(0),L.add(j);const S=120,w=34,s=S/2,c=w/2;let y=null;try{const l=this.scene.scene.get("GameScene"),n=l&&l.windowShapes||this.windowShapes;if(n&&(this.windowShapes=n),n&&n.createCollageButton&&(y=n.createCollageButton(-s,-c,S,w),y)){j.add(y);const o=`start_btn_${Date.now()}_${Math.random().toString(36).slice(2,5)}`;try{n.registerAnimatedShape(o,y,"button",-s,-c,S,w)}catch{}y.__shapeId=o}}catch{}const u=this.scene.add.text(0,0,"start game",{fontSize:"18px",color:"#000000",fontStyle:"bold"}).setOrigin(.5);j.add(u);const h=this.scene.add.rectangle(0,0,S,w,0,0);if(h.setOrigin(.5),h.setScrollFactor(0),h.setDepth((j.depth||1)+1),j.add(h),h.setInteractive({useHandCursor:!0}).on("pointerup",()=>{console.log("🟢 Start button clicked"),this.closeDialog();const l=this.scene.scene.get("AppScene");l&&l.startGame()}),!y){const l=this.scene.add.graphics();l.fillStyle(3426654,1),l.fillRoundedRect(-s,-c,S,w,6),l.lineStyle(2,16777215,1),l.strokeRoundedRect(-s,-c,S,w,6),j.addAt(l,0),u.setColor("#ffffff")}h.on("pointerover",()=>{try{this.scene.input.setDefaultCursor("pointer")}catch{}}),h.on("pointerout",()=>{try{this.scene.input.setDefaultCursor("default")}catch{}}),console.log(`🔘 Start button created with collage styling at (${K}, ${W})`)}}class UY extends ht.Scene{menuManager;constructor(){super({key:"MenuScene"})}async create(){console.log("MenuScene create() called"),this.setupOverlayCamera(),this.menuManager=new XY(this),this.events.on("showObstacleMenu",this.showObstacleMenu,this),this.events.on("showPauseMenu",this.showPauseMenu,this),this.events.on("showSaveMenu",this.showSaveMenu,this),this.events.on("showGameOverMenu",this.showGameOverMenu,this),this.events.on("showStartMenu",this.showStartMenu,this),this.events.on("showTurnKeyMenu",this.showTurnKeyMenu,this),this.events.on("showTutorialInterrupt",this.showTutorialInterrupt,this),this.events.on("showDestinationMenu",this.showDestinationMenu,this),this.events.on("showRegionChoiceMenu",this.showRegionChoiceMenu,this),this.events.on("showCyoaMenu",this.showCyoaMenu,this),this.events.on("showStoryMenu",this.showStoryMenu,this),this.events.on("showNovelStory",this.showNovelStory,this),this.events.on("showVirtualPetMenu",this.showVirtualPetMenu,this),this.events.on("showMoralDecision",this.showMoralDecision,this),this.events.on("showPetStoryUI",this.showPetStoryUI,this),this.events.on("showPotholeMenu",this.showPotholeMenu,this),this.events.on("showStoryOverlay",(L,k)=>{this.menuManager.showStoryOverlay(L,k)}),this.events.on("closeCurrentMenu",this.closeCurrentMenu,this),this.events.on("showExitStoresCatalog",this.showExitStoresCatalog,this),console.log("MenuScene ready - waiting for menu events");try{this.scene.get("GameScene")?.events.on("step",()=>{this.menuManager?.onGlobalStep?.()})}catch{}}setupOverlayCamera(){const L=this.cameras.add(0,0,this.cameras.main.width,this.cameras.main.height);L.setName("menuOverlayCamera"),L.setScroll(0,0),this.cameras.main=L,console.log("MenuScene: Overlay camera set up")}showStartMenu(){console.log("MenuScene: showStartMenu called"),this.menuManager.showStartMenu()}showPauseMenu(){console.log("MenuScene: showPauseMenu called - received event!"),this.menuManager.showPauseMenu()}showSaveMenu(){console.log("MenuScene: showSaveMenu called - received event!"),this.menuManager.showSaveMenu()}showGameOverMenu(){this.menuManager.showGameOverMenu()}showObstacleMenu(L,k,W){L==="pothole"?this.menuManager.showPotholeMenu():L==="exit"&&this.menuManager.showExitMenu(k||3,W)}showExitStoresCatalog(L){this.menuManager.showExitStoresCatalog(L)}showTurnKeyMenu(){this.menuManager.showTurnKeyMenu()}showTutorialInterrupt(){this.menuManager.showTutorialInterrupt()}showDestinationMenu(L){this.menuManager.showDestinationMenu(!!L)}showRegionChoiceMenu(L){this.menuManager.showRegionChoiceMenu(L)}showCYOA(L){this.menuManager.showCYOAMenu(L)}showCyoaMenu(L){this.menuManager.showCyoaMenu(L)}showStoryMenu(L){this.menuManager.showStoryMenu(L)}showNovelStory(L){console.log("MenuScene: showNovelStory called with data:",L),console.log("MenuScene: Calling menuManager.showNovelStory"),this.menuManager.showNovelStory(L),console.log("MenuScene: showNovelStory completed")}showVirtualPetMenu(L){console.log("MenuScene: showVirtualPetMenu called with petSprite:",L),this.menuManager.showVirtualPetMenu(L)}showMoralDecision(L){console.log("MenuScene: showMoralDecision called with config:",L),this.menuManager.showMoralDecisionMenu(L)}showPetStoryUI(L){if(typeof L=="string"){console.log("MenuScene: showPetStoryUI called (legacy) with content:",L),this.menuManager.showPetStoryUI(L);return}const k=L&&typeof L.petIndex=="number"?L.petIndex:0;console.log("MenuScene: showPetStoryUI called with petIndex:",k),this.menuManager.showPetStoryUIForPet(k)}showPotholeMenu(){console.log("MenuScene: showPotholeMenu called"),this.menuManager.showPotholeMenu()}closeCurrentMenu(){console.log("MenuScene: Received closeCurrentMenu event"),this.menuManager.closeCurrentDialog()}}class HY extends ht.Scene{constructor(){super({key:"StoryScene"})}create(){this.setupOverlayCamera()}setupOverlayCamera(){const L=this.cameras.add(0,0,this.cameras.main.width,this.cameras.main.height);L.setName("storyOverlayCamera"),L.setScroll(0,0),this.cameras.main=L}}class $Y{gameObject;scene;constructor(L){this.scene=L,this.createGameObject(),this.setupPhysics(),this.setupDragInteraction()}createGameObject(){const k=ri.getItemSize("medium").width/2;this.gameObject=this.scene.add.circle(100,200,k,16711680),this.gameObject.setDepth(6e4)}setupPhysics(){this.scene.matter.add.gameObject(this.gameObject,{shape:"circle",restitution:.15,friction:.2,density:.01}),this.gameObject.body&&(this.gameObject.body.frictionAir=.03)}setupDragInteraction(){let K=!1,j=0,S=0,w=0,s=0,c=null,y=null;this.gameObject.on("pointerdown",l=>{K=!0,j=l.x,S=l.y,this.gameObject.setFillStyle(16724787),this.scene.isDraggingObject=!0,this.scene.draggingItem=this.gameObject,this.gameObject._hasFedWhileOver=!1;const n=this.scene.scene.get("GameScene");if(this.gameObject._originalDepth=this.gameObject.depth,this.gameObject._originalParent=this.gameObject.parentContainer||null,n&&n.dragOverlay){const d=this.gameObject.parentContainer;d&&d.remove(this.gameObject),n.dragOverlay.add(this.gameObject)}else this.gameObject.setDepth(11e4),this.scene.children.bringToTop(this.gameObject);this.gameObject.body&&!c&&(c=this.scene.matter.add.circle(l.x,l.y,1,{isStatic:!0,isSensor:!0,collisionFilter:{group:0,category:1,mask:0}}),y=this.scene.matter.add.constraint(c,this.gameObject.body,0,.02,{damping:.15}));const o=d=>{K&&(w=d.x-j,s=d.y-S,j=d.x,S=d.y,c&&this.scene.matter.body.setPosition(c,{x:d.x,y:d.y}))},f=()=>{if(!K)return;if(K=!1,this.gameObject.setFillStyle(16711680),this.scene.isDraggingObject=!1,!this.gameObject.scene){r();return}const d=this.gameObject._originalParent;if(d){const v=this.gameObject.parentContainer;v&&v.remove(this.gameObject),d.add(this.gameObject),this.gameObject._originalParent=null}const p=this.gameObject._originalDepth;typeof p=="number"&&this.gameObject.setDepth(p),y&&(this.scene.matter.world.removeConstraint(y),y=null),c&&(this.scene.matter.world.remove(c),c=null),this.gameObject.body&&this.scene.matter.body.setVelocity(this.gameObject.body,{x:w*.1,y:s*.1}),r()},r=()=>{this.scene.input.off("pointermove",o,void 0,!1),this.scene.input.off("pointerup",f,void 0,!1)};this.scene.input.on("pointermove",o),this.scene.input.once("pointerup",f)});let u=0;const h=100;this.gameObject.on("pointerover",()=>{const l=Date.now();l-u>h&&!K&&(this.gameObject.setFillStyle(16737894),u=l)}),this.gameObject.on("pointerout",()=>{const l=Date.now();l-u>h&&!K&&(this.gameObject.setFillStyle(16711680),u=l)}),this.gameObject.setInteractive({useHandCursor:!0}),this.gameObject.originalColor=16711680}}class KY{gameObject;scene;feedingTimer;constructor(L){this.scene=L,this.createGameObject(),this.setupPhysics(),this.setupDragInteraction()}createGameObject(){const k=ri.getItemSize("medium").width/2;this.gameObject=this.scene.add.circle(150,320,k,65280),this.gameObject.setDepth(6e4)}setupPhysics(){this.scene.matter.add.gameObject(this.gameObject,{shape:"circle",restitution:.15,friction:.2,density:.01}),this.gameObject.body&&(this.gameObject.body.frictionAir=.03)}setupDragInteraction(){let K=!1,j=0,S=0,w=0,s=0,c=null,y=null;this.gameObject.on("pointerdown",u=>{K=!0,j=u.x,S=u.y,this.gameObject.setFillStyle(3407667),this.scene.isDraggingObject=!0;const h=this.scene.scene.get("GameScene");if(this.gameObject._originalDepth=this.gameObject.depth,this.gameObject._originalParent=this.gameObject.parentContainer||null,h&&h.dragOverlay){const l=this.gameObject.parentContainer;l&&l.remove(this.gameObject),h.dragOverlay.add(this.gameObject)}else this.gameObject.setDepth(11e4),this.scene.children.bringToTop(this.gameObject);this.gameObject.body&&!c&&(c=this.scene.matter.add.circle(u.x,u.y,1,{isStatic:!0,isSensor:!0,collisionFilter:{group:0,category:1,mask:0}}),y=this.scene.matter.add.constraint(c,this.gameObject.body,0,.02,{damping:.15}))}),this.scene.input.on("pointermove",u=>{if(K){w=u.x-j,s=u.y-S,j=u.x,S=u.y,c&&this.scene.matter.body.setPosition(c,{x:u.x,y:u.y});const h=this.scene.scene.get("GameScene"),l=h&&h.getVirtualPet?.();if(l){const n=l.getScreenBounds?.();if(n){const o=this.gameObject.getBounds();ht.Geom.Rectangle.Inflate(n,24,24),ht.Geom.Intersects.RectangleToRectangle(o,n);const f=this.gameObject.radius??this.gameObject.displayWidth/2,r=new ht.Geom.Circle(this.gameObject.x,this.gameObject.y,f);ht.Geom.Intersects.CircleToRectangle(r,n),l.setDebugBoundsVisible?.(!0);const d=u.x,p=u.y,v=l.isPointerOver?.(d,p)??!1;l.setHover?.(v)}}}}),this.scene.input.on("pointerup",()=>{if(K){if(K=!1,this.gameObject&&this.gameObject.scene&&this.gameObject.setFillStyle(65280),this.scene.isDraggingObject=!1,this.scene.draggingItem===this.gameObject&&(this.scene.draggingItem=null),this.gameObject._hasFedWhileOver=!1,this.gameObject&&this.gameObject.scene){const u=this.gameObject._originalDepth;this.gameObject.setDepth(11e4),this.scene.time.delayedCall(100,()=>{this.gameObject&&this.gameObject.scene&&typeof u=="number"&&this.gameObject.setDepth(u)});const h=this.gameObject._originalParent;if(h){const l=this.gameObject.parentContainer;l&&l.remove(this.gameObject),h.add(this.gameObject),this.gameObject._originalParent=null}}y&&(this.scene.matter.world.removeConstraint(y),y=null),c&&(this.scene.matter.world.remove(c),c=null),this.gameObject&&this.gameObject.scene&&this.gameObject.body&&this.scene.matter.body.setVelocity(this.gameObject.body,{x:w*.1,y:s*.1})}}),this.gameObject.on("pointerover",()=>{K||this.gameObject.setFillStyle(6750054)}),this.gameObject.on("pointerout",()=>{K||this.gameObject.setFillStyle(65280)}),this.gameObject.setInteractive({useHandCursor:!0}),this.gameObject.originalColor=65280}}class ZY{gameObject;scene;constructor(L){this.scene=L,this.createGameObject(),this.setupPhysics(),this.setupDragInteraction()}createGameObject(){const k=ri.getItemSize("small").width/2,K=this.scene.cameras.main.width*.8;this.gameObject=this.scene.add.circle(K,300,k,255),this.gameObject.setDepth(6e4)}setupPhysics(){this.scene.matter.add.gameObject(this.gameObject,{shape:"circle",restitution:.15,friction:.2,density:.01}),this.gameObject.body&&(this.gameObject.body.frictionAir=.03)}setupDragInteraction(){let K=!1,j=0,S=0,w=0,s=0,c=null,y=null;this.gameObject.on("pointerdown",u=>{K=!0,this.gameObject.isDragging=!0,j=u.x,S=u.y,this.gameObject.setFillStyle(3355647),this.scene.isDraggingObject=!0;const h=this.scene.scene.get("GameScene");if(this.gameObject._originalDepth=this.gameObject.depth,this.gameObject._originalParent=this.gameObject.parentContainer||null,h&&h.dragOverlay){const l=this.gameObject.parentContainer;l&&l.remove(this.gameObject),h.dragOverlay.add(this.gameObject)}else this.gameObject.setDepth(11e4),this.scene.children.bringToTop(this.gameObject);if(this.scene.keysConstraint)if(this.scene.removeKeysFromIgnition)this.scene.removeKeysFromIgnition();else{if(this.scene.matter.world.removeConstraint(this.scene.keysConstraint),this.scene.keysConstraint=null,this.gameObject.body){const l=this.gameObject.body;l.isStatic=!1,l._originalCollisionFilter?l.collisionFilter={...l._originalCollisionFilter}:l.collisionFilter={group:0,category:1,mask:65535},l.isSensor=!!l._originalIsSensor}this.scene.keysInIgnition=!1,this.scene.gameState?.updateState&&this.scene.gameState.updateState({keysInIgnition:!1}),this.scene.closeCurrentMenu&&this.scene.closeCurrentMenu(),this.scene.scheduleTutorialUpdate?this.scene.scheduleTutorialUpdate(50):this.scene.updateTutorialSystem&&this.scene.time?.delayedCall(50,()=>this.scene.updateTutorialSystem())}this.gameObject.body&&!c&&(c=this.scene.matter.add.circle(u.x,u.y,1,{isStatic:!0,isSensor:!0,collisionFilter:{group:0,category:1,mask:0}}),y=this.scene.matter.add.constraint(c,this.gameObject.body,0,.02,{damping:.15}))}),this.scene.input.on("pointermove",u=>{if(K){w=u.x-j,s=u.y-S,j=u.x,S=u.y,c&&this.scene.matter.body.setPosition(c,{x:u.x,y:u.y});const h=this.scene.scene.get("GameScene");h&&h.tutorialSystem&&h.tutorialSystem.updateTutorialMaskRealTime()}}),this.scene.input.on("pointerup",()=>{if(K){K=!1,this.gameObject.isDragging=!1,this.gameObject._justReleasedAt=Date.now(),this.gameObject.setFillStyle(255),this.scene.isDraggingObject=!1;const u=this.gameObject._originalParent;if(u){const h=this.gameObject.parentContainer;h&&h.remove(this.gameObject),u.add(this.gameObject),this.gameObject._originalParent=null}else{const h=this.gameObject._originalDepth;typeof h=="number"&&this.gameObject.setDepth(h)}y&&(this.scene.matter.world.removeConstraint(y),y=null),c&&(this.scene.matter.world.remove(c),c=null),this.gameObject.body&&(this.gameObject.body.isStatic=!1,this.scene.matter.body.setVelocity(this.gameObject.body,{x:w*.1,y:s*.1}))}}),this.gameObject.on("pointerover",()=>{K||this.gameObject.setFillStyle(6711039)}),this.gameObject.on("pointerout",()=>{K||this.gameObject.setFillStyle(255)}),this.gameObject.setInteractive({useHandCursor:!0}),this.gameObject.originalColor=255}}class JY{scene;config;drivingMode=!1;drivingPaused=!1;tutorialMode=!1;carSpeed=0;carX=0;currentSteeringValue=0;turn=0;baseSpeed=0;speedProgressionStartStep=0;speedProgressionDurationSteps=1200;maxSpeedMultiplier=1;drivingContainer;drivingBackground;drivingCar;roadLines=[];obstacles=[];roadLineGraphics;roadOffset=0;horizontalLinePhase=0;laneIndices=[-2,-.7,.7,2];laneSpacingBottom=100;horizontalSpacing=28;getLensStrength(){return this.config.lensStrength??60}activeExits=[];plannedExits=[];exitPreviewMinSpacing=150;plannedCyoa=[];plannedStory=null;pendingDestinationMenu=null;nightModeEnabled=!1;currentSequenceProgress=0;lastPotholeSpawnStep=0;minPotholeSpawnDelay=3;radarContainer;radarBG;radarGrid;radarGraphics;radarPlayer;forwardMovementTimer=null;neutralReturnTimer=null;obstacleSpawnTimer=null;collisionTimer=null;cameraAngle=0;currentCurve=0;worldLateralOffset=0;lastSteeringValueForVisual=0;constructor(L,k){this.scene=L,this.config=k}initialize(){this.drivingContainer=this.scene.add.container(0,0),this.drivingContainer.setDepth(this.config.roadDepth),this.drivingContainer.setScale(1,.5),this.drivingContainer.y=Math.floor(this.scene.cameras.main.height*.1),this.createDrivingBackground(),this.createDrivingCar(),this.carX=this.scene.cameras.main.width/2,this.roadLineGraphics=this.scene.add.graphics(),this.roadLineGraphics.setDepth(this.config.lineDepth),this.drivingContainer.add(this.roadLineGraphics),this.config.radarEnabled&&this.createRadar(),this.scene.events.on("countdownChanged",this.onCountdownChanged,this),this.scene.events.on("step",this.onStepChanged,this),this.scene.input.keyboard?.on("keydown-E",()=>{})}generateSpacedThresholds(L,k){const j=this.scene.scene.get("GameScene")?.gameState?.getState(),S=j?.showsInCurrentRegion===0&&j?.regionHistory?.length<=1;let w,s;S?(w={min:15,max:25},s={min:35,max:90},console.log("First sequence: Exit range 15-25% for testing")):(w={min:30,max:85},s={min:20,max:90});const c=[];for(let o=0;o<L;o++)c.push({value:ht.Math.Between(w.min,w.max),type:"exit",index:o});const y=k===3?k-1:k;for(let o=0;o<y;o++)c.push({value:ht.Math.Between(s.min,s.max),type:"cyoa",index:o});c.sort((o,f)=>o.value-f.value);let u=0;const h=50;for(;u<h;){let o=!1;for(let f=0;f<c.length-1;f++){const r=c[f],d=c[f+1],p=d.value-r.value;if(p<12){o=!0;const v=(12-p)/2;r.value=Math.max(0,r.value-v),d.value=Math.min(100,d.value+v),r.type==="exit"?r.value=ht.Math.Clamp(r.value,w.min,w.max):r.value=ht.Math.Clamp(r.value,s.min,s.max),d.type==="exit"?d.value=ht.Math.Clamp(d.value,w.min,w.max):d.value=ht.Math.Clamp(d.value,s.min,s.max)}}if(!o)break;c.sort((f,r)=>f.value-r.value),u++}const l=c.filter(o=>o.type==="exit").map(o=>o.value).sort((o,f)=>o-f),n=c.filter(o=>o.type==="cyoa").map(o=>o.value).sort((o,f)=>o-f);return k===3&&n.push(0),{exits:l,cyoa:n}}ensureCyoaSpacing(){let k=0;const W=50;for(;k<W;){let K=!1;this.plannedCyoa.sort((j,S)=>j.cyoaThreshold-S.cyoaThreshold);for(let j=0;j<this.plannedCyoa.length-1;j++){const S=this.plannedCyoa[j],w=this.plannedCyoa[j+1],s=w.cyoaThreshold-S.cyoaThreshold;if(s<12){K=!0;const c=(12-s)/2;S.cyoaThreshold=Math.max(20,S.cyoaThreshold-c),w.cyoaThreshold=Math.min(90,w.cyoaThreshold+c)}}if(!K)break;k++}k>=W&&console.warn("Could not achieve proper CYOA spacing after maximum attempts")}generateShopCount(){const L=Math.random();return L<.4?2:L<.8?3:4}generateExitNames(L){const k=[],W=new Set;for(let K=0;K<L;K++){let j,S=0;do{if(ht.Math.Between(1,2)===1)j=`EXIT ${ht.Math.Between(1,99)}`;else{const s=ht.Math.Between(1,98),c=ht.Math.Between(s+1,99);j=`EXIT ${s}-${c}`}S++}while(W.has(j)&&S<50);W.has(j)&&(j=`EXIT ${K+1}`),k.push(j),W.add(j)}return k}enableTutorialMode(){this.tutorialMode=!0}disableTutorialMode(){this.tutorialMode=!1}isInTutorialMode(){return this.tutorialMode}startDriving(L=0){this.drivingMode=!0,this.carSpeed=0,this.resetDrivingCamera(),this.planExitsForSequence(),this.startAutomaticSpeedProgression(L),this.startForwardMovementTimer(),this.startNeutralReturnTimer(),this.startObstacleSpawning()}isDriving(){return this.drivingMode}planExitsForSequence(){this.plannedExits=[],this.plannedCyoa=[],this.plannedStory=null,this.currentSequenceProgress=0;const L=this.scene.scene.get("GameScene"),k=L?.gameState?.getState(),W=k?.showsInCurrentRegion===0&&k?.regionHistory?.length<=1;let K;W?(K=2,console.log("First driving sequence - deterministic: 2 exits")):K=ht.Math.Between(2,3);const j=this.scene.cameras.main.width,w=Math.floor(j*.3),s=j-Math.floor(w/2)-1,c=40,y=15;let u;const h=L?.gameState?.getState()?.showsInCurrentRegion||0;h===0?(u=2,console.log("First driving sequence - deterministic: 2 CYOAs (1 random + 1 at end)")):h===1?(u=2,console.log("Second driving sequence - deterministic: 2 CYOAs (1 at start + 1 random)")):(u=ht.Math.Between(1,3),console.log(`Sequence ${h+1} - random: ${u} CYOAs`));const l=this.generateSpacedThresholds(K,u),n=l.exits;l.cyoa;const o=this.generateExitNames(n.length);if(n.map((r,d)=>({threshold:r,name:o[d],originalIndex:d})).sort((r,d)=>r.threshold-d.threshold).forEach((r,d)=>{const p=d+1,v=r.threshold,g=r.name;let m,T=0;do{const M=ht.Math.Between(20,45);m=Math.max(1,v-M),T++}while(T<10&&(n.some(M=>Math.abs(M-m)<8)||this.plannedExits.some(M=>Math.abs(M.previewThreshold-m)<8)));const P=this.generateShopCount();this.plannedExits.push({number:p,exitName:g,shopCount:P,previewThreshold:m,exitThreshold:v,laneIndex:this.laneIndices[this.laneIndices.length-1],exitBaseX:s-c,previewBaseX:s+y,width:w,height:this.config.exitHeight,previewSpawned:!1,exitSpawned:!1,previewWaiting:!1})}),console.log("Planned exits:",this.plannedExits.map(r=>`Exit ${r.number}`)),console.log("Total planned exits:",this.plannedExits.length),this.plannedCyoa=[],h===0){const r=ht.Math.Between(20,80);this.plannedCyoa.push({id:1,cyoaThreshold:r,triggered:!1}),this.plannedCyoa.push({id:2,cyoaThreshold:98,triggered:!1}),console.log(`🎭 First sequence CYOAs: Random CYOA at ${r}% + End CYOA at 98%`)}else if(h===1){const r=ht.Math.Between(20,80);this.plannedCyoa.push({id:1,cyoaThreshold:2,triggered:!1}),this.plannedCyoa.push({id:2,cyoaThreshold:r,triggered:!1}),console.log(`🎭 Second sequence CYOAs: Start CYOA at 2% + Random CYOA at ${r}%`)}else if(u===1){const r=ht.Math.Between(20,80);this.plannedCyoa.push({id:1,cyoaThreshold:r,triggered:!1})}else if(u===2){const r=ht.Math.Between(20,80),d=Math.random()<.5;this.plannedCyoa.push({id:1,cyoaThreshold:r,triggered:!1}),this.plannedCyoa.push({id:2,cyoaThreshold:d?2:98,triggered:!1}),this.plannedCyoa.sort((p,v)=>p.cyoaThreshold-v.cyoaThreshold)}else if(u===3){const r=ht.Math.Between(20,80),d=ht.Math.Between(20,80),p=Math.random()<.5;this.plannedCyoa.push({id:1,cyoaThreshold:r,triggered:!1}),this.plannedCyoa.push({id:2,cyoaThreshold:d,triggered:!1}),this.plannedCyoa.push({id:3,cyoaThreshold:p?2:98,triggered:!1}),this.plannedCyoa.sort((v,g)=>v.cyoaThreshold-g.cyoaThreshold)}console.log("Planned CYOA:",this.plannedCyoa.map(r=>`CYOA ${r.id}: ${r.cyoaThreshold}% (${r.cyoaThreshold===2?"start":r.cyoaThreshold===98?"end":"random"})`)),console.log("Total planned CYOA:",this.plannedCyoa.length),this.planStoryForSequence(K)}planStoryForSequence(L){const W=this.scene.scene.get("GameScene")?.gameState?.getState(),K=W?.showsInCurrentRegion===0&&W?.regionHistory?.length<=1;let j,S=!1,w;if(K)j=10,S=!1,console.log("First sequence: Story scheduled at 10% (fauxchella-1)");else{if(S=Math.random()<.3,S&&L>0){w=ht.Math.Between(1,L);const u=this.plannedExits.find(h=>h.number===w);if(u){const h=ht.Math.Between(8,20);j=Math.min(100,u.exitThreshold+h),console.log(`Story scheduled after Exit ${w} at ${j}% (exit was at ${u.exitThreshold}%)`)}else j=ht.Math.Between(20,80),console.log(`Story scheduled at random threshold ${j}% (exit-related fallback)`)}else j=ht.Math.Between(15,85),console.log(`Story scheduled at independent threshold ${j}%`);const s=10;let c=0;const y=20;for(;c<y;){let u=!1;for(const h of this.plannedCyoa)if(Math.abs(h.cyoaThreshold-j)<s){u=!0;break}if(!u){for(const h of this.plannedExits)if(Math.abs(h.previewThreshold-j)<s||Math.abs(h.exitThreshold-j)<s){u=!0;break}}if(u)j=ht.Math.Between(15,85),c++;else break}}this.plannedStory={storyThreshold:j,isExitRelated:S,exitNumber:w,triggered:!1},console.log(`Planned story: ${j}%${S?" (exit-related)":""}`)}updateProgress(L){if(!this.tutorialMode){if(this.currentSequenceProgress=L,L%25===0&&console.log(`Progress: ${L}%, Planned exits: ${this.plannedExits.length}`),this.plannedExits.forEach(k=>{!k.previewSpawned&&L>=k.previewThreshold&&(console.log(`Spawning preview for Exit ${k.number} at progress ${L}%`),this.spawnPlannedExitPreview(k),k.previewSpawned=!0),!k.exitSpawned&&L>=k.exitThreshold&&(console.log(`Spawning Exit ${k.number} at progress ${L}%`),this.spawnPlannedExit(k),k.exitSpawned=!0)}),this.plannedStory&&!this.plannedStory.triggered&&L>=this.plannedStory.storyThreshold){console.log(`Triggering story at progress ${L}%${this.plannedStory.isExitRelated?" (exit-related)":""}`),this.triggerStory(this.plannedStory),this.plannedStory.triggered=!0;return}this.plannedCyoa.forEach(k=>{!k.triggered&&L>=k.cyoaThreshold&&(console.log(`updateProgress: Triggering CYOA ${k.id} at progress ${L.toFixed(1)}%`),this.triggerCyoa(k),k.triggered=!0)})}}checkExitPreviewCollisions(){const L=this.plannedExits.filter(W=>W.previewSpawned&&!W.exitSpawned);if(L.length<2)return;const k=L.map(W=>W.previewObstacle).filter(Boolean);for(let W=0;W<k.length;W++)for(let K=W+1;K<k.length;K++){const j=k[W],S=k[K];if(!j||!S)continue;const w=j.getData("visual"),s=S.getData("visual");if(!w||!s)continue;const c=ht.Math.Distance.Between(w.x,w.y,s.x,s.y);if(c<this.exitPreviewMinSpacing){const y=this.plannedExits.find(f=>f.previewObstacle===j),u=this.plannedExits.find(f=>f.previewObstacle===S);if(!y||!u)continue;const h=y.number>u.number?y:u,l=y.number>u.number?u:y;h.previewWaiting=!0,l.previewWaiting=!1;const n=h.previewVisual;n&&n.setAlpha(.1);const o=l.previewVisual;o&&o.setAlpha(.3),console.log(`🚦 Exit ${h.number} waiting for Exit ${l.number} (distance: ${c.toFixed(1)}px)`)}else{const y=this.plannedExits.find(h=>h.previewObstacle===j),u=this.plannedExits.find(h=>h.previewObstacle===S);if(y&&y.previewWaiting){y.previewWaiting=!1;const h=y.previewVisual;h&&h.setAlpha(.2)}if(u&&u.previewWaiting){u.previewWaiting=!1;const h=u.previewVisual;h&&h.setAlpha(.2)}}}}spawnPlannedExitPreview(L){console.log(`Spawning preview for Exit ${L.number} at ${L.previewThreshold}%`);const k=this.scene.cameras.main.width,K=this.scene.cameras.main.height*.3,j=this.scene.add.rectangle(L.previewBaseX,K+2,L.width,L.height,this.config.exitColor,.2);j.setVisible(!1),j.setData("isExitPreview",!0),j.setData("exitNumber",L.number);const S=this.scene.add.rectangle(j.x,j.y,j.width,j.height,this.config.exitColor,.2);S.setDepth(this.config.roadDepth+.5);const w=L.shopCount===1?"1 Shop":`${L.shopCount} Shops`,s=this.scene.add.text(j.x,j.y,`${L.exitName}
${w}`,{fontSize:"12px",color:"#ffffff",fontStyle:"bold",stroke:"#000000",strokeThickness:2,backgroundColor:"#000000",padding:{x:4,y:2},align:"center"});s.setOrigin(.5,.5),s.setDepth(this.config.roadDepth+1),this.drivingContainer.add(j),this.drivingContainer.add(S),this.drivingContainer.add(s),j.setData("baseX",L.previewBaseX),j.setData("laneOffset",(L.previewBaseX-k/2)/this.laneSpacingBottom),j.setData("baseW",L.width),j.setData("baseH",L.height),j.setData("visual",S),j.setData("text",s),j.setData("laneIndex",L.laneIndex),this.obstacles.push(j),L.previewObstacle=j,L.previewVisual=S,L.previewText=s}spawnPlannedExit(L){console.log(`Spawning Exit ${L.number} at ${L.exitThreshold}%`);const k=this.scene.cameras.main.width,K=this.scene.cameras.main.height*.3;if(L.previewObstacle){const y=this.obstacles.indexOf(L.previewObstacle);y>-1&&this.obstacles.splice(y,1),L.previewObstacle.destroy(),L.previewVisual.destroy(),L.previewText&&L.previewText.destroy(),L.previewObstacle=null,L.previewVisual=null,L.previewText=null}const j=L.width+80,S=L.exitBaseX-40,w=this.scene.add.rectangle(S,K+2,j,L.height,this.config.exitColor,.8);w.setVisible(!1),w.setData("isExit",!0),w.setData("exitNumber",L.number);const s=this.scene.add.rectangle(L.exitBaseX,K+2,L.width,L.height,this.config.exitColor,.6);s.setDepth(this.config.roadDepth+.5);const c=this.scene.add.text(L.exitBaseX,K+2,L.exitName,{fontSize:"14px",color:"#ffffff",fontStyle:"bold",stroke:"#000000",strokeThickness:2,backgroundColor:"#000000",padding:{x:4,y:2}});c.setOrigin(.5,.5),c.setDepth(this.config.roadDepth+1),this.drivingContainer.add(w),this.drivingContainer.add(s),this.drivingContainer.add(c),w.setData("baseX",S),w.setData("laneOffset",(S-k/2)/this.laneSpacingBottom),w.setData("baseW",j),w.setData("baseH",L.height),w.setData("visual",s),w.setData("text",c),w.setData("laneIndex",L.laneIndex),w.setData("shopCount",L.shopCount),w.setData("exitNumber",L.number),this.obstacles.push(w),this.activeExits.push({obstacle:w,visual:s,exitText:c,exitNumber:L.number})}triggerCyoa(L){if(console.log(`🎭 triggerCyoa called for CYOA ${L.id}`),L.triggered){console.warn(`🎭 Guard: CYOA ${L.id} already triggered, preventing double-trigger`);return}console.log(`Triggering CYOA ${L.id}`),L.triggered=!0,this.pauseDriving();const k=this.scene.scene.get("MenuScene");k&&(k.events.emit("showCyoaMenu",{cyoaId:L.id,isExitRelated:!1,exitNumber:void 0,exitTiming:void 0}),this.scene.scene.bringToTop("MenuScene"))}triggerStory(L){console.log(`📖 Triggering story${L.isExitRelated?` (related to exit ${L.exitNumber})`:""}`),this.pauseDriving();const k=this.scene.scene.get("GameScene");if(k&&k.storyManager){const W=k.storyManager,K=k.gameState,j=K&&K.getState().stops===0,S=this.shouldTriggerFauxchellaStory(K);let w;if(j)w="fauxchella",console.log("📖 First story: Starting fauxchella-1");else if(S)w="fauxchella",console.log("📖 Monthly listener threshold: Starting next fauxchella story");else{const y=W.getAvailableStorylines().filter(u=>u!=="fauxchella");w=y[Math.floor(Math.random()*y.length)],console.log(`📖 Starting storyline: ${w}`)}W.startStory(w,1),this.scene.scene.get("MenuScene")&&this.scene.scene.bringToTop("MenuScene")}else{const W=this.scene.scene.get("MenuScene");W&&(W.events.emit("showStoryMenu",{isExitRelated:L.isExitRelated,exitNumber:L.exitNumber}),this.scene.scene.bringToTop("MenuScene"))}}shouldTriggerFauxchellaStory(L){if(!L)return!1;const k=L.getState(),W=k.monthlyListeners||0,K=[5e3,1e4,2e4];for(const j of K)if(W>=j){const S=`fauxchella_${j}`;if(!(k[S]||!1))return L.updateState({[S]:!0}),console.log(`📖 Fauxchella threshold reached: ${W} listeners (threshold: ${j})`),!0}return!1}hasSkippedStory(){return!!(this.plannedStory&&!this.plannedStory.triggered)}triggerSkippedStory(){!this.plannedStory||this.plannedStory.triggered||(console.log(`📖 CarMechanics: Triggering skipped story at ${this.plannedStory.storyThreshold}%`),this.plannedStory.triggered=!0,this.triggerStory(this.plannedStory))}hasPendingDestinationMenu(){return this.pendingDestinationMenu!==null}showPendingDestinationMenu(){if(!this.pendingDestinationMenu)return;const{shopCount:L,exitNumber:k}=this.pendingDestinationMenu;console.log(`🎭 CarMechanics: Showing pending destination menu for exit ${k}`);const W=this.scene.scene.get("MenuScene");W&&k!=null&&(W.events.emit("showObstacleMenu","exit",L,k),this.scene.scene.bringToTop("MenuScene")),this.pendingDestinationMenu=null}getPlannedExits(){return this.plannedExits.filter(k=>!k.exitSpawned).map(k=>({progressThreshold:k.exitThreshold,spawned:k.exitSpawned,number:k.number}))}getPlannedCyoa(){return this.plannedCyoa.filter(k=>!k.triggered).map(k=>({progressThreshold:k.cyoaThreshold,triggered:k.triggered}))}setNightTimeMode(L){if(L&&!this.nightModeEnabled){this.config.skyColor=2105376,this.nightModeEnabled=!0;const k=this.scene.scene.get("MenuScene");k&&k.menuManager&&k.menuManager.currentDialog||console.log("🌙 CarMechanics: Night time mode enabled")}else!L&&this.nightModeEnabled&&(this.config.skyColor=0,this.nightModeEnabled=!1)}getPlannedStory(){return!this.plannedStory||this.plannedStory.triggered?null:{progressThreshold:this.plannedStory.storyThreshold,triggered:this.plannedStory.triggered,isExitRelated:this.plannedStory.isExitRelated,exitNumber:this.plannedStory.exitNumber}}isDrivingPaused(){return this.drivingPaused}stopDriving(){this.drivingMode=!1,this.carSpeed=0,this.baseSpeed=0,this.speedProgressionStartStep=-1}pauseDriving(){this.drivingPaused=!0}resumeDriving(){this.drivingPaused=!1}handleSteering(L){!this.drivingMode&&!this.tutorialMode||(this.currentSteeringValue=ht.Math.Clamp(L,-150,150))}startAutomaticSpeedProgression(L){this.speedProgressionStartStep<=0&&(this.speedProgressionStartStep=L,this.baseSpeed=this.config.carMaxSpeed,console.log(`Starting automatic speed progression at step ${L}`))}onStepEvent(L){!this.drivingMode||this.drivingPaused||this.updateCarSpeedWithProgression(L)}updateCarSpeedWithProgression(L){if(this.baseSpeed===0){this.carSpeed=0,this.speedProgressionStartStep=0;return}if(this.tutorialMode){this.carSpeed=this.baseSpeed*.1;return}if(this.speedProgressionStartStep<=0){this.carSpeed=this.baseSpeed*.01,this.speedProgressionStartStep=L;return}const k=L-this.speedProgressionStartStep,W=1,K=this.carSpeed/this.baseSpeed,j=W-K;if(j<.01){this.carSpeed=this.baseSpeed*W;return}const s=.04*(Math.log(j+1)/Math.log(2)),c=this.baseSpeed*s;if(this.carSpeed+=c,this.carSpeed=Math.min(this.carSpeed,this.baseSpeed*W),k>0&&k%30===0){const y=Math.round(this.carSpeed/this.baseSpeed*100),u=Math.round(s*100*100)/100;console.log(`Speed progression: ${y}% (+${u}% this step) at step ${L}`)}}resetSpeedProgression(){console.log("🔄 Resetting speed progression due to pothole hit"),this.carSpeed=this.baseSpeed*.01,this.speedProgressionStartStep=-1}updateGravityBasedOnSpeed(L){if(!this.scene.matter?.world)return;const k=.5,W=1.8,K=1,j=L/100,S=K+j*(W-K),w=k*S;this.scene.matter.world.setGravity(0,w),this.scene.time.now%500<16&&console.log(`Gravity: ${L}% speed -> ${S.toFixed(2)}x multiplier -> Y: ${w.toFixed(2)}`)}getSpeedMultiplier(){return this.baseSpeed===0?0:this.carSpeed/this.baseSpeed}getCarSpeed(){return this.carSpeed}spawnDebugPothole(){if(!this.drivingMode||this.drivingPaused){console.log("🐛 DEBUG: Cannot spawn pothole - not in driving mode");return}console.log("🐛 DEBUG: Creating debug pothole");const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=k*.3,K=L*this.config.potholeWidth,j=k*this.config.potholeHeight,S=this.scene.add.rectangle(0,0,K,j,this.config.potholeColor);S.setData("isPothole",!0),S.setData("isExit",!1),S.setData("isExitPreview",!1);const w=W+ht.Math.Between(12,90),s=Math.floor(Math.random()*this.laneIndices.length),c=this.laneIndices[s],y=ht.Math.Clamp((w-W)/(k-W),0,1),u=this.config.roadBendStrength??140,h=this.currentCurve*u,l=h*.6,n=P=>(1-P)*(1-P)*0+2*(1-P)*P*l+P*P*h,o=this.getLensStrength(),f=1-ht.Math.Clamp(Math.abs(this.currentCurve),0,1),r=(c>=0?1:-1)*o*(y*y)*f,d=L/2,p=d+n(y)+c*(this.laneSpacingBottom*y)+r,v=ht.Math.Between(-6,6),g=p+v,m=w;S.setPosition(g,m),S.setData("laneIndex",c),S.setData("baseX",g),S.setData("laneOffset",(g-d)/this.laneSpacingBottom),S.setData("baseW",K),S.setData("baseH",j),S.y=m,S.setDepth(this.config.roadDepth+.5),S.setVisible(!1);const T=this.scene.add.rectangle(S.x,S.y,S.width,S.height,S.fillColor??16711680);T.setDepth(this.config.roadDepth+.5),this.drivingContainer.add(S),this.drivingContainer.add(T),S.setData("visual",T),this.obstacles.push(S),console.log(`🐛 DEBUG: Pothole spawned at (${g}, ${m}) with size ${K}x${j} and color 0x${this.config.potholeColor.toString(16)}`),console.log(`🐛 DEBUG: Total obstacles now: ${this.obstacles.length}`)}getCarX(){return this.carX}update(L=0){!this.drivingMode||this.drivingPaused||(this.updateForwardMovement(L),this.updateCarPosition(),this.updateRoadLines(),this.updateObstacles(),this.updateRadar())}createDrivingBackground(){this.drivingBackground=this.scene.add.graphics(),this.drivingBackground.setDepth(this.config.roadDepth),this.drivingContainer.add(this.drivingBackground),this.drawRoad()}createDrivingCar(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height;this.carX=L/2,this.drivingCar=this.scene.add.rectangle(this.carX,Math.floor(k*.9),60,60,16711680),this.drivingCar.setAlpha(.7),this.drivingCar.setDepth(this.config.roadDepth+1),this.drivingCar.setScrollFactor(0,0),this.drivingContainer.add(this.drivingCar)}drawRoad(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height;this.drivingBackground.clear();const W=k*.3,K=L*3,j=(L-K)/2;this.drivingBackground.fillStyle(this.config.roadColor),this.drivingBackground.fillRect(j,W,K,k-W),this.drivingBackground.fillStyle(0,.15),this.drivingBackground.fillRect(j,W-2,K,2)}startForwardMovementTimer(){this.stopForwardMovementTimer(),this.forwardMovementTimer=this.scene.time.addEvent({delay:16,callback:this.updateForwardMovement,callbackScope:this,loop:!0})}stopForwardMovementTimer(){this.forwardMovementTimer&&(this.forwardMovementTimer.remove(),this.forwardMovementTimer=null)}startNeutralReturnTimer(){this.stopNeutralReturnTimer(),this.neutralReturnTimer=this.scene.time.addEvent({delay:16,callback:this.updateNeutralReturn,callbackScope:this,loop:!0})}stopNeutralReturnTimer(){this.neutralReturnTimer&&(this.neutralReturnTimer.remove(),this.neutralReturnTimer=null)}startObstacleSpawning(){this.stopObstacleSpawning();const L=ht.Math.Between(this.config.obstacleMinDelayMs,this.config.obstacleMaxDelayMs);console.log("Starting obstacle spawning timer with delay:",L,"ms"),console.log("Current drivingMode:",this.drivingMode,"drivingPaused:",this.drivingPaused),console.log("Current potholeProbability:",this.config.potholeProbability),this.obstacleSpawnTimer=this.scene.time.delayedCall(L,this.spawnObstacle,[],this)}stopObstacleSpawning(){this.obstacleSpawnTimer&&(this.obstacleSpawnTimer.remove(),this.obstacleSpawnTimer=null)}updateForwardMovement(L=0){if(!this.drivingMode||this.drivingPaused)return;const k=Math.round(this.carSpeed/this.config.carMaxSpeed*100);this.scene.events.emit("speedUpdate",k),this.roadOffset-=this.carSpeed*.75}updateNeutralReturn(){!this.drivingMode||this.drivingPaused}updateCarPosition(){if(!this.drivingMode||this.drivingPaused)return;const L=this.tutorialMode?0:this.config.minSpeedForSteering;if(this.carSpeed<L){this.currentSteeringValue=0,this.turn=Math.abs(this.turn)<.01?0:ht.Math.Linear(this.turn,0,this.config.turnResetMultiplier);return}const k=this.currentSteeringValue/150;this.carSpeed/this.config.carMaxSpeed;const W=(this.scene.game.loop.delta||16)*.01,j=this.scene.cameras.main.width/2,S=j-this.config.boundaryPadding,w=j+k*S,s=.15;if(this.carX=ht.Math.Linear(this.carX,w,s),this.drivingCar){const l=this.scene.cameras.main.width;this.drivingCar.x=l/2}const c=ht.Math.Clamp(-k*.8,-1,1);if(this.currentCurve=ht.Math.Linear(this.currentCurve,c,.08),this.turn=ht.Math.Clamp(k*this.config.maxTurn,-this.config.maxTurn,this.config.maxTurn),this.config.centerReturnForce>0){const n=this.scene.cameras.main.width/2-this.carX;this.carX+=n*this.config.centerReturnForce*W}const u=this.scene.cameras.main.width/2,h=u-this.config.boundaryPadding;this.carX=ht.Math.Clamp(this.carX,u-h,u+h),this.updateDrivingCamera()}updateDrivingCamera(){if(!this.drivingMode||this.drivingPaused)return;const k=this.scene.cameras.main.width/2,j=-(this.carX-k)*1;this.drivingContainer.x=j;const S=this.carSpeed/Math.max(1,this.config.carMaxSpeed),w=ht.Math.Clamp((this.turn+this.currentCurve*.6)*6*S,-6,6);this.cameraAngle=ht.Math.Linear(this.cameraAngle,w,.15),this.scene.events.emit("cameraAngleChanged",this.cameraAngle)}resetDrivingCamera(){this.drivingContainer.x=0}updateRoadLines(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=k*.3+10,K=k*.3,j=L/2;this.roadLineGraphics.clear(),this.roadLineGraphics.lineStyle(2,0,1);const S=this.config.roadBendStrength??140,w=this.currentCurve*S,s=w*.6,c=o=>(1-o)*(1-o)*0+2*(1-o)*o*s+o*o*w,y=this.getLensStrength(),u=1-ht.Math.Clamp(Math.abs(this.currentCurve),0,1);for(const o of this.laneIndices){let f=!1;this.roadLineGraphics.beginPath();for(let r=W;r<=k;r+=6){const d=ht.Math.Clamp((r-K)/(k-K),0,1),p=(o>=0?1:-1)*y*(d*d)*u,v=j+c(d)+o*(this.laneSpacingBottom*d)+p;f?this.roadLineGraphics.lineTo(v,r):(this.roadLineGraphics.moveTo(v,r),f=!0)}this.roadLineGraphics.strokePath()}this.roadLineGraphics.lineStyle(1,0,1);const h=k-K,l=Math.max(1,Math.floor(h/this.horizontalSpacing)),n=this.horizontalLinePhase%this.horizontalSpacing/this.horizontalSpacing;for(let o=0;o<=l;o+=1){const f=(o+n)/l;if(f>1)continue;const r=ht.Math.Clamp(f*f,0,1),d=K+h*r,p=-y*(r*r)*u,v=y*(r*r)*u,g=j+c(r)+this.laneIndices[0]*(this.laneSpacingBottom*r)+p,m=j+c(r)+this.laneIndices[this.laneIndices.length-1]*(this.laneSpacingBottom*r)+v;this.roadLineGraphics.beginPath(),this.roadLineGraphics.moveTo(g,d),this.roadLineGraphics.lineTo(m,d),this.roadLineGraphics.strokePath()}}updateObstacles(){this.obstacles.forEach(y=>{const u=y.getData("isExit"),h=y.getData("isExitPreview"),l=y.getData("visual"),n=l?l.y:y.y,o=this.scene.cameras.main.height,f=o+300;if(!u&&!h&&n>f){y.getData("isPothole")&&console.log(`🗑️ Removing pothole - Visual Y: ${n.toFixed(1)}, Threshold: ${f}, Screen Height: ${o}`);const d=y.getData("visual"),p=y.getData("text");d&&d.destroy(),p&&p.destroy(),y.destroy();const v=this.obstacles.indexOf(y);v>-1&&this.obstacles.splice(v,1)}});const L=this.scene.cameras.main.height,k=this.scene.cameras.main.width,W=L*.3,K=k/2,j=this.config.roadBendStrength??140,S=this.currentCurve*j,w=S*.6,s=y=>(1-y)*(1-y)*0+2*(1-y)*y*w+y*y*S;this.obstacles.forEach(y=>{const u=y.getData("visual"),h=y.getData("text");if(!u)return;const l=ht.Math.Clamp((y.y-W)/(L-W),0,1);let n=y.getData("laneIndex");const o=-this.worldLateralOffset;y.getData("isExit")&&(n=this.laneIndices[this.laneIndices.length-1]);const f=(n??0)*(this.laneSpacingBottom*l),r=K+s(l)+f+o;u.x=r,h&&(h.x=r,h.y=u.y);const d=y.getData("baseW")??y.width,p=y.getData("baseH")??y.height,v=.2+.8*l,g=.4+.6*l;u.displayWidth=d*v,u.displayHeight=p*g});let c;if(this.drivingCar)c=this.drivingCar.getBounds();else{const y=k/2,u=Math.floor(L*.85);c=new ht.Geom.Rectangle(y-30,u-30,60,60)}this.obstacles.forEach(y=>{if(y.getData("isExitPreview"))return;const u=y.getData("visual");if(u){const h=u.getBounds();if(y.getData("isPothole")&&this.scene.time.now%500<16&&(console.log(`🔍 Collision Check - Car: (${c.left.toFixed(1)}, ${c.top.toFixed(1)}) to (${c.right.toFixed(1)}, ${c.bottom.toFixed(1)})`),console.log(`🔍 Pothole: (${h.left.toFixed(1)}, ${h.top.toFixed(1)}) to (${h.right.toFixed(1)}, ${h.bottom.toFixed(1)})`),console.log(`🔍 Car Visual Position: X=${c.centerX.toFixed(1)}, Y=${c.centerY.toFixed(1)}`),console.log(`🔍 Pothole logical Y: ${y.y.toFixed(1)}, Visual Y: ${u.y.toFixed(1)}`)),!(c.right<h.left||c.left>h.right||c.bottom<h.top||c.top>h.bottom)){console.log(`COLLISION DETECTED! Car: (${c.left.toFixed(1)}, ${c.top.toFixed(1)}) to (${c.right.toFixed(1)}, ${c.bottom.toFixed(1)})`),console.log(`Obstacle: (${h.left.toFixed(1)}, ${h.top.toFixed(1)}) to (${h.right.toFixed(1)}, ${h.bottom.toFixed(1)})`),console.log(`Car Visual Position: X=${c.centerX.toFixed(1)}, Y=${c.centerY.toFixed(1)}`);const o=y.getData("visual");o&&o.destroy(),this.handleCollisionWithObstacle(y)}}}),this.checkExitPreviewCollisions(),this.lastSteeringValueForVisual=this.currentSteeringValue}handleCollisionWithObstacle(L){const k=!!L.getData("isExit"),W=!!L.getData("isPothole");if(console.log("handleCollisionWithObstacle: pausing driving. isExit=",k,"isPothole=",W),this.pauseDriving(),this.scene.events.emit("carCollision"),W&&(this.resetSpeedProgression(),this.scene.events.emit("potholeHit"),this.scene.time.delayedCall(500,()=>{const j=this.scene.scene.get("GameScene");if(j&&j.windowShapes&&j.windowShapes.getQueuedNarrativeCount()>0){console.log("🚗 Pothole auto-resume blocked: story windows still in queue");return}this.resumeDriving()},[],this)),k){const j=L.getData("text");j&&(j.destroy(),console.log("🗑️ Destroyed exit text after collision"));const S=this.scene.scene.get("AppScene");if(S){S.isPaused=!0;const s=this.scene.scene.get("GameScene");s&&s.events.emit("gamePaused")}const w=this.scene.scene.get("MenuScene");if(w){const s=L.getData("shopCount")||3;let c=L.getData("exitNumber");if(c==null)try{const u=this.activeExits.find(h=>h.obstacle===L);u&&(c=u.exitNumber)}catch{}c==null&&this.activeExits.length>0&&(c=this.activeExits[this.activeExits.length-1].exitNumber),console.log("🎭 handleCollisionWithObstacle(exit): resolved exitNumber =",c);const y=w.menuManager;y&&(console.log("🎭 CarMechanics: Current menu stack before exit menu:",y.menuStack?.map(u=>`${u.type}:${u.priority}`)),console.log("🎭 CarMechanics: Current displayed menu type:",y.currentDisplayedMenuType)),c!=null&&(console.log("🎭 CarMechanics: emitting showObstacleMenu with exitNumber=",c),console.log("🎭 CarMechanics: menuScene exists:",!!w),console.log("🎭 CarMechanics: menuScene.events exists:",!!w?.events),w.events.emit("showObstacleMenu","exit",s,c),console.log("🎭 CarMechanics: showObstacleMenu event emitted"),this.scene.scene.bringToTop("MenuScene"),setTimeout(()=>{if(y&&(console.log("🎭 CarMechanics: Menu stack after exit menu attempt:",y.menuStack?.map(u=>`${u.type}:${u.priority}`)),console.log("🎭 CarMechanics: Current displayed menu type after attempt:",y.currentDisplayedMenuType),!y.currentDisplayedMenuType)){console.log("🚨 CarMechanics: EXIT MENU FAILED TO SHOW - RESUMING GAME TO PREVENT STUCK STATE");const u=this.scene.scene.get("AppScene");u&&(u.isPaused=!1),this.resumeDriving()}},100))}}L.destroy();const K=this.obstacles.indexOf(L);K>-1&&this.obstacles.splice(K,1)}spawnObstacle(){if(!this.drivingMode||this.drivingPaused){console.log("SpawnObstacle blocked - drivingMode:",this.drivingMode,"drivingPaused:",this.drivingPaused);return}if(this.scene.time.now/1e3-this.lastPotholeSpawnStep<this.minPotholeSpawnDelay){console.log("Pothole spawn blocked - too soon after last spawn"),this.startObstacleSpawning();return}console.log("SpawnObstacle called - spawning pothole only");const k=this.scene.cameras.main.width,W=this.scene.cameras.main.height,K=W*.3,j=Math.random()<this.config.potholeProbability;if(console.log("Spawning obstacle - isPothole:",j,"potholeProbability:",this.config.potholeProbability),!j){console.log("Not spawning pothole, scheduling next obstacle"),this.startObstacleSpawning();return}let S;const w=k*this.config.potholeWidth,s=W*this.config.potholeHeight;S=this.scene.add.rectangle(0,0,w,s,this.config.potholeColor),S.setData("isPothole",!0);const c=Math.floor(Math.random()*this.laneIndices.length),y=this.laneIndices[c],u=K+ht.Math.Between(12,90),h=ht.Math.Clamp((u-K)/(W-K),0,1),l=this.config.roadBendStrength??140,n=this.currentCurve*l,o=n*.6,f=et=>(1-et)*(1-et)*0+2*(1-et)*et*o+et*et*n,r=this.getLensStrength(),d=1-ht.Math.Clamp(Math.abs(this.currentCurve),0,1),p=(y>=0?1:-1)*r*(h*h)*d,g=k/2+f(h)+y*(this.laneSpacingBottom*h)+p,m=ht.Math.Between(-6,6);S.setPosition(g+m,u),S.setData("laneIndex",y),this.lastPotholeSpawnStep=this.scene.time.now/1e3,S.setDepth(this.config.roadDepth+.5),S.setVisible(!1);const T=this.scene.add.rectangle(S.x,S.y,S.width,S.height,S.fillColor??16711680);T.setDepth(this.config.roadDepth+.5),this.drivingContainer.add(S),this.drivingContainer.add(T),S.setData("baseX",S.x);const P=k/2;if(S.setData("laneOffset",(S.x-P)/130),S.setData("baseW",S.width),S.setData("baseH",S.height),S.setData("visual",T),typeof S.getData("laneIndex")!="number"){const et=this.laneIndices.reduce((nt,rt)=>Math.abs(rt-S.getData("laneOffset"))<Math.abs(nt-S.getData("laneOffset"))?rt:nt,this.laneIndices[0]);S.setData("laneIndex",et)}const b=this.horizontalLinePhase%this.horizontalSpacing,R=K+Math.max(0,Math.floor((S.y-K+b)/this.horizontalSpacing))*this.horizontalSpacing,A=ht.Math.Clamp((R-K)/(W-K),0,1),D=this.config.roadBendStrength??140,G=this.currentCurve*D,F=G*.6,B=et=>(1-et)*(1-et)*0+2*(1-et)*et*F+et*et*G,N=this.getLensStrength(),z=1-ht.Math.Clamp(Math.abs(this.currentCurve),0,1),$=Number(S.getData("laneIndex"))||0,Q=($>=0?1:-1)*N*(A*A)*z,Z=P+B(A)+$*(this.laneSpacingBottom*A)+Q;T.setPosition(Z,R);const tt=S.getData("baseW")??S.width,H=S.getData("baseH")??S.height,J=.2+.8*A,Y=.4+.6*A;T.displayWidth=tt*J,T.displayHeight=H*Y;const _=100;if(this.obstacles.some(et=>et.getData("isExit")?ht.Math.Distance.Between(S.x,S.y,et.x,et.y)<_:!1)){console.log("Pothole too close to exit, deleting itself"),S.destroy(),T.destroy(),this.startObstacleSpawning();return}this.obstacles.push(S),this.startObstacleSpawning()}spawnTestExitPreview(){console.log("Spawning test exit preview");const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=k*.3,j=Math.floor(L*.3),S=L-Math.floor(j/2)-1,w=this.scene.add.rectangle(S,W+2,j,this.config.exitHeight,this.config.exitColor,.5);w.setVisible(!1);const s=this.generateBellCurvedDelay(5,20),c=`timer_${Date.now()}_${Math.random()}`;this.config.exitHeight,this.laneIndices[this.laneIndices.length-1],(S-L/2)/this.laneSpacingBottom,console.log("Created independent exit timer:",c,"with",s,"steps");const y=this.scene.add.rectangle(w.x,w.y,w.width,w.height,this.config.exitColor,.3);y.setDepth(this.config.roadDepth+.5),w.setData("isExitPreview",!0),w.setData("exitWidthPx",j),w.setData("stepsUntilActivation",s),this.drivingContainer.add(w),this.drivingContainer.add(y),w.setData("baseX",S),w.setData("laneOffset",(S-L/2)/this.laneSpacingBottom),w.setData("baseW",j),w.setData("baseH",this.config.exitHeight),w.setData("visual",y),w.setData("laneIndex",this.laneIndices[this.laneIndices.length-1]);const u=this.horizontalLinePhase%this.horizontalSpacing,h=W+Math.max(0,Math.floor((w.y-W+u)/this.horizontalSpacing))*this.horizontalSpacing,l=ht.Math.Clamp((h-W)/(k-W),0,1),n=this.config.roadBendStrength??140,o=this.currentCurve*n,f=o*.6,r=M=>(1-M)*(1-M)*0+2*(1-M)*M*f+M*M*o,d=this.getLensStrength(),p=1-ht.Math.Clamp(Math.abs(this.currentCurve),0,1),v=this.laneIndices[this.laneIndices.length-1],g=(v>=0?1:-1)*d*(l*l)*p,m=L/2+r(l)+v*(this.laneSpacingBottom*l)+g;y.setPosition(m,h);const T=.2+.8*l,P=.4+.6*l;y.displayWidth=j*T,y.displayHeight=this.config.exitHeight*P,console.log("Test exit preview created with",s,"steps until activation"),console.log("Preview starting position:",w.x,w.y),console.log("Screen height:",this.scene.cameras.main.height),console.log("Pothole speed:",this.config.potholeSpeed)}destroy(){this.stopForwardMovementTimer(),this.stopNeutralReturnTimer(),this.stopObstacleSpawning(),this.collisionTimer&&(this.collisionTimer.remove(),this.collisionTimer=null),this.drivingBackground&&this.drivingBackground.destroy(),this.drivingCar&&this.drivingCar.destroy(),this.roadLines.forEach(L=>L.destroy()),this.obstacles.forEach(L=>L.destroy()),this.radarContainer?.destroy(),this.radarBG=void 0,this.radarGrid=void 0,this.radarGraphics=void 0,this.radarPlayer=void 0,this.scene.events.off("countdownChanged",this.onCountdownChanged,this),this.scene.events.off("step",this.onStepChanged,this)}createRadar(){const L=this.scene.cameras.main.width,k=this.config.radarX??L-40,W=this.config.radarY??10,K=this.config.radarWidth??33,j=this.config.radarHeight??163,S=this.config.radarAlpha??.75;this.radarContainer=this.scene.add.container(k,W),this.radarContainer.setDepth(1e4),this.radarBG=this.scene.add.rectangle(0,0,K,j,16777215,S).setOrigin(0,0),this.radarGrid=this.scene.add.grid(2,2,K-3,j-3,(K-3)/3,(j-3)/5,3355443,.8).setOrigin(0,0),this.radarGraphics=this.scene.add.graphics(),this.radarPlayer=this.scene.add.rectangle(Math.floor(K/2),j-10,3,5,16776960),this.radarContainer.add([this.radarBG,this.radarGrid,this.radarPlayer,this.radarGraphics])}onCountdownChanged(L){}onStepChanged(L){if(console.log("Step changed to:",L),this.drivingPaused){console.log("Step changed but driving is paused - skipping visual updates");return}const k=this.scene.cameras.main.height;this.scene.cameras.main.width;const W=k*.3,K=k*.3+10,j=10;this.horizontalLinePhase=(this.horizontalLinePhase+j)%1e6;const S=this.horizontalLinePhase%this.horizontalSpacing,w=this.config.roadBendStrength??140;this.currentCurve*w,this.obstacles.forEach(s=>{const y=.5+.5*ht.Math.Clamp((s.y-W)/(k-W),0,1),u=this.config.potholeSpeed*60*y;s.y+=u;const h=s.getData("visual");if(!h)return;const l=K+Math.max(0,Math.floor((s.y-K+S)/this.horizontalSpacing))*this.horizontalSpacing;h.y=l})}generateBellCurvedDelay(L,k){const W=Math.random(),K=Math.random(),S=(Math.sqrt(-2*Math.log(W))*Math.cos(2*Math.PI*K)+3)/6,w=Math.max(0,Math.min(1,S));return Math.floor(L+w*(k-L))}spawnExitFromPreview(L){const{preview:k,originalData:W}=L;this.scene.cameras.main.width;const j=this.scene.cameras.main.height*.3;console.log("Spawning new exit at origin position:",W.baseX,j+2),console.log("Exit dimensions:",W.baseW,"x",W.baseH),console.log("Exit color:",this.config.exitColor);const S=this.scene.add.rectangle(W.baseX,j+2,W.baseW,W.baseH,this.config.exitColor,1);console.log("Created exit rectangle:",S),console.log("Exit visible:",S.visible),console.log("Exit alpha:",S.alpha),S.setData("isExit",!0),S.setData("exitWidthPx",W.baseW),S.setData("baseX",W.baseX),S.setData("laneOffset",W.laneOffset),S.setData("baseW",W.baseW),S.setData("baseH",W.baseH),S.setData("laneIndex",W.laneIndex);const w=this.scene.add.rectangle(S.x,S.y,S.width,S.height,this.config.exitColor,1);w.setDepth(this.config.roadDepth+.5),S.setData("visual",w),console.log("Created exit visual:",w),console.log("Visual visible:",w.visible),console.log("Visual alpha:",w.alpha),console.log("Visual depth:",w.depth),this.drivingContainer.add(S),this.drivingContainer.add(w),this.obstacles.push(S),console.log("Exit position after creation:",S.x,S.y),console.log("Exit visual position:",w.x,w.y)}updateRadar(){if(!this.config.radarEnabled||!this.radarGraphics||!this.radarPlayer)return;const L=this.radarBG.width,k=this.radarBG.height;this.radarGraphics.clear();const W=this.scene.cameras.main.width,K=ht.Math.Clamp(this.carX/W,0,1),j=ht.Math.Clamp(2+K*(L-4),4,L-3),S=ht.Math.Clamp((this.currentSteeringValue+100)/200,0,1),w=ht.Math.Clamp(2+S*(L-4),4,L-3),s=ht.Math.Clamp(this.carSpeed/Math.max(1,this.config.carMaxSpeed),0,1),c=ht.Math.Linear(w,j,s);this.radarPlayer.setX(c),this.obstacles.forEach(y=>{const u=ht.Math.Clamp(y.x/W,0,1),h=ht.Math.Clamp(2+u*(L-4),4,L-3),l=this.scene.cameras.main.height,n=ht.Math.Clamp(y.y/l,0,1),o=ht.Math.Clamp(2+n*(k-7),2,k-7);this.radarGraphics.fillStyle(16711680).fillRect(h,o,3,5)})}}class QY{scene;config;container;baseRect;pet;faceSVG;foodValue=0;bathroomValue=10;boredValue=0;foodBarBG;foodBarFill;foodLabel;bathroomBarBG;bathroomBarFill;bathroomLabel;boredBarBG;boredBarFill;boredLabel;lastCamWidth=0;debugGraphics;isHovering=!1;petBaseColor=_c.petColor;messageSprite;messageText;hasActiveMessage=!1;messageThresholds=[3,2,1.5,1,.5,.3,.2];lastMessageThreshold=10;messageStepsRemaining=0;messageStepTimer;messageStartX=0;messageStartY=0;messageType="";petBody;anchorBody;swayConstraint;anchorX=0;anchorY=0;steeringListenerBound;constructor(L,k={}){this.scene=L,this.config=k,this.foodValue=10,this.bathroomValue=10,this.boredValue=10,this.foodValue=Math.max(0,this.foodValue-ht.Math.FloatBetween(.1,.5)),this.bathroomValue=Math.max(0,this.bathroomValue-ht.Math.FloatBetween(.1,.5)),this.boredValue=Math.max(0,this.boredValue-ht.Math.FloatBetween(.1,.5)),k.petIndex!==void 0&&this.applySpecialPetValues(k.petIndex)}applySpecialPetValues(L){switch(L){case 0:this.boredValue=6;break;case 2:this.bathroomValue=6;break;case 4:this.foodValue=6;break}}initialize(){const L=this.scene.cameras.main,k=this.config.width??Math.floor(L.width*.85),W=this.config.height??Math.floor(L.height*.2),K=Math.floor((this.config.xPercent??.5)*L.width),j=Math.max(0,this.config.yOffset??6)+Math.floor(W/2);this.container=this.scene.add.container(0,0),this.config.depth!==void 0&&this.container.setDepth(this.config.depth),this.container.setScrollFactor(0);const S=k>0?k:Math.floor(this.scene.cameras.main.width*.5),w=W>0?W:Math.floor(this.scene.cameras.main.height*.25);this.container.setSize(S,w),this.container.setInteractive(new ht.Geom.Rectangle(-S/2,-w/2,S,w),ht.Geom.Rectangle.Contains),k>0&&W>0&&(this.baseRect=this.scene.add.rectangle(K,j,k,W,this.config.backgroundColor??2236962,.9),this.baseRect.setStrokeStyle(2,16777215,1),this.baseRect.setScrollFactor(0));const s=k>0?Math.floor(W*.27):25;this.petBaseColor=this.config.petColor??16764006;const c=k>0?Math.floor(this.baseRect?.width*.3):0,y=K-c,u=j-Math.floor(W*.35);this.pet=this.scene.add.ellipse(y,u,s*2,s*2,this.petBaseColor,1),this.pet.setStrokeStyle(2,0,1),this.pet.setScrollFactor(0),this.faceSVG=this.scene.add.sprite(this.pet.x,this.pet.y,"face-neutral"),this.faceSVG.setScale(.075),this.faceSVG.setOrigin(.5,.5),this.faceSVG.setAlpha(.9),this.faceSVG.setScrollFactor(0),this.faceSVG.setDepth(this.pet.depth+1),this.faceSVG.setTint(16777215),this.updateFaceEmotion(),this.pet.setInteractive(),this.pet.setInteractive(new ht.Geom.Circle(0,0,s),ht.Geom.Circle.Contains);let h=!1;this.pet.on("pointerdown",()=>{console.log("Virtual pet pointerdown detected!"),h=!0}),this.pet.on("pointerup",()=>{console.log("Virtual pet pointerup detected!"),h&&this.scene.scene.get("MenuScene")?.events.emit("showVirtualPetMenu",this.pet),h=!1});const l=this.baseRect?[this.baseRect,this.pet]:[this.pet];this.container.add(l),this.container.add(this.faceSVG);const n=this.scene.add.circle(K-c,j-Math.floor(W*.35),s,0,0);n.setInteractive(),n.setScrollFactor(0),n.setDepth(40001);let o=!1;n.on("pointerdown",()=>{console.log("Click area pointerdown detected!"),o=!0}),n.on("pointerup",()=>{console.log("Click area pointerup detected!"),o&&this.scene.scene.get("MenuScene")?.events.emit("showVirtualPetMenu",this.pet),o=!1}),this.container.on("pointerdown",()=>{console.log("Container pointerdown detected!")}),this.container.on("pointerup",()=>{console.log("Container pointerup detected!"),this.scene.scene.get("MenuScene")?.events.emit("showVirtualPetMenu",this.pet)});const f=L.width;this.lastCamWidth=f;const r=10,d=Math.max(6,Math.floor(f*.03)),p=K-c+s+12,v=j-Math.floor((W>0?W:80)*.35);this.foodLabel=this.scene.add.text(p-46,v-9,"FOOD",{fontSize:"12px",color:"#ffffff",fontStyle:"bold"}),this.foodLabel.setScrollFactor(0),this.foodLabel.setVisible(!1),this.foodBarBG=this.scene.add.rectangle(p+Math.floor(d/2),v,d,r,0,.6),this.foodBarBG.setStrokeStyle(1,16777215,.8),this.foodBarBG.setScrollFactor(0),this.foodBarBG.setVisible(!1),this.foodBarFill=this.scene.add.rectangle(p-Math.floor(d/2),v,Math.floor(d*(this.foodValue/10)),r-2,3066993,1).setOrigin(0,.5),this.foodBarFill.setScrollFactor(0),this.foodBarFill.setVisible(!1);const g=v+14;this.bathroomLabel=this.scene.add.text(p-46,g-9,"BATH",{fontSize:"12px",color:"#ffffff",fontStyle:"bold"}),this.bathroomLabel.setScrollFactor(0),this.bathroomLabel.setVisible(!1),this.bathroomBarBG=this.scene.add.rectangle(p+Math.floor(d/2),g,d,r,0,.6),this.bathroomBarBG.setStrokeStyle(1,16777215,.8),this.bathroomBarBG.setScrollFactor(0),this.bathroomBarBG.setVisible(!1),this.bathroomBarFill=this.scene.add.rectangle(p-Math.floor(d/2),g,Math.floor(d*(this.bathroomValue/10)),r-2,3447003,1).setOrigin(0,.5),this.bathroomBarFill.setScrollFactor(0),this.bathroomBarFill.setVisible(!1);const m=g+14;this.boredLabel=this.scene.add.text(p-46,m-9,"BORED",{fontSize:"12px",color:"#ffffff",fontStyle:"bold"}),this.boredLabel.setScrollFactor(0),this.boredLabel.setVisible(!1),this.boredBarBG=this.scene.add.rectangle(p+Math.floor(d/2),m,d,r,0,.6),this.boredBarBG.setStrokeStyle(1,16777215,.8),this.boredBarBG.setScrollFactor(0),this.boredBarBG.setVisible(!1),this.boredBarFill=this.scene.add.rectangle(p-Math.floor(d/2),m,Math.floor(d*(this.boredValue/10)),r-2,10181046,1).setOrigin(0,.5),this.boredBarFill.setScrollFactor(0),this.boredBarFill.setVisible(!1),this.container.add([this.foodLabel,this.foodBarBG,this.foodBarFill,this.bathroomLabel,this.bathroomBarBG,this.bathroomBarFill,this.boredLabel,this.boredBarBG,this.boredBarFill]),this.debugGraphics=this.scene.add.graphics(),this.debugGraphics.setScrollFactor(0),this.container.add(this.debugGraphics),this.setupMatterSway(y,u,s),this.steeringListenerBound=T=>this.applySteeringSway(T),this.scene.events.on("steeringInput",this.steeringListenerBound,this),this.scene.events.on("countdownChanged",()=>{this.processCountdownDecay()})}processCountdownDecay(){const L=this.config.petIndex||0,k=_c.petDecayRates[L];if(!k){console.warn(`VirtualPet: No decay rates found for pet index ${L}, using defaults`),this.setFood(this.foodValue-.05),this.setBathroom(this.bathroomValue-.04),this.setBored(this.boredValue-.045);return}this.setFood(this.foodValue-k.food),this.setBathroom(this.bathroomValue-k.bathroom),this.setBored(this.boredValue-k.boredom)}destroy(){this.steeringListenerBound&&(this.scene.events.off("steeringInput",this.steeringListenerBound,this),this.steeringListenerBound=void 0),this.scene.matter&&(this.swayConstraint&&this.scene.matter.world.removeConstraint(this.swayConstraint),this.petBody&&this.scene.matter.world.remove(this.petBody),this.anchorBody&&this.scene.matter.world.remove(this.anchorBody)),this.removeMessageSprite(),this.container?.destroy()}getRoot(){return this.container}getBounds(){if(this.baseRect)return this.baseRect.getBounds()}getScreenBounds(){if(!this.baseRect)return;const L=this.baseRect.width,k=this.baseRect.height;return new ht.Geom.Rectangle(this.baseRect.x-L/2,this.baseRect.y-k/2,L,k)}isPointerOver(L,k){const W=this.getFeedAnchor();if(!W)return!1;const K=L-W.x,j=k-W.y;return Math.sqrt(K*K+j*j)<=W.r+12}setHover(L){this.pet&&L!==this.isHovering&&(this.isHovering=L,L?(this.scene.tweens.add({targets:this.pet,scaleX:1.08,scaleY:1.08,duration:120,ease:"Sine.easeOut"}),this.pet.fillColor=16769162):(this.scene.tweens.add({targets:this.pet,scaleX:1,scaleY:1,duration:120,ease:"Sine.easeOut"}),this.pet.fillColor=this.petBaseColor))}setDebugBoundsVisible(L){if(!this.debugGraphics||!this.baseRect||(this.debugGraphics.clear(),!L))return;const k=this.baseRect.width,W=this.baseRect.height;this.debugGraphics.lineStyle(2,16711680,.9),this.debugGraphics.strokeRect(this.baseRect.x-k/2,this.baseRect.y-W/2,k,W)}getFeedAnchor(){if(!this.pet)return;const L=this.baseRect?.height||80,k=Math.floor(L*.3);return{x:this.pet.x,y:this.pet.y,r:k}}update(){if(!this.container)return;const L=this.scene.cameras.main.angle??0;if(this.container.setAngle?.(-L),this.petBody){const W=this.petBody.position.x,K=this.petBody.position.y;this.pet.setPosition(W,K),this.faceSVG.setPosition(W,K)}const k=this.scene.cameras.main;if(this.foodBarBG&&this.foodBarFill&&this.pet){const W=this.baseRect?.height||80,K=Math.floor(W*.3);if(this.foodBarBG.height,this.lastCamWidth!==k.width){this.lastCamWidth=k.width;const c=Math.max(6,Math.floor(k.width*.03));this.foodBarBG.width=c;const y=ht.Math.Clamp(this.foodValue,0,10);if(this.foodBarFill.width=Math.max(0,Math.floor(c*(y/10))-2),this.bathroomBarBG&&this.bathroomBarFill){this.bathroomBarBG.width=c;const u=ht.Math.Clamp(this.bathroomValue,0,10);this.bathroomBarFill.width=Math.max(0,Math.floor(c*(u/10))-2)}if(this.boredBarBG&&this.boredBarFill){this.boredBarBG.width=c;const u=ht.Math.Clamp(this.boredValue,0,10);this.boredBarFill.width=Math.max(0,Math.floor(c*(u/10))-2)}}const j=this.pet.x+K+12,S=this.pet.y;this.foodBarBG.setPosition(j,S),this.foodBarFill.setPosition(j-Math.floor(this.foodBarBG.width/2),S),this.foodLabel.setPosition(j-46,S-9);const w=S+14;this.bathroomBarBG?.setPosition(j,w),this.bathroomBarFill?.setPosition(j-Math.floor(this.bathroomBarBG?.width/2),w),this.bathroomLabel?.setPosition(j-46,w-9);const s=w+14;this.boredBarBG?.setPosition(j,s),this.boredBarFill?.setPosition(j-Math.floor(this.boredBarBG?.width/2),s),this.boredLabel?.setPosition(j-46,s-9)}}setupMatterSway(L,k,W){const K=this.scene.matter;if(!K)return;const j=.7+Math.random()*.6,S=.5+Math.random()*.4,w=.02+Math.random()*.03,s=.03+Math.random()*.06;this.anchorX=L,this.anchorY=k,this.anchorBody=K.add.circle(L,k,Math.max(1,Math.floor(W*.2)),{isStatic:!0,isSensor:!0,collisionFilter:{group:-2,category:0,mask:0}}),this.petBody=K.add.circle(L,k,Math.max(6,Math.floor(W*.5)),{frictionAir:s,friction:0,restitution:.2,isSensor:!0,collisionFilter:{group:-2,category:0,mask:0},mass:10,inertia:1e3}),this.petBody.ignoreGravity=!1,this.petBody.gravityScale=.1;const c=Math.max(1,Math.floor(W*.1*j));this.swayConstraint=K.add.constraint(this.anchorBody,this.petBody,c,w,{damping:S,stiffness:w})}applySteeringSway(L){if(!this.petBody)return;const W=-8e-4*ht.Math.Clamp(L/150,-1,1),K=0,j=this.scene.matter;j&&j.body&&this.petBody&&j.body.applyForce(this.petBody,this.petBody.position,{x:W,y:K})}refreshFoodBar(){if(!this.foodBarBG||!this.foodBarFill)return;const L=this.foodBarBG.width,k=ht.Math.Clamp(this.foodValue,0,10);this.foodBarFill.width=Math.max(0,Math.floor(L*(k/10))-2);const W=k>6?3066993:k>3?15844367:15158332;this.foodBarFill.fillColor=W}refreshBathroomBar(){if(!this.bathroomBarBG||!this.bathroomBarFill)return;const L=this.bathroomBarBG.width,k=ht.Math.Clamp(this.bathroomValue,0,10);this.bathroomBarFill.width=Math.max(0,Math.floor(L*(k/10))-2);const W=k>6?3447003:k>3?6139362:2056589;this.bathroomBarFill.fillColor=W}refreshBoredBar(){if(!this.boredBarBG||!this.boredBarFill)return;const L=this.boredBarBG.width,k=ht.Math.Clamp(this.boredValue,0,10);this.boredBarFill.width=Math.max(0,Math.floor(L*(k/10))-2);const W=k>6?10181046:k>3?12292046:7091331;this.boredBarFill.fillColor=W}createMessageSprite(){this.hasActiveMessage||!this.pet||(this.messageStartX=this.pet.x,this.messageStartY=this.pet.y+40,this.messageSprite=this.scene.add.circle(this.messageStartX,this.messageStartY,8,16711680,.8),this.messageSprite.setScrollFactor(0),this.messageSprite.setDepth(this.config.depth?this.config.depth+1e3:8e4),this.messageText=this.scene.add.text(this.messageStartX,this.messageStartY,this.messageType.toUpperCase(),{fontSize:"12px",color:"#ffffff",fontStyle:"bold",align:"center"}),this.messageText.setOrigin(.5,.5),this.messageText.setScrollFactor(0),this.messageText.setDepth(this.config.depth?this.config.depth+1001:80001),this.container&&(this.container.add(this.messageSprite),this.container.add(this.messageText)),this.hasActiveMessage=!0,this.messageStepsRemaining=8,console.log(`Pet ${this.config.petIndex}: Created ${this.messageType} message at threshold ${this.lastMessageThreshold}`),this.messageStepTimer=this.scene.time.addEvent({delay:1e3,loop:!0,callback:()=>{this.messageStepsRemaining--,this.updateMessageAnimation(),this.messageStepsRemaining<=0&&this.removeMessageSprite()}}))}updateMessageAnimation(){if(!this.messageSprite||!this.messageText)return;const L=8,W=(L-this.messageStepsRemaining)/L,K=30,j=this.messageStartX,S=this.messageStartY+K*W,w=.8,c=w-(w-0)*W;this.messageSprite.setPosition(j,S),this.messageSprite.setAlpha(c),this.messageText.setPosition(j,S),this.messageText.setAlpha(c)}removeMessageSprite(){console.log(`Pet ${this.config.petIndex}: Removing ${this.messageType} message (cleanup verification)`),this.messageSprite&&(this.messageSprite.destroy(),this.messageSprite=void 0,console.log("  -> Message sprite destroyed")),this.messageText&&(this.messageText.destroy(),this.messageText=void 0,console.log("  -> Message text destroyed")),this.messageStepTimer&&(this.messageStepTimer.remove(),this.messageStepTimer=void 0,console.log("  -> Message timer removed")),this.hasActiveMessage=!1,this.messageStepsRemaining=0,this.messageType="",console.log(`  -> Message cleanup completed for pet ${this.config.petIndex}`)}checkAndShowMessage(){const L=Math.min(this.foodValue,this.bathroomValue,this.boredValue);let k="";this.foodValue===L?k="food":this.bathroomValue===L?k="bath":this.boredValue===L&&(k="bored");let W=-1;for(let K=0;K<this.messageThresholds.length;K++){const j=this.messageThresholds[K];if(L<j&&j<this.lastMessageThreshold){W=j;break}}W>0&&!this.hasActiveMessage&&(this.lastMessageThreshold=W,this.messageType=k,this.createMessageSprite()),L>=3&&this.lastMessageThreshold<10&&(this.lastMessageThreshold=10)}triggerDebugMessage(){console.log(`Pet ${this.config.petIndex}: Triggering debug message`),this.messageType="debug",this.createMessageSprite()}setFood(L){this.foodValue=ht.Math.Clamp(L,0,10),this.refreshFoodBar(),this.updateFaceEmotion(),this.checkAndShowMessage()}setBathroom(L){this.bathroomValue=ht.Math.Clamp(L,0,10),this.refreshBathroomBar(),this.updateFaceEmotion(),this.checkAndShowMessage()}setBored(L){this.boredValue=ht.Math.Clamp(L,0,10),this.refreshBoredBar(),this.updateFaceEmotion(),this.checkAndShowMessage()}feedOverTime(L,k,W,K){const j=this.foodValue,S=ht.Math.Clamp(j+L,0,10),w=Math.max(50,k),s=this.scene.time.now,c=this.scene.time.addEvent({delay:16,loop:!0,callback:()=>{const y=ht.Math.Clamp((this.scene.time.now-s)/w,0,1),u=ht.Math.Easing.Quadratic.Out(y),h=ht.Math.Linear(j,S,u);this.setFood(h);const l=L*.5,n=this.bathroomValue,o=ht.Math.Clamp(n-l,0,10),f=ht.Math.Linear(n,o,u);this.setBathroom(f),W&&W(u),y>=1&&(c.remove(!1),K&&K())}})}getFoodMeterElements(){return{label:this.foodLabel,background:this.foodBarBG,fill:this.foodBarFill}}getBathroomMeterElements(){return{label:this.bathroomLabel,background:this.bathroomBarBG,fill:this.bathroomBarFill}}getBoredMeterElements(){return{label:this.boredLabel,background:this.boredBarBG,fill:this.boredBarFill}}getFoodValue(){return this.foodValue}getBathroomValue(){return this.bathroomValue}getBoredValue(){return this.boredValue}getPetScreenXY(){if(this.pet)return{x:this.pet.x,y:this.pet.y};if(this.baseRect)return{x:this.baseRect.x,y:this.baseRect.y-this.baseRect.height*.35};const L=this.scene.cameras.main;return{x:L.width/2,y:Math.floor(L.height*.15)}}getPetSprite(){return this.pet}updateFaceEmotion(){if(!this.faceSVG)return;const L=Math.min(this.foodValue,this.bathroomValue,this.boredValue);let k;L<=3?k="face-frown":L<=6?k="face-neutral":k="face-smile",this.faceSVG.setTexture(k)}}class jY{scene;config;overlayManager;tutorialOverlay;tutorialMaskGraphics;blinkText;blinkIntervalSteps=.5;lastTutorialState="";stepCounter=0;pulseTimer=0;flashTimer=0;frontseatKeys=null;gameUI=null;constructor(L,k,W){this.scene=L,this.config=k,this.overlayManager=W||new tv(L)}initialize(){this.createTutorialOverlay();const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height;this.blinkText=this.scene.add.text(L/2,k/2,"tutorial",{fontSize:"28px",color:"#ffffff",fontStyle:"bold",align:"center"}).setOrigin(.5),this.blinkText.setScrollFactor(0),this.blinkText.setDepth(1e4);try{this.blinkText.setStroke?.()}catch{}try{this.blinkText.setShadow?.(2,2,"#000000",6,!0,!0)}catch{}this.blinkText.setVisible(!1),this.tutorialOverlay.add(this.blinkText)}setPhysicsObjects(L){this.frontseatKeys=L}setGameUI(L){this.gameUI=L}updateTutorialMaskRealTime(){if(this.tutorialOverlay&&this.lastTutorialState==="keys-and-ignition"){const L=this.getKeysAndIgnitionCutouts(this.pulseTimer),k=this.tutorialOverlay.overlayInstance;if(k){k.mask&&k.mask.destroy();const W=this.scene.make.graphics();L.forEach(K=>{W.fillStyle(16777215);const j=K.x+K.width/2,S=K.y+K.height/2,w=Math.min(K.width,K.height)/2;W.fillCircle(j,S,w)}),k.mask=this.scene.add.bitmapMask(W),k.mask.invertAlpha=!0,k.background.setMask(k.mask)}}}updateTutorialOverlay(L){let k="none";if(!L.keysInIgnition&&!L.carStarted&&(k="keys-and-ignition"),window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🎯 Tutorial Update:",{keysInIgnition:L.keysInIgnition,carStarted:L.carStarted,tutorialState:k,stepCounter:this.stepCounter,stateChanged:this.lastTutorialState!==k}),this.tutorialOverlay){const W=k!=="none";this.tutorialOverlay.setVisible(W),window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🎯 Tutorial overlay visibility:",{tutorialState:k,shouldShow:W,actualVisible:this.tutorialOverlay.visible});try{this.scene.events?.emit?.("tutorialOverlayVisible",W)}catch{}}this.blinkText&&(k==="keys-and-ignition"?(this.blinkText.setText("Place keys in ignition"),this.blinkText.setVisible(!0)):this.blinkText.setVisible(!1)),k!=="none"&&this.lastTutorialState!==k&&this.updateTutorialMask(k),this.lastTutorialState!==k&&(window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🎯 Tutorial Update:",{tutorialState:k,shouldShow:k!=="none",actualVisible:this.tutorialOverlay?.visible}),this.lastTutorialState=k)}createTutorialOverlay(){if(this.tutorialOverlay){window?.__ENABLE_TUTORIAL_DEBUG&&console.log("Tutorial overlay already exists, skipping creation");return}const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height;window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🎨 Creating unified tutorial overlay with dimensions:",L,k);const W=this.overlayManager.createTutorialOverlay("tutorial_overlay",[]);window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🎨 Tutorial overlay created:",{container:!!W.container,background:!!W.background,mask:!!W.mask}),this.tutorialOverlay=W.container,this.tutorialMaskGraphics=this.scene.make.graphics(),this.tutorialOverlay.overlayInstance=W,this.tutorialOverlay.setVisible(!1)}updateTutorialMask(L){if(!this.tutorialOverlay){window?.__ENABLE_TUTORIAL_DEBUG&&console.log("Cannot update mask - overlay not found");return}let k=[];switch(L){case"keys-and-ignition":k=this.getKeysAndIgnitionCutouts(this.pulseTimer);break;case"steering":k=this.getSteeringCutouts();break;case"exit-warning":k=this.getExitWarningCutouts();break}window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🎭 Mask Debug:",{tutorialState:L,cutoutsCount:k.length,cutouts:k});const W=this.tutorialOverlay.overlayInstance;if(W){W.mask&&W.mask.destroy();const K=this.scene.make.graphics();k.forEach(j=>{K.fillStyle(16777215);const S=j.x+j.width/2,w=j.y+j.height/2,s=Math.min(j.width,j.height)/2;K.fillCircle(S,w,s)}),W.mask=this.scene.add.bitmapMask(K),W.mask.invertAlpha=!0,W.background.setMask(W.mask)}}getKeysAndIgnitionCutouts(L=0){const k=[],W=L%2===0?1:1.3;if(window?.__ENABLE_TUTORIAL_DEBUG&&L<20&&console.log("💓 Pulse Debug:",{timer:L,pulseScale:W.toFixed(1)}),window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🔑 Checking for frontseat keys:",{frontseatKeys:!!this.frontseatKeys,gameObject:!!this.frontseatKeys?.gameObject}),this.frontseatKeys?.gameObject){const w=this.frontseatKeys.gameObject.body;let s=w?w.position.x:this.frontseatKeys.gameObject.x,c=w?w.position.y:this.frontseatKeys.gameObject.y;window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🔑 Keys live position:",{x:s,y:c,hasBody:!!w});const y=this.config.keysHoleRadius*1.2*W;k.push({x:s-y,y:c-y,width:y*2,height:y*2}),window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🔑 Keys cutout:",{keysPos:{x:s,y:c},screenPos:{x:s,y:c},radius:y,cutout:k[k.length-1]})}else window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🔑 No frontseat keys found for cutout");let K=200,j=550;try{const w=ri.getMagneticTarget();K=w.position.x,j=w.position.y;const s=this.scene.magneticTarget,c=s&&s.magneticBody;c&&c.position&&(K=c.position.x,j=c.position.y)}catch{}const S=this.config.magneticTargetRadius*this.config.targetHoleMultiplier*1.2*W;return k.push({x:K-S,y:j-S,width:S*2,height:S*2}),window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🚗 Ignition cutout:",{ignitionPos:{x:K,y:j},radius:S,cutout:k[k.length-1]}),k}getSteeringCutouts(){const L=[],k=this.scene.cameras.main.width,W=this.scene.cameras.main.height,K=ri.getSteeringWheel(),j=k*K.position.x,S=W*K.position.y,w=96;return L.push({x:j-w,y:S-w,width:w*2,height:w*2}),L}showTutorial(){this.tutorialOverlay&&this.tutorialOverlay.setVisible(!0)}hideTutorial(){this.tutorialOverlay&&this.tutorialOverlay.setVisible(!1)}isTutorialVisible(){return this.tutorialOverlay?this.tutorialOverlay.visible:!1}getOverlayObjects(){const L=[];return this.tutorialOverlay&&L.push(this.tutorialOverlay),L}setBlinkText(L){this.blinkText&&this.blinkText.setText(L||"")}handleHalfStep(L){try{window?.__ENABLE_TUTORIAL_DEBUG&&console.log("💓 handleHalfStep called with halfStep:",L),this.flashTimer=L*.5,window?.__ENABLE_TUTORIAL_DEBUG&&console.log("💓 Using half-step counter:",L,"flash timer:",this.flashTimer);const k=this.isTutorialVisible();if(k&&this.lastTutorialState==="keys-and-ignition"&&(window?.__ENABLE_TUTORIAL_DEBUG&&console.log("💓 handleHalfStep: Updating mask with pulse, timer:",this.pulseTimer),this.updateTutorialMaskWithPulse()),!this.blinkText)return;if(!k||!this.blinkText.text){this.blinkText.setAlpha(0);return}const W=L%2,K=W===0?0:1;this.blinkText.setAlpha(K),window?.__ENABLE_TUTORIAL_DEBUG&&L%20===0&&console.log("💓 Tutorial text alpha animation (half-step):",{halfStep:L,phase:W,alpha:K,textVisible:this.blinkText.visible,textAlpha:this.blinkText.alpha,textText:this.blinkText.text})}catch(k){console.error("💓 Error in handleHalfStep:",k)}}handleStep(L){try{window?.__ENABLE_TUTORIAL_DEBUG&&console.log("💓 handleStep called with step:",L),this.stepCounter=L,this.pulseTimer+=1,window?.__ENABLE_TUTORIAL_DEBUG&&console.log("💓 Using global step counter:",this.stepCounter,"pulse timer:",this.pulseTimer),window?.__ENABLE_TUTORIAL_DEBUG&&this.stepCounter%5===0&&console.log("💓 handleStep called, step:",this.stepCounter,"overlay visible:",this.isTutorialVisible(),"tutorial state:",this.lastTutorialState),this.isTutorialVisible()&&this.lastTutorialState==="keys-and-ignition"&&(window?.__ENABLE_TUTORIAL_DEBUG&&console.log("💓 handleStep: Updating mask with pulse, timer:",this.pulseTimer),this.updateTutorialMaskWithPulse())}catch(k){console.error("💓 Error in handleStep:",k)}}updateTutorialMaskWithPulse(){if(!this.tutorialOverlay)return;window?.__ENABLE_TUTORIAL_DEBUG&&console.log("💓 Updating mask with pulse, timer:",this.pulseTimer);const L=this.getKeysAndIgnitionCutouts(this.pulseTimer),k=this.tutorialOverlay.overlayInstance;if(window?.__ENABLE_TUTORIAL_DEBUG&&console.log("💓 Mask update debug:",{overlayInstance:!!k,existingMask:!!k?.mask,cutoutsCount:L.length}),k){k.mask&&k.mask.destroy();const W=this.scene.make.graphics();L.forEach(K=>{W.fillStyle(16777215);const j=K.x+K.width/2,S=K.y+K.height/2,w=Math.min(K.width,K.height)/2;W.fillCircle(j,S,w)}),k.mask=this.scene.add.bitmapMask(W),k.mask.invertAlpha=!0,k.background.setMask(k.mask)}}getCurrentTutorialState(){return this.lastTutorialState}debugForceShowTutorial(){window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🐛 DEBUG: Forcing tutorial overlay to show"),window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🐛 DEBUG: Tutorial overlay exists:",!!this.tutorialOverlay),window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🐛 DEBUG: handleStep method exists:",typeof this.handleStep=="function"),this.tutorialOverlay?(window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🐛 DEBUG: Tutorial overlay visible before:",this.tutorialOverlay.visible),this.tutorialOverlay.setVisible(!0),window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🐛 DEBUG: Tutorial overlay visible after:",this.tutorialOverlay.visible),this.updateTutorialMask("keys-and-ignition"),this.blinkText&&(this.blinkText.setText("DEBUG: Place keys in ignition"),this.blinkText.setVisible(!0),this.blinkText.setAlpha(1),window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🐛 DEBUG: Blink text visible:",this.blinkText.visible,"alpha:",this.blinkText.alpha)),this.stepCounter=0,window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🐛 DEBUG: Reset step counter to 0 for pulsing animation"),window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🐛 DEBUG: Testing handleStep directly..."),this.handleStep(999)):window?.__ENABLE_TUTORIAL_DEBUG&&console.log("🐛 DEBUG: No tutorial overlay found")}getExitWarningCutouts(){return[]}destroy(){this.tutorialOverlay&&this.tutorialOverlay.destroy(),this.tutorialMaskGraphics&&this.tutorialMaskGraphics.destroy()}}const qe={steering:{dialXPercent:.3,dialYPercent:.7,knobRadius:80,svgScale:.2,svgAlpha:.8,svgDepth:998,indicatorLength:50,indicatorMaxAngleDeg:60,angleTextOffset:18,horizontalSensitivity:3.5,verticalSensitivity:2.5,returnToCenterSpeed:.02},crank:{xPercent:.7,yPercent:.6,svgScale:.1,svgAlpha:.8,triangleSize:8,triangleOffsetY:-25}};class qY{scene;config;gameLayerText;countdownText;minutesText;moneyText;healthText;progressText;progressBarBG;progressBarFill;progressThresholdIndicators=[];regionalUIFadedIn=!1;managerValuesText;frontseatButton;backseatButton;difficultyDebugText;regionText;stopsCounterText;monthlyListenersText;buzzText;encumbranceText;speedCrankTrack;speedCrankHandle;speedCrankValueIndicator;speedCrankArea;speedPercentageText;speedMeterBG;speedMeterFill;frontseatDragDial;steeringDialIndicator;steeringAngleText;steeringWheelSVG;speedCrankSVG;speedCrankTriangle;currentSteeringPosition=0;isDragging=!1;currentSpeedCrankPercentage=0;lookUpActive=!1;lookUpOriginalY=0;lookUpLabel;lookDownActive=!1;lookDownOriginalY=0;lookDownLabel;constructor(L,k){this.scene=L,this.config=k}initialize(){this.createGameLayerText(),this.createCountdownTimer(),this.createProgressText(),this.createMoneyAndHealthText(),this.createNavigationButtons(),this.createSpeedDisplay(),this.createFrontseatDragDial(),this.createMonthlyListenersDisplay()}updateUI(L){this.updateCountdown(L.gameTime,L.countdownStepCounter),this.updateDifficulty(L),this.updateMoney(L.money),this.updateProgress(L.progress),this.updateManagerValues(L),this.updateRegionInfo(L.currentRegion,L.showsInCurrentRegion),this.updateMonthlyListeners(L.monthlyListeners),this.updateBuzz(L.buzz),this.updateEncumbrance(2)}updateDifficulty(L){if(!this.difficultyDebugText)return;const k=this.computeDifficulty(L);this.difficultyDebugText.setText(`Diff: ${k.toFixed(2)}`);try{this.difficultyDebugText.setAlpha(this.countdownText.alpha)}catch{}}computeDifficulty(L){const k=L.currentRegion||Po.startingRegion,W=this.getRegionBaseDifficulty(k),K=L.showsInCurrentRegion||0,j=Po.showsPerRegion,S=Math.max(0,Math.min(1,K/Math.max(1,j)));return Math.min(5,W+S)}getRegionBaseDifficulty(L){return{midwest:1,south:2,southwest:3,west:4,northeast:5}[L]??1}updateThresholdIndicators(L,k,W){this.progressThresholdIndicators.forEach(s=>s.destroy()),this.progressThresholdIndicators=[];const K=this.progressBarWidth,j=this.progressBarX,S=this.progressBarY;if(!K||!j||!S)return;if(L.filter(s=>!s.spawned).forEach(s=>{const c=j+s.progressThreshold/100*K,y=S-8,u=this.scene.add.graphics();u.fillStyle(Dt.mediumGray,.8),u.beginPath(),u.moveTo(c,y),u.lineTo(c-4,y+8),u.lineTo(c+4,y+8),u.closePath(),u.fillPath(),u.setScrollFactor(0),u.setDepth(10002),u.setAlpha(0),this.progressThresholdIndicators.push(u)}),k&&k.forEach(s=>{if(s.isExitRelated&&s.exitNumber){if(!s.triggered){let c=s.progressThreshold;if(s.exitTiming==="before"&&s.exitNumber!=null){const n=L.find(o=>o.number===s.exitNumber);n&&(c=n.progressThreshold)}const y=j+c/100*K,u=S-16,h=this.scene.add.graphics();h.fillStyle(Dt.white,.8),h.beginPath(),h.moveTo(y,u),h.lineTo(y-4,u+8),h.lineTo(y+4,u+8),h.closePath(),h.fillPath(),h.setScrollFactor(0),h.setDepth(10002),h.setAlpha(0);const l=s.exitTiming==="before"||s.exitTiming==="after"?s.exitTiming==="before"?"B":"A":"";if(l){const n=this.scene.add.text(y,u-8,l,{fontSize:"10px",color:"#ffffff",fontStyle:"bold",stroke:"#000000",strokeThickness:2}).setOrigin(.5);n.setScrollFactor(0),n.setDepth(10003),n.setAlpha(0),this.progressThresholdIndicators.push(n)}this.progressThresholdIndicators.push(h)}return}if(!s.triggered){const c=j+s.progressThreshold/100*K,y=S-16,u=this.scene.add.graphics();u.fillStyle(Dt.lightGray,.8),u.beginPath(),u.moveTo(c,y),u.lineTo(c-4,y+8),u.lineTo(c+4,y+8),u.closePath(),u.fillPath(),u.setScrollFactor(0),u.setDepth(10002),u.setAlpha(0),this.progressThresholdIndicators.push(u)}}),W&&!W.triggered){const s=j+W.progressThreshold/100*K,c=S-24,y=this.scene.add.graphics();y.fillStyle(Dt.white,.8),y.beginPath(),y.moveTo(s,c),y.lineTo(s-4,c+8),y.lineTo(s+4,c+8),y.closePath(),y.fillPath(),y.setScrollFactor(0),y.setDepth(10002),y.setAlpha(0),this.progressThresholdIndicators.push(y)}this.progressThresholdIndicators.length>0&&this.fadeInTriangles()}createGameLayerText(){}createCountdownTimer(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=L*this.config.countdownPositionX,K=k*this.config.countdownPositionY+60;this.countdownText=this.scene.add.text(W,K,"0",{fontSize:this.config.countdownFontSize,color:`#${this.config.countdownColor.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:"#000000",padding:{x:4,y:2}}).setOrigin(.5),this.countdownText.setScrollFactor(0),this.countdownText.setDepth(1e4),this.countdownText.setAlpha(0);const j=this.countdownText.width||40,S=W+j/2+10,w=K;this.minutesText=this.scene.add.text(S,w,"0",{fontSize:"12px",color:`#${this.config.countdownColor.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:"#000000",padding:{x:4,y:2}}).setOrigin(.5),this.minutesText.setScrollFactor(0),this.minutesText.setDepth(1e4),this.minutesText.setAlpha(0);const s=K+20;this.difficultyDebugText=this.scene.add.text(W,s,"Diff: -",{fontSize:"12px",color:`#${this.config.countdownColor.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:"#000000",padding:{x:4,y:2}}).setOrigin(.5),this.difficultyDebugText.setScrollFactor(0),this.difficultyDebugText.setDepth(1e4),this.difficultyDebugText.setAlpha(0)}createProgressText(){this.scene.cameras.main.width,this.scene.cameras.main.height;const L=160,k=6,W=this.scene.cameras.main.width,K=this.scene.cameras.main.height,j=W*this.config.countdownPositionX,S=K*this.config.countdownPositionY,w=j-L/2,s=S-16+40,c=w,y=s-20;this.regionText=this.scene.add.text(c,y,"Midwest-1",{fontSize:"14px",color:"#ffffff",fontStyle:"bold",backgroundColor:"#000000",padding:{x:4,y:2}}).setOrigin(0,.5),this.regionText.setScrollFactor(0),this.regionText.setDepth(1e4),this.regionText.setAlpha(0);const u=c+120,h=y;this.stopsCounterText=this.scene.add.text(u,h,"0/3",{fontSize:"14px",color:"#ffffff",fontStyle:"bold",backgroundColor:"#000000",padding:{x:4,y:2}}).setOrigin(0,.5),this.stopsCounterText.setScrollFactor(0),this.stopsCounterText.setDepth(1e4),this.stopsCounterText.setAlpha(0),this.progressBarBG=this.scene.add.rectangle(w,s,L,k,0,.4).setOrigin(0,.5),this.progressBarFill=this.scene.add.rectangle(w,s,0,k,65280,.9).setOrigin(0,.5),this.progressBarBG.setScrollFactor(0),this.progressBarBG.setDepth(1e4),this.progressBarBG.setAlpha(0),this.progressBarFill.setScrollFactor(0),this.progressBarFill.setDepth(10001),this.progressBarFill.setAlpha(0),this.progressBarWidth=L,this.progressBarX=w,this.progressBarY=s}createMoneyAndHealthText(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=ri.getSteeringWheel(),j=L*W.position.x+250,S=k*.7-60;this.moneyText=this.scene.add.text(j,S,"$0",{fontSize:this.config.moneyHealthFontSize,color:`#${Dt.white.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:"#000000",padding:{x:8,y:4}}).setOrigin(1,.5),this.moneyText.setScrollFactor(0),this.moneyText.setDepth(1e4)}createManagerValuesText(){const L=this.scene.cameras.main.width;this.managerValuesText=this.scene.add.text(L-10,10,"",{fontSize:this.config.managerValuesFontSize,color:"#ffffff",backgroundColor:`#${this.config.managerValuesBackgroundColor.toString(16).padStart(6,"0")}`,padding:this.config.managerValuesPadding}).setOrigin(1,0),this.managerValuesText.setScrollFactor(0),this.managerValuesText.setDepth(1e4),this.managerValuesText.setAlpha(this.config.managerValuesOpacity)}createNavigationButtons(){this.scene.cameras.main.width,this.scene.cameras.main.height}createSpeedCrank(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=L*qe.crank.xPercent,K=k*qe.crank.yPercent;this.speedCrankTrack=this.scene.add.graphics(),this.speedCrankTrack.fillStyle(this.config.speedCrankTrackColor,this.config.speedCrankTrackAlpha),this.speedCrankTrack.fillRoundedRect(W-this.config.speedCrankWidth/2,K-this.config.speedCrankHeight/2,this.config.speedCrankWidth,this.config.speedCrankHeight,this.config.speedCrankTrackCornerRadius),this.speedCrankTrack.lineStyle(this.config.speedCrankTrackStrokeWidth,this.config.speedCrankTrackStrokeColor,1),this.speedCrankTrack.strokeRoundedRect(W-this.config.speedCrankWidth/2,K-this.config.speedCrankHeight/2,this.config.speedCrankWidth,this.config.speedCrankHeight,this.config.speedCrankTrackCornerRadius),this.speedCrankTrack.setDepth(this.config.speedCrankDepthTrack),this.speedCrankHandle=this.scene.add.graphics(),this.updateSpeedCrankHandle(0),this.speedCrankHandle.setDepth(this.config.speedCrankDepthHandle),this.speedCrankArea=this.scene.add.rectangle(W,K,this.config.speedCrankWidth+20,this.config.speedCrankHeight+20,0,0),this.speedCrankArea.setDepth(this.config.speedCrankDepthArea),this.speedCrankArea.setInteractive();try{const j=this.scene.textures.exists("steering-wheel")?"steering-wheel":this.scene.textures.getTextureKeys?.()[0]||"";j&&(this.speedCrankSVG=this.scene.add.sprite(W,K,j),this.speedCrankSVG.setScale(qe.crank.svgScale),this.speedCrankSVG.setOrigin(.5,.5),this.speedCrankSVG.setAlpha(qe.crank.svgAlpha),this.speedCrankSVG.setDepth(this.config.speedCrankDepthHandle+1))}catch{}this.speedCrankSVG.setTint(Dt.white),this.speedCrankTriangle=this.scene.add.graphics(),this.speedCrankTriangle.setDepth(this.config.speedCrankDepthHandle+2),this.updateSpeedCrankTriangle(0),this.setupSpeedCrankInteraction(W,K)}setupSpeedCrankInteraction(L,k){let W=!1;this.speedCrankArea.on("pointerdown",S=>{W=!0;const w=k-this.config.speedCrankHeight/2,s=k+this.config.speedCrankHeight/2,y=(ht.Math.Clamp(S.y,w,s)-w)/this.config.speedCrankHeight*100,u=this.snapToNearestPosition(y);this.updateSpeedCrank(u),this.scene.events.emit("speedCrankInput",u)});const K=S=>{if(!S.isDown){W=!1;return}if(!W)return;const w=k-this.config.speedCrankHeight/2,s=k+this.config.speedCrankHeight/2,y=(ht.Math.Clamp(S.y,w,s)-w)/this.config.speedCrankHeight*100,u=this.snapToNearestPosition(y);this.updateSpeedCrank(u),this.scene.events.emit("speedCrankInput",u)};this._speedCrankMoveAttached||(this.scene.input.on("pointermove",K),this._speedCrankMoveAttached=!0,this._speedCrankMoveHandler=K);const j=()=>{W=!1};this.scene.input.once("pointerup",j),this.scene.input.once("gameout",j),this.speedCrankArea.once("pointerup",j),this.speedCrankArea.once("pointerupoutside",j),this.speedCrankArea.once("pointerout",j),this.speedCrankArea.once("pointercancel",j),this.scene.game.events.once("hidden",j),this.scene.game.events.once("blur",j)}snapToNearestPosition(L){const W=(this.config.speedCrankSnapPositions||[0,.4,.7,1]).map(S=>S*100);let K=W[0],j=Math.abs(L-K);for(const S of W){const w=Math.abs(L-S);w<j&&(j=w,K=S)}return K}createSpeedDisplay(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=L*qe.steering.dialXPercent,K=k*qe.steering.dialYPercent,j=W+12,S=K-42,w=25,s=6;this.speedMeterBG=this.scene.add.graphics(),this.speedMeterBG.lineStyle(s,Dt.darkGray,.8),this.speedMeterBG.strokeCircle(0,0,w),this.speedMeterBG.setPosition(j,S),this.speedMeterBG.setScrollFactor(0),this.speedMeterBG.setDepth(10004),this.speedMeterFill=this.scene.add.graphics(),this.speedMeterFill.setPosition(j,S),this.speedMeterFill.setScrollFactor(0),this.speedMeterFill.setDepth(10005),this.speedPercentageText=this.scene.add.text(j,S,"0%",{fontSize:"12px",color:"#ffffff",fontFamily:"Arial",stroke:"#000000",strokeThickness:2}),this.speedPercentageText.setOrigin(.5,.5),this.speedPercentageText.setScrollFactor(0),this.speedPercentageText.setDepth(10006),this.speedPercentageText.setVisible(!0)}updateSpeedDisplay(L){if(this.speedPercentageText&&this.speedPercentageText.setText(`${Math.round(L)}%`),this.speedMeterFill){this.speedMeterFill.clear();const k=25,W=6,K=-Math.PI/2,j=K+L/100*2*Math.PI;let S=65280;L>50&&(S=16776960),L>80&&(S=16711680),this.speedMeterFill.lineStyle(W,S,.9),this.speedMeterFill.arc(0,0,k,K,j,!1),this.speedMeterFill.strokePath()}}createFrontseatDragDial(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=ri.getSteeringWheel(),K=L*W.position.x,j=k*W.position.y,S=qe.steering.knobRadius,w=this.scene.add.graphics();w.fillStyle(Dt.mediumDarkGray),w.fillCircle(0,0,S),w.lineStyle(2,Dt.white,1),w.strokeCircle(0,0,S),w.setPosition(K,j),w.setDepth(5e4),w.setInteractive(new ht.Geom.Circle(0,0,S),ht.Geom.Circle.Contains),this.steeringWheelSVG=this.scene.add.sprite(K,j,"steering-wheel"),this.steeringWheelSVG.setScale(qe.steering.svgScale*W.scale),this.steeringWheelSVG.setOrigin(.5,.5),this.steeringWheelSVG.setAlpha(qe.steering.svgAlpha),this.steeringWheelSVG.setDepth(50001),this.steeringWheelSVG.setTint(Dt.white),this.frontseatDragDial=w,this.steeringDialIndicator=this.scene.add.graphics(),this.steeringDialIndicator.setDepth(50002),this.steeringAngleText=this.scene.add.text(K,j+S+qe.steering.angleTextOffset,"0%",{fontSize:"14px",color:"#ffffff"}).setOrigin(.5).setDepth(50003);let s=!1,c=0,y=0;w.on("pointerdown",n=>{this.isDragging=!0,s=!0,c=n.x,y=n.y,w.setDepth(99999),this.steeringWheelSVG&&this.steeringWheelSVG.setDepth(1e5),w.clear(),w.fillStyle(Dt.mediumGray),w.fillCircle(0,0,S),w.lineStyle(2,Dt.white,1),w.strokeCircle(0,0,S)});const u=n=>{if(s){const o=n.x-c,f=n.y-y,r=o*qe.steering.horizontalSensitivity,d=f*qe.steering.verticalSensitivity,v=n.x-K>0?1:-1,g=r+d*v;this.currentSteeringPosition+=g,this.currentSteeringPosition=ht.Math.Clamp(this.currentSteeringPosition,-150,150);const m=Math.abs(this.currentSteeringPosition),T=.7+m/150*.3+Math.pow(m/150,2)*.3;this.currentSteeringPosition*T,this.scene.events.emit("steeringInput",this.currentSteeringPosition),this.updateSteeringIndicator(this.currentSteeringPosition),c=n.x,y=n.y}};this._dialMoveAttached||(this.scene.input.on("pointermove",u),this._dialMoveAttached=!0,this._dialMoveHandler=u);const h=()=>{l()},l=()=>{s&&(s=!1,this.isDragging=!1,w.setDepth(5e4),this.steeringWheelSVG&&this.steeringWheelSVG.setDepth(50001),w.clear(),w.fillStyle(Dt.mediumDarkGray),w.fillCircle(0,0,S),w.lineStyle(2,Dt.white,1),w.strokeCircle(0,0,S))};w.on("pointerup",l),w.on("pointerupoutside",l),w.on("pointerout",l),w.on("pointercancel",l),this.scene.input.once("pointerup",h),this.scene.input.once("gameout",l),this.scene.game.events.once("hidden",l),this.scene.game.events.once("blur",l)}update(L){if(!this.isDragging&&this.currentSteeringPosition!==0){const k=qe.steering.returnToCenterSpeed;this.currentSteeringPosition>0?this.currentSteeringPosition=Math.max(0,this.currentSteeringPosition-k*L):this.currentSteeringPosition=Math.min(0,this.currentSteeringPosition+k*L),this.updateSteeringIndicator(this.currentSteeringPosition)}}updateSteeringIndicator(L){if(this.steeringDialIndicator&&this.steeringDialIndicator.clear(),this.steeringAngleText){const k=Math.round((L+100)/2);this.steeringAngleText.setText(`${k}%`)}if(this.steeringWheelSVG){const k=ht.Math.Clamp(L/150*qe.steering.indicatorMaxAngleDeg,-60,qe.steering.indicatorMaxAngleDeg);this.steeringWheelSVG.setRotation(ht.Math.DegToRad(k))}}updateCountdown(L,k){if(this.countdownText&&this.countdownText.setText(L.toString()),this.minutesText){const S=Math.max(0,Math.floor((16-(k||0))/.26666666666666666)),w=S===60?"00":S.toString();this.minutesText.setText(w)}}updateMoney(L){this.moneyText&&this.moneyText.setText(`$${L}`)}updateHealth(L){this.healthText&&this.healthText.setText(`Health: ${Math.round(L*10)}%`)}updateProgress(L){if(this.progressBarFill&&this.progressBarBG){const k=ht.Math.Clamp(L,0,100)/100;this.progressBarFill.width=this.progressBarBG.width*k}}updateManagerValues(L){if(this.managerValuesText){const k=[`Skill: ${L.playerSkill}%`,`Difficulty: ${L.difficulty}%`,`Momentum: ${L.momentum}%`,`Plot A (${L.plotAEnum}): ${L.plotA}%`,`Plot B (${L.plotBEnum}): ${L.plotB}%`,`Plot C (${L.plotCEnum}): ${L.plotC}%`,`Stops: ${L.stops}`].join(`
`);this.managerValuesText.setText(k)}}updateSpeedCrank(L){this.currentSpeedCrankPercentage=L,this.updateSpeedCrankHandle(L),this.updateSpeedCrankTriangle(L)}updateSpeedCrankTriangle(L){if(!this.speedCrankTriangle)return;const k=this.scene.cameras.main.width,W=this.scene.cameras.main.height,K=k*this.config.countdownPositionX,j=W*this.config.countdownPositionY,S=160,w=K-S/2,s=j-16,c=w+L/100*S,y=s;this.speedCrankTriangle.clear(),this.speedCrankTriangle.fillStyle(Dt.white,1),this.speedCrankTriangle.lineStyle(1,Dt.black,1);const u=qe.crank.triangleSize,h=qe.crank.triangleOffsetY;this.speedCrankTriangle.beginPath(),this.speedCrankTriangle.moveTo(c,y+h),this.speedCrankTriangle.lineTo(c-u/2,y+h+u),this.speedCrankTriangle.lineTo(c+u/2,y+h+u),this.speedCrankTriangle.closePath(),this.speedCrankTriangle.fillPath(),this.speedCrankTriangle.strokePath()}updateSpeedCrankHandle(L){if(!this.speedCrankHandle)return;const k=this.scene.cameras.main.width,W=this.scene.cameras.main.height,K=k*.7,S=W*.6-this.config.speedCrankHeight/2+this.config.speedCrankHeight*L/100;this.speedCrankHandle.clear(),this.speedCrankHandle.fillStyle(this.config.speedCrankHandleColor,this.config.speedCrankHandleAlpha),this.speedCrankHandle.fillRoundedRect(K-this.config.speedCrankHandleHeight/2,S-this.config.speedCrankHandleHeight/2,this.config.speedCrankHandleHeight,this.config.speedCrankHandleHeight,this.config.speedCrankHandleCornerRadius),this.speedCrankHandle.lineStyle(this.config.speedCrankHandleStrokeWidth,this.config.speedCrankHandleStrokeColor,1),this.speedCrankHandle.strokeRoundedRect(K-this.config.speedCrankHandleHeight/2,S-this.config.speedCrankHandleHeight/2,this.config.speedCrankHandleHeight,this.config.speedCrankHandleHeight,this.config.speedCrankHandleCornerRadius)}getSpeedCrankPercentage(){return this.currentSpeedCrankPercentage}getSpeedCrankPosition(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=L*.7,K=k*.6;return{x:W,y:K,width:this.config.speedCrankWidth,height:this.config.speedCrankHeight}}getControlObjects(){const L=[];return this.speedCrankTrack&&L.push(this.speedCrankTrack),this.speedCrankHandle&&L.push(this.speedCrankHandle),this.speedCrankSVG&&L.push(this.speedCrankSVG),this.speedCrankArea&&L.push(this.speedCrankArea),this.frontseatDragDial&&L.push(this.frontseatDragDial),this.steeringWheelSVG&&L.push(this.steeringWheelSVG),this.steeringDialIndicator&&L.push(this.steeringDialIndicator),this.steeringAngleText&&L.push(this.steeringAngleText),this.lookUpLabel&&L.push(this.lookUpLabel),this.lookDownLabel&&L.push(this.lookDownLabel),this.frontseatButton&&L.push(this.frontseatButton),this.backseatButton&&L.push(this.backseatButton),L}fadeInRegionalUI(){if(console.log("🔺 fadeInRegionalUI called - regionalUIFadedIn:",this.regionalUIFadedIn),this.regionalUIFadedIn){console.log("🔺 fadeInRegionalUI: Already faded in, returning early");return}this.regionalUIFadedIn=!0,[this.regionText,this.stopsCounterText,this.countdownText,this.minutesText,this.progressBarBG,this.progressBarFill].forEach((k,W)=>{k&&(console.log(`🔺 Fading in regional element ${W} from alpha ${k.alpha} to 1`),this.scene.tweens.add({targets:k,alpha:1,duration:600,ease:"Cubic.easeOut",delay:W*50}))}),console.log("🔺 fadeInRegionalUI calling fadeInTriangles"),this.fadeInTriangles()}fadeInTriangles(){this.progressThresholdIndicators.forEach((L,k)=>{L&&L.alpha===0&&this.scene.tweens.add({targets:L,alpha:1,duration:600,ease:"Cubic.easeOut",delay:k*50})})}ensureTrianglesFadeIn(){this.fadeInTriangles()}updateRegionInfo(L,k){if(this.regionText){const W=this.getRegionVisitCount(L,k);this.regionText.setText(`${L}-${W}`)}}getRegionVisitCount(L,k){return k+1}updateRegionInfoWithTotal(L,k,W){this.updateRegionInfo(L,k),this.updateSequenceFraction(k,W)}createMonthlyListenersDisplay(){const L=this.scene.cameras.main.width,k=this.scene.cameras.main.height,W=ri.getSteeringWheel(),j=L*W.position.x+250,S=k*.7;this.buzzText=this.scene.add.text(j-80,S,`BUZZ
0`,{fontSize:"12px",color:`#${Dt.white.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:`#${Dt.black.toString(16).padStart(6,"0")}`,padding:{x:8,y:4},align:"right"}).setOrigin(1,.5),this.buzzText.setScrollFactor(0),this.buzzText.setDepth(1e4),this.monthlyListenersText=this.scene.add.text(j,S,`LISTENERS
2,000`,{fontSize:"12px",color:`#${Dt.white.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:`#${Dt.black.toString(16).padStart(6,"0")}`,padding:{x:8,y:4},align:"right"}).setOrigin(1,.5),this.monthlyListenersText.setScrollFactor(0),this.monthlyListenersText.setDepth(1e4);const w=S+40;this.encumbranceText=this.scene.add.text(j,w,`ENCUMBRANCE
2/10`,{fontSize:"12px",color:`#${Dt.white.toString(16).padStart(6,"0")}`,fontStyle:"bold",backgroundColor:`#${Dt.black.toString(16).padStart(6,"0")}`,padding:{x:8,y:4},align:"right"}).setOrigin(1,.5),this.encumbranceText.setScrollFactor(0),this.encumbranceText.setDepth(1e4)}updateMonthlyListeners(L){if(this.monthlyListenersText){const k=L.toLocaleString();this.monthlyListenersText.setText(`LISTENERS
${k}`)}}updateBuzz(L){this.buzzText&&this.buzzText.setText(`BUZZ
${L}`)}updateEncumbrance(L){this.encumbranceText&&this.encumbranceText.setText(`ENCUMBRANCE
${L}/10`)}updateSequenceFraction(L,k){if(this.stopsCounterText){const W=L+1;this.stopsCounterText.setText(`${W}/${k}`)}}getTotalSequencesForRegion(L){return 3}updateStopsCounter(L){this.stopsCounterText&&this.stopsCounterText.setText(`${L}/3`)}destroy(){[this.gameLayerText,this.countdownText,this.minutesText,this.moneyText,this.regionText,this.stopsCounterText,this.managerValuesText,this.frontseatButton,this.backseatButton,this.speedCrankTrack,this.speedCrankHandle,this.speedCrankValueIndicator,this.speedCrankArea,this.speedCrankSVG,this.speedCrankTriangle,this.frontseatDragDial,this.speedMeterBG,this.speedMeterFill].forEach(k=>{k&&k.destroy()});try{this._speedCrankMoveAttached&&this._speedCrankMoveHandler&&(this.scene.input.off("pointermove",this._speedCrankMoveHandler),this._speedCrankMoveAttached=!1,this._speedCrankMoveHandler=void 0),this._dialMoveAttached&&this._dialMoveHandler&&(this.scene.input.off("pointermove",this._dialMoveHandler),this._dialMoveAttached=!1,this._dialMoveHandler=void 0)}catch{}}}const _Y={swipe:{requireInteractiveBypassNames:["Button","Crank","Dial"]}};class tW{scene;config;swipeStartX=0;swipeStartY=0;swipeStartTime=0;isDraggingObject=!1;isKnobActive=!1;onSteeringInput;onSwipeLeft;onSwipeRight;onToggleDriving;onSwitchToFrontseat;onSwitchToBackseat;constructor(L,k){this.scene=L,this.config=k}initialize(){this.config.enableKeyboardControls&&this.setupKeyboardControls(),this.config.enableSwipeControls&&this.setupSwipeControls()}setInputState(L){this.isDraggingObject=L.isDraggingObject,this.isKnobActive=L.isKnobActive}setEventCallbacks(L){this.onSteeringInput=L.onSteeringInput,this.onSwipeLeft=L.onSwipeLeft,this.onSwipeRight=L.onSwipeRight,this.onToggleDriving=L.onToggleDriving,this.onSwitchToFrontseat=L.onSwitchToFrontseat,this.onSwitchToBackseat=L.onSwitchToBackseat}setupKeyboardControls(){this.scene.input.keyboard?.on("keydown-SPACE",()=>{this.onToggleDriving&&this.onToggleDriving()}),this.scene.input.keyboard?.on("keydown-LEFT",()=>{this.onSteeringInput&&this.onSteeringInput(-50)}),this.scene.input.keyboard?.on("keydown-RIGHT",()=>{this.onSteeringInput&&this.onSteeringInput(50)}),this.scene.input.keyboard?.on("keyup-LEFT",()=>{this.onSteeringInput&&this.onSteeringInput(0)}),this.scene.input.keyboard?.on("keyup-RIGHT",()=>{this.onSteeringInput&&this.onSteeringInput(0)})}setupSwipeControls(){this.scene.input.on("pointerdown",L=>{if(this.isKnobActive||this.isDraggingObject)return;const k=this.scene.input.hitTestPointer(L);if(k.length>0&&k.some(j=>j.input?.enabled||j.body||_Y.swipe.requireInteractiveBypassNames.some(S=>j.name?.includes(S))))return;const W=this.scene.scene.get("MenuScene");if(W&&W.scene.isActive()){const K=W.menuManager;if(K&&K.currentDialog)return}this.swipeStartX=L.x,this.swipeStartY=L.y,this.swipeStartTime=Date.now()}),this.scene.input.on("pointerup",L=>{if(this.swipeStartTime===0)return;const k=L.x,W=L.y,K=Date.now(),j=k-this.swipeStartX,S=W-this.swipeStartY,w=K-this.swipeStartTime,s=Math.sqrt(j*j+S*S),c=Math.abs(j)>Math.abs(S);s>=this.config.swipeMinDistance&&w<=this.config.swipeMaxTime&&c&&(j>this.config.swipeThreshold?this.onSwipeRight&&this.onSwipeRight():j<-this.config.swipeThreshold&&this.onSwipeLeft&&this.onSwipeLeft()),this.swipeStartTime=0})}handleDragStart(L,k){this.isDraggingObject=!0,L.body&&(L.body.isStatic=!0),L.isDragging=!0}handleDragMove(L,k,W,K){if(!this.isDraggingObject)return;const j=k.x-W,S=k.y-K;return L.x=k.x,L.y=k.y,{velocityX:j,velocityY:S}}handleDragEnd(L,k,W){this.isDraggingObject=!1,L.isDragging=!1,L.body&&(L.body.isStatic=!1,this.scene.matter.body.setVelocity(L.body,{x:k*this.config.momentumMultiplier,y:W*this.config.momentumMultiplier}))}handleKnobStart(){this.isKnobActive=!0}handleKnobEnd(){this.isKnobActive=!1}isInputBlocked(){return this.isDraggingObject||this.isKnobActive}isSwipeTracking(){return this.swipeStartTime>0}isDragging(){return this.isDraggingObject}getKnobActive(){return this.isKnobActive}resetInputState(){this.isDraggingObject=!1,this.isKnobActive=!1,this.swipeStartTime=0}destroy(){this.scene.input.keyboard?.off("keydown-SPACE"),this.scene.input.keyboard?.off("keydown-LEFT"),this.scene.input.keyboard?.off("keydown-RIGHT"),this.scene.input.keyboard?.off("keyup-LEFT"),this.scene.input.keyboard?.off("keyup-RIGHT"),this.scene.input.keyboard?.off("keydown-ONE"),this.scene.input.keyboard?.off("keydown-TWO"),this.scene.input.keyboard?.off("keydown-THREE"),this.scene.input.keyboard?.off("keydown-FOUR"),this.scene.input.off("pointerdown"),this.scene.input.off("pointerup"),this.resetInputState()}}class eW{scene;config;state;onStateChange;onSaveComplete;onLoadComplete;constructor(L,k){this.scene=L,this.config=k,this.state=this.createInitialState()}initialize(){this.state=this.createInitialState(),this.notifyStateChange()}setEventCallbacks(L){this.onStateChange=L.onStateChange,this.onSaveComplete=L.onSaveComplete,this.onLoadComplete=L.onLoadComplete}getState(){return{...this.state}}isGameStarted(){return this.state.gameStarted}updateState(L){const k={...this.state};Object.keys(L).forEach(W=>{const K=L[W];K!==void 0&&(this.state[W]=this.validateValue(W,K))}),this.state.lastSaveTime=new Date().toISOString(),JSON.stringify(k)!==JSON.stringify(this.state)&&this.notifyStateChange()}startTutorial(){this.updateState({tutorialPhase:"keys_placement",tutorialStep:0}),console.log("Tutorial started: keys placement phase")}advanceTutorial(){const L=this.state.tutorialPhase;let k,W=this.state.tutorialStep+1;switch(L){case"keys_placement":this.state.keysInIgnition?(k="initial_driving",W=0):k="keys_placement";break;case"initial_driving":W>=4?(k="countdown",W=0):k="initial_driving";break;case"countdown":k="interrupt",W=0;break;case"interrupt":k="normal",W=0;break;default:k="normal",W=0}this.updateState({tutorialPhase:k,tutorialStep:W}),console.log(`Tutorial advanced: ${L} -> ${k} (step: ${W})`)}isInTutorial(){return this.state.tutorialPhase!=="none"&&this.state.tutorialPhase!=="normal"}getTutorialPhase(){return this.state.tutorialPhase}getTutorialStep(){return this.state.tutorialStep}startGame(){this.updateState({gameStarted:!0,sessionStartTime:new Date().toISOString()}),console.log("Game started")}stopGame(){this.updateState({gameStarted:!1}),console.log("Game stopped")}loadGame(L){console.log(`Loading game from step ${L}`);try{this.loadSteps(L),this.state.gameStarted||this.startGame(),console.log("Game loaded successfully"),this.onLoadComplete&&this.onLoadComplete(!0,this.state)}catch(k){console.error("Failed to load game:",k),this.onLoadComplete&&this.onLoadComplete(!1)}}saveGame(){try{this.updateState({lastSaveTime:new Date().toISOString()});const L=this.scene.scene.get("AppScene"),k=L?L.getStep():0,W={...this.state,step:k,saveTime:new Date().toISOString(),version:"1.0.0"};return localStorage.setItem("game-fast-save",JSON.stringify(W)),console.log("Game saved successfully"),this.onSaveComplete&&this.onSaveComplete(!0),!0}catch(L){return console.error("Failed to save game:",L),this.onSaveComplete&&this.onSaveComplete(!1),!1}}loadFromStorage(){try{const L=localStorage.getItem("game-fast-save");if(!L)return console.log("No save data found"),null;const k=JSON.parse(L);return this.validateSaveData(k)?(this.state={...this.state,...k},console.log("Game loaded from storage successfully"),this.onLoadComplete&&this.onLoadComplete(!0,this.state),this.state):(console.warn("Invalid save data found"),null)}catch(L){return console.error("Failed to load from storage:",L),this.onLoadComplete&&this.onLoadComplete(!1),null}}hasSaveData(){return localStorage.getItem("game-fast-save")!==null}clearSaveData(){try{return localStorage.removeItem("game-fast-save"),console.log("Save data cleared successfully"),!0}catch(L){return console.error("Failed to clear save data:",L),!1}}getSaveInfo(){try{const L=localStorage.getItem("game-fast-save");if(!L)return{exists:!1};const k=JSON.parse(L);return{exists:!0,timestamp:k.saveTime||k.lastSaveTime,steps:k.step}}catch(L){return console.error("Failed to get save info:",L),{exists:!1}}}loadSteps(L){const k=this.scene.scene.get("AppScene");k&&k.setStep(L)}createInitialState(){return{gameStarted:!1,gameTime:this.config.initialGameTime,step:0,countdownStepCounter:0,tutorialPhase:"none",tutorialStep:0,money:this.config.initialMoney,health:this.config.initialHealth,playerSkill:this.config.initialPlayerSkill,difficulty:this.config.initialDifficulty,momentum:this.config.initialMomentum,monthlyListeners:this.config.initialMonthlyListeners,buzz:this.config.initialBuzz,plotA:this.config.initialPlotA,plotB:this.config.initialPlotB,plotC:this.config.initialPlotC,plotAEnum:"none",plotBEnum:"none",plotCEnum:"none",stops:0,progress:0,position:this.config.initialPosition,currentRegion:this.config.initialRegion,showsInCurrentRegion:0,regionHistory:[this.config.initialRegion],sequencesInCurrentRegion:this.calculateSequencesForRegion(this.config.initialRegion,1),carStarted:!1,keysInIgnition:!1,hasOpenMenu:!1,speedCrankPercentage:0,knobValue:this.config.initialKnobValue,currentPosition:"frontseat",currentView:"main",lastSaveTime:new Date().toISOString(),sessionStartTime:new Date().toISOString()}}validateValue(L,k){switch(L){case"money":return ht.Math.Clamp(k,this.config.minMoney,this.config.maxMoney);case"health":return ht.Math.Clamp(k,this.config.minHealth,this.config.maxHealth);case"playerSkill":return ht.Math.Clamp(k,this.config.minSkill,this.config.maxSkill);case"difficulty":return ht.Math.Clamp(k,this.config.minDifficulty,this.config.maxDifficulty);case"momentum":return ht.Math.Clamp(k,this.config.minMomentum,this.config.maxMomentum);case"plotA":case"plotB":case"plotC":return ht.Math.Clamp(k,this.config.minPlot,this.config.maxPlot);case"knobValue":return ht.Math.Clamp(k,this.config.minKnobValue,this.config.maxKnobValue);case"monthlyListeners":return ht.Math.Clamp(k,this.config.minMonthlyListeners,this.config.maxMonthlyListeners);case"buzz":return ht.Math.Clamp(k,this.config.minBuzz,this.config.maxBuzz);case"currentPosition":return["frontseat","backseat"].includes(k)?k:"frontseat";case"currentView":return["main","overlay"].includes(k)?k:"main";default:return k}}validateSaveData(L){const k=["gameStarted","money","health","step"];for(const W of k)if(L[W]===void 0)return!1;return!(typeof L.gameStarted!="boolean"||typeof L.money!="number"||typeof L.health!="number"||typeof L.step!="number")}notifyStateChange(){this.onStateChange&&this.onStateChange(this.state)}resetState(){this.state=this.createInitialState(),this.notifyStateChange(),console.log("Game state reset to initial values")}getStateSummary(){return`Game: ${this.state.gameStarted?"Started":"Stopped"} | Step: ${this.state.step} | Money: $${this.state.money} | Health: ${this.state.health} | Position: ${this.state.currentPosition} | Region: ${this.state.currentRegion} | Shows: ${this.state.showsInCurrentRegion}`}getCurrentRegion(){return this.state.currentRegion}getShowsInCurrentRegion(){return this.state.showsInCurrentRegion}incrementShowsInCurrentRegion(){this.updateState({showsInCurrentRegion:this.state.showsInCurrentRegion+1})}changeRegion(L){const k=this.state.currentRegion,W=this.getRegionVisitCount(L)+1,K=this.calculateSequencesForRegion(L,W);this.updateState({currentRegion:L,showsInCurrentRegion:0,regionHistory:[...this.state.regionHistory,L],sequencesInCurrentRegion:K}),console.log(`Region changed from ${k} to ${L} - sequence count reset to 0, total sequences: ${K}`)}getRegionHistory(){return[...this.state.regionHistory]}calculateSequencesForRegion(L,k){return this.hashString(`${L}-${k}`)%2+2}hashString(L){let k=0;for(let W=0;W<L.length;W++){const K=L.charCodeAt(W);k=(k<<5)-k+K,k=k&k}return Math.abs(k)}getSequencesForCurrentRegion(){return this.state.sequencesInCurrentRegion}getRegionVisitCount(L){return this.state.regionHistory.filter(k=>k===L).length}isFinalSequenceForRegion(){const L=this.getSequencesForCurrentRegion();return this.state.showsInCurrentRegion>=L-1}updateBuzz(L){const k=this.state.buzz+L;this.updateState({buzz:k})}updateListenersOnCountdown(){const L=this.state.buzz,k=Math.floor(L*10),W=this.state.monthlyListeners+k;this.updateState({monthlyListeners:W}),console.log(`Buzz: ${this.state.buzz}, Listener change: ${k}, New total: ${W}`)}getMonthlyListeners(){return this.state.monthlyListeners}getBuzz(){return this.state.buzz}shouldChooseNextRegion(){const L=this.getSequencesForCurrentRegion();return this.state.showsInCurrentRegion>=L}}const iW={fauxchella:{name:"Fauxchella",description:"A music festival adventure",events:{1:{title:"fauxchella-1",text:"fauxchella-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"fauxchella-2",text:"fauxchella-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"fauxchella-3",text:"fauxchella-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"fauxchella-4",text:"fauxchella-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"fauxchella outcome a",b:"fauxchella outcome b"}},marge:{name:"Marge",description:"A suburban adventure",events:{1:{title:"marge-1",text:"marge-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"marge-2",text:"marge-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"marge-3",text:"marge-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"marge-4",text:"marge-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"marge outcome a",b:"marge outcome b"}},carpool:{name:"Carpool",description:"A commuting adventure",events:{1:{title:"carpool-1",text:"carpool-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"carpool-2",text:"carpool-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"carpool-3",text:"carpool-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"carpool-4",text:"carpool-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"carpool outcome a",b:"carpool outcome b"}},trapt:{name:"Trapt",description:"A mysterious adventure",events:{1:{title:"trapt-1",text:"trapt-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"trapt-2",text:"trapt-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"trapt-3",text:"trapt-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"trapt-4",text:"trapt-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"trapt outcome a",b:"trapt outcome b"}},grink:{name:"Grink",description:"A quirky adventure",events:{1:{title:"grink-1",text:"grink-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"grink-2",text:"grink-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"grink-3",text:"grink-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"grink-4",text:"grink-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"grink outcome a",b:"grink outcome b"}},agent:{name:"Agent",description:"A professional adventure",events:{1:{title:"agent-1",text:"agent-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"agent-2",text:"agent-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"agent-3",text:"agent-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"agent-4",text:"agent-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"agent outcome a",b:"agent outcome b"}},label:{name:"Label",description:"A creative adventure",events:{1:{title:"label-1",text:"label-1 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},2:{title:"label-2",text:"label-2 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},3:{title:"label-3",text:"label-3 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]},4:{title:"label-4",text:"label-4 story text",choices:[{text:"Choice A",outcome:"a"},{text:"Choice B",outcome:"b"}]}},outcomes:{a:"label outcome a",b:"label outcome b"}}},sW={storylines:iW};class nW{scene;config;currentProgress=null;novelElement=null;isStoryActive=!1;pendingCompletion=!1;debugStoryActive=!1;currentDebugStoryline="fauxchella";currentDebugEvent=1;storylines=[];constructor(L){this.scene=L,this.config=sW}setupDebugControls(){this.scene.input.keyboard?.on("keydown-S",()=>{this.toggleDebugStory()}),this.scene.input.keyboard?.on("keydown-UP",()=>{this.debugStoryActive&&this.changeDebugStoryline(-1)}),this.scene.input.keyboard?.on("keydown-DOWN",()=>{this.debugStoryActive&&this.changeDebugStoryline(1)}),this.scene.input.keyboard?.on("keydown-LEFT",()=>{this.debugStoryActive&&this.changeDebugEvent(-1)}),this.scene.input.keyboard?.on("keydown-RIGHT",()=>{this.debugStoryActive&&this.changeDebugEvent(1)})}initialize(){console.log("StoryManager: Initializing story system"),this.setupNovelElement(),this.setupDebugControls(),this.storylines=Object.keys(this.config.storylines),console.log("StoryManager: Available storylines:",this.storylines),console.log("StoryManager: Story config loaded:",Object.keys(this.config.storylines).length,"storylines")}setupNovelElement(){this.novelElement=document.createElement("div"),this.novelElement.style.display="none",this.novelElement.style.position="absolute",this.novelElement.style.top="-9999px",document.body.appendChild(this.novelElement)}toggleDebugStory(){this.debugStoryActive?this.closeDebugStory():this.openDebugStory()}openDebugStory(){this.debugStoryActive=!0,this.showDebugStory(),console.log(`Debug Story: ${this.currentDebugStoryline}-${this.currentDebugEvent}`)}closeDebugStory(){this.debugStoryActive=!1;const L=this.scene.scene.get("MenuScene");L&&L.menuManager.closeCurrentDialog()}showDebugStory(){const L=this.config.storylines[this.currentDebugStoryline],k=L.events[this.currentDebugEvent.toString()];if(!L){console.error(`Debug Story: Storyline '${this.currentDebugStoryline}' not found in config`);return}if(!k){console.error(`Debug Story: Event ${this.currentDebugEvent} not found in storyline '${this.currentDebugStoryline}'`);return}console.log(`Debug Story: Showing ${this.currentDebugStoryline}-${this.currentDebugEvent}`),console.log(`Debug Story: Text: "${k.text}"`),console.log(`Debug Story: Choices: ${k.choices.length} choices`);const W=this.scene.scene.get("MenuScene");W&&(W.events.emit("showNovelStory",{storyline:this.currentDebugStoryline,event:this.currentDebugEvent,eventData:k,storylineData:L}),this.scene.scene.bringToTop("MenuScene"))}changeDebugStoryline(L){let W=this.storylines.indexOf(this.currentDebugStoryline)+L;W<0&&(W=this.storylines.length-1),W>=this.storylines.length&&(W=0),this.currentDebugStoryline=this.storylines[W],this.showDebugStory(),console.log(`Debug Story: ${this.currentDebugStoryline}-${this.currentDebugEvent}`)}changeDebugEvent(L){let k=this.currentDebugEvent+L;k=Math.max(1,Math.min(4,k)),this.currentDebugEvent=k,this.showDebugStory(),console.log(`Debug Story: ${this.currentDebugStoryline}-${this.currentDebugEvent}`)}startStory(L,k=1){if(!this.config.storylines[L]){console.error(`StoryManager: Unknown storyline: ${L}`);return}let W=k;L==="fauxchella"&&(W=this.getNextFauxchellaEvent());const K=this.config.storylines[L],j=W.toString();if(!K.events[j]){console.error(`StoryManager: Event ${W} not found in storyline ${L}`);return}this.currentProgress={currentStoryline:L,currentEvent:W,choices:[],completed:!1},this.isStoryActive=!0,console.log(`StoryManager: Starting story ${L}-${W}`);const S={storyline:L,event:W,eventData:K.events[j],storylineData:K};console.log("StoryManager: Emitting showNovelStory event with data:",S);const w=this.scene.scene.get("MenuScene");w?(w.events.emit("showNovelStory",S),console.log("StoryManager: showNovelStory event emitted to MenuScene")):console.error("StoryManager: MenuScene not found")}getNextFauxchellaEvent(){const L=this.scene.scene.get("GameScene");if(!L||!L.gameState)return 1;const W=L.gameState.getState(),K=[{listeners:0,event:1},{listeners:5e3,event:2},{listeners:1e4,event:3},{listeners:2e4,event:4}],j=W.monthlyListeners||0;let S=1;for(const w of K)j>=w.listeners&&(S=w.event);return console.log(`StoryManager: Next fauxchella event: ${S} (${j} listeners)`),S}makeChoice(L){if(!this.currentProgress||!this.isStoryActive){console.warn("StoryManager: No active story to make choice for");return}this.currentProgress.choices.push(L),this.config.storylines[this.currentProgress.currentStoryline].events[this.currentProgress.currentEvent.toString()],console.log(`StoryManager: Made choice ${L} in ${this.currentProgress.currentStoryline}-${this.currentProgress.currentEvent}`),this.currentProgress.currentEvent>=4?(console.log("StoryManager: Last event completed, waiting for outcome window to close before completing story"),this.pendingCompletion=!0):(this.currentProgress.currentEvent++,this.continueStory())}completeStoryAfterOutcome(){this.pendingCompletion&&(this.pendingCompletion=!1,this.completeStory())}continueStory(){if(!this.currentProgress)return;const L=this.config.storylines[this.currentProgress.currentStoryline],k=L.events[this.currentProgress.currentEvent.toString()];console.log(`StoryManager: Continuing to ${this.currentProgress.currentStoryline}-${this.currentProgress.currentEvent}`),this.scene.events.emit("showNovelStory",{storyline:this.currentProgress.currentStoryline,event:this.currentProgress.currentEvent,eventData:k,storylineData:L})}completeStory(){if(!this.currentProgress)return;this.currentProgress.completed=!0,this.isStoryActive=!1;const L=this.config.storylines[this.currentProgress.currentStoryline],k=this.currentProgress.choices[this.currentProgress.choices.length-1],W=L.outcomes[k]||L.outcomes.a;console.log(`StoryManager: Completed story ${this.currentProgress.currentStoryline}`),this.scene.events.emit("storyCompleted",{storyline:this.currentProgress.currentStoryline,outcome:W,choices:this.currentProgress.choices}),this.currentProgress=null}getAvailableStorylines(){return Object.keys(this.config.storylines)}getStoryline(L){return this.config.storylines[L]||null}isStoryRunning(){return this.isStoryActive}isDebugStoryActive(){return this.debugStoryActive}getCurrentProgress(){return this.currentProgress}destroy(){this.novelElement&&(document.body.removeChild(this.novelElement),this.novelElement=null),this.currentProgress=null,this.isStoryActive=!1}}const Mo={gravity:{baseY:.5,maxLateralGx:.8},tutorial:{scheduleDelayMs:50},magnetic:{attractionWindowMs:900},performance:{uiUpdateDeltaMs:16}};class rW extends ht.Scene{carMechanics;lastPlannedData="";tutorialSystem;gameUI;inputHandlers;gameState;windowShapes;storyManager;virtualPets=[];petLabels=[];dragOverlay;controlsCamera;itemsCamera;dragOverlayCamera;feedingDebug;magneticVisualState="default";keysAttractionUntil=0;lastMagneticAttractionLog=0;physicsSafetyTimer;debugWindows=[];frontseatTrash;backseatItem;frontseatKeys;gameContentContainer;magneticTarget;keySVG;hotdogSVG;nightTimeOverlay;nightModeEnabled=!1;keysConstraint=null;keysInIgnition=!1;carStarted=!1;steeringUsed=!1;firstCarStart=!0;drivingMode=!1;shouldAutoRestartDriving=!1;exitDetectionLogCounter=0;currentPosition="frontseat";storyOverlayScheduledStep=null;chapter1Shown=!1;firstSteeringLoggedStep=null;hasShownCrankTutorial=!1;hasClearedCrankTutorial=!1;hasShownSteeringTutorial=!1;hasClearedSteeringTutorial=!1;stopMenuOpen=!1;countdownStepCounter=0;tutorialInterruptStep=null;gravityBaseY=Mo.gravity.baseY;gravityXCurrent=0;gravityXTarget=0;tutorialUpdateScheduled=!1;tutorialUpdateCounter=0;constructor(){super({key:"GameScene"})}async create(){try{await ri.loadConfig(),this.input.topOnly=!0,this.input.keyboard?.on("keydown-P",()=>{this.carMechanics&&this.carMechanics.isDriving()&&this.carMechanics.spawnDebugPothole()}),this.initializeGameState(),this.initializeSystems()}catch(f){console.error("ERROR in GameScene.create():",f)}this.createPhysicsObjects(),this.initializePhysicsSafetySystem(),this.addDevSequenceButton(),this.createGameContentContainer(),this.createMagneticTarget(),this.setupPhysicsWorlds();try{this.gameUI.initialize()}catch(f){console.error("ERROR calling gameUI.initialize():",f)}this.tutorialSystem.initialize(),this.carMechanics.initialize(),this.inputHandlers.initialize();try{this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.M,!0,!1)?.on("down",()=>{if(this.input.keyboard?.checkDown(this.input.keyboard.addKey(ht.Input.Keyboard.KeyCodes.SHIFT))){if(this.virtualPets.length>0){const N=Math.floor(Math.random()*this.virtualPets.length),z=this.virtualPets[N];console.log(`Debug: Triggering test message on pet ${N}`),z.triggerDebugMessage()}}else{const N=this.scene.get("MenuScene");N&&(N.events.emit("showDestinationMenu",!0),this.scene.bringToTop("MenuScene"))}}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.P,!0,!1)?.on("down",()=>{const N=this.scene.get("MenuScene");N&&N.events.emit("showPotholeMenu")}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.P,!0,!1)?.on("down",()=>{this.input.keyboard?.checkDown(this.input.keyboard.addKey(ht.Input.Keyboard.KeyCodes.SHIFT))&&(console.log("Debug: Setting progress to 99%"),this.gameState.updateState({progress:99}))}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.R,!0,!1)?.on("down",()=>{this.createDebugWindow()}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.S,!0,!1)?.on("down",()=>{this.createDebugSpeechBubble()}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.U,!0,!1)?.on("down",()=>{console.log("Debug: Forcing tutorial overlay to show"),this.tutorialSystem.debugForceShowTutorial()}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.K,!0,!1)?.on("down",()=>{console.log("Debug: Testing handleStep directly");try{this.tutorialSystem.handleStep(999),console.log("Debug: handleStep test successful")}catch(N){console.error("Debug: handleStep test failed:",N)}}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.T,!0,!1)?.on("down",()=>{console.log("🎭 Creating story dialog with queue support"),this.createStoryDialogWithQueue()}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.H,!0,!1)?.on("down",()=>{console.log("🎭 Creating story dialog with queue support (H key)"),this.createStoryDialogWithQueue()}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.J,!0,!1)?.on("down",()=>{console.log("🎮 Creating CYOA dialog with H menu styling (J key)"),this.createCYOADialog()}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.X,!0,!1)?.on("down",()=>{console.log("🔧 Force resetting narrative system..."),this.windowShapes.forceResetNarrativeSystem()}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.OPEN_BRACKET,!0,!1)?.on("down",()=>{console.log("🎨 Cycling to previous dither pattern..."),this.windowShapes.overlayManager.cycleDitherPattern("prev")}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.CLOSED_BRACKET,!0,!1)?.on("down",()=>{console.log("🎨 Cycling to next dither pattern..."),this.windowShapes.overlayManager.cycleDitherPattern("next")}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.E,!0,!1)?.on("down",()=>{console.log("🚪 Debug: Opening Exit Stores Catalog"),this.carMechanics&&this.carMechanics.pauseDriving();const N=this.scene.get("MenuScene");N&&(N.events.emit("showExitStoresCatalog"),this.scene.bringToTop("MenuScene"))});const G=N=>{const z=this.scene.get("MenuScene");z&&(z.events.emit("showPetStoryUI",{petIndex:N}),this.scene.bringToTop("MenuScene"))};this.input.keyboard?.on("keydown-ONE",()=>G(0)),this.input.keyboard?.on("keydown-TWO",()=>G(1)),this.input.keyboard?.on("keydown-THREE",()=>G(2)),this.input.keyboard?.on("keydown-FOUR",()=>G(3)),this.input.keyboard?.on("keydown-FIVE",()=>G(4)),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.D,!0,!1)?.on("down",()=>{const N=this.scene.get("MenuScene");N&&(N.events.emit("showMoralDecision",{petIndex:0,text:"You witness a stranger drop their wallet. What do you do?",optionA:"Return it immediately",optionB:"Keep it for yourself",followA:"You feel good about doing the right thing.",followB:"You feel guilty about your choice."}),this.scene.bringToTop("MenuScene"))}),this.input.keyboard?.addKey(ht.Input.Keyboard.KeyCodes.C,!0,!1)?.on("down",()=>{const N=this.scene.get("MenuScene");N&&(N.events.emit("showCyoaMenu",{cyoaId:1,isExitRelated:!1}),this.scene.bringToTop("MenuScene"))})}catch{}const L=this.add.container(0,0);L.setName("rearviewContainer"),L.setScrollFactor(0),L.setDepth(4e4);const k=this.cameras.main,W=-k.height;L.setPosition(0,W);const K=ri.getRearviewMirror(),j=Math.floor(k.width*K.size.width),S=Math.floor(k.height*K.size.height),w=Math.floor(k.width*K.position.x),s=Math.floor(k.height*K.position.y),c=this.add.rectangle(w,s,j,S,Rt.rearviewBackgroundColor,Rt.rearviewBackgroundAlpha);c.setStrokeStyle(2,Rt.rearviewStrokeColor,1),c.setScrollFactor(0),L.add(c);const y=ri.getVirtualPetPositions();for(let f=0;f<5;f++){const r=y[f],d=Math.floor((r.x-.5)*j),p=Math.floor((r.y-.5)*S),v=w+d,g=s+p+20,m=new QY(this,{depth:70001+f,xPercent:v/k.width,yOffset:g,petColor:_c.petColor,width:0,height:0,scale:r.scale||.8,petIndex:f});m.initialize();const T=m.getRoot?.();T&&T.setAlpha(0),this.virtualPets.push(m);const P=m.getPetSprite?.(),M=m.getFeedAnchor?.();if(P&&M){const b=this.add.text(P.x,P.y-(M.r+20),`${f+1}`,{fontSize:"16px",color:"#ffffff",fontStyle:"bold",stroke:"#000000",strokeThickness:2}).setOrigin(.5);b.setScrollFactor(0),b.setDepth(70050+f),this.petLabels[f]=b}}const u=this.gameUI.getControlObjects?.(),h=this.tutorialSystem.getOverlayObjects?.();if(u&&u.length>0){this.cameras.main.ignore(u),this.controlsCamera=this.cameras.add(0,0,this.cameras.main.width,this.cameras.main.height),this.controlsCamera.setScroll(0,0),this.controlsCamera.setName("controlsCamera");const f=this.children.list||[],r=new Set([...u,...h||[]]),d=f.filter(p=>!r.has(p));d.length>0&&this.controlsCamera.ignore(d)}try{const f=this.tutorialSystem.getOverlayObjects?.();if(f&&f.length&&this.controlsCamera){const r=this.controlsCamera.ignoreList;if(r){const d=r.filter(p=>!f.includes(p));this.controlsCamera.ignore(d)}}}catch{}this.itemsCamera=this.cameras.add(0,0,this.cameras.main.width,this.cameras.main.height),this.itemsCamera.setScroll(0,0),this.itemsCamera.setName("itemsCamera"),this.children.list;const l=this.gameUI.getControlObjects?.(),n=this.virtualPets.map(f=>f.container).filter(Boolean),o=[...l||[],...n];o.length>0&&this.itemsCamera.ignore(o),this.dragOverlay=this.add.container(0,0),this.dragOverlay.setDepth(110001),this.dragOverlay.setScrollFactor(0),this.cameras.main.ignore(this.dragOverlay);try{if(this.dragOverlayCamera){this.dragOverlayCamera.setVisible(!1);const f=this.children.list||[];this.dragOverlayCamera.ignore(f)}}catch{}this.feedingDebug=this.add.graphics(),this.feedingDebug.setScrollFactor(0),this.dragOverlay.add(this.feedingDebug),this.input.on("pointermove",f=>{const r=this.getVirtualPet?.();if(!r)return;if(!(this.isDraggingObject===!0)){r.setHover?.(!1);return}const p=r.isPointerOver?.(f.x,f.y)??!1;if(r.setHover?.(p),p){const v=this.draggingItem;if(v){const g=this.time.now,m=1400;v._overSince||(v._overSince=g);const T=g-v._overSince,P=v._lastFeedTime??0,M={speed:{min:100,max:200},angle:{min:0,max:360},scale:{start:.5,end:0},lifespan:600},b={...M,alpha:{start:1,end:.2},quantity:2,frequency:100};if(!v._dwellEmitter)try{const R=this.add.particles(v.x,v.y,"x",b);try{this.dragOverlay&&this.dragOverlay.add(R)}catch{}try{R.setScrollFactor?.(0),R.setDepth?.(60050)}catch{}v._dwellEmitter=R}catch{}try{v._dwellEmitter?.setPosition?.(v.x,v.y)}catch{}if(T>=m&&g-P>=m){v._lastFeedTime=g,v._overSince=g,v._feedCount=(v._feedCount??0)+1,r.setFood?.(10);const R=v.scaleX??1;v.setScale(Math.max(.1,R*.8));try{const A=this.dragOverlay?.getLocalPoint?this.dragOverlay.getLocalPoint(f.x,f.y,this.dragOverlayCamera):{x:f.x,y:f.y},D=this.add.particles(A.x,A.y,"x",{...M,quantity:0,frequency:-1});try{this.dragOverlay&&this.dragOverlay.add(D)}catch{}try{D.setScrollFactor?.(0),D.setDepth?.(60060)}catch{}D.explode?.(14,A.x,A.y),this.time.delayedCall(700,()=>D.destroy?.())}catch{}if(v._feedCount>=3&&v&&v.scene){try{v.disableInteractive?.()}catch{}this.isDraggingObject=!1,this.draggingItem=null;try{v._dwellEmitter?.stop?.(),v._dwellEmitter?.destroy?.(),v._dwellEmitter=null}catch{}this.time.delayedCall(0,()=>{v&&v.scene&&v.destroy()})}}}}else{const v=this.draggingItem;if(v){v._overSince=void 0;try{v._dwellEmitter?.stop?.(),v._dwellEmitter?.destroy?.(),v._dwellEmitter=null}catch{}}}}),this.input.on("pointerout",()=>{this.getVirtualPet?.()?.setHover?.(!1)}),this.input.on("pointerup",()=>{const f=this.draggingItem;if(f){try{f._dwellEmitter?.stop?.(),f._dwellEmitter?.destroy?.(),f._dwellEmitter=null}catch{}f._overSince=void 0,this.getVirtualPet?.()?.setHover?.(!1)}}),this.setupEventListeners()}initializeGameState(){const L={...WY,initialMoney:108,initialPosition:50,minKnobValue:-100,maxKnobValue:100};this.gameState=new eW(this,L),this.gameState.initialize()}initializeSystems(){const L={...zY,radarX:this.scale.gameSize.width-40};this.carMechanics=new JY(this,L),this.windowShapes=new qc(this),this.storyManager=new nW(this),this.storyManager.initialize();const k=YY;this.tutorialSystem=new jY(this,k,this.windowShapes.overlayManager);const W={...PC,speedCrankSnapPositions:[...PC.speedCrankSnapPositions]};this.gameUI=new qY(this,W);const K={swipeMinDistance:50,swipeMaxTime:500,swipeThreshold:30,dragSensitivity:1,momentumMultiplier:.1,enableKeyboardControls:!0,enableSwipeControls:!0};this.inputHandlers=new tW(this,K)}createPhysicsObjects(){this.frontseatTrash=new $Y(this),this.backseatItem=new KY(this),this.frontseatKeys=new ZY(this);const L=this.cameras.main.width;this.cameras.main.height;const k=L*.8;this.keySVG=this.add.sprite(k,300,"key-white"),this.keySVG.setScale(.08),this.keySVG.setOrigin(.5,.5),this.keySVG.setAlpha(.8),this.keySVG.setDepth(60001),this.keySVG.setTint(16777215),this.hotdogSVG=this.add.sprite(100,200,"hot-dog"),this.hotdogSVG.setScale(.1),this.hotdogSVG.setOrigin(.5,.5),this.hotdogSVG.setAlpha(.8),this.hotdogSVG.setDepth(60001),this.hotdogSVG.setTint(16777215),this.tutorialSystem.setPhysicsObjects(this.frontseatKeys),this.tutorialSystem.setGameUI(this.gameUI)}initializePhysicsSafetySystem(){this.physicsSafetyTimer=this.time.addEvent({delay:1e3,callback:this.checkPhysicsObjectSafety,callbackScope:this,loop:!0}),console.log("🛡️ Physics safety system initialized - checking every 1 second")}checkPhysicsObjectSafety(){const L=this.cameras.main.width,k=this.cameras.main.height,W={left:-100,right:L+100,top:-100,bottom:k+100};[{name:"frontseatTrash",obj:this.frontseatTrash},{name:"backseatItem",obj:this.backseatItem},{name:"frontseatKeys",obj:this.frontseatKeys}].forEach(({name:j,obj:S})=>{if(!S||!S.gameObject||!S.gameObject.body)return;const w=S.gameObject.body,s=w.position.x,c=w.position.y;(s<W.left||s>W.right||c<W.top||c>W.bottom)&&(console.log(`🚨 ${j} fell out of bounds at (${s.toFixed(1)}, ${c.toFixed(1)}) - respawning`),this.respawnPhysicsObject(j,S))})}respawnPhysicsObject(L,k){const W=this.cameras.main.width,K=this.cameras.main.height;let j,S;switch(L){case"frontseatTrash":j=100,S=200;break;case"backseatItem":j=230,S=320;break;case"frontseatKeys":j=W*.8,S=200;break;default:j=ht.Math.Between(50,W-50),S=K*.5}if(k.gameObject&&k.gameObject.body){const w=k.gameObject.body;w.velocity={x:0,y:0},w.angularVelocity=0,w.position={x:j,y:S},k.gameObject.setPosition(j,S),console.log(`✅ ${L} respawned at (${j}, ${S})`)}}selectRegion(L){console.log(`Region selected: ${L}`),this.gameState.changeRegion(L),this.stopMenuOpen=!1,this.carStarted=!0,this.gameState.updateState({carStarted:!0});const k=this.gameState.getState().step||0;this.carMechanics.startDriving(k);const W=this.scene.get("AppScene");W&&(W.isPaused=!1,this.events.emit("gameResumed")),this.gameState.isFinalSequenceForRegion()?this.enableNightTimeMode():this.disableNightTimeMode(),console.log(`✅ Region changed to ${L} - driving restarted`)}enableNightTimeMode(){if(this.nightModeEnabled)return;this.nightModeEnabled=!0;const L=this.scene.get("MenuScene");L&&L.menuManager&&L.menuManager.currentDialog||console.log("🌙 Enabling night time mode"),this.nightTimeOverlay||(this.nightTimeOverlay=this.add.rectangle(this.cameras.main.width/2,this.cameras.main.height/2,this.cameras.main.width,this.cameras.main.height,0,.3),this.nightTimeOverlay.setScrollFactor(0),this.nightTimeOverlay.setDepth(2e4)),this.nightTimeOverlay.setVisible(!0),this.carMechanics&&this.carMechanics.setNightTimeMode(!0)}disableNightTimeMode(){this.nightTimeOverlay&&this.nightTimeOverlay.setVisible(!1),this.carMechanics&&this.carMechanics.setNightTimeMode(!1)}addDevSequenceButton(){const L=this.add.text(10,10,"DEV: Last Sequence",{fontSize:"14px",color:"#ff0000",backgroundColor:"#000000",padding:{x:8,y:4}});L.setScrollFactor(0),L.setDepth(5e4),L.setInteractive(),L.on("pointerdown",()=>{const k=this.gameState.getSequencesForCurrentRegion(),W=k-1;this.gameState.updateState({showsInCurrentRegion:W}),console.log(`🔧 DEV: Set sequence to ${W+1}/${k}`)})}generateCountdownValue(){const L=Math.random(),k=Math.random(),K=Math.sqrt(-2*Math.log(L))*Math.cos(2*Math.PI*k)*1.5+9,j=Math.max(6,Math.min(12,Math.round(K)));return console.log(`🎲 Generated countdown value: ${j} (from normal distribution)`),j}createGameContentContainer(){this.gameContentContainer=this.add.container(0,0),this.gameContentContainer.setName("gameContentContainer"),this.cameras.main.width,this.cameras.main.height,this.gameContentContainer.add(this.frontseatTrash.gameObject),this.gameContentContainer.add(this.backseatItem.gameObject),this.gameContentContainer.add(this.frontseatKeys.gameObject)}createMagneticTarget(){const L=ri.getMagneticTarget(),k={x:L.position.x,y:L.position.y,radius:L.radius,inactiveColor:$s.magneticTargetInactiveColor};this.magneticTarget=this.add.graphics(),this.magneticTarget.lineStyle(3,k.inactiveColor,1),this.magneticTarget.strokeCircle(k.x,k.y,k.radius);const W=this.matter.add.circle(k.x,k.y,k.radius,{isStatic:!0,isSensor:!0,render:{visible:!1}});this.magneticTarget.magneticBody=W,this.magneticTarget.setScrollFactor(1,1),this.magneticTarget.setDepth(10001),this.gameContentContainer.add(this.magneticTarget)}setupPhysicsWorlds(){this.matter.world.setBounds(0,0,this.cameras.main.width,this.cameras.main.height),this.createRaisedFloor(),this.matter.world.setGravity($s.gravityX,$s.gravityY)}createRaisedFloor(){const L=this.cameras.main.width,W=this.cameras.main.height*.9;this.matter.add.rectangle(L/2,W,L,20,{isStatic:!0});const j=this.add.rectangle(L/2,W,L,4,3355443);j.setDepth(999),j.setAlpha(.8)}setupEventListeners(){this.gameState.setEventCallbacks({onStateChange:L=>{this.gameUI.updateUI(L);const k=this.gameState.getSequencesForCurrentRegion();this.gameUI.updateRegionInfoWithTotal(L.currentRegion,L.showsInCurrentRegion,k),this.gameState.isFinalSequenceForRegion()?this.enableNightTimeMode():this.disableNightTimeMode();const W=this.carMechanics.getPlannedExits(),K=this.carMechanics.getPlannedCyoa(),j=this.carMechanics.getPlannedStory(),S=JSON.stringify({plannedExits:W,plannedCyoa:K,plannedStory:j});this.lastPlannedData!==S&&(this.lastPlannedData=S,this.gameUI.updateThresholdIndicators(W,K,j)),this.scheduleTutorialUpdate(0)},onSaveComplete:L=>{},onLoadComplete:(L,k)=>{L&&k&&this.gameUI.updateUI(k)}}),this.inputHandlers.setEventCallbacks({onSteeringInput:L=>{this.onSteeringInput(L)},onSwipeLeft:()=>{this.switchToBackseat()},onSwipeRight:()=>{this.switchToFrontseat()},onToggleDriving:()=>{this.toggleDrivingMode()}}),this.events.on("potholeHit",()=>{const L=this.scene.get("MenuScene");if(L){L.events.emit("showPotholeMenu");const k=L.menuManager;k?.showPotholeMenu&&k.showPotholeMenu(),this.scene.bringToTop("MenuScene")}this.applyLargeBumpEffectToAllMatterObjects(),this.applyScreenShake(.02,250)}),this.events.on("potholeMenuShake",()=>{this.applyScreenShake(.01,180)}),this.events.on("step",this.onStepEvent,this),this.events.on("halfStep",this.onHalfStepEvent,this),this.events.on("gamePaused",this.onGamePaused,this),this.events.on("gameResumed",this.onGameResumed,this),this.events.on("turnKey",this.onTurnKey,this),this.events.on("removeKeys",this.onRemoveKeys,this),this.events.on("ignitionMenuShown",this.onIgnitionMenuShown,this),this.events.on("ignitionMenuHidden",this.onIgnitionMenuHidden,this),this.events.on("tutorialInterruptClosed",this.onTutorialInterruptClosed,this),this.events.on("speedUpdate",this.onSpeedUpdate,this),this.events.on("steeringInput",this.onSteeringInput,this),this.events.on("cameraAngleChanged",this.onCameraAngleChanged,this),this.events.on("storyCompleted",this.onStoryCompleted,this),this.game.events.on("hidden",()=>{const L=this.gameState.getState();L.gameStarted&&!L.hasOpenMenu&&this.scene.get("MenuScene").events.emit("showPauseMenu")})}updateTutorialSystem(){const L=this.scene.get("MenuScene"),k=L&&L.menuManager&&L.menuManager.currentDialog,W=k?L.menuManager.currentDisplayedMenuType:null,K={keysInIgnition:this.keysInIgnition,carStarted:this.carStarted,hasOpenMenu:!!k,currentMenuType:W,steeringUsed:this.steeringUsed,inExitCollisionPath:this.isPlayerInExitCollisionPath()},j=this.hasShownCrankTutorial,S=this.hasShownSteeringTutorial;this.tutorialSystem.updateTutorialOverlay(K);const w=this.tutorialSystem.getCurrentTutorialState();w==="crank"?(this.hasShownCrankTutorial=!0,this.hasClearedCrankTutorial=!1):j&&w!=="crank"&&(this.hasClearedCrankTutorial=!0),w==="steering"?(this.hasShownSteeringTutorial=!0,this.hasClearedSteeringTutorial=!1):S&&w!=="steering"&&(this.hasClearedSteeringTutorial=!0);try{const s=this.scene.get("MenuScene"),c=!!(s&&s.menuManager&&s.menuManager.currentDialog),y=!!w&&w!=="none";c||this.gameState.updateState({hasOpenMenu:y})}catch{}}scheduleTutorialUpdate(L=0){this.tutorialUpdateScheduled||(this.tutorialUpdateScheduled=!0,this.time.delayedCall(L,()=>{this.tutorialUpdateScheduled=!1,this.updateTutorialSystem()}))}resetCrankToZero(){}pause(){this.carMechanics.pauseDriving(),this.inputHandlers.resetInputState()}resume(){this.shouldAutoRestartDriving&&this.drivingMode&&this.carMechanics.resumeDriving()}update(){if(!this.gameState)return;const L=this.gameState.getState().step||0;this.carMechanics&&this.carMechanics.update(L),this.gameUI&&this.gameUI.update(Mo.performance.uiUpdateDeltaMs);for(let j=0;j<this.virtualPets.length;j++){const S=this.virtualPets[j];if(S&&S.update)try{S.update()}catch{}}this.frontseatKeys&&this.frontseatTrash&&this.backseatItem&&this.applyMagneticAttraction(),this.gravityXCurrent=ht.Math.Linear(this.gravityXCurrent,this.gravityXTarget,.1),this.matter.world.setGravity(this.gravityXCurrent,this.gravityBaseY);for(let j=0;j<this.virtualPets.length;j++){const S=this.virtualPets[j],w=this.petLabels[j];if(!S||!w)continue;const s=S.getFeedAnchor?.(),c=S.getPetSprite?.();s&&c&&(w.setPosition(c.x,c.y-(s.r+20)),w.setDepth(70050+j),w.setText(String(j+1)),w.setVisible(!0))}if(this.keySVG&&this.frontseatKeys&&this.frontseatKeys.gameObject){const j=this.gameContentContainer.getWorldTransformMatrix().transformPoint(this.frontseatKeys.gameObject.x,this.frontseatKeys.gameObject.y);this.keySVG.setPosition(j.x,j.y),this.keySVG.physicsRotation=this.frontseatKeys.gameObject.rotation,this.frontseatKeys.gameObject.isDragging?this.keySVG.setDepth(110001):this.keySVG.setDepth(60001)}if(this.hotdogSVG&&this.frontseatTrash&&this.frontseatTrash.gameObject){const j=this.gameContentContainer.getWorldTransformMatrix().transformPoint(this.frontseatTrash.gameObject.x,this.frontseatTrash.gameObject.y);this.hotdogSVG.setPosition(j.x,j.y),this.hotdogSVG.setRotation(this.frontseatTrash.gameObject.rotation),this.frontseatTrash.gameObject.isDragging?this.hotdogSVG.setDepth(110001):this.hotdogSVG.setDepth(60001)}const k=this.frontseatKeys?.gameObject;k&&k._justReleasedAt&&Date.now()-k._justReleasedAt<50&&(this.keysAttractionUntil=Date.now()+Mo.magnetic.attractionWindowMs,k._justReleasedAt=void 0);const W=this.scene.get("MenuScene");!!!(W&&W.menuManager&&W.menuManager.currentDialog)&&!this.keysInIgnition&&(this.tutorialUpdateCounter||(this.tutorialUpdateCounter=0),this.tutorialUpdateCounter++,this.tutorialUpdateCounter%5===0&&this.tutorialSystem.updateTutorialOverlay({keysInIgnition:this.keysInIgnition,carStarted:this.carStarted,hasOpenMenu:!1,currentMenuType:null,steeringUsed:this.steeringUsed}),this.tutorialSystem.updateTutorialMaskRealTime&&this.tutorialSystem.updateTutorialMaskRealTime()),this.inputHandlers&&this.inputHandlers.setInputState({isDraggingObject:!1,isKnobActive:!1,keysConstraint:this.keysConstraint,hasOpenMenu:!1,currentMenuType:null})}applyMagneticAttraction(){if(!this.gameState.isGameStarted()||!this.frontseatKeys||!this.frontseatKeys.gameObject||!this.frontseatKeys.gameObject.body||!this.magneticTarget||!this.magneticTarget.magneticBody)return;const L=ri.getMagneticTarget(),k={x:L.position.x,y:L.position.y,radius:L.radius,color:$s.magneticTargetColor,magneticRange:$s.magneticRadius,magneticStrength:$s.magneticStrength,snapThreshold:$s.magneticSnapThreshold,constraintStiffness:$s.magneticConstraintStiffness,constraintDamping:$s.magneticConstraintDamping},W=this.frontseatKeys.gameObject.body,K=this.magneticTarget.magneticBody,j={x:W.position.x,y:W.position.y},S={x:K.position.x,y:K.position.y},w=S.x-j.x,s=S.y-j.y,c=Math.sqrt(w*w+s*s);this.keysConstraint;const y=!!this.frontseatKeys.gameObject.isDragging,u=Date.now()<=this.keysAttractionUntil;let h="default";if(c<=k.snapThreshold?h="snap":c<=k.magneticRange&&(h="near"),h!==this.magneticVisualState&&(this.magneticVisualState=h,this.magneticTarget.clear(),h==="snap"?this.magneticTarget.lineStyle(5,65280,1):h==="near"?this.magneticTarget.lineStyle(3,16776960,1):this.magneticTarget.lineStyle(3,k.color,1),this.magneticTarget.strokeCircle(k.x,k.y,k.radius)),u&&!y&&c<=k.snapThreshold&&!this.keysConstraint){this.keysConstraint=this.matter.add.constraint(W,K,0,.1,{pointA:{x:0,y:0},pointB:{x:0,y:0},stiffness:k.constraintStiffness,damping:k.constraintDamping}),console.log("🔑 Keys constraint created successfully:",!!this.keysConstraint),this.keysInIgnition=!0,this.gameState.updateState({keysInIgnition:!0}),console.log("Keys snapped to ignition");const l=this.scene.get("AppScene");l&&(l.isPaused=!0,this.events.emit("gamePaused")),this.events.emit("showTurnKeyMenu");const n=this.scene.get("MenuScene");if(n&&n.scene.bringToTop(),console.log("✅ Turn key menu event emitted and MenuScene brought to top"),this.gameState.getTutorialPhase()==="keys_placement"&&this.gameState.advanceTutorial(),this.frontseatKeys.gameObject.body){const o=this.frontseatKeys.gameObject.body;o.isStatic=!0,o._originalCollisionFilter={group:o.collisionFilter?.group??0,category:o.collisionFilter?.category??1,mask:o.collisionFilter?.mask??65535},o._originalIsSensor=!!o.isSensor,o.isSensor=!0,o.collisionFilter={group:-1,category:1,mask:0}}this.scheduleTutorialUpdate(0),this.gameState.isInTutorial(),console.log("Checking ignition menu conditions - carStarted:",this.carStarted,"keysConstraint:",!!this.keysConstraint,"keysInIgnition:",this.keysInIgnition),!this.carStarted&&this.keysConstraint?(console.log("✅ Showing turn key menu - conditions met"),this.showTurnKeyMenu()):(console.log("❌ Not showing turn key menu - conditions not met"),this.carStarted&&console.log("  - Reason: car already started"),this.keysConstraint||console.log("  - Reason: no keys constraint")),this.frontseatKeys.gameObject.setScrollFactor(1,1),this.magneticTarget.clear(),this.magneticTarget.lineStyle(5,65280,1),this.magneticTarget.strokeCircle(k.x,k.y,k.radius)}else if(c>k.magneticRange&&this.keysConstraint)this.matter.world.removeConstraint(this.keysConstraint),this.keysConstraint=null,this.keysInIgnition=!1,this.gameState.updateState({keysInIgnition:!1}),this.turnOffCar(),this.restoreKeyPhysics(),this.frontseatKeys.gameObject.setScrollFactor(1,0),this.resetCrankToZero(),this.scheduleTutorialUpdate(Mo.tutorial.scheduleDelayMs);else if(u&&!y&&c<=k.magneticRange&&c>k.snapThreshold&&!this.keysConstraint){const l=k.magneticStrength*(1-c/k.magneticRange);if(c>0){const n=w/c*l,o=s/c*l;this.matter.body.applyForce(W,j,{x:n,y:o})}}}showTurnKeyMenu(){console.log("showTurnKeyMenu() called - emitting showTurnKeyMenu event");const L=this.scene.get("MenuScene");L?(L.events.emit("showTurnKeyMenu"),this.scene.bringToTop("MenuScene"),console.log("✅ Turn key menu event emitted and MenuScene brought to top")):console.log("❌ MenuScene not found!")}closeCurrentMenu(){const L=this.scene.get("MenuScene");L&&L.events.emit("closeCurrentMenu")}onTurnKey(){if(console.log("GameScene: onTurnKey called - carStarted:",this.carStarted),this.carStarted){console.log("Turn Key ignored: car already started");return}if(console.log("GameScene: Starting car - setting carStarted to true"),this.carStarted=!0,this.gameState.updateState({carStarted:!0}),this.carMechanics.isDriving())console.log("GameScene: CarMechanics was already driving");else{const L=this.gameState.getState().step||0;console.log("GameScene: Starting driving mechanics at step:",L),this.carMechanics.startDriving(L),console.log("GameScene: Driving mechanics started");const k=this.carMechanics.getPlannedExits(),W=this.carMechanics.getPlannedCyoa(),K=this.carMechanics.getPlannedStory();console.log("🔺 GameScene: Updating threshold indicators after startDriving"),this.gameUI.updateThresholdIndicators(k,W,K)}if(this.firstCarStart&&(this.firstCarStart=!1,!this.gameState.isInTutorial())){const L=this.children.getByName("rearviewContainer");L&&this.tweens.add({targets:L,y:0,duration:1800,ease:"Cubic.easeOut",delay:500,onComplete:()=>{this.virtualPets.forEach((k,W)=>{const K=k.getRoot?.();K&&this.tweens.add({targets:K,alpha:1,duration:800,ease:"Cubic.easeOut",delay:W*100,onComplete:()=>{W===this.virtualPets.length-1&&this.gameUI.fadeInRegionalUI()}})})}})}if(this.scheduleTutorialUpdate(0),this.gameUI&&this.gameUI.frontseatButton){const L=this.gameUI;L.frontseatButton?.setVisible(!0),L.backseatButton?.setVisible(!0),L.lookUpLabel?.setVisible(!0),L.lookDownLabel?.setVisible(!0)}}onRemoveKeys(){this.removeKeysFromIgnition()}onCameraAngleChanged(L){if(this.keySVG){const W=(this.keySVG.physicsRotation||0)+L;this.keySVG.setAngle(W)}}onIgnitionMenuShown(){console.log("Ignition menu shown"),this.input.enabled=!1}onIgnitionMenuHidden(){console.log("Ignition menu hidden"),this.input.enabled=!0;const L=this.scene.get("AppScene");L&&(L.isPaused=!1),this.events.emit("gameResumed"),console.log("Game resumed after ignition menu closed")}removeKeysFromIgnition(){this.keysConstraint&&(this.matter.world.removeConstraint(this.keysConstraint),this.keysConstraint=null),this.keysInIgnition=!1,this.gameState.updateState({keysInIgnition:!1}),this.turnOffCar(),this.restoreKeyPhysics();const L=ri.getMagneticTarget();this.magneticTarget.clear(),this.magneticTarget.lineStyle(3,16711680,1),this.magneticTarget.strokeCircle(L.position.x,L.position.y,L.radius),this.resetCrankToZero(),this.closeCurrentMenu(),this.scheduleTutorialUpdate(100)}restoreKeyPhysics(){const L=this.frontseatKeys?.gameObject;if(!L||!L.body)return;const k=L.body;k.isStatic=!1,typeof k._originalIsSensor=="boolean"?(k.isSensor=k._originalIsSensor,delete k._originalIsSensor):k.isSensor=!1,k._originalCollisionFilter?(k.collisionFilter=k._originalCollisionFilter,delete k._originalCollisionFilter):k.collisionFilter={group:0,category:1,mask:65535};try{this.matter.body.setVelocity(k,{x:0,y:0}),this.matter.body.setAngularVelocity(k,0)}catch{}const W=this.cameras.main.width,K=this.cameras.main.height,j=15,S=ht.Math.Clamp(L.x,j,W-j),w=ht.Math.Clamp(L.y,j,K*.9-j);try{this.matter.body.setPosition(k,{x:S,y:w})}catch{L.setPosition(S,w)}L.setIgnoreGravity?.(!1),L.setScrollFactor(1,0)}startGame(){const L=this.generateCountdownValue();this.gameState.updateState({gameTime:L}),this.gameState.startGame(),this.gameState.startTutorial(),this.carMechanics.enableTutorialMode(),this.scheduleTutorialUpdate(0),this.activateMagneticTarget()}activateMagneticTarget(){if(this.magneticTarget){const L=ri.getMagneticTarget();this.magneticTarget.clear(),this.magneticTarget.lineStyle(3,16711680,1),this.magneticTarget.strokeCircle(L.position.x,L.position.y,L.radius)}}loadGame(L){this.gameState.loadGame(L)}getVirtualPet(L){return L!==void 0?this.virtualPets[L]||void 0:this.virtualPets[0]}showFeedingDebug(L,k){this.feedingDebug&&(this.feedingDebug.clear(),this.feedingDebug.lineStyle(2,16711680,.9).strokeRect(L.x,L.y,L.width,L.height),this.feedingDebug.lineStyle(2,65280,.9).strokeRect(k.x,k.y,k.width,k.height))}clearFeedingDebug(){this.feedingDebug?.clear()}resumeAfterCollision(){this.carMechanics.resumeDriving();const L=this.scene.get("AppScene");L&&(L.isPaused=!1),this.events.emit("gameResumed")}takeExit(){const L=this.scene.get("AppScene");L&&(L.isPaused=!1),this.events.emit("gameResumed"),this.carMechanics.resumeDriving(),console.log("GameScene: Exit taken")}resumeAfterCyoa(){this.carMechanics.resumeDriving();const L=this.scene.get("AppScene");L&&(L.isPaused=!1),this.events.emit("gameResumed"),console.log("GameScene: Resumed after CYOA")}toggleDrivingMode(){if(this.drivingMode)this.carMechanics.stopDriving(),this.drivingMode=!1;else{if(!this.carStarted){console.log("toggleDrivingMode ignored: car is not started");return}const L=this.gameState.getState().step||0;this.carMechanics.startDriving(L),this.drivingMode=!0}}switchToFrontseat(){this.currentPosition==="backseat"&&(this.currentPosition="frontseat",this.gameState.updateState({currentPosition:"frontseat"}),this.tweens.add({targets:this.gameContentContainer,x:0,y:0,duration:500,ease:"Power2"}))}switchToBackseat(){console.log("Backseat switching disabled - staying in frontseat view")}applyScreenShake(L=10,k=200){this.cameras.cameras.forEach(K=>{const j=K.name||"";j.includes("UI")||j.includes("Menu")||j.includes("HUD")||K.shake(k,L)})}applyLargeBumpEffectToAllMatterObjects(){const L=this.matter.world;if(!L)return;L.getAllBodies().forEach((W,K)=>{if(W.isStatic)return;const j=W.label&&W.label.includes("Circle Body")&&W.collisionFilter&&W.collisionFilter.group===-2,S=j?{x:0,y:-.1}:{x:0,y:-.06};this.matter.body.applyForce(W,W.position,S);const s={x:(Math.random()-.5)*(j?.04:.02),y:S.y};if(this.matter.body.applyForce(W,W.position,s),j){const c=this.matter.body.getVelocity(W),y={x:c.x,y:c.y*.3};this.matter.body.setVelocity(W,y)}})}applySmallBumpEffectToAllMatterObjects(){const L=this.matter.world;if(!L)return;L.getAllBodies().forEach((W,K)=>{if(W.isStatic)return;const j=W.label&&W.label.includes("Circle Body")&&W.collisionFilter&&W.collisionFilter.group===-2,S=j?{x:0,y:-.006}:{x:0,y:-.002};this.matter.body.applyForce(W,W.position,S);const s={x:(Math.random()-.5)*(j?.006:.003),y:S.y};if(this.matter.body.applyForce(W,W.position,s),j){const c=this.matter.body.getVelocity(W),y={x:c.x,y:c.y*.05};this.matter.body.setVelocity(W,y)}})}applyBumpEffectToAllMatterObjects(){const L=this.matter.world;if(!L)return;L.getAllBodies().forEach((W,K)=>{if(W.isStatic)return;const j=W.label&&W.label.includes("Circle Body")&&W.collisionFilter&&W.collisionFilter.group===-2,S=j?{x:0,y:-.08}:{x:0,y:-.02};this.matter.body.applyForce(W,W.position,S);const s={x:(Math.random()-.5)*(j?.04:.01),y:S.y};if(this.matter.body.applyForce(W,W.position,s),j){const c=this.matter.body.getVelocity(W),y={x:c.x,y:c.y*.15};this.matter.body.setVelocity(W,y)}})}handleTutorialStep(L){const k=this.gameState.getTutorialPhase(),W=this.gameState.getTutorialStep();switch(k){case"keys_placement":break;case"initial_driving":W>=4?(this.gameState.advanceTutorial(),this.showTutorialCountdown()):this.gameState.advanceTutorial();break;case"countdown":this.gameState.advanceTutorial(),this.showTutorialInterrupt();break;case"interrupt":break;default:console.warn("Unknown tutorial phase:",k)}}showTutorialCountdown(){}showTutorialInterrupt(){const L=this.scene.get("MenuScene");L?(L.events.emit("showTutorialInterrupt"),this.scene.bringToTop("MenuScene")):console.error("ERROR: MenuScene not found!"),this.tutorialInterruptStep=this.gameState.getState().step+2}onTutorialInterruptClosed(){if(this.gameState.advanceTutorial(),!this.carMechanics.isDriving()){const L=this.gameState.getState().step||0;this.carMechanics.startDriving(L)}this.carMechanics.disableTutorialMode(),this.time.delayedCall(200,()=>{this.revealRearviewMirror(),this.gameUI.ensureTrianglesFadeIn()}),this.tutorialInterruptStep=null}revealRearviewMirror(){const L=this.children.getByName("rearviewContainer");if(L){const k=this.cameras.main,W=Math.floor(k.height*ri.getRearviewMirror().position.y);this.tweens.add({targets:L,y:W,duration:1e3,ease:"Power2",onComplete:()=>{this.virtualPets.forEach((K,j)=>{const S=K.getRoot?.();S&&this.tweens.add({targets:S,alpha:1,duration:800,ease:"Cubic.easeOut",delay:j*100,onComplete:()=>{j===this.virtualPets.length-1&&this.gameUI.fadeInRegionalUI()}})})}})}else console.error("ERROR: Rearview container not found!")}endTutorialSequence(){console.log("🎓 Ending tutorial sequence - tutorial mode will be disabled when interrupt closes")}onStepEvent(L){this.gameState.updateState({step:L});try{this.tutorialSystem.handleStep(L)}catch(c){console.error("🎮 GameScene: Error calling handleStep:",c)}if(this.gameState.isInTutorial()){this.handleTutorialStep(L);const c=this.scene.get("MenuScene");c&&c.menuManager&&c.menuManager.updateTutorialInterruptCountdown();return}const W=!!(this.gameState.getState().carStarted&&this.carStarted),K=this.scene.get("MenuScene"),S=K&&K.menuManager&&K.menuManager.currentDisplayedMenuType&&["EXIT","SHOP","STORY_OUTCOME"].includes(K.menuManager.currentDisplayedMenuType);W&&this.carMechanics&&this.carMechanics.onStepEvent&&this.carMechanics.onStepEvent(L),W&&!S&&this.applySmallBumpEffectToAllMatterObjects(),L%4===0&&W&&!S&&this.applyBumpEffectToAllMatterObjects();const w=this.gameState.getState();if(w.gameStarted&&W&&w.gameTime>0&&(this.countdownStepCounter++,this.gameState.updateState({countdownStepCounter:this.countdownStepCounter}),this.countdownStepCounter>=16)){this.countdownStepCounter=0;const c=w.gameTime-1;this.gameState.updateState({gameTime:c,countdownStepCounter:this.countdownStepCounter}),this.events.emit("countdownChanged",{time:c,keysInIgnition:w.keysInIgnition}),this.gameState.updateListenersOnCountdown()}if(w.gameStarted&&W&&this.carMechanics.isDriving()){const c=this.scene.get("MenuScene"),u=c&&c.menuManager&&c.menuManager.currentDisplayedMenuType&&["EXIT","SHOP","STORY_OUTCOME"].includes(c.menuManager.currentDisplayedMenuType);let h=this.gameState.getState().progress||0;if(u)console.log("🎮 Progress update paused due to active menu:",c.menuManager.currentDisplayedMenuType);else{const l=this.gameState.getState().progress||0,n=this.carMechanics.getSpeedMultiplier(),o=n*100;this.carMechanics.updateGravityBasedOnSpeed(o);const f=Math.max(.3,n*2);h=l+f,this.gameState.updateState({progress:h}),w.step&&w.step%10,this.carMechanics.updateProgress(h)}if(h>=100&&!this.stopMenuOpen){this.stopMenuOpen=!0;const l=(this.gameState.getState().stops||0)+1;if(this.gameState.incrementShowsInCurrentRegion(),this.gameState.shouldChooseNextRegion()){const f=this.scene.get("MenuScene");f&&(f.events.emit("showRegionChoiceMenu",{currentRegion:this.gameState.getCurrentRegion(),connectedRegions:Po.connections[this.gameState.getCurrentRegion()]}),this.scene.bringToTop("MenuScene"))}else{const f=this.scene.get("MenuScene");f&&(console.log("Showing destination menu - pausing game"),f.events.emit("showDestinationMenu",!0),this.scene.bringToTop("MenuScene"))}const n=this.generateCountdownValue();this.gameState.updateState({stops:l,progress:0,gameTime:n,countdownStepCounter:0}),this.countdownStepCounter=0;const o=this.scene.get("AppScene");o&&(console.log("Setting app paused and emitting gamePaused"),o.isPaused=!0,this.events.emit("gamePaused"))}}if(!this.gameState.getState().hasOpenMenu&&!this.chapter1Shown&&this.storyOverlayScheduledStep===null&&this.firstSteeringLoggedStep!==null&&this.carStarted&&this.hasShownCrankTutorial&&this.hasClearedCrankTutorial&&this.hasShownSteeringTutorial&&this.hasClearedSteeringTutorial){this.storyOverlayScheduledStep=L+5;const c=this.gameUI;c?.frontseatButton?.setVisible(!0),c?.backseatButton?.setVisible(!0),c?.lookUpLabel?.setVisible(!0),c?.lookDownLabel?.setVisible(!0)}if(!this.chapter1Shown&&this.storyOverlayScheduledStep!==null&&L>=this.storyOverlayScheduledStep){if(this.gameState.getState().hasOpenMenu){this.storyOverlayScheduledStep=null;return}const y=this.scene.get("MenuScene");y&&y.menuManager&&y.menuManager.showStoryOverlay&&y.menuManager.showStoryOverlay("Chapter 1","Welcome! This story overlay will fade after 10 steps."),this.chapter1Shown=!0,this.storyOverlayScheduledStep=null,this.steeringUsed=!0,this.scheduleTutorialUpdate(0)}}onHalfStepEvent(L){this.windowShapes&&this.windowShapes.onHalfStep(L),this.tutorialSystem&&this.tutorialSystem.handleHalfStep(L)}onGamePaused(){console.log("Game paused - calling pauseDriving()"),this.carMechanics.pauseDriving(),console.log("Driving paused:",this.carMechanics.isDrivingPaused())}onGameResumed(){this.carMechanics.resumeDriving(),this.stopMenuOpen=!1}onSpeedUpdate(L){this.gameUI&&typeof this.gameUI.updateSpeedDisplay=="function"&&this.gameUI.updateSpeedDisplay(L)}onSteeringInput(L){if(Math.abs(L)>.1&&(this.steeringUsed=!0,this.scheduleTutorialUpdate(0),this.firstSteeringLoggedStep===null&&(this.firstSteeringLoggedStep=this.gameState.getState().step||0)),!this.carStarted){this.gravityXTarget=0;return}const k=Mo.gravity.maxLateralGx;this.gravityXTarget=-(ht.Math.Clamp(L,-150,150)/150)*k,this.carMechanics.handleSteering(L)}onStoryCompleted(L){console.log(`📖 Story completed: ${L.storyline} with outcome: ${L.outcome}`);const k=this.windowShapes.getQueuedNarrativeCount(),W=this.windowShapes.hasActiveNarrativeWindow();if(k>0||W){console.log(`📖 Story completed but ${k} narrative windows in queue and active window: ${W} - waiting for all to clear`),this.setupStoryQueueCompletionListener();return}this.carMechanics.hasPendingDestinationMenu()?(console.log("📖 Story completed, now showing pending destination menu"),this.carMechanics.showPendingDestinationMenu()):this.resumeAfterCyoa()}setupStoryQueueCompletionListener(){const L=()=>{const k=this.windowShapes.getQueuedNarrativeCount(),W=this.windowShapes.hasActiveNarrativeWindow();k===0&&!W?(console.log("📖 Narrative queue and active window are now clear - resuming story completion"),this.carMechanics.hasPendingDestinationMenu()?(console.log("📖 Story completed, now showing pending destination menu"),this.carMechanics.showPendingDestinationMenu()):this.resumeAfterCyoa()):(console.log(`📖 Still waiting: ${k} queued, active window: ${W}`),this.time.delayedCall(100,L))};this.time.delayedCall(100,L)}isPlayerInExitCollisionPath(){if(this.exitDetectionLogCounter||(this.exitDetectionLogCounter=0),this.exitDetectionLogCounter++,!this.carMechanics)return!1;const k=(this.carMechanics.obstacles||[]).filter(j=>{const S=j.getData("isExit"),w=j.getData("isExitPreview");return S&&!w});if(k.length===0)return!1;const W=this.carMechanics.drivingCar?.getBounds();if(!W)return!1;const K=k.some(j=>{const S=j.getData("visual");if(!S)return!1;const w=S.getBounds(),s=w.bottom>this.cameras.main.height*.3;W.bottom,w.top;const c=this.carMechanics.carX,u=this.cameras.main.width*.8,h=c>=u,l=W.width,n=c-l/2,o=c+l/2,f=w.left,r=w.right,d=n<r&&o>f;return s&&h&&d});return k.length>0,K}destroy(){this.physicsSafetyTimer&&(this.physicsSafetyTimer.destroy(),this.physicsSafetyTimer=void 0),this.carMechanics.destroy(),this.tutorialSystem.destroy(),this.gameUI.destroy(),this.inputHandlers.destroy(),this.events.off("step",this.onStepEvent,this),this.events.off("halfStep",this.onHalfStepEvent,this),this.events.off("gamePaused",this.onGamePaused,this),this.events.off("gameResumed",this.onGameResumed,this),this.events.off("turnKey",this.onTurnKey,this),this.events.off("removeKeys",this.onRemoveKeys,this),this.events.off("ignitionMenuShown",this.onIgnitionMenuShown,this),this.events.off("ignitionMenuHidden",this.onIgnitionMenuHidden,this),this.events.off("speedUpdate",this.onSpeedUpdate,this),this.events.off("steeringInput",this.onSteeringInput,this)}turnOffCar(){if(this.carStarted){console.log("Turning off car - carStarted was:",this.carStarted),this.carStarted=!1,this.gameState.updateState({carStarted:!1});try{this.carMechanics.stopDriving()}catch(L){console.log("Error calling stopDriving:",L)}this.gravityXTarget=0,console.log("Car turned off - carStarted is now:",this.carStarted)}}createDebugWindow(){this.debugWindows.forEach(k=>k.destroy()),this.debugWindows=[];const L=this.windowShapes.createRandomTestWindow();this.debugWindows.push(L),L.setDepth(2e3),this.time.delayedCall(3e3,()=>{if(L&&!L.scene)return;L.destroy();const k=this.debugWindows.indexOf(L);k>-1&&this.debugWindows.splice(k,1)}),console.log("Debug window created! Press R again to generate a new one.")}createDebugSpeechBubble(){this.debugWindows.forEach(L=>L.destroy()),this.debugWindows=[],console.log("✨ Story overlay system delegated to StoryManager")}createDebugStoryDialog(){this.debugWindows.forEach(s=>s.destroy()),this.debugWindows=[];const L=this.cameras.main.width,k=this.cameras.main.height,W=Math.floor(L*.85),K=Math.floor(k*.9),j=Math.floor((L-W)/2),S=Math.floor((k-K)/2),w=this.windowShapes.createStoryDialogComposition(j,S,W,K);w?(this.debugWindows.push(w),w.setDepth(2e3),this.time.delayedCall(1e4,()=>{if(w&&!w.scene)return;w.destroy();const s=this.debugWindows.indexOf(w);s>-1&&this.debugWindows.splice(s,1)}),console.log("Debug story dialog created! Click to advance the story, or press H again to generate a new one.")):console.log("Story dialog was queued because another narrative window is active.")}createStoryDialogWithQueue(){const L=this.cameras.main.width,k=this.cameras.main.height,W=Math.floor(L*.95),K=Math.floor(k*.8),j=Math.floor((L-W)/2),S=Math.floor((k-K)/2),w=this.windowShapes.createStoryDialogComposition(j,S,W,K);w?(w.setDepth(5e3),console.log("Story dialog created and displayed immediately")):(console.log("Story dialog queued (another dialog is active)"),console.log(`Queue length: ${this.windowShapes.getQueuedNarrativeCount()}`))}createCYOADialog(){const L=this.cameras.main.width,k=this.cameras.main.height,W=Math.floor(L*.95),K=Math.floor(k*.8),j=Math.floor((L-W)/2),S=Math.floor((k-K)/2),w=["You stand before an ancient crossroads...","Three paths stretch out before you, each shrouded in mystery.","Which path will you choose?"],s=[{text:"Left Path",callback:()=>{console.log("Player chose the Left Path - leads to the forest!")}},{text:"Center Path",callback:()=>{console.log("Player chose the Center Path - leads to the mountain!")}},{text:"Right Path",callback:()=>{console.log("Player chose the Right Path - leads to the sea!")}}],c=this.windowShapes.createCYOADialog(j,S,W,K,w,s);c?(c.setDepth(5e3),console.log("✅ CYOA dialog created with H menu styling")):console.log("CYOA dialog was queued (another narrative is active)")}triggerNextExitMenu(){console.log("🚪 Debug: Triggering next exit menu for testing"),this.carMechanics&&(console.log("🚪 Debug: Pausing driving for exit menu test"),this.carMechanics.pauseDriving());const L=this.scene.get("MenuScene");L?(console.log("🚪 Debug: Emitting showObstacleMenu event with shopCount=3, exitNumber=1"),L.events.emit("showObstacleMenu","exit",3,1),this.scene.bringToTop("MenuScene")):console.warn("🚪 Debug: MenuScene not found - cannot trigger exit menu")}}const aW={type:ht.AUTO,width:360,height:640,parent:"game",backgroundColor:"#facade",scene:[BY,IY,GY,UY,HY,rW],render:{antialias:!0,pixelArt:!1,roundPixels:!1,antialiasGL:!0},scale:{mode:ht.Scale.FIT,autoCenter:ht.Scale.CENTER_BOTH,width:360,height:640,min:{width:180,height:320},max:{width:720,height:1280}},physics:{default:"matter",matter:{gravity:{x:0,y:0},debug:!1}},plugins:{scene:[{key:"rexUI",plugin:FY,mapping:"rexUI"}]},fps:{target:60,forceSetTimeOut:!0,limit:60,deltaHistory:10},disableContextMenu:!0,powerPreference:"high-performance"};window.__phaserGame||(window.__phaserGame=new ht.Game(aW));typeof window<"u"&&(window.__ENABLE_TUTORIAL_DEBUG=!1);
